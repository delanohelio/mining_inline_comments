{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNjc1NTMy", "number": 3393, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MDoxMVrODyCHXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MTowNlrODyCIkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzkwMDQ0OnYy", "diffSide": "RIGHT", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MDoxMVrOGF1yMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNTowMjo1MFrOGF-FXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzI2NQ==", "bodyText": "yes, we need it because this value could be used in\n\nIsl latency database field\nopentsdb rtt metric\nboth these metrics are in nano seconds", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408777265", "createdAt": "2020-04-15T11:40:11Z", "author": {"login": "niksv"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -601,7 +604,7 @@ private void handleDiscoveryPacket(OfInput input, IOFSwitch destSwitch, Discover\n                 source.getPortNo(),\n                 destination.getSwitchId(),\n                 destination.getPortNo(),\n-                latency,\n+                scaleLatencyMsToNs(latencyMs),  // TODO(surabujin): do we really need fake ns accuracy?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODkxMzI0Nw==", "bodyText": "So we should make this conversion right before storing it in the mentioned storage. At least the fake ns accuracy conversion reason will be more obvious.", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408913247", "createdAt": "2020-04-15T15:02:50Z", "author": {"login": "surabujin"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -601,7 +604,7 @@ private void handleDiscoveryPacket(OfInput input, IOFSwitch destSwitch, Discover\n                 source.getPortNo(),\n                 destination.getSwitchId(),\n                 destination.getPortNo(),\n-                latency,\n+                scaleLatencyMsToNs(latencyMs),  // TODO(surabujin): do we really need fake ns accuracy?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzI2NQ=="}, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzkwMzUzOnYy", "diffSide": "RIGHT", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MTowNlrOGF1z_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjozMDo1MVrOGF3cbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzcyNQ==", "bodyText": "Shouldn't the method be private? I don't a reason for  PathVerificationService to expose such methods.", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408777725", "createdAt": "2020-04-15T11:41:06Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -740,4 +740,14 @@ private long getSwitchPortSpeed(IOFSwitch sw, OFPort inPort) {\n     private long getAvailableBandwidth(long speed) {\n         return (long) (speed * islBandwidthQuotient);\n     }\n+\n+    /**\n+     * Convert milliseconds into nanoseconds, taking in account illegal (-1) latency value.\n+     */\n+    public static long scaleLatencyMsToNs(long latencyMs) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwNDQ2MA==", "bodyText": "yes, it should. There was a plan to use it outside, but this is not required anymore.", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408804460", "createdAt": "2020-04-15T12:30:51Z", "author": {"login": "surabujin"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -740,4 +740,14 @@ private long getSwitchPortSpeed(IOFSwitch sw, OFPort inPort) {\n     private long getAvailableBandwidth(long speed) {\n         return (long) (speed * islBandwidthQuotient);\n     }\n+\n+    /**\n+     * Convert milliseconds into nanoseconds, taking in account illegal (-1) latency value.\n+     */\n+    public static long scaleLatencyMsToNs(long latencyMs) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzcyNQ=="}, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1935, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}