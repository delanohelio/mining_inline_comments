{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MzE2NzI0", "number": 3830, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyODozMFrOE5UIUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyODozMFrOE5UIUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTM0MDk5OnYy", "diffSide": "RIGHT", "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/DiscoveryPortStatusMonitor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyODozMFrOHzsaXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyODozMFrOHzsaXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NzA2OA==", "bodyText": "resetting reset :)", "url": "https://github.com/telstra/open-kilda/pull/3830#discussion_r523967068", "createdAt": "2020-11-16T08:28:30Z", "author": {"login": "niksv"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/DiscoveryPortStatusMonitor.java", "diffHunk": "@@ -22,25 +22,31 @@\n import org.openkilda.wfm.share.model.IslReference;\n import org.openkilda.wfm.topology.network.controller.isl.IslFsm.IslFsmContext;\n import org.openkilda.wfm.topology.network.controller.isl.IslFsm.IslFsmEvent;\n-import org.openkilda.wfm.topology.network.model.LinkStatus;\n+import org.openkilda.wfm.topology.network.model.IslEndpointPortStatus;\n+import org.openkilda.wfm.topology.network.model.RoundTripStatus;\n \n import lombok.extern.slf4j.Slf4j;\n \n import java.util.Optional;\n \n @Slf4j\n-public class DiscoveryPortStatusMonitor extends DiscoveryMonitor<LinkStatus> {\n+public class DiscoveryPortStatusMonitor extends DiscoveryMonitor<IslEndpointPortStatus> {\n+    // To avoid a race condition between port-down and round-trip updates we enforce to wait for at least\n+    // MIN_UPDATE_COUNT updates before resetting reset DOWN state on both endpoints.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f352a1c69c5313984f9680ec99470db93aede905"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2272, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}