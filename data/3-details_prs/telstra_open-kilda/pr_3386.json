{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNjI2OTM3", "number": 3386, "title": "Fixed incorrect NoviflowSpecificFeature methods", "bodyText": "Methods isNoviSwitch() and is100GbHw() returned incorrect values for WB5000 switches", "createdAt": "2020-04-13T12:40:58Z", "url": "https://github.com/telstra/open-kilda/pull/3386", "merged": true, "mergeCommit": {"oid": "963d1631fce7a24ef37e146efc7270673a41275c"}, "closed": true, "closedAt": "2020-04-14T16:05:48Z", "author": {"login": "niksv"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXQMtNAFqTM5MjE5ODg2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXi7MVABqjMyMzA5NzQxOTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTk4ODY1", "url": "https://github.com/telstra/open-kilda/pull/3386#pullrequestreview-392198865", "createdAt": "2020-04-13T14:58:42Z", "commit": {"oid": "5b10bf296e603cf155dcc59848e69147bd9fb617"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b10bf296e603cf155dcc59848e69147bd9fb617", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/5b10bf296e603cf155dcc59848e69147bd9fb617", "committedDate": "2020-04-13T12:38:10Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}, "afterCommit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a2891402f9344365849b2bcbc72123f45262fa86", "committedDate": "2020-04-14T10:15:50Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODU1NTI0", "url": "https://github.com/telstra/open-kilda/pull/3386#pullrequestreview-392855524", "createdAt": "2020-04-14T11:56:51Z", "commit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODU4MTk5", "url": "https://github.com/telstra/open-kilda/pull/3386#pullrequestreview-392858199", "createdAt": "2020-04-14T12:01:02Z", "commit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMjowMTowMlrOGFLR_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMjowMToyNlrOGFLS3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MDg5NA==", "bodyText": "let's rename it to something like isWBSeries", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408080894", "createdAt": "2020-04-14T12:01:02Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/feature/NoviflowSpecificFeature.java", "diffHunk": "@@ -23,15 +23,28 @@\n abstract class NoviflowSpecificFeature extends AbstractFeature {\n     public static final String NOVIFLOW_MANUFACTURER_SUFFIX = \"noviflow\";\n \n-    boolean isNoviSwitch(IOFSwitch sw) {\n-        Optional<SwitchDescription> description = Optional.ofNullable(sw.getSwitchDescription());\n-        return description\n-                .map(SwitchDescription::getManufacturerDescription)\n+    static boolean isNoviSwitch(IOFSwitch sw) {\n+        if (sw == null || sw.getSwitchDescription() == null) {\n+            return false;\n+        }\n+\n+        SwitchDescription description = sw.getSwitchDescription();\n+\n+        if (E_SWITCH_MANUFACTURER_DESCRIPTION.equalsIgnoreCase(description.getManufacturerDescription())) {\n+            return true;\n+        }\n+\n+        if (E_SWITCH_HARDWARE_DESCRIPTION_REGEX.matcher(\n+                Optional.ofNullable(description.getHardwareDescription()).orElse(\"\")).matches()) {\n+            return true;\n+        }\n+\n+        return Optional.ofNullable(description.getManufacturerDescription())\n                 .map(String::toLowerCase)\n                 .orElse(\"\").contains(NOVIFLOW_MANUFACTURER_SUFFIX);\n     }\n \n-    boolean is100GbHw(IOFSwitch sw) {\n+    static boolean is100GbHw(IOFSwitch sw) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MTExNg==", "bodyText": "let's rename it to something like isSMSeries", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408081116", "createdAt": "2020-04-14T12:01:26Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/feature/NoviflowSpecificFeature.java", "diffHunk": "@@ -51,7 +64,7 @@ boolean is100GbHw(IOFSwitch sw) {\n                 .orElse(\"\")).matches();\n     }\n \n-    boolean isVirtual(IOFSwitch sw) {\n+    static boolean isVirtual(IOFSwitch sw) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86"}, "originalPosition": 48}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2891402f9344365849b2bcbc72123f45262fa86", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a2891402f9344365849b2bcbc72123f45262fa86", "committedDate": "2020-04-14T10:15:50Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}, "afterCommit": {"oid": "3889056f55211b7665fa24566b9dd0933e7952a7", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/3889056f55211b7665fa24566b9dd0933e7952a7", "committedDate": "2020-04-14T12:12:45Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6c40df252053f77beaf4c9a05c1e8ad70211d38", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d6c40df252053f77beaf4c9a05c1e8ad70211d38", "committedDate": "2020-04-14T12:47:31Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3889056f55211b7665fa24566b9dd0933e7952a7", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/3889056f55211b7665fa24566b9dd0933e7952a7", "committedDate": "2020-04-14T12:12:45Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}, "afterCommit": {"oid": "d6c40df252053f77beaf4c9a05c1e8ad70211d38", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d6c40df252053f77beaf4c9a05c1e8ad70211d38", "committedDate": "2020-04-14T12:47:31Z", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3622, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}