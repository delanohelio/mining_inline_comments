{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NzEzMTIx", "number": 295, "title": "Stop publishing test artifacts & internal modules", "bodyText": "Isolates the consumable test artifacts for d2 and darkcluster into the new modules d2-test-api and darkcluster-test-api, respectively. Also discontinues publishing \"internal\" modules to Bintray, with these modules determined as modules with no main source set and no known consumers. Both these changes are backward-incompatible.\nNotable changes:\n\nBumps pegasus to 29.0.0\nStops publishing the following modules to Bintray (i.e. stops publishing them at all):\n\n'd2-benchmark'\n'd2-int-test'\n'generator-test\n'log-test-config'\n'r2-int-test'\n'r2-perf-test'\n'restli-internal-testutils'\n\n\nStops publishing test artifacts (e.g. testArtifacts configuration, -tests classifier) for all modules (only applies to d2 and darkcluster):\n\nMoves consumable classes (e.g. ZKTestUtils) to modules d2-test-api and darkcluster-test-api\nTo make some inner classes (TrackerClientTest.TestClient, WarmupLoadBalancerTest.TestLoadBalancer) accessible, I moved them to being top-level classes (TestClient, TestLoadBalancer).\n\n\n\nOpen Questions:\n\nSince the inner classes are now top-level (TestClient, TestLoadBalancer), should they be renamed to be less ambiguous?", "createdAt": "2020-05-14T02:32:37Z", "url": "https://github.com/linkedin/rest.li/pull/295", "merged": true, "mergeCommit": {"oid": "269959873d693a09dd0329de094c984d02b1c4e9"}, "closed": true, "closedAt": "2020-05-20T03:11:48Z", "author": {"login": "evanw555"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchE8f4gFqTQxMTQzOTg1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABci-2NdABqjMzNTQzMzE0NzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNDM5ODU5", "url": "https://github.com/linkedin/rest.li/pull/295#pullrequestreview-411439859", "createdAt": "2020-05-14T03:25:46Z", "commit": {"oid": "98d77b1dd6923ae8512ac2c29d480be179de43eb"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwMzoyNTo0N1rOGVKwzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwMzoyODowN1rOGVKy7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg0OTYxNQ==", "bodyText": "I know this file is not written by you, but this variables naming is not consistent with other class variables, can you fix this by this chance?", "url": "https://github.com/linkedin/rest.li/pull/295#discussion_r424849615", "createdAt": "2020-05-14T03:25:47Z", "author": {"login": "junchuanwang"}, "path": "d2-test-api/src/main/java/com/linkedin/d2/balancer/clients/TestClient.java", "diffHunk": "@@ -0,0 +1,150 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.d2.balancer.clients;\n+\n+import com.linkedin.common.callback.Callback;\n+import com.linkedin.common.util.None;\n+import com.linkedin.data.ByteString;\n+import com.linkedin.r2.filter.R2Constants;\n+import com.linkedin.r2.message.RequestContext;\n+import com.linkedin.r2.message.rest.RestRequest;\n+import com.linkedin.r2.message.rest.RestResponse;\n+import com.linkedin.r2.message.rest.RestResponseBuilder;\n+import com.linkedin.r2.message.stream.StreamRequest;\n+import com.linkedin.r2.message.stream.StreamResponse;\n+import com.linkedin.r2.message.stream.StreamResponseBuilder;\n+import com.linkedin.r2.message.stream.entitystream.ByteStringWriter;\n+import com.linkedin.r2.message.stream.entitystream.EntityStreams;\n+import com.linkedin.r2.transport.common.bridge.client.TransportClient;\n+import com.linkedin.r2.transport.common.bridge.common.TransportCallback;\n+import com.linkedin.r2.transport.common.bridge.common.TransportResponseImpl;\n+import java.util.Map;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+\n+public class TestClient implements TransportClient\n+{\n+  public static final int DEFAULT_REQUEST_TIMEOUT = 500;\n+  public StreamRequest streamRequest;\n+  public RestRequest restRequest;\n+  public RequestContext restRequestContext;\n+  public Map<String, String> restWireAttrs;\n+  public TransportCallback<StreamResponse> streamCallback;\n+  public TransportCallback<RestResponse>   restCallback;\n+  public ScheduledExecutorService _scheduler;\n+\n+  public boolean                         shutdownCalled;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98d77b1dd6923ae8512ac2c29d480be179de43eb"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg1MDE1OQ==", "bodyText": "Also I noticed this, I actually seldom see variable contains \"don't\", I will rename to \"notToCallCallback\"... just saying.", "url": "https://github.com/linkedin/rest.li/pull/295#discussion_r424850159", "createdAt": "2020-05-14T03:28:07Z", "author": {"login": "junchuanwang"}, "path": "d2-test-api/src/main/java/com/linkedin/d2/balancer/clients/TestClient.java", "diffHunk": "@@ -0,0 +1,150 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.d2.balancer.clients;\n+\n+import com.linkedin.common.callback.Callback;\n+import com.linkedin.common.util.None;\n+import com.linkedin.data.ByteString;\n+import com.linkedin.r2.filter.R2Constants;\n+import com.linkedin.r2.message.RequestContext;\n+import com.linkedin.r2.message.rest.RestRequest;\n+import com.linkedin.r2.message.rest.RestResponse;\n+import com.linkedin.r2.message.rest.RestResponseBuilder;\n+import com.linkedin.r2.message.stream.StreamRequest;\n+import com.linkedin.r2.message.stream.StreamResponse;\n+import com.linkedin.r2.message.stream.StreamResponseBuilder;\n+import com.linkedin.r2.message.stream.entitystream.ByteStringWriter;\n+import com.linkedin.r2.message.stream.entitystream.EntityStreams;\n+import com.linkedin.r2.transport.common.bridge.client.TransportClient;\n+import com.linkedin.r2.transport.common.bridge.common.TransportCallback;\n+import com.linkedin.r2.transport.common.bridge.common.TransportResponseImpl;\n+import java.util.Map;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+\n+public class TestClient implements TransportClient\n+{\n+  public static final int DEFAULT_REQUEST_TIMEOUT = 500;\n+  public StreamRequest streamRequest;\n+  public RestRequest restRequest;\n+  public RequestContext restRequestContext;\n+  public Map<String, String> restWireAttrs;\n+  public TransportCallback<StreamResponse> streamCallback;\n+  public TransportCallback<RestResponse>   restCallback;\n+  public ScheduledExecutorService _scheduler;\n+\n+  public boolean                         shutdownCalled;\n+  private final boolean _emptyResponse;\n+  private boolean _dontCallCallback;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98d77b1dd6923ae8512ac2c29d480be179de43eb"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDQ2OTIz", "url": "https://github.com/linkedin/rest.li/pull/295#pullrequestreview-412046923", "createdAt": "2020-05-14T17:48:25Z", "commit": {"oid": "611d62c04c5f0c4c71804d709d8e56e92addb9ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMjc0MTgx", "url": "https://github.com/linkedin/rest.li/pull/295#pullrequestreview-412274181", "createdAt": "2020-05-15T00:36:39Z", "commit": {"oid": "f34db252da0f880bcda9e90f228dc5e19443454e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzcxMDE3", "url": "https://github.com/linkedin/rest.li/pull/295#pullrequestreview-412371017", "createdAt": "2020-05-15T06:09:54Z", "commit": {"oid": "f34db252da0f880bcda9e90f228dc5e19443454e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNjowOTo1NFrOGV3tSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNjowOTo1NFrOGV3tSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU4NTk5Mg==", "bodyText": "From what I remember, the policy is to keep the original copyright date if this is a simple refactor of the code.\nThis is the year of first publication.", "url": "https://github.com/linkedin/rest.li/pull/295#discussion_r425585992", "createdAt": "2020-05-15T06:09:54Z", "author": {"login": "karthikbalasub"}, "path": "d2-test-api/src/main/java/com/linkedin/d2/balancer/clients/TestClient.java", "diffHunk": "@@ -0,0 +1,153 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f34db252da0f880bcda9e90f228dc5e19443454e"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db975894ead424e86e582095a04c9c993fdab470", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/db975894ead424e86e582095a04c9c993fdab470", "committedDate": "2020-05-15T21:50:57Z", "message": "Fix licenses"}, "afterCommit": {"oid": "95f0a04314fd131257a68e4af821243a8efd5e3b", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/95f0a04314fd131257a68e4af821243a8efd5e3b", "committedDate": "2020-05-15T22:08:23Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95f0a04314fd131257a68e4af821243a8efd5e3b", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/95f0a04314fd131257a68e4af821243a8efd5e3b", "committedDate": "2020-05-15T22:08:23Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}, "afterCommit": {"oid": "5570f5ef6be5217ffcaa12f1229b20129c5ee1a9", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/5570f5ef6be5217ffcaa12f1229b20129c5ee1a9", "committedDate": "2020-05-19T20:37:30Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5570f5ef6be5217ffcaa12f1229b20129c5ee1a9", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/5570f5ef6be5217ffcaa12f1229b20129c5ee1a9", "committedDate": "2020-05-19T20:37:30Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}, "afterCommit": {"oid": "662aa3526677f3680d338156a8862284a7a2763a", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/662aa3526677f3680d338156a8862284a7a2763a", "committedDate": "2020-05-19T21:53:15Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "662aa3526677f3680d338156a8862284a7a2763a", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/662aa3526677f3680d338156a8862284a7a2763a", "committedDate": "2020-05-19T21:53:15Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}, "afterCommit": {"oid": "b3bcf2b8cdbd48377aa64af191b682cc3358a380", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/b3bcf2b8cdbd48377aa64af191b682cc3358a380", "committedDate": "2020-05-20T00:58:28Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93a393b947dc0929e4cb8d14415121a75b4223f9", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/93a393b947dc0929e4cb8d14415121a75b4223f9", "committedDate": "2020-05-20T01:32:25Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3bcf2b8cdbd48377aa64af191b682cc3358a380", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/b3bcf2b8cdbd48377aa64af191b682cc3358a380", "committedDate": "2020-05-20T00:58:28Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}, "afterCommit": {"oid": "93a393b947dc0929e4cb8d14415121a75b4223f9", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/93a393b947dc0929e4cb8d14415121a75b4223f9", "committedDate": "2020-05-20T01:32:25Z", "message": "Stop publishing test artifacts & internal modules\n\nIsolates the consumable test artifacts for d2 and darkcluster into the\nnew modules d2-test-api and darkcluster-test-api, respectively. Also\ndiscontinues publishing \"internal\" modules to Bintray, with these\nmodules determined as modules with no main source set and no known\nconsumers. Both these changes are backward-incompatible."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4790, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}