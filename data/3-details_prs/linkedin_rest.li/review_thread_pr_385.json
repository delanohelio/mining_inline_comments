{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NTQ0MjE0", "number": 385, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyNTozNVrOEY4v2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzozNDowMFrOEaSi_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTMxMDM0OnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyNTozNVrOHBZS8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo0OTo1M1rOHB-iaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTA3Mg==", "bodyText": "It should be \"prefix\" not \"suffix\".", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471225072", "createdAt": "2020-08-17T04:25:35Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -68,6 +68,12 @@\n    */\n   public static final String DEFAULT_EXTENSION = SchemaParser.FILE_EXTENSION;\n \n+  /**\n+   * The file path suffix for different types of schemas. Default is {@link InternalConstants#PEGASUS_DIR_IN_JAR}\n+   * Ex \"pegasus\" for data or \"extensions\" for relationship extension schema files\n+   */\n+  private String _schemasPathSuffix = InternalConstants.PEGASUS_DIR_IN_JAR;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5MzA2Ng==", "bodyText": "its suffix to dir path and prefix to file name", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471293066", "createdAt": "2020-08-17T07:30:50Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -68,6 +68,12 @@\n    */\n   public static final String DEFAULT_EXTENSION = SchemaParser.FILE_EXTENSION;\n \n+  /**\n+   * The file path suffix for different types of schemas. Default is {@link InternalConstants#PEGASUS_DIR_IN_JAR}\n+   * Ex \"pegasus\" for data or \"extensions\" for relationship extension schema files\n+   */\n+  private String _schemasPathSuffix = InternalConstants.PEGASUS_DIR_IN_JAR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTA3Mg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc5MjM2Mw==", "bodyText": "The path can be \"/pegasus/foo/bar/...\" calling it suffix doesn't sound right to me.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471792363", "createdAt": "2020-08-17T21:45:12Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -68,6 +68,12 @@\n    */\n   public static final String DEFAULT_EXTENSION = SchemaParser.FILE_EXTENSION;\n \n+  /**\n+   * The file path suffix for different types of schemas. Default is {@link InternalConstants#PEGASUS_DIR_IN_JAR}\n+   * Ex \"pegasus\" for data or \"extensions\" for relationship extension schema files\n+   */\n+  private String _schemasPathSuffix = InternalConstants.PEGASUS_DIR_IN_JAR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTA3Mg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzNTI0MQ==", "bodyText": "removed suffix", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471835241", "createdAt": "2020-08-17T23:49:53Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -68,6 +68,12 @@\n    */\n   public static final String DEFAULT_EXTENSION = SchemaParser.FILE_EXTENSION;\n \n+  /**\n+   * The file path suffix for different types of schemas. Default is {@link InternalConstants#PEGASUS_DIR_IN_JAR}\n+   * Ex \"pegasus\" for data or \"extensions\" for relationship extension schema files\n+   */\n+  private String _schemasPathSuffix = InternalConstants.PEGASUS_DIR_IN_JAR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTA3Mg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTMxMDYzOnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyNTo0OFrOHBZTGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzozMToyNVrOHBddZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTExNQ==", "bodyText": "I think we should call it \"setSchemasDirectory\", same for get method.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471225115", "createdAt": "2020-08-17T04:25:48Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -184,6 +190,24 @@ public void setPaths(List<String> paths)\n     return _paths;\n   }\n \n+  /**\n+   * Return the current file path suffix for schemas location dir\n+   *\n+   * @return the current search paths.\n+   */\n+  public String getSchemasPathSuffix() {\n+    return _schemasPathSuffix;\n+  }\n+\n+  /**\n+   * Sets the file path suffix for schemas location dir\n+   *\n+   * @param schemasPathSuffix path suffix.\n+   */\n+  public void setSchemasPathSuffix(String schemasPathSuffix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5MzI4NQ==", "bodyText": "updated to setSchemasDirPathSuffix", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471293285", "createdAt": "2020-08-17T07:31:25Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -184,6 +190,24 @@ public void setPaths(List<String> paths)\n     return _paths;\n   }\n \n+  /**\n+   * Return the current file path suffix for schemas location dir\n+   *\n+   * @return the current search paths.\n+   */\n+  public String getSchemasPathSuffix() {\n+    return _schemasPathSuffix;\n+  }\n+\n+  /**\n+   * Sets the file path suffix for schemas location dir\n+   *\n+   * @param schemasPathSuffix path suffix.\n+   */\n+  public void setSchemasPathSuffix(String schemasPathSuffix) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTExNQ=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTMxNTMyOnYy", "diffSide": "RIGHT", "path": "data/src/test/java/com/linkedin/data/schema/resolver/TestFileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyOToxN1rOHBZV6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyOToxN1rOHBZV6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTgzMw==", "bodyText": "Add some comment for this use case. Also update the test comment - (line 73-76)", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471225833", "createdAt": "2020-08-17T04:29:17Z", "author": {"login": "nickibi"}, "path": "data/src/test/java/com/linkedin/data/schema/resolver/TestFileDataSchemaResolver.java", "diffHunk": "@@ -83,6 +85,12 @@ public void testJarResolution() throws IOException\n     Assert.assertNotNull(schema);\n     Assert.assertTrue(schema.getProperties().containsKey(\"legit\"));\n     Assert.assertFalse(schema.getProperties().containsKey(\"impostor\"));\n+    // Assert extension schemas are not searched.\n+    Assert.assertNull(resolver.findDataSchema(\"com.example.models.FooExtension\", new StringBuilder()));\n+\n+    resolver.setSchemasPathSuffix(InternalConstants.PEGASUS_EXTENSIONS_DIR_IN_JAR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTMxNTc4OnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNDoyOTo0NFrOHBZWPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMTo1MTowM1rOHB8EXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTkxNg==", "bodyText": "We support /pegasus directory by default. Now we also want to support /extensions directory if configuration is provided. What will happen if user pass neither \"pegasus\" nor \"extensions\" in the set method? Shall we provide some check here? Also we should update this information in the set method java doc, so users could know what directories are supported.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471225916", "createdAt": "2020-08-17T04:29:44Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +265,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasPathSuffix)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5NTMzMg==", "bodyText": "_schemasPathSuffix is initialized with default \"pegasus\". Had added the comments on field now added the same on setter method", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471295332", "createdAt": "2020-08-17T07:35:44Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +265,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasPathSuffix)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTkxNg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU0ODA5Mg==", "bodyText": "The default one can be overridden by any value passed in the set method. For example, resolver.setSchemaDirectory(\"\") or resolver.setSchemaDirectory(\"foo\"). We don't provide any constrains, just pass whatever user pass in the set method and use it as the directory doesn't seem right. Any schemas placed at root or alternative root directory other than \"pegasus\" and \"extensions\" should be ignored.\nMaybe we should introduce an enum, use that one as the setter value.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471548092", "createdAt": "2020-08-17T15:13:46Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +265,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasPathSuffix)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTkxNg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc5NDc4MQ==", "bodyText": "I think from the security point of view, we can gather allowable strings in allowed enums, so that other content won't be leaked.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471794781", "createdAt": "2020-08-17T21:51:03Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +265,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasPathSuffix)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIyNTkxNg=="}, "originalCommit": {"oid": "cc2dc532b2edde189f292ed38b25295646671a53"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0ODgyOTQ1OnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMTowNToyMlrOHB62AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMTowNToyMlrOHB62AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc3NDcyMQ==", "bodyText": "Lets do restli coding convention?\nLeft curl -brace at new line", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471774721", "createdAt": "2020-08-17T21:05:22Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -184,6 +190,25 @@ public void setPaths(List<String> paths)\n     return _paths;\n   }\n \n+  /**\n+   * Return the current file path suffix for schemas location dir\n+   *\n+   * @return the current search paths.\n+   */\n+  public String getSchemasDirPathSuffix() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "061fcfca8f9839d72bea450e90f723be92761d06"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0ODg1NzE3OnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMToxNToyMFrOHB7HNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzozNjo1NVrOHB-Tqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc3OTEyNg==", "bodyText": "if it is the first part of the string, the variable _schemasDirPathSuffix seems to be suitable by calling pathPrefix?", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471779126", "createdAt": "2020-08-17T21:15:20Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirPathSuffix)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "061fcfca8f9839d72bea450e90f723be92761d06"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgyNjE1Mw==", "bodyText": "please refer other comment also. its file/ schema name prefix not path", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471826153", "createdAt": "2020-08-17T23:19:42Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirPathSuffix)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc3OTEyNg=="}, "originalCommit": {"oid": "061fcfca8f9839d72bea450e90f723be92761d06"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzMTQ2Ng==", "bodyText": "removed suffix from name", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471831466", "createdAt": "2020-08-17T23:36:55Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirPathSuffix)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc3OTEyNg=="}, "originalCommit": {"oid": "061fcfca8f9839d72bea450e90f723be92761d06"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTIxNDYzOnYy", "diffSide": "RIGHT", "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirLocation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo0NDoyMlrOHB-cLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo0NDoyMlrOHB-cLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzMzY0NA==", "bodyText": "For proper formatting, we should probably have the enums upper-case (PEGASUS, EXTENSIONS), with string parameters referring to the directory name. The usage above would call SchemaDirLocation#getName or something like that.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471833644", "createdAt": "2020-08-17T23:44:22Z", "author": {"login": "evanw555"}, "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirLocation.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.internal.common;\n+\n+/**\n+ * Directories within resource jar file that holds different types of pegasus schemas. Ex. Data or Extensions\n+ *\n+ * @author Aman Gupta\n+ */\n+public enum SchemaDirLocation\n+{\n+  /**\n+   * Directory holds the pegasus schemas. Pegasus parsers and resolvers look for pegasus\n+   * files(*.pdl, *.pdsc) only within this directory.\n+   */\n+  pegasus,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea54079d66947e632330c72f613749a05cf6920e"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTIyMDU0OnYy", "diffSide": "RIGHT", "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirLocation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo0NzoxMFrOHB-fZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo0NzoxMFrOHB-fZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzNDQ3MQ==", "bodyText": "\"Schema dir location\" seems a little confusing and kinda redundant. It seems to me that it's more of a schema dir \"type\" or schema dir \"name\". Also, I would prefer that the class name contains the word \"Directory\" rather than the abbreviated \"Dir\"\nSo perhaps something like:\n\nSchemaDirectory\nSchemaDirectoryType\nSchemaDirectoryName", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471834471", "createdAt": "2020-08-17T23:47:10Z", "author": {"login": "evanw555"}, "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirLocation.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.internal.common;\n+\n+/**\n+ * Directories within resource jar file that holds different types of pegasus schemas. Ex. Data or Extensions\n+ *\n+ * @author Aman Gupta\n+ */\n+public enum SchemaDirLocation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea54079d66947e632330c72f613749a05cf6920e"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTMzMjA1OnYy", "diffSide": "RIGHT", "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirectoryName.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDo0Nzo1NlrOHB_fxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDo0Nzo1NlrOHB_fxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg1MDk0OA==", "bodyText": "I am wondering why it is in the internal common package? Users will use it to set up the resolver schema directory name, so it is not for internal using purpose. Do you think we should move this enum to the same package as SchemaResolver?", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r471850948", "createdAt": "2020-08-18T00:47:56Z", "author": {"login": "nickibi"}, "path": "pegasus-common/src/main/java/com/linkedin/internal/common/SchemaDirectoryName.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.internal.common;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5793e68d07612750380ad8a622eca82eb285e1f"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MjcyNDcyOnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1OTozOFrOHCf5nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1OTozOFrOHCf5nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM4MTg1NQ==", "bodyText": "please rebase master, this file is out of date.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472381855", "createdAt": "2020-08-18T17:59:38Z", "author": {"login": "nickibi"}, "path": "CHANGELOG.md", "diffHunk": "@@ -18,6 +18,7 @@ and what APIs have changed, if applicable.\n - Allow publishing unstable release candidate versions of Rest.li (e.g. `1.2.3-rc.1`) from non-master branches.\n     - It's _strongly_ suggested to only use a release candidate version if you have a specific reason to do so.\n - Put extension schemas into the dataTemplate jar under /extensions path instead of putting them into the extensionSchema jar.\n+    - Updated `FileDataSchemaResolver` to resolve extension schemas from /extensions directory if specified.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5b81eae5aa4995502a998ef6f0eea2562b21e91"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzA3MzYzOnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxOTo0NDoxMFrOHCjUkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxOTozMjozMFrOHDWKKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw==", "bodyText": "For \"/extensions\", we have to support loading from both /pegasus and /extensions paths. Because extension schema includes base schema in /pegasus. If we do not load both paths, the extension schemas can not be resolved.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472437907", "createdAt": "2020-08-18T19:44:10Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ0NTY0OA==", "bodyText": "Is it actually both , not \"either ... or..\"?", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472445648", "createdAt": "2020-08-18T19:59:07Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ1MjI3MQ==", "bodyText": "@BrianPin  For /extensions directory contains ER extensions schemas, which includes base schema which is under /pegasus directory, if we don't loading both, extension schemas cannot be resolved by missing base schemas.\nIf directorName is \"pegasus\", we only load pegasus, if it is \"extensions\", we have to load both.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472452271", "createdAt": "2020-08-18T20:08:03Z", "author": {"login": "nickibi"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ1NDcxMw==", "bodyText": "clear", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472454713", "createdAt": "2020-08-18T20:10:38Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg0MjkzNQ==", "bodyText": "One question for now,\nThe parser usually takes a resolver path, and the resolver takes the resolver path for finding schema files to resolve.\nBut for this extension schema, should we have two resolver path?\nIf we just have one resolver path, we seem can't resolver schemas in the other directory.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472842935", "createdAt": "2020-08-19T08:12:46Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk4MjgyNQ==", "bodyText": "Added Extensions multi resolver. Please take a look", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r472982825", "createdAt": "2020-08-19T12:15:19Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzIxODczNg==", "bodyText": "Hi, few comments (Mostly as a question type of comments)\n\n\nThe file data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java and this data/src/main/java/com/linkedin/data/schema/resolver/ExtensionsDataSchemaResolver.java two resolvers are a bit confusing in terms of when should we use which.  I feel I can have either one to work with extensions.\n\n\nThe addition of _schemasDirectoryName in data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java seems to me that the addition's purpose is for us to tell the schema prefix (or directories), this thing itself seems more relavant to ClasspathResourceDataSchemaResolver or ExtensionsDataSchemaResolver, The FileDataSchemaResolver seems can remove this _schemasDirectoryName member?\n\n\nMore like two questions above, we can chat offline", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473218736", "createdAt": "2020-08-19T17:54:32Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI3MDgyNQ==", "bodyText": "Answered offline. Also, feel free ping directly for any doubts.\nClasspathResource is for schema already loaded using classLoader, whereas FileDataResolver loads schema from any file directory.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473270825", "createdAt": "2020-08-19T19:32:30Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/FileDataSchemaResolver.java", "diffHunk": "@@ -241,7 +266,7 @@ protected DataSchemaLocation transform(String path)\n           StringBuilder builder = new StringBuilder();\n           // within a JAR file, files are treated as resources. Thus, we should lookup using the resource separator\n           // character, which is '/'\n-          builder.append(InternalConstants.PEGASUS_DIR_IN_JAR)\n+          builder.append(_schemasDirectoryName.getName())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzNzkwNw=="}, "originalCommit": {"oid": "f797103b190ba57e29f1ace1e2b5ea2727cf4f4d"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NzU4OTUyOnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNjozMDoyOVrOHDPmaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNjozMDoyOVrOHDPmaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE2MzM3MQ==", "bodyText": "conventions of left brace", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473163371", "createdAt": "2020-08-19T16:30:29Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java", "diffHunk": "@@ -106,9 +130,19 @@ public SingleFormatClasspathSchemaResolver(DataSchemaParserFactory parserFactory\n       this._extension = \".\" + parserFactory.getLanguageExtension();\n     }\n \n+    /**\n+     * Construct a new instance that uses the {@link Thread#getContextClassLoader()} for the current thread.\n+     */\n+    public SingleFormatClasspathSchemaResolver(DataSchemaParserFactory parserFactory,\n+        SchemaDirectoryName schemaDirectoryName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ec6cd83f0bb4adcad930c19e3f2d9465302012"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NzY4NTc0OnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNjo1Mzo1OFrOHDQlIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxOTozMzozMFrOHDWMHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE3OTQyNg==", "bodyText": "So for our case, the resolver we use should be this one and only one right?\nAnd this is the resolver that be passed to the parser.", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473179426", "createdAt": "2020-08-19T16:53:58Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java", "diffHunk": "@@ -80,6 +79,26 @@ public ClasspathResourceDataSchemaResolver(ClassLoader classLoader)\n     _classLoader = classLoader;\n   }\n \n+  /**\n+   * Construct a new instance that uses the specified {@link ClassLoader}.\n+   *\n+   * @param classLoader provides the {@link ClassLoader}.\n+   * @param schemaDirectoryName The file directory name for different types of schemas.\n+   *                            Default is {@link SchemaDirectoryName#PEGASUS}\n+   */\n+  public ClasspathResourceDataSchemaResolver(ClassLoader classLoader, SchemaDirectoryName schemaDirectoryName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ec6cd83f0bb4adcad930c19e3f2d9465302012"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI3MTMyNQ==", "bodyText": "Both classpath or extension resolver can be used depending on build time or runtime", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473271325", "createdAt": "2020-08-19T19:33:30Z", "author": {"login": "aman1309"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/ClasspathResourceDataSchemaResolver.java", "diffHunk": "@@ -80,6 +79,26 @@ public ClasspathResourceDataSchemaResolver(ClassLoader classLoader)\n     _classLoader = classLoader;\n   }\n \n+  /**\n+   * Construct a new instance that uses the specified {@link ClassLoader}.\n+   *\n+   * @param classLoader provides the {@link ClassLoader}.\n+   * @param schemaDirectoryName The file directory name for different types of schemas.\n+   *                            Default is {@link SchemaDirectoryName#PEGASUS}\n+   */\n+  public ClasspathResourceDataSchemaResolver(ClassLoader classLoader, SchemaDirectoryName schemaDirectoryName)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE3OTQyNg=="}, "originalCommit": {"oid": "17ec6cd83f0bb4adcad930c19e3f2d9465302012"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDAyMzAyOnYy", "diffSide": "RIGHT", "path": "data/src/main/java/com/linkedin/data/schema/resolver/ExtensionsDataSchemaResolver.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzozNDowMFrOHDoQlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMzozNDowMFrOHDoQlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU2NzM4Mw==", "bodyText": "Should here be the input schemaDirectoryName?", "url": "https://github.com/linkedin/rest.li/pull/385#discussion_r473567383", "createdAt": "2020-08-20T03:34:00Z", "author": {"login": "BrianPin"}, "path": "data/src/main/java/com/linkedin/data/schema/resolver/ExtensionsDataSchemaResolver.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+package com.linkedin.data.schema.resolver;\n+\n+import com.linkedin.data.schema.DataSchemaResolver;\n+import com.linkedin.data.schema.grammar.PdlSchemaParser;\n+import com.linkedin.data.schema.grammar.PdlSchemaParserFactory;\n+\n+\n+/**\n+ * Combines schema resolver for pegasus data and extensions schema directory.\n+ *\n+ * @author Aman Gupta\n+ */\n+public class ExtensionsDataSchemaResolver extends AbstractMultiFormatDataSchemaResolver\n+{\n+  public ExtensionsDataSchemaResolver(String resolverPath)\n+  {\n+    addResolver(createSchemaResolver(resolverPath, SchemaDirectoryName.PEGASUS, this));\n+    addResolver(createSchemaResolver(resolverPath, SchemaDirectoryName.EXTENSIONS, this));\n+  }\n+\n+  public ExtensionsDataSchemaResolver(String resolverPath, DataSchemaResolver dependencyResolver)\n+  {\n+    addResolver(createSchemaResolver(resolverPath, SchemaDirectoryName.PEGASUS, dependencyResolver));\n+    addResolver(createSchemaResolver(resolverPath, SchemaDirectoryName.EXTENSIONS, dependencyResolver));\n+  }\n+\n+  private FileDataSchemaResolver createSchemaResolver(String resolverPath, SchemaDirectoryName schemaDirectoryName,\n+      DataSchemaResolver dependencyResolver)\n+  {\n+    FileDataSchemaResolver resolver =\n+        new FileDataSchemaResolver(PdlSchemaParserFactory.instance(), resolverPath, dependencyResolver);\n+    resolver.setExtension(PdlSchemaParser.FILE_EXTENSION);\n+    resolver.setSchemasDirectoryName(SchemaDirectoryName.EXTENSIONS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c4cb35bdcd2237337b37454b95779e808641285"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 312, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}