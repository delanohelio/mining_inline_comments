{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxODQyNTk5", "number": 232, "title": "Configure Bintray release task", "bodyText": "Removes the old MavenDeployer setup, adds a new OSS\npublishing mechanism using the Bintray Gradle plugin.\nNew tasks: generatePomFileForReleasePublication, bintrayUpload.", "createdAt": "2020-03-21T10:37:56Z", "url": "https://github.com/linkedin/rest.li/pull/232", "merged": true, "mergeCommit": {"oid": "ff15a556e423a0debdbdad3ebf52f9b245e4c01c"}, "closed": true, "closedAt": "2020-03-25T03:16:34Z", "author": {"login": "evanw555"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQBOF1AFqTM3ODk2OTQyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ4I_7gFqTM4MDYzNDU0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTY5NDIy", "url": "https://github.com/linkedin/rest.li/pull/232#pullrequestreview-378969422", "createdAt": "2020-03-22T03:34:09Z", "commit": {"oid": "7fed7c62410922bd67ff6360de50973031e455f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMzozNDoxMFrOF5tBSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMzozNDoxMFrOF5tBSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA1MDc2MQ==", "bodyText": "I suspect those may be the defaults so you don't have to declare it (I suggest to check bintray plugin docs)", "url": "https://github.com/linkedin/rest.li/pull/232#discussion_r396050761", "createdAt": "2020-03-22T03:34:10Z", "author": {"login": "mockitoguy"}, "path": "build_script/bintrayRelease.gradle", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+   Copyright (c) 2020 LinkedIn Corp.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+\n+/**\n+ * The purpose of this script is to configure the following tasks for a sub-project:\n+ * - generatePomFileForRelease: generates the \"release\" Maven publication (.pom)\n+ * - bintrayUpload: uploads, signs, and publishes all artifacts\n+ */\n+apply plugin: 'maven-publish'\n+apply plugin: 'java-library'\n+apply plugin: 'com.jfrog.bintray'\n+\n+def pomConfig = {\n+  name project.name // sub-project name\n+  packaging 'jar'\n+  description 'Rest.li is a framework for building robust, scalable service architectures using dynamic discovery and simple asychronous type-checked REST + JSON APIs.'\n+  url 'https://rest.li'\n+  scm {\n+    url 'git@github.com:linkedin/rest.li.git'\n+    connection 'scm:git:git@github.com:linkedin/rest.li.git'\n+    developerConnection 'scm:git:git@github.com:linkedin/rest.li.git'\n+  }\n+  licenses {\n+    license {\n+      name 'The Apache Software License, Version 2.0'\n+      url 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n+      distribution 'repo'\n+    }\n+  }\n+  developers {\n+    // TODO: add developers\n+  }\n+}\n+\n+publishing {\n+  publications {\n+    release(MavenPublication) {\n+      from components.java\n+      artifact sourcesJar\n+      artifact javadocJar\n+      groupId project.group\n+      artifactId project.name // sub-project name\n+      version project.version\n+      pom.withXml {\n+        def root = asNode()\n+        root.children().last() + pomConfig\n+      }\n+    }\n+  }\n+}\n+\n+bintray {\n+  user = System.getenv('BINTRAY_USERNAME')\n+  key = System.getenv('BINTRAY_API_KEY')\n+  publications = ['release']\n+  publish = true\n+  pkg {\n+    userOrg = 'linkedin'\n+    repo = 'test-repo'\n+    name = 'pegasus'\n+    licenses = ['Apache-2.0']\n+    websiteUrl = 'https://rest.li'\n+    issueTrackerUrl = 'https://github.com/linkedin/rest.li/issues'\n+    vcsUrl = 'https://github.com/linkedin/rest.li.git'\n+    githubRepo = 'linkedin/rest.li'\n+    licenses = ['Apache-2.0']\n+    version {\n+      name = project.version\n+      released = new Date()\n+      vcsTag = \"v${project.version}\"\n+      gpg {\n+        sign = true\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fed7c62410922bd67ff6360de50973031e455f3"}, "originalPosition": 86}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTY5NDU4", "url": "https://github.com/linkedin/rest.li/pull/232#pullrequestreview-378969458", "createdAt": "2020-03-22T03:35:27Z", "commit": {"oid": "7fed7c62410922bd67ff6360de50973031e455f3"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMzozNToyN1rOF5tBZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMzozNTo0MFrOF5tBhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA1MDc5MQ==", "bodyText": "You no longer apply \"maven\" plugin, so you're right, this is not needed :-)", "url": "https://github.com/linkedin/rest.li/pull/232#discussion_r396050791", "createdAt": "2020-03-22T03:35:27Z", "author": {"login": "mockitoguy"}, "path": "build_script/maven.gradle", "diffHunk": "@@ -1,4 +1,5 @@\n //Configures maven plugin in a standard way\n+// TODO: this isn't currently being used, delete when we're sure that we don't need it\n project.plugins.withType(MavenPlugin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fed7c62410922bd67ff6360de50973031e455f3"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA1MDgyMQ==", "bodyText": "nice!", "url": "https://github.com/linkedin/rest.li/pull/232#discussion_r396050821", "createdAt": "2020-03-22T03:35:40Z", "author": {"login": "mockitoguy"}, "path": "gradle.properties", "diffHunk": "@@ -1,6 +1,5 @@\n version=28.1.33\n-sonatypeUsername=please_set_in_home_dir_if_uploading_to_maven_central", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fed7c62410922bd67ff6360de50973031e455f3"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4a2c7b163b18e37fef9d48701cac311d841be9c", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/f4a2c7b163b18e37fef9d48701cac311d841be9c", "committedDate": "2020-03-24T17:49:33Z", "message": "Configure Bintray release task\n\nRemoves the old MavenDeployer setup, adds a new OSS\npublishing mechanism using the Bintray Gradle plugin.\nNew tasks: generatePomFileForRelease, bintrayUpload."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a925db7d77d7700a8125db71d23f6a1b4a68535", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/4a925db7d77d7700a8125db71d23f6a1b4a68535", "committedDate": "2020-03-24T17:49:33Z", "message": "Add strict validation, bintray task dependency on pom task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f0ee46223844bbd264cb41be3bfd8ce5dfe4335", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/6f0ee46223844bbd264cb41be3bfd8ce5dfe4335", "committedDate": "2020-03-24T17:58:11Z", "message": "Update documentation in the Bintray build script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5851f6fab54160bd6dde48d05743cf7b35603fe", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/b5851f6fab54160bd6dde48d05743cf7b35603fe", "committedDate": "2020-03-22T07:51:35Z", "message": "Add strict validation, bintray task dependency on pom task"}, "afterCommit": {"oid": "6f0ee46223844bbd264cb41be3bfd8ce5dfe4335", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/6f0ee46223844bbd264cb41be3bfd8ce5dfe4335", "committedDate": "2020-03-24T17:58:11Z", "message": "Update documentation in the Bintray build script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1393494457f84be328fe57960a870959e14c7cd2", "author": {"user": {"login": "evanw555", "name": "Evan Williams"}}, "url": "https://github.com/linkedin/rest.li/commit/1393494457f84be328fe57960a870959e14c7cd2", "committedDate": "2020-03-24T18:31:03Z", "message": "Set repo name to 'maven'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNjM0NTQx", "url": "https://github.com/linkedin/rest.li/pull/232#pullrequestreview-380634541", "createdAt": "2020-03-24T19:33:23Z", "commit": {"oid": "1393494457f84be328fe57960a870959e14c7cd2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 8, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}