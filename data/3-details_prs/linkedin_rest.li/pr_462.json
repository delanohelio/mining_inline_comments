{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTYyNTI4", "number": 462, "title": "Set ValidationResult to false if IllegalArgument exceptions are seen during iterative validation using ObjectIterator", "bodyText": "When we validate insidie \"ValidateDataAgainstSchema\", it will propagete IllegalArgumentException, this eventaully leads to HTTP 500.\nThe IllegalArgumentException is thrown by ObjectIterator when data and data schema does not match.\nWe should consider \"IllegalArgumentException\" as an validation failure, so we can throw HTTP 422 (invalid entity)", "createdAt": "2020-10-27T18:20:09Z", "url": "https://github.com/linkedin/rest.li/pull/462", "merged": true, "mergeCommit": {"oid": "65a39a96e4ae2236e3487ceaffc2b2954fcb6ef5"}, "closed": true, "closedAt": "2020-10-27T20:30:37Z", "author": {"login": "junchuanwang"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWZyyQAH2gAyNTEwOTYyNTI4OmVkZDk5Yjg4YjVkM2YyZTc1ZjJjYjI3NTI5YmU2ZTU3NWU3MjQzNGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWt8u5AFqTUxODA1NTIzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "edd99b88b5d3f2e75f2cb27529be6e575e72434c", "author": {"user": null}, "url": "https://github.com/linkedin/rest.li/commit/edd99b88b5d3f2e75f2cb27529be6e575e72434c", "committedDate": "2020-10-26T19:46:40Z", "message": "Set ValidationResult to false if IllegaeArgument exception are seen during validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a93257453b2aa0ad13e6fe9824b801c187cdc86", "author": {"user": null}, "url": "https://github.com/linkedin/rest.li/commit/8a93257453b2aa0ad13e6fe9824b801c187cdc86", "committedDate": "2020-10-27T18:23:59Z", "message": "Chagne the location of try catch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4a147881bba67a84eddad98f9e64eb8d1ac1785", "author": {"user": {"login": "junchuanwang", "name": "Junchuan Wang"}}, "url": "https://github.com/linkedin/rest.li/commit/d4a147881bba67a84eddad98f9e64eb8d1ac1785", "committedDate": "2020-10-27T18:32:15Z", "message": "Merge branch 'master' into fix_http_500_during_validateInputEntity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDMzMjQ3", "url": "https://github.com/linkedin/rest.li/pull/462#pullrequestreview-518033247", "createdAt": "2020-10-27T18:46:38Z", "commit": {"oid": "8a93257453b2aa0ad13e6fe9824b801c187cdc86"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODo0NjozOVrOHpLm0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODo0NjozOVrOHpLm0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk0MzgyNA==", "bodyText": "Also log the exception for debugging.", "url": "https://github.com/linkedin/rest.li/pull/462#discussion_r512943824", "createdAt": "2020-10-27T18:46:39Z", "author": {"login": "karthikbalasub"}, "path": "data/src/main/java/com/linkedin/data/schema/validation/ValidateDataAgainstSchema.java", "diffHunk": "@@ -173,9 +166,22 @@ protected void validateIterative(DataElement element)\n       _fixed = element.getValue();\n       UnrecognizedFieldMode unrecognizedFieldMode = _options.getUnrecognizedFieldMode();\n       ObjectIterator it = new ObjectIterator(element, IterationOrder.POST_ORDER);\n-      DataElement nextElement;\n-      while ((nextElement = it.next()) != null)\n+      DataElement nextElement = null;\n+      while (true)\n       {\n+        try\n+        {\n+          if ((nextElement = it.next()) == null)\n+          {\n+            break;\n+          }\n+        }\n+        catch (IllegalArgumentException e)\n+        {\n+          addMessage(nextElement, e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a93257453b2aa0ad13e6fe9824b801c187cdc86"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDQ5Nzg4", "url": "https://github.com/linkedin/rest.li/pull/462#pullrequestreview-518049788", "createdAt": "2020-10-27T19:08:14Z", "commit": {"oid": "d4a147881bba67a84eddad98f9e64eb8d1ac1785"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDU1MjMw", "url": "https://github.com/linkedin/rest.li/pull/462#pullrequestreview-518055230", "createdAt": "2020-10-27T19:15:38Z", "commit": {"oid": "d4a147881bba67a84eddad98f9e64eb8d1ac1785"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4727, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}