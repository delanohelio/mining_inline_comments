{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NzI5OTQ4", "number": 433, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwNzo0MjowN1rOEpuBZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwNzo0MjowN1rOEpuBZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMTgxMDk0OnYy", "diffSide": "RIGHT", "path": "restli-server/src/main/java/com/linkedin/restli/internal/server/util/RestUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwNzo0MjowN1rOHbj7SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzo0OTozMFrOHb2XGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY2MjIxNw==", "bodyText": "I thought we already send \"self\" links when I suggested adding this.\nSince we don't do that for count >0, the consistent solution would be to return an empty links array when count ==0.\nOther option is to add \"self\" for both cases (at the end when count >0). But this might increase the payload size.", "url": "https://github.com/linkedin/rest.li/pull/433#discussion_r498662217", "createdAt": "2020-10-02T07:42:07Z", "author": {"login": "karthikbalasub"}, "path": "restli-server/src/main/java/com/linkedin/restli/internal/server/util/RestUtils.java", "diffHunk": "@@ -126,6 +125,17 @@ public static CollectionMetadata buildMetadata(final URI requestUri,\n \n       metadata.setLinks(links);\n     }\n+    else if (pagingContext.getCount() == 0)\n+    {\n+      // even when we are getting count = 0, we should honor that links\n+      // is a required field in the CollectionMetadata record\n+      Link selfLink = new Link();\n+      selfLink.setRel(\"self\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86f91b08c885bd21f5b62310ec97090cad35bb79"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk2NDI0OA==", "bodyText": "Yeah, I looked back the ticket, the empty array is the common expectation", "url": "https://github.com/linkedin/rest.li/pull/433#discussion_r498964248", "createdAt": "2020-10-02T17:49:30Z", "author": {"login": "BrianPin"}, "path": "restli-server/src/main/java/com/linkedin/restli/internal/server/util/RestUtils.java", "diffHunk": "@@ -126,6 +125,17 @@ public static CollectionMetadata buildMetadata(final URI requestUri,\n \n       metadata.setLinks(links);\n     }\n+    else if (pagingContext.getCount() == 0)\n+    {\n+      // even when we are getting count = 0, we should honor that links\n+      // is a required field in the CollectionMetadata record\n+      Link selfLink = new Link();\n+      selfLink.setRel(\"self\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY2MjIxNw=="}, "originalCommit": {"oid": "86f91b08c885bd21f5b62310ec97090cad35bb79"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 372, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}