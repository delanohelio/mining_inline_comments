{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNzAwMTcx", "number": 255, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMDoxMzo1NVrODwm4Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjozMzoxOFrODwoQJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMjk1MTk0OnYy", "diffSide": "RIGHT", "path": "generator/src/main/java/com/linkedin/pegasus/generator/PegasusDataTemplateGenerator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMDoxMzo1NVrOGDtZRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMDoxMzo1NVrOGDtZRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU0MjY2MA==", "bodyText": "Nice. Thanks @evanw555 for convincing me to extract isArgFile(String) to a utility class.", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406542660", "createdAt": "2020-04-10T00:13:55Z", "author": {"login": "DPUkyle"}, "path": "generator/src/main/java/com/linkedin/pegasus/generator/PegasusDataTemplateGenerator.java", "diffHunk": "@@ -97,7 +98,15 @@ public static void main(String[] args)\n \n     final String generateImportedProperty = System.getProperty(PegasusDataTemplateGenerator.GENERATOR_GENERATE_IMPORTED);\n     final boolean generateImported = generateImportedProperty == null ? true : Boolean.parseBoolean(generateImportedProperty);\n-    PegasusDataTemplateGenerator.run(System.getProperty(AbstractGenerator.GENERATOR_RESOLVER_PATH),\n+    String resolverPath = System.getProperty(AbstractGenerator.GENERATOR_RESOLVER_PATH);\n+    if (resolverPath != null && ArgumentFileProcessor.isArgFile(resolverPath))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87f5eec089e0e59cf1096f5e036666cba56d4065"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMjk1NTc0OnYy", "diffSide": "RIGHT", "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMDoxNjowN1rOGDtbbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjoyOTowMFrOGDvTpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU0MzIxMg==", "bodyText": "Are you sure you want to globally enable this feature? Evan and I reserved it as off by default, and allowing consumers with javaexec issues to opt-in in their build.gradle files.", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406543212", "createdAt": "2020-04-10T00:16:07Z", "author": {"login": "DPUkyle"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -1493,6 +1493,7 @@ protected void configureConversionUtilities(Project project, SourceSet sourceSet\n       }\n       task.setKeepOriginal(keepOriginal);\n       task.setSkipVerification(skipVerification);\n+      task.setEnableArgFile(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87f5eec089e0e59cf1096f5e036666cba56d4065"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MzM4OA==", "bodyText": "+1 on this. We've seen before that gradle-plugins and restli-tools are not always locked to the same version. Kyle and I think it's better to keep it opt-in for now, then make it enabled by default later (or if/when we create newer more resilient tools)", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406563388", "createdAt": "2020-04-10T01:43:27Z", "author": {"login": "evanw555"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -1493,6 +1493,7 @@ protected void configureConversionUtilities(Project project, SourceSet sourceSet\n       }\n       task.setKeepOriginal(keepOriginal);\n       task.setSkipVerification(skipVerification);\n+      task.setEnableArgFile(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU0MzIxMg=="}, "originalCommit": {"oid": "87f5eec089e0e59cf1096f5e036666cba56d4065"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3MjIwOQ==", "bodyText": "Done", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406572209", "createdAt": "2020-04-10T02:21:01Z", "author": {"login": "karthikbalasub"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -1493,6 +1493,7 @@ protected void configureConversionUtilities(Project project, SourceSet sourceSet\n       }\n       task.setKeepOriginal(keepOriginal);\n       task.setSkipVerification(skipVerification);\n+      task.setEnableArgFile(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU0MzIxMg=="}, "originalCommit": {"oid": "87f5eec089e0e59cf1096f5e036666cba56d4065"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3Mzk5MQ==", "bodyText": "Actually, after thinking about this a little harder, I've realized that: convertXXXToPdl and reformatXXXPdl are not part of the normal build process, so enabling arg file by default may not be that risky. However, the same cannot be said for generateXXXDataTemplate or XXXTranslateSchemas; these should be opt-in IMO.", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406573991", "createdAt": "2020-04-10T02:29:00Z", "author": {"login": "evanw555"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -1493,6 +1493,7 @@ protected void configureConversionUtilities(Project project, SourceSet sourceSet\n       }\n       task.setKeepOriginal(keepOriginal);\n       task.setSkipVerification(skipVerification);\n+      task.setEnableArgFile(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU0MzIxMg=="}, "originalCommit": {"oid": "87f5eec089e0e59cf1096f5e036666cba56d4065"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzE3Njg3OnYy", "diffSide": "RIGHT", "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjozMzowMVrOGDvW1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjo0Nzo0N1rOGDvjug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3NDgwNw==", "bodyText": "Is this necessary? Task inputs can be configured directly as such:\ngenerateMainDataTemplate {\n  enableArgFile = true\n}\n\nThis is how the fix for generateXXXRestClient is enabled.", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406574807", "createdAt": "2020-04-10T02:33:01Z", "author": {"login": "evanw555"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -527,6 +527,7 @@\n   // by default it is disabled, because it triggers hot-reload (even if it results in a no-op)\n   private static final String DESTROY_STALE_FILES_ENABLE = \"enableDestroyStaleFiles\";\n   public static final Collection<String> DATA_TEMPLATE_FILE_SUFFIXES = new ArrayList<>();\n+  private static final String DATA_TEMPLATE_ENABLE_ARGFILE = \"generateDataTemplate.enableArgFile\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7effd61bc9b11b59977230cac7e872e125339561"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3ODEwNg==", "bodyText": "Remove the property based logic. We can enable this using task args directly.", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406578106", "createdAt": "2020-04-10T02:47:47Z", "author": {"login": "karthikbalasub"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -527,6 +527,7 @@\n   // by default it is disabled, because it triggers hot-reload (even if it results in a no-op)\n   private static final String DESTROY_STALE_FILES_ENABLE = \"enableDestroyStaleFiles\";\n   public static final Collection<String> DATA_TEMPLATE_FILE_SUFFIXES = new ArrayList<>();\n+  private static final String DATA_TEMPLATE_ENABLE_ARGFILE = \"generateDataTemplate.enableArgFile\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3NDgwNw=="}, "originalCommit": {"oid": "7effd61bc9b11b59977230cac7e872e125339561"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzE3NzMzOnYy", "diffSide": "RIGHT", "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjozMzoxOFrOGDvXGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMjozMzoxOFrOGDvXGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU3NDg3Mw==", "bodyText": "nit: misspelled \"schemas\"", "url": "https://github.com/linkedin/rest.li/pull/255#discussion_r406574873", "createdAt": "2020-04-10T02:33:18Z", "author": {"login": "evanw555"}, "path": "gradle-plugins/src/main/java/com/linkedin/pegasus/gradle/PegasusPlugin.java", "diffHunk": "@@ -546,6 +547,7 @@\n   private static final String CONVERT_TO_PDL_KEEP_ORIGINAL = \"convertToPdl.keepOriginal\";\n   private static final String CONVERT_TO_PDL_SKIP_VERIFICATION = \"convertToPdl.skipVerification\";\n   private static final String CONVERT_TO_PDL_PRESERVE_SOURCE_CMD = \"convertToPdl.preserveSourceCmd\";\n+  private static final String TRANSLATE_SCHMEAS_ENABLE_ARGFILE = \"translateSchemas.enableArgFile\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7effd61bc9b11b59977230cac7e872e125339561"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 666, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}