{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MjM2NzE5", "number": 1031, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTo0MDozOFrODubliA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTo0MDozOFrODubliA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMDEzMDY0OnYy", "diffSide": "RIGHT", "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "isResolved": false, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTo0MDozOFrOGAa93A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjoxOTowOVrOGAckTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA==", "bodyText": "Maybe this should be replaced by slf4j ? (I think there is a facility from testcontainers)", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403095004", "createdAt": "2020-04-03T15:40:38Z", "author": {"login": "lburgazzoli"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5ODA5OA==", "bodyText": "Yeah but most of the content coming back from the container is already log formatted. So it gets messy if you wrap it in more formatting. Hence I just write it as-is.", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403098098", "createdAt": "2020-04-03T15:45:32Z", "author": {"login": "jamesnetherton"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5ODk2Mg==", "bodyText": "I can remove the logging altogether if you'd prefer. It's just useful for debugging if we hit issues.", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403098962", "createdAt": "2020-04-03T15:47:01Z", "author": {"login": "jamesnetherton"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEwMDI0Mg==", "bodyText": "I meant this one that should properly handle the output frame.", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403100242", "createdAt": "2020-04-03T15:49:05Z", "author": {"login": "lburgazzoli"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEwMjI4OA==", "bodyText": "I can remove the logging altogether if you'd prefer. It's just useful for debugging if we hit issues.\n\nNo worries we can keep it, was just wondering if we can make it gogin to the logger so we can control it from properties, but not a huge issue", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403102288", "createdAt": "2020-04-03T15:52:32Z", "author": {"login": "lburgazzoli"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExNTgzNg==", "bodyText": "Latest commit uses Slf4jLogConsumer \ud83d\udc4d", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403115836", "createdAt": "2020-04-03T16:13:18Z", "author": {"login": "jamesnetherton"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExNjM5Mw==", "bodyText": "does it work as advertised ?", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403116393", "createdAt": "2020-04-03T16:13:50Z", "author": {"login": "lburgazzoli"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExOTI4Mw==", "bodyText": "Works ok. Everything gets prefixed with STDOUT:, so at least it's clear what's coming from the container and what isn't.", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403119283", "createdAt": "2020-04-03T16:16:57Z", "author": {"login": "jamesnetherton"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEyMTIzMA==", "bodyText": "Ah yeah, that issue ... I think I did implement my own version some time ago, maybe I'll copy over this repo, if only I could remember where it it", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403121230", "createdAt": "2020-04-03T16:19:09Z", "author": {"login": "lburgazzoli"}, "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, "originalCommit": {"oid": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4337, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}