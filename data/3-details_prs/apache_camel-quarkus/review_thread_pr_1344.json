{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMzA0MjI1", "number": 1344, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozNDo1OFrOEFcOrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNjo0NlrOEGd_Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQwODQ1OnYy", "diffSide": "RIGHT", "path": "examples/timer-log-cdi/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozNDo1OFrOGjoZeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzozNToyMFrOGmVDtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNTIyNQ==", "bodyText": "Revisit this if this becomes a common use - I would like end users to not know or have to use such an option.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440015225", "createdAt": "2020-06-15T08:34:58Z", "author": {"login": "davsclaus"}, "path": "examples/timer-log-cdi/src/main/resources/application.properties", "diffHunk": "@@ -14,33 +14,17 @@\n ## See the License for the specific language governing permissions and\n ## limitations under the License.\n ## ---------------------------------------------------------------------------\n+\n #\n # Quarkus\n #\n quarkus.banner.enabled = false\n \n-#\n-# Quarkus - Camel\n-#\n-\n-# disable build time route discovery as the only\n-# route defined in this project is based on CDI.\n-#\n-# This is not strictly needed for the correctness\n-# because camel-quarkus automatically\n-# filters auto-discovered routes that targets CDI\n-# but if is is known that routes are all leveraging\n-# CDI, this option will give some little boost to\n-# the build process\n-quarkus.camel.main.routes-discovery.enabled = false\n-\n-#\n-# Camel\n-#\n-camel.context.name = quarkus-camel-example-timer-log-cdi\n+# camel look-up beans using BeanManager so we don't want\n+# ArC to remove beans without injection points.\n+quarkus.arc.remove-unused-beans = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNzQyNg==", "bodyText": "It is possible to use the @Unremovable annotation as alternative but it's not better.\nWe probably need to discuss this topic with the Quarkus team and see if through a build item it could be possible to reverse the behaviour so not to remove beans unless that feature is turned on explicitly.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440027426", "createdAt": "2020-06-15T08:55:49Z", "author": {"login": "lburgazzoli"}, "path": "examples/timer-log-cdi/src/main/resources/application.properties", "diffHunk": "@@ -14,33 +14,17 @@\n ## See the License for the specific language governing permissions and\n ## limitations under the License.\n ## ---------------------------------------------------------------------------\n+\n #\n # Quarkus\n #\n quarkus.banner.enabled = false\n \n-#\n-# Quarkus - Camel\n-#\n-\n-# disable build time route discovery as the only\n-# route defined in this project is based on CDI.\n-#\n-# This is not strictly needed for the correctness\n-# because camel-quarkus automatically\n-# filters auto-discovered routes that targets CDI\n-# but if is is known that routes are all leveraging\n-# CDI, this option will give some little boost to\n-# the build process\n-quarkus.camel.main.routes-discovery.enabled = false\n-\n-#\n-# Camel\n-#\n-camel.context.name = quarkus-camel-example-timer-log-cdi\n+# camel look-up beans using BeanManager so we don't want\n+# ArC to remove beans without injection points.\n+quarkus.arc.remove-unused-beans = false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNTIyNQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgzODg2Mw==", "bodyText": "I think we should create a ticket about this, so its not forgotten. As end users this is a PITA to remember to have to do", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r442838863", "createdAt": "2020-06-19T13:25:30Z", "author": {"login": "davsclaus"}, "path": "examples/timer-log-cdi/src/main/resources/application.properties", "diffHunk": "@@ -14,33 +14,17 @@\n ## See the License for the specific language governing permissions and\n ## limitations under the License.\n ## ---------------------------------------------------------------------------\n+\n #\n # Quarkus\n #\n quarkus.banner.enabled = false\n \n-#\n-# Quarkus - Camel\n-#\n-\n-# disable build time route discovery as the only\n-# route defined in this project is based on CDI.\n-#\n-# This is not strictly needed for the correctness\n-# because camel-quarkus automatically\n-# filters auto-discovered routes that targets CDI\n-# but if is is known that routes are all leveraging\n-# CDI, this option will give some little boost to\n-# the build process\n-quarkus.camel.main.routes-discovery.enabled = false\n-\n-#\n-# Camel\n-#\n-camel.context.name = quarkus-camel-example-timer-log-cdi\n+# camel look-up beans using BeanManager so we don't want\n+# ArC to remove beans without injection points.\n+quarkus.arc.remove-unused-beans = false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNTIyNQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg0NDA4NA==", "bodyText": "#1387", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r442844084", "createdAt": "2020-06-19T13:35:20Z", "author": {"login": "lburgazzoli"}, "path": "examples/timer-log-cdi/src/main/resources/application.properties", "diffHunk": "@@ -14,33 +14,17 @@\n ## See the License for the specific language governing permissions and\n ## limitations under the License.\n ## ---------------------------------------------------------------------------\n+\n #\n # Quarkus\n #\n quarkus.banner.enabled = false\n \n-#\n-# Quarkus - Camel\n-#\n-\n-# disable build time route discovery as the only\n-# route defined in this project is based on CDI.\n-#\n-# This is not strictly needed for the correctness\n-# because camel-quarkus automatically\n-# filters auto-discovered routes that targets CDI\n-# but if is is known that routes are all leveraging\n-# CDI, this option will give some little boost to\n-# the build process\n-quarkus.camel.main.routes-discovery.enabled = false\n-\n-#\n-# Camel\n-#\n-camel.context.name = quarkus-camel-example-timer-log-cdi\n+# camel look-up beans using BeanManager so we don't want\n+# ArC to remove beans without injection points.\n+quarkus.arc.remove-unused-beans = false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNTIyNQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQyMjA5OnYy", "diffSide": "RIGHT", "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelNativeImageProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozODo0N1rOGjohzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozODo0N1rOGjohzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNzM1Ng==", "bodyText": "Yeah all converters are now non-reflective, so we should look at this in another ticket", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440017356", "createdAt": "2020-06-15T08:38:47Z", "author": {"login": "davsclaus"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelNativeImageProcessor.java", "diffHunk": "@@ -0,0 +1,298 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import io.quarkus.deployment.ApplicationArchive;\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.builditem.ApplicationArchivesBuildItem;\n+import io.quarkus.deployment.builditem.CombinedIndexBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.NativeImageResourceBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveClassBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveMethodBuildItem;\n+import org.apache.camel.CamelContext;\n+import org.apache.camel.Component;\n+import org.apache.camel.Consumer;\n+import org.apache.camel.Converter;\n+import org.apache.camel.Endpoint;\n+import org.apache.camel.Producer;\n+import org.apache.camel.TypeConverter;\n+import org.apache.camel.impl.engine.DefaultComponentResolver;\n+import org.apache.camel.impl.engine.DefaultDataFormatResolver;\n+import org.apache.camel.impl.engine.DefaultLanguageResolver;\n+import org.apache.camel.quarkus.core.CamelConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ReflectionConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ResourcesConfig;\n+import org.apache.camel.quarkus.core.CamelConfigFlags;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRoutesBuilderClassBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServiceBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServicePatternBuildItem;\n+import org.apache.camel.quarkus.core.deployment.util.CamelSupport;\n+import org.apache.camel.quarkus.core.deployment.util.PathFilter;\n+import org.apache.camel.spi.DataFormat;\n+import org.apache.camel.spi.ExchangeFormatter;\n+import org.apache.camel.spi.PropertiesComponent;\n+import org.apache.camel.spi.ScheduledPollConsumerScheduler;\n+import org.apache.camel.spi.StreamCachingStrategy;\n+import org.apache.camel.support.CamelContextHelper;\n+import org.jboss.jandex.AnnotationTarget.Kind;\n+import org.jboss.jandex.AnnotationValue;\n+import org.jboss.jandex.ClassInfo;\n+import org.jboss.jandex.DotName;\n+import org.jboss.jandex.IndexView;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static org.apache.commons.lang3.ClassUtils.getPackageName;\n+\n+public class CamelNativeImageProcessor {\n+    private static final Logger LOGGER = LoggerFactory.getLogger(CamelNativeImageProcessor.class);\n+\n+    private static final List<Class<?>> CAMEL_REFLECTIVE_CLASSES = Arrays.asList(\n+            Endpoint.class,\n+            Consumer.class,\n+            Producer.class,\n+            TypeConverter.class,\n+            ExchangeFormatter.class,\n+            ScheduledPollConsumerScheduler.class,\n+            Component.class,\n+            CamelContext.class,\n+            StreamCachingStrategy.class,\n+            StreamCachingStrategy.SpoolUsedHeapMemoryLimit.class,\n+            PropertiesComponent.class,\n+            DataFormat.class);\n+\n+    @BuildStep\n+    void reflectiveItems(\n+            CombinedIndexBuildItem combinedIndex,\n+            BuildProducer<ReflectiveClassBuildItem> reflectiveClass,\n+            BuildProducer<ReflectiveMethodBuildItem> reflectiveMethod) {\n+\n+        final IndexView view = combinedIndex.getIndex();\n+\n+        CAMEL_REFLECTIVE_CLASSES.stream()\n+                .map(Class::getName)\n+                .map(DotName::createSimple)\n+                .map(view::getAllKnownImplementors)\n+                .flatMap(Collection::stream)\n+                .filter(CamelSupport::isPublic)\n+                .forEach(v -> reflectiveClass.produce(new ReflectiveClassBuildItem(true, false, v.name().toString())));\n+\n+        DotName converter = DotName.createSimple(Converter.class.getName());\n+        List<ClassInfo> converterClasses = view.getAnnotations(converter)\n+                .stream()\n+                .filter(ai -> ai.target().kind() == Kind.CLASS)\n+                .filter(ai -> {\n+                    AnnotationValue av = ai.value(\"loader\");\n+                    boolean isLoader = av != null && av.asBoolean();\n+                    // filter out camel-base converters which are automatically inlined in the\n+                    // CoreStaticTypeConverterLoader\n+                    // need to revisit with Camel 3.0.0-M3 which should improve this area", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 113}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTYxNzAzOnYy", "diffSide": "RIGHT", "path": "docs/modules/ROOT/pages/extensions/main.adoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozMDoxMVrOGjqZGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjozOTozMFrOGj6Iqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA0Nzg5OQ==", "bodyText": "Would you mind adding a more informative <description> to the runtime pom.xml so that users get an idea what it is good for?", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440047899", "createdAt": "2020-06-15T09:30:11Z", "author": {"login": "ppalaga"}, "path": "docs/modules/ROOT/pages/extensions/main.adoc", "diffHunk": "@@ -0,0 +1,22 @@\n+// Do not edit directly!\n+// This file was generated by camel-quarkus-package-maven-plugin:update-extension-doc-page\n+\n+[[main]]\n+= Main\n+\n+[.badges]\n+[.badge-key]##Since Camel Quarkus##[.badge-version]##1.0.0-CR3## [.badge-key]##JVM##[.badge-supported]##supported## [.badge-key]##Native##[.badge-supported]##supported##\n+\n+Camel Main", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0NzI5Nw==", "bodyText": "Yep this is still something in my TODO as part of the documentation tasks", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440147297", "createdAt": "2020-06-15T12:42:33Z", "author": {"login": "lburgazzoli"}, "path": "docs/modules/ROOT/pages/extensions/main.adoc", "diffHunk": "@@ -0,0 +1,22 @@\n+// Do not edit directly!\n+// This file was generated by camel-quarkus-package-maven-plugin:update-extension-doc-page\n+\n+[[main]]\n+= Main\n+\n+[.badges]\n+[.badge-key]##Since Camel Quarkus##[.badge-version]##1.0.0-CR3## [.badge-key]##JVM##[.badge-supported]##supported## [.badge-key]##Native##[.badge-supported]##supported##\n+\n+Camel Main", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA0Nzg5OQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNTgzNA==", "bodyText": "done", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440305834", "createdAt": "2020-06-15T16:39:30Z", "author": {"login": "lburgazzoli"}, "path": "docs/modules/ROOT/pages/extensions/main.adoc", "diffHunk": "@@ -0,0 +1,22 @@\n+// Do not edit directly!\n+// This file was generated by camel-quarkus-package-maven-plugin:update-extension-doc-page\n+\n+[[main]]\n+= Main\n+\n+[.badges]\n+[.badge-key]##Since Camel Quarkus##[.badge-version]##1.0.0-CR3## [.badge-key]##JVM##[.badge-supported]##supported## [.badge-key]##Native##[.badge-supported]##supported##\n+\n+Camel Main", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA0Nzg5OQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTgwMDc0OnYy", "diffSide": "RIGHT", "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelContextProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoyMzoxNVrOGjsNTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoyMzoxNVrOGjsNTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3NzY0Ng==", "bodyText": "I appreciate the comment!", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440077646", "createdAt": "2020-06-15T10:23:15Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelContextProcessor.java", "diffHunk": "@@ -0,0 +1,160 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment;\n+\n+import java.util.List;\n+\n+import io.quarkus.arc.deployment.BeanContainerBuildItem;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Overridable;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.ServiceStartBuildItem;\n+import io.quarkus.runtime.RuntimeValue;\n+import org.apache.camel.CamelContext;\n+import org.apache.camel.quarkus.core.CamelConfig;\n+import org.apache.camel.quarkus.core.CamelConfigFlags;\n+import org.apache.camel.quarkus.core.CamelContextRecorder;\n+import org.apache.camel.quarkus.core.CamelRuntime;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelContextBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelContextCustomizerBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelFactoryFinderResolverBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelModelJAXBContextFactoryBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelModelToXMLDumperBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRegistryBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRoutesBuilderClassBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRoutesLoaderBuildItems;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRuntimeBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRuntimeTaskBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelTypeConverterRegistryBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.ContainerBeansBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.RuntimeCamelContextCustomizerBuildItem;\n+import org.apache.camel.quarkus.core.deployment.util.CamelSupport;\n+import org.apache.camel.spi.ModelJAXBContextFactory;\n+import org.apache.camel.spi.TypeConverterRegistry;\n+\n+public class CamelContextProcessor {\n+    /**\n+     * This build step is responsible to assemble a {@link CamelContext} instance.\n+     *\n+     * @param  beanContainer           a reference to a fully initialized CDI bean container\n+     * @param  recorder                the recorder.\n+     * @param  registry                a reference to a {@link org.apache.camel.spi.Registry}.\n+     * @param  typeConverterRegistry   a reference to a {@link TypeConverterRegistry}.\n+     * @param  modelJAXBContextFactory a list of known {@link ModelJAXBContextFactory}.\n+     * @param  xmlLoader               a list of known {@link org.apache.camel.spi.XMLRoutesDefinitionLoader}.\n+     * @param  modelDumper             a list of known {@link CamelModelToXMLDumperBuildItem}.\n+     * @param  factoryFinderResolver   a list of known {@link org.apache.camel.spi.FactoryFinderResolver}.\n+     * @param  customizers             a list of {@link org.apache.camel.quarkus.core.CamelContextCustomizer} used to\n+     *                                 customize the {@link CamelContext} at {@link ExecutionTime#STATIC_INIT}.\n+     * @return                         a build item holding an instance of a {@link CamelContext}\n+     */\n+    @Record(ExecutionTime.STATIC_INIT)\n+    @BuildStep\n+    CamelContextBuildItem context(\n+            BeanContainerBuildItem beanContainer,\n+            CamelContextRecorder recorder,\n+            CamelRegistryBuildItem registry,\n+            CamelTypeConverterRegistryBuildItem typeConverterRegistry,\n+            CamelModelJAXBContextFactoryBuildItem modelJAXBContextFactory,\n+            CamelRoutesLoaderBuildItems.Xml xmlLoader,\n+            CamelModelToXMLDumperBuildItem modelDumper,\n+            CamelFactoryFinderResolverBuildItem factoryFinderResolver,\n+            List<CamelContextCustomizerBuildItem> customizers,\n+            CamelConfig config) {\n+\n+        RuntimeValue<CamelContext> context = recorder.createContext(\n+                registry.getRegistry(),\n+                typeConverterRegistry.getRegistry(),\n+                modelJAXBContextFactory.getContextFactory(),\n+                xmlLoader.getLoader(),\n+                modelDumper.getValue(),\n+                factoryFinderResolver.getFactoryFinderResolver(),\n+                beanContainer.getValue(),\n+                CamelSupport.getCamelVersion(),\n+                config);\n+\n+        for (CamelContextCustomizerBuildItem customizer : customizers) {\n+            recorder.customize(context, customizer.get());\n+        }\n+\n+        return new CamelContextBuildItem(context);\n+    }\n+\n+    /**\n+     * This build steps assembles the default implementation of a {@link CamelRuntime} responsible to bootstrap\n+     * Camel.\n+     * <p>\n+     * This implementation provides the minimal features for a fully functional and ready to use {@link CamelRuntime} by\n+     * loading all the discoverable {@link org.apache.camel.RoutesBuilder} into the auto-configured {@link CamelContext}\n+     * but does not perform any advanced set-up such as:\n+     * <ul>\n+     * <li>auto-configure components/languages/data-formats through properties which is then under user responsibility\n+     * <li>take control of the application life-cycle\n+     * </ul>\n+     * <p>\n+     * For advanced auto-configuration capabilities add camel-quarkus-main to the list of dependencies.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTgzNzAwOnYy", "diffSide": "RIGHT", "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelNativeImageProcessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDozNTowNlrOGjslBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo0MDoyN1rOGj6KxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4MzcxNg==", "bodyText": "A side note about a possible future refactoring: Producing a single ReflectiveClassBuildItem containing multiple class names seems to be more effective than producing multiple ReflectiveClassBuildItems containing single class name each. We have several sites like this.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440083716", "createdAt": "2020-06-15T10:35:06Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelNativeImageProcessor.java", "diffHunk": "@@ -0,0 +1,298 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import io.quarkus.deployment.ApplicationArchive;\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.builditem.ApplicationArchivesBuildItem;\n+import io.quarkus.deployment.builditem.CombinedIndexBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.NativeImageResourceBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveClassBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveMethodBuildItem;\n+import org.apache.camel.CamelContext;\n+import org.apache.camel.Component;\n+import org.apache.camel.Consumer;\n+import org.apache.camel.Converter;\n+import org.apache.camel.Endpoint;\n+import org.apache.camel.Producer;\n+import org.apache.camel.TypeConverter;\n+import org.apache.camel.impl.engine.DefaultComponentResolver;\n+import org.apache.camel.impl.engine.DefaultDataFormatResolver;\n+import org.apache.camel.impl.engine.DefaultLanguageResolver;\n+import org.apache.camel.quarkus.core.CamelConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ReflectionConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ResourcesConfig;\n+import org.apache.camel.quarkus.core.CamelConfigFlags;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRoutesBuilderClassBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServiceBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServicePatternBuildItem;\n+import org.apache.camel.quarkus.core.deployment.util.CamelSupport;\n+import org.apache.camel.quarkus.core.deployment.util.PathFilter;\n+import org.apache.camel.spi.DataFormat;\n+import org.apache.camel.spi.ExchangeFormatter;\n+import org.apache.camel.spi.PropertiesComponent;\n+import org.apache.camel.spi.ScheduledPollConsumerScheduler;\n+import org.apache.camel.spi.StreamCachingStrategy;\n+import org.apache.camel.support.CamelContextHelper;\n+import org.jboss.jandex.AnnotationTarget.Kind;\n+import org.jboss.jandex.AnnotationValue;\n+import org.jboss.jandex.ClassInfo;\n+import org.jboss.jandex.DotName;\n+import org.jboss.jandex.IndexView;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static org.apache.commons.lang3.ClassUtils.getPackageName;\n+\n+public class CamelNativeImageProcessor {\n+    private static final Logger LOGGER = LoggerFactory.getLogger(CamelNativeImageProcessor.class);\n+\n+    private static final List<Class<?>> CAMEL_REFLECTIVE_CLASSES = Arrays.asList(\n+            Endpoint.class,\n+            Consumer.class,\n+            Producer.class,\n+            TypeConverter.class,\n+            ExchangeFormatter.class,\n+            ScheduledPollConsumerScheduler.class,\n+            Component.class,\n+            CamelContext.class,\n+            StreamCachingStrategy.class,\n+            StreamCachingStrategy.SpoolUsedHeapMemoryLimit.class,\n+            PropertiesComponent.class,\n+            DataFormat.class);\n+\n+    @BuildStep\n+    void reflectiveItems(\n+            CombinedIndexBuildItem combinedIndex,\n+            BuildProducer<ReflectiveClassBuildItem> reflectiveClass,\n+            BuildProducer<ReflectiveMethodBuildItem> reflectiveMethod) {\n+\n+        final IndexView view = combinedIndex.getIndex();\n+\n+        CAMEL_REFLECTIVE_CLASSES.stream()\n+                .map(Class::getName)\n+                .map(DotName::createSimple)\n+                .map(view::getAllKnownImplementors)\n+                .flatMap(Collection::stream)\n+                .filter(CamelSupport::isPublic)\n+                .forEach(v -> reflectiveClass.produce(new ReflectiveClassBuildItem(true, false, v.name().toString())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNjM3Mw==", "bodyText": "let postpone this", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440306373", "createdAt": "2020-06-15T16:40:27Z", "author": {"login": "lburgazzoli"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelNativeImageProcessor.java", "diffHunk": "@@ -0,0 +1,298 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import io.quarkus.deployment.ApplicationArchive;\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.builditem.ApplicationArchivesBuildItem;\n+import io.quarkus.deployment.builditem.CombinedIndexBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.NativeImageResourceBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveClassBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveMethodBuildItem;\n+import org.apache.camel.CamelContext;\n+import org.apache.camel.Component;\n+import org.apache.camel.Consumer;\n+import org.apache.camel.Converter;\n+import org.apache.camel.Endpoint;\n+import org.apache.camel.Producer;\n+import org.apache.camel.TypeConverter;\n+import org.apache.camel.impl.engine.DefaultComponentResolver;\n+import org.apache.camel.impl.engine.DefaultDataFormatResolver;\n+import org.apache.camel.impl.engine.DefaultLanguageResolver;\n+import org.apache.camel.quarkus.core.CamelConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ReflectionConfig;\n+import org.apache.camel.quarkus.core.CamelConfig.ResourcesConfig;\n+import org.apache.camel.quarkus.core.CamelConfigFlags;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelRoutesBuilderClassBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServiceBuildItem;\n+import org.apache.camel.quarkus.core.deployment.spi.CamelServicePatternBuildItem;\n+import org.apache.camel.quarkus.core.deployment.util.CamelSupport;\n+import org.apache.camel.quarkus.core.deployment.util.PathFilter;\n+import org.apache.camel.spi.DataFormat;\n+import org.apache.camel.spi.ExchangeFormatter;\n+import org.apache.camel.spi.PropertiesComponent;\n+import org.apache.camel.spi.ScheduledPollConsumerScheduler;\n+import org.apache.camel.spi.StreamCachingStrategy;\n+import org.apache.camel.support.CamelContextHelper;\n+import org.jboss.jandex.AnnotationTarget.Kind;\n+import org.jboss.jandex.AnnotationValue;\n+import org.jboss.jandex.ClassInfo;\n+import org.jboss.jandex.DotName;\n+import org.jboss.jandex.IndexView;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static org.apache.commons.lang3.ClassUtils.getPackageName;\n+\n+public class CamelNativeImageProcessor {\n+    private static final Logger LOGGER = LoggerFactory.getLogger(CamelNativeImageProcessor.class);\n+\n+    private static final List<Class<?>> CAMEL_REFLECTIVE_CLASSES = Arrays.asList(\n+            Endpoint.class,\n+            Consumer.class,\n+            Producer.class,\n+            TypeConverter.class,\n+            ExchangeFormatter.class,\n+            ScheduledPollConsumerScheduler.class,\n+            Component.class,\n+            CamelContext.class,\n+            StreamCachingStrategy.class,\n+            StreamCachingStrategy.SpoolUsedHeapMemoryLimit.class,\n+            PropertiesComponent.class,\n+            DataFormat.class);\n+\n+    @BuildStep\n+    void reflectiveItems(\n+            CombinedIndexBuildItem combinedIndex,\n+            BuildProducer<ReflectiveClassBuildItem> reflectiveClass,\n+            BuildProducer<ReflectiveMethodBuildItem> reflectiveMethod) {\n+\n+        final IndexView view = combinedIndex.getIndex();\n+\n+        CAMEL_REFLECTIVE_CLASSES.stream()\n+                .map(Class::getName)\n+                .map(DotName::createSimple)\n+                .map(view::getAllKnownImplementors)\n+                .flatMap(Collection::stream)\n+                .filter(CamelSupport::isPublic)\n+                .forEach(v -> reflectiveClass.produce(new ReflectiveClassBuildItem(true, false, v.name().toString())));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4MzcxNg=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 102}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTk4Mzk3OnYy", "diffSide": "RIGHT", "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeBuildItem.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMToyMzozOFrOGjuA5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwNjoyMzoxMFrOGkM0DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwNzIzNg==", "bodyText": "Please next time put this kind of refactorings in a separate commit.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440107236", "createdAt": "2020-06-15T11:23:38Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeBuildItem.java", "diffHunk": "@@ -18,19 +18,16 @@\n \n import io.quarkus.builder.item.SimpleBuildItem;\n import io.quarkus.runtime.RuntimeValue;\n-import org.apache.camel.spi.ReactiveExecutor;\n+import org.apache.camel.quarkus.core.CamelRuntime;\n \n-/**\n- * Holds the {@link ReactiveExecutor} {@link RuntimeValue}.\n- */\n-public final class CamelReactiveExecutorBuildItem extends SimpleBuildItem {\n-    private final RuntimeValue<ReactiveExecutor> instance;\n+public final class CamelRuntimeBuildItem extends SimpleBuildItem {\n+    private final RuntimeValue<CamelRuntime> runtime;\n \n-    public CamelReactiveExecutorBuildItem(RuntimeValue<ReactiveExecutor> instance) {\n-        this.instance = instance;\n+    public CamelRuntimeBuildItem(RuntimeValue<CamelRuntime> runtime) {\n+        this.runtime = runtime;\n     }\n \n-    public RuntimeValue<ReactiveExecutor> getInstance() {\n-        return instance;\n+    public RuntimeValue<CamelRuntime> get() {\n+        return runtime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1MTYxMQ==", "bodyText": "I guess git got confused as I did remove the ReactiveExecutorBuildItem build item and I have introduced CamelRuntimeBuildItem", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440151611", "createdAt": "2020-06-15T12:49:54Z", "author": {"login": "lburgazzoli"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeBuildItem.java", "diffHunk": "@@ -18,19 +18,16 @@\n \n import io.quarkus.builder.item.SimpleBuildItem;\n import io.quarkus.runtime.RuntimeValue;\n-import org.apache.camel.spi.ReactiveExecutor;\n+import org.apache.camel.quarkus.core.CamelRuntime;\n \n-/**\n- * Holds the {@link ReactiveExecutor} {@link RuntimeValue}.\n- */\n-public final class CamelReactiveExecutorBuildItem extends SimpleBuildItem {\n-    private final RuntimeValue<ReactiveExecutor> instance;\n+public final class CamelRuntimeBuildItem extends SimpleBuildItem {\n+    private final RuntimeValue<CamelRuntime> runtime;\n \n-    public CamelReactiveExecutorBuildItem(RuntimeValue<ReactiveExecutor> instance) {\n-        this.instance = instance;\n+    public CamelRuntimeBuildItem(RuntimeValue<CamelRuntime> runtime) {\n+        this.runtime = runtime;\n     }\n \n-    public RuntimeValue<ReactiveExecutor> getInstance() {\n-        return instance;\n+    public RuntimeValue<CamelRuntime> get() {\n+        return runtime;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwNzIzNg=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxMTg1Mg==", "bodyText": "Sorry then", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440611852", "createdAt": "2020-06-16T06:23:10Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeBuildItem.java", "diffHunk": "@@ -18,19 +18,16 @@\n \n import io.quarkus.builder.item.SimpleBuildItem;\n import io.quarkus.runtime.RuntimeValue;\n-import org.apache.camel.spi.ReactiveExecutor;\n+import org.apache.camel.quarkus.core.CamelRuntime;\n \n-/**\n- * Holds the {@link ReactiveExecutor} {@link RuntimeValue}.\n- */\n-public final class CamelReactiveExecutorBuildItem extends SimpleBuildItem {\n-    private final RuntimeValue<ReactiveExecutor> instance;\n+public final class CamelRuntimeBuildItem extends SimpleBuildItem {\n+    private final RuntimeValue<CamelRuntime> runtime;\n \n-    public CamelReactiveExecutorBuildItem(RuntimeValue<ReactiveExecutor> instance) {\n-        this.instance = instance;\n+    public CamelRuntimeBuildItem(RuntimeValue<CamelRuntime> runtime) {\n+        this.runtime = runtime;\n     }\n \n-    public RuntimeValue<ReactiveExecutor> getInstance() {\n-        return instance;\n+    public RuntimeValue<CamelRuntime> get() {\n+        return runtime;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwNzIzNg=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTk5MTMxOnYy", "diffSide": "RIGHT", "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeTaskBuildItem.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMToyNjoxOFrOGjuFgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjozOTo1NFrOGj6Jmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwODQxOQ==", "bodyText": "I wonder what symbolic means here?\nI never heart of runtime tasks in the context of Camel Quarkus. Could you please add a sentence or example to get an idea what it is?", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440108419", "createdAt": "2020-06-15T11:26:18Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeTaskBuildItem.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment.spi;\n+\n+import io.quarkus.builder.item.MultiBuildItem;\n+\n+/**\n+ * A symbolic class that represents a runtime task.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNjA3NA==", "bodyText": "done", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440306074", "createdAt": "2020-06-15T16:39:54Z", "author": {"login": "lburgazzoli"}, "path": "extensions-core/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/spi/CamelRuntimeTaskBuildItem.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.core.deployment.spi;\n+\n+import io.quarkus.builder.item.MultiBuildItem;\n+\n+/**\n+ * A symbolic class that represents a runtime task.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwODQxOQ=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjAzMjQ0OnYy", "diffSide": "RIGHT", "path": "extensions-core/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTo0MDowOFrOGjufTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTo0MDowOFrOGjufTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDExNTAyMw==", "bodyText": "Explaining in more detail what it does or add a link to a resource that explains it would be nice.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440115023", "createdAt": "2020-06-15T11:40:08Z", "author": {"login": "ppalaga"}, "path": "extensions-core/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java", "diffHunk": "@@ -44,29 +44,25 @@\n     @ConfigItem\n     public RuntimeCatalogConfig runtimeCatalog;\n \n+    /**\n+     * Build time configuration options for routes discovery.\n+     */\n+    @ConfigItem\n+    public RoutesDiscoveryConfig routesDiscovery;\n+\n     /**\n      * Build time configuration options related to the building of native executable.\n      */\n     @ConfigItem(name = \"native\")\n     public NativeConfig native_;\n \n     @ConfigGroup\n-    public static class MainConfig {\n+    public static class BootstrapConfig {\n         /**\n-         * Enable {@code camel-main}. If {@code true}, routes are automatically\n-         * loaded and started and the entire lifecycle of the Camel Context is\n-         * under the control of the {@code camel-main} component. Otherwise, the\n-         * application developer is responsible for performing all the mentioned\n-         * tasks.\n+         * Enable bootstrapping the {@link CamelRuntime}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjE3NTEzOnYy", "diffSide": "RIGHT", "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjoyNTozMVrOGjv6PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo0MDowMVrOGj6J2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzODMwMA==", "bodyText": "Why do we need the empty trailing string here?", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440138300", "createdAt": "2020-06-15T12:25:31Z", "author": {"login": "ppalaga"}, "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "diffHunk": "@@ -66,7 +67,7 @@ public XMLRoutesDefinitionLoader getXmlRoutesLoader() {\n         List<RoutesDefinition> answer = new ArrayList<>();\n         PackageScanResourceResolver resolver = camelContext.adapt(ExtendedCamelContext.class).getPackageScanResourceResolver();\n \n-        for (String part : directory.split(\",\")) {\n+        for (String part : directory.split(\",\", -1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIwNjAyOQ==", "bodyText": "thx to spot this, I don't really know what's the reason of such change", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440206029", "createdAt": "2020-06-15T14:13:29Z", "author": {"login": "lburgazzoli"}, "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "diffHunk": "@@ -66,7 +67,7 @@ public XMLRoutesDefinitionLoader getXmlRoutesLoader() {\n         List<RoutesDefinition> answer = new ArrayList<>();\n         PackageScanResourceResolver resolver = camelContext.adapt(ExtendedCamelContext.class).getPackageScanResourceResolver();\n \n-        for (String part : directory.split(\",\")) {\n+        for (String part : directory.split(\",\", -1)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzODMwMA=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNjEzNw==", "bodyText": "done", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440306137", "createdAt": "2020-06-15T16:40:01Z", "author": {"login": "lburgazzoli"}, "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "diffHunk": "@@ -66,7 +67,7 @@ public XMLRoutesDefinitionLoader getXmlRoutesLoader() {\n         List<RoutesDefinition> answer = new ArrayList<>();\n         PackageScanResourceResolver resolver = camelContext.adapt(ExtendedCamelContext.class).getPackageScanResourceResolver();\n \n-        for (String part : directory.split(\",\")) {\n+        for (String part : directory.split(\",\", -1)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzODMwMA=="}, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjE3NTQxOnYy", "diffSide": "RIGHT", "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjoyNTozNlrOGjv6bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjoyNTozNlrOGjv6bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzODM0OQ==", "bodyText": "Why do we need the empty trailing string here?", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440138349", "createdAt": "2020-06-15T12:25:36Z", "author": {"login": "ppalaga"}, "path": "extensions-core/main/runtime/src/main/java/org/apache/camel/quarkus/main/CamelMainRoutesCollector.java", "diffHunk": "@@ -90,7 +91,7 @@ public XMLRoutesDefinitionLoader getXmlRoutesLoader() {\n         List<RestsDefinition> answer = new ArrayList<>();\n         PackageScanResourceResolver resolver = camelContext.adapt(ExtendedCamelContext.class).getPackageScanResourceResolver();\n \n-        for (String part : directory.split(\",\")) {\n+        for (String part : directory.split(\",\", -1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "819cbfb356daeca683fb7eee87719c1f261ee5b5"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTE1OTc5OnYy", "diffSide": "RIGHT", "path": "extensions-core/main/runtime/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwNjozMDoyMlrOGkM-ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwNjozMDoyMlrOGkM-ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxNDU4Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <description>Bootstrap Camel using Camel Main which bring advanced auto-configuration capabilities and integration with Quarkus Command Mode</description>\n          \n          \n            \n                <description>Bootstrap Camel using Camel Main which brings advanced auto-configuration capabilities and integration with Quarkus Command Mode</description>", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r440614586", "createdAt": "2020-06-16T06:30:22Z", "author": {"login": "ppalaga"}, "path": "extensions-core/main/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,107 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one or more\n+    contributor license agreements.  See the NOTICE file distributed with\n+    this work for additional information regarding copyright ownership.\n+    The ASF licenses this file to You under the Apache License, Version 2.0\n+    (the \"License\"); you may not use this file except in compliance with\n+    the License.  You may obtain a copy of the License at\n+\n+         http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <groupId>org.apache.camel.quarkus</groupId>\n+        <artifactId>camel-quarkus-main-parent</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>camel-quarkus-main</artifactId>\n+    <name>Camel Quarkus :: Main :: Runtime</name>\n+    <description>Bootstrap Camel using Camel Main which bring advanced auto-configuration capabilities and integration with Quarkus Command Mode</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77fcc9fab3e1f49ffb2ea4f13b0810bb5da15af"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE2MjMzOnYy", "diffSide": "RIGHT", "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozMDozOFrOGlSCNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozMDozOFrOGlSCNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NTk3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            :page-aliases: bootstrap.adoc\n          \n      \n    \n    \n  \n\nIf bootstrap.adoc is  a new page, there is no point in adding an alias. Aliases serve for setting redirects and we use them mainly when we move a page.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441745973", "createdAt": "2020-06-17T18:30:38Z", "author": {"login": "ppalaga"}, "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "diffHunk": "@@ -0,0 +1,35 @@\n+= Bootstrap Camel Quarkus\n+:page-aliases: bootstrap.adoc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE2OTUwOnYy", "diffSide": "RIGHT", "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozMjo1OFrOGlSG_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo1ODoyNlrOGlTUCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzE5Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Camel Quarkus automatically configure and deploy a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific properties indentified by \"camel.quarkus\" as prefix. After the configuration is done, a minimal Camel Runtime is assembled and started at RUNTIME_INIT time. At that point, any additional configuration should be done using CDI, below an example bout how to configure a Camel Component:\n          \n          \n            \n            Camel Quarkus automatically configures and deploys a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific `camel.quarkus.*` properties. After the configuration is done, a minimal Camel Runtime is assembled and started at `RUNTIME_INIT` time. At that point, any additional configuration should be done using CDI. Below is an example showing how to configure a Camel Component:", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441747196", "createdAt": "2020-06-17T18:32:58Z", "author": {"login": "ppalaga"}, "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "diffHunk": "@@ -0,0 +1,35 @@\n+= Bootstrap Camel Quarkus\n+:page-aliases: bootstrap.adoc\n+\n+Camel Quarkus automatically configure and deploy a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific properties indentified by \"camel.quarkus\" as prefix. After the configuration is done, a minimal Camel Runtime is assembled and started at RUNTIME_INIT time. At that point, any additional configuration should be done using CDI, below an example bout how to configure a Camel Component:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2NjkyMQ==", "bodyText": "I haven't yet marked the documentation (user guide) as done,\nThis is just a bunch of notes and I've committed it as I will continue on another computer so I need a way to synk them :)", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441766921", "createdAt": "2020-06-17T18:58:26Z", "author": {"login": "lburgazzoli"}, "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "diffHunk": "@@ -0,0 +1,35 @@\n+= Bootstrap Camel Quarkus\n+:page-aliases: bootstrap.adoc\n+\n+Camel Quarkus automatically configure and deploy a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific properties indentified by \"camel.quarkus\" as prefix. After the configuration is done, a minimal Camel Runtime is assembled and started at RUNTIME_INIT time. At that point, any additional configuration should be done using CDI, below an example bout how to configure a Camel Component:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzE5Ng=="}, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE3NDczOnYy", "diffSide": "RIGHT", "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNDozNFrOGlSKfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNDozNFrOGlSKfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0ODA5Mw==", "bodyText": "Please add all or at least the most important imports.", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441748093", "createdAt": "2020-06-17T18:34:34Z", "author": {"login": "ppalaga"}, "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "diffHunk": "@@ -0,0 +1,35 @@\n+= Bootstrap Camel Quarkus\n+:page-aliases: bootstrap.adoc\n+\n+Camel Quarkus automatically configure and deploy a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific properties indentified by \"camel.quarkus\" as prefix. After the configuration is done, a minimal Camel Runtime is assembled and started at RUNTIME_INIT time. At that point, any additional configuration should be done using CDI, below an example bout how to configure a Camel Component:\n+\n+[source,java]\n+----\n+@ApplicationScoped", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE3NzczOnYy", "diffSide": "RIGHT", "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNToyNFrOGlSMcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNToyNFrOGlSMcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0ODU5NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To configure component and other aspects of Apache Camel through properties, you can add the camel-core-main extension which brings functionnalities from https://camel.apache.org/components/latest/others/main.html[Apache Camel Main] to Camel Quarkus. By adding such extension the programmatic configuration of the Log Component done above, can be done through properties:\n          \n          \n            \n            To configure component and other aspects of Apache Camel through properties, you can add the `camel-core-main` extension which brings functionalities from https://camel.apache.org/components/latest/others/main.html[Apache Camel Main] to Camel Quarkus. By adding such extension the programmatic configuration of the Log Component done above, can be done through properties:", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441748595", "createdAt": "2020-06-17T18:35:24Z", "author": {"login": "ppalaga"}, "path": "docs/modules/ROOT/pages/user-guide/bootstrap.adoc", "diffHunk": "@@ -0,0 +1,35 @@\n+= Bootstrap Camel Quarkus\n+:page-aliases: bootstrap.adoc\n+\n+Camel Quarkus automatically configure and deploy a Camel Context bean which by default is started/stopped according to the Quarkus Application lifecycle. The configuration step happens at build time during Quarkus' augmentation phase and it is driven by the Camel Quarkus extensions which can be tuned using Camel Quarkus specific properties indentified by \"camel.quarkus\" as prefix. After the configuration is done, a minimal Camel Runtime is assembled and started at RUNTIME_INIT time. At that point, any additional configuration should be done using CDI, below an example bout how to configure a Camel Component:\n+\n+[source,java]\n+----\n+@ApplicationScoped\n+public class Configurations {\n+    /**\n+     * Produces a {@link LogComponent} instance with a custom exchange formatter.\n+     */\n+    @Named\n+    LogComponent log() {\n+        DefaultExchangeFormatter formatter = new DefaultExchangeFormatter();\n+        formatter.setShowExchangePattern(false);\n+        formatter.setShowBodyType(false);\n+\n+        LogComponent component = new LogComponent();\n+        component.setExchangeFormatter(formatter);\n+\n+        return component;\n+    }\n+}\n+----\n+\n+To configure component and other aspects of Apache Camel through properties, you can add the camel-core-main extension which brings functionnalities from https://camel.apache.org/components/latest/others/main.html[Apache Camel Main] to Camel Quarkus. By adding such extension the programmatic configuration of the Log Component done above, can be done through properties:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE4MjU4OnYy", "diffSide": "RIGHT", "path": "examples/timer-log-cdi/src/main/java/org/acme/timer/TimerRoute.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNjo0NlrOGlSPiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNjo0NlrOGlSPiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0OTM4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            // the configuration of the log component is programmatically done using CDI\n          \n          \n            \n                            // the configuration of the log component is done programmatically using CDI", "url": "https://github.com/apache/camel-quarkus/pull/1344#discussion_r441749385", "createdAt": "2020-06-17T18:36:46Z", "author": {"login": "ppalaga"}, "path": "examples/timer-log-cdi/src/main/java/org/acme/timer/TimerRoute.java", "diffHunk": "@@ -31,18 +31,24 @@\n @ApplicationScoped\n public class TimerRoute extends RouteBuilder {\n \n-    /** {@code timer.period} is defined in {@code src/main/resources/application.properties} */\n+    /**\n+     * {@code timer.period} is defined in {@code src/main/resources/application.properties}\n+     */\n     @ConfigProperty(name = \"timer.period\", defaultValue = \"1000\")\n     String period;\n \n-    /** An injected bean */\n+    /**\n+     * An injected bean\n+     */\n     @Inject\n     Counter counter;\n \n     @Override\n     public void configure() throws Exception {\n         fromF(\"timer:foo?period=%s\", period)\n                 .setBody(exchange -> \"Incremented the counter: \" + counter.increment())\n-                .to(\"log:example?showExchangePattern=false&showBodyType=false\");\n+                // the configuration of the log component is programmatically done using CDI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffa86e60bb3f5f7580999f5d6b2d2c4fd8cbbc3"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4234, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}