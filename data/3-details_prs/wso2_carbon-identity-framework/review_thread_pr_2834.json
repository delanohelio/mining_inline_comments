{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMzc0MTkx", "number": 2834, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzoyMzowM1rODpxQoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNDo0NzoyMFrOEiYUjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTI1MjgxOnYy", "diffSide": "RIGHT", "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/ConfigurationDAO.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzoyMzowM1rOF5Jhrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzoyMzowM1rOF5Jhrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ2OTIzMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                List<ResourceFile> getFilesByResourceType(String resourceTypeId, int tenantID) throws ConfigurationManagementException;\n          \n          \n            \n                List<ResourceFile> getFilesByResourceType(String resourceTypeId, int tenantId) throws ConfigurationManagementException;", "url": "https://github.com/wso2/carbon-identity-framework/pull/2834#discussion_r395469231", "createdAt": "2020-03-20T07:23:03Z", "author": {"login": "tharindu-bandara"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/ConfigurationDAO.java", "diffHunk": "@@ -223,12 +223,13 @@ void addFile(String fileId, String resourceId, String fileName, InputStream file\n     List<ResourceFile> getFiles(String resourceId, String resourceTypeName, String resourceName) throws ConfigurationManagementException;\n \n     /**\n-     * Get files for the {@link ResourceType}.\n+     * Get files for the resource by resource type Id and tenant ID.\n      *\n-     * @param resourceTypeId Id of the {@link ResourceType}.\n+     * @param resourceTypeId Id of the {@link ResourceType}\n+     * @param tenantID       Id of the tenant\n      * @return A list of {@link ResourceFile} for the given resource.\n      */\n-    List<ResourceFile> getFilesByResourceType(String resourceTypeId) throws ConfigurationManagementException;\n+    List<ResourceFile> getFilesByResourceType(String resourceTypeId, int tenantID) throws ConfigurationManagementException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1d6b9061266ba9b92147db1bd8abedd8edd9e90"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTI1MzUyOnYy", "diffSide": "RIGHT", "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/ConfigurationDAO.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzoyMzoyM1rOF5JiHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzoyMzoyM1rOF5JiHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ2OTM0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Get files for the resource by resource type Id and tenant ID.\n          \n          \n            \n                 * Get files for the resource by resource type Id and tenant Id.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2834#discussion_r395469342", "createdAt": "2020-03-20T07:23:23Z", "author": {"login": "tharindu-bandara"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/ConfigurationDAO.java", "diffHunk": "@@ -223,12 +223,13 @@ void addFile(String fileId, String resourceId, String fileName, InputStream file\n     List<ResourceFile> getFiles(String resourceId, String resourceTypeName, String resourceName) throws ConfigurationManagementException;\n \n     /**\n-     * Get files for the {@link ResourceType}.\n+     * Get files for the resource by resource type Id and tenant ID.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1d6b9061266ba9b92147db1bd8abedd8edd9e90"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NDg1NTE3OnYy", "diffSide": "RIGHT", "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/ConfigurationManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNDo0NzoyMFrOHQOJDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNjo0Mzo0OFrOHQQUvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc3MDk1OA==", "bodyText": "Is the tenant tracked in some other way (part of the log line)?\nIf not, would be better to included the tenantId or tenantDomain as part of the log", "url": "https://github.com/wso2/carbon-identity-framework/pull/2834#discussion_r486770958", "createdAt": "2020-09-11T04:47:20Z", "author": {"login": "mefarazath"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/ConfigurationManagerImpl.java", "diffHunk": "@@ -778,6 +778,25 @@ public ResourceFile addFile(String resourceTypeName, String resourceName, String\n         return resourceFiles;\n     }\n \n+    @Override\n+    public List<ResourceFile> getFiles(String resourceTypeName, int tenantId) throws ConfigurationManagementException {\n+\n+        checkFeatureStatus();\n+        validateRequest(resourceTypeName);\n+        String resourceTypeId = getResourceTypeId(resourceTypeName);\n+        List<ResourceFile> resourceFiles = getConfigurationDAO().getFilesByResourceType(resourceTypeId, tenantId);\n+        if (CollectionUtils.isEmpty(resourceFiles)) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"Resource type: \" + resourceTypeName + \" does not have any files.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf030eab37a0a445bc82d3c7b0b45b4e5f5f9ee0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgwNjcxOQ==", "bodyText": "Fixed 58591c8", "url": "https://github.com/wso2/carbon-identity-framework/pull/2834#discussion_r486806719", "createdAt": "2020-09-11T06:43:48Z", "author": {"login": "GANGANI"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/ConfigurationManagerImpl.java", "diffHunk": "@@ -778,6 +778,25 @@ public ResourceFile addFile(String resourceTypeName, String resourceName, String\n         return resourceFiles;\n     }\n \n+    @Override\n+    public List<ResourceFile> getFiles(String resourceTypeName, int tenantId) throws ConfigurationManagementException {\n+\n+        checkFeatureStatus();\n+        validateRequest(resourceTypeName);\n+        String resourceTypeId = getResourceTypeId(resourceTypeName);\n+        List<ResourceFile> resourceFiles = getConfigurationDAO().getFilesByResourceType(resourceTypeId, tenantId);\n+        if (CollectionUtils.isEmpty(resourceFiles)) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"Resource type: \" + resourceTypeName + \" does not have any files.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc3MDk1OA=="}, "originalCommit": {"oid": "cf030eab37a0a445bc82d3c7b0b45b4e5f5f9ee0"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2256, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}