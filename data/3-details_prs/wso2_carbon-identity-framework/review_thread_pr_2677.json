{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDYyODUw", "number": 2677, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoxMDozM1rODYxTHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoxMDozM1rODYxTHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MzAwMTI0OnYy", "diffSide": "RIGHT", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoxMDozM1rOFe0WPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwNzo1OToyMVrOFfV0ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ==", "bodyText": "Haven't we already declared CODE_ID as UNIQUE in the next line?", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367859261", "createdAt": "2020-01-17T10:10:33Z", "author": {"login": "inthirakumaaran"}, "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "diffHunk": "@@ -178,16 +178,16 @@ CREATE TABLE IF NOT EXISTS IDN_OAUTH2_DEVICE_FLOW (\n             USER_DOMAIN VARCHAR(50),\n             IDP_ID INTEGER,\n             PRIMARY KEY (DEVICE_CODE),\n+            UNIQUE (CODE_ID),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30b952e9c98d9851e88edd6a167b610c23748cb1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2NTEzMA==", "bodyText": "That defines the combination of CODE_ID, USER_CODE & DEVICE_CODE as unique", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367865130", "createdAt": "2020-01-17T10:24:35Z", "author": {"login": "Abilashini"}, "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "diffHunk": "@@ -178,16 +178,16 @@ CREATE TABLE IF NOT EXISTS IDN_OAUTH2_DEVICE_FLOW (\n             USER_DOMAIN VARCHAR(50),\n             IDP_ID INTEGER,\n             PRIMARY KEY (DEVICE_CODE),\n+            UNIQUE (CODE_ID),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}, "originalCommit": {"oid": "30b952e9c98d9851e88edd6a167b610c23748cb1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg5NzYzNg==", "bodyText": "In this case, do we need to make the combination of CODE_ID, USER_CODE & DEVICE_CODE as unique since CODE_ID is always unique this combination will be always unique right?", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367897636", "createdAt": "2020-01-17T11:46:02Z", "author": {"login": "inthirakumaaran"}, "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "diffHunk": "@@ -178,16 +178,16 @@ CREATE TABLE IF NOT EXISTS IDN_OAUTH2_DEVICE_FLOW (\n             USER_DOMAIN VARCHAR(50),\n             IDP_ID INTEGER,\n             PRIMARY KEY (DEVICE_CODE),\n+            UNIQUE (CODE_ID),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}, "originalCommit": {"oid": "30b952e9c98d9851e88edd6a167b610c23748cb1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQwNzczOA==", "bodyText": "Fixed with #2682", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r368407738", "createdAt": "2020-01-20T07:59:21Z", "author": {"login": "Abilashini"}, "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "diffHunk": "@@ -178,16 +178,16 @@ CREATE TABLE IF NOT EXISTS IDN_OAUTH2_DEVICE_FLOW (\n             USER_DOMAIN VARCHAR(50),\n             IDP_ID INTEGER,\n             PRIMARY KEY (DEVICE_CODE),\n+            UNIQUE (CODE_ID),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}, "originalCommit": {"oid": "30b952e9c98d9851e88edd6a167b610c23748cb1"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2440, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}