{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMjkzMTQ0", "number": 2830, "title": "Validate role,subject and user claim uris under custom claim dialect", "bodyText": "Proposed changes in this pull request\nFix for wso2/product-is#7911", "createdAt": "2020-03-18T08:33:13Z", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830", "merged": true, "mergeCommit": {"oid": "88a32c17d44131a306a61e6ede2260c4907e1c7b"}, "closed": true, "closedAt": "2020-03-19T05:50:31Z", "author": {"login": "AnuradhaSK"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOzXHrAFqTM3NjY2Mzg1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPFVPGAFqTM3NzQzODM3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NjYzODU2", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-376663856", "createdAt": "2020-03-18T08:51:25Z", "commit": {"oid": "b6c9dffa79cf6f0d4c4d4bf8e3f7bf196033e145"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODo1MToyNlrOF37RTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODo1MToyNlrOF37RTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE4NzA4NA==", "bodyText": "shall we rename the variable to remoteClaimUris?\nalso no need to define type when initializing array list. we can directly call new ArrayList<>();", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#discussion_r394187084", "createdAt": "2020-03-18T08:51:26Z", "author": {"login": "emswbandara"}, "path": "components/application-mgt/org.wso2.carbon.identity.application.mgt/src/main/java/org/wso2/carbon/identity/application/mgt/ApplicationMgtValidator.java", "diffHunk": "@@ -357,20 +357,22 @@ private void validateClaimsConfigs(List<String> validationMsg, ClaimConfig claim\n \n         ApplicationManagementService applicationMgtService = ApplicationManagementService.getInstance();\n         String[] allLocalClaimUris = applicationMgtService.getAllLocalClaimUris(tenantDomain);\n+        ArrayList<String> allRemoteClaimUris = new ArrayList<String>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6c9dffa79cf6f0d4c4d4bf8e3f7bf196033e145"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NjY5Njk0", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-376669694", "createdAt": "2020-03-18T08:59:45Z", "commit": {"oid": "b6c9dffa79cf6f0d4c4d4bf8e3f7bf196033e145"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODo1OTo0NVrOF37jcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODo1OTo0NVrOF37jcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE5MTczMA==", "bodyText": "We might need to use a different error message here.\n\"Local claim %s is not available in the server for tenantDomain:%s\". Might not be suitable here.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#discussion_r394191730", "createdAt": "2020-03-18T08:59:45Z", "author": {"login": "mefarazath"}, "path": "components/application-mgt/org.wso2.carbon.identity.application.mgt/src/main/java/org/wso2/carbon/identity/application/mgt/ApplicationMgtValidator.java", "diffHunk": "@@ -381,6 +383,17 @@ private void validateClaimsConfigs(List<String> validationMsg, ClaimConfig claim\n                     subjectClaimUri)) {\n                 validationMsg.add(String.format(CLAIM_NOT_AVAILABLE, subjectClaimUri, tenantDomain));\n             }\n+        } else {\n+            if (StringUtils.isNotBlank(roleClaimUri) && !(allRemoteClaimUris).contains(roleClaimUri)) {\n+                validationMsg.add(String.format(CLAIM_NOT_AVAILABLE, roleClaimUri, tenantDomain));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6c9dffa79cf6f0d4c4d4bf8e3f7bf196033e145"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzIyNDgw", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-376722480", "createdAt": "2020-03-18T10:10:36Z", "commit": {"oid": "5f538eb3b5513b3978a784dd8a0df158de48ae34"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDoxMDozN1rOF3-Ihg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDoxMDozN1rOF3-Ihg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIzMzk5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static final String SP_CLAIM_NOT_AVAILABLE = \"Application Claim URI %s is not defined \" +\n          \n          \n            \n                private static final String SP_CLAIM_NOT_AVAILABLE = \"Application Claim URI '%s' is not defined \" +", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#discussion_r394233990", "createdAt": "2020-03-18T10:10:37Z", "author": {"login": "mefarazath"}, "path": "components/application-mgt/org.wso2.carbon.identity.application.mgt/src/main/java/org/wso2/carbon/identity/application/mgt/ApplicationMgtValidator.java", "diffHunk": "@@ -77,6 +77,8 @@\n             \"for tenantDomain:%s.\";\n     private static final String CLAIM_NOT_AVAILABLE = \"Local claim %s is not available in the server \" +\n             \"for tenantDomain:%s.\";\n+    private static final String SP_CLAIM_NOT_AVAILABLE = \"Application Claim URI %s is not defined \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f538eb3b5513b3978a784dd8a0df158de48ae34"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzI0NzEz", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-376724713", "createdAt": "2020-03-18T10:13:38Z", "commit": {"oid": "5f538eb3b5513b3978a784dd8a0df158de48ae34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8a7e71fa96ed3cbf949e754aff5b563fb8d1572", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/d8a7e71fa96ed3cbf949e754aff5b563fb8d1572", "committedDate": "2020-03-19T04:13:46Z", "message": "Validate role,subject and user claim uris under custom claim dialect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69a012a7455cdd549f80ca8c71628fcf80b1bf2b", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/69a012a7455cdd549f80ca8c71628fcf80b1bf2b", "committedDate": "2020-03-19T04:13:46Z", "message": "Change error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "121ee605b817fd29af4b4901ec148ad73160a779", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/121ee605b817fd29af4b4901ec148ad73160a779", "committedDate": "2020-03-19T04:14:49Z", "message": "Modify error log"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f538eb3b5513b3978a784dd8a0df158de48ae34", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/5f538eb3b5513b3978a784dd8a0df158de48ae34", "committedDate": "2020-03-18T10:08:07Z", "message": "Change error message"}, "afterCommit": {"oid": "121ee605b817fd29af4b4901ec148ad73160a779", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/121ee605b817fd29af4b4901ec148ad73160a779", "committedDate": "2020-03-19T04:14:49Z", "message": "Modify error log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDE1NDk2", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-377415496", "createdAt": "2020-03-19T04:24:48Z", "commit": {"oid": "121ee605b817fd29af4b4901ec148ad73160a779"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDoyNDo0OFrOF4fr1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDoyNDo0OFrOF4fr1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4MzcwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"for Service Provider:%s.\";\n          \n          \n            \n                        \"for application:%s.\";", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#discussion_r394783701", "createdAt": "2020-03-19T04:24:48Z", "author": {"login": "mefarazath"}, "path": "components/application-mgt/org.wso2.carbon.identity.application.mgt/src/main/java/org/wso2/carbon/identity/application/mgt/ApplicationMgtValidator.java", "diffHunk": "@@ -77,6 +77,8 @@\n             \"for tenantDomain:%s.\";\n     private static final String CLAIM_NOT_AVAILABLE = \"Local claim %s is not available in the server \" +\n             \"for tenantDomain:%s.\";\n+    private static final String SP_CLAIM_NOT_AVAILABLE = \"Application Claim URI '%s' is not defined \" +\n+            \"for Service Provider:%s.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "121ee605b817fd29af4b4901ec148ad73160a779"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b29cb4f92c6de08a226dd39ed245c1df3363f5cc", "author": {"user": {"login": "AnuradhaSK", "name": "Anuradha Karunarathna"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/b29cb4f92c6de08a226dd39ed245c1df3363f5cc", "committedDate": "2020-03-19T04:55:12Z", "message": "Modify SP_CLAIM_NOT_AVAILABLE error log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDMwNjg3", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-377430687", "createdAt": "2020-03-19T05:19:54Z", "commit": {"oid": "b29cb4f92c6de08a226dd39ed245c1df3363f5cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNToxOTo1NFrOF4gc2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNToxOTo1NFrOF4gc2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc5NjI1MA==", "bodyText": "shall we add a space after : mark", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#discussion_r394796250", "createdAt": "2020-03-19T05:19:54Z", "author": {"login": "emswbandara"}, "path": "components/application-mgt/org.wso2.carbon.identity.application.mgt/src/main/java/org/wso2/carbon/identity/application/mgt/ApplicationMgtValidator.java", "diffHunk": "@@ -77,6 +77,8 @@\n             \"for tenantDomain:%s.\";\n     private static final String CLAIM_NOT_AVAILABLE = \"Local claim %s is not available in the server \" +\n             \"for tenantDomain:%s.\";\n+    private static final String SP_CLAIM_NOT_AVAILABLE = \"Application Claim URI '%s' is not defined \" +\n+            \"for application:%s.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29cb4f92c6de08a226dd39ed245c1df3363f5cc"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDM4Mzc2", "url": "https://github.com/wso2/carbon-identity-framework/pull/2830#pullrequestreview-377438376", "createdAt": "2020-03-19T05:47:40Z", "commit": {"oid": "b29cb4f92c6de08a226dd39ed245c1df3363f5cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2300, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}