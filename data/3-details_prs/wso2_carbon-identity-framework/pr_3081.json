{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMjM5NjQ1", "number": 3081, "title": " Improve userfunctionality-mgt service component", "bodyText": "Merge this after this PR #3068\nThis includes the following changes.\n\nAdded userid check in user0functionality mgt component. Frontport this PR wso2-support/carbon-identity-framework#1202\nAdded functionalityLockReasons to user-functionality-mgt. frontport this PR componenthttps://github.com/wso2-support/carbon-identity-framework/pull/1209/files\n\nResolves wso2/product-is#9027", "createdAt": "2020-08-24T03:45:14Z", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081", "merged": true, "mergeCommit": {"oid": "0536a12e0c562aed5dd365461f8bb5a88b73cac9"}, "closed": true, "closedAt": "2020-09-07T08:34:18Z", "author": {"login": "piraveena"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdB6KoeAH2gAyNDcyMjM5NjQ1OjM4ZjZlNTRjYzYzNGM5MTQ3NDczZTBkNDJmNTVhNDJkYzRkYWVjZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGeHS1AH2gAyNDcyMjM5NjQ1OjBlYjAxYTlhZDI5NDY3OWI1ZjlhZjMxYjBjNDg5NmE1NzdmNTJkYTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "38f6e54cc634c9147473e0d42f55a42dc4daece4", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/38f6e54cc634c9147473e0d42f55a42dc4daece4", "committedDate": "2020-08-24T03:37:16Z", "message": "Improve userfunctionality-mgt service component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a9c7fc813f078189c88997d667950279f18af16", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/1a9c7fc813f078189c88997d667950279f18af16", "committedDate": "2020-09-03T11:09:55Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-identity-framework into issue-9028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "committedDate": "2020-09-04T17:42:28Z", "message": "Remove locktypes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07e81627e645ea09c2f60f3e328704592d0371af", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/07e81627e645ea09c2f60f3e328704592d0371af", "committedDate": "2020-09-03T11:50:26Z", "message": "Remove locktypes"}, "afterCommit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "committedDate": "2020-09-04T17:42:28Z", "message": "Remove locktypes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDI4OTIz", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#pullrequestreview-483028923", "createdAt": "2020-09-05T04:10:21Z", "commit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzE2NTQx", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#pullrequestreview-483316541", "createdAt": "2020-09-07T07:39:07Z", "commit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozOTowN1rOHNzlBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozOTowN1rOHNzlBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzODU5OA==", "bodyText": "Remove redundant line", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#discussion_r484238598", "createdAt": "2020-09-07T07:39:07Z", "author": {"login": "sachiniWettasinghe"}, "path": "components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java", "diffHunk": "@@ -136,11 +153,13 @@ public void testIsFunctionalityLockedForUser(String functionalityIdentifier, Str\n                 Connection spyConnection = TestUtils.spyConnection(connection);\n                 when(dataSource.getConnection()).thenReturn(spyConnection);\n                 try {\n+                    mockIsUserStoreManager(userId);\n                     assertEquals(userFunctionalityManager\n                                     .getLockStatus(userId, tenantId, functionalityIdentifier).getLockStatus(),\n                             expected);\n-                } catch (UserFunctionalityManagementException e) {\n+                } catch (UserFunctionalityManagementException | UserStoreException e) {\n                     log.error(String.format(\"Error while selecting functionality: %s\", functionalityIdentifier), e);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzE3ODIy", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#pullrequestreview-483317822", "createdAt": "2020-09-07T07:39:45Z", "commit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozOTo0NVrOHNzmLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozOTo0NVrOHNzmLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzODg5NA==", "bodyText": "Remove redundant line", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#discussion_r484238894", "createdAt": "2020-09-07T07:39:45Z", "author": {"login": "sachiniWettasinghe"}, "path": "components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java", "diffHunk": "@@ -59,9 +69,20 @@\n import static org.wso2.carbon.identity.user.functionality.mgt.util.TestUtils.mockDataSource;\n import static org.wso2.carbon.identity.user.functionality.mgt.util.TestUtils.spyConnection;\n \n-@PrepareForTest({IdentityDatabaseUtil.class, IdentityUtil.class})\n+@PrepareForTest({IdentityDatabaseUtil.class, IdentityUtil.class, UserFunctionalityManagerComponentDataHolder.class,\n+        IdentityTenantUtil.class})\n public class UserFunctionalityPropertyDAOImplTest extends PowerMockTestCase {\n \n+    @Mock\n+    private RealmService realmService;\n+    @Mock\n+    private UserRealm userRealm;\n+    @Mock\n+    private UniqueIDUserStoreManager userStoreManager;\n+    @Mock\n+    private UserFunctionalityManagerComponentDataHolder userFunctionalityManagerComponentDataHolder;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzIzODA1", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#pullrequestreview-483323805", "createdAt": "2020-09-07T07:43:44Z", "commit": {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eb01a9ad294679b5f9af31b0c4896a577f52da2", "author": {"user": {"login": "piraveena", "name": "Piraveena Paralogarajah"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/0eb01a9ad294679b5f9af31b0c4896a577f52da2", "committedDate": "2020-09-07T07:45:54Z", "message": "Fix comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2187, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}