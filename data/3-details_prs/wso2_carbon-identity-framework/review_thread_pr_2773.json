{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NjU3Mjg3", "number": 2773, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowMzoxM1rODhdnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDoxMDoyNVrODhdxLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NDE0NzU4OnYy", "diffSide": "RIGHT", "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/provisioning/impl/DefaultProvisioningHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowMzoxM1rOFsNMjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowMzoxM1rOFsNMjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg5Nzg2OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            User user = getAssociatedUser(username, userStoreDomain, tenantDomain);\n          \n          \n            \n                            User user = getAssociatedUser(username, tenantDomain, userStoreDomain);\n          \n      \n    \n    \n  \n\nAnd also, if possible, can we interchange method parameters to the order -> tenantDomain, userStoreDomain, username", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381897868", "createdAt": "2020-02-20T10:03:13Z", "author": {"login": "tharindu-bandara"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/provisioning/impl/DefaultProvisioningHandler.java", "diffHunk": "@@ -196,8 +202,10 @@ protected void associateUser(String username, String userStoreDomain, String ten\n             PrivilegedCarbonContext.getThreadLocalCarbonContext().setUsername(usernameWithUserstoreDomain);\n \n             if (!StringUtils.isEmpty(idp) && !StringUtils.isEmpty(subject)) {\n-                UserProfileAdmin userProfileAdmin = UserProfileAdmin.getInstance();\n-                userProfileAdmin.associateID(idp, subject);\n+                FederatedAssociationManager federatedAssociationManager = FrameworkUtils\n+                        .getFederatedAssociationManager();\n+                User user = getAssociatedUser(username, userStoreDomain, tenantDomain);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NDE1NzM1OnYy", "diffSide": "RIGHT", "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/provisioning/impl/DefaultProvisioningHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowNjowNFrOFsNSgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowNjowNFrOFsNSgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg5OTM5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381899393", "createdAt": "2020-02-20T10:06:04Z", "author": {"login": "tharindu-bandara"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/provisioning/impl/DefaultProvisioningHandler.java", "diffHunk": "@@ -249,10 +268,11 @@ private void handleFederatedUserNameEqualsToSuperAdminUserName(UserRealm realm,\n                                                                    Collection<String> deletingRoles)\n             throws UserStoreException, FrameworkException {\n         if (userStoreManager.getRealmConfiguration().isPrimary()\n-            && username.equals(realm.getRealmConfiguration().getAdminUserName())) {\n-            if (log.isDebugEnabled()) {\n+                && username.equals(realm.getRealmConfiguration().getAdminUserName())) {\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NDE3MDI0OnYy", "diffSide": "RIGHT", "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowOTozNVrOFsNaJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDoyODoyNlrOFsODFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwMTM0OQ==", "bodyText": "New line", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381901349", "createdAt": "2020-02-20T10:09:35Z", "author": {"login": "tharindu-bandara"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "diffHunk": "@@ -736,4 +737,28 @@ private void loadCodeForRequire() {\n                     \"adaptive authentication scripts.\", e);\n         }\n     }\n+    @Reference(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkxMTgzMA==", "bodyText": "added", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381911830", "createdAt": "2020-02-20T10:28:26Z", "author": {"login": "pamodaaw"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "diffHunk": "@@ -736,4 +737,28 @@ private void loadCodeForRequire() {\n                     \"adaptive authentication scripts.\", e);\n         }\n     }\n+    @Reference(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwMTM0OQ=="}, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NDE3MzI3OnYy", "diffSide": "RIGHT", "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDoxMDoyNVrOFsNb7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDoxNjoyNFrOFsNo7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwMTgwNA==", "bodyText": "Shall we change the name indicating the federated association manager?", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381901804", "createdAt": "2020-02-20T10:10:25Z", "author": {"login": "tharindu-bandara"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "diffHunk": "@@ -736,4 +737,28 @@ private void loadCodeForRequire() {\n                     \"adaptive authentication scripts.\", e);\n         }\n     }\n+    @Reference(\n+            name = \"identity.user.profile.mgt.component\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwNTEzNQ==", "bodyText": "This is the name that was given to the Federated association manager when registering the service. We need to refer the service from the same name", "url": "https://github.com/wso2/carbon-identity-framework/pull/2773#discussion_r381905135", "createdAt": "2020-02-20T10:16:24Z", "author": {"login": "pamodaaw"}, "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/internal/FrameworkServiceComponent.java", "diffHunk": "@@ -736,4 +737,28 @@ private void loadCodeForRequire() {\n                     \"adaptive authentication scripts.\", e);\n         }\n     }\n+    @Reference(\n+            name = \"identity.user.profile.mgt.component\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwMTgwNA=="}, "originalCommit": {"oid": "cc09d1bffd78a8ec9a4f20a6213b79be9744d2ed"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2391, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}