{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODA3ODg1", "number": 3011, "title": "Fix service url builder unnecessarily encoding query param string", "bodyText": "This PR fixes the issue where DefaultServiceURLBuilder unncessarily encoding the query param string of a URL. As a result URL is getting as :\nhttps://localhost:9443/samlsso?sessionDataKey%3Dac584d70-8453-426c-945c-8d8b097387da\nExpected one should be  :\nhttps://localhost:9443/samlsso?sessionDataKey=ac584d70-8453-426c-945c-8d8b097387da", "createdAt": "2020-07-09T11:46:07Z", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011", "merged": true, "mergeCommit": {"oid": "8f82065c717983ede44e07dd85cfa4eefdd5315b"}, "closed": true, "closedAt": "2020-07-09T14:33:03Z", "author": {"login": "emswbandara"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczNMtWAH2gAyNDQ2ODA3ODg1OjVkZjRmNDQ5ZDYyYjA4ZWIzNzc3ZmMzOGU2YzJjNTM2ZDRiNWM1MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczO2MUgH2gAyNDQ2ODA3ODg1OjZiNTIyNDUyM2NlNThmOTRiNzFiNDE5ZTYwZDdlZDEyYTJkY2UyOTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5df4f449d62b08eb3777fc38e6c2c536d4b5c530", "author": {"user": {"login": "emswbandara", "name": "Sathya Bandara"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/5df4f449d62b08eb3777fc38e6c2c536d4b5c530", "committedDate": "2020-07-09T11:18:52Z", "message": "Fix service url builder unnecessarily encoding query param string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a4fa8362e80a66ddb6c8277384bc525bd3b9162", "author": {"user": {"login": "emswbandara", "name": "Sathya Bandara"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/5a4fa8362e80a66ddb6c8277384bc525bd3b9162", "committedDate": "2020-07-09T11:40:04Z", "message": "Fix unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTQ2Mjc5", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#pullrequestreview-445546279", "createdAt": "2020-07-09T11:57:58Z", "commit": {"oid": "5a4fa8362e80a66ddb6c8277384bc525bd3b9162"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTQ3NjAx", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#pullrequestreview-445547601", "createdAt": "2020-07-09T11:59:58Z", "commit": {"oid": "5a4fa8362e80a66ddb6c8277384bc525bd3b9162"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTo1OTo1OFrOGvN9ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTo1OTo1OFrOGvN9ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2NDk2NA==", "bodyText": "Do we encode the parameters when building resolvedParamsString?", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#discussion_r452164964", "createdAt": "2020-07-09T11:59:58Z", "author": {"login": "mefarazath"}, "path": "components/identity-core/org.wso2.carbon.identity.core/src/main/java/org/wso2/carbon/identity/core/internal/DefaultServiceURLBuilder.java", "diffHunk": "@@ -501,13 +501,7 @@ private void appendParamsToUri(StringBuilder serverUrl, String resolvedParamsStr\n                 serverUrl.setLength(serverUrl.length() - 1);\n             }\n             if (StringUtils.isNotBlank(resolvedParamsString)) {\n-                try {\n-                    serverUrl.append(delimiter).append(URLEncoder.encode(resolvedParamsString,\n-                            StandardCharsets.UTF_8.name()));\n-                } catch (UnsupportedEncodingException e) {\n-                    throw new URLBuilderException(String.format(\"Error while trying to build url. %s is not supported\" +\n-                            \".\", StandardCharsets.UTF_8.name()), e);\n-                }\n+                serverUrl.append(delimiter).append(resolvedParamsString);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a4fa8362e80a66ddb6c8277384bc525bd3b9162"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTc0NjY1", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#pullrequestreview-445574665", "createdAt": "2020-07-09T12:38:41Z", "commit": {"oid": "f4f1ea2d22cbde21781861b96a7a230a312daada"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMjozODo0MVrOGvPPbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMjozODo0MVrOGvPPbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4NTk2Ng==", "bodyText": "Can we add a test case where a parameter has a special character like \"space\" or some character that needs encoding?", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#discussion_r452185966", "createdAt": "2020-07-09T12:38:41Z", "author": {"login": "mefarazath"}, "path": "components/identity-core/org.wso2.carbon.identity.core/src/test/java/org/wso2/carbon/identity/core/internal/DefaultServiceURLBuilderTest.java", "diffHunk": "@@ -260,33 +260,32 @@ public void testBuild() {\n \n         return new Object[][]{\n                 {\"https\", \"www.wso2.com\", 9443, \"/proxyContext\", \"abc\", false, null, \"\", fragmentParams,\n-                        \"https://www.wso2.com:9443/proxyContext#key1%3Dfragment%26key2%3Dfragment%26key3%3Dfragment\" +\n-                                \"%26key4%3Dfragment\", \"\"},\n+                        \"https://www.wso2.com:9443/proxyContext#key1=fragment&key2=fragment&key3=fragment&key4\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4f1ea2d22cbde21781861b96a7a230a312daada"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTc0NzEw", "url": "https://github.com/wso2/carbon-identity-framework/pull/3011#pullrequestreview-445574710", "createdAt": "2020-07-09T12:38:45Z", "commit": {"oid": "f4f1ea2d22cbde21781861b96a7a230a312daada"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b5224523ce58f94b71b419e60d7ed12a2dce295", "author": {"user": {"login": "emswbandara", "name": "Sathya Bandara"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/6b5224523ce58f94b71b419e60d7ed12a2dce295", "committedDate": "2020-07-09T13:14:05Z", "message": "Encode parameter names and values"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2228, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}