{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyOTEzOTM3", "number": 2733, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNjoxODoyMlrODeV3VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwODoxNToyMFrODeXIZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMTQyMTAwOnYy", "diffSide": "RIGHT", "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNjoxODoyMlrOFnbHnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwODowMzoxM1rOFncxSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4MzEwMw==", "bodyText": "Formatting issues.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376883103", "createdAt": "2020-02-10T06:18:22Z", "author": {"login": "vihanga-liyanage"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -360,11 +365,11 @@\n                 <input type=\"hidden\"\n                        id=\"pwd_<%=Encode.forHtmlAttribute(allUserStoreInfo[i].getDomainName().toUpperCase())%>\"\n                        name=\"pwd_<%=Encode.forHtmlAttribute(allUserStoreInfo[i].getDomainName().toUpperCase())%>\"\n-                       value=<%=Encode.forHtmlAttribute(pwdRegEx)%>>\n+                       value=<%=Encode.forHtmlAttribute(pwdRegEx).replace(REATER_THAN_CHARACTER,GREATER_THAN_ENCODING_STRING)%>>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd36da93861278b0a2d836e00e34dfcb3784925c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxMDE1Mg==", "bodyText": "Fixed", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376910152", "createdAt": "2020-02-10T08:03:13Z", "author": {"login": "somindatommy"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -360,11 +365,11 @@\n                 <input type=\"hidden\"\n                        id=\"pwd_<%=Encode.forHtmlAttribute(allUserStoreInfo[i].getDomainName().toUpperCase())%>\"\n                        name=\"pwd_<%=Encode.forHtmlAttribute(allUserStoreInfo[i].getDomainName().toUpperCase())%>\"\n-                       value=<%=Encode.forHtmlAttribute(pwdRegEx)%>>\n+                       value=<%=Encode.forHtmlAttribute(pwdRegEx).replace(REATER_THAN_CHARACTER,GREATER_THAN_ENCODING_STRING)%>>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4MzEwMw=="}, "originalCommit": {"oid": "cd36da93861278b0a2d836e00e34dfcb3784925c"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMTYyODU0OnYy", "diffSide": "RIGHT", "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwODoxNToyMFrOFndAsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMDo1ODowMVrOFnh2mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA==", "bodyText": "@somindatommy\nThis is fixing only the character >. Is that intentional?\nMeans the only character is not encoded is >", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376914098", "createdAt": "2020-02-10T08:15:20Z", "author": {"login": "tharindu-bandara"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNjA0NA==", "bodyText": "@tharindu-bandara yes. Other characters such as \",',& and < are encoded properly. Issue arises as > is not encoded.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376916044", "createdAt": "2020-02-10T08:20:26Z", "author": {"login": "somindatommy"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA=="}, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyNDE0Nw==", "bodyText": "In the API docs, it says,\n\nThe encoding of the greater-than sign (>) is not required for attributes.\n\nI'm wondering what could be the reason behind this.\nMaybe the encoding that we do here does not meet the expectation? For instance, Encode.forHtmlContent does encode the character >.\n[1] https://www2.owasp.org/owasp-java-encoder/encoder/apidocs/org/owasp/encoder/Encode.html#forHtmlAttribute-java.lang.String-", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376924147", "createdAt": "2020-02-10T08:41:04Z", "author": {"login": "tharindu-bandara"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA=="}, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkzMDAyMA==", "bodyText": "In the API docs, it says the following about Encode.forHtmlContent [1]\n\nIt does not escape quotation characters and is thus unsafe for use with HTML attributes. Use either forHtml or forHtmlAttribute for those methods.\n\nHence Encode.forHtmlAttribute is used. To prevent HTML injection, encoding < as &lt; is enough. Therefore encoding > is not mandatory.\nWhen > is not encoded, it is considered as a closing tag causing rendering errors in the web page. That's why encoding is necessary.\n[1] - https://www2.owasp.org/owasp-java-encoder/encoder/apidocs/org/owasp/encoder/Encode.html#forHtmlContent-java.lang.String-", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376930020", "createdAt": "2020-02-10T08:54:27Z", "author": {"login": "somindatommy"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA=="}, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkzMjc0MA==", "bodyText": "@somindatommy Thanks for the findings and the explanation!\nThen we can use the encoding for html ? Seems like this addressed the greater than the character as well.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376932740", "createdAt": "2020-02-10T09:00:20Z", "author": {"login": "tharindu-bandara"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA=="}, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk5MzQzNA==", "bodyText": "Fixed: 225deac", "url": "https://github.com/wso2/carbon-identity-framework/pull/2733#discussion_r376993434", "createdAt": "2020-02-10T10:58:01Z", "author": {"login": "somindatommy"}, "path": "components/user-mgt/org.wso2.carbon.user.mgt.ui/src/main/resources/web/user/add-step1.jsp", "diffHunk": "@@ -59,6 +59,9 @@\n     boolean isAskPasswordEnabled = false;\n     boolean isUserOnBoardingEnabled = false;\n \n+    String GREATER_THAN_CHARACTER = \">\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkxNDA5OA=="}, "originalCommit": {"oid": "4ebd36578c1f04e955b04459c23661f8ebc14a98"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2375, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}