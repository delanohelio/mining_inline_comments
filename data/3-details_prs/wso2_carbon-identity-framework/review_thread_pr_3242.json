{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MTI4NTA5", "number": 3242, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMToxNVrOE3x6Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMToxNVrOE3x6Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2OTI0ODMxOnYy", "diffSide": "RIGHT", "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/impl/CachedBackedConfigurationDAO.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMToxNVrOHxUubg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMzo0NVrOHxU40g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ4MTgzOA==", "bodyText": "formatting issues", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#discussion_r521481838", "createdAt": "2020-11-11T16:31:15Z", "author": {"login": "IsuraD"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/impl/CachedBackedConfigurationDAO.java", "diffHunk": "@@ -299,67 +302,31 @@ private Resource getResourceFromCacheByName(String resourceName, int tenantId)\n     private Resource getResourceFromCacheById(String resourceId, String tenantDomain)\n             throws ConfigurationManagementException {\n \n-        int tenantId;\n-        try {\n-            tenantId = ConfigurationManagerComponentDataHolder.getInstance().getRealmService()\n-                    .getTenantManager().getTenantId(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-        } catch (UserStoreException e) {\n-            throw new ConfigurationManagementException(\"Error when setting tenant domain. \",\n-                    ConfigurationConstants.ErrorMessages.ERROR_CODE_UNEXPECTED.getCode(), e);\n-        }\n-\n-        try {\n-            PrivilegedCarbonContext.startTenantFlow();\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext()\n-                    .setTenantDomain(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext().setTenantId(tenantId);\n-\n-            ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);\n-            ResourceCacheEntry resourceCacheEntry = resourceByIdCache.getValueFromCache(resourceByIdCacheKey);\n-            if (resourceCacheEntry != null) {\n-                if (log.isDebugEnabled()) {\n-                    String message = String.format(\"Entry found from Resource by id cache. Resource id: %s., Tenant \" +\n-                            \"domain %s\", resourceId, tenantDomain);\n-                    log.debug(message);\n-                }\n-                return resourceCacheEntry.getResource();\n+       ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d19e982f12ae189c00b3ed8c64e1e79487140e22"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ4NDQ5OA==", "bodyText": "Fixed: 7618b17", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#discussion_r521484498", "createdAt": "2020-11-11T16:33:45Z", "author": {"login": "somindatommy"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/impl/CachedBackedConfigurationDAO.java", "diffHunk": "@@ -299,67 +302,31 @@ private Resource getResourceFromCacheByName(String resourceName, int tenantId)\n     private Resource getResourceFromCacheById(String resourceId, String tenantDomain)\n             throws ConfigurationManagementException {\n \n-        int tenantId;\n-        try {\n-            tenantId = ConfigurationManagerComponentDataHolder.getInstance().getRealmService()\n-                    .getTenantManager().getTenantId(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-        } catch (UserStoreException e) {\n-            throw new ConfigurationManagementException(\"Error when setting tenant domain. \",\n-                    ConfigurationConstants.ErrorMessages.ERROR_CODE_UNEXPECTED.getCode(), e);\n-        }\n-\n-        try {\n-            PrivilegedCarbonContext.startTenantFlow();\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext()\n-                    .setTenantDomain(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext().setTenantId(tenantId);\n-\n-            ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);\n-            ResourceCacheEntry resourceCacheEntry = resourceByIdCache.getValueFromCache(resourceByIdCacheKey);\n-            if (resourceCacheEntry != null) {\n-                if (log.isDebugEnabled()) {\n-                    String message = String.format(\"Entry found from Resource by id cache. Resource id: %s., Tenant \" +\n-                            \"domain %s\", resourceId, tenantDomain);\n-                    log.debug(message);\n-                }\n-                return resourceCacheEntry.getResource();\n+       ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ4MTgzOA=="}, "originalCommit": {"oid": "d19e982f12ae189c00b3ed8c64e1e79487140e22"}, "originalPosition": 59}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2512, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}