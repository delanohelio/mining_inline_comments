{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMzQ3ODUw", "number": 2915, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDo1NToyMFrOEF4vJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwNDo1Nzo1MFrOFKwxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjA3OTEwOnYy", "diffSide": "RIGHT", "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDo1NToyMFrOGkWCsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDo1NToyMFrOGkWCsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc2MzA1OA==", "bodyText": "Shall we add the method comment here?", "url": "https://github.com/wso2/carbon-identity-framework/pull/2915#discussion_r440763058", "createdAt": "2020-06-16T10:55:20Z", "author": {"login": "ShanChathusanda93"}, "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "diffHunk": "@@ -44,6 +45,35 @@ public void onTenantCreate(TenantInfoBean tenantInfoBean) throws StratosExceptio\n         }\n     }\n \n+    @Override\n+    public void onPreDelete(int tenantId) throws StratosException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b320a216f972fb2c511824844604352d24e30778"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2ODI5MTY1OnYy", "diffSide": "RIGHT", "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwNDo1Nzo0MVrOINllHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMjoyODowOVrOIPYN8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTExODEwOA==", "bodyText": "Complete the javadoc comments. Add the specific Exception type. and also the param descriptions should start with a capital letter and end with a full stop.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2915#discussion_r551118108", "createdAt": "2021-01-04T04:57:41Z", "author": {"login": "sachiniWettasinghe"}, "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "diffHunk": "@@ -44,6 +45,41 @@ public void onTenantCreate(TenantInfoBean tenantInfoBean) throws StratosExceptio\n         }\n     }\n \n+    /**\n+     * Delete all consents belongs to a given tenant before deleting the tenant.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd18c58ffbcfa3dcc96b48c40f3c9a3e0263595"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk5NjMzOA==", "bodyText": "Fixed in #3312", "url": "https://github.com/wso2/carbon-identity-framework/pull/2915#discussion_r552996338", "createdAt": "2021-01-06T22:28:09Z", "author": {"login": "sumedhe"}, "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "diffHunk": "@@ -44,6 +45,41 @@ public void onTenantCreate(TenantInfoBean tenantInfoBean) throws StratosExceptio\n         }\n     }\n \n+    /**\n+     * Delete all consents belongs to a given tenant before deleting the tenant.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTExODEwOA=="}, "originalCommit": {"oid": "7bd18c58ffbcfa3dcc96b48c40f3c9a3e0263595"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2ODI5MTcyOnYy", "diffSide": "RIGHT", "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwNDo1Nzo1MFrOINllLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMjoyODoyOFrOIPYObQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTExODEyNA==", "bodyText": "Complete the javadoc comments.", "url": "https://github.com/wso2/carbon-identity-framework/pull/2915#discussion_r551118124", "createdAt": "2021-01-04T04:57:50Z", "author": {"login": "sachiniWettasinghe"}, "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "diffHunk": "@@ -44,6 +45,41 @@ public void onTenantCreate(TenantInfoBean tenantInfoBean) throws StratosExceptio\n         }\n     }\n \n+    /**\n+     * Delete all consents belongs to a given tenant before deleting the tenant.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException\n+     */\n+    @Override\n+    public void onPreDelete(int tenantId) throws StratosException {\n+\n+        if (log.isDebugEnabled()) {\n+            log.info(\"Deleting all consents of the tenant: \" + tenantId);\n+        }\n+        deleteAllConsents(tenantId);\n+    }\n+\n+    /**\n+     * Delete all consents belongs to a given tenant id.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd18c58ffbcfa3dcc96b48c40f3c9a3e0263595"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk5NjQ2MQ==", "bodyText": "Fixed in #3312", "url": "https://github.com/wso2/carbon-identity-framework/pull/2915#discussion_r552996461", "createdAt": "2021-01-06T22:28:28Z", "author": {"login": "sumedhe"}, "path": "components/consent-mgt/org.wso2.carbon.identity.consent.mgt/src/main/java/org/wso2/carbon/identity/consent/mgt/listener/TenantConsentMgtListener.java", "diffHunk": "@@ -44,6 +45,41 @@ public void onTenantCreate(TenantInfoBean tenantInfoBean) throws StratosExceptio\n         }\n     }\n \n+    /**\n+     * Delete all consents belongs to a given tenant before deleting the tenant.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException\n+     */\n+    @Override\n+    public void onPreDelete(int tenantId) throws StratosException {\n+\n+        if (log.isDebugEnabled()) {\n+            log.info(\"Deleting all consents of the tenant: \" + tenantId);\n+        }\n+        deleteAllConsents(tenantId);\n+    }\n+\n+    /**\n+     * Delete all consents belongs to a given tenant id.\n+     *\n+     * @param tenantId Id of the tenant\n+     * @throws StratosException", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTExODEyNA=="}, "originalCommit": {"oid": "7bd18c58ffbcfa3dcc96b48c40f3c9a3e0263595"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2349, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}