{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MTI4NTA5", "number": 3242, "title": "Adding cache clearing to application template delete scenario", "bodyText": "Resolves: wso2/product-is#10155", "createdAt": "2020-11-11T11:12:49Z", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242", "merged": true, "mergeCommit": {"oid": "9ff342f06b5c29f012a2ab0bade27b34e323ffc1"}, "closed": true, "closedAt": "2020-11-12T04:44:45Z", "author": {"login": "somindatommy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbcBisgH2gAyNTE5MTI4NTA5OjA4MTkxNzBmN2M5Zjk3NGJmNmZjZTQyNjFiNzhkNzY4MmIxNTJiNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdblx2wAFqTUyODU4NDUwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0819170f7c9f974bf6fce4261b78d7682b152b77", "author": {"user": {"login": "somindatommy", "name": "Sominda Gamage"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/0819170f7c9f974bf6fce4261b78d7682b152b77", "committedDate": "2020-11-11T11:12:13Z", "message": "Adding cache clearing to application template delete scenario"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d19e982f12ae189c00b3ed8c64e1e79487140e22", "author": {"user": {"login": "somindatommy", "name": "Sominda Gamage"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/d19e982f12ae189c00b3ed8c64e1e79487140e22", "committedDate": "2020-11-11T15:43:47Z", "message": "Improve cache clearing on resource update and delete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MzM2NDIw", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#pullrequestreview-528336420", "createdAt": "2020-11-11T16:31:14Z", "commit": {"oid": "d19e982f12ae189c00b3ed8c64e1e79487140e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMToxNVrOHxUubg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjozMToxNVrOHxUubg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ4MTgzOA==", "bodyText": "formatting issues", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#discussion_r521481838", "createdAt": "2020-11-11T16:31:15Z", "author": {"login": "IsuraD"}, "path": "components/configuration-mgt/org.wso2.carbon.identity.configuration.mgt.core/src/main/java/org/wso2/carbon/identity/configuration/mgt/core/dao/impl/CachedBackedConfigurationDAO.java", "diffHunk": "@@ -299,67 +302,31 @@ private Resource getResourceFromCacheByName(String resourceName, int tenantId)\n     private Resource getResourceFromCacheById(String resourceId, String tenantDomain)\n             throws ConfigurationManagementException {\n \n-        int tenantId;\n-        try {\n-            tenantId = ConfigurationManagerComponentDataHolder.getInstance().getRealmService()\n-                    .getTenantManager().getTenantId(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-        } catch (UserStoreException e) {\n-            throw new ConfigurationManagementException(\"Error when setting tenant domain. \",\n-                    ConfigurationConstants.ErrorMessages.ERROR_CODE_UNEXPECTED.getCode(), e);\n-        }\n-\n-        try {\n-            PrivilegedCarbonContext.startTenantFlow();\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext()\n-                    .setTenantDomain(MultitenantConstants.SUPER_TENANT_DOMAIN_NAME);\n-            PrivilegedCarbonContext.getThreadLocalCarbonContext().setTenantId(tenantId);\n-\n-            ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);\n-            ResourceCacheEntry resourceCacheEntry = resourceByIdCache.getValueFromCache(resourceByIdCacheKey);\n-            if (resourceCacheEntry != null) {\n-                if (log.isDebugEnabled()) {\n-                    String message = String.format(\"Entry found from Resource by id cache. Resource id: %s., Tenant \" +\n-                            \"domain %s\", resourceId, tenantDomain);\n-                    log.debug(message);\n-                }\n-                return resourceCacheEntry.getResource();\n+       ResourceByIdCacheKey resourceByIdCacheKey = new ResourceByIdCacheKey(resourceId, tenantDomain);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d19e982f12ae189c00b3ed8c64e1e79487140e22"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7618b179bb89b5d3b1354d4734a7136fad1637b5", "author": {"user": {"login": "somindatommy", "name": "Sominda Gamage"}}, "url": "https://github.com/wso2/carbon-identity-framework/commit/7618b179bb89b5d3b1354d4734a7136fad1637b5", "committedDate": "2020-11-11T16:32:23Z", "message": "Fix formatting error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MzkyMTk3", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#pullrequestreview-528392197", "createdAt": "2020-11-11T17:36:34Z", "commit": {"oid": "7618b179bb89b5d3b1354d4734a7136fad1637b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NTg0NTA3", "url": "https://github.com/wso2/carbon-identity-framework/pull/3242#pullrequestreview-528584507", "createdAt": "2020-11-11T22:34:08Z", "commit": {"oid": "7618b179bb89b5d3b1354d4734a7136fad1637b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2172, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}