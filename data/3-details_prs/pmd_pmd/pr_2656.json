{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzMjA2NzEw", "number": 2656, "title": "[all] Ensure PMD/CPD uses tab width of 1 for tabs consistently", "bodyText": "Describe the PR\nThe columns that are reported by CPD were inconsistent across languages\nbefore. A language like Java (using a JavaCC-based tokenizer) would use\na width of 8 for tabs, whereas a language like C# (using an Antlr-based\ntokenizer) would use 1 instead.\nThis includes unit tests for most languages to ensure a tab character is\ncounted as 1. The configuration for JavaCC has been adjusted to respect\nthis as well.\nRelated Issues\n\n#292\n#288\n\nReady?\n\n\n Added unit tests for fixed bug/feature\n Passing all unit tests\n Complete build ./mvnw clean verify passes (checked automatically by travis)\n Added (in-code) documentation (if needed)", "createdAt": "2020-07-20T08:45:04Z", "url": "https://github.com/pmd/pmd/pull/2656", "merged": true, "mergeCommit": {"oid": "89140d86ce48172eecef02c31c7f584c9e1ab902"}, "closed": true, "closedAt": "2020-08-20T09:14:03Z", "author": {"login": "maikelsteneker"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2tjXcgH2gAyNDUzMjA2NzEwOjZmYjVhYzU5YjkyZjcyZTQ3M2U5OTk1ODA4MTM4ZDgwMTdkYmY0MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3WkH0gH2gAyNDUzMjA2NzEwOmYwM2ZhYjQwOWExNWE2N2Y1NDExYTRhZjkzODAzMWYwODRkYTFlMjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c", "author": {"user": {"login": "maikelsteneker", "name": "Maikel Steneker"}}, "url": "https://github.com/pmd/pmd/commit/6fb5ac59b92f72e473e9995808138d8017dbf42c", "committedDate": "2020-07-20T08:42:21Z", "message": "Ensure CPD uses tab width of 1 for tabs consistently\n\nThe columns that are reported by CPD were inconsistent across languages\nbefore. A language like Java (using a JavaCC-based tokenizer) would use\na width of 8 for tabs, whereas a language like C# (using an Antlr-based\ntokenizer) would use 1 instead.\n\nThis includes unit tests for most languages to ensure a tab character is\ncounted as 1. The configuration for JavaCC has been adjusted to respect\nthis as well."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzE5NDIx", "url": "https://github.com/pmd/pmd/pull/2656#pullrequestreview-452719421", "createdAt": "2020-07-21T18:23:29Z", "commit": {"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyMzoyOVrOG1EdTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyOToyNlrOG1Eqtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMDc1MA==", "bodyText": "I think, this file got accidentally added....", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458300750", "createdAt": "2020-07-21T18:23:29Z", "author": {"login": "adangel"}, "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/JavaTokenManager.java.bak", "diffHunk": "@@ -0,0 +1,47 @@\n+/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMjc0OA==", "bodyText": "Alternatively there is also a setter, we could call. But for now, I think, it's ok let it hard code to 1. We could add later a configuration option, to use a custom tab size, see #292", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458302748", "createdAt": "2020-07-21T18:26:54Z", "author": {"login": "adangel"}, "path": "pmd-core/src/main/ant/alljavacc.xml", "diffHunk": "@@ -71,6 +71,10 @@\n         <replace file=\"${target}/net/sourceforge/pmd/lang/ast/dummy/JavaCharStream.java\"\n                  token=\"throw new Error(t.getMessage())\"\n                  value=\"throw t\" />\n+        <!-- Set tab size of JavaCC to 1 -->\n+        <replace file=\"${target}/net/sourceforge/pmd/lang/ast/dummy/JavaCharStream.java\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwNDE4Mg==", "bodyText": "Please add for PLSQL an additional test case, similar like in the other languages (tabWidth.pls).", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458304182", "createdAt": "2020-07-21T18:29:26Z", "author": {"login": "adangel"}, "path": "pmd-plsql/src/test/resources/net/sourceforge/pmd/lang/plsql/cpd/testdata/sample-plsql.txt", "diffHunk": "@@ -12,55 +12,55 @@ L3\n     [IS]                                    1         2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15379361707523e26eb6d05c6b78f539dcc8050b", "author": {"user": {"login": "maikelsteneker", "name": "Maikel Steneker"}}, "url": "https://github.com/pmd/pmd/commit/15379361707523e26eb6d05c6b78f539dcc8050b", "committedDate": "2020-07-22T08:24:43Z", "message": "Remove accidentally committed file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f03fab409a15a67f5411a4af938031f084da1e25", "author": {"user": {"login": "maikelsteneker", "name": "Maikel Steneker"}}, "url": "https://github.com/pmd/pmd/commit/f03fab409a15a67f5411a4af938031f084da1e25", "committedDate": "2020-07-22T08:29:17Z", "message": "Add test case for SQL tab width"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4640, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}