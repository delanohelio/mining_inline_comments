{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNzAzNzM1", "number": 2211, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNzo1NTozMVrODY5MCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODo1MzowMVrODY6EMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDI5Mzg3OnYy", "diffSide": "RIGHT", "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/CharStream.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNzo1NTozMVrOFfAtCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMzo1NTowOFrOFfIDjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2MTcwNQ==", "bodyText": "Why are getBeginColumn() and getBeginLine() deprecated?", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368061705", "createdAt": "2020-01-17T17:55:31Z", "author": {"login": "adangel"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/CharStream.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+\n+import java.io.IOException;\n+\n+import net.sourceforge.pmd.lang.ast.impl.javacc.JavaccTokenDocument;\n+\n+/**\n+ * PMD flavour of character streams used by JavaCC parsers.\n+ *\n+ * TODO for when all JavaCC languages are aligned:\n+ *   * rename methods to match decent naming conventions\n+ *   * move to impl.javacc package\n+ */\n+public interface CharStream {\n+\n+    /**\n+     * Returns the next character from the input. After a {@link #backup(int)},\n+     * some of the already read chars must be spit out again.\n+     *\n+     * @return The next character\n+     *\n+     * @throws IOException  If the underlying char stream throws\n+     */\n+    char readChar() throws IOException;\n+\n+\n+    /**\n+     * Calls {@link #readChar()} and returns its value, marking its position\n+     * as the beginning of the next token. All characters must remain in\n+     * the buffer between two successive calls to this method to implement\n+     * backup correctly.\n+     */\n+    char BeginToken() throws IOException; // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Returns a string made up of characters from the token mark up to\n+     * to the current buffer position.\n+     */\n+    String GetImage(); // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Returns an array of characters that make up the suffix of length 'len' for\n+     * the current token. This is used to build up the matched string\n+     * for use in actions in the case of MORE. A simple and inefficient\n+     * implementation of this is as follows :\n+     *\n+     * <pre>{@code\n+     * String t = tokenImage();\n+     * return t.substring(t.length() - len, t.length()).toCharArray();\n+     * }</pre>\n+     *\n+     * @param len Length of the returned array\n+     *\n+     * @return The suffix\n+     *\n+     * @throws IndexOutOfBoundsException If len is greater than the length of the\n+     *                                   current token\n+     */\n+    char[] GetSuffix(int len); // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Pushes a given number of already read chars into the buffer.\n+     * Subsequent calls to {@link #readChar()} will read those characters\n+     * before proceeding to read the underlying char stream.\n+     *\n+     * <p>A lexer calls this method if it has already read some characters,\n+     * but cannot use them to match a (longer) token. So, they will\n+     * be used again as the prefix of the next token.\n+     *\n+     * @throws AssertionError If the requested amount is greater than the\n+     *                        number of read chars\n+     */\n+    void backup(int amount);\n+\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE4MjE1Nw==", "bodyText": "Token constructors now only use startOffset/endOffset. This makes getBeginLine and getBeginColumn unused by Javacc. It still uses getEndLine and getEndColumn once per token manager, to generate a TokenMgrError. I'm not sure we should keep those methods once all modules have been ported, if they're unused.", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368182157", "createdAt": "2020-01-17T23:55:08Z", "author": {"login": "oowekyala"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/CharStream.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+\n+import java.io.IOException;\n+\n+import net.sourceforge.pmd.lang.ast.impl.javacc.JavaccTokenDocument;\n+\n+/**\n+ * PMD flavour of character streams used by JavaCC parsers.\n+ *\n+ * TODO for when all JavaCC languages are aligned:\n+ *   * rename methods to match decent naming conventions\n+ *   * move to impl.javacc package\n+ */\n+public interface CharStream {\n+\n+    /**\n+     * Returns the next character from the input. After a {@link #backup(int)},\n+     * some of the already read chars must be spit out again.\n+     *\n+     * @return The next character\n+     *\n+     * @throws IOException  If the underlying char stream throws\n+     */\n+    char readChar() throws IOException;\n+\n+\n+    /**\n+     * Calls {@link #readChar()} and returns its value, marking its position\n+     * as the beginning of the next token. All characters must remain in\n+     * the buffer between two successive calls to this method to implement\n+     * backup correctly.\n+     */\n+    char BeginToken() throws IOException; // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Returns a string made up of characters from the token mark up to\n+     * to the current buffer position.\n+     */\n+    String GetImage(); // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Returns an array of characters that make up the suffix of length 'len' for\n+     * the current token. This is used to build up the matched string\n+     * for use in actions in the case of MORE. A simple and inefficient\n+     * implementation of this is as follows :\n+     *\n+     * <pre>{@code\n+     * String t = tokenImage();\n+     * return t.substring(t.length() - len, t.length()).toCharArray();\n+     * }</pre>\n+     *\n+     * @param len Length of the returned array\n+     *\n+     * @return The suffix\n+     *\n+     * @throws IndexOutOfBoundsException If len is greater than the length of the\n+     *                                   current token\n+     */\n+    char[] GetSuffix(int len); // SUPPRESS CHECKSTYLE we'll rename it later\n+\n+\n+    /**\n+     * Pushes a given number of already read chars into the buffer.\n+     * Subsequent calls to {@link #readChar()} will read those characters\n+     * before proceeding to read the underlying char stream.\n+     *\n+     * <p>A lexer calls this method if it has already read some characters,\n+     * but cannot use them to match a (longer) token. So, they will\n+     * be used again as the prefix of the next token.\n+     *\n+     * @throws AssertionError If the requested amount is greater than the\n+     *                        number of read chars\n+     */\n+    void backup(int amount);\n+\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2MTcwNQ=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDMyMTk0OnYy", "diffSide": "RIGHT", "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/TokenMgrError.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODowNjo0MVrOFfA-Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNzoyNjo0NlrOFhywYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2NjEyMw==", "bodyText": "the current lexical state is right now not provided for makeMessage. However, it would be a int here, so not too helpful...", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368066123", "createdAt": "2020-01-17T18:06:41Z", "author": {"login": "adangel"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/TokenMgrError.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+\n+import net.sourceforge.pmd.annotation.InternalApi;\n+import net.sourceforge.pmd.util.StringUtil;\n+\n+/**\n+ * An error thrown during lexical analysis of a file.\n+ */\n+public final class TokenMgrError extends RuntimeException {\n+\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported\n+     */\n+    @Deprecated\n+    public static final int LEXICAL_ERROR = 0;\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported,\n+     *     see {@link #TokenMgrError(String, int)}\n+     */\n+    @Deprecated\n+    public static final int INVALID_LEXICAL_STATE = 1;\n+\n+    private final int line;\n+    private final int column;\n+    private final String filename;\n+\n+    public TokenMgrError(int line, int column, @Nullable String filename, String message, @Nullable Throwable cause) {\n+        super(message, cause);\n+        this.line = line;\n+        this.column = column;\n+        this.filename = filename;\n+    }\n+\n+    public TokenMgrError(int line, int column, String message, @Nullable Throwable cause) {\n+        this(line, column, null, message, cause);\n+    }\n+\n+    /**\n+     * @deprecated This is used by javacc but those usages are being replaced with an IllegalArgumentException\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(String message, int errorCode) {\n+        this(-1, -1, null, message, null);\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     */\n+    @InternalApi\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     *\n+     * @deprecated The error code is useless, ported modules use the other constructor\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar, int errorCode) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    public int getLine() {\n+        return line;\n+    }\n+\n+    public int getColumn() {\n+        return column;\n+    }\n+\n+    public @Nullable String getFilename() {\n+        return filename;\n+    }\n+\n+    /**\n+     * Returns a detailed message for the Error when it is thrown by the\n+     * token manager to indicate a lexical error.\n+     * Parameters :\n+     * eofseen     : indicates if EOF caused the lexical error\n+     * curLexState : lexical state in which this error occurred", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA4MzQ1Mw==", "bodyText": "I found, that the names are generated in the token manager, e.g. JavaParserTokenManager#lexStateNames", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368083453", "createdAt": "2020-01-17T18:49:52Z", "author": {"login": "adangel"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/TokenMgrError.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+\n+import net.sourceforge.pmd.annotation.InternalApi;\n+import net.sourceforge.pmd.util.StringUtil;\n+\n+/**\n+ * An error thrown during lexical analysis of a file.\n+ */\n+public final class TokenMgrError extends RuntimeException {\n+\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported\n+     */\n+    @Deprecated\n+    public static final int LEXICAL_ERROR = 0;\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported,\n+     *     see {@link #TokenMgrError(String, int)}\n+     */\n+    @Deprecated\n+    public static final int INVALID_LEXICAL_STATE = 1;\n+\n+    private final int line;\n+    private final int column;\n+    private final String filename;\n+\n+    public TokenMgrError(int line, int column, @Nullable String filename, String message, @Nullable Throwable cause) {\n+        super(message, cause);\n+        this.line = line;\n+        this.column = column;\n+        this.filename = filename;\n+    }\n+\n+    public TokenMgrError(int line, int column, String message, @Nullable Throwable cause) {\n+        this(line, column, null, message, cause);\n+    }\n+\n+    /**\n+     * @deprecated This is used by javacc but those usages are being replaced with an IllegalArgumentException\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(String message, int errorCode) {\n+        this(-1, -1, null, message, null);\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     */\n+    @InternalApi\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     *\n+     * @deprecated The error code is useless, ported modules use the other constructor\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar, int errorCode) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    public int getLine() {\n+        return line;\n+    }\n+\n+    public int getColumn() {\n+        return column;\n+    }\n+\n+    public @Nullable String getFilename() {\n+        return filename;\n+    }\n+\n+    /**\n+     * Returns a detailed message for the Error when it is thrown by the\n+     * token manager to indicate a lexical error.\n+     * Parameters :\n+     * eofseen     : indicates if EOF caused the lexical error\n+     * curLexState : lexical state in which this error occurred", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2NjEyMw=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzMzU2MA==", "bodyText": "Not many languages really use different lexical states. Though maybe, we can use the parameter later anyway. We'd need a callback to get lexStateNames. Maybe, we should define some \"master\" interface, which provides access to all this static info (lexical state names, node names, token names, parser constructor, token document constructor, etc). Or maybe just an AbstractJavaccParser would suffice.", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r370933560", "createdAt": "2020-01-25T13:28:18Z", "author": {"login": "oowekyala"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/TokenMgrError.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+\n+import net.sourceforge.pmd.annotation.InternalApi;\n+import net.sourceforge.pmd.util.StringUtil;\n+\n+/**\n+ * An error thrown during lexical analysis of a file.\n+ */\n+public final class TokenMgrError extends RuntimeException {\n+\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported\n+     */\n+    @Deprecated\n+    public static final int LEXICAL_ERROR = 0;\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported,\n+     *     see {@link #TokenMgrError(String, int)}\n+     */\n+    @Deprecated\n+    public static final int INVALID_LEXICAL_STATE = 1;\n+\n+    private final int line;\n+    private final int column;\n+    private final String filename;\n+\n+    public TokenMgrError(int line, int column, @Nullable String filename, String message, @Nullable Throwable cause) {\n+        super(message, cause);\n+        this.line = line;\n+        this.column = column;\n+        this.filename = filename;\n+    }\n+\n+    public TokenMgrError(int line, int column, String message, @Nullable Throwable cause) {\n+        this(line, column, null, message, cause);\n+    }\n+\n+    /**\n+     * @deprecated This is used by javacc but those usages are being replaced with an IllegalArgumentException\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(String message, int errorCode) {\n+        this(-1, -1, null, message, null);\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     */\n+    @InternalApi\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     *\n+     * @deprecated The error code is useless, ported modules use the other constructor\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar, int errorCode) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    public int getLine() {\n+        return line;\n+    }\n+\n+    public int getColumn() {\n+        return column;\n+    }\n+\n+    public @Nullable String getFilename() {\n+        return filename;\n+    }\n+\n+    /**\n+     * Returns a detailed message for the Error when it is thrown by the\n+     * token manager to indicate a lexical error.\n+     * Parameters :\n+     * eofseen     : indicates if EOF caused the lexical error\n+     * curLexState : lexical state in which this error occurred", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2NjEyMw=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3ODkxNA==", "bodyText": "This is done now. I modified the calls to the constructor so that it passes the lexical state name instead of the number. This happens only for modules that use the new ant build.", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r370978914", "createdAt": "2020-01-26T07:26:46Z", "author": {"login": "oowekyala"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/TokenMgrError.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast;\n+\n+import org.checkerframework.checker.nullness.qual.Nullable;\n+\n+import net.sourceforge.pmd.annotation.InternalApi;\n+import net.sourceforge.pmd.util.StringUtil;\n+\n+/**\n+ * An error thrown during lexical analysis of a file.\n+ */\n+public final class TokenMgrError extends RuntimeException {\n+\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported\n+     */\n+    @Deprecated\n+    public static final int LEXICAL_ERROR = 0;\n+\n+    /**\n+     * @deprecated Will be removed when all modules are ported,\n+     *     see {@link #TokenMgrError(String, int)}\n+     */\n+    @Deprecated\n+    public static final int INVALID_LEXICAL_STATE = 1;\n+\n+    private final int line;\n+    private final int column;\n+    private final String filename;\n+\n+    public TokenMgrError(int line, int column, @Nullable String filename, String message, @Nullable Throwable cause) {\n+        super(message, cause);\n+        this.line = line;\n+        this.column = column;\n+        this.filename = filename;\n+    }\n+\n+    public TokenMgrError(int line, int column, String message, @Nullable Throwable cause) {\n+        this(line, column, null, message, cause);\n+    }\n+\n+    /**\n+     * @deprecated This is used by javacc but those usages are being replaced with an IllegalArgumentException\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(String message, int errorCode) {\n+        this(-1, -1, null, message, null);\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     */\n+    @InternalApi\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    /**\n+     * Constructor called by JavaCC.\n+     *\n+     * @deprecated The error code is useless, ported modules use the other constructor\n+     */\n+    @Deprecated\n+    @SuppressWarnings(\"PMD.UnusedFormalParameter\")\n+    public TokenMgrError(boolean eofSeen, int lexState, int errorLine, int errorColumn, String errorAfter, char curChar, int errorCode) {\n+        super(makeMessage(eofSeen, errorLine, errorColumn, errorAfter, curChar));\n+        line = errorLine;\n+        column = errorColumn;\n+        filename = AbstractTokenManager.getFileName();\n+    }\n+\n+    public int getLine() {\n+        return line;\n+    }\n+\n+    public int getColumn() {\n+        return column;\n+    }\n+\n+    public @Nullable String getFilename() {\n+        return filename;\n+    }\n+\n+    /**\n+     * Returns a detailed message for the Error when it is thrown by the\n+     * token manager to indicate a lexical error.\n+     * Parameters :\n+     * eofseen     : indicates if EOF caused the lexical error\n+     * curLexState : lexical state in which this error occurred", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2NjEyMw=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 98}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDM0MDU3OnYy", "diffSide": "RIGHT", "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/impl/javacc/JavaCharStream.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODoxMzo1NVrOFfBJpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxOTo0NjowNVrOFfL4kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2OTAzMA==", "bodyText": "Do we need to internalize pmd-core:net.sourceforge.pmd.lang.ast.JavaCharStream on master?\nAnd btw, duplicated license header", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368069030", "createdAt": "2020-01-17T18:13:55Z", "author": {"login": "adangel"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/impl/javacc/JavaCharStream.java", "diffHunk": "@@ -2,48 +2,41 @@\n  * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n  */\n \n-package net.sourceforge.pmd.lang.ast;\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast.impl.javacc;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI0NDg4Mg==", "bodyText": "I think so yes", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368244882", "createdAt": "2020-01-18T19:46:05Z", "author": {"login": "oowekyala"}, "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/impl/javacc/JavaCharStream.java", "diffHunk": "@@ -2,48 +2,41 @@\n  * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n  */\n \n-package net.sourceforge.pmd.lang.ast;\n+/*\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+package net.sourceforge.pmd.lang.ast.impl.javacc;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2OTAzMA=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDM3NjA4OnYy", "diffSide": "RIGHT", "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/CppCharStream.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODoyODoxNFrOFfBf7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxNDo0MTozNVrOFgeh7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3NDczNQ==", "bodyText": "Maybe we could provide a constructor, that also takes the array of token kind names:\nJavaccTokenDocument document = new JavaccTokenDocument(source, CppParserConstants.tokenImage);", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368074735", "createdAt": "2020-01-17T18:28:14Z", "author": {"login": "adangel"}, "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/CppCharStream.java", "diffHunk": "@@ -59,4 +65,17 @@ public String GetImage() {\n         String image = super.GetImage();\n         return CONTINUATION.matcher(image).replaceAll(\"\");\n     }\n+\n+    public static CppCharStream newCppCharStream(Reader dstream) {\n+        String source = CharStreamFactory.toString(dstream);\n+        JavaccTokenDocument document = new JavaccTokenDocument(source) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTU5ODk1OA==", "bodyText": "I feel like this would only help in this specific case, where the implementation is awkward because the Cpp module does not yet use the new ant build. That one makes the array private :/", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r369598958", "createdAt": "2020-01-22T14:41:35Z", "author": {"login": "oowekyala"}, "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/CppCharStream.java", "diffHunk": "@@ -59,4 +65,17 @@ public String GetImage() {\n         String image = super.GetImage();\n         return CONTINUATION.matcher(image).replaceAll(\"\");\n     }\n+\n+    public static CppCharStream newCppCharStream(Reader dstream) {\n+        String source = CharStreamFactory.toString(dstream);\n+        JavaccTokenDocument document = new JavaccTokenDocument(source) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3NDczNQ=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDM4MTYwOnYy", "diffSide": "RIGHT", "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/CppCharStream.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODozMDozMVrOFfBjnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODozMDozMVrOFfBjnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3NTY3OQ==", "bodyText": "We probably should internalize our *CharStream impls on master, they should anyway not be used directly", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368075679", "createdAt": "2020-01-17T18:30:31Z", "author": {"login": "adangel"}, "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/CppCharStream.java", "diffHunk": "@@ -23,10 +28,11 @@\n     private static final char NEWLINE = '\\n';\n     private static final char CARRIAGE_RETURN = '\\r';\n \n-    public CppCharStream(Reader dstream) {\n-        super(dstream);\n+    public CppCharStream(JavaccTokenDocument document) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDQyNDA1OnYy", "diffSide": "RIGHT", "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/symboltable/ClassScope.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODo0Nzo0MFrOFfB-bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxOTo0OToxNFrOFfL5IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA4MjU0Mg==", "bodyText": "Just for me, to understand this: we don't need a real id here, because the created nodes end up only in the symbol table, but not in the AST. We would need the id, if we query the AST via XPath, to resolve the node names. Is this correct?", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368082542", "createdAt": "2020-01-17T18:47:40Z", "author": {"login": "adangel"}, "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/symboltable/ClassScope.java", "diffHunk": "@@ -295,15 +294,15 @@ private void matchMethodDeclaration(JavaNameOccurrence occurrence,\n      */\n     private MethodNameDeclaration createBuiltInMethodDeclaration(final String methodName,\n             final String... parameterTypes) {\n-        ASTMethodDeclaration methodDeclaration = new ASTMethodDeclaration(JavaParserTreeConstants.JJTMETHODDECLARATION);\n+        ASTMethodDeclaration methodDeclaration = new ASTMethodDeclaration(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI0NTAyNQ==", "bodyText": "Yes. But I didn't replace the ID with a valid one because anyway this piece of code is going away. Nodes should not be created outside of the ast package", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368245025", "createdAt": "2020-01-18T19:49:14Z", "author": {"login": "oowekyala"}, "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/symboltable/ClassScope.java", "diffHunk": "@@ -295,15 +294,15 @@ private void matchMethodDeclaration(JavaNameOccurrence occurrence,\n      */\n     private MethodNameDeclaration createBuiltInMethodDeclaration(final String methodName,\n             final String... parameterTypes) {\n-        ASTMethodDeclaration methodDeclaration = new ASTMethodDeclaration(JavaParserTreeConstants.JJTMETHODDECLARATION);\n+        ASTMethodDeclaration methodDeclaration = new ASTMethodDeclaration(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA4MjU0Mg=="}, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDQzNzYzOnYy", "diffSide": "LEFT", "path": "pmd-java/src/test/java/net/sourceforge/pmd/cpd/JavaTokensTokenizerTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODo1MzowMVrOFfCHUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODo1MzowMVrOFfCHUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA4NDgxOQ==", "bodyText": "Do we need to internalize net.sourceforge.pmd.lang.java.ast.JavaParserConstants on master, so that we can rename it?", "url": "https://github.com/pmd/pmd/pull/2211#discussion_r368084819", "createdAt": "2020-01-17T18:53:01Z", "author": {"login": "adangel"}, "path": "pmd-java/src/test/java/net/sourceforge/pmd/cpd/JavaTokensTokenizerTest.java", "diffHunk": "@@ -12,7 +12,7 @@\n import org.junit.Test;\n \n import net.sourceforge.pmd.PMD;\n-import net.sourceforge.pmd.lang.java.ast.JavaParserConstants;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adc292d6d03c1329768d534c3fb648b63cb0cc7"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 448, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}