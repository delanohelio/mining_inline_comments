{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MTA5NjEw", "number": 2703, "title": "[java] Fix UnusedAssignment FP with methods throwing exceptions", "bodyText": "Describe the PR\nFixes #2684. We conservatively assume that any method/ctor call may throw within a try block. There are several improvements we can do to this in PMD 7, with #2689: the overload resolution allows us to find out which methods throw checked exceptions and associate them to the actual catch block they would be dispatched to.\nRelated issues\n\n\nFixes #2684\n\nReady?\n\n\n Added unit tests for fixed bug/feature\n Passing all unit tests\n Complete build ./mvnw clean verify passes (checked automatically by travis)\n Added (in-code) documentation (if needed)", "createdAt": "2020-08-06T15:44:30Z", "url": "https://github.com/pmd/pmd/pull/2703", "merged": true, "mergeCommit": {"oid": "bb8edec8c9825ed89dc4c2bfa4fecb55401f08c8"}, "closed": true, "closedAt": "2020-08-13T10:38:44Z", "author": {"login": "oowekyala"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8RulAAH2gAyNDY0MTA5NjEwOjY4MmZhMGEzYjNhMjNiMDk4ZmI3MWI5MTdjZDU1MjgzMTU5YTIzODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-bsu4gFqTQ2NjU0NjE3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "682fa0a3b3a23b098fb71b917cd55283159a2381", "author": {"user": {"login": "oowekyala", "name": "Cl\u00e9ment Fournier"}}, "url": "https://github.com/pmd/pmd/commit/682fa0a3b3a23b098fb71b917cd55283159a2381", "committedDate": "2020-08-06T15:40:48Z", "message": "Fix UnusedAssignment FP with methods throwing exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65035d6e405062a60702de1f05c80dbc2696acc2", "author": {"user": {"login": "oowekyala", "name": "Cl\u00e9ment Fournier"}}, "url": "https://github.com/pmd/pmd/commit/65035d6e405062a60702de1f05c80dbc2696acc2", "committedDate": "2020-08-06T15:45:07Z", "message": "Update release notes, refs #2703"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5564d89e18aa98050bfe15213c9585c9b51a8858", "author": {"user": {"login": "oowekyala", "name": "Cl\u00e9ment Fournier"}}, "url": "https://github.com/pmd/pmd/commit/5564d89e18aa98050bfe15213c9585c9b51a8858", "committedDate": "2020-08-06T15:51:19Z", "message": "Cleanup useless thing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NTQ2MTc5", "url": "https://github.com/pmd/pmd/pull/2703#pullrequestreview-466546179", "createdAt": "2020-08-13T08:23:47Z", "commit": {"oid": "5564d89e18aa98050bfe15213c9585c9b51a8858"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwODoyMzo0N1rOHABLLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwODoyMzo0N1rOHABLLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc4MTI5NQ==", "bodyText": "Theoretically, creating the reader could already throw (e.g. when using FileReader), which means, that catch & finally is directly executed, but not the try-body.\nBut in this example, a is always overwritten in finally, so the result doesn't change.", "url": "https://github.com/pmd/pmd/pull/2703#discussion_r469781295", "createdAt": "2020-08-13T08:23:47Z", "author": {"login": "adangel"}, "path": "pmd-java/src/test/resources/net/sourceforge/pmd/lang/java/rule/bestpractices/xml/UnusedAssignment.xml", "diffHunk": "@@ -1240,6 +1296,68 @@ public class Foo {\n \n }        ]]></code>\n     </test-code>\n+    <test-code>\n+        <description>Try/catch finally 4</description>\n+        <expected-problems>3</expected-problems>\n+        <expected-linenumbers>4,6,8</expected-linenumbers>\n+        <expected-messages>\n+            <message>The initializer for variable 'a' is never used (overwritten on lines 6, 8 and 10)</message>\n+            <message>The value assigned to variable 'a' is never used (overwritten on line 10)</message>\n+            <message>The value assigned to variable 'a' is never used (overwritten on line 10)</message>\n+        </expected-messages>\n+        <code><![CDATA[\n+public class Foo {\n+\n+    public int foo() {\n+        int a = 0; // overwritten in try body & catch\n+        try (Reader r = new StringReader(\"\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5564d89e18aa98050bfe15213c9585c9b51a8858"}, "originalPosition": 113}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4688, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}