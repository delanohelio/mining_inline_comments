{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNzExNzk1", "number": 2629, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDozNToyN1rOEN-xRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODoyNzozN1rOEPQEbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMDk1MzY0OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDozNToyN1rOGw43Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODozMjoxMlrOGy3c4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNjQ0Nw==", "bodyText": "What's the reason of using such an old guava? (or should I ask 'what's the reason of using guava at all' :))", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r453916447", "createdAt": "2020-07-13T20:35:27Z", "author": {"login": "KroArtem"}, "path": "pom.xml", "diffHunk": "@@ -695,6 +702,26 @@\n                 <scope>test</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>com.github.oowekyala.treeutils</groupId>\n+                <artifactId>tree-matchers</artifactId>\n+                <version>2.1.0</version>\n+                <scope>test</scope>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.github.oowekyala.treeutils</groupId>\n+                <artifactId>tree-printers</artifactId>\n+                <version>2.1.0</version>\n+                <scope>test</scope>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>com.google.guava</groupId>\n+                <artifactId>guava</artifactId>\n+                <version>18.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5MDQ5Nw==", "bodyText": "It's only used by pmd-apex-jorje - on master, it's already removed from the main parent pom.", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r455990497", "createdAt": "2020-07-16T18:32:12Z", "author": {"login": "adangel"}, "path": "pom.xml", "diffHunk": "@@ -695,6 +702,26 @@\n                 <scope>test</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>com.github.oowekyala.treeutils</groupId>\n+                <artifactId>tree-matchers</artifactId>\n+                <version>2.1.0</version>\n+                <scope>test</scope>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.github.oowekyala.treeutils</groupId>\n+                <artifactId>tree-printers</artifactId>\n+                <version>2.1.0</version>\n+                <scope>test</scope>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>com.google.guava</groupId>\n+                <artifactId>guava</artifactId>\n+                <version>18.0</version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNjQ0Nw=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMDk1NzM4OnYy", "diffSide": "RIGHT", "path": "pmd-java/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDozNjoyN1rOGw45WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNzozMzo1MVrOGzIhwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNzAxNw==", "bodyText": "Just curious, why do you have both log4j and slf4j? I saw a ticket to unify logging but it was mostly about logging frameworks vs System.out.println/err", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r453917017", "createdAt": "2020-07-13T20:36:27Z", "author": {"login": "KroArtem"}, "path": "pmd-java/pom.xml", "diffHunk": "@@ -193,6 +165,71 @@\n             <artifactId>ant-testutil</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-matchers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-printers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-runner-junit5</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-assertions</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-core</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.google.guava</groupId>\n+            <artifactId>guava</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-stdlib</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-test</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains</groupId>\n+            <artifactId>annotations</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <!-- the following dependencies are there to support typeresolution in test cases -->\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk5NTQ2Ng==", "bodyText": "They're used to bring those classes on the classpath of tests, that use type resolution. This is a weird solution and we could possibly improve that, to avoid registering a dependency on them", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r455995466", "createdAt": "2020-07-16T18:41:07Z", "author": {"login": "oowekyala"}, "path": "pmd-java/pom.xml", "diffHunk": "@@ -193,6 +165,71 @@\n             <artifactId>ant-testutil</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-matchers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-printers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-runner-junit5</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-assertions</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-core</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.google.guava</groupId>\n+            <artifactId>guava</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-stdlib</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-test</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains</groupId>\n+            <artifactId>annotations</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <!-- the following dependencies are there to support typeresolution in test cases -->\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNzAxNw=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI3MDI3Mg==", "bodyText": "I've created #2649 - this sounds like a useful enhancement", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r456270272", "createdAt": "2020-07-17T07:33:51Z", "author": {"login": "adangel"}, "path": "pmd-java/pom.xml", "diffHunk": "@@ -193,6 +165,71 @@\n             <artifactId>ant-testutil</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-matchers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.github.oowekyala.treeutils</groupId>\n+            <artifactId>tree-printers</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-runner-junit5</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-assertions</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.kotlintest</groupId>\n+            <artifactId>kotlintest-core</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.google.guava</groupId>\n+            <artifactId>guava</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-stdlib</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains.kotlin</groupId>\n+            <artifactId>kotlin-test</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jetbrains</groupId>\n+            <artifactId>annotations</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <!-- the following dependencies are there to support typeresolution in test cases -->\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNzAxNw=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDI3Mzc1OnYy", "diffSide": "RIGHT", "path": "pmd-modelica/pom.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxODoyNzozN1rOGy3SMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNjo1NTowNVrOGzaPlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4Nzc2MA==", "bodyText": "TODO: Add comment, that the order matters.", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r455987760", "createdAt": "2020-07-16T18:27:37Z", "author": {"login": "adangel"}, "path": "pmd-modelica/pom.xml", "diffHunk": "@@ -78,6 +78,27 @@\n             <artifactId>pmd-core</artifactId>\n         </dependency>\n \n+        <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4ODU2Ng==", "bodyText": "TODO: test adding these dependencies as plugin dependencies for surefire", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r455988566", "createdAt": "2020-07-16T18:28:58Z", "author": {"login": "adangel"}, "path": "pmd-modelica/pom.xml", "diffHunk": "@@ -78,6 +78,27 @@\n             <artifactId>pmd-core</artifactId>\n         </dependency>\n \n+        <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4Nzc2MA=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0ODE2MQ==", "bodyText": "Ok, I figured out the problem now: If we have kotlintest-runner-junit5 as a dependency, this pulls in junit-platform 1.2.0, but for the junit-vintage-engine, we would need 1.5.x. Reversing the order, pulls in either junit-platform 1.2.x from kotlintest or junit-plaform 1.5.x from junit-vintage-engine. And surefire seems to need the newer version.\nThe correct way is, to define the two engines as plugin dependencies for surefire (see https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html), section \"JUnit4 API in test dependencies\": We have the Junit4 API (@Test, etc.) as a test-scope-dependency, but the engine is not available for tests - only for surefire, to run the tests.\nWe can add both kotlin and junit-vintage engines - but that only works with surefire-plugin 3+, so I've upgraded this plugin as well.\nWith that change, the order of the dependencies now doesn't matter anymore.\nRemoving kotlintest-runner-junit5 as a small issue: this not only provided the engine, but also part of the testing API (package io.kotlintest.specs), e.g. the base class FunSpec. This is now not longer available and I switched that to simply use AbstractFunSpec - which is available from io.kotlintest.core.\nI tried to update io.kotlintest, but there are some incompatibilites (something to to with suspend/coroutines in the test framework), so I stayed at 3.1.8.\nThe io.kotlintest framework has been renamed with version 4.x to kotest: https://github.com/kotest/kotest - the upgrade will take a bit more effort. But in that version, FunSpec would be available in the core module, and the runner really only contains the engine...\n@oowekyala : just FYI", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r456348161", "createdAt": "2020-07-17T10:04:21Z", "author": {"login": "adangel"}, "path": "pmd-modelica/pom.xml", "diffHunk": "@@ -78,6 +78,27 @@\n             <artifactId>pmd-core</artifactId>\n         </dependency>\n \n+        <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4Nzc2MA=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU2MDUzMg==", "bodyText": "Ok thanks for figuring this out! I'll open a ticket to track the kotest upgrade", "url": "https://github.com/pmd/pmd/pull/2629#discussion_r456560532", "createdAt": "2020-07-17T16:55:05Z", "author": {"login": "oowekyala"}, "path": "pmd-modelica/pom.xml", "diffHunk": "@@ -78,6 +78,27 @@\n             <artifactId>pmd-core</artifactId>\n         </dependency>\n \n+        <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4Nzc2MA=="}, "originalCommit": {"oid": "96998fffc2e21c41e0fd45bb2e8f2dcc1bd2094b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 242, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}