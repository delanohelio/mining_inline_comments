{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NTE5MTY1", "number": 2747, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToxMDozMFrOEeE-4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToxMDozMFrOEeE-4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5OTc0MzcxOnYy", "diffSide": "RIGHT", "path": "pmd-java/src/main/resources/category/java/design.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToxMDozMFrOHJjiXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwODowNzoyMlrOHKq75w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MTQ3MQ==", "bodyText": "This test could probably be moved to right after the [@Final= true() and @Static= false()] for clarity. That way you don't need to put the other path (the one that starts with VariableDeclarator) entirely inside a [...] predicate.\nThough I noticed the violation is now reported on the FieldDeclaration node whereas it was previously reported on the expression. Probably the correct place to report it is actually the VariableDeclaratorId, since there may be several of them in the same field declaration.\nSo the expression should most likely have the form\n//FieldDeclaration\n[@Final= true() and @Static= false()]\n[/* test for lombok.Builder */]\n/VariableDeclarator[VariableInitializer/...]/VariableDeclaratorId", "url": "https://github.com/pmd/pmd/pull/2747#discussion_r479781471", "createdAt": "2020-08-30T15:10:30Z", "author": {"login": "oowekyala"}, "path": "pmd-java/src/main/resources/category/java/design.xml", "diffHunk": "@@ -740,8 +740,10 @@ in each object at runtime.\n <![CDATA[\n //FieldDeclaration\n  [@Final= true() and @Static= false()]\n-   /VariableDeclarator/VariableInitializer/Expression\n-    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal\n+   [VariableDeclarator/VariableInitializer/Expression\n+    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal]\n+    [not(preceding-sibling::Annotation/MarkerAnnotation/Name[@Image=\"Builder.Default\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk1MTI3MQ==", "bodyText": "Cheers for the comments @oowekyala , I've made that change and added a test for the\nclass MyClass {\n    private final String myField = \"something\", myOtherField = \"somethingElse\";\n}\n\ncase to make sure it triggers twice.", "url": "https://github.com/pmd/pmd/pull/2747#discussion_r480951271", "createdAt": "2020-09-01T08:07:22Z", "author": {"login": "ollieabbey"}, "path": "pmd-java/src/main/resources/category/java/design.xml", "diffHunk": "@@ -740,8 +740,10 @@ in each object at runtime.\n <![CDATA[\n //FieldDeclaration\n  [@Final= true() and @Static= false()]\n-   /VariableDeclarator/VariableInitializer/Expression\n-    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal\n+   [VariableDeclarator/VariableInitializer/Expression\n+    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal]\n+    [not(preceding-sibling::Annotation/MarkerAnnotation/Name[@Image=\"Builder.Default\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MTQ3MQ=="}, "originalCommit": {"oid": "363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 326, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}