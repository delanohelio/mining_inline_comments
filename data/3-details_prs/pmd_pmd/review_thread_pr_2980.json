{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxOTUzMzA1", "number": 2980, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTowMTozMlrOFG3ATQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTowMTozMlrOFG3ATQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzM2OTczOnYy", "diffSide": "RIGHT", "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/rule/performance/AvoidInstantiatingObjectsInLoopsRule.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTowMTozMlrOIIEXbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTowMTozMlrOIIEXbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMzMTA1NQ==", "bodyText": "I think == for nodes is more readable than equals. An equals calls looks like it could be recursing, because intuitively two nodes are equal if their subtree are the equal. But everywhere you replaced, we don't want to test whether the subtrees are structurally equal, we want to know whether they're the same. Only == captures this intent, using equals obscures this. Not to mention that equals may NPE and is in that sense less ergonomic.\nI think we should enhance the rule with a list of types for which == is correct.\nEdit: in the meantime i think we could suppress those new violations...", "url": "https://github.com/pmd/pmd/pull/2980#discussion_r545331055", "createdAt": "2020-12-17T19:01:32Z", "author": {"login": "oowekyala"}, "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/rule/performance/AvoidInstantiatingObjectsInLoopsRule.java", "diffHunk": "@@ -119,7 +119,7 @@ private boolean notInsideLoop(ASTAllocationExpression node) {\n                  */\n                 n = n.getParent();\n             } else if (n.getParent() instanceof ASTForStatement && n.getParent().getNumChildren() > 1\n-                    && n == n.getParent().getChild(1)) {\n+                    && n.equals(n.getParent().getChild(1))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62a052e97b6285fa25d39f11a8e59692016adff1"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 237, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}