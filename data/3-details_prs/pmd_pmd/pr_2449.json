{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NDY5Mjc5", "number": 2449, "title": "[plsql] Additional info in SqlStatement, FormalParameter and FetchStatement", "bodyText": "Describe the PR\nI have prepared changes to PR #2347 fulfilling requirements described in these PR comments.\nIt regards:\nSqlStatement - COMMIT or ROLLBACK\nFormalParameterMode - IN, OUT, NO COPY\nFetchStatement - BULK COLLECT, BULK COLLECT LIMIT\n\nRelated issues\n\nContinues / Replaces #2347\n\nReady?\n\n\n Added unit tests for fixed bug/feature\n Passing all unit tests\n Complete build ./mvnw clean verify passes (checked automatically by travis)\n Added (in-code) documentation (if needed)", "createdAt": "2020-04-27T12:28:59Z", "url": "https://github.com/pmd/pmd/pull/2449", "merged": true, "mergeCommit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10"}, "closed": true, "closedAt": "2020-04-30T17:42:31Z", "author": {"login": "zgrzyt93"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcK-hB7gH2gAyNDA5NDY5Mjc5Ojk5YTkxMTVkYzExNzc0MWQwNDNkNmI4NGIxMzM5MTdhZjQ1MmE3OTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccvftUAFqTQwMzY2NzM2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99a9115dc117741d043d6b84b133917af452a790", "author": {"user": {"login": "szyman23", "name": "Piotr Szyma\u0144ski"}}, "url": "https://github.com/pmd/pmd/commit/99a9115dc117741d043d6b84b133917af452a790", "committedDate": "2020-03-06T11:35:31Z", "message": "Merge pull request #1 from pmd/master\n\nSync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15b0bda348838569fa446dbc61186bc7f6a0b7a9", "author": {"user": null}, "url": "https://github.com/pmd/pmd/commit/15b0bda348838569fa446dbc61186bc7f6a0b7a9", "committedDate": "2020-04-27T09:24:03Z", "message": "[plsql] added some additional info in userData"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffd573e1b567245bc986eb7785ffdbe37b93c73e", "author": {"user": {"login": "zgrzyt93", "name": null}}, "url": "https://github.com/pmd/pmd/commit/ffd573e1b567245bc986eb7785ffdbe37b93c73e", "committedDate": "2020-04-27T13:05:22Z", "message": "Merge branch 'master' into additional_info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08a430ed3f70ef5ff271f9d6dd9ce88f5cecde3d", "author": {"user": {"login": "zgrzyt93", "name": null}}, "url": "https://github.com/pmd/pmd/commit/08a430ed3f70ef5ff271f9d6dd9ce88f5cecde3d", "committedDate": "2020-04-27T13:32:31Z", "message": "Update ASTSqlStatement.java\n\nInternalApi annotation added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "944752da3fe5fe08ce63039c490523ac0777cd07", "author": {"user": {"login": "zgrzyt93", "name": null}}, "url": "https://github.com/pmd/pmd/commit/944752da3fe5fe08ce63039c490523ac0777cd07", "committedDate": "2020-04-27T13:38:19Z", "message": "Update ASTFetchStatement.java\n\nInternalApi annotation added."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10", "author": {"user": {"login": "zgrzyt93", "name": null}}, "url": "https://github.com/pmd/pmd/commit/5b8a9fabe181ba858015d6410826e7d982522a10", "committedDate": "2020-04-27T14:26:40Z", "message": "Update ASTFormalParameter.java\n\nCode style refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNjY3MzYz", "url": "https://github.com/pmd/pmd/pull/2449#pullrequestreview-403667363", "createdAt": "2020-04-30T16:07:55Z", "commit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjowNzo1NVrOGOwPMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjoxMTowOVrOGOwXwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEyMzU2OA==", "bodyText": "This looks correct (see https://docs.oracle.com/en/database/oracle/oracle-database/18/lnpls/formal-parameter-declaration.html#GUID-5BA8E033-96B9-439A-A4FC-4844FEC14AD8). The previous version was much more confusing. We can remove now the comment //the order of outer \"|\" is important !", "url": "https://github.com/pmd/pmd/pull/2449#discussion_r418123568", "createdAt": "2020-04-30T16:07:55Z", "author": {"login": "adangel"}, "path": "pmd-plsql/etc/grammar/PldocAST.jjt", "diffHunk": "@@ -607,7 +607,11 @@ ASTFormalParameter FormalParameter()  :\n    (\n \tsimpleNode = ID()\n \t// the order of outer \"|\" is important !\n-\t( LOOKAHEAD(2) ( LOOKAHEAD(2) ( (<OUT>|(<IN> <OUT>)) (LOOKAHEAD(2) <NOCOPY>  )? ) | <IN> ) )?\n+\n+    (<IN> {jjtThis.setIn(true); } )?\n+    (<OUT> {jjtThis.setOut(true); } )?\n+    (<NOCOPY> {jjtThis.setNoCopy(true); } )?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEyNTI3Mw==", "bodyText": "we should make all setters package private, so that it can only be called from the parser....", "url": "https://github.com/pmd/pmd/pull/2449#discussion_r418125273", "createdAt": "2020-04-30T16:10:28Z", "author": {"login": "adangel"}, "path": "pmd-plsql/src/main/java/net/sourceforge/pmd/lang/plsql/ast/ASTFormalParameter.java", "diffHunk": "@@ -19,6 +23,30 @@ public ASTFormalParameter(PLSQLParser p, int id) {\n         super(p, id);\n     }\n \n+    public boolean isIn() {\n+        return this.in;\n+    }\n+\n+    public void setIn(boolean in) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEyNTc2MQ==", "bodyText": "package-private", "url": "https://github.com/pmd/pmd/pull/2449#discussion_r418125761", "createdAt": "2020-04-30T16:11:09Z", "author": {"login": "adangel"}, "path": "pmd-plsql/src/main/java/net/sourceforge/pmd/lang/plsql/ast/ASTSqlStatement.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/**\n+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n+ */\n+\n+/* Generated By:JJTree: Do not edit this line. ASTSqlStatement.java Version 4.3 */\n+/* JavaCCOptions:MULTI=true,NODE_USES_PARSER=true,VISITOR=true,TRACK_TOKENS=false,NODE_PREFIX=AST,NODE_EXTENDS=,NODE_FACTORY=,SUPPORT_CLASS_VISIBILITY_PUBLIC=true */\n+\n+package net.sourceforge.pmd.lang.plsql.ast;\n+\n+import net.sourceforge.pmd.annotation.InternalApi;\n+\n+public class ASTSqlStatement extends AbstractPLSQLNode {\n+\n+    private Type type;\n+\n+    public enum Type { COMMIT, ROLLBACK, SAVEPOINT, SET_TRANSACTION, LOCK_TABLE, MERGE }\n+\n+    @Deprecated\n+    @InternalApi\n+    public ASTSqlStatement(int id) {\n+        super(id);\n+    }\n+\n+    @Deprecated\n+    @InternalApi\n+    public ASTSqlStatement(PLSQLParser p, int id) {\n+        super(p, id);\n+    }\n+\n+    public void setType(Type type) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8a9fabe181ba858015d6410826e7d982522a10"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4771, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}