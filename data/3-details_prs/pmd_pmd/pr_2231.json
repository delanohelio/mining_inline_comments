{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDc2Mjg5", "number": 2231, "title": "[java] Cyclomatic complexity is misreported (lack of clearing metrics\u2026", "bodyText": "\u2026 cache)\nFixes #1984\n\nBefore submitting a PR, please check that:\n\n The PR is submitted against master. The PMD team will merge back to support branches as needed.\n ./mvnw clean verify passes. This will build and test PMD, execute PMD and checkstyle rules. Check this for more info\n\nPR Description:", "createdAt": "2020-01-17T10:36:16Z", "url": "https://github.com/pmd/pmd/pull/2231", "merged": true, "mergeCommit": {"oid": "0e2b9cf5b4d9d65c6a2f17510b945e672dce2218"}, "closed": true, "closedAt": "2020-01-17T17:42:30Z", "author": {"login": "adangel"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7MSgSAH2gAyMzY0MDc2Mjg5OmI3MTU3NWZhMzY5NWU5NzU1MmY2NDQ2MGY3NzFjNWE5MWY1OGY5YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7SQjdAFqTM0NDczMjc1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b71575fa3695e97552f64460f771c5a91f58f9b6", "author": {"user": {"login": "adangel", "name": "Andreas Dangel"}}, "url": "https://github.com/pmd/pmd/commit/b71575fa3695e97552f64460f771c5a91f58f9b6", "committedDate": "2020-01-17T10:35:32Z", "message": "[java] Cyclomatic complexity is misreported (lack of clearing metrics cache)\n\nFixes #1984"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NTczMTA3", "url": "https://github.com/pmd/pmd/pull/2231#pullrequestreview-344573107", "createdAt": "2020-01-17T13:22:34Z", "commit": {"oid": "b71575fa3695e97552f64460f771c5a91f58f9b6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzoyMjozNFrOFe4ynA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzoyMzowNlrOFe4zVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzMjA2MA==", "bodyText": "Maybe, a better solution wrt to visibility would be to move the LanguageMetricsProvider out of ApexHandler, and into this package. ApexMetrics will probably not change for 7.0 (apart from this method), while LanguageMetricsProvider is still experimental and we can remove the new API freely in 7.0", "url": "https://github.com/pmd/pmd/pull/2231#discussion_r367932060", "createdAt": "2020-01-17T13:22:34Z", "author": {"login": "oowekyala"}, "path": "pmd-apex/src/main/java/net/sourceforge/pmd/lang/apex/metrics/ApexMetrics.java", "diffHunk": "@@ -37,8 +37,11 @@ public static ApexMetricsFacade getFacade() {\n     }\n \n \n-    /** Resets the entire data structure. Used for tests. */\n-    static void reset() {\n+    /**\n+     * Resets the entire data structure.\n+     * This needs to be done in case PMD is executed multiple times within one JVM run.\n+     */\n+    public static void reset() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b71575fa3695e97552f64460f771c5a91f58f9b6"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzMjI0Ng==", "bodyText": "Same here", "url": "https://github.com/pmd/pmd/pull/2231#discussion_r367932246", "createdAt": "2020-01-17T13:23:06Z", "author": {"login": "oowekyala"}, "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/metrics/JavaMetrics.java", "diffHunk": "@@ -38,8 +38,11 @@ static JavaMetricsFacade getFacade() {\n     }\n \n \n-    /** Resets the entire data structure. Used for tests. */\n-    static void reset() {\n+    /**\n+     * Resets the entire data structure.\n+     * This needs to be done in case PMD is executed multiple times within one JVM run.\n+     */\n+    public static void reset() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b71575fa3695e97552f64460f771c5a91f58f9b6"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e2b9cf5b4d9d65c6a2f17510b945e672dce2218", "author": {"user": {"login": "adangel", "name": "Andreas Dangel"}}, "url": "https://github.com/pmd/pmd/commit/0e2b9cf5b4d9d65c6a2f17510b945e672dce2218", "committedDate": "2020-01-17T14:41:54Z", "message": "[java][apex] Move *MetricsProvider into own classes into metrics packages\n\nMake *Metrics.reset package private again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NzMyNzU1", "url": "https://github.com/pmd/pmd/pull/2231#pullrequestreview-344732755", "createdAt": "2020-01-17T17:32:51Z", "commit": {"oid": "0e2b9cf5b4d9d65c6a2f17510b945e672dce2218"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4851, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}