{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NTE5MTY1", "number": 2747, "title": "[java] Don't trigger FinalFieldCouldBeStatic when field is annotated with lombok @Builder.Default", "bodyText": "Describe the PR\nDon't trigger the FinalFieldCouldBeStatic when field is annotated with a lombok @Builder.Default annotation.\nRelated issues\n\nFixes #2708\n\nReady?\n\n Added unit tests for fixed bug/feature\n Passing all unit tests\n Complete build ./mvnw clean verify passes (checked automatically by travis)\n[] Added (in-code) documentation (if needed)", "createdAt": "2020-08-27T07:49:46Z", "url": "https://github.com/pmd/pmd/pull/2747", "merged": true, "mergeCommit": {"oid": "bcb04df160704b3a99efedc9a5aa8463dfc34ede"}, "closed": true, "closedAt": "2020-09-06T16:33:30Z", "author": {"login": "ollieabbey"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCt4N8gH2gAyNDc0NTE5MTY1OmNkOThhMzZiNjY1NDhhY2E1YzU4NjcyODNjOTlkMWYzOTIxMTY0M2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdF8jFegFqTQ4MzA2NTYwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd98a36b66548aca5c5867283c99d1f39211643a", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/cd98a36b66548aca5c5867283c99d1f39211643a", "committedDate": "2020-08-26T15:52:13Z", "message": "[java] Fix 2708: False positive FinalFieldCouldBeStatic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc", "committedDate": "2020-08-27T07:45:53Z", "message": "Trigger for non lombok Builder.Default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjExMzA4", "url": "https://github.com/pmd/pmd/pull/2747#pullrequestreview-478211308", "createdAt": "2020-08-30T15:10:30Z", "commit": {"oid": "363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToxMDozMFrOHJjiXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToxMDozMFrOHJjiXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MTQ3MQ==", "bodyText": "This test could probably be moved to right after the [@Final= true() and @Static= false()] for clarity. That way you don't need to put the other path (the one that starts with VariableDeclarator) entirely inside a [...] predicate.\nThough I noticed the violation is now reported on the FieldDeclaration node whereas it was previously reported on the expression. Probably the correct place to report it is actually the VariableDeclaratorId, since there may be several of them in the same field declaration.\nSo the expression should most likely have the form\n//FieldDeclaration\n[@Final= true() and @Static= false()]\n[/* test for lombok.Builder */]\n/VariableDeclarator[VariableInitializer/...]/VariableDeclaratorId", "url": "https://github.com/pmd/pmd/pull/2747#discussion_r479781471", "createdAt": "2020-08-30T15:10:30Z", "author": {"login": "oowekyala"}, "path": "pmd-java/src/main/resources/category/java/design.xml", "diffHunk": "@@ -740,8 +740,10 @@ in each object at runtime.\n <![CDATA[\n //FieldDeclaration\n  [@Final= true() and @Static= false()]\n-   /VariableDeclarator/VariableInitializer/Expression\n-    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal\n+   [VariableDeclarator/VariableInitializer/Expression\n+    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal]\n+    [not(preceding-sibling::Annotation/MarkerAnnotation/Name[@Image=\"Builder.Default\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "363c3a30ff59b5d7f16e6e28ba90ed8ffc0f92bc"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba5c2f428890b1a31bd75bc1d6754b501d3f24b1", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/ba5c2f428890b1a31bd75bc1d6754b501d3f24b1", "committedDate": "2020-09-01T07:52:34Z", "message": "Merge pull request #1 from pmd/master\n\nUpdate with changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776c0c154fa224074c9dff969312ef29d49db2eb", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/776c0c154fa224074c9dff969312ef29d49db2eb", "committedDate": "2020-09-01T07:55:52Z", "message": "Addressed review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85754378f72f069510c39179789086799443b95f", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/85754378f72f069510c39179789086799443b95f", "committedDate": "2020-09-01T08:02:48Z", "message": "Added test for multiple VariableDecoratorIds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e0c54a80af931ef4369ac01baa261da7b15b28", "author": {"user": {"login": "ollieabbey", "name": "Ollie Abbey"}}, "url": "https://github.com/pmd/pmd/commit/b3e0c54a80af931ef4369ac01baa261da7b15b28", "committedDate": "2020-09-01T08:03:28Z", "message": "Fixed a typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDY1NjA3", "url": "https://github.com/pmd/pmd/pull/2747#pullrequestreview-483065607", "createdAt": "2020-09-05T16:39:29Z", "commit": {"oid": "b3e0c54a80af931ef4369ac01baa261da7b15b28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4717, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}