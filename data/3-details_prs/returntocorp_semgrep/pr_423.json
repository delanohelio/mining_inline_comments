{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTQxOTgw", "number": 423, "title": "Reformat README", "bodyText": "This includes many different changes that attempt to provide a concise explanation of the tool and guide a new user through their first usage. When more information is needed in any specific instance we can link out to more detailed documentation. Step 1 in #380.\nHighly recommend looking at the formatted file here so you can see what the result looks like.\nI'd like to explicitly get a review from the following people:\n\n@dan5382 - do the ergonomics of this README make sense? Is it usable? How can we make our user's initial experience with this tool as enjoyable as possible?\n@pabloest - are we putting our best foot forward here from a public perspective? Can non-technical users get what they need here too?\n@dlukeomalley - Is the README guiding users in the direction we'd like with the tool? I.e. are we highlighting the features we'd like, and pointing out other r2c artifacts where appropriate?\n\nLots of request for comments inline...", "createdAt": "2020-04-09T17:05:15Z", "url": "https://github.com/returntocorp/semgrep/pull/423", "merged": true, "mergeCommit": {"oid": "05b1daf0f45369015ebf76704d5204077ad1f136"}, "closed": true, "closedAt": "2020-04-13T23:50:27Z", "author": {"login": "mschwager"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV_yc2gFqTM5MDk3NTQ5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWZW5RgFqTM5MTcwMDA5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTc1NDky", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390975492", "createdAt": "2020-04-09T17:05:59Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzowNTo1OVrOGDhlXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxNzozMlrOGDh-vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA==", "bodyText": "New tagline. Is this first sentence a concise explanation we can get behind and start using elsewhere? E.g. slide decks, Github repository description, external emails, etc.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406349148", "createdAt": "2020-04-09T17:05:59Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MDUzNw==", "bodyText": "Were Ruby and Scala being worked on? Should we include Typescript and PHP (from the language matrix)? Better to under-promise and over-deliver here, IMO.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406350537", "createdAt": "2020-04-09T17:08:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MTEzMQ==", "bodyText": "Oh yeah, the weird &nbsp; are there to even the table columns out a bit. I \"filled\" the language name to 5 characters if it was shorter than that.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406351131", "createdAt": "2020-04-09T17:09:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MDUzNw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MjEyMQ==", "bodyText": "I moved this down to the resources section. I tend to avoid immediately linking people to other things that may distract them and prevent them from using the thing they're here for. I don't have strong feelings here though.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406352121", "createdAt": "2020-04-09T17:11:21Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MjMyMA==", "bodyText": "Pending project/tool naming changes...", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406352320", "createdAt": "2020-04-09T17:11:41Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MzIwMw==", "bodyText": "From here down I tried to move away from the theory behind sgrep and comprehensive docs toward getting them up and running as soon as possible. Where appropriate we can link out to more comprehensive docs or resources.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406353203", "createdAt": "2020-04-09T17:13:16Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1NTY0NQ==", "bodyText": "The configuration docs seemed to be jumping around different concepts a lot. Between the registry, rule writing, design philosophy, tool defaults, etc. I think we can consolidate a lot of the information and move the finer points like design philosophy to the advanced documentation.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406355645", "createdAt": "2020-04-09T17:17:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 146}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTg3Mzc2", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390987376", "createdAt": "2020-04-09T17:23:13Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMzoxM1rOGDiLXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMzoxM1rOGDiLXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODg3OQ==", "bodyText": "Since we're explaining $X and ..., it might be a leap to have people grok pattern-not-inside at the same time.  Is there another example we could use?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406358879", "createdAt": "2020-04-09T17:23:13Z", "author": {"login": "minusworld"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 206}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTg4MDI2", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390988026", "createdAt": "2020-04-09T17:24:07Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTkzOTk3", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390993997", "createdAt": "2020-04-09T17:32:39Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMjozOVrOGDigwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMjozOVrOGDigwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDM1Mw==", "bodyText": "Internally (in the code) and externally, we've referred to this as the ellipsis operator. Is there a reason to change?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406364353", "createdAt": "2020-04-09T17:32:39Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 196}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTk0Nzg4", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390994788", "createdAt": "2020-04-09T17:33:50Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMzo1MFrOGDijLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMzo1MFrOGDijLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDk3Mw==", "bodyText": "I find it confusing to have $LIST or $METAVARIABLE as examples, they make me think there is something special about those words. Also found it helpful to have examples of the invalid metavars. Thoughts @mschwager ?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406364973", "createdAt": "2020-04-09T17:33:50Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 193}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTk2NTI4", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390996528", "createdAt": "2020-04-09T17:36:26Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozNjoyNlrOGDio8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozNjoyNlrOGDio8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ==", "bodyText": "suggestion for this table, it should show the sgrep invocation exactly to make it clear how to use the patteern, and have examples in Javascript and golang as well, eg:\ncommand          | matches\nsgrep -lang js const x = 5     | const $FOO = $BAR", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406366451", "createdAt": "2020-04-09T17:36:26Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTk4MDUz", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390998053", "createdAt": "2020-04-09T17:38:45Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozODo0NVrOGDit_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozODo0NVrOGDit_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2Nzc0MA==", "bodyText": "nice, smartquotes are the worst", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406367740", "createdAt": "2020-04-09T17:38:45Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 247}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTk4ODE5", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-390998819", "createdAt": "2020-04-09T17:39:57Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozOTo1N1rOGDiwjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozOTo1N1rOGDiwjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODM5OA==", "bodyText": "I like the resources section but the simple + advanced conf are such important parts I feel they merit being mentioned earlier and with larger emphasis", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406368398", "createdAt": "2020-04-09T17:39:57Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 272}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDA4MDQ3", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391008047", "createdAt": "2020-04-09T17:53:22Z", "commit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1MzoyMlrOGDjOmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowNDoxNVrOGDjm_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NjA4OA==", "bodyText": "I like the tagline. We could iterate a bit but I agree with Isaac that it\u2019s not a blocker.\nTo feature sgrep.live more we might want a screenshot or composite screenshot.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406376088", "createdAt": "2020-04-09T17:53:22Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3Njc1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n          \n          \n            \n            | **Python** | **JavaScript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **TypeScript** | **PHP &nbsp; &nbsp;** |", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406376755", "createdAt": "2020-04-09T17:54:25Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NzY0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### OSX\n          \n          \n            \n            ### macOS", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406377646", "createdAt": "2020-04-09T17:55:53Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3ODU2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Let's start with a simple example:\n          \n          \n            \n            Start with a simple example:\n          \n      \n    \n    \n  \n\nPrefer to avoid using first person plural in these docs because it can get rather messy.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406378562", "createdAt": "2020-04-09T17:57:30Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDYzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Installing\n          \n          \n            \n            ## Installation\n          \n      \n    \n    \n  \n\nI suggest being consistent in the section titles using nouns instead of gerunds.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380635", "createdAt": "2020-04-09T18:01:12Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDc2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Using\n          \n          \n            \n            ## Usage", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380766", "createdAt": "2020-04-09T18:01:27Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDg5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Configuring\n          \n          \n            \n            ## Configuration", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380896", "createdAt": "2020-04-09T18:01:42Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 146}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjE4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n          \n          \n            \n            * [r2c `sgrep` meetup slides](https://web-assets.r2c.dev/sgrep/r2c-sgrep-meetup-feb-2020.pdf)", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406382187", "createdAt": "2020-04-09T18:04:00Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 271}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjMzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Contributing\n          \n          \n            \n            ## Contribution", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406382333", "createdAt": "2020-04-09T18:04:15Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)\n+* [Advanced configuration documentation](docs/config/advanced.md)\n+* [Integrations](docs/integrations.md)\n+* [Development](docs/development.md)\n+* [Bug reports](https://github.com/returntocorp/sgrep/issues)\n \n-## Contributions\n+## Contributing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 279}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51b7ba7a186fd990b4968f2c6acb04f32890013c", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/51b7ba7a186fd990b4968f2c6acb04f32890013c", "committedDate": "2020-04-10T15:20:31Z", "message": "Reformat README\n\nThis includes many different changes that attempt to provide a concise\nexplanation of the tool and guide a new user through their first usage.\nWhen more information is needed in any specific instance we can link out\nto more detailed documentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0ec86a935610bea2309260034b8b1ac31fe1d61", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/a0ec86a935610bea2309260034b8b1ac31fe1d61", "committedDate": "2020-04-10T15:20:31Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19ff50cc437e6cd2aaa8f83c9ea341c639878fab", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/19ff50cc437e6cd2aaa8f83c9ea341c639878fab", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a65d8daad5b2de71e6cd68bfb180915e99202877", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/a65d8daad5b2de71e6cd68bfb180915e99202877", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "267e66680a24eb9ff888f0f12ce241b385786663", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/267e66680a24eb9ff888f0f12ce241b385786663", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "578608cfe707627edfb697bfbe46c3a2e0fc8685", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/578608cfe707627edfb697bfbe46c3a2e0fc8685", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d190834216632de50874be3254db4eb4a0b72bcb", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/d190834216632de50874be3254db4eb4a0b72bcb", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d677cab21f179540907d39f023d31ae96d3ac994", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/d677cab21f179540907d39f023d31ae96d3ac994", "committedDate": "2020-04-10T15:21:12Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a5934fd67ec0ad6ca1992410e791f22ec3e3bc3", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3a5934fd67ec0ad6ca1992410e791f22ec3e3bc3", "committedDate": "2020-04-10T15:22:08Z", "message": "Address PR feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4384a593e5fdf907865a923baf162e513d52c530", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/4384a593e5fdf907865a923baf162e513d52c530", "committedDate": "2020-04-09T21:10:03Z", "message": "Update README.md\n\nCo-Authored-By: Pablo Estrada <pablo@r2c.dev>"}, "afterCommit": {"oid": "3a5934fd67ec0ad6ca1992410e791f22ec3e3bc3", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3a5934fd67ec0ad6ca1992410e791f22ec3e3bc3", "committedDate": "2020-04-10T15:22:08Z", "message": "Address PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/68401b35cf19e794f797c17d79ccc5634626e6f9", "committedDate": "2020-04-10T15:53:48Z", "message": "Add invalid metavariable example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjM0MzA4", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391634308", "createdAt": "2020-04-10T20:03:25Z", "commit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowMzoyNVrOGEEa1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowMzoyNVrOGEEa1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkxOTg5Mg==", "bodyText": "IMO we should not be recommending this path (in the README) until it is as easy as apt-get install semgrep @DrewDennison  thoughts?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406919892", "createdAt": "2020-04-10T20:03:25Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjM0NTQ5", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391634549", "createdAt": "2020-04-10T20:04:01Z", "commit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDowMVrOGEEbsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDowMVrOGEEbsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyMDExMw==", "bodyText": "this makes me think that a single pattern works on multiple languages (which isn't really true). Could we rephrase?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406920113", "createdAt": "2020-04-10T20:04:01Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjM0Nzkx", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391634791", "createdAt": "2020-04-10T20:04:40Z", "commit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDo0MFrOGEEceA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDo0MFrOGEEceA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyMDMxMg==", "bodyText": "@DrewDennison why would we not use -config=r2c here?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406920312", "createdAt": "2020-04-10T20:04:40Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n ## Usage\n \n-### Rule Development\n+Start with a simple example:\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n-\n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb408d6216771de471259ecd8f8dd53b659a6edc", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/cb408d6216771de471259ecd8f8dd53b659a6edc", "committedDate": "2020-04-10T21:08:51Z", "message": "Address PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjgwMjcw", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391680270", "createdAt": "2020-04-10T21:50:28Z", "commit": {"oid": "cb408d6216771de471259ecd8f8dd53b659a6edc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjgzNTI4", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391683528", "createdAt": "2020-04-10T22:00:29Z", "commit": {"oid": "cb408d6216771de471259ecd8f8dd53b659a6edc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzAwMDkz", "url": "https://github.com/returntocorp/semgrep/pull/423#pullrequestreview-391700093", "createdAt": "2020-04-10T23:05:03Z", "commit": {"oid": "cb408d6216771de471259ecd8f8dd53b659a6edc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1108, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}