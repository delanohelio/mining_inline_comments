{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NTI5NDE4", "number": 853, "title": "Disable program normalization (!= ==> !(==) rewriting builtin hack)", "bodyText": "This closes issue #851\nThis was a hack to demo some semantic matching but it actually works\nin only one direction ... User-defined equivalences are better for that\nand are more explicit.\nTest plan:\ntest file included", "createdAt": "2020-05-28T14:30:45Z", "url": "https://github.com/returntocorp/semgrep/pull/853", "merged": true, "mergeCommit": {"oid": "715ef631731a4728d32974a955371b681bd6875b"}, "closed": true, "closedAt": "2020-05-29T09:34:29Z", "author": {"login": "aryx"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcluw4JAH2gAyNDI0NTI5NDE4OjAzMDBkZTFjN2I1NTAzMjFlYWY1NThjNzE4ZDU5YWZlY2M1ZTc4MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclzt8IgH2gAyNDI0NTI5NDE4OjQ2ZTVkMjZhMGJlYjRlNmQzOTNmNTI0Nzc0ZjViMmE4ZmY1NTEzZmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815", "author": {"user": {"login": "aryx", "name": "Yoann Padioleau"}}, "url": "https://github.com/returntocorp/semgrep/commit/0300de1c7b550321eaf558c718d59afecc5e7815", "committedDate": "2020-05-28T14:30:18Z", "message": "Disable program normalization (!= ==> !(==) rewriting builtin hack)\n\nThis closes issue #851\n\nThis was a hack to demo some semantic matching but it actually works\nin only one direction ... User-defined equivalences are better for that\nand are more explicit.\n\nTest plan:\ntest file included"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjE2MDU1", "url": "https://github.com/returntocorp/semgrep/pull/853#pullrequestreview-420216055", "createdAt": "2020-05-28T15:14:10Z", "commit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToxNDoxMFrOGb6DRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToxNDoxMFrOGb6DRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkxNTg0NQ==", "bodyText": "This was only here to support Normalize_AST.normalize, so we could undo the argument. \ud83e\udd37", "url": "https://github.com/returntocorp/semgrep/pull/853#discussion_r431915845", "createdAt": "2020-05-28T15:14:10Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/matching/Semgrep_generic.ml", "diffHunk": "@@ -222,15 +222,22 @@ let apply_equivalences equivs any =\n (*****************************************************************************)\n \n (*s: function [[Semgrep_generic.check2]] *)\n-let check2 ~hook rules equivs file lang ast =\n+let check2 ~hook rules equivs file _lang ast =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjE3MzY3", "url": "https://github.com/returntocorp/semgrep/pull/853#pullrequestreview-420217367", "createdAt": "2020-05-28T15:15:30Z", "commit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToxNTozMFrOGb6HCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToxNTozMFrOGb6HCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkxNjgwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 (* Python == is not the same than !(==) *)\n          \n          \n            \n                 (* Python != is not the same as !(==) *)", "url": "https://github.com/returntocorp/semgrep/pull/853#discussion_r431916808", "createdAt": "2020-05-28T15:15:30Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/tests/Test.ml", "diffHunk": "@@ -94,7 +94,13 @@ let regression_tests_for_lang files lang =\n     let rule = { R.\n       id = \"unit testing\"; pattern; message = \"\"; severity = R.Error; \n       languages = [lang] } in\n-    let equiv = [] in\n+    let equiv = \n+     (* Python == is not the same than !(==) *)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjE3ODQ2", "url": "https://github.com/returntocorp/semgrep/pull/853#pullrequestreview-420217846", "createdAt": "2020-05-28T15:15:58Z", "commit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjIyNzY4", "url": "https://github.com/returntocorp/semgrep/pull/853#pullrequestreview-420222768", "createdAt": "2020-05-28T15:21:00Z", "commit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToyMTowMVrOGb6Wow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNToyMTowMVrOGb6Wow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkyMDgwMw==", "bodyText": "FWIW, I think basic_equivalences.yml already excludes Python from the rewrite. Do we still need the language check here?", "url": "https://github.com/returntocorp/semgrep/pull/853#discussion_r431920803", "createdAt": "2020-05-28T15:21:01Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/tests/Test.ml", "diffHunk": "@@ -94,7 +94,13 @@ let regression_tests_for_lang files lang =\n     let rule = { R.\n       id = \"unit testing\"; pattern; message = \"\"; severity = R.Error; \n       languages = [lang] } in\n-    let equiv = [] in\n+    let equiv = \n+     (* Python == is not the same than !(==) *)\n+     if lang <> Lang.Python", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0300de1c7b550321eaf558c718d59afecc5e7815"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46e5d26a0beb4e6d393f524774f5b2a8ff5513fc", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/46e5d26a0beb4e6d393f524774f5b2a8ff5513fc", "committedDate": "2020-05-28T20:16:37Z", "message": "Merge branch 'develop' into remove_normalize"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1594, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}