{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMzIyNzA3", "number": 792, "title": "qa-tests: Add tests for realworld pattern-regex", "bodyText": "Closes #785", "createdAt": "2020-05-19T19:34:46Z", "url": "https://github.com/returntocorp/semgrep/pull/792", "merged": true, "mergeCommit": {"oid": "4bc50c13ceec1fedf7915d5f5aeb77d432d5e442"}, "closed": true, "closedAt": "2020-05-19T20:32:24Z", "author": {"login": "brendongo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci5thUgH2gAyNDIwMzIyNzA3OjRiNTg4NmMyY2JhZTJjYmI2NzMwMTBmN2VkY2E4NTY5MDRmMjE2ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci6O-7AFqTQxNDc4NTczMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/4b5886c2cbae2cbb673010f7edca856904f216df", "committedDate": "2020-05-19T19:33:49Z", "message": "qa-tests: Add tests for realworld pattern-regex"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzY0NTky", "url": "https://github.com/returntocorp/semgrep/pull/792#pullrequestreview-414764592", "createdAt": "2020-05-19T19:38:58Z", "commit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozODo1OFrOGXvxeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozODo1OFrOGXvxeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MzE0NQ==", "bodyText": "aww my lil number working his way into everyone's hearts \ud83d\ude0a", "url": "https://github.com/returntocorp/semgrep/pull/792#discussion_r427553145", "createdAt": "2020-05-19T19:38:58Z", "author": {"login": "underyx"}, "path": "semgrep/tests/qa/rules/regex-sentinel.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+rules:\n+  - id: test-regex\n+    patterns:\n+      - pattern-regex: '. = 87518275812375164'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzY1OTQ5", "url": "https://github.com/returntocorp/semgrep/pull/792#pullrequestreview-414765949", "createdAt": "2020-05-19T19:41:00Z", "commit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0MTowMFrOGXv14g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0MTowMFrOGXv14g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1NDI3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"--config=rules/regex-sentinel.yaml\",\n          \n          \n            \n                        \"--config\",\n          \n          \n            \n                        Path(TESTS_PATH / \"qa\" / \"rules\" / \"regex-sentinel.yaml\").resolve(),\n          \n      \n    \n    \n  \n\nwouldn't this work? then we wouldn't need to mess with tmp paths above.", "url": "https://github.com/returntocorp/semgrep/pull/792#discussion_r427554274", "createdAt": "2020-05-19T19:41:00Z", "author": {"login": "underyx"}, "path": "semgrep/tests/qa/test_public_repos.py", "diffHunk": "@@ -109,3 +114,19 @@ def test_semgrep_on_repo(run_semgrep_in_tmp, repo_url):\n         assert output[\"errors\"] == []\n         assert len(output[\"results\"]) == 1\n         assert output[\"results\"][0][\"path\"] == str(sentinel_path)\n+\n+    output = subprocess.check_output(\n+        [\n+            \"python3\",\n+            \"-m\",\n+            \"semgrep\",\n+            \"--config=rules/regex-sentinel.yaml\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzcxMTI1", "url": "https://github.com/returntocorp/semgrep/pull/792#pullrequestreview-414771125", "createdAt": "2020-05-19T19:48:40Z", "commit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0ODo0MFrOGXwGCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0ODo0MFrOGXwGCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1ODQxMQ==", "bodyText": "Not really sure what's going on with all this path stuff - I trust @underyx's thoughts \ud83d\udc4d", "url": "https://github.com/returntocorp/semgrep/pull/792#discussion_r427558411", "createdAt": "2020-05-19T19:48:40Z", "author": {"login": "mschwager"}, "path": "semgrep/tests/qa/test_public_repos.py", "diffHunk": "@@ -60,7 +60,12 @@ def xfail_repo(url, *, reason=None):\n         ),\n     ],\n )\n-def test_semgrep_on_repo(run_semgrep_in_tmp, repo_url):\n+def test_semgrep_on_repo(monkeypatch, tmp_path, repo_url):\n+    TESTS_PATH = Path(__file__).parent.parent", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0Nzg1NzMx", "url": "https://github.com/returntocorp/semgrep/pull/792#pullrequestreview-414785731", "createdAt": "2020-05-19T20:10:22Z", "commit": {"oid": "4b5886c2cbae2cbb673010f7edca856904f216df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1002, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}