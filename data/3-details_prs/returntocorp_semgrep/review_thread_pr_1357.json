{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MzM2Nzg2", "number": 1357, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMDoyMFrOESbokw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMTozM1rOESbq2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NzYyNTc5OnYy", "diffSide": "RIGHT", "path": "docs/pattern-features.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMDoyMFrOG3m7dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMDoyMFrOG3m7dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2MjY3Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Typed metavariables only match a metavariable if it is of a specific type. For\n          \n          \n            \n            Typed metavariables only match a metavariable if it is declared as a specific type. For", "url": "https://github.com/returntocorp/semgrep/pull/1357#discussion_r460962677", "createdAt": "2020-07-27T15:10:20Z", "author": {"login": "nbrahms"}, "path": "docs/pattern-features.md", "diffHunk": "@@ -417,6 +418,76 @@ class Hash {\n }\n ```\n \n+### Typed Metavariables\n+\n+Typed metavariables only match a metavariable if it is of a specific type. For", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0101948194fbf4c6d9e4ec986b177dd666bccee"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NzYzMTYxOnYy", "diffSide": "RIGHT", "path": "docs/pattern-features.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMTozM1rOG3m-1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMTozM1rOG3m-1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2MzU0Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Go currently does not recognize the type of all variables when declared on the\n          \n          \n            \n            Semgrep for Go currently does not recognize the type of all variables when declared on the", "url": "https://github.com/returntocorp/semgrep/pull/1357#discussion_r460963543", "createdAt": "2020-07-27T15:11:33Z", "author": {"login": "nbrahms"}, "path": "docs/pattern-features.md", "diffHunk": "@@ -417,6 +418,76 @@ class Hash {\n }\n ```\n \n+### Typed Metavariables\n+\n+Typed metavariables only match a metavariable if it is of a specific type. For\n+example, you may want to specifically check that `==` is never used for\n+strings.\n+\n+**Java:**\n+\n+```text\n+pattern: $X == (String $Y)\n+```\n+\n+```java\n+public class Example {\n+    public int foo(String a, int b) {\n+        // Matched\n+        if (a == \"hello\") {\n+            return 1;\n+        }\n+\n+        // Not matched\n+        if (b == 2) {\n+            return -1;\n+        }\n+    }\n+}\n+```\n+\n+**Go:**\n+\n+```text\n+pattern: \"$X == ($Y : str)\"\n+```\n+\n+```go\n+func main() {\n+    var x string\n+    var y string\n+    var a int\n+    var b int\n+\n+    // Matched\n+    if x == y {\n+       x = y\n+    }\n+\n+    // Not matched\n+    if a == b {\n+       a = b\n+    }\n+}\n+```\n+\n+#### Limitations:\n+\n+Currently, since matching happens within a single file, this is only guaranteed\n+to work for local variables and arguments. Additionally, it only understands\n+types on a shallow level. For example, if you have `int[] A`, it will not\n+recognize `A[0]` as an integer. If you have a class with fields, you will not be\n+able to use typechecking on field accesses, and it will not recognize the\n+class' field as the expected type. Literal types are understood to a limited\n+extent.\n+\n+Go currently does not recognize the type of all variables when declared on the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0101948194fbf4c6d9e4ec986b177dd666bccee"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4961, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}