{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODE0Nzk1", "number": 1111, "title": "More Bento and pre-commit cleanup", "bodyText": "Comments inline.", "createdAt": "2020-06-23T20:51:29Z", "url": "https://github.com/returntocorp/semgrep/pull/1111", "merged": true, "mergeCommit": {"oid": "f5ac424be061d5a72ff79067181d0b6532a33074"}, "closed": true, "closedAt": "2020-06-24T15:42:54Z", "author": {"login": "mschwager"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuL0UZAFqTQzNjE0ODgwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcubJs_AFqTQzNjcxODgzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTQ4ODA4", "url": "https://github.com/returntocorp/semgrep/pull/1111#pullrequestreview-436148808", "createdAt": "2020-06-23T20:52:42Z", "commit": {"oid": "743c020de8282a393394b934431f8ff5d5233582"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTQ4MTI3", "url": "https://github.com/returntocorp/semgrep/pull/1111#pullrequestreview-436148127", "createdAt": "2020-06-23T20:51:51Z", "commit": {"oid": "743c020de8282a393394b934431f8ff5d5233582"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1MTo1MVrOGn6FuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1MzowN1rOGn6KHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5OTM4NA==", "bodyText": "We're not using click or flask in this project.", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444499384", "createdAt": "2020-06-23T20:51:51Z", "author": {"login": "mschwager"}, "path": ".bento/config.yml", "diffHunk": "@@ -36,13 +36,6 @@ tools:\n     ignore:\n     - bare-except-bugbear\n     run: true\n-  r2c.click:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743c020de8282a393394b934431f8ff5d5233582"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5OTk5NA==", "bodyText": "None of these rules fire anywhere, not sure why we have all of them excluded.", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444499994", "createdAt": "2020-06-23T20:52:34Z", "author": {"login": "mschwager"}, "path": ".pre-commit-config.yaml", "diffHunk": "@@ -47,7 +47,6 @@ repos:\n         language: docker_image\n         entry: koalaman/shellcheck:v0.7.1\n         files: \".sh\"\n-        args: [\"--exclude=SC1004,SC1008,SC1009,SC1047,SC1050,SC1062,SC1071,SC1072,SC1090,SC1091,SC1105,SC1107,SC1123,SC1124,SC1126,SC2001,SC2002,SC2003,SC2004,SC2005,SC2006,SC2007,SC2009,SC2034,SC2035,SC2039,SC2155,SC2164,SC2181,SC2186,SC2196,SC2197,SC2230\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743c020de8282a393394b934431f8ff5d5233582"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwMDUxMQ==", "bodyText": "Same here, except for DL3008 and DL3018, which I don't find very useful.", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444500511", "createdAt": "2020-06-23T20:53:07Z", "author": {"login": "mschwager"}, "path": ".pre-commit-config.yaml", "diffHunk": "@@ -56,4 +55,4 @@ repos:\n         language: docker_image\n         files: \"Dockerfile\"\n         entry: hadolint/hadolint:v1.18.0 hadolint\n-        args: [\"--ignore\", \"DL3008\", \"--ignore\", \"DL3010\", \"--ignore\", \"DL3012\", \"--ignore\", \"DL3018\", \"--ignore\", \"DL3020\", \"--ignore\", \"DL3022\", \"--ignore\", \"DL3027\", \"--ignore\", \"DL4001\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743c020de8282a393394b934431f8ff5d5233582"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTY2MTIy", "url": "https://github.com/returntocorp/semgrep/pull/1111#pullrequestreview-436166122", "createdAt": "2020-06-23T21:19:18Z", "commit": {"oid": "a56912241b5826a84f42d2bfeafd91eb6e2958d1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMToxOToxOFrOGn7CHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMToxOTozNFrOGn7Ciw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUxNDg0Nw==", "bodyText": "The pre-commit GHA now includes caching built in \ud83d\udc4d\npre-commit/action#31", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444514847", "createdAt": "2020-06-23T21:19:18Z", "author": {"login": "mschwager"}, "path": ".github/workflows/lint.yml", "diffHunk": "@@ -10,13 +10,7 @@ jobs:\n     steps:\n     - uses: actions/checkout@v2\n     - uses: actions/setup-python@v1\n-    - name: set PY", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a56912241b5826a84f42d2bfeafd91eb6e2958d1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUxNDk1NQ==", "bodyText": "We don't have a requirements.txt file in this repository.", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444514955", "createdAt": "2020-06-23T21:19:34Z", "author": {"login": "mschwager"}, "path": ".pre-commit-config.yaml", "diffHunk": "@@ -15,7 +15,6 @@ repos:\n       - id: check-executables-have-shebangs\n       - id: check-merge-conflict\n       - id: check-symlinks\n-      - id: requirements-txt-fixer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a56912241b5826a84f42d2bfeafd91eb6e2958d1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06822909a9da1de9b0169aba2dcbb3e712eb4336", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/06822909a9da1de9b0169aba2dcbb3e712eb4336", "committedDate": "2020-06-24T14:23:40Z", "message": "More Bento and pre-commit cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41f1f2bd792091fdb5d821ea82a5ee642e3c610c", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/41f1f2bd792091fdb5d821ea82a5ee642e3c610c", "committedDate": "2020-06-24T14:23:40Z", "message": "Use pre-commit GHA v2.0.0 which includes automatic caching"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41623f2c8fd284a5ea33a11d44ad06c7aa244f8b", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/41623f2c8fd284a5ea33a11d44ad06c7aa244f8b", "committedDate": "2020-06-24T14:23:40Z", "message": "Remove pre-commit requirements.txt checker, we have no requirements.txt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a117476351cc2d4b256ba5c50078d8f34271a8", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/55a117476351cc2d4b256ba5c50078d8f34271a8", "committedDate": "2020-06-24T14:35:27Z", "message": "Use relative import in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a56912241b5826a84f42d2bfeafd91eb6e2958d1", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/a56912241b5826a84f42d2bfeafd91eb6e2958d1", "committedDate": "2020-06-23T21:17:38Z", "message": "Remove pre-commit requirements.txt checker, we have no requirements.txt"}, "afterCommit": {"oid": "55a117476351cc2d4b256ba5c50078d8f34271a8", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/55a117476351cc2d4b256ba5c50078d8f34271a8", "committedDate": "2020-06-24T14:35:27Z", "message": "Use relative import in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d284f7fc18b32f7d56843952b82184d5f58741b", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3d284f7fc18b32f7d56843952b82184d5f58741b", "committedDate": "2020-06-24T14:40:16Z", "message": "Add __init__ files so we can do relative imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzE4ODMy", "url": "https://github.com/returntocorp/semgrep/pull/1111#pullrequestreview-436718832", "createdAt": "2020-06-24T14:44:38Z", "commit": {"oid": "3d284f7fc18b32f7d56843952b82184d5f58741b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo0NDozOFrOGoVejA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo0NDozOFrOGoVejA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk0ODEwOA==", "bodyText": "Instead of monkeypatching PYTHONPATH to do importing here and running tests we should use proper Python modules and do relative imports. Hopefully this can also be a step toward avoiding subprocess and simply calling the semgrep_main functionality we need directly \ud83d\udc4d", "url": "https://github.com/returntocorp/semgrep/pull/1111#discussion_r444948108", "createdAt": "2020-06-24T14:44:38Z", "author": {"login": "mschwager"}, "path": "semgrep/tests/e2e/test_rule_parser.py", "diffHunk": "@@ -2,7 +2,8 @@\n from subprocess import CalledProcessError\n \n import pytest\n-from tests.conftest import TESTS_PATH\n+\n+from ..conftest import TESTS_PATH", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d284f7fc18b32f7d56843952b82184d5f58741b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1426, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}