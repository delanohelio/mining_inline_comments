{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NDQ4NjA4", "number": 1090, "title": "Convert parse errors from SemgrepCore into SemgrepError", "bodyText": "I also added functionality to control which exceptions will always cause a non-zero status code, and which will only be an error when --strict is set.", "createdAt": "2020-06-20T19:02:46Z", "url": "https://github.com/returntocorp/semgrep/pull/1090", "merged": true, "mergeCommit": {"oid": "4636916d8de6b96f0e0f111136a3cbdd0fc14353"}, "closed": true, "closedAt": "2020-07-02T16:13:21Z", "author": {"login": "rcoh"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctMtuqgBqjM0NjQ5NDIxNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw0cJJgH2gAyNDM3NDQ4NjA4OmQyY2Y4N2IwY2YxNWY0OTg3ODJhOTM3ODUzMjhkZDIzNGY3MzgxY2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "220b15805a63c8b8fc3c0e892629e7c6f86f4659", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/220b15805a63c8b8fc3c0e892629e7c6f86f4659", "committedDate": "2020-06-20T18:58:56Z", "message": "Convert parse errors from SemgrepCore into SemgrepError"}, "afterCommit": {"oid": "6235fed0f298cb5a58512e5b5d803e3977cf954c", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6235fed0f298cb5a58512e5b5d803e3977cf954c", "committedDate": "2020-06-20T19:21:19Z", "message": "Convert parse errors from SemgrepCore into SemgrepError"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTg2ODM2", "url": "https://github.com/returntocorp/semgrep/pull/1090#pullrequestreview-436186836", "createdAt": "2020-06-23T21:55:51Z", "commit": {"oid": "6235fed0f298cb5a58512e5b5d803e3977cf954c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NTo1MVrOGn8CUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1OTozNlrOGn8IFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMTI4Mg==", "bodyText": "IMO shouldnt be the job of CoreRunner to know about output handling. It should run semgrep-core and return the findings, and errors and let the caller handle how that is output.", "url": "https://github.com/returntocorp/semgrep/pull/1090#discussion_r444531282", "createdAt": "2020-06-23T21:55:51Z", "author": {"login": "brendongo"}, "path": "semgrep/semgrep/core_runner.py", "diffHunk": "@@ -117,9 +122,10 @@ class CoreRunner:\n         This includes properly invoking semgrep-core and parsing the output\n     \"\"\"\n \n-    def __init__(self, allow_exec: bool, jobs: int):\n+    def __init__(self, allow_exec: bool, jobs: int, output_handler: OutputHandler):\n         self._allow_exec = allow_exec\n         self._jobs = jobs\n+        self._output_handler = output_handler", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6235fed0f298cb5a58512e5b5d803e3977cf954c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMjc1Nw==", "bodyText": "Why was this test removed?", "url": "https://github.com/returntocorp/semgrep/pull/1090#discussion_r444532757", "createdAt": "2020-06-23T21:59:36Z", "author": {"login": "brendongo"}, "path": "semgrep/tests/e2e/test_semgrep_core_parse_error.py", "diffHunk": "@@ -15,23 +15,3 @@ def test_rule_parser__failure__error_messages(run_semgrep_in_tmp, snapshot, file\n             stderr=True,\n         )\n     snapshot.assert_match(excinfo.value.output, \"error.txt\")\n-\n-\n-@pytest.mark.parametrize(\n-    \"filename\", [\"invalid_python.py\",],\n-)\n-def test_rule_parser__failure__error_messages_verbose(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6235fed0f298cb5a58512e5b5d803e3977cf954c"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6235fed0f298cb5a58512e5b5d803e3977cf954c", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6235fed0f298cb5a58512e5b5d803e3977cf954c", "committedDate": "2020-06-20T19:21:19Z", "message": "Convert parse errors from SemgrepCore into SemgrepError"}, "afterCommit": {"oid": "a93866f72feefae6c63fb7fdf327afd9f4069262", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/a93866f72feefae6c63fb7fdf327afd9f4069262", "committedDate": "2020-06-27T18:17:18Z", "message": "Refactorings after resolving merge conflicts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a93866f72feefae6c63fb7fdf327afd9f4069262", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/a93866f72feefae6c63fb7fdf327afd9f4069262", "committedDate": "2020-06-27T18:17:18Z", "message": "Refactorings after resolving merge conflicts"}, "afterCommit": {"oid": "490fe7b10df36f0f4f78f3494793b68480d0d91c", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/490fe7b10df36f0f4f78f3494793b68480d0d91c", "committedDate": "2020-06-27T18:37:27Z", "message": "Refactorings after resolving merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjQyNDU1", "url": "https://github.com/returntocorp/semgrep/pull/1090#pullrequestreview-441242455", "createdAt": "2020-07-01T22:46:45Z", "commit": {"oid": "d3766d126958ce40696bbfce1d1eb290a7c196ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47fa98a4cea0a66f0499b596c675bef51d3b1fcb", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/47fa98a4cea0a66f0499b596c675bef51d3b1fcb", "committedDate": "2020-07-01T23:38:02Z", "message": "Convert parse errors from SemgrepCore into SemgrepError"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23666b944304c12a3f1d7d5e92a87f8949a39730", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/23666b944304c12a3f1d7d5e92a87f8949a39730", "committedDate": "2020-07-01T23:38:02Z", "message": "Refactorings after resolving merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ef540077ad5baa0d9a15a08da4c77964a0aa8a6", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/2ef540077ad5baa0d9a15a08da4c77964a0aa8a6", "committedDate": "2020-07-01T23:38:02Z", "message": "Refactorings after resolving merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da02592b55069c62ca524b36f04eea3bdcd15930", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/da02592b55069c62ca524b36f04eea3bdcd15930", "committedDate": "2020-07-01T23:38:02Z", "message": "Fix imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a11cecdcc6baed1a56f48a56d228c7af235cf75e", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/a11cecdcc6baed1a56f48a56d228c7af235cf75e", "committedDate": "2020-07-01T23:38:02Z", "message": "Add nosem"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3766d126958ce40696bbfce1d1eb290a7c196ad", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/d3766d126958ce40696bbfce1d1eb290a7c196ad", "committedDate": "2020-06-27T19:06:14Z", "message": "Add nosem"}, "afterCommit": {"oid": "a11cecdcc6baed1a56f48a56d228c7af235cf75e", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/a11cecdcc6baed1a56f48a56d228c7af235cf75e", "committedDate": "2020-07-01T23:38:02Z", "message": "Add nosem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2cf87b0cf15f498782a93785328dd234f7381cd", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/d2cf87b0cf15f498782a93785328dd234f7381cd", "committedDate": "2020-07-02T01:20:15Z", "message": "Merge branch 'develop' into russell/unified-errors"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1409, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}