{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMTA2OTI3", "number": 2074, "title": "Allow ignoring findings with // nosemgrep", "bodyText": "The original keyword, nosem, isn't very easy to Google or understand if\nyou aren't yet aware of Semgrep.\nFor backwards compatibility, this commit doesn't remove the 'nosem'\nkeyword.\nThis change was tested by adding more lines to the basic/nosem.py test\ntarget and manually reading through the updated snapshots.", "createdAt": "2020-11-18T11:11:04Z", "url": "https://github.com/returntocorp/semgrep/pull/2074", "merged": true, "mergeCommit": {"oid": "275e0d500a026b3281d2030161a9fab0bf0ad880"}, "closed": true, "closedAt": "2020-12-09T14:15:28Z", "author": {"login": "underyx"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddsOrvAFqTUzMzM0MDAwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkNmOzABqjQwODU5MTY3ODE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMzQwMDAy", "url": "https://github.com/returntocorp/semgrep/pull/2074#pullrequestreview-533340002", "createdAt": "2020-11-18T11:12:53Z", "commit": {"oid": "ffeb58d2fe838acf2d32b0361cd4c038ac856c65"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMToxMjo1M1rOH1oyYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMToxMjo1M1rOH1oyYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAwNDgzMg==", "bodyText": "", "url": "https://github.com/returntocorp/semgrep/pull/2074#discussion_r526004832", "createdAt": "2020-11-18T11:12:53Z", "author": {"login": "underyx"}, "path": "semgrep/tests/e2e/targets/basic/nosem.py", "diffHunk": "@@ -1,2 +1,6 @@\n test_nosem_func()  # nosem: rules.test-nosem\n+test_nosem_func()  # NOSEM: rules.test-nosem\n+test_nosem_func()  # nosemgrep: rules.test-nosem\n+test_nosem_func()  # NOSEMGREP\n+test_nosem_func()  # nOseMgREP: rules.test-nosem", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffeb58d2fe838acf2d32b0361cd4c038ac856c65"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNTg0NDQ4", "url": "https://github.com/returntocorp/semgrep/pull/2074#pullrequestreview-533584448", "createdAt": "2020-11-18T15:48:22Z", "commit": {"oid": "ffeb58d2fe838acf2d32b0361cd4c038ac856c65"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo0ODoyM1rOH10TGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo0ODoyM1rOH10TGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5MzQzMg==", "bodyText": "Could make the user experience much less (potentially) frustrating by being more forgiving of whitespace here.\nWithout this change then //nosem:  some-rule-id (two spaces there) will be treated as just // nosem.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                r\" nosem(?:grep)?(?::[\\s]?(?P<ids>([^,\\s](?:[,\\s]+)?)+))?\",\n          \n          \n            \n                r\" nosem(?:grep)?(?::[\\s]*(?P<ids>([^,\\s](?:[,\\s]+)?)+))?\",", "url": "https://github.com/returntocorp/semgrep/pull/2074#discussion_r526193432", "createdAt": "2020-11-18T15:48:23Z", "author": {"login": "msorens"}, "path": "semgrep/semgrep/constants.py", "diffHunk": "@@ -46,17 +46,18 @@ def is_json(self) -> bool:\n NOSEM_INLINE_RE = re.compile(\n     # We're looking for items that look like this:\n     # ' nosem'\n-    # ' nosem: example-pattern-id'\n+    # ' nosemgrep: example-pattern-id'\n     # ' nosem: pattern-id1,pattern-id2'\n-    # ' NOSEM:pattern-id1,pattern-id2'\n+    # ' NOSEMGREP:pattern-id1,pattern-id2'\n     #\n     # * We do not want to capture the ': ' that follows 'nosem'\n     # * We do not care about the casing of 'nosem'\n     # * We want a comma-separated list of ids\n     # * We want multi-language support, so we cannot strictly look for\n     #   Python comments that begin with '# '\n+    # * nosem and nosemgrep should be interchangeable\n     #\n-    r\" nosem(?::[\\s]?(?P<ids>([^,\\s](?:[,\\s]+)?)+))?\",\n+    r\" nosem(?:grep)?(?::[\\s]?(?P<ids>([^,\\s](?:[,\\s]+)?)+))?\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffeb58d2fe838acf2d32b0361cd4c038ac856c65"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNzczNzY4", "url": "https://github.com/returntocorp/semgrep/pull/2074#pullrequestreview-533773768", "createdAt": "2020-11-18T18:51:53Z", "commit": {"oid": "52919b6d788ccf69ac69e038928cca0ca73fa64a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTAwMjky", "url": "https://github.com/returntocorp/semgrep/pull/2074#pullrequestreview-544500292", "createdAt": "2020-12-03T22:19:26Z", "commit": {"oid": "52919b6d788ccf69ac69e038928cca0ca73fa64a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370dd76d5420f79c79f48e264aa05defde915a72", "author": {"user": {"login": "underyx", "name": "Bence Nagy"}}, "url": "https://github.com/returntocorp/semgrep/commit/370dd76d5420f79c79f48e264aa05defde915a72", "committedDate": "2020-12-08T17:28:31Z", "message": "Allow ignoring findings with // nosemgrep\n\nThe original keyword, nosem, isn't very easy to Google or understand if\nyou aren't yet aware of Semgrep.\n\nFor backwards compatibility, this commit doesn't remove the 'nosem'\nkeyword.\n\nThis change was tested by adding more lines to the basic/nosem.py test\ntarget and manually reading through the updated snapshots."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52919b6d788ccf69ac69e038928cca0ca73fa64a", "author": {"user": {"login": "underyx", "name": "Bence Nagy"}}, "url": "https://github.com/returntocorp/semgrep/commit/52919b6d788ccf69ac69e038928cca0ca73fa64a", "committedDate": "2020-11-18T17:58:33Z", "message": "Allow arbitrary spacing after nosem keywords\n\nCo-authored-by: Michael Sorens <msorens@chef.io>"}, "afterCommit": {"oid": "370dd76d5420f79c79f48e264aa05defde915a72", "author": {"user": {"login": "underyx", "name": "Bence Nagy"}}, "url": "https://github.com/returntocorp/semgrep/commit/370dd76d5420f79c79f48e264aa05defde915a72", "committedDate": "2020-12-08T17:28:31Z", "message": "Allow ignoring findings with // nosemgrep\n\nThe original keyword, nosem, isn't very easy to Google or understand if\nyou aren't yet aware of Semgrep.\n\nFor backwards compatibility, this commit doesn't remove the 'nosem'\nkeyword.\n\nThis change was tested by adding more lines to the basic/nosem.py test\ntarget and manually reading through the updated snapshots."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 861, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}