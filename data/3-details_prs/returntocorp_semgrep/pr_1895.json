{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzA4ODc4", "number": 1895, "title": "Can specify config without full url", "bodyText": "Allow user to specify registry path without having to add semgrep.dev url\ni.e.: instead of --config https://semgrep.dev/p/r2c-ci users can use --config p/r2c-ci\nAllow user to specify snippet id withouth having to add semgrep.dev url\ni.e.: instead of --config https://semgrep.dev/s/username:snippetname\nusers can use --config username:snippetname", "createdAt": "2020-10-26T21:07:55Z", "url": "https://github.com/returntocorp/semgrep/pull/1895", "merged": true, "mergeCommit": {"oid": "7b9e34eaf0fc94b4281248203f5ac039d0ed8952"}, "closed": true, "closedAt": "2020-10-26T22:21:50Z", "author": {"login": "brendongo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWa7qUAH2gAyNTEwMzA4ODc4OjI3MGY0MmFlYjFjMjcyM2MzYTNjZGQxNzEyNjYwYzExYmY4NDE4YzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWbjhGAH2gAyNTEwMzA4ODc4OmM2M2M2ZWJlNjgxOTYyY2MzNGEwODkxNDc0MzNmZjk3NGE5YzI5N2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "270f42aeb1c2723c3a3cdd1712660c11bf8418c2", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/270f42aeb1c2723c3a3cdd1712660c11bf8418c2", "committedDate": "2020-10-26T21:06:16Z", "message": "Can specify config without full url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7049971c7a8dd1bc9c84327970484de733aa5e03", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/7049971c7a8dd1bc9c84327970484de733aa5e03", "committedDate": "2020-10-26T21:08:52Z", "message": "fixup! Can specify config without full url"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTk3NjYx", "url": "https://github.com/returntocorp/semgrep/pull/1895#pullrequestreview-517197661", "createdAt": "2020-10-26T21:41:56Z", "commit": {"oid": "7049971c7a8dd1bc9c84327970484de733aa5e03"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMTo0MTo1NlrOHojfwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMTo0MjozN1rOHojhAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI4NjY1Nw==", "bodyText": "can this use registry_id_to_url(f\"s/...\")?", "url": "https://github.com/returntocorp/semgrep/pull/1895#discussion_r512286657", "createdAt": "2020-10-26T21:41:56Z", "author": {"login": "DrewDennison"}, "path": "semgrep/semgrep/config_resolver.py", "diffHunk": "@@ -389,13 +389,46 @@ def download_config(config_url: str) -> Dict[str, YamlTree]:\n     return None\n \n \n+def is_registry_id(config_str: str) -> bool:\n+    \"\"\"\n+        Starts with r/, p/, s/ for registry, pack, and snippet respectively\n+    \"\"\"\n+    return config_str[:2] in {\"r/\", \"p/\", \"s/\"}\n+\n+\n+def is_saved_snippet(config_str: str) -> bool:\n+    \"\"\"\n+        config_str is saved snippet which has format username:snippetname\n+    \"\"\"\n+    return len(config_str.split(\":\")) == 2\n+\n+\n+def registry_id_to_url(registry_id: str) -> str:\n+    \"\"\"\n+        Convert from registry_id to semgrep.dev url\n+    \"\"\"\n+    return f\"https://semgrep.dev/{registry_id}\"\n+\n+\n+def saved_snippet_to_url(snippet_id: str) -> str:\n+    \"\"\"\n+        Convert from username:snippetname to semgrep.dev url\n+    \"\"\"\n+    username, snippetname = snippet_id.split(\":\")\n+    return f\"https://semgrep.dev/s/{username}/{snippetname}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7049971c7a8dd1bc9c84327970484de733aa5e03"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI4Njk3Ng==", "bodyText": "can we use from semgrep.constants import SEMGREP_URL?", "url": "https://github.com/returntocorp/semgrep/pull/1895#discussion_r512286976", "createdAt": "2020-10-26T21:42:37Z", "author": {"login": "DrewDennison"}, "path": "semgrep/semgrep/config_resolver.py", "diffHunk": "@@ -389,13 +389,46 @@ def download_config(config_url: str) -> Dict[str, YamlTree]:\n     return None\n \n \n+def is_registry_id(config_str: str) -> bool:\n+    \"\"\"\n+        Starts with r/, p/, s/ for registry, pack, and snippet respectively\n+    \"\"\"\n+    return config_str[:2] in {\"r/\", \"p/\", \"s/\"}\n+\n+\n+def is_saved_snippet(config_str: str) -> bool:\n+    \"\"\"\n+        config_str is saved snippet which has format username:snippetname\n+    \"\"\"\n+    return len(config_str.split(\":\")) == 2\n+\n+\n+def registry_id_to_url(registry_id: str) -> str:\n+    \"\"\"\n+        Convert from registry_id to semgrep.dev url\n+    \"\"\"\n+    return f\"https://semgrep.dev/{registry_id}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7049971c7a8dd1bc9c84327970484de733aa5e03"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c63c6ebe681962cc34a089147433ff974a9c297f", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/c63c6ebe681962cc34a089147433ff974a9c297f", "committedDate": "2020-10-26T21:49:48Z", "message": "fixup! fixup! Can specify config without full url"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1211, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}