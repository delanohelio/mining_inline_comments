{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwOTA4NjY5", "number": 610, "title": "Add  flag for specifying number of subprocesses to use to run checks in parallel", "bodyText": "Adding Python support for #594.", "createdAt": "2020-04-29T19:29:42Z", "url": "https://github.com/returntocorp/semgrep/pull/610", "merged": true, "mergeCommit": {"oid": "21337bb96ed73a1d5bf7ff134b598f47d257734f"}, "closed": true, "closedAt": "2020-05-03T07:44:22Z", "author": {"login": "mschwager"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcceCtCAFqTQwMjk5MTIyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdlttZAH2gAyNDEwOTA4NjY5OjZjY2YwMTRlODU5ZjFiZjc0OGZjZDk0YmQyNTY0ZWJjZGU3MzdjM2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTkxMjI1", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-402991225", "createdAt": "2020-04-29T19:56:04Z", "commit": {"oid": "8b8816f9bc429b7a7cef817e1ebfb9f6aa901cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDA0Njky", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-403004692", "createdAt": "2020-04-29T20:15:35Z", "commit": {"oid": "8b8816f9bc429b7a7cef817e1ebfb9f6aa901cb5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDoxNTozNlrOGOPUSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDoxNTozNlrOGOPUSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NDIwMQ==", "bodyText": "Is --cpus more clear?", "url": "https://github.com/returntocorp/semgrep/pull/610#discussion_r417584201", "createdAt": "2020-04-29T20:15:36Z", "author": {"login": "brendongo"}, "path": "semgrep/semgrep/cli.py", "diffHunk": "@@ -81,6 +82,14 @@ def cli() -> None:\n         action=\"store_true\",\n     )\n     config.add_argument(\"--precommit\", help=argparse.SUPPRESS, action=\"store_true\")\n+    config.add_argument(\n+        \"-j\",\n+        \"--jobs\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b8816f9bc429b7a7cef817e1ebfb9f6aa901cb5"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMjg3NTEy", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-403287512", "createdAt": "2020-04-30T07:59:22Z", "commit": {"oid": "bc0c6e189a2fbeab1402073a8a287f27e3a5ed65"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNzo1OToyMlrOGOeFbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNzo1OTo0MVrOGOeGGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgyNjE1OQ==", "bodyText": "thx!\nI wanted to add it but was waiting for it being supported in the python wrapper.", "url": "https://github.com/returntocorp/semgrep/pull/610#discussion_r417826159", "createdAt": "2020-04-30T07:59:22Z", "author": {"login": "aryx"}, "path": "CHANGELOG.md", "diffHunk": "@@ -2,6 +2,11 @@\n \n This project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n \n+## [Unreleased]\n+\n+### Added\n+- The `-j/--jobs` flag for specifying number of subprocesses to use to run checks in parallel.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0c6e189a2fbeab1402073a8a287f27e3a5ed65"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzgyNjMyOQ==", "bodyText": "oops", "url": "https://github.com/returntocorp/semgrep/pull/610#discussion_r417826329", "createdAt": "2020-04-30T07:59:41Z", "author": {"login": "aryx"}, "path": "semgrep-core/bin/main_semgrep_core.ml", "diffHunk": "@@ -109,7 +109,7 @@ let set_gc () =\n   ()\n \n let map f xs =\n-  if !ncores = 1\n+  if !ncores <= 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0c6e189a2fbeab1402073a8a287f27e3a5ed65"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f97c16901b8bfcfdb709ac8d060b78c5d5705305", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/f97c16901b8bfcfdb709ac8d060b78c5d5705305", "committedDate": "2020-04-30T14:59:13Z", "message": "Try exporting env variable here"}, "afterCommit": {"oid": "e4c99358b3d4ef13693aef2e334e1f88356f9d52", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/e4c99358b3d4ef13693aef2e334e1f88356f9d52", "committedDate": "2020-04-30T15:12:51Z", "message": "Try exporting env variable here"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzAzMjg1", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-403703285", "createdAt": "2020-04-30T16:53:01Z", "commit": {"oid": "e23113ac3b382c3771b338cf1b4c12fdaab87649"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3135c6951c2c3f343b9a4578b545de6bd8a6d9d1", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3135c6951c2c3f343b9a4578b545de6bd8a6d9d1", "committedDate": "2020-04-30T19:40:34Z", "message": "Add  flag for specifying number of subprocesses to use to run checks in parallel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac916bb3286194b1da093ba92abdec8e5b45f282", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/ac916bb3286194b1da093ba92abdec8e5b45f282", "committedDate": "2020-04-30T19:40:34Z", "message": "Handle Windows multiprocessing.cpu_count case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fafe77e9851e3e7902eab81e8f07beae051c2dc6", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/fafe77e9851e3e7902eab81e8f07beae051c2dc6", "committedDate": "2020-04-30T19:40:34Z", "message": "Avoid breaking when ncores <= 0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d89178d2d9086dd0f49e73974f172547c5295c8a", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/d89178d2d9086dd0f49e73974f172547c5295c8a", "committedDate": "2020-04-30T19:40:34Z", "message": "Enable OCaml backtraces in CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88c4a67f8425dd1de5634a7495db023c3dc69e3a", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/88c4a67f8425dd1de5634a7495db023c3dc69e3a", "committedDate": "2020-04-30T19:40:34Z", "message": "Install wheel package to avoid error: invalid command 'bdist_wheel'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a87bfc5e188395a806596689a9cc76babb0c3fc", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/0a87bfc5e188395a806596689a9cc76babb0c3fc", "committedDate": "2020-04-30T19:40:34Z", "message": "Try exporting env variable here"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2fe8ee49ac60c86c5742d9cd272fb607608a2b5", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/e2fe8ee49ac60c86c5742d9cd272fb607608a2b5", "committedDate": "2020-04-30T19:40:34Z", "message": "Pass env variable to subprocess"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "012944ad0fab5da1521c36c61aff3f661e91969b", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/012944ad0fab5da1521c36c61aff3f661e91969b", "committedDate": "2020-04-30T19:40:34Z", "message": "Try this"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14700f5d9d106bfc61a995baa10b05c8fde8bb54", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/14700f5d9d106bfc61a995baa10b05c8fde8bb54", "committedDate": "2020-04-30T19:40:34Z", "message": "Add jobs argument to test.py"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2afa9d85c8539d334930ba2ab84cded6b0cbe39c", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/2afa9d85c8539d334930ba2ab84cded6b0cbe39c", "committedDate": "2020-04-30T19:40:34Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e68d458034eeadcb88f776093fe8bbe3e072a98a", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/e68d458034eeadcb88f776093fe8bbe3e072a98a", "committedDate": "2020-04-30T19:40:34Z", "message": "Keep trying"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b61cabcc460331aecf7589a176cc566b9233741", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/2b61cabcc460331aecf7589a176cc566b9233741", "committedDate": "2020-04-30T19:40:34Z", "message": "Another thing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fef595b1a3cad54ae3a20365447ff9eb2520074", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3fef595b1a3cad54ae3a20365447ff9eb2520074", "committedDate": "2020-04-30T19:40:34Z", "message": "Try hard coded CPU count"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7126d6980a7792e1469cf8aad0f6f32aeac632df", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/7126d6980a7792e1469cf8aad0f6f32aeac632df", "committedDate": "2020-04-30T19:37:07Z", "message": "Try hard coded CPU count"}, "afterCommit": {"oid": "3fef595b1a3cad54ae3a20365447ff9eb2520074", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/3fef595b1a3cad54ae3a20365447ff9eb2520074", "committedDate": "2020-04-30T19:40:34Z", "message": "Try hard coded CPU count"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787c93fbc0fad705fb6b6655bc192d5fcd5a2547", "author": {"user": {"login": "mschwager", "name": null}}, "url": "https://github.com/returntocorp/semgrep/commit/787c93fbc0fad705fb6b6655bc192d5fcd5a2547", "committedDate": "2020-04-30T19:49:58Z", "message": "Try chunksize 0 case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ae1fa57efbd6fbf25f0b113e3a659d5abc0e187", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/6ae1fa57efbd6fbf25f0b113e3a659d5abc0e187", "committedDate": "2020-05-03T05:26:37Z", "message": "add OCAMLRUNPARAM='b' to test script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTgzMjIx", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-404583221", "createdAt": "2020-05-03T05:32:32Z", "commit": {"oid": "6ae1fa57efbd6fbf25f0b113e3a659d5abc0e187"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNTozMjozM1rOGPo0aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNTozMjozM1rOGPo0aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA1MDYwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    args.dangerously_allow_arbitrary_code_execution_from_rules, args.jobs\n          \n          \n            \n                    allow_exec=args.dangerously_allow_arbitrary_code_execution_from_rules, jobs=args.jobs", "url": "https://github.com/returntocorp/semgrep/pull/610#discussion_r419050600", "createdAt": "2020-05-03T05:32:33Z", "author": {"login": "DrewDennison"}, "path": "semgrep/semgrep/semgrep_main.py", "diffHunk": "@@ -251,7 +251,7 @@ def main(args: argparse.Namespace) -> Dict[str, Any]:\n \n     # actually invoke semgrep\n     rule_matches_by_rule, semgrep_errors = CoreRunner(\n-        args.dangerously_allow_arbitrary_code_execution_from_rules,\n+        args.dangerously_allow_arbitrary_code_execution_from_rules, args.jobs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ae1fa57efbd6fbf25f0b113e3a659d5abc0e187"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2783a52b7974ece2ee4dfbe83e05bb2a7dd14f9f", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/2783a52b7974ece2ee4dfbe83e05bb2a7dd14f9f", "committedDate": "2020-05-03T05:52:18Z", "message": "Merge branch 'develop' into mschwager-jobs-flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "752c334b04fffaf2adfd5e264c88b459e678087d", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/752c334b04fffaf2adfd5e264c88b459e678087d", "committedDate": "2020-05-03T05:52:59Z", "message": "Update semgrep/semgrep/semgrep_main.py"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d743407aedc3a8fd97f7e17afe3c151520ee5dc", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/5d743407aedc3a8fd97f7e17afe3c151520ee5dc", "committedDate": "2020-05-03T05:56:09Z", "message": "blacken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d32c292ad41dcb879994d0dc300136c264425149", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/d32c292ad41dcb879994d0dc300136c264425149", "committedDate": "2020-05-03T06:29:16Z", "message": "fix division by zero error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc4a4b83052935a7935069bbd52074d2ce995bbd", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/cc4a4b83052935a7935069bbd52074d2ce995bbd", "committedDate": "2020-05-03T06:48:22Z", "message": "let's remove the ocaml stack trace flag since it didn't seem to work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTg5MTM1", "url": "https://github.com/returntocorp/semgrep/pull/610#pullrequestreview-404589135", "createdAt": "2020-05-03T07:19:11Z", "commit": {"oid": "cc4a4b83052935a7935069bbd52074d2ce995bbd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ebbef4cbbbfba061d03683cd575c235395eabf1", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/9ebbef4cbbbfba061d03683cd575c235395eabf1", "committedDate": "2020-05-03T07:25:13Z", "message": "add asserts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ccf014e859f1bf748fcd94bd2564ebcde737c3b", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/6ccf014e859f1bf748fcd94bd2564ebcde737c3b", "committedDate": "2020-05-03T07:26:18Z", "message": "do in 1 line"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1068, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}