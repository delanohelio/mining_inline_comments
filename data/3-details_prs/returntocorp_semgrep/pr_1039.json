{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTUwNzY0", "number": 1039, "title": "Add pretty error for invalid language", "bodyText": "", "createdAt": "2020-06-17T01:35:13Z", "url": "https://github.com/returntocorp/semgrep/pull/1039", "merged": true, "mergeCommit": {"oid": "53622dcc0c1f75ead47293179dfb895738d79135"}, "closed": true, "closedAt": "2020-06-17T20:34:49Z", "author": {"login": "rcoh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsB0cKAFqTQzMjA0MzYyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsPfDvgBqjM0NTUxOTM1MjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDQzNjIy", "url": "https://github.com/returntocorp/semgrep/pull/1039#pullrequestreview-432043622", "createdAt": "2020-06-17T04:05:56Z", "commit": {"oid": "c6cd9eccd8277fa213640b6825008edf4854a7ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNDowNTo1NlrOGk04aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNDowNTo1NlrOGk04aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODMyOQ==", "bodyText": "It might be easier to know what errors are raised by semgrep if we subclass and have an InvalidLanguageError that takes in language and span?", "url": "https://github.com/returntocorp/semgrep/pull/1039#discussion_r441268329", "createdAt": "2020-06-17T04:05:56Z", "author": {"login": "brendongo"}, "path": "semgrep/semgrep/core_runner.py", "diffHunk": "@@ -224,7 +228,18 @@ def _run_rule(\n         for language, all_patterns_for_language in self._group_patterns_by_language(\n             [rule]\n         ).items():\n-            targets = target_manager.get_files(language, rule.includes, rule.excludes)\n+            try:\n+                targets = target_manager.get_files(\n+                    language, rule.includes, rule.excludes\n+                )\n+            except UnknownLanguageError as ex:\n+                raise ErrorWithSpan(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6cd9eccd8277fa213640b6825008edf4854a7ed"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjk3NDE2", "url": "https://github.com/returntocorp/semgrep/pull/1039#pullrequestreview-432697416", "createdAt": "2020-06-17T19:10:37Z", "commit": {"oid": "ce3f73ad8d3b9d52fe2a35a5a5b1033dc74f9f8f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6368b33df9ffafa7cf2a6ab11165ce2077653437", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6368b33df9ffafa7cf2a6ab11165ce2077653437", "committedDate": "2020-06-17T19:54:19Z", "message": "Add pretty error for invalid language"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ebad71e9ef53c38173da272247c81156c74e188", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/5ebad71e9ef53c38173da272247c81156c74e188", "committedDate": "2020-06-17T19:54:19Z", "message": "Switch to subclassing SemgrepError"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67b9e1e42ca813ae36940ec33aa2bbade0c32512", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/67b9e1e42ca813ae36940ec33aa2bbade0c32512", "committedDate": "2020-06-17T19:54:19Z", "message": "Remove unused import"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a4a6c8762a9f37940f4bcbe33e3bc2d4444a501", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/2a4a6c8762a9f37940f4bcbe33e3bc2d4444a501", "committedDate": "2020-06-17T19:12:24Z", "message": "Remove unused import"}, "afterCommit": {"oid": "67b9e1e42ca813ae36940ec33aa2bbade0c32512", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/67b9e1e42ca813ae36940ec33aa2bbade0c32512", "committedDate": "2020-06-17T19:54:19Z", "message": "Remove unused import"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1568, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}