{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NjQ5NjUw", "number": 855, "title": "Benchmark CI Job", "bodyText": "I kept the perf tests very simple intentionally for this PR -- a follow up PR will add a more comprehensive suite / incorporate what Bence has already written. The focus of this PR is to add a benchmark persistence and comparison workflow that:\n\nDownloads the latest benchmark artifact from develop\nRuns the benchmarks\nCompares to the previous run of develop.\nUpload the new benchmark artifact (which now contains 1 more file)\n\nBuilding up a suite of benchmarks in one zip should make longitudinal comparison very straightforward. If it becomes a size problem eventually, we can split it up.", "createdAt": "2020-05-28T18:10:08Z", "url": "https://github.com/returntocorp/semgrep/pull/855", "merged": true, "mergeCommit": {"oid": "9e4589f3225f8f4cd8ac50cb35679ee06d621539"}, "closed": true, "closedAt": "2020-05-29T14:42:05Z", "author": {"login": "rcoh"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclx6z-ABqjMzODQwMzQ1Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl9U9dgFqTQyMDcxMzc2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e351b417d363e3714531e54e4c5eb3ccedcee9b", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/4e351b417d363e3714531e54e4c5eb3ccedcee9b", "committedDate": "2020-05-28T18:09:37Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "efb8dc262b5c3bb00fae71262e2810ab8ccc5a92", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/efb8dc262b5c3bb00fae71262e2810ab8ccc5a92", "committedDate": "2020-05-28T18:10:45Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "efb8dc262b5c3bb00fae71262e2810ab8ccc5a92", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/efb8dc262b5c3bb00fae71262e2810ab8ccc5a92", "committedDate": "2020-05-28T18:10:45Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "7b73e3e5b1cd006943f93cfcca627acae729bea9", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/7b73e3e5b1cd006943f93cfcca627acae729bea9", "committedDate": "2020-05-28T18:15:09Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b73e3e5b1cd006943f93cfcca627acae729bea9", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/7b73e3e5b1cd006943f93cfcca627acae729bea9", "committedDate": "2020-05-28T18:15:09Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "0063533130469caf70e2fa043bb50d474d22e0d6", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/0063533130469caf70e2fa043bb50d474d22e0d6", "committedDate": "2020-05-28T18:17:19Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0063533130469caf70e2fa043bb50d474d22e0d6", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/0063533130469caf70e2fa043bb50d474d22e0d6", "committedDate": "2020-05-28T18:17:19Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "df1d1b7b47e490ecb18174fa46e172c50660c6a8", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/df1d1b7b47e490ecb18174fa46e172c50660c6a8", "committedDate": "2020-05-28T18:18:31Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df1d1b7b47e490ecb18174fa46e172c50660c6a8", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/df1d1b7b47e490ecb18174fa46e172c50660c6a8", "committedDate": "2020-05-28T18:18:31Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "cd44766df2282a1e680efafc176f0ebbce5c7980", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/cd44766df2282a1e680efafc176f0ebbce5c7980", "committedDate": "2020-05-28T18:30:50Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd44766df2282a1e680efafc176f0ebbce5c7980", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/cd44766df2282a1e680efafc176f0ebbce5c7980", "committedDate": "2020-05-28T18:30:50Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "57f99fba6e9c291cbe5aa11b9a7edd285e6933cb", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/57f99fba6e9c291cbe5aa11b9a7edd285e6933cb", "committedDate": "2020-05-28T18:31:51Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "57f99fba6e9c291cbe5aa11b9a7edd285e6933cb", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/57f99fba6e9c291cbe5aa11b9a7edd285e6933cb", "committedDate": "2020-05-28T18:31:51Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "dde51a126c4b5881492da72f25323a8eb042c40b", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/dde51a126c4b5881492da72f25323a8eb042c40b", "committedDate": "2020-05-28T18:44:42Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dde51a126c4b5881492da72f25323a8eb042c40b", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/dde51a126c4b5881492da72f25323a8eb042c40b", "committedDate": "2020-05-28T18:44:42Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "ed89973ea4e28c0b5bd59890925f44be9f724c35", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/ed89973ea4e28c0b5bd59890925f44be9f724c35", "committedDate": "2020-05-28T18:56:22Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed89973ea4e28c0b5bd59890925f44be9f724c35", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/ed89973ea4e28c0b5bd59890925f44be9f724c35", "committedDate": "2020-05-28T18:56:22Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "6b801c64248ff722192a82705a89028d1dee28e9", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6b801c64248ff722192a82705a89028d1dee28e9", "committedDate": "2020-05-28T18:59:34Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b801c64248ff722192a82705a89028d1dee28e9", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6b801c64248ff722192a82705a89028d1dee28e9", "committedDate": "2020-05-28T18:59:34Z", "message": "Setup benchmarking flow"}, "afterCommit": {"oid": "f575c88c84a81894883511d5edb15d2e96cc6192", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/f575c88c84a81894883511d5edb15d2e96cc6192", "committedDate": "2020-05-28T19:22:07Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24bd821974da339ae2b4bd0474aae3f683e6718e", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/24bd821974da339ae2b4bd0474aae3f683e6718e", "committedDate": "2020-05-28T20:04:20Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "79f57df1b41b4107398badcde868361826a2af06", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/79f57df1b41b4107398badcde868361826a2af06", "committedDate": "2020-05-28T20:05:33Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79f57df1b41b4107398badcde868361826a2af06", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/79f57df1b41b4107398badcde868361826a2af06", "committedDate": "2020-05-28T20:05:33Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "bc71e6deb6ee5c3d6ff92bb5a6b1a50a2002cf68", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/bc71e6deb6ee5c3d6ff92bb5a6b1a50a2002cf68", "committedDate": "2020-05-28T20:14:09Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc71e6deb6ee5c3d6ff92bb5a6b1a50a2002cf68", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/bc71e6deb6ee5c3d6ff92bb5a6b1a50a2002cf68", "committedDate": "2020-05-28T20:14:09Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "f50fc7f80d69f970adc4438b26abd98ebdaaa515", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/f50fc7f80d69f970adc4438b26abd98ebdaaa515", "committedDate": "2020-05-28T20:22:56Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f50fc7f80d69f970adc4438b26abd98ebdaaa515", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/f50fc7f80d69f970adc4438b26abd98ebdaaa515", "committedDate": "2020-05-28T20:22:56Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "301fdc5d81dbbea0e3460ea42c5000d6aa624019", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/301fdc5d81dbbea0e3460ea42c5000d6aa624019", "committedDate": "2020-05-28T20:27:07Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "301fdc5d81dbbea0e3460ea42c5000d6aa624019", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/301fdc5d81dbbea0e3460ea42c5000d6aa624019", "committedDate": "2020-05-28T20:27:07Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "e0dd86c2e848d3d1753acda95cdae0ef4cfc3e66", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/e0dd86c2e848d3d1753acda95cdae0ef4cfc3e66", "committedDate": "2020-05-28T20:28:15Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0dd86c2e848d3d1753acda95cdae0ef4cfc3e66", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/e0dd86c2e848d3d1753acda95cdae0ef4cfc3e66", "committedDate": "2020-05-28T20:28:15Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "6ea813eb582a635c7a3fdd2a28f614d064237c2a", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6ea813eb582a635c7a3fdd2a28f614d064237c2a", "committedDate": "2020-05-28T20:35:43Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ea813eb582a635c7a3fdd2a28f614d064237c2a", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/6ea813eb582a635c7a3fdd2a28f614d064237c2a", "committedDate": "2020-05-28T20:35:43Z", "message": "Fix bugs in latest-artifact script"}, "afterCommit": {"oid": "bc74e1c954eb3107cd38337bc3c02b8557a1c54f", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/bc74e1c954eb3107cd38337bc3c02b8557a1c54f", "committedDate": "2020-05-28T20:38:55Z", "message": "Fix bugs in latest-artifact script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57baf8ab5b73eef6fe78f52a6a58b72e15c0301e", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/57baf8ab5b73eef6fe78f52a6a58b72e15c0301e", "committedDate": "2020-05-28T20:52:14Z", "message": "Setup benchmarking flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf99dafc8720d9df9762fce51dcf7705b378d50f", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/cf99dafc8720d9df9762fce51dcf7705b378d50f", "committedDate": "2020-05-28T20:42:32Z", "message": "Delete sleep to test that the benchmarks get faster"}, "afterCommit": {"oid": "57baf8ab5b73eef6fe78f52a6a58b72e15c0301e", "author": {"user": {"login": "rcoh", "name": "Russell Cohen"}}, "url": "https://github.com/returntocorp/semgrep/commit/57baf8ab5b73eef6fe78f52a6a58b72e15c0301e", "committedDate": "2020-05-28T20:52:14Z", "message": "Setup benchmarking flow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjA2ODE2", "url": "https://github.com/returntocorp/semgrep/pull/855#pullrequestreview-420606816", "createdAt": "2020-05-29T02:05:58Z", "commit": {"oid": "57baf8ab5b73eef6fe78f52a6a58b72e15c0301e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjowNTo1OFrOGcMe-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjowNTo1OFrOGcMe-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxNzg1MQ==", "bodyText": "REBUILD_SEMGREP_CORE might be more helpful", "url": "https://github.com/returntocorp/semgrep/pull/855#discussion_r432217851", "createdAt": "2020-05-29T02:05:58Z", "author": {"login": "brendongo"}, "path": ".github/workflows/benchmark.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+on:\n+  push:\n+    # Sequence of patterns matched against refs/tags\n+    branches:\n+      - \"develop\"\n+      - \"master\"\n+    tags:\n+      - \"v*\" # Push events to matching v*, i.e. v1.0, v20.15.10\n+\n+name: Incorporate Benchmark Data\n+jobs:\n+  benchmark-persist:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Setup Python\n+        uses: actions/setup-python@v1\n+        with:\n+          python-version: 3.7\n+        # TODO: once the job is working, build semgrep-core from source\n+      - name: Install semgrep-core from develop\n+        run: sudo -E ./install-scripts/latest-artifact-for-branch.py\n+        env:\n+          SEMGREP_CORE: \"y\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57baf8ab5b73eef6fe78f52a6a58b72e15c0301e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNzEzNzY3", "url": "https://github.com/returntocorp/semgrep/pull/855#pullrequestreview-420713767", "createdAt": "2020-05-29T07:28:24Z", "commit": {"oid": "57baf8ab5b73eef6fe78f52a6a58b72e15c0301e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1600, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}