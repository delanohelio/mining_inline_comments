{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NDYwNTY2", "number": 1034, "title": "output: ParseErrors less scary looking", "bodyText": "Aggregate ParseError output and only show all parse errors when\nverbose flag is on.", "createdAt": "2020-06-16T20:52:42Z", "url": "https://github.com/returntocorp/semgrep/pull/1034", "merged": true, "mergeCommit": {"oid": "bca21d8cfe7a01a4adc78071797bf5ddd8a5d51b"}, "closed": true, "closedAt": "2020-06-17T05:00:02Z", "author": {"login": "brendongo"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr8ieRgH2gAyNDM1NDYwNTY2OjQ4ODBkNzY3Nzg0OGYyMzBhYjhlNjZhYWIzN2I0MDVmOTc5NTU1NmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsCP85gBqjM0NTE3ODQwMjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4880d7677848f230ab8e66aab37b405f9795556d", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/4880d7677848f230ab8e66aab37b405f9795556d", "committedDate": "2020-06-16T21:56:47Z", "message": "output: ParseErrors less scary looking\n\nAggregate ParseError output and only show all parse errors when\nverbose flag is on."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "committedDate": "2020-06-16T21:57:17Z", "message": "Add to changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "facb91fd02eac50045a944703cc6b4fa7132c127", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/facb91fd02eac50045a944703cc6b4fa7132c127", "committedDate": "2020-06-16T20:55:50Z", "message": "Add to changelog"}, "afterCommit": {"oid": "279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "committedDate": "2020-06-16T21:57:17Z", "message": "Add to changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d812a9429f53bf0b26fe0e9d63803f34fa4bcef2", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/d812a9429f53bf0b26fe0e9d63803f34fa4bcef2", "committedDate": "2020-06-16T22:34:58Z", "message": "Tell user about --strict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed3544d62287d74d5dbed8bff67073bbc395cc6f", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/ed3544d62287d74d5dbed8bff67073bbc395cc6f", "committedDate": "2020-06-16T23:28:45Z", "message": "fixup! output: ParseErrors less scary looking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "066bf382bb4e89bb5f7a84d70a7927f1642038c3", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/066bf382bb4e89bb5f7a84d70a7927f1642038c3", "committedDate": "2020-06-16T23:51:20Z", "message": "fixup! output: ParseErrors less scary looking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxOTcxOTQ5", "url": "https://github.com/returntocorp/semgrep/pull/1034#pullrequestreview-431971949", "createdAt": "2020-06-17T00:06:19Z", "commit": {"oid": "066bf382bb4e89bb5f7a84d70a7927f1642038c3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMDowNjoxOVrOGkxMeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMDowNjoxOVrOGkxMeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIwNzkzMA==", "bodyText": "nit: file(s) if we're not doing plural/singular logic", "url": "https://github.com/returntocorp/semgrep/pull/1034#discussion_r441207930", "createdAt": "2020-06-17T00:06:19Z", "author": {"login": "dlukeomalley"}, "path": "semgrep/semgrep/output.py", "diffHunk": "@@ -247,9 +250,32 @@ def handle_semgrep_core_errors(self, semgrep_errors: List[Dict[str, Any]]) -> No\n         \"\"\"\n         self.semgrep_core_errors += semgrep_errors\n         if self.settings.output_format == OutputFormat.TEXT:\n-            for error in semgrep_errors:\n+            parse_errors, other_errors = partition(\n+                lambda e: e[\"check_id\"] == \"ParseError\", semgrep_errors\n+            )\n+\n+            for error in other_errors:\n                 print_error(pretty_error(error))\n \n+            if len(parse_errors) > 0:\n+                files_with_parse_errors: Set[str] = set(\n+                    e.get(\"path\") for e in parse_errors if \"path\" in e\n+                )\n+\n+                print_error(\n+                    f\"{len(files_with_parse_errors)} files failed to parse: {', '.join(files_with_parse_errors)}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "066bf382bb4e89bb5f7a84d70a7927f1642038c3"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "committedDate": "2020-06-17T04:35:49Z", "message": "fixup! output: ParseErrors less scary looking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8db840e28d09cec8eb3069e710f22aa57c9458dd", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/8db840e28d09cec8eb3069e710f22aa57c9458dd", "committedDate": "2020-06-17T04:07:40Z", "message": "fixup! output: ParseErrors less scary looking"}, "afterCommit": {"oid": "b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "author": {"user": {"login": "brendongo", "name": "Brendon Go"}}, "url": "https://github.com/returntocorp/semgrep/commit/b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "committedDate": "2020-06-17T04:35:49Z", "message": "fixup! output: ParseErrors less scary looking"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1566, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}