{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMTMwNjcw", "number": 2151, "title": "Basic support for metavariable matching multiple arguments in JS", "bodyText": "Fixes #2150\nThere is probably more work after.\ntest plan:\nsee include files\nmake test", "createdAt": "2020-12-02T16:19:16Z", "url": "https://github.com/returntocorp/semgrep/pull/2151", "merged": true, "mergeCommit": {"oid": "f42cebe31fc8d72f9e7d3c6ad09b23434f8fdf9d"}, "closed": true, "closedAt": "2020-12-03T08:43:27Z", "author": {"login": "aryx"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiQ_5YAH2gAyNTMxMTMwNjcwOjEyNDQzMTIwMTQxMTRkMDRjNTU3OGNlYTg2N2E2MGFmNjYwNjk3ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiRRMzAFqTU0MzAyNDMxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1244312014114d04c5578cea867a60af660697ee", "author": {"user": {"login": "aryx", "name": "Yoann Padioleau"}}, "url": "https://github.com/returntocorp/semgrep/commit/1244312014114d04c5578cea867a60af660697ee", "committedDate": "2020-12-02T16:18:56Z", "message": "Basic support for metavariable matching multiple arguments in JS\n\nFixes https://github.com/returntocorp/semgrep/issues/2150\nThere is probably more work after.\n\ntest plan:\nsee include files\nmake test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDIxMDM0", "url": "https://github.com/returntocorp/semgrep/pull/2151#pullrequestreview-543021034", "createdAt": "2020-12-02T16:34:30Z", "commit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNDozMFrOH9jtdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNDozMFrOH9jtdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMDI2MQ==", "bodyText": "My intuition is that we could match 0 items, but this might lead to weird matching in edge cases...\nI'd expect to be able to match:\nunsafe_api_call($ARGS...)\nto\nunsafe_api_call()\nso I could have an autofix:\nsafe_api_call($ARGS...)\n(I'm not sure how we're imagining performing autofix here, do we need to include the delimiter token inside the match?)", "url": "https://github.com/returntocorp/semgrep/pull/2151#discussion_r534310261", "createdAt": "2020-12-02T16:34:30Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/matching/Generic_vs_generic.ml", "diffHunk": "@@ -1085,6 +1085,19 @@ and m_list__m_argument (xsa: A.argument list) (xsb: A.argument list) =\n   | [A.Arg (A.Ellipsis _i)], [] ->\n       return ()\n \n+  | A.Arg (A.Id ((s, tok), _idinfo))::xsa, xb::xsb\n+    when MV.is_metavar_ellipsis s ->\n+      (* can match 1 or more arguments (or 0 is ok too?) *)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDI0MDQ4", "url": "https://github.com/returntocorp/semgrep/pull/2151#pullrequestreview-543024048", "createdAt": "2020-12-02T16:37:35Z", "commit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzozNVrOH9j2aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzozNVrOH9j2aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMjU1NQ==", "bodyText": "The more I think about this, the more I think we need to include the delimiter in the match", "url": "https://github.com/returntocorp/semgrep/pull/2151#discussion_r534312555", "createdAt": "2020-12-02T16:37:35Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/matching/Matching_generic.mli", "diffHunk": "@@ -62,6 +62,7 @@ val check_and_add_metavar_binding :\n (*s: signature [[Matching_generic.has_ellipsis_stmts]] *)\n val has_ellipsis_stmts : AST_generic.stmt list -> bool\n (*e: signature [[Matching_generic.has_ellipsis_stmts]] *)\n+val inits_and_rest_of_list: 'a list -> ('a list * 'a list) list", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDI0MzE3", "url": "https://github.com/returntocorp/semgrep/pull/2151#pullrequestreview-543024317", "createdAt": "2020-12-02T16:37:50Z", "commit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 889, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}