{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NDA5OTIx", "number": 302, "title": "error json + reports stats on number of files processed", "bodyText": "There were some bugs where errors weren't coming through in the json output. Now they do! Useful for sgrep.live, cc @DrewDennison --json will now put output into an errors key that we can actually use to highlight ranges in the intput source code\nI removed error filtering in sgrep-core so that it can happen in sgrep.py later.\ncloses #293", "createdAt": "2020-03-14T19:26:14Z", "url": "https://github.com/returntocorp/semgrep/pull/302", "merged": true, "mergeCommit": {"oid": "415215c153600574246f7a489e68a40390cce122"}, "closed": true, "closedAt": "2020-03-17T00:56:42Z", "author": {"login": "ievans"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNp6npAH2gAyMzg4NDA5OTIxOmFjYmJhMWFmOGVhMTgwYWIxYTFkNGQ5NTg5NDdmYTZkZGMyYmI2ZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOX-DYgFqTM3NTY3NDE0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "acbba1af8ea180ab1a1d4d958947fa6ddc2bb6e1", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/acbba1af8ea180ab1a1d4d958947fa6ddc2bb6e1", "committedDate": "2020-03-14T19:17:14Z", "message": "reports stats on number of files processed, remove error filtering in sgrep-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec9880acb59ce105cf05c6f78585d0039f30e215", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/ec9880acb59ce105cf05c6f78585d0039f30e215", "committedDate": "2020-03-14T19:27:43Z", "message": "black"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d111de47cfecd87932890d26b921ff8bfbb157", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/52d111de47cfecd87932890d26b921ff8bfbb157", "committedDate": "2020-03-14T19:28:14Z", "message": "annotation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzQ4NjQ5", "url": "https://github.com/returntocorp/semgrep/pull/302#pullrequestreview-374748649", "createdAt": "2020-03-14T19:29:44Z", "commit": {"oid": "52d111de47cfecd87932890d26b921ff8bfbb157"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxOToyOTo0NFrOF2bMoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxOToyOTo0NFrOF2bMoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMzAyNQ==", "bodyText": "@aryx I couldn't find an easy way to make the one_pattern also output json. Seems some refactoring of the output logic would be useful to make this work. Difficult because of the stream vs collecting output model between the lint vs not lint approach right now.", "url": "https://github.com/returntocorp/semgrep/pull/302#discussion_r392613025", "createdAt": "2020-03-14T19:29:44Z", "author": {"login": "ievans"}, "path": "sgrep/bin/main_sgrep.ml", "diffHunk": "@@ -423,6 +427,7 @@ let options () =\n     \"-rules_file\", Arg.Set_string rules_file,\n     \" <file> obtain list of patterns from YAML file\";\n \n+    \"-json\", Arg.Set output_format_json, \"output to JSON\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d111de47cfecd87932890d26b921ff8bfbb157"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d0df0bebaf381ad61dde5189fbc9bf50994c3bd", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/6d0df0bebaf381ad61dde5189fbc9bf50994c3bd", "committedDate": "2020-03-14T19:38:54Z", "message": "remove unused flags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2d18a2b2c518f8da73dea0db79e22202fc23bdb", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/b2d18a2b2c518f8da73dea0db79e22202fc23bdb", "committedDate": "2020-03-14T19:48:38Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "691fe3a8627414aaab3e5c6e52ed5919ad8960d5", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/691fe3a8627414aaab3e5c6e52ed5919ad8960d5", "committedDate": "2020-03-14T20:34:40Z", "message": "update tests to include error key"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Njc0MTQz", "url": "https://github.com/returntocorp/semgrep/pull/302#pullrequestreview-375674143", "createdAt": "2020-03-17T00:56:37Z", "commit": {"oid": "691fe3a8627414aaab3e5c6e52ed5919ad8960d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1083, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}