{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NDk1NDg4", "number": 1233, "title": "Ruby and semgrep, v0", "bodyText": "", "createdAt": "2020-07-10T15:12:15Z", "url": "https://github.com/returntocorp/semgrep/pull/1233", "merged": true, "mergeCommit": {"oid": "cb96e20e7e101853788440583f31fd9a15084497"}, "closed": true, "closedAt": "2020-07-10T20:35:08Z", "author": {"login": "aryx"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczj2XqgH2gAyNDQ3NDk1NDg4OmQ0MzViMDY2OGY3Nzk3Njc1YTRmODMwMDVmNzkyMTlkZDJiNjA0NGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczn2-hAFqTQ0NjU4NTQ5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d435b0668f7797675a4f83005f79219dd2b6044d", "author": {"user": {"login": "aryx", "name": "Yoann Padioleau"}}, "url": "https://github.com/returntocorp/semgrep/commit/d435b0668f7797675a4f83005f79219dd2b6044d", "committedDate": "2020-07-10T13:42:17Z", "message": "* pfff: use latest, and CEs on AST generic changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7222137d6f21b8bc943e7fc3f985d623bb606737", "author": {"user": {"login": "aryx", "name": "Yoann Padioleau"}}, "url": "https://github.com/returntocorp/semgrep/commit/7222137d6f21b8bc943e7fc3f985d623bb606737", "committedDate": "2020-07-10T15:11:26Z", "message": "Add token info from tree-sitter and add few test cases for semgrep/ruby\n\nTest plan:\nmake test now should also run the tests under semgrep-core/tests/ruby/"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTY2NTAx", "url": "https://github.com/returntocorp/semgrep/pull/1233#pullrequestreview-446566501", "createdAt": "2020-07-10T17:15:16Z", "commit": {"oid": "7222137d6f21b8bc943e7fc3f985d623bb606737"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTg1NDk0", "url": "https://github.com/returntocorp/semgrep/pull/1233#pullrequestreview-446585494", "createdAt": "2020-07-10T17:46:41Z", "commit": {"oid": "7222137d6f21b8bc943e7fc3f985d623bb606737"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNzo0Njo0MVrOGwADDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNzo0NzoyN1rOGwAEcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk4NTYxNQ==", "bodyText": "Might be worth noting that most of this can go in a language-agnostic library in the future.", "url": "https://github.com/returntocorp/semgrep/pull/1233#discussion_r452985615", "createdAt": "2020-07-10T17:46:41Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/parsing/Parse_ruby_tree_sitter.ml", "diffHunk": "@@ -27,14 +27,66 @@ module G = AST_generic\n  * The resulting AST can then be converted to the generic AST by using\n  * pfff/lang_ruby/analyze/ruby_to_generic.ml\n  *)\n+(*****************************************************************************)\n+(* Globals *)\n+(*****************************************************************************)\n+(* not very multicore friendly *)\n+let global_file = ref \"\"\n+let global_conv = ref (Hashtbl.create 0)\n \n (*****************************************************************************)\n (* Helpers *)\n (*****************************************************************************)\n-let token2 (_tok : Tree_sitter_run.Token.t) =\n-  PI.fake_info \"XXX\"\n-let str (_tok : Tree_sitter_run.Token.t) =\n-  \"STRXXX\", PI.fake_info \"XXX\"\n+\n+(* mostly a copy of Parse_info.full_charpos_to_pos_large *)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222137d6f21b8bc943e7fc3f985d623bb606737"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk4NTk2OQ==", "bodyText": "Why's this file changing?", "url": "https://github.com/returntocorp/semgrep/pull/1233#discussion_r452985969", "createdAt": "2020-07-10T17:47:27Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/tests/python/concrete_syntax.py", "diffHunk": "@@ -1,11 +1,13 @@\n def foo():", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222137d6f21b8bc943e7fc3f985d623bb606737"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1466, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}