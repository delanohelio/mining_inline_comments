{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNzMzMDg2", "number": 231, "title": "improve parsing error for invalid types in valid yaml", "bodyText": "Fixes issue with https://sgrep.live/6xY having a bad error message", "createdAt": "2020-03-03T04:11:01Z", "url": "https://github.com/returntocorp/semgrep/pull/231", "merged": true, "mergeCommit": {"oid": "e21325a3ead76037b16bf169f3910bb533f3bc14"}, "closed": true, "closedAt": "2020-03-03T04:19:39Z", "author": {"login": "DrewDennison"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJ6WMQAH2gAyMzgyNzMzMDg2OmM3MGViMmUyYTQ2NWMxMWZlYTZlN2Q3ZjhlODJiYjM1NDVmNzQyNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJ6bKnAH2gAyMzgyNzMzMDg2OmZiMjEyNzcyMzJiYTUyZWM4Mjg5YWNmYmRjMTExMzc5ZjU0MzY0ZWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c70eb2e2a465c11fea6e7d7f8e82bb3545f74267", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/c70eb2e2a465c11fea6e7d7f8e82bb3545f74267", "committedDate": "2020-03-03T04:10:08Z", "message": "improve parsing error for invalid types in valid yaml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NjkyNTEx", "url": "https://github.com/returntocorp/semgrep/pull/231#pullrequestreview-367692511", "createdAt": "2020-03-03T04:13:03Z", "commit": {"oid": "c70eb2e2a465c11fea6e7d7f8e82bb3545f74267"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNDoxMzowNFrOFw3zWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNDoxMzowNFrOFw3zWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc5MDIzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict\"\n          \n          \n            \n                            f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict; perhaps you are missing a `-` before {pattern}?\"", "url": "https://github.com/returntocorp/semgrep/pull/231#discussion_r386790234", "createdAt": "2020-03-03T04:13:04Z", "author": {"login": "ievans"}, "path": "sgrep_lint/evaluation.py", "diffHunk": "@@ -32,7 +32,15 @@ def _parse_boolean_expression(\n     \"\"\"\n     Move through the expression from the YML, yielding tuples of (operator, unique-id-for-pattern, pattern)\n     \"\"\"\n+    if not isinstance(rule_patterns, list):\n+        raise InvalidRuleSchema(\n+            f\"invalid type for pattern {rule_patterns}: {type(rule_patterns)} is not a list\"\n+        )\n     for pattern in rule_patterns:\n+        if not isinstance(pattern, dict):\n+            raise InvalidRuleSchema(\n+                f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c70eb2e2a465c11fea6e7d7f8e82bb3545f74267"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "854e438e92b6414b46b37c916e5edd3f25b06e1f", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/854e438e92b6414b46b37c916e5edd3f25b06e1f", "committedDate": "2020-03-03T04:13:25Z", "message": "Update sgrep_lint/evaluation.py\n\nCo-Authored-By: Isaac Evans <409041+ievans@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba30c43911fdb690b06c886a7bf16c88f5bc3482", "author": {"user": {"login": "ievans", "name": "Isaac Evans"}}, "url": "https://github.com/returntocorp/semgrep/commit/ba30c43911fdb690b06c886a7bf16c88f5bc3482", "committedDate": "2020-03-03T04:14:27Z", "message": "bad yaml, not dict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb21277232ba52ec8289acfbdc111379f54364ed", "author": {"user": {"login": "DrewDennison", "name": "Drew Dennison"}}, "url": "https://github.com/returntocorp/semgrep/commit/fb21277232ba52ec8289acfbdc111379f54364ed", "committedDate": "2020-03-03T04:15:34Z", "message": "Update evaluation.py"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1144, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}