{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMTMwNjcw", "number": 2151, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNDozMFrOE_tKIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzozNVrOE_tP2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjM1NjE3OnYy", "diffSide": "RIGHT", "path": "semgrep-core/matching/Generic_vs_generic.ml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNDozMFrOH9jtdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjo0ODoyN1rOH9kWLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMDI2MQ==", "bodyText": "My intuition is that we could match 0 items, but this might lead to weird matching in edge cases...\nI'd expect to be able to match:\nunsafe_api_call($ARGS...)\nto\nunsafe_api_call()\nso I could have an autofix:\nsafe_api_call($ARGS...)\n(I'm not sure how we're imagining performing autofix here, do we need to include the delimiter token inside the match?)", "url": "https://github.com/returntocorp/semgrep/pull/2151#discussion_r534310261", "createdAt": "2020-12-02T16:34:30Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/matching/Generic_vs_generic.ml", "diffHunk": "@@ -1085,6 +1085,19 @@ and m_list__m_argument (xsa: A.argument list) (xsb: A.argument list) =\n   | [A.Arg (A.Ellipsis _i)], [] ->\n       return ()\n \n+  | A.Arg (A.Id ((s, tok), _idinfo))::xsa, xb::xsb\n+    when MV.is_metavar_ellipsis s ->\n+      (* can match 1 or more arguments (or 0 is ok too?) *)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMyMDY4Ng==", "bodyText": "I was just scared that if it matches nothing, then we will get some NoTokenLocation errors.\nBut yes my intuition is that I think also it should match 0 or more.", "url": "https://github.com/returntocorp/semgrep/pull/2151#discussion_r534320686", "createdAt": "2020-12-02T16:48:27Z", "author": {"login": "aryx"}, "path": "semgrep-core/matching/Generic_vs_generic.ml", "diffHunk": "@@ -1085,6 +1085,19 @@ and m_list__m_argument (xsa: A.argument list) (xsb: A.argument list) =\n   | [A.Arg (A.Ellipsis _i)], [] ->\n       return ()\n \n+  | A.Arg (A.Id ((s, tok), _idinfo))::xsa, xb::xsb\n+    when MV.is_metavar_ellipsis s ->\n+      (* can match 1 or more arguments (or 0 is ok too?) *)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMDI2MQ=="}, "originalCommit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjM3MDgwOnYy", "diffSide": "RIGHT", "path": "semgrep-core/matching/Matching_generic.mli", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzozNVrOH9j2aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozNzozNVrOH9j2aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxMjU1NQ==", "bodyText": "The more I think about this, the more I think we need to include the delimiter in the match", "url": "https://github.com/returntocorp/semgrep/pull/2151#discussion_r534312555", "createdAt": "2020-12-02T16:37:35Z", "author": {"login": "nbrahms"}, "path": "semgrep-core/matching/Matching_generic.mli", "diffHunk": "@@ -62,6 +62,7 @@ val check_and_add_metavar_binding :\n (*s: signature [[Matching_generic.has_ellipsis_stmts]] *)\n val has_ellipsis_stmts : AST_generic.stmt list -> bool\n (*e: signature [[Matching_generic.has_ellipsis_stmts]] *)\n+val inits_and_rest_of_list: 'a list -> ('a list * 'a list) list", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1244312014114d04c5578cea867a60af660697ee"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4764, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}