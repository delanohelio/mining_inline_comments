{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTQxOTgw", "number": 423, "reviewThreads": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzowNTo1OVrODwfXIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDo0MFrODw2Ldg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTcyMDY0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzowNTo1OVrOGDhlXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMToyMToxMFrOGDp14g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA==", "bodyText": "New tagline. Is this first sentence a concise explanation we can get behind and start using elsewhere? E.g. slide decks, Github repository description, external emails, etc.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406349148", "createdAt": "2020-04-09T17:05:59Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NzM2MQ==", "bodyText": "Would like to workshop the tagline more but not a blocker for the PR. I would like to feature sgrep.live up front and probably in even bigger text though -- it's an awesome demo.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406367361", "createdAt": "2020-04-09T17:38:05Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NjA4OA==", "bodyText": "I like the tagline. We could iterate a bit but I agree with Isaac that it\u2019s not a blocker.\nTo feature sgrep.live more we might want a screenshot or composite screenshot.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406376088", "createdAt": "2020-04-09T17:53:22Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4NDQ1MA==", "bodyText": "Roger that, I'm happy to iterate on it now or in the future. My only focus here would be keeping it concise, dead simple, and straightforward so that no one is confused about what the tool actually does.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406484450", "createdAt": "2020-04-09T21:21:10Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM0OTE0OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTcyODUxOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzowODozMlrOGDhqyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozNzowMlrOGDiqLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MDUzNw==", "bodyText": "Were Ruby and Scala being worked on? Should we include Typescript and PHP (from the language matrix)? Better to under-promise and over-deliver here, IMO.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406350537", "createdAt": "2020-04-09T17:08:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MTEzMQ==", "bodyText": "Oh yeah, the weird &nbsp; are there to even the table columns out a bit. I \"filled\" the language name to 5 characters if it was shorter than that.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406351131", "createdAt": "2020-04-09T17:09:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MDUzNw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2Njc2NA==", "bodyText": "+1 to these changes. I think that @aryx has done groundwork for Ruby but I approve of underepromising", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406366764", "createdAt": "2020-04-09T17:37:02Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MDUzNw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTczODMwOnYy", "diffSide": "LEFT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMToyMVrOGDhw-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMToyMVrOGDhw-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MjEyMQ==", "bodyText": "I moved this down to the resources section. I tend to avoid immediately linking people to other things that may distract them and prevent them from using the thing they're here for. I don't have strong feelings here though.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406352121", "createdAt": "2020-04-09T17:11:21Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTczOTYxOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMTo0MVrOGDhxwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMTo0MVrOGDhxwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MjMyMA==", "bodyText": "Pending project/tool naming changes...", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406352320", "createdAt": "2020-04-09T17:11:41Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTc0NDk0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMzoxNlrOGDh1Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxMzoxNlrOGDh1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1MzIwMw==", "bodyText": "From here down I tried to move away from the theory behind sgrep and comprehensive docs toward getting them up and running as soon as possible. Where appropriate we can link out to more comprehensive docs or resources.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406353203", "createdAt": "2020-04-09T17:13:16Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTc2MDQ0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxNzozMlrOGDh-vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoxNzozMlrOGDh-vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1NTY0NQ==", "bodyText": "The configuration docs seemed to be jumping around different concepts a lot. Between the registry, rule writing, design philosophy, tool defaults, etc. I think we can consolidate a lot of the information and move the finer points like design philosophy to the advanced documentation.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406355645", "createdAt": "2020-04-09T17:17:32Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 146}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTc4MDcyOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMzoxM1rOGDiLXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMTo1MDo1NVrOGEGyUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODg3OQ==", "bodyText": "Since we're explaining $X and ..., it might be a leap to have people grok pattern-not-inside at the same time.  Is there another example we could use?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406358879", "createdAt": "2020-04-09T17:23:13Z", "author": {"login": "minusworld"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 206}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4MzQzMw==", "bodyText": "Good catch here. My thoughts were that we need: 1.) an obvious code smell that people can connect with (e.g. files opened but never closed), 2.) a simple, short example that makes use of metavariables and the ellipsis operator. This was just the first one that came to mind. I think people should be able to grok pattern-not-inside as a \"negation\" operator, but I'm open to other ideas too. Do you have an example in mind that meets the above criteria?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406483433", "createdAt": "2020-04-09T21:18:58Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODg3OQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 206}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5Mzk1Ng==", "bodyText": "\ud83e\udd14 What about modifying a list while iterating over it? https://sgrep.live/5K0. We could either briefly explain pattern-either because I think it's easier to understand than pattern-not-inside, or we could just grab one of those patterns. Probably .append", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406893956", "createdAt": "2020-04-10T18:51:44Z", "author": {"login": "minusworld"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODg3OQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 206}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjk1ODY3NQ==", "bodyText": "I think, at the very least, we need to explain what pattern, etc. are and do (maybe up at line 115?) before introducing this example.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406958675", "createdAt": "2020-04-10T21:50:55Z", "author": {"login": "nbrahms"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1ODg3OQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 206}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTgxNTM4OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMjozOVrOGDigwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMToxMTo1OVrOGDplAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDM1Mw==", "bodyText": "Internally (in the code) and externally, we've referred to this as the ellipsis operator. Is there a reason to change?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406364353", "createdAt": "2020-04-09T17:32:39Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 196}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4MDEzMA==", "bodyText": "Nope! I hadn't heard \"ellipsis\" yet. I'll update \ud83d\udc4d", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406480130", "createdAt": "2020-04-09T21:11:59Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDM1Mw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 196}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTgxOTQ0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozMzo1MFrOGDijLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMzo0MDo0M1rOGDs2eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDk3Mw==", "bodyText": "I find it confusing to have $LIST or $METAVARIABLE as examples, they make me think there is something special about those words. Also found it helpful to have examples of the invalid metavars. Thoughts @mschwager ?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406364973", "createdAt": "2020-04-09T17:33:50Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4NzQ1MQ==", "bodyText": "Is it the fact that they're any word, or those specific words? I think there's value in using words in general, but they don't have to be those words. E.g. word names can help you keep track of what the variable is:\npattern-not-inside: |\n    $USERS = request.get(\"users\")\n    ...\n    db.remove($USERS)\nI think this is slightly more self-documenting than something like $X. Does something like \"Metavariables like $X, $WIDGET, or $USERS.\" make more sense?\nDefinitely agree on the invalid examples - I'll add those back in.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406487451", "createdAt": "2020-04-09T21:27:39Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDk3Mw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUzMzc1NA==", "bodyText": "@mschwager yes and thanks for guessing at what I meant! I think it helps to have something like \"Metavariables like $X, $WIDGET, or $USERS.\"", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406533754", "createdAt": "2020-04-09T23:40:43Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NDk3Mw=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 193}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTgyOTIwOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozNjoyNlrOGDio8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNTo1Njo1N1rOGD-ZvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ==", "bodyText": "suggestion for this table, it should show the sgrep invocation exactly to make it clear how to use the patteern, and have examples in Javascript and golang as well, eg:\ncommand          | matches\nsgrep -lang js const x = 5     | const $FOO = $BAR", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406366451", "createdAt": "2020-04-09T17:36:26Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NzUwNg==", "bodyText": "Oh, and ideally we would actually link each row to a sgrep.live example :D", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406367506", "createdAt": "2020-04-09T17:38:22Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4NDYzOQ==", "bodyText": "Roger that, I'll iterate here.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406484639", "createdAt": "2020-04-09T21:21:38Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwMjc4OA==", "bodyText": "I added a JS and Go example. As for showing the full invocation, adding that much text turns these examples into multi-line rows. Shall we just stick with the 5 simple examples for now and iterate on this table more specifically in the future?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406802788", "createdAt": "2020-04-10T15:14:39Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyMDYxNw==", "bodyText": "@mschwager sgtm!", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406820617", "createdAt": "2020-04-10T15:55:15Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyMTMwOQ==", "bodyText": "I dig it! Probably should stay away from the multiline wrap if we can, defer to you there. Let's just make sure that it's obvious later on how to use \"pattern\"", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406821309", "createdAt": "2020-04-10T15:56:57Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2NjQ1MQ=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTgzNzg1OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozODo0NVrOGDit_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozODo0NVrOGDit_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2Nzc0MA==", "bodyText": "nice, smartquotes are the worst", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406367740", "createdAt": "2020-04-09T17:38:45Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 247}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTg0MjI4OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzozOTo1N1rOGDiwjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMzo0MTowNFrOGDs2zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODM5OA==", "bodyText": "I like the resources section but the simple + advanced conf are such important parts I feel they merit being mentioned earlier and with larger emphasis", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406368398", "createdAt": "2020-04-09T17:39:57Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 272}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ4MTYzNw==", "bodyText": "That makes sense to me. I'm happy to more prominently display them earlier. One question though: do you see value in keeping them separate? My thoughts were that the simple docs should be simple enough to be in the README, i.e. \"Configuration\" section above, then link out to advanced configuration. Does that make sense?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406481637", "createdAt": "2020-04-09T21:15:03Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODM5OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 272}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUzMzgzNg==", "bodyText": "Yes, I like that a lot!", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406533836", "createdAt": "2020-04-09T23:41:04Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODM5OA=="}, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 272}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTg5NTExOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NDoyNVrOGDjRMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NDoyNVrOGDjRMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3Njc1NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n          \n          \n            \n            | **Python** | **JavaScript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **TypeScript** | **PHP &nbsp; &nbsp;** |", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406376755", "createdAt": "2020-04-09T17:54:25Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkwMDQ3OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NTo1M1rOGDjUrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NTo1M1rOGDjUrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NzY0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### OSX\n          \n          \n            \n            ### macOS", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406377646", "createdAt": "2020-04-09T17:55:53Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkwNTk5OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NzozMFrOGDjYQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzo1NzozMFrOGDjYQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3ODU2Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Let's start with a simple example:\n          \n          \n            \n            Start with a simple example:\n          \n      \n    \n    \n  \n\nPrefer to avoid using first person plural in these docs because it can get rather messy.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406378562", "createdAt": "2020-04-09T17:57:30Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkxODgyOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMToxMlrOGDjgWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMToxMlrOGDjgWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDYzNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Installing\n          \n          \n            \n            ## Installation\n          \n      \n    \n    \n  \n\nI suggest being consistent in the section titles using nouns instead of gerunds.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380635", "createdAt": "2020-04-09T18:01:12Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkxOTU0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMToyN1rOGDjg3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMToyN1rOGDjg3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDc2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Using\n          \n          \n            \n            ## Usage", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380766", "createdAt": "2020-04-09T18:01:27Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkyMDM2OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMTo0MlrOGDjhYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowMTo0MlrOGDjhYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MDg5Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Configuring\n          \n          \n            \n            ## Configuration", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406380896", "createdAt": "2020-04-09T18:01:42Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 146}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkyODQ0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowNDowMFrOGDjmaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowNDowMFrOGDjmaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjE4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n          \n          \n            \n            * [r2c `sgrep` meetup slides](https://web-assets.r2c.dev/sgrep/r2c-sgrep-meetup-feb-2020.pdf)", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406382187", "createdAt": "2020-04-09T18:04:00Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 271}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTkyOTQwOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowNDoxNVrOGDjm_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODowNDoxNVrOGDjm_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM4MjMzMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Contributing\n          \n          \n            \n            ## Contribution", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406382333", "createdAt": "2020-04-09T18:04:15Z", "author": {"login": "pabloest"}, "path": "README.md", "diffHunk": "@@ -1,149 +1,194 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+Try it now: [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n+Simple patterns for finding code in many languages:\n+\n+| **Pattern** | **Matches** |\n | :--- | :--- |\n | `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n \n-## Supported Languages\n+Language support:\n \n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n-\n-## Meetups\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+## Installing\n \n-## Installation\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-### Mac \\(alpha\\)\n+`sgrep` binaries can also be installed on OSX and Ubuntu.\n \n-The brew install is WIP and will change significantly.\n+### OSX\n \n-```bash\n-brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n-brew install sgrep-r2c\n-# Due to a naming conflict, when installed via brew, it is named `sgrok`\n-sgrok --help\n+```\n+$ brew tap returntocorp/sgrep https://github.com/returntocorp/sgrep.git\n+$ brew install sgrep-r2c\n+$ sgrep-lint --help\n ```\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n-\n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+### Ubuntu\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n-## Usage\n-\n-### Rule Development\n+## Using\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n+Let's start with a simple example:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks\n ```\n \n-### Config Files\n-\n-#### Format\n+You can also [create your own rules](docs/config/advanced.md):\n \n-See [config/advanced.md](docs/config/advanced.md) for example configuration files and details on the syntax.\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n \n-#### sgrep Registry\n+## Configuring\n \n-[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules) of config files tuned using our [analysis platform](https://app.r2c.dev) on thousands of repositories. To use:\n+For simple patterns use the `--lang` and `--pattern` flags. This mode of\n+operation is useful for quickly iterating on a pattern on a single file or\n+folder:\n \n-```bash\n-sgrep --config r2c\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang javascript --pattern 'eval(...)' path/to/file.js\n ```\n \n-### Default\n-\n-Default configs are loaded from `.sgrep.yml` or multiple files matching `.sgrep/**/*.yml` and can be overridden by using `--config <file|folder|yaml_url|tarball_url|registy_name>`\n+To fine-tune your searching, specify the `--help` flag:\n \n-## Design\n+```\n+$ docker run --rm returntocorp/sgrep --help\n+```\n \n-Sgrep has a design philosophy that emphasizes simplicity and a single pattern being as expressive as possible:\n+### Configuration Files\n \n-1. **Use concrete code syntax:** easy to learn\n-2. **Metavariables \\($X\\)**: abstract away code\n-3. **'...' operator:** abstract away sequences\n-4. **Knows about code equivalences:** one pattern can match many equivalent variations on the code\n-5. **Less is more:** abstract away additional details\n+For advanced configuration use the `--config` flag. This flag automagically\n+handles a multitude of input types:\n \n-## Patterns\n+* `--config <file|folder|yaml_url|tarball_url|registy_name>`\n \n-Patterns are snippets of code with variables and other operators that will be parsed into an AST for that language and will be used to search for that pattern in code. See [docs/config/simple.md](docs/config/simple.md) for full documentation.\n+In the absense of this flag, a default configuration is loaded from `.sgrep.yml`\n+or multiple files matching `.sgrep/**/*.yml`.\n \n-### Metavariables\n+#### Operators\n \n-`$X`, `$FOO`, `$RETURNCODE` are all examples of metavariables. You can referance them later in your pattern and `sgrep` will ensure they match. **Metavariables can only contain uppercase ASCII characters**; `$x` and `$SOME_VALUE` are not valid metavariables.\n+Configuration files make use of two primary operators:\n+\n+* **Metavariables like $X, $LIST, or $METAVARIABLE.** Metavariable names can\n+only contain uppercase characters. Metavariables are used to track a variable\n+across a specific code scope.\n+* **The '...' (splat) operator.** The splat operator abstracts away sequences\n+so you don't have to sweat the details of a particular code pattern.\n+\n+Let's consider an example:\n+\n+```yaml\n+rules:\n+  - id: open-never-closed\n+    patterns:\n+      - pattern: $FD = open(...)\n+      - pattern-not-inside: |\n+          $FD = open(...)\n+          ...\n+          $FD.close()\n+    message: \"file object opened without corresponding close\"\n+    languages: [python]\n+    severity: ERROR\n+```\n \n-#### Operators\n+This rule looks for files that are opened but never closed. It accomplishes\n+this by looking for the `open(...)` pattern _and not_ a following `close()`\n+pattern. The `$FD` metavariable ensures that the same variable name is used\n+in the `open` and `close` calls. The splat operator allows for any arguments\n+to be passed to `open` and any sequence of code statements in-between the `open`\n+and `close` calls. We don't care how `open` is called or what happens up to\n+a `close` call, we just need to make sure `close` is called.\n \n-`...` is the primary \"match anything\" operator. It can match sequences of characters, arguments, or statements. See [docs/config/simple.md](docs/config/simple.md) for more details!\n+For a more complete introduction to the configuration format please see the\n+[advanced configuration documentation](docs/config/advanced.md).\n \n #### Equivalences\n \n-`sgrep` automatically searches for code that is semantically equivalent. For example, a pattern for\n+Equivalences are another key concept in `sgrep`. `sgrep` automatically searches\n+for code that is semantically equivalent. For example, the following patterns\n+are semantically equivalent\n \n-```text\n+```python\n subprocess.Popen(...)\n ```\n \n-will match\n-\n ```python\n-from subprocess import Popen as\n- sub_popen\n-result = sub_popen(\u201cls\u201d)\n+from subprocess import Popen as sub_popen\n+result = sub_popen(\"ls\")\n ```\n \n-and other semantically equivalent configurations.\n+For a full list of `sgrep` feature support by language see the\n+[language matrix](docs/matrix.md).\n+\n+### Registry\n \n-## Integrations\n+As mentioned above, you may also specify a registry name as configuration.\n+[r2c](https://r2c.dev) provides a [registry](https://github.com/returntocorp/sgrep-rules)\n+of configuration files. These rules have been tuned on thousands of repositories\n+using our [analysis platform](https://app.r2c.dev).\n \n-See [integrations.md](docs/integrations.md)\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config r2c\n+```\n \n-## Bug Reports\n+## Resources\n \n-Reports are welcome! Please open an issue on this project.\n+* [r2c `sgrep` meetup slides](https://r2c.dev/sgrep-public2.pdf)\n+* [Simple configuration documentation](docs/config/simple.md)\n+* [Advanced configuration documentation](docs/config/advanced.md)\n+* [Integrations](docs/integrations.md)\n+* [Development](docs/development.md)\n+* [Bug reports](https://github.com/returntocorp/sgrep/issues)\n \n-## Contributions\n+## Contributing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741b6bcb7b710dec2296513bebcae06f3a68c0f4"}, "originalPosition": 279}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNTQ1NjM3OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowMzoyNVrOGEEa1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMTowMjowOVrOGEF1kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkxOTg5Mg==", "bodyText": "IMO we should not be recommending this path (in the README) until it is as easy as apt-get install semgrep @DrewDennison  thoughts?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406919892", "createdAt": "2020-04-10T20:03:25Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjk0MzEyMQ==", "bodyText": "I'll remove for now, we can re-add when we have a clearer picture.", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406943121", "createdAt": "2020-04-10T21:02:09Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkxOTg5Mg=="}, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNTQ1NzkyOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDowMVrOGEEbsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDowMVrOGEEbsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyMDExMw==", "bodyText": "this makes me think that a single pattern works on multiple languages (which isn't really true). Could we rephrase?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406920113", "createdAt": "2020-04-10T20:04:01Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNTQ1OTEwOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMDowNDo0MFrOGEEceA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQyMTowMzoxOVrOGEF3Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyMDMxMg==", "bodyText": "@DrewDennison why would we not use -config=r2c here?", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406920312", "createdAt": "2020-04-10T20:04:40Z", "author": {"login": "ievans"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n ## Usage\n \n-### Rule Development\n+Start with a simple example:\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n-\n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjk0MzUyMw==", "bodyText": "I'll switch to r2c. I wasn't aware of how the registries worked or what rules they pulled in and figured this was simplest. Just tested out r2c and that should be fine here \ud83d\udc4d", "url": "https://github.com/returntocorp/semgrep/pull/423#discussion_r406943523", "createdAt": "2020-04-10T21:03:19Z", "author": {"login": "mschwager"}, "path": "README.md", "diffHunk": "@@ -1,138 +1,187 @@\n # sgrep\n \n-[![r2c community slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=for-the-badge&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n+[![CircleCI](https://circleci.com/gh/returntocorp/sgrep.svg?style=svg)](https://circleci.com/gh/returntocorp/sgrep)\n+[![r2c Community Slack](https://img.shields.io/badge/r2c_slack-join-brightgreen?style=flat&logo=slack&labelColor=4A154B)](https://join.slack.com/t/r2c-community/shared_invite/enQtNjU0NDYzMjAwODY4LWE3NTg1MGNhYTAwMzk5ZGRhMjQ2MzVhNGJiZjI1ZWQ0NjQ2YWI4ZGY3OGViMGJjNzA4ODQ3MjEzOWExNjZlNTA)\n \n-[sgrep.live](https://sgrep.live/): try it now!\n+`sgrep` is a tool for easily detecting and preventing bugs and anti-patterns in\n+your codebase. It combines the convenience of `grep` with the correctness of\n+syntactical and semantic search. Quickly write rules so you can code with\n+confidence.\n \n-sgrep, for syntactical \\(and occasionnally semantic\\) grep, is a tool to help find bugs by specifying code patterns using a familiar syntax. The idea is to mix the convenience of grep with the correctness and precision of a compiler frontend.\n+**Try it now:** [https://sgrep.live](https://sgrep.live/)\n \n-## Quick Examples\n+## Overview\n \n-| **pattern** | **will match code like** |\n-| :--- | :--- |\n-| `$X == $X` | `if (node.id == node.id): ...` |\n-| `foo(kwd1=1, kwd2=2, ...)` | `foo(kwd2=2, kwd1=1, kwd3=3)` |\n-| `subprocess.Popen(...)` | `import subprocess as s; s.Popen(['foo'])` |\n-\n-\u2192 [see more examples in the sgrep-rules registry](https://github.com/returntocorp/sgrep-rules)\n+Language support:\n \n-## Supported Languages\n-\n-| **javascript** | **python** | **go** | **java** | **c** | **ruby** | **scala** |\n+| **Python** | **Javascript** | **Go &nbsp; &nbsp; &nbsp;** | **Java &nbsp;** | **C &nbsp; &nbsp; &nbsp; &nbsp;** | **Typescript** | **PHP &nbsp; &nbsp;** |\n | :--- | :--- | :--- | :--- | :--- | :--- | :--- |\n-| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | coming | coming |\n-\n-\u2192 see full language support details in [matrix.md](docs/matrix.md)\n+| \u2705 | \u2705 | \u2705 | \u2705 | \u2705 | Coming... | Coming... |\n \n-## Meetups\n+Simple patterns for finding code in many languages:\n \n-Want to learn more about sgrep? Check out these [slides from the r2c February meetup](https://r2c.dev/sgrep-public2.pdf)\n+| **Pattern** | **Matches** |\n+| :--- | :--- |\n+| `$X == $X` | `if (node.id == node.id): ...` |\n+| `requests.get(..., verify=False, ...)` | `requests.get(url, timeout=3, verify=False)` |\n+| `os.system(...)` | `from os import system; system('echo sgrep')` |\n+| `$ELEMENT.innerHTML` | ``el.innerHTML = \"<img src='x' onerror='alert(`XSS`)'>\";`` |\n+| `$TOKEN.SignedString([]byte(\"...\"))` | `ss, err := token.SignedString([]byte(\"HARDCODED KEY\"))` |\n \n ## Installation\n \n-Too lazy to install? Try out [sgrep.live](https://sgrep.live)\n-\n-### Docker\n-\n-`sgrep` is packaged within a [docker container](https://hub.docker.com/r/returntocorp/sgrep), making installation as easy as [installing docker](https://docs.docker.com/install/).\n+For the best experience, simply install `sgrep` with [Docker](https://docs.docker.com/install/):\n \n-## Quickstart\n-\n-```bash\n-docker pull returntocorp/sgrep\n+```\n+$ docker pull returntocorp/sgrep\n+```\n \n-cd /path/to/repo\n-# generate a template config file\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --generate-config\n+`sgrep` binaries can also be installed on Ubuntu:\n \n-# look for findings\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep\n+```\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz\n+$ wget https://github.com/returntocorp/sgrep/releases/download/v0.4.9/sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ sha256sum --check sgrep-0.4.9-ubuntu-16.04.tgz.sha256\n+$ tar xf sgrep-0.4.9-ubuntu-16.04.tgz\n+$ ./sgrep-lint-files/sgrep-lint --help\n ```\n \n ## Usage\n \n-### Rule Development\n+Start with a simple example:\n \n-To rapidly iterate on a single pattern, you can test on a single file or folder. For example,\n-\n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep -l python -e '$X == $X' path/to/file.py\n+```\n+$ cat << EOF > test.py\n+a = 1\n+b = 2\n+if a == a:  # oops, supposed to be a == b\n+    print('sgrep test')\n+EOF\n ```\n \n-Here, `sgrep` will search the target with the pattern `$X == $X` \\(which is a stupid equals check\\) and print the results to `stdout`. This also works for directories and will skip the file if parsing fails. You can specifiy the language of the pattern with `--lang javascript` for example.\n+```\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --lang python --pattern '$X == $X' test.py\n+test.py\n+3:if a == a:  # oops, supposed to be a == b\n+```\n \n-To see more options\n+From here you can use our rules to search for issues in your codebase:\n \n-```bash\n-docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --help\n+```\n+$ cd /path/to/code\n+$ docker run --rm -v \"${PWD}:/home/repo\" returntocorp/sgrep --config https://r2c.dev/default-r2c-checks", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyMDMxMg=="}, "originalCommit": {"oid": "68401b35cf19e794f797c17d79ccc5634626e6f9"}, "originalPosition": 114}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4816, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}