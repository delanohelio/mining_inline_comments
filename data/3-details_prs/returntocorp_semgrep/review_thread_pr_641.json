{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMTI4NTI4", "number": 641, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNDoxMDozNFrOD4YJcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOToxNjowN1rOD4dXnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNDQyNDgxOnYy", "diffSide": "RIGHT", "path": "semgrep/semgrep/cli.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNDoxMDozNFrOGPKuEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNDoxMDozNFrOGPKuEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU1NzQ1Ng==", "bodyText": "These changes are just me standardizing the order to exclude, include, exclude-dir, include-dir.", "url": "https://github.com/returntocorp/semgrep/pull/641#discussion_r418557456", "createdAt": "2020-05-01T14:10:34Z", "author": {"login": "underyx"}, "path": "semgrep/semgrep/cli.py", "diffHunk": "@@ -64,23 +64,29 @@ def cli() -> None:\n     )\n \n     parser.add_argument(\n-        \"--include\",\n+        \"--exclude\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81c9b19709446f9c87dc46c4db1af80a0e71225a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNDUxMjAxOnYy", "diffSide": "RIGHT", "path": "semgrep-core/finding/unit_files.ml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNDo0MTozM1rOGPLkWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNDo0MTozM1rOGPLkWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU3MTM1Mw==", "bodyText": "This will not work, because include_dirs, like exclude_dirs, apply the filter to the directory component of a path,\nit's not to a prefix of a path, so here you want ~include_dirs:[\"a\"] (or ~include_dirs:[\"b\"]).\nGREP exclude dirs work like that I think.\nI know @DrewDennison wanted to change that, but then you can have issues when the path is ./a/b/c\nand if you put \"a/b\" it will not match because it's not a prefix.", "url": "https://github.com/returntocorp/semgrep/pull/641#discussion_r418571353", "createdAt": "2020-05-01T14:41:33Z", "author": {"login": "aryx"}, "path": "semgrep-core/finding/unit_files.ml", "diffHunk": "@@ -15,7 +15,8 @@ let unittest =\n         let filters = Files_filter.mk_filters\n           ~excludes:[\"*.{c,h}\"; \"*.go\"]\n           ~includes:[\"foo.*\"]\n-          ~exclude_dirs:[\"c\"] in\n+          ~exclude_dirs:[\"c\"] \n+          ~include_dirs:[\"a/b\"] in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "069fd85e99511699ffb294b137b18acc109dc3e8"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNTI4MDMxOnYy", "diffSide": "RIGHT", "path": "semgrep/semgrep/cli.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOToxNjowOFrOGPTF7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOToxNjowOFrOGPTF7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5NDYzOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    help=\"Don't scan these directories, such as --exclude-dir='tests'. Add multiple times to exclude multiple patterns.\",\n          \n          \n            \n                    help=\"Skip any directory with this name; --exclude-dir=doc will ignore doc/ as well as src/doc. Can add multiple times. Overrides includes.\",", "url": "https://github.com/returntocorp/semgrep/pull/641#discussion_r418694638", "createdAt": "2020-05-01T19:16:08Z", "author": {"login": "underyx"}, "path": "semgrep/semgrep/cli.py", "diffHunk": "@@ -62,11 +62,30 @@ def cli() -> None:\n         help=f\"only invoke semgrep if config(s) are valid\",\n         action=\"store_true\",\n     )\n+\n     parser.add_argument(\n         \"--exclude\",\n         action=\"append\",\n         default=[],\n-        help=\"Path pattern to exclude. Can be added multiple times to exclude multiple patterns.\",\n+        help=\"Don't scan files with this filename, such as --exclude='*.js'. Add multiple times to exclude multiple patterns.\",\n+    )\n+    parser.add_argument(\n+        \"--include\",\n+        action=\"append\",\n+        default=[],\n+        help=\"Scan only files with this filename, such as --include='*.js'. Add multiple times to include multiple patterns.\",\n+    )\n+    parser.add_argument(\n+        \"--exclude-dir\",\n+        action=\"append\",\n+        default=[],\n+        help=\"Don't scan these directories, such as --exclude-dir='tests'. Add multiple times to exclude multiple patterns.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "069fd85e99511699ffb294b137b18acc109dc3e8"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4663, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}