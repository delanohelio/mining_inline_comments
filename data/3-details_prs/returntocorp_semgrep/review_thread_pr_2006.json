{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NjkyMzQ2", "number": 2006, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyNzo1M1rOE3YUZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyODoyN1rOE3YVPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTA1NTcyOnYy", "diffSide": "RIGHT", "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyNzo1M1rOHwsVCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo0MzoxMlrOHwwwZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxOTk3Ng==", "bodyText": "there's a pr2 here.\nWe actually should have a semgrep rule preventing to commit such code.", "url": "https://github.com/returntocorp/semgrep/pull/2006#discussion_r520819976", "createdAt": "2020-11-10T19:27:53Z", "author": {"login": "aryx"}, "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "diffHunk": "@@ -1358,12 +1366,13 @@ and primary_constructor (env : env) ((v1, v2) : CST.primary_constructor) =\n   let v2 = class_parameters env v2 in\n   todo env (v1, v2)\n \n-and primary_expression (env : env) (x : CST.primary_expression) : AST.expr =\n+and primary_expression (env : env) (x : CST.primary_expression) : expr =\n   (match x with\n-  | `Paren_exp x -> let _ = parenthesized_expression env x in\n-      raise Todo\n-  | `Simple_id x -> simple_identifier env x\n-  | `Lit_cst x -> literal_constant env x\n+  | `Paren_exp x -> parenthesized_expression env x\n+  | `Simple_id x -> \n+      let id = simple_identifier env x in\n+      Id(id, empty_id_info())\n+  | `Lit_cst x -> pr2 \"in lit_cst\"; L (literal_constant env x)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbea79458cecbc5078a7862057c967dd2c8f24ed"}, "originalPosition": 314}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg2MTAxOQ==", "bodyText": "oh shoot, I'll change that! and very true we should have a semgrep rule for this", "url": "https://github.com/returntocorp/semgrep/pull/2006#discussion_r520861019", "createdAt": "2020-11-10T20:42:01Z", "author": {"login": "colleend"}, "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "diffHunk": "@@ -1358,12 +1366,13 @@ and primary_constructor (env : env) ((v1, v2) : CST.primary_constructor) =\n   let v2 = class_parameters env v2 in\n   todo env (v1, v2)\n \n-and primary_expression (env : env) (x : CST.primary_expression) : AST.expr =\n+and primary_expression (env : env) (x : CST.primary_expression) : expr =\n   (match x with\n-  | `Paren_exp x -> let _ = parenthesized_expression env x in\n-      raise Todo\n-  | `Simple_id x -> simple_identifier env x\n-  | `Lit_cst x -> literal_constant env x\n+  | `Paren_exp x -> parenthesized_expression env x\n+  | `Simple_id x -> \n+      let id = simple_identifier env x in\n+      Id(id, empty_id_info())\n+  | `Lit_cst x -> pr2 \"in lit_cst\"; L (literal_constant env x)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxOTk3Ng=="}, "originalCommit": {"oid": "dbea79458cecbc5078a7862057c967dd2c8f24ed"}, "originalPosition": 314}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MjUxOA==", "bodyText": "I will write this this week or next \ud83e\udd14", "url": "https://github.com/returntocorp/semgrep/pull/2006#discussion_r520892518", "createdAt": "2020-11-10T21:43:12Z", "author": {"login": "colleend"}, "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "diffHunk": "@@ -1358,12 +1366,13 @@ and primary_constructor (env : env) ((v1, v2) : CST.primary_constructor) =\n   let v2 = class_parameters env v2 in\n   todo env (v1, v2)\n \n-and primary_expression (env : env) (x : CST.primary_expression) : AST.expr =\n+and primary_expression (env : env) (x : CST.primary_expression) : expr =\n   (match x with\n-  | `Paren_exp x -> let _ = parenthesized_expression env x in\n-      raise Todo\n-  | `Simple_id x -> simple_identifier env x\n-  | `Lit_cst x -> literal_constant env x\n+  | `Paren_exp x -> parenthesized_expression env x\n+  | `Simple_id x -> \n+      let id = simple_identifier env x in\n+      Id(id, empty_id_info())\n+  | `Lit_cst x -> pr2 \"in lit_cst\"; L (literal_constant env x)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxOTk3Ng=="}, "originalCommit": {"oid": "dbea79458cecbc5078a7862057c967dd2c8f24ed"}, "originalPosition": 314}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTA1Nzg4OnYy", "diffSide": "RIGHT", "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyODoyN1rOHwsWXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToyODoyN1rOHwsWXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgyMDMxOQ==", "bodyText": "There is a IdSpecial for This and Super.\nSee what I do in Parse_java_tree_sitter.ml", "url": "https://github.com/returntocorp/semgrep/pull/2006#discussion_r520820319", "createdAt": "2020-11-10T19:28:27Z", "author": {"login": "aryx"}, "path": "semgrep-core/parsing/Parse_kotlin_tree_sitter.ml", "diffHunk": "@@ -1404,7 +1413,7 @@ and primary_expression (env : env) (x : CST.primary_expression) : AST.expr =\n       in\n       let v4 = token env v4 (* \"]\" *) in\n       todo env (v1, v2, v3, v4)\n-  | `This_exp tok -> let _ = token env tok in raise Todo (* \"this\" *)\n+  | `This_exp tok -> Id(str env tok, empty_id_info()) (* \"this\" *)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbea79458cecbc5078a7862057c967dd2c8f24ed"}, "originalPosition": 332}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4785, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}