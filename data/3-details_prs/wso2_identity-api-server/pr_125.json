{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTgxODk2", "number": 125, "title": "Add Application Template API implementation", "bodyText": "Fix wso2/product-is#7882\nPurpose\nThis PR contains the implementation of the Application Template API.\nThis will introduce 5 new APIs\n\nGET   /applications/templates\nPOST   /applications/templates\nGET   /applications/templates/{template-id}\nPUT   /applications/templates/{template-id}\nDELETE   /applications/templates/{template-id}\n\nApplication Template APIs uses the template management backend service introduced with PR wso2/carbon-identity-framework#2827 in carbon-identity-framework\nMerger after merging, wso2/carbon-identity-framework#2827", "createdAt": "2020-03-25T13:17:29Z", "url": "https://github.com/wso2/identity-api-server/pull/125", "merged": true, "mergeCommit": {"oid": "d47979934d852cd47d44f8ece1129da1b8e0f328"}, "closed": true, "closedAt": "2020-03-27T05:15:10Z", "author": {"login": "pamodaaw"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRGtzJgH2gAyMzkzNTgxODk2OmMwZjJhZTFkMjYyMjZhMjlhMThjY2Q3YmZkZTY2ZTlkOTcyNmJkNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRpTmvgFqTM4MjU3ODgzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0f2ae1d26226a29a18ccd7bfde66e9d9726bd59", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/c0f2ae1d26226a29a18ccd7bfde66e9d9726bd59", "committedDate": "2020-03-25T12:32:15Z", "message": "Update application swagger with template APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9c25776d7b8ca82102dc989a9c1df4bd6261d7b", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/b9c25776d7b8ca82102dc989a9c1df4bd6261d7b", "committedDate": "2020-03-25T12:33:00Z", "message": "Generate classes from application.yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db7917170a32d68518c7236b7374357e9da364c0", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/db7917170a32d68518c7236b7374357e9da364c0", "committedDate": "2020-03-25T13:09:17Z", "message": "Add application template API implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa", "committedDate": "2020-03-25T13:18:59Z", "message": "Merge branch 'master' of https://github.com/wso2/identity-api-server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjIyNzgw", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381222780", "createdAt": "2020-03-25T14:49:43Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo0OTo0M1rOF7ezIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo0OTo0M1rOF7ezIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxNDkxMg==", "bodyText": "This class is written in 2019 and this should be a singleton class...", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397914912", "createdAt": "2020-03-25T14:49:43Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.common/src/main/java/org/wso2/carbon/identity/api/server/application/management/common/ApplicationManagementServiceHolder.java", "diffHunk": "@@ -85,4 +88,14 @@ public static void setoAuthServerConfiguration(OAuthServerConfiguration oAuthSer\n \n         ApplicationManagementServiceHolder.oAuthServerConfiguration = oAuthServerConfiguration;\n     }\n+\n+    public static TemplateManager getTemplateManager() {\n+\n+        return templateManager;\n+    }\n+\n+    public static void setTemplateManager(TemplateManager templateManager) {\n+\n+        ApplicationManagementServiceHolder.templateManager = templateManager;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjI1NDY0", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381225464", "createdAt": "2020-03-25T14:52:19Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1MjoxOVrOF7e7Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1MjoxOVrOF7e7Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxNzAwMw==", "bodyText": "change the src generator to have 2020.", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397917003", "createdAt": "2020-03-25T14:52:19Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/gen/java/org/wso2/carbon/identity/api/server/application/management/v1/ApplicationTemplateModel.java", "diffHunk": "@@ -0,0 +1,280 @@\n+/*\n+* Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjI3MDM1", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381227035", "createdAt": "2020-03-25T14:53:47Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1Mzo0N1rOF7fADA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1Mzo0N1rOF7fADA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxODIyMA==", "bodyText": "missing method comment", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397918220", "createdAt": "2020-03-25T14:53:47Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -475,6 +500,74 @@ public void updateCustomInbound(String applicationId, String inboundType,\n         putInbound(applicationId, customInbound, CustomInboundFunctions::putCustomInbound);\n     }\n \n+    public String createApplicationTemplate(ApplicationTemplateModel applicationTemplateModel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 73}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjI3MjQ0", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381227244", "createdAt": "2020-03-25T14:53:58Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1Mzo1OFrOF7fAsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1Mzo1OFrOF7fAsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxODM4Ng==", "bodyText": "missing method comment", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397918386", "createdAt": "2020-03-25T14:53:58Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -475,6 +500,74 @@ public void updateCustomInbound(String applicationId, String inboundType,\n         putInbound(applicationId, customInbound, CustomInboundFunctions::putCustomInbound);\n     }\n \n+    public String createApplicationTemplate(ApplicationTemplateModel applicationTemplateModel) {\n+\n+        Template template = new ApplicationTemplateApiModelToTemplate().apply(applicationTemplateModel);\n+\n+        try {\n+            return getTemplateManager().addTemplate(template);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while adding the new application template.\");\n+        }\n+    }\n+\n+    public ApplicationTemplatesList listApplicationTemplates(Integer limit, Integer offset) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjMxNTIx", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381231521", "createdAt": "2020-03-25T14:58:07Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODowN1rOF7fN1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODowN1rOF7fN1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyMTc0OA==", "bodyText": "missing method comment", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397921748", "createdAt": "2020-03-25T14:58:07Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -475,6 +500,74 @@ public void updateCustomInbound(String applicationId, String inboundType,\n         putInbound(applicationId, customInbound, CustomInboundFunctions::putCustomInbound);\n     }\n \n+    public String createApplicationTemplate(ApplicationTemplateModel applicationTemplateModel) {\n+\n+        Template template = new ApplicationTemplateApiModelToTemplate().apply(applicationTemplateModel);\n+\n+        try {\n+            return getTemplateManager().addTemplate(template);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while adding the new application template.\");\n+        }\n+    }\n+\n+    public ApplicationTemplatesList listApplicationTemplates(Integer limit, Integer offset) {\n+\n+        validatePaginationSupport(limit, offset);\n+        try {\n+            List<Template> templateList = getTemplateManager().listTemplates(TemplateMgtConstants.TemplateType\n+                    .APPLICATION_TEMPLATE.toString(), null, null);\n+            List<ApplicationTemplatesListItem> applicationTemplateList = templateList.stream().map(new\n+                    TemplateToApplicationTemplateListItem()).collect(Collectors.toList());\n+\n+            ApplicationTemplatesList applicationTemplates = new ApplicationTemplatesList();\n+            applicationTemplates.setTemplates(applicationTemplateList);\n+            return applicationTemplates;\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while listing application templates.\");\n+        }\n+    }\n+\n+    public ApplicationTemplateModel getApplicationTemplateById(String templateId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjMxNTg5", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381231589", "createdAt": "2020-03-25T14:58:10Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODoxMVrOF7fODw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODoxMVrOF7fODw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyMTgwNw==", "bodyText": "missing method comment", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397921807", "createdAt": "2020-03-25T14:58:11Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -475,6 +500,74 @@ public void updateCustomInbound(String applicationId, String inboundType,\n         putInbound(applicationId, customInbound, CustomInboundFunctions::putCustomInbound);\n     }\n \n+    public String createApplicationTemplate(ApplicationTemplateModel applicationTemplateModel) {\n+\n+        Template template = new ApplicationTemplateApiModelToTemplate().apply(applicationTemplateModel);\n+\n+        try {\n+            return getTemplateManager().addTemplate(template);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while adding the new application template.\");\n+        }\n+    }\n+\n+    public ApplicationTemplatesList listApplicationTemplates(Integer limit, Integer offset) {\n+\n+        validatePaginationSupport(limit, offset);\n+        try {\n+            List<Template> templateList = getTemplateManager().listTemplates(TemplateMgtConstants.TemplateType\n+                    .APPLICATION_TEMPLATE.toString(), null, null);\n+            List<ApplicationTemplatesListItem> applicationTemplateList = templateList.stream().map(new\n+                    TemplateToApplicationTemplateListItem()).collect(Collectors.toList());\n+\n+            ApplicationTemplatesList applicationTemplates = new ApplicationTemplatesList();\n+            applicationTemplates.setTemplates(applicationTemplateList);\n+            return applicationTemplates;\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while listing application templates.\");\n+        }\n+    }\n+\n+    public ApplicationTemplateModel getApplicationTemplateById(String templateId) {\n+\n+        try {\n+            return new TemplateToApplicationTemplate().apply(getTemplateManager().getTemplateById(templateId));\n+        } catch (TemplateManagementException e) {\n+            if (TemplateMgtConstants.ErrorMessages.ERROR_CODE_TEMPLATE_NOT_FOUND.getCode().equals(e.getErrorCode())) {\n+                throw handleTemplateNotFoundException(e);\n+            }\n+            String errorMessage = \"Error while retrieving the application template with id \" + templateId + \".\";\n+            throw handleTemplateManagementException(e, errorMessage);\n+        }\n+    }\n+\n+    public void deleteApplicationTemplateById(String templateId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 114}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjMxNzA2", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381231706", "createdAt": "2020-03-25T14:58:17Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODoxN1rOF7fOXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo1ODoxN1rOF7fOXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyMTg4Nw==", "bodyText": "missing method comment", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397921887", "createdAt": "2020-03-25T14:58:17Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -475,6 +500,74 @@ public void updateCustomInbound(String applicationId, String inboundType,\n         putInbound(applicationId, customInbound, CustomInboundFunctions::putCustomInbound);\n     }\n \n+    public String createApplicationTemplate(ApplicationTemplateModel applicationTemplateModel) {\n+\n+        Template template = new ApplicationTemplateApiModelToTemplate().apply(applicationTemplateModel);\n+\n+        try {\n+            return getTemplateManager().addTemplate(template);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while adding the new application template.\");\n+        }\n+    }\n+\n+    public ApplicationTemplatesList listApplicationTemplates(Integer limit, Integer offset) {\n+\n+        validatePaginationSupport(limit, offset);\n+        try {\n+            List<Template> templateList = getTemplateManager().listTemplates(TemplateMgtConstants.TemplateType\n+                    .APPLICATION_TEMPLATE.toString(), null, null);\n+            List<ApplicationTemplatesListItem> applicationTemplateList = templateList.stream().map(new\n+                    TemplateToApplicationTemplateListItem()).collect(Collectors.toList());\n+\n+            ApplicationTemplatesList applicationTemplates = new ApplicationTemplatesList();\n+            applicationTemplates.setTemplates(applicationTemplateList);\n+            return applicationTemplates;\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateManagementException(e, \"Error while listing application templates.\");\n+        }\n+    }\n+\n+    public ApplicationTemplateModel getApplicationTemplateById(String templateId) {\n+\n+        try {\n+            return new TemplateToApplicationTemplate().apply(getTemplateManager().getTemplateById(templateId));\n+        } catch (TemplateManagementException e) {\n+            if (TemplateMgtConstants.ErrorMessages.ERROR_CODE_TEMPLATE_NOT_FOUND.getCode().equals(e.getErrorCode())) {\n+                throw handleTemplateNotFoundException(e);\n+            }\n+            String errorMessage = \"Error while retrieving the application template with id \" + templateId + \".\";\n+            throw handleTemplateManagementException(e, errorMessage);\n+        }\n+    }\n+\n+    public void deleteApplicationTemplateById(String templateId) {\n+\n+        try {\n+            getTemplateManager().deleteTemplateById(templateId);\n+        } catch (TemplateManagementException e) {\n+            if (TemplateMgtConstants.ErrorMessages.ERROR_CODE_TEMPLATE_NOT_FOUND.getCode().equals(e.getErrorCode())) {\n+                throw handleTemplateNotFoundException(e);\n+            }\n+            String errorMessage = \"Error while deleting the application template with id \" + templateId + \".\";\n+            throw handleTemplateManagementException(e, errorMessage);\n+        }\n+    }\n+\n+    public void updateApplicationTemplateById(String templateId, ApplicationTemplateModel model) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 127}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjM0NjQ4", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381234648", "createdAt": "2020-03-25T15:01:05Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMTowNVrOF7fXnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMTowNVrOF7fXnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyNDI1Mw==", "bodyText": "redundant empty check.", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397924253", "createdAt": "2020-03-25T15:01:05Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/functions/template/TemplateToApplicationTemplate.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.api.server.application.management.v1.core.functions.template;\n+\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import org.apache.commons.lang.StringUtils;\n+import org.wso2.carbon.identity.api.server.application.management.common.ApplicationManagementConstants;\n+import org.wso2.carbon.identity.api.server.application.management.v1.ApplicationModel;\n+import org.wso2.carbon.identity.api.server.application.management.v1.ApplicationTemplateModel;\n+import org.wso2.carbon.identity.template.mgt.model.Template;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.function.Function;\n+\n+import static org.wso2.carbon.identity.api.server.application.management.v1.core.functions.Utils.buildServerError;\n+\n+/**\n+ * Converts the Template to ApplicationTemplate model.\n+ */\n+public class TemplateToApplicationTemplate implements Function<Template, ApplicationTemplateModel> {\n+\n+    @Override\n+    public ApplicationTemplateModel apply(Template template) {\n+\n+        ApplicationTemplateModel applicationTemplate = new ApplicationTemplateModel();\n+        applicationTemplate.setName(template.getTemplateName());\n+        applicationTemplate.setId(template.getTemplateId());\n+        applicationTemplate.setDescription(template.getDescription());\n+        applicationTemplate.setImage(template.getImageUrl());\n+\n+        if (StringUtils.isNotBlank(template.getTemplateScript())) {\n+            applicationTemplate.setApplication(createApplicationTemplate(template.getTemplateScript()));\n+        }\n+\n+        if (!template.getPropertiesMap().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjM1MjE5", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381235219", "createdAt": "2020-03-25T15:01:38Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMTozOFrOF7fZdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMTozOFrOF7fZdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyNDcyNA==", "bodyText": "redundant empty check.", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397924724", "createdAt": "2020-03-25T15:01:38Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/functions/template/TemplateToApplicationTemplateListItem.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.api.server.application.management.v1.core.functions.template;\n+\n+import org.apache.commons.lang.StringUtils;\n+import org.wso2.carbon.identity.api.server.application.management.common.ApplicationManagementConstants;\n+import org.wso2.carbon.identity.api.server.application.management.v1.ApplicationTemplatesListItem;\n+import org.wso2.carbon.identity.api.server.common.Constants;\n+import org.wso2.carbon.identity.api.server.common.ContextLoader;\n+import org.wso2.carbon.identity.template.mgt.model.Template;\n+\n+import java.util.Arrays;\n+import java.util.function.Function;\n+\n+import static org.wso2.carbon.identity.api.server.application.management.common.ApplicationManagementConstants\n+        .APPLICATION_MANAGEMENT_PATH_COMPONENT;\n+import static org.wso2.carbon.identity.api.server.application.management.common.ApplicationManagementConstants\n+        .APPLICATION_TEMPLATE_MANAGEMENT_PATH_COMPONENT;\n+\n+/**\n+ * Converts the Template to ApplicationTemplateListItem model.\n+ */\n+public class TemplateToApplicationTemplateListItem implements Function<Template, ApplicationTemplatesListItem> {\n+\n+    @Override\n+    public ApplicationTemplatesListItem apply(Template template) {\n+\n+        ApplicationTemplatesListItem listItem = new ApplicationTemplatesListItem();\n+        listItem.setName(template.getTemplateName());\n+        listItem.setId(template.getTemplateId());\n+        listItem.setSelf(getApplicationTemplateLocation(template.getTemplateId()));\n+        listItem.setDescription(template.getDescription());\n+        listItem.setImage(template.getImageUrl());\n+\n+        if (!template.getPropertiesMap().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjM2NDU4", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381236458", "createdAt": "2020-03-25T15:02:55Z", "commit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMjo1NVrOF7fdPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowMjo1NVrOF7fdPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyNTY5Mw==", "bodyText": "length exceeds 120.", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r397925693", "createdAt": "2020-03-25T15:02:55Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/resources/META-INF/cxf/applications-server-v1-cxf.xml", "diffHunk": "@@ -47,4 +52,6 @@\n           class=\"org.wso2.carbon.identity.api.server.application.management.common.factory.STSAdminOSGiServiceFactory\"/>\n     <bean id=\"samlSsoConfigServiceFactoryBean\"\n           class=\"org.wso2.carbon.identity.api.server.application.management.common.factory.SAMLSSOConfigOSGiServiceFactory\"/>\n+    <bean id=\"templateManagerServiceFactoryBean\"\n+          class=\"org.wso2.carbon.identity.api.server.application.management.common.factory.TemplateManagementOSGiServiceFactory\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb18e163989ec3cc7a85a75e5c2e5a93b9a104aa"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "943d9d224efd4f121e78fad6f6173846c4628240", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/943d9d224efd4f121e78fad6f6173846c4628240", "committedDate": "2020-03-25T19:30:00Z", "message": "Format the code"}, "afterCommit": {"oid": "c4b475dec12a08487d4ec5993d185e5af058a96e", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/c4b475dec12a08487d4ec5993d185e5af058a96e", "committedDate": "2020-03-25T19:41:17Z", "message": "Format the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ae7431f108bc7583f571170d6b4211ab87dfaad", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/6ae7431f108bc7583f571170d6b4211ab87dfaad", "committedDate": "2020-03-25T19:45:44Z", "message": "Format the code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4b475dec12a08487d4ec5993d185e5af058a96e", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/c4b475dec12a08487d4ec5993d185e5af058a96e", "committedDate": "2020-03-25T19:41:17Z", "message": "Format the code"}, "afterCommit": {"oid": "6ae7431f108bc7583f571170d6b4211ab87dfaad", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/6ae7431f108bc7583f571170d6b4211ab87dfaad", "committedDate": "2020-03-25T19:45:44Z", "message": "Format the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9ff6445b895e120788d29c0b574465c1d8a3d22", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/b9ff6445b895e120788d29c0b574465c1d8a3d22", "committedDate": "2020-03-26T05:30:31Z", "message": "Bump carbon-identity-framework version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxODI4Nzc4", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-381828778", "createdAt": "2020-03-26T09:26:35Z", "commit": {"oid": "a9f6e387b927fc0e84b0abc4e46a77327e60649a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwOToyNjozNVrOF79_GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwOToyNjozNVrOF79_GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQyNTg4MA==", "bodyText": "make the constructor of ApplicationManagementServiceHolder private", "url": "https://github.com/wso2/identity-api-server/pull/125#discussion_r398425880", "createdAt": "2020-03-26T09:26:35Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.common/src/main/java/org/wso2/carbon/identity/api/server/application/management/common/ApplicationManagementServiceHolder.java", "diffHunk": "@@ -36,53 +40,70 @@\n \n     private static OAuthServerConfiguration oAuthServerConfiguration;\n \n-    public static ApplicationManagementService getApplicationManagementService() {\n+    private static TemplateManager templateManager;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9f6e387b927fc0e84b0abc4e46a77327e60649a"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61c58f9c3daf7bc9ce32fe5c8c63fada52fda397", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/61c58f9c3daf7bc9ce32fe5c8c63fada52fda397", "committedDate": "2020-03-26T10:30:24Z", "message": "Make ApplicationManagement dataholder singleton"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9f6e387b927fc0e84b0abc4e46a77327e60649a", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/a9f6e387b927fc0e84b0abc4e46a77327e60649a", "committedDate": "2020-03-26T09:22:42Z", "message": "Make ApplicationManagement dataholder singleton"}, "afterCommit": {"oid": "61c58f9c3daf7bc9ce32fe5c8c63fada52fda397", "author": {"user": {"login": "pamodaaw", "name": "Pamoda Wimalasiri"}}, "url": "https://github.com/wso2/identity-api-server/commit/61c58f9c3daf7bc9ce32fe5c8c63fada52fda397", "committedDate": "2020-03-26T10:30:24Z", "message": "Make ApplicationManagement dataholder singleton"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTc4ODM5", "url": "https://github.com/wso2/identity-api-server/pull/125#pullrequestreview-382578839", "createdAt": "2020-03-27T04:50:19Z", "commit": {"oid": "61c58f9c3daf7bc9ce32fe5c8c63fada52fda397"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1336, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}