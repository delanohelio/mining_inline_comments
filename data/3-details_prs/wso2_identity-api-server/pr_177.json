{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MjYwMjYy", "number": 177, "title": "Implement a REST API for tenant admins to manage CORS at the tenant level", "bodyText": "Proposed changes in this pull request\n$subject.\nFixes wso2/product-is#8550\nWhen to merge\nAfter wso2/carbon-identity-framework#3029", "createdAt": "2020-06-23T01:31:12Z", "url": "https://github.com/wso2/identity-api-server/pull/177", "merged": true, "mergeCommit": {"oid": "944243a990744f11bb45e708b0297153d3cc9960"}, "closed": true, "closedAt": "2020-08-06T14:49:40Z", "author": {"login": "ivantha"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABct_I_lgFqTQzNTQ2NjE5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8Q2n8gBqjM2MjkzNzY5ODA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NDY2MTk0", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-435466194", "createdAt": "2020-06-23T06:05:15Z", "commit": {"oid": "0fab3079dcf8a8d33e735cd71117c034966ffb55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjowNToxNVrOGnafSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjowNToxNVrOGnafSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk4MTY0Mg==", "bodyText": "Shall we remove this comment if it is not required?", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r443981642", "createdAt": "2020-06-23T06:05:15Z", "author": {"login": "ShanChathusanda93"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.v1/src/gen/java/org/wso2/carbon/identity/api/server/configs/v1/model/ServerConfig.java", "diffHunk": "@@ -151,6 +154,32 @@ public ServerConfig addAuthenticatorsItem(AuthenticatorListItem authenticatorsIt\n         return this;\n     }\n \n+        /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fab3079dcf8a8d33e735cd71117c034966ffb55"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0fab3079dcf8a8d33e735cd71117c034966ffb55", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/0fab3079dcf8a8d33e735cd71117c034966ffb55", "committedDate": "2020-06-22T17:10:02Z", "message": "Add CORS API"}, "afterCommit": {"oid": "4a33a76c451194281aaeef7810ba80f120123d6d", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/4a33a76c451194281aaeef7810ba80f120123d6d", "committedDate": "2020-06-23T06:11:24Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a33a76c451194281aaeef7810ba80f120123d6d", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/4a33a76c451194281aaeef7810ba80f120123d6d", "committedDate": "2020-06-23T06:11:24Z", "message": "Add CORS API"}, "afterCommit": {"oid": "59006dfa7989b3446606bbe0b6bc6c5227e88a41", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/59006dfa7989b3446606bbe0b6bc6c5227e88a41", "committedDate": "2020-06-23T13:59:47Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59006dfa7989b3446606bbe0b6bc6c5227e88a41", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/59006dfa7989b3446606bbe0b6bc6c5227e88a41", "committedDate": "2020-06-23T13:59:47Z", "message": "Add CORS API"}, "afterCommit": {"oid": "bac0855db57426c3398fb06dedbf6573ab06cc1f", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/bac0855db57426c3398fb06dedbf6573ab06cc1f", "committedDate": "2020-07-09T05:02:58Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bac0855db57426c3398fb06dedbf6573ab06cc1f", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/bac0855db57426c3398fb06dedbf6573ab06cc1f", "committedDate": "2020-07-09T05:02:58Z", "message": "Add CORS API"}, "afterCommit": {"oid": "76c4038725529bdf7fa03d36c8bd8e02223ef78b", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/76c4038725529bdf7fa03d36c8bd8e02223ef78b", "committedDate": "2020-07-09T05:07:52Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76c4038725529bdf7fa03d36c8bd8e02223ef78b", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/76c4038725529bdf7fa03d36c8bd8e02223ef78b", "committedDate": "2020-07-09T05:07:52Z", "message": "Add CORS API"}, "afterCommit": {"oid": "976c39686ab214593e3738d58bb9e608d545cb56", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/976c39686ab214593e3738d58bb9e608d545cb56", "committedDate": "2020-07-10T04:34:14Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "976c39686ab214593e3738d58bb9e608d545cb56", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/976c39686ab214593e3738d58bb9e608d545cb56", "committedDate": "2020-07-10T04:34:14Z", "message": "Add CORS API"}, "afterCommit": {"oid": "a6ba02277dc17ae7612d3daa912c4f1031e37f08", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/a6ba02277dc17ae7612d3daa912c4f1031e37f08", "committedDate": "2020-07-13T04:58:31Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ce85821591d92ad65805f59191779aefb3adbea", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/9ce85821591d92ad65805f59191779aefb3adbea", "committedDate": "2020-07-13T05:33:04Z", "message": "Add CORS API"}, "afterCommit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6f909d93866c8bb7457b723f7c5624b5b71eb891", "committedDate": "2020-07-13T09:34:53Z", "message": "Add CORS API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MTIxNDc5", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-447121479", "createdAt": "2020-07-13T10:18:55Z", "commit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxODo1NlrOGwiVyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxODo1NlrOGwiVyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NzQ2Nw==", "bodyText": "I think better to remove this.", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r453547467", "createdAt": "2020-07-13T10:18:56Z", "author": {"login": "ashensw"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.v1/src/main/resources/configs.yaml", "diffHunk": "@@ -253,7 +253,156 @@ paths:\n             application/json:\n               schema:\n                 $ref: '#/components/schemas/Error'\n+  /configs/cors:\n+    get:\n+      tags:\n+        - CORS Configs\n+      summary: Retrieve the tenant CORS configuration.\n+      operationId: getCORSConfiguration\n+      description: Retrieve the tenant CORS configuration.\n+      responses:\n+        '200':\n+          description: Successful Response\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/CORSConfig'\n+        '400':\n+          description: Bad Request\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '401':\n+          description: Unauthorized\n+        '403':\n+          description: Forbidden\n+        '404':\n+          description: Not Found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '500':\n+          description: Server Error\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+    patch:\n+      tags:\n+        - CORS Configs\n+      summary: Patch the tenant CORS configuration.\n+      operationId: patchCORSConfiguration\n+      description: A JSONPatch as defined by RFC 6902.\n+      requestBody:\n+        content:\n+          application/json:\n+            schema:\n+              $ref: '#/components/schemas/CORSPatchRequest'\n+        required: true\n+      responses:\n+        '200':\n+          description: Successful Response\n+        '400':\n+          description: Bad Request\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '401':\n+          description: Unauthorized\n+        '403':\n+          description: Forbidden\n+        '404':\n+          description: Not Found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '500':\n+          description: Server Error\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+  /configs/cors-origins:\n+    get:\n+      tags:\n+        - Tenant CORS origins\n+      summary: Retrieve the tenant CORS origins.\n+      operationId: getCORSOrigins\n+      description: Retrieve the tenant CORS origins.\n+      responses:\n+        '200':\n+          description: Successful Response\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/CORSOriginsGetResponse'\n+        '400':\n+          description: Bad Request\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '401':\n+          description: Unauthorized\n+        '403':\n+          description: Forbidden\n+        '404':\n+          description: Not Found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '500':\n+          description: Server Error\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+    patch:\n+      tags:\n+        - Tenant CORS origins\n+      summary: Patch the tenant CORS origins.\n+      operationId: patchCORSOrigins\n+      description: A JSONPatch as defined by RFC 6902.\n+      requestBody:\n+        content:\n+          application/json:\n+            schema:\n+              $ref: '#/components/schemas/CORSOriginPatchRequest'\n+        required: true\n+      responses:\n+        '200':\n+          description: Successful Response\n+        '400':\n+          description: Bad Request\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '401':\n+          description: Unauthorized\n+        '403':\n+          description: Forbidden\n+        '404':\n+          description: Not Found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n+        '500':\n+          description: Server Error\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/Error'\n servers:\n+  # Added by API Auto Mocking Plugin\n+  - description: SwaggerHub API Auto Mocking\n+    url: https://virtserver.swaggerhub.com/ivantha/wso2-cors-api/1.0.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891"}, "originalPosition": 170}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MjgwNTU4", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-447280558", "createdAt": "2020-07-13T14:02:28Z", "commit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNDowMjoyOFrOGwp_Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNDowMjoyOFrOGwp_Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzY3MjcyNg==", "bodyText": "Shall we update the version?", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r453672726", "createdAt": "2020-07-13T14:02:28Z", "author": {"login": "ashensw"}, "path": "pom.xml", "diffHunk": "@@ -510,7 +515,8 @@\n         <maven.buildnumber.plugin.version>1.4</maven.buildnumber.plugin.version>\n         <org.apache.felix.annotations.version>1.2.4</org.apache.felix.annotations.version>\n         <identity.governance.version>1.3.15</identity.governance.version>\n-        <carbon.identity.framework.version>5.18.0</carbon.identity.framework.version>\n+        <!--TODO-->\n+        <carbon.identity.framework.version>5.18.18-SNAPSHOT</carbon.identity.framework.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f909d93866c8bb7457b723f7c5624b5b71eb891", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6f909d93866c8bb7457b723f7c5624b5b71eb891", "committedDate": "2020-07-13T09:34:53Z", "message": "Add CORS API"}, "afterCommit": {"oid": "bbeb58b2cbf503d9238d9bb995d653bb14f759d4", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/bbeb58b2cbf503d9238d9bb995d653bb14f759d4", "committedDate": "2020-07-14T03:35:22Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbeb58b2cbf503d9238d9bb995d653bb14f759d4", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/bbeb58b2cbf503d9238d9bb995d653bb14f759d4", "committedDate": "2020-07-14T03:35:22Z", "message": "Add CORS API"}, "afterCommit": {"oid": "b8000c9ca432557a991a3e212831b2d9e4d69ddf", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/b8000c9ca432557a991a3e212831b2d9e4d69ddf", "committedDate": "2020-07-15T07:16:10Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8000c9ca432557a991a3e212831b2d9e4d69ddf", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/b8000c9ca432557a991a3e212831b2d9e4d69ddf", "committedDate": "2020-07-15T07:16:10Z", "message": "Add CORS API"}, "afterCommit": {"oid": "983b26eea96b8872b86672def5a4d09fa0ed1e17", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/983b26eea96b8872b86672def5a4d09fa0ed1e17", "committedDate": "2020-07-15T12:53:39Z", "message": "Add CORS API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "983b26eea96b8872b86672def5a4d09fa0ed1e17", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/983b26eea96b8872b86672def5a4d09fa0ed1e17", "committedDate": "2020-07-15T12:53:39Z", "message": "Add CORS API"}, "afterCommit": {"oid": "295ae9aa3f9e861cd03453e454626299927795dd", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/295ae9aa3f9e861cd03453e454626299927795dd", "committedDate": "2020-07-15T12:55:32Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "295ae9aa3f9e861cd03453e454626299927795dd", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/295ae9aa3f9e861cd03453e454626299927795dd", "committedDate": "2020-07-15T12:55:32Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6837a3ba4ecfe205e4be67c83c815ee3a3611fa0", "committedDate": "2020-07-17T09:40:24Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTI5MDA0", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-450529004", "createdAt": "2020-07-17T09:56:18Z", "commit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1NjoxOFrOGzNA9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1NjoxOFrOGzNA9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0Mzc5OA==", "bodyText": "can't we inline 77 and 78?", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456343798", "createdAt": "2020-07-17T09:56:18Z", "author": {"login": "dewniMW"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.common/src/main/java/org/wso2/carbon/identity/api/server/configs/common/Constants.java", "diffHunk": "@@ -46,13 +62,34 @@ private Constants() {\n         ERROR_CODE_ERROR_RETRIEVING_AUTHENTICATOR(\"65003\",\n                 \"Unable to retrieve authenticator.\",\n                 \"Server encountered an error while retrieving the authenticator for the identifier %s.\"),\n-        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\", \"Resource not found.\",\n+        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\",\n+                \"Resource not found.\",\n                 \"Unable to find a resource matching the provided authenticator identifier %s.\"),\n-        ERROR_CODE_INVALID_INPUT(\"60003\", \"Invalid input.\", \"One of the given inputs is invalid. %s.\"),\n-        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\", \"Unable to update server configs.\", \"Server encountered an \" +\n+        ERROR_CODE_INVALID_INPUT(\"60003\",\n+                \"Invalid input.\",\n+                \"One of the given inputs is invalid. %s.\"),\n+        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\",\n+                \"Unable to update server configs.\",\n+                \"Server encountered an \" +\n                 \"error while updating the server configs.\"),\n-        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\", \"Unable to retrieve server configs.\", \"Server encountered an \" +\n-                \"error while retrieving the server configs.\");\n+        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\",\n+                \"Unable to retrieve server configs.\",\n+                \"Server encountered an \" +\n+                \"error while retrieving the server configs.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTI5Mzg1", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-450529385", "createdAt": "2020-07-17T09:56:51Z", "commit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1Njo1MlrOGzNCGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1Njo1MlrOGzNCGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0NDA5MQ==", "bodyText": "Is this TODO still needed?", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456344091", "createdAt": "2020-07-17T09:56:52Z", "author": {"login": "dewniMW"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.common/src/main/java/org/wso2/carbon/identity/api/server/configs/common/Constants.java", "diffHunk": "@@ -46,13 +62,34 @@ private Constants() {\n         ERROR_CODE_ERROR_RETRIEVING_AUTHENTICATOR(\"65003\",\n                 \"Unable to retrieve authenticator.\",\n                 \"Server encountered an error while retrieving the authenticator for the identifier %s.\"),\n-        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\", \"Resource not found.\",\n+        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\",\n+                \"Resource not found.\",\n                 \"Unable to find a resource matching the provided authenticator identifier %s.\"),\n-        ERROR_CODE_INVALID_INPUT(\"60003\", \"Invalid input.\", \"One of the given inputs is invalid. %s.\"),\n-        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\", \"Unable to update server configs.\", \"Server encountered an \" +\n+        ERROR_CODE_INVALID_INPUT(\"60003\",\n+                \"Invalid input.\",\n+                \"One of the given inputs is invalid. %s.\"),\n+        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\",\n+                \"Unable to update server configs.\",\n+                \"Server encountered an \" +\n                 \"error while updating the server configs.\"),\n-        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\", \"Unable to retrieve server configs.\", \"Server encountered an \" +\n-                \"error while retrieving the server configs.\");\n+        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\",\n+                \"Unable to retrieve server configs.\",\n+                \"Server encountered an \" +\n+                \"error while retrieving the server configs.\"),\n+\n+        //TODO: What should be the error prefix?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTMxMTQw", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-450531140", "createdAt": "2020-07-17T09:59:26Z", "commit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1OToyNlrOGzNHNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1OToyNlrOGzNHNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0NTM5OQ==", "bodyText": "can path be null here?", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456345399", "createdAt": "2020-07-17T09:59:26Z", "author": {"login": "dewniMW"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.v1/src/main/java/org/wso2/carbon/identity/api/server/configs/v1/core/ServerConfigManagementService.java", "diffHunk": "@@ -246,6 +262,192 @@ public void updateInboundScimConfigs(ScimConfig scimConfig) {\n         }\n     }\n \n+    /**\n+     * Get a list of CORS origins allowed by the tenant.\n+     *\n+     * @return List of CORSOriginGetObject.\n+     */\n+    public List<CORSOriginGetObject> getCORSOrigins() {\n+\n+        try {\n+            String tenantDomain = ContextLoader.getTenantDomainFromContext();\n+            List<CORSOrigin> corsOriginList = ConfigsServiceHolder.getInstance().getCorsManagementService()\n+                    .getTenantCORSOrigins(tenantDomain);\n+            return corsOriginList.stream().map(new CORSOriginToCORSOriginGetObject()).collect(Collectors.toList());\n+        } catch (CORSManagementServiceException e) {\n+            throw handleCORSException(e, Constants.ErrorMessage.ERROR_CODE_CORS_RETRIEVE, null);\n+        }\n+    }\n+\n+    /**\n+     * Patch CORS origins. Patch 'REPLACE', 'ADD', 'REMOVE' operations have been supported for primary attributes in\n+     * CORSOrigin model.\n+     *\n+     * @param patchRequest Patch request in Json Patch notation See\n+     *                     <a href=\"https://tools.ietf.org/html/rfc6902\">https://tools.ietf\n+     *                     .org/html/rfc6902</a>.\n+     */\n+    public void patchCORSOrigins(List<CORSOriginsPatch> patchRequest) {\n+\n+        if (CollectionUtils.isEmpty(patchRequest)) {\n+            return;\n+        }\n+\n+        String tenantDomain = ContextLoader.getTenantDomainFromContext();\n+\n+        for (CORSOriginsPatch corsOriginsPatch : patchRequest) {\n+            String path = corsOriginsPatch.getPath();\n+            CORSOriginsPatch.OperationEnum operation = corsOriginsPatch.getOperation();\n+            CORSOriginPatchObject corsOriginPatchObject = corsOriginsPatch.getValue();\n+\n+            try {\n+                // We support only 'REPLACE', 'ADD' and 'REMOVE' patch operations.\n+                if (operation == CORSOriginsPatch.OperationEnum.REPLACE) {\n+                    if (path.matches(Constants.CORS_ORIGIN_PATH_REGEX)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 95}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTI3OTAy", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-450527902", "createdAt": "2020-07-17T09:54:39Z", "commit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTo1NDozOVrOGzM9fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMDowMzozMFrOGzNQHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0MjkxMQ==", "bodyText": "shall we define only the code here similar to the other error enums defined above? PREFIX can be defined in a constant.", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456342911", "createdAt": "2020-07-17T09:54:39Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.common/src/main/java/org/wso2/carbon/identity/api/server/configs/common/Constants.java", "diffHunk": "@@ -46,13 +62,34 @@ private Constants() {\n         ERROR_CODE_ERROR_RETRIEVING_AUTHENTICATOR(\"65003\",\n                 \"Unable to retrieve authenticator.\",\n                 \"Server encountered an error while retrieving the authenticator for the identifier %s.\"),\n-        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\", \"Resource not found.\",\n+        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\",\n+                \"Resource not found.\",\n                 \"Unable to find a resource matching the provided authenticator identifier %s.\"),\n-        ERROR_CODE_INVALID_INPUT(\"60003\", \"Invalid input.\", \"One of the given inputs is invalid. %s.\"),\n-        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\", \"Unable to update server configs.\", \"Server encountered an \" +\n+        ERROR_CODE_INVALID_INPUT(\"60003\",\n+                \"Invalid input.\",\n+                \"One of the given inputs is invalid. %s.\"),\n+        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\",\n+                \"Unable to update server configs.\",\n+                \"Server encountered an \" +\n                 \"error while updating the server configs.\"),\n-        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\", \"Unable to retrieve server configs.\", \"Server encountered an \" +\n-                \"error while retrieving the server configs.\");\n+        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\",\n+                \"Unable to retrieve server configs.\",\n+                \"Server encountered an \" +\n+                \"error while retrieving the server configs.\"),\n+\n+        //TODO: What should be the error prefix?\n+        ERROR_CODE_CORS_CONFIG_RETRIEVE(\"RST-65001\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0MzQ1MA==", "bodyText": "inline 77 and 78", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456343450", "createdAt": "2020-07-17T09:55:32Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.common/src/main/java/org/wso2/carbon/identity/api/server/configs/common/Constants.java", "diffHunk": "@@ -46,13 +62,34 @@ private Constants() {\n         ERROR_CODE_ERROR_RETRIEVING_AUTHENTICATOR(\"65003\",\n                 \"Unable to retrieve authenticator.\",\n                 \"Server encountered an error while retrieving the authenticator for the identifier %s.\"),\n-        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\", \"Resource not found.\",\n+        ERROR_CODE_AUTHENTICATOR_NOT_FOUND(\"60002\",\n+                \"Resource not found.\",\n                 \"Unable to find a resource matching the provided authenticator identifier %s.\"),\n-        ERROR_CODE_INVALID_INPUT(\"60003\", \"Invalid input.\", \"One of the given inputs is invalid. %s.\"),\n-        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\", \"Unable to update server configs.\", \"Server encountered an \" +\n+        ERROR_CODE_INVALID_INPUT(\"60003\",\n+                \"Invalid input.\",\n+                \"One of the given inputs is invalid. %s.\"),\n+        ERROR_CODE_ERROR_UPDATING_CONFIGS(\"65004\",\n+                \"Unable to update server configs.\",\n+                \"Server encountered an \" +\n                 \"error while updating the server configs.\"),\n-        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\", \"Unable to retrieve server configs.\", \"Server encountered an \" +\n-                \"error while retrieving the server configs.\");\n+        ERROR_CODE_ERROR_RETRIEVING_CONFIGS(\"65005\",\n+                \"Unable to retrieve server configs.\",\n+                \"Server encountered an \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM0NzY3OQ==", "bodyText": "remove unnecessary new line", "url": "https://github.com/wso2/identity-api-server/pull/177#discussion_r456347679", "createdAt": "2020-07-17T10:03:30Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.configs/org.wso2.carbon.identity.api.server.configs.v1/src/main/java/org/wso2/carbon/identity/api/server/configs/v1/function/CORSOriginToCORSOriginGetObject.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6837a3ba4ecfe205e4be67c83c815ee3a3611fa0", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6837a3ba4ecfe205e4be67c83c815ee3a3611fa0", "committedDate": "2020-07-17T09:40:24Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "2e142e28ed74b4f1db424a72df58e53ee8b6ff7f", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/2e142e28ed74b4f1db424a72df58e53ee8b6ff7f", "committedDate": "2020-07-21T03:27:51Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e142e28ed74b4f1db424a72df58e53ee8b6ff7f", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/2e142e28ed74b4f1db424a72df58e53ee8b6ff7f", "committedDate": "2020-07-21T03:27:51Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "0147613c5d8a9479b8b422e07d287e7cd53ca618", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/0147613c5d8a9479b8b422e07d287e7cd53ca618", "committedDate": "2020-07-22T11:48:31Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0147613c5d8a9479b8b422e07d287e7cd53ca618", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/0147613c5d8a9479b8b422e07d287e7cd53ca618", "committedDate": "2020-07-22T11:48:31Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "8285ce0e7c584fc53d4045e1a314c0efa57f1b4b", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/8285ce0e7c584fc53d4045e1a314c0efa57f1b4b", "committedDate": "2020-07-23T02:51:16Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8285ce0e7c584fc53d4045e1a314c0efa57f1b4b", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/8285ce0e7c584fc53d4045e1a314c0efa57f1b4b", "committedDate": "2020-07-23T02:51:16Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "c83dd3610326d0a8fdb7c92aa3e339ebc9e2e423", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/c83dd3610326d0a8fdb7c92aa3e339ebc9e2e423", "committedDate": "2020-07-28T05:07:51Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDY0NTI0", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-456464524", "createdAt": "2020-07-28T09:33:21Z", "commit": {"oid": "c83dd3610326d0a8fdb7c92aa3e339ebc9e2e423"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c83dd3610326d0a8fdb7c92aa3e339ebc9e2e423", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/c83dd3610326d0a8fdb7c92aa3e339ebc9e2e423", "committedDate": "2020-07-28T05:07:51Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "13397145f5e7ddffcc51d1f8e695e14192870dfb", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/13397145f5e7ddffcc51d1f8e695e14192870dfb", "committedDate": "2020-08-04T19:04:48Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13397145f5e7ddffcc51d1f8e695e14192870dfb", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/13397145f5e7ddffcc51d1f8e695e14192870dfb", "committedDate": "2020-08-04T19:04:48Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "6cfa49f16615e7852e09d655b897603c2cb75237", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6cfa49f16615e7852e09d655b897603c2cb75237", "committedDate": "2020-08-05T02:08:41Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTc4MzEx", "url": "https://github.com/wso2/identity-api-server/pull/177#pullrequestreview-461578311", "createdAt": "2020-08-05T11:31:51Z", "commit": {"oid": "6cfa49f16615e7852e09d655b897603c2cb75237"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4716a0dd3c7526248a74d8f1168e389827f87485", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/4716a0dd3c7526248a74d8f1168e389827f87485", "committedDate": "2020-08-06T14:39:26Z", "message": "Add CORS API for tenant admins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cfa49f16615e7852e09d655b897603c2cb75237", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/6cfa49f16615e7852e09d655b897603c2cb75237", "committedDate": "2020-08-05T02:08:41Z", "message": "Add CORS API for tenant admins"}, "afterCommit": {"oid": "4716a0dd3c7526248a74d8f1168e389827f87485", "author": {"user": {"login": "ivantha", "name": "Ivantha"}}, "url": "https://github.com/wso2/identity-api-server/commit/4716a0dd3c7526248a74d8f1168e389827f87485", "committedDate": "2020-08-06T14:39:26Z", "message": "Add CORS API for tenant admins"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1373, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}