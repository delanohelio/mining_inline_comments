{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MjE0Njg5", "number": 230, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoxNTo0NFrOE3Eyow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQxMDo1MDowMFrOFOngCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg1NjM1OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoxNTo0NFrOHwNb_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNjowMFrOHxrDvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxMzg1NA==", "bodyText": "This variable declaration is not needed. Can initialize the value directly in the following step.", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520313854", "createdAt": "2020-11-10T06:15:44Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0Nzc0Mw==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521847743", "createdAt": "2020-11-12T05:26:00Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxMzg1NA=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg1ODI0OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoxNjowOFrOHwNdAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNjo0MlrOHxrE3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNDExMg==", "bodyText": "Remove extra lines", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520314112", "createdAt": "2020-11-10T06:16:08Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0ODAyOA==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521848028", "createdAt": "2020-11-12T05:26:42Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNDExMg=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg2NzI4OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoxODo0NFrOHwNi6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNzowNlrOHxrFcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNTYyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());\n          \n          \n            \n                     String displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName(), StandardCharsets.UTF_8.name());", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520315624", "createdAt": "2020-11-10T06:18:44Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzA2Mw==", "bodyText": "Added a suggestion because encode(scriptLibrary.getFunctionLibraryName() is a depricated method", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520317063", "createdAt": "2020-11-10T06:21:38Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNTYyNA=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0ODE3OQ==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521848179", "createdAt": "2020-11-12T05:27:06Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNTYyNA=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg3Mzk1OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoyMDo0OFrOHwNnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNzozMVrOHxrF-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNjcxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + displayName + SCRIPT_LIBRARY_CONTENT_PATH,\n          \n          \n            \n                            V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520316710", "createdAt": "2020-11-10T06:20:48Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n+                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + displayName + SCRIPT_LIBRARY_CONTENT_PATH,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0ODMxMg==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521848312", "createdAt": "2020-11-12T05:27:31Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n+                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + displayName + SCRIPT_LIBRARY_CONTENT_PATH,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNjcxMA=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg3NjU0OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoyMTo1MFrOHwNo1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNTo0NlrOHxrDfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzE0MQ==", "bodyText": "Remove new line", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520317141", "createdAt": "2020-11-10T06:21:50Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n+                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + displayName + SCRIPT_LIBRARY_CONTENT_PATH,\n+                displayName)).toString().replace(\"+\", \"%20\"));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0NzY3Nw==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521847677", "createdAt": "2020-11-12T05:25:46Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -280,12 +281,19 @@ public boolean isScriptLibraryAvailable(String scriptLibraryName) {\n      */\n     private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary scriptLibrary) {\n \n+        String displayName;\n+\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n+\n+\n+        displayName = URLEncoder.encode(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n+                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + displayName + SCRIPT_LIBRARY_CONTENT_PATH,\n+                displayName)).toString().replace(\"+\", \"%20\"));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzE0MQ=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTg3OTE2OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNjoyMjo1NVrOHwNqpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyNDozOVrOHxrB7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzYwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + URLEncoder.encode(name));\n          \n          \n            \n                                    V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + URLEncoder.encode(name), StandardCharsets.UTF_8.name());", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520317605", "createdAt": "2020-11-10T06:22:55Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "diffHunk": "@@ -46,7 +47,8 @@ public Response addScriptLibrary(String name, InputStream contentInputStream, At\n \n         serverScriptLibrariesService.addScriptLibrary(name, contentInputStream, description);\n         URI location =\n-                ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + name);\n+                ContextLoader.buildURIForHeader(\n+                        V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + URLEncoder.encode(name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxODA0NA==", "bodyText": "also, replace + by %20, because this reference will be returned in the headers", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r520318044", "createdAt": "2020-11-10T06:23:53Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "diffHunk": "@@ -46,7 +47,8 @@ public Response addScriptLibrary(String name, InputStream contentInputStream, At\n \n         serverScriptLibrariesService.addScriptLibrary(name, contentInputStream, description);\n         URI location =\n-                ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + name);\n+                ContextLoader.buildURIForHeader(\n+                        V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + URLEncoder.encode(name));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzYwNQ=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0NzI3OA==", "bodyText": "Fixed in f72b9a5", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r521847278", "createdAt": "2020-11-12T05:24:39Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "diffHunk": "@@ -46,7 +47,8 @@ public Response addScriptLibrary(String name, InputStream contentInputStream, At\n \n         serverScriptLibrariesService.addScriptLibrary(name, contentInputStream, description);\n         URI location =\n-                ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + name);\n+                ContextLoader.buildURIForHeader(\n+                        V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + URLEncoder.encode(name));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMxNzYwNQ=="}, "originalCommit": {"oid": "e18044d3cae6a172155ed32f471584f59a2f3eb1"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUwODcwNTIyOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQxMDo0NzoyN1rOITfK6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQwNToyODo1OVrOIUBuHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNDU1NA==", "bodyText": "ErrorResponse errorResponse =\n                new ErrorResponse.Builder().withCode(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getCode()).withMessage(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage())\n            .withDescription(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getDescription()).build();\n        throw new APIError(Response.Status.INTERNAL_SERVER_ERROR, errorResponse);", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557304554", "createdAt": "2021-01-14T10:47:27Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -283,10 +285,18 @@ private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary script\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n-        scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n-        return scriptLibraryResponse;\n+        try {\n+            String displayName =\n+                    URLEncoder.encode(scriptLibrary.getFunctionLibraryName(), StandardCharsets.UTF_8.name());\n+            scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n+                    V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n+                    displayName)).toString().replace(\"+\", \"%20\"));\n+            return scriptLibraryResponse;\n+        } catch (UnsupportedEncodingException e) {\n+            FunctionLibraryManagementException error = new FunctionLibraryManagementException(\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage(), e);\n+            throw handleScriptLibraryError(error, Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Nzg3MDYyMQ==", "bodyText": "This fix is not required since handleScriptLibraryError method can access even the access modifier is private.", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557870621", "createdAt": "2021-01-15T05:28:59Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -283,10 +285,18 @@ private ScriptLibraryResponse createScriptLibraryResponse(FunctionLibrary script\n         ScriptLibraryResponse scriptLibraryResponse = new ScriptLibraryResponse();\n         scriptLibraryResponse.setName(scriptLibrary.getFunctionLibraryName());\n         scriptLibraryResponse.setDescription(scriptLibrary.getDescription());\n-        scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n-                V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n-                scriptLibrary.getFunctionLibraryName())).toString());\n-        return scriptLibraryResponse;\n+        try {\n+            String displayName =\n+                    URLEncoder.encode(scriptLibrary.getFunctionLibraryName(), StandardCharsets.UTF_8.name());\n+            scriptLibraryResponse.setContentRef(ContextLoader.buildURIForBody(String.format(\n+                    V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/%s\" + SCRIPT_LIBRARY_CONTENT_PATH,\n+                    displayName)).toString().replace(\"+\", \"%20\"));\n+            return scriptLibraryResponse;\n+        } catch (UnsupportedEncodingException e) {\n+            FunctionLibraryManagementException error = new FunctionLibraryManagementException(\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage(), e);\n+            throw handleScriptLibraryError(error, Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNDU1NA=="}, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUwODcxMjE0OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQxMDo0OTowMVrOITfPJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQwNToyOTozNFrOIUBuxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNTYzNg==", "bodyText": "ErrorResponse errorResponse =\n            new ErrorResponse.Builder().withCode(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getCode()).withMessage(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage()).withDescription(Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getDescription()).build();\n    throw new APIError(Response.Status.INTERNAL_SERVER_ERROR, errorResponse);", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557305636", "createdAt": "2021-01-14T10:49:01Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "diffHunk": "@@ -45,9 +52,17 @@ public Response addScriptLibrary(String name, InputStream contentInputStream, At\n                                      String description) {\n \n         serverScriptLibrariesService.addScriptLibrary(name, contentInputStream, description);\n-        URI location =\n-                ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + name);\n-        return Response.created(location).build();\n+        try {\n+            URI location =\n+                    ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT\n+                            + \"/\" + URLEncoder.encode(name, StandardCharsets.UTF_8.name())\n+                            .replace(\"+\", \"%20\"));\n+            return Response.created(location).build();\n+        } catch (UnsupportedEncodingException e) {\n+            FunctionLibraryManagementException error = new FunctionLibraryManagementException(\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage(), e);\n+            throw handleScriptLibraryError(error, Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Nzg3MDc4OA==", "bodyText": "Fixed in a642597", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557870788", "createdAt": "2021-01-15T05:29:34Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/impl/ScriptLibrariesApiServiceImpl.java", "diffHunk": "@@ -45,9 +52,17 @@ public Response addScriptLibrary(String name, InputStream contentInputStream, At\n                                      String description) {\n \n         serverScriptLibrariesService.addScriptLibrary(name, contentInputStream, description);\n-        URI location =\n-                ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT + \"/\" + name);\n-        return Response.created(location).build();\n+        try {\n+            URI location =\n+                    ContextLoader.buildURIForHeader(V1_API_PATH_COMPONENT + SCRIPT_LIBRARY_PATH_COMPONENT\n+                            + \"/\" + URLEncoder.encode(name, StandardCharsets.UTF_8.name())\n+                            .replace(\"+\", \"%20\"));\n+            return Response.created(location).build();\n+        } catch (UnsupportedEncodingException e) {\n+            FunctionLibraryManagementException error = new FunctionLibraryManagementException(\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL.getMessage(), e);\n+            throw handleScriptLibraryError(error, Constants.ErrorMessage.ERROR_CODE_ERROR_ENCODING_URL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNTYzNg=="}, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUwODcxNTYyOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQxMDo1MDowMFrOITfRaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQwNTozMDowMVrOIUBvZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNjIxNw==", "bodyText": "Let's do not modify the access modifiers of the methods. Check other places as well", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557306217", "createdAt": "2021-01-14T10:50:00Z", "author": {"login": "AnuradhaSK"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -425,7 +436,7 @@ private void createErrorResponse(FunctionLibraryManagementException e, ErrorResp\n      * @param errorMsg Error Message information.\n      * @return ErrorResponse.Builder.\n      */\n-    private ErrorResponse.Builder getErrorBuilder(Constants.ErrorMessage errorMsg) {\n+    public static ErrorResponse.Builder getErrorBuilder(Constants.ErrorMessage errorMsg) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Nzg3MDk0OQ==", "bodyText": "Fixed in a642597", "url": "https://github.com/wso2/identity-api-server/pull/230#discussion_r557870949", "createdAt": "2021-01-15T05:30:01Z", "author": {"login": "AnjanaSamindraPerera"}, "path": "components/org.wso2.carbon.identity.api.server.script.library/org.wso2.carbon.identity.api.server.script.library.v1/src/main/java/org/wso2/carbon/identity/api/server/script/library/v1/core/ServerScriptLibrariesService.java", "diffHunk": "@@ -425,7 +436,7 @@ private void createErrorResponse(FunctionLibraryManagementException e, ErrorResp\n      * @param errorMsg Error Message information.\n      * @return ErrorResponse.Builder.\n      */\n-    private ErrorResponse.Builder getErrorBuilder(Constants.ErrorMessage errorMsg) {\n+    public static ErrorResponse.Builder getErrorBuilder(Constants.ErrorMessage errorMsg) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzMwNjIxNw=="}, "originalCommit": {"oid": "f72b9a554a689f73c11753281a0ea46942c080f1"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1454, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}