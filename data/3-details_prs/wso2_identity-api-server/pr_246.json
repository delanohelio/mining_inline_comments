{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NjE3Njc1", "number": 246, "title": "Consider confidentiality during connector properties retrieval", "bodyText": "Purpose\nResolves wso2/product-is#10620\nDepends on wso2-extensions/identity-governance#466\nGoals\nLet's say Recovery.AdminPasswordReset.RecoveryLink is a confidential property.\n\nScenario:-1 Requesting the confidential property through the API\n\nRequest\nPOST /t/carbon.super/api/server/v1/identity-governance/preferences HTTP/1.1\nHost: localhost:9443\nAuthorization: Basic YWRtaW46YWRtaW4=\nContent-Type: application/json\n\n[\n    {\n        \"connector-name\": \"admin-forced-password-reset\",\n        \"properties\": [\n            \"Recovery.AdminPasswordReset.RecoveryLink\",\n            \"Recovery.AdminPasswordReset.Offline\"\n        ]\n    },\n    {\n        \"connector-name\": \"self-sign-up\",\n        \"properties\": [\n            \"SelfRegistration.Enable\",\n            \"SelfRegistration.LockOnCreation\"\n        ]\n    }\n]\n\nResponse\n{\n    \"code\": \"IDG-50012\",\n    \"message\": \"Unsupported property name\",\n    \"description\": \"The property Recovery.AdminPasswordReset.RecoveryLink is not supported by the server.\",\n    \"traceId\": \"35c32cf0-bf5f-451f-9e24-3a6dddac11a4\"\n}\n\n\nScenario:-2 Requesting a wrong property through the API\n\nRequest\n[\n  {\n    \"connector-name\": \"admin-forced-password-reset\",\n    \"properties\": [\n      \"Recovery.AdminPasswordReset.OfflineSample\"\n    ]\n  },\n{\n    \"connector-name\": \"self-sign-up\",\n    \"properties\": [\n      \"SelfRegistration.Enable\",\n      \"SelfRegistration.LockOnCreation\"\n    ]\n  }\n]\n\nResponse\n{\n    \"code\": \"IDG-50012\",\n    \"message\": \"Unsupported property name\",\n    \"description\": \"The property Recovery.AdminPasswordReset.OfflineSample is not supported by the server.\",\n    \"traceId\": \"2fb8cdcb-b2fa-466c-a1b4-d210f517b131\"\n}\n\n\nScenario:-3 Requesting specific properties\n\nRequest\n[\n  `{`\n    \"connector-name\": \"admin-forced-password-reset\",\n    \"properties\": [\n      \"Recovery.AdminPasswordReset.Offline\"\n    ]\n  },\n{\n    \"connector-name\": \"self-sign-up\",\n    \"properties\": [\n      \"SelfRegistration.Enable\",\n      \"SelfRegistration.LockOnCreation\"\n    ]\n  }\n]\n\nResponse\n[\n    {\n        \"connector-name\": \"admin-forced-password-reset\",\n        \"properties\": [\n            {\n                \"name\": \"Recovery.AdminPasswordReset.Offline\",\n                \"value\": \"false\"\n            }\n        ]\n    },\n    {\n        \"connector-name\": \"self-sign-up\",\n        \"properties\": [\n            {\n                \"name\": \"SelfRegistration.Enable\",\n                \"value\": \"false\"\n            },\n            {\n                \"name\": \"SelfRegistration.LockOnCreation\",\n                \"value\": \"true\"\n            }\n        ]\n    }\n]\n\n\nScenario:-4 Requesting all the properties of a connector\nRequest\n\n[\n  {\n    \"connector-name\": \"admin-forced-password-reset\"\n  },\n{\n    \"connector-name\": \"self-sign-up\"\n  }\n]\n\n\nResponse\n[\n    {\n        \"connector-name\": \"admin-forced-password-reset\",\n        \"properties\": [\n            {\n                \"name\": \"Recovery.AdminPasswordReset.OTP\",\n                \"value\": \"false\"\n            },\n            {\n                \"name\": \"Recovery.AdminPasswordReset.Offline\",\n                \"value\": \"false\"\n            }\n        ]\n    },\n    {\n        \"connector-name\": \"self-sign-up\",\n        \"properties\": [\n            {\n                \"name\": \"SelfRegistration.Enable\",\n                \"value\": \"false\"\n            },\n            {\n                \"name\": \"SelfRegistration.LockOnCreation\",\n                \"value\": \"true\"\n            },\n            {\n                \"name\": \"SelfRegistration.Notification.InternallyManage\",\n                \"value\": \"true\"\n            },\n            {\n                \"name\": \"SelfRegistration.ReCaptcha\",\n                \"value\": \"true\"\n            },\n            {\n                \"name\": \"SelfRegistration.VerificationCode.ExpiryTime\",\n                \"value\": \"1440\"\n            },\n            {\n                \"name\": \"SelfRegistration.VerificationCode.SMSOTP.ExpiryTime\",\n                \"value\": \"1\"\n            },\n            {\n                \"name\": \"SelfRegistration.CallbackRegex\",\n                \"value\": \"[https://localhost:9443].*[/authenticationendpoint/login.do]\"\n            },\n            {\n                \"name\": \"_url_listPurposeSelfSignUp\",\n                \"value\": \"/carbon/consent/list-purposes.jsp?purposeGroup=SELF-SIGNUP&purposeGroupType=SYSTEM&callback=%2Fcarbon%2Fidpmgt%2Fidp-mgt-edit-local.jsp%3Fcategory%3DUser+Onboarding%26subCategory%3DSelf+Registration\"\n            },\n            {\n                \"name\": \"SelfRegistration.NotifyAccountConfirmation\",\n                \"value\": \"false\"\n            },\n            {\n                \"name\": \"SelfRegistration.ResendConfirmationReCaptcha\",\n                \"value\": \"false\"\n            }\n        ]\n    }\n]", "createdAt": "2020-12-10T03:52:22Z", "url": "https://github.com/wso2/identity-api-server/pull/246", "merged": true, "mergeCommit": {"oid": "bd3e85343347445a231286f0217c2e2504488057"}, "closed": true, "closedAt": "2020-12-16T10:26:02Z", "author": {"login": "nilasini"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkq8-DgH2gAyNTM1NjE3Njc1OjFmNTEwZmU5NjM2ZDM4ZmY3NDIzMTdkYTgwNTYwY2EyNDI1MWZmZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmsBvggH2gAyNTM1NjE3Njc1OjkxOTQ5YzJkZWJhMmY3NGU3NGE1OGUxZmQ3YThmN2MzMGQ2OTg1N2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1f510fe9636d38ff742317da80560ca24251fff4", "author": {"user": {"login": "nilasini", "name": "nilasini"}}, "url": "https://github.com/wso2/identity-api-server/commit/1f510fe9636d38ff742317da80560ca24251fff4", "committedDate": "2020-12-10T03:41:07Z", "message": "Include confidential property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f272e2bb7c1b160eb3b18c9ffb8663487a03b507", "author": {"user": {"login": "nilasini", "name": "nilasini"}}, "url": "https://github.com/wso2/identity-api-server/commit/f272e2bb7c1b160eb3b18c9ffb8663487a03b507", "committedDate": "2020-12-11T12:26:44Z", "message": "Refactor confidential property support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMDY0MjUy", "url": "https://github.com/wso2/identity-api-server/pull/246#pullrequestreview-550064252", "createdAt": "2020-12-11T12:41:49Z", "commit": {"oid": "f272e2bb7c1b160eb3b18c9ffb8663487a03b507"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMjo0MTo1MFrOID3ICw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMjo0MTo1MFrOID3ICw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkxOTgxOQ==", "bodyText": "Unable to find the connector with the name %s. -> Unable to find a connector with the name %s.", "url": "https://github.com/wso2/identity-api-server/pull/246#discussion_r540919819", "createdAt": "2020-12-11T12:41:50Z", "author": {"login": "ayshsandu"}, "path": "components/org.wso2.carbon.identity.api.server.identity.governance/org.wso2.carbon.identity.api.server.identity.governance.common/src/main/java/org/wso2/carbon/identity/api/server/identity/governance/common/GovernanceConstants.java", "diffHunk": "@@ -65,7 +65,9 @@\n                 \"Unable to get the identity governance preferences.\",\n                 \"Server Encountered an error while retrieving identity governance connector preferences.\"),\n         ERROR_CODE_INCORRECT_CONNECTOR_NAME(\"50011\", \"Invalid connector name\",\n-                \"Unable to find the connector with the name %s.\");\n+                \"Unable to find the connector with the name %s.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f272e2bb7c1b160eb3b18c9ffb8663487a03b507"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60d8a667325b774720e448a4705fa8346cc0455f", "author": {"user": {"login": "nilasini", "name": "nilasini"}}, "url": "https://github.com/wso2/identity-api-server/commit/60d8a667325b774720e448a4705fa8346cc0455f", "committedDate": "2020-12-14T05:11:13Z", "message": "Fix error messages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNDE2ODMy", "url": "https://github.com/wso2/identity-api-server/pull/246#pullrequestreview-552416832", "createdAt": "2020-12-15T12:51:11Z", "commit": {"oid": "60d8a667325b774720e448a4705fa8346cc0455f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNDIxMzcw", "url": "https://github.com/wso2/identity-api-server/pull/246#pullrequestreview-552421370", "createdAt": "2020-12-15T12:56:56Z", "commit": {"oid": "60d8a667325b774720e448a4705fa8346cc0455f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "406710278f78b33b8ddff9ec491b3ce1ec70aebc", "author": {"user": {"login": "nilasini", "name": "nilasini"}}, "url": "https://github.com/wso2/identity-api-server/commit/406710278f78b33b8ddff9ec491b3ce1ec70aebc", "committedDate": "2020-12-16T09:53:16Z", "message": "Merge branch 'master' of github.com:wso2/identity-api-server into tenantPrefere"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91949c2deba2f74e74a58e1fd7a8f7c30d69857d", "author": {"user": {"login": "nilasini", "name": "nilasini"}}, "url": "https://github.com/wso2/identity-api-server/commit/91949c2deba2f74e74a58e1fd7a8f7c30d69857d", "committedDate": "2020-12-16T10:04:05Z", "message": "Update governnace version"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1334, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}