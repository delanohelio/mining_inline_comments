{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MTg5MjIy", "number": 222, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo0Mzo1NVrOE06heA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo1MjozMVrOE06u6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzOTIwMjQ4OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo0Mzo1NVrOHs51NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo0OTozN1rOHs6DBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0NjkwMA==", "bodyText": "summery: check tenant availability?", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516846900", "createdAt": "2020-11-03T17:43:55Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "diffHunk": "@@ -171,6 +171,69 @@ paths:\n           $ref: '#/components/responses/NotFound'\n         '500':\n           $ref: '#/components/responses/ServerError'\n+  '/tenants/domain/{tenant-domain}':\n+    get:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.\n+      operationId: getTenantByDomain\n+      description: |\n+        Get the tenant using domain.\n+\n+        <b>Permission required:</b>\n+        * /permission/protected/manage/monitor/tenants/list\n+\n+        <b>scope required:</b>\n+        * internal_list_tenants\n+      parameters:\n+        - $ref: '#/components/parameters/tenantDomainPathParam'\n+      responses:\n+        '200':\n+          description: OK\n+          content:\n+            'application/json':\n+              schema:\n+                $ref: '#/components/schemas/TenantResponseModel'\n+        '400':\n+          $ref: '#/components/responses/InvalidInput'\n+        '401':\n+          $ref: '#/components/responses/Unauthorized'\n+        '403':\n+          $ref: '#/components/responses/Forbidden'\n+        '404':\n+          $ref: '#/components/responses/NotFound'\n+        '500':\n+          $ref: '#/components/responses/ServerError'\n+\n+    head:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg1MDQzNw==", "bodyText": "Addressed.", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516850437", "createdAt": "2020-11-03T17:49:37Z", "author": {"login": "Pushpalanka"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "diffHunk": "@@ -171,6 +171,69 @@ paths:\n           $ref: '#/components/responses/NotFound'\n         '500':\n           $ref: '#/components/responses/ServerError'\n+  '/tenants/domain/{tenant-domain}':\n+    get:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.\n+      operationId: getTenantByDomain\n+      description: |\n+        Get the tenant using domain.\n+\n+        <b>Permission required:</b>\n+        * /permission/protected/manage/monitor/tenants/list\n+\n+        <b>scope required:</b>\n+        * internal_list_tenants\n+      parameters:\n+        - $ref: '#/components/parameters/tenantDomainPathParam'\n+      responses:\n+        '200':\n+          description: OK\n+          content:\n+            'application/json':\n+              schema:\n+                $ref: '#/components/schemas/TenantResponseModel'\n+        '400':\n+          $ref: '#/components/responses/InvalidInput'\n+        '401':\n+          $ref: '#/components/responses/Unauthorized'\n+        '403':\n+          $ref: '#/components/responses/Forbidden'\n+        '404':\n+          $ref: '#/components/responses/NotFound'\n+        '500':\n+          $ref: '#/components/responses/ServerError'\n+\n+    head:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0NjkwMA=="}, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzOTIyMTg3OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/impl/TenantsApiServiceImpl.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo0ODo0OVrOHs6BEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxODoyNjowNVrOHs7VPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0OTkzOQ==", "bodyText": "The method name and the response is contradicting, isn't it?\nwe return NOT_FOUND if the domain is available,\nand\nReturn OK if the domain is not available", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516849939", "createdAt": "2020-11-03T17:48:49Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/impl/TenantsApiServiceImpl.java", "diffHunk": "@@ -74,4 +74,20 @@ private URI getResourceLocation(String resourceId) {\n         return ContextLoader.buildURIForHeader(Constants.V1_API_PATH_COMPONENT +\n                 TenantManagementConstants.TENANT_MANAGEMENT_PATH_COMPONENT + \"/\" + resourceId);\n     }\n+\n+    @Override\n+    public Response getTenantByDomain(String tenantDomain) {\n+\n+        return Response.ok().entity(tenantManagementService.getTenantByDomain(tenantDomain)).build();\n+    }\n+\n+    @Override\n+    public Response isDomainAvailable(String tenantDomain) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg1MTg0NQ==", "bodyText": "That has been the usual practice I saw in domain checking..   In google, if the email is available for us to be taken and not found in the system, they say it is available. Same with DNS domain registries. Here available implies it is available for sale or to be taken kind of.. WDYT?", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516851845", "createdAt": "2020-11-03T17:51:45Z", "author": {"login": "Pushpalanka"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/impl/TenantsApiServiceImpl.java", "diffHunk": "@@ -74,4 +74,20 @@ private URI getResourceLocation(String resourceId) {\n         return ContextLoader.buildURIForHeader(Constants.V1_API_PATH_COMPONENT +\n                 TenantManagementConstants.TENANT_MANAGEMENT_PATH_COMPONENT + \"/\" + resourceId);\n     }\n+\n+    @Override\n+    public Response getTenantByDomain(String tenantDomain) {\n+\n+        return Response.ok().entity(tenantManagementService.getTenantByDomain(tenantDomain)).build();\n+    }\n+\n+    @Override\n+    public Response isDomainAvailable(String tenantDomain) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0OTkzOQ=="}, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg1MjIwNQ==", "bodyText": "Maybe we can change it to: isDomainExists?", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516852205", "createdAt": "2020-11-03T17:52:19Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/impl/TenantsApiServiceImpl.java", "diffHunk": "@@ -74,4 +74,20 @@ private URI getResourceLocation(String resourceId) {\n         return ContextLoader.buildURIForHeader(Constants.V1_API_PATH_COMPONENT +\n                 TenantManagementConstants.TENANT_MANAGEMENT_PATH_COMPONENT + \"/\" + resourceId);\n     }\n+\n+    @Override\n+    public Response getTenantByDomain(String tenantDomain) {\n+\n+        return Response.ok().entity(tenantManagementService.getTenantByDomain(tenantDomain)).build();\n+    }\n+\n+    @Override\n+    public Response isDomainAvailable(String tenantDomain) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0OTkzOQ=="}, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg3MTQ4NA==", "bodyText": "Addressed.", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516871484", "createdAt": "2020-11-03T18:26:05Z", "author": {"login": "Pushpalanka"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/impl/TenantsApiServiceImpl.java", "diffHunk": "@@ -74,4 +74,20 @@ private URI getResourceLocation(String resourceId) {\n         return ContextLoader.buildURIForHeader(Constants.V1_API_PATH_COMPONENT +\n                 TenantManagementConstants.TENANT_MANAGEMENT_PATH_COMPONENT + \"/\" + resourceId);\n     }\n+\n+    @Override\n+    public Response getTenantByDomain(String tenantDomain) {\n+\n+        return Response.ok().entity(tenantManagementService.getTenantByDomain(tenantDomain)).build();\n+    }\n+\n+    @Override\n+    public Response isDomainAvailable(String tenantDomain) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg0OTkzOQ=="}, "originalCommit": {"oid": "d0d5ce0418be6f056e5973cb5d93ecbb2954496a"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzOTIzNjg4OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNzo1MjozMVrOHs6KTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxODoyNjoxNFrOHs7Vgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg1MjMwMw==", "bodyText": "isDomainExists", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516852303", "createdAt": "2020-11-03T17:52:31Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "diffHunk": "@@ -171,6 +171,69 @@ paths:\n           $ref: '#/components/responses/NotFound'\n         '500':\n           $ref: '#/components/responses/ServerError'\n+  '/tenants/domain/{tenant-domain}':\n+    get:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.\n+      operationId: getTenantByDomain\n+      description: |\n+        Get the tenant using domain.\n+\n+        <b>Permission required:</b>\n+        * /permission/protected/manage/monitor/tenants/list\n+\n+        <b>scope required:</b>\n+        * internal_list_tenants\n+      parameters:\n+        - $ref: '#/components/parameters/tenantDomainPathParam'\n+      responses:\n+        '200':\n+          description: OK\n+          content:\n+            'application/json':\n+              schema:\n+                $ref: '#/components/schemas/TenantResponseModel'\n+        '400':\n+          $ref: '#/components/responses/InvalidInput'\n+        '401':\n+          $ref: '#/components/responses/Unauthorized'\n+        '403':\n+          $ref: '#/components/responses/Forbidden'\n+        '404':\n+          $ref: '#/components/responses/NotFound'\n+        '500':\n+          $ref: '#/components/responses/ServerError'\n+\n+    head:\n+      tags:\n+        - Tenants\n+      summary: Check domain availability.\n+      operationId: isDomainAvailable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aaa4f14ea1f869d61dbf824109b1054d0f5ddca"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg3MTU1NQ==", "bodyText": "Addressed.", "url": "https://github.com/wso2/identity-api-server/pull/222#discussion_r516871555", "createdAt": "2020-11-03T18:26:14Z", "author": {"login": "Pushpalanka"}, "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "diffHunk": "@@ -171,6 +171,69 @@ paths:\n           $ref: '#/components/responses/NotFound'\n         '500':\n           $ref: '#/components/responses/ServerError'\n+  '/tenants/domain/{tenant-domain}':\n+    get:\n+      tags:\n+        - Tenants\n+      summary: Get tenant by domain.\n+      operationId: getTenantByDomain\n+      description: |\n+        Get the tenant using domain.\n+\n+        <b>Permission required:</b>\n+        * /permission/protected/manage/monitor/tenants/list\n+\n+        <b>scope required:</b>\n+        * internal_list_tenants\n+      parameters:\n+        - $ref: '#/components/parameters/tenantDomainPathParam'\n+      responses:\n+        '200':\n+          description: OK\n+          content:\n+            'application/json':\n+              schema:\n+                $ref: '#/components/schemas/TenantResponseModel'\n+        '400':\n+          $ref: '#/components/responses/InvalidInput'\n+        '401':\n+          $ref: '#/components/responses/Unauthorized'\n+        '403':\n+          $ref: '#/components/responses/Forbidden'\n+        '404':\n+          $ref: '#/components/responses/NotFound'\n+        '500':\n+          $ref: '#/components/responses/ServerError'\n+\n+    head:\n+      tags:\n+        - Tenants\n+      summary: Check domain availability.\n+      operationId: isDomainAvailable", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg1MjMwMw=="}, "originalCommit": {"oid": "4aaa4f14ea1f869d61dbf824109b1054d0f5ddca"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1512, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}