{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDMzOTY3", "number": 120, "title": "Add IDP template management REST API", "bodyText": "Purpose\n\nAdd identity provider template management service API. Primary usage of this API is to keep frequently used IdP configurations and re-use them at IdP creation.\n\n##Dependent on\n\nwso2/carbon-identity-framework#2827\n\nIssues\n\nwso2/product-is#7879", "createdAt": "2020-03-20T09:36:35Z", "url": "https://github.com/wso2/identity-api-server/pull/120", "merged": true, "mergeCommit": {"oid": "9305b4b888fb6fa63c6bf7cf9f86d6c40fa40928"}, "closed": true, "closedAt": "2020-03-27T08:59:36Z", "author": {"login": "mevan-karu"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPd6AUgBqjMxNDg3NTI4ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc56dgIgFqTQ1ODE0NzYzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05e1c1932f6ef2394834877ac15af2a25f845f4e", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/05e1c1932f6ef2394834877ac15af2a25f845f4e", "committedDate": "2020-03-20T09:58:17Z", "message": "Merge branch 'master' into idp_template_mgt"}, "afterCommit": {"oid": "fda30e80c54a0bb958b3a1991cb4795e66530e3c", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/fda30e80c54a0bb958b3a1991cb4795e66530e3c", "committedDate": "2020-03-20T10:24:33Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fda30e80c54a0bb958b3a1991cb4795e66530e3c", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/fda30e80c54a0bb958b3a1991cb4795e66530e3c", "committedDate": "2020-03-20T10:24:33Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "55e4107bcc2b479b4c64e3aea9e2018623b189be", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/55e4107bcc2b479b4c64e3aea9e2018623b189be", "committedDate": "2020-03-20T11:06:18Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55e4107bcc2b479b4c64e3aea9e2018623b189be", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/55e4107bcc2b479b4c64e3aea9e2018623b189be", "committedDate": "2020-03-20T11:06:18Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/9c010b44fac3776bc9a15f289dce7c527487d9cd", "committedDate": "2020-03-20T11:08:59Z", "message": "Add IDP template management API implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NDM1NTg5", "url": "https://github.com/wso2/identity-api-server/pull/120#pullrequestreview-378435589", "createdAt": "2020-03-20T12:21:31Z", "commit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMTozMVrOF5Rhxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjozNzo0OVrOF5SAbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDMyNw==", "bodyText": "shall we add scope provided", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395600327", "createdAt": "2020-03-20T12:21:31Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.common/pom.xml", "diffHunk": "@@ -58,6 +58,10 @@\n             <artifactId>spring-web</artifactId>\n             <scope>provided</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.identity.framework</groupId>\n+            <artifactId>org.wso2.carbon.identity.template.mgt</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDU4Ng==", "bodyText": "use standard comment format. add space after // and add fullstop at end.", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395600586", "createdAt": "2020-03-20T12:22:08Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.common/src/main/java/org/wso2/carbon/identity/api/server/idp/common/Constants.java", "diffHunk": "@@ -61,6 +62,11 @@\n     public static final String FEDERATED_AUTHENTICATORS = \"federatedAuthenticators\";\n     public static final String PROVISIONING = \"provisioning\";\n \n+    //IdP template property keys", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMTA5OQ==", "bodyText": "add fullstop", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395601099", "createdAt": "2020-03-20T12:23:15Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.common/src/main/java/org/wso2/carbon/identity/api/server/idp/common/IdentityProviderServiceHolder.java", "diffHunk": "@@ -67,4 +69,24 @@ public static void setClaimMetadataManagementService(\n \n         IdentityProviderServiceHolder.claimMetadataManagementService = claimMetadataManagementService;\n     }\n+\n+    /**\n+     * Set TemplateManager osgi service.\n+     *\n+     * @param templateManager TemplateManager service\n+     */\n+    public static void setTemplateManager(TemplateManager templateManager) {\n+\n+        IdentityProviderServiceHolder.templateManager = templateManager;\n+    }\n+\n+    /**\n+     * Get TemplateManager osgi service", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMTE5NQ==", "bodyText": "add license header", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395601195", "createdAt": "2020-03-20T12:23:29Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.common/src/main/java/org/wso2/carbon/identity/api/server/idp/common/factory/TemplateMgtOSGIServiceFactory.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package org.wso2.carbon.identity.api.server.idp.common.factory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMTQ3Ng==", "bodyText": "add scope as provided", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395601476", "createdAt": "2020-03-20T12:24:03Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/pom.xml", "diffHunk": "@@ -180,6 +180,10 @@\n             <groupId>commons-beanutils</groupId>\n             <artifactId>commons-beanutils</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.identity.framework</groupId>\n+            <artifactId>org.wso2.carbon.identity.template.mgt</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMjMyNQ==", "bodyText": "let's use a sample filter for the templates in the example", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395602325", "createdAt": "2020-03-20T12:25:56Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/main/java/org/wso2/carbon/identity/api/server/idp/v1/core/ServerIdpManagementService.java", "diffHunk": "@@ -808,7 +825,240 @@ public ConnectedApps getConnectedApps(String resourceId, Integer limit, Integer\n         }\n     }\n \n-    // Private utility Methods.\n+    /**\n+     * Retrieve the list of IDP templates.\n+     *\n+     * @param limit      Items per page.\n+     * @param offset     Offset.\n+     * @param filter     Filter string. E.g. filter=\"name\" sw \"google\" and \"isEnabled\" eq \"true\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMzk4NQ==", "bodyText": "check whether idpTemplate is null. If null, send 404 not found.", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395603985", "createdAt": "2020-03-20T12:29:26Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/main/java/org/wso2/carbon/identity/api/server/idp/v1/core/ServerIdpManagementService.java", "diffHunk": "@@ -808,7 +825,240 @@ public ConnectedApps getConnectedApps(String resourceId, Integer limit, Integer\n         }\n     }\n \n-    // Private utility Methods.\n+    /**\n+     * Retrieve the list of IDP templates.\n+     *\n+     * @param limit      Items per page.\n+     * @param offset     Offset.\n+     * @param filter     Filter string. E.g. filter=\"name\" sw \"google\" and \"isEnabled\" eq \"true\"\n+     * @return  List of identity templates.\n+     */\n+    public IdentityProviderTemplateListResponse getIDPTemplates(Integer limit, Integer offset, String filter) {\n+\n+        try {\n+            TemplateManager templateManager = IdentityProviderServiceHolder.getTemplateManager();\n+            List<Template> templateList = templateManager.listTemplates(\n+                    TemplateMgtConstants.TemplateType.IDP_TEMPLATE.toString(), limit, offset);\n+            return createIDPTemplateListResponse(templateList, offset, limit, filter);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_LISTING_IDP_TEMPLATES, null);\n+        }\n+    }\n+\n+    /**\n+     * Get an identity provider template identified by resource ID.\n+     *\n+     * @param templateId IDP template Id\n+     * @return IdentityProviderTemplateResponse\n+     */\n+    public IdentityProviderTemplate getIDPTemplate(String templateId) {\n+\n+        try {\n+            Template idpTemplate = IdentityProviderServiceHolder.getTemplateManager().getTemplateById(templateId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwNTE3NA==", "bodyText": "status should be 200 ok in update requests", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395605174", "createdAt": "2020-03-20T12:31:49Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/main/java/org/wso2/carbon/identity/api/server/idp/v1/impl/IdentityProvidersApiServiceImpl.java", "diffHunk": "@@ -185,6 +216,14 @@ public Response updateFederatedAuthenticator(String identityProviderId, String f\n                 .build();\n     }\n \n+    @Override\n+    public Response updateIDPTemplate(String templateId, IdentityProviderTemplate\n+            identityProviderTemplatePOSTRequest) {\n+\n+        idpManagementService.updateIDPTemplate(templateId, identityProviderTemplatePOSTRequest);\n+        return Response.noContent().build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwODE3NQ==", "bodyText": "lets remove content for 401, 403 reason: wso2/product-is#6414", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r395608175", "createdAt": "2020-03-20T12:37:49Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/main/resources/idp.yaml", "diffHunk": "@@ -49,8 +49,16 @@ paths:\n                 $ref: '#/components/schemas/Error'\n         '401':\n           description: Unauthorized\n+          content:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c010b44fac3776bc9a15f289dce7c527487d9cd", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/9c010b44fac3776bc9a15f289dce7c527487d9cd", "committedDate": "2020-03-20T11:08:59Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "c93c4a546ba4bba18b228e5980ffb704fd40d70b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/c93c4a546ba4bba18b228e5980ffb704fd40d70b", "committedDate": "2020-03-21T18:57:11Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c93c4a546ba4bba18b228e5980ffb704fd40d70b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/c93c4a546ba4bba18b228e5980ffb704fd40d70b", "committedDate": "2020-03-21T18:57:11Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "ab4346edaecc6f7aeb5498d1804ebdac3ba430d5", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/ab4346edaecc6f7aeb5498d1804ebdac3ba430d5", "committedDate": "2020-03-23T04:51:01Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab4346edaecc6f7aeb5498d1804ebdac3ba430d5", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/ab4346edaecc6f7aeb5498d1804ebdac3ba430d5", "committedDate": "2020-03-23T04:51:01Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "0dd0e863df402e1171eae5c34027ea4a976d95ca", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0dd0e863df402e1171eae5c34027ea4a976d95ca", "committedDate": "2020-03-23T05:08:16Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0dd0e863df402e1171eae5c34027ea4a976d95ca", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0dd0e863df402e1171eae5c34027ea4a976d95ca", "committedDate": "2020-03-23T05:08:16Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "1904c3de02493b8e2bdfee8d1ae1002f85c3dc76", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/1904c3de02493b8e2bdfee8d1ae1002f85c3dc76", "committedDate": "2020-03-24T13:48:05Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1904c3de02493b8e2bdfee8d1ae1002f85c3dc76", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/1904c3de02493b8e2bdfee8d1ae1002f85c3dc76", "committedDate": "2020-03-24T13:48:05Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "7c6eb010aa4802a2ca0f2d7bf8f8e5a24bd90303", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/7c6eb010aa4802a2ca0f2d7bf8f8e5a24bd90303", "committedDate": "2020-03-24T14:03:47Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fddabe1b141f2bda2cf706833e618b7515a0b5e", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/9fddabe1b141f2bda2cf706833e618b7515a0b5e", "committedDate": "2020-03-24T16:18:31Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "2a84cb9a54652cf0066b39951bc4ca0e6f16ea64", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/2a84cb9a54652cf0066b39951bc4ca0e6f16ea64", "committedDate": "2020-03-24T16:23:24Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a84cb9a54652cf0066b39951bc4ca0e6f16ea64", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/2a84cb9a54652cf0066b39951bc4ca0e6f16ea64", "committedDate": "2020-03-24T16:23:24Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "135504a02ef2b01fe125a36a66c01ff2fed632d1", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/135504a02ef2b01fe125a36a66c01ff2fed632d1", "committedDate": "2020-03-25T07:58:08Z", "message": "Add IDP template management API implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjQwNzY2", "url": "https://github.com/wso2/identity-api-server/pull/120#pullrequestreview-381240766", "createdAt": "2020-03-25T15:07:18Z", "commit": {"oid": "135504a02ef2b01fe125a36a66c01ff2fed632d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowNzoxOFrOF7fqOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowNzoxOFrOF7fqOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkyOTAxOQ==", "bodyText": "change the code generator to have 2020", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r397929019", "createdAt": "2020-03-25T15:07:18Z", "author": {"login": "thanujalk"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/gen/java/org/wso2/carbon/identity/api/server/idp/v1/model/IdentityProviderTemplate.java", "diffHunk": "@@ -0,0 +1,260 @@\n+/*\n+* Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "135504a02ef2b01fe125a36a66c01ff2fed632d1"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "135504a02ef2b01fe125a36a66c01ff2fed632d1", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/135504a02ef2b01fe125a36a66c01ff2fed632d1", "committedDate": "2020-03-25T07:58:08Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "c1b57e32b32d5e4d4c1361283e29c98e7b02da41", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/c1b57e32b32d5e4d4c1361283e29c98e7b02da41", "committedDate": "2020-03-27T05:24:32Z", "message": "Add IDP template management API implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8540919879a10c2f4b9585f09b966cb65507143d", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/8540919879a10c2f4b9585f09b966cb65507143d", "committedDate": "2020-03-27T05:26:57Z", "message": "Add TemplateManager service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1b57e32b32d5e4d4c1361283e29c98e7b02da41", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/c1b57e32b32d5e4d4c1361283e29c98e7b02da41", "committedDate": "2020-03-27T05:24:32Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "0d89aaa0e3e0444d315df5a548ba2d2c13a39102", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0d89aaa0e3e0444d315df5a548ba2d2c13a39102", "committedDate": "2020-03-27T05:26:57Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d89aaa0e3e0444d315df5a548ba2d2c13a39102", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0d89aaa0e3e0444d315df5a548ba2d2c13a39102", "committedDate": "2020-03-27T05:26:57Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "0b7e7e33c9c727094ea60b4b0e41166145e409d4", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0b7e7e33c9c727094ea60b4b0e41166145e409d4", "committedDate": "2020-03-27T07:03:56Z", "message": "Add IDP template management API implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/88fa5194c446519ca9e55e036bffa47996a7f78c", "committedDate": "2020-03-27T07:06:51Z", "message": "Add IDP template management API implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0b7e7e33c9c727094ea60b4b0e41166145e409d4", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/0b7e7e33c9c727094ea60b4b0e41166145e409d4", "committedDate": "2020-03-27T07:03:56Z", "message": "Add IDP template management API implementation"}, "afterCommit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2/identity-api-server/commit/88fa5194c446519ca9e55e036bffa47996a7f78c", "committedDate": "2020-03-27T07:06:51Z", "message": "Add IDP template management API implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNjc3MDIw", "url": "https://github.com/wso2/identity-api-server/pull/120#pullrequestreview-382677020", "createdAt": "2020-03-27T08:59:28Z", "commit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMjIxNzUw", "url": "https://github.com/wso2/identity-api-server/pull/120#pullrequestreview-421221750", "createdAt": "2020-05-29T19:19:34Z", "commit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxOToxOTozNFrOGcpGVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMjo1Njo0NlrOGcwP1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY4NjY3Nw==", "bodyText": "Missing the doc comment. Check other places as well.", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r432686677", "createdAt": "2020-05-29T19:19:34Z", "author": {"login": "NipuniBhagya"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/gen/java/org/wso2/carbon/identity/api/server/idp/v1/model/IdentityProviderTemplate.java", "diffHunk": "@@ -0,0 +1,260 @@\n+/*\n+* Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+*\n+* Licensed under the Apache License, Version 2.0 (the \"License\");\n+* you may not use this file except in compliance with the License.\n+* You may obtain a copy of the License at\n+*\n+* http://www.apache.org/licenses/LICENSE-2.0\n+*\n+* Unless required by applicable law or agreed to in writing, software\n+* distributed under the License is distributed on an \"AS IS\" BASIS,\n+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+* See the License for the specific language governing permissions and\n+* limitations under the License.\n+*/\n+\n+package org.wso2.carbon.identity.api.server.idp.v1.model;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import io.swagger.annotations.ApiModel;\n+import io.swagger.annotations.ApiModelProperty;\n+import org.wso2.carbon.identity.api.server.idp.v1.model.IdentityProviderPOSTRequest;\n+import javax.validation.constraints.*;\n+\n+\n+import io.swagger.annotations.*;\n+import java.util.Objects;\n+import javax.validation.Valid;\n+import javax.xml.bind.annotation.*;\n+\n+public class IdentityProviderTemplate  {\n+  \n+    private String id;\n+    private String name;\n+    private String description;\n+    private String image;\n+\n+@XmlType(name=\"CategoryEnum\")\n+@XmlEnum(String.class)\n+public enum CategoryEnum {\n+\n+    @XmlEnumValue(\"DEFAULT\") DEFAULT(String.valueOf(\"DEFAULT\")), @XmlEnumValue(\"CUSTOM\") CUSTOM(String.valueOf(\"CUSTOM\"));\n+\n+\n+    private String value;\n+\n+    CategoryEnum(String v) {\n+        value = v;\n+    }\n+\n+    public String value() {\n+        return value;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return String.valueOf(value);\n+    }\n+\n+    public static CategoryEnum fromValue(String value) {\n+        for (CategoryEnum b : CategoryEnum.values()) {\n+            if (b.value.equals(value)) {\n+                return b;\n+            }\n+        }\n+        throw new IllegalArgumentException(\"Unexpected value '\" + value + \"'\");\n+    }\n+}\n+\n+    private CategoryEnum category;\n+    private Integer displayOrder;\n+    private IdentityProviderPOSTRequest idp;\n+\n+    /**\n+    **/\n+    public IdentityProviderTemplate id(String id) {\n+\n+        this.id = id;\n+        return this;\n+    }\n+    \n+    @ApiModelProperty(example = \"123e4567-e89b-12d3-a456-556642440000\", value = \"\")\n+    @JsonProperty(\"id\")\n+    @Valid\n+    public String getId() {\n+        return id;\n+    }\n+    public void setId(String id) {\n+        this.id = id;\n+    }\n+\n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMzc5Nw==", "bodyText": "Let's remove this unnecessary line.", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r432803797", "createdAt": "2020-05-30T02:56:46Z", "author": {"login": "NipuniBhagya"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/gen/java/org/wso2/carbon/identity/api/server/idp/v1/model/IdentityProviderTemplate.java", "diffHunk": "@@ -0,0 +1,260 @@\n+/*\n+* Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+*\n+* Licensed under the Apache License, Version 2.0 (the \"License\");\n+* you may not use this file except in compliance with the License.\n+* You may obtain a copy of the License at\n+*\n+* http://www.apache.org/licenses/LICENSE-2.0\n+*\n+* Unless required by applicable law or agreed to in writing, software\n+* distributed under the License is distributed on an \"AS IS\" BASIS,\n+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+* See the License for the specific language governing permissions and\n+* limitations under the License.\n+*/\n+\n+package org.wso2.carbon.identity.api.server.idp.v1.model;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import io.swagger.annotations.ApiModel;\n+import io.swagger.annotations.ApiModelProperty;\n+import org.wso2.carbon.identity.api.server.idp.v1.model.IdentityProviderPOSTRequest;\n+import javax.validation.constraints.*;\n+\n+\n+import io.swagger.annotations.*;\n+import java.util.Objects;\n+import javax.validation.Valid;\n+import javax.xml.bind.annotation.*;\n+\n+public class IdentityProviderTemplate  {\n+  \n+    private String id;\n+    private String name;\n+    private String description;\n+    private String image;\n+\n+@XmlType(name=\"CategoryEnum\")\n+@XmlEnum(String.class)\n+public enum CategoryEnum {\n+\n+    @XmlEnumValue(\"DEFAULT\") DEFAULT(String.valueOf(\"DEFAULT\")), @XmlEnumValue(\"CUSTOM\") CUSTOM(String.valueOf(\"CUSTOM\"));\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MTQ3NjM5", "url": "https://github.com/wso2/identity-api-server/pull/120#pullrequestreview-458147639", "createdAt": "2020-07-30T07:26:29Z", "commit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNzoyNjoyOVrOG5XKiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNzoyNjoyOVrOG5XKiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgwMTU0NQ==", "bodyText": "This type of comment is not the normal convention. Ideally each method needs to have the comment explaining it is a utility and what it is for.", "url": "https://github.com/wso2/identity-api-server/pull/120#discussion_r462801545", "createdAt": "2020-07-30T07:26:29Z", "author": {"login": "ruwanta"}, "path": "components/org.wso2.carbon.identity.api.server.idp/org.wso2.carbon.identity.api.server.idp.v1/src/main/java/org/wso2/carbon/identity/api/server/idp/v1/core/ServerIdpManagementService.java", "diffHunk": "@@ -808,7 +826,234 @@ public ConnectedApps getConnectedApps(String resourceId, Integer limit, Integer\n         }\n     }\n \n-    // Private utility Methods.\n+    /**\n+     * Retrieve the list of IDP templates.\n+     *\n+     * @param limit      Items per page.\n+     * @param offset     Offset.\n+     * @param filter     Filter string. E.g. filter=\"name\" sw \"google\" and \"category\" eq \"DEFAULT\"\n+     * @return  List of identity templates.\n+     */\n+    public IdentityProviderTemplateListResponse getIDPTemplates(Integer limit, Integer offset, String filter) {\n+\n+        try {\n+            TemplateManager templateManager = IdentityProviderServiceHolder.getTemplateManager();\n+            List<Template> templateList = templateManager.listTemplates(\n+                    TemplateMgtConstants.TemplateType.IDP_TEMPLATE.toString(), limit, offset);\n+            return createIDPTemplateListResponse(templateList, offset, limit, filter);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_LISTING_IDP_TEMPLATES, null);\n+        }\n+    }\n+\n+    /**\n+     * Get an identity provider template identified by resource ID.\n+     *\n+     * @param templateId IDP template Id\n+     * @return IdentityProviderTemplateResponse\n+     */\n+    public IdentityProviderTemplate getIDPTemplate(String templateId) {\n+\n+        try {\n+            Template idpTemplate = IdentityProviderServiceHolder.getTemplateManager().getTemplateById(templateId);\n+            return createIDPTemplateResponse(idpTemplate);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_RETRIEVING_IDP_TEMPLATE,\n+                    templateId);\n+        } catch (IOException e) {\n+            throw handleException(Response.Status.INTERNAL_SERVER_ERROR,\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_RETRIEVING_IDP_TEMPLATE, templateId);\n+        }\n+    }\n+\n+    /**\n+     * Update IDP template.\n+     *\n+     * @param identityProviderTemplate Updated IDP template\n+     */\n+    public void updateIDPTemplate(String templateId, IdentityProviderTemplate identityProviderTemplate) {\n+\n+        try {\n+            Template idpTemplate = generateIDPTemplate(identityProviderTemplate);\n+            IdentityProviderServiceHolder.getTemplateManager().updateTemplateById(templateId, idpTemplate);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_UPDATING_IDP_TEMPLATE,\n+                    identityProviderTemplate.getId());\n+        } catch (JsonProcessingException e) {\n+            throw handleException(Response.Status.BAD_REQUEST,\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_UPDATING_IDP_TEMPLATE, templateId);\n+        }\n+    }\n+\n+    /**\n+     * Create a new IDP template.\n+     *\n+     * @param identityProviderTemplate identityProviderTemplatePOSTRequest\n+     * @return IdentityProviderTemplateResponse\n+     */\n+    public String createIDPTemplate(IdentityProviderTemplate identityProviderTemplate) {\n+\n+        try {\n+            TemplateManager templateManager = IdentityProviderServiceHolder.getTemplateManager();\n+            Template idpTemplate = generateIDPTemplate(identityProviderTemplate);\n+            return templateManager.addTemplate(idpTemplate);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_ADDING_IDP_TEMPLATE, null);\n+        } catch (JsonProcessingException e) {\n+            throw handleException(Response.Status.BAD_REQUEST,\n+                    Constants.ErrorMessage.ERROR_CODE_ERROR_ADDING_IDP_TEMPLATE, null);\n+        }\n+    }\n+\n+    /**\n+     * Delete a IDP template identified by resource Id.\n+     *\n+     * @param templateId Id of the IDP template\n+     */\n+    public void deleteIDPTemplate(String templateId) {\n+\n+        try {\n+            TemplateManager templateManager = IdentityProviderServiceHolder.getTemplateManager();\n+            templateManager.deleteTemplateById(templateId);\n+        } catch (TemplateManagementException e) {\n+            throw handleTemplateMgtException(e, Constants.ErrorMessage.ERROR_CODE_ERROR_DELETING_IDP_TEMPLATE,\n+                    templateId);\n+        }\n+    }\n+\n+//  Private utility Methods.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fa5194c446519ca9e55e036bffa47996a7f78c"}, "originalPosition": 169}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1428, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}