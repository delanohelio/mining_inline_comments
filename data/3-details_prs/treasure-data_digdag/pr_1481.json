{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4ODU4Nzcz", "number": 1481, "title": "Support task cpu and memory override", "bodyText": "What does this PR change?\n\nThis PR supports task_cpu and task_memory override.\nThis PR renames the existing cpu and memory to container_cpu and container_memory respectively.\n\nBackground\nAWS ECS supports two resource limitation levels\n\nContainer CPU/Memory\nTask CPU/Memory\n\nThe existing cpu and memory field in EcsClientConfig are used to specify Container CPU/Memory. But we need to specify Task CPU/Memory as well for each task.", "createdAt": "2020-11-11T00:34:35Z", "url": "https://github.com/treasure-data/digdag/pull/1481", "merged": true, "mergeCommit": {"oid": "050d5c5576b64da0234868701c4a7baa1142398c"}, "closed": true, "closedAt": "2020-11-11T03:22:02Z", "author": {"login": "serihiro"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbSMosgH2gAyNTE4ODU4NzczOjI1MjYyNmMyOTMyNzBjYjlkMWQxNmU1NTllODZjNzgyMDg1MWYzNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbUtCUgH2gAyNTE4ODU4NzczOjdjYTg3MTNkZGE0Njg5NGIxZjUzNTEyMGMyMjM5YjliYjk0MGUxNWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "252626c293270cb9d1d16e559e86c7820851f367", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/252626c293270cb9d1d16e559e86c7820851f367", "committedDate": "2020-11-10T23:45:17Z", "message": "Rename `cpu` to `containerCpu`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ee5abb2e06c964bb7198be2b33dfa264526d10", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/b3ee5abb2e06c964bb7198be2b33dfa264526d10", "committedDate": "2020-11-10T23:52:13Z", "message": "Rename `memory` to `containerMemory`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40f515a4d846db08a9375291734e8b17ec9e1a66", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/40f515a4d846db08a9375291734e8b17ec9e1a66", "committedDate": "2020-11-10T23:57:51Z", "message": "Support task cpu override"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd5e44807dede593006c5d029fe1bfa0c127d51e", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/cd5e44807dede593006c5d029fe1bfa0c127d51e", "committedDate": "2020-11-11T00:12:41Z", "message": "Support task memory override"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98ce15df10296517244c73cbcbe363321445a023", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/98ce15df10296517244c73cbcbe363321445a023", "committedDate": "2020-11-11T00:29:04Z", "message": "Update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85872cb4c1a4f739bdabc40430ca5e08e8517a3d", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/85872cb4c1a4f739bdabc40430ca5e08e8517a3d", "committedDate": "2020-11-11T00:29:04Z", "message": "Tweak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0159d4598d683e1d7f9bd2e6131d582bf5ee9456", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/0159d4598d683e1d7f9bd2e6131d582bf5ee9456", "committedDate": "2020-11-11T02:16:50Z", "message": "Tweak"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3Nzk2NDM1", "url": "https://github.com/treasure-data/digdag/pull/1481#pullrequestreview-527796435", "createdAt": "2020-11-11T02:18:25Z", "commit": {"oid": "85872cb4c1a4f739bdabc40430ca5e08e8517a3d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjoxODoyNVrOHw5Edg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjoxODoyNVrOHw5Edg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAyODcyNg==", "bodyText": "container_memory for consistent naming.", "url": "https://github.com/treasure-data/digdag/pull/1481#discussion_r521028726", "createdAt": "2020-11-11T02:18:25Z", "author": {"login": "myui"}, "path": "digdag-standards/src/main/java/io/digdag/standards/command/ecs/EcsClientConfig.java", "diffHunk": "@@ -101,15 +107,17 @@ private static EcsClientConfig buildEcsClientConfig(String clusterName, Config e\n                 .withSubnets(ecsConfig.getOptional(\"subnets\", String.class))\n                 .withMaxRetries(ecsConfig.get(\"max_retries\", int.class, DEFAULT_MAX_RETRIES))\n                 .withCapacityProviderName(ecsConfig.getOptional(\"capacity_provider_name\", String.class))\n-                .withCpu(ecsConfig.getOptional(\"cpu\", Integer.class))\n-                .withMemory(ecsConfig.getOptional(\"memory\", Integer.class))\n+                .withContainerCpu(ecsConfig.getOptional(\"container_cpu\", Integer.class))\n+                .withContainerMemory(ecsConfig.getOptional(\"memory\", Integer.class))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85872cb4c1a4f739bdabc40430ca5e08e8517a3d"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b81b41f4c78c3dda502511f86814a089bea817", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/87b81b41f4c78c3dda502511f86814a089bea817", "committedDate": "2020-11-11T02:22:34Z", "message": "Fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODAxMDcy", "url": "https://github.com/treasure-data/digdag/pull/1481#pullrequestreview-527801072", "createdAt": "2020-11-11T02:29:42Z", "commit": {"oid": "87b81b41f4c78c3dda502511f86814a089bea817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ca8713dda46894b1f535120c2239b9bb940e15f", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/7ca8713dda46894b1f535120c2239b9bb940e15f", "committedDate": "2020-11-11T02:40:29Z", "message": "Fix a test case which fails occasionally"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4082, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}