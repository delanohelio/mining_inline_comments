{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyODM0Mzc2", "number": 1474, "title": "Fetch sensitive data from `systemConfig`", "bodyText": "What will this PR change?\nThis PR refactors EcsClientConfig#createFromTaskConfig so that the method fetches access_key_id and secret_access_key from systemConfig to build a EcsClientConfig object.\nBackground\nBasically taskConfig is generated from workflow definition.\nSo the object should not have any sensitive data because taskConfig is referred as a object without sensitive data.\nThis PR refactors EcsClientConfig#createFromTaskConfig so that the method uses both of taskConfig and systemConfig to fetch parameters for EcsClientConfig object.", "createdAt": "2020-10-30T08:20:03Z", "url": "https://github.com/treasure-data/digdag/pull/1474", "merged": true, "mergeCommit": {"oid": "7e951ddf9aa5be4850d2d16ec3c820cc7a0df2e0"}, "closed": true, "closedAt": "2020-11-02T07:30:26Z", "author": {"login": "serihiro"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXiOMRAH2gAyNTEyODM0Mzc2OmNkNjBiYTYyYzI3NTY4YmZhYjI4Nzc1ZjkzZmFkMThmZDNjMTcyNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYemZ1gFqTUyMTM1ODE2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd60ba62c27568bfab28775f93fad18fd3c1726c", "author": {"user": null}, "url": "https://github.com/treasure-data/digdag/commit/cd60ba62c27568bfab28775f93fad18fd3c1726c", "committedDate": "2020-10-30T08:09:46Z", "message": "Fetch sensitive data from `systemConfig`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzAxOTE0", "url": "https://github.com/treasure-data/digdag/pull/1474#pullrequestreview-521301914", "createdAt": "2020-11-02T02:39:33Z", "commit": {"oid": "cd60ba62c27568bfab28775f93fad18fd3c1726c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozOTozM1rOHr0tzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozOTozM1rOHr0tzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxNDUwOA==", "bodyText": "Where were these fields set in the nested config?", "url": "https://github.com/treasure-data/digdag/pull/1474#discussion_r515714508", "createdAt": "2020-11-02T02:39:33Z", "author": {"login": "komamitsu"}, "path": "digdag-standards/src/main/java/io/digdag/standards/command/ecs/EcsClientConfig.java", "diffHunk": "@@ -33,29 +33,31 @@ public EcsClientConfig(EcsClientConfigBuilder builder)\n         this.assignPublicIp = builder.isAssignPublicIp();\n     }\n \n-    public static EcsClientConfig createFromTaskConfig(final Optional<String> clusterName, final Config config)\n+    public static EcsClientConfig createFromTaskConfig(final Optional<String> clusterName, final Config taskConfig, final Config systemConfig)\n     {\n         final String name;\n-        // `config` is assumed to have a nested config with following values\n-        // at the key of `TASK_CONFIG_ECS_KEY` from `config`.\n+        // `taskConfig` is assumed to have a nested taskConfig with following values\n+        // at the key of `TASK_CONFIG_ECS_KEY` from `taskConfig`.\n         // - launch_type (optional)\n-        // - access_key_id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd60ba62c27568bfab28775f93fad18fd3c1726c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzU4MTYw", "url": "https://github.com/treasure-data/digdag/pull/1474#pullrequestreview-521358160", "createdAt": "2020-11-02T06:30:31Z", "commit": {"oid": "cd60ba62c27568bfab28775f93fad18fd3c1726c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4071, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}