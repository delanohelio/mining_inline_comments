{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODIyODMw", "number": 1533, "title": "[IOTDB-807]Make heartbeat thread commit log tasks asynchronous", "bodyText": "", "createdAt": "2020-07-22T01:12:47Z", "url": "https://github.com/apache/iotdb/pull/1533", "merged": true, "mergeCommit": {"oid": "dc88faa18625d837264ecf1db619cfb624534237"}, "closed": true, "closedAt": "2020-07-22T02:15:40Z", "author": {"login": "neuyilan"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3QSoggH2gAyNDU0ODIyODMwOjUwZDFmM2FlYTg5MWI2OWExMWI2MTY2OTE1M2VjZTk5ZDkwZDY4ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3RNrzgFqTQ1Mjk0ODM3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50d1f3aea891b69a11b61669153ece99d90d6886", "author": {"user": {"login": "neuyilan", "name": "Houliang Qi"}}, "url": "https://github.com/apache/iotdb/commit/50d1f3aea891b69a11b61669153ece99d90d6886", "committedDate": "2020-07-22T01:10:45Z", "message": "Make heartbeat thread commit log task asynchronous"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTQ4Mzc1", "url": "https://github.com/apache/iotdb/pull/1533#pullrequestreview-452948375", "createdAt": "2020-07-22T02:14:58Z", "commit": {"oid": "50d1f3aea891b69a11b61669153ece99d90d6886"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMjoxNDo1OFrOG1QM4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMjoxNDo1OFrOG1QM4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ5MzE1NA==", "bodyText": "\"async commit log failed\", e is more generally used.", "url": "https://github.com/apache/iotdb/pull/1533#discussion_r458493154", "createdAt": "2020-07-22T02:14:58Z", "author": {"login": "jt2594838"}, "path": "cluster/src/main/java/org/apache/iotdb/cluster/server/member/RaftMember.java", "diffHunk": "@@ -1564,4 +1582,33 @@ public void setAppendLogThreadPool(ExecutorService appendLogThreadPool) {\n   public ExecutorService getAsyncThreadPool() {\n     return asyncThreadPool;\n   }\n+\n+  public interface OnCommitLogEventListener {\n+\n+    /**\n+     * the callback method when committed log async success\n+     */\n+    void onSuccess();\n+\n+    /**\n+     * @param e the exception raised when committed log async failed\n+     */\n+    void onError(Exception e);\n+  }\n+\n+  public class AsyncCommitLogEvent implements OnCommitLogEventListener {\n+\n+    @Override\n+    public void onSuccess() {\n+      synchronized (syncLock) {\n+        syncLock.notifyAll();\n+      }\n+    }\n+\n+    @Override\n+    public void onError(Exception e) {\n+      logger.error(\"async commit log failed, {}\", e.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50d1f3aea891b69a11b61669153ece99d90d6886"}, "originalPosition": 113}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3522, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}