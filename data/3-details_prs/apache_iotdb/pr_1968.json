{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NjAyMzUw", "number": 1968, "title": "Fix the risk of deadlock by WeakReference", "bodyText": "", "createdAt": "2020-11-06T08:55:27Z", "url": "https://github.com/apache/iotdb/pull/1968", "merged": true, "mergeCommit": {"oid": "6a68db05cad289d86ce21481b13b941628c57a3f"}, "closed": true, "closedAt": "2020-12-14T08:14:49Z", "author": {"login": "asdf2014"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZyBMdAH2gAyNTE2NjAyMzUwOjM3NjQyNmRlOTljYjZmMDI4MmY3MzA3Y2M1OTBkM2UyNzA0YWRhN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmBHKQgFqTU1MTExOTg4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "376426de99cb6f0282f7307cc590d3e2704ada7e", "author": {"user": {"login": "asdf2014", "name": "Benedict Jin"}}, "url": "https://github.com/apache/iotdb/commit/376426de99cb6f0282f7307cc590d3e2704ada7e", "committedDate": "2020-11-06T07:41:54Z", "message": "Fix the risk of deadlock by WeakReference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTg2Mjgx", "url": "https://github.com/apache/iotdb/pull/1968#pullrequestreview-525586281", "createdAt": "2020-11-07T02:50:33Z", "commit": {"oid": "376426de99cb6f0282f7307cc590d3e2704ada7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMjo1MDozM1rOHvCfNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMjo1MDozM1rOHvCfNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA4NTg3Nw==", "bodyText": "this should be discussed.\nWe may have too many devices and the memory is limited..", "url": "https://github.com/apache/iotdb/pull/1968#discussion_r519085877", "createdAt": "2020-11-07T02:50:33Z", "author": {"login": "jixuan1989"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/cache/TimeSeriesMetadataCache.java", "diffHunk": "@@ -60,6 +64,7 @@\n \n   private final ReadWriteLock lock = new ReentrantReadWriteLock();\n \n+  private final Map<String, WeakReference<String>> devices = Collections.synchronizedMap(new WeakHashMap<>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "376426de99cb6f0282f7307cc590d3e2704ada7e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8161dbb54f76fc86a07eeef505a4af74e2ae9516", "author": {"user": {"login": "asdf2014", "name": "Benedict Jin"}}, "url": "https://github.com/apache/iotdb/commit/8161dbb54f76fc86a07eeef505a4af74e2ae9516", "committedDate": "2020-11-18T06:25:46Z", "message": "Merge branch 'master' into fix_dead_lock_risk"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDk5NzA3", "url": "https://github.com/apache/iotdb/pull/1968#pullrequestreview-528099707", "createdAt": "2020-11-11T11:45:18Z", "commit": {"oid": "376426de99cb6f0282f7307cc590d3e2704ada7e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMTo0NToxOFrOHxJvFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMTo0NToxOFrOHxJvFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMTc4MA==", "bodyText": "Hi, can you give more details about the mentioned deadlock thing?", "url": "https://github.com/apache/iotdb/pull/1968#discussion_r521301780", "createdAt": "2020-11-11T11:45:18Z", "author": {"login": "JackieTien97"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/cache/TimeSeriesMetadataCache.java", "diffHunk": "@@ -60,6 +64,7 @@\n \n   private final ReadWriteLock lock = new ReentrantReadWriteLock();\n \n+  private final Map<String, WeakReference<String>> devices = Collections.synchronizedMap(new WeakHashMap<>());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA4NTg3Nw=="}, "originalCommit": {"oid": "376426de99cb6f0282f7307cc590d3e2704ada7e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTE5ODgy", "url": "https://github.com/apache/iotdb/pull/1968#pullrequestreview-551119882", "createdAt": "2020-12-14T08:04:05Z", "commit": {"oid": "8161dbb54f76fc86a07eeef505a4af74e2ae9516"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3647, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}