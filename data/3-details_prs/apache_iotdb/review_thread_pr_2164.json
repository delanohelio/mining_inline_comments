{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwODk5Mzky", "number": 2164, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDoyNDozMlrOE_jRbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDozMzoxNFrOE_jgQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MDczNjQ2OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDoyNDozMlrOH9ULpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo1NDowOFrOH9ZkqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDA1NTg0NA==", "bodyText": "Rename this method as getListDataSetHeaders to keep the consistence.", "url": "https://github.com/apache/iotdb/pull/2164#discussion_r534055844", "createdAt": "2020-12-02T10:24:32Z", "author": {"login": "Alima777"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -725,19 +719,30 @@ private TSExecuteStatementResp internalExecuteQueryStatement(String statement,\n       if (plan instanceof AuthorPlan) {\n         plan.setLoginUserName(username);\n       }\n+\n+      TSExecuteStatementResp resp = null;\n+\n+      if (plan instanceof QueryPlan) {\n+        resp = getQueryColumnHeaders(plan, username);\n+      }\n       // create and cache dataset\n       QueryDataSet newDataSet = createQueryDataSet(queryId, plan);\n+\n+      if (plan instanceof ShowPlan || plan instanceof AuthorPlan) {\n+        resp = getListDataResp(newDataSet);\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9aae15d92f538a4ce731895eb7bf0ce995241a33"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0NDE2OA==", "bodyText": "fixed", "url": "https://github.com/apache/iotdb/pull/2164#discussion_r534144168", "createdAt": "2020-12-02T12:54:08Z", "author": {"login": "Genius-pig"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -725,19 +719,30 @@ private TSExecuteStatementResp internalExecuteQueryStatement(String statement,\n       if (plan instanceof AuthorPlan) {\n         plan.setLoginUserName(username);\n       }\n+\n+      TSExecuteStatementResp resp = null;\n+\n+      if (plan instanceof QueryPlan) {\n+        resp = getQueryColumnHeaders(plan, username);\n+      }\n       // create and cache dataset\n       QueryDataSet newDataSet = createQueryDataSet(queryId, plan);\n+\n+      if (plan instanceof ShowPlan || plan instanceof AuthorPlan) {\n+        resp = getListDataResp(newDataSet);\n+      }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDA1NTg0NA=="}, "originalCommit": {"oid": "9aae15d92f538a4ce731895eb7bf0ce995241a33"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MDc3NDQwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDozMzoxNFrOH9UicA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDozMzoxNFrOH9UicA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDA2MTY4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (plan instanceof QueryPlan) {\n          \n          \n            \n                    resp = getQueryColumnHeaders(plan, username);\n          \n          \n            \n                  }\n          \n          \n            \n                  // execute it before createDataSet since it may change the content of query plan\n          \n          \n            \n                  if (plan instanceof QueryPlan) {\n          \n          \n            \n                    resp = getQueryColumnHeaders(plan, username);\n          \n          \n            \n                  }", "url": "https://github.com/apache/iotdb/pull/2164#discussion_r534061680", "createdAt": "2020-12-02T10:33:14Z", "author": {"login": "Alima777"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -725,19 +719,30 @@ private TSExecuteStatementResp internalExecuteQueryStatement(String statement,\n       if (plan instanceof AuthorPlan) {\n         plan.setLoginUserName(username);\n       }\n+\n+      TSExecuteStatementResp resp = null;\n+\n+      if (plan instanceof QueryPlan) {\n+        resp = getQueryColumnHeaders(plan, username);\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9aae15d92f538a4ce731895eb7bf0ce995241a33"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 502, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}