{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MDgwNzY4", "number": 1736, "title": "Cluster premerge", "bodyText": "Merge code changes of non-cluster modules from branch \u201ccluster_new\u201d into \"master\" to reduce further conflicts.\nPerformance test report:\nhttps://cwiki.apache.org/confluence/pages/viewpage.action?pageId=165222971", "createdAt": "2020-09-15T06:55:43Z", "url": "https://github.com/apache/iotdb/pull/1736", "merged": true, "mergeCommit": {"oid": "b30b55002b7634bf4b41c97113d0e4a721b34b1c"}, "closed": true, "closedAt": "2020-10-28T12:14:48Z", "author": {"login": "jt2594838"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJCAHAgH2gAyNDg3MDgwNzY4OjRkNGZkY2FmMTJiZTFjOWI3YzAxZGQ5ZGZkMzJkN2ZjMTFkNjU0Zjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW5Yh2gH2gAyNDg3MDgwNzY4OmVkNTkzNDFlNjNkNDE5NzgwZTljMDM2ZmQ4Y2M5NjAxZTg2ZjI3Mjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d4fdcaf12be1c9b7c01dd9dfd32d7fc11d654f8", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/4d4fdcaf12be1c9b7c01dd9dfd32d7fc11d654f8", "committedDate": "2020-09-15T06:42:29Z", "message": "merge non-cluster code changes into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f4d7c5a4e4c0dcd0696be1ee7e7e7f73c6146d8", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/7f4d7c5a4e4c0dcd0696be1ee7e7e7f73c6146d8", "committedDate": "2020-09-18T03:13:15Z", "message": "self review and fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78b4db6e1bb47dee3b73ad3fffd75ca7751e40f3", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/78b4db6e1bb47dee3b73ad3fffd75ca7751e40f3", "committedDate": "2020-09-18T03:21:19Z", "message": "fix cross tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcf0eb92a3d6ad3e618dfa4b0bd4ef737d9a8265", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/fcf0eb92a3d6ad3e618dfa4b0bd4ef737d9a8265", "committedDate": "2020-09-18T04:28:11Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tcross-tests/src/test/java/org/apache/iotdb/cross/tests/utils/EnvironmentUtils.java\n#\tserver/src/test/java/org/apache/iotdb/db/query/executor/GroupByEngineDataSetTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50994cd69477164cfa92f088de4b4eaf4a35a1f9", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/50994cd69477164cfa92f088de4b4eaf4a35a1f9", "committedDate": "2020-09-18T05:57:54Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fb5d14b765af26cd5923fc84d31f49d3b00705b", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/2fb5d14b765af26cd5923fc84d31f49d3b00705b", "committedDate": "2020-09-21T02:55:17Z", "message": "fix code smells"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c0f09740e8eb56fb6b4fd6818ae633538812faa", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/8c0f09740e8eb56fb6b4fd6818ae633538812faa", "committedDate": "2020-09-21T02:56:32Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5a239150f35cd2db3288f5879d1510d0c62227c", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/c5a239150f35cd2db3288f5879d1510d0c62227c", "committedDate": "2020-09-21T03:50:31Z", "message": "fix flush plan"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69386f2512a6ee1c3b669a65dfccfaa81ef5c892", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/69386f2512a6ee1c3b669a65dfccfaa81ef5c892", "committedDate": "2020-09-21T08:46:45Z", "message": "fix cross tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f59dc58548e22a55257df18dfc1c775473367b4", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/7f59dc58548e22a55257df18dfc1c775473367b4", "committedDate": "2020-09-22T00:57:55Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/mnode/MNode.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d5b7b66be7a98d883ad9559a54b44c14f7fcbb4", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/3d5b7b66be7a98d883ad9559a54b44c14f7fcbb4", "committedDate": "2020-09-22T01:56:37Z", "message": "fix MergeManagerTest and disable port examinations in EnvironmentUtils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06eb546bd8186ebeae5fcd8be2e5ed40f5bb89b6", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/06eb546bd8186ebeae5fcd8be2e5ed40f5bb89b6", "committedDate": "2020-09-22T06:14:33Z", "message": "add cross test print"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19a2a54e83a3ec467b53d30d4a58ea5987c0a08b", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/19a2a54e83a3ec467b53d30d4a58ea5987c0a08b", "committedDate": "2020-09-24T01:51:32Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/MManager.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/physical/crud/InsertPlan.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/physical/crud/InsertRowPlan.java\n#\tserver/src/main/java/org/apache/iotdb/db/writelog/recover/LogReplayer.java\n#\tserver/src/test/java/org/apache/iotdb/db/engine/cache/ChunkMetadataCacheTest.java\n#\tserver/src/test/java/org/apache/iotdb/db/engine/modification/DeletionFileNodeTest.java\n#\tserver/src/test/java/org/apache/iotdb/db/engine/modification/DeletionQueryTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886b12f7136cf569c22036440e77bba4529ca816", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/886b12f7136cf569c22036440e77bba4529ca816", "committedDate": "2020-09-24T04:08:44Z", "message": "modify cross test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0e6ded1b2fdb8664dbb5b04b55055537220a8f", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/9a0e6ded1b2fdb8664dbb5b04b55055537220a8f", "committedDate": "2020-09-24T05:00:51Z", "message": "add print in cross test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72aaa9878d9c9370462a1fecbf3528cdfd8cefa1", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/72aaa9878d9c9370462a1fecbf3528cdfd8cefa1", "committedDate": "2020-09-25T02:19:32Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tcross-tests/src/test/java/org/apache/iotdb/cross/tests/tools/importCsv/AbstractScript.java\n#\tcross-tests/src/test/java/org/apache/iotdb/cross/tests/tools/importCsv/ImportCsvTestIT.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/physical/crud/InsertRowPlan.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7f654280ebc00733f4b074e0007dff102457f24", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/a7f654280ebc00733f4b074e0007dff102457f24", "committedDate": "2020-09-25T03:22:16Z", "message": "fix cross test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "617960f1c38b88be9939c3e071182d509d760abc", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/617960f1c38b88be9939c3e071182d509d760abc", "committedDate": "2020-09-27T01:17:24Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84153850413c1e9183dad8632f8ade4ed7c637fa", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/84153850413c1e9183dad8632f8ade4ed7c637fa", "committedDate": "2020-09-27T04:00:12Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/query/dataset/ShowTimeseriesDataSet.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBSortedShowTimeseriesIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBTagIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c0af49bad96ee378a600f44d9bc8f7ea588b40", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/c8c0af49bad96ee378a600f44d9bc8f7ea588b40", "committedDate": "2020-09-27T06:15:51Z", "message": "fix MTreeTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTQzNzk2", "url": "https://github.com/apache/iotdb/pull/1736#pullrequestreview-497143796", "createdAt": "2020-09-28T01:48:45Z", "commit": {"oid": "c8c0af49bad96ee378a600f44d9bc8f7ea588b40"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTo0ODo0NVrOHYsMUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMTo0ODo0NVrOHYsMUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MTkyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class SQLParserException extends RuntimeException{\n          \n          \n            \n            public class SQLParserException extends RuntimeException {", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r495651920", "createdAt": "2020-09-28T01:48:45Z", "author": {"login": "mychaow"}, "path": "server/src/main/java/org/apache/iotdb/db/exception/runtime/SQLParserException.java", "diffHunk": "@@ -18,10 +18,11 @@\n  */\n package org.apache.iotdb.db.exception.runtime;\n \n-public class SQLParserException extends RuntimeException {\n-\n+public class SQLParserException extends RuntimeException{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8c0af49bad96ee378a600f44d9bc8f7ea588b40"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3b8c4133021c479c55afb553e3be523eb74b3d6", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/b3b8c4133021c479c55afb553e3be523eb74b3d6", "committedDate": "2020-09-29T06:42:06Z", "message": "Update server/src/main/java/org/apache/iotdb/db/exception/runtime/SQLParserException.java\n\nCo-authored-by: chaow <runhuster@foxmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "824562c1d2a85ea7b2ec209bda15fc63f001602a", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/824562c1d2a85ea7b2ec209bda15fc63f001602a", "committedDate": "2020-09-29T06:32:33Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "304fb3d6bf2d1cdfdecd32ae7537388fd6f26bcd", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/304fb3d6bf2d1cdfdecd32ae7537388fd6f26bcd", "committedDate": "2020-10-05T00:37:57Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4", "committedDate": "2020-10-06T00:44:47Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTAyNzQ0", "url": "https://github.com/apache/iotdb/pull/1736#pullrequestreview-503502744", "createdAt": "2020-10-07T03:38:42Z", "commit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwMzozODo0MlrOHdhdJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNTowMDoxNFrOHdioqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcxODg4NQ==", "bodyText": "recover this", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500718885", "createdAt": "2020-10-07T03:38:42Z", "author": {"login": "qiaojialin"}, "path": "server/src/assembly/resources/conf/iotdb-engine.properties", "diffHunk": "@@ -63,16 +63,17 @@ force_wal_period_in_ms=100\n ### Directory Configuration\n ####################\n \n-# system dir\n-# If this property is unset, system will save the data in the default relative path directory under the IoTDB folder(i.e., %IOTDB_HOME%/data/system).\n+# base dir\n+# If this property is unset, system will save the data in the default relative path directory under the IoTDB folder(i.e., %IOTDB_HOME%/data).\n # If it is absolute, system will save the data in exact location it points to.\n # If it is relative, system will save the data in the relative path directory it indicates under the IoTDB folder.\n+# Note: If sys_dir is assigned an empty string(i.e.,zero-size), it will be handled as a relative path.\n # For windows platform\n # If its prefix is a drive specifier followed by \"\\\\\", or if its prefix is \"\\\\\\\\\", then the path is absolute. Otherwise, it is relative.\n-# system_dir=data\\\\system\n+# base_dir=data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcxOTU2Nw==", "bodyText": "async should be inferred from parameter", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500719567", "createdAt": "2020-10-07T03:41:51Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/StorageEngine.java", "diffHunk": "@@ -381,39 +385,57 @@ public void syncCloseAllProcessor() {\n   }\n \n   public void forceCloseAllProcessor() throws TsFileProcessorException {\n-    logger.info(\"Start closing all storage group processor\");\n+    logger.info(\"Start force closing all storage group processor\");\n     for (StorageGroupProcessor processor : processorMap.values()) {\n       processor.forceCloseAllWorkingTsFileProcessors();\n     }\n   }\n \n-  public void asyncCloseProcessor(PartialPath storageGroupPath, boolean isSeq) {\n+  public void closeProcessor(PartialPath storageGroupPath, boolean isSeq, boolean isSync) {\n     StorageGroupProcessor processor = processorMap.get(storageGroupPath);\n-    if (processor != null) {\n-      logger.info(\"async closing sg processor is called for closing {}, seq = {}\", storageGroupPath,\n-          isSeq);\n-      processor.writeLock();\n-      try {\n-        if (isSeq) {\n-          // to avoid concurrent modification problem, we need a new array list\n-          for (TsFileProcessor tsfileProcessor : new ArrayList<>(\n-              processor.getWorkSequenceTsFileProcessors())) {\n+    if (processor == null) {\n+      return;\n+    }\n+\n+    logger.info(\"async closing sg processor is called for closing {}, seq = {}\", storageGroupPath,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcxOTkyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void closeProcessor(PartialPath storageGroupPath, boolean isSeq, boolean isSync) {\n          \n          \n            \n              public void closeStorageGroupProcessor(PartialPath storageGroupPath, boolean isSeq, boolean isSync) {", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500719925", "createdAt": "2020-10-07T03:43:33Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/StorageEngine.java", "diffHunk": "@@ -381,39 +385,57 @@ public void syncCloseAllProcessor() {\n   }\n \n   public void forceCloseAllProcessor() throws TsFileProcessorException {\n-    logger.info(\"Start closing all storage group processor\");\n+    logger.info(\"Start force closing all storage group processor\");\n     for (StorageGroupProcessor processor : processorMap.values()) {\n       processor.forceCloseAllWorkingTsFileProcessors();\n     }\n   }\n \n-  public void asyncCloseProcessor(PartialPath storageGroupPath, boolean isSeq) {\n+  public void closeProcessor(PartialPath storageGroupPath, boolean isSeq, boolean isSync) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcxOTk5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void closeProcessor(PartialPath storageGroupPath, long partitionId, boolean isSeq,\n          \n          \n            \n              public void closeStorageGroupProcessor(PartialPath storageGroupPath, long partitionId, boolean isSeq,", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500719992", "createdAt": "2020-10-07T03:43:54Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/StorageEngine.java", "diffHunk": "@@ -381,39 +385,57 @@ public void syncCloseAllProcessor() {\n   }\n \n   public void forceCloseAllProcessor() throws TsFileProcessorException {\n-    logger.info(\"Start closing all storage group processor\");\n+    logger.info(\"Start force closing all storage group processor\");\n     for (StorageGroupProcessor processor : processorMap.values()) {\n       processor.forceCloseAllWorkingTsFileProcessors();\n     }\n   }\n \n-  public void asyncCloseProcessor(PartialPath storageGroupPath, boolean isSeq) {\n+  public void closeProcessor(PartialPath storageGroupPath, boolean isSeq, boolean isSync) {\n     StorageGroupProcessor processor = processorMap.get(storageGroupPath);\n-    if (processor != null) {\n-      logger.info(\"async closing sg processor is called for closing {}, seq = {}\", storageGroupPath,\n-          isSeq);\n-      processor.writeLock();\n-      try {\n-        if (isSeq) {\n-          // to avoid concurrent modification problem, we need a new array list\n-          for (TsFileProcessor tsfileProcessor : new ArrayList<>(\n-              processor.getWorkSequenceTsFileProcessors())) {\n+    if (processor == null) {\n+      return;\n+    }\n+\n+    logger.info(\"async closing sg processor is called for closing {}, seq = {}\", storageGroupPath,\n+        isSeq);\n+    processor.writeLock();\n+    try {\n+      if (isSeq) {\n+        // to avoid concurrent modification problem, we need a new array list\n+        for (TsFileProcessor tsfileProcessor : new ArrayList<>(\n+            processor.getWorkSequenceTsFileProcessors())) {\n+          if (isSync) {\n+            processor.syncCloseOneTsFileProcessor(true, tsfileProcessor);\n+          } else {\n             processor.asyncCloseOneTsFileProcessor(true, tsfileProcessor);\n           }\n-        } else {\n-          // to avoid concurrent modification problem, we need a new array list\n-          for (TsFileProcessor tsfileProcessor : new ArrayList<>(\n-              processor.getWorkUnsequenceTsFileProcessor())) {\n+        }\n+      } else {\n+        // to avoid concurrent modification problem, we need a new array list\n+        for (TsFileProcessor tsfileProcessor : new ArrayList<>(\n+            processor.getWorkUnsequenceTsFileProcessor())) {\n+          if (isSync) {\n+            processor.syncCloseOneTsFileProcessor(false, tsfileProcessor);\n+          } else {\n             processor.asyncCloseOneTsFileProcessor(false, tsfileProcessor);\n           }\n         }\n-      } finally {\n-        processor.writeUnlock();\n       }\n+    } finally {\n+      processor.writeUnlock();\n     }\n   }\n \n-  public void asyncCloseProcessor(PartialPath storageGroupPath, long partitionId, boolean isSeq)\n+  /**\n+   * @param storageGroupPath the storage group name\n+   * @param partitionId      the partition id\n+   * @param isSeq            is sequence tsfile or unsequence tsfile\n+   * @param isSync           close tsfile synchronously or asynchronously\n+   * @throws StorageGroupNotSetException\n+   */\n+  public void closeProcessor(PartialPath storageGroupPath, long partitionId, boolean isSeq,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcyMjk3NQ==", "bodyText": "wait for Kaifeng's PR", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500722975", "createdAt": "2020-10-07T03:55:51Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/metadata/mnode/MNode.java", "diffHunk": "@@ -85,7 +87,7 @@ public boolean hasChild(String name) {\n    */\n   public void addChild(String name, MNode child) {\n     if (children == null) {\n-      children = new LinkedHashMap<>();\n+      children = new ConcurrentSkipListMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDczODIxOA==", "bodyText": "don't you need return storage group name?", "url": "https://github.com/apache/iotdb/pull/1736#discussion_r500738218", "createdAt": "2020-10-07T05:00:14Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/qp/physical/crud/DeletePartitionPlan.java", "diffHunk": "@@ -38,7 +39,12 @@ public DeletePartitionPlan(PartialPath storageGroupName, Set<Long> partitionId)\n \n   @Override\n   public List<PartialPath> getPaths() {\n-    return null;\n+    return Collections.emptyList();\n+  }\n+\n+  @Override\n+  public List<String> getPathsStrings() {\n+    return Collections.emptyList();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f084eb8d862460cd6a5b1c93f3d3e3ceb6485ec4"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25ad18b04ea9c1627e3b3441fc9a46ef09f4b38d", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/25ad18b04ea9c1627e3b3441fc9a46ef09f4b38d", "committedDate": "2020-10-09T03:46:42Z", "message": "fix baseDir"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb1841ca0fc8b5628e8f74f2c0903e1aba0e2cd0", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/fb1841ca0fc8b5628e8f74f2c0903e1aba0e2cd0", "committedDate": "2020-10-09T03:56:14Z", "message": "remove getPathStrings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f77ed14e4b7f3f780c48decdbc2447b877fe9e", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/f4f77ed14e4b7f3f780c48decdbc2447b877fe9e", "committedDate": "2020-10-10T01:53:36Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/MManager.java\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/MTree.java\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/mnode/MNode.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBLastIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBLoadExternalTsfileIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBSortedShowTimeseriesIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IoTDBTagIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/metadata/MTreeTest.java\n#\tsession/src/test/java/org/apache/iotdb/session/IoTDBSessionComplexIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ec5823265f8325c525b300a2fc5cf900dd309e6", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/8ec5823265f8325c525b300a2fc5cf900dd309e6", "committedDate": "2020-10-10T01:54:06Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6711f95cba27b7971ca426067cac1b85caa00cf7", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/6711f95cba27b7971ca426067cac1b85caa00cf7", "committedDate": "2020-10-19T01:52:10Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/qp/physical/PhysicalPlan.java\n#\tserver/src/main/java/org/apache/iotdb/db/query/control/TracingManager.java\n#\tserver/src/test/java/org/apache/iotdb/db/engine/merge/MergeManagerTest.java\n#\ttsfile/src/main/java/org/apache/iotdb/tsfile/utils/ReadWriteIOUtils.java\n#\ttsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d8e206f1f8378b4dd4db1df7e38d0fcdecdc510", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/6d8e206f1f8378b4dd4db1df7e38d0fcdecdc510", "committedDate": "2020-10-20T02:27:13Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n#\tserver/src/main/java/org/apache/iotdb/db/writelog/recover/LogReplayer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac48ffb4c1039cd5d6ff92d969a10ee46fc66e4d", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/ac48ffb4c1039cd5d6ff92d969a10ee46fc66e4d", "committedDate": "2020-10-22T01:05:38Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/writelog/recover/LogReplayer.java\n#\tserver/src/test/java/org/apache/iotdb/db/engine/merge/MergeManagerTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9170c5576648c1ae0fa845bc18f8bf2f77c45f13", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/9170c5576648c1ae0fa845bc18f8bf2f77c45f13", "committedDate": "2020-10-22T02:07:01Z", "message": "fix session IT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ee2a8b07a82a82db520ac4243f6c71d9b3378bb", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/7ee2a8b07a82a82db520ac4243f6c71d9b3378bb", "committedDate": "2020-10-26T01:43:23Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/conf/IoTDBConfig.java\n#\tserver/src/main/java/org/apache/iotdb/db/metadata/MManager.java\n#\tserver/src/test/java/org/apache/iotdb/db/integration/IOTDBGroupByIT.java\n#\tserver/src/test/java/org/apache/iotdb/db/utils/EnvironmentUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "493408443232a1d4acf3f73581839132d8c3e594", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/493408443232a1d4acf3f73581839132d8c3e594", "committedDate": "2020-10-26T02:36:02Z", "message": "remove EnvironmentUtils in cross test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "797c19352e6fa7f0441e3e244439d8cf8e5b276d", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/797c19352e6fa7f0441e3e244439d8cf8e5b276d", "committedDate": "2020-10-27T01:32:56Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6579fd6d3014b7c0caf7d63f3a17b55a8dfaa9ec", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/6579fd6d3014b7c0caf7d63f3a17b55a8dfaa9ec", "committedDate": "2020-10-27T06:13:54Z", "message": "Merge branch 'master' into cluster_premerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed59341e63d419780e9c036fd8cc9601e86f2729", "author": {"user": {"login": "jt2594838", "name": "Jiang Tian"}}, "url": "https://github.com/apache/iotdb/commit/ed59341e63d419780e9c036fd8cc9601e86f2729", "committedDate": "2020-10-28T08:34:57Z", "message": "Merge branch 'master' into cluster_premerge\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/engine/StorageEngine.java\n#\tserver/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\n#\tserver/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n#\tserver/src/test/java/org/apache/iotdb/db/metadata/MManagerBasicTest.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3859, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}