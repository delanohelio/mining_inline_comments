{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNTQ3MTk4", "number": 1126, "title": "[IOTDB-620] Add the ability to persist and maintain voteFor for the raft node and amend the judgment conditions for elections", "bodyText": "", "createdAt": "2020-04-29T07:48:59Z", "url": "https://github.com/apache/iotdb/pull/1126", "merged": true, "mergeCommit": {"oid": "62f152086f8537afc574dae306002e1e919d6f3d"}, "closed": true, "closedAt": "2020-04-29T08:53:56Z", "author": {"login": "LebronAl"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbwZ5ZAH2gAyNDEwNTQ3MTk4OjVkZmEzMTEwZTQ5YzY4ODI5YTg3MGQzNDU2NDU1OGJhMzRkNjg4YWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccUkB4gFqTQwMjQ3NDU5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5dfa3110e49c68829a870d34564558ba34d688ac", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/5dfa3110e49c68829a870d34564558ba34d688ac", "committedDate": "2020-04-27T14:45:46Z", "message": "add voteFor persistence && use raftLogManager's isLogUpToDate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "602e3b492c31c837a9c6506cd7da04a61210018f", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/602e3b492c31c837a9c6506cd7da04a61210018f", "committedDate": "2020-04-29T05:19:25Z", "message": "fix election logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd26eb2f282c648f5a7aef340aaa8aece46633db", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/dd26eb2f282c648f5a7aef340aaa8aece46633db", "committedDate": "2020-04-29T05:19:53Z", "message": "Merge branch 'cluster_new' of github.com:Apache/incubator-iotdb into cluster_new_persistence_votefor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4323fbecc69e423419abdb0ada6b375527b252a", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/d4323fbecc69e423419abdb0ada6b375527b252a", "committedDate": "2020-04-29T06:07:15Z", "message": "minor fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d22772e5934df4b76eae7032758ec144d043f341", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/d22772e5934df4b76eae7032758ec144d043f341", "committedDate": "2020-04-29T06:13:01Z", "message": "Merge branch 'cluster_new' of github.com:Apache/incubator-iotdb into cluster_new_persistence_votefor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d74740e79fe4d6cfab61f15cd6af57238a593b", "author": {"user": {"login": "LebronAl", "name": "Potato"}}, "url": "https://github.com/apache/iotdb/commit/67d74740e79fe4d6cfab61f15cd6af57238a593b", "committedDate": "2020-04-29T07:46:14Z", "message": "minor fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDc0NTk0", "url": "https://github.com/apache/iotdb/pull/1126#pullrequestreview-402474594", "createdAt": "2020-04-29T08:49:37Z", "commit": {"oid": "67d74740e79fe4d6cfab61f15cd6af57238a593b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo0OTozOFrOGN1eqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo0OTozOFrOGN1eqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MDg3Mw==", "bodyText": "It seemed strange here.", "url": "https://github.com/apache/iotdb/pull/1126#discussion_r417160873", "createdAt": "2020-04-29T08:49:38Z", "author": {"login": "jt2594838"}, "path": "cluster/src/main/java/org/apache/iotdb/cluster/server/member/RaftMember.java", "diffHunk": "@@ -516,11 +546,20 @@ public void setLastHeartbeatReceivedTime(long lastHeartbeatReceivedTime) {\n \n   public void setLeader(Node leader) {\n     if (!Objects.equals(leader, this.leader)) {\n-      logger.info(\"{} has become a follower of {}\", getName(), leader);\n+      if (!Objects.equals(leader, this.thisNode)) {\n+        logger.info(\"{} has become a follower of {}\", getName(), leader);\n+      }\n       this.leader = leader;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d74740e79fe4d6cfab61f15cd6af57238a593b"}, "originalPosition": 166}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3897, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}