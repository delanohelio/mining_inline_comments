{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTcxMzQ5", "number": 1311, "title": "[IOTDB-695] Accelerate the count timeseries query", "bodyText": "For count timeseries, we get all timeseries and then calculate the count. Which occupy much memory and not efficient. It's better to count while traversing the MTree.", "createdAt": "2020-06-04T03:51:30Z", "url": "https://github.com/apache/iotdb/pull/1311", "merged": true, "mergeCommit": {"oid": "b1d422ac880aff0975204f4f6f4c903d4be189f4"}, "closed": true, "closedAt": "2020-06-04T12:13:24Z", "author": {"login": "Alima777"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcn1uGXgH2gAyNDI3NTcxMzQ5OjM1Y2U4YmY2ZjE4ZDkwYjMzYjY2YjhmNDJjNDJiZTExYjkxNGNmNGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn8_yFAFqTQyNDM3ODU3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "35ce8bf6f18d90b33b66b8f42c42be11b914cf4d", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/35ce8bf6f18d90b33b66b8f42c42be11b914cf4d", "committedDate": "2020-06-04T03:44:27Z", "message": "Accelerate count timeseires"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTM1MTcz", "url": "https://github.com/apache/iotdb/pull/1311#pullrequestreview-424135173", "createdAt": "2020-06-04T06:26:59Z", "commit": {"oid": "35ce8bf6f18d90b33b66b8f42c42be11b914cf4d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNjo1OVrOGe3c8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNjo1OVrOGe3c8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODk5NQ==", "bodyText": "no need", "url": "https://github.com/apache/iotdb/pull/1311#discussion_r435018995", "createdAt": "2020-06-04T06:26:59Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/metadata/MManager.java", "diffHunk": "@@ -692,6 +692,20 @@ public String getStorageGroupName(String path) throws MetadataException {\n     }\n   }\n \n+  /**\n+   * To calculate the count of timeseries for given prefix path.\n+   */\n+  public int getAllTimeseriesCount(String prefixPath) throws MetadataException {\n+    lock.readLock().lock();\n+    try {\n+      return mtree.getAllTimeseriesCount(prefixPath);\n+    } catch (MetadataException e) {\n+      throw new MetadataException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35ce8bf6f18d90b33b66b8f42c42be11b914cf4d"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756e290617832d8738893da258c3a76d99dce1d6", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/756e290617832d8738893da258c3a76d99dce1d6", "committedDate": "2020-06-04T07:37:59Z", "message": "Add ut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "808840847ee63a176f48e6da16a34d6b59101a2c", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/808840847ee63a176f48e6da16a34d6b59101a2c", "committedDate": "2020-06-04T07:40:13Z", "message": "Modify typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2ad194fa2cdbaed1f2827ffb931e4e581dd4357", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/f2ad194fa2cdbaed1f2827ffb931e4e581dd4357", "committedDate": "2020-06-04T07:51:21Z", "message": "Modify code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d557fca8d9c515724592bf68c66030b2cb5fc4", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/52d557fca8d9c515724592bf68c66030b2cb5fc4", "committedDate": "2020-06-04T08:07:37Z", "message": "Modify method name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abee91d5342ee77c34b73a948d549d55254e398a", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/abee91d5342ee77c34b73a948d549d55254e398a", "committedDate": "2020-06-04T08:10:59Z", "message": "Modify typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39f32413f6b7590007128fb96fe1ae2aa13581cf", "author": {"user": {"login": "Alima777", "name": "Xiangwei Wei"}}, "url": "https://github.com/apache/iotdb/commit/39f32413f6b7590007128fb96fe1ae2aa13581cf", "committedDate": "2020-06-04T09:13:25Z", "message": "Add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0Mjc1NDI4", "url": "https://github.com/apache/iotdb/pull/1311#pullrequestreview-424275428", "createdAt": "2020-06-04T09:42:38Z", "commit": {"oid": "39f32413f6b7590007128fb96fe1ae2aa13581cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MzQyNjU3", "url": "https://github.com/apache/iotdb/pull/1311#pullrequestreview-424342657", "createdAt": "2020-06-04T11:19:33Z", "commit": {"oid": "39f32413f6b7590007128fb96fe1ae2aa13581cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0Mzc4NTc0", "url": "https://github.com/apache/iotdb/pull/1311#pullrequestreview-424378574", "createdAt": "2020-06-04T12:13:06Z", "commit": {"oid": "39f32413f6b7590007128fb96fe1ae2aa13581cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3760, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}