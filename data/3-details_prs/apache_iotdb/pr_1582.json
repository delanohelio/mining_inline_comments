{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NTI5ODM5", "number": 1582, "title": "[IOTDB-822] Flush Raft Logs Periodically", "bodyText": "", "createdAt": "2020-07-29T15:54:20Z", "url": "https://github.com/apache/iotdb/pull/1582", "merged": true, "mergeCommit": {"oid": "a28ff1707f65e1bc695b6fe1487feccca2ea9f01"}, "closed": true, "closedAt": "2020-07-31T13:10:19Z", "author": {"login": "Ring-k"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5q58UAH2gAyNDU4NTI5ODM5OjRhNzc0NTBmYzcwMWQ1MGE5ODhiNGQ0ZGM5YzE5N2E2ZTBmMGNhYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6QdSxAFqTQ1OTAyNDY5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a77450fc701d50a988b4d4dc9c197a6e0f0cac5", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/4a77450fc701d50a988b4d4dc9c197a6e0f0cac5", "committedDate": "2020-07-29T13:19:04Z", "message": "flush periodically"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90a350e20f8d94190c3387e0c3d691ff2bf60480", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/90a350e20f8d94190c3387e0c3d691ff2bf60480", "committedDate": "2020-07-29T15:38:21Z", "message": "force flush"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "997bf90c607699b0840e95adee5ae7cbf1a8e181", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/997bf90c607699b0840e95adee5ae7cbf1a8e181", "committedDate": "2020-07-29T16:04:44Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4ODYxMTg5", "url": "https://github.com/apache/iotdb/pull/1582#pullrequestreview-458861189", "createdAt": "2020-07-31T01:16:21Z", "commit": {"oid": "997bf90c607699b0840e95adee5ae7cbf1a8e181"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwMToxNjoyMVrOG5491g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwMToxNjoyMVrOG5491g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1NTM1MA==", "bodyText": "shutdown this when the manager is closed.", "url": "https://github.com/apache/iotdb/pull/1582#discussion_r463355350", "createdAt": "2020-07-31T01:16:21Z", "author": {"login": "jt2594838"}, "path": "cluster/src/main/java/org/apache/iotdb/cluster/log/manage/RaftLogManager.java", "diffHunk": "@@ -100,6 +100,16 @@ public RaftLogManager(StableEntryManager stableEntryManager, LogApplier applier,\n         .scheduleAtFixedRate(this::checkDeleteLog, logDeleteCheckIntervalSecond,\n             logDeleteCheckIntervalSecond,\n             TimeUnit.SECONDS);\n+\n+    /**\n+     * flush log to file periodically\n+     */\n+    int logFlushTimeIntervalMS = ClusterDescriptor.getInstance().getConfig()\n+        .getForceRaftLogPeriodInMS();\n+    if (ClusterDescriptor.getInstance().getConfig().isEnableRaftLogPersistence()) {\n+      executorService.scheduleAtFixedRate(this::flushLogPeriodically, logFlushTimeIntervalMS,\n+          logFlushTimeIntervalMS, TimeUnit.MILLISECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "997bf90c607699b0840e95adee5ae7cbf1a8e181"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c0d10f0ff43d0167597c0f68bf1a05aa23e111", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/e2c0d10f0ff43d0167597c0f68bf1a05aa23e111", "committedDate": "2020-07-31T05:30:42Z", "message": "new executor service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa1b9ac7c15a3dcf511029f8db573cd1cd3a9229", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/aa1b9ac7c15a3dcf511029f8db573cd1cd3a9229", "committedDate": "2020-07-31T05:44:12Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56663f95add49a4fd54cf6647401ad2466153bf5", "author": {"user": {"login": "Ring-k", "name": null}}, "url": "https://github.com/apache/iotdb/commit/56663f95add49a4fd54cf6647401ad2466153bf5", "committedDate": "2020-07-31T05:49:09Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDI0Njkx", "url": "https://github.com/apache/iotdb/pull/1582#pullrequestreview-459024691", "createdAt": "2020-07-31T09:04:10Z", "commit": {"oid": "56663f95add49a4fd54cf6647401ad2466153bf5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3557, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}