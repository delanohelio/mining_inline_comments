{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMDc1MDc0", "number": 879, "title": "Hot fix for LAST query bug when using with disable align", "bodyText": "This pr is a hot fix for last query.\n\nLast query failed when using with disable align and align by device.\nAdded more integration tests for cases when querying last value among unseqenced files.", "createdAt": "2020-03-03T17:16:17Z", "url": "https://github.com/apache/iotdb/pull/879", "merged": true, "mergeCommit": {"oid": "79c2602c8cc9e16593b91e4a36c757eb4d208189"}, "closed": true, "closedAt": "2020-03-04T08:57:53Z", "author": {"login": "wshao08"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFIL9AAH2gAyMzgzMDc1MDc0OjU1M2FlM2NhMjkxYzk0OTA2YjkyZDc4MDc3Y2M2NGFmZDkxZTY5MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKSHEMAFqTM2ODU2MjMxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "553ae3ca291c94906b92d78077cc64afd91e690b", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/553ae3ca291c94906b92d78077cc64afd91e690b", "committedDate": "2020-02-17T07:28:00Z", "message": "Add Last query implement without cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4f7c6f3bc7c48d9ea6f5dd75b9c731420bfa5c4", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b4f7c6f3bc7c48d9ea6f5dd75b9c731420bfa5c4", "committedDate": "2020-02-17T07:28:00Z", "message": "Add Last query cache in MTree node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "611237160dbe07626588463847e13b3692b80208", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/611237160dbe07626588463847e13b3692b80208", "committedDate": "2020-02-17T17:59:30Z", "message": "Fix null measurement display for last query"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ba2e9695b4629f0d7d09badf5e796ee562f8451", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/8ba2e9695b4629f0d7d09badf5e796ee562f8451", "committedDate": "2020-02-18T03:04:42Z", "message": "Add Missing license comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b03c708f91031dae5dc56044211c8bebe0615fee", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b03c708f91031dae5dc56044211c8bebe0615fee", "committedDate": "2020-02-18T09:45:24Z", "message": "Remove unused import and adjust code format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f9a83f7df0d15a23465438f2122c3231ec4c6e", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/55f9a83f7df0d15a23465438f2122c3231ec4c6e", "committedDate": "2020-02-18T10:48:57Z", "message": "Fix compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97cfadc0d8dda1ca36204d84a68f680fc6fc4a34", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/97cfadc0d8dda1ca36204d84a68f680fc6fc4a34", "committedDate": "2020-02-18T16:42:45Z", "message": "Clarify last related function behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f02f7c313c7e3dbfae12e0e5ca0cbdfdc61246f", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/3f02f7c313c7e3dbfae12e0e5ca0cbdfdc61246f", "committedDate": "2020-02-18T17:10:44Z", "message": "Use chunk and page stats when calculating last data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21e761566a8da68446492e0aa82cedf2bd236291", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/21e761566a8da68446492e0aa82cedf2bd236291", "committedDate": "2020-02-20T15:30:19Z", "message": "Fix last query syntax bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afbc0937a690fa07f25edab5e0d2236cda69e068", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/afbc0937a690fa07f25edab5e0d2236cda69e068", "committedDate": "2020-02-20T15:30:36Z", "message": "Add java doc for last"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0abe34f828e8aab11194d8025d95cf4ad44388d2", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/0abe34f828e8aab11194d8025d95cf4ad44388d2", "committedDate": "2020-02-20T17:27:47Z", "message": "Update java doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ee32b765b44332bbe188126729b187c119746a", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c2ee32b765b44332bbe188126729b187c119746a", "committedDate": "2020-02-20T17:47:44Z", "message": "Merge remote-tracking branch 'upstream/new_series_reader' into new_series_reader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "409a7b96ecfe3e68fe4d3e09405d33720092a1a4", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/409a7b96ecfe3e68fe4d3e09405d33720092a1a4", "committedDate": "2020-02-20T18:40:22Z", "message": "Add unit test for last"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f43426a7987c156d3d373fbf1cfa1d9858a2815d", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f43426a7987c156d3d373fbf1cfa1d9858a2815d", "committedDate": "2020-02-21T01:12:56Z", "message": "Fix ut compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f1f2c0279cbbd3931357944655d51d92e953cc3", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/1f1f2c0279cbbd3931357944655d51d92e953cc3", "committedDate": "2020-02-24T09:04:11Z", "message": "Merge remote-tracking branch 'upstream/new_series_reader' into new_series_reader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e175b5a2a31f5bcb600d9a4afc811d3b635f299", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/3e175b5a2a31f5bcb600d9a4afc811d3b635f299", "committedDate": "2020-02-24T09:18:40Z", "message": "Merge branch 'master' into new_series_reader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92c43917a94f540416413eb85ed95c55b606b628", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/92c43917a94f540416413eb85ed95c55b606b628", "committedDate": "2020-02-24T09:24:05Z", "message": "Fix compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e10aa614335133d5f9dac0d893063fe237cafa3f", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/e10aa614335133d5f9dac0d893063fe237cafa3f", "committedDate": "2020-02-24T16:38:22Z", "message": "Update new version of LAST query in java doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5736f861baa2cf0d4a02735450492f2fd2b4946a", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/5736f861baa2cf0d4a02735450492f2fd2b4946a", "committedDate": "2020-02-25T16:17:42Z", "message": "Modify Last query syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c561dc58b9c267c3aa8533f74a6bfa25a310d2ec", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c561dc58b9c267c3aa8533f74a6bfa25a310d2ec", "committedDate": "2020-02-26T17:14:03Z", "message": "Update last query behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e65ee361738ebcf5162108b57c42071290a76d6", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/1e65ee361738ebcf5162108b57c42071290a76d6", "committedDate": "2020-02-26T17:23:39Z", "message": "Merge remote-tracking branch 'upstream/master' into new_series_reader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c137074a1623d27db285673a9e39b161743cd9d0", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c137074a1623d27db285673a9e39b161743cd9d0", "committedDate": "2020-02-27T00:50:50Z", "message": "Fix test compile issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6fb25b2b7d96e1459911b09844e2418defb7362", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f6fb25b2b7d96e1459911b09844e2418defb7362", "committedDate": "2020-02-27T01:12:53Z", "message": "Update unit tests for new syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "548e0af47927cc49cafc1fb0d75fc8a73e70a2fa", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/548e0af47927cc49cafc1fb0d75fc8a73e70a2fa", "committedDate": "2020-02-28T07:08:11Z", "message": "Optimize last query process and fix review issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4039c28586158ceb5c2a23f7c9bc10dfee9e1b1", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c4039c28586158ceb5c2a23f7c9bc10dfee9e1b1", "committedDate": "2020-02-28T09:28:17Z", "message": "Modify last cache update strategy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2492f8ae47d881ed405a9e0d9c150e0992ca89e3", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/2492f8ae47d881ed405a9e0d9c150e0992ca89e3", "committedDate": "2020-02-28T10:36:02Z", "message": "Move last cache insert into StorageGroupProcessor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39974ad8a6c173dbc43a0b7fe5f7e971b1325026", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/39974ad8a6c173dbc43a0b7fe5f7e971b1325026", "committedDate": "2020-02-29T14:37:36Z", "message": "Fix review issues and make code more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e15c19a473971cb135bf8209fb8bff55464d6bc", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/6e15c19a473971cb135bf8209fb8bff55464d6bc", "committedDate": "2020-03-02T02:14:13Z", "message": "Add more java docs and rename some variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f136bcce40237672236cca1f1de738cfb450a9a8", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f136bcce40237672236cca1f1de738cfb450a9a8", "committedDate": "2020-03-02T02:15:15Z", "message": "Merge remote-tracking branch 'upstream/master' into new_series_reader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aa9e2b608c9f6d88a3547a89f19e8229dd0486e", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/8aa9e2b608c9f6d88a3547a89f19e8229dd0486e", "committedDate": "2020-03-02T09:30:20Z", "message": "add sync property file to pass sync test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bebfc0e4e1758b16d15a75b84343feb03e5aa4ab", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/bebfc0e4e1758b16d15a75b84343feb03e5aa4ab", "committedDate": "2020-03-02T13:04:10Z", "message": "Fix unit test bugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c26b2b5c6b1fe1e39d6d0afb59840554ac871301", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c26b2b5c6b1fe1e39d6d0afb59840554ac871301", "committedDate": "2020-03-02T14:34:17Z", "message": "Add Integration test for last query"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d009ad198cc8e9c094e071d160275c290c72d6a", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/6d009ad198cc8e9c094e071d160275c290c72d6a", "committedDate": "2020-03-02T15:05:20Z", "message": "Add missing licence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06dab82dc7b362c898f0f005aef35c480e44b64", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f06dab82dc7b362c898f0f005aef35c480e44b64", "committedDate": "2020-03-03T17:06:08Z", "message": "Merge remote-tracking branch 'upstream/master' into last_hotfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "437015b3b1fdbb05e4c1ae5b766c2afa3715de95", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/437015b3b1fdbb05e4c1ae5b766c2afa3715de95", "committedDate": "2020-03-03T17:06:24Z", "message": "Hot fix for last disable align crash bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTM5MzE4", "url": "https://github.com/apache/iotdb/pull/879#pullrequestreview-368539318", "createdAt": "2020-03-04T06:54:09Z", "commit": {"oid": "437015b3b1fdbb05e4c1ae5b766c2afa3715de95"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNjo1NDoxMFrOFxhwMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNjo1NDoxMFrOFxhwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ3NzU1Mw==", "bodyText": "false?", "url": "https://github.com/apache/iotdb/pull/879#discussion_r387477553", "createdAt": "2020-03-04T06:54:10Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "diffHunk": "@@ -242,7 +242,12 @@ private PhysicalPlan transformQuery(QueryOperator queryOperator)\n     } else {\n       queryPlan = new RawDataQueryPlan();\n     }\n-    if (queryOperator.isAlignByDevice()) {\n+    if (queryPlan instanceof LastQueryPlan) {\n+      // Last query result set will not be affected by alignment\n+      queryPlan.setAlignByTime(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "437015b3b1fdbb05e4c1ae5b766c2afa3715de95"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTYyMzE1", "url": "https://github.com/apache/iotdb/pull/879#pullrequestreview-368562315", "createdAt": "2020-03-04T07:51:20Z", "commit": {"oid": "437015b3b1fdbb05e4c1ae5b766c2afa3715de95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3154, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}