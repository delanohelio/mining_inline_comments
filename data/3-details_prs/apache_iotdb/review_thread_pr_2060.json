{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMTI3MTUx", "number": 2060, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNDoyMTo1OFrOE52Amg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNDoyMTo1OFrOE52Amg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDg5MTc4OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNDoyMTo1OFrOH0j2Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNjozODoyMFrOH0mO3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ==", "bodyText": "What about the plan.getInterval() is zero?  does the code has been checked before?", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524875355", "createdAt": "2020-11-17T04:21:58Z", "author": {"login": "neuyilan"}, "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "diffHunk": "@@ -687,8 +687,10 @@ private void deduplicate(QueryPlan queryPlan, int fetchSize)\n     if (queryPlan instanceof GroupByTimePlan) {\n       GroupByTimePlan plan = (GroupByTimePlan) queryPlan;\n       // the actual row number of group by query should be calculated from startTime, endTime and interval.\n-      fetchSize = Math\n-          .min((int) ((plan.getEndTime() - plan.getStartTime()) / plan.getInterval()), fetchSize);\n+      long interval = (plan.getEndTime() - plan.getStartTime()) / plan.getInterval();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a40842eccced325bc574e724cf8677fc0af3946a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkwOTI5Nw==", "bodyText": "yes. if you set interval = 0, it will throw exception: \"Interval must more than 0\"", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524909297", "createdAt": "2020-11-17T06:23:34Z", "author": {"login": "haimeiguo"}, "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "diffHunk": "@@ -687,8 +687,10 @@ private void deduplicate(QueryPlan queryPlan, int fetchSize)\n     if (queryPlan instanceof GroupByTimePlan) {\n       GroupByTimePlan plan = (GroupByTimePlan) queryPlan;\n       // the actual row number of group by query should be calculated from startTime, endTime and interval.\n-      fetchSize = Math\n-          .min((int) ((plan.getEndTime() - plan.getStartTime()) / plan.getInterval()), fetchSize);\n+      long interval = (plan.getEndTime() - plan.getStartTime()) / plan.getInterval();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ=="}, "originalCommit": {"oid": "a40842eccced325bc574e724cf8677fc0af3946a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkxNDM5OA==", "bodyText": "got it", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524914398", "createdAt": "2020-11-17T06:38:20Z", "author": {"login": "neuyilan"}, "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "diffHunk": "@@ -687,8 +687,10 @@ private void deduplicate(QueryPlan queryPlan, int fetchSize)\n     if (queryPlan instanceof GroupByTimePlan) {\n       GroupByTimePlan plan = (GroupByTimePlan) queryPlan;\n       // the actual row number of group by query should be calculated from startTime, endTime and interval.\n-      fetchSize = Math\n-          .min((int) ((plan.getEndTime() - plan.getStartTime()) / plan.getInterval()), fetchSize);\n+      long interval = (plan.getEndTime() - plan.getStartTime()) / plan.getInterval();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ=="}, "originalCommit": {"oid": "a40842eccced325bc574e724cf8677fc0af3946a"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 561, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}