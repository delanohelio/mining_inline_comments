{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNDE0MzM2", "number": 1868, "title": "Stop iotdb instance when RPC ip address or port is unavailable", "bodyText": "", "createdAt": "2020-10-27T02:06:58Z", "url": "https://github.com/apache/iotdb/pull/1868", "merged": true, "mergeCommit": {"oid": "913f0b748fe9ab927ea257f316b0d959a886db05"}, "closed": true, "closedAt": "2020-11-02T03:22:51Z", "author": {"login": "HTHou"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWfMG1gH2gAyNTEwNDE0MzM2OmVjM2NhMmJmYTkzNjU2NDkxY2FlNjg4YTA1ZDgyN2QzNDU3OTk4ZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWpLY5gH2gAyNTEwNDE0MzM2Ojc3N2U0MmEwMTkzOWRjNDhlMGMwODkzMWYwZGNhMmU2N2YzZGVkYTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ec3ca2bfa93656491cae688a05d827d3457998f2", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/ec3ca2bfa93656491cae688a05d827d3457998f2", "committedDate": "2020-10-27T02:03:51Z", "message": "stop iotdb instance when ip address or port is unavailable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4de5c3a8597f6ed35631a66a93d8b4e9270fe52", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/b4de5c3a8597f6ed35631a66a93d8b4e9270fe52", "committedDate": "2020-10-27T02:04:30Z", "message": "stop iotdb instance when ip address or port is unavailable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTQzMDg5", "url": "https://github.com/apache/iotdb/pull/1868#pullrequestreview-517543089", "createdAt": "2020-10-27T10:20:07Z", "commit": {"oid": "b4de5c3a8597f6ed35631a66a93d8b4e9270fe52"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDoyMDowN1rOHo0s9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDoyMDowN1rOHo0s9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU2ODU2NQ==", "bodyText": "Format here.\nBesides, instead of shutting down immediately, I would suggest a few retries, which may prevent test failures when the socket is not shut down timely.", "url": "https://github.com/apache/iotdb/pull/1868#discussion_r512568565", "createdAt": "2020-10-27T10:20:07Z", "author": {"login": "jt2594838"}, "path": "server/src/main/java/org/apache/iotdb/db/service/RPCService.java", "diffHunk": "@@ -61,12 +63,17 @@ public void initTProcessor() throws ClassNotFoundException,IllegalAccessExceptio\n   public void initThriftServiceThread()\n       throws IllegalAccessException, InstantiationException, ClassNotFoundException {\n     IoTDBConfig config = IoTDBDescriptor.getInstance().getConfig();\n-    thriftServiceThread = new ThriftServiceThread(processor,\n-        getID().getName(), ThreadName.RPC_CLIENT.getName(),\n-        config.getRpcAddress(), config.getRpcPort(), config.getRpcMaxConcurrentClientNum(),\n-        config.getThriftServerAwaitTimeForStopService(),\n-        new RPCServiceThriftHandler(impl),\n-        IoTDBDescriptor.getInstance().getConfig().isRpcThriftCompressionEnable());\n+    try {\n+      thriftServiceThread = new ThriftServiceThread(processor,\n+          getID().getName(), ThreadName.RPC_CLIENT.getName(),\n+          config.getRpcAddress(), config.getRpcPort(), config.getRpcMaxConcurrentClientNum(),\n+          config.getThriftServerAwaitTimeForStopService(),\n+          new RPCServiceThriftHandler(impl),\n+          IoTDBDescriptor.getInstance().getConfig().isRpcThriftCompressionEnable());\n+    }\n+    catch (RPCServiceException e) {\n+      throw new IllegalAccessException(e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4de5c3a8597f6ed35631a66a93d8b4e9270fe52"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "777e42a01939dc48e0c08931f0dca2e67f3deda2", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/777e42a01939dc48e0c08931f0dca2e67f3deda2", "committedDate": "2020-10-27T13:42:07Z", "message": "reformat"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3745, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}