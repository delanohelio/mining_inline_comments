{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxNDI5MDAx", "number": 2173, "title": "[To rel/0.11] [Mem control] Move one of the insert check out from the sg lock", "bodyText": "This PR also fixed a status code bug when insertion rejected.", "createdAt": "2020-12-03T03:27:10Z", "url": "https://github.com/apache/iotdb/pull/2173", "merged": true, "mergeCommit": {"oid": "b5eb03b4d75b02873a0a62267b770e99055e514c"}, "closed": true, "closedAt": "2020-12-03T08:44:33Z", "author": {"login": "HTHou"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiaJxeAH2gAyNTMxNDI5MDAxOjFjZThiNzljOGE5YmQ4NzkxMTI0NTA2OWY2YmY5MGJjZjA4NTFhYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdieo1igFqTU0MzY5MDUxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1ce8b79c8a9bd87911245069f6bf90bcf0851aa4", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/1ce8b79c8a9bd87911245069f6bf90bcf0851aa4", "committedDate": "2020-12-03T02:58:52Z", "message": "more one insert check out of the sg lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3547f03a9265a439cfd13dc55e9d680d2be98d", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/da3547f03a9265a439cfd13dc55e9d680d2be98d", "committedDate": "2020-12-03T02:59:07Z", "message": "fix review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82313f4de915a338a5fecd03a2721f9c8b867d49", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/82313f4de915a338a5fecd03a2721f9c8b867d49", "committedDate": "2020-12-03T02:59:22Z", "message": "fix status code error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47207858eed34692af39257c5f5000b83fa52252", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/47207858eed34692af39257c5f5000b83fa52252", "committedDate": "2020-12-03T03:17:07Z", "message": "fix error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59085e0b9f97f75d2f0a21dd26be4cee0f5e8266", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/59085e0b9f97f75d2f0a21dd26be4cee0f5e8266", "committedDate": "2020-12-03T03:23:33Z", "message": "change a config name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "858957e667ffe4a190069960344abbc9b3d57f82", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/858957e667ffe4a190069960344abbc9b3d57f82", "committedDate": "2020-12-03T06:31:24Z", "message": "reduce duplicate lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f82a8569054c7ea7ad26a9543a06113451320966", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/f82a8569054c7ea7ad26a9543a06113451320966", "committedDate": "2020-12-03T06:31:50Z", "message": "unify reject error code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd2b26307d62178f8c6e120a5df3a984930cc7fe", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/cd2b26307d62178f8c6e120a5df3a984930cc7fe", "committedDate": "2020-12-03T06:32:20Z", "message": "reduce duplicate lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d75f3dfc78b089ee3800f01bf63ee0e1e2ec4b0b", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/d75f3dfc78b089ee3800f01bf63ee0e1e2ec4b0b", "committedDate": "2020-12-03T07:52:48Z", "message": "fix code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6cb4823cca20e415f32cba74459daaa6971bab4", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/d6cb4823cca20e415f32cba74459daaa6971bab4", "committedDate": "2020-12-03T08:05:54Z", "message": "fix review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNjkwNTEy", "url": "https://github.com/apache/iotdb/pull/2173#pullrequestreview-543690512", "createdAt": "2020-12-03T08:03:52Z", "commit": {"oid": "d75f3dfc78b089ee3800f01bf63ee0e1e2ec4b0b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODowMzo1MlrOH-FpZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODowMzo1MlrOH-FpZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2NjI3Nw==", "bodyText": "add a new ErrorCode", "url": "https://github.com/apache/iotdb/pull/2173#discussion_r534866277", "createdAt": "2020-12-03T08:03:52Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java", "diffHunk": "@@ -692,6 +696,15 @@ public void insert(InsertRowPlan insertRowPlan) throws WriteProcessException {\n    */\n   @SuppressWarnings(\"squid:S3776\") // Suppress high Cognitive Complexity warning\n   public void insertTablet(InsertTabletPlan insertTabletPlan) throws BatchInsertionException {\n+    if (enableMemControl) {\n+      try {\n+        StorageEngine.blockInsertionIfReject();\n+      } catch (WriteProcessException e) {\n+        TSStatus[] results = new TSStatus[insertTabletPlan.getRowCount()];\n+        Arrays.fill(results, RpcUtils.getStatus(TSStatusCode.INTERNAL_SERVER_ERROR));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d75f3dfc78b089ee3800f01bf63ee0e1e2ec4b0b"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4050, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}