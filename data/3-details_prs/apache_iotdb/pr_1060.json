{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MTIxODA3", "number": 1060, "title": "[IOTDB-597] Rename methods in Session", "bodyText": "Rename  insertMultipleDeviceBatch to insertTables\nRename insertInBatch to insertRecords\nadd insertTablets in rpc.thrift\nRename insert to insertRecord in rpc\nRename insertBatch to insertTablet\nRename RowBatch to Tablet", "createdAt": "2020-04-16T05:11:49Z", "url": "https://github.com/apache/iotdb/pull/1060", "merged": true, "mergeCommit": {"oid": "c116b65e3bd20bb497b2b37f762ac1b9268cbb8d"}, "closed": true, "closedAt": "2020-04-25T02:22:35Z", "author": {"login": "qiaojialin"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYFmEJAH2gAyNDA0MTIxODA3OmRmOGYxZTc0ZGZlNzRkNWE1OTU0MWRlMzUyYzc4ODJkYzM3ODY4NTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca7-gRgH2gAyNDA0MTIxODA3OmNkOTgwNzI3MzgyZjJjOTExODg2ZWJmYmYzNDA3NTYwNDliYzA0MWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df8f1e74dfe74d5a59541de352c7882dc3786853", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/df8f1e74dfe74d5a59541de352c7882dc3786853", "committedDate": "2020-04-16T05:11:22Z", "message": "add insertMultiple batch in SessionPool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc641cdeffd3ba26662c6178094bc93362776637", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/bc641cdeffd3ba26662c6178094bc93362776637", "committedDate": "2020-04-16T05:33:16Z", "message": "rename session method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e88e0de2a9a67f73b3305bcd99171c5acf2369d1", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/e88e0de2a9a67f73b3305bcd99171c5acf2369d1", "committedDate": "2020-04-16T08:37:54Z", "message": "fix flink sink"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1312b31b9477787e99ca1df6c4345ee0139bb21f", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/1312b31b9477787e99ca1df6c4345ee0139bb21f", "committedDate": "2020-04-16T12:17:07Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "committedDate": "2020-04-16T15:07:46Z", "message": "rename and refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDAyMDAy", "url": "https://github.com/apache/iotdb/pull/1060#pullrequestreview-396002002", "createdAt": "2020-04-19T10:38:14Z", "commit": {"oid": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDozODoxNFrOGH1yAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDo0MjoxM1rOGH10vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NDM3MQ==", "bodyText": "don't forget to change the method name of  this. insertInBatch()", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r410874371", "createdAt": "2020-04-19T10:38:14Z", "author": {"login": "liutaohua"}, "path": "example/session/src/main/java/org/apache/iotdb/SessionExample.java", "diffHunk": "@@ -125,20 +125,19 @@ private static void insertInBatch() throws IoTDBConnectionException, BatchExecut\n       valuesList.add(values);\n       timestamps.add(time);\n       if (time != 0 && time % 100 == 0) {\n-        session.insertInBatch(deviceIds, timestamps, measurementsList, valuesList);\n+        session.insertRows(deviceIds, timestamps, measurementsList, valuesList);\n         deviceIds.clear();\n         measurementsList.clear();\n         valuesList.clear();\n         timestamps.clear();\n       }\n     }\n \n-    session.insertInBatch(deviceIds, timestamps, measurementsList, valuesList);\n+    session.insertRows(deviceIds, timestamps, measurementsList, valuesList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NTA3MQ==", "bodyText": "rowBatchList", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r410875071", "createdAt": "2020-04-19T10:42:13Z", "author": {"login": "liutaohua"}, "path": "example/session/src/main/java/org/apache/iotdb/SessionExample.java", "diffHunk": "@@ -211,10 +209,10 @@ private static void insertMultipleDeviceRowBatch()\n     \n     RowBatch rowBatch3 = schema3.createRowBatch(\"root.sg1.d3\", 100);\n     \n-    Map<String, RowBatch> rowBatchMap = new HashMap<>();\n-    rowBatchMap.put(\"root.sg1.d1\", rowBatch1);\n-    rowBatchMap.put(\"root.sg1.d2\", rowBatch2);\n-    rowBatchMap.put(\"root.sg1.d3\", rowBatch3);\n+    List<RowBatch> rowBatchMap = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d05860224677aed881957cdb3f04b78dbff859db", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/d05860224677aed881957cdb3f04b78dbff859db", "committedDate": "2020-04-24T06:03:24Z", "message": "rename records tablet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c62feb7018fade1f4e7f39097d7d0b254ead0d3e", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/c62feb7018fade1f4e7f39097d7d0b254ead0d3e", "committedDate": "2020-04-24T06:10:22Z", "message": "rename records tablet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c08c91bec189757b7adce73049e85ad7aca34e67", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/c08c91bec189757b7adce73049e85ad7aca34e67", "committedDate": "2020-04-24T07:01:51Z", "message": "update doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "820f653c0b215c5238d0dcf60e0b3f2ffadfd44b", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/820f653c0b215c5238d0dcf60e0b3f2ffadfd44b", "committedDate": "2020-04-24T07:15:24Z", "message": "fix sonar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d4d7e206e93ce0dc91aaa613a7ef3c1b0209064", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/1d4d7e206e93ce0dc91aaa613a7ef3c1b0209064", "committedDate": "2020-04-24T07:56:06Z", "message": "add insertTables rpc interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9743126073f7a134a0d992beba805c36a98dc52e", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/9743126073f7a134a0d992beba805c36a98dc52e", "committedDate": "2020-04-24T07:58:48Z", "message": "fix python interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "880a8fb67f9744e8dc431071f459f9deaf4f8307", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/880a8fb67f9744e8dc431071f459f9deaf4f8307", "committedDate": "2020-04-24T08:03:02Z", "message": "fix sonar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/b94f4f72703e074ba78c4b3efeccd30391cc17b8", "committedDate": "2020-04-24T14:37:13Z", "message": "fix pool return"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTA4NDMx", "url": "https://github.com/apache/iotdb/pull/1060#pullrequestreview-400108431", "createdAt": "2020-04-24T16:45:22Z", "commit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "state": "APPROVED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjo0NToyM1rOGLgRDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMDo0MVrOGLg2Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxNjE3Mw==", "bodyText": "I think we should also change the java doc to insert tablet plan.", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414716173", "createdAt": "2020-04-24T16:45:23Z", "author": {"login": "HTHou"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java", "diffHunk": "@@ -576,12 +576,12 @@ private boolean checkTTL(long time) {\n   /**\n    * insert batch to tsfile processor thread-safety that the caller need to guarantee\n    *\n-   * @param batchInsertPlan batch insert plan\n+   * @param insertTabletPlan batch insert plan", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxOTk0Mg==", "bodyText": "The comment should be // test insert tablet now.", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414719942", "createdAt": "2020-04-24T16:51:26Z", "author": {"login": "HTHou"}, "path": "session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java", "diffHunk": "@@ -206,14 +202,14 @@ public void testTestMethod()\n     createTimeseries();\n \n     // test insert batch\n-    Schema schema = new Schema();\n-    schema.registerTimeseries(new Path(deviceId, \"s1\"), new MeasurementSchema(\"s1\", TSDataType.INT64, TSEncoding.RLE));\n-    schema.registerTimeseries(new Path(deviceId, \"s2\"), new MeasurementSchema(\"s2\", TSDataType.INT64, TSEncoding.RLE));\n-    schema.registerTimeseries(new Path(deviceId, \"s3\"), new MeasurementSchema(\"s3\", TSDataType.INT64, TSEncoding.RLE));\n+    List<MeasurementSchema> schemaList = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMDgyMQ==", "bodyText": "// test inset records", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414720821", "createdAt": "2020-04-24T16:52:54Z", "author": {"login": "HTHou"}, "path": "session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java", "diffHunk": "@@ -225,7 +221,7 @@ public void testTestMethod()\n       values.add(\"1\");\n       values.add(\"2\");\n       values.add(\"3\");\n-      session.testInsert(deviceId, time, measurements, values);\n+      session.testInsertRecord(deviceId, time, measurements, values);\n     }\n \n     // test insert row in batch", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjAyOA==", "bodyText": "Confirm whether the tablet is legal.", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722028", "createdAt": "2020-04-24T16:54:47Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java", "diffHunk": "@@ -208,22 +208,22 @@ private boolean checkIsTimeSeriesExist(TSRecord record) throws WriteProcessExcep\n   /**\n    * Confirm whether the row batch is legal.\n    *\n-   * @param rowBatch - a row batch responding multiple columns\n+   * @param tablet - a row batch responding multiple columns\n    * @return - whether the row batch has been added into RecordWriter legally", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjQwMw==", "bodyText": "write a tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722403", "createdAt": "2020-04-24T16:55:23Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java", "diffHunk": "@@ -254,16 +254,16 @@ public boolean write(TSRecord record) throws IOException, WriteProcessException\n   /**\n    * write a row batch\n    *\n-   * @param rowBatch - multiple time series of one device that share a time column\n+   * @param tablet - multiple time series of one device that share a time column", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjc4NQ==", "bodyText": "receive a tablet, write it to timeseries writers", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722785", "createdAt": "2020-04-24T16:56:03Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java", "diffHunk": "@@ -51,14 +51,14 @@\n   /**\n    * receive a row batch, write it to timeseries writers\n    *\n-   * @param rowBatch\n+   * @param tablet", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzQzNQ==", "bodyText": "Return a tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723435", "createdAt": "2020-04-24T16:57:02Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -46,49 +57,43 @@\n    */\n   public long[] timestamps;\n   /**\n-   * each object is a primitive type array, which represents values of one\n-   * measurement\n+   * each object is a primitive type array, which represents values of one measurement\n    */\n   public Object[] values;\n   /**\n-   * the number of rows to include in this row batch\n+   * the number of rows to include in this tablet\n    */\n-  public int batchSize;\n+  public int rowSize;\n   /**\n    * the maximum number of rows for this row batch\n    */\n-  private int maxBatchSize;\n-\n-  /**\n-   * total byte size that values occupies\n-   */\n-  private int valueOccupation = -1;\n+  private int maxRowNumber;\n \n   /**\n    * Return a row batch with default specified row number. This is the standard\n-   * constructor (all RowBatch should be the same size).\n+   * constructor (all Tablet should be the same size).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzYwMw==", "bodyText": "Return a tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723603", "createdAt": "2020-04-24T16:57:21Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -46,49 +57,43 @@\n    */\n   public long[] timestamps;\n   /**\n-   * each object is a primitive type array, which represents values of one\n-   * measurement\n+   * each object is a primitive type array, which represents values of one measurement\n    */\n   public Object[] values;\n   /**\n-   * the number of rows to include in this row batch\n+   * the number of rows to include in this tablet\n    */\n-  public int batchSize;\n+  public int rowSize;\n   /**\n    * the maximum number of rows for this row batch\n    */\n-  private int maxBatchSize;\n-\n-  /**\n-   * total byte size that values occupies\n-   */\n-  private int valueOccupation = -1;\n+  private int maxRowNumber;\n \n   /**\n    * Return a row batch with default specified row number. This is the standard\n-   * constructor (all RowBatch should be the same size).\n+   * constructor (all Tablet should be the same size).\n    *\n    * @param deviceId   the name of the device specified to be written in\n    * @param timeseries the list of measurement schemas for creating the row batch\n    */\n-  public RowBatch(String deviceId, List<MeasurementSchema> timeseries) {\n+  public Tablet(String deviceId, List<MeasurementSchema> timeseries) {\n     this(deviceId, timeseries, DEFAULT_SIZE);\n   }\n \n   /**\n    * Return a row batch with the specified number of rows (maxBatchSize). Only\n-   * call this constructor directly for testing purposes. RowBatch should normally\n+   * call this constructor directly for testing purposes. Tablet should normally", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzkzNw==", "bodyText": "Return the maximum number of rows for this tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723937", "createdAt": "2020-04-24T16:57:57Z", "author": {"login": "HTHou"}, "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -102,42 +107,42 @@ public RowBatch(String deviceId, List<MeasurementSchema> schemas, int maxBatchSi\n   /**\n    * Return the maximum number of rows for this row batch\n    */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNDg3MA==", "bodyText": "// construct the tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414724870", "createdAt": "2020-04-24T16:59:26Z", "author": {"login": "HTHou"}, "path": "hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java", "diffHunk": "@@ -61,40 +64,42 @@ public static void writeTsFile(String filePath) {\n \n       // add measurements into file schema (all with INT64 data type)\n       for (int i = 0; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\"sensor_\" + (i + 1),\n+            TSDataType.INT64, TSEncoding.TS_2DIFF, CompressionType.UNCOMPRESSED);\n         schema.registerTimeseries(new Path(\"device_1\", \"sensor_\" + (i + 1)),\n-            new MeasurementSchema(\"sensor_\" + (i + 1), TSDataType.INT64, TSEncoding.TS_2DIFF,\n-                CompressionType.UNCOMPRESSED));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add measurements into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(\"device_1\");\n+      Tablet tablet = new Tablet(\"device_1\", schemaList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTA4Nw==", "bodyText": "// construct the tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414725087", "createdAt": "2020-04-24T16:59:50Z", "author": {"login": "HTHou"}, "path": "hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java", "diffHunk": "@@ -61,39 +64,42 @@ public static void writeTsFile(String filePath) {\n \n       // add timeseries into file schema (all with INT64 data type)\n       for (int i = 0; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\"sensor_\" + (i + 1),\n+            TSDataType.INT64, TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(\"device_1\", \"sensor_\" + (i + 1)),\n-                new MeasurementSchema(\"sensor_\" + (i + 1), TSDataType.INT64, TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add timeseries into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(\"device_1\");\n+      Tablet tablet = new Tablet(\"device_1\", schemaList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTYzOA==", "bodyText": "// construct the tablet", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414725638", "createdAt": "2020-04-24T17:00:41Z", "author": {"login": "HTHou"}, "path": "example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java", "diffHunk": "@@ -52,39 +54,47 @@ public static void writeTsFile(String filePath) {\n \n       Schema schema = new Schema();\n \n+      List<MeasurementSchema> schemaList = new ArrayList<>();\n+\n       // the number of rows to include in the row batch\n       int rowNum = 1000000;\n       // the number of values to include in the row batch\n       int sensorNum = 10;\n \n       // add measurements into file schema (all with INT64 data type)\n       for (int i = 0; i < 2; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\n+            Constant.SENSOR_PREFIX + (i + 1), TSDataType.INT64,\n+            TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(Constant.DEVICE_1, Constant.SENSOR_PREFIX + (i + 1)),\n-            new MeasurementSchema(Constant.SENSOR_PREFIX + (i + 1), TSDataType.INT64,\n-                TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       for (int i = 2; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\n+            Constant.SENSOR_PREFIX + (i + 1), TSDataType.DOUBLE,\n+            TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(Constant.DEVICE_1, Constant.SENSOR_PREFIX + (i + 1)),\n-            new MeasurementSchema(Constant.SENSOR_PREFIX + (i + 1), TSDataType.DOUBLE,\n-                TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add measurements into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(Constant.DEVICE_1);\n+      Tablet tablet = new Tablet(Constant.DEVICE_1, schemaList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd980727382f2c911886ebfbf340756049bc041a", "author": {"user": {"login": "qiaojialin", "name": "Jialin Qiao"}}, "url": "https://github.com/apache/iotdb/commit/cd980727382f2c911886ebfbf340756049bc041a", "committedDate": "2020-04-25T01:40:47Z", "message": "rename all row batch to tablet"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2940, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}