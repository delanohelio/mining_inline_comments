{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NTc0MTAz", "number": 2088, "title": "[IOTDB-768] Extend more functions in aggregation group by level", "bodyText": "This PR plans to extend the \"groupby level\" syntax to more aggregation functions, including sum, avg, last_value, first_value, min_time, max_time, min_value, max_value.\nPay attention that this syntax currently only supports one single aggregation function with one measurement, e.g.\nselect func(<measurement>) from <path> group by level=n\n\nAdding multiple aggregation functions will be regarded as wrong syntax and rejected by the server.\nFor the details, please refer to the design doc: https://cwiki.apache.org/confluence/display/IOTDB/Group+by+Level", "createdAt": "2020-11-20T09:32:31Z", "url": "https://github.com/apache/iotdb/pull/2088", "merged": true, "mergeCommit": {"oid": "6d8cdd0f17483aadbf8459c4861f5095473435c2"}, "closed": true, "closedAt": "2020-11-24T00:55:53Z", "author": {"login": "wshao08"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeT3p8gH2gAyNTI0NTc0MTAzOjBlYTE3M2VhZTU1NGE0ODA4ZTBkOTA1NmQ5MGU3ZTZlODM0ZWViMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfWK1bAH2gAyNTI0NTc0MTAzOmNjMzFkMGU0MGMzN2JkZTE0MTVkNzRkYjAwOGI1MzgyOTVjNDIzYjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ea173eae554a4808e0d9056d90e7e6e834eeb34", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/0ea173eae554a4808e0d9056d90e7e6e834eeb34", "committedDate": "2020-11-20T09:23:57Z", "message": "First commit for group by level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "428294186bd677993358f1224895a99621d77486", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/428294186bd677993358f1224895a99621d77486", "committedDate": "2020-11-21T04:38:26Z", "message": "Test cases issue fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e1491a769ebe94c0cee193f624fb58c71efd63c", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/0e1491a769ebe94c0cee193f624fb58c71efd63c", "committedDate": "2020-11-21T05:07:48Z", "message": "codesmell fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd9f997c7ff267c995c1b71ea042eeba1650e57", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/dcd9f997c7ff267c995c1b71ea042eeba1650e57", "committedDate": "2020-11-21T08:30:00Z", "message": "Remove unused test assertions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MTM3MzQ4", "url": "https://github.com/apache/iotdb/pull/2088#pullrequestreview-536137348", "createdAt": "2020-11-23T00:55:03Z", "commit": {"oid": "dcd9f997c7ff267c995c1b71ea042eeba1650e57"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfe8e2f795a06991df93768d7b40f97f607138f", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/fdfe8e2f795a06991df93768d7b40f97f607138f", "committedDate": "2020-11-23T08:55:35Z", "message": "Update doc and add test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6680fb9be014c67a96c296c1f14ecae1636ee88f", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/6680fb9be014c67a96c296c1f14ecae1636ee88f", "committedDate": "2020-11-23T09:10:58Z", "message": "Codesmell fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2Mjg2Njgz", "url": "https://github.com/apache/iotdb/pull/2088#pullrequestreview-536286683", "createdAt": "2020-11-23T09:18:38Z", "commit": {"oid": "6680fb9be014c67a96c296c1f14ecae1636ee88f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwOToxODozOFrOH4EvZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwOToxODozOFrOH4EvZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU1OTk3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For all timeseries path, by convention, \"level=0\" represents *root* level. \n          \n          \n            \n            For all timeseries paths, by convention, \"level=0\" represents *root* level.", "url": "https://github.com/apache/iotdb/pull/2088#discussion_r528559974", "createdAt": "2020-11-23T09:18:38Z", "author": {"login": "HTHou"}, "path": "docs/UserGuide/Operation Manual/DML Data Manipulation Language.md", "diffHunk": "@@ -169,31 +169,38 @@ select count(status) from root.ln.wf01.wt01;\n | 4              |\n \n \n-##### Count Points By Level\n+##### Aggregation By Level\n \n-Level could be defined to show count the number of points of each node at the given level in current Metadata Tree.\n-\n-This could be used to query the number of points under each device.\n-\n-The SQL statement is:\n+**Aggregation by level statement** is used for aggregating upon specific hierarchical level of timeseries path.\n+For all timeseries path, by convention, \"level=0\" represents *root* level. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6680fb9be014c67a96c296c1f14ecae1636ee88f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzI5OTky", "url": "https://github.com/apache/iotdb/pull/2088#pullrequestreview-536329992", "createdAt": "2020-11-23T10:14:17Z", "commit": {"oid": "6680fb9be014c67a96c296c1f14ecae1636ee88f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da42a9def883e81dfe2a58aeb3761ad5dfa74575", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/da42a9def883e81dfe2a58aeb3761ad5dfa74575", "committedDate": "2020-11-23T10:50:30Z", "message": "Restrict agg func to one when using group by level clause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzYwMTE5", "url": "https://github.com/apache/iotdb/pull/2088#pullrequestreview-536360119", "createdAt": "2020-11-23T10:53:41Z", "commit": {"oid": "6680fb9be014c67a96c296c1f14ecae1636ee88f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "852f83ea60644118d4a0776ab9a7f2d1c899e8c0", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/852f83ea60644118d4a0776ab9a7f2d1c899e8c0", "committedDate": "2020-11-23T12:14:04Z", "message": "Add test for aggregation group by level with time intervals"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NDE5MDg5", "url": "https://github.com/apache/iotdb/pull/2088#pullrequestreview-536419089", "createdAt": "2020-11-23T12:17:12Z", "commit": {"oid": "852f83ea60644118d4a0776ab9a7f2d1c899e8c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c12207f359bf6b6bb56ff7887aaeb914df035ff", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/8c12207f359bf6b6bb56ff7887aaeb914df035ff", "committedDate": "2020-11-23T13:10:57Z", "message": "Update docs/UserGuide/Operation Manual/DML Data Manipulation Language.md\n\nCo-authored-by: Haonan <hhaonan@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9e5658d6e380575dbc9485e393d979082a062b0", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/d9e5658d6e380575dbc9485e393d979082a062b0", "committedDate": "2020-11-23T13:16:20Z", "message": "Remove test cases with multi agg functions with group by level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a85864a887ffa53e4d08693d6780dd9b54172665", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/a85864a887ffa53e4d08693d6780dd9b54172665", "committedDate": "2020-11-23T14:25:07Z", "message": "Fix test case failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc31d0e40c37bde1415d74db008b538295c423b0", "author": {"user": {"login": "wshao08", "name": null}}, "url": "https://github.com/apache/iotdb/commit/cc31d0e40c37bde1415d74db008b538295c423b0", "committedDate": "2020-11-23T14:38:38Z", "message": "Disable multi aggregation function with group by level"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4163, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}