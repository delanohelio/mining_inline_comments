{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMTExMjM0", "number": 932, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjowMzozM1rODqWREw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjowMzozM1rODqWREw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzMxNjAzOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjowMzozM1rOF6CYtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNTo0NTozMFrOF6htEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwMDgyMQ==", "bodyText": "why not use CopyOnWriteArrayList?", "url": "https://github.com/apache/iotdb/pull/932#discussion_r396400821", "createdAt": "2020-03-23T12:03:33Z", "author": {"login": "vesense"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -133,7 +133,7 @@\n   private static final int DELETE_SIZE = 50;\n   private static final String ERROR_PARSING_SQL =\n       \"meet error while parsing SQL to physical plan: {}\";\n-  public static Vector<SqlArgument> sqlArgumentsList = new Vector<>();\n+  public static final Vector<SqlArgument> sqlArgumentsList = new Vector<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da1f872cd5cdb19397e42b83908571cf1fbd5793"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUyMjAzMA==", "bodyText": "After reading codes, I find sqlArgumentsList is for MetricService, which is for logging the query history (and its execution plan..). So, the field is write-intense and read-rare.\nIs CopyOnWriteArrayList has better performance than synchronized  in this way?\nBesides, @qiaojialin, don't you need to add lock for reading the list? (line 46 in QueryServlet.java)", "url": "https://github.com/apache/iotdb/pull/932#discussion_r396522030", "createdAt": "2020-03-23T15:08:06Z", "author": {"login": "jixuan1989"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -133,7 +133,7 @@\n   private static final int DELETE_SIZE = 50;\n   private static final String ERROR_PARSING_SQL =\n       \"meet error while parsing SQL to physical plan: {}\";\n-  public static Vector<SqlArgument> sqlArgumentsList = new Vector<>();\n+  public static final Vector<SqlArgument> sqlArgumentsList = new Vector<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwMDgyMQ=="}, "originalCommit": {"oid": "da1f872cd5cdb19397e42b83908571cf1fbd5793"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxMzkzOA==", "bodyText": "Hi, the sqlArgumentList is a write-intensive with nearly no read. The copy in read is used.", "url": "https://github.com/apache/iotdb/pull/932#discussion_r396913938", "createdAt": "2020-03-24T05:45:30Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/service/TSServiceImpl.java", "diffHunk": "@@ -133,7 +133,7 @@\n   private static final int DELETE_SIZE = 50;\n   private static final String ERROR_PARSING_SQL =\n       \"meet error while parsing SQL to physical plan: {}\";\n-  public static Vector<SqlArgument> sqlArgumentsList = new Vector<>();\n+  public static final Vector<SqlArgument> sqlArgumentsList = new Vector<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwMDgyMQ=="}, "originalCommit": {"oid": "da1f872cd5cdb19397e42b83908571cf1fbd5793"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 147, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}