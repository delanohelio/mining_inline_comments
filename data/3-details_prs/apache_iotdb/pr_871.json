{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNDM1NjU0", "number": 871, "title": "[IOTDB-529] Relative times and NOW() operator cannot be used in Group By", "bodyText": "We can use relative times and NOW() operator in Group By clause.", "createdAt": "2020-03-02T15:05:10Z", "url": "https://github.com/apache/iotdb/pull/871", "merged": true, "mergeCommit": {"oid": "dea6737bc183340a0f6c48ffcf644f78cb358a43"}, "closed": true, "closedAt": "2020-03-03T00:48:03Z", "author": {"login": "HTHou"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3oXqqgH2gAyMzgyNDM1NjU0OjVhNGUyMjU1NWVkMTQxOGMwOTliNmE4MzIxOWM5ZjVmMzQ2MTQ0Y2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJwwFhAH2gAyMzgyNDM1NjU0OmJhZmU4ODRjMzY4NzZhMDEyMWNkZjMzMTBlMzQxMGY1ZDc4MDg2MDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a4e22555ed1418c099b6a83219c9f5f346144cb", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/5a4e22555ed1418c099b6a83219c9f5f346144cb", "committedDate": "2020-01-06T09:02:49Z", "message": "fix a bug when recover the last crashed file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec64d27af2b0735f5d8588f709834bdfbc720897", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/ec64d27af2b0735f5d8588f709834bdfbc720897", "committedDate": "2020-01-06T09:22:59Z", "message": "add exception for something gets wrong"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68296fc4de495b85829ddb6e511ad3b875727f38", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/68296fc4de495b85829ddb6e511ad3b875727f38", "committedDate": "2020-01-06T12:36:13Z", "message": "fix test errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba57aaba1803fef32309073e134c881c58f4c5ab", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/ba57aaba1803fef32309073e134c881c58f4c5ab", "committedDate": "2020-01-07T08:28:43Z", "message": "change the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7d462642860d9d69d0551ea3a45ff6be6c03308", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/e7d462642860d9d69d0551ea3a45ff6be6c03308", "committedDate": "2020-01-07T09:12:49Z", "message": "add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "835cbfa0f3f7994f5049892a088d2611b14fc9f1", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/835cbfa0f3f7994f5049892a088d2611b14fc9f1", "committedDate": "2020-01-07T11:03:32Z", "message": "Merge branch 'master' of https://github.com/apache/incubator-iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee2414a8d22d7b296762ad2acd641e70cd579870", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/ee2414a8d22d7b296762ad2acd641e70cd579870", "committedDate": "2020-01-13T05:43:26Z", "message": "Merge branch 'master' of https://github.com/apache/incubator-iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fdd0653f303ebbffd0721104d50d9fef5f6ed0b", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/2fdd0653f303ebbffd0721104d50d9fef5f6ed0b", "committedDate": "2020-03-02T13:33:03Z", "message": "Merge branch 'master' of https://github.com/apache/incubator-iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e36c27836889d8d7d27337023a7dab16cdd28173", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/e36c27836889d8d7d27337023a7dab16cdd28173", "committedDate": "2020-03-02T15:00:00Z", "message": "use NOW() operator in Group by"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e339e1e76dd1b336dfa9f6b8b3f29e8ba205115c", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/e339e1e76dd1b336dfa9f6b8b3f29e8ba205115c", "committedDate": "2020-03-02T15:48:03Z", "message": "add a UnitTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MzA5MzYw", "url": "https://github.com/apache/iotdb/pull/871#pullrequestreview-367309360", "createdAt": "2020-03-02T15:52:58Z", "commit": {"oid": "e339e1e76dd1b336dfa9f6b8b3f29e8ba205115c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNTo1Mjo1OFrOFwkvtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNTo1Mjo1OFrOFwkvtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQ3ODAwNw==", "bodyText": "Ok.. This UT is for testing that there is no data.\nHow about add one more like:\n@Test\n  public void usingNowFunction() {\n    try (Connection connection = DriverManager.\n        getConnection(\"jdbc:iotdb://127.0.0.1:6667/\", \"root\", \"root\");\n        Statement statement = connection.createStatement()) {\n      statement.execute(\"INSERT INTO root.ln.wf01.wt01(timestamp,temperature,status, hardware) \"\n          + \"values(now(), 35.5, false, 650)\");\n      ResultSet resultSet = statement.executeQuery(\n          \"select count(temperature), sum(temperature), avg(temperature) from \"\n              + \"root.ln.wf01.wt01 \"\n              + \"GROUP BY ([now() - 1h, now()), 1h)\");\n      assertTrue(resultSet.next());\n      //resultSet.getLong(1) is the timestamp\n      assertEquals(1, Integer.valueOf(resultSet.getString(2)).intValue());\n      assertEquals(35.5, Float.valueOf(resultSet.getString(3)).floatValue(), 0.01);\n      assertEquals(35.5, Double.valueOf(resultSet.getString(4)).doubleValue(), 0.01);\n\n    } catch (Exception e) {\n      e.printStackTrace();\n      fail(e.getMessage());\n    }\n  }", "url": "https://github.com/apache/iotdb/pull/871#discussion_r386478007", "createdAt": "2020-03-02T15:52:58Z", "author": {"login": "jixuan1989"}, "path": "server/src/test/java/org/apache/iotdb/db/integration/IOTDBGroupByIT.java", "diffHunk": "@@ -506,6 +506,45 @@ public void countSumAvgInnerIntervalTest() {\n     }\n   }\n \n+  @Test\n+  public void countSumAvgRelativeTimesTest() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e339e1e76dd1b336dfa9f6b8b3f29e8ba205115c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b850f5b64d12812c69cf74c307966cd3ea08abf0", "author": {"user": {"login": "HTHou", "name": "Haonan"}}, "url": "https://github.com/apache/iotdb/commit/b850f5b64d12812c69cf74c307966cd3ea08abf0", "committedDate": "2020-03-02T15:59:09Z", "message": "add one more Test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MzIyOTUz", "url": "https://github.com/apache/iotdb/pull/871#pullrequestreview-367322953", "createdAt": "2020-03-02T16:08:34Z", "commit": {"oid": "e339e1e76dd1b336dfa9f6b8b3f29e8ba205115c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bafe884c36876a0121cdf3310e3410f5d7808603", "author": {"user": null}, "url": "https://github.com/apache/iotdb/commit/bafe884c36876a0121cdf3310e3410f5d7808603", "committedDate": "2020-03-02T16:59:22Z", "message": "fix UT in groupby with now() to let travis more stable"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3144, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}