{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MjY1NTA2", "number": 886, "title": "[IOTDB-545] Update checkPathValidity in Session", "bodyText": "In session,  support path like: root.sg, root.sg.1.2.3, root.sg.d1.1_1, root.sg.\"1.2.3\", root.sg.'1.2.3'", "createdAt": "2020-03-05T13:07:40Z", "url": "https://github.com/apache/iotdb/pull/886", "merged": true, "mergeCommit": {"oid": "27fb4406368faec35e5d6ee2baf32f19124a108d"}, "closed": true, "closedAt": "2020-03-07T02:26:57Z", "author": {"login": "samperson1997"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKrNFWAH2gAyMzg0MjY1NTA2Ojg0YjcxMzU4Njg4MTM5Njg5MDBhNmY4N2RmMzAwMWQ0NDk5MmU2NWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcK8RwAgH2gAyMzg0MjY1NTA2OjdjMzViNTVjYTAxYTQzZmZiZDg3ODhjZGZmODdhM2ExYTZkZDZiOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84b7135868813968900a6f87df3001d44992e65b", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/84b7135868813968900a6f87df3001d44992e65b", "committedDate": "2020-03-05T13:05:32Z", "message": "[IOTDB-545] Update checkPathValidity in Session"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a51e48cd1f5c9b46086d9498369e3ddf05bdd39a", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/a51e48cd1f5c9b46086d9498369e3ddf05bdd39a", "committedDate": "2020-03-05T14:20:32Z", "message": "Separate matcher to nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a36b36c634c39a53138c08504907e5f0cf248e2", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/3a36b36c634c39a53138c08504907e5f0cf248e2", "committedDate": "2020-03-05T14:23:13Z", "message": "Fix code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c4d81e7bcef981d5fb12fc9fb2c68f72574ba39", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/2c4d81e7bcef981d5fb12fc9fb2c68f72574ba39", "committedDate": "2020-03-06T01:04:56Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDQ4NTY5", "url": "https://github.com/apache/iotdb/pull/886#pullrequestreview-370048569", "createdAt": "2020-03-06T02:33:07Z", "commit": {"oid": "2c4d81e7bcef981d5fb12fc9fb2c68f72574ba39"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjozMzowOFrOFyrZng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjozMzowOFrOFyrZng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY4NDE5MA==", "bodyText": "add UT for this", "url": "https://github.com/apache/iotdb/pull/886#discussion_r388684190", "createdAt": "2020-03-06T02:33:08Z", "author": {"login": "qiaojialin"}, "path": "session/src/main/java/org/apache/iotdb/session/Session.java", "diffHunk": "@@ -654,8 +648,7 @@ public void executeNonQueryStatement(String sql) throws TException, IoTDBRPCExce\n   private void checkPathValidity(String path) throws IoTDBSessionException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c4d81e7bcef981d5fb12fc9fb2c68f72574ba39"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3eb4bb0e7bed3eb98059a0646baa2e1f37939fa", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/f3eb4bb0e7bed3eb98059a0646baa2e1f37939fa", "committedDate": "2020-03-06T02:43:54Z", "message": "Add UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbf5fe0c69a86f376a4353f97c9224249f55f0a9", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/cbf5fe0c69a86f376a4353f97c9224249f55f0a9", "committedDate": "2020-03-06T02:44:24Z", "message": "Add header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDU4OTAx", "url": "https://github.com/apache/iotdb/pull/886#pullrequestreview-370058901", "createdAt": "2020-03-06T03:12:40Z", "commit": {"oid": "cbf5fe0c69a86f376a4353f97c9224249f55f0a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDYyMDI1", "url": "https://github.com/apache/iotdb/pull/886#pullrequestreview-370062025", "createdAt": "2020-03-06T03:25:50Z", "commit": {"oid": "cbf5fe0c69a86f376a4353f97c9224249f55f0a9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzoyNTo1MFrOFysH2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzoyNjozNlrOFysIjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY5NjAyNQ==", "bodyText": "Why not use Pattern here?", "url": "https://github.com/apache/iotdb/pull/886#discussion_r388696025", "createdAt": "2020-03-06T03:25:50Z", "author": {"login": "vesense"}, "path": "session/src/main/java/org/apache/iotdb/session/Config.java", "diffHunk": "@@ -28,7 +28,12 @@\n   public static final int DEFAULT_FETCH_SIZE = 10000;\n   public static final int DEFAULT_TIMEOUT_MS = 0;\n \n+  public static final String NODE_MATCHER = \"[\" + PATH_SEPARATOR + \"]\" + \"([a-zA-Z0-9_]+)\";\n+\n+  // for path like: root.sg1.d1.\"1.2.3\" or root.sg1.d1.'1.2.3', only occurs in the end of the path and only occurs once\n+  public static final String NODE_WITH_QUOTATION_MARK_MATCHER =\n+      \"[\" + PATH_SEPARATOR + \"][\\\"|\\']([a-zA-Z0-9_]+)(\" + NODE_MATCHER + \")+[\\\"|\\']\";\n   public static final String PATH_MATCHER =\n-      PATH_ROOT + \"([\" + PATH_SEPARATOR + \"](([a-zA-Z_][a-zA-Z0-9_-]*)|([+-]?[0-9]+)))+\";\n+      PATH_ROOT + \"(\" + NODE_MATCHER + \")+(\" + NODE_WITH_QUOTATION_MARK_MATCHER + \")?\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbf5fe0c69a86f376a4353f97c9224249f55f0a9"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY5NjIwNA==", "bodyText": "If a pattern is to be used multiple times, compiling it once and reusing it will be more efficient than invoking this method each time.", "url": "https://github.com/apache/iotdb/pull/886#discussion_r388696204", "createdAt": "2020-03-06T03:26:36Z", "author": {"login": "vesense"}, "path": "session/src/main/java/org/apache/iotdb/session/Session.java", "diffHunk": "@@ -654,8 +648,7 @@ public void executeNonQueryStatement(String sql) throws TException, IoTDBRPCExce\n   private void checkPathValidity(String path) throws IoTDBSessionException {\n     if (!Pattern.matches(PATH_MATCHER, path)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbf5fe0c69a86f376a4353f97c9224249f55f0a9"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60ba663d833960214f163868a2375af0bb0c76cc", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/60ba663d833960214f163868a2375af0bb0c76cc", "committedDate": "2020-03-06T06:19:38Z", "message": "[IOTDB-545] Update checkPathValidity in Session"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c35b55ca01a43ffbd8788cdff87a3a1a6dd6b99", "author": {"user": {"login": "samperson1997", "name": "Zesong Sun"}}, "url": "https://github.com/apache/iotdb/commit/7c35b55ca01a43ffbd8788cdff87a3a1a6dd6b99", "committedDate": "2020-03-06T08:59:01Z", "message": "Merge remote-tracking branch 'upstream/master' into jira_545"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3166, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}