{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2ODQxMTc4", "number": 1791, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMzozOTowOFrOEqjezw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODozMjozMVrOErEjxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMDU2OTc1OnYy", "diffSide": "RIGHT", "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMzozOTowOFrOHc02uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwOToyNjowMFrOHc9tJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk4ODE1Mg==", "bodyText": "Actually, we don't support short type of data yet...", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r499988152", "createdAt": "2020-10-06T03:39:08Z", "author": {"login": "HTHou"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -312,9 +317,23 @@ public float getFloat(String columnName) throws StatementExecutionException {\n     checkRecord();\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToFloat(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));\n+      lastReadWasNull = true;\n+      return 0;\n+    }\n+  }\n+\n+  public short getShort(String columnName) throws StatementExecutionException {\n+    checkRecord();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2c5302bf25fb114b6f9156666d0d0597234a414"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwNjY5OA==", "bodyText": "I think so, too. I felt weird that why it was implemented before. How about just throwing exception while it has been used?", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r500106698", "createdAt": "2020-10-06T08:44:05Z", "author": {"login": "jack870131"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -312,9 +317,23 @@ public float getFloat(String columnName) throws StatementExecutionException {\n     checkRecord();\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToFloat(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));\n+      lastReadWasNull = true;\n+      return 0;\n+    }\n+  }\n+\n+  public short getShort(String columnName) throws StatementExecutionException {\n+    checkRecord();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk4ODE1Mg=="}, "originalCommit": {"oid": "c2c5302bf25fb114b6f9156666d0d0597234a414"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEzMzE1OA==", "bodyText": "Yes, look good to me. \ud83d\udc4d", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r500133158", "createdAt": "2020-10-06T09:26:00Z", "author": {"login": "HTHou"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -312,9 +317,23 @@ public float getFloat(String columnName) throws StatementExecutionException {\n     checkRecord();\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToFloat(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));\n+      lastReadWasNull = true;\n+      return 0;\n+    }\n+  }\n+\n+  public short getShort(String columnName) throws StatementExecutionException {\n+    checkRecord();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk4ODE1Mg=="}, "originalCommit": {"oid": "c2c5302bf25fb114b6f9156666d0d0597234a414"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzNTk4OTE2OnYy", "diffSide": "LEFT", "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODozMjozMVrOHdobOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzowMzowMVrOHlqrHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzMzA4MA==", "bodyText": "Maybe throw an exception is better? which can help users find bugs in client", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r500833080", "createdAt": "2020-10-07T08:32:31Z", "author": {"login": "qiaojialin"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -343,9 +352,11 @@ public long getLong(String columnName) throws StatementExecutionException {\n     }\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToLong(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03e2dcee458b1345cccf53b3d2dd8b000f8b69cf"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwMTUxMA==", "bodyText": "@qiaojialin The reason why I remove the exception here is that it was not consistent with JDBC specification as we discussed in IOTDB-912.", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r502801510", "createdAt": "2020-10-10T15:24:02Z", "author": {"login": "jack870131"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -343,9 +352,11 @@ public long getLong(String columnName) throws StatementExecutionException {\n     }\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToLong(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzMzA4MA=="}, "originalCommit": {"oid": "03e2dcee458b1345cccf53b3d2dd8b000f8b69cf"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTI1ODUyNQ==", "bodyText": "ok thanks!", "url": "https://github.com/apache/iotdb/pull/1791#discussion_r509258525", "createdAt": "2020-10-21T13:03:01Z", "author": {"login": "qiaojialin"}, "path": "service-rpc/src/main/java/org/apache/iotdb/rpc/IoTDBRpcDataSet.java", "diffHunk": "@@ -343,9 +352,11 @@ public long getLong(String columnName) throws StatementExecutionException {\n     }\n     int index = columnOrdinalMap.get(columnName) - START_INDEX;\n     if (!isNull(index, rowsIndex - 1)) {\n+      lastReadWasNull = false;\n       return BytesUtils.bytesToLong(values[index]);\n     } else {\n-      throw new StatementExecutionException(String.format(VALUE_IS_NULL, columnName));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzMzA4MA=="}, "originalCommit": {"oid": "03e2dcee458b1345cccf53b3d2dd8b000f8b69cf"}, "originalPosition": 67}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 772, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}