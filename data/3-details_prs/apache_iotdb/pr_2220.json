{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTAzODM5", "number": 2220, "title": "Add compaction test", "bodyText": "", "createdAt": "2020-12-08T14:51:30Z", "url": "https://github.com/apache/iotdb/pull/2220", "merged": true, "mergeCommit": {"oid": "a712b5267de4a0bf742b1c1e24a217afa7524578"}, "closed": true, "closedAt": "2020-12-15T13:52:57Z", "author": {"login": "zhanglingzhe0820"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ1SrrgH2gAyNTM0NTAzODM5OjA5Mjg4Y2RmYTY4OTkyMWZhZGQ2Zjc5NDg4NDUxNWRjOTA5MzAyYWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmarxbAFqTU1MDY4NTcwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09288cdfa689921fadd6f794884515dc909302aa", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/09288cdfa689921fadd6f794884515dc909302aa", "committedDate": "2020-11-06T11:30:43Z", "message": "add enable unseq compaction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49fab34ba14c60d99f540297a3113295eee3a08f", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/49fab34ba14c60d99f540297a3113295eee3a08f", "committedDate": "2020-11-07T06:18:17Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2854f931acefe3bca3d9548ddcf5b37760473980", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/2854f931acefe3bca3d9548ddcf5b37760473980", "committedDate": "2020-11-07T10:43:36Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba681617dab53da7e51865d9aee14dd6ebbe335", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/9ba681617dab53da7e51865d9aee14dd6ebbe335", "committedDate": "2020-11-08T08:34:09Z", "message": "Merge branches 'master' and 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9da683521fabfb7ad05f84d319d9b504c71a4f2b", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/9da683521fabfb7ad05f84d319d9b504c71a4f2b", "committedDate": "2020-11-10T05:54:00Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f438705f15d0e2eea26ed27f5348414f2e58f231", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f438705f15d0e2eea26ed27f5348414f2e58f231", "committedDate": "2020-11-11T03:13:16Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5a17d52eea06efa2650921ecb1d104e00309415", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b5a17d52eea06efa2650921ecb1d104e00309415", "committedDate": "2020-11-12T02:03:02Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae79d884d1c520da33dba51a4f1ef84ee52a70a8", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/ae79d884d1c520da33dba51a4f1ef84ee52a70a8", "committedDate": "2020-11-12T10:33:05Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97a2b13f188a81b9f6228fd599e18a818fcf331a", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/97a2b13f188a81b9f6228fd599e18a818fcf331a", "committedDate": "2020-11-13T02:41:57Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "725524238dbe29d79e974784fea80f99442eaf8d", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/725524238dbe29d79e974784fea80f99442eaf8d", "committedDate": "2020-11-16T09:26:36Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7a4e32d6fc98f30bffaf368bd8354107f32005a", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/e7a4e32d6fc98f30bffaf368bd8354107f32005a", "committedDate": "2020-11-18T14:03:07Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181682b69b3ffd4b538cbbbbe83f41eeb9175e2f", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/181682b69b3ffd4b538cbbbbe83f41eeb9175e2f", "committedDate": "2020-11-29T02:03:48Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b1a09bfbf785980536d5184164f5c43799c5220", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/1b1a09bfbf785980536d5184164f5c43799c5220", "committedDate": "2020-11-30T09:35:38Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae6b81129a5590c175d696eab47742c3d4cc8019", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/ae6b81129a5590c175d696eab47742c3d4cc8019", "committedDate": "2020-12-01T02:28:55Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad2130246f172bd1f58a7c1b8f32054ea48f4d5b", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/ad2130246f172bd1f58a7c1b8f32054ea48f4d5b", "committedDate": "2020-12-02T06:30:18Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f906cdc53269c0701f41d4a55cbb8deda25de76", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/8f906cdc53269c0701f41d4a55cbb8deda25de76", "committedDate": "2020-12-08T04:52:39Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b740657c5bc92907271c079f4f8689ddc6ed8433", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b740657c5bc92907271c079f4f8689ddc6ed8433", "committedDate": "2020-12-08T14:51:03Z", "message": "add compaction test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ea81ff840122529072d5378a914d889fb07d12e", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/1ea81ff840122529072d5378a914d889fb07d12e", "committedDate": "2020-12-08T15:00:24Z", "message": "add license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7667b4b77f61039f1d5c8b20daf5df7d06f472da", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/7667b4b77f61039f1d5c8b20daf5df7d06f472da", "committedDate": "2020-12-09T03:31:33Z", "message": "fix test close and code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0085fe6af041f71cd06fa6b0fb370905aeeb92eb", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/0085fe6af041f71cd06fa6b0fb370905aeeb92eb", "committedDate": "2020-12-09T03:38:27Z", "message": "Merge branch 'master' of https://github.com/apache/iotdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73b621f2fb50e22d17720dc6d626b09f435578ed", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/73b621f2fb50e22d17720dc6d626b09f435578ed", "committedDate": "2020-12-09T03:39:13Z", "message": "Merge branch 'master' into add_compaction_test\n\n# Conflicts:\n#\tserver/src/main/java/org/apache/iotdb/db/engine/storagegroup/TsFileResource.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc811eec9c5591e23d0f4d8bfb8c3139f6ac84e9", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/dc811eec9c5591e23d0f4d8bfb8c3139f6ac84e9", "committedDate": "2020-12-09T03:49:38Z", "message": "update updatePlanIndexes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18a864d1260ba5991e040c1a4f4956afa975467c", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/18a864d1260ba5991e040c1a4f4956afa975467c", "committedDate": "2020-12-09T04:14:52Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d99e4160ccac776b39db8220bf6e47f4e124b64", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/8d99e4160ccac776b39db8220bf6e47f4e124b64", "committedDate": "2020-12-09T04:55:46Z", "message": "fix log delete bug by wait"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c461b596e74422928521536a9c76951c8468c46c", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/c461b596e74422928521536a9c76951c8468c46c", "committedDate": "2020-12-09T05:50:46Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca9b00b8e4941d3af1282fd00a2827290411c4af", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/ca9b00b8e4941d3af1282fd00a2827290411c4af", "committedDate": "2020-12-09T13:35:14Z", "message": "fix doc and recover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d99d36f92804e09a6222c284cd5d6f6b04d058", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/97d99d36f92804e09a6222c284cd5d6f6b04d058", "committedDate": "2020-12-10T04:33:54Z", "message": "fix windows ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b22d3e2f90a1857d4def7981464527245394de8c", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b22d3e2f90a1857d4def7981464527245394de8c", "committedDate": "2020-12-10T06:18:58Z", "message": "fix windows ci bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "795d32fcc6d7e25609524bf5b7dc801a75ecc953", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/795d32fcc6d7e25609524bf5b7dc801a75ecc953", "committedDate": "2020-12-10T11:21:56Z", "message": "fix windows ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a0677a2ecddce40c6e103048809ed8d2c20cf10", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/5a0677a2ecddce40c6e103048809ed8d2c20cf10", "committedDate": "2020-12-11T08:40:15Z", "message": "update device, offset log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "848f5963a9b04de741ce5ae61c40c311cd16c7b2", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/848f5963a9b04de741ce5ae61c40c311cd16c7b2", "committedDate": "2020-12-11T13:13:44Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "570ef6d26b4ccfeee124ada9360ab480979a4d50", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/570ef6d26b4ccfeee124ada9360ab480979a4d50", "committedDate": "2020-12-11T13:18:31Z", "message": "add truncate test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4e1876a1b902c53796d6dbdc499ef93eae83290", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/b4e1876a1b902c53796d6dbdc499ef93eae83290", "committedDate": "2020-12-12T03:44:49Z", "message": "add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af195408b5c160f65c64e02069ae3a9390a3b9b4", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/af195408b5c160f65c64e02069ae3a9390a3b9b4", "committedDate": "2020-12-12T03:52:04Z", "message": "fix windows ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f436a95d07a70965011dbdbf16c0bc80e89b6f32", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/f436a95d07a70965011dbdbf16c0bc80e89b6f32", "committedDate": "2020-12-12T04:23:44Z", "message": "fix recover restart bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fe2e732e351994593a26b6c9f2d7c91eecb5b25", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/0fe2e732e351994593a26b6c9f2d7c91eecb5b25", "committedDate": "2020-12-12T08:36:26Z", "message": "fix windows ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b0a16363e6a920b29eca4086fb96df17ae1d329", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/5b0a16363e6a920b29eca4086fb96df17ae1d329", "committedDate": "2020-12-15T04:23:38Z", "message": "fix mod bug and update about recover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44c8d85c5ac146b0582693d1e4f4986a088d4352", "author": {"user": {"login": "zhanglingzhe0820", "name": null}}, "url": "https://github.com/apache/iotdb/commit/44c8d85c5ac146b0582693d1e4f4986a088d4352", "committedDate": "2020-12-15T07:44:51Z", "message": "fix sonar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjg1NzA3", "url": "https://github.com/apache/iotdb/pull/2220#pullrequestreview-550685707", "createdAt": "2020-12-12T03:33:55Z", "commit": {"oid": "570ef6d26b4ccfeee124ada9360ab480979a4d50"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQwMzozMzo1NlrOIEZ7Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODoxMTozNFrOIFEWEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ5MDAxNA==", "bodyText": "The fullMerge is not used now, it's better to add comment or javadoc to describe what is fullmerge", "url": "https://github.com/apache/iotdb/pull/2220#discussion_r541490014", "createdAt": "2020-12-12T03:33:56Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/compaction/level/LevelCompactionTsFileManagement.java", "diffHunk": "@@ -330,37 +334,36 @@ public void recover() {\n           return;\n         }\n         if (fullMerge) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "570ef6d26b4ccfeee124ada9360ab480979a4d50"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE4NDk3OQ==", "bodyText": "why false?", "url": "https://github.com/apache/iotdb/pull/2220#discussion_r542184979", "createdAt": "2020-12-14T08:11:34Z", "author": {"login": "qiaojialin"}, "path": "server/src/main/java/org/apache/iotdb/db/engine/compaction/utils/CompactionLogger.java", "diffHunk": "@@ -42,15 +40,17 @@\n   public CompactionLogger(String storageGroupDir, String storageGroupName) throws IOException {\n     logStream = new BufferedWriter(\n         new FileWriter(SystemFileFactory.INSTANCE.getFile(storageGroupDir,\n-            storageGroupName + COMPACTION_LOG_NAME), true));\n+            storageGroupName + COMPACTION_LOG_NAME), false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fe2e732e351994593a26b6c9f2d7c91eecb5b25"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4076, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}