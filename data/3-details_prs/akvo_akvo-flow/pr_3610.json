{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MzMxMjE3", "number": 3610, "title": "[#3609] Fix the NPE for webforms validation when publishing surveys", "bodyText": "The solution\n\nFix the NPE that happens during form publishing\n\nScreenshots (if appropriate)\nReviewer Checklist\n\n Added an explanation about the work done\n Connected the PR and the issue on Zenhub\n Added a test plan to the issue\n Updated the copyright header (when relevant)\n Formatted the code\n Added a documentation (if relevant)\n Added some unit tests (if relevant)", "createdAt": "2020-06-24T16:57:01Z", "url": "https://github.com/akvo/akvo-flow/pull/3610", "merged": true, "mergeCommit": {"oid": "a485fa7638b9e5efc6ccec04d2652893cdfc4893"}, "closed": true, "closedAt": "2020-06-24T17:04:40Z", "author": {"login": "muloem"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcucxXwAH2gAyNDM5MzMxMjE3OjQyMTUxMWIwMTdjNTI2ODBkMjE3Yjc0OGIzNGEzZWE2NDE3MTdhNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcudJnggFqTQzNjg0MDg4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "421511b017c52680d217b748b34a3ea641717a6c", "author": {"user": {"login": "muloem", "name": "Emmanuel Mulo"}}, "url": "https://github.com/akvo/akvo-flow/commit/421511b017c52680d217b748b34a3ea641717a6c", "committedDate": "2020-06-24T16:37:52Z", "message": "[#3609] Fix the NPE for webforms validation when publishing surveys"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODM4MDMy", "url": "https://github.com/akvo/akvo-flow/pull/3610#pullrequestreview-436838032", "createdAt": "2020-06-24T17:00:35Z", "commit": {"oid": "421511b017c52680d217b748b34a3ea641717a6c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzowMDozNVrOGobGJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzowMDozNVrOGobGJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0MDE2Ng==", "bodyText": "should we also change the second use of form.getObjectId()  ?", "url": "https://github.com/akvo/akvo-flow/pull/3610#discussion_r445040166", "createdAt": "2020-06-24T17:00:35Z", "author": {"login": "tangrammer"}, "path": "GAE/src/org/waterforpeople/mapping/app/web/SurveyAssemblyServlet.java", "diffHunk": "@@ -198,7 +198,7 @@ private boolean assembleFormWithJackson(Long formId) {\n             log.debug(\"Finishing assembly of \" + formId);\n             form.setStatus(Survey.Status.PUBLISHED);\n             if (form.getWebForm()){\n-                boolean webForm = WebForm.validWebForm(surveyGroupDao.getByKey(form.getObjectId()), form, questionDao.listQuestionsBySurvey(form.getObjectId()));\n+                boolean webForm = WebForm.validWebForm(surveyGroupDao.getByKey(form.getSurveyGroupId()), form, questionDao.listQuestionsBySurvey(form.getObjectId()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421511b017c52680d217b748b34a3ea641717a6c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODQwODgx", "url": "https://github.com/akvo/akvo-flow/pull/3610#pullrequestreview-436840881", "createdAt": "2020-06-24T17:04:21Z", "commit": {"oid": "421511b017c52680d217b748b34a3ea641717a6c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4531, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}