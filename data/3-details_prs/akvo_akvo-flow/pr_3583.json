{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzE5OTIx", "number": 3583, "title": "[#3145] Webform redirection", "bodyText": "Relates #3145\nScreenshots (if appropriate)\n\n\nReviewer Checklist\n\n Added an explanation about the work done\n Connected the PR and the issue on Zenhub\n Added a test plan to the issue\n Updated the copyright header (when relevant)\n Formatted the code\n Added a documentation (if relevant)\n Added some unit tests (if relevant)", "createdAt": "2020-05-26T16:34:50Z", "url": "https://github.com/akvo/akvo-flow/pull/3583", "merged": true, "mergeCommit": {"oid": "e63d656280748634c1d1cccf8ca1edfb4f831294"}, "closed": true, "closedAt": "2020-05-27T13:06:43Z", "author": {"login": "tangrammer"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclVu7ugH2gAyNDIzMzE5OTIxOjU5OWVjYjJlMWQ4YjZlYzNhY2M0MWViM2IxMTIyMTUyNGQwNWUyYjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclY52DgH2gAyNDIzMzE5OTIxOjVmZDM0YzA4MmRjMjI2OTcwMjYzNTdjZTU0ZWM0MTk2M2UwZjQ5MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8", "committedDate": "2020-05-27T09:20:33Z", "message": "[#3145] Webform redirection\n\nPattern\nhttps://flow-instance.akvoflow.org/webforms/webFormId =>\nhttps://tech-consultancy.akvotest.org/akvo-flow-web/flow-instance/surveyId"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65b2174e6a5fd632e89412aebcebafd766b3e2eb", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/65b2174e6a5fd632e89412aebcebafd766b3e2eb", "committedDate": "2020-05-26T16:34:27Z", "message": "[#3145] WIP Webform redirection"}, "afterCommit": {"oid": "599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8", "committedDate": "2020-05-27T09:20:33Z", "message": "[#3145] Webform redirection\n\nPattern\nhttps://flow-instance.akvoflow.org/webforms/webFormId =>\nhttps://tech-consultancy.akvotest.org/akvo-flow-web/flow-instance/surveyId"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDEzMzIx", "url": "https://github.com/akvo/akvo-flow/pull/3583#pullrequestreview-419013321", "createdAt": "2020-05-27T09:24:24Z", "commit": {"oid": "599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOToyNDoyNFrOGbA8Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOToyNDoyNFrOGbA8Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk4MDEwMw==", "bodyText": "@muloem how can we read the flow env akvotest value in flow app? so we can use prod depending deployment environment", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r430980103", "createdAt": "2020-05-27T09:24:24Z", "author": {"login": "tangrammer"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());\n+        RestRequest restRequest = new WebFormRequest();\n+        restRequest.populateFromHttpRequest(req);\n+        return restRequest;\n+    }\n+\n+    @Override\n+    protected RestResponse handleRequest(RestRequest req) throws Exception {\n+        RestResponse res = new RestResponse();\n+        res.setCode(String.valueOf(HttpServletResponse.SC_OK));\n+        String surveyId = ((WebFormRequest)req).getSurveyId();\n+        String url = String.format(\"https://tech-consultancy.akvotest.org/akvo-flow-web/%s/%s\", SystemProperty.applicationId.get(), surveyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "599ecb2e1d8b6ec3acc41eb3b11221524d05e2b8"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/2ef5a43c4c6154763a78398ce1e729b34699bb1e", "committedDate": "2020-05-27T11:05:46Z", "message": "[#3145] Load webFormRedirectionUrl as config value\n\nhttps://github.com/akvo/akvo-flow-server-config/pull/600/files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MTQ5OTU2", "url": "https://github.com/akvo/akvo-flow/pull/3583#pullrequestreview-419149956", "createdAt": "2020-05-27T12:39:37Z", "commit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjozOTozN1rOGbHVkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjo0NTozOVrOGbHjzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4NDk0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String url = String.format(\"%s/%s/%s\", PropertyUtil.getProperty(EnvServlet.WEBFORM_REDIRECTION_URL), SystemProperty.applicationId.get(), surveyId);\n          \n          \n            \n                    String url = String.format(\"%s/%s/%s\", PropertyUtil.getProperty(EnvServlet.WEBFORM_REDIRECTION_URL), PropertyUtil.getProperty(\"appId\"), surveyId);", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r431084946", "createdAt": "2020-05-27T12:39:37Z", "author": {"login": "muloem"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.common.util.PropertyUtil;\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import org.waterforpeople.mapping.app.web.EnvServlet;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());\n+        RestRequest restRequest = new WebFormRequest();\n+        restRequest.populateFromHttpRequest(req);\n+        return restRequest;\n+    }\n+\n+    @Override\n+    protected RestResponse handleRequest(RestRequest req) throws Exception {\n+        RestResponse res = new RestResponse();\n+        res.setCode(String.valueOf(HttpServletResponse.SC_OK));\n+        String surveyId = ((WebFormRequest)req).getSurveyId();\n+        String url = String.format(\"%s/%s/%s\", PropertyUtil.getProperty(EnvServlet.WEBFORM_REDIRECTION_URL), SystemProperty.applicationId.get(), surveyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4NTEzNA==", "bodyText": "We try to keep all property access through same class when possible.", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r431085134", "createdAt": "2020-05-27T12:39:57Z", "author": {"login": "muloem"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.common.util.PropertyUtil;\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import org.waterforpeople.mapping.app.web.EnvServlet;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());\n+        RestRequest restRequest = new WebFormRequest();\n+        restRequest.populateFromHttpRequest(req);\n+        return restRequest;\n+    }\n+\n+    @Override\n+    protected RestResponse handleRequest(RestRequest req) throws Exception {\n+        RestResponse res = new RestResponse();\n+        res.setCode(String.valueOf(HttpServletResponse.SC_OK));\n+        String surveyId = ((WebFormRequest)req).getSurveyId();\n+        String url = String.format(\"%s/%s/%s\", PropertyUtil.getProperty(EnvServlet.WEBFORM_REDIRECTION_URL), SystemProperty.applicationId.get(), surveyId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4NDk0Ng=="}, "originalCommit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4Nzc1Ng==", "bodyText": "Is this for debugging?", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r431087756", "createdAt": "2020-05-27T12:44:19Z", "author": {"login": "muloem"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.common.util.PropertyUtil;\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import org.waterforpeople.mapping.app.web.EnvServlet;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4ODA5NQ==", "bodyText": "if so maybe better log.debug() instead?", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r431088095", "createdAt": "2020-05-27T12:44:52Z", "author": {"login": "muloem"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.common.util.PropertyUtil;\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import org.waterforpeople.mapping.app.web.EnvServlet;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4Nzc1Ng=="}, "originalCommit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4ODU5MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/akvo/akvo-flow/pull/3583#discussion_r431088590", "createdAt": "2020-05-27T12:45:39Z", "author": {"login": "muloem"}, "path": "GAE/src/org/akvo/flow/api/app/WebFormServlet.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright (C) 2020 Stichting Akvo (Akvo Foundation)\n+ *\n+ *  This file is part of Akvo FLOW.\n+ *\n+ *  Akvo FLOW is free software: you can redistribute it and modify it under the terms of\n+ *  the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,\n+ *  either version 3 of the License or any later version.\n+ *\n+ *  Akvo FLOW is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ *  See the GNU Affero General Public License included below for more details.\n+ *\n+ *  The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.\n+ */\n+\n+package org.akvo.flow.api.app;\n+\n+import com.gallatinsystems.common.util.PropertyUtil;\n+import com.gallatinsystems.framework.rest.AbstractRestApiServlet;\n+import com.gallatinsystems.framework.rest.RestRequest;\n+import com.gallatinsystems.framework.rest.RestResponse;\n+import com.google.appengine.api.utils.SystemProperty;\n+\n+import org.waterforpeople.mapping.app.web.EnvServlet;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.util.logging.Logger;\n+\n+\n+/**\n+ * Redirect to tech-consultancy url or show the error\n+ */\n+@SuppressWarnings(\"serial\")\n+public class WebFormServlet extends AbstractRestApiServlet {\n+    private static final Logger log = Logger.getLogger(WebFormServlet.class.getName());\n+\n+    public WebFormServlet() {\n+        setMode(JSON_MODE);\n+    }\n+\n+    @Override\n+    protected RestRequest convertRequest() throws Exception {\n+        HttpServletRequest req = getRequest();\n+        log.warning(req.getPathInfo());\n+        RestRequest restRequest = new WebFormRequest();\n+        restRequest.populateFromHttpRequest(req);\n+        return restRequest;\n+    }\n+\n+    @Override\n+    protected RestResponse handleRequest(RestRequest req) throws Exception {\n+        RestResponse res = new RestResponse();\n+        res.setCode(String.valueOf(HttpServletResponse.SC_OK));\n+        String surveyId = ((WebFormRequest)req).getSurveyId();\n+        String url = String.format(\"%s/%s/%s\", PropertyUtil.getProperty(EnvServlet.WEBFORM_REDIRECTION_URL), SystemProperty.applicationId.get(), surveyId);\n+        res.setMessage(url);\n+        return res;\n+    }\n+\n+   \n+    /**\n+     * writes response as a JSON string\n+     */\n+    @Override\n+    protected void writeOkResponse(RestResponse resp) throws Exception {\n+        int sc;\n+        try {\n+            sc = Integer.valueOf(resp.getCode());\n+        } catch (NumberFormatException ignored) {\n+            // Status code was not properly set in the RestResponse\n+            sc = HttpServletResponse.SC_INTERNAL_SERVER_ERROR;\n+        }\n+        getResponse().setStatus(sc);\n+        if (sc == HttpServletResponse.SC_OK) {\n+            HttpServletResponse response = getResponse();\n+            response.setContentType(\"text/html\");\n+            response.setStatus(response.SC_MOVED_TEMPORARILY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ef5a43c4c6154763a78398ce1e729b34699bb1e"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "575c2a6f759495c4b6f060c2d352fe50ab2c8f00", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/575c2a6f759495c4b6f060c2d352fe50ab2c8f00", "committedDate": "2020-05-27T12:53:36Z", "message": "Update GAE/src/org/akvo/flow/api/app/WebFormServlet.java\n\nCo-authored-by: Emmanuel Mulo <emmanuel@akvo.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3cac52e12377acd7d7e9526c32a0af81c5dff90", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/f3cac52e12377acd7d7e9526c32a0af81c5dff90", "committedDate": "2020-05-27T12:56:06Z", "message": "[#3145] Tidy up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fd34c082dc22697026357ce54ec41963e0f4920", "author": {"user": {"login": "tangrammer", "name": "Juan A. Ruz"}}, "url": "https://github.com/akvo/akvo-flow/commit/5fd34c082dc22697026357ce54ec41963e0f4920", "committedDate": "2020-05-27T13:02:11Z", "message": "[#3145] Use webapp-security /webforms/** = none"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4511, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}