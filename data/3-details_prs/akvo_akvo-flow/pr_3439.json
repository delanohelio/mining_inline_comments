{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5Mjg5ODky", "number": 3439, "title": "Issue/3274 filter report list by type", "bodyText": "Before the PR (what is the issue or what needed to be done)\nYou had to fetch all report items\nThe solution\nLet UI filter by type\nScreenshots (if appropriate)\nReviewer Checklist\n\n Added an explanation about the work done\n Connected the PR and the issue on Zenhub\n Added a test plan to the issue\n Updated the copyright header (when relevant)\n Formatted the code\n Added a documentation (if relevant)\n Added some unit tests (if relevant)", "createdAt": "2020-02-24T23:49:12Z", "url": "https://github.com/akvo/akvo-flow/pull/3439", "merged": true, "mergeCommit": {"oid": "a36598fa3b42f1048caca7cdb7a4669f9065722a"}, "closed": true, "closedAt": "2020-02-25T13:48:59Z", "author": {"login": "stellanl"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGKAHIAH2gAyMzc5Mjg5ODkyOjg4MGNhOTUwMmNiN2ZjYmJiM2Y2MjhkNTAyZDE3YjFmYmJkNDY3ZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHybeegFqTM2NDE1MjM5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "880ca9502cb7fcbbb3f628d502d17b1fbbd467fb", "author": {"user": {"login": "stellanl", "name": "Stellan Lagerstr\u00f6m"}}, "url": "https://github.com/akvo/akvo-flow/commit/880ca9502cb7fcbbb3f628d502d17b1fbbd467fb", "committedDate": "2020-02-20T12:08:48Z", "message": "[#3274]Add user filter, guard against NPEs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea79cf900e124f92c27df07450624300bad56222", "author": {"user": {"login": "stellanl", "name": "Stellan Lagerstr\u00f6m"}}, "url": "https://github.com/akvo/akvo-flow/commit/ea79cf900e124f92c27df07450624300bad56222", "committedDate": "2020-02-21T15:24:27Z", "message": "[#3274]Fix empty parameter check. Remove unused stuff."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "039b70c745886b3aba9c1b76c20113b8046387e5", "author": {"user": {"login": "stellanl", "name": "Stellan Lagerstr\u00f6m"}}, "url": "https://github.com/akvo/akvo-flow/commit/039b70c745886b3aba9c1b76c20113b8046387e5", "committedDate": "2020-02-21T15:26:31Z", "message": "[#3274]Update copyright year. Remove unused stuff."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MDExNzUy", "url": "https://github.com/akvo/akvo-flow/pull/3439#pullrequestreview-364011752", "createdAt": "2020-02-25T10:02:03Z", "commit": {"oid": "039b70c745886b3aba9c1b76c20113b8046387e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMDowMjowNFrOFt_zkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMDowMjowNFrOFt_zkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3NTYzMg==", "bodyText": "Why don't we just pass empty string and then check for empty in the method that uses it?", "url": "https://github.com/akvo/akvo-flow/pull/3439#discussion_r383775632", "createdAt": "2020-02-25T10:02:04Z", "author": {"login": "valllllll2000"}, "path": "GAE/src/org/akvo/flow/rest/ReportRestService.java", "diffHunk": "@@ -123,10 +123,17 @@ private boolean isAdminRole() {\n     // find all reports belonging to the current user\n     @RequestMapping(method = RequestMethod.GET, value = \"\")\n     @ResponseBody\n-    public Map<String, Object> listMyReports() {\n+    public Map<String, Object> listMyReports(\n+            @RequestParam(value = \"reportType\", defaultValue = \"\") String reportType\n+            ) {\n         final Map<String, Object> response = new HashMap<String, Object>();\n         List<ReportDto> results = new ArrayList<ReportDto>();\n-        List<Report> reports = reportDao.listAllByCurrentUser();\n+        List<Report> reports;\n+        if (reportType.equals(\"\")) { //Cannot have null as the defaultValue\n+            reportType = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "039b70c745886b3aba9c1b76c20113b8046387e5"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MDEyMDY1", "url": "https://github.com/akvo/akvo-flow/pull/3439#pullrequestreview-364012065", "createdAt": "2020-02-25T10:02:28Z", "commit": {"oid": "039b70c745886b3aba9c1b76c20113b8046387e5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTUyMzkw", "url": "https://github.com/akvo/akvo-flow/pull/3439#pullrequestreview-364152390", "createdAt": "2020-02-25T13:48:49Z", "commit": {"oid": "039b70c745886b3aba9c1b76c20113b8046387e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4595, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}