{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MTkxMDYw", "number": 3643, "title": "[#3629] - fix regression with load more functionality in datapoints", "bodyText": "Before the PR (what is the issue or what needed to be done)\nDue to the new load more feature, we had 2 arrays controlling datapoints which led to a bug from assigning and editing datapoints\nThe solution\nUse only one array with a load-and-replace method to load more\nScreenshots (if appropriate)\nReviewer Checklist\n\n Added an explanation about the work done\n Connected the PR and the issue on Zenhub\n Added a test plan to the issue\n Updated the copyright header (when relevant)\n Formatted the code\n Added a documentation (if relevant)\n Added some unit tests (if relevant)", "createdAt": "2020-09-15T10:15:18Z", "url": "https://github.com/akvo/akvo-flow/pull/3643", "merged": true, "mergeCommit": {"oid": "3f890d9360f234d6bfc0d2ea1aa42d0495f98222"}, "closed": true, "closedAt": "2020-09-16T12:50:21Z", "author": {"login": "marvinkome"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJE-rTAH2gAyNDg3MTkxMDYwOjBkOGExMGVhOTg1ZDYyZWNjM2ZiYzU4Mzg0ZTJiZWZhZGE0MjQxNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJbZ23AFqTQ4OTU2MzkzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d8a10ea985d62ecc3fbc58384e2befada424174", "author": {"user": null}, "url": "https://github.com/akvo/akvo-flow/commit/0d8a10ea985d62ecc3fbc58384e2befada424174", "committedDate": "2020-09-15T10:10:38Z", "message": "[#3629] - refactor load more functionality"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NDc2NTcy", "url": "https://github.com/akvo/akvo-flow/pull/3643#pullrequestreview-489476572", "createdAt": "2020-09-16T10:12:37Z", "commit": {"oid": "0d8a10ea985d62ecc3fbc58384e2befada424174"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoxMjozN1rOHSp92Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoyMTo1MlrOHSqTTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzk5Mw==", "bodyText": "showLoadMore is already a boolean right? Is the !! needed?", "url": "https://github.com/akvo/akvo-flow/pull/3643#discussion_r489323993", "createdAt": "2020-09-16T10:12:37Z", "author": {"login": "muloem"}, "path": "Dashboard/app/js/lib/components/devices/AssignmentsEditView/screens/AssignDatapoints/index.jsx", "diffHunk": "@@ -119,10 +124,10 @@ export default class AssignDatapoints extends React.Component {\n             {allDPAssigned ? (\n               <AllDatapoints deviceId={deviceData.id} />\n             ) : (\n-              <DatapointList datapointsData={datapointsData} />\n+              <DatapointList datapointsData={dataPointsWithDetails} />\n             )}\n \n-            {!allDPAssigned && hasMore && (\n+            {!!showLoadMore && (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d8a10ea985d62ecc3fbc58384e2befada424174"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyOTQ4NA==", "bodyText": "if not to be used then remove it", "url": "https://github.com/akvo/akvo-flow/pull/3643#discussion_r489329484", "createdAt": "2020-09-16T10:21:52Z", "author": {"login": "muloem"}, "path": "Dashboard/app/js/lib/views/devices/assignment-edit-views.jsx", "diffHunk": "@@ -594,16 +594,16 @@ FLOW.AssignmentEditView = FLOW.ReactComponentView.extend(\n         const datapointAssignment = this.map(item => ({\n           id: item.get('keyId'),\n           deviceId: item.get('deviceId'),\n-          datapointIds: item.get('dataPointIds'),\n-          datapoints: [],\n+          // datapointIds: item.get('dataPointIds'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d8a10ea985d62ecc3fbc58384e2befada424174"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d36d8fe2b6c7129bb22fba978955cec2cc22c204", "author": {"user": null}, "url": "https://github.com/akvo/akvo-flow/commit/d36d8fe2b6c7129bb22fba978955cec2cc22c204", "committedDate": "2020-09-16T10:31:43Z", "message": "[#3629] - remove unused variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTYzOTMx", "url": "https://github.com/akvo/akvo-flow/pull/3643#pullrequestreview-489563931", "createdAt": "2020-09-16T12:18:14Z", "commit": {"oid": "d36d8fe2b6c7129bb22fba978955cec2cc22c204"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4542, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}