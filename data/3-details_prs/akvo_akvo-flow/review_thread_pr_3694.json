{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NDY5NDYz", "number": 3694, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMTo0MToyOFrOE-nYEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMTo0MToyOFrOE-nYEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MDkyMzA2OnYy", "diffSide": "RIGHT", "path": "GAE/src/com/gallatinsystems/survey/dao/QuestionGroupDao.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMTo0MToyOFrOH73XKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjoxNjoyNVrOH74ivQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUzNTA4Mw==", "bodyText": "Wont it happen here that if we have a list of translation for both the group description and the group name that one will be overwritten for the same language?", "url": "https://github.com/akvo/akvo-flow/pull/3694#discussion_r532535083", "createdAt": "2020-11-30T11:41:28Z", "author": {"login": "muloem"}, "path": "GAE/src/com/gallatinsystems/survey/dao/QuestionGroupDao.java", "diffHunk": "@@ -79,6 +85,16 @@ public void deleteGroupsForSurvey(Long surveyId) throws IllegalDeletionException\n         if (groups != null) {\n             int i = 1;\n             for (QuestionGroup group : groups) {\n+                List<Translation> translations = translationDao.findTranslations(\n+                        group.getKey().getId(), Translation.ParentType.QUESTION_GROUP_DESC,\n+                        Translation.ParentType.QUESTION_GROUP_NAME);\n+                HashMap<String, Translation> translationMap = new HashMap<>();\n+                if (translations != null) {\n+                    for (Translation t: translations) {\n+                        translationMap.put(t.getLanguageCode(), t);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3651493b9a47f515c3cdfa9cc36101cf4ba0c5b2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU1NDQyOQ==", "bodyText": "you are right, after checking the Translations, it seem group description does not exist but I removed it from the query just in case", "url": "https://github.com/akvo/akvo-flow/pull/3694#discussion_r532554429", "createdAt": "2020-11-30T12:16:25Z", "author": {"login": "valllllll2000"}, "path": "GAE/src/com/gallatinsystems/survey/dao/QuestionGroupDao.java", "diffHunk": "@@ -79,6 +85,16 @@ public void deleteGroupsForSurvey(Long surveyId) throws IllegalDeletionException\n         if (groups != null) {\n             int i = 1;\n             for (QuestionGroup group : groups) {\n+                List<Translation> translations = translationDao.findTranslations(\n+                        group.getKey().getId(), Translation.ParentType.QUESTION_GROUP_DESC,\n+                        Translation.ParentType.QUESTION_GROUP_NAME);\n+                HashMap<String, Translation> translationMap = new HashMap<>();\n+                if (translations != null) {\n+                    for (Translation t: translations) {\n+                        translationMap.put(t.getLanguageCode(), t);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUzNTA4Mw=="}, "originalCommit": {"oid": "3651493b9a47f515c3cdfa9cc36101cf4ba0c5b2"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4613, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}