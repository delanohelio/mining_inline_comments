{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNjgzNzky", "number": 9019, "title": "MULE-18548: In memory object store used in cache should be able to be expired in secondary node", "bodyText": "", "createdAt": "2020-07-02T18:40:21Z", "url": "https://github.com/mulesoft/mule/pull/9019", "merged": true, "mergeCommit": {"oid": "7c1d11c394687dfd2029e16e544cab372448b5a1"}, "closed": true, "closedAt": "2020-07-03T17:39:17Z", "author": {"login": "mbuchwald"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxDTYDgH2gAyNDQzNjgzNzkyOmIwZmFlNDA4NWJiZTZlYmMzODBlMmIzY2UxY2RmOTA5YWNjNjVkYzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxWyWsgFqTQ0MjUxNTUzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b0fae4085bbe6ebc380e2b3ce1cdf909acc65dc0", "author": {"user": {"login": "mbuchwald", "name": "Mart\u00edn Buchwald"}}, "url": "https://github.com/mulesoft/mule/commit/b0fae4085bbe6ebc380e2b3ce1cdf909acc65dc0", "committedDate": "2020-07-02T18:39:15Z", "message": "MULE-18548: In memory object store used in cache should be able to be expired in secondary node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0c4fa4df59ca8bb9a2938475aa22d3db4d79754", "author": {"user": {"login": "mbuchwald", "name": "Mart\u00edn Buchwald"}}, "url": "https://github.com/mulesoft/mule/commit/b0c4fa4df59ca8bb9a2938475aa22d3db4d79754", "committedDate": "2020-07-02T19:00:10Z", "message": "unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDU2OTI3", "url": "https://github.com/mulesoft/mule/pull/9019#pullrequestreview-442456927", "createdAt": "2020-07-03T14:43:54Z", "commit": {"oid": "b0c4fa4df59ca8bb9a2938475aa22d3db4d79754"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNDo0Mzo1NFrOGsycyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNDo0Mzo1NFrOGsycyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYxNzA5OA==", "bodyText": "poller", "url": "https://github.com/mulesoft/mule/pull/9019#discussion_r449617098", "createdAt": "2020-07-03T14:43:54Z", "author": {"login": "elrodro83"}, "path": "core/src/test/java/org/mule/util/store/InMemoryStoreTestCase.java", "diffHunk": "@@ -47,6 +50,28 @@ public void testSimpleTimedExpiry() throws Exception\n         assertObjectsExpired(\"1\", \"2\", \"3\");\n     }\n \n+    @Test\n+    public void testSimpleTimedExpiryInSecondaryNode() throws Exception\n+    {\n+        int entryTTL = 3000;\n+        createTimedObjectStore(entryTTL);\n+        MuleContext context = mock(MuleContext.class);\n+        when(context.isPrimaryPollingInstance()).thenReturn(false);\n+        store.setMuleContext(context);\n+\n+        // store entries in quick succession\n+        storeObjects(\"1\", \"2\", \"3\");\n+\n+        // they should still be alive at this point\n+        assertObjectsInStore(\"1\", \"2\", \"3\");\n+\n+        // wait until the entry TTL has been exceeded\n+        Thread.sleep(entryTTL + 1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0c4fa4df59ca8bb9a2938475aa22d3db4d79754"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22c17336b35b85ed5fbffd5c308ad572e2a2f6b4", "author": {"user": {"login": "mbuchwald", "name": "Mart\u00edn Buchwald"}}, "url": "https://github.com/mulesoft/mule/commit/22c17336b35b85ed5fbffd5c308ad572e2a2f6b4", "committedDate": "2020-07-03T16:26:47Z", "message": "review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNTE1NTMz", "url": "https://github.com/mulesoft/mule/pull/9019#pullrequestreview-442515533", "createdAt": "2020-07-03T17:21:17Z", "commit": {"oid": "22c17336b35b85ed5fbffd5c308ad572e2a2f6b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 630, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}