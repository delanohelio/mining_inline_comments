{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NTg5NTM0", "number": 9585, "title": "MULE-18894: NotSerializableException when persisting ABP decorators.", "bodyText": "", "createdAt": "2020-10-16T05:09:56Z", "url": "https://github.com/mulesoft/mule/pull/9585", "merged": true, "mergeCommit": {"oid": "27b7be0ae031d1508077e7694483682a4583718a"}, "closed": true, "closedAt": "2020-10-16T22:57:24Z", "author": {"login": "fsgonz"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS_qqAgH2gAyNTA0NTg5NTM0OjFkNmU4Y2NjNGI2MTI0ODQ0MmMxNzcxMmUxYWI0MGEwZjJmYTM4NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTLx-IAFqTUxMDc1NTE0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865", "author": {"user": {"login": "fsgonz", "name": "Fabian Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/1d6e8ccc4b61248442c17712e1ab40a0f2fa3865", "committedDate": "2020-10-16T05:38:29Z", "message": "MULE-18894: NotSerializableException when persisting ABP decorators."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5810699368901ffd55b45044237d5075c331de8f", "author": {"user": {"login": "fsgonz", "name": "Fabian Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/5810699368901ffd55b45044237d5075c331de8f", "committedDate": "2020-10-16T04:38:05Z", "message": "MULE-18894: NotSerializableException when persisting ABP decorators."}, "afterCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865", "author": {"user": {"login": "fsgonz", "name": "Fabian Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/1d6e8ccc4b61248442c17712e1ab40a0f2fa3865", "committedDate": "2020-10-16T05:38:29Z", "message": "MULE-18894: NotSerializableException when persisting ABP decorators."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDgyODU2", "url": "https://github.com/mulesoft/mule/pull/9585#pullrequestreview-510482856", "createdAt": "2020-10-16T13:42:52Z", "commit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0Mjo1M1rOHi-cKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NDowMVrOHi-f4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzNjY0OQ==", "bodyText": "remove empty line", "url": "https://github.com/mulesoft/mule/pull/9585#discussion_r506436649", "createdAt": "2020-10-16T13:42:53Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsCollection.java", "diffHunk": "@@ -44,4 +58,15 @@ public Spliterator spliterator() {\n     populator.accept(size());\n     return super.toArray(object);\n   }\n+\n+  @Override\n+  public void writeExternal(ObjectOutput out) throws IOException {\n+    out.writeObject(getCollection());\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzNzA0OA==", "bodyText": "we shouldn't be expecting to encounter this actual class serialized.", "url": "https://github.com/mulesoft/mule/pull/9585#discussion_r506437048", "createdAt": "2020-10-16T13:43:20Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsCollection.java", "diffHunk": "@@ -44,4 +58,15 @@ public Spliterator spliterator() {\n     populator.accept(size());\n     return super.toArray(object);\n   }\n+\n+  @Override\n+  public void writeExternal(ObjectOutput out) throws IOException {\n+    out.writeObject(getCollection());\n+\n+  }\n+\n+  @Override\n+  public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {\n+    this.collection = (Collection) in.readObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzNzIyNw==", "bodyText": "we shouldn't be expecting to encounter this actual class serialized.", "url": "https://github.com/mulesoft/mule/pull/9585#discussion_r506437227", "createdAt": "2020-10-16T13:43:34Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsList.java", "diffHunk": "@@ -45,4 +61,14 @@ public Spliterator spliterator() {\n     return super.toArray(object);\n   }\n \n+  @Override\n+  public void writeExternal(ObjectOutput out) throws IOException {\n+    out.writeObject(getList());\n+  }\n+\n+  @Override\n+  public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {\n+    this.collection = (List) in.readObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzNzU1NQ==", "bodyText": "would this be needed if there were a kryo serializer for this class?", "url": "https://github.com/mulesoft/mule/pull/9585#discussion_r506437555", "createdAt": "2020-10-16T13:43:56Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsCollection.java", "diffHunk": "@@ -6,18 +6,32 @@\n  */\n package org.mule.runtime.core.internal.management.stats;\n \n+import java.io.Externalizable;\n+import java.io.IOException;\n+import java.io.ObjectInput;\n+import java.io.ObjectOutput;\n import java.util.Collection;\n+import java.util.HashSet;\n import java.util.Iterator;\n import java.util.Spliterator;\n import java.util.Spliterators;\n import java.util.function.LongConsumer;\n \n import org.apache.commons.collections.collection.AbstractCollectionDecorator;\n \n-class PayloadStatisticsCollection<T> extends AbstractCollectionDecorator {\n+class PayloadStatisticsCollection<T> extends AbstractCollectionDecorator implements Externalizable {\n \n   private final LongConsumer populator;\n \n+  public PayloadStatisticsCollection() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzNzYwMw==", "bodyText": "would this be needed if there were a kryo serializer for this class?", "url": "https://github.com/mulesoft/mule/pull/9585#discussion_r506437603", "createdAt": "2020-10-16T13:44:01Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsList.java", "diffHunk": "@@ -14,10 +19,21 @@\n \n import org.apache.commons.collections.list.AbstractListDecorator;\n \n-final class PayloadStatisticsList<T> extends AbstractListDecorator {\n+final class PayloadStatisticsList<T> extends AbstractListDecorator implements Externalizable {\n+\n+  private static final long serialVersionUID = -5991764233175594789L;\n \n   private final LongConsumer populator;\n \n+  public PayloadStatisticsList() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d6e8ccc4b61248442c17712e1ab40a0f2fa3865"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dacb01e913e75a2a547d1629c1e289be9aadcbc", "author": {"user": {"login": "fsgonz", "name": "Fabian Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/9dacb01e913e75a2a547d1629c1e289be9aadcbc", "committedDate": "2020-10-16T17:06:28Z", "message": "MULE-18894: Review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjgxMzA5", "url": "https://github.com/mulesoft/mule/pull/9585#pullrequestreview-510681309", "createdAt": "2020-10-16T17:45:04Z", "commit": {"oid": "9dacb01e913e75a2a547d1629c1e289be9aadcbc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9958fc7c7f1cefe3ce91b43f8705add9e38f459f", "author": {"user": {"login": "fsgonz", "name": "Fabian Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/9958fc7c7f1cefe3ce91b43f8705add9e38f459f", "committedDate": "2020-10-16T19:37:56Z", "message": "MULE-18894: Review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzU1MTQ0", "url": "https://github.com/mulesoft/mule/pull/9585#pullrequestreview-510755144", "createdAt": "2020-10-16T19:45:20Z", "commit": {"oid": "9958fc7c7f1cefe3ce91b43f8705add9e38f459f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1180, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}