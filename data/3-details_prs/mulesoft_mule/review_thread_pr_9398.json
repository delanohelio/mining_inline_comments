{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MzY3MDkw", "number": 9398, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNDoyMVrOEirkow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNToxM1rOEirlhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODAwOTMxOnYy", "diffSide": "RIGHT", "path": "core-tests/src/test/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsTestCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNDoyMVrOHQsxSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNDoyMVrOHQsxSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI3Mjc3OQ==", "bodyText": "remove empty lines", "url": "https://github.com/mulesoft/mule/pull/9398#discussion_r487272779", "createdAt": "2020-09-11T20:24:21Z", "author": {"login": "elrodro83"}, "path": "core-tests/src/test/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsTestCase.java", "diffHunk": "@@ -703,6 +710,53 @@ public void decorateOutputResultIterator() throws IOException {\n     assertThat(statistics.getInputObjectCount(), is(0L));\n   }\n \n+  @Test\n+  public void decorateInputCursorStreamReturnsCursorStreamStatsEnabled() {\n+    verifyDecoratedCursorStreamIsCursorStream(true, decorateInputOperation(CORR_ID,\n+                                                                           decoratorFactory\n+                                                                               .componentDecoratorFactory(component1)));\n+  }\n+\n+  @Test\n+  public void decorateInputCursorStreamReturnsCursorStreamStatsDisabled() {\n+    verifyDecoratedCursorStreamIsCursorStream(false,\n+                                              decorateInputOperation(CORR_ID,\n+                                                                     decoratorFactory.componentDecoratorFactory(component1)));\n+  }\n+\n+  @Test\n+  public void decorateOuputCursorStreamReturnsCursorStreamStatsEnabled() {\n+    verifyDecoratedCursorStreamIsCursorStream(true, decorateInputOperation(CORR_ID,\n+                                                                           decoratorFactory\n+                                                                               .componentDecoratorFactory(component1)));\n+  }\n+\n+  @Test\n+  public void decorateOutputCursorStreamReturnsCursorStreamStatsDisabled() {\n+    verifyDecoratedCursorStreamIsCursorStream(false,\n+                                              decorateOutputOperation(CORR_ID,\n+                                                                      decoratorFactory\n+                                                                          .componentDecoratorFactory(component1)));\n+  }\n+\n+  @Test\n+  public void decorateOutputCursorStreamReturnsCursorStreamStatsEnabled() {\n+    verifyDecoratedCursorStreamIsCursorStream(true,\n+                                              decorateOutputOperation(CORR_ID,\n+                                                                      decoratorFactory\n+                                                                          .componentDecoratorFactory(component1)));\n+  }\n+\n+  private void verifyDecoratedCursorStreamIsCursorStream(boolean statEnabled, UnaryOperator decorationOperator) {\n+    getStatistics().setEnabled(statEnabled);\n+    InputStream cursorStream = new ByteArrayCursorStream(mock(CursorStreamProvider.class), \"Stream\".getBytes(UTF_8));\n+    InputStream decorated = (InputStream) decorationOperator.apply(cursorStream);\n+\n+    assertThat(decorated, instanceOf(CursorStream.class));\n+  }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "473f4e854511d3f02ed331440faebe01bf8cceed"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODAxMTU4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/StatisticsUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNToxM1rOHQsyuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMDoyNToxM1rOHQsyuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI3MzE0NQ==", "bodyText": "use else if", "url": "https://github.com/mulesoft/mule/pull/9398#discussion_r487273145", "createdAt": "2020-09-11T20:25:13Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/management/stats/StatisticsUtils.java", "diffHunk": "@@ -32,6 +33,10 @@\n    * @return a visitable wrapper of source. Empty if not a visitable class.\n    */\n   public static Optional<Visitable> visitable(Object source) {\n+    if (source instanceof CursorStream) {\n+      return of(new VisitableCursorStream((CursorStream) source));\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "473f4e854511d3f02ed331440faebe01bf8cceed"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4701, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}