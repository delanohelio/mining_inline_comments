{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTYyMzAx", "number": 9024, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NToyNlrOELT_WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMzoxMzowMFrOEL3xnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3MzA1OnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NToyNlrOGs2WUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NToyNlrOGs2WUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MDk3Ng==", "bodyText": "use the rule instead of the runner", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449680976", "createdAt": "2020-07-03T18:45:26Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3MzQwOnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NTozNlrOGs2WfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NTozNlrOGs2WfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MTAyMA==", "bodyText": "static import", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449681020", "createdAt": "2020-07-03T18:45:36Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+@Feature(CONFIGURATION_COMPONENT_LOCATOR)\n+@Story(ComponentLifeCycle.COMPONENT_LIFE_CYCLE)\n+public class LazyComponentInitializerAdapterTestCase extends AbstractDslModelTestCase {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3NTY4OnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzoyNVrOGs2X0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzoyNVrOGs2X0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MTM2MQ==", "bodyText": "since this is just a move/refactor of tests, the issue should point to the original one, not the refactor one", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449681361", "createdAt": "2020-07-03T18:47:25Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+@Feature(CONFIGURATION_COMPONENT_LOCATOR)\n+@Story(ComponentLifeCycle.COMPONENT_LIFE_CYCLE)\n+public class LazyComponentInitializerAdapterTestCase extends AbstractDslModelTestCase {\n+\n+  private LazyMuleArtifactContext lazyMuleArtifactContext;\n+\n+  private static final String MY_FLOW = \"myFlow\";\n+\n+  private ElementDeclarer declarer;\n+\n+  @Mock\n+  private ExtensionManager extensionManager;\n+\n+  @Mock\n+  private OptionalObjectsController optionalObjectsController;\n+\n+  @Mock\n+  private LockFactory lockFactory;\n+\n+  @Mock(extraInterfaces = {Initialisable.class, Disposable.class, Startable.class, Stoppable.class})\n+  private Processor targetProcessor;\n+\n+  @SuppressWarnings(\"deprecation\")\n+  private MuleContextWithRegistry muleContext;\n+\n+  private Set<ExtensionModel> extensions;\n+\n+  private AtomicInteger initializations;\n+\n+  @Before\n+  public void setup() throws Exception {\n+    initializations = new AtomicInteger(0);\n+\n+    declarer = forExtension(EXTENSION_NAME);\n+    muleContext = mockContextWithServices();\n+    extensions = ImmutableSet.<ExtensionModel>builder()\n+        .add(getExtensionModel())\n+        .add(mockExtension)\n+        .build();\n+\n+    MessageProcessorChainBuilder messageProcessorChainBuilder = new DefaultMessageProcessorChainBuilder().chain(targetProcessor);\n+    DefaultListableBeanFactory beanFactory = new ObjectProviderAwareBeanFactory(null);\n+    MuleRegistry mockedRegistry = muleContext.getRegistry();\n+\n+    when(extensionManager.getExtensions()).thenReturn(extensions);\n+    when(muleContext.getExecutionClassLoader()).thenReturn(currentThread().getContextClassLoader());\n+    when(muleContext.getExtensionManager()).thenReturn(extensionManager);\n+    when(mockedRegistry.lookupObject(MY_FLOW)).thenReturn(messageProcessorChainBuilder);\n+    when(mockedRegistry.get(OBJECT_REGISTRY)).thenReturn(new DefaultRegistry(muleContext));\n+\n+    lazyMuleArtifactContext = createLazyMuleArtifactContextStub(beanFactory);\n+\n+    doAnswer(a -> {\n+      initializations.incrementAndGet();\n+      return null;\n+    }).when((Initialisable) targetProcessor).initialise();\n+  }\n+\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationRequest() {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(1));\n+\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 142}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3NTc4OnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzozMVrOGs2X3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzozMVrOGs2X3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MTM3NA==", "bodyText": "since this is just a move/refactor of tests, the issue should point to the original one, not the refactor one", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449681374", "createdAt": "2020-07-03T18:47:31Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+@Feature(CONFIGURATION_COMPONENT_LOCATOR)\n+@Story(ComponentLifeCycle.COMPONENT_LIFE_CYCLE)\n+public class LazyComponentInitializerAdapterTestCase extends AbstractDslModelTestCase {\n+\n+  private LazyMuleArtifactContext lazyMuleArtifactContext;\n+\n+  private static final String MY_FLOW = \"myFlow\";\n+\n+  private ElementDeclarer declarer;\n+\n+  @Mock\n+  private ExtensionManager extensionManager;\n+\n+  @Mock\n+  private OptionalObjectsController optionalObjectsController;\n+\n+  @Mock\n+  private LockFactory lockFactory;\n+\n+  @Mock(extraInterfaces = {Initialisable.class, Disposable.class, Startable.class, Stoppable.class})\n+  private Processor targetProcessor;\n+\n+  @SuppressWarnings(\"deprecation\")\n+  private MuleContextWithRegistry muleContext;\n+\n+  private Set<ExtensionModel> extensions;\n+\n+  private AtomicInteger initializations;\n+\n+  @Before\n+  public void setup() throws Exception {\n+    initializations = new AtomicInteger(0);\n+\n+    declarer = forExtension(EXTENSION_NAME);\n+    muleContext = mockContextWithServices();\n+    extensions = ImmutableSet.<ExtensionModel>builder()\n+        .add(getExtensionModel())\n+        .add(mockExtension)\n+        .build();\n+\n+    MessageProcessorChainBuilder messageProcessorChainBuilder = new DefaultMessageProcessorChainBuilder().chain(targetProcessor);\n+    DefaultListableBeanFactory beanFactory = new ObjectProviderAwareBeanFactory(null);\n+    MuleRegistry mockedRegistry = muleContext.getRegistry();\n+\n+    when(extensionManager.getExtensions()).thenReturn(extensions);\n+    when(muleContext.getExecutionClassLoader()).thenReturn(currentThread().getContextClassLoader());\n+    when(muleContext.getExtensionManager()).thenReturn(extensionManager);\n+    when(mockedRegistry.lookupObject(MY_FLOW)).thenReturn(messageProcessorChainBuilder);\n+    when(mockedRegistry.get(OBJECT_REGISTRY)).thenReturn(new DefaultRegistry(muleContext));\n+\n+    lazyMuleArtifactContext = createLazyMuleArtifactContextStub(beanFactory);\n+\n+    doAnswer(a -> {\n+      initializations.incrementAndGet();\n+      return null;\n+    }).when((Initialisable) targetProcessor).initialise();\n+  }\n+\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationRequest() {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(1));\n+\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldCreateBeansForSameLocationRequestIfDifferentPhaseApplied() throws InitialisationException {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location, false);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(2));\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 153}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3NTg4OnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzozNVrOGs2X8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0NzozNVrOGs2X8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MTM5Mg==", "bodyText": "since this is just a move/refactor of tests, the issue should point to the original one, not the refactor one", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449681392", "createdAt": "2020-07-03T18:47:35Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+@Feature(CONFIGURATION_COMPONENT_LOCATOR)\n+@Story(ComponentLifeCycle.COMPONENT_LIFE_CYCLE)\n+public class LazyComponentInitializerAdapterTestCase extends AbstractDslModelTestCase {\n+\n+  private LazyMuleArtifactContext lazyMuleArtifactContext;\n+\n+  private static final String MY_FLOW = \"myFlow\";\n+\n+  private ElementDeclarer declarer;\n+\n+  @Mock\n+  private ExtensionManager extensionManager;\n+\n+  @Mock\n+  private OptionalObjectsController optionalObjectsController;\n+\n+  @Mock\n+  private LockFactory lockFactory;\n+\n+  @Mock(extraInterfaces = {Initialisable.class, Disposable.class, Startable.class, Stoppable.class})\n+  private Processor targetProcessor;\n+\n+  @SuppressWarnings(\"deprecation\")\n+  private MuleContextWithRegistry muleContext;\n+\n+  private Set<ExtensionModel> extensions;\n+\n+  private AtomicInteger initializations;\n+\n+  @Before\n+  public void setup() throws Exception {\n+    initializations = new AtomicInteger(0);\n+\n+    declarer = forExtension(EXTENSION_NAME);\n+    muleContext = mockContextWithServices();\n+    extensions = ImmutableSet.<ExtensionModel>builder()\n+        .add(getExtensionModel())\n+        .add(mockExtension)\n+        .build();\n+\n+    MessageProcessorChainBuilder messageProcessorChainBuilder = new DefaultMessageProcessorChainBuilder().chain(targetProcessor);\n+    DefaultListableBeanFactory beanFactory = new ObjectProviderAwareBeanFactory(null);\n+    MuleRegistry mockedRegistry = muleContext.getRegistry();\n+\n+    when(extensionManager.getExtensions()).thenReturn(extensions);\n+    when(muleContext.getExecutionClassLoader()).thenReturn(currentThread().getContextClassLoader());\n+    when(muleContext.getExtensionManager()).thenReturn(extensionManager);\n+    when(mockedRegistry.lookupObject(MY_FLOW)).thenReturn(messageProcessorChainBuilder);\n+    when(mockedRegistry.get(OBJECT_REGISTRY)).thenReturn(new DefaultRegistry(muleContext));\n+\n+    lazyMuleArtifactContext = createLazyMuleArtifactContextStub(beanFactory);\n+\n+    doAnswer(a -> {\n+      initializations.incrementAndGet();\n+      return null;\n+    }).when((Initialisable) targetProcessor).initialise();\n+  }\n+\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationRequest() {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(1));\n+\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldCreateBeansForSameLocationRequestIfDifferentPhaseApplied() throws InitialisationException {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location, false);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(2));\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationFilterRequest() {\n+    ComponentLocationFilter filter = loc -> loc.getLocation().equals(MY_FLOW);\n+\n+    lazyMuleArtifactContext.initializeComponents(filter);\n+    lazyMuleArtifactContext.initializeComponents(filter);\n+\n+    assertThat(initializations.get(), is(1));\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 164}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjk3NjgzOnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0ODozNVrOGs2Yhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODo0ODozNVrOGs2Yhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4MTU0Mg==", "bodyText": "if the param is a mock why do you need this no-op methods?", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r449681542", "createdAt": "2020-07-03T18:48:35Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.when;\n+import static org.mule.runtime.api.component.location.Location.builderFromStringRepresentation;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.forExtension;\n+import static org.mule.runtime.app.declaration.api.fluent.ElementDeclarer.newArtifact;\n+import static org.mule.runtime.core.api.config.MuleProperties.OBJECT_REGISTRY;\n+import static org.mule.runtime.core.api.config.bootstrap.ArtifactType.APP;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.MULE_NAME;\n+import static org.mule.runtime.core.api.extension.MuleExtensionModelProvider.getExtensionModel;\n+import static org.mule.runtime.internal.dsl.DslConstants.FLOW_ELEMENT_IDENTIFIER;\n+import static org.mule.tck.util.MuleContextUtils.mockContextWithServices;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.CONFIGURATION_COMPONENT_LOCATOR;\n+import static org.mule.test.allure.AllureConstants.ConfigurationComponentLocatorFeature.ComponentLifeCycle;\n+\n+import java.util.HashMap;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import org.mule.runtime.api.component.location.Location;\n+import org.mule.runtime.api.lifecycle.Disposable;\n+import org.mule.runtime.api.lifecycle.Initialisable;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.api.lifecycle.Startable;\n+import org.mule.runtime.api.lifecycle.Stoppable;\n+import org.mule.runtime.api.lock.LockFactory;\n+import org.mule.runtime.api.meta.model.ExtensionModel;\n+import org.mule.runtime.app.declaration.api.ArtifactDeclaration;\n+import org.mule.runtime.app.declaration.api.fluent.ElementDeclarer;\n+import org.mule.runtime.config.api.LazyComponentInitializer.ComponentLocationFilter;\n+import org.mule.runtime.config.dsl.model.AbstractDslModelTestCase;\n+import org.mule.runtime.core.api.extension.ExtensionManager;\n+import org.mule.runtime.core.api.processor.Processor;\n+import org.mule.runtime.core.internal.context.MuleContextWithRegistry;\n+import org.mule.runtime.core.internal.registry.DefaultRegistry;\n+import org.mule.runtime.core.internal.registry.MuleRegistry;\n+import org.mule.runtime.core.privileged.processor.chain.DefaultMessageProcessorChainBuilder;\n+import org.mule.runtime.core.privileged.processor.chain.MessageProcessorChainBuilder;\n+import org.mule.runtime.dsl.api.ConfigResource;\n+\n+import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+\n+import com.google.common.collect.ImmutableSet;\n+\n+import io.qameta.allure.Feature;\n+import io.qameta.allure.Issue;\n+import io.qameta.allure.Story;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+@Feature(CONFIGURATION_COMPONENT_LOCATOR)\n+@Story(ComponentLifeCycle.COMPONENT_LIFE_CYCLE)\n+public class LazyComponentInitializerAdapterTestCase extends AbstractDslModelTestCase {\n+\n+  private LazyMuleArtifactContext lazyMuleArtifactContext;\n+\n+  private static final String MY_FLOW = \"myFlow\";\n+\n+  private ElementDeclarer declarer;\n+\n+  @Mock\n+  private ExtensionManager extensionManager;\n+\n+  @Mock\n+  private OptionalObjectsController optionalObjectsController;\n+\n+  @Mock\n+  private LockFactory lockFactory;\n+\n+  @Mock(extraInterfaces = {Initialisable.class, Disposable.class, Startable.class, Stoppable.class})\n+  private Processor targetProcessor;\n+\n+  @SuppressWarnings(\"deprecation\")\n+  private MuleContextWithRegistry muleContext;\n+\n+  private Set<ExtensionModel> extensions;\n+\n+  private AtomicInteger initializations;\n+\n+  @Before\n+  public void setup() throws Exception {\n+    initializations = new AtomicInteger(0);\n+\n+    declarer = forExtension(EXTENSION_NAME);\n+    muleContext = mockContextWithServices();\n+    extensions = ImmutableSet.<ExtensionModel>builder()\n+        .add(getExtensionModel())\n+        .add(mockExtension)\n+        .build();\n+\n+    MessageProcessorChainBuilder messageProcessorChainBuilder = new DefaultMessageProcessorChainBuilder().chain(targetProcessor);\n+    DefaultListableBeanFactory beanFactory = new ObjectProviderAwareBeanFactory(null);\n+    MuleRegistry mockedRegistry = muleContext.getRegistry();\n+\n+    when(extensionManager.getExtensions()).thenReturn(extensions);\n+    when(muleContext.getExecutionClassLoader()).thenReturn(currentThread().getContextClassLoader());\n+    when(muleContext.getExtensionManager()).thenReturn(extensionManager);\n+    when(mockedRegistry.lookupObject(MY_FLOW)).thenReturn(messageProcessorChainBuilder);\n+    when(mockedRegistry.get(OBJECT_REGISTRY)).thenReturn(new DefaultRegistry(muleContext));\n+\n+    lazyMuleArtifactContext = createLazyMuleArtifactContextStub(beanFactory);\n+\n+    doAnswer(a -> {\n+      initializations.incrementAndGet();\n+      return null;\n+    }).when((Initialisable) targetProcessor).initialise();\n+  }\n+\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationRequest() {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(1));\n+\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldCreateBeansForSameLocationRequestIfDifferentPhaseApplied() throws InitialisationException {\n+    Location location = builderFromStringRepresentation(MY_FLOW).build();\n+\n+    lazyMuleArtifactContext.initializeComponent(location, false);\n+    lazyMuleArtifactContext.initializeComponent(location);\n+\n+    assertThat(initializations.get(), is(2));\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldNotCreateBeansForSameLocationFilterRequest() {\n+    ComponentLocationFilter filter = loc -> loc.getLocation().equals(MY_FLOW);\n+\n+    lazyMuleArtifactContext.initializeComponents(filter);\n+    lazyMuleArtifactContext.initializeComponents(filter);\n+\n+    assertThat(initializations.get(), is(1));\n+  }\n+\n+  @Test\n+  @Issue(\"MULE-18316\")\n+  public void shouldCreateBeansForSameLocationFilterRequestIfDifferentPhaseApplied() {\n+    ComponentLocationFilter filter = loc -> loc.getLocation().equals(MY_FLOW);\n+\n+    lazyMuleArtifactContext.initializeComponents(filter, false);\n+    lazyMuleArtifactContext.initializeComponents(filter);\n+\n+    assertThat(initializations.get(), is(2));\n+  }\n+\n+  @Override\n+  protected void initializeExtensionMock(ExtensionModel extension) {\n+    when(extension.getName()).thenReturn(EXTENSION_NAME);\n+  }\n+\n+  private ArtifactDeclaration getSimpleApp() {\n+    return newArtifact()\n+        .withGlobalElement(forExtension(MULE_NAME)\n+            .newConstruct(FLOW_ELEMENT_IDENTIFIER)\n+            .withRefName(MY_FLOW)\n+            .getDeclaration())\n+        .getDeclaration();\n+  }\n+\n+  private LazyMuleArtifactContext createLazyMuleArtifactContextStub(DefaultListableBeanFactory beanFactory) {\n+    LazyMuleArtifactContext muleArtifactContext =\n+        new LazyMuleArtifactContext(muleContext, new ConfigResource[0], getSimpleApp(),\n+                                    optionalObjectsController, new HashMap<>(), APP,\n+                                    emptyList(), empty(), empty(), true, lockFactory) {\n+\n+          @Override\n+          protected DefaultListableBeanFactory createBeanFactory() {\n+            return beanFactory;\n+          }\n+\n+          @Override\n+          protected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) {\n+            // Bean factory is mocked, so no bean registering here", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36e5420fae25b50a42708a7ac45a0354f1421ff"}, "originalPosition": 201}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwODgzMjU1OnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMzoxMToxOVrOGtp3XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMDo1OToyMFrOGtrpsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNTAyMA==", "bodyText": "no * imports", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r450525020", "createdAt": "2020-07-06T23:11:19Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,212 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.ArgumentMatchers.anyBoolean;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.doNothing;\n+import static org.mockito.Mockito.doReturn;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+import static org.mockito.junit.MockitoJUnit.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c87174206741c27ad46fdc3bcbead89473178d1"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1NDI5MA==", "bodyText": "done", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r450554290", "createdAt": "2020-07-07T00:59:20Z", "author": {"login": "szaffarano"}, "path": "modules/spring-config/src/test/java/org/mule/runtime/config/internal/LazyComponentInitializerAdapterTestCase.java", "diffHunk": "@@ -0,0 +1,212 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.config.internal;\n+\n+import static java.lang.Thread.currentThread;\n+import static java.util.Collections.emptyList;\n+import static java.util.Optional.empty;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.core.Is.is;\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.ArgumentMatchers.anyBoolean;\n+import static org.mockito.Mockito.doAnswer;\n+import static org.mockito.Mockito.doNothing;\n+import static org.mockito.Mockito.doReturn;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+import static org.mockito.junit.MockitoJUnit.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNTAyMA=="}, "originalCommit": {"oid": "8c87174206741c27ad46fdc3bcbead89473178d1"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwODgzNjEzOnYy", "diffSide": "RIGHT", "path": "modules/spring-config/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMzoxMzowMFrOGtp5WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMDo1OToxMVrOGtrpjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNTUyOQ==", "bodyText": "what is this?", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r450525529", "createdAt": "2020-07-06T23:13:00Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker", "diffHunk": "@@ -0,0 +1 @@\n+mock-maker-inline", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c87174206741c27ad46fdc3bcbead89473178d1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1NDI1NQ==", "bodyText": "This file enables a feature to allow mocking final methods (more info here).  We need it to mock beanFactory.getSingletonMutex()", "url": "https://github.com/mulesoft/mule/pull/9024#discussion_r450554255", "createdAt": "2020-07-07T00:59:11Z", "author": {"login": "szaffarano"}, "path": "modules/spring-config/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker", "diffHunk": "@@ -0,0 +1 @@\n+mock-maker-inline", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNTUyOQ=="}, "originalCommit": {"oid": "8c87174206741c27ad46fdc3bcbead89473178d1"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4882, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}