{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NzEwODQx", "number": 8806, "title": "MULE-18310: Reduce time taken by tests - part 1", "bodyText": "", "createdAt": "2020-04-16T20:41:39Z", "url": "https://github.com/mulesoft/mule/pull/8806", "merged": true, "mergeCommit": {"oid": "4f941857f7f3e924ec8a766e0d601afacf240b2e"}, "closed": true, "closedAt": "2020-04-20T18:42:47Z", "author": {"login": "elrodro83"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYS2ZHAH2gAyNDA0NzEwODQxOjA5MWNjZjhkYzQ1YjI0OWJjMTQ5MGJiMTczYjk0MGY1ZTBiNDZkNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZidCugFqTM5NjY1OTE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "091ccf8dc45b249bc1490bb173b940f5e0b46d55", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/091ccf8dc45b249bc1490bb173b940f5e0b46d55", "committedDate": "2020-04-16T20:37:58Z", "message": "MULE-18310: Reduce time taken by tests - part 1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDAzNTM0", "url": "https://github.com/mulesoft/mule/pull/8806#pullrequestreview-395003534", "createdAt": "2020-04-16T21:13:23Z", "commit": {"oid": "091ccf8dc45b249bc1490bb173b940f5e0b46d55"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMToxMzoyM1rOGG3XqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMToxODozMlrOGG3hUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg1MTgxNg==", "bodyText": "this breaks the feature of changing log levels at runtime", "url": "https://github.com/mulesoft/mule/pull/8806#discussion_r409851816", "createdAt": "2020-04-16T21:13:23Z", "author": {"login": "marianogonzalez"}, "path": "modules/artifact/src/main/java/org/mule/runtime/module/artifact/api/classloader/FilteringArtifactClassLoader.java", "diffHunk": "@@ -73,6 +75,12 @@ public FilteringArtifactClassLoader(ClassLoader parent, ArtifactClassLoader arti\n     this.artifactClassLoader = artifactClassLoader;\n     this.filter = filter;\n     this.exportedServices = exportedServices;\n+\n+    verboseLogging = LOGGER.isDebugEnabled() || isVerboseLoggingEnabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "091ccf8dc45b249bc1490bb173b940f5e0b46d55"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg1Mjc4Mw==", "bodyText": "I find it surprising that this moves the needle, specially since this only happens ones per MuleContext, but I choose to believe", "url": "https://github.com/mulesoft/mule/pull/8806#discussion_r409852783", "createdAt": "2020-04-16T21:15:18Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/execution/MethodArgumentResolverDelegate.java", "diffHunk": "@@ -192,8 +192,9 @@ private void initArgumentResolvers() {\n         argumentResolver = ERROR_ARGUMENT_RESOLVER;\n       } else if (SourceCallbackContext.class.equals(parameterType)) {\n         argumentResolver = SOURCE_CALLBACK_CONTEXT_ARGUMENT_RESOLVER;\n-      } else if (isParameterContainer(annotations.keySet(), typeLoader.load(parameterType)) &&\n-          !((ParameterGroup) annotations.get(ParameterGroup.class)).showInDsl()) {\n+      } else if (annotations.keySet().contains(ParameterGroup.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "091ccf8dc45b249bc1490bb173b940f5e0b46d55"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg1NDI4OA==", "bodyText": "aren't you breaking the assertions around tasks being completed and properly disposed and other shuutdown validations with this? My feat is that we reduce execution time at the expense of no longer catching potential leaks and other herbs", "url": "https://github.com/mulesoft/mule/pull/8806#discussion_r409854288", "createdAt": "2020-04-16T21:18:32Z", "author": {"login": "marianogonzalez"}, "path": "tests/unit/src/main/java/org/mule/tck/SimpleUnitTestSupportLifecycleSchedulerDecorator.java", "diffHunk": "@@ -87,16 +88,12 @@ public void execute(Runnable command) {\n \n   @Override\n   public ScheduledFuture<?> scheduleWithCronExpression(Runnable command, String cronExpression) {\n-    ScheduledFuture<?> recurrentTask = decorated.scheduleWithCronExpression(wrap(command), cronExpression);\n-    recurrentTasks.add(recurrentTask);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "091ccf8dc45b249bc1490bb173b940f5e0b46d55"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b92a18b33ba3c1c1041db949025327093aef8732", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/b92a18b33ba3c1c1041db949025327093aef8732", "committedDate": "2020-04-17T12:55:04Z", "message": "review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDU0OTcw", "url": "https://github.com/mulesoft/mule/pull/8806#pullrequestreview-395454970", "createdAt": "2020-04-17T13:30:54Z", "commit": {"oid": "b92a18b33ba3c1c1041db949025327093aef8732"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzozMDo1NFrOGHODdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzozMTo0N1rOGHOFlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIyMzQ3Ng==", "bodyText": "invert this for better perf", "url": "https://github.com/mulesoft/mule/pull/8806#discussion_r410223476", "createdAt": "2020-04-17T13:30:54Z", "author": {"login": "marianogonzalez"}, "path": "modules/artifact/src/main/java/org/mule/runtime/module/artifact/api/classloader/FilteringArtifactClassLoader.java", "diffHunk": "@@ -76,11 +76,11 @@ public FilteringArtifactClassLoader(ClassLoader parent, ArtifactClassLoader arti\n     this.filter = filter;\n     this.exportedServices = exportedServices;\n \n-    verboseLogging = LOGGER.isDebugEnabled() || isVerboseLoggingEnabled();\n+    verboseLogging = valueOf(getProperty(MULE_LOG_VERBOSE_CLASSLOADING));\n   }\n \n-  private boolean isVerboseLoggingEnabled() {\n-    return LOGGER.isInfoEnabled() && valueOf(getProperty(MULE_LOG_VERBOSE_CLASSLOADING));\n+  private boolean isVerboseLogging() {\n+    return LOGGER.isDebugEnabled() || verboseLogging;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b92a18b33ba3c1c1041db949025327093aef8732"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIyNDAyMw==", "bodyText": "this is not only repeated code, but in the original version INFO level was being used whereas now you degraded it to DEBUG", "url": "https://github.com/mulesoft/mule/pull/8806#discussion_r410224023", "createdAt": "2020-04-17T13:31:47Z", "author": {"login": "marianogonzalez"}, "path": "modules/artifact/src/main/java/org/mule/runtime/module/artifact/api/classloader/FineGrainedControlClassLoader.java", "diffHunk": "@@ -56,11 +56,11 @@ public FineGrainedControlClassLoader(URL[] urls, ClassLoader parent, ClassLoader\n     super(urls, parent, new NonCachingURLStreamHandlerFactory());\n     checkArgument(lookupPolicy != null, \"Lookup policy cannot be null\");\n     this.lookupPolicy = lookupPolicy;\n-    verboseLogging = LOGGER.isDebugEnabled() || isVerboseLoggingEnabled();\n+    verboseLogging = valueOf(getProperty(MULE_LOG_VERBOSE_CLASSLOADING));\n   }\n \n-  private boolean isVerboseLoggingEnabled() {\n-    return LOGGER.isInfoEnabled() && valueOf(getProperty(MULE_LOG_VERBOSE_CLASSLOADING));\n+  private boolean isVerboseLogging() {\n+    return LOGGER.isDebugEnabled() || verboseLogging;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b92a18b33ba3c1c1041db949025327093aef8732"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f6e42f38cb7bc637a17e4dc838ba27dc491a211", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/8f6e42f38cb7bc637a17e4dc838ba27dc491a211", "committedDate": "2020-04-17T13:39:40Z", "message": "review 2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDg0ODUy", "url": "https://github.com/mulesoft/mule/pull/8806#pullrequestreview-395484852", "createdAt": "2020-04-17T14:06:31Z", "commit": {"oid": "8f6e42f38cb7bc637a17e4dc838ba27dc491a211"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0e92c15736aa365738d5e8def81b65f6389dbe", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/1c0e92c15736aa365738d5e8def81b65f6389dbe", "committedDate": "2020-04-20T17:16:12Z", "message": "revert scheduler thing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NjU3MTU4", "url": "https://github.com/mulesoft/mule/pull/8806#pullrequestreview-396657158", "createdAt": "2020-04-20T17:20:03Z", "commit": {"oid": "1c0e92c15736aa365738d5e8def81b65f6389dbe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NjU5MTQ5", "url": "https://github.com/mulesoft/mule/pull/8806#pullrequestreview-396659149", "createdAt": "2020-04-20T17:22:41Z", "commit": {"oid": "1c0e92c15736aa365738d5e8def81b65f6389dbe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 807, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}