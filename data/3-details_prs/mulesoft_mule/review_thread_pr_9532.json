{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMTg3NDUw", "number": 9532, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OToxM1rOEtImaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OToxM1rOEtImaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NzYyMjgxOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/source/HeisenbergMessageSourceTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OToxM1rOHgwaxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OTozMlrOHgwbhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTc2NQ==", "bodyText": "return flow.getLifecycleState().isStopped();", "url": "https://github.com/mulesoft/mule/pull/9532#discussion_r504109765", "createdAt": "2020-10-13T16:49:13Z", "author": {"login": "eze210"}, "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/source/HeisenbergMessageSourceTestCase.java", "diffHunk": "@@ -331,6 +332,20 @@ protected void stopFlow(String flowName) throws Exception {\n     flow.stop();\n   }\n \n+  protected void requestFlowToStopAndWait(String flowName) throws Exception {\n+    stopFlow(flowName);\n+    checkFlowIsStopped(flowName);\n+  }\n+\n+  protected void checkFlowIsStopped(String flowName) throws Exception {\n+    flow = (Flow) getFlowConstruct(flowName);\n+    check(FLOW_STOP_TIMEOUT, POLL_DELAY_MILLIS,\n+          () -> {\n+            assertThat(\"The flow did not stop in a reasonable amount of time\", flow.getLifecycleState().isStopped(), is(true));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTk1OA==", "bodyText": "And move the error message to the probe description", "url": "https://github.com/mulesoft/mule/pull/9532#discussion_r504109958", "createdAt": "2020-10-13T16:49:32Z", "author": {"login": "eze210"}, "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/source/HeisenbergMessageSourceTestCase.java", "diffHunk": "@@ -331,6 +332,20 @@ protected void stopFlow(String flowName) throws Exception {\n     flow.stop();\n   }\n \n+  protected void requestFlowToStopAndWait(String flowName) throws Exception {\n+    stopFlow(flowName);\n+    checkFlowIsStopped(flowName);\n+  }\n+\n+  protected void checkFlowIsStopped(String flowName) throws Exception {\n+    flow = (Flow) getFlowConstruct(flowName);\n+    check(FLOW_STOP_TIMEOUT, POLL_DELAY_MILLIS,\n+          () -> {\n+            assertThat(\"The flow did not stop in a reasonable amount of time\", flow.getLifecycleState().isStopped(), is(true));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTc2NQ=="}, "originalCommit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4684, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}