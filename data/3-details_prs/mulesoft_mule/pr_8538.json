{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDY5Nzcy", "number": 8538, "title": "MULE-17873: do not fail on runtime when metadata keys has no type res\u2026", "bodyText": "\u2026olver", "createdAt": "2020-01-03T17:51:10Z", "url": "https://github.com/mulesoft/mule/pull/8538", "merged": true, "mergeCommit": {"oid": "9bf86295713a8c136f61db6bb5cc52fc94511bda"}, "closed": true, "closedAt": "2020-01-03T20:29:25Z", "author": {"login": "Bardammu"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2yHh3gH2gAyMzU5MDY5NzcyOjI2MmIwNjk4YjA0YjgzNDMxZWMwMzJhOTNkMDMzMzUwMDVlZjQwNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb2zO6OgFqTMzODIyODYxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "262b0698b04b83431ec032a93d03335005ef4073", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/262b0698b04b83431ec032a93d03335005ef4073", "committedDate": "2020-01-03T17:50:19Z", "message": "MULE-17873: do not fail on runtime when metadata keys has no type resolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MjA0NDI0", "url": "https://github.com/mulesoft/mule/pull/8538#pullrequestreview-338204424", "createdAt": "2020-01-03T18:09:44Z", "commit": {"oid": "262b0698b04b83431ec032a93d03335005ef4073"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxODowOTo0NFrOFaGCHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxODoxMDo0MFrOFaGDOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkwNjE0Mw==", "bodyText": "make this the very first condition so that mule startup doesn't go through unnecessary processing.", "url": "https://github.com/mulesoft/mule/pull/8538#discussion_r362906143", "createdAt": "2020-01-03T18:09:44Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/validation/MetadataComponentModelValidator.java", "diffHunk": "@@ -144,14 +144,15 @@ private void validateResolversName(ComponentModel model, MetadataResolverFactory\n         });\n   }\n \n-  private void validateMetadataKeyId(ComponentModel model, MetadataResolverFactory resolverFactory,\n+  private void validateMetadataKeyId(ExtensionModel extensionModel, ComponentModel model, MetadataResolverFactory resolverFactory,\n                                      ProblemsReporter problemsReporter) {\n     final String modelTypeName = capitalize(getComponentModelTypeName(model));\n     Optional<MetadataKeyIdModelProperty> keyId = model.getModelProperty(MetadataKeyIdModelProperty.class);\n     if (keyId.isPresent()) {\n \n       if (resolverFactory.getOutputResolver() instanceof NullMetadataResolver\n-          && !thereIsAnInputTypeResolverDefined(getAllInputResolvers(model, resolverFactory))) {\n+          && !thereIsAnInputTypeResolverDefined(getAllInputResolvers(model, resolverFactory))\n+          && isCompileTime(extensionModel)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262b0698b04b83431ec032a93d03335005ef4073"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkwNjQyNA==", "bodyText": "this looks like something we would do (or we potentially are doing) in several places. Move this to org.mule.runtime.module.extension.api.util.MuleExtensionUtils and check for other places where this code is repeated.", "url": "https://github.com/mulesoft/mule/pull/8538#discussion_r362906424", "createdAt": "2020-01-03T18:10:40Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/validation/MetadataComponentModelValidator.java", "diffHunk": "@@ -350,4 +351,8 @@ private boolean shouldValidateComponentOutputMetadata(ConnectableComponentModel\n         .orElse(true);\n   }\n \n+  private boolean isCompileTime(ExtensionModel extensionModel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262b0698b04b83431ec032a93d03335005ef4073"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf73bd0ab25de91179442a3eaeaebbe54b3d0cc3", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/bf73bd0ab25de91179442a3eaeaebbe54b3d0cc3", "committedDate": "2020-01-03T18:45:27Z", "message": "PR review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MjI3Mzkz", "url": "https://github.com/mulesoft/mule/pull/8538#pullrequestreview-338227393", "createdAt": "2020-01-03T19:05:20Z", "commit": {"oid": "bf73bd0ab25de91179442a3eaeaebbe54b3d0cc3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTowNToyMFrOFaHIlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTowNToyMFrOFaHIlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkyNDE4Mw==", "bodyText": "add @since 4.3.0", "url": "https://github.com/mulesoft/mule/pull/8538#discussion_r362924183", "createdAt": "2020-01-03T19:05:20Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/util/MuleExtensionUtils.java", "diffHunk": "@@ -474,4 +475,14 @@ public static boolean isExpression(Object value) {\n     }\n   }\n \n+  /**\n+   * Indicates if the extension model is being built on compile time.\n+   *\n+   * @param extensionModel the extension model to check\n+   * @return a boolean indicating if the the extension model is being build on runtime or not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf73bd0ab25de91179442a3eaeaebbe54b3d0cc3"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05c4c2a5275fb3ae1e65e142a8750c29e82d44a4", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/05c4c2a5275fb3ae1e65e142a8750c29e82d44a4", "committedDate": "2020-01-03T19:07:14Z", "message": "More PR review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MjI4NjEx", "url": "https://github.com/mulesoft/mule/pull/8538#pullrequestreview-338228611", "createdAt": "2020-01-03T19:08:17Z", "commit": {"oid": "05c4c2a5275fb3ae1e65e142a8750c29e82d44a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1303, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}