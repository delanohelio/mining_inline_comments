{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODEzNTQ0", "number": 8546, "title": "MULE-17894: RETRY_EXHAUSTED ErrorType gets replaced by the ErrorType that generated the exhaustion (if present)", "bodyText": "Removing the cause from the MessagingException prevents the ErrorType replacement during the MessagingException resolution", "createdAt": "2020-01-07T04:03:16Z", "url": "https://github.com/mulesoft/mule/pull/8546", "merged": true, "mergeCommit": {"oid": "fd8d97ad97622e20810ca0c13a0914e2940ff288"}, "closed": true, "closedAt": "2020-01-07T20:40:08Z", "author": {"login": "IvanAndresFritzler"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3zUxwgH2gAyMzU5ODEzNTQ0OjlkZmZmMDNhODc0OTU4ZjMzNzNhZjU3MjhkMWI2MjU0YTMzMTU1Y2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4EpqggFqTMzOTQwNTg3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9dfff03a874958f3373af5728d1b6254a33155cb", "author": {"user": {"login": "IvanAndresFritzler", "name": "Ivan Fritzler"}}, "url": "https://github.com/mulesoft/mule/commit/9dfff03a874958f3373af5728d1b6254a33155cb", "committedDate": "2020-01-06T21:48:37Z", "message": "MULE-17894: RETRY_EXHAUSTED ErrorType gets replaced by the ErrorType that generated the exhaustion (if present)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MjA4MjQ2", "url": "https://github.com/mulesoft/mule/pull/8546#pullrequestreview-339208246", "createdAt": "2020-01-07T12:34:08Z", "commit": {"oid": "9dfff03a874958f3373af5728d1b6254a33155cb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjozNDowOFrOFa4J0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjozNDowOFrOFa4J0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyNzMxMg==", "bodyText": "should this be done internally by RetryPolicyExhaustedException? What other uses are there for it?", "url": "https://github.com/mulesoft/mule/pull/8546#discussion_r363727312", "createdAt": "2020-01-07T12:34:08Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/routing/UntilSuccessfulRouter.java", "diffHunk": "@@ -274,10 +274,12 @@ private CoreEvent eventWithCurrentContextDeleted(CoreEvent event) {\n       if (throwable instanceof MessagingException) {\n         exceptionEvent = ((MessagingException) throwable).getEvent();\n       }\n+      // MessagingException cause is set to null in order to avoid RETRY:EXHAUSTED ErrorType replacement\n+      // during ErrorType resolution (see ChainErrorHandlingUtils and MessagingExceptionResolver)\n       return new MessagingException(exceptionEvent,\n                                     new RetryPolicyExhaustedException(createStaticMessage(UNTIL_SUCCESSFUL_MSG_PREFIX,\n                                                                                           cause.getMessage()),\n-                                                                      cause, owner),\n+                                                                      null, owner),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dfff03a874958f3373af5728d1b6254a33155cb"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3153971a81e018cc72baa6f8d99a962bcf838f7", "author": {"user": {"login": "IvanAndresFritzler", "name": "Ivan Fritzler"}}, "url": "https://github.com/mulesoft/mule/commit/e3153971a81e018cc72baa6f8d99a962bcf838f7", "committedDate": "2020-01-07T16:44:32Z", "message": "MULE-17894: Using more suitable constructor for RetryPolicyExhaustedException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDA1ODc5", "url": "https://github.com/mulesoft/mule/pull/8546#pullrequestreview-339405879", "createdAt": "2020-01-07T17:59:49Z", "commit": {"oid": "e3153971a81e018cc72baa6f8d99a962bcf838f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1317, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}