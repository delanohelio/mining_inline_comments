{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxODM4ODk4", "number": 9245, "title": "CMTS-32: Improve error messages and validations", "bodyText": "", "createdAt": "2020-08-21T20:21:24Z", "url": "https://github.com/mulesoft/mule/pull/9245", "merged": true, "mergeCommit": {"oid": "1672c690e001dd26e473d53295ebdac6a09fbeef"}, "closed": true, "closedAt": "2020-08-25T15:37:15Z", "author": {"login": "gsfernandes"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBRSmsABqjM2ODE2Njc5MTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCExJRgFqTQ3MzYzNzk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26082e77fa0be0f03aa38b3f52dd6c6915888303", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/26082e77fa0be0f03aa38b3f52dd6c6915888303", "committedDate": "2020-08-22T03:55:01Z", "message": "round 2, clean up code, better things happen when we do refators"}, "afterCommit": {"oid": "20d36e14b2ab70ee52cdd9af847b1669d2eab8f3", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/20d36e14b2ab70ee52cdd9af847b1669d2eab8f3", "committedDate": "2020-08-22T03:58:31Z", "message": "round 2, clean up code, better things happen when we do refators"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTg3MTEz", "url": "https://github.com/mulesoft/mule/pull/9245#pullrequestreview-473187113", "createdAt": "2020-08-24T07:37:07Z", "commit": {"oid": "2396a89367ee621744db0ec30dc4af2ff5251fb7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzozNzowN1rOHFX_AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo0Njo0NVrOHFYSPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5Nzg4OA==", "bodyText": "Be sure to change this is you modify the message from the other PR", "url": "https://github.com/mulesoft/mule/pull/9245#discussion_r475397888", "createdAt": "2020-08-24T07:37:07Z", "author": {"login": "lucianoRM"}, "path": "modules/tooling-support-parent/functional-tests/src/test/java/org/mule/runtime/module/tooling/ConnectivityTestingTestCase.java", "diffHunk": "@@ -46,7 +46,7 @@ public void testConnectionWrongConfigurationName() {\n     ConnectionValidationResult connectionValidationResult = session.testConnection(\"invalidConfigName\");\n     assertThat(connectionValidationResult.isValid(), equalTo(false));\n     assertThat(connectionValidationResult.getMessage(),\n-               equalTo(\"Could not find a connection provider for configuration: 'invalidConfigName'\"));\n+               equalTo(\"Could not perform test connection for configuration: 'invalidConfigName' due to a connection provider is not defined\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2396a89367ee621744db0ec30dc4af2ff5251fb7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwMTc3Mg==", "bodyText": "I wouldn't add this type of methods here. In any case, add a method that accepts the configName you want to use.\nBut this one seems too specific for the test case you are trying.\nAt least the idea of this class, was to provide an easy way to declare all elements of the TestExtension. But not to test different cases. That should be the concern of the user class", "url": "https://github.com/mulesoft/mule/pull/9245#discussion_r475401772", "createdAt": "2020-08-24T07:44:39Z", "author": {"login": "lucianoRM"}, "path": "modules/tooling-support-parent/test-extension/src/test/java/org/mule/runtime/module/tooling/TestExtensionDeclarationUtils.java", "diffHunk": "@@ -310,15 +323,36 @@ public static OperationElementDeclaration multiLevelShowInDslGroupOPDeclaration(\n     if (country != null) {\n       parameterGroupElementDeclarer.withParameter(\"country\", ParameterSimpleValue.of(country));\n     }\n+    if (city != null) {\n+      parameterGroupElementDeclarer.withParameter(\"city\", ParameterSimpleValue.of(city));\n+    }\n \n-    if (continent != null || country != null) {\n+    if (continent != null || country != null || city != null) {\n       elementDeclarer.withParameterGroup(parameterGroupElementDeclarer.getDeclaration());\n     }\n     return elementDeclarer.getDeclaration();\n+\n   }\n \n   public static ComponentElementDeclaration<?> invalidComponentDeclaration() {\n     return TEST_EXTENSION_DECLARER.newConstruct(\"invalid\").getDeclaration();\n   }\n \n+  public static ComponentElementDeclaration<?> componentDeclarationWrongConfigRef() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2396a89367ee621744db0ec30dc4af2ff5251fb7"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwMjgxNA==", "bodyText": "artifactHelper is  being initialized once any of these 3 lazyValues are. That should not be a problem but maybe it would be better for them to accept LazyValue ?", "url": "https://github.com/mulesoft/mule/pull/9245#discussion_r475402814", "createdAt": "2020-08-24T07:46:45Z", "author": {"login": "lucianoRM"}, "path": "modules/tooling-support-parent/tooling-support/src/main/java/org/mule/runtime/module/tooling/internal/config/InternalDeclarationSession.java", "diffHunk": "@@ -100,215 +63,129 @@\n   @Inject\n   private ExpressionManager expressionManager;\n \n-  private LazyValue<ArtifactHelper> artifactHelperLazyValue;\n+  private final LazyValue<ArtifactHelper> artifactHelperLazyValue;\n+  private final LazyValue<ValueProviderExecutor> valueProviderExecutorLazyValue;\n+  private final LazyValue<MetadataKeysExecutor> metadataKeysExecutorLazyValue;\n+  private final LazyValue<MetadataComponentExecutor> metadataComponentExecutorLazyValue;\n \n   InternalDeclarationSession(ArtifactDeclaration artifactDeclaration) {\n     this.artifactHelperLazyValue =\n         new LazyValue<>(() -> new ArtifactHelper(extensionManager, componentLocator, artifactDeclaration));\n+    this.valueProviderExecutorLazyValue =\n+        new LazyValue<>(() -> new ValueProviderExecutor(muleContext, connectionManager, expressionManager, reflectionCache,\n+                                                        artifactHelper()));\n+    this.metadataKeysExecutorLazyValue =\n+        new LazyValue<>(() -> new MetadataKeysExecutor(connectionManager, reflectionCache, artifactHelper()));\n+    this.metadataComponentExecutorLazyValue =\n+        new LazyValue<>(() -> new MetadataComponentExecutor(connectionManager, reflectionCache, artifactHelper()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2396a89367ee621744db0ec30dc4af2ff5251fb7"}, "originalPosition": 102}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecde7783f11970417c75b48bbcec09aa18a05e25", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/ecde7783f11970417c75b48bbcec09aa18a05e25", "committedDate": "2020-08-24T13:43:26Z", "message": "CMTS-32: Improve error messages and validations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c286ecf2c12ee7d56de521af1765e969510f0b42", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/c286ecf2c12ee7d56de521af1765e969510f0b42", "committedDate": "2020-08-24T13:50:30Z", "message": "round 2, clean up code, better things happen when we do refators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa43cbc1c05ee1d30bad8656696602e007e82ffd", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/fa43cbc1c05ee1d30bad8656696602e007e82ffd", "committedDate": "2020-08-24T13:52:16Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "368b298bce37b2d68a0095addbd03e564cf22e64", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/368b298bce37b2d68a0095addbd03e564cf22e64", "committedDate": "2020-08-24T15:01:38Z", "message": "PR feedback and rebase"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2396a89367ee621744db0ec30dc4af2ff5251fb7", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/2396a89367ee621744db0ec30dc4af2ff5251fb7", "committedDate": "2020-08-24T03:33:20Z", "message": "Fix tests"}, "afterCommit": {"oid": "368b298bce37b2d68a0095addbd03e564cf22e64", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/368b298bce37b2d68a0095addbd03e564cf22e64", "committedDate": "2020-08-24T15:01:38Z", "message": "PR feedback and rebase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjM3OTcx", "url": "https://github.com/mulesoft/mule/pull/9245#pullrequestreview-473637971", "createdAt": "2020-08-24T15:58:23Z", "commit": {"oid": "368b298bce37b2d68a0095addbd03e564cf22e64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 554, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}