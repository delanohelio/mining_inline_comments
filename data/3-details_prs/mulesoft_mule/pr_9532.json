{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMTg3NDUw", "number": 9532, "title": "MULE-18871: Fix flaky test org.mule.test.module.extension.source.HeisenbergMessageSourceTestCase.sourceRestartedWithDynamicConfig", "bodyText": "\u2026enbergMessageSourceTestCase.sourceRestartedWithDynamicConfig", "createdAt": "2020-10-08T21:02:58Z", "url": "https://github.com/mulesoft/mule/pull/9532", "merged": true, "mergeCommit": {"oid": "283351fdd6d50e18112d8ddd1f00b24d2a307732"}, "closed": true, "closedAt": "2020-10-20T21:21:01Z", "author": {"login": "pabloperalta"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQoD7ZgH2gAyNTAwMTg3NDUwOjk5ZTg2NWJhMTRjODMzMmQ5NGM1OTI0ZWUyZTg4ZTk2N2M4ODI5ZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSN7z3AFqTUwNzc3MDI5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2", "author": {"user": {"login": "pabloperalta", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/99e865ba14c8332d94c5924ee2e88e967c8829d2", "committedDate": "2020-10-08T21:00:31Z", "message": "MULE-18871: Fix flaky test org.mule.test.module.extension.source.HeisenbergMessageSourceTestCase.sourceRestartedWithDynamicConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjQyODk1", "url": "https://github.com/mulesoft/mule/pull/9532#pullrequestreview-507642895", "createdAt": "2020-10-13T16:49:12Z", "commit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OToxM1rOHgwaxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo0OTozMlrOHgwbhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTc2NQ==", "bodyText": "return flow.getLifecycleState().isStopped();", "url": "https://github.com/mulesoft/mule/pull/9532#discussion_r504109765", "createdAt": "2020-10-13T16:49:13Z", "author": {"login": "eze210"}, "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/source/HeisenbergMessageSourceTestCase.java", "diffHunk": "@@ -331,6 +332,20 @@ protected void stopFlow(String flowName) throws Exception {\n     flow.stop();\n   }\n \n+  protected void requestFlowToStopAndWait(String flowName) throws Exception {\n+    stopFlow(flowName);\n+    checkFlowIsStopped(flowName);\n+  }\n+\n+  protected void checkFlowIsStopped(String flowName) throws Exception {\n+    flow = (Flow) getFlowConstruct(flowName);\n+    check(FLOW_STOP_TIMEOUT, POLL_DELAY_MILLIS,\n+          () -> {\n+            assertThat(\"The flow did not stop in a reasonable amount of time\", flow.getLifecycleState().isStopped(), is(true));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTk1OA==", "bodyText": "And move the error message to the probe description", "url": "https://github.com/mulesoft/mule/pull/9532#discussion_r504109958", "createdAt": "2020-10-13T16:49:32Z", "author": {"login": "eze210"}, "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/source/HeisenbergMessageSourceTestCase.java", "diffHunk": "@@ -331,6 +332,20 @@ protected void stopFlow(String flowName) throws Exception {\n     flow.stop();\n   }\n \n+  protected void requestFlowToStopAndWait(String flowName) throws Exception {\n+    stopFlow(flowName);\n+    checkFlowIsStopped(flowName);\n+  }\n+\n+  protected void checkFlowIsStopped(String flowName) throws Exception {\n+    flow = (Flow) getFlowConstruct(flowName);\n+    check(FLOW_STOP_TIMEOUT, POLL_DELAY_MILLIS,\n+          () -> {\n+            assertThat(\"The flow did not stop in a reasonable amount of time\", flow.getLifecycleState().isStopped(), is(true));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEwOTc2NQ=="}, "originalCommit": {"oid": "99e865ba14c8332d94c5924ee2e88e967c8829d2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9892c9ce2fa0f1d09629d019bad7b6e1b37037cd", "author": {"user": {"login": "pabloperalta", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/9892c9ce2fa0f1d09629d019bad7b6e1b37037cd", "committedDate": "2020-10-13T17:53:36Z", "message": "MULE-18871: Fix flaky test org.mule.test.module.extension.source.HeisenbergMessageSourceTestCase.sourceRestartedWithDynamicConfig"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd2b8260597fe28a65d1fc28ff4302f0a96fddb6", "author": {"user": {"login": "pabloperalta", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/cd2b8260597fe28a65d1fc28ff4302f0a96fddb6", "committedDate": "2020-10-13T19:26:41Z", "message": "MULE-18871: Fix flaky test org.mule.test.module.extension.source.HeisenbergMessageSourceTestCase.sourceRestartedWithDynamicConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NzcwMjk4", "url": "https://github.com/mulesoft/mule/pull/9532#pullrequestreview-507770298", "createdAt": "2020-10-13T19:41:58Z", "commit": {"oid": "cd2b8260597fe28a65d1fc28ff4302f0a96fddb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1158, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}