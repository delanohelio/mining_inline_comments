{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MjU3MDU4", "number": 8864, "title": "MULE-18407: Remove `type` from ComponentModel", "bodyText": "", "createdAt": "2020-05-14T21:31:18Z", "url": "https://github.com/mulesoft/mule/pull/8864", "merged": true, "mergeCommit": {"oid": "31a51fdc549f9eda1551af43f6bf644bf20b42d7"}, "closed": true, "closedAt": "2020-05-18T17:59:42Z", "author": {"login": "elrodro83"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchUVe8gH2gAyNDE4MjU3MDU4OmE1ZjFmNDRmNjk5ZTlhYmU0ZTc0YmMzMmM5OTRlMjY1NzFjMGVmZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcijwtHgFqTQxMzgxODY2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a5f1f44f699e9abe4e74bc32c994e26571c0eff2", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/a5f1f44f699e9abe4e74bc32c994e26571c0eff2", "committedDate": "2020-05-14T21:27:09Z", "message": "MULE-18407: Remove `type` from ComponentModel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/e29ab7c90513cc7960e5d5a063ab693c1556371e", "committedDate": "2020-05-18T12:42:56Z", "message": "sonar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODEwODQ4", "url": "https://github.com/mulesoft/mule/pull/8864#pullrequestreview-413810848", "createdAt": "2020-05-18T17:47:48Z", "commit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Nzo0OFrOGXBhpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Nzo0OFrOGXBhpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NTQzMQ==", "bodyText": "How did you do now with these cases? This was relying on the Type (class) to build the metadataTypeModelAdapter for the parameterAst... how does this work from now on?", "url": "https://github.com/mulesoft/mule/pull/8864#discussion_r426795431", "createdAt": "2020-05-18T17:47:48Z", "author": {"login": "gsfernandes"}, "path": "modules/spring-config/src/main/java/org/mule/runtime/config/internal/model/ComponentModel.java", "diffHunk": "@@ -485,530 +424,6 @@ public void setComponentType(TypedComponentIdentifier.ComponentType componentTyp\n     return empty();\n   }\n \n-  public void resolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    executeOnComponentTree(this, componentModel -> {\n-      componentModel.doResolveTypedComponentIdentifier(extensionModelHelper, runtimeMode);\n-    });\n-  }\n-\n-  private void doResolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    extensionModelHelper.walkToComponent(getIdentifier(), new ExtensionWalkerModelDelegate() {\n-\n-      @Override\n-      public void onConfiguration(ConfigurationModel model) {\n-        setConfigurationModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConnectionProvider(ConnectionProviderModel model) {\n-        setConnectionProviderModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onOperation(OperationModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onSource(SourceModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConstruct(ConstructModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onNestableElement(NestableElementModel model) {\n-        setNestableElementModel(model);\n-        if (model instanceof ParameterizedModel) {\n-          onParameterizedModel((ParameterizedModel) model);\n-        }\n-      }\n-\n-      private void onParameterizedModel(ParameterizedModel model) {\n-        if (runtimeMode) {\n-          handleNestedParametersWithoutPopulatingObjectTypes(ComponentModel.this, extensionModelHelper, model);\n-        } else {\n-          DslElementSyntax elementDsl = extensionModelHelper.resolveDslElementModel(model, getIdentifier());\n-          onParameterizedModel(elementDsl, model, parameterModel -> true);\n-        }\n-      }\n-\n-      private void onParameterizedModel(DslElementSyntax elementDsl, ParameterizedModel model,\n-                                        Predicate<ParameterModel> parameterModelFilter) {\n-        Multimap<ComponentIdentifier, ComponentModel> nestedComponents = getNestedComponents(ComponentModel.this);\n-\n-        List<ParameterModel> inlineGroupedParameters = model.getParameterGroupModels().stream()\n-            .filter(ParameterGroupModel::isShowInDsl)\n-            .map(group -> addInlineGroup(elementDsl, nestedComponents, group, extensionModelHelper))\n-            .flatMap(g -> g.getParameterModels().stream())\n-            .collect(toList());\n-\n-        handleNestedParameters(ComponentModel.this, ComponentModel.this.directChildrenStream()\n-            .filter(childComp -> childComp != ComponentModel.this),\n-                               nestedComponents, extensionModelHelper,\n-                               model,\n-                               parameterModel -> parameterModelFilter.test(parameterModel)\n-                                   && !inlineGroupedParameters.contains(parameterModel));\n-      }\n-\n-    });\n-\n-    // Last resort to try to find a matching metadata type for this component\n-    if (!getModel(HasStereotypeModel.class).isPresent()) {\n-      extensionModelHelper.findMetadataType(getType())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e"}, "originalPosition": 220}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODE4NjYz", "url": "https://github.com/mulesoft/mule/pull/8864#pullrequestreview-413818663", "createdAt": "2020-05-18T17:59:23Z", "commit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 658, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}