{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTU0MzQ3", "number": 8533, "title": "MULE-17874: SDK Should not reject dynamic metadata resolution when an\u2026", "bodyText": "\u2026 optional key is null", "createdAt": "2020-01-02T05:07:53Z", "url": "https://github.com/mulesoft/mule/pull/8533", "merged": true, "mergeCommit": {"oid": "a3d420f4ab13d92759524ca8178c590a17d4dd2d"}, "closed": true, "closedAt": "2020-01-03T13:22:15Z", "author": {"login": "Bardammu"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2Z4lIAH2gAyMzU4NTU0MzQ3OjlhZDc3MjYzMDMzODlhNTE1NTFkMzM0YjM2NjMyMGI0OTBjYmU1ZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb2exrNgFqTMzNzgxMjU3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ad7726303389a51551d334b366320b490cbe5e1", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/9ad7726303389a51551d334b366320b490cbe5e1", "committedDate": "2020-01-02T13:36:16Z", "message": "MULE-17874: SDK Should not reject dynamic metadata resolution when an optional key is null"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0f73cd38661c99019abc7dfeab5e7c999deb502", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/c0f73cd38661c99019abc7dfeab5e7c999deb502", "committedDate": "2020-01-02T04:34:05Z", "message": "MULE-17874: SDK Should not reject dynamic metadata resolution when an optional key is null"}, "afterCommit": {"oid": "9ad7726303389a51551d334b366320b490cbe5e1", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/9ad7726303389a51551d334b366320b490cbe5e1", "committedDate": "2020-01-02T13:36:16Z", "message": "MULE-17874: SDK Should not reject dynamic metadata resolution when an optional key is null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NjkwOTYz", "url": "https://github.com/mulesoft/mule/pull/8533#pullrequestreview-337690963", "createdAt": "2020-01-02T14:49:32Z", "commit": {"oid": "9ad7726303389a51551d334b366320b490cbe5e1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNDo0OTozMlrOFZtJCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNDo1MToxN1rOFZtLhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ5ODMxNA==", "bodyText": "What if keyParts is empty? Will this say that the key is required?", "url": "https://github.com/mulesoft/mule/pull/8533#discussion_r362498314", "createdAt": "2020-01-02T14:49:32Z", "author": {"login": "ndinu"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/metadata/MetadataKeyIdObjectResolver.java", "diffHunk": "@@ -262,6 +262,10 @@ public boolean isKeyLess() {\n     return keyParts.isEmpty();\n   }\n \n+  public boolean isKeyRequired() {\n+    return keyParts.stream().noneMatch(k -> k.isRequired() || k.getDefaultValue() != null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ad7726303389a51551d334b366320b490cbe5e1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ5ODk0OA==", "bodyText": "I think that this should fail if key is required. It looks like this will fail when key is not required.", "url": "https://github.com/mulesoft/mule/pull/8533#discussion_r362498948", "createdAt": "2020-01-02T14:51:17Z", "author": {"login": "ndinu"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/metadata/MetadataMediator.java", "diffHunk": "@@ -171,7 +171,7 @@ public MetadataMediator(T componentModel) {\n       }\n \n       keyValue = keyValueResult.get();\n-      if (keyValue == null && !keyIdObjectResolver.isKeyLess()) {\n+      if (keyValue == null && !keyIdObjectResolver.isKeyRequired()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ad7726303389a51551d334b366320b490cbe5e1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1b3a15f3e062c6452db355489ad42dfccfc59ba", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/e1b3a15f3e062c6452db355489ad42dfccfc59ba", "committedDate": "2020-01-02T18:05:29Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "352234eaa63fc4230e8dc59373617df50376b7c8", "author": {"user": {"login": "Bardammu", "name": "Juan Baca Paunero"}}, "url": "https://github.com/mulesoft/mule/commit/352234eaa63fc4230e8dc59373617df50376b7c8", "committedDate": "2020-01-02T19:15:11Z", "message": "Remove useless if condition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3ODEyNTc5", "url": "https://github.com/mulesoft/mule/pull/8533#pullrequestreview-337812579", "createdAt": "2020-01-02T19:18:15Z", "commit": {"oid": "352234eaa63fc4230e8dc59373617df50376b7c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1412, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}