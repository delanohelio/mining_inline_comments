{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNDc2NDYz", "number": 9078, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyMzoxM1rOEQs1Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoxNTo1OFrOEReEuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3MjA2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/mule/runtime/core/internal/exception/DefaultErrorMapping.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyMzoxNFrOG0_7ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyNDoyNVrOG1iODQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNjUzMg==", "bodyText": "delete?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458226532", "createdAt": "2020-07-21T16:23:14Z", "author": {"login": "marianogonzalez"}, "path": "core/src/main/java/org/mule/runtime/core/internal/exception/DefaultErrorMapping.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.runtime.core.internal.exception;\n+\n+import org.mule.runtime.api.meta.model.operation.ErrorMapping;\n+\n+public final class DefaultErrorMapping implements ErrorMapping {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc4ODM2NQ==", "bodyText": "still no delete?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458788365", "createdAt": "2020-07-22T13:24:25Z", "author": {"login": "marianogonzalez"}, "path": "core/src/main/java/org/mule/runtime/core/internal/exception/DefaultErrorMapping.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.runtime.core.internal.exception;\n+\n+import org.mule.runtime.api.meta.model.operation.ErrorMapping;\n+\n+public final class DefaultErrorMapping implements ErrorMapping {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNjUzMg=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NTQxOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDowNlrOG0_9fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyNToyMFrOG1iQsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzA2OQ==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227069", "createdAt": "2020-07-21T16:24:06Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -82,6 +82,9 @@\n                 <parameter name=\"config-ref\">\n                     <description><![CDATA[The name of the configuration to be used to execute this component]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc4OTA0MA==", "bodyText": "unresolved... this one and the below", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458789040", "createdAt": "2020-07-22T13:25:20Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -82,6 +82,9 @@\n                 <parameter name=\"config-ref\">\n                     <description><![CDATA[The name of the configuration to be used to execute this component]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzA2OQ=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NTc0OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoxMFrOG0_9sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoxMFrOG0_9sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzEyMw==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227123", "createdAt": "2020-07-21T16:24:10Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -96,6 +99,9 @@\n                 <parameter name=\"config-ref\">\n                     <description><![CDATA[The name of the configuration to be used to execute this component]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NjE1OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoxOFrOG0_9_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoxOFrOG0_9_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzE5Nw==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227197", "createdAt": "2020-07-21T16:24:18Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -110,6 +116,9 @@\n                 <parameter name=\"otherFriend\">\n                     <description><![CDATA[Some other friend]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NjQwOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoyM1rOG0_-Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoyM1rOG0_-Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzIzNA==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227234", "createdAt": "2020-07-21T16:24:23Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -135,6 +147,9 @@\n                 <parameter name=\"alias-param\">\n                     <description><![CDATA[Param with alias]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NjY5OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoyN1rOG0_-TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDoyN1rOG0_-TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzI3Nw==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227277", "createdAt": "2020-07-21T16:24:27Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -143,6 +158,9 @@\n                 <parameter name=\"value\">\n                     <description><![CDATA[some doc]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3Njg2OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDozMVrOG0_-bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDozMVrOG0_-bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzMxMA==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227310", "createdAt": "2020-07-21T16:24:31Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/multiple-extension-descriptions.xml", "diffHunk": "@@ -151,6 +169,9 @@\n                 <parameter name=\"value\">\n                     <description><![CDATA[this is the String to be returned]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NzMyOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/single-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDozOFrOG0_-tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDozOFrOG0_-tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzM4Mw==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227383", "createdAt": "2020-07-21T16:24:38Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/single-extension-descriptions.xml", "diffHunk": "@@ -69,6 +69,9 @@\n                 <parameter name=\"config-ref\">\n                     <description><![CDATA[The name of the configuration to be used to execute this component]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3NzcyOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/META-INF/single-extension-descriptions.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDo0M1rOG0_-7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNDo0M1rOG0_-7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzQzNg==", "bodyText": "make this human readable", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227436", "createdAt": "2020-07-21T16:24:43Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/META-INF/single-extension-descriptions.xml", "diffHunk": "@@ -86,6 +89,9 @@\n                 <parameter name=\"second\">\n                     <description><![CDATA[Second Description]]></description>\n                 </parameter>\n+                <parameter name=\"errorMappings\">\n+                    <description><![CDATA[Set of 'errorMapping's]]></description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ3OTk2OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/models/test-fn.json", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNToxMFrOG1AAPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNToxMFrOG1AAPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyNzc3NQ==", "bodyText": "this is a weird typeId", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458227775", "createdAt": "2020-07-21T16:25:10Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/models/test-fn.json", "diffHunk": "@@ -431,6 +431,131 @@\n           \"name\": \"Output\",\n           \"description\": \"\",\n           \"modelProperties\": {}\n+        },\n+        {\n+          \"parameters\": [\n+            {\n+              \"type\": {\n+                \"format\": \"java\",\n+                \"type\": \"Array\",\n+                \"annotations\": {\n+                  \"description\": {\n+                    \"value\": \"Determines that an error thrown by this operation should be mapped to another\"\n+                  },\n+                  \"typeDsl\": {\n+                    \"allowInlineDefinition\": true,\n+                    \"allowTopLevelDefinition\": false\n+                  }\n+                },\n+                \"item\": {\n+                  \"type\": \"Object\",\n+                  \"annotations\": {\n+                    \"typeId\": \"errorMapping\"\n+                  },\n+                  \"fields\": [\n+                    {\n+                      \"key\": {\n+                        \"name\": \"source\"\n+                      },\n+                      \"model\": {\n+                        \"format\": {\n+                          \"id\": \"text\",\n+                          \"label\": \"Text\",\n+                          \"validMimeTypes\": [\n+                            \"text/plain\"\n+                          ]\n+                        },\n+                        \"type\": \"String\",\n+                        \"annotations\": {\n+                          \"typeId\": \"errorTypeMatcher\"\n+                        }\n+                      }\n+                    },\n+                    {\n+                      \"key\": {\n+                        \"name\": \"target\",\n+                        \"required\": \"true\"\n+                      },\n+                      \"model\": {\n+                        \"format\": {\n+                          \"id\": \"text\",\n+                          \"label\": \"Text\",\n+                          \"validMimeTypes\": [\n+                            \"text/plain\"\n+                          ]\n+                        },\n+                        \"type\": \"String\",\n+                        \"annotations\": {\n+                          \"typeId\": \"errorTypeDeclared\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ4MzIwOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/schemas/implicit-config.xsd", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNTo1OFrOG1ACSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyNzo1MlrOG1iXUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyODI5OQ==", "bodyText": "this is weird. Your original intent was to reflect this on the extension model, but why is the XSD being changed? Wasn't it possible to provide this error mapping before?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458228299", "createdAt": "2020-07-21T16:25:58Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/schemas/implicit-config.xsd", "diffHunk": "@@ -101,6 +103,7 @@\n       <xs:extension xmlns:mule=\"http://www.mulesoft.org/schema/mule/core\" base=\"mule:abstractOperatorType\">\n         <xs:sequence minOccurs=\"0\" maxOccurs=\"1\">\n           <xs:element minOccurs=\"0\" maxOccurs=\"1\" ref=\"mule:abstract-reconnection-strategy\"></xs:element>\n+          <xs:element minOccurs=\"0\" maxOccurs=\"unbounded\" ref=\"mule:error-mapping\"></xs:element>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0NDU5NQ==", "bodyText": "previously this was in the mule xsd, on the parent element of all operations. Since the xsd generation is fed from the ext model, it is reflected here. The mule xsd was changed accordingly.", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458244595", "createdAt": "2020-07-21T16:51:06Z", "author": {"login": "elrodro83"}, "path": "modules/extensions-spring-support/src/test/resources/schemas/implicit-config.xsd", "diffHunk": "@@ -101,6 +103,7 @@\n       <xs:extension xmlns:mule=\"http://www.mulesoft.org/schema/mule/core\" base=\"mule:abstractOperatorType\">\n         <xs:sequence minOccurs=\"0\" maxOccurs=\"1\">\n           <xs:element minOccurs=\"0\" maxOccurs=\"1\" ref=\"mule:abstract-reconnection-strategy\"></xs:element>\n+          <xs:element minOccurs=\"0\" maxOccurs=\"unbounded\" ref=\"mule:error-mapping\"></xs:element>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyODI5OQ=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc5MDczNw==", "bodyText": "I don't think this is a good change then. If it can be defined globally in the base type, it should be kept like that. Not only because of redundancy and code tidyness... this change risks potential problems because of element ordering in exchange for no gain I can appretiate", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458790737", "createdAt": "2020-07-22T13:27:52Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/schemas/implicit-config.xsd", "diffHunk": "@@ -101,6 +103,7 @@\n       <xs:extension xmlns:mule=\"http://www.mulesoft.org/schema/mule/core\" base=\"mule:abstractOperatorType\">\n         <xs:sequence minOccurs=\"0\" maxOccurs=\"1\">\n           <xs:element minOccurs=\"0\" maxOccurs=\"1\" ref=\"mule:abstract-reconnection-strategy\"></xs:element>\n+          <xs:element minOccurs=\"0\" maxOccurs=\"unbounded\" ref=\"mule:error-mapping\"></xs:element>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyODI5OQ=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ4ODIzOnYy", "diffSide": "RIGHT", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/OperationModelLoaderDelegate.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyNzoxNFrOG1AFgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyODoxOVrOG1iYmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyOTEyMg==", "bodyText": "Weird:\na) added but never used\nb) shoudln't this use the extension's classlaoder?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458229122", "createdAt": "2020-07-21T16:27:14Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/OperationModelLoaderDelegate.java", "diffHunk": "@@ -55,6 +58,8 @@\n final class OperationModelLoaderDelegate extends AbstractModelLoaderDelegate {\n \n   private static final String OPERATION = \"Operation\";\n+  private static final ClassTypeLoader TYPE_LOADER = ExtensionsTypeLoaderFactory.getDefault()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc5MTA2NA==", "bodyText": "no action?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458791064", "createdAt": "2020-07-22T13:28:19Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/OperationModelLoaderDelegate.java", "diffHunk": "@@ -55,6 +58,8 @@\n final class OperationModelLoaderDelegate extends AbstractModelLoaderDelegate {\n \n   private static final String OPERATION = \"Operation\";\n+  private static final ClassTypeLoader TYPE_LOADER = ExtensionsTypeLoaderFactory.getDefault()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyOTEyMg=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQ5MTkzOnYy", "diffSide": "RIGHT", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/exception/ErrorMappingUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoyODoxMVrOG1AH6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyODo0MFrOG1iZnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyOTczNg==", "bodyText": "shouldn't this be forEachErrorMapping ?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458229736", "createdAt": "2020-07-21T16:28:11Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/exception/ErrorMappingUtils.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.runtime.module.extension.internal.runtime.exception;\n+\n+import static org.mule.runtime.extension.api.ExtensionConstants.ERROR_MAPPINGS_PARAMETER_NAME;\n+\n+import org.mule.runtime.api.meta.model.operation.ErrorMapping;\n+import org.mule.runtime.api.meta.model.operation.OperationModel;\n+import org.mule.runtime.ast.api.ComponentAst;\n+import org.mule.runtime.ast.api.ComponentParameterAst;\n+\n+import java.util.List;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Utilities for dealing with {@code error-mapping} in operations.\n+ *\n+ * @since 4.4\n+ */\n+public final class ErrorMappingUtils {\n+\n+  private ErrorMappingUtils() {\n+    // Nothing to do\n+  }\n+\n+  /**\n+   * For the given AST node representing an operation, execute the given {@code action} for each error mapping it has.\n+   * \n+   * @param operation the operation from which to iterate the error mappings.\n+   * @param action what is executed for every error mapping.\n+   */\n+  public static void doForErrorMappings(ComponentAst operation, Consumer<List<ErrorMapping>> action) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc5MTMyNQ==", "bodyText": "no action", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458791325", "createdAt": "2020-07-22T13:28:40Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/exception/ErrorMappingUtils.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.runtime.module.extension.internal.runtime.exception;\n+\n+import static org.mule.runtime.extension.api.ExtensionConstants.ERROR_MAPPINGS_PARAMETER_NAME;\n+\n+import org.mule.runtime.api.meta.model.operation.ErrorMapping;\n+import org.mule.runtime.api.meta.model.operation.OperationModel;\n+import org.mule.runtime.ast.api.ComponentAst;\n+import org.mule.runtime.ast.api.ComponentParameterAst;\n+\n+import java.util.List;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Utilities for dealing with {@code error-mapping} in operations.\n+ *\n+ * @since 4.4\n+ */\n+public final class ErrorMappingUtils {\n+\n+  private ErrorMappingUtils() {\n+    // Nothing to do\n+  }\n+\n+  /**\n+   * For the given AST node representing an operation, execute the given {@code action} for each error mapping it has.\n+   * \n+   * @param operation the operation from which to iterate the error mappings.\n+   * @param action what is executed for every error mapping.\n+   */\n+  public static void doForErrorMappings(ComponentAst operation, Consumer<List<ErrorMapping>> action) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyOTczNg=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzA3NzIzOnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/main/java/org/mule/runtime/module/extension/internal/AbstractComponentDefinitionParser.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzoyNTo1NFrOG1iSDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDo0MzowNlrOG1zepQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc4OTM4OA==", "bodyText": "this part I still don't underestand... so nobody was paying attention to this in 4.3?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458789388", "createdAt": "2020-07-22T13:25:54Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/main/java/org/mule/runtime/module/extension/internal/AbstractComponentDefinitionParser.java", "diffHunk": "@@ -81,6 +80,7 @@ protected Builder doParse(Builder definitionBuilder)\n                                        fromSimpleParameter(TARGET_VALUE_PARAMETER_NAME).build())\n         .withSetterParameterDefinition(CURSOR_PROVIDER_FACTORY_FIELD_NAME,\n                                        fromChildConfiguration(CursorProviderFactory.class).build())\n+        .withSetterParameterDefinition(\"errorMappings\", fromChildCollectionConfiguration(EnrichedErrorMapping.class).build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3MTE0MQ==", "bodyText": "it was set by custom code in the parser, passing it through the annotations of the componet :ugly:", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r459071141", "createdAt": "2020-07-22T20:43:06Z", "author": {"login": "elrodro83"}, "path": "modules/extensions-spring-support/src/main/java/org/mule/runtime/module/extension/internal/AbstractComponentDefinitionParser.java", "diffHunk": "@@ -81,6 +80,7 @@ protected Builder doParse(Builder definitionBuilder)\n                                        fromSimpleParameter(TARGET_VALUE_PARAMETER_NAME).build())\n         .withSetterParameterDefinition(CURSOR_PROVIDER_FACTORY_FIELD_NAME,\n                                        fromChildConfiguration(CursorProviderFactory.class).build())\n+        .withSetterParameterDefinition(\"errorMappings\", fromChildCollectionConfiguration(EnrichedErrorMapping.class).build())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc4OTM4OA=="}, "originalCommit": {"oid": "5b0600763791afb32ce4e2e202decdf571419a6e"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzU3Mjg1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/mule/runtime/core/internal/exception/EnrichedErrorMapping.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMjozN1rOG1nF-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMjozN1rOG1nF-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg2ODIxOQ==", "bodyText": "4.0?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r458868219", "createdAt": "2020-07-22T15:12:37Z", "author": {"login": "marianogonzalez"}, "path": "core/src/main/java/org/mule/runtime/core/internal/exception/EnrichedErrorMapping.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.runtime.core.internal.exception;\n+\n+import org.mule.runtime.api.component.AbstractComponent;\n+import org.mule.runtime.api.message.ErrorType;\n+import org.mule.runtime.core.api.exception.ErrorTypeMatcher;\n+\n+/**\n+ * Represents a mapping between source and target {@link ErrorType}s, indicating that if\n+ * the first or a match for it is found then the other should be propagated instead.\n+ *\n+ * @since 4.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69e7eeaecf57283e33fec073d81fcc2e5a53b23a"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NzUzOTc5OnYy", "diffSide": "RIGHT", "path": "modules/extensions-spring-support/src/test/resources/schemas/basic.xsd", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoxNTo1OFrOG2MnUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoxNTo1OFrOG2MnUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4Mjk2MQ==", "bodyText": "what's the actual change in these?", "url": "https://github.com/mulesoft/mule/pull/9078#discussion_r459482961", "createdAt": "2020-07-23T14:15:58Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/resources/schemas/basic.xsd", "diffHunk": "@@ -115,4 +115,4 @@\n       </xs:extension>\n     </xs:complexContent>\n   </xs:complexType>\n-</xs:schema>\n+</xs:schema>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4264c5f4ade5afb0689b21240fb02dbcfd1fa78f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4835, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}