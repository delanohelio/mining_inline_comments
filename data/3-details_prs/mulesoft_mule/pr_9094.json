{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0Nzk1NTU1", "number": 9094, "title": "MULE-18426: Interception API: Add a callback to source interceptor on\u2026", "bodyText": "\u2026ce all event contexts for an event are complete", "createdAt": "2020-07-21T23:23:14Z", "url": "https://github.com/mulesoft/mule/pull/9094", "merged": true, "mergeCommit": {"oid": "e92926175579697e8c1b108c3da3c34795e1cacb"}, "closed": true, "closedAt": "2020-08-06T20:50:39Z", "author": {"login": "JuLuzzi"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3PPFRAFqTQ1MjkwNjY3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8WGWRgFqTQ2Mjg2NDUzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTA2Njcy", "url": "https://github.com/mulesoft/mule/pull/9094#pullrequestreview-452906672", "createdAt": "2020-07-21T23:56:37Z", "commit": {"oid": "35cfbba9146285d72ec53f89626fd141a4855ede"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMzo1NjozN1rOG1N4ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMzo1NjozN1rOG1N4ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ1NTIzNQ==", "bodyText": "no, this should be done on a termination callback on the event context", "url": "https://github.com/mulesoft/mule/pull/9094#discussion_r458455235", "createdAt": "2020-07-21T23:56:37Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/processor/interceptor/AbstractCompletableInterceptorSourceCallbackAdapter.java", "diffHunk": "@@ -132,6 +132,7 @@ public AbstractCompletableInterceptorSourceCallbackAdapter(SourceInterceptorFact\n           interceptor.afterCallback(component.getLocation(), interceptionEvent, thrown);\n         } finally {\n           setContextClassLoader(currentThread, ctxClassLoader, originalTCCL);\n+          interceptor.afterTerminated(component.getLocation(), interceptionEvent, thrown);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35cfbba9146285d72ec53f89626fd141a4855ede"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35cfbba9146285d72ec53f89626fd141a4855ede", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/35cfbba9146285d72ec53f89626fd141a4855ede", "committedDate": "2020-07-20T22:12:31Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}, "afterCommit": {"oid": "c6786b8e03f75bf10de18da975a7fc6390ee6d98", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/c6786b8e03f75bf10de18da975a7fc6390ee6d98", "committedDate": "2020-08-05T19:14:39Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDQ1MTAz", "url": "https://github.com/mulesoft/mule/pull/9094#pullrequestreview-462045103", "createdAt": "2020-08-05T21:43:10Z", "commit": {"oid": "c6786b8e03f75bf10de18da975a7fc6390ee6d98"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMTo0MzoxMFrOG8briQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMTo0MzoxMFrOG8briQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyMTI1Nw==", "bodyText": "remove", "url": "https://github.com/mulesoft/mule/pull/9094#discussion_r466021257", "createdAt": "2020-08-05T21:43:10Z", "author": {"login": "elrodro83"}, "path": "core/src/main/java/org/mule/runtime/core/internal/processor/interceptor/AbstractCompletableInterceptorSourceCallbackAdapter.java", "diffHunk": "@@ -132,6 +132,7 @@ public AbstractCompletableInterceptorSourceCallbackAdapter(SourceInterceptorFact\n           interceptor.afterCallback(component.getLocation(), interceptionEvent, thrown);\n         } finally {\n           setContextClassLoader(currentThread, ctxClassLoader, originalTCCL);\n+          //interceptor.afterTerminated(component.getLocation(), event.getContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6786b8e03f75bf10de18da975a7fc6390ee6d98"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4477070b44ae01020a86acf92a7cf5309785255", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/a4477070b44ae01020a86acf92a7cf5309785255", "committedDate": "2020-08-06T17:46:44Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4012fe2baf2b4f74897b9100be9d61c3af70d5d4", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/4012fe2baf2b4f74897b9100be9d61c3af70d5d4", "committedDate": "2020-08-06T17:46:44Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c293aedf1a7e7203e534870ec44b8dad9806400", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/7c293aedf1a7e7203e534870ec44b8dad9806400", "committedDate": "2020-08-06T17:46:44Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc047a882d867598e5fafa16e556f5c7cf6b126", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/bbc047a882d867598e5fafa16e556f5c7cf6b126", "committedDate": "2020-08-06T17:46:44Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca355c4852108666c0c16873eaf19d8f2f68b3e4", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/ca355c4852108666c0c16873eaf19d8f2f68b3e4", "committedDate": "2020-08-06T13:19:58Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}, "afterCommit": {"oid": "bbc047a882d867598e5fafa16e556f5c7cf6b126", "author": {"user": {"login": "JuLuzzi", "name": "Julieta"}}, "url": "https://github.com/mulesoft/mule/commit/bbc047a882d867598e5fafa16e556f5c7cf6b126", "committedDate": "2020-08-06T17:46:44Z", "message": "MULE-18426: Interception API: Add a callback to source interceptor once all event contexts for an event are complete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODY0NTMz", "url": "https://github.com/mulesoft/mule/pull/9094#pullrequestreview-462864533", "createdAt": "2020-08-06T20:46:23Z", "commit": {"oid": "bbc047a882d867598e5fafa16e556f5c7cf6b126"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 579, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}