{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTUwMDQx", "number": 9182, "title": "MULE-18609: Add record count/size of the streams to FlowConstructStatistics", "bodyText": "", "createdAt": "2020-08-10T14:51:04Z", "url": "https://github.com/mulesoft/mule/pull/9182", "merged": true, "mergeCommit": {"oid": "79a343645362c77c327ec6ade1fecf9889b704a2"}, "closed": true, "closedAt": "2020-08-10T20:24:17Z", "author": {"login": "elrodro83"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8SHjogH2gAyNDY1NTUwMDQxOjIzYjczNDQ3ZmQxMzdmOTA5ZjY3YmY1NTEyZjIxMWIyMGVhOTNlNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9oDpfgFqTQ2NDU1NjIzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "23b73447fd137f909f67bf5512f211b20ea93e6f", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/23b73447fd137f909f67bf5512f211b20ea93e6f", "committedDate": "2020-08-06T16:08:05Z", "message": "MULE-18609: Add record count/size of the streams to\nFlowConstructStatistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9766d91de66ae8c628cbc811091b362752111dd4", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/9766d91de66ae8c628cbc811091b362752111dd4", "committedDate": "2020-08-06T19:26:20Z", "message": "review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTE5ODU5", "url": "https://github.com/mulesoft/mule/pull/9182#pullrequestreview-464519859", "createdAt": "2020-08-10T19:33:03Z", "commit": {"oid": "9766d91de66ae8c628cbc811091b362752111dd4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTozMzowM1rOG-cqhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTozMzowM1rOG-cqhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzNDUzNQ==", "bodyText": "It should be better to receive a Component instead of a String and do the transformation (component.getLocation().getLocation()) inside this method to be consistent with computePayloadStatisticsIfAbsent", "url": "https://github.com/mulesoft/mule/pull/9182#discussion_r468134535", "createdAt": "2020-08-10T19:33:03Z", "author": {"login": "szaffarano"}, "path": "core/src/main/java/org/mule/runtime/core/api/management/stats/AllStatistics.java", "diffHunk": "@@ -86,4 +94,36 @@ public synchronized void remove(FlowConstructStatistics stat) {\n   public FlowConstructStatistics getApplicationStatistics() {\n     return appStats;\n   }\n+\n+  /**\n+   * @return the available payload statistics for all components.\n+   * @since 4.4, 4.3.1\n+   */\n+  public Collection<PayloadStatistics> getPayloadStatistics() {\n+    return payloadStatistics.values();\n+  }\n+\n+  /**\n+   * @param component the component to get the statistics for.\n+   * @return the statistics for the provided {@code component}.\n+   * @since 4.4, 4.3.1\n+   */\n+  public PayloadStatistics computePayloadStatisticsIfAbsent(Component component) {\n+    return payloadStatistics.computeIfAbsent(component.getLocation().getLocation(),\n+                                             loc -> {\n+                                               final PayloadStatistics statistics =\n+                                                   new PayloadStatistics(loc, component.getIdentifier().toString());\n+                                               statistics.setEnabled(isEnabled());\n+                                               return statistics;\n+                                             });\n+  }\n+\n+  /**\n+   * @param componentLocation the location of the component to get the statistics for.\n+   * @return the statistics for the component with the provided {@code componentLocation}.\n+   * @since 4.4, 4.3.1\n+   */\n+  public PayloadStatistics getPayloadStatistics(String componentLocation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9766d91de66ae8c628cbc811091b362752111dd4"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTI3NzUx", "url": "https://github.com/mulesoft/mule/pull/9182#pullrequestreview-464527751", "createdAt": "2020-08-10T19:45:28Z", "commit": {"oid": "9766d91de66ae8c628cbc811091b362752111dd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTU2MjM0", "url": "https://github.com/mulesoft/mule/pull/9182#pullrequestreview-464556234", "createdAt": "2020-08-10T20:15:39Z", "commit": {"oid": "9766d91de66ae8c628cbc811091b362752111dd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 509, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}