{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MjU3MDU4", "number": 8864, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Nzo0OFrOD9fqGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Nzo0OFrOD9fqGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODA4NDA4OnYy", "diffSide": "LEFT", "path": "modules/spring-config/src/main/java/org/mule/runtime/config/internal/model/ComponentModel.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Nzo0OFrOGXBhpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo1MToyMVrOGXBpOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NTQzMQ==", "bodyText": "How did you do now with these cases? This was relying on the Type (class) to build the metadataTypeModelAdapter for the parameterAst... how does this work from now on?", "url": "https://github.com/mulesoft/mule/pull/8864#discussion_r426795431", "createdAt": "2020-05-18T17:47:48Z", "author": {"login": "gsfernandes"}, "path": "modules/spring-config/src/main/java/org/mule/runtime/config/internal/model/ComponentModel.java", "diffHunk": "@@ -485,530 +424,6 @@ public void setComponentType(TypedComponentIdentifier.ComponentType componentTyp\n     return empty();\n   }\n \n-  public void resolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    executeOnComponentTree(this, componentModel -> {\n-      componentModel.doResolveTypedComponentIdentifier(extensionModelHelper, runtimeMode);\n-    });\n-  }\n-\n-  private void doResolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    extensionModelHelper.walkToComponent(getIdentifier(), new ExtensionWalkerModelDelegate() {\n-\n-      @Override\n-      public void onConfiguration(ConfigurationModel model) {\n-        setConfigurationModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConnectionProvider(ConnectionProviderModel model) {\n-        setConnectionProviderModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onOperation(OperationModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onSource(SourceModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConstruct(ConstructModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onNestableElement(NestableElementModel model) {\n-        setNestableElementModel(model);\n-        if (model instanceof ParameterizedModel) {\n-          onParameterizedModel((ParameterizedModel) model);\n-        }\n-      }\n-\n-      private void onParameterizedModel(ParameterizedModel model) {\n-        if (runtimeMode) {\n-          handleNestedParametersWithoutPopulatingObjectTypes(ComponentModel.this, extensionModelHelper, model);\n-        } else {\n-          DslElementSyntax elementDsl = extensionModelHelper.resolveDslElementModel(model, getIdentifier());\n-          onParameterizedModel(elementDsl, model, parameterModel -> true);\n-        }\n-      }\n-\n-      private void onParameterizedModel(DslElementSyntax elementDsl, ParameterizedModel model,\n-                                        Predicate<ParameterModel> parameterModelFilter) {\n-        Multimap<ComponentIdentifier, ComponentModel> nestedComponents = getNestedComponents(ComponentModel.this);\n-\n-        List<ParameterModel> inlineGroupedParameters = model.getParameterGroupModels().stream()\n-            .filter(ParameterGroupModel::isShowInDsl)\n-            .map(group -> addInlineGroup(elementDsl, nestedComponents, group, extensionModelHelper))\n-            .flatMap(g -> g.getParameterModels().stream())\n-            .collect(toList());\n-\n-        handleNestedParameters(ComponentModel.this, ComponentModel.this.directChildrenStream()\n-            .filter(childComp -> childComp != ComponentModel.this),\n-                               nestedComponents, extensionModelHelper,\n-                               model,\n-                               parameterModel -> parameterModelFilter.test(parameterModel)\n-                                   && !inlineGroupedParameters.contains(parameterModel));\n-      }\n-\n-    });\n-\n-    // Last resort to try to find a matching metadata type for this component\n-    if (!getModel(HasStereotypeModel.class).isPresent()) {\n-      extensionModelHelper.findMetadataType(getType())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e"}, "originalPosition": 220}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NzM2OQ==", "bodyText": "I moved this here: https://github.com/mulesoft/mule/pull/8864/files#diff-343feb8864aee8603a8a65aa05f549a3R162 (ApplicationModelTypeUtils.java line 162)", "url": "https://github.com/mulesoft/mule/pull/8864#discussion_r426797369", "createdAt": "2020-05-18T17:51:21Z", "author": {"login": "elrodro83"}, "path": "modules/spring-config/src/main/java/org/mule/runtime/config/internal/model/ComponentModel.java", "diffHunk": "@@ -485,530 +424,6 @@ public void setComponentType(TypedComponentIdentifier.ComponentType componentTyp\n     return empty();\n   }\n \n-  public void resolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    executeOnComponentTree(this, componentModel -> {\n-      componentModel.doResolveTypedComponentIdentifier(extensionModelHelper, runtimeMode);\n-    });\n-  }\n-\n-  private void doResolveTypedComponentIdentifier(ExtensionModelHelper extensionModelHelper, boolean runtimeMode) {\n-    extensionModelHelper.walkToComponent(getIdentifier(), new ExtensionWalkerModelDelegate() {\n-\n-      @Override\n-      public void onConfiguration(ConfigurationModel model) {\n-        setConfigurationModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConnectionProvider(ConnectionProviderModel model) {\n-        setConnectionProviderModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onOperation(OperationModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onSource(SourceModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onConstruct(ConstructModel model) {\n-        setComponentModel(model);\n-        onParameterizedModel(model);\n-      }\n-\n-      @Override\n-      public void onNestableElement(NestableElementModel model) {\n-        setNestableElementModel(model);\n-        if (model instanceof ParameterizedModel) {\n-          onParameterizedModel((ParameterizedModel) model);\n-        }\n-      }\n-\n-      private void onParameterizedModel(ParameterizedModel model) {\n-        if (runtimeMode) {\n-          handleNestedParametersWithoutPopulatingObjectTypes(ComponentModel.this, extensionModelHelper, model);\n-        } else {\n-          DslElementSyntax elementDsl = extensionModelHelper.resolveDslElementModel(model, getIdentifier());\n-          onParameterizedModel(elementDsl, model, parameterModel -> true);\n-        }\n-      }\n-\n-      private void onParameterizedModel(DslElementSyntax elementDsl, ParameterizedModel model,\n-                                        Predicate<ParameterModel> parameterModelFilter) {\n-        Multimap<ComponentIdentifier, ComponentModel> nestedComponents = getNestedComponents(ComponentModel.this);\n-\n-        List<ParameterModel> inlineGroupedParameters = model.getParameterGroupModels().stream()\n-            .filter(ParameterGroupModel::isShowInDsl)\n-            .map(group -> addInlineGroup(elementDsl, nestedComponents, group, extensionModelHelper))\n-            .flatMap(g -> g.getParameterModels().stream())\n-            .collect(toList());\n-\n-        handleNestedParameters(ComponentModel.this, ComponentModel.this.directChildrenStream()\n-            .filter(childComp -> childComp != ComponentModel.this),\n-                               nestedComponents, extensionModelHelper,\n-                               model,\n-                               parameterModel -> parameterModelFilter.test(parameterModel)\n-                                   && !inlineGroupedParameters.contains(parameterModel));\n-      }\n-\n-    });\n-\n-    // Last resort to try to find a matching metadata type for this component\n-    if (!getModel(HasStereotypeModel.class).isPresent()) {\n-      extensionModelHelper.findMetadataType(getType())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NTQzMQ=="}, "originalCommit": {"oid": "e29ab7c90513cc7960e5d5a063ab693c1556371e"}, "originalPosition": 220}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4897, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}