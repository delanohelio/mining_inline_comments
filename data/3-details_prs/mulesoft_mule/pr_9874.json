{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNzM0NTE2", "number": 9874, "title": "MULE-18920: Support new SDK API Sources annotation", "bodyText": "", "createdAt": "2020-12-21T21:31:14Z", "url": "https://github.com/mulesoft/mule/pull/9874", "merged": true, "mergeCommit": {"oid": "8eceaac2b1422e2a1c29b1897a16eaba28bc38cc"}, "closed": true, "closedAt": "2020-12-23T00:43:32Z", "author": {"login": "ndinu"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoqjSrAFqTU1NzA3ODQ5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoxlSegFqTU1NzM4MjE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDc4NDk4", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557078498", "createdAt": "2020-12-22T13:28:46Z", "commit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzoyODo0NlrOIJ7LyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzoyODo0NlrOIJ7LyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI3Nzc2OA==", "bodyText": "remove import and fix javadocs", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547277768", "createdAt": "2020-12-22T13:28:46Z", "author": {"login": "SebaElizalde"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/resolver/SourceCallbackContextArgumentResolver.java", "diffHunk": "@@ -6,6 +6,7 @@\n  */\n package org.mule.runtime.module.extension.internal.runtime.resolver;\n \n+import static org.mule.runtime.module.extension.internal.ExtensionProperties.LEGACY_SOURCE_CALLBACK_CONTEXT_PARAM;\n import static org.mule.runtime.module.extension.internal.ExtensionProperties.SOURCE_CALLBACK_CONTEXT_PARAM;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDk2NjA4", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557096608", "createdAt": "2020-12-22T13:57:24Z", "commit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo1NzoyNFrOIJ8Ccw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzo1NzoyNFrOIJ8Ccw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI5MTc2Mw==", "bodyText": "Why was it renamed?", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547291763", "createdAt": "2020-12-22T13:57:24Z", "author": {"login": "gabrieldalborgo"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/loader/java/property/SdkSourceFactoryModelProperty.java", "diffHunk": "@@ -16,32 +17,32 @@\n  *\n  * @since 4.0\n  */\n-public final class SourceFactoryModelProperty implements ModelProperty {\n+public final class SdkSourceFactoryModelProperty implements ModelProperty {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDg0NTY0", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557084564", "createdAt": "2020-12-22T13:38:37Z", "commit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzozODozN1rOIJ7dzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNDoxMDo1M1rOIJ8dYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4MjM4Mg==", "bodyText": "is this just removing the qualification or are you actually changing the result type?", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547282382", "createdAt": "2020-12-22T13:38:37Z", "author": {"login": "marianogonzalez"}, "path": "core-tests/src/test/java/org/mule/runtime/core/internal/management/stats/PayloadStatisticsTestCase.java", "diffHunk": "@@ -786,7 +786,7 @@ public void flowProcessMediatorCollectionItems() throws Exception {\n     // set the result to a collection of something other that Result to manifest the bug\n     FlowProcessTemplate template = mock(FlowProcessTemplate.class);\n     SourceResultAdapter resultAdapter = mock(SourceResultAdapter.class);\n-    when(resultAdapter.getResult()).thenReturn(org.mule.runtime.extension.api.runtime.operation.Result.builder()\n+    when(resultAdapter.getResult()).thenReturn(Result.builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4MzY5NQ==", "bodyText": "where is the ReconnectableHeisenbergSource being readded? Aren't you missing  the new @Sources annotation here?", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547283695", "createdAt": "2020-12-22T13:41:21Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/config/ConfigurationInjectionLifecycleTestCase.java", "diffHunk": "@@ -111,7 +111,7 @@ public void start() throws MuleException {\n       KillingOperations.class, HeisenbergScopes.class, HeisenbergRouters.class})\n   @OnException(HeisenbergConnectionExceptionEnricher.class)\n   @ConnectionProviders({HeisenbergConnectionProvider.class, SecureHeisenbergConnectionProvider.class})\n-  @Sources({HeisenbergSource.class, DEARadioSource.class, AsyncHeisenbergSource.class, ReconnectableHeisenbergSource.class})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI4NzY5NA==", "bodyText": "why do you need a different key for the legacy callback? Shouldn't the adapters allow you to handle eveything as one unique code flow?", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547287694", "createdAt": "2020-12-22T13:49:32Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/resolver/SourceCallbackContextArgumentResolver.java", "diffHunk": "@@ -26,6 +27,6 @@\n \n   @Override\n   public SourceCallbackContext resolve(ExecutionContext executionContext) {\n-    return ((ExecutionContextAdapter<ComponentModel>) executionContext).getVariable(SOURCE_CALLBACK_CONTEXT_PARAM);\n+    return ((ExecutionContextAdapter<ComponentModel>) executionContext).getVariable(LEGACY_SOURCE_CALLBACK_CONTEXT_PARAM);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI5ODY1Nw==", "bodyText": "this is taking an \"all or nothing\" approach, meaning that you either have sources fully defined with the legacy API or fully defined with the new API. Add cases for sources that mix both.", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547298657", "createdAt": "2020-12-22T14:10:53Z", "author": {"login": "marianogonzalez"}, "path": "tests/test-extensions/petstore-extension/src/main/java/org/mule/test/petstore/extension/PetStoreConnector.java", "diffHunk": "@@ -28,9 +28,9 @@\n     PooledPetStoreConnectionProviderWithValidConnection.class})\n @ErrorTypes(PetstoreErrorTypeDefinition.class)\n @Sources({PetStoreSource.class, FailingPetStoreSource.class, SentientSource.class, PetAdoptionSource.class,\n-    PetStoreStreamSource.class, PetStoreListSource.class, PartialPetAdoptionSource.class, NumberPetAdoptionSource.class,\n-    ConnectedPetAdoptionSource.class, PetFailingPollingSource.class, WatermarkingPetAdoptionSource.class,\n-    PetAdoptionLimitingSource.class})\n+    PetStoreStreamSource.class, PartialPetAdoptionSource.class, ConnectedPetAdoptionSource.class, PetFailingPollingSource.class,})\n+@org.mule.sdk.api.annotation.Sources({NumberPetAdoptionSource.class, WatermarkingPetAdoptionSource.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "320578246a90b992d5379c45d6c2929b81210299"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e25a8961b56454900c0c9ffc2d5207a7801a7c3", "author": {"user": {"login": "marianogonzalez", "name": "Mariano Gonzalez"}}, "url": "https://github.com/mulesoft/mule/commit/6e25a8961b56454900c0c9ffc2d5207a7801a7c3", "committedDate": "2020-12-22T17:32:55Z", "message": "start doodling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a2a0f951b6d466e0128d2e06d7cb1d48ea4045", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/42a2a0f951b6d466e0128d2e06d7cb1d48ea4045", "committedDate": "2020-12-22T17:32:55Z", "message": "keep doodling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73c15bb260da2086b10fdeec9763f5b8e833f0d8", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/73c15bb260da2086b10fdeec9763f5b8e833f0d8", "committedDate": "2020-12-22T17:41:18Z", "message": "progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d0a54abf82f8b329a0d9d24aafb837ae354cdcc", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/3d0a54abf82f8b329a0d9d24aafb837ae354cdcc", "committedDate": "2020-12-22T17:57:26Z", "message": "progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "252ba6f60509045dbf81cb2ab7cd9997e5cfd206", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/252ba6f60509045dbf81cb2ab7cd9997e5cfd206", "committedDate": "2020-12-22T17:57:26Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a570acead20c67c388284eb35e96e286f1f8007f", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/a570acead20c67c388284eb35e96e286f1f8007f", "committedDate": "2020-12-22T17:57:26Z", "message": "fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2f7d1bf1846e2b2b9311696c45f260c7f7cc05e", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/a2f7d1bf1846e2b2b9311696c45f260c7f7cc05e", "committedDate": "2020-12-22T17:57:26Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70609f884202bb0a2dbe9a7ab8611c6fe598995c", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/70609f884202bb0a2dbe9a7ab8611c6fe598995c", "committedDate": "2020-12-22T17:57:26Z", "message": "refact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f2937792f0dd8338772fd1ae0fb57b8e9986c4f", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/8f2937792f0dd8338772fd1ae0fb57b8e9986c4f", "committedDate": "2020-12-22T17:57:26Z", "message": "more changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "097039888c4a6c2e3b4d28d291be89d2ed79063c", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/097039888c4a6c2e3b4d28d291be89d2ed79063c", "committedDate": "2020-12-22T17:57:26Z", "message": "Adds requested changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aed0bc35e953e93974d1e189508909fcf2a45345", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/aed0bc35e953e93974d1e189508909fcf2a45345", "committedDate": "2020-12-22T17:57:26Z", "message": "Adds requested changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjczMDU0", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557273054", "createdAt": "2020-12-22T18:14:16Z", "commit": {"oid": "b492052e73715adedefa3530d85ed2a2dca10747"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODoxNDoxNlrOIKEP-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODoxNzoyNFrOIKEcmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyNjI5Nw==", "bodyText": "LegacySourceCallbackContextAdapterAdapter -> Class has double Adapter suffix.", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547426297", "createdAt": "2020-12-22T18:14:16Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/resolver/SourceCallbackContextArgumentResolver.java", "diffHunk": "@@ -27,6 +28,7 @@\n \n   @Override\n   public SourceCallbackContext resolve(ExecutionContext executionContext) {\n-    return ((ExecutionContextAdapter<ComponentModel>) executionContext).getVariable(LEGACY_SOURCE_CALLBACK_CONTEXT_PARAM);\n+    return new LegacySourceCallbackContextAdapterAdapter(((ExecutionContextAdapter<ComponentModel>) executionContext)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b492052e73715adedefa3530d85ed2a2dca10747"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyOTUzMQ==", "bodyText": "This is assuming that a legacy callback will always be obtained and should always be adapted. Leave this read to function when the new API so that we don't have to touch it again when the time comes", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547429531", "createdAt": "2020-12-22T18:17:24Z", "author": {"login": "marianogonzalez"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/resolver/SourceCallbackContextArgumentResolver.java", "diffHunk": "@@ -27,6 +28,7 @@\n \n   @Override\n   public SourceCallbackContext resolve(ExecutionContext executionContext) {\n-    return ((ExecutionContextAdapter<ComponentModel>) executionContext).getVariable(LEGACY_SOURCE_CALLBACK_CONTEXT_PARAM);\n+    return new LegacySourceCallbackContextAdapterAdapter(((ExecutionContextAdapter<ComponentModel>) executionContext)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b492052e73715adedefa3530d85ed2a2dca10747"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3Mjc1NTI1", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557275525", "createdAt": "2020-12-22T18:18:30Z", "commit": {"oid": "cfebbbbdf4221cb825ed4e8e9840562a7632d547"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODoxODozMFrOIKEhEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODoxODozMFrOIKEhEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQzMDY3NQ==", "bodyText": "add a comment explaining that you're intentionally mixing annotations in order to test all code flows", "url": "https://github.com/mulesoft/mule/pull/9874#discussion_r547430675", "createdAt": "2020-12-22T18:18:30Z", "author": {"login": "marianogonzalez"}, "path": "tests/test-extensions/heisenberg-extension/src/main/java/org/mule/test/heisenberg/extension/HeisenbergSource.java", "diffHunk": "@@ -135,7 +135,7 @@\n   @NullSafe\n   private Map<String, Object> debtProperties;\n \n-  @Parameter\n+  @org.mule.sdk.api.annotation.param.Parameter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfebbbbdf4221cb825ed4e8e9840562a7632d547"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfebbbbdf4221cb825ed4e8e9840562a7632d547", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/cfebbbbdf4221cb825ed4e8e9840562a7632d547", "committedDate": "2020-12-22T16:59:27Z", "message": "Adds requested changes"}, "afterCommit": {"oid": "aed0bc35e953e93974d1e189508909fcf2a45345", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/aed0bc35e953e93974d1e189508909fcf2a45345", "committedDate": "2020-12-22T17:57:26Z", "message": "Adds requested changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1b05b8ad53f23a0d28f6a76f5e7d50302b1443e", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/d1b05b8ad53f23a0d28f6a76f5e7d50302b1443e", "committedDate": "2020-12-22T18:59:18Z", "message": "Adds requested changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MzAxNjY3", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557301667", "createdAt": "2020-12-22T19:04:21Z", "commit": {"oid": "d1b05b8ad53f23a0d28f6a76f5e7d50302b1443e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b09fa639e7a5e904d8c6e8f3e2f2dd5676f5d7", "author": {"user": {"login": "ndinu", "name": null}}, "url": "https://github.com/mulesoft/mule/commit/97b09fa639e7a5e904d8c6e8f3e2f2dd5676f5d7", "committedDate": "2020-12-22T21:19:29Z", "message": "Fix problem with rebase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MzgyMTY1", "url": "https://github.com/mulesoft/mule/pull/9874#pullrequestreview-557382165", "createdAt": "2020-12-22T21:40:17Z", "commit": {"oid": "97b09fa639e7a5e904d8c6e8f3e2f2dd5676f5d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1048, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}