{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NjE0MTUx", "number": 9403, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1MzozMFrOEjNMUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1ODoyOFrOEjNUdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUxNzYxOnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1MzozMFrOHRbvWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1MzozMFrOHRbvWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MjMzMA==", "bodyText": "use info or debug.", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488042330", "createdAt": "2020-09-14T15:53:30Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUxODQyOnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1Mzo0NFrOHRbv8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1Mzo0NFrOHRbv8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MjQ4MA==", "bodyText": "use info or debug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488042480", "createdAt": "2020-09-14T15:53:44Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUxOTQ0OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDowMFrOHRbwqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDowMFrOHRbwqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MjY2Ng==", "bodyText": "use info or debug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488042666", "createdAt": "2020-09-14T15:54:00Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyMDE4OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDoxMVrOHRbxNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDoxMVrOHRbxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MjgwNQ==", "bodyText": "use info or debug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488042805", "createdAt": "2020-09-14T15:54:11Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));\n+        deployedArtifacts.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Undeployment success: %s\", artifactName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyMTIxOnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDoyN1rOHRbx4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDoyN1rOHRbx4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0Mjk3Ng==", "bodyText": "use info or debug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488042976", "createdAt": "2020-09-14T15:54:27Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));\n+        deployedArtifacts.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Undeployment success: %s\", artifactName));\n+        deployedArtifacts.remove(artifactName);\n+      }\n+    });\n+\n+    LOGGER.info(\"Registering domain deployment listener ...\");\n+    deploymentService.addDomainDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Deployment success:  %s\", artifactName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyMjA4OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDozNlrOHRbyZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDozNlrOHRbyZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MzEwOQ==", "bodyText": "info or de bug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488043109", "createdAt": "2020-09-14T15:54:36Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));\n+        deployedArtifacts.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Undeployment success: %s\", artifactName));\n+        deployedArtifacts.remove(artifactName);\n+      }\n+    });\n+\n+    LOGGER.info(\"Registering domain deployment listener ...\");\n+    deploymentService.addDomainDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Deployment success:  %s\", artifactName));\n+        deployedDomains.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Undeployment success: %s\", artifactName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyMjk4OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDo0OFrOHRby9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NDo0OFrOHRby9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0MzI1NQ==", "bodyText": "info or debug", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488043255", "createdAt": "2020-09-14T15:54:48Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));\n+        deployedArtifacts.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Undeployment success: %s\", artifactName));\n+        deployedArtifacts.remove(artifactName);\n+      }\n+    });\n+\n+    LOGGER.info(\"Registering domain deployment listener ...\");\n+    deploymentService.addDomainDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Deployment success:  %s\", artifactName));\n+        deployedDomains.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Undeployment success: %s\", artifactName));\n+        deployedDomains.remove(artifactName);\n+      }\n+    });\n+  }\n+\n+  @Override\n+  public void stop() throws MuleException {\n+    stopServerQuietly();\n+  }\n+\n+  private void stopServerQuietly() {\n+    if (serverSocket != null) {\n+      try {\n+        LOGGER.warn(\"Stopping DeploymentServerSocket ...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyNjAyOnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NToyOVrOHRb06g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NToyOVrOHRb06g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0Mzc1NA==", "bodyText": "use a warning for debugging purposes in the catch block", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488043754", "createdAt": "2020-09-14T15:55:29Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {\n+\n+  private static final Logger LOGGER = getLogger(DeploymentNotifierPlugin.class);\n+  private static String DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY = \"mule.test.deployment.server.socket.port\";\n+  private static int SERVER_PORT = parseInt(getProperty(DEPLOYMENT_SERVER_SOCKET_PORT_PROPERTY));\n+\n+  protected File directory;\n+\n+  @Inject\n+  private DeploymentService deploymentService;\n+\n+  private DeploymentServerSocket serverSocket;\n+\n+  private Set<String> deployedArtifacts = synchronizedSet(new HashSet<>());\n+\n+  private Set<String> deployedDomains = synchronizedSet(new HashSet<>());\n+\n+  @Override\n+  public void setWorkingDirectory(File directory) {\n+    this.directory = directory;\n+  }\n+\n+  @Override\n+  public boolean isDisabledOnEnvironment() {\n+    return false;\n+  }\n+\n+  @Override\n+  public void dispose() {\n+\n+  }\n+\n+  @Override\n+  public void initialise() throws InitialisationException {\n+    serverSocket = new DeploymentServerSocket(SERVER_PORT, this);\n+  }\n+\n+  @Override\n+  public void start() throws MuleException {\n+    try {\n+      LOGGER.warn(\"Starting DeploymentServerSocket...\");\n+      serverSocket.start();\n+\n+    } catch (IOException e) {\n+      stopServerQuietly();\n+      throw new RuntimeException(e);\n+    }\n+\n+    LOGGER.warn(\"Registering deployment listener ...\");\n+    deploymentService.addDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Deployment success:  %s\", artifactName));\n+        deployedArtifacts.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"Undeployment success: %s\", artifactName));\n+        deployedArtifacts.remove(artifactName);\n+      }\n+    });\n+\n+    LOGGER.info(\"Registering domain deployment listener ...\");\n+    deploymentService.addDomainDeploymentListener(new DeploymentListener() {\n+\n+      @Override\n+      public void onDeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Deployment success:  %s\", artifactName));\n+        deployedDomains.add(artifactName);\n+      }\n+\n+      @Override\n+      public void onUndeploymentSuccess(String artifactName) {\n+        LOGGER.warn(format(\"[DOMAIN] Undeployment success: %s\", artifactName));\n+        deployedDomains.remove(artifactName);\n+      }\n+    });\n+  }\n+\n+  @Override\n+  public void stop() throws MuleException {\n+    stopServerQuietly();\n+  }\n+\n+  private void stopServerQuietly() {\n+    if (serverSocket != null) {\n+      try {\n+        LOGGER.warn(\"Stopping DeploymentServerSocket ...\");\n+        serverSocket.stop();\n+      } catch (Exception e) {\n+        // Do nothing.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 120}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUyOTM0OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentState.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NjoxNVrOHRb24A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NjoxNVrOHRb24A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NDI1Ng==", "bodyText": "java docs", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488044256", "createdAt": "2020-09-14T15:56:15Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentState.java", "diffHunk": "@@ -0,0 +1,14 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+public interface DeploymentState {\n+\n+  boolean isDeployed(String artifactName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUzMDEyOnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NjoyNVrOHRb3VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NjoyNVrOHRb3VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NDM3Mg==", "bodyText": "java docs", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488044372", "createdAt": "2020-09-14T15:56:25Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentNotifierPlugin.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.Integer.parseInt;\n+import static java.lang.String.format;\n+import static java.lang.System.getProperty;\n+import static java.util.Collections.synchronizedSet;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import com.mulesoft.mule.runtime.module.plugin.api.MulePlugin;\n+import org.mule.runtime.api.exception.MuleException;\n+import org.mule.runtime.api.lifecycle.InitialisationException;\n+import org.mule.runtime.module.deployment.api.DeploymentListener;\n+import org.mule.runtime.module.deployment.api.DeploymentService;\n+import org.slf4j.Logger;\n+\n+import javax.inject.Inject;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+public class DeploymentNotifierPlugin implements MulePlugin, DeploymentState {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUzMzE2OnYy", "diffSide": "RIGHT", "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentServerSocket.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NzowOVrOHRb5PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NzowOVrOHRb5PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NDg2MA==", "bodyText": "java docs. Keep info or debug in logs when information about the process is provided.", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488044860", "createdAt": "2020-09-14T15:57:09Z", "author": {"login": "fsgonz"}, "path": "tests/deployment-notifier-plugin/src/main/java/org/mule/test/plugin/DeploymentServerSocket.java", "diffHunk": "@@ -0,0 +1,153 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.plugin;\n+\n+import static java.lang.String.format;\n+import static java.net.InetAddress.getByName;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.io.PrintWriter;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.SocketException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.slf4j.Logger;\n+\n+public class DeploymentServerSocket {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzUzODQ0OnYy", "diffSide": "RIGHT", "path": "tests/infrastructure/src/main/java/org/mule/test/infrastructure/client/deployment/DeploymentClient.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1ODoyOFrOHRb8sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1ODoyOFrOHRb8sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NTc0Nw==", "bodyText": "java docs", "url": "https://github.com/mulesoft/mule/pull/9403#discussion_r488045747", "createdAt": "2020-09-14T15:58:28Z", "author": {"login": "fsgonz"}, "path": "tests/infrastructure/src/main/java/org/mule/test/infrastructure/client/deployment/DeploymentClient.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+package org.mule.test.infrastructure.client.deployment;\n+\n+import static java.lang.Boolean.parseBoolean;\n+import static java.lang.String.format;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+import org.slf4j.Logger;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.io.PrintWriter;\n+import java.net.Socket;\n+\n+public class DeploymentClient {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74eb0d01a8b952892975af9f6a0e7cb9c5a9afa9"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4707, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}