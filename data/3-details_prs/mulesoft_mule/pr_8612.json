{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MjUwOTY3", "number": 8612, "title": "MULE-17994: Allow policy dispose to finish inflight events", "bodyText": "", "createdAt": "2020-01-28T21:55:38Z", "url": "https://github.com/mulesoft/mule/pull/8612", "merged": true, "mergeCommit": {"oid": "ba20b14051015e0b48debb98cee001e85a13dd64"}, "closed": true, "closedAt": "2020-01-29T20:52:59Z", "author": {"login": "elrodro83"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-8MvLgFqTM0OTgyMTAyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_MT9OgFqTM1MDQxNjE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODIxMDI4", "url": "https://github.com/mulesoft/mule/pull/8612#pullrequestreview-349821028", "createdAt": "2020-01-29T01:51:05Z", "commit": {"oid": "34a2ff14e8a6a322910ea99cdad31925a917557f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMTo1MTowNVrOFi6c7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjowNDowNlrOFi6oPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1MzU4MQ==", "bodyText": "Any reason to have this set?", "url": "https://github.com/mulesoft/mule/pull/8612#discussion_r372153581", "createdAt": "2020-01-29T01:51:05Z", "author": {"login": "balbifm"}, "path": "core/src/main/java/org/mule/runtime/core/internal/policy/DefaultPolicyManager.java", "diffHunk": "@@ -92,27 +105,31 @@ public static boolean isNoPolicyOperation(OperationPolicy policy) {\n \n   private Registry registry;\n \n+  private CompositePolicyFactory compositePolicyFactory = new CompositePolicyFactory();\n+\n   private final AtomicBoolean isPoliciesAvailable = new AtomicBoolean(false);\n \n-  private final Executor syncExecutor = Runnable::run;\n+  private final ReferenceQueue<DeferredDisposable> stalePoliciesQueue = new ReferenceQueue<>();\n+\n+  private final Set<WeakReference<DeferredDisposable>> activePolicies = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34a2ff14e8a6a322910ea99cdad31925a917557f"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1NjQ3Nw==", "bodyText": "Commented code", "url": "https://github.com/mulesoft/mule/pull/8612#discussion_r372156477", "createdAt": "2020-01-29T02:04:06Z", "author": {"login": "balbifm"}, "path": "core/src/main/java/org/mule/runtime/core/internal/util/rx/TransactionAwareFluxSinkSupplier.java", "diffHunk": "@@ -36,6 +42,10 @@ public TransactionAwareFluxSinkSupplier(Supplier<FluxSink<T>> sinkFactory, FluxS\n \n   @Override\n   public FluxSink<T> get() {\n+    // if (disposed) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34a2ff14e8a6a322910ea99cdad31925a917557f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4193801c0f9cbb307df59d239c667a13909526e", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/d4193801c0f9cbb307df59d239c667a13909526e", "committedDate": "2020-01-29T12:37:36Z", "message": "MULE-17994: Allow policy dispose to finish inflight events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e0ddbae336609adde0138f9a46fcd1e15b483f", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/40e0ddbae336609adde0138f9a46fcd1e15b483f", "committedDate": "2020-01-29T12:37:37Z", "message": "format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5d2d7ebe010f22d925b77fc0898390d2308c763", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/f5d2d7ebe010f22d925b77fc0898390d2308c763", "committedDate": "2020-01-29T12:37:38Z", "message": "all tests!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "052166866eccf7687bfb7e1a61ff2632ea34ab44", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/052166866eccf7687bfb7e1a61ff2632ea34ab44", "committedDate": "2020-01-29T12:37:39Z", "message": "no check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b21bf3798e590744609e4215a1687b7004bc33cc", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/b21bf3798e590744609e4215a1687b7004bc33cc", "committedDate": "2020-01-29T12:37:40Z", "message": "self-review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d68fb89df03805bda1a8844ef94b078901b1527e", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/d68fb89df03805bda1a8844ef94b078901b1527e", "committedDate": "2020-01-29T12:37:41Z", "message": "more self-review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "576768408c3bd3f54dfca712fdd110b1f60317dd", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/576768408c3bd3f54dfca712fdd110b1f60317dd", "committedDate": "2020-01-29T12:38:54Z", "message": "review"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b14d8602a676b19e4d775e059194bb0644811bdb", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/b14d8602a676b19e4d775e059194bb0644811bdb", "committedDate": "2020-01-29T12:37:21Z", "message": "review"}, "afterCommit": {"oid": "576768408c3bd3f54dfca712fdd110b1f60317dd", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/576768408c3bd3f54dfca712fdd110b1f60317dd", "committedDate": "2020-01-29T12:38:54Z", "message": "review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMDg2ODIw", "url": "https://github.com/mulesoft/mule/pull/8612#pullrequestreview-350086820", "createdAt": "2020-01-29T13:00:29Z", "commit": {"oid": "576768408c3bd3f54dfca712fdd110b1f60317dd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03bfea1ae0e7c35b0fb94d897d5332e6edb3007b", "author": {"user": {"login": "elrodro83", "name": "Rodrigo Merino"}}, "url": "https://github.com/mulesoft/mule/commit/03bfea1ae0e7c35b0fb94d897d5332e6edb3007b", "committedDate": "2020-01-29T19:43:37Z", "message": "analyze flaky"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNDE2MTUw", "url": "https://github.com/mulesoft/mule/pull/8612#pullrequestreview-350416150", "createdAt": "2020-01-29T20:52:49Z", "commit": {"oid": "03bfea1ae0e7c35b0fb94d897d5332e6edb3007b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1381, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}