{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMDA4MzM3", "number": 9865, "title": "CMTS-140: MetadataKeys and ValueProviders should preserver order of v\u2026", "bodyText": "\u2026alues from connector's resolver", "createdAt": "2020-12-17T17:16:05Z", "url": "https://github.com/mulesoft/mule/pull/9865", "merged": true, "mergeCommit": {"oid": "2092fb5eca705f4da20bd3153ec4bf9588d6781f"}, "closed": true, "closedAt": "2020-12-19T02:11:56Z", "author": {"login": "gsfernandes"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnGwUEgH2gAyNTQyMDA4MzM3Ojc1ZjgyNzY2MmEwYTBlZjgwMmE4ZDAwNmQ2OTkwYmJiNDhiNmY1MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnWqHuAFqTU1NTQxOTQyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75f827662a0a0ef802a8d006d6990bbb48b6f522", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/75f827662a0a0ef802a8d006d6990bbb48b6f522", "committedDate": "2020-12-17T17:12:29Z", "message": "CMTS-140: MetadataKeys and ValueProviders should preserver order of values from connector's resolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2ab598ad17fd9425d279ee45169c8a9b5f01ab8", "author": {"user": {"login": "gsfernandes", "name": "Guillermo Fernandes"}}, "url": "https://github.com/mulesoft/mule/commit/f2ab598ad17fd9425d279ee45169c8a9b5f01ab8", "committedDate": "2020-12-17T17:15:48Z", "message": "Self review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MjUzMTc1", "url": "https://github.com/mulesoft/mule/pull/9865#pullrequestreview-555253175", "createdAt": "2020-12-18T08:02:32Z", "commit": {"oid": "f2ab598ad17fd9425d279ee45169c8a9b5f01ab8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwODowMjozMlrOIIWzJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwODowMjozMlrOIIWzJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYzMzA2MQ==", "bodyText": "I don't think this is correct. Yes, once the LinkedHashSet is created, the order will be preserved, but if the ValueProvider returns a plain HashSet, results will be in a different order every time.\nShouldn't we sort the results from the valueSet too? Just in case the VP does not return an ordered set?\nMaybe this is like this by design and we want to keep the order of the results only if the VP wants them in order. Otherwise, we do not care.", "url": "https://github.com/mulesoft/mule/pull/9865#discussion_r545633061", "createdAt": "2020-12-18T08:02:32Z", "author": {"login": "lucianoRM"}, "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/value/ValueProviderMediator.java", "diffHunk": "@@ -156,7 +159,7 @@ public ValueProviderMediator(T containerModel, Supplier<MuleContext> muleContext\n     return valueSet.stream()\n         .map(option -> cloneAndEnrichValue(option, parameters))\n         .map(ValueBuilder::build)\n-        .collect(toSet());\n+        .collect(toCollection(LinkedHashSet::new));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2ab598ad17fd9425d279ee45169c8a9b5f01ab8"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDE5NDI3", "url": "https://github.com/mulesoft/mule/pull/9865#pullrequestreview-555419427", "createdAt": "2020-12-18T11:44:12Z", "commit": {"oid": "f2ab598ad17fd9425d279ee45169c8a9b5f01ab8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1046, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}