{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3OTQxMTc4", "number": 371, "title": "Add getTenant operation to TenantManager.", "bodyText": "This pull request add getTenant to the TenantManager class. I've added the relevant unit tests to FirebaseUserManagerTest (based off of the getUser unit tests). This is part of the initiative to adding multi-tenancy support (see issue #332).\nREST API: https://identitytoolkit.googleapis.com/$discovery/rest?version=v2", "createdAt": "2020-02-20T19:47:26Z", "url": "https://github.com/firebase/firebase-admin-java/pull/371", "merged": true, "mergeCommit": {"oid": "c3ef9729e3ee06a21f77eb73b35acd071a6359e4"}, "closed": true, "closedAt": "2020-02-28T20:54:46Z", "author": {"login": "micahstairs"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGRwRCAFqTM2MjIzMTQ3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcI1XjJAH2gAyMzc3OTQxMTc4OjczMGRjMTkxMjY5MDgxNTljYzAyZTMxOGVlZDY2MDBiMDk5ZmQwMDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMjMxNDcw", "url": "https://github.com/firebase/firebase-admin-java/pull/371#pullrequestreview-362231470", "createdAt": "2020-02-20T21:01:55Z", "commit": {"oid": "e3b818ffc5722ee595d8187357bbf76bd2b6b043"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMTowMTo1NVrOFsjE_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMToxMDoxNlrOFsjSNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1NjM4Mg==", "bodyText": "I think getTenant is descriptive enough. We have several different ways of fetching user accounts (by UID, by email etc), but we don't have that requirement here.", "url": "https://github.com/firebase/firebase-admin-java/pull/371#discussion_r382256382", "createdAt": "2020-02-20T21:01:55Z", "author": {"login": "hiranya911"}, "path": "src/main/java/com/google/firebase/auth/FirebaseUserManager.java", "diffHunk": "@@ -226,6 +228,16 @@ UserImportResult importUsers(UserImportRequest request) throws FirebaseAuthExcep\n     return new UserImportResult(request.getUsersCount(), response);\n   }\n \n+  Tenant getTenantById(String tenantId) throws FirebaseAuthException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b818ffc5722ee595d8187357bbf76bd2b6b043"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1NzQxNQ==", "bodyText": "This doesn't quite look right. The URL path should be something like v2/projects/{projectsId}/tenants/{tenantsId}. That's what we use in other SDKs, and also what's listed in the auto-generated discovery doc.", "url": "https://github.com/firebase/firebase-admin-java/pull/371#discussion_r382257415", "createdAt": "2020-02-20T21:04:30Z", "author": {"login": "hiranya911"}, "path": "src/main/java/com/google/firebase/auth/FirebaseUserManager.java", "diffHunk": "@@ -226,6 +228,16 @@ UserImportResult importUsers(UserImportRequest request) throws FirebaseAuthExcep\n     return new UserImportResult(request.getUsersCount(), response);\n   }\n \n+  Tenant getTenantById(String tenantId) throws FirebaseAuthException {\n+    GenericUrl url = new GenericUrl(tenantMgtBaseUrl + \"/tenants:get\");\n+    url.put(\"name\", tenantId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b818ffc5722ee595d8187357bbf76bd2b6b043"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1OTc2NA==", "bodyText": "I believe this endpoint sends a 404 (or similar error response) when the tenant is not found. Lets update the test case accordingly. See https://github.com/firebase/firebase-admin-go/blob/e088f55036154f0cccf661992f854abd8fb1333f/auth/tenant_mgt_test.go#L1096-L1100", "url": "https://github.com/firebase/firebase-admin-java/pull/371#discussion_r382259764", "createdAt": "2020-02-20T21:10:16Z", "author": {"login": "hiranya911"}, "path": "src/test/java/com/google/firebase/auth/FirebaseUserManagerTest.java", "diffHunk": "@@ -430,6 +430,28 @@ public void testImportUsersLargeList() {\n     }\n   }\n \n+  @Test\n+  public void testGetTenant() throws Exception {\n+    TestResponseInterceptor interceptor = initializeAppForUserManagement(\n+        TestUtils.loadResource(\"getTenant.json\"));\n+    Tenant tenant = FirebaseAuth.getInstance().getTenantManager().getTenantAsync(\"TENANT_1\").get();\n+    checkTenant(tenant, \"TENANT_1\");\n+    checkRequestHeaders(interceptor);\n+  }\n+\n+  @Test\n+  public void testGetTenantWithNotFoundError() throws Exception {\n+    initializeAppForUserManagement(\"{}\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b818ffc5722ee595d8187357bbf76bd2b6b043"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTIyNTcz", "url": "https://github.com/firebase/firebase-admin-java/pull/371#pullrequestreview-365922573", "createdAt": "2020-02-27T19:06:40Z", "commit": {"oid": "37d8d5ef1b70767392b5beef498bff5d7a467dfc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOTowNjo0MFrOFvdl3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOToxMDoyMlrOFvdtKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxMjIyMA==", "bodyText": "Nit: Define the URL prefix (up to the /tenants portion) in a constant.", "url": "https://github.com/firebase/firebase-admin-java/pull/371#discussion_r385312220", "createdAt": "2020-02-27T19:06:40Z", "author": {"login": "hiranya911"}, "path": "src/test/java/com/google/firebase/auth/FirebaseUserManagerTest.java", "diffHunk": "@@ -437,19 +437,23 @@ public void testGetTenant() throws Exception {\n     Tenant tenant = FirebaseAuth.getInstance().getTenantManager().getTenantAsync(\"TENANT_1\").get();\n     checkTenant(tenant, \"TENANT_1\");\n     checkRequestHeaders(interceptor);\n+    checkUrl(interceptor,\n+        \"https://identitytoolkit.googleapis.com/v2/projects/test-project-id/tenants/TENANT_1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37d8d5ef1b70767392b5beef498bff5d7a467dfc"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNDA4OA==", "bodyText": "Compare with https://github.com/firebase/firebase-admin-go/blob/e088f55036154f0cccf661992f854abd8fb1333f/auth/tenant_mgt_test.go#L1151-L1161", "url": "https://github.com/firebase/firebase-admin-java/pull/371#discussion_r385314088", "createdAt": "2020-02-27T19:10:22Z", "author": {"login": "hiranya911"}, "path": "src/test/java/com/google/firebase/auth/FirebaseUserManagerTest.java", "diffHunk": "@@ -430,6 +430,32 @@ public void testImportUsersLargeList() {\n     }\n   }\n \n+  @Test\n+  public void testGetTenant() throws Exception {\n+    TestResponseInterceptor interceptor = initializeAppForUserManagement(\n+        TestUtils.loadResource(\"getTenant.json\"));\n+    Tenant tenant = FirebaseAuth.getInstance().getTenantManager().getTenantAsync(\"TENANT_1\").get();\n+    checkTenant(tenant, \"TENANT_1\");\n+    checkRequestHeaders(interceptor);\n+    checkUrl(interceptor,\n+        \"https://identitytoolkit.googleapis.com/v2/projects/test-project-id/tenants/TENANT_1\");\n+  }\n+\n+  @Test\n+  public void testGetTenantWithNotFoundError() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37d8d5ef1b70767392b5beef498bff5d7a467dfc"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTk3NzI0", "url": "https://github.com/firebase/firebase-admin-java/pull/371#pullrequestreview-366597724", "createdAt": "2020-02-28T18:28:11Z", "commit": {"oid": "8a733cfa84eb8ea956a1c31bdc8d95f8051b00a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NjEzOTM4", "url": "https://github.com/firebase/firebase-admin-java/pull/371#pullrequestreview-366613938", "createdAt": "2020-02-28T18:55:51Z", "commit": {"oid": "8a733cfa84eb8ea956a1c31bdc8d95f8051b00a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a733cfa84eb8ea956a1c31bdc8d95f8051b00a1", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/8a733cfa84eb8ea956a1c31bdc8d95f8051b00a1", "committedDate": "2020-02-28T13:10:17Z", "message": "Update javadoc comment."}, "afterCommit": {"oid": "3695fcd1afcbc59e1d569200aa8db80afcdedbd6", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/3695fcd1afcbc59e1d569200aa8db80afcdedbd6", "committedDate": "2020-02-28T19:06:46Z", "message": "Update javadoc comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88b17a7b199f37707ca6e720b41f3cbffb98d690", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/88b17a7b199f37707ca6e720b41f3cbffb98d690", "committedDate": "2020-02-28T19:36:25Z", "message": "Add getTenant operation to TenantManager."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "546f93c44b01f22bf495a651491167ec93e22c93", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/546f93c44b01f22bf495a651491167ec93e22c93", "committedDate": "2020-02-28T19:36:34Z", "message": "Fix merging of deleteTenant changes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85f3e5a97d7cb949f5c3111d9443d7d260603013", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/85f3e5a97d7cb949f5c3111d9443d7d260603013", "committedDate": "2020-02-28T19:36:34Z", "message": "Make unit test return 404 error when there is no tenant to get."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "968893bf0709c77a7d2f5fd6afd4d0b040a6f120", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/968893bf0709c77a7d2f5fd6afd4d0b040a6f120", "committedDate": "2020-02-28T19:36:34Z", "message": "Update javadoc comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1886ba8db4d0995e3d3cd127fa4dbead6979e0fd", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/1886ba8db4d0995e3d3cd127fa4dbead6979e0fd", "committedDate": "2020-02-28T19:36:34Z", "message": "Clean up after interactive rebase."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcc32672d1da72e70d46ac577c8be6ddc91e6fcf", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/fcc32672d1da72e70d46ac577c8be6ddc91e6fcf", "committedDate": "2020-02-28T19:40:54Z", "message": "Fix merge conflict."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "978772b65c128fdb00ab23c79a91cd51e8cbe63e", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/978772b65c128fdb00ab23c79a91cd51e8cbe63e", "committedDate": "2020-02-28T19:19:38Z", "message": "Clean up after interactive rebase."}, "afterCommit": {"oid": "fcc32672d1da72e70d46ac577c8be6ddc91e6fcf", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/fcc32672d1da72e70d46ac577c8be6ddc91e6fcf", "committedDate": "2020-02-28T19:40:54Z", "message": "Fix merge conflict."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "730dc19126908159cc02e318eed6600b099fd009", "author": {"user": {"login": "micahstairs", "name": "Micah Stairs"}}, "url": "https://github.com/firebase/firebase-admin-java/commit/730dc19126908159cc02e318eed6600b099fd009", "committedDate": "2020-02-28T19:48:10Z", "message": "Fix merge conflicts one last time."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2826, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}