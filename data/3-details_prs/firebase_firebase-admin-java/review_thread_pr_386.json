{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2Njk2ODQw", "number": 386, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTo0MzoxM1rODtt49A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTo0Nzo0OFrODtt-uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MjY0MzcyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTo0MzoxM1rOF_TuCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwMTowMDoxMFrOGABnsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyNzY4OA==", "bodyText": "I think this can remain private now.", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r401927688", "createdAt": "2020-04-01T21:43:13Z", "author": {"login": "hiranya911"}, "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "diffHunk": "@@ -1086,7 +1086,7 @@ public T get() {\n         });\n   }\n \n-  private void checkNotDestroyed() {\n+  void checkNotDestroyed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY3OTcyOA==", "bodyText": "Done.", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r402679728", "createdAt": "2020-04-03T01:00:10Z", "author": {"login": "micahstairs"}, "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "diffHunk": "@@ -1086,7 +1086,7 @@ public T get() {\n         });\n   }\n \n-  private void checkNotDestroyed() {\n+  void checkNotDestroyed() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyNzY4OA=="}, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MjY0NTM1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTo0Mzo0OVrOF_TvBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwMDo1OTo1OVrOGABnhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyNzk0Mg==", "bodyText": "Make this just final void?", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r401927942", "createdAt": "2020-04-01T21:43:49Z", "author": {"login": "hiranya911"}, "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "diffHunk": "@@ -1095,9 +1095,13 @@ private void checkNotDestroyed() {\n     }\n   }\n \n-  void destroy() {\n+  protected void destroy() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY3OTY4NQ==", "bodyText": "Done.", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r402679685", "createdAt": "2020-04-03T00:59:59Z", "author": {"login": "micahstairs"}, "path": "src/main/java/com/google/firebase/auth/AbstractFirebaseAuth.java", "diffHunk": "@@ -1095,9 +1095,13 @@ private void checkNotDestroyed() {\n     }\n   }\n \n-  void destroy() {\n+  protected void destroy() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyNzk0Mg=="}, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MjY1ODQ5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/google/firebase/auth/FirebaseAuth.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTo0Nzo0OFrOF_T2hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwMDo1OTo1MVrOGABnYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyOTg2Mg==", "bodyText": "Set this to true in the Supplier.get() method (in the FirebaseAuth constructor). That method gets further wrapped in a threadSafeMemoize which provides the necessary locking around it.", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r401929862", "createdAt": "2020-04-01T21:47:48Z", "author": {"login": "hiranya911"}, "path": "src/main/java/com/google/firebase/auth/FirebaseAuth.java", "diffHunk": "@@ -53,7 +57,12 @@ public TenantManager get() {\n   }\n \n   public TenantManager getTenantManager() {\n-    return tenantManager.get();\n+    TenantManager suppliedTenantManager;\n+    synchronized (lock) {\n+      suppliedTenantManager = tenantManager.get();\n+      tenantManagerCreated.set(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY3OTY1MA==", "bodyText": "Oh great idea! This looks much cleaner.", "url": "https://github.com/firebase/firebase-admin-java/pull/386#discussion_r402679650", "createdAt": "2020-04-03T00:59:51Z", "author": {"login": "micahstairs"}, "path": "src/main/java/com/google/firebase/auth/FirebaseAuth.java", "diffHunk": "@@ -53,7 +57,12 @@ public TenantManager get() {\n   }\n \n   public TenantManager getTenantManager() {\n-    return tenantManager.get();\n+    TenantManager suppliedTenantManager;\n+    synchronized (lock) {\n+      suppliedTenantManager = tenantManager.get();\n+      tenantManagerCreated.set(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyOTg2Mg=="}, "originalCommit": {"oid": "f908691f9a064b889bb882d4eeca068be135f586"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1541, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}