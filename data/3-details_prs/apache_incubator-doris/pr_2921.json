{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1OTQ2NzU0", "number": 2921, "title": "diable column both in select list and aggregate functions when using GROUPING SETS/CUBE/ROLLUP", "bodyText": "diable column both in select list and aggregate functions when using GROUPING SETS/CUBE/ROLLUP #2927", "createdAt": "2020-02-17T05:25:32Z", "url": "https://github.com/apache/incubator-doris/pull/2921", "merged": true, "mergeCommit": {"oid": "7be2871c368dc8a86d837d91ffd83805833b0665"}, "closed": true, "closedAt": "2020-02-18T05:56:57Z", "author": {"login": "yangzhg"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFGc6jgBqjMwNDIzNDAyMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFa4aPgFqTM2MDA3NTI1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "608bc857870fed19e116d253320108818f86808d", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/608bc857870fed19e116d253320108818f86808d", "committedDate": "2020-02-17T05:25:15Z", "message": "diable column both in select list and aggregate functions when using GROUPING SETS/CUBE/ROLLUP"}, "afterCommit": {"oid": "ccf1f4bea673db844baa3c71afb42311ec1a4088", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/ccf1f4bea673db844baa3c71afb42311ec1a4088", "committedDate": "2020-02-17T05:26:52Z", "message": "diable column both in select list and aggregate functions when using GROUPING SETS/CUBE/ROLLUP"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NTAwMjg2", "url": "https://github.com/apache/incubator-doris/pull/2921#pullrequestreview-359500286", "createdAt": "2020-02-17T05:50:45Z", "commit": {"oid": "ccf1f4bea673db844baa3c71afb42311ec1a4088"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNTo1MDo0NVrOFqZEVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNTo1MDo0NVrOFqZEVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk5NTIyMw==", "bodyText": "Please Add a UT. Currently we have a FE UT frame, which could handle SQL analyze bug. you could refer to DemoTest.", "url": "https://github.com/apache/incubator-doris/pull/2921#discussion_r379995223", "createdAt": "2020-02-17T05:50:45Z", "author": {"login": "kangkaisen"}, "path": "fe/src/main/java/org/apache/doris/analysis/SelectStmt.java", "diffHunk": "@@ -349,6 +350,19 @@ public void analyze(Analyzer analyzer) throws AnalysisException, UserException {\n             }\n         }\n         if (groupByClause != null && groupByClause.isGroupByExtension()) {\n+            for (SelectListItem item : selectList.getItems()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccf1f4bea673db844baa3c71afb42311ec1a4088"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76a74ab00240a52eddf2173278ace79353e462c4", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/76a74ab00240a52eddf2173278ace79353e462c4", "committedDate": "2020-02-17T07:00:53Z", "message": "add unittest"}, "afterCommit": {"oid": "d15aeabe435890d7bd7d6b3a700760db754ed28b", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/d15aeabe435890d7bd7d6b3a700760db754ed28b", "committedDate": "2020-02-17T07:08:58Z", "message": "add unittest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NjgyMDE1", "url": "https://github.com/apache/incubator-doris/pull/2921#pullrequestreview-359682015", "createdAt": "2020-02-17T11:55:58Z", "commit": {"oid": "d15aeabe435890d7bd7d6b3a700760db754ed28b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMTo1NTo1OFrOFqh52g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMTo1NTo1OFrOFqh52g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDEzOTk5NA==", "bodyText": "We could move this method to UtFrameUtils ?", "url": "https://github.com/apache/incubator-doris/pull/2921#discussion_r380139994", "createdAt": "2020-02-17T11:55:58Z", "author": {"login": "kangkaisen"}, "path": "fe/src/test/java/org/apache/doris/utframe/AnotherDemoTest.java", "diffHunk": "@@ -111,19 +114,25 @@ public static void beforeClass() throws EnvVarNotSetException, IOException,\n         Thread.sleep(5000);\n     }\n \n-    // generate all port from between 20000 ~ 30000\n-    private static void getRandomPort() {\n-        Random r = new Random(System.currentTimeMillis());\n-        int basePort = 20000 + r.nextInt(9000);\n-        fe_http_port = basePort + 1;\n-        fe_rpc_port = basePort + 2;\n-        fe_query_port = basePort + 3;\n-        fe_edit_log_port = basePort + 4;\n-\n-        be_heartbeat_port = basePort + 5;\n-        be_thrift_port = basePort + 6;\n-        be_brpc_port = basePort + 7;\n-        be_http_port = basePort + 8;\n+    @AfterClass\n+    public static void TearDown() {\n+        try {\n+            FileUtils.deleteDirectory(new File(runningDirBase));\n+        } catch (IOException e) {\n+        }\n+    }\n+\n+    // generate all port from valid ports\n+    private static void getPorts() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d15aeabe435890d7bd7d6b3a700760db754ed28b"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4c3ab81ee550a0eb2b5bd340235987621969c85", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/b4c3ab81ee550a0eb2b5bd340235987621969c85", "committedDate": "2020-02-18T03:13:23Z", "message": "diable column both in select list and aggregate functions when using GROUPING SETS/CUBE/ROLLUP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19b4350d417237a1bb4a4203202d1a0876cdcf63", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/19b4350d417237a1bb4a4203202d1a0876cdcf63", "committedDate": "2020-02-18T03:17:03Z", "message": "add unittest\n\nadd unittest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "649f8eebbfcedcdd06ff82b30866f9f7ba5e7e91", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/649f8eebbfcedcdd06ff82b30866f9f7ba5e7e91", "committedDate": "2020-02-18T03:10:51Z", "message": "add unittest"}, "afterCommit": {"oid": "19b4350d417237a1bb4a4203202d1a0876cdcf63", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/19b4350d417237a1bb4a4203202d1a0876cdcf63", "committedDate": "2020-02-18T03:17:03Z", "message": "add unittest\n\nadd unittest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMDc1MjU1", "url": "https://github.com/apache/incubator-doris/pull/2921#pullrequestreview-360075255", "createdAt": "2020-02-18T05:14:51Z", "commit": {"oid": "19b4350d417237a1bb4a4203202d1a0876cdcf63"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3786, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}