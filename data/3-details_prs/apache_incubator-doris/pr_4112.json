{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNzYxNDcy", "number": 4112, "title": "[Bug] Fix bug that tablet meta lock twice", "bodyText": "Proposed changes\nThe tablet meta lock may already be hold before calling\ngenerate_tablet_meta_copy(), so we need provide a unlocked\nversion of generate_tablet_meta_copy().\nThis bug  is introduced by #4061\nTypes of changes\n\n Bugfix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n Documentation Update (if none of the other choices apply)\n\nChecklist\n\n I have create an issue on Fix #4111\n Commit messages in my PR start with the related issues ID, like \"#4071 Add pull request template to doris project\"\n Compiling and unit tests pass locally with my changes\n I have added tests that prove my fix is effective or that my feature works\n If this change need a document change, I have updated the document\n Any dependent changes have been merged", "createdAt": "2020-07-17T04:32:57Z", "url": "https://github.com/apache/incubator-doris/pull/4112", "merged": true, "mergeCommit": {"oid": "15d9e10a8bb5af2e178cc036150816ac6e07d42a"}, "closed": true, "closedAt": "2020-07-19T13:27:25Z", "author": {"login": "morningman"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1sF9YAH2gAyNDUwNzYxNDcyOjI3YWE3ZDY1YjgxYTNjOWY3MjgxNzg1M2FlMmJmY2I3N2JhYTJkYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2JiBdAFqTQ1MTA2MTQxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe", "author": {"user": {"login": "morningman-cmy", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe", "committedDate": "2020-07-17T04:26:24Z", "message": "[Bug] Fix bug that tablet meta lock twice\n\nThe tablet meta load may already be hold before calling\ngenerate_tablet_meta_copy(), so we need provide a unlocked\nversion of generate_tablet_meta_copy()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzg3MjMw", "url": "https://github.com/apache/incubator-doris/pull/4112#pullrequestreview-450387230", "createdAt": "2020-07-17T05:46:42Z", "commit": {"oid": "27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNTo0Njo0M1rOGzGIMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNTo0Njo0M1rOGzGIMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzMDk2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // caller should hold the _meta_load before calling this method\n          \n          \n            \n                // caller should hold the _meta_lock before calling this method", "url": "https://github.com/apache/incubator-doris/pull/4112#discussion_r456230960", "createdAt": "2020-07-17T05:46:43Z", "author": {"login": "caiconghui"}, "path": "be/src/olap/tablet.h", "diffHunk": "@@ -222,6 +222,8 @@ class Tablet : public BaseTablet {\n     void build_tablet_report_info(TTabletInfo* tablet_info);\n \n     void generate_tablet_meta_copy(TabletMetaSharedPtr new_tablet_meta) const;\n+    // caller should hold the _meta_load before calling this method", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f10a43d13054bfd760bf7e23866453c6fccac6", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/55f10a43d13054bfd760bf7e23866453c6fccac6", "committedDate": "2020-07-17T15:24:53Z", "message": "fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDYxNDE4", "url": "https://github.com/apache/incubator-doris/pull/4112#pullrequestreview-451061418", "createdAt": "2020-07-18T14:44:18Z", "commit": {"oid": "55f10a43d13054bfd760bf7e23866453c6fccac6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1957, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}