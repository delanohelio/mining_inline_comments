{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MjIzMDc1", "number": 4699, "title": "Support Alter Table Clause For External Table", "bodyText": "5 alter operation be supported:\n\nRENAME\nADD COLUMN\nDROP COLUMN\nMODIFY COLUMN\nREORDER COLUMN\n\nFix #4697\nTypes of changes\nWhat types of changes does your code introduce to Doris?\nPut an x in the boxes that apply\n\n[] Bugfix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n[] Breaking change (fix or feature that would cause existing functionality to not work as expected)\n[] Documentation Update (if none of the other choices apply)\n[] Code refactor (Modify the code structure, format the code, etc...)\n\nChecklist\nPut an x in the boxes that apply. You can also fill these out after creating the PR. If you're unsure about any of them, don't hesitate to ask. We're here to help! This is simply a reminder of what we are going to look for before merging your code.\n\n I have create an issue on (Fix #ISSUE), and have described the bug/feature there in detail\n Compiling and unit tests pass locally with my changes\n I have added tests that prove my fix is effective or that my feature works\n If this change need a document change, I have updated the document\n Any dependent changes have been merged", "createdAt": "2020-10-06T02:30:28Z", "url": "https://github.com/apache/incubator-doris/pull/4699", "merged": true, "mergeCommit": {"oid": "f89b660c94ca5ad69093a37af005b2ec2e59a7c6"}, "closed": true, "closedAt": "2020-10-25T09:17:57Z", "author": {"login": "HappenLee"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP6bC4AFqTUwMzEwNTcyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVOZjzAFqTUxNTI1OTQ2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTA1NzI1", "url": "https://github.com/apache/incubator-doris/pull/4699#pullrequestreview-503105725", "createdAt": "2020-10-06T15:42:02Z", "commit": {"oid": "b5550aac38c32f9dabed2ab5535bf2b2ca03a5af"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTo0MjowMlrOHdOK1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTo0OTo0OFrOHdOhXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQwMjkwMg==", "bodyText": "use return instead of break is more clear", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r500402902", "createdAt": "2020-10-06T15:42:02Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/alter/Alter.java", "diffHunk": "@@ -172,71 +256,18 @@ public void processAlterTable(AlterTableStmt stmt) throws UserException {\n                 ErrorReport.reportDdlException(ErrorCode.ERR_BAD_TABLE_ERROR, tableName);\n             }\n \n-            if (table.getType() != TableType.OLAP) {\n-                throw new DdlException(\"Do not support alter non-OLAP table[\" + tableName + \"]\");\n-            }\n-            OlapTable olapTable = (OlapTable) table;\n-            stmt.rewriteAlterClause(olapTable);\n-\n-            // check conflict alter ops first\n-            alterClauses = stmt.getOps();\n-            AlterOperations currentAlterOps = new AlterOperations();\n-            currentAlterOps.checkConflict(alterClauses);\n-\n-            // check cluster capacity and db quota, only need to check once.\n-            if (currentAlterOps.needCheckCapacity()) {\n-                Catalog.getCurrentSystemInfo().checkClusterCapacity(clusterName);\n-                db.checkQuota();\n-            }\n-\n-            if (olapTable.getState() != OlapTableState.NORMAL) {\n-                throw new DdlException(\n-                        \"Table[\" + table.getName() + \"]'s state is not NORMAL. Do not allow doing ALTER ops\");\n-            }\n-\n-            if (currentAlterOps.hasSchemaChangeOp()) {\n-                // if modify storage type to v2, do schema change to convert all related tablets to segment v2 format\n-                schemaChangeHandler.process(alterClauses, clusterName, db, olapTable);\n-            } else if (currentAlterOps.hasRollupOp()) {\n-                materializedViewHandler.process(alterClauses, clusterName, db, olapTable);\n-            } else if (currentAlterOps.hasPartitionOp()) {\n-                Preconditions.checkState(alterClauses.size() == 1);\n-                AlterClause alterClause = alterClauses.get(0);\n-                if (alterClause instanceof DropPartitionClause) {\n-                    if (!((DropPartitionClause) alterClause).isTempPartition()) {\n-                        DynamicPartitionUtil.checkAlterAllowed((OlapTable) db.getTable(tableName));\n-                    }\n-                    Catalog.getCurrentCatalog().dropPartition(db, olapTable, ((DropPartitionClause) alterClause));\n-                } else if (alterClause instanceof ReplacePartitionClause) {\n-                    Catalog.getCurrentCatalog().replaceTempPartition(db, tableName, (ReplacePartitionClause) alterClause);\n-                } else if (alterClause instanceof ModifyPartitionClause) {\n-                    ModifyPartitionClause clause = ((ModifyPartitionClause) alterClause);\n-                    // expand the partition names if it is 'Modify Partition(*)'\n-                    if (clause.isNeedExpand()) {\n-                        List<String> partitionNames = clause.getPartitionNames();\n-                        partitionNames.clear();\n-                        for (Partition partition : olapTable.getPartitions()) {\n-                            partitionNames.add(partition.getName());\n-                        }\n-                    }\n-                    Map<String, String> properties = clause.getProperties();\n-                    if (properties.containsKey(PropertyAnalyzer.PROPERTIES_INMEMORY)) {\n-                        needProcessOutsideDatabaseLock = true;\n-                    } else {\n-                        List<String> partitionNames = clause.getPartitionNames();\n-                        modifyPartitionsProperty(db, olapTable, partitionNames, properties);\n-                    }\n-                } else if (alterClause instanceof AddPartitionClause) {\n-                    needProcessOutsideDatabaseLock = true;\n-                } else {\n-                    throw new DdlException(\"Invalid alter operation: \" + alterClause.getOpType());\n-                }\n-            } else if (currentAlterOps.hasRenameOp()) {\n-                processRename(db, olapTable, alterClauses);\n-            } else if (currentAlterOps.contains(AlterOpType.MODIFY_TABLE_PROPERTY_SYNC)) {\n-                needProcessOutsideDatabaseLock = true;\n-            } else {\n-                throw new DdlException(\"Invalid alter operations: \" + currentAlterOps);\n+            switch (table.getType()) {\n+                case OLAP:\n+                    OlapTable olapTable = (OlapTable) table;\n+                    needProcessOutsideDatabaseLock = processAlterOlapTable(stmt, olapTable, alterClauses, clusterName, db);\n+                    break;\n+                case ODBC:\n+                case MYSQL:\n+                case ELASTICSEARCH:\n+                    processAlterExternalTable(stmt, table, db);\n+                    break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5550aac38c32f9dabed2ab5535bf2b2ca03a5af"}, "originalPosition": 178}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQwNTE1OA==", "bodyText": "processExternalTable is more clear", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r500405158", "createdAt": "2020-10-06T15:45:03Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/alter/AlterHandler.java", "diffHunk": "@@ -380,6 +381,12 @@ public void start() {\n     public abstract void process(List<AlterClause> alterClauses, String clusterName, Database db, OlapTable olapTable)\n             throws UserException;\n \n+    /*\n+     * entry function. handle alter ops for external table\n+     */\n+    public void process(List<AlterClause> alterClauses, Database db, Table externalTable)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5550aac38c32f9dabed2ab5535bf2b2ca03a5af"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQwNzY5Nw==", "bodyText": "Should not set new schema to externalTable here directly.\nThe other alter clause may throw exception and the entire alter operation will fail, and you have to rollback all changes to the table.\nA correct way to to modify a \"copied\" schema of external table, and set the new schema at the end of all alter clauses.", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r500407697", "createdAt": "2020-10-06T15:48:28Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "diffHunk": "@@ -132,6 +132,30 @@ private void processAddColumn(AddColumnClause alterClause, OlapTable olapTable,\n                           indexSchemaMap, newColNameSet);\n     }\n \n+    private void processAddColumn(AddColumnClause alterClause, Table externalTable) throws DdlException {\n+        Column column = alterClause.getColumn();\n+        ColumnPosition columnPos = alterClause.getColPos();\n+        Set<String> newColNameSet = Sets.newHashSet(column.getName());\n+\n+        List<Column> modIndexSchema = externalTable.getBaseSchema();\n+        addColumnInternal(externalTable, column, columnPos, modIndexSchema, newColNameSet);\n+        externalTable.setNewFullSchema(modIndexSchema);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5550aac38c32f9dabed2ab5535bf2b2ca03a5af"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQwODY3MA==", "bodyText": "This is not a good way to alter external table.\nYou write 2 edit logs here, which will make this operation non-atomic\u3002", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r500408670", "createdAt": "2020-10-06T15:49:48Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Catalog.java", "diffHunk": "@@ -5045,6 +5046,36 @@ public void renameTable(Database db, OlapTable table, TableRenameClause tableRen\n         LOG.info(\"rename table[{}] to {}\", tableName, newTableName);\n     }\n \n+    public void renameTable(Database db, Table table, TableRenameClause tableRenameClause) throws DdlException {\n+        String tableName = table.getName();\n+        String newTableName = tableRenameClause.getNewTableName();\n+        if (tableName.equals(newTableName)) {\n+            throw new DdlException(\"Same table name\");\n+        }\n+\n+        // check if name is already used\n+        if (db.getTable(newTableName) != null) {\n+            throw new DdlException(\"Table name[\" + newTableName + \"] is already used\");\n+        }\n+\n+        table.setName(newTableName);\n+\n+        db.dropTable(tableName);\n+        db.createTable(table);\n+\n+        TableInfo tableInfo = TableInfo.createForTableRename(db.getId(), table.getId(), newTableName);\n+        editLog.logTableRename(tableInfo);\n+        LOG.info(\"rename table[{}] to {}\", tableName, newTableName);\n+    }\n+\n+    public void reflushTable(Database db, Table table) throws DdlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5550aac38c32f9dabed2ab5535bf2b2ca03a5af"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDc3Njk0", "url": "https://github.com/apache/incubator-doris/pull/4699#pullrequestreview-506077694", "createdAt": "2020-10-10T08:06:15Z", "commit": {"oid": "d21ea632bd9bb9f3ca2c4b7d12d54fe5d25ae2d1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwODowNjoxNVrOHfeKtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwODowODowM1rOHfeLYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc2MjE2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private void processRename(Database db, Table table, List<AlterClause> alterClauses) throws DdlException {\n          \n          \n            \n                private void processRenameAlterOperation(Database db, Table table, List<AlterClause> alterClauses) throws DdlException {", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r502762167", "createdAt": "2020-10-10T08:06:15Z", "author": {"login": "wuyunfeng"}, "path": "fe/fe-core/src/main/java/org/apache/doris/alter/Alter.java", "diffHunk": "@@ -377,6 +408,17 @@ private void processRename(Database db, OlapTable table, List<AlterClause> alter\n         }\n     }\n \n+    private void processRename(Database db, Table table, List<AlterClause> alterClauses) throws DdlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ea632bd9bb9f3ca2c4b7d12d54fe5d25ae2d1"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc2MjMzOQ==", "bodyText": "just puzzled with the refresh?", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r502762339", "createdAt": "2020-10-10T08:08:03Z", "author": {"login": "wuyunfeng"}, "path": "fe/fe-core/src/main/java/org/apache/doris/persist/OperationType.java", "diffHunk": "@@ -182,4 +182,7 @@\n     // resource 276~290\n     public static final short OP_CREATE_RESOURCE = 276;\n     public static final short OP_DROP_RESOURCE = 277;\n+\n+    // alter external table\n+    public static final short OP_REFRESH_EXTERNAL_TABLE_SCHEMA = 280;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ea632bd9bb9f3ca2c4b7d12d54fe5d25ae2d1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDc4MDI1", "url": "https://github.com/apache/incubator-doris/pull/4699#pullrequestreview-506078025", "createdAt": "2020-10-10T08:10:47Z", "commit": {"oid": "d21ea632bd9bb9f3ca2c4b7d12d54fe5d25ae2d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwODoxMDo0N1rOHfeMfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwODoxMDo0N1rOHfeMfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc2MjYyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private void processAddColumn(AddColumnClause alterClause, Table externalTable, List<Column> newSchema) throws DdlException {\n          \n          \n            \n                private void processAddCol{Alter}Operation(AddColumnClause alterClause, Table externalTable, List<Column> newSchema) throws DdlException {", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r502762622", "createdAt": "2020-10-10T08:10:47Z", "author": {"login": "wuyunfeng"}, "path": "fe/fe-core/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "diffHunk": "@@ -132,6 +132,26 @@ private void processAddColumn(AddColumnClause alterClause, OlapTable olapTable,\n                           indexSchemaMap, newColNameSet);\n     }\n \n+    private void processAddColumn(AddColumnClause alterClause, Table externalTable, List<Column> newSchema) throws DdlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ea632bd9bb9f3ca2c4b7d12d54fe5d25ae2d1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1959144eede1fa35cde5b723cfd6186dd322dd9a", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/1959144eede1fa35cde5b723cfd6186dd322dd9a", "committedDate": "2020-10-13T03:07:30Z", "message": "Support Alter Table Clause For External Table\n5 alter operation be supported:\n\n* RENAME\n* ADD COLUMN\n* DROP COLUMN\n* MODIFY COLUMN\n* REORDER COLUMN"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95b09439b6c1ef136849f8d98fd44235c0cbf5e5", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/95b09439b6c1ef136849f8d98fd44235c0cbf5e5", "committedDate": "2020-10-13T03:07:30Z", "message": "fix some problem\n\n1. copy old schema to new schema before external table schema change\n2. add new operation of OP_REFRESH_EXTERNAL_TABLE_SCHEMA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb59c88edb1d26987a764c4ace41989d3fd256f5", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/fb59c88edb1d26987a764c4ace41989d3fd256f5", "committedDate": "2020-10-13T03:07:30Z", "message": "change some code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609e85d32f22d29125bcc375d92ae50f0a296d76", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/609e85d32f22d29125bcc375d92ae50f0a296d76", "committedDate": "2020-10-13T03:07:30Z", "message": "change OP_REFRESH_EXTERNAL_TABLE_SCHEMA to OP_ALTER_EXTERNAL_TABLE_SCHEMA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/673ab758bc90cac42a7b90c0c880d9a46613e315", "committedDate": "2020-10-13T03:07:30Z", "message": "Added a forbidden of delete the last column"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46705463c3ebf33dc54b866792bf69ae6783789d", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/46705463c3ebf33dc54b866792bf69ae6783789d", "committedDate": "2020-10-12T09:24:42Z", "message": "Added a forbidden of delete the last column"}, "afterCommit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/673ab758bc90cac42a7b90c0c880d9a46613e315", "committedDate": "2020-10-13T03:07:30Z", "message": "Added a forbidden of delete the last column"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDg0Nzg2", "url": "https://github.com/apache/incubator-doris/pull/4699#pullrequestreview-510484786", "createdAt": "2020-10-16T13:45:04Z", "commit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NTowNFrOHi-jfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0OToxN1rOHi-1FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQzODUyNQ==", "bodyText": "the param isReplay seems always true.", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r506438525", "createdAt": "2020-10-16T13:45:04Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java", "diffHunk": "@@ -305,6 +306,26 @@ public boolean createTableWithLock(Table table, boolean isReplay, boolean setIfN\n         }\n     }\n \n+    public void refreshTableSchemaWithLock(String tableName, List<Column> newSchema, boolean isReplay) throws DdlException{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0MDkyMg==", "bodyText": "Use GSON", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r506440922", "createdAt": "2020-10-16T13:47:39Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/persist/RefreshExternalTableInfo.java", "diffHunk": "@@ -0,0 +1,102 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+package org.apache.doris.persist;\n+\n+import com.clearspring.analytics.util.Lists;\n+import org.apache.doris.catalog.Column;\n+import org.apache.doris.common.io.Writable;\n+import org.apache.doris.common.io.Text;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.DataInput;\n+import java.io.DataOutput;\n+import java.io.IOException;\n+import java.util.List;\n+\n+public class RefreshExternalTableInfo implements Writable {\n+    public static final Logger LOG = LoggerFactory.getLogger(RefreshExternalTableInfo.class);\n+\n+    private String dbName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0MzAyOQ==", "bodyText": "This method is just same as renameTable above?", "url": "https://github.com/apache/incubator-doris/pull/4699#discussion_r506443029", "createdAt": "2020-10-16T13:49:17Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Catalog.java", "diffHunk": "@@ -5092,6 +5098,35 @@ public void renameTable(Database db, OlapTable table, TableRenameClause tableRen\n         LOG.info(\"rename table[{}] to {}\", tableName, newTableName);\n     }\n \n+    public void renameTable(Database db, Table table, TableRenameClause tableRenameClause) throws DdlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "673ab758bc90cac42a7b90c0c880d9a46613e315"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b6daa14547fbb2510e2349a302921ac41a2cb47", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/8b6daa14547fbb2510e2349a302921ac41a2cb47", "committedDate": "2020-10-18T14:42:27Z", "message": "fix some mistake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a3ee73fe76186ec00694977ce1299f92cffce59", "author": {"user": {"login": "HappenLee", "name": "HappenLee"}}, "url": "https://github.com/apache/incubator-doris/commit/5a3ee73fe76186ec00694977ce1299f92cffce59", "committedDate": "2020-10-20T03:38:23Z", "message": "use GJSON to do Serialize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjU5NDY1", "url": "https://github.com/apache/incubator-doris/pull/4699#pullrequestreview-515259465", "createdAt": "2020-10-23T03:56:14Z", "commit": {"oid": "5a3ee73fe76186ec00694977ce1299f92cffce59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4723, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}