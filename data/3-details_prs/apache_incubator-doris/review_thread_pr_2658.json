{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MTk0Mzc0", "number": 2658, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQxMjo1MjozM1rODVzNEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMzozNDozNFrODV-TRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTg1NjE4OnYy", "diffSide": "RIGHT", "path": "be/src/olap/rowset/rowset_meta.h", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQxMjo1MjozM1rOFaN1XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzowNDo1M1rOFaWrRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAzMzk0OQ==", "bodyText": "I think the cumulative rowsets will hit above if clause. So this comment is some misleading.", "url": "https://github.com/apache/incubator-doris/pull/2658#discussion_r363033949", "createdAt": "2020-01-04T12:52:33Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/rowset_meta.h", "diffHunk": "@@ -326,11 +326,12 @@ class RowsetMeta {\n     //    so the segments in it are non overlapping.\n     // 2. the segments_overlap() flag in rowset meta is set to NONOVERLAPPING, explicitly.\n     bool is_segments_overlapping() const {\n-        if (num_segments() == 0) {\n-            // specially for delete version\n+        if (end_version() > start_version() || segments_overlap() == NONOVERLAPPING) {\n             return false;\n         }\n-        if (end_version() > start_version() || segments_overlap() == NONOVERLAPPING) {\n+\n+        // some of cumulative rowsets may have no segments.(no data, or a delete version)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bee2ebc69e9083c82e31c2124d9a4a52a3e5cdce"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE3ODgyMw==", "bodyText": "Changed", "url": "https://github.com/apache/incubator-doris/pull/2658#discussion_r363178823", "createdAt": "2020-01-06T07:04:53Z", "author": {"login": "morningman"}, "path": "be/src/olap/rowset/rowset_meta.h", "diffHunk": "@@ -326,11 +326,12 @@ class RowsetMeta {\n     //    so the segments in it are non overlapping.\n     // 2. the segments_overlap() flag in rowset meta is set to NONOVERLAPPING, explicitly.\n     bool is_segments_overlapping() const {\n-        if (num_segments() == 0) {\n-            // specially for delete version\n+        if (end_version() > start_version() || segments_overlap() == NONOVERLAPPING) {\n             return false;\n         }\n-        if (end_version() > start_version() || segments_overlap() == NONOVERLAPPING) {\n+\n+        // some of cumulative rowsets may have no segments.(no data, or a delete version)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAzMzk0OQ=="}, "originalCommit": {"oid": "bee2ebc69e9083c82e31c2124d9a4a52a3e5cdce"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MzY3NDMxOnYy", "diffSide": "RIGHT", "path": "be/src/olap/rowset/rowset_meta.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMzozNDozNFrOFadu-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMzozNDozNFrOFadu-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI5NDQ1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                const AlphaRowsetExtraMetaPB& alpha_rowset_extra_meta_pb() {\n          \n          \n            \n                const AlphaRowsetExtraMetaPB& alpha_rowset_extra_meta_pb() const {", "url": "https://github.com/apache/incubator-doris/pull/2658#discussion_r363294459", "createdAt": "2020-01-06T13:34:34Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/rowset_meta.h", "diffHunk": "@@ -350,6 +352,9 @@ class RowsetMeta {\n         return score;\n     }\n \n+    const AlphaRowsetExtraMetaPB& alpha_rowset_extra_meta_pb() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45ed0b8a58c12a33bc625ff3904f7150a6da51ad"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2282, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}