{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NTM5MTcz", "number": 4158, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODoxNjoxNFrOERWUiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOToyMTowM1rOEUiBqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjI2OTU1OnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODoxNjoxNFrOG2Ag6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMzowNTowN1rOG2JjWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI4NDcxNA==", "bodyText": "\u2018spciefied\u2019 Wrong characters", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r459284714", "createdAt": "2020-07-23T08:16:14Z", "author": {"login": "wutiangan"}, "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadManager.java", "diffHunk": "@@ -602,6 +573,24 @@ public void replayChangeRoutineLoadJob(RoutineLoadOperation operation) {\n                  .add(\"msg\", \"replay change routine load job\")\n                  .build());\n     }\n+    \n+    /**\n+     * Enter of altering a routine load job\n+     */\n+    public void alterRoutineLoadJob(AlterRoutineLoadStmt stmt) throws UserException {\n+        RoutineLoadJob job = checkPrivAndGetJob(stmt.getDbName(), stmt.getLabel());\n+        if (stmt.hasDataSourceProperty()\n+                && !stmt.getDataSourceProperties().getType().equalsIgnoreCase(job.dataSourceType.name())) {\n+            throw new DdlException(\"The spciefied job type is not: \" + stmt.getDataSourceProperties().getType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3d465b3b5a9a5d5be729a554429b543e250e8fa"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQzMjc5NQ==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r459432795", "createdAt": "2020-07-23T13:05:07Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadManager.java", "diffHunk": "@@ -602,6 +573,24 @@ public void replayChangeRoutineLoadJob(RoutineLoadOperation operation) {\n                  .add(\"msg\", \"replay change routine load job\")\n                  .build());\n     }\n+    \n+    /**\n+     * Enter of altering a routine load job\n+     */\n+    public void alterRoutineLoadJob(AlterRoutineLoadStmt stmt) throws UserException {\n+        RoutineLoadJob job = checkPrivAndGetJob(stmt.getDbName(), stmt.getLabel());\n+        if (stmt.hasDataSourceProperty()\n+                && !stmt.getDataSourceProperties().getType().equalsIgnoreCase(job.dataSourceType.name())) {\n+            throw new DdlException(\"The spciefied job type is not: \" + stmt.getDataSourceProperties().getType());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI4NDcxNA=="}, "originalCommit": {"oid": "d3d465b3b5a9a5d5be729a554429b543e250e8fa"}, "originalPosition": 150}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjMxMDEzOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/cup/sql_parser.cup", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODoyODoxMlrOG2A5mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMzowNDoyM1rOG2JhWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5MTAzMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:properties\n          \n          \n            \n                | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:jobProperties", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r459291033", "createdAt": "2020-07-23T08:28:12Z", "author": {"login": "wutiangan"}, "path": "fe/fe-core/src/main/cup/sql_parser.cup", "diffHunk": "@@ -722,11 +724,26 @@ alter_stmt ::=\n     {:\n         RESULT = new AlterDatabaseQuotaStmt(dbName, QuotaType.REPLICA, String.valueOf(number));\n     :}\n-\n     | KW_ALTER KW_DATABASE ident:dbName KW_RENAME ident:newDbName\n     {:\n         RESULT = new AlterDatabaseRename(dbName, newDbName);\n     :}\n+    | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3d465b3b5a9a5d5be729a554429b543e250e8fa"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQzMjI4Mg==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r459432282", "createdAt": "2020-07-23T13:04:23Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/cup/sql_parser.cup", "diffHunk": "@@ -722,11 +724,26 @@ alter_stmt ::=\n     {:\n         RESULT = new AlterDatabaseQuotaStmt(dbName, QuotaType.REPLICA, String.valueOf(number));\n     :}\n-\n     | KW_ALTER KW_DATABASE ident:dbName KW_RENAME ident:newDbName\n     {:\n         RESULT = new AlterDatabaseRename(dbName, newDbName);\n     :}\n+    | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:properties", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5MTAzMw=="}, "originalCommit": {"oid": "d3d465b3b5a9a5d5be729a554429b543e250e8fa"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5OTUzNTYzOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/cup/sql_parser.cup", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwODo1MDoyNFrOG6xT8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOTo1NToyNVrOG6zcAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3ODUxNA==", "bodyText": "Maybe KW_ALTER KW_ROUTINE KW_LOAD KW_FOR job_label:jobLabel  is better. The other routine load stmt also has KW_FOR.", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464278514", "createdAt": "2020-08-03T08:50:24Z", "author": {"login": "EmmyMiao87"}, "path": "fe/fe-core/src/main/cup/sql_parser.cup", "diffHunk": "@@ -722,11 +724,26 @@ alter_stmt ::=\n     {:\n         RESULT = new AlterDatabaseQuotaStmt(dbName, QuotaType.REPLICA, String.valueOf(number));\n     :}\n-\n     | KW_ALTER KW_DATABASE ident:dbName KW_RENAME ident:newDbName\n     {:\n         RESULT = new AlterDatabaseRename(dbName, newDbName);\n     :}\n+    | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:jobProperties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDMxMzM0NA==", "bodyText": "OK", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464313344", "createdAt": "2020-08-03T09:55:25Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/cup/sql_parser.cup", "diffHunk": "@@ -722,11 +724,26 @@ alter_stmt ::=\n     {:\n         RESULT = new AlterDatabaseQuotaStmt(dbName, QuotaType.REPLICA, String.valueOf(number));\n     :}\n-\n     | KW_ALTER KW_DATABASE ident:dbName KW_RENAME ident:newDbName\n     {:\n         RESULT = new AlterDatabaseRename(dbName, newDbName);\n     :}\n+    | KW_ALTER KW_ROUTINE KW_LOAD job_label:jobLabel opt_properties:jobProperties", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3ODUxNA=="}, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5OTU5NDMzOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadJob.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOTowNjo0NlrOG6x3SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOTo1NjoyNlrOG6zd8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI4NzU2MA==", "bodyText": "The job properties maybe could be modified in here instead of the subclass  KafkaRoutineLoad.", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464287560", "createdAt": "2020-08-03T09:06:46Z", "author": {"login": "EmmyMiao87"}, "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadJob.java", "diffHunk": "@@ -1397,4 +1401,36 @@ public void readFields(DataInput in) throws IOException {\n             throw new IOException(\"error happens when parsing create routine load stmt: \" + origStmt, e);\n         }\n     }\n+\n+    abstract public void modifyProperties(AlterRoutineLoadStmt stmt) throws DdlException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDMxMzg0Mw==", "bodyText": "Maybe we could do this when we got second derived class from RoutineLoadJob", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464313843", "createdAt": "2020-08-03T09:56:26Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadJob.java", "diffHunk": "@@ -1397,4 +1401,36 @@ public void readFields(DataInput in) throws IOException {\n             throw new IOException(\"error happens when parsing create routine load stmt: \" + origStmt, e);\n         }\n     }\n+\n+    abstract public void modifyProperties(AlterRoutineLoadStmt stmt) throws DdlException;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI4NzU2MA=="}, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5OTU5NTE4OnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOTowNzowMVrOG6x3yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOTowNzowMVrOG6x3yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI4NzY5MA==", "bodyText": "Same as above.", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464287690", "createdAt": "2020-08-03T09:07:01Z", "author": {"login": "EmmyMiao87"}, "path": "fe/fe-core/src/main/java/org/apache/doris/load/routineload/RoutineLoadJob.java", "diffHunk": "@@ -1397,4 +1401,36 @@ public void readFields(DataInput in) throws IOException {\n             throw new IOException(\"error happens when parsing create routine load stmt: \" + origStmt, e);\n         }\n     }\n+\n+    abstract public void modifyProperties(AlterRoutineLoadStmt stmt) throws DdlException;\n+\n+    abstract public void replayModifyProperties(AlterRoutineLoadJobOperationLog log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5OTY0NDU3OnYy", "diffSide": "RIGHT", "path": "docs/.vuepress/sidebar/zh-CN.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOToyMTowM1rOG6yU2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwOToyMTowM1rOG6yU2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI5NTEzMA==", "bodyText": "Put it between pause routine load and stop routine load.", "url": "https://github.com/apache/incubator-doris/pull/4158#discussion_r464295130", "createdAt": "2020-08-03T09:21:03Z", "author": {"login": "EmmyMiao87"}, "path": "docs/.vuepress/sidebar/zh-CN.js", "diffHunk": "@@ -409,6 +409,7 @@ module.exports = [\n             title: \"DML\",\n             directoryPath: \"Data Manipulation/\",\n             children: [\n+              \"alter-routine-load\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94cb007c5b602795150d58478f07ce48117abb7"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1227, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}