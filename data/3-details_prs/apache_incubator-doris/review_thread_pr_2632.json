{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NDY5NTUw", "number": 2632, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxMjoxMTo0NFrODVWAAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxMjoyMDozMlrODVWBOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzA3MTM5OnYy", "diffSide": "RIGHT", "path": "be/src/olap/rowset/alpha_rowset_reader.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxMjoxMTo0NFrOFZiO0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxMjoxMTo0NFrOFZiO0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMxOTU3MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            bool RowCursorWithOrdinalComparator::operator () (const RowCursorWithOrdinal &x, const RowCursorWithOrdinal &y) const {\n          \n          \n            \n            bool RowCursorWithOrdinalComparator::operator () (const RowCursorWithOrdinal& x, const RowCursorWithOrdinal& y) const {", "url": "https://github.com/apache/incubator-doris/pull/2632#discussion_r362319571", "createdAt": "2020-01-01T12:11:44Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/alpha_rowset_reader.cpp", "diffHunk": "@@ -326,4 +382,8 @@ RowsetSharedPtr AlphaRowsetReader::rowset() {\n     return std::static_pointer_cast<Rowset>(_rowset);\n }\n \n+bool RowCursorWithOrdinalComparator::operator () (const RowCursorWithOrdinal &x, const RowCursorWithOrdinal &y) const {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a83b447feb1ae2ff62266254a4b8bbadb7788f9"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzA3NDUwOnYy", "diffSide": "RIGHT", "path": "be/src/olap/rowset/alpha_rowset_reader.h", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxMjoyMDozMlrOFZiQig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwNjowOTo0MlrOFZlxAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMyMDAxMA==", "bodyText": "why not use use RowCursorWithOrdinal as element of queue. If then, there is no need to record ordinal.", "url": "https://github.com/apache/incubator-doris/pull/2632#discussion_r362320010", "createdAt": "2020-01-01T12:20:32Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/alpha_rowset_reader.h", "diffHunk": "@@ -103,6 +128,9 @@ class AlphaRowsetReader : public RowsetReader {\n     RowsetReaderContext* _current_read_context;\n     OlapReaderStatistics _owned_stats;\n     OlapReaderStatistics* _stats = &_owned_stats;\n+\n+    // a priority queue for merging rowsets\n+    std::priority_queue<RowCursorWithOrdinal, vector<RowCursorWithOrdinal>, RowCursorWithOrdinalComparator> _merge_queue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a83b447feb1ae2ff62266254a4b8bbadb7788f9"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM3NzQ3Mw==", "bodyText": "I removed the RowCursorWithOrdinal, and use MergeContext directly", "url": "https://github.com/apache/incubator-doris/pull/2632#discussion_r362377473", "createdAt": "2020-01-02T06:09:42Z", "author": {"login": "morningman"}, "path": "be/src/olap/rowset/alpha_rowset_reader.h", "diffHunk": "@@ -103,6 +128,9 @@ class AlphaRowsetReader : public RowsetReader {\n     RowsetReaderContext* _current_read_context;\n     OlapReaderStatistics _owned_stats;\n     OlapReaderStatistics* _stats = &_owned_stats;\n+\n+    // a priority queue for merging rowsets\n+    std::priority_queue<RowCursorWithOrdinal, vector<RowCursorWithOrdinal>, RowCursorWithOrdinalComparator> _merge_queue;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMyMDAxMA=="}, "originalCommit": {"oid": "8a83b447feb1ae2ff62266254a4b8bbadb7788f9"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2264, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}