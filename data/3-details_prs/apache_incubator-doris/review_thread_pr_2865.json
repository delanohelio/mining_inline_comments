{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNzg2NTIw", "number": 2865, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwODoyMzowN1rODeQplA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNzowODoyOVrODfETEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDU2NjYwOnYy", "diffSide": "RIGHT", "path": "be/src/exec/es/es_query_builder.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwODoyMzowN1rOFnT4Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwODoyMzowN1rOFnT4Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2NDQyMw==", "bodyText": "How about abc_123 ?", "url": "https://github.com/apache/incubator-doris/pull/2865#discussion_r376764423", "createdAt": "2020-02-09T08:23:07Z", "author": {"login": "wuyunfeng"}, "path": "be/src/exec/es/es_query_builder.cpp", "diffHunk": "@@ -110,8 +110,17 @@ void WildCardQueryBuilder::to_json(rapidjson::Document* document, rapidjson::Val\n }\n WildCardQueryBuilder::WildCardQueryBuilder(const ExtLikePredicate& like_predicate) : _field(like_predicate.col.name) {\n     _like_value = like_predicate.value.to_string();\n-    std::replace(_like_value.begin(), _like_value.end(), '_', '?');\n-    std::replace(_like_value.begin(), _like_value.end(), '%', '*');\n+    // example of translation :\n+    //      abc\\_123 ===> abc?123", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "879af5c3ebc1eb04f0f14b8f27a141afbc3535d7"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDU2NzA0OnYy", "diffSide": "RIGHT", "path": "be/src/exec/es_http_scan_node.cpp", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwODoyNDowMlrOFnT4Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNzoxNTo0OFrOFnb7xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2NDQ3OA==", "bodyText": "This comment seems not related with this PR?", "url": "https://github.com/apache/incubator-doris/pull/2865#discussion_r376764478", "createdAt": "2020-02-09T08:24:02Z", "author": {"login": "wuyunfeng"}, "path": "be/src/exec/es_http_scan_node.cpp", "diffHunk": "@@ -166,6 +166,11 @@ Status EsHttpScanNode::start_scanners() {\n }\n \n Status EsHttpScanNode::collect_scanners_status() {\n+    // NOTE. if open() was called, but set_range() was NOT called for some reason.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "879af5c3ebc1eb04f0f14b8f27a141afbc3535d7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NjQ1NA==", "bodyText": "Yes. it's last pr i commited. it was committed failed at that time", "url": "https://github.com/apache/incubator-doris/pull/2865#discussion_r376896454", "createdAt": "2020-02-10T07:15:48Z", "author": {"login": "blackfox1983"}, "path": "be/src/exec/es_http_scan_node.cpp", "diffHunk": "@@ -166,6 +166,11 @@ Status EsHttpScanNode::start_scanners() {\n }\n \n Status EsHttpScanNode::collect_scanners_status() {\n+    // NOTE. if open() was called, but set_range() was NOT called for some reason.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2NDQ3OA=="}, "originalCommit": {"oid": "879af5c3ebc1eb04f0f14b8f27a141afbc3535d7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzOTAyODY3OnYy", "diffSide": "RIGHT", "path": "be/src/exec/es/es_query_builder.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNzowODoyOVrOFojp9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNzowODoyOVrOFojp9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA3MTU0MA==", "bodyText": "Can we remove #include <boost/algorithm/string/replace.hpp> in this file?", "url": "https://github.com/apache/incubator-doris/pull/2865#discussion_r378071540", "createdAt": "2020-02-12T07:08:29Z", "author": {"login": "wuyunfeng"}, "path": "be/src/exec/es/es_query_builder.cpp", "diffHunk": "@@ -110,8 +110,19 @@ void WildCardQueryBuilder::to_json(rapidjson::Document* document, rapidjson::Val\n }\n WildCardQueryBuilder::WildCardQueryBuilder(const ExtLikePredicate& like_predicate) : _field(like_predicate.col.name) {\n     _like_value = like_predicate.value.to_string();\n-    std::replace(_like_value.begin(), _like_value.end(), '_', '?');\n-    std::replace(_like_value.begin(), _like_value.end(), '%', '*');\n+    // example of translation :\n+    //      abc_123  ===> abc?123\n+    //      abc%ykz  ===> abc*123\n+    //      abc\\\\_123 ===> abc\\\\_123\n+    //      abc\\\\%123 ===> abc\\\\%123\n+    // NOTE. user must input sql like 'abc\\\\_123' or 'abc\\\\%ykz'\n+    for (int i = 0; i< _like_value.size(); i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfbb92135f8af5235e902a4342afbb0e2670861d"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2209, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}