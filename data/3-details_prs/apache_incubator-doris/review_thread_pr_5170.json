{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NDMzODA0", "number": 5170, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODoyMToyM1rOFKpmzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMzozMDozNFrOFMYGkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NzExNzU5OnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODoyMToyM1rOINcv2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODoyMToyM1rOINcv2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3MzQwMg==", "bodyText": "If we use session variable, there is no need to add this config.\nI think session variable is enough.", "url": "https://github.com/apache/incubator-doris/pull/5170#discussion_r550973402", "createdAt": "2021-01-03T08:21:23Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1311,4 +1311,9 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_fe_heartbeat_by_thrift = false;\n+\n+    /**\n+     * default value for insert_visible_timeout_ms\n+     */\n+    public static long default_insert_visible_timeout_ms = 10000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f78cfac6d67974ae9a8c4e16aa7ca682d1c92d0"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NzExNzgyOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/qe/SessionVariable.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODoyMTo0NVrOINcv-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODoyMTo0NVrOINcv-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3MzQzNQ==", "bodyText": "Set default to 10000, and the config is not used any more.", "url": "https://github.com/apache/incubator-doris/pull/5170#discussion_r550973435", "createdAt": "2021-01-03T08:21:45Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/qe/SessionVariable.java", "diffHunk": "@@ -112,6 +112,12 @@\n     // when true, the partition column must be set to NOT NULL.\n     public static final String ALLOW_PARTITION_COLUMN_NULLABLE = \"allow_partition_column_nullable\";\n \n+    // max ms to wait transaction publish finish when exec insert stmt.\n+    public static final String INSERT_VISIBLE_TIMEOUT_MS = \"insert_visible_timeout_ms\";\n+\n+    @VariableMgr.VarAttr(name = INSERT_VISIBLE_TIMEOUT_MS)\n+    private long insertVisibleTimeoutMs = -1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f78cfac6d67974ae9a8c4e16aa7ca682d1c92d0"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4NTIyMTMxOnYy", "diffSide": "RIGHT", "path": "gensrc/thrift/FrontendService.thrift", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMzozMDozNFrOIQEfjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwNjowNTo0N1rOIQGwiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzcyMTc0Mg==", "bodyText": "Should it be set in MasterOpExecutor?", "url": "https://github.com/apache/incubator-doris/pull/5170#discussion_r553721742", "createdAt": "2021-01-08T03:30:34Z", "author": {"login": "EmmyMiao87"}, "path": "gensrc/thrift/FrontendService.thrift", "diffHunk": "@@ -443,6 +443,7 @@ struct TMasterOpRequest {\n     15: optional i32 stmtIdx  // the idx of the sql in multi statements\n     16: optional PaloInternalService.TQueryOptions query_options\n     17: optional Types.TUniqueId query_id // when this is a query, we translate this query id to master\n+    18: optional i64 insert_visible_timeout_ms", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f09339912bd5177b6f33ccb9a2f5460cbaa81da5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzc1ODg1OQ==", "bodyText": "We also can add a hint insert /*+ SET_VAR(insert_visible_timeout_ms = 20000)*/ xxx like select hint select /*+ SET_VAR */  and transform this sql with hint to master.\nAny other better place?", "url": "https://github.com/apache/incubator-doris/pull/5170#discussion_r553758859", "createdAt": "2021-01-08T06:05:47Z", "author": {"login": "liutang123"}, "path": "gensrc/thrift/FrontendService.thrift", "diffHunk": "@@ -443,6 +443,7 @@ struct TMasterOpRequest {\n     15: optional i32 stmtIdx  // the idx of the sql in multi statements\n     16: optional PaloInternalService.TQueryOptions query_options\n     17: optional Types.TUniqueId query_id // when this is a query, we translate this query id to master\n+    18: optional i64 insert_visible_timeout_ms", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzcyMTc0Mg=="}, "originalCommit": {"oid": "f09339912bd5177b6f33ccb9a2f5460cbaa81da5"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 863, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}