{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODQ0ODkz", "number": 2685, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0Nzo0MVrODWLBqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNzoxOFrODWeg1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc1OTE1OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0Nzo0MVrOFax5eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0Nzo0MVrOFax5eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDgyNA==", "bodyText": "You can write supported mysql version like mysql 5.1, 5.2", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624824", "createdAt": "2020-01-07T07:47:41Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H\n+#define _MYDB_H\n+#include<iostream>\n+#include<string>\n+#include<mysql/mysql.h>\n+using namespace std;\n+\n+class MyDB", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc1OTY2OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0ODowMFrOFax5xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0ODowMFrOFax5xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDkwMQ==", "bodyText": "const string& sql", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624901", "createdAt": "2020-01-07T07:48:00Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection\n+    if(mysql==NULL)\n+    {\n+        cout<<\"Error:\"<<mysql_error(mysql);\n+    }\n+}\n+\n+MyDB::~MyDB()\n+{\n+    if(mysql!=NULL)  //close connection\n+    {\n+        mysql_close(mysql);\n+    }\n+}\n+\n+bool MyDB::initDB(string host, string user, string passwd, string db_name, int port, string sock)\n+{\n+    // create connection\n+    mysql = mysql_real_connect(mysql, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if(mysql == NULL)\n+    {\n+        cout << \"Error: \" << mysql_error(mysql);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool MyDB::exeSQL(string sql)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc2MDAyOnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0ODoxMFrOFax58w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0ODoxMFrOFax58w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDk0Nw==", "bodyText": "const string& host, const string& user", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624947", "createdAt": "2020-01-07T07:48:10Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection\n+    if(mysql==NULL)\n+    {\n+        cout<<\"Error:\"<<mysql_error(mysql);\n+    }\n+}\n+\n+MyDB::~MyDB()\n+{\n+    if(mysql!=NULL)  //close connection\n+    {\n+        mysql_close(mysql);\n+    }\n+}\n+\n+bool MyDB::initDB(string host, string user, string passwd, string db_name, int port, string sock)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc2MzMwOnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1MDowM1rOFax7-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1MDowM1rOFax7-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNTQ2Nw==", "bodyText": "using std::string instead, C++ style not recommend using namespace", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363625467", "createdAt": "2020-01-07T07:50:03Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc2ODA4OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mjo0NVrOFax-3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mjo0NVrOFax-3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjIwNw==", "bodyText": "mysql = mysql_init(NULL);\nif (mysql == NULL) {\nstd::cout << \"Error:\" << mysql_error(mysql);\n}", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626207", "createdAt": "2020-01-07T07:52:45Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc2OTk3OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mzo0NlrOFax_9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mzo0NlrOFax_9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjQ4NA==", "bodyText": "#ifndef SAMPLES_CONNECT_CPP_MYDB_H\n#define SAMPLES_CONNECT_CPP_MYDB_H", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626484", "createdAt": "2020-01-07T07:53:46Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTc3MDI0OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/MyDB.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mzo1OVrOFayAIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo1Mzo1OVrOFayAIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjUyOA==", "bodyText": "#include \n#include", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626528", "createdAt": "2020-01-07T07:53:59Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H\n+#define _MYDB_H\n+#include<iostream>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241d2a9f377c711260211773957e12e8379de70"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NjYzMzY1OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/my_doris.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNDowMDoyMlrOFa6JJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNDowMDoyMlrOFa6JJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1OTkxMA==", "bodyText": "maybe better to print the num_rows?", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363759910", "createdAt": "2020-01-07T14:00:22Z", "author": {"login": "morningman"}, "path": "samples/connect/cpp/my_doris.cpp", "diffHunk": "@@ -0,0 +1,156 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ my_doris.cpp -o my_doris `mysql_config --cflags --libs`\n+        2. ./my_doris\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include <iostream>\n+#include <string>\n+#include \"doris.h\"\n+\n+using std::string;\n+\n+Doris::Doris()\n+{\n+    doris = mysql_init(NULL);   //init connection\n+    if (doris == NULL)\n+    {\n+        std::cout << \"Error:\" << mysql_error(doris);\n+    }\n+}\n+\n+Doris::~Doris()\n+{\n+    if (doris != NULL)  //close connection\n+    {\n+        mysql_close(doris);\n+    }\n+}\n+\n+bool Doris::initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock)\n+{\n+    // create connection\n+    doris = mysql_real_connect(doris, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if (doris == NULL)\n+    {\n+        std::cout << \"Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool Doris::exeSQL(const string& sql)\n+{\n+    if (mysql_query(doris, sql.c_str()))\n+    {\n+        std::cout << \"Query Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    else\n+    {\n+        result = mysql_store_result(doris);\n+        if (result)\n+        {\n+           int num_fields = mysql_num_fields(result);\n+           int num_rows = mysql_num_rows(result);\n+           for (int i = 0; i < num_rows; i++)\n+            {\n+                row = mysql_fetch_row(result);\n+                if (row < 0) break;\n+\n+                for (int j = 0; j < num_fields; j++)\n+                {\n+                    std::cout << row[j] << \"\\t\";\n+                }\n+                std::cout << std::endl;\n+            }\n+\n+        }\n+        else\n+        {\n+            if (mysql_field_count(doris) == 0)\n+            {\n+                int num_rows = mysql_affected_rows(doris);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97c3a65f3072a256d38ad3757840a7f67e308169"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODMzNjY3OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/my_doris.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMTozODozMFrOFbKuEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMTozODozMFrOFbKuEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzMTUwNQ==", "bodyText": "Doris::Doris() {\n}\nlike this style", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364031505", "createdAt": "2020-01-08T01:38:30Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/my_doris.cpp", "diffHunk": "@@ -17,82 +17,84 @@\n \n /*************************************************************************\n > Useage:\n-        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n-        2. ./MyDB\n+        1. g++ my_doris.cpp -o my_doris `mysql_config --cflags --libs`\n+        2. ./my_doris\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n ************************************************************************/\n \n-#include<iostream>\n-#include<string>\n-#include \"MyDB.h\"\n+#include <iostream>\n+#include <string>\n+#include \"doris.h\"\n \n-using namespace std;\n+using std::string;\n \n-MyDB::MyDB()\n+Doris::Doris()\n {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97c3a65f3072a256d38ad3757840a7f67e308169"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODMzNzI1OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMTozODo1NlrOFbKuaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMTozODo1NlrOFbKuaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzMTU5Mg==", "bodyText": "MYSQL* doris;\nMYSQL_RES* result;", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364031592", "createdAt": "2020-01-08T01:38:56Z", "author": {"login": "chaoyli"}, "path": "samples/connect/cpp/doris.h", "diffHunk": "@@ -15,24 +15,26 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-#ifndef _MYDB_H\n-#define _MYDB_H\n-#include<iostream>\n-#include<string>\n-#include<mysql/mysql.h>\n-using namespace std;\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_H\n+#define SAMPLES_CONNECT_CPP_DORIS_H\n+#include <iostream>\n+#include <string>\n+#include <mysql/mysql.h>\n \n-class MyDB\n+using std::string;\n+\n+class Doris\n {\n     public:\n-        MyDB();\n-        ~MyDB();\n-        bool initDB(string host,string user,string passwd,string db_name,int port,string sock); // connect to mysql\n-        bool exeSQL(string sql);   // excute sql\n+        Doris();\n+        ~Doris();\n+        bool initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock); // connect to doris\n+        bool exeSQL(const string& sql);   // excute sql\n     private:\n-        MYSQL *mysql;\n-        MYSQL_RES *result;\n-        MYSQL_ROW row;\n+        MYSQL *doris;     // mysql handle", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97c3a65f3072a256d38ad3757840a7f67e308169"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk0MTE5OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzowMVrOFbQYGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzowMVrOFbQYGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDE4Nw==", "bodyText": "better to rename it to DorisClient", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124187", "createdAt": "2020-01-08T09:03:01Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include \"doris_client.h\"\n+\n+#include <iostream>\n+#include <string>\n+\n+using std::string;\n+\n+Doris::Doris() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk0MTM2OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzowNFrOFbQYLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzowNFrOFbQYLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDIwNw==", "bodyText": "no need to have this else", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124207", "createdAt": "2020-01-08T09:03:04Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include \"doris_client.h\"\n+\n+#include <iostream>\n+#include <string>\n+\n+using std::string;\n+\n+Doris::Doris() {\n+    //init connection\n+    doris = mysql_init(NULL);\n+    if (doris == NULL) {\n+        std::cout << \"Error:\" << mysql_error(doris);\n+    }\n+}\n+\n+Doris::~Doris() {\n+    //close connection\n+    if (doris != NULL) {\n+        mysql_close(doris);\n+    }\n+}\n+\n+bool Doris::initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock) {\n+    // create connection\n+    doris = mysql_real_connect(doris, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if (doris == NULL) {\n+        std::cout << \"Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool Doris::exeSQL(const string& sql) {\n+    if (mysql_query(doris, sql.c_str())) {\n+        std::cout << \"Query Error: \" << mysql_error(doris);\n+        return false;\n+    } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk0Mjk2OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzo0MFrOFbQZJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowMzo0MFrOFbQZJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDQ1Mg==", "bodyText": "better to give a defalut value and this can rename doris to _client.\nWe prefer a leading _ for member variable name", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124452", "createdAt": "2020-01-08T09:03:40Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,\n+                  const string& db_name, int port, const string& sock);\n+    // excute sql\n+    bool exeSQL(const string& sql);\n+private:\n+    // mysql handle\n+    MYSQL* doris;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk0NDAzOnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNDowOFrOFbQZzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNDowOFrOFbQZzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDYyMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                bool initDoris(const string& host, const string& user, const string& passwd,\n          \n          \n            \n                bool init(const string& host, const string& user, const string& passwd,", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124623", "createdAt": "2020-01-08T09:04:08Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk0NDI2OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNDoxNVrOFbQZ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNDoxNVrOFbQZ9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDY2Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                bool exeSQL(const string& sql);\n          \n          \n            \n                bool exec(const string& sql);", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124662", "createdAt": "2020-01-08T09:04:15Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,\n+                  const string& db_name, int port, const string& sock);\n+    // excute sql\n+    bool exeSQL(const string& sql);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0ODk1MTg5OnYy", "diffSide": "RIGHT", "path": "samples/connect/cpp/doris_client.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNzoxOFrOFbQe5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTowNzoxOFrOFbQe5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNTkyNA==", "bodyText": "Should tell users what will this program do.", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364125924", "createdAt": "2020-01-08T09:07:18Z", "author": {"login": "imay"}, "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bd1298359d49be54821f715331477f8655943b9"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2298, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}