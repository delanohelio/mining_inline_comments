{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjU0MTM3", "number": 3924, "title": "[Doris On ES][Docs] update document for best practices", "bodyText": "Add best practices for #3559 and update feature for #3901", "createdAt": "2020-06-22T03:09:54Z", "url": "https://github.com/apache/incubator-doris/pull/3924", "merged": true, "mergeCommit": {"oid": "e5da108110549caabc55da6d9a95baeafbe8bfab"}, "closed": true, "closedAt": "2020-06-23T05:39:57Z", "author": {"login": "wuyunfeng"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctoAQ_AH2gAyNDM3NjU0MTM3Ojk0ZDIzOWE5MDkyNjllNzU0NzgwMmE5N2Y2MmIwN2YyZGQzYWFkNDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct-wD4gFqTQzNTQ1NTcwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94d239a909269e7547802a97f62b07f2dd3aad46", "author": {"user": {"login": "wuyunfeng", "name": "Yunfeng,Wu"}}, "url": "https://github.com/apache/incubator-doris/commit/94d239a909269e7547802a97f62b07f2dd3aad46", "committedDate": "2020-06-22T03:09:10Z", "message": "[Doris On ES][Docs] update document for best practices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0", "author": {"user": {"login": "wuyunfeng", "name": "Yunfeng,Wu"}}, "url": "https://github.com/apache/incubator-doris/commit/c88152cc56ec693cef64851036bbeca031c34ce0", "committedDate": "2020-06-22T03:11:11Z", "message": "[Doris On ES][Docs] update document for best practices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTgzMTg4", "url": "https://github.com/apache/incubator-doris/pull/3924#pullrequestreview-434583188", "createdAt": "2020-06-22T03:31:08Z", "commit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzozMTowOFrOGmw9rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzozMTowOFrOGmw9rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMwMTI5Mw==", "bodyText": "_id\u5143\uff1f", "url": "https://github.com/apache/incubator-doris/pull/3924#discussion_r443301293", "createdAt": "2020-06-22T03:31:08Z", "author": {"login": "wutiangan"}, "path": "docs/zh-CN/extending-doris/doris-on-es.md", "diffHunk": "@@ -449,6 +449,65 @@ select * from es_table where esquery(k4, ' {\n \n 4. Doris\u8ba1\u7b97\u5b8c\u7ed3\u679c\u540e\uff0c\u8fd4\u56de\u7ed9\u7528\u6237\n \n+## \u6700\u4f73\u5b9e\u8df5\n+\n+### \u65f6\u95f4\u7c7b\u578b\u5b57\u6bb5\u4f7f\u7528\u5efa\u8bae\n+\n+\u5728ES\u4e2d\uff0c\u65f6\u95f4\u7c7b\u578b\u7684\u5b57\u6bb5\u4f7f\u7528\u5341\u5206\u7075\u6d3b\uff0c\u4f46\u662f\u5728Doris On ES\u4e2d\u5982\u679c\u5bf9\u65f6\u95f4\u7c7b\u578b\u5b57\u6bb5\u7684\u7c7b\u578b\u8bbe\u7f6e\u4e0d\u5f53\uff0c\u5219\u4f1a\u9020\u6210\u8fc7\u6ee4\u6761\u4ef6\u65e0\u6cd5\u4e0b\u63a8\n+\n+\u521b\u5efa\u7d22\u5f15\u65f6\u5bf9\u65f6\u95f4\u7c7b\u578b\u683c\u5f0f\u7684\u8bbe\u7f6e\u505a\u6700\u5927\u7a0b\u5ea6\u7684\u683c\u5f0f\u517c\u5bb9:\n+\n+```\n+ \"dt\": {\n+     \"type\": \"date\",\n+     \"format\": \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\"\n+ }\n+```\n+\n+\u5728Doris\u4e2d\u5efa\u7acb\u8be5\u5b57\u6bb5\u65f6\u5efa\u8bae\u8bbe\u7f6e\u4e3a`date`\u6216`datetime`,\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u4e3a`varchar`\u7c7b\u578b, \u4f7f\u7528\u5982\u4e0bSQL\u8bed\u53e5\u90fd\u53ef\u4ee5\u76f4\u63a5\u5c06\u8fc7\u6ee4\u6761\u4ef6\u4e0b\u63a8\u81f3ES\uff1a\n+\n+```\n+select * from doe where k2 > '2020-06-21';\n+\n+select * from doe where k2 < '2020-06-21 12:00:00'; \n+\n+select * from doe where k2 < 1593497011; \n+\n+select * from doe where k2 < now();\n+\n+select * from doe where k2 < date_format(now(), '%Y-%m-%d');\n+```\n+\n+\u6ce8\u610f:\n+\n+\u5728ES\u4e2d\u5982\u679c\u4e0d\u5bf9\u65f6\u95f4\u7c7b\u578b\u7684\u5b57\u6bb5\u8bbe\u7f6e`format`, \u9ed8\u8ba4\u7684\u65f6\u95f4\u7c7b\u578b\u5b57\u6bb5\u683c\u5f0f\u4e3a\n+\n+```\n+strict_date_optional_time||epoch_millis\n+```\n+\n+### \u83b7\u53d6ES\u5143\u6570\u636e\u5b57\u6bb5`_id`\n+\n+\u5bfc\u5165\u6587\u6863\u5728\u4e0d\u6307\u5b9a`_id`\u7684\u60c5\u51b5\u4e0bES\u4f1a\u7ed9\u6bcf\u4e2a\u6587\u6863\u5206\u914d\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684`_id`\u5143, \u7528\u6237\u4e5f\u53ef\u4ee5\u5728\u5bfc\u5165\u65f6\u4e3a\u6587\u6863\u6307\u5b9a\u4e00\u4e2a\u542b\u6709\u7279\u6b8a\u4e1a\u52a1\u610f\u4e49\u7684`_id`; \u5982\u679c\u9700\u8981\u5728Doris On ES\u4e2d\u83b7\u53d6\u8be5\u5b57\u6bb5\u503c\uff0c\u5efa\u8868\u65f6\u53ef\u4ee5\u589e\u52a0\u7c7b\u578b\u4e3a`varchar`\u7684`_id`\u5b57\u6bb5\uff1a", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTgzMjk4", "url": "https://github.com/apache/incubator-doris/pull/3924#pullrequestreview-434583298", "createdAt": "2020-06-22T03:31:40Z", "commit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTgzNDQ4", "url": "https://github.com/apache/incubator-doris/pull/3924#pullrequestreview-434583448", "createdAt": "2020-06-22T03:32:19Z", "commit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzozMjoyMFrOGmw-fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzozMjoyMFrOGmw-fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMwMTUwMQ==", "bodyText": "\u80fd\u5426\u8bbe\u7f6e\u6210char\uff1f", "url": "https://github.com/apache/incubator-doris/pull/3924#discussion_r443301501", "createdAt": "2020-06-22T03:32:20Z", "author": {"login": "wutiangan"}, "path": "docs/zh-CN/extending-doris/doris-on-es.md", "diffHunk": "@@ -449,6 +449,65 @@ select * from es_table where esquery(k4, ' {\n \n 4. Doris\u8ba1\u7b97\u5b8c\u7ed3\u679c\u540e\uff0c\u8fd4\u56de\u7ed9\u7528\u6237\n \n+## \u6700\u4f73\u5b9e\u8df5\n+\n+### \u65f6\u95f4\u7c7b\u578b\u5b57\u6bb5\u4f7f\u7528\u5efa\u8bae\n+\n+\u5728ES\u4e2d\uff0c\u65f6\u95f4\u7c7b\u578b\u7684\u5b57\u6bb5\u4f7f\u7528\u5341\u5206\u7075\u6d3b\uff0c\u4f46\u662f\u5728Doris On ES\u4e2d\u5982\u679c\u5bf9\u65f6\u95f4\u7c7b\u578b\u5b57\u6bb5\u7684\u7c7b\u578b\u8bbe\u7f6e\u4e0d\u5f53\uff0c\u5219\u4f1a\u9020\u6210\u8fc7\u6ee4\u6761\u4ef6\u65e0\u6cd5\u4e0b\u63a8\n+\n+\u521b\u5efa\u7d22\u5f15\u65f6\u5bf9\u65f6\u95f4\u7c7b\u578b\u683c\u5f0f\u7684\u8bbe\u7f6e\u505a\u6700\u5927\u7a0b\u5ea6\u7684\u683c\u5f0f\u517c\u5bb9:\n+\n+```\n+ \"dt\": {\n+     \"type\": \"date\",\n+     \"format\": \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\"\n+ }\n+```\n+\n+\u5728Doris\u4e2d\u5efa\u7acb\u8be5\u5b57\u6bb5\u65f6\u5efa\u8bae\u8bbe\u7f6e\u4e3a`date`\u6216`datetime`,\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u4e3a`varchar`\u7c7b\u578b, \u4f7f\u7528\u5982\u4e0bSQL\u8bed\u53e5\u90fd\u53ef\u4ee5\u76f4\u63a5\u5c06\u8fc7\u6ee4\u6761\u4ef6\u4e0b\u63a8\u81f3ES\uff1a", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c88152cc56ec693cef64851036bbeca031c34ce0"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99dfba01fbade017133136e981825673d0fd704d", "author": {"user": {"login": "wuyunfeng", "name": "Yunfeng,Wu"}}, "url": "https://github.com/apache/incubator-doris/commit/99dfba01fbade017133136e981825673d0fd704d", "committedDate": "2020-06-22T03:32:54Z", "message": "[Doris On ES][Docs] update document for best practices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f36f2b6736e6c6348aeddfab206296e4ac5a3037", "author": {"user": {"login": "wuyunfeng", "name": "Yunfeng,Wu"}}, "url": "https://github.com/apache/incubator-doris/commit/f36f2b6736e6c6348aeddfab206296e4ac5a3037", "committedDate": "2020-06-22T06:16:07Z", "message": "[Doris On ES][Docs] update document for best practices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NDU1NzA0", "url": "https://github.com/apache/incubator-doris/pull/3924#pullrequestreview-435455704", "createdAt": "2020-06-23T05:39:17Z", "commit": {"oid": "f36f2b6736e6c6348aeddfab206296e4ac5a3037"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2154, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}