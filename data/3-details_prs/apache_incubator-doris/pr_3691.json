{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMTQ4OTc1", "number": 3691, "title": "[refactor] Simple refactor on class Reader", "bodyText": "This is a simple refactor patch on class Reader without any functional changes.\nMain refactor points:\n\nRemove some useless return value\nUse range loop\nUse empty() instead of size() for some STL containers size judgement\nUse in-class initialization instead of initialize in constructor function\nSome other small refactor", "createdAt": "2020-05-26T11:31:19Z", "url": "https://github.com/apache/incubator-doris/pull/3691", "merged": true, "mergeCommit": {"oid": "73c3de43138e9014ff2aed38ffc995fd6307727f"}, "closed": true, "closedAt": "2020-06-03T11:55:54Z", "author": {"login": "acelyc111"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclC_dIAH2gAyNDIzMTQ4OTc1OjgyYzBlZGU0MGIyYTRmZjM1ZDNkZTZiM2E5ZWIxZjRlM2JjYzRkZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnAm3lgFqTQyMTg1ODk4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "82c0ede40b2a4ff35d3de6b3a9eb1f4e3bcc4df0", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/82c0ede40b2a4ff35d3de6b3a9eb1f4e3bcc4df0", "committedDate": "2020-05-26T11:30:24Z", "message": "[refactor] Simple refactor on class Reader\n\nThis is a simple refactor patch on class Reader without any functional changes.\nMain refactor points:\n- Remove some useless return value\n- Move some class member variables to function's local scope variables\n- Use range loop\n- Use empty() instead of size() for some STL containers size judgement\n- Use in-class initialization instead of initialize in constructor function\n- Some other small refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjYyNDU0", "url": "https://github.com/apache/incubator-doris/pull/3691#pullrequestreview-418262454", "createdAt": "2020-05-26T12:48:36Z", "commit": {"oid": "82c0ede40b2a4ff35d3de6b3a9eb1f4e3bcc4df0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzU5NTMx", "url": "https://github.com/apache/incubator-doris/pull/3691#pullrequestreview-418359531", "createdAt": "2020-05-26T14:32:25Z", "commit": {"oid": "82c0ede40b2a4ff35d3de6b3a9eb1f4e3bcc4df0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozMjoyNlrOGahIlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozMjoyNlrOGahIlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ1OTAyOA==", "bodyText": "Is it safe to refer a local variable is_lower_keys_included?\nWill the local is_lower_keys_included be deconstructed after this method?", "url": "https://github.com/apache/incubator-doris/pull/3691#discussion_r430459028", "createdAt": "2020-05-26T14:32:26Z", "author": {"login": "morningman"}, "path": "be/src/olap/reader.cpp", "diffHunk": "@@ -532,33 +521,31 @@ OLAPStatus Reader::_capture_rs_readers(const ReaderParams& read_params) {\n         }\n     }\n \n-    _reader_context.reader_type = read_params.reader_type;\n-    _reader_context.tablet_schema = &_tablet->tablet_schema();\n-    _reader_context.need_ordered_result = need_ordered_result;\n-    _reader_context.return_columns = &_return_columns;\n-    _reader_context.seek_columns = &_seek_columns;\n-    _reader_context.load_bf_columns = &_load_bf_columns;\n-    _reader_context.conditions = &_conditions;\n-    _reader_context.predicates = &_col_predicates;\n-    _reader_context.lower_bound_keys = &_keys_param.start_keys;\n-    _reader_context.is_lower_keys_included = &_is_lower_keys_included;\n-    _reader_context.upper_bound_keys = &_keys_param.end_keys;\n-    _reader_context.is_upper_keys_included = &_is_upper_keys_included;\n-    _reader_context.delete_handler = &_delete_handler;\n-    _reader_context.stats = &_stats;\n-    _reader_context.runtime_state = read_params.runtime_state;\n-    _reader_context.use_page_cache = read_params.use_page_cache;\n+    RowsetReaderContext reader_context;\n+    reader_context.reader_type = read_params.reader_type;\n+    reader_context.tablet_schema = &_tablet->tablet_schema();\n+    reader_context.need_ordered_result = need_ordered_result;\n+    reader_context.return_columns = &_return_columns;\n+    reader_context.seek_columns = &_seek_columns;\n+    reader_context.load_bf_columns = &_load_bf_columns;\n+    reader_context.conditions = &_conditions;\n+    reader_context.predicates = &_col_predicates;\n+    reader_context.lower_bound_keys = &_keys_param.start_keys;\n+    reader_context.is_lower_keys_included = &is_lower_keys_included;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c0ede40b2a4ff35d3de6b3a9eb1f4e3bcc4df0"}, "originalPosition": 231}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "385f7f98cc097d21ba16c54a0a02fcc19d07250d", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/385f7f98cc097d21ba16c54a0a02fcc19d07250d", "committedDate": "2020-05-26T15:22:15Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxODU4OTg3", "url": "https://github.com/apache/incubator-doris/pull/3691#pullrequestreview-421858987", "createdAt": "2020-06-01T13:51:35Z", "commit": {"oid": "385f7f98cc097d21ba16c54a0a02fcc19d07250d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2769, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}