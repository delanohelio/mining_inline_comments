{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNzcyMTMy", "number": 4808, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMjozMjo1MlrOEyoBbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwODowNjozNlrOEzr9ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNTE5OTgxOnYy", "diffSide": "LEFT", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMjozMjo1MlrOHpXySg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNjoyNDoyNFrOHpyqLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MzM3MA==", "bodyText": "when will fe close the socket frequently?", "url": "https://github.com/apache/incubator-doris/pull/4808#discussion_r513143370", "createdAt": "2020-10-28T02:32:52Z", "author": {"login": "chaoyli"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -318,8 +318,10 @@\n      * The connection timeout and socket timeout config for thrift server\n      * The value for thrift_client_timeout_ms is set to be larger than zero to prevent\n      * some hang up problems in java.net.SocketInputStream.socketRead0\n+     * \n+     * make it one hour to avoid fe close the socket so frequently, that be will retry to cost more time\n      */\n-    @ConfField public static int thrift_client_timeout_ms = 30000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8330afaaebdbc4b5d3e623ac3215b27bdb4c800"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU4MzY2MQ==", "bodyText": "in our case, query information_schema.tables.  i find fe would send a TCP RST command(try tcpdump 9020 in fe) to be to close the socket becasuse of thrift_client_timeout_ms is meet, the be log comes \"no more data to read\", the be would retry in 1s(default).", "url": "https://github.com/apache/incubator-doris/pull/4808#discussion_r513583661", "createdAt": "2020-10-28T16:24:24Z", "author": {"login": "francisoliverlee"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -318,8 +318,10 @@\n      * The connection timeout and socket timeout config for thrift server\n      * The value for thrift_client_timeout_ms is set to be larger than zero to prevent\n      * some hang up problems in java.net.SocketInputStream.socketRead0\n+     * \n+     * make it one hour to avoid fe close the socket so frequently, that be will retry to cost more time\n      */\n-    @ConfField public static int thrift_client_timeout_ms = 30000;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MzM3MA=="}, "originalCommit": {"oid": "e8330afaaebdbc4b5d3e623ac3215b27bdb4c800"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNjMzMDYxOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwODowNjozNlrOHrEtFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwODowNjozNlrOHrEtFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkyNzg5Mg==", "bodyText": "The connection timeout and socket timeout config for thrift server\nThe default value for thrift_client_timeout_ms is set to be zero to prevent readtimeout\n\n@ConfField public static int thrift_client_timeout_ms = 0;", "url": "https://github.com/apache/incubator-doris/pull/4808#discussion_r514927892", "createdAt": "2020-10-30T08:06:36Z", "author": {"login": "caiconghui"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -318,8 +318,10 @@\n      * The connection timeout and socket timeout config for thrift server\n      * The value for thrift_client_timeout_ms is set to be larger than zero to prevent\n      * some hang up problems in java.net.SocketInputStream.socketRead0\n+     * ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8330afaaebdbc4b5d3e623ac3215b27bdb4c800"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1009, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}