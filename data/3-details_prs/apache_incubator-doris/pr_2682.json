{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODIzMzYx", "number": 2682, "title": "Fix incompatibility with arm architecture in olap #2645", "bodyText": "Add macros in olap code to be compatible with arm instruction set\nReplace atomic functions  in olap whit gutils/atomicops\n\n#2645", "createdAt": "2020-01-07T04:56:18Z", "url": "https://github.com/apache/incubator-doris/pull/2682", "merged": true, "mergeCommit": {"oid": "852046de2946d31d28a0011fc68c32388b01feed"}, "closed": true, "closedAt": "2020-01-07T11:16:11Z", "author": {"login": "yangzhg"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb36KvDgFqTMzOTAzOTgwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3-3-WgFqTMzOTE3NTIyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDM5ODAy", "url": "https://github.com/apache/incubator-doris/pull/2682#pullrequestreview-339039802", "createdAt": "2020-01-07T05:42:55Z", "commit": {"oid": "25d0118bfd8be2bb4eabf1140b545e74b2a09094"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNTo0Mjo1NVrOFawSzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNTo0NjoyNlrOFawVBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODU0MA==", "bodyText": "uesless?", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363598540", "createdAt": "2020-01-07T05:42:55Z", "author": {"login": "imay"}, "path": "be/src/olap/storage_engine.h", "diffHunk": "@@ -310,6 +308,8 @@ class StorageEngine {\n     uint32_t _min_percentage_of_error_disk;\n     Cache* _file_descriptor_lru_cache;\n     Cache* _index_stream_lru_cache;\n+    uint32_t _max_base_compaction_task_per_disk;\n+    uint32_t _max_cumulative_compaction_task_per_disk;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d0118bfd8be2bb4eabf1140b545e74b2a09094"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODg1NQ==", "bodyText": "prefer std::atomic<int32_t>.", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363598855", "createdAt": "2020-01-07T05:44:56Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/segment_group.h", "diffHunk": "@@ -291,7 +291,7 @@ class SegmentGroup {\n     PUniqueId _load_id;                // load id for segmentgroup\n     int32_t _num_segments;             // number of segments in this segmentgroup\n     bool _index_loaded;                // whether the segmentgroup has been read\n-    atomic_t _ref_count;               // reference count\n+    base::subtle::Atomic64 _ref_count; // reference count", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d0118bfd8be2bb4eabf1140b545e74b2a09094"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5OTExMA==", "bodyText": "Is this can be unified through CpuInfo?", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363599110", "createdAt": "2020-01-07T05:46:26Z", "author": {"login": "imay"}, "path": "be/src/olap/bhp_lib.h", "diffHunk": "@@ -789,6 +790,11 @@ inline int check_sse4_2() {\n     );\n     return ret;\n }\n+#else\n+inline int check_sse4_2() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d0118bfd8be2bb4eabf1140b545e74b2a09094"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25d0118bfd8be2bb4eabf1140b545e74b2a09094", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/25d0118bfd8be2bb4eabf1140b545e74b2a09094", "committedDate": "2020-01-07T04:51:25Z", "message": "Fix incompatibility with arm architecture in olap #2645"}, "afterCommit": {"oid": "8adf260d8db371632125bd3e36e1595db3ec7bff", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/8adf260d8db371632125bd3e36e1595db3ec7bff", "committedDate": "2020-01-07T06:43:17Z", "message": "fix by comment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8adf260d8db371632125bd3e36e1595db3ec7bff", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/8adf260d8db371632125bd3e36e1595db3ec7bff", "committedDate": "2020-01-07T06:43:17Z", "message": "fix by comment"}, "afterCommit": {"oid": "c6c0dc22a9747f3014237c75a625e3e3a987b11e", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/c6c0dc22a9747f3014237c75a625e3e3a987b11e", "committedDate": "2020-01-07T07:10:37Z", "message": "Fix incompatibility with arm architecture in olap #2645"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30bdb03edcd426f57d227f80249dc2a2524e7ddb", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/30bdb03edcd426f57d227f80249dc2a2524e7ddb", "committedDate": "2020-01-07T07:24:14Z", "message": "Fix incompatibility with arm architecture in olap #2645"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a17ca349168422c8445b58b864b48e07ade329fc", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/a17ca349168422c8445b58b864b48e07ade329fc", "committedDate": "2020-01-07T07:20:36Z", "message": "fix by comment"}, "afterCommit": {"oid": "30bdb03edcd426f57d227f80249dc2a2524e7ddb", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/30bdb03edcd426f57d227f80249dc2a2524e7ddb", "committedDate": "2020-01-07T07:24:14Z", "message": "Fix incompatibility with arm architecture in olap #2645"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e9a8665717e8462f6c45d6cac4496cb50f58261", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/4e9a8665717e8462f6c45d6cac4496cb50f58261", "committedDate": "2020-01-07T07:57:21Z", "message": "using std::atomic instead of atomicops"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a0c4101f24ac896433c864452c5e52d26fe555", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/47a0c4101f24ac896433c864452c5e52d26fe555", "committedDate": "2020-01-07T08:01:35Z", "message": "using std::atomic instead of atomicops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDc5Mjgw", "url": "https://github.com/apache/incubator-doris/pull/2682#pullrequestreview-339079280", "createdAt": "2020-01-07T08:02:09Z", "commit": {"oid": "4e9a8665717e8462f6c45d6cac4496cb50f58261"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MTc1MjI0", "url": "https://github.com/apache/incubator-doris/pull/2682#pullrequestreview-339175224", "createdAt": "2020-01-07T11:16:01Z", "commit": {"oid": "47a0c4101f24ac896433c864452c5e52d26fe555"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3883, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}