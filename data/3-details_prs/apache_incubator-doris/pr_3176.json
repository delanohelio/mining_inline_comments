{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMzExNDM3", "number": 3176, "title": "Solve the problem of mv selector when there is having clause in query", "bodyText": "All of columns which belong to top of tupleIds in query shoud be considered in mv selecotr.\nFor example:\nSelect k1 from table group by k1 having sum(v1) >1;\nThe candidate index should contain k1 and v1 columns instread of only k1.\nThe rollup which only has k1 column should not be selected.\nThe issue #3174 describe in detail.", "createdAt": "2020-03-23T10:57:51Z", "url": "https://github.com/apache/incubator-doris/pull/3176", "merged": true, "mergeCommit": {"oid": "c0282bbc58f3ffb4481ebcfb0bae61c7e2614925"}, "closed": true, "closedAt": "2020-03-25T12:42:40Z", "author": {"login": "EmmyMiao87"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQcKXWAH2gAyMzkyMzExNDM3OjhmYTJhMmM0NWQyMzBlOTZhY2M4YTFkZDkzNDU1Y2Q3NTRiNDY4NDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRG2d1gFqTM4MTEwOTA0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8fa2a2c45d230e96acc8a1dd93455cd754b46848", "author": {"user": {"login": "EmmyMiao87", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/8fa2a2c45d230e96acc8a1dd93455cd754b46848", "committedDate": "2020-03-23T10:57:32Z", "message": "Solve the problem of mv selector when there is having clause in query\n\nAll of columns which belong to top of tupleIds in query shoud be considered in mv selecotr.\nFor example:\nSelect k1 from table group by k1 having sum(v1) >1;\nThe candidate index should contain k1 and v1 columns instread of only k1.\nThe rollup which only has k1 column should not be selected.\nThe issue ISSUE-3174 describe in detail."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzcxMzEw", "url": "https://github.com/apache/incubator-doris/pull/3176#pullrequestreview-379371310", "createdAt": "2020-03-23T12:12:45Z", "commit": {"oid": "8fa2a2c45d230e96acc8a1dd93455cd754b46848"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoxMjo0NVrOF6Cq-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoxMjo0NVrOF6Cq-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwNTQ5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (slotDescriptor.isMaterialized() == false) {\n          \n          \n            \n                        if (!slotDescriptor.isMaterialized()) {", "url": "https://github.com/apache/incubator-doris/pull/3176#discussion_r396405496", "createdAt": "2020-03-23T12:12:45Z", "author": {"login": "morningman"}, "path": "fe/src/main/java/org/apache/doris/analysis/TupleDescriptor.java", "diffHunk": "@@ -256,6 +259,31 @@ public void materializeSlots() {\n         for (SlotDescriptor slot: slots) slot.setIsMaterialized(true);\n     }\n \n+    public void getTableNameToColumnNames(Map<String, Set<String>> tupleDescToColumnNames) {\n+        for (SlotDescriptor slotDescriptor : slots) {\n+            if (slotDescriptor.isMaterialized() == false) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fa2a2c45d230e96acc8a1dd93455cd754b46848"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0958c006845ab30c5a8af8477fb5dbfe250dbbf9", "author": {"user": {"login": "EmmyMiao87", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/0958c006845ab30c5a8af8477fb5dbfe250dbbf9", "committedDate": "2020-03-24T06:30:48Z", "message": "change condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cfbbb2aac368a1825e81bf621dff969c9dab95", "author": {"user": {"login": "EmmyMiao87", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/12cfbbb2aac368a1825e81bf621dff969c9dab95", "committedDate": "2020-03-25T03:56:48Z", "message": "Fix ut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTA5MDQz", "url": "https://github.com/apache/incubator-doris/pull/3176#pullrequestreview-381109043", "createdAt": "2020-03-25T12:41:43Z", "commit": {"oid": "12cfbbb2aac368a1825e81bf621dff969c9dab95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3363, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}