{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNjcxNjM1", "number": 3699, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjoxOToyNlrOEAD7jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjo1NDo1MVrOEAEugw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NDk5ODUyOnYy", "diffSide": "RIGHT", "path": "be/src/olap/olap_cond.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjoxOToyNlrOGbGnBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjoxOToyNlrOGbGnBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA3MzAzMQ==", "bodyText": "Could you please add some comment for this method. about the meaning of its return.\nAnd you can also modify Chinese comment to English.", "url": "https://github.com/apache/incubator-doris/pull/3699#discussion_r431073031", "createdAt": "2020-05-27T12:19:26Z", "author": {"login": "morningman"}, "path": "be/src/olap/olap_cond.cpp", "diffHunk": "@@ -651,14 +651,10 @@ bool Conditions::delete_conditions_eval(const RowCursor& row) const {\n bool Conditions::rowset_pruning_filter(const std::vector<KeyRange>& zone_maps) const {\n     //\u901a\u8fc7\u6240\u6709\u5217\u4e0a\u7684\u5220\u9664\u6761\u4ef6\u5bf9version\u8fdb\u884c\u8fc7\u6ee4\n     for (auto& cond_it : _columns) {\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && cond_it.first > zone_maps.size()) {\n-            LOG(WARNING) << \"where condition not equal zone maps size. \"\n-                         << \"cond_id=\" << cond_it.first\n-                         << \", zone_map_size=\" << zone_maps.size();\n-            return false;\n-        }\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && !cond_it.second->eval(zone_maps.at(cond_it.first))) {\n-            return true;\n+        if (_cond_column_is_key_or_duplicate(cond_it.second)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48f6b0079e9bf9550873323b8f9203d4cfd0421c"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NTExMTI4OnYy", "diffSide": "RIGHT", "path": "be/src/olap/olap_cond.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjo1MDowMVrOGbHucg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMToxMDo1MFrOGbiYSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5MTMxNA==", "bodyText": "it cores just because of zone_maps.size() == cond_it.first  and zone_maps.at(cond_it.first) returns null ?", "url": "https://github.com/apache/incubator-doris/pull/3699#discussion_r431091314", "createdAt": "2020-05-27T12:50:01Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/olap_cond.cpp", "diffHunk": "@@ -651,14 +651,10 @@ bool Conditions::delete_conditions_eval(const RowCursor& row) const {\n bool Conditions::rowset_pruning_filter(const std::vector<KeyRange>& zone_maps) const {\n     //\u901a\u8fc7\u6240\u6709\u5217\u4e0a\u7684\u5220\u9664\u6761\u4ef6\u5bf9version\u8fdb\u884c\u8fc7\u6ee4\n     for (auto& cond_it : _columns) {\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && cond_it.first > zone_maps.size()) {\n-            LOG(WARNING) << \"where condition not equal zone maps size. \"\n-                         << \"cond_id=\" << cond_it.first\n-                         << \", zone_map_size=\" << zone_maps.size();\n-            return false;\n-        }\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && !cond_it.second->eval(zone_maps.at(cond_it.first))) {\n-            return true;\n+        if (_cond_column_is_key_or_duplicate(cond_it.second)) {\n+            if (cond_it.first < zone_maps.size() && !cond_it.second->eval(zone_maps.at(cond_it.first))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48f6b0079e9bf9550873323b8f9203d4cfd0421c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUyODAwOA==", "bodyText": "Yes, because zone_maps has only one item. zone_maps.at(1) will core dump.", "url": "https://github.com/apache/incubator-doris/pull/3699#discussion_r431528008", "createdAt": "2020-05-28T01:10:50Z", "author": {"login": "chaoyli"}, "path": "be/src/olap/olap_cond.cpp", "diffHunk": "@@ -651,14 +651,10 @@ bool Conditions::delete_conditions_eval(const RowCursor& row) const {\n bool Conditions::rowset_pruning_filter(const std::vector<KeyRange>& zone_maps) const {\n     //\u901a\u8fc7\u6240\u6709\u5217\u4e0a\u7684\u5220\u9664\u6761\u4ef6\u5bf9version\u8fdb\u884c\u8fc7\u6ee4\n     for (auto& cond_it : _columns) {\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && cond_it.first > zone_maps.size()) {\n-            LOG(WARNING) << \"where condition not equal zone maps size. \"\n-                         << \"cond_id=\" << cond_it.first\n-                         << \", zone_map_size=\" << zone_maps.size();\n-            return false;\n-        }\n-        if (_cond_column_is_key_or_duplicate(cond_it.second) && !cond_it.second->eval(zone_maps.at(cond_it.first))) {\n-            return true;\n+        if (_cond_column_is_key_or_duplicate(cond_it.second)) {\n+            if (cond_it.first < zone_maps.size() && !cond_it.second->eval(zone_maps.at(cond_it.first))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5MTMxNA=="}, "originalCommit": {"oid": "48f6b0079e9bf9550873323b8f9203d4cfd0421c"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NTEyODk5OnYy", "diffSide": "RIGHT", "path": "be/src/olap/olap_cond.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjo1NDo1MVrOGbH6PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjo1NDo1MVrOGbH6PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NDMzMw==", "bodyText": "Could you please transform Cninese to English?", "url": "https://github.com/apache/incubator-doris/pull/3699#discussion_r431094333", "createdAt": "2020-05-27T12:54:51Z", "author": {"login": "EmmyMiao87"}, "path": "be/src/olap/olap_cond.cpp", "diffHunk": "@@ -651,14 +651,10 @@ bool Conditions::delete_conditions_eval(const RowCursor& row) const {\n bool Conditions::rowset_pruning_filter(const std::vector<KeyRange>& zone_maps) const {\n     //\u901a\u8fc7\u6240\u6709\u5217\u4e0a\u7684\u5220\u9664\u6761\u4ef6\u5bf9version\u8fdb\u884c\u8fc7\u6ee4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48f6b0079e9bf9550873323b8f9203d4cfd0421c"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1629, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}