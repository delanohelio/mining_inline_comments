{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMTE2NDA3", "number": 4550, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo1Mjo1M1rOEiIRVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo1NToyOVrOEiIYFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MjIyNTQ5OnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo1Mjo1M1rOHP1Eeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowNzoxM1rOHP4q7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MDE4Ng==", "bodyText": "If change this to Config, different FE may has different configuration. So this will result in inconsistency of meta data.\nThis is just a default value filled in for compatibility with old data. I suggest to leave it as FeConstants.default_db_replica_quota_size", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486360186", "createdAt": "2020-09-10T13:52:53Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java", "diffHunk": "@@ -483,7 +483,7 @@ public void readFields(DataInput in) throws IOException {\n         if (Catalog.getCurrentCatalogJournalVersion() >= FeMetaVersion.VERSION_81) {\n             replicaQuotaSize = in.readLong();\n         } else {\n-            replicaQuotaSize = FeConstants.default_db_replica_quota_size;\n+            replicaQuotaSize = Config.default_db_replica_quota_bytes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxOTE4Mw==", "bodyText": "Hi morningman:\nYou are right, I restore the modification of default_db_replica_quota_size.", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486419183", "createdAt": "2020-09-10T15:07:13Z", "author": {"login": "zhaojintaozhao"}, "path": "fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java", "diffHunk": "@@ -483,7 +483,7 @@ public void readFields(DataInput in) throws IOException {\n         if (Catalog.getCurrentCatalogJournalVersion() >= FeMetaVersion.VERSION_81) {\n             replicaQuotaSize = in.readLong();\n         } else {\n-            replicaQuotaSize = FeConstants.default_db_replica_quota_size;\n+            replicaQuotaSize = Config.default_db_replica_quota_bytes;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MDE4Ng=="}, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MjIzODQwOnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo1NDo1MVrOHP1Ngw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowNzozMlrOHP4rwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MjQ5OQ==", "bodyText": "The unit is wrong. This is not a \"byte size\", but a \"number of\" replicas.", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486362499", "createdAt": "2020-09-10T13:54:51Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1250,4 +1250,16 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_batch_delete_by_default = false;\n+\n+    /**\n+     * Used to set default db data quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_data_quota_bytes = 1024 * 1024 * 1024 * 1024L; // 1TB\n+\n+    /**\n+     * Used to set default db replica quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_replica_quota_bytes = 1024 * 1024 * 1024;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxOTM5Mw==", "bodyText": "I restore the modification of default_db_replica_quota_size.", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486419393", "createdAt": "2020-09-10T15:07:32Z", "author": {"login": "zhaojintaozhao"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1250,4 +1250,16 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_batch_delete_by_default = false;\n+\n+    /**\n+     * Used to set default db data quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_data_quota_bytes = 1024 * 1024 * 1024 * 1024L; // 1TB\n+\n+    /**\n+     * Used to set default db replica quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_replica_quota_bytes = 1024 * 1024 * 1024;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MjQ5OQ=="}, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MjI0Mjc3OnYy", "diffSide": "RIGHT", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo1NToyOVrOHP1Qew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowOTozMFrOHP4xUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MzI1OQ==", "bodyText": "Both config should be masterOnly = true", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486363259", "createdAt": "2020-09-10T13:55:29Z", "author": {"login": "morningman"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1250,4 +1250,16 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_batch_delete_by_default = false;\n+\n+    /**\n+     * Used to set default db data quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_data_quota_bytes = 1024 * 1024 * 1024 * 1024L; // 1TB", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNjIzNg==", "bodyText": "Yes, that's right. I change \"masterOnly\" to true", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486416236", "createdAt": "2020-09-10T15:03:22Z", "author": {"login": "zhaojintaozhao"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1250,4 +1250,16 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_batch_delete_by_default = false;\n+\n+    /**\n+     * Used to set default db data quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_data_quota_bytes = 1024 * 1024 * 1024 * 1024L; // 1TB", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MzI1OQ=="}, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQyMDgxNw==", "bodyText": "OK\uff0c I change the \"masterOnly\" property of default_db_data_quota_bytes to true", "url": "https://github.com/apache/incubator-doris/pull/4550#discussion_r486420817", "createdAt": "2020-09-10T15:09:30Z", "author": {"login": "zhaojintaozhao"}, "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1250,4 +1250,16 @@\n      */\n     @ConfField(mutable = true, masterOnly = true)\n     public static boolean enable_batch_delete_by_default = false;\n+\n+    /**\n+     * Used to set default db data quota bytes.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static long default_db_data_quota_bytes = 1024 * 1024 * 1024 * 1024L; // 1TB", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2MzI1OQ=="}, "originalCommit": {"oid": "fffdc388fd618e711b3ab16705687a56839aa542"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1090, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}