{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTQyMDQ5", "number": 2804, "title": "[JDK] Support OpenJDK", "bodyText": "Support compile and running Frontend process and Broker process with OpenJDK.\nOpenJDK 13 is tested.\nISSUE: #2803", "createdAt": "2020-01-19T14:48:50Z", "url": "https://github.com/apache/incubator-doris/pull/2804", "merged": true, "mergeCommit": {"oid": "35b09ecd66d2973de2244f83d0a5dc0cd3a22cee"}, "closed": true, "closedAt": "2020-02-20T15:47:03Z", "author": {"login": "morningman"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb75nccAFqTM0NTAwODU1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF4BhbgFqTM2MTE5NDI3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDA4NTUz", "url": "https://github.com/apache/incubator-doris/pull/2804#pullrequestreview-345008553", "createdAt": "2020-01-19T15:19:41Z", "commit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToxOTo0MVrOFfPWWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToyMTo0N1rOFfPW8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTY1OQ==", "bodyText": "Duplicated ?", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368301659", "createdAt": "2020-01-19T15:19:41Z", "author": {"login": "yangzhg"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -222,10 +274,12 @@ private static CommandLineOptions parseArgs(String[] args) {\n \n     private static void checkCommandLineOptions(CommandLineOptions cmdLineOpts) {\n         if (cmdLineOpts.isVersion()) {\n-            System.out.println(\"Build version: \" + Version.PALO_BUILD_VERSION);\n-            System.out.println(\"Build time: \" + Version.PALO_BUILD_TIME);\n-            System.out.println(\"Build info: \" + Version.PALO_BUILD_INFO);\n-            System.out.println(\"Build hash: \" + Version.PALO_BUILD_HASH);\n+            System.out.println(\"Build version: \" + Version.DORIS_BUILD_VERSION);\n+            System.out.println(\"Build time: \" + Version.DORIS_BUILD_TIME);\n+            System.out.println(\"Build info: \" + Version.DORIS_BUILD_INFO);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTgxMA==", "bodyText": "This may be removed", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368301810", "createdAt": "2020-01-19T15:21:47Z", "author": {"login": "yangzhg"}, "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "diffHunk": "@@ -31,6 +32,13 @@\n import org.apache.doris.thrift.TNetworkAddress;\n import org.apache.doris.thrift.TUniqueId;\n \n+//import com.baidu.jprotobuf.pbrpc.client.ProtobufRpcProxy;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClient;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClientOptions;\n+//import com.google.common.collect.Maps;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDQ2ODQx", "url": "https://github.com/apache/incubator-doris/pull/2804#pullrequestreview-345046841", "createdAt": "2020-01-20T01:32:50Z", "commit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwMTozMjo1MFrOFfR2lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwMTozMjo1MFrOFfR2lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM0MjY3Ng==", "bodyText": "If  JAVA_OPTS is different between jdks,  can we check the java version and chose the right JAVA_OPTS in start_fe.sh?", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368342676", "createdAt": "2020-01-20T01:32:50Z", "author": {"login": "yangzhg"}, "path": "conf/fe.conf", "diffHunk": "@@ -25,7 +25,10 @@\n LOG_DIR = ${DORIS_HOME}/log\n \n DATE = `date +%Y%m%d-%H%M%S`\n-JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+\n+# For jdk 9+, you may need to use thgis JAVA_OPTS\n+# JAVA_OPTS=\"-Xmx4096m -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xlog:gc*:$DORIS_HOME/log/fe.gc.log.$DATE:time\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NDAwMTI5", "url": "https://github.com/apache/incubator-doris/pull/2804#pullrequestreview-345400129", "createdAt": "2020-01-20T15:54:01Z", "commit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNTo1NDowMVrOFfirNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNTo1NDowMVrOFfirNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYxODI5Mg==", "bodyText": "should check java version after configure initialized? Other wise the config isn't effective", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368618292", "createdAt": "2020-01-20T15:54:01Z", "author": {"login": "imay"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -53,6 +54,10 @@\n \n     // entrance for palo frontend\n     public static void main(String[] args) {\n+        if (!checkJavaVersion()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdbdedd8ff644fba2ae9f3f335f628087b5299e9", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/cdbdedd8ff644fba2ae9f3f335f628087b5299e9", "committedDate": "2020-01-29T03:10:31Z", "message": "check JAVA_OPTS_FOR_JDK_9"}, "afterCommit": {"oid": "eb5d4c82f475ecf6714e2e39f59bce6e6cf5a826", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/eb5d4c82f475ecf6714e2e39f59bce6e6cf5a826", "committedDate": "2020-02-10T15:01:25Z", "message": "check JAVA_OPTS_FOR_JDK_9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aad4579975b452d2487db485cf07cdf90f04772", "author": {"user": {"login": "jmk1011", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/9aad4579975b452d2487db485cf07cdf90f04772", "committedDate": "2020-02-17T15:14:14Z", "message": "[FE Maven] Change maven repository url from http to https (#2786)\n\nFrom January 15th, 2020, Requests to http://repo1.maven.org/maven2/ return a 501 HTTPS Required status.\nSo switch central repository url from http to https\n\nfirst commit\n\nmodify script\n\nfix bugs\n\nadd runtime version\n\nfs broker\n\nfix ut\n\nfix bug\n\nmodify start_fe.sh to choose JAVA_OPTS automatically"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9f4595f28af9a49a65974da897c3d9e693b659d", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/c9f4595f28af9a49a65974da897c3d9e693b659d", "committedDate": "2020-02-17T15:14:14Z", "message": "check JAVA_OPTS_FOR_JDK_9"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb5d4c82f475ecf6714e2e39f59bce6e6cf5a826", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/eb5d4c82f475ecf6714e2e39f59bce6e6cf5a826", "committedDate": "2020-02-10T15:01:25Z", "message": "check JAVA_OPTS_FOR_JDK_9"}, "afterCommit": {"oid": "c9f4595f28af9a49a65974da897c3d9e693b659d", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/c9f4595f28af9a49a65974da897c3d9e693b659d", "committedDate": "2020-02-17T15:14:14Z", "message": "check JAVA_OPTS_FOR_JDK_9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2f5ef493db22efafa443b9be55156a531a9ed48", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/e2f5ef493db22efafa443b9be55156a531a9ed48", "committedDate": "2020-02-17T15:19:42Z", "message": "check after config init"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTIyMTQy", "url": "https://github.com/apache/incubator-doris/pull/2804#pullrequestreview-361122142", "createdAt": "2020-02-19T13:48:34Z", "commit": {"oid": "e2f5ef493db22efafa443b9be55156a531a9ed48"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzo0ODozNFrOFrotKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzo0ODozNFrOFrotKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMwMDAxMA==", "bodyText": "I think this function is better to be put in JdkUtils not in PaloFe", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r381300010", "createdAt": "2020-02-19T13:48:34Z", "author": {"login": "imay"}, "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "diffHunk": "@@ -53,6 +56,11 @@\n \n     private static BackendServiceProxy INSTANCE;\n \n+    static {\n+        int javaRuntimeVersion = PaloFe.getJavaVersionAsInteger(System.getProperty(\"java.version\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f5ef493db22efafa443b9be55156a531a9ed48"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c04b801c674a2b7c0d1cfc9f5f68f41f39c6c33", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/3c04b801c674a2b7c0d1cfc9f5f68f41f39c6c33", "committedDate": "2020-02-19T14:43:39Z", "message": "add jdk utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2068ece8b1a845b2442db7331f3be3ab8f9fa0d", "author": {"user": {"login": "morningman", "name": "Mingyu Chen"}}, "url": "https://github.com/apache/incubator-doris/commit/a2068ece8b1a845b2442db7331f3be3ab8f9fa0d", "committedDate": "2020-02-19T14:45:38Z", "message": "fix bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTk0Mjc5", "url": "https://github.com/apache/incubator-doris/pull/2804#pullrequestreview-361194279", "createdAt": "2020-02-19T15:12:03Z", "commit": {"oid": "a2068ece8b1a845b2442db7331f3be3ab8f9fa0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3638, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}