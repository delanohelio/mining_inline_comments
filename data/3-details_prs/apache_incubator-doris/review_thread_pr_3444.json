{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMjU4NDQ3", "number": 3444, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwOToxODozOVrOD39h-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwOToxODozOVrOD39h-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMDA2MzkzOnYy", "diffSide": "RIGHT", "path": "fe_plugins/auditloader/src/main/java/org/apache/doris/plugin/audit/AuditLoaderPlugin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwOToxODozOVrOGOg5VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNTowNjoyMlrOGOtn2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg3MjIxMw==", "bodyText": "Could you replace 2000 with a configuration or a static final variable?", "url": "https://github.com/apache/incubator-doris/pull/3444#discussion_r417872213", "createdAt": "2020-04-30T09:18:39Z", "author": {"login": "imay"}, "path": "fe_plugins/auditloader/src/main/java/org/apache/doris/plugin/audit/AuditLoaderPlugin.java", "diffHunk": "@@ -143,8 +143,9 @@ private void assembleAudit(AuditEvent event) {\n         auditBuffer.append(event.isQuery ? 1 : 0).append(\"\\t\");\n         auditBuffer.append(event.feIp).append(\"\\t\");\n         // trim the query to avoid too long\n-        int maxLen = Math.min(2048, event.stmt.length());\n-        String stmt = event.stmt.substring(0, maxLen).replace(\"\\t\", \" \");\n+        // use `getBytes().length` to get real byte length\n+        int maxLen = Math.min(2000, event.stmt.getBytes().length);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80827aa19dc1166cbc0bb838775aae09eeefbb6d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4MDczMA==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/3444#discussion_r418080730", "createdAt": "2020-04-30T15:06:22Z", "author": {"login": "morningman"}, "path": "fe_plugins/auditloader/src/main/java/org/apache/doris/plugin/audit/AuditLoaderPlugin.java", "diffHunk": "@@ -143,8 +143,9 @@ private void assembleAudit(AuditEvent event) {\n         auditBuffer.append(event.isQuery ? 1 : 0).append(\"\\t\");\n         auditBuffer.append(event.feIp).append(\"\\t\");\n         // trim the query to avoid too long\n-        int maxLen = Math.min(2048, event.stmt.length());\n-        String stmt = event.stmt.substring(0, maxLen).replace(\"\\t\", \" \");\n+        // use `getBytes().length` to get real byte length\n+        int maxLen = Math.min(2000, event.stmt.getBytes().length);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg3MjIxMw=="}, "originalCommit": {"oid": "80827aa19dc1166cbc0bb838775aae09eeefbb6d"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1716, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}