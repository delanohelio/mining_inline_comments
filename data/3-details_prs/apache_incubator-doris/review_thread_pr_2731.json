{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNTM2MDE5", "number": 2731, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyMzozN1rODXaT1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyNzowNlrODXaUtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODc0OTAwOnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyMzozN1rOFcsarA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjo1Nzo0NFrOFcsndA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjE3Mg==", "bodyText": "Would better give a valid string format description.", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365632172", "createdAt": "2020-01-13T02:23:37Z", "author": {"login": "kangkaisen"}, "path": "be/src/exprs/bitmap_function.h", "diffHunk": "@@ -55,6 +55,8 @@ class BitmapFunctions {\n     static StringVal bitmap_hash(FunctionContext* ctx, const StringVal& src);\n     static StringVal bitmap_or(FunctionContext* ctx, const StringVal& src,const StringVal& dst);\n     static StringVal bitmap_and(FunctionContext* ctx, const StringVal& src,const StringVal& dst);\n+    static StringVal bitmap_to_string(FunctionContext* ctx, const StringVal& input);\n+    static StringVal bitmap_from_string(FunctionContext* ctx, const StringVal& input);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzNTQ0NA==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365635444", "createdAt": "2020-01-13T02:57:44Z", "author": {"login": "imay"}, "path": "be/src/exprs/bitmap_function.h", "diffHunk": "@@ -55,6 +55,8 @@ class BitmapFunctions {\n     static StringVal bitmap_hash(FunctionContext* ctx, const StringVal& src);\n     static StringVal bitmap_or(FunctionContext* ctx, const StringVal& src,const StringVal& dst);\n     static StringVal bitmap_and(FunctionContext* ctx, const StringVal& src,const StringVal& dst);\n+    static StringVal bitmap_to_string(FunctionContext* ctx, const StringVal& input);\n+    static StringVal bitmap_from_string(FunctionContext* ctx, const StringVal& input);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjE3Mg=="}, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODc0OTkwOnYy", "diffSide": "RIGHT", "path": "be/test/util/bitmap_test.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyNToxMFrOFcsbMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjo1ODowNlrOFcsnpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjMwNQ==", "bodyText": "Would better add a invalid string format test case", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365632305", "createdAt": "2020-01-13T02:25:10Z", "author": {"login": "kangkaisen"}, "path": "be/test/util/bitmap_test.cpp", "diffHunk": "@@ -267,6 +267,30 @@ TEST_F(BitMapTest, roaring_bitmap_serde) {\n     ASSERT_EQ(3, bitmap_serde.cardinality());\n }\n \n+TEST_F(BitMapTest, bitmap_to_string) {\n+    RoaringBitmap empty;\n+    ASSERT_STREQ(\"\", empty.to_string().c_str());\n+    empty.update(1);\n+    ASSERT_STREQ(\"1\", empty.to_string().c_str());\n+    empty.update(2);\n+    ASSERT_STREQ(\"1,2\", empty.to_string().c_str());\n+}\n+\n+TEST_F(BitMapTest, bitmap_from_vector) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzNTQ5NA==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365635494", "createdAt": "2020-01-13T02:58:06Z", "author": {"login": "imay"}, "path": "be/test/util/bitmap_test.cpp", "diffHunk": "@@ -267,6 +267,30 @@ TEST_F(BitMapTest, roaring_bitmap_serde) {\n     ASSERT_EQ(3, bitmap_serde.cardinality());\n }\n \n+TEST_F(BitMapTest, bitmap_to_string) {\n+    RoaringBitmap empty;\n+    ASSERT_STREQ(\"\", empty.to_string().c_str());\n+    empty.update(1);\n+    ASSERT_STREQ(\"1\", empty.to_string().c_str());\n+    empty.update(2);\n+    ASSERT_STREQ(\"1,2\", empty.to_string().c_str());\n+}\n+\n+TEST_F(BitMapTest, bitmap_from_vector) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjMwNQ=="}, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODc1MTI2OnYy", "diffSide": "RIGHT", "path": "docs/documentation/cn/sql-reference/sql-functions/bitmap-functions/bitmap_from_string.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyNzowNlrOFcsb5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjo1Nzo1OFrOFcsnkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjQ4NA==", "bodyText": "Would better describe what's is valid or invalid string input.", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365632484", "createdAt": "2020-01-13T02:27:06Z", "author": {"login": "kangkaisen"}, "path": "docs/documentation/cn/sql-reference/sql-functions/bitmap-functions/bitmap_from_string.md", "diffHunk": "@@ -0,0 +1,54 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+  http://www.apache.org/licenses/LICENSE-2.0\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# bitmap_from_string\n+\n+## description\n+### Syntax\n+\n+`BITMAP BITMAP_FROM_STRING(VARCHAR input)`\n+\n+\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u4e00\u4e2aBITAMP\uff0c\u5982\u679c\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u4e0d\u5408\u6cd5\uff0c\u8fd4\u56deNULL.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzNTQ3NA==", "bodyText": "done", "url": "https://github.com/apache/incubator-doris/pull/2731#discussion_r365635474", "createdAt": "2020-01-13T02:57:58Z", "author": {"login": "imay"}, "path": "docs/documentation/cn/sql-reference/sql-functions/bitmap-functions/bitmap_from_string.md", "diffHunk": "@@ -0,0 +1,54 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+  http://www.apache.org/licenses/LICENSE-2.0\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# bitmap_from_string\n+\n+## description\n+### Syntax\n+\n+`BITMAP BITMAP_FROM_STRING(VARCHAR input)`\n+\n+\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u4e00\u4e2aBITAMP\uff0c\u5982\u679c\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u4e0d\u5408\u6cd5\uff0c\u8fd4\u56deNULL.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMjQ4NA=="}, "originalCommit": {"oid": "fb9c8dda05fdafad0c458c1cc2da48d433ce4218"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2329, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}