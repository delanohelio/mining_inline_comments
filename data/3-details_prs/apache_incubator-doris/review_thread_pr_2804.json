{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTQyMDQ5", "number": 2804, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToxOTo0MVrODZDXfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzo0ODozNFrODhE2-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTk2MTU2OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToxOTo0MVrOFfPWWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNTozMDoyNlrOFfPY7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTY1OQ==", "bodyText": "Duplicated ?", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368301659", "createdAt": "2020-01-19T15:19:41Z", "author": {"login": "yangzhg"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -222,10 +274,12 @@ private static CommandLineOptions parseArgs(String[] args) {\n \n     private static void checkCommandLineOptions(CommandLineOptions cmdLineOpts) {\n         if (cmdLineOpts.isVersion()) {\n-            System.out.println(\"Build version: \" + Version.PALO_BUILD_VERSION);\n-            System.out.println(\"Build time: \" + Version.PALO_BUILD_TIME);\n-            System.out.println(\"Build info: \" + Version.PALO_BUILD_INFO);\n-            System.out.println(\"Build hash: \" + Version.PALO_BUILD_HASH);\n+            System.out.println(\"Build version: \" + Version.DORIS_BUILD_VERSION);\n+            System.out.println(\"Build time: \" + Version.DORIS_BUILD_TIME);\n+            System.out.println(\"Build info: \" + Version.DORIS_BUILD_INFO);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMjMxNg==", "bodyText": "removed", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368302316", "createdAt": "2020-01-19T15:30:26Z", "author": {"login": "morningman"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -222,10 +274,12 @@ private static CommandLineOptions parseArgs(String[] args) {\n \n     private static void checkCommandLineOptions(CommandLineOptions cmdLineOpts) {\n         if (cmdLineOpts.isVersion()) {\n-            System.out.println(\"Build version: \" + Version.PALO_BUILD_VERSION);\n-            System.out.println(\"Build time: \" + Version.PALO_BUILD_TIME);\n-            System.out.println(\"Build info: \" + Version.PALO_BUILD_INFO);\n-            System.out.println(\"Build hash: \" + Version.PALO_BUILD_HASH);\n+            System.out.println(\"Build version: \" + Version.DORIS_BUILD_VERSION);\n+            System.out.println(\"Build time: \" + Version.DORIS_BUILD_TIME);\n+            System.out.println(\"Build info: \" + Version.DORIS_BUILD_INFO);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);\n+            System.out.println(\"Build hash: \" + Version.DORIS_BUILD_HASH);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTY1OQ=="}, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTk2Mjc5OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToyMTo0N1rOFfPW8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNTozMDozMFrOFfPY8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTgxMA==", "bodyText": "This may be removed", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368301810", "createdAt": "2020-01-19T15:21:47Z", "author": {"login": "yangzhg"}, "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "diffHunk": "@@ -31,6 +32,13 @@\n import org.apache.doris.thrift.TNetworkAddress;\n import org.apache.doris.thrift.TUniqueId;\n \n+//import com.baidu.jprotobuf.pbrpc.client.ProtobufRpcProxy;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClient;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClientOptions;\n+//import com.google.common.collect.Maps;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMjMyMg==", "bodyText": "ok", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368302322", "createdAt": "2020-01-19T15:30:30Z", "author": {"login": "morningman"}, "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "diffHunk": "@@ -31,6 +32,13 @@\n import org.apache.doris.thrift.TNetworkAddress;\n import org.apache.doris.thrift.TUniqueId;\n \n+//import com.baidu.jprotobuf.pbrpc.client.ProtobufRpcProxy;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClient;\n+//import com.baidu.jprotobuf.pbrpc.transport.RpcClientOptions;\n+//import com.google.common.collect.Maps;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTgxMA=="}, "originalCommit": {"oid": "eae85ccfddbfbd80f2cd13ab15a7b46398578d62"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjI2NjQ1OnYy", "diffSide": "RIGHT", "path": "conf/fe.conf", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwMTozMjo1MFrOFfR2lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjozOTo0MVrOFi7EaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM0MjY3Ng==", "bodyText": "If  JAVA_OPTS is different between jdks,  can we check the java version and chose the right JAVA_OPTS in start_fe.sh?", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368342676", "createdAt": "2020-01-20T01:32:50Z", "author": {"login": "yangzhg"}, "path": "conf/fe.conf", "diffHunk": "@@ -25,7 +25,10 @@\n LOG_DIR = ${DORIS_HOME}/log\n \n DATE = `date +%Y%m%d-%H%M%S`\n-JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+\n+# For jdk 9+, you may need to use thgis JAVA_OPTS\n+# JAVA_OPTS=\"-Xmx4096m -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xlog:gc*:$DORIS_HOME/log/fe.gc.log.$DATE:time\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE2MzY4OQ==", "bodyText": "ok", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r372163689", "createdAt": "2020-01-29T02:39:41Z", "author": {"login": "morningman"}, "path": "conf/fe.conf", "diffHunk": "@@ -25,7 +25,10 @@\n LOG_DIR = ${DORIS_HOME}/log\n \n DATE = `date +%Y%m%d-%H%M%S`\n-JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+JAVA_OPTS=\"-Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE\"\n+\n+# For jdk 9+, you may need to use thgis JAVA_OPTS\n+# JAVA_OPTS=\"-Xmx4096m -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xlog:gc*:$DORIS_HOME/log/fe.gc.log.$DATE:time\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM0MjY3Ng=="}, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3ODA3NTE2OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNTo1NDowMVrOFfirNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjozOTozM1rOFi7ESQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYxODI5Mg==", "bodyText": "should check java version after configure initialized? Other wise the config isn't effective", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r368618292", "createdAt": "2020-01-20T15:54:01Z", "author": {"login": "imay"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -53,6 +54,10 @@\n \n     // entrance for palo frontend\n     public static void main(String[] args) {\n+        if (!checkJavaVersion()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE2MzY1Nw==", "bodyText": "checkJavaVersion() does not, and should not depend on any configurations of the program. It only depends on the java runtime environment, which should already be initialized\nwhen we get here.", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r372163657", "createdAt": "2020-01-29T02:39:33Z", "author": {"login": "morningman"}, "path": "fe/src/main/java/org/apache/doris/PaloFe.java", "diffHunk": "@@ -53,6 +54,10 @@\n \n     // entrance for palo frontend\n     public static void main(String[] args) {\n+        if (!checkJavaVersion()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYxODI5Mg=="}, "originalCommit": {"oid": "697ee50d3ad3bfb5e82d86be3ed99773474b188a"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MDA5MjA4OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzo0ODozNFrOFrotKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzo0ODozNFrOFrotKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMwMDAxMA==", "bodyText": "I think this function is better to be put in JdkUtils not in PaloFe", "url": "https://github.com/apache/incubator-doris/pull/2804#discussion_r381300010", "createdAt": "2020-02-19T13:48:34Z", "author": {"login": "imay"}, "path": "fe/src/main/java/org/apache/doris/rpc/BackendServiceProxy.java", "diffHunk": "@@ -53,6 +56,11 @@\n \n     private static BackendServiceProxy INSTANCE;\n \n+    static {\n+        int javaRuntimeVersion = PaloFe.getJavaVersionAsInteger(System.getProperty(\"java.version\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f5ef493db22efafa443b9be55156a531a9ed48"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2153, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}