{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxOTAxMzA5", "number": 4425, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1MToyOFrOEbYS9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MTozM1rOEb5Vpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MTQ1MDc2OnYy", "diffSide": "RIGHT", "path": "be/src/olap/field.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1MToyOFrOHFSKzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1MToyOFrOHFSKzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMwMjYwNg==", "bodyText": "why\uff1f", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r475302606", "createdAt": "2020-08-24T01:51:28Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/field.h", "diffHunk": "@@ -535,4 +535,4 @@ class FieldFactory {\n \n }  // namespace doris\n \n-#endif // DORIS_BE_SRC_OLAP_FIELD_H\n+#endif // DORIS_BE_SRC_OLAP_FIELD_H", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89bb95363d47cb116fe82d745a57c09fa074b066"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MTQ1OTE5OnYy", "diffSide": "RIGHT", "path": "be/src/olap/row_cursor.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1NzoyOFrOHFSPqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1NzoyOFrOHFSPqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMwMzg0OQ==", "bodyText": "better user reinterpret_cast", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r475303849", "createdAt": "2020-08-24T01:57:28Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/row_cursor.h", "diffHunk": "@@ -109,6 +109,14 @@ class RowCursor {\n         return column_schema(index)->index_size();\n     }\n \n+    inline bool is_delete() const {\n+        auto sign_idx = _schema->delete_sign_idx();\n+        if (sign_idx < 0) {\n+            return false;\n+        }\n+        return (*(char*) (cell(sign_idx).cell_ptr())) > 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89bb95363d47cb116fe82d745a57c09fa074b066"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MTQ2MDA2OnYy", "diffSide": "RIGHT", "path": "be/src/olap/schema.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1Nzo1NlrOHFSQGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1Nzo1NlrOHFSQGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMwMzk2Mg==", "bodyText": "why\uff1f", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r475303962", "createdAt": "2020-08-24T01:57:56Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/schema.h", "diffHunk": "@@ -158,4 +158,4 @@ class Schema {\n     int32_t _delete_sign_idx = -1;\n };\n \n-} // namespace doris\n+} // namespace doris", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89bb95363d47cb116fe82d745a57c09fa074b066"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MTQ2MDE0OnYy", "diffSide": "RIGHT", "path": "be/src/olap/schema.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1Nzo1OVrOHFSQKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwMTo1Nzo1OVrOHFSQKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMwMzk3Ng==", "bodyText": "why\uff1f", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r475303976", "createdAt": "2020-08-24T01:57:59Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/schema.cpp", "diffHunk": "@@ -105,4 +105,4 @@ Schema::~Schema() {\n     }\n }\n \n-}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89bb95363d47cb116fe82d745a57c09fa074b066"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Njg1ODk2OnYy", "diffSide": "RIGHT", "path": "be/src/olap/reader.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDoxNVrOHGGzhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDoxNVrOHGGzhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE2NDk5OQ==", "bodyText": "unnessary empty lines", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r476164999", "createdAt": "2020-08-25T04:40:15Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/reader.cpp", "diffHunk": "@@ -1033,14 +1039,20 @@ void Reader::_init_load_bf_columns(const ReaderParams& read_params) {\n }\n \n OLAPStatus Reader::_init_delete_condition(const ReaderParams& read_params) {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73b7e62a7b18f2326ad0d29993fb09b42ab3634a"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Njg2MDIyOnYy", "diffSide": "RIGHT", "path": "be/src/olap/reader.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDozM1rOHGG0XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDozM1rOHGG0XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE2NTIxMg==", "bodyText": "white spaces", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r476165212", "createdAt": "2020-08-25T04:40:33Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/reader.cpp", "diffHunk": "@@ -427,14 +430,17 @@ OLAPStatus Reader::_unique_key_next_row(RowCursor* row_cursor, MemPool* mem_pool\n                 }\n                 break;\n             }\n-\n+            ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73b7e62a7b18f2326ad0d29993fb09b42ab3634a"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Njg2MTg4OnYy", "diffSide": "RIGHT", "path": "be/src/olap/tablet_schema.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDo1OVrOHGG1lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MDo1OVrOHGG1lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE2NTUyNw==", "bodyText": "why?", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r476165527", "createdAt": "2020-08-25T04:40:59Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/tablet_schema.h", "diffHunk": "@@ -134,6 +134,7 @@ class TabletSchema {\n     bool _has_bf_fpp = false;\n     double _bf_fpp = 0;\n     bool _is_in_memory = false;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73b7e62a7b18f2326ad0d29993fb09b42ab3634a"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Njg2NDM4OnYy", "diffSide": "RIGHT", "path": "be/src/olap/reader.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MTozM1rOHGG3QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0MTozM1rOHGG3QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE2NTk1Mw==", "bodyText": "why?", "url": "https://github.com/apache/incubator-doris/pull/4425#discussion_r476165953", "createdAt": "2020-08-25T04:41:33Z", "author": {"login": "yangzhg"}, "path": "be/src/olap/reader.cpp", "diffHunk": "@@ -411,13 +414,13 @@ OLAPStatus Reader::_unique_key_next_row(RowCursor* row_cursor, MemPool* mem_pool\n             *eof = true;\n             return OLAP_SUCCESS;\n         }\n-\n         cur_delete_flag = _next_delete_flag;\n         // the verion is in reverse order, the first row is the highest version,\n         // in UNIQUE_KEY highest version is the final result, there is no need to\n         // merge the lower versions\n         direct_copy_row(row_cursor, *_next_key);\n         agg_finalize_row(_value_cids, row_cursor, mem_pool);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73b7e62a7b18f2326ad0d29993fb09b42ab3634a"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1171, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}