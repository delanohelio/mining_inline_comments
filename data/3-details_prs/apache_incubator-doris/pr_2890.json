{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MTkyNTI3", "number": 2890, "title": "Add disable_storage_page_cache config", "bodyText": "For #2889", "createdAt": "2020-02-12T09:16:33Z", "url": "https://github.com/apache/incubator-doris/pull/2890", "merged": true, "mergeCommit": {"oid": "6c33f805449d9a7bc8809a575407acfa87bb061e"}, "closed": true, "closedAt": "2020-02-16T11:13:31Z", "author": {"login": "kangkaisen"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDlnXAABqjMwMzA2MzA2NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcE2xvbgFqTM1OTM5NTk0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2df866f6e6ec1393114065c4e3bc14b55810be96", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/2df866f6e6ec1393114065c4e3bc14b55810be96", "committedDate": "2020-02-12T09:10:10Z", "message": "Add disable_storage_page_cache config"}, "afterCommit": {"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "committedDate": "2020-02-12T12:29:27Z", "message": "Add disable_storage_page_cache config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NDY5ODU5", "url": "https://github.com/apache/incubator-doris/pull/2890#pullrequestreview-357469859", "createdAt": "2020-02-12T13:57:12Z", "commit": {"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NTQwNzcx", "url": "https://github.com/apache/incubator-doris/pull/2890#pullrequestreview-357540771", "createdAt": "2020-02-12T15:22:13Z", "commit": {"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNToyMjoxM1rOFoyz9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNToyMjoxM1rOFoyz9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMxOTg2Mg==", "bodyText": "It is better to use an argument for this function.\nBesides the configuration, some operation don't need cache either, such as compaction.\nSo the good way is that let the caller judge whether the cache is used.", "url": "https://github.com/apache/incubator-doris/pull/2890#discussion_r378319862", "createdAt": "2020-02-12T15:22:13Z", "author": {"login": "imay"}, "path": "be/src/olap/rowset/segment_v2/column_reader.cpp", "diffHunk": "@@ -97,7 +97,7 @@ Status ColumnReader::read_page(RandomAccessFile* file, const PagePointer& pp,\n     auto cache = StoragePageCache::instance();\n     PageCacheHandle cache_handle;\n     StoragePageCache::CacheKey cache_key(file->file_name(), pp.offset);\n-    if (cache->lookup(cache_key, &cache_handle)) {\n+    if (!config::disable_storage_page_cache && cache->lookup(cache_key, &cache_handle)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "committedDate": "2020-02-12T12:29:27Z", "message": "Add disable_storage_page_cache config"}, "afterCommit": {"oid": "981f999d6574fd7dcd906257c39e05aa613d9480", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/981f999d6574fd7dcd906257c39e05aa613d9480", "committedDate": "2020-02-13T06:09:18Z", "message": "Add disable_storage_page_cache config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NzkzNzgy", "url": "https://github.com/apache/incubator-doris/pull/2890#pullrequestreview-358793782", "createdAt": "2020-02-14T09:01:42Z", "commit": {"oid": "981f999d6574fd7dcd906257c39e05aa613d9480"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd2014747a61ce7f62159429a8a65a5cedf013b", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/1fd2014747a61ce7f62159429a8a65a5cedf013b", "committedDate": "2020-02-16T09:59:18Z", "message": "Add disable_storage_page_cache config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "981f999d6574fd7dcd906257c39e05aa613d9480", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/981f999d6574fd7dcd906257c39e05aa613d9480", "committedDate": "2020-02-13T06:09:18Z", "message": "Add disable_storage_page_cache config"}, "afterCommit": {"oid": "1fd2014747a61ce7f62159429a8a65a5cedf013b", "author": {"user": {"login": "kangkaisen", "name": "kangkaisen "}}, "url": "https://github.com/apache/incubator-doris/commit/1fd2014747a61ce7f62159429a8a65a5cedf013b", "committedDate": "2020-02-16T09:59:18Z", "message": "Add disable_storage_page_cache config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mzk1OTQ5", "url": "https://github.com/apache/incubator-doris/pull/2890#pullrequestreview-359395949", "createdAt": "2020-02-16T11:10:59Z", "commit": {"oid": "1fd2014747a61ce7f62159429a8a65a5cedf013b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3757, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}