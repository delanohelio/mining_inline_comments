{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTIyNzUz", "number": 2961, "title": "[ut] fix the  test case of SegmentReaderWriterTest::TestBitmapPredicate", "bodyText": "function create_int_key() will create a TableColumn instance with data memger: _aggregation=(random value)\nif _aggregation==OLAP_FIELD_AGGREGATION_REPLACE SegmentWriter::init() will set opts.need_bitmap_index = false;\nso the test case TEST_F(SegmentReaderWriterTest, TestBitmapPredicate)  of olap/rowset/segment_v2/segment_test.cpp will exec failed if the_aggregation of TableColumn == OLAP_FIELD_AGGREGATION_REPLACE.\nTEST_F(SegmentReaderWriterTest, TestBitmapPredicate) {\n    TabletSchema tablet_schema = create_schemate({\n        create_int_key(1, true, false, true),\n        create_int_key(2, true, false, true),\n        create_int_value(3),\n        create_int_value(4)});\n       ...\n      ASSERT_TRUE(segment->footer().columns(0).has_bitmap_index());\n      ...\n}", "createdAt": "2020-02-21T06:20:31Z", "url": "https://github.com/apache/incubator-doris/pull/2961", "merged": true, "mergeCommit": {"oid": "3b8e9d8dcfd73e3af1220761b53685a58d1cbb70"}, "closed": true, "closedAt": "2020-02-21T09:16:49Z", "author": {"login": "trueeyu"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGZQPyAH2gAyMzc4MTIyNzUzOjBkMTE1ZjcyMzg4ZmRhZmM2M2I3Nzk1ZWFiNTY4MmRiNDRjMWI4NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGavTxAFqTM2MjQ0Mzc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d115f72388fdafc63b7795eab5682db44c1b856", "author": {"user": {"login": "trueeyu", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/0d115f72388fdafc63b7795eab5682db44c1b856", "committedDate": "2020-02-21T05:55:00Z", "message": "fix test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDIxODI5", "url": "https://github.com/apache/incubator-doris/pull/2961#pullrequestreview-362421829", "createdAt": "2020-02-21T06:30:18Z", "commit": {"oid": "0d115f72388fdafc63b7795eab5682db44c1b856"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNjozMDoxOFrOFss3QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNjozMDoxOFrOFss3QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQxNjcwNA==", "bodyText": "Better to give a default value to TabletColumn constructor.", "url": "https://github.com/apache/incubator-doris/pull/2961#discussion_r382416704", "createdAt": "2020-02-21T06:30:18Z", "author": {"login": "imay"}, "path": "be/test/olap/tablet_schema_helper.h", "diffHunk": "@@ -31,6 +31,7 @@ TabletColumn create_int_key(int32_t id, bool is_nullable = true,\n     column._col_name = std::to_string(id);\n     column._type = OLAP_FIELD_TYPE_INT;\n     column._is_key = true;\n+    column._aggregation = OLAP_FIELD_AGGREGATION_NONE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d115f72388fdafc63b7795eab5682db44c1b856"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "768e2f1d82b244c4aeb3a2af86b947802bf5bb38", "author": {"user": {"login": "trueeyu", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/768e2f1d82b244c4aeb3a2af86b947802bf5bb38", "committedDate": "2020-02-21T06:42:43Z", "message": "default constructor of TabletColumn set _aggregateion=OLAP_FIELD_AGGREGATION_NONE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDQzMzAz", "url": "https://github.com/apache/incubator-doris/pull/2961#pullrequestreview-362443303", "createdAt": "2020-02-21T07:37:34Z", "commit": {"oid": "768e2f1d82b244c4aeb3a2af86b947802bf5bb38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDQzNzU3", "url": "https://github.com/apache/incubator-doris/pull/2961#pullrequestreview-362443757", "createdAt": "2020-02-21T07:38:50Z", "commit": {"oid": "768e2f1d82b244c4aeb3a2af86b947802bf5bb38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3408, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}