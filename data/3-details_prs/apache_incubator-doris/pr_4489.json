{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2Mjg0ODI4", "number": 4489, "title": "[Spark load][Document] Add docs about spark and yarn client for spark load", "bodyText": "Proposed changes\nAdd docs about spark and yarn client for spark load\nTypes of changes\nWhat types of changes does your code introduce to Doris?\nPut an x in the boxes that apply\n\n Documentation Update (if none of the other choices apply)", "createdAt": "2020-08-31T13:04:00Z", "url": "https://github.com/apache/incubator-doris/pull/4489", "merged": true, "mergeCommit": {"oid": "f207036cadae43f77e2ad8d8c7c817815275468b"}, "closed": true, "closedAt": "2020-09-02T02:52:50Z", "author": {"login": "xy720"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEUaw4AFqTQ3ODcwNTk3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEe5IMgFqTQ3OTM3NjY3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzA1OTcz", "url": "https://github.com/apache/incubator-doris/pull/4489#pullrequestreview-478705973", "createdAt": "2020-08-31T15:16:40Z", "commit": {"oid": "9a5d13c16808409b8bcf680ec87e93125473a768"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToxNjo0MFrOHJ9D1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToxODoyNFrOHJ9H8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5OTYzOA==", "bodyText": "\u53ef\u4ee5\u7ed9\u4e00\u4e2a\u5177\u4f53\u7684\u7248\u672c\u53f7\uff0c\u6bd4\u59822.4.3", "url": "https://github.com/apache/incubator-doris/pull/4489#discussion_r480199638", "createdAt": "2020-08-31T15:16:40Z", "author": {"login": "morningman"}, "path": "docs/zh-CN/administrator-guide/load-data/spark-load-manual.md", "diffHunk": "@@ -229,7 +230,43 @@ GRANT USAGE_PRIV ON RESOURCE * TO ROLE \"role0\";\n REVOKE USAGE_PRIV ON RESOURCE \"spark0\" FROM \"user0\"@\"%\";\n ```\n \n+### \u914d\u7f6e SPARK \u5ba2\u6237\u7aef\n+\n+FE\u5e95\u5c42\u901a\u8fc7\u6267\u884cspark-submit\u7684\u547d\u4ee4\u53bb\u63d0\u4ea4spark\u4efb\u52a1\uff0c\u56e0\u6b64\u9700\u8981\u4e3aFE\u914d\u7f6espark\u5ba2\u6237\u7aef\uff0c\u5efa\u8bae\u4f7f\u75282.4\u4ee5\u4e0a\u7684spark2\u5b98\u65b9\u7248\u672c\uff0c[spark\u4e0b\u8f7d\u5730\u5740](https://archive.apache.org/dist/spark/)\uff0c\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u8bf7\u6309\u6b65\u9aa4\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\u3002", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a5d13c16808409b8bcf680ec87e93125473a768"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwMDY5MA==", "bodyText": "\u53ef\u4ee5\u7ed9\u4e00\u4e2a\u5177\u4f53\u7248\u672c\u53f7", "url": "https://github.com/apache/incubator-doris/pull/4489#discussion_r480200690", "createdAt": "2020-08-31T15:18:24Z", "author": {"login": "morningman"}, "path": "docs/zh-CN/administrator-guide/load-data/spark-load-manual.md", "diffHunk": "@@ -229,7 +230,43 @@ GRANT USAGE_PRIV ON RESOURCE * TO ROLE \"role0\";\n REVOKE USAGE_PRIV ON RESOURCE \"spark0\" FROM \"user0\"@\"%\";\n ```\n \n+### \u914d\u7f6e SPARK \u5ba2\u6237\u7aef\n+\n+FE\u5e95\u5c42\u901a\u8fc7\u6267\u884cspark-submit\u7684\u547d\u4ee4\u53bb\u63d0\u4ea4spark\u4efb\u52a1\uff0c\u56e0\u6b64\u9700\u8981\u4e3aFE\u914d\u7f6espark\u5ba2\u6237\u7aef\uff0c\u5efa\u8bae\u4f7f\u75282.4\u4ee5\u4e0a\u7684spark2\u5b98\u65b9\u7248\u672c\uff0c[spark\u4e0b\u8f7d\u5730\u5740](https://archive.apache.org/dist/spark/)\uff0c\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u8bf7\u6309\u6b65\u9aa4\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\u3002\n+\n+#### \u914d\u7f6e SPARK_HOME \u73af\u5883\u53d8\u91cf\n+\n+\u5c06spark\u5ba2\u6237\u7aef\u653e\u5728FE\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u7684\u76ee\u5f55\u4e0b\uff0c\u5e76\u5728FE\u7684\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e`spark_home_default_dir`\u9879\u6307\u5411\u6b64\u76ee\u5f55\uff0c\u6b64\u914d\u7f6e\u9879\u9ed8\u8ba4\u4e3aFE\u6839\u76ee\u5f55\u4e0b\u7684 `lib/spark2x`\u8def\u5f84\uff0c\u6b64\u9879\u4e0d\u53ef\u4e3a\u7a7a\u3002\n+\n+#### \u914d\u7f6e SPARK \u4f9d\u8d56\u5305\n+\n+\u5c06spark\u5ba2\u6237\u7aef\u4e0b\u7684jars\u6587\u4ef6\u5939\u5185\u6240\u6709jar\u5305\u5f52\u6863\u6253\u5305\u6210\u4e00\u4e2azip\u6587\u4ef6\uff0c\u5e76\u5728FE\u7684\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e`spark_resource_path`\u9879\u6307\u5411\u6b64zip\u6587\u4ef6\uff0c\u82e5\u6b64\u914d\u7f6e\u9879\u4e3a\u7a7a\uff0c\u5219FE\u4f1a\u5c1d\u8bd5\u5bfb\u627eFE\u6839\u76ee\u5f55\u4e0b\u7684`lib/spark2x/jars/spark-2x.zip`\u6587\u4ef6\uff0c\u82e5\u6ca1\u6709\u627e\u5230\u5219\u4f1a\u62a5\u6587\u4ef6\u4e0d\u5b58\u5728\u7684\u9519\u8bef\u3002\n+\n+\u5f53\u63d0\u4ea4spark load\u4efb\u52a1\u65f6\uff0c\u4f1a\u5c06\u5f52\u6863\u597d\u7684\u4f9d\u8d56\u6587\u4ef6\u4e0a\u4f20\u81f3\u8fdc\u7aef\u4ed3\u5e93\uff0c\u9ed8\u8ba4\u4ed3\u5e93\u8def\u5f84\u6302\u5728`working_dir/{cluster_id}`\u76ee\u5f55\u4e0b\uff0c\u5e76\u4ee5`__spark_repository__{resource_name}`\u547d\u540d\uff0c\u8868\u793a\u96c6\u7fa4\u5185\u7684\u4e00\u4e2aresource\u5bf9\u5e94\u4e00\u4e2a\u8fdc\u7aef\u4ed3\u5e93\uff0c\u8fdc\u7aef\u4ed3\u5e93\u76ee\u5f55\u7ed3\u6784\u53c2\u8003\u5982\u4e0b:\n+\n+```\n+__spark_repository__spark0/\n+    |-__archive_1.0.0/\n+    |        |-__lib_990325d2c0d1d5e45bf675e54e44fb16_spark-dpp-1.0.0-jar-with-dependencies.jar\n+    |        |-__lib_7670c29daf535efe3c9b923f778f61fc_spark-2x.zip\n+    |-__archive_1.1.0/\n+    |        |-__lib_64d5696f99c379af2bee28c1c84271d5_spark-dpp-1.1.0-jar-with-dependencies.jar\n+    |        |-__lib_1bbb74bb6b264a270bc7fca3e964160f_spark-2x.zip\n+    |-__archive_1.2.0/\n+    |        |-...\n+```\n+\n+\u9664\u4e86spark\u4f9d\u8d56(\u9ed8\u8ba4\u4ee5`spark-2x.zip`\u547d\u540d)\uff0cFE\u8fd8\u4f1a\u4e0a\u4f20DPP\u7684\u4f9d\u8d56\u5305\u81f3\u8fdc\u7aef\u4ed3\u5e93\uff0c\u82e5\u6b64\u6b21spark load\u63d0\u4ea4\u7684\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u90fd\u5df2\u5b58\u5728\u8fdc\u7aef\u4ed3\u5e93\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u5728\u4e0a\u4f20\u4f9d\u8d56\uff0c\u7701\u4e0b\u539f\u6765\u6bcf\u6b21\u91cd\u590d\u4e0a\u4f20\u5927\u91cf\u6587\u4ef6\u7684\u65f6\u95f4\u3002\n \n+### \u914d\u7f6e YARN \u5ba2\u6237\u7aef\n+\n+FE\u5e95\u5c42\u901a\u8fc7\u6267\u884cyarn\u547d\u4ee4\u53bb\u83b7\u53d6\u6b63\u5728\u8fd0\u884c\u7684application\u7684\u72b6\u6001\u4ee5\u53ca\u6740\u6b7bapplication\uff0c\u56e0\u6b64\u9700\u8981\u4e3aFE\u914d\u7f6eyarn\u5ba2\u6237\u7aef\uff0c\u5efa\u8bae\u4f7f\u75282.5\u4ee5\u4e0a\u7684hadoop\u5b98\u65b9\u7248\u672c\uff0c[hadoop\u4e0b\u8f7d\u5730\u5740](https://archive.apache.org/dist/hadoop/common/)\uff0c\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u8bf7\u6309\u6b65\u9aa4\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\u3002", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a5d13c16808409b8bcf680ec87e93125473a768"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fd89099e5d40cc0719d093c6299f82f4d0cb950", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/2fd89099e5d40cc0719d093c6299f82f4d0cb950", "committedDate": "2020-08-31T15:25:39Z", "message": "save docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "629451e5327be930ff6dcb932f8bbdace76a5ceb", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/629451e5327be930ff6dcb932f8bbdace76a5ceb", "committedDate": "2020-08-31T15:25:39Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b121bc2b5b3b34a83aeb9080f7f6e5ea758e0b3", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/9b121bc2b5b3b34a83aeb9080f7f6e5ea758e0b3", "committedDate": "2020-08-31T15:25:39Z", "message": "remove empty line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99643a33bd2c462461e73e6753e8b7012aa236bb", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/99643a33bd2c462461e73e6753e8b7012aa236bb", "committedDate": "2020-08-31T15:31:19Z", "message": "add version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a5d13c16808409b8bcf680ec87e93125473a768", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/9a5d13c16808409b8bcf680ec87e93125473a768", "committedDate": "2020-08-31T13:17:53Z", "message": "remove empty line"}, "afterCommit": {"oid": "99643a33bd2c462461e73e6753e8b7012aa236bb", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/99643a33bd2c462461e73e6753e8b7012aa236bb", "committedDate": "2020-08-31T15:31:19Z", "message": "add version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3d811360114ee012420355a6851aadd9543cacb", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/f3d811360114ee012420355a6851aadd9543cacb", "committedDate": "2020-08-31T15:47:50Z", "message": "rebase master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4789934350121394f14bdf30c32ae5145246948a", "author": {"user": {"login": "xy720", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/4789934350121394f14bdf30c32ae5145246948a", "committedDate": "2020-08-31T15:51:17Z", "message": "remove"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Mzc2Njcw", "url": "https://github.com/apache/incubator-doris/pull/4489#pullrequestreview-479376670", "createdAt": "2020-09-01T03:32:29Z", "commit": {"oid": "4789934350121394f14bdf30c32ae5145246948a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4889, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}