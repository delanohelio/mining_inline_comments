{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MDg5NDY0", "number": 3761, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTo0NjoxNVrOECfGCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTowOTowNVrOECm0KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMDQyMDU5OnYy", "diffSide": "RIGHT", "path": "be/src/olap/data_dir.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTo0NjoxNVrOGe-INA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNDoyOToxMlrOGfIyAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyODM3Mg==", "bodyText": "Why not change it to RETURN_NOT_OK_STATUS_WITH_WARN?", "url": "https://github.com/apache/incubator-doris/pull/3761#discussion_r435128372", "createdAt": "2020-06-04T09:46:15Z", "author": {"login": "morningman"}, "path": "be/src/olap/data_dir.cpp", "diffHunk": "@@ -267,12 +281,13 @@ Status DataDir::_init_meta() {\n     _meta = new (std::nothrow) OlapMeta(_path);\n     if (_meta == nullptr) {\n         LOG(WARNING) << \"new olap meta failed\";\n-        return Status::InternalError(\"new olap meta failed\");\n+        return Status::MemoryAllocFailed(\"new olap meta failed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7592844e89478b90d7c6e6740100edc636c6ace"}, "originalPosition": 210}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMwMjkxNA==", "bodyText": "Updated.", "url": "https://github.com/apache/incubator-doris/pull/3761#discussion_r435302914", "createdAt": "2020-06-04T14:29:12Z", "author": {"login": "acelyc111"}, "path": "be/src/olap/data_dir.cpp", "diffHunk": "@@ -267,12 +281,13 @@ Status DataDir::_init_meta() {\n     _meta = new (std::nothrow) OlapMeta(_path);\n     if (_meta == nullptr) {\n         LOG(WARNING) << \"new olap meta failed\";\n-        return Status::InternalError(\"new olap meta failed\");\n+        return Status::MemoryAllocFailed(\"new olap meta failed\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyODM3Mg=="}, "originalCommit": {"oid": "b7592844e89478b90d7c6e6740100edc636c6ace"}, "originalPosition": 210}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMTY4NTUyOnYy", "diffSide": "RIGHT", "path": "be/src/olap/storage_engine.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTowOTowNVrOGfKo-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTowOTowNVrOGfKo-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMzMzM3MA==", "bodyText": "better to capture explictly.", "url": "https://github.com/apache/incubator-doris/pull/3761#discussion_r435333370", "createdAt": "2020-06-04T15:09:05Z", "author": {"login": "imay"}, "path": "be/src/olap/storage_engine.cpp", "diffHunk": "@@ -170,22 +167,28 @@ OLAPStatus StorageEngine::_open() {\n \n     _parse_default_rowset_type();\n \n-    return OLAP_SUCCESS;\n+    return Status::OK();\n }\n \n-OLAPStatus StorageEngine::_init_store_map() {\n+Status StorageEngine::_init_store_map() {\n     std::vector<DataDir*> tmp_stores;\n     std::vector<std::thread> threads;\n     std::atomic<bool> init_error{false};\n+    SpinLock error_msg_lock;\n+    std::string error_msg;\n     for (auto& path : _options.store_paths) {\n         DataDir* store = new DataDir(path.path, path.capacity_bytes, path.storage_medium,\n                                      _tablet_manager.get(), _txn_manager.get());\n         tmp_stores.emplace_back(store);\n-        threads.emplace_back([store, &init_error]() {\n+        threads.emplace_back([&]() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfaaf6a5584a48db017a566be450f04c77799251"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1448, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}