{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NjE0NzU0", "number": 4786, "title": "[Bug] Fix some date functions to make their result same as MySQL", "bodyText": "Proposed changes\ndayofweek, dayofmonth, dayofyear, weekofyear, timediff\nAlso fix ut compilation problem\nTypes of changes\n\n Bugfix (non-breaking change which fixes an issue)\n\nChecklist\n\n[] I have create an issue on (Fix #4785), and have described the bug/feature there in detail", "createdAt": "2020-10-25T15:52:32Z", "url": "https://github.com/apache/incubator-doris/pull/4786", "merged": true, "mergeCommit": {"oid": "bfdb15c730443ddc7eb0487a4439c939c35c1a51"}, "closed": true, "closedAt": "2020-10-27T04:52:45Z", "author": {"login": "morningman"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWBOx2gH2gAyNTA5NjE0NzU0OjY5YTUwYjM2MmNjZDk5MDdlNjE4OTBkZDljMjE0MWRmZjBkMWYxOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWPlMLAFqTUxNjUzMDAyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "69a50b362ccd9907e61890dd9c2141dff0d1f19d", "author": {"user": {"login": "morningman-cmy", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/69a50b362ccd9907e61890dd9c2141dff0d1f19d", "committedDate": "2020-10-25T15:09:37Z", "message": "fix ut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NDI5OTAx", "url": "https://github.com/apache/incubator-doris/pull/4786#pullrequestreview-516429901", "createdAt": "2020-10-26T01:59:58Z", "commit": {"oid": "69a50b362ccd9907e61890dd9c2141dff0d1f19d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwMTo1OTo1OFrOHn-zcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwMTo1OTo1OFrOHn-zcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTY4NTQ4OQ==", "bodyText": "Should add UT to cover this case.", "url": "https://github.com/apache/incubator-doris/pull/4786#discussion_r511685489", "createdAt": "2020-10-26T01:59:58Z", "author": {"login": "kangkaisen"}, "path": "be/src/exprs/timestamp_functions.cpp", "diffHunk": "@@ -126,7 +126,10 @@ IntVal TimestampFunctions::day_of_week(\n         return IntVal::null();\n     }\n     const DateTimeValue& ts_value = DateTimeValue::from_datetime_val(ts_val);\n-    return IntVal((ts_value.weekday() + 1 ) % 7 + 1);\n+    if (ts_value.is_valid_date()) {\n+        return IntVal((ts_value.weekday() + 1 ) % 7 + 1);\n+    }\n+    return IntVal::null();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a50b362ccd9907e61890dd9c2141dff0d1f19d"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4ecb658a68b4c84d87c295cf28b48739327e8d0", "author": {"user": {"login": "morningman-cmy", "name": null}}, "url": "https://github.com/apache/incubator-doris/commit/a4ecb658a68b4c84d87c295cf28b48739327e8d0", "committedDate": "2020-10-26T07:31:42Z", "message": "add ut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTMwMDIz", "url": "https://github.com/apache/incubator-doris/pull/4786#pullrequestreview-516530023", "createdAt": "2020-10-26T07:52:46Z", "commit": {"oid": "a4ecb658a68b4c84d87c295cf28b48739327e8d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4789, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}