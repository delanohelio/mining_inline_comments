{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NzI3NjQ1", "number": 3571, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODozNjowNlrOD790IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMjo1OTowNlrOD-CriQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjA1MzQ0OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODozNjowNlrOGUnPhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNDowODo0NVrOGVLX6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2NzY1NA==", "bodyText": "I think is_null is diffrent from empty bitmap.\nwhy here return an empty bitmap?", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424267654", "createdAt": "2020-05-13T08:36:06Z", "author": {"login": "kangpinghuang"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQzNDcxNw==", "bodyText": "I think null means \"no data\". And for \"no data\", return an empty set is reasonable.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424434717", "createdAt": "2020-05-13T13:25:20Z", "author": {"login": "morningman"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2NzY1NA=="}, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ2MzUxMA==", "bodyText": "I also think there is no need to serialize null bitmap.\nSet StringVal.is_null = true is better.\nfor in later merge function, we at first check if the StringVal is null.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424463510", "createdAt": "2020-05-13T14:03:39Z", "author": {"login": "wutiangan"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2NzY1NA=="}, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg1OTYyNA==", "bodyText": "This serialize function is  multiplexed by finalize function in other bitmap function such as bitmap_union.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424859624", "createdAt": "2020-05-14T04:08:45Z", "author": {"login": "EmmyMiao87"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2NzY1NA=="}, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjA1OTc1OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODozNzo0MlrOGUnTmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNDowOTozNFrOGVLYlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2ODY5Ng==", "bodyText": "why delete the src_bitmap here? who will manage the bitmap lifetime?", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424268696", "createdAt": "2020-05-13T08:37:42Z", "author": {"login": "kangpinghuang"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);\n+    } else {\n+        auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n+        StringVal result = serialize(ctx, src_bitmap);\n+        delete src_bitmap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg1OTc5Ng==", "bodyText": "The src_bitmap was initialized in merge function. So it need to delete src_bitmap when UDA has been finished.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424859796", "createdAt": "2020-05-14T04:09:34Z", "author": {"login": "EmmyMiao87"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -343,14 +367,19 @@ StringVal BitmapFunctions::bitmap_hash(doris_udf::FunctionContext* ctx, const do\n }\n \n StringVal BitmapFunctions::bitmap_serialize(FunctionContext* ctx, const StringVal& src) {\n-    auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n-    StringVal result = serialize(ctx, src_bitmap);\n-    delete src_bitmap;\n-    return result;\n+    if (src.is_null) {\n+        BitmapValue src_bitmap;\n+        return serialize(ctx, &src_bitmap);\n+    } else {\n+        auto src_bitmap = reinterpret_cast<BitmapValue*>(src.ptr);\n+        StringVal result = serialize(ctx, src_bitmap);\n+        delete src_bitmap;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI2ODY5Ng=="}, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjA4MjQ4OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODo0MzoxMFrOGUnhmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODo0MzoxMFrOGUnhmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI3MjI4Mw==", "bodyText": "It seems that when src.len == 0, the src.ptr point to the bitmap value pointer, but when src.len != 0, the ptr points to the serialized bitmap contents, why?", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424272283", "createdAt": "2020-05-13T08:43:10Z", "author": {"login": "kangpinghuang"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -302,6 +302,30 @@ void BitmapFunctions::bitmap_union(FunctionContext* ctx, const StringVal& src, S\n     }\n }\n \n+void BitmapFunctions::bitmap_intersect_init(FunctionContext* ctx, StringVal* dst) {\n+    dst->is_null = true;\n+}\n+\n+void BitmapFunctions::bitmap_intersect(FunctionContext* ctx, const StringVal& src, StringVal* dst) {\n+    if (src.is_null) {\n+        return;\n+    }\n+    // if dst is null, the src input is the first value\n+    if (dst->is_null) {\n+        dst->is_null = false;\n+        dst->len = sizeof(BitmapValue);\n+        dst->ptr = (uint8_t*)new BitmapValue((char*) src.ptr);\n+        return;\n+    }\n+    auto dst_bitmap = reinterpret_cast<BitmapValue*>(dst->ptr);\n+    // zero size means the src input is a agg object\n+    if (src.len == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MzA5MTQ4OnYy", "diffSide": "RIGHT", "path": "be/src/util/bitmap_value.h", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzoyNjoyMlrOGUxfGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzoyNjoyMlrOGUxfGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQzNTQ4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    BITMAP = 2// more than one elements\n          \n          \n            \n                    BITMAP = 2 // more than one elements", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424435480", "createdAt": "2020-05-13T13:26:22Z", "author": {"login": "morningman"}, "path": "be/src/util/bitmap_value.h", "diffHunk": "@@ -1235,7 +1235,7 @@ class BitmapValue {\n     enum BitmapDataType {\n         EMPTY = 0,\n         SINGLE = 1, // single element\n-        BITMAP = 2 // more than one elements\n+        BITMAP = 2// more than one elements", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7df59a69e1ec509192d0b4a7b7018bdc4fa0b62f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NjIxNjE5OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/catalog/FunctionSet.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNzo1MjoyOVrOGVQLvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwNjo1MzoyNFrOGXSO2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkzODQyOQ==", "bodyText": "You can't change this name directly.\nBecause it will cause query fail when grayscale upgrade", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r424938429", "createdAt": "2020-05-14T07:52:29Z", "author": {"login": "imay"}, "path": "fe/src/main/java/org/apache/doris/catalog/FunctionSet.java", "diffHunk": "@@ -554,29 +555,29 @@ public boolean isNonNullResultWithNullParamFunctions(String funcName) {\n     private static final Map<Type, String> BITMAP_INTERSECT_INIT_SYMBOL =\n             ImmutableMap.<Type, String>builder()\n                     .put(Type.TINYINT,\n-                            \"_ZN5doris15BitmapFunctions21bitmap_intersect_initIaN9doris_udf10TinyIntValEEEvPNS2_15FunctionContextEPNS2_9StringValE\")\n+                            \"_ZN5doris15BitmapFunctions20intersect_count_initIaN9doris_udf10TinyIntValEEEvPNS2_15FunctionContextEPNS2_9StringValE\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2bdd1db8eb22f8b245030c34fed911f92653440"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA2OTE0NA==", "bodyText": "The grayscale upgrade itself will also cause the query to fail\uff0cso I think the impact is not significant.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427069144", "createdAt": "2020-05-19T06:53:24Z", "author": {"login": "EmmyMiao87"}, "path": "fe/src/main/java/org/apache/doris/catalog/FunctionSet.java", "diffHunk": "@@ -554,29 +555,29 @@ public boolean isNonNullResultWithNullParamFunctions(String funcName) {\n     private static final Map<Type, String> BITMAP_INTERSECT_INIT_SYMBOL =\n             ImmutableMap.<Type, String>builder()\n                     .put(Type.TINYINT,\n-                            \"_ZN5doris15BitmapFunctions21bitmap_intersect_initIaN9doris_udf10TinyIntValEEEvPNS2_15FunctionContextEPNS2_9StringValE\")\n+                            \"_ZN5doris15BitmapFunctions20intersect_count_initIaN9doris_udf10TinyIntValEEEvPNS2_15FunctionContextEPNS2_9StringValE\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkzODQyOQ=="}, "originalCommit": {"oid": "d2bdd1db8eb22f8b245030c34fed911f92653440"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MTg4NDk1OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNTo0MTowNlrOGXmnVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNTo0MTowNlrOGXmnVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQwMzA5Mg==", "bodyText": "Would better add a UNLIKELY macros.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427403092", "createdAt": "2020-05-19T15:41:06Z", "author": {"login": "kangkaisen"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -302,6 +302,31 @@ void BitmapFunctions::bitmap_union(FunctionContext* ctx, const StringVal& src, S\n     }\n }\n \n+// this is the read init function for bitmap_intersect\n+void BitmapFunctions::bitmap_intersect_init_real(FunctionContext* ctx, StringVal* dst) {\n+    dst->is_null = true;\n+}\n+\n+void BitmapFunctions::bitmap_intersect(FunctionContext* ctx, const StringVal& src, StringVal* dst) {\n+    if (src.is_null) {\n+        return;\n+    }\n+    // if dst is null, the src input is the first value\n+    if (dst->is_null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MTk1MTg4OnYy", "diffSide": "RIGHT", "path": "docs/en/sql-reference/sql-functions/bitmap-functions/bitmap_intersect.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNTo1NjowOVrOGXnRnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMTo0Njo1N1rOGYHs0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxMzkxNg==", "bodyText": "should add this file to sidebar to make it visible.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427413916", "createdAt": "2020-05-19T15:56:09Z", "author": {"login": "imay"}, "path": "docs/en/sql-reference/sql-functions/bitmap-functions/bitmap_intersect.md", "diffHunk": "@@ -0,0 +1,54 @@\n+---\n+{\n+    \"title\": \"bitmap_intersect\",\n+    \"language\": \"en\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzk0NTE3MA==", "bodyText": "Added", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427945170", "createdAt": "2020-05-20T11:46:57Z", "author": {"login": "EmmyMiao87"}, "path": "docs/en/sql-reference/sql-functions/bitmap-functions/bitmap_intersect.md", "diffHunk": "@@ -0,0 +1,54 @@\n+---\n+{\n+    \"title\": \"bitmap_intersect\",\n+    \"language\": \"en\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxMzkxNg=="}, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MTk3Mzc0OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjowMTowN1rOGXnfYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMTo0NjoyMFrOGYHrmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxNzQ0MQ==", "bodyText": "why initial result bitmap as null? it seems that it will return empty bitmap when result bitmap is null", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427417441", "createdAt": "2020-05-19T16:01:07Z", "author": {"login": "imay"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -302,6 +302,31 @@ void BitmapFunctions::bitmap_union(FunctionContext* ctx, const StringVal& src, S\n     }\n }\n \n+// this is the read init function for bitmap_intersect\n+void BitmapFunctions::bitmap_intersect_init_real(FunctionContext* ctx, StringVal* dst) {\n+    dst->is_null = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzk0NDg1OA==", "bodyText": "The initial result bitmap must be null. Otherwise, the intersection between dst and src will be empty.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427944858", "createdAt": "2020-05-20T11:46:20Z", "author": {"login": "EmmyMiao87"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -302,6 +302,31 @@ void BitmapFunctions::bitmap_union(FunctionContext* ctx, const StringVal& src, S\n     }\n }\n \n+// this is the read init function for bitmap_intersect\n+void BitmapFunctions::bitmap_intersect_init_real(FunctionContext* ctx, StringVal* dst) {\n+    dst->is_null = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxNzQ0MQ=="}, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MzgyMjE3OnYy", "diffSide": "RIGHT", "path": "be/src/exprs/bitmap_function.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMjo1OTowNlrOGX5nGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMjo1OTowNlrOGX5nGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcxNDMyOA==", "bodyText": "\u8fd9\u4e2ainit\u51fd\u6570\u662f\u901a\u7528\u7684\uff0c\u5c06\u6765\u4e0d\u6b62bitmap_intersect \u4f1a\u7528\u5230\u3002\n\u5f53\u524d bitmap_init \u7684\u5b9e\u73b0\u662fnot nullable\u7684\uff0c\u6240\u4ee5\u4f60\u8fd9\u4e2a\u51fd\u6570\u5408\u7406\u7684\u547d\u540d\u5e94\u8be5\u662fnullable_bitmap_init\uff0c \u6216\u8005bitmap_nullable_init.", "url": "https://github.com/apache/incubator-doris/pull/3571#discussion_r427714328", "createdAt": "2020-05-20T02:59:06Z", "author": {"login": "kangkaisen"}, "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -302,6 +302,31 @@ void BitmapFunctions::bitmap_union(FunctionContext* ctx, const StringVal& src, S\n     }\n }\n \n+// this is the read init function for bitmap_intersect\n+void BitmapFunctions::bitmap_intersect_init_real(FunctionContext* ctx, StringVal* dst) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e0bf1a775111f825476f08f076282abed158da6"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1803, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}