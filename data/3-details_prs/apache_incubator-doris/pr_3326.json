{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODY3MjE4", "number": 3326, "title": "[LSAN] Fix some memory leak detected by LSAN", "bodyText": "", "createdAt": "2020-04-15T16:33:48Z", "url": "https://github.com/apache/incubator-doris/pull/3326", "merged": true, "mergeCommit": {"oid": "4a7a88ede13a22af4080248ce6470038e2b09b75"}, "closed": true, "closedAt": "2020-04-22T14:59:45Z", "author": {"login": "acelyc111"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX6saugH2gAyNDAzODY3MjE4OjFjZWNhMmYzZGE2ZWZmYjYzMjc2YTMxMjJlMDA1OThjMzExMjFkMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaJksIAFqTM5ODI3OTgwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1ceca2f3da6effb63276a3122e00598c31121d1f", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/1ceca2f3da6effb63276a3122e00598c31121d1f", "committedDate": "2020-04-15T16:29:21Z", "message": "[LSAN] Fix some memory leak dectected by LSAN"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11bce9790f65f933708797ff634220f5ba3380a4", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/11bce9790f65f933708797ff634220f5ba3380a4", "committedDate": "2020-04-15T17:30:32Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce9b93871d57161aa4382e83cd93b90169e3c0d", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/0ce9b93871d57161aa4382e83cd93b90169e3c0d", "committedDate": "2020-04-16T04:19:28Z", "message": "fix ut failures in release mode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MjkwNjE3", "url": "https://github.com/apache/incubator-doris/pull/3326#pullrequestreview-394290617", "createdAt": "2020-04-16T04:29:44Z", "commit": {"oid": "0ce9b93871d57161aa4382e83cd93b90169e3c0d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNDoyOTo0NFrOGGUJnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNDozMToyMFrOGGULGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3NDc4Mw==", "bodyText": "It is safe to delete nullptr, and _disjuncts is cleared later on, so keep using delete is OK", "url": "https://github.com/apache/incubator-doris/pull/3326#discussion_r409274783", "createdAt": "2020-04-16T04:29:44Z", "author": {"login": "imay"}, "path": "be/src/exec/es/es_predicate.cpp", "diffHunk": "@@ -178,7 +179,7 @@ EsPredicate::EsPredicate(ExprContext* context,\n \n EsPredicate::~EsPredicate() {\n     for(int i=0; i < _disjuncts.size(); i++) {\n-        delete _disjuncts[i];\n+        SAFE_DELETE(_disjuncts[i]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ce9b93871d57161aa4382e83cd93b90169e3c0d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3NTE2Mg==", "bodyText": "just delete is OK", "url": "https://github.com/apache/incubator-doris/pull/3326#discussion_r409275162", "createdAt": "2020-04-16T04:31:20Z", "author": {"login": "imay"}, "path": "be/src/exec/es/es_query_builder.cpp", "diffHunk": "@@ -169,20 +170,16 @@ BooleanQueryBuilder::BooleanQueryBuilder() {\n }\n BooleanQueryBuilder::~BooleanQueryBuilder() {\n     for (auto clause : _must_clauses) {\n-        delete clause;\n-        clause = nullptr;\n+        SAFE_DELETE(clause);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ce9b93871d57161aa4382e83cd93b90169e3c0d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aae33333e3174ef934b6fc59a0bdbf9f4186b4b", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/7aae33333e3174ef934b6fc59a0bdbf9f4186b4b", "committedDate": "2020-04-16T05:33:52Z", "message": "revert some SAFE_DELETE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eea004ae71d28851b9a73d48b83b288f618bf36", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/9eea004ae71d28851b9a73d48b83b288f618bf36", "committedDate": "2020-04-16T05:35:13Z", "message": "revert some SAFE_DELETE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61ae8d832d99b156c21693fc4dc8a9ff5f0c0a54", "author": {"user": {"login": "acelyc111", "name": "Yingchun Lai"}}, "url": "https://github.com/apache/incubator-doris/commit/61ae8d832d99b156c21693fc4dc8a9ff5f0c0a54", "committedDate": "2020-04-17T09:12:13Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4Mjc5ODA5", "url": "https://github.com/apache/incubator-doris/pull/3326#pullrequestreview-398279809", "createdAt": "2020-04-22T14:57:20Z", "commit": {"oid": "61ae8d832d99b156c21693fc4dc8a9ff5f0c0a54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3243, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}