{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NTcwMzEy", "number": 2933, "title": "Fix the flush_status bug in flush-executor", "bodyText": "For a tablet, there may be multiple memtables, which will be\nflushed to disk one by one in the order of generation.\nIf a memtable flush fails, then the load job will definitely\nfail, but the previous implementation will overwrite _flush_status,\nwhich may make the error can not be detected, leads to an error\nload job to be success.\nThis patch also have two other changes:\n\nUse std::bind to replace boost::bind;\nRemoves some unneeded headers.\n\nthis is an TODO in #2931", "createdAt": "2020-02-18T11:42:30Z", "url": "https://github.com/apache/incubator-doris/pull/2933", "merged": true, "mergeCommit": {"oid": "c617fc9064cc8475b7c6a5ecbe540e3a88e05663"}, "closed": true, "closedAt": "2020-02-19T12:23:20Z", "author": {"login": "lingbin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFh2OeAFqTM2MDMzMDgwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF1mnXgFqTM2MTA2NzA1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzMwODAz", "url": "https://github.com/apache/incubator-doris/pull/2933#pullrequestreview-360330803", "createdAt": "2020-02-18T13:21:47Z", "commit": {"oid": "7d869da287690e18ae57e666cae221296fe689b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMzoyMTo0OFrOFrCD6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMzoyMTo0OFrOFrCD6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2Njg1OA==", "bodyText": "why not use const std::shared_ptr<MemTable>& to avoid a copy assignment?", "url": "https://github.com/apache/incubator-doris/pull/2933#discussion_r380666858", "createdAt": "2020-02-18T13:21:48Z", "author": {"login": "imay"}, "path": "be/src/olap/memtable_flush_executor.cpp", "diffHunk": "@@ -35,15 +31,15 @@ std::ostream& operator<<(std::ostream& os, const FlushStatistic& stat) {\n }\n \n OLAPStatus FlushToken::submit(std::shared_ptr<MemTable> memtable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d869da287690e18ae57e666cae221296fe689b6"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4792a7d831b5d769c687ecbc7b6337d754dcb81", "author": {"user": {"login": "lingbin", "name": "LingBin"}}, "url": "https://github.com/apache/incubator-doris/commit/e4792a7d831b5d769c687ecbc7b6337d754dcb81", "committedDate": "2020-02-18T15:23:39Z", "message": "Fix the flush_status bug in flush-executor\n\nFor a tablet, there may be multiple memtables, which will be\nflushed to disk one by one in the order of generation.\n\nIf a memtable flush fails, then the load job will definitely\nfail, but the previous implementation will overwrite `_flush_status`,\nwhich may make the error can not be detected, leads to an error\nload job to be success.\n\nThis patch also have two other changes:\n1. Use `std::bind` to replace `boost::bind`;\n2. Removes some unneeded headers."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d869da287690e18ae57e666cae221296fe689b6", "author": {"user": {"login": "lingbin", "name": "LingBin"}}, "url": "https://github.com/apache/incubator-doris/commit/7d869da287690e18ae57e666cae221296fe689b6", "committedDate": "2020-02-18T11:36:26Z", "message": "Use `std::bind` to replace `boost::bind` in flush-executor\n\nThis patch also removes some unneeded headers."}, "afterCommit": {"oid": "e4792a7d831b5d769c687ecbc7b6337d754dcb81", "author": {"user": {"login": "lingbin", "name": "LingBin"}}, "url": "https://github.com/apache/incubator-doris/commit/e4792a7d831b5d769c687ecbc7b6337d754dcb81", "committedDate": "2020-02-18T15:23:39Z", "message": "Fix the flush_status bug in flush-executor\n\nFor a tablet, there may be multiple memtables, which will be\nflushed to disk one by one in the order of generation.\n\nIf a memtable flush fails, then the load job will definitely\nfail, but the previous implementation will overwrite `_flush_status`,\nwhich may make the error can not be detected, leads to an error\nload job to be success.\n\nThis patch also have two other changes:\n1. Use `std::bind` to replace `boost::bind`;\n2. Removes some unneeded headers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e03105ef0734bd82f2fbf166f0a52f022ec8707c", "author": {"user": {"login": "lingbin", "name": "LingBin"}}, "url": "https://github.com/apache/incubator-doris/commit/e03105ef0734bd82f2fbf166f0a52f022ec8707c", "committedDate": "2020-02-19T09:25:25Z", "message": "Change the param of  to be a reference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDY3MDU0", "url": "https://github.com/apache/incubator-doris/pull/2933#pullrequestreview-361067054", "createdAt": "2020-02-19T12:22:51Z", "commit": {"oid": "e03105ef0734bd82f2fbf166f0a52f022ec8707c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3805, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}