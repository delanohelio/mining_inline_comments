{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODk5MjUw", "number": 2650, "title": "Fix incompatibility with arm architecture in util and gutil #2645", "bodyText": "upgrade  gutil code from imapla  to new verison\uff0c include cpuinfo, spinlock and linux_syscall_support \nimpliments arm version  utf8 check code\nremove incompatible code from stopwatch\n\n#2645", "createdAt": "2020-01-03T07:34:11Z", "url": "https://github.com/apache/incubator-doris/pull/2650", "merged": true, "mergeCommit": {"oid": "de4d1778c62b70f06f5414a32136a547a7cb5d9d"}, "closed": true, "closedAt": "2020-01-06T10:39:32Z", "author": {"login": "yangzhg"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3lylPAFqTMzODQ3ODg5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3pvUCgFqTMzODU3NDA5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDc4ODk5", "url": "https://github.com/apache/incubator-doris/pull/2650#pullrequestreview-338478899", "createdAt": "2020-01-06T06:00:12Z", "commit": {"oid": "7e6cac33ca026818743874e4010971495584166d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNjowMDoxMlrOFaV-_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNjowMTozOVrOFaV_8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE2NzQ4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            be/src/util/utf8_check.h: MIT license\n          \n          \n            \n            be/src/util/utf8_check.cpp: MIT license", "url": "https://github.com/apache/incubator-doris/pull/2650#discussion_r363167486", "createdAt": "2020-01-06T06:00:12Z", "author": {"login": "imay"}, "path": "LICENSE.txt", "diffHunk": "@@ -599,3 +599,26 @@ be/src/util/minizip/* :  Condition of use and distribution are the same than zli\n \n --------------------------------------------------------------------------------\n \n+be/src/util/utf8_check.h: MIT license", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e6cac33ca026818743874e4010971495584166d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE2NzczMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            int utf8_naive(const char *data, int len);\n          \n          \n            \n            bool utf8_naive(const char *data, size_t len);", "url": "https://github.com/apache/incubator-doris/pull/2650#discussion_r363167731", "createdAt": "2020-01-06T06:01:39Z", "author": {"login": "imay"}, "path": "be/src/util/utf8_check.h", "diffHunk": "@@ -0,0 +1,33 @@\n+\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef DORIS_BE_SRC_UTIL_UTF8_CHECK_H\n+#define DORIS_BE_SRC_UTIL_UTF8_CHECK_H\n+\n+#include <cstddef>\n+\n+namespace doris {\n+// check utf8 code using simd instructions\n+// Return true - success,  false fail\n+bool validate_utf8(const char *src, size_t len);\n+// chech utf8 use naive c++\n+// Return 0 - success,  >0 - index(1 based) of first error char\n+int utf8_naive(const char *data, int len);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e6cac33ca026818743874e4010971495584166d"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1187dac24e16a644847405f816ce33d98e6740", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/0d1187dac24e16a644847405f816ce33d98e6740", "committedDate": "2020-01-06T08:58:42Z", "message": "Fix incompatibility with arm architecture in util and gutil #2645"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53ea400980189a1a20e8ef4f1b59dfd2f2bacba1", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/53ea400980189a1a20e8ef4f1b59dfd2f2bacba1", "committedDate": "2020-01-06T08:07:12Z", "message": "add unittest"}, "afterCommit": {"oid": "0d1187dac24e16a644847405f816ce33d98e6740", "author": {"user": {"login": "yangzhg", "name": "Zhengguo Yang"}}, "url": "https://github.com/apache/incubator-doris/commit/0d1187dac24e16a644847405f816ce33d98e6740", "committedDate": "2020-01-06T08:58:42Z", "message": "Fix incompatibility with arm architecture in util and gutil #2645"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NTc0MDk5", "url": "https://github.com/apache/incubator-doris/pull/2650#pullrequestreview-338574099", "createdAt": "2020-01-06T10:38:33Z", "commit": {"oid": "0d1187dac24e16a644847405f816ce33d98e6740"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3854, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}