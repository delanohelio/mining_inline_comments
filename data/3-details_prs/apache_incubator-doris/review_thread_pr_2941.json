{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2OTQxNDQ3", "number": 2941, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyMzo1MVrODg7ZNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyNDoxMFrODg7ZbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1ODU0MTM0OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyMzo1MVrOFrZ9vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyMzo1MVrOFrZ9vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA1ODQ5Mg==", "bodyText": "If the column is dropped, all type of index should be dropped, so here should not add this if clause.", "url": "https://github.com/apache/incubator-doris/pull/2941#discussion_r381058492", "createdAt": "2020-02-19T03:23:51Z", "author": {"login": "kangpinghuang"}, "path": "fe/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "diffHunk": "@@ -224,7 +225,17 @@ private void processDropColumn(DropColumnClause alterClause, OlapTable olapTable\n                 }\n             }\n         }\n-        \n+\n+        Iterator<Index> it = indexes.iterator();\n+        while(it.hasNext()){\n+            Index index = it.next();\n+            if(index.getIndexType() == IndexDef.IndexType.BITMAP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319d19cd03f724e4bf87f0bcd08cd399a42092cf"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1ODU0MTg5OnYy", "diffSide": "RIGHT", "path": "fe/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyNDoxMFrOFrZ-Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMzoyNDoxMFrOFrZ-Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA1ODU2Ng==", "bodyText": "add some comment for this argments.", "url": "https://github.com/apache/incubator-doris/pull/2941#discussion_r381058566", "createdAt": "2020-02-19T03:24:10Z", "author": {"login": "kangpinghuang"}, "path": "fe/src/main/java/org/apache/doris/alter/SchemaChangeHandler.java", "diffHunk": "@@ -157,7 +158,7 @@ private void processAddColumns(AddColumnsClause alterClause, OlapTable olapTable\n     }\n \n     private void processDropColumn(DropColumnClause alterClause, OlapTable olapTable,\n-                                  Map<Long, LinkedList<Column>> indexSchemaMap) throws DdlException {\n+                                  Map<Long, LinkedList<Column>> indexSchemaMap, List<Index> indexes) throws DdlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319d19cd03f724e4bf87f0bcd08cd399a42092cf"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2258, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}