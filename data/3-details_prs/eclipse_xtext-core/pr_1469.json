{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNjI2ODQx", "number": 1469, "title": "[#1467] Made lookAhead independent from encountered hidden tokens", "bodyText": "Made lookAhead independent from encountered hidden tokens\ncloses #1467", "createdAt": "2020-05-03T16:16:56Z", "url": "https://github.com/eclipse/xtext-core/pull/1469", "merged": true, "mergeCommit": {"oid": "b15fd84cfea68851168d81e17df3af10252df6b5"}, "closed": true, "closedAt": "2020-05-04T15:18:35Z", "author": {"login": "szarnekow"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd7ZirgFqTQwNDgwMTM5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcibbTbAFqTQxMzM2NzA1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODAxMzkz", "url": "https://github.com/eclipse/xtext-core/pull/1469#pullrequestreview-404801393", "createdAt": "2020-05-04T08:42:11Z", "commit": {"oid": "91d3d14a20244f59d86eb7271b59d286ba68be8e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0MjoxMVrOGP3X-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0MjoxMVrOGP3X-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4OTA4Mg==", "bodyText": "what if rootNode is null?", "url": "https://github.com/eclipse/xtext-core/pull/1469#discussion_r419289082", "createdAt": "2020-05-04T08:42:11Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.testing/src/org/eclipse/xtext/testing/util/ParseHelper.java", "diffHunk": "@@ -40,6 +48,13 @@ public void setFileExtensionProvider(FileExtensionProvider extensionProvider) {\n \tpublic T parse(InputStream in, URI uriToUse, Map<?, ?> options, ResourceSet resourceSet) {\n \t\tresourceHelper.setFileExtension(fileExtension);\n \t\tResource resource = resourceHelper.resource(in, uriToUse, options, resourceSet);\n+\t\tif (resource instanceof XtextResource) {\n+\t\t\tIParseResult parseResult = ((XtextResource) resource).getParseResult();\n+\t\t\tif (parseResult != null) {\n+\t\t\t\tICompositeNode rootNode = parseResult.getRootNode();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91d3d14a20244f59d86eb7271b59d286ba68be8e"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODA0NjE1", "url": "https://github.com/eclipse/xtext-core/pull/1469#pullrequestreview-404804615", "createdAt": "2020-05-04T08:46:57Z", "commit": {"oid": "91d3d14a20244f59d86eb7271b59d286ba68be8e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0Njo1N1rOGP3iKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0Njo1N1rOGP3iKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI5MTY5MQ==", "bodyText": "@Beta ? @since ?", "url": "https://github.com/eclipse/xtext-core/pull/1469#discussion_r419291691", "createdAt": "2020-05-04T08:46:57Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext/src/org/eclipse/xtext/nodemodel/LookAheadInfo.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Sebastian Zarnekow and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package org.eclipse.xtext.nodemodel;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.eclipse.xtext.Action;\n+\n+import com.google.common.base.Preconditions;\n+\n+/**\n+ * Utility to work with the lookAhead information in the node model.\n+ * \n+ * @author Sebastian Zarnekow - Initial contribution and API\n+ */\n+public class LookAheadInfo {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91d3d14a20244f59d86eb7271b59d286ba68be8e"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5c754184de772e735a6a4788e1054ee9e06de59", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/c5c754184de772e735a6a4788e1054ee9e06de59", "committedDate": "2020-05-04T11:52:12Z", "message": "[#1467] Added more tests for lookAhead"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cf5abc79e88340a69918167958f9eaea1b850b2", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/7cf5abc79e88340a69918167958f9eaea1b850b2", "committedDate": "2020-05-04T11:52:13Z", "message": "[#1467] Made lookAhead independent from encountered hidden tokens"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "735bed10cabd09deb7fde3a034b0a80a0cf540f8", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/735bed10cabd09deb7fde3a034b0a80a0cf540f8", "committedDate": "2020-05-04T11:52:13Z", "message": "[#1467] Add consistency checks to all parsing routines in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91d3d14a20244f59d86eb7271b59d286ba68be8e", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/91d3d14a20244f59d86eb7271b59d286ba68be8e", "committedDate": "2020-05-03T16:12:58Z", "message": "Adjust pipelines"}, "afterCommit": {"oid": "0897f6f9de42cae8615ec770ff365f335b2b3824", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/0897f6f9de42cae8615ec770ff365f335b2b3824", "committedDate": "2020-05-04T11:52:13Z", "message": "Adjust pipelines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0897f6f9de42cae8615ec770ff365f335b2b3824", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/0897f6f9de42cae8615ec770ff365f335b2b3824", "committedDate": "2020-05-04T11:52:13Z", "message": "Adjust pipelines"}, "afterCommit": {"oid": "735bed10cabd09deb7fde3a034b0a80a0cf540f8", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/735bed10cabd09deb7fde3a034b0a80a0cf540f8", "committedDate": "2020-05-04T11:52:13Z", "message": "[#1467] Add consistency checks to all parsing routines in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "190e326af7a83faa12612b1429940a0d25f5ac67", "author": {"user": {"login": "szarnekow", "name": "Sebastian Zarnekow"}}, "url": "https://github.com/eclipse/xtext-core/commit/190e326af7a83faa12612b1429940a0d25f5ac67", "committedDate": "2020-05-04T13:54:03Z", "message": "Review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDA5OTcz", "url": "https://github.com/eclipse/xtext-core/pull/1469#pullrequestreview-405009973", "createdAt": "2020-05-04T13:55:30Z", "commit": {"oid": "190e326af7a83faa12612b1429940a0d25f5ac67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMzY3MDU4", "url": "https://github.com/eclipse/xtext-core/pull/1469#pullrequestreview-413367058", "createdAt": "2020-05-18T08:16:45Z", "commit": {"oid": "190e326af7a83faa12612b1429940a0d25f5ac67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwODoxNjo0NVrOGWsNqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwODoxNjo0NVrOGWsNqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQ0NjI0OA==", "bodyText": "@szarnekow @cdietrich Should the inner class be marked with the @since 2.22 as well, or it is enough if the outer class have the @since 2.22 tag?", "url": "https://github.com/eclipse/xtext-core/pull/1469#discussion_r426446248", "createdAt": "2020-05-18T08:16:45Z", "author": {"login": "miklossy"}, "path": "org.eclipse.xtext/src/org/eclipse/xtext/nodemodel/LookAheadInfo.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Sebastian Zarnekow and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package org.eclipse.xtext.nodemodel;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import org.eclipse.xtext.Action;\n+\n+import com.google.common.annotations.Beta;\n+import com.google.common.base.Preconditions;\n+\n+/**\n+ * Utility to work with the lookAhead information in the node model.\n+ * \n+ * @author Sebastian Zarnekow - Initial contribution and API\n+ * \n+ * @since 2.22\n+ */\n+@Beta\n+public class LookAheadInfo {\n+\n+\t/* TODO \n+\t * - add getLookAhead(INode node) with support for leaf-nodes\n+\t * - add getLookBeyond(INode node)\n+\t * - getParserInformation(int offset): ParserInformation with ParserInformation( ParserRule, TextRegion, Iterator**) \n+\t *   usable for content assist, e.g. it must support parameterized rule stack recreation\n+\t * - getEntryPoint(int offset, int length, String newText) with support for partial parsing (consider lookBeyond)\n+\t * - Iterator** returns an iterator over nodes from the entry point to the position such that\n+\t *   the parser would reach the position as fast as possible, e.g. an iterator that skips over\n+\t *   regions that are not relevant to the parsers decision\n+\t * - INode.getLookAheadInfo(): LookAheadInfo as default method that uses the resource to obtain an \n+\t *   injectable LookAheadInfo.Factory from allow customization\n+\t */\n+\t\n+\tpublic static class InconsistentLookAheadException extends RuntimeException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "190e326af7a83faa12612b1429940a0d25f5ac67"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4777, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}