{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMTQzMzU3", "number": 1355, "title": "Add hashCode() and equals() to ReplaceRegion", "bodyText": "org.eclipse.xtext.util.ReplaceRegion does not provide the methods hashCode() or equals(). This is a problem when using for instance org.eclipse.xtext.ide.editor.contentassist.ContentAssistEntry. ContentAssistEntry uses Xtend annotation @EqualsHashCode and also defines a field of type ArrayList<ReplaceRegion>. Since ReplaceRegion lacks method hashCode(), the hash code method of ContentAssistEntry is unreliable and instances of ReplaceRegion cannot be used e.g. in HashSets.\nPlease let me know if you have suggestions to improve the implementations of hashCode() and equals().", "createdAt": "2020-01-15T13:41:54Z", "url": "https://github.com/eclipse/xtext-core/pull/1355", "merged": true, "mergeCommit": {"oid": "f8d52a593fbe38b07a089ee98ce2143212fdae7a"}, "closed": true, "closedAt": "2020-01-17T09:01:08Z", "author": {"login": "mmews-n4"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6lpJXAH2gAyMzYzMTQzMzU3OjE5OGE3NGUyNzA5Njg1ODE1ODFhMTU5MzJiNmE3ODc4ZDMwOTllZmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7K7_LAFqTM0NDQzOTA5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "198a74e270968581581a15932b6a7878d3099eff", "author": {"user": {"login": "mmews-n4", "name": null}}, "url": "https://github.com/eclipse/xtext-core/commit/198a74e270968581581a15932b6a7878d3099eff", "committedDate": "2020-01-15T13:33:58Z", "message": "add hashCode() and equals() to ReplaceRegion\n\nSigned-off-by: mmews <marcus.mews@numberfour.eu>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzMjY4Nzcw", "url": "https://github.com/eclipse/xtext-core/pull/1355#pullrequestreview-343268770", "createdAt": "2020-01-15T14:44:40Z", "commit": {"oid": "198a74e270968581581a15932b6a7878d3099eff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNDo0NDo0MFrOFd6oCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNDo0NTowOFrOFd6pAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkxMzU0Nw==", "bodyText": "I'm not a big fan of Object.equals(..) for primitives. It causes boxing and is distracting for the reader.\nHow does the equals / hashcode methods look like when they are generated by Eclipse?", "url": "https://github.com/eclipse/xtext-core/pull/1355#discussion_r366913547", "createdAt": "2020-01-15T14:44:40Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.util/src/org/eclipse/xtext/util/ReplaceRegion.java", "diffHunk": "@@ -56,6 +58,25 @@ public void applyTo(StringBuilder builder) {\n \t\tbuilder.replace(offset, getEndOffset(), text);\n \t}\n \t\n+\t@Override\n+\tpublic boolean equals(Object object) {\n+\t\tif (object instanceof ReplaceRegion) {\n+\t\t\tReplaceRegion rr = (ReplaceRegion) object;\n+\n+\t\t\tboolean equals = true;\n+\t\t\tequals = equals && Objects.equals(getOffset(), rr.getOffset());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "198a74e270968581581a15932b6a7878d3099eff"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkxMzc5Mg==", "bodyText": "This builds an array of values including boxing conversion. I think the defaults as generated by Eclipse are better.", "url": "https://github.com/eclipse/xtext-core/pull/1355#discussion_r366913792", "createdAt": "2020-01-15T14:45:08Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.util/src/org/eclipse/xtext/util/ReplaceRegion.java", "diffHunk": "@@ -56,6 +58,25 @@ public void applyTo(StringBuilder builder) {\n \t\tbuilder.replace(offset, getEndOffset(), text);\n \t}\n \t\n+\t@Override\n+\tpublic boolean equals(Object object) {\n+\t\tif (object instanceof ReplaceRegion) {\n+\t\t\tReplaceRegion rr = (ReplaceRegion) object;\n+\n+\t\t\tboolean equals = true;\n+\t\t\tequals = equals && Objects.equals(getOffset(), rr.getOffset());\n+\t\t\tequals = equals && Objects.equals(getLength(), rr.getLength());\n+\t\t\tequals = equals && Objects.equals(getText(), rr.getText());\n+\t\t\treturn equals;\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n+\t@Override\n+\tpublic int hashCode() {\n+\t\treturn Objects.hash(getOffset(), getLength(), getText());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "198a74e270968581581a15932b6a7878d3099eff"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4353ade62bdf157d46853befd91861012f2e7527", "author": {"user": {"login": "mmews-n4", "name": null}}, "url": "https://github.com/eclipse/xtext-core/commit/4353ade62bdf157d46853befd91861012f2e7527", "committedDate": "2020-01-16T09:46:24Z", "message": "performance improvements, add check for class\n\nSigned-off-by: mmews <marcus.mews@numberfour.eu>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzODcxMzkz", "url": "https://github.com/eclipse/xtext-core/pull/1355#pullrequestreview-343871393", "createdAt": "2020-01-16T12:18:33Z", "commit": {"oid": "4353ade62bdf157d46853befd91861012f2e7527"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NDM5MDk2", "url": "https://github.com/eclipse/xtext-core/pull/1355#pullrequestreview-344439096", "createdAt": "2020-01-17T09:01:02Z", "commit": {"oid": "4353ade62bdf157d46853befd91861012f2e7527"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4812, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}