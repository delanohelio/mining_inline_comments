{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MDc2Njgw", "number": 5424, "title": "Add superdataset replicas number config", "bodyText": "\u2026set index.\nPlease answer these questions before submitting a pull request\n\n\nWhy submit this pull request?\n\n\n Improve performance\n\n\nRelated issues\n\n\n\nNew feature or improvement\n\nDescribe the details and related test reports.\nmertics or common record index  would improve the stability of index and improve search performance when the replicas number is greater than 0.\nBut superdataset index would be cost so many resources when the replicas number is same as the number of above indices.\nSo distinct the config may be a good choice.", "createdAt": "2020-09-01T13:20:12Z", "url": "https://github.com/apache/skywalking/pull/5424", "merged": true, "mergeCommit": {"oid": "15b0068fdf8df2c610abc58dd763679ca1a7f22b"}, "closed": true, "closedAt": "2020-09-01T15:06:22Z", "author": {"login": "EvanLjp"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEnN18gH2gAyNDc3MDc2NjgwOjE5ZjljMTg1NjU2OTc2NTQ2N2Y1YjU2YjhjMDQ5N2ZjMWUyNjUyMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEo0I0gFqTQ3OTg0MTU5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "19f9c1856569765467f5b56b8c0497fc1e265210", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/19f9c1856569765467f5b56b8c0497fc1e265210", "committedDate": "2020-09-01T13:14:21Z", "message": "distinct the number of metrics or common record index with super dataset index."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NzYxMDYx", "url": "https://github.com/apache/skywalking/pull/5424#pullrequestreview-479761061", "createdAt": "2020-09-01T13:50:18Z", "commit": {"oid": "19f9c1856569765467f5b56b8c0497fc1e265210"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo1MDoxOFrOHK3Nfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo1MDoxOFrOHK3Nfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MjM4Mw==", "bodyText": "As you moved all superset config in one place in the doc and config file, please do the same thing for the config class", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481152383", "createdAt": "2020-09-01T13:50:18Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "diffHunk": "@@ -38,6 +39,12 @@\n     private int superDatasetIndexShardsFactor = 5;\n     @Setter\n     private int indexReplicasNumber = 0;\n+    /**\n+     * @since 8.2.0, the replicas number is for super size dataset record replicas number\n+     * @see SuperDataset\n+     */\n+    @Setter\n+    private int superDatasetIndexReplicasNumber = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19f9c1856569765467f5b56b8c0497fc1e265210"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c01a1fde99433a8ad01968080d1755cfa4b634bf", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/c01a1fde99433a8ad01968080d1755cfa4b634bf", "committedDate": "2020-09-01T13:59:34Z", "message": "clear up StorageModuleElasticsearchConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Nzc0MDU4", "url": "https://github.com/apache/skywalking/pull/5424#pullrequestreview-479774058", "createdAt": "2020-09-01T14:03:58Z", "commit": {"oid": "c01a1fde99433a8ad01968080d1755cfa4b634bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDowMzo1OVrOHK3y3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDowMzo1OVrOHK3y3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MTk0OQ==", "bodyText": "As usual, don't change the default value, it used to be 1 replicate. Many new users even don't expect this.", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481161949", "createdAt": "2020-09-01T14:03:59Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/configuration-vocabulary.md", "diffHunk": "@@ -74,12 +74,13 @@ core|default|role|Option values, `Mixed/Receiver/Aggregator`. **Receiver** mode\n | - | - | password | Password of ElasticSearch cluster | SW_ES_PASSWORD | - |\n | - | - | trustStorePath | Trust JKS file path. Only work when user name and password opened | SW_STORAGE_ES_SSL_JKS_PATH | - |\n | - | - | trustStorePass | Trust JKS file password. Only work when user name and password opened | SW_STORAGE_ES_SSL_JKS_PASS | - |\n-| - | - | indexShardsNumber | Shard number of new indexes | SW_STORAGE_ES_INDEX_SHARDS_NUMBER | 1 |\n | - | - | secretsManagementFile| Secrets management file in the properties format includes the username, password, which are managed by 3rd party tool. Provide the capability to update them in the runtime.|SW_ES_SECRETS_MANAGEMENT_FILE | - |\n | - | - | dayStep| Represent the number of days in the one minute/hour/day index.| SW_STORAGE_DAY_STEP | 1|\n | - | - | indexShardsNumber | Shard number of new indexes | SW_STORAGE_ES_INDEX_SHARDS_NUMBER | 1 |\n-| - | - | superDatasetIndexShardsFactor | Super data set has been defined in the codes, such as trace segments. This factor provides more shards for the super data set, shards number = indexShardsNumber * superDatasetIndexShardsFactor. Also, this factor effects Zipkin and Jaeger traces.|SW_STORAGE_ES_SUPER_DATASET_INDEX_SHARDS_FACTOR|5 |\n | - | - | indexReplicasNumber | Replicas number of new indexes | SW_STORAGE_ES_INDEX_REPLICAS_NUMBER | 0 |\n+| - | - | superDatasetDayStep | Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value is less than 0.|SW_SUPERDATASET_STORAGE_DAY_STEP|-1 |\n+| - | - | superDatasetIndexShardsFactor | Super data set has been defined in the codes, such as trace segments. This factor provides more shards for the super data set, shards number = indexShardsNumber * superDatasetIndexShardsFactor. Also, this factor effects Zipkin and Jaeger traces.|SW_STORAGE_ES_SUPER_DATASET_INDEX_SHARDS_FACTOR|5 |\n+| - | - | superDatasetIndexReplicasNumber | Represent the replicas number in the super size dataset record index.|SW_STORAGE_ES_SUPER_DATASET_INDEX_REPLICAS_NUMBER|0 |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c01a1fde99433a8ad01968080d1755cfa4b634bf"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5ODQxNTk4", "url": "https://github.com/apache/skywalking/pull/5424#pullrequestreview-479841598", "createdAt": "2020-09-01T15:06:05Z", "commit": {"oid": "c01a1fde99433a8ad01968080d1755cfa4b634bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1982, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}