{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5OTE4MTY2", "number": 5524, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNTo0NzoxNlrOElbyWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNTo0NzoxNlrOElbyWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3Njg4MDI1OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "isResolved": true, "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNTo0NzoxNlrOHU7Ozw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwNjozODo0NlrOHVCPvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ==", "bodyText": "You activated this, but can't see the param in the tags.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491704015", "createdAt": "2020-09-20T15:47:16Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNTEzMg==", "bodyText": "param is db.statement,In terms of content judgment, I have encountered a problem, can you help me see it, for example,\n\nI can't see the difference between the estimated value and the actual value, but it is an error.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491705132", "createdAt": "2020-09-20T15:59:15Z", "author": {"login": "harvies"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNTk2Ng==", "bodyText": "What do you mean error? Why CI reports success?", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491705966", "createdAt": "2020-09-20T16:07:10Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjA1Nw==", "bodyText": "param is db.statement,In terms of content judgment\n\nAlso, this place seems like a bug. The parameter should be another tag, like other plugins. Could you fix them too? And if no parameter exists, the tag should not be there too.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491706057", "createdAt": "2020-09-20T16:08:22Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjE2Nw==", "bodyText": "What do you mean error? Why CI reports success?\n\nThis pr uses not null judgment, I think it is better to use string equality judgment.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491706167", "createdAt": "2020-09-20T16:09:19Z", "author": {"login": "harvies"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjQwNA==", "bodyText": "Let's adjust the tag and don't worry about this check for now, OK?", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491706404", "createdAt": "2020-09-20T16:11:24Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjY1OA==", "bodyText": "Wait, is the statement including the entity name of the operation or not?", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491706658", "createdAt": "2020-09-20T16:14:20Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjg2NQ==", "bodyText": "From my reading from your screenshot, only operation is a part of the statement, I think the plugin code has some issue about assembling the statement and parameter. Statement should be an expression and parameters are variable. I am not sure whether mongodb is friendly to this?", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491706865", "createdAt": "2020-09-20T16:16:29Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc1NjM2NQ==", "bodyText": "I just read the codes again, the statement tag should be removed, as this actually isn't a statement anymore. We should use DB_BIND_VARIABLES tag to replace DB_STATEMENT, because the statement is being used to check slow SQL. Also, please help to remove the executeMethod as the prefix, it has been the operation name of the span.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491756365", "createdAt": "2020-09-21T00:51:02Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTgxNzU0OQ==", "bodyText": "From my reading from your screenshot, only operation is a part of the statement, I think the plugin code has some issue about assembling the statement and parameter. Statement should be an expression and parameters are variable. I am not sure whether mongodb is friendly to this?\n\nMongo does not seem to have a placeholder similar to sql.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491817549", "createdAt": "2020-09-21T06:34:39Z", "author": {"login": "harvies"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTgxODk0MA==", "bodyText": "I just read the codes again, the statement tag should be removed, as this actually isn't a statement anymore. We should use DB_BIND_VARIABLES tag to replace DB_STATEMENT, because the statement is being used to check slow SQL. Also, please help to remove the executeMethod as the prefix, it has been the operation name of the span.\n\nOkay, let me adjust.", "url": "https://github.com/apache/skywalking/pull/5524#discussion_r491818940", "createdAt": "2020-09-21T06:38:46Z", "author": {"login": "harvies"}, "path": "test/plugin/scenarios/mongodb-3.x-scenario/bin/startup.sh", "diffHunk": "@@ -18,4 +18,4 @@\n \n home=\"$(cd \"$(dirname $0)\"; pwd)\"\n \n-java -jar ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &\n\\ No newline at end of file\n+java -jar -Dskywalking.plugin.mongodb.trace_param=true ${agent_opts} ${home}/../libs/mongodb-3.x-scenario.jar &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNDAxNQ=="}, "originalCommit": {"oid": "4968aacf5fd6edb40e6db4d4ebfa47f8af7887fb"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4826, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}