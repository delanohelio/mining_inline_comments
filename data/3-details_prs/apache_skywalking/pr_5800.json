{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MTcxNzQ5", "number": 5800, "title": "ALS analyzer based on Envoy metadata exchange", "bodyText": "ALS analyzer based on Envoy metadata exchange\nThis PR also refactor the existing Kubernetes IP-Service Mappings impl and fix a minor bug.\n\n Update the documentation to include this new feature.\n Tests(including UT, IT, E2E) are added to verify the new feature.\n If it's UI related, attach the screenshots below. NO\n If this pull request closes/resolves/fixes an existing issue, replace the issue number. Closes #. NO\n Update the CHANGES log.", "createdAt": "2020-11-05T16:07:12Z", "url": "https://github.com/apache/skywalking/pull/5800", "merged": true, "mergeCommit": {"oid": "8da9bf94abb23e34a3c76168abacc8b59a7e5d70"}, "closed": true, "closedAt": "2020-11-08T16:01:13Z", "author": {"login": "kezhenxu94"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZlcQ1AFqTUyNDQ3MzY0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdah4dSAFqTUyNTgxODUwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDczNjQz", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524473643", "createdAt": "2020-11-05T17:02:41Z", "commit": {"oid": "b1a49bf8b77497ca01ef79bd8491f62a3e79fb56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNzowMjo0MVrOHuNDWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNzowMjo0MVrOHuNDWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODIxMDM5Mw==", "bodyText": "NULL_DEREFERENCE:  object kv last assigned on line 53 could be null and is dereferenced at line 54.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518210393", "createdAt": "2020-11-05T17:02:41Z", "author": {"login": "sonatype-lift"}, "path": "oap-server/server-receiver-plugin/envoy-metrics-receiver-plugin/src/main/java/org/apache/skywalking/oap/server/receiver/envoy/als/mx/ServiceMetaInfoAdapter.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.oap.server.receiver.envoy.als.mx;\n+\n+import com.google.protobuf.Any;\n+import com.google.protobuf.ByteString;\n+import com.google.protobuf.BytesValue;\n+import com.google.protobuf.Struct;\n+import java.nio.ByteBuffer;\n+import java.util.Optional;\n+import lombok.RequiredArgsConstructor;\n+import lombok.extern.slf4j.Slf4j;\n+import org.apache.skywalking.oap.server.receiver.envoy.als.ServiceMetaInfo;\n+import Wasm.Common.FlatNode;\n+import Wasm.Common.KeyVal;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+/**\n+ * Adapter to {@link ServiceMetaInfo} from various of other datastructures.\n+ */\n+@Slf4j\n+@RequiredArgsConstructor\n+public class ServiceMetaInfoAdapter extends ServiceMetaInfo {\n+\n+    /**\n+     * Try to adapt a {@link ByteString} to {@link ServiceMetaInfo} instance.\n+     *\n+     * @param bv the {@link ByteString byte string} to adapt from.\n+     * @throws Exception if the {@link ByteString byte string} can not be adapted to a {@link ServiceMetaInfo}.\n+     */\n+    public ServiceMetaInfoAdapter(final ByteString bv) throws Exception {\n+        final ByteBuffer buffer = ByteBuffer.wrap(BytesValue.parseFrom(bv).getValue().toByteArray());\n+        final FlatNode flatNode = FlatNode.getRootAsFlatNode(buffer);\n+        if (log.isDebugEnabled()) {\n+            for (int i = 0; i < flatNode.labelsLength(); i++) {\n+                KeyVal kv = flatNode.labels(i);\n+                log.debug(\"wasm label: {} : {}\", kv.key(), kv.value());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a49bf8b77497ca01ef79bd8491f62a3e79fb56"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzY0OTkx", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524764991", "createdAt": "2020-11-06T00:01:03Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowMTowNFrOHubSVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowMTowNFrOHubSVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ0MzYwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            3. Active ALS analyzer, there are two available analyzers, `k8s-mesh` and `mx-mesh`, `k8s-mesh` will use the metadata from Kubernetes cluster, `mx-mesh` will use the Envoy metadata exchange mechanism to get the service name, etc., set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=k8s-mesh`\n          \n          \n            \n            3. Active ALS analyzer, there are two available analyzers, `k8s-mesh` and `mx-mesh`, `k8s-mesh` uses the metadata from Kubernetes cluster, `mx-mesh` uses the Envoy metadata exchange mechanism to get the service name, etc.. Setting system env variable **SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS** to activate the analyzer, such as `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=k8s-mesh`.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518443607", "createdAt": "2020-11-06T00:01:04Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/envoy/als_setting.md", "diffHunk": "@@ -19,7 +19,7 @@ You need three steps to open ALS.\n     Note: SkyWalking OAP service is at skywalking namespace, and the port of gRPC service is 11800\n     \n 2. (Default is ACTIVATED) Activate SkyWalking [envoy receiver](../backend/backend-receivers.md). \n-3. Active ALS k8s-mesh analysis, set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS`=`k8s-mesh`\n+3. Active ALS analyzer, there are two available analyzers, `k8s-mesh` and `mx-mesh`, `k8s-mesh` will use the metadata from Kubernetes cluster, `mx-mesh` will use the Envoy metadata exchange mechanism to get the service name, etc., set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=k8s-mesh`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzY1OTEx", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524765911", "createdAt": "2020-11-06T00:03:30Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowMzozMFrOHubVcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowMzozMFrOHubVcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ0NDQwMA==", "bodyText": "You copied this file from Istio, right? You should update the LICENSE of source codes, like the proto files we copied.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518444400", "createdAt": "2020-11-06T00:03:30Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-receiver-plugin/receiver-proto/src/main/fbs/istio/node-info.fbs", "diffHunk": "@@ -0,0 +1,48 @@\n+/* Copyright 2020 Istio Authors. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzY2NDQ4", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524766448", "createdAt": "2020-11-06T00:05:00Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowNTowMFrOHubXYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDowNTowMFrOHubXYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ0NDg5Ng==", "bodyText": "Why we are adding package-info for now?", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518444896", "createdAt": "2020-11-06T00:05:00Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-receiver-plugin/envoy-metrics-receiver-plugin/src/main/java/org/apache/skywalking/oap/server/receiver/envoy/als/mx/package-info.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+/**\n+ * {@link org.apache.skywalking.oap.server.receiver.envoy.als.ALSHTTPAnalysis} implementation\n+ * based on the Envoy metadata exchange.\n+ */\n+\n+package org.apache.skywalking.oap.server.receiver.envoy.als.mx;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzY4NTIx", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524768521", "createdAt": "2020-11-06T00:10:19Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDoxMDoxOVrOHubeHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDoxMDoxOVrOHubeHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ0NjYyMg==", "bodyText": "I only note this difference between the two analyzers. But is the meta exchange active in default in Istio? I remember it isn't. At the same time, I can't see when do you activate it.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518446622", "createdAt": "2020-11-06T00:10:19Z", "author": {"login": "wu-sheng"}, "path": ".github/workflows/e2e.istio.yaml", "diffHunk": "@@ -73,7 +77,7 @@ jobs:\n                --set elasticsearch.replicas=1 \\\n                --set elasticsearch.minimumMasterNodes=1 \\\n                --set elasticsearch.imageTag=7.5.1 \\\n-               --set oap.env.SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=k8s-mesh \\\n+               --set oap.env.SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=${{ matrix.analyzer }} \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0ODIyNzAx", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524822701", "createdAt": "2020-11-06T02:51:50Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1MTo1MFrOHueWfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1MTo1MFrOHueWfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ5MzgyMg==", "bodyText": "Here we should note the commit SHA of this file located at istio repo. and a tool or shell to update it based on this SHA.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518493822", "createdAt": "2020-11-06T02:51:50Z", "author": {"login": "hanahmily"}, "path": "oap-server/server-receiver-plugin/receiver-proto/src/main/fbs/istio/node-info.fbs", "diffHunk": "@@ -0,0 +1,48 @@\n+/* Copyright 2020 Istio Authors. All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0ODIzNDgy", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524823482", "createdAt": "2020-11-06T02:54:16Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1NDoxNlrOHueZHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1NDoxNlrOHueZHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ5NDQ5Mw==", "bodyText": "Could you enhancement this expression to support naming rules just like k8s analysis?", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518494493", "createdAt": "2020-11-06T02:54:16Z", "author": {"login": "hanahmily"}, "path": "oap-server/server-bootstrap/src/main/resources/metadata-service-mapping.yaml", "diffHunk": "@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+serviceName: LABELS.app", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0ODI0MTQw", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-524824140", "createdAt": "2020-11-06T02:56:21Z", "commit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1NjoyMVrOHuebZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMjo1NjoyMVrOHuebZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ5NTA3OA==", "bodyText": "Could you mention mx-mesh dependencies istio  metadata exchange filter?", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518495078", "createdAt": "2020-11-06T02:56:21Z", "author": {"login": "hanahmily"}, "path": "docs/en/setup/envoy/als_setting.md", "diffHunk": "@@ -19,7 +19,7 @@ You need three steps to open ALS.\n     Note: SkyWalking OAP service is at skywalking namespace, and the port of gRPC service is 11800\n     \n 2. (Default is ACTIVATED) Activate SkyWalking [envoy receiver](../backend/backend-receivers.md). \n-3. Active ALS k8s-mesh analysis, set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS`=`k8s-mesh`\n+3. Active ALS analyzer, there are two available analyzers, `k8s-mesh` and `mx-mesh`, `k8s-mesh` will use the metadata from Kubernetes cluster, `mx-mesh` will use the Envoy metadata exchange mechanism to get the service name, etc., set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS=k8s-mesh`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f67f8432209a6be4fcd1310d81299c53567caa60"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "77e0d38e81717df16dacb17557ee355886cb2728", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/77e0d38e81717df16dacb17557ee355886cb2728", "committedDate": "2020-11-06T14:38:18Z", "message": "ALS analyzer based on Envoy metadata exchange"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "77e0d38e81717df16dacb17557ee355886cb2728", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/77e0d38e81717df16dacb17557ee355886cb2728", "committedDate": "2020-11-06T14:38:18Z", "message": "ALS analyzer based on Envoy metadata exchange"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjE4NTk5", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-525218599", "createdAt": "2020-11-06T14:46:14Z", "commit": {"oid": "77e0d38e81717df16dacb17557ee355886cb2728"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNDo0NjoxNFrOHuw24A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNDo0NjoxNFrOHuw24A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5NzAyNA==", "bodyText": "1.7+ enabled in default? If so, good to me.", "url": "https://github.com/apache/skywalking/pull/5800#discussion_r518797024", "createdAt": "2020-11-06T14:46:14Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/envoy/als_setting.md", "diffHunk": "@@ -19,7 +19,14 @@ You need three steps to open ALS.\n     Note: SkyWalking OAP service is at skywalking namespace, and the port of gRPC service is 11800\n     \n 2. (Default is ACTIVATED) Activate SkyWalking [envoy receiver](../backend/backend-receivers.md). \n-3. Active ALS k8s-mesh analysis, set system env variable `SW_ENVOY_METRIC_ALS_HTTP_ANALYSIS`=`k8s-mesh`\n+3. Active ALS analyzer, there are two available analyzers, `k8s-mesh` and `mx-mesh`,\n+`k8s-mesh` uses the metadata from Kubernetes cluster, hence in this analyzer OAP needs access roles to `Pod`, `Service`, and `Endpoints`;\n+`mx-mesh` uses the Envoy metadata exchange mechanism to get the service name, etc.,\n+this analyzer requires Istio to enable the metadata exchange filter(you can enable it by\n+`--set telemetry.v2.enabled=true`, or if you're using Istio 1.7+ and installing it with profile `demo`/`preview`,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e0d38e81717df16dacb17557ee355886cb2728"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTc2MDAz", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-525576003", "createdAt": "2020-11-07T01:11:31Z", "commit": {"oid": "77e0d38e81717df16dacb17557ee355886cb2728"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7445e05f8f5cd7eeabde7fde612b2086e1031f6", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/c7445e05f8f5cd7eeabde7fde612b2086e1031f6", "committedDate": "2020-11-07T09:25:45Z", "message": "Merge branch 'master' into feature/als-mx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24cadacafe02c9fb06b73e5f24c6e1e2a15f0d18", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/24cadacafe02c9fb06b73e5f24c6e1e2a15f0d18", "committedDate": "2020-11-07T12:35:20Z", "message": "Merge branch 'master' into feature/als-mx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17a0f3c4001f415806d92878ded4bb4819962781", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/17a0f3c4001f415806d92878ded4bb4819962781", "committedDate": "2020-11-07T13:41:00Z", "message": "Merge branch 'master' into feature/als-mx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6644cd4d65898880b9ff13b22876b95a94383ef9", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/6644cd4d65898880b9ff13b22876b95a94383ef9", "committedDate": "2020-11-08T01:42:10Z", "message": "Merge branch 'master' into feature/als-mx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4444a6f3364cd9352922e7902bfb38fe20255230", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/4444a6f3364cd9352922e7902bfb38fe20255230", "committedDate": "2020-11-08T09:51:18Z", "message": "Add module manager to analyzer initialization for use"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1ODE2NjEx", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-525816611", "createdAt": "2020-11-08T15:06:37Z", "commit": {"oid": "4444a6f3364cd9352922e7902bfb38fe20255230"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80eba738642ca748a2008416be51eb548def4879", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/80eba738642ca748a2008416be51eb548def4879", "committedDate": "2020-11-08T15:11:19Z", "message": "Address the review comment to add original file location"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1ODE4NTAw", "url": "https://github.com/apache/skywalking/pull/5800#pullrequestreview-525818500", "createdAt": "2020-11-08T15:27:48Z", "commit": {"oid": "80eba738642ca748a2008416be51eb548def4879"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1619, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}