{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMTQxNjk2", "number": 5846, "title": "fix flaky test in comsumerTest", "bodyText": "Fixed flaky test that caused by ConsumerTest.java under skywaling-apm-datacarrier\nExisting tests are flaky because the testConsumerMoreThanChannel doesn't clear channel at the beginning of this test case.\nBoth testConsumerLessThanChannel and testConsumerMoreThanChannel use the same carrier. In testConsumerLessThanChannel, it produces some data and store in the channel. When we run testConsumerMoreThanChannel, the data introduced by testConsumerLessThanChannel will affect this test case.\nThe flaky tests are found by running https://github.com/idflakies/iDFlakies", "createdAt": "2020-11-15T04:21:43Z", "url": "https://github.com/apache/skywalking/pull/5846", "merged": true, "mergeCommit": {"oid": "48479b74df22a71e7a894e600a94df593a583187"}, "closed": true, "closedAt": "2020-11-16T08:19:48Z", "author": {"login": "zcai2"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcofmbAH2gAyNTIxMTQxNjk2OmIyZDcyN2QwNTU5MWUyZjJlOTY1YTU2Zjk2YzBkZmRhZmUzMWVlMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdc9Bs9gFqTUzMDkwOTIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b2d727d05591e2f2e965a56f96c0dfdafe31ee07", "author": {"user": {"login": "zcai2", "name": null}}, "url": "https://github.com/apache/skywalking/commit/b2d727d05591e2f2e965a56f96c0dfdafe31ee07", "committedDate": "2020-11-15T04:17:50Z", "message": "fix flaky test in comsumerTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNzY2NTQy", "url": "https://github.com/apache/skywalking/pull/5846#pullrequestreview-530766542", "createdAt": "2020-11-15T04:40:21Z", "commit": {"oid": "b2d727d05591e2f2e965a56f96c0dfdafe31ee07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDo0MDoyMVrOHzchmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDo0MDoyMVrOHzchmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjc3Nw==", "bodyText": "Seems BUFFER is actually not used in testConsumerLessThanChannel? Can BUFFER be simply moved into testConsumerMoreThanChannel as a local variable?", "url": "https://github.com/apache/skywalking/pull/5846#discussion_r523706777", "createdAt": "2020-11-15T04:40:21Z", "author": {"login": "kezhenxu94"}, "path": "apm-commons/apm-datacarrier/src/test/java/org/apache/skywalking/apm/commons/datacarrier/consumer/ConsumerTest.java", "diffHunk": "@@ -35,6 +35,7 @@\n \n     @Test\n     public void testConsumerLessThanChannel() throws IllegalAccessException {\n+        BUFFER.drainTo(new ArrayList<SampleData>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2d727d05591e2f2e965a56f96c0dfdafe31ee07"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3adfb2512facdef3d44bd565500aa316b7c1e4e", "author": {"user": {"login": "zcai2", "name": null}}, "url": "https://github.com/apache/skywalking/commit/e3adfb2512facdef3d44bd565500aa316b7c1e4e", "committedDate": "2020-11-16T03:18:12Z", "message": "remove unnecessary code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "018eeafdba7531acf4ea78ab891ad22d28c7ee46", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/018eeafdba7531acf4ea78ab891ad22d28c7ee46", "committedDate": "2020-11-16T04:13:03Z", "message": "Merge branch 'master' into flakytest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwOTA5MjAz", "url": "https://github.com/apache/skywalking/pull/5846#pullrequestreview-530909203", "createdAt": "2020-11-16T04:13:11Z", "commit": {"oid": "e3adfb2512facdef3d44bd565500aa316b7c1e4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1648, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}