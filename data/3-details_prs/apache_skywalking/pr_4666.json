{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NTA0NDA0", "number": 4666, "title": "Support v3 extension header", "bodyText": "Please answer these questions before submitting pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n#4634\n\n\n\nNew feature or improvement\n\nProvide the new v3 extension protocol java implementation.", "createdAt": "2020-04-18T14:06:28Z", "url": "https://github.com/apache/skywalking/pull/4666", "merged": true, "mergeCommit": {"oid": "7d1fdd3ea839096eb173495b71a74764670bab8a"}, "closed": true, "closedAt": "2020-04-21T09:09:03Z", "author": {"login": "mrproliu"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcY2VzOgH2gAyNDA1NTA0NDA0OjE4NzA4NDJiZWIxMzkwNTljYWZjNjA0ZTM1NjllYThmMzk4NjBkOGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZvYJTAFqTM5NzEwMTM3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1870842beb139059cafc604e3569ea8f39860d8a", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/1870842beb139059cafc604e3569ea8f39860d8a", "committedDate": "2020-04-18T13:58:57Z", "message": "support v3 extend header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17c9488b1f660579a632370caa01031224b9ebdf", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/17c9488b1f660579a632370caa01031224b9ebdf", "committedDate": "2020-04-18T14:24:41Z", "message": "fix UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bd3b079964ef75715e455037890b584e37879db", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/6bd3b079964ef75715e455037890b584e37879db", "committedDate": "2020-04-18T15:54:38Z", "message": "fix plugin test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b128233afa3cf22ffa9fd26210ad4a70c5e193", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/87b128233afa3cf22ffa9fd26210ad4a70c5e193", "committedDate": "2020-04-18T16:49:57Z", "message": "fix missing extension header handle when cross thread continue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08063147fb88bf11a6afbac719e6bf0cb5b2f7d8", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/08063147fb88bf11a6afbac719e6bf0cb5b2f7d8", "committedDate": "2020-04-18T17:03:53Z", "message": "add ExtentionContext UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9538cf1ab60a2a56239a5486853cb7efbff8a4c1", "author": {"user": {"login": "mrproliu", "name": null}}, "url": "https://github.com/apache/skywalking/commit/9538cf1ab60a2a56239a5486853cb7efbff8a4c1", "committedDate": "2020-04-19T10:34:52Z", "message": "Merge branch 'master' into v3-extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776998b8ef40b5168c84b7dcf1562a781a363ec1", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/776998b8ef40b5168c84b7dcf1562a781a363ec1", "committedDate": "2020-04-19T12:17:42Z", "message": "Merge branch 'master' into v3-extension"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2OTI0NTAw", "url": "https://github.com/apache/skywalking/pull/4666#pullrequestreview-396924500", "createdAt": "2020-04-21T01:20:49Z", "commit": {"oid": "776998b8ef40b5168c84b7dcf1562a781a363ec1"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMToyMDo0OVrOGIuP-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMToyMjo0MFrOGIuSTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc5OTU0Nw==", "bodyText": "#capture should propogate the ExtensionContext, rather than creating a new one.", "url": "https://github.com/apache/skywalking/pull/4666#discussion_r411799547", "createdAt": "2020-04-21T01:20:49Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/IgnoredTracerContext.java", "diffHunk": "@@ -53,7 +53,7 @@ public void extract(ContextCarrier carrier) {\n \n     @Override\n     public ContextSnapshot capture() {\n-        return new ContextSnapshot(null, -1, null, null, correlationContext);\n+        return new ContextSnapshot(null, -1, null, null, correlationContext, new ExtensionContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776998b8ef40b5168c84b7dcf1562a781a363ec1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc5OTY3Nw==", "bodyText": "I can see it is inside the tracing context.", "url": "https://github.com/apache/skywalking/pull/4666#discussion_r411799677", "createdAt": "2020-04-21T01:21:08Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/IgnoredTracerContext.java", "diffHunk": "@@ -53,7 +53,7 @@ public void extract(ContextCarrier carrier) {\n \n     @Override\n     public ContextSnapshot capture() {\n-        return new ContextSnapshot(null, -1, null, null, correlationContext);\n+        return new ContextSnapshot(null, -1, null, null, correlationContext, new ExtensionContext());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc5OTU0Nw=="}, "originalCommit": {"oid": "776998b8ef40b5168c84b7dcf1562a781a363ec1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgwMDE0MQ==", "bodyText": "Is this config for injecting headers?", "url": "https://github.com/apache/skywalking/pull/4666#discussion_r411800141", "createdAt": "2020-04-21T01:22:40Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/apm-toolkit-trace-scenario/configuration.yml", "diffHunk": "@@ -18,3 +18,8 @@ type: jvm\n entryService: http://localhost:8080/apm-toolkit-trace-scenario/case/tool-kit\n healthCheck: http://localhost:8080/apm-toolkit-trace-scenario/case/healthCheck\n startScript: ./bin/startup.sh\n+extendEntryHeader:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776998b8ef40b5168c84b7dcf1562a781a363ec1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bf3f197215100964e9b75d2af2e0fc163dea773", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/3bf3f197215100964e9b75d2af2e0fc163dea773", "committedDate": "2020-04-21T01:55:09Z", "message": "create new field to save the extension context, can propagate it when capture the ignored context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1115d95f1afe407f58e92bf198de98820f2b4d47", "author": {"user": {"login": "mrproliu", "name": null}}, "url": "https://github.com/apache/skywalking/commit/1115d95f1afe407f58e92bf198de98820f2b4d47", "committedDate": "2020-04-21T07:28:57Z", "message": "Merge branch 'master' into v3-extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad5312158d502a80255384ee4e01009c0c3817fd", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/ad5312158d502a80255384ee4e01009c0c3817fd", "committedDate": "2020-04-21T07:46:18Z", "message": "Merge branch 'master' into v3-extension"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTAxMzc0", "url": "https://github.com/apache/skywalking/pull/4666#pullrequestreview-397101374", "createdAt": "2020-04-21T08:26:06Z", "commit": {"oid": "ad5312158d502a80255384ee4e01009c0c3817fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2308, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}