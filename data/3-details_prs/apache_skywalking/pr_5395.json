{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MDMyMTM4", "number": 5395, "title": "Add logic-endpoint and testcase for elasticjob-2.x plugin", "bodyText": "Please answer these questions before submitting a pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n\n\n\nBug fix\n\n\nBug description.\n\n\nHow to fix?\n\n\n\nNew feature or improvement\n\nDescribe the details and related test reports.", "createdAt": "2020-08-26T16:50:49Z", "url": "https://github.com/apache/skywalking/pull/5395", "merged": true, "mergeCommit": {"oid": "afc0aef567ce8b0017ade6595251bc6d1e6348a5"}, "closed": true, "closedAt": "2020-08-28T06:27:08Z", "author": {"login": "hailin0"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_z6EpAH2gAyNDc0MDMyMTM4Ojc5M2NhY2ZhOGM3ZTk1ZGQ0ZWU1YjdhN2RjMTM4NTBhYmM2NDgzODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDO_V-AFqTQ3NzI3Mjc3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "793cacfa8c7e95dd4ee5b7a7dc13850abc648389", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/793cacfa8c7e95dd4ee5b7a7dc13850abc648389", "committedDate": "2020-08-17T15:11:54Z", "message": "Merge pull request #1 from apache/master\n\npull request"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d3f6d57a90ae16cf55965927652aa563e558572", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/9d3f6d57a90ae16cf55965927652aa563e558572", "committedDate": "2020-08-23T06:39:58Z", "message": "Merge pull request #3 from apache/master\n\nMerge master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2288385780d9df309f648b3ae1c814062ac58b2", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/b2288385780d9df309f648b3ae1c814062ac58b2", "committedDate": "2020-08-24T14:47:53Z", "message": "Merge pull request #4 from apache/master\n\nmerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a55f6ff06e4e639015d34c2a4950e46da5b786a", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/2a55f6ff06e4e639015d34c2a4950e46da5b786a", "committedDate": "2020-08-26T12:38:30Z", "message": "Merge pull request #5 from apache/master\n\nmerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c9572f0496493c7f70db3e759621c4be628f5f0", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/1c9572f0496493c7f70db3e759621c4be628f5f0", "committedDate": "2020-08-26T16:41:15Z", "message": "Merge pull request #6 from apache/master\n\nSupport IN filter expressions in OAL (#5390)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f282b66253073e8f977d17463b1882fc3fcfad8", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/5f282b66253073e8f977d17463b1882fc3fcfad8", "committedDate": "2020-08-26T16:41:49Z", "message": "Add  logic-endpoint and testcase for elasticjob-2.x plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/e58949a992cc5201f285016cb045b046bcf9eff6", "committedDate": "2020-08-26T17:45:06Z", "message": "fixed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2Mjg2Mjc3", "url": "https://github.com/apache/skywalking/pull/5395#pullrequestreview-476286277", "createdAt": "2020-08-27T01:12:17Z", "commit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMToxMjoxN1rOHHt1kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMToxMjoxN1rOHHt1kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1MzA3NQ==", "bodyText": "Please don't use Chinese in the source codes. Keep all comments in English.", "url": "https://github.com/apache/skywalking/pull/5395#discussion_r477853075", "createdAt": "2020-08-27T01:12:17Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/elasticjob-2.x-scenario/src/main/java/org/apache/skywalking/apm/testcase/elasticjob/job/JobConfig.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.testcase.elasticjob.job;\n+\n+import com.dangdang.ddframe.job.api.simple.SimpleJob;\n+import com.dangdang.ddframe.job.config.JobCoreConfiguration;\n+import com.dangdang.ddframe.job.config.simple.SimpleJobConfiguration;\n+import com.dangdang.ddframe.job.lite.api.JobScheduler;\n+import com.dangdang.ddframe.job.lite.config.LiteJobConfiguration;\n+import com.dangdang.ddframe.job.lite.spring.api.SpringJobScheduler;\n+import com.dangdang.ddframe.job.reg.base.CoordinatorRegistryCenter;\n+import com.dangdang.ddframe.job.reg.zookeeper.ZookeeperConfiguration;\n+import com.dangdang.ddframe.job.reg.zookeeper.ZookeeperRegistryCenter;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+\n+@Configuration\n+public class JobConfig {\n+\n+    private final String cron = \"0/5 * * * * ?\";\n+    private final int shardingTotalCount = 1;\n+    private final String shardingItemParameters = \"0=test\";\n+    private final String jobParameters = \"parameter\";\n+\n+    @Bean\n+    public SimpleJob simpleJob() {\n+        return new DemoSimpleJob();\n+    }\n+\n+    @Bean(initMethod = \"init\")\n+    public ZookeeperRegistryCenter regCenter(@Value(\"${elasticjob.regCenter.serverList}\") final String serverList,\n+                                             @Value(\"${elasticjob.regCenter.namespace}\") final String namespace) {\n+        return new ZookeeperRegistryCenter(new ZookeeperConfiguration(serverList, namespace));\n+    }\n+\n+    @Bean(initMethod = \"init\")\n+    public JobScheduler simpleJobScheduler(final SimpleJob simpleJob, final CoordinatorRegistryCenter regCenter) {\n+        return new SpringJobScheduler(simpleJob, regCenter,\n+                getLiteJobConfiguration(simpleJob.getClass(),\n+                cron, shardingTotalCount, shardingItemParameters, jobParameters));\n+    }\n+\n+    private LiteJobConfiguration getLiteJobConfiguration(final Class<? extends SimpleJob> jobClass,\n+                                                         final String cron,\n+                                                         final int shardingTotalCount,\n+                                                         final String shardingItemParameters,\n+                                                         final String jobParameters) {\n+        // \u5b9a\u4e49\u4f5c\u4e1a\u6838\u5fc3\u914d\u7f6e", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MzQyOTQw", "url": "https://github.com/apache/skywalking/pull/5395#pullrequestreview-476342940", "createdAt": "2020-08-27T02:29:12Z", "commit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMjoyOToxM1rOHH0Ang==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMjoyOToxM1rOHH0Ang==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzk1NDIwNg==", "bodyText": "What is this?", "url": "https://github.com/apache/skywalking/pull/5395#discussion_r477954206", "createdAt": "2020-08-27T02:29:13Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/elasticjob-2.x-scenario/src/main/java/org/apache/skywalking/apm/testcase/elasticjob/controller/CaseController.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.testcase.elasticjob.controller;\n+\n+import lombok.extern.log4j.Log4j2;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.ResponseBody;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+@RestController\n+@RequestMapping(\"/case\")\n+@Log4j2\n+public class CaseController {\n+\n+    private static final String SUCCESS = \"Success\";\n+\n+    @RequestMapping(\"/call\")\n+    @ResponseBody\n+    public String call() {\n+        // your codes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MzQzMDAw", "url": "https://github.com/apache/skywalking/pull/5395#pullrequestreview-476343000", "createdAt": "2020-08-27T02:29:23Z", "commit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMjoyOToyM1rOHH0BgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwMjoyOToyM1rOHH0BgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzk1NDQzMw==", "bodyText": "Same here.", "url": "https://github.com/apache/skywalking/pull/5395#discussion_r477954433", "createdAt": "2020-08-27T02:29:23Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/elasticjob-2.x-scenario/src/main/java/org/apache/skywalking/apm/testcase/elasticjob/controller/CaseController.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.testcase.elasticjob.controller;\n+\n+import lombok.extern.log4j.Log4j2;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.ResponseBody;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+@RestController\n+@RequestMapping(\"/case\")\n+@Log4j2\n+public class CaseController {\n+\n+    private static final String SUCCESS = \"Success\";\n+\n+    @RequestMapping(\"/call\")\n+    @ResponseBody\n+    public String call() {\n+        // your codes\n+        return SUCCESS;\n+    }\n+\n+    @RequestMapping(\"/healthCheck\")\n+    @ResponseBody\n+    public String healthCheck() {\n+        // your codes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MzQzMzY1", "url": "https://github.com/apache/skywalking/pull/5395#pullrequestreview-476343365", "createdAt": "2020-08-27T02:30:37Z", "commit": {"oid": "e58949a992cc5201f285016cb045b046bcf9eff6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad7d8aeffe9ef969f9944c29f889b6a0f381f6e8", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/ad7d8aeffe9ef969f9944c29f889b6a0f381f6e8", "committedDate": "2020-08-27T13:29:50Z", "message": "Merge pull request #7 from apache/master\n\nmerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e97c95c76c8e71005d33f57fd483d81067a3ab23", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/e97c95c76c8e71005d33f57fd483d81067a3ab23", "committedDate": "2020-08-27T13:58:47Z", "message": "Add  logic-endpoint and testcase for elasticjob-2.x plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1388f51bc62330e89cd6ff3f0b206bea9fccec5", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/a1388f51bc62330e89cd6ff3f0b206bea9fccec5", "committedDate": "2020-08-27T13:58:47Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d52d155ca92023d71ca018eb8271e96d80f1fd5", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/6d52d155ca92023d71ca018eb8271e96d80f1fd5", "committedDate": "2020-08-27T13:58:47Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "978cbb3f2192fd2e16accb93bf30214bb6f6253d", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/978cbb3f2192fd2e16accb93bf30214bb6f6253d", "committedDate": "2020-08-27T14:01:51Z", "message": "Merge pull request #8 from apache/master\n\nmerge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b554dab05f99aaafd7c60fa5e54c47ea846e7498", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/b554dab05f99aaafd7c60fa5e54c47ea846e7498", "committedDate": "2020-08-27T14:11:29Z", "message": "Merge branch 'elasticjob-2.x' of github.com:hailin0/skywalking\n\n\u0001 Conflicts:\n\u0001\ttest/plugin/scenarios/elasticjob-2.x-scenario/src/main/java/org/apache/skywalking/apm/testcase/elasticjob/controller/CaseController.java\n\u0001\ttest/plugin/scenarios/elasticjob-2.x-scenario/src/main/java/org/apache/skywalking/apm/testcase/elasticjob/job/JobConfig.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bddab7ee81df028c514b43c5d6ad38bf9516ad2", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/4bddab7ee81df028c514b43c5d6ad38bf9516ad2", "committedDate": "2020-08-27T14:25:36Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4831e00310b4ba3f376a3f2cd429d69749d2dc7", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/e4831e00310b4ba3f376a3f2cd429d69749d2dc7", "committedDate": "2020-08-27T16:35:21Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2931b767e654b9c5dffa77ffed6a26b8f682f8a7", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/2931b767e654b9c5dffa77ffed6a26b8f682f8a7", "committedDate": "2020-08-28T01:42:15Z", "message": "Merge branch 'master' into elasticjob-2.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56ffbf87337902e46bad3bd5b624e4366831acce", "author": {"user": {"login": "hailin0", "name": "hailin0"}}, "url": "https://github.com/apache/skywalking/commit/56ffbf87337902e46bad3bd5b624e4366831acce", "committedDate": "2020-08-28T04:56:47Z", "message": "Merge branch 'master' into elasticjob-2.x"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MjcyNzcx", "url": "https://github.com/apache/skywalking/pull/5395#pullrequestreview-477272771", "createdAt": "2020-08-28T06:26:52Z", "commit": {"oid": "56ffbf87337902e46bad3bd5b624e4366831acce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1948, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}