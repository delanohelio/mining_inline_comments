{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNTc0Njk4", "number": 4817, "title": "Fix too many mang ipv4 records reported by the agent when deployed in container.", "bodyText": "Please answer these questions before submitting pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n#4707\n\n\n\nBug fix\n\nBug description.\ntoo much ipv4 record causes too long when inserting into DB.\nHow to fix?\nadd a limitation of the ipv4 list size.\n\n\nNew feature or improvement\n\nDescribe the details and related test reports.", "createdAt": "2020-05-25T06:39:00Z", "url": "https://github.com/apache/skywalking/pull/4817", "merged": true, "mergeCommit": {"oid": "42d79bf08d60a05c33a97820d2d500189b2209f8"}, "closed": true, "closedAt": "2020-05-25T08:15:11Z", "author": {"login": "JaredTan95"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckqL6lgH2gAyNDIyNTc0Njk4OjY3OGI1MjEwZTJmNTc5YTlhN2RlMDExNWIyY2EyOWFhOGY2ZWQ1MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckrmK9AFqTQxNzUzNzk2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "678b5210e2f579a9a7de0115b2ca29aa8f6ed531", "author": {"user": {"login": "JaredTan95", "name": "Jared Tan"}}, "url": "https://github.com/apache/skywalking/commit/678b5210e2f579a9a7de0115b2ca29aa8f6ed531", "committedDate": "2020-05-25T06:36:23Z", "message": "fix too ipv4 record in container."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64b6ce3e97adb5b1334ee1c12291e685866023b9", "author": {"user": {"login": "JaredTan95", "name": "Jared Tan"}}, "url": "https://github.com/apache/skywalking/commit/64b6ce3e97adb5b1334ee1c12291e685866023b9", "committedDate": "2020-05-25T06:50:54Z", "message": "update threadhold."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDk2ODcy", "url": "https://github.com/apache/skywalking/pull/4817#pullrequestreview-417496872", "createdAt": "2020-05-25T07:03:05Z", "commit": {"oid": "64b6ce3e97adb5b1334ee1c12291e685866023b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzowMzowNVrOGZ2tqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzowMzowNVrOGZ2tqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2NDAwOQ==", "bodyText": "Seems document doesn't match the codes, in the Config, it is 10 as default :)", "url": "https://github.com/apache/skywalking/pull/4817#discussion_r429764009", "createdAt": "2020-05-25T07:03:05Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/service-agent/java-agent/README.md", "diffHunk": "@@ -84,6 +84,7 @@ property key | Description | Default |\n `agent.force_reconnection_period `|Force reconnection period of grpc, based on grpc_channel_check_interval.|`1`|\n `agent.operation_name_threshold `|The operationName max length, setting this value > 190 is not recommended.|`150`|\n `agent.keep_tracing`|Keep tracing even the backend is not available if this value is `true`.|`false`|\n+`osinfo.ipv4_list_size`| Limit the length of the ipv4 list size. |`5`|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64b6ce3e97adb5b1334ee1c12291e685866023b9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f", "author": {"user": {"login": "JaredTan95", "name": "Jared Tan"}}, "url": "https://github.com/apache/skywalking/commit/2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f", "committedDate": "2020-05-25T07:06:10Z", "message": "update threadhold."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTAwMjY4", "url": "https://github.com/apache/skywalking/pull/4817#pullrequestreview-417500268", "createdAt": "2020-05-25T07:10:06Z", "commit": {"oid": "2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxMDowN1rOGZ236A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxMDowN1rOGZ236A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2NjYzMg==", "bodyText": "if allIPV4.size() == ipv4Size, there is no need to subList, it must be itself\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (allIPV4.size() >= ipv4Size) {\n          \n          \n            \n                        if (allIPV4.size() > ipv4Size) {", "url": "https://github.com/apache/skywalking/pull/4817#discussion_r429766632", "createdAt": "2020-05-25T07:10:07Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/os/OSUtil.java", "diffHunk": "@@ -116,6 +116,9 @@ public static int getProcessNo() {\n         }\n         List<String> allIPV4 = getAllIPV4();\n         if (allIPV4.size() > 0) {\n+            if (allIPV4.size() >= ipv4Size) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTAwOTA0", "url": "https://github.com/apache/skywalking/pull/4817#pullrequestreview-417500904", "createdAt": "2020-05-25T07:11:24Z", "commit": {"oid": "2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxMToyNFrOGZ256Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxMToyNFrOGZ256Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2NzE0NQ==", "bodyText": "From my reading of the ArrayList#subList, the input parameter would not be changed, the new list is the return list. Could you check locally?", "url": "https://github.com/apache/skywalking/pull/4817#discussion_r429767145", "createdAt": "2020-05-25T07:11:24Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/os/OSUtil.java", "diffHunk": "@@ -116,6 +116,9 @@ public static int getProcessNo() {\n         }\n         List<String> allIPV4 = getAllIPV4();\n         if (allIPV4.size() > 0) {\n+            if (allIPV4.size() >= ipv4Size) {\n+                allIPV4.subList(0, ipv4Size);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cecbeb9b7cfb596bc88e9d77039f9f900b02d7f"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a70246f93f5a3025adacb89f1d98e12670de709c", "author": {"user": {"login": "JaredTan95", "name": "Jared Tan"}}, "url": "https://github.com/apache/skywalking/commit/a70246f93f5a3025adacb89f1d98e12670de709c", "committedDate": "2020-05-25T07:26:44Z", "message": "fix logical"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTM0ODQy", "url": "https://github.com/apache/skywalking/pull/4817#pullrequestreview-417534842", "createdAt": "2020-05-25T08:09:56Z", "commit": {"oid": "a70246f93f5a3025adacb89f1d98e12670de709c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTM3OTY4", "url": "https://github.com/apache/skywalking/pull/4817#pullrequestreview-417537968", "createdAt": "2020-05-25T08:14:58Z", "commit": {"oid": "a70246f93f5a3025adacb89f1d98e12670de709c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2188, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}