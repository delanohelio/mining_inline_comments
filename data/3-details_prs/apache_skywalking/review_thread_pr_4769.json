{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NjY2Nzc1", "number": 4769, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozMjo1M1rOD69eEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozNDo1NlrOD69e6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTUxMTIzOnYy", "diffSide": "RIGHT", "path": "docs/en/setup/backend/backend-alarm.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozMjo1M1rOGTCh2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozMjo1M1rOGTCh2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYxNzU2Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - **id1**. When using relation scope, it will be the dest entity ID. Otherwise it will be empty.\n          \n          \n            \n            - **id1**. When using relation scope, it will be the dest entity ID. Otherwise, it is empty.", "url": "https://github.com/apache/skywalking/pull/4769#discussion_r422617563", "createdAt": "2020-05-10T09:32:53Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/backend-alarm.md", "diffHunk": "@@ -77,16 +85,16 @@ We provided a default `alarm-setting.yml` in our distribution only for convenien\n \n ### List of all potential metrics name\n The metrics names are defined in official [OAL scripts](../../guides/backend-oal-scripts.md), right now \n-metrics from **Service**, **Service Instance**, **Endpoint** scopes could be used in Alarm, we will extend in further versions. \n+metrics from **Service**, **Service Instance**, **Endpoint**, **Service Relation**, **Service Instance Relation**, **Endpoint Relation** scopes could be used in Alarm, and the **Database access** same with **Service** scope.\n \n Submit issue or pull request if you want to support any other scope in alarm.\n \n ## Webhook\n-Webhook requires the peer is a web container. The alarm message will send through HTTP post by `application/json` content type. The JSON format is based on `List<org.apache.skywalking.oap.server.core.alarm.AlarmMessage` with following key information.\n+Webhook requires the peer is a web container. The alarm message will send through HTTP post by `application/json` content type. The JSON format is based on `List<org.apache.skywalking.oap.server.core.alarm.AlarmMessage>` with following key information.\n - **scopeId**, **scope**. All scopes are defined in org.apache.skywalking.oap.server.core.source.DefaultScopeDefine.\n-- **name**. Target scope entity name.\n-- **id0**. The ID of scope entity, matched the name.\n-- **id1**. Not used today.\n+- **name**. Target scope entity name. Please follow [Entity name define](#entity-name).\n+- **id0**. The ID of scope entity, matched the name. When using relation scope, it will be the source entity ID.\n+- **id1**. When using relation scope, it will be the dest entity ID. Otherwise it will be empty.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51991cf55a1fa46e2bf0f4b2de38377b88b300a1"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTUxMTc0OnYy", "diffSide": "RIGHT", "path": "docs/en/setup/backend/backend-alarm.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozMzoxOFrOGTCiGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozMzoxOFrOGTCiGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYxNzYyNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - **id0**. The ID of scope entity, matched the name. When using relation scope, it will be the source entity ID.\n          \n          \n            \n            - **id0**. The ID of the scope entity matched the name. When using relation scope, it is the source entity ID.", "url": "https://github.com/apache/skywalking/pull/4769#discussion_r422617625", "createdAt": "2020-05-10T09:33:18Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/backend-alarm.md", "diffHunk": "@@ -77,16 +85,16 @@ We provided a default `alarm-setting.yml` in our distribution only for convenien\n \n ### List of all potential metrics name\n The metrics names are defined in official [OAL scripts](../../guides/backend-oal-scripts.md), right now \n-metrics from **Service**, **Service Instance**, **Endpoint** scopes could be used in Alarm, we will extend in further versions. \n+metrics from **Service**, **Service Instance**, **Endpoint**, **Service Relation**, **Service Instance Relation**, **Endpoint Relation** scopes could be used in Alarm, and the **Database access** same with **Service** scope.\n \n Submit issue or pull request if you want to support any other scope in alarm.\n \n ## Webhook\n-Webhook requires the peer is a web container. The alarm message will send through HTTP post by `application/json` content type. The JSON format is based on `List<org.apache.skywalking.oap.server.core.alarm.AlarmMessage` with following key information.\n+Webhook requires the peer is a web container. The alarm message will send through HTTP post by `application/json` content type. The JSON format is based on `List<org.apache.skywalking.oap.server.core.alarm.AlarmMessage>` with following key information.\n - **scopeId**, **scope**. All scopes are defined in org.apache.skywalking.oap.server.core.source.DefaultScopeDefine.\n-- **name**. Target scope entity name.\n-- **id0**. The ID of scope entity, matched the name.\n-- **id1**. Not used today.\n+- **name**. Target scope entity name. Please follow [Entity name define](#entity-name).\n+- **id0**. The ID of scope entity, matched the name. When using relation scope, it will be the source entity ID.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51991cf55a1fa46e2bf0f4b2de38377b88b300a1"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTUxMzM5OnYy", "diffSide": "RIGHT", "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/alarm/ServiceRelationMetaInAlarm.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozNDo1NlrOGTCi5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwOTozNDo1NlrOGTCi5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYxNzgzMQ==", "bodyText": "All these AccessLevel are default, we could remove them.", "url": "https://github.com/apache/skywalking/pull/4769#discussion_r422617831", "createdAt": "2020-05-10T09:34:56Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/alarm/ServiceRelationMetaInAlarm.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.oap.server.core.alarm;\n+\n+import lombok.AccessLevel;\n+import lombok.Getter;\n+import lombok.Setter;\n+import org.apache.skywalking.oap.server.core.analysis.IDManager;\n+import org.apache.skywalking.oap.server.core.source.DefaultScopeDefine;\n+\n+@Getter(AccessLevel.PUBLIC)\n+@Setter(AccessLevel.PUBLIC)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51991cf55a1fa46e2bf0f4b2de38377b88b300a1"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 138, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}