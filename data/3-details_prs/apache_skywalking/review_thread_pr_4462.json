{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MjM0NTAz", "number": 4462, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzoxODoyNVrODmE2kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzozMToxMFrODmE40Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjUxOTg0OnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzoxODoyNVrOFzTlZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwODoyMzoyM1rOFzT2dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA==", "bodyText": "why add the leading _", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389342564", "createdAt": "2020-03-08T07:18:25Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzQ0Nw==", "bodyText": "I was wanting people think this could be used as an open API. That is the only repo. Do you want to keep the same method name? inject?", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389343447", "createdAt": "2020-03-08T07:32:57Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NDI4Mg==", "bodyText": "I was wanting people think this could be used as an open API.\n\nAll methods in an interface are OPEN API IMO, there's no conventions that methods start with _ is private or open in Java, on the contrary, many languages use the leading _ to indicate that the method is private", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389344282", "createdAt": "2020-03-08T07:43:35Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NDYxNg==", "bodyText": "From my idea, the interface is just open at the codes level, in here, to balance the noop tracing context and real tracing context. Anyway, I could change it to inject to more clear comment.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389344616", "createdAt": "2020-03-08T07:48:55Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NDk5Mw==", "bodyText": "Done.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389344993", "createdAt": "2020-03-08T07:55:29Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjAyOQ==", "bodyText": "I was wanting people think this could be used as an open API.\n\nWell, I think you just expressed the opposite meanings (\"want people NOT to used as an open API\"), which makes me more confused why add this method here, instead of in TracingContext, the ExitSpan holds an instance of TracingContext instead of AbstractTracerContext, it should illuminate both our concerns", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389346029", "createdAt": "2020-03-08T08:09:54Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0Njc4Mw==", "bodyText": "Good point. Let me do that.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389346783", "createdAt": "2020-03-08T08:20:53Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjkzMw==", "bodyText": "Fixed, should be better now.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389346933", "createdAt": "2020-03-08T08:23:23Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/AbstractTracerContext.java", "diffHunk": "@@ -31,6 +31,15 @@\n      */\n     void inject(ContextCarrier carrier);\n \n+    /**\n+     * Prepare for the cross-process propagation based on the given exit span. The given exit span should belong to the\n+     * current context. How to initialize the carrier, depends on the implementation.\n+     *\n+     * @param carrier  to carry the context for crossing process.\n+     * @param exitSpan to represent the scope of current injection.\n+     */\n+    void _inject(AbstractSpan exitSpan, ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjU2NA=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjUyNTYxOnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzozMToxMFrOFzToVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzo1NTozMVrOFzTu4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzMxOQ==", "bodyText": "Consider returning this for chaining", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389343319", "createdAt": "2020-03-08T07:31:10Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "diffHunk": "@@ -18,8 +18,15 @@\n \n package org.apache.skywalking.apm.agent.core.context.trace;\n \n-public interface WithPeerInfo {\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+\n+/**\n+ * The exit span has some additional behaviours\n+ */\n+public interface ExitTypeSpan {\n     int getPeerId();\n \n     String getPeer();\n+\n+    void inject(ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzQ2MQ==", "bodyText": "After the tests pass, will do.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389343461", "createdAt": "2020-03-08T07:33:11Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "diffHunk": "@@ -18,8 +18,15 @@\n \n package org.apache.skywalking.apm.agent.core.context.trace;\n \n-public interface WithPeerInfo {\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+\n+/**\n+ * The exit span has some additional behaviours\n+ */\n+public interface ExitTypeSpan {\n     int getPeerId();\n \n     String getPeer();\n+\n+    void inject(ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzMxOQ=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0Mzc0Mw==", "bodyText": "From the API level, I could only return ExitTypeSpan, is that useful?", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389343743", "createdAt": "2020-03-08T07:36:49Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "diffHunk": "@@ -18,8 +18,15 @@\n \n package org.apache.skywalking.apm.agent.core.context.trace;\n \n-public interface WithPeerInfo {\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+\n+/**\n+ * The exit span has some additional behaviours\n+ */\n+public interface ExitTypeSpan {\n     int getPeerId();\n \n     String getPeer();\n+\n+    void inject(ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzMxOQ=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NDE4NQ==", "bodyText": "From the API level, I could only return ExitTypeSpan, is that useful?\n\nYes, from the interface you have to return ExitTypeSpan, but you can return ExitSpan in its implementations, and chaining with the more specific types", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389344185", "createdAt": "2020-03-08T07:41:42Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "diffHunk": "@@ -18,8 +18,15 @@\n \n package org.apache.skywalking.apm.agent.core.context.trace;\n \n-public interface WithPeerInfo {\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+\n+/**\n+ * The exit span has some additional behaviours\n+ */\n+public interface ExitTypeSpan {\n     int getPeerId();\n \n     String getPeer();\n+\n+    void inject(ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzMxOQ=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NDk5NA==", "bodyText": "Done.", "url": "https://github.com/apache/skywalking/pull/4462#discussion_r389344994", "createdAt": "2020-03-08T07:55:31Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/ExitTypeSpan.java", "diffHunk": "@@ -18,8 +18,15 @@\n \n package org.apache.skywalking.apm.agent.core.context.trace;\n \n-public interface WithPeerInfo {\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+\n+/**\n+ * The exit span has some additional behaviours\n+ */\n+public interface ExitTypeSpan {\n     int getPeerId();\n \n     String getPeer();\n+\n+    void inject(ContextCarrier carrier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MzMxOQ=="}, "originalCommit": {"oid": "3be61959cb4906954820194c0683ddbe5c4f69a0"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4394, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}