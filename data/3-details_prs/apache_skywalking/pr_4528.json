{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NTg4NTI4", "number": 4528, "title": "Fix profile trace not match when change the entry operationId/Name", "bodyText": "Please answer these questions before submitting pull request\n\nWhy submit this pull request?\n Bug fix\n New feature provided\n Improve performance\n\n\nBug fix\n\nProfile trace does not match with dynamic change the name, such as SpringMVC. I put the recheck profile in the wrong place.", "createdAt": "2020-03-17T02:39:28Z", "url": "https://github.com/apache/skywalking/pull/4528", "merged": true, "mergeCommit": {"oid": "c8187ccd416c1e9da84f06e2cc7c939c54d84380"}, "closed": true, "closedAt": "2020-03-17T04:39:58Z", "author": {"login": "mrproliu"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOZWuMAH2gAyMzg5NTg4NTI4OjZmZDBlMTg1OTg2OGQ5ZTUzZjljN2U2ZjZmNzg4Y2Y4ODAwN2ZhMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOaHjMAFqTM3NTcxNzUwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6fd0e1859868d9e53f9c7e6f6f788cf88007fa07", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/6fd0e1859868d9e53f9c7e6f6f788cf88007fa07", "committedDate": "2020-03-17T02:33:28Z", "message": "Fix profile trace not match when change the entry operationId/Name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cca54b09ea77e9a535e1672fd33c688d65d3c0f8", "author": {"user": {"login": "mrproliu", "name": null}}, "url": "https://github.com/apache/skywalking/commit/cca54b09ea77e9a535e1672fd33c688d65d3c0f8", "committedDate": "2020-03-17T02:39:59Z", "message": "Merge branch 'master' into profile_name_bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NzE2ODUw", "url": "https://github.com/apache/skywalking/pull/4528#pullrequestreview-375716850", "createdAt": "2020-03-17T03:24:17Z", "commit": {"oid": "cca54b09ea77e9a535e1672fd33c688d65d3c0f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMzoyNDoxOFrOF3Mvqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMzoyNDoxOFrOF3Mvqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQyNDgxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        /**\n          \n          \n            \n                         * Only add the profiling recheck on change entry span operationId/Name.\n          \n          \n            \n                         * Because Change name only happen on entry span.\n          \n          \n            \n                         * Exit and local span will check need profiling on construct the context.\n          \n          \n            \n                         */\n          \n          \n            \n                        /*\n          \n          \n            \n                         * Only add the profiling recheck when changing an entry span's operationId/Name.\n          \n          \n            \n                         * Because changing name only happens on entry span.\n          \n          \n            \n                         * Exit and local span will check when constructing the context.\n          \n          \n            \n                         */", "url": "https://github.com/apache/skywalking/pull/4528#discussion_r393424811", "createdAt": "2020-03-17T03:24:18Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/TracingContext.java", "diffHunk": "@@ -353,6 +353,12 @@ public AbstractSpan createEntrySpan(final String operationName) {\n         final AbstractSpan parentSpan = peek();\n         final int parentSpanId = parentSpan == null ? -1 : parentSpan.getSpanId();\n         if (parentSpan != null && parentSpan.isEntry()) {\n+            /**\n+             * Only add the profiling recheck on change entry span operationId/Name.\n+             * Because Change name only happen on entry span.\n+             * Exit and local span will check need profiling on construct the context.\n+             */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cca54b09ea77e9a535e1672fd33c688d65d3c0f8"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23520c56d4bea33121f8d593f6d1ff30db0d5ce", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/d23520c56d4bea33121f8d593f6d1ff30db0d5ce", "committedDate": "2020-03-17T03:25:34Z", "message": "Update TracingContext.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NzE3NTAy", "url": "https://github.com/apache/skywalking/pull/4528#pullrequestreview-375717502", "createdAt": "2020-03-17T03:26:48Z", "commit": {"oid": "d23520c56d4bea33121f8d593f6d1ff30db0d5ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2469, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}