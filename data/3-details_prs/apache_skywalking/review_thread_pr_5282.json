{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MjMyMTA2", "number": 5282, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzowN1rOEWoaMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzo1OTo0OFrOEWpf3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTY2MTkyOnYy", "diffSide": "RIGHT", "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzowN1rOG9_VVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzowN1rOG9_VVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1Mzk3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                superDatasetDayStep: ${SW_SUPERDATASET_STORAGE_DAY_STEP:-1} # Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value lt 0\n          \n          \n            \n                superDatasetDayStep: ${SW_SUPERDATASET_STORAGE_DAY_STEP:-1} # Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value is less than 0\n          \n      \n    \n    \n  \n\nUse the full words in the comment :)", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467653973", "createdAt": "2020-08-10T01:17:07Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -101,6 +101,7 @@ storage:\n     password: ${SW_ES_PASSWORD:\"\"}\n     secretsManagementFile: ${SW_ES_SECRETS_MANAGEMENT_FILE:\"\"} # Secrets management file in the properties format includes the username, password, which are managed by 3rd party tool.\n     dayStep: ${SW_STORAGE_DAY_STEP:1} # Represent the number of days in the one minute/hour/day index.\n+    superDatasetDayStep: ${SW_SUPERDATASET_STORAGE_DAY_STEP:-1} # Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value lt 0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbb8b52a18226c11472c81ab332126ff700d581c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTY2MjA1OnYy", "diffSide": "RIGHT", "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzoxOFrOG9_VbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzoxOFrOG9_VbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1Mzk5Nw==", "bodyText": "Same here.", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467653997", "createdAt": "2020-08-10T01:17:18Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -119,6 +120,7 @@ storage:\n     trustStorePath: ${SW_STORAGE_ES_SSL_JKS_PATH:\"\"}\n     trustStorePass: ${SW_STORAGE_ES_SSL_JKS_PASS:\"\"}\n     dayStep: ${SW_STORAGE_DAY_STEP:1} # Represent the number of days in the one minute/hour/day index.\n+    superDatasetDayStep: ${SW_SUPERDATASET_STORAGE_DAY_STEP:-1} # Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value lt 0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbb8b52a18226c11472c81ab332126ff700d581c"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTY2MjMxOnYy", "diffSide": "RIGHT", "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToxNzo0NFrOG9_VjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMToyMzo1MVrOG9_YcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1NDAyOQ==", "bodyText": "Java has a @since annotation, please use it.", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467654029", "createdAt": "2020-08-10T01:17:44Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "diffHunk": "@@ -80,6 +80,11 @@\n      */\n     @Getter\n     private int dayStep = 1;\n+    /**\n+     * Since 8.2.0, the record day step is for record index rolling when the value of it is gt 0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbb8b52a18226c11472c81ab332126ff700d581c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1NDc2OQ==", "bodyText": "fix", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467654769", "createdAt": "2020-08-10T01:23:51Z", "author": {"login": "EvanLjp"}, "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "diffHunk": "@@ -80,6 +80,11 @@\n      */\n     @Getter\n     private int dayStep = 1;\n+    /**\n+     * Since 8.2.0, the record day step is for record index rolling when the value of it is gt 0", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1NDAyOQ=="}, "originalCommit": {"oid": "dbb8b52a18226c11472c81ab332126ff700d581c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTgzMjU3OnYy", "diffSide": "RIGHT", "path": "docs/en/setup/backend/backend-storage.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzo1MzoyN1rOG-Auwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzo1NjoyNFrOG-Awvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3Njg2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            superDatasetDayStep is a advanced parameter for es storage load balance.\n          \n          \n            \n            superDatasetDayStep is an advanced parameter for es storage load balance.", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467676866", "createdAt": "2020-08-10T03:53:27Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/backend-storage.md", "diffHunk": "@@ -105,6 +106,10 @@ Such as, if dayStep == 11,\n 1. data in [2000-01-01, 2000-01-11] will be merged into the index-20000101.\n 1. data in [2000-01-12, 2000-01-22] will be merged into the index-20000112.\n \n+superDatasetDayStep is a advanced parameter for es storage load balance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8e31ed77296b81d562232dab92a36d10e8408e8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NzM3NQ==", "bodyText": "fix", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467677375", "createdAt": "2020-08-10T03:56:24Z", "author": {"login": "EvanLjp"}, "path": "docs/en/setup/backend/backend-storage.md", "diffHunk": "@@ -105,6 +106,10 @@ Such as, if dayStep == 11,\n 1. data in [2000-01-01, 2000-01-11] will be merged into the index-20000101.\n 1. data in [2000-01-12, 2000-01-22] will be merged into the index-20000112.\n \n+superDatasetDayStep is a advanced parameter for es storage load balance.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3Njg2Ng=="}, "originalCommit": {"oid": "a8e31ed77296b81d562232dab92a36d10e8408e8"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTg0MDI5OnYy", "diffSide": "RIGHT", "path": "docs/en/setup/backend/backend-storage.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzo1OTo0OFrOG-Ay5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNToyNToyNlrOG-BuBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NzkyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For the trace data storage system, open it would be improve es performance.If the value of superDatasetDayStep is above 0,\n          \n          \n            \n            the rolling strategy of the superdateset index(trace segment,zipkin or jaeger ...) would be affected. Otherwise, all indices would be rolling with the strategy of dayStep.   \n          \n          \n            \n            `storage/elasticsearch/superDatasetDayStep` override the `storage/elasticsearch/dayStep` if the value is positive.\n          \n          \n            \n            This would affect the record related entities, such as the trace segment. In some cases, the size of metrics is much less than the record(trace), this would help the shards balance in the ElasticSearch cluster.", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467677924", "createdAt": "2020-08-10T03:59:48Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/backend-storage.md", "diffHunk": "@@ -105,6 +106,10 @@ Such as, if dayStep == 11,\n 1. data in [2000-01-01, 2000-01-11] will be merged into the index-20000101.\n 1. data in [2000-01-12, 2000-01-22] will be merged into the index-20000112.\n \n+superDatasetDayStep is a advanced parameter for es storage load balance.\n+For the trace data storage system, open it would be improve es performance.If the value of superDatasetDayStep is above 0,\n+the rolling strategy of the superdateset index(trace segment,zipkin or jaeger ...) would be affected. Otherwise, all indices would be rolling with the strategy of dayStep.   ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8e31ed77296b81d562232dab92a36d10e8408e8"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY5MzA2MA==", "bodyText": "fix", "url": "https://github.com/apache/skywalking/pull/5282#discussion_r467693060", "createdAt": "2020-08-10T05:25:26Z", "author": {"login": "EvanLjp"}, "path": "docs/en/setup/backend/backend-storage.md", "diffHunk": "@@ -105,6 +106,10 @@ Such as, if dayStep == 11,\n 1. data in [2000-01-01, 2000-01-11] will be merged into the index-20000101.\n 1. data in [2000-01-12, 2000-01-22] will be merged into the index-20000112.\n \n+superDatasetDayStep is a advanced parameter for es storage load balance.\n+For the trace data storage system, open it would be improve es performance.If the value of superDatasetDayStep is above 0,\n+the rolling strategy of the superdateset index(trace segment,zipkin or jaeger ...) would be affected. Otherwise, all indices would be rolling with the strategy of dayStep.   ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NzkyNA=="}, "originalCommit": {"oid": "a8e31ed77296b81d562232dab92a36d10e8408e8"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4933, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}