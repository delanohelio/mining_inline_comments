{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTM0MTAw", "number": 5579, "title": "Support JDK 11 compiling and upgrade dependencies", "bodyText": "Hi all @apache/skywalking-committers\nAccording to OpenJDK website(https://adoptopenjdk.net/support.html), there are 2 TLS versions for now\n\nJava 8 (LTS). At Least May 2026\nJava 11 (LTS). At Least Oct 2024\n\nWe should make the JDK11 compiling passed. That is the primary agenda when I started this work. Also, with doing this, I planned to upgrade the gRPC too.\nDuring the JDK11 compiling fix, the version of PowerMock was detected as the main block, so, I upgraded it to the 2.x directly.\nSo, you would note,\n\nSome libraries' versions(such as protobuf, protoc) changed because of gRPC or PowerMock requirements.\nSome tests are deleted because they are not valid in the latest PowerMock. Sorry, I don't have enough time to fix all, because some of them make no sense to me.\nLICENSE updated\n\nIf you have any concerns, please reply.", "createdAt": "2020-09-28T13:14:22Z", "url": "https://github.com/apache/skywalking/pull/5579", "merged": true, "mergeCommit": {"oid": "103cf00672c4ed61b17626314ab2b6b31f1dc9c4"}, "closed": true, "closedAt": "2020-09-29T02:34:21Z", "author": {"login": "wu-sheng"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNQvfKAH2gAyNDk0MTM0MTAwOjAzZWJiNWQyNTU2YmRlMWU2MWVlNDRiODA2NmRmYjAyOTIwNmU0MTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNempegFqTQ5ODAxNzkzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "03ebb5d2556bde1e61ee44b8066dfb029206e419", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/03ebb5d2556bde1e61ee44b8066dfb029206e419", "committedDate": "2020-09-28T10:08:36Z", "message": "Upgrade dependencies and make the JDK11 compiling passed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16259594eb91257bd16571dc0e82a73b17fdfe87", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/16259594eb91257bd16571dc0e82a73b17fdfe87", "committedDate": "2020-09-28T12:59:25Z", "message": "Update license and fix license check file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b5cd75bd83ce99683f3143ea0a35fd3b8ff18fd", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/7b5cd75bd83ce99683f3143ea0a35fd3b8ff18fd", "committedDate": "2020-09-28T13:02:39Z", "message": "Add CI for JDK11 compiling."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0655ee326d8dcf0a926243b934134624cb05a785", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/0655ee326d8dcf0a926243b934134624cb05a785", "committedDate": "2020-09-28T13:04:27Z", "message": "Update doc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed84210786a209e5331fa3eaff86311028186c29", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/ed84210786a209e5331fa3eaff86311028186c29", "committedDate": "2020-09-28T13:17:01Z", "message": "Fix workflow file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93b219f7b1fc0c75be0a9db6f140a38b33a59ae9", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/93b219f7b1fc0c75be0a9db6f140a38b33a59ae9", "committedDate": "2020-09-28T15:11:45Z", "message": "Add bytebuddy and objenesis for mockito for test env in JDK11."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ad75b71b70e81fe2f2b81941e2778f4ec369525", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/1ad75b71b70e81fe2f2b81941e2778f4ec369525", "committedDate": "2020-09-28T15:37:54Z", "message": "Fix Spring boot 1.x testing in JDK11."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a17852063dab6fc14129558d22d941a47c12ea6", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/9a17852063dab6fc14129558d22d941a47c12ea6", "committedDate": "2020-09-29T00:29:24Z", "message": "Remove duplicated compiler.version."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72fa37c5cfefe9dfee67d37a67adb413f8966d9c", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/72fa37c5cfefe9dfee67d37a67adb413f8966d9c", "committedDate": "2020-09-29T00:51:21Z", "message": "Remove a test on JDK11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0071b3934013e93efd431474befee0d3398b9ec9", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/0071b3934013e93efd431474befee0d3398b9ec9", "committedDate": "2020-09-29T01:26:22Z", "message": "Merge branch 'master' into upgrade-dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MDAyODcx", "url": "https://github.com/apache/skywalking/pull/5579#pullrequestreview-498002871", "createdAt": "2020-09-29T01:33:38Z", "commit": {"oid": "0071b3934013e93efd431474befee0d3398b9ec9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMTozMzozOFrOHZVN6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMTozMzozOFrOHZVN6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNDA3NQ==", "bodyText": "@kezhenxu94 @dmsolr @JaredTan95 This test can't pass on the GitHub Action's JDK11, but passed on the local JDK 11.", "url": "https://github.com/apache/skywalking/pull/5579#discussion_r496324075", "createdAt": "2020-09-29T01:33:38Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-configuration/configuration-etcd/src/test/java/org/apache/skywalking/oap/server/configuration/etcd/EtcdConfigWatcherRegisterTest.java", "diffHunk": "@@ -1,134 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one or more\n- * contributor license agreements.  See the NOTICE file distributed with\n- * this work for additional information regarding copyright ownership.\n- * The ASF licenses this file to You under the Apache License, Version 2.0\n- * (the \"License\"); you may not use this file except in compliance with\n- * the License.  You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- *\n- */\n-\n-package org.apache.skywalking.oap.server.configuration.etcd;\n-\n-import com.google.common.collect.Sets;\n-import java.net.URI;\n-import java.util.ArrayList;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import mousio.client.promises.ResponsePromise;\n-import mousio.etcd4j.EtcdClient;\n-import mousio.etcd4j.promises.EtcdResponsePromise;\n-import mousio.etcd4j.requests.EtcdKeyGetRequest;\n-import mousio.etcd4j.responses.EtcdKeysResponse;\n-import org.apache.skywalking.oap.server.configuration.api.ConfigTable;\n-import org.junit.Before;\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import org.powermock.api.mockito.PowerMockito;\n-import org.powermock.core.classloader.annotations.PowerMockIgnore;\n-import org.powermock.core.classloader.annotations.PrepareForTest;\n-import org.powermock.modules.junit4.PowerMockRunner;\n-import org.powermock.reflect.Whitebox;\n-\n-import static junit.framework.TestCase.assertEquals;\n-import static org.mockito.Matchers.any;\n-import static org.mockito.Mockito.spy;\n-import static org.powermock.api.mockito.PowerMockito.mock;\n-import static org.powermock.api.mockito.PowerMockito.mockStatic;\n-import static org.powermock.api.mockito.PowerMockito.when;\n-import static org.powermock.api.mockito.PowerMockito.whenNew;\n-\n-@RunWith(PowerMockRunner.class)\n-@PrepareForTest({\n-    EtcdKeysResponse.class,\n-    EtcdUtils.class,\n-    EtcdClient.class,\n-    URI.class\n-})\n-@PowerMockIgnore({\"javax.management.*\"})\n-public class EtcdConfigWatcherRegisterTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0071b3934013e93efd431474befee0d3398b9ec9"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MDE3OTM5", "url": "https://github.com/apache/skywalking/pull/5579#pullrequestreview-498017939", "createdAt": "2020-09-29T02:17:37Z", "commit": {"oid": "0071b3934013e93efd431474befee0d3398b9ec9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1747, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}