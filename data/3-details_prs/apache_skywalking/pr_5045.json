{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MTE0MDMw", "number": 5045, "title": "fix @Tag returnedObject bug #5036", "bodyText": "Please answer these questions before submitting pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n#5036\n\n\n\nBug fix\n\nBug description.\nTag returnedObject cannot support List, Array, Map\nHow to fix?\nmodify method: CustomizeExpression.evaluationReturnContext(ret)", "createdAt": "2020-07-07T02:59:44Z", "url": "https://github.com/apache/skywalking/pull/5045", "merged": true, "mergeCommit": {"oid": "9f5e719cfae607b4b76b53ca078b28e23c9126ec"}, "closed": true, "closedAt": "2020-07-10T03:07:09Z", "author": {"login": "zoumingzm"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcycoxJAH2gAyNDQ1MTE0MDMwOmE0OWFjYWJjOGE3YWZkNjczNTMzYTRmZDUzZjg5YTU4YmEyMDU3ZDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczawhYgFqTQ0NjA5NDAyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a49acabc8a7afd673533a4fd53f89a58ba2057d3", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/a49acabc8a7afd673533a4fd53f89a58ba2057d3", "committedDate": "2020-07-07T02:44:10Z", "message": "1. isReturnTag method modify, the condition 'es.length == 2' is not reasonable. For example: returnedObj.0.info\n2. @Tag evaluationReturnContext modify, add Map, List, Array\n3. add @Tag test case ."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a688bbf9cf97b495e4eb046b337bed792ac16d7", "author": {"user": {"login": "zoumingzm", "name": null}}, "url": "https://github.com/apache/skywalking/commit/9a688bbf9cf97b495e4eb046b337bed792ac16d7", "committedDate": "2020-07-07T03:00:40Z", "message": "Merge branch 'master' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb45d3c2aacea5ed5c04e3c17211a24f533fa8a1", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/bb45d3c2aacea5ed5c04e3c17211a24f533fa8a1", "committedDate": "2020-07-07T04:21:57Z", "message": "test case chinese character remove"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTY5NDk0", "url": "https://github.com/apache/skywalking/pull/5045#pullrequestreview-443569494", "createdAt": "2020-07-07T05:21:19Z", "commit": {"oid": "bb45d3c2aacea5ed5c04e3c17211a24f533fa8a1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNToyMToxOVrOGtve5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNToyMToxOVrOGtve5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYxNzA2Mw==", "bodyText": "Are there possibilities that the method returns a String and the user wants to use that as a tag? In such case, es.length == 1", "url": "https://github.com/apache/skywalking/pull/5045#discussion_r450617063", "createdAt": "2020-07-07T05:21:19Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-toolkit-activation/apm-toolkit-trace-activation/src/main/java/org/apache/skywalking/apm/toolkit/activation/util/TagUtil.java", "diffHunk": "@@ -38,6 +38,6 @@ public static void tagReturnSpanSpan(final AbstractSpan span, final Map<String,\n \n     public static Boolean isReturnTag(String expression) {\n         String[] es = expression.split(\"\\\\.\");\n-        return es.length == 2 && \"returnedObj\".equals(es[0]);\n+        return \"returnedObj\".equals(es[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb45d3c2aacea5ed5c04e3c17211a24f533fa8a1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3164b182225afec804848789259768aeabe9089", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/f3164b182225afec804848789259768aeabe9089", "committedDate": "2020-07-09T16:18:47Z", "message": "1. @Tag evaluationReturnContext modify, add attribute returnedObj.\n2. add @Tag test case for returnedObj Integer, String, Object."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa37434113c14d4c73b94cb784a1b6625070db97", "author": {"user": {"login": "zoumingzm", "name": null}}, "url": "https://github.com/apache/skywalking/commit/aa37434113c14d4c73b94cb784a1b6625070db97", "committedDate": "2020-07-09T16:21:39Z", "message": "Merge branch 'master' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e30aff4d7f9fb39894c66b8dd61fe8307cc04b1", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/5e30aff4d7f9fb39894c66b8dd61fe8307cc04b1", "committedDate": "2020-07-09T16:29:08Z", "message": "Merge remote-tracking branch 'remotes/upstream/master' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28d2680c13f375348c02928d5a5d32a547e9fcfb", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/28d2680c13f375348c02928d5a5d32a547e9fcfb", "committedDate": "2020-07-09T16:30:36Z", "message": "Merge remote-tracking branch 'origin/fix-Tag-returnedObject' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05b813fe76210c36b859359deb3960a3ef1259ee", "author": {"user": {"login": "zoumingzm", "name": null}}, "url": "https://github.com/apache/skywalking/commit/05b813fe76210c36b859359deb3960a3ef1259ee", "committedDate": "2020-07-09T16:31:31Z", "message": "Merge branch 'master' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32df31b65c39532424290b5146c12aa5462d69ae", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/32df31b65c39532424290b5146c12aa5462d69ae", "committedDate": "2020-07-09T16:32:27Z", "message": "Merge remote-tracking branch 'origin/fix-Tag-returnedObject' into fix-Tag-returnedObject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb0a4cdc8efcfcb5c064d3399ff0307d4ae6ba6e", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/fb0a4cdc8efcfcb5c064d3399ff0307d4ae6ba6e", "committedDate": "2020-07-09T22:18:18Z", "message": "1. codestyle repair"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDU1NTU1", "url": "https://github.com/apache/skywalking/pull/5045#pullrequestreview-446055555", "createdAt": "2020-07-10T00:44:13Z", "commit": {"oid": "fb0a4cdc8efcfcb5c064d3399ff0307d4ae6ba6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMDo0NDoxM1rOGvmT3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMDo0NDoxM1rOGvmT3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU2MzkzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testTraceWithList() throws Throwable {\n          \n          \n            \n                public void testTraceWithReturnList() throws Throwable {\n          \n      \n    \n    \n  \n\nI think the test method names are not accurate? Please confirm. Sam as other methods.", "url": "https://github.com/apache/skywalking/pull/5045#discussion_r452563935", "createdAt": "2020-07-10T00:44:13Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-toolkit-activation/apm-toolkit-trace-activation/src/test/java/org/apache/skywalking/apm/toolkit/activation/trace/TagAnnotationTest.java", "diffHunk": "@@ -138,6 +144,145 @@ public void testTraceWithTags() throws Throwable {\n \n     }\n \n+    @Test\n+    public void testTraceWithList() throws Throwable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb0a4cdc8efcfcb5c064d3399ff0307d4ae6ba6e"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41e6a2efb1a46123a99d1943e3c615feca60ee2b", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/41e6a2efb1a46123a99d1943e3c615feca60ee2b", "committedDate": "2020-07-10T00:53:42Z", "message": "1. test case method name change."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDU5NjY5", "url": "https://github.com/apache/skywalking/pull/5045#pullrequestreview-446059669", "createdAt": "2020-07-10T01:00:07Z", "commit": {"oid": "41e6a2efb1a46123a99d1943e3c615feca60ee2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDk0MDIz", "url": "https://github.com/apache/skywalking/pull/5045#pullrequestreview-446094023", "createdAt": "2020-07-10T03:06:45Z", "commit": {"oid": "41e6a2efb1a46123a99d1943e3c615feca60ee2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2050, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}