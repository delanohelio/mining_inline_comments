{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTU3NDA0", "number": 4766, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMTo0Nzo1MFrOD62zAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMTo0Nzo1MFrOD62zAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDQxNzkyOnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-sdk-plugin/sharding-jdbc-1.5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/sjdbc/ExecuteEventListener.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMTo0Nzo1MFrOGS6iIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMjowMTo0MFrOGS6l-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA==", "bodyText": "What thing is NULL triggering NPE?", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422486560", "createdAt": "2020-05-09T11:47:50Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-sdk-plugin/sharding-jdbc-1.5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/sjdbc/ExecuteEventListener.java", "diffHunk": "@@ -62,13 +62,17 @@ private void handle(AbstractExecutionEvent event, String operation) {\n                 AbstractSpan span = ContextManager.createExitSpan(\"/SJDBC/BRANCH/\" + operation, event.getDataSource());\n                 if (ExecutorDataMap.getDataMap().containsKey(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY)) {\n                     ContextManager.continued((ContextSnapshot) ExecutorDataMap.getDataMap()\n-                                                                              .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n+                        .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n                 }\n                 Tags.DB_TYPE.set(span, \"sql\");\n                 Tags.DB_INSTANCE.set(span, event.getDataSource());\n                 Tags.DB_STATEMENT.set(span, event.getSql());\n                 if (!event.getParameters().isEmpty()) {\n-                    Tags.DB_BIND_VARIABLES.set(span, Joiner.on(\",\").join(event.getParameters()));\n+                    String variables = event.getParameters()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "825b1868b818e688ddeacf9f51d3345a536a045c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4Njg2MQ==", "bodyText": "event.getParameters contains null value,inside Joiner will check null value and then throw NPE", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422486861", "createdAt": "2020-05-09T11:52:07Z", "author": {"login": "ynfeng"}, "path": "apm-sniffer/apm-sdk-plugin/sharding-jdbc-1.5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/sjdbc/ExecuteEventListener.java", "diffHunk": "@@ -62,13 +62,17 @@ private void handle(AbstractExecutionEvent event, String operation) {\n                 AbstractSpan span = ContextManager.createExitSpan(\"/SJDBC/BRANCH/\" + operation, event.getDataSource());\n                 if (ExecutorDataMap.getDataMap().containsKey(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY)) {\n                     ContextManager.continued((ContextSnapshot) ExecutorDataMap.getDataMap()\n-                                                                              .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n+                        .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n                 }\n                 Tags.DB_TYPE.set(span, \"sql\");\n                 Tags.DB_INSTANCE.set(span, event.getDataSource());\n                 Tags.DB_STATEMENT.set(span, event.getSql());\n                 if (!event.getParameters().isEmpty()) {\n-                    Tags.DB_BIND_VARIABLES.set(span, Joiner.on(\",\").join(event.getParameters()));\n+                    String variables = event.getParameters()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA=="}, "originalCommit": {"oid": "825b1868b818e688ddeacf9f51d3345a536a045c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NzU0NA==", "bodyText": "Got it. LGTM.", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422487544", "createdAt": "2020-05-09T12:01:40Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-sdk-plugin/sharding-jdbc-1.5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/sjdbc/ExecuteEventListener.java", "diffHunk": "@@ -62,13 +62,17 @@ private void handle(AbstractExecutionEvent event, String operation) {\n                 AbstractSpan span = ContextManager.createExitSpan(\"/SJDBC/BRANCH/\" + operation, event.getDataSource());\n                 if (ExecutorDataMap.getDataMap().containsKey(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY)) {\n                     ContextManager.continued((ContextSnapshot) ExecutorDataMap.getDataMap()\n-                                                                              .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n+                        .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n                 }\n                 Tags.DB_TYPE.set(span, \"sql\");\n                 Tags.DB_INSTANCE.set(span, event.getDataSource());\n                 Tags.DB_STATEMENT.set(span, event.getSql());\n                 if (!event.getParameters().isEmpty()) {\n-                    Tags.DB_BIND_VARIABLES.set(span, Joiner.on(\",\").join(event.getParameters()));\n+                    String variables = event.getParameters()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA=="}, "originalCommit": {"oid": "825b1868b818e688ddeacf9f51d3345a536a045c"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 134, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}