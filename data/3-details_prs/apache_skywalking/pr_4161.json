{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTg0ODk2", "number": 4161, "title": "add Dynamic Configuration Consul AclToken ", "bodyText": "Please answer these questions before submitting pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n\n\n\nBug fix\n\n\nBug description.\n\n\nHow to fix?\n\n\n\nNew feature or improvement\n\nDescribe the details and related test reports.", "createdAt": "2020-01-02T08:29:38Z", "url": "https://github.com/apache/skywalking/pull/4161", "merged": true, "mergeCommit": {"oid": "5fba91901fe90865e2ad751d36e90a9fa2c70b7c"}, "closed": true, "closedAt": "2020-01-02T12:05:17Z", "author": {"login": "web-xiaxia"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2TbijgH2gAyMzU4NTg0ODk2OjY5ODE0YjNhNGIxNTU2NWJjYzdjMzVhNDI2MzJhZWRmZWZiNDg2MWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb2YfzfAFqTMzNzYyOTczNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "69814b3a4b15565bcc7c35a42632aedfefb4861a", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/69814b3a4b15565bcc7c35a42632aedfefb4861a", "committedDate": "2020-01-02T06:05:07Z", "message": "Update ConsulConfigurationCenterSettings.java\n\nadd aclTokne"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dba2e15bd53e03bb31c765bd370d7598f7a41d3", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/3dba2e15bd53e03bb31c765bd370d7598f7a41d3", "committedDate": "2020-01-02T06:06:50Z", "message": "Update ConsulConfigurationWatcherRegister.java\n\nadd aclToken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab991f2b37f7caa67d45ae875fd8290a6f17c3d9", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/ab991f2b37f7caa67d45ae875fd8290a6f17c3d9", "committedDate": "2020-01-02T06:10:07Z", "message": "Update application.yml\n\nadd aclToken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01d2a75621a9db74a693ce9a07ee8db8c75cf277", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/01d2a75621a9db74a693ce9a07ee8db8c75cf277", "committedDate": "2020-01-02T07:06:35Z", "message": "Update ConsulConfigurationCenterSettings.java\n\nadd aclToken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41720188c6c2f9e3ef4761356f44501ca9c4e860", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/41720188c6c2f9e3ef4761356f44501ca9c4e860", "committedDate": "2020-01-02T08:37:37Z", "message": "Update application.yml\n\nadd aclToken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/aff505b2726665ad21359c3c5b5fc7c5eb29d890", "committedDate": "2020-01-02T08:48:31Z", "message": "add aclToken"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NTcwNzcy", "url": "https://github.com/apache/skywalking/pull/4161#pullrequestreview-337570772", "createdAt": "2020-01-02T08:56:28Z", "commit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwODo1NjoyOVrOFZnUig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwODo1NjoyOVrOFZnUig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA==", "bodyText": "If you want this too, you miss some codes change in the configuration model. Your changes are only related to cluster model.", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362402954", "createdAt": "2020-01-02T08:56:29Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NTg0MjE4", "url": "https://github.com/apache/skywalking/pull/4161#pullrequestreview-337584218", "createdAt": "2020-01-02T09:39:31Z", "commit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwOTozOTozMVrOFZn-BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwOTozOTozMVrOFZn-BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg==", "bodyText": "Why do not you use !Strings.isNullOrEmpty(config.getAclToken())? I think that it is more readable.", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362413572", "createdAt": "2020-01-02T09:39:31Z", "author": {"login": "dmsolr"}, "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "diffHunk": "@@ -76,6 +76,10 @@ public ClusterModuleConsulProvider() {\n //                    we should set this value or it will be blocked forever\n                     .withConnectTimeoutMillis(3000);\n \n+            if (config.getAclToken() != null && !config.getAclToken().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NTk4NjQ0", "url": "https://github.com/apache/skywalking/pull/4161#pullrequestreview-337598644", "createdAt": "2020-01-02T10:20:26Z", "commit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c0f035261d4f4b0ba8b7e036fa2724397832df3", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/8c0f035261d4f4b0ba8b7e036fa2724397832df3", "committedDate": "2020-01-02T10:58:05Z", "message": "Replace with util"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db0016ce81081e495b0b06e387ac66beab28d808", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/db0016ce81081e495b0b06e387ac66beab28d808", "committedDate": "2020-01-02T11:00:34Z", "message": "Replace with util"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84c971e7eff29fe654daccc4f1358e7b08cb2062", "author": {"user": {"login": "web-xiaxia", "name": "\u4e0b\u4e0b"}}, "url": "https://github.com/apache/skywalking/commit/84c971e7eff29fe654daccc4f1358e7b08cb2062", "committedDate": "2020-01-02T11:12:48Z", "message": "add consul aclToken"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NjIxMDQ2", "url": "https://github.com/apache/skywalking/pull/4161#pullrequestreview-337621046", "createdAt": "2020-01-02T11:29:25Z", "commit": {"oid": "84c971e7eff29fe654daccc4f1358e7b08cb2062"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NjI5NzM1", "url": "https://github.com/apache/skywalking/pull/4161#pullrequestreview-337629735", "createdAt": "2020-01-02T11:59:18Z", "commit": {"oid": "84c971e7eff29fe654daccc4f1358e7b08cb2062"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2710, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}