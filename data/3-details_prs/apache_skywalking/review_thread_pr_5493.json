{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MjY5NzAy", "number": 5493, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwOToxMzoxOVrOEkcWgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNzo1OTowN1rOEn0KLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2NjQ4NzA2OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwOToxMzoxOVrOHTY8dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMTowNjozN1rOHTc3Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA5MzY4Nw==", "bodyText": "@vcjmhg swap this line and line 31 solves the problem,", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490093687", "createdAt": "2020-09-17T09:13:19Z", "author": {"login": "kezhenxu94"}, "path": "test/plugin/scenarios/webflux-scenario/pom.xml", "diffHunk": "@@ -29,6 +29,7 @@\n         <module>webflux-projectA-scenario</module>\n         <module>webflux-projectB-scenario</module>\n         <module>webflux-dist</module>\n+        <module>webflux-webclient-scenario</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE1NzkxNQ==", "bodyText": "The newly-added module is not packaged before webflux-dist module, so the error message occurred, see my comment inline, please also note that there is another failure in the C\n\nAnother failure in the CI is the command -./mvnw --batch-mode clean package -DskipTests -Pagent.I have test it in my pc and it has pased.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490157915", "createdAt": "2020-09-17T11:06:37Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/pom.xml", "diffHunk": "@@ -29,6 +29,7 @@\n         <module>webflux-projectA-scenario</module>\n         <module>webflux-projectB-scenario</module>\n         <module>webflux-dist</module>\n+        <module>webflux-webclient-scenario</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA5MzY4Nw=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2NjUwNjEwOnYy", "diffSide": "RIGHT", "path": "oap-server/server-bootstrap/src/main/resources/component-libraries.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwOToxNzo1NlrOHTZH_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDowNzoxMVrOHTa-WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA5NjYzOQ==", "bodyText": "This name doesn't accord to the one in apm-protocol/apm-network/src/main/java/org/apache/skywalking/apm/network/trace/component/ComponentsDefine.java", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490096639", "createdAt": "2020-09-17T09:17:56Z", "author": {"login": "kezhenxu94"}, "path": "oap-server/server-bootstrap/src/main/resources/component-libraries.yml", "diffHunk": "@@ -323,6 +323,9 @@ SpringScheduled:\n quartz-scheduler:\n   id: 97\n   languages: Java\n+spring-webclient:", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNjkzNg==", "bodyText": "Thank you very much !\ud83d\ude04", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490126936", "createdAt": "2020-09-17T10:07:11Z", "author": {"login": "vcjmhg"}, "path": "oap-server/server-bootstrap/src/main/resources/component-libraries.yml", "diffHunk": "@@ -323,6 +323,9 @@ SpringScheduled:\n quartz-scheduler:\n   id: 97\n   languages: Java\n+spring-webclient:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA5NjYzOQ=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2Njk3Mjg4OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/webflux-webclient-scenario/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMToyNzowMVrOHTdhmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMTo0MjowNVrOHTeCCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE2ODcyOQ==", "bodyText": "Should the format be k=v in properties?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490168729", "createdAt": "2020-09-17T11:27:01Z", "author": {"login": "dmsolr"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-webclient-scenario/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+#\n+\n+server.port: 18081", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94fddff8e20168bc6612ac696f267b70ac9707d3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3NzAzNQ==", "bodyText": "Should the format be k=v in properties?\n\nThank you very muh for pointing my mistake.Originally, I wanted to write configuration file imitating webflux-webclient-scenario, but I ignore the difference in file type . I will fix it immediately.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490177035", "createdAt": "2020-09-17T11:42:05Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-webclient-scenario/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+#\n+\n+server.port: 18081", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE2ODcyOQ=="}, "originalCommit": {"oid": "94fddff8e20168bc6612ac696f267b70ac9707d3"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDE0Mzg0OnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMjozMzoyM1rOHT721Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMjowMTozOVrOHU3a1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY2NTY4NQ==", "bodyText": "span may be null if (allArguments[0] == null)", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490665685", "createdAt": "2020-09-18T02:33:23Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        Mono<ClientResponse> ret1 = (Mono<ClientResponse>) ret;\n+        AbstractSpan span = (AbstractSpan) objInst.getSkyWalkingDynamicField();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTYzOTc1MA==", "bodyText": "thank you so much,I will fix it.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491639750", "createdAt": "2020-09-20T01:33:46Z", "author": {"login": "vcjmhg"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        Mono<ClientResponse> ret1 = (Mono<ClientResponse>) ret;\n+        AbstractSpan span = (AbstractSpan) objInst.getSkyWalkingDynamicField();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY2NTY4NQ=="}, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MTU1Nw==", "bodyText": "span may be null if (allArguments[0] == null)\n\nSir,if  allArgument[0] is null ,it seems that I can't do anything except return ret.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491641557", "createdAt": "2020-09-20T02:01:39Z", "author": {"login": "vcjmhg"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        Mono<ClientResponse> ret1 = (Mono<ClientResponse>) ret;\n+        AbstractSpan span = (AbstractSpan) objInst.getSkyWalkingDynamicField();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY2NTY4NQ=="}, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDE3NTk3OnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMjo1MTo0N1rOHT8JKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMjo1MTo0N1rOHT8JKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3MDM3Ng==", "bodyText": "You don't need span.errorOccurred(); now\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        span.errorOccurred();\n          \n          \n            \n                        span.log(error);\n          \n          \n            \n                        span.log(error);", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490670376", "createdAt": "2020-09-18T02:51:47Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        Mono<ClientResponse> ret1 = (Mono<ClientResponse>) ret;\n+        AbstractSpan span = (AbstractSpan) objInst.getSkyWalkingDynamicField();\n+        return ret1.doAfterSuccessOrError(new BiConsumer<ClientResponse, Throwable>() {\n+            @Override\n+            public void accept(ClientResponse clientResponse, Throwable throwable) {\n+                HttpStatus httpStatus = clientResponse.statusCode();\n+                if (httpStatus != null) {\n+                    Tags.STATUS_CODE.set(span, Integer.toString(httpStatus.value()));\n+                    if (httpStatus.isError()) {\n+                        span.errorOccurred();\n+                    }\n+                }\n+            }\n+        }).doOnError(error -> {\n+            span.errorOccurred();\n+            span.log(error);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDE4NjA2OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMjo1Nzo1OFrOHT8O6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMjowNDo1OFrOHU3blA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3MTg1MQ==", "bodyText": "Only pick up some of them to test, testing all versions requires many resources and makes the test slow", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r490671851", "createdAt": "2020-09-18T02:57:58Z", "author": {"login": "kezhenxu94"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -23,3 +23,11 @@\n 2.1.5.RELEASE\n 2.1.6.RELEASE\n 2.1.7.RELEASE\n+2.1.8.RELEASE\n+2.1.9.RELEASE\n+2.1.10.RELEASE\n+2.1.11.RELEASE\n+2.1.12.RELEASE\n+2.1.13.RELEASE\n+2.1.14.RELEASE\n+2.1.15.RELEASE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MTc0OA==", "bodyText": "ok,I will remove it", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491641748", "createdAt": "2020-09-20T02:04:58Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -23,3 +23,11 @@\n 2.1.5.RELEASE\n 2.1.6.RELEASE\n 2.1.7.RELEASE\n+2.1.8.RELEASE\n+2.1.9.RELEASE\n+2.1.10.RELEASE\n+2.1.11.RELEASE\n+2.1.12.RELEASE\n+2.1.13.RELEASE\n+2.1.14.RELEASE\n+2.1.15.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY3MTg1MQ=="}, "originalCommit": {"oid": "8b9095b867b21d0c4f0287effdf660413df9ba3b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3NjM1NzE1OnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMjoyMTo0MFrOHU3f2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMzowMDoxNlrOHU3plg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0Mjg0Mg==", "bodyText": "You didn't format the codes, and why/when this could NULL? Is there a real case for this?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491642842", "createdAt": "2020-09-20T02:21:40Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        // fix the problem that allArgument[0] may be null\n+        if(allArguments[0] == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0NTMzNA==", "bodyText": "@kezhenxu94 ,sir,can you give a real case ? In most cases,it should not be empty.So before last commit,I use it directly.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491645334", "createdAt": "2020-09-20T03:00:16Z", "author": {"login": "vcjmhg"}, "path": "apm-sniffer/apm-sdk-plugin/spring-plugins/spring-webflux-5.x-webclient-plugin/src/main/java/org/apache/skywalking/apm/plugin/spring/webflux/v5/webclient/WebFluxWebClientInterceptor.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.spring.webflux.v5.webclient;\n+\n+import org.apache.skywalking.apm.agent.core.context.CarrierItem;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.tag.Tags;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.reactive.function.client.ClientRequest;\n+import org.springframework.web.reactive.function.client.ClientResponse;\n+import reactor.core.publisher.Mono;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.util.function.BiConsumer;\n+\n+public class WebFluxWebClientInterceptor implements InstanceMethodsAroundInterceptor {\n+\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, MethodInterceptResult result) throws Throwable {\n+        if (allArguments[0] == null) {\n+            //illegal args,can't trace ignore\n+            return;\n+        }\n+\n+        ClientRequest request = (ClientRequest) allArguments[0];\n+        final ContextCarrier contextCarrier = new ContextCarrier();\n+\n+        URI uri = request.url();\n+        final String requestURIString = getRequestURIString(uri);\n+        final String operationName = requestURIString;\n+        final String remotePeer = getIPAndPort(uri);\n+        AbstractSpan span = ContextManager.createExitSpan(operationName, contextCarrier, remotePeer);\n+\n+        //set componet name\n+        span.setComponent(ComponentsDefine.SPRING_WEBCLIENT);\n+        Tags.URL.set(span, uri.toString());\n+        Tags.HTTP.METHOD.set(span, request.method().toString());\n+        SpanLayer.asHttp(span);\n+\n+        //user async interface\n+        span.prepareForAsync();\n+        ContextManager.stopSpan();\n+\n+        objInst.setSkyWalkingDynamicField(span);\n+\n+        CarrierItem next = contextCarrier.items();\n+        while (next.hasNext()) {\n+            next = next.next();\n+            request.headers().add(next.getHeadKey(), next.getHeadValue());\n+        }\n+    }\n+\n+    @Override\n+    public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes, Object ret) throws Throwable {\n+        // fix the problem that allArgument[0] may be null\n+        if(allArguments[0] == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0Mjg0Mg=="}, "originalCommit": null, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3NjM2MDY2OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMjoyNzoyOFrOHU3hZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwMzowMjowOFrOHU3qCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg==", "bodyText": "What is the difference between this new link and above L45-L47? You seem only to change the target address. Why you do WebClient in another new service rather than doing directly here? I am feeling the new service in the test is not necessary.\nPlease correct me if I am wrong.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491643236", "createdAt": "2020-09-20T02:27:28Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzY3OQ==", "bodyText": "Sir,The reason why I do WebClient in another new  is that I fear it will appear thread confusion with projectB.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491643679", "createdAt": "2020-09-20T02:34:26Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0Mzg0MA==", "bodyText": "I mean, you should do WebClient at L48 directly(of course the new method is fine). I just don't think you should do RPCs twice.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491643840", "createdAt": "2020-09-20T02:36:21Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0NDYxNA==", "bodyText": "You mean I should use WebClient to creat a request rather than visit(),should I?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491644614", "createdAt": "2020-09-20T02:49:28Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0NDk2NQ==", "bodyText": "Yes. This RPC is not necessary", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491644965", "createdAt": "2020-09-20T02:54:31Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0NTQ1MQ==", "bodyText": "Ok,I will modify it.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r491645451", "createdAt": "2020-09-20T03:02:08Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectA-scenario/src/main/java/org/apache/skywalking/apm/testcase/sc/webflux/projectA/controller/TestController.java", "diffHunk": "@@ -43,6 +45,7 @@ public String testcase() throws IOException {\n         visit(\"http://\" + hostBAddress + \"/testcase/route/error\");\n         visit(\"http://\" + hostBAddress + \"/notFound\");\n         visit(\"http://\" + hostBAddress + \"/testcase/annotation/mono/hello\");\n+        visit(\"http://\" + clientHostAddress + \"/testcase/webclient/testGet\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY0MzIzNg=="}, "originalCommit": null, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MjkwMTI4OnYy", "diffSide": "RIGHT", "path": "apm-protocol/apm-network/src/main/java/org/apache/skywalking/apm/network/trace/component/ComponentsDefine.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOTo1MjoxNVrOHVyjBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOTo1NjowM1rOHVyrbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjYxMDMxMQ==", "bodyText": "A component should not include the version.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r492610311", "createdAt": "2020-09-22T09:52:15Z", "author": {"login": "wu-sheng"}, "path": "apm-protocol/apm-network/src/main/java/org/apache/skywalking/apm/network/trace/component/ComponentsDefine.java", "diffHunk": "@@ -178,4 +178,6 @@\n     public static final OfficialComponent QUARTZ_SCHEDULER = new OfficialComponent(97, \"quartz-scheduler\");\n \n     public static final OfficialComponent XXL_JOB = new OfficialComponent(98, \"xxl-job\");\n-}\n+\n+    public static final OfficialComponent SPRING_WEBCLIENT = new OfficialComponent(99, \"spring-webflux-5.x-webclient\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b29e7b5559b54181dbec03f2b12e5fd9e421a72"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjYxMjQ2Mw==", "bodyText": "ok,I wiil modefy it after this CI finished.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r492612463", "createdAt": "2020-09-22T09:56:03Z", "author": {"login": "vcjmhg"}, "path": "apm-protocol/apm-network/src/main/java/org/apache/skywalking/apm/network/trace/component/ComponentsDefine.java", "diffHunk": "@@ -178,4 +178,6 @@\n     public static final OfficialComponent QUARTZ_SCHEDULER = new OfficialComponent(97, \"quartz-scheduler\");\n \n     public static final OfficialComponent XXL_JOB = new OfficialComponent(98, \"xxl-job\");\n-}\n+\n+    public static final OfficialComponent SPRING_WEBCLIENT = new OfficialComponent(99, \"spring-webflux-5.x-webclient\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjYxMDMxMQ=="}, "originalCommit": {"oid": "9b29e7b5559b54181dbec03f2b12e5fd9e421a72"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDIyMjY1OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/config/expectedData.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNToxMjo0MlrOHV_KwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNToxMjo0MlrOHV_KwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzA4OQ==", "bodyText": "Where is the server-side segment with ref to match this?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r492817089", "createdAt": "2020-09-22T15:12:42Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/config/expectedData.yaml", "diffHunk": "@@ -321,6 +321,22 @@ segmentItems:\n       - {key: url, value: not null}\n       - {key: http.method, value: GET}\n       skipAnalysis: 'false'\n+    - operationName: /testcase/webclient/server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDIyNjg4OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNToxMzoxNlrOHV_NaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzowMDo0OVrOHYCnSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ==", "bodyText": "This should be traced in the expected data. Please recheck.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r492817769", "createdAt": "2020-09-22T15:13:16Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE0NDU1Mw==", "bodyText": "ok,It seems /testcase/webclient/server finished too fast,I will recheck it.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r493144553", "createdAt": "2020-09-23T01:59:23Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE0NTU1NQ==", "bodyText": "What do you mean finish too fast? I can't find the entry span and segment in your expected data.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r493145555", "createdAt": "2020-09-23T02:00:53Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY1NzQ0OQ==", "bodyText": "The span of /testcaset finish earlier than /testcase/webclient/server,so I'm not sure if this situation is normal.\n\nFrom the below picture,we can see the oap has received the data which webclient plugin sent,but the data of entry span disappeared.So I infer whether /testcaset finished too fast so that the data of entry span data was not transfered correctly.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r493657449", "createdAt": "2020-09-23T14:51:10Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY2MTcxNA==", "bodyText": "OK, this screenshot proved the context propagation works, but, we still need in the plugin test, otherwise, we can't be sure this plugin also works.\nSo, I think the things you mentioned are caused by the complexity of this scenario. It has too many request, so, some parts may be missed when the verification begins.\nHow about setting up a specific tests for webflux-webclient only?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r493661714", "createdAt": "2020-09-23T14:56:23Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY3MzMyOA==", "bodyText": "ok\uff0csir\uff0cI will try it!", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r493673328", "createdAt": "2020-09-23T15:11:06Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk3MDY5OA==", "bodyText": "@wu-sheng ,Sir,I have write an extra tests for webflux-webclient,but it seems to have a problem during span transmission.\nFrom below picture,we can see that  the exit span named /projectA/webclient/ping seems has been sent to oap.But in the second picture ,the entry span seems was not connected with the exit span corresponding with it.So could you please tell me some cause of this result ,or This is because  the ref data from entry span is not transmitted correctly ?\n.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r494970698", "createdAt": "2020-09-25T13:00:49Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/webflux-projectB-scenario/src/main/java/test/apache/skywalking/apm/testcase/sc/webflux/projectB/controller/TestAnnotationController.java", "diffHunk": "@@ -44,6 +44,11 @@ public String error() {\n         }\n         return \"1\";\n     }\n+    \n+    @RequestMapping(\"/testcase/webclient/server\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNzc2OQ=="}, "originalCommit": {"oid": "14d65c661d31531b4854f704f760a62509b2128b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMTA5NjQ1OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxMjo1OTo1MFrOHYgJYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwMjo0MDozMVrOHYkE2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA==", "bodyText": "Recently, we are reducing the unnecessary tests, you could run all these locally, but in the upstream CI, we recommend the latest mini version num, 2.1.6 for all 2.1.x.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495454560", "createdAt": "2020-09-26T12:59:50Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NzUyOQ==", "bodyText": "Need I modify it ? Just like this:\n2.1.6.RELEASE\n2.1.7.RELEASE\n2.1.8.RELEASE\n2.1.9.RELEASE\n2.1.10.RELEASE\n2.1.11.RELEASE\n2.1.12.RELEASE\n2.1.13.RELEASE\n2.1.14.RELEASE\n2.1.15.RELEASE", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495457529", "createdAt": "2020-09-26T13:35:15Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA=="}, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2MDk3Mg==", "bodyText": "I think just 2.1.15? Do they have big difference?", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495460972", "createdAt": "2020-09-26T14:17:02Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA=="}, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUxMzAxMg==", "bodyText": "The differences between 2.1.x versions are mainly bug fixes. It seems that the difference will not affect our test results.But the version has released to 2.3.x and these versions will include new feature additions . So I don't whether we need to add test for different version of 2.x ?\nThe specific differences can be seen in the following link\uff1ahttps://github.com/spring-projects/spring-boot/tags", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495513012", "createdAt": "2020-09-27T01:17:22Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA=="}, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUxMzQ5Mg==", "bodyText": "Basically, we recommend using the latest versions of 2.1.x, 2.2.x, and 2.3.x", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495513492", "createdAt": "2020-09-27T01:24:50Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA=="}, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUxODkzOA==", "bodyText": "ok,I got it . I wiil modify it immediately.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495518938", "createdAt": "2020-09-27T02:40:31Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,10 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n+2.1.1.RELEASE\n+2.1.2.RELEASE\n+2.1.3.RELEASE\n+2.1.4.RELEASE\n+2.1.5.RELEASE\n+2.1.6.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDU2MA=="}, "originalCommit": {"oid": "4e536b588090279e022a79ae49a8d9c68303ddbe"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMTg0NDkzOnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNzo1OTowN1rOHYljbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwODo0NTo0MFrOHYl0wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU0MzE0OQ==", "bodyText": "The version of 2.1x.RELEASE seems has passed ,but 2.2.x failed.It seem context-path has not activated,I will check it.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495543149", "createdAt": "2020-09-27T07:59:07Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,6 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n-2.1.7.RELEASE\n+2.1.17.RELEASE\n+2.2.10.RELEASE\n+2.3.4.RELEASE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b19c55d5017db57406c2c3434914585342b0f45"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU0NzU4NA==", "bodyText": "The reason for the failure of the 2.2.10 and 2.3.4 is the change in webflux's dependency on netty after 2.2.x.And I have solved it and the test has passed in my pc.", "url": "https://github.com/apache/skywalking/pull/5493#discussion_r495547584", "createdAt": "2020-09-27T08:45:40Z", "author": {"login": "vcjmhg"}, "path": "test/plugin/scenarios/webflux-scenario/support-version.list", "diffHunk": "@@ -16,5 +16,6 @@\n \n # 2.0.0-2.1.0 are supported, but due to the status code bug(https://github.com/spring-projects/spring-framework/issues/21901)\n # we don\u2019t test them\n-\n-2.1.7.RELEASE\n+2.1.17.RELEASE\n+2.2.10.RELEASE\n+2.3.4.RELEASE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU0MzE0OQ=="}, "originalCommit": {"oid": "3b19c55d5017db57406c2c3434914585342b0f45"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4803, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}