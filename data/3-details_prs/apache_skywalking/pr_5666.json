{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTc1OTg3", "number": 5666, "title": "add transmission latency for MQ case", "bodyText": "Please answer these questions before submitting a pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\nRelate to #5591\n\n\n\nBug fix\n\n\nBug description.\n\n\nHow to fix?\n\n\n\nNew feature or improvement\n\nDescribe the details and related test reports.", "createdAt": "2020-10-14T07:36:09Z", "url": "https://github.com/apache/skywalking/pull/5666", "merged": true, "mergeCommit": {"oid": "08781b41a8255bcceebb3287364c81745a04bec6"}, "closed": true, "closedAt": "2020-11-01T03:01:05Z", "author": {"login": "EvanLjp"}, "timelineItems": {"totalCount": 48, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSYICDAH2gAyNTAzMTc1OTg3OjZkOGZlZjIyOTAzMWYzYmE3MDdjNjQyNTFkODQ5NjMyNDliMjRhMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYGrs_gFqTUyMTE4NzcxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6d8fef229031f3ba707c64251d84963249b24a13", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/6d8fef229031f3ba707c64251d84963249b24a13", "committedDate": "2020-10-14T07:34:22Z", "message": "add transmission latency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTE3ODI0", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-508517824", "createdAt": "2020-10-14T16:19:25Z", "commit": {"oid": "6d8fef229031f3ba707c64251d84963249b24a13"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/cc5ce935285aa5037cc04930e8935835b18010e4", "committedDate": "2020-10-15T06:21:35Z", "message": "add transmission latency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MDY1NjE1", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-509065615", "createdAt": "2020-10-15T06:50:08Z", "commit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNjo1MDowOFrOHh0Jtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzowNjozNlrOHh1Wqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIxOTUxMQ==", "bodyText": "You should not transport the timestamp if it is a 0, otherwise, 0 would provide a super huge false latency for this RPC.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505219511", "createdAt": "2020-10-15T06:50:08Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -33,13 +36,20 @@\n      */\n     private boolean skipAnalysis;\n \n+    /**\n+     * The sending timestamp of the exit span.\n+     */\n+    @Getter\n+    @Setter\n+    private long sendingTimestamp = 0;\n+\n     /**\n      * Serialize this {@link ExtensionContext} to a {@link String}\n      *\n      * @return the serialization string.\n      */\n     String serialize() {\n-        return skipAnalysis ? \"1\" : \"0\";\n+        return skipAnalysis ? \"1\" : \"0\" + \"-\" + sendingTimestamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyMTMwMw==", "bodyText": "This is optional, you should add if (extensionParts.length > 1) {, then get (1) and parsing. Also, you need if not empty and try/catch to avoid the empty string as it is optional, and illegal character.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505221303", "createdAt": "2020-10-15T06:51:39Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -54,6 +64,7 @@ void deserialize(String value) {\n         // only try to read it when it exist.\n         if (extensionParts.length > 0) {\n             this.skipAnalysis = Objects.equals(extensionParts[0], \"1\");\n+            this.sendingTimestamp = Long.parseLong(extensionParts[1]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyMzA3Mg==", "bodyText": "Why only Kafka test case updated? I am assuming this should relate to all MQ plugins.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505223072", "createdAt": "2020-10-15T06:52:59Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/kafka-scenario/config/expectedData.yaml", "diffHunk": "@@ -156,6 +157,7 @@ segmentItems:\n         tags:\n           - {key: mq.broker, value: 'kafka-server:9092'}\n           - {key: mq.topic, value: test.}\n+          - {key: transmission.latency, value: not null}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyNTUzMw==", "bodyText": "Rename this to parseRPC, as it does more than it used to be.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505225533", "createdAt": "2020-10-15T06:54:56Z", "author": {"login": "wu-sheng"}, "path": "oap-server/analyzer/agent-analyzer/src/main/java/org/apache/skywalking/oap/server/analyzer/provider/trace/parser/listener/MultiScopesAnalysisListener.java", "diffHunk": "@@ -234,6 +234,12 @@ public void parseExit(SpanObject span, SegmentObject segmentObject) {\n \n     private void setPublicAttrs(SourceBuilder sourceBuilder, SpanObject span) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyNjg0Nw==", "bodyText": "We have a for span in the L240-L248 already, please don't do duplicated iteration.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505226847", "createdAt": "2020-10-15T06:55:58Z", "author": {"login": "wu-sheng"}, "path": "oap-server/analyzer/agent-analyzer/src/main/java/org/apache/skywalking/oap/server/analyzer/provider/trace/parser/listener/MultiScopesAnalysisListener.java", "diffHunk": "@@ -234,6 +234,12 @@ public void parseExit(SpanObject span, SegmentObject segmentObject) {\n \n     private void setPublicAttrs(SourceBuilder sourceBuilder, SpanObject span) {\n         long latency = span.getEndTime() - span.getStartTime();\n+        for (final KeyStringValuePair keyStringValuePair : span.getTagsList()) {\n+            if (keyStringValuePair.getKey().equals(SpanTags.TRANSMISSION_LATENCY)) {\n+                latency += Integer.parseInt(keyStringValuePair.getValue());\n+                break;\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzMTAxOA==", "bodyText": "Should not bespan.getStartTime() - sendingTimestamp. At here, for you, the latency is current time - sending timestamp", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505231018", "createdAt": "2020-10-15T06:59:11Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -78,19 +89,25 @@ void handle(AbstractSpan span) {\n         if (this.skipAnalysis) {\n             span.skipAnalysis();\n         }\n+        if (this.sendingTimestamp != 0) {\n+            Tags.TRANSMISSION_LATENCY.set(span, String.valueOf(span.getStartTime() - sendingTimestamp));\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzNDYwMA==", "bodyText": "This should be removed.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505234600", "createdAt": "2020-10-15T07:01:57Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/trace/AbstractSpan.java", "diffHunk": "@@ -124,4 +124,10 @@\n      * Should skip analysis in the backend.\n      */\n     void skipAnalysis();\n+\n+    /**\n+     * Get the start time stamp of this span.\n+     */\n+    long getStartTime();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzNzQ3OQ==", "bodyText": "long -> Long, as it could be NULL if don't exist in the in-wire context.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505237479", "createdAt": "2020-10-15T07:05:13Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionInjector.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.agent.core.context;\n+\n+/**\n+ * Inject or read the extension protocol fields,such as {@link ExtensionContext#sendingTimestamp}.\n+ */\n+public class ExtensionInjector {\n+\n+    private final ExtensionContext extensionContext;\n+\n+    ExtensionInjector(final ExtensionContext extensionContext) {\n+        this.extensionContext = extensionContext;\n+    }\n+\n+    public void injectSendingTimestamp() {\n+        extensionContext.setSendingTimestamp(System.currentTimeMillis());\n+    }\n+\n+    public long readSendingTimestamp() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzOTIxMA==", "bodyText": "Why rewrite the latency of this? We never said the latency of span/segment/service including the network when we talked about the server-side latency.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505239210", "createdAt": "2020-10-15T07:06:36Z", "author": {"login": "wu-sheng"}, "path": "oap-server/analyzer/agent-analyzer/src/main/java/org/apache/skywalking/oap/server/analyzer/provider/trace/parser/listener/MultiScopesAnalysisListener.java", "diffHunk": "@@ -234,6 +234,12 @@ public void parseExit(SpanObject span, SegmentObject segmentObject) {\n \n     private void setPublicAttrs(SourceBuilder sourceBuilder, SpanObject span) {\n         long latency = span.getEndTime() - span.getStartTime();\n+        for (final KeyStringValuePair keyStringValuePair : span.getTagsList()) {\n+            if (keyStringValuePair.getKey().equals(SpanTags.TRANSMISSION_LATENCY)) {\n+                latency += Integer.parseInt(keyStringValuePair.getValue());\n+                break;\n+            }\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyNjg0Nw=="}, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTE0NDc2", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-509114476", "createdAt": "2020-10-15T07:59:29Z", "commit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo1OToyOVrOHh5INg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo1OToyOVrOHh5INg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTMwMTA0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return skipAnalysis ? \"1\" : \"0\" + \"-\" + sendingTimestamp;\n          \n          \n            \n                    return (skipAnalysis ? \"1\" : \"0\") + \"-\" + sendingTimestamp;", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r505301046", "createdAt": "2020-10-15T07:59:29Z", "author": {"login": "mrproliu"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -33,13 +36,20 @@\n      */\n     private boolean skipAnalysis;\n \n+    /**\n+     * The sending timestamp of the exit span.\n+     */\n+    @Getter\n+    @Setter\n+    private long sendingTimestamp = 0;\n+\n     /**\n      * Serialize this {@link ExtensionContext} to a {@link String}\n      *\n      * @return the serialization string.\n      */\n     String serialize() {\n-        return skipAnalysis ? \"1\" : \"0\";\n+        return skipAnalysis ? \"1\" : \"0\" + \"-\" + sendingTimestamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc5ce935285aa5037cc04930e8935835b18010e4"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc024b79247e7e0a49c066ece36a8fd3c69ab7b5", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/dc024b79247e7e0a49c066ece36a8fd3c69ab7b5", "committedDate": "2020-10-15T09:10:02Z", "message": "add transmission latency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76637ca396500cca697c2c89878bb5967d8908e5", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/76637ca396500cca697c2c89878bb5967d8908e5", "committedDate": "2020-10-15T09:28:50Z", "message": "add transmission latency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a491ce138a70b19b4e8543cfb0581837e3352b07", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/a491ce138a70b19b4e8543cfb0581837e3352b07", "committedDate": "2020-10-15T10:29:31Z", "message": "add transmission latency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fb6d82210dcd27c112583917f9cc0a6a06bb792", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/4fb6d82210dcd27c112583917f9cc0a6a06bb792", "committedDate": "2020-10-16T01:35:39Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5OTU1NTk3", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-509955597", "createdAt": "2020-10-16T01:37:31Z", "commit": {"oid": "4fb6d82210dcd27c112583917f9cc0a6a06bb792"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94eb43a079eebaad986d37744622b8db4a34aa38", "author": {"user": {"login": "kezhenxu94", "name": "kezhenxu94"}}, "url": "https://github.com/apache/skywalking/commit/94eb43a079eebaad986d37744622b8db4a34aa38", "committedDate": "2020-10-16T04:37:38Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMTQ4MDUx", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-510148051", "createdAt": "2020-10-16T05:51:45Z", "commit": {"oid": "94eb43a079eebaad986d37744622b8db4a34aa38"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "146b9a31c9047b5b41a6df8e0aca50388d078b68", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/146b9a31c9047b5b41a6df8e0aca50388d078b68", "committedDate": "2020-10-16T11:59:38Z", "message": "fix scenario"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13bd336dd06777085de5f0268894db35a4b2a6d9", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/13bd336dd06777085de5f0268894db35a4b2a6d9", "committedDate": "2020-10-16T12:01:15Z", "message": "Merge remote-tracking branch 'upstream/master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDg2NjY5", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-510486669", "createdAt": "2020-10-16T13:47:01Z", "commit": {"oid": "146b9a31c9047b5b41a6df8e0aca50388d078b68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NzowMVrOHi-qJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NzowMVrOHi-qJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0MDIyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * The latency of transmission. If there were more than one downstream endpoints, multiple tags will be recorded,\n          \n          \n            \n                 * The latency of transmission. When there are more than one downstream parent/segment-ref(s), multiple tags will be recorded,", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r506440228", "createdAt": "2020-10-16T13:47:01Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/tag/Tags.java", "diffHunk": "@@ -77,7 +77,11 @@ private Tags() {\n      */\n     public static final StringTag MQ_TOPIC = new StringTag(9, \"mq.topic\");\n \n-    public static final StringTag TRANSMISSION_LATENCY = new StringTag(15, \"transmission.latency\");\n+    /**\n+     * The latency of transmission. If there were more than one downstream endpoints, multiple tags will be recorded,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "146b9a31c9047b5b41a6df8e0aca50388d078b68"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDg3MDAw", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-510487000", "createdAt": "2020-10-16T13:47:25Z", "commit": {"oid": "146b9a31c9047b5b41a6df8e0aca50388d078b68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NzoyNVrOHi-r0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo0NzoyNVrOHi-r0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0MDY1OA==", "bodyText": "Is this format correct?", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r506440658", "createdAt": "2020-10-16T13:47:25Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/pulsar-scenario/config/expectedData.yaml", "diffHunk": "@@ -83,9 +83,9 @@ segmentItems:\n       spanType: Entry\n       peer: ''\n       tags:\n-      - {key: mq.broker, value: not null}\n+        - {key: transmission.latency, value: not null}\n+        - {key: mq.broker, value: not null}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "146b9a31c9047b5b41a6df8e0aca50388d078b68"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwOTk4ODAz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-510998803", "createdAt": "2020-10-17T16:44:24Z", "commit": {"oid": "13bd336dd06777085de5f0268894db35a4b2a6d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxNjo0NDoyNVrOHjecmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxNjo0NDoyNVrOHjecmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2MTA0OA==", "bodyText": "Maybe we should always serialize this part even if sendingTimestamp != 0? The extension fields are order-sensitive, we always need a real value or placeholder, otherwise, if the downstream agent plugin don't have this field but have their own extended fields(now for now, though), it will be trouble, WDYT? @wu-sheng", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r506961048", "createdAt": "2020-10-17T16:44:25Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -28,18 +33,30 @@\n  */\n public class ExtensionContext {\n \n+    private static final ILog LOGGER = LogManager.getLogger(ExtensionContext.class);\n     /**\n      * Tracing Mode. If true means represents all spans generated in this context should skip analysis.\n      */\n     private boolean skipAnalysis;\n \n+    /**\n+     * The sending timestamp of the exit span.\n+     */\n+    @Getter\n+    @Setter\n+    private long sendingTimestamp = 0;\n+\n     /**\n      * Serialize this {@link ExtensionContext} to a {@link String}\n      *\n      * @return the serialization string.\n      */\n     String serialize() {\n-        return skipAnalysis ? \"1\" : \"0\";\n+        String res = skipAnalysis ? \"1\" : \"0\";\n+        if (sendingTimestamp != 0) {\n+            res += \"-\" + sendingTimestamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bd336dd06777085de5f0268894db35a4b2a6d9"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a421393fad5992f93008f4d0c776ef20679f26c", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/2a421393fad5992f93008f4d0c776ef20679f26c", "committedDate": "2020-10-18T08:36:20Z", "message": "correlation-inject-span"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMTIxOTIz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-511121923", "createdAt": "2020-10-18T08:38:13Z", "commit": {"oid": "2a421393fad5992f93008f4d0c776ef20679f26c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozODoxM1rOHjji4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozODoxM1rOHjji4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzA0NDU3OQ==", "bodyText": "Again, don't use 2.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r507044579", "createdAt": "2020-10-18T08:38:13Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -69,14 +65,12 @@ void deserialize(String value) {\n         final String[] extensionParts = value.split(\"-\");\n         // All parts of the extension header are optional.\n         // only try to read it when it exist.\n-        if (extensionParts.length > 0) {\n+        if (extensionParts.length == 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a421393fad5992f93008f4d0c776ef20679f26c"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dc6c8da3ef5482c58c1a7eab30b94e453c25733", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/8dc6c8da3ef5482c58c1a7eab30b94e453c25733", "committedDate": "2020-10-18T10:03:45Z", "message": "correlation-inject-span"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38766c264b8c73a7a3d0f5e3c01aa1f6931eb721", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/38766c264b8c73a7a3d0f5e3c01aa1f6931eb721", "committedDate": "2020-10-18T10:17:23Z", "message": "correlation-inject-span"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9da69fb2b83c0ef002afbcf8fb99d3060d064366", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/9da69fb2b83c0ef002afbcf8fb99d3060d064366", "committedDate": "2020-10-18T10:22:52Z", "message": "correlation-inject-span"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9204880a5eb1b08d7e482f45dbbd83d1f8b9dd48", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/9204880a5eb1b08d7e482f45dbbd83d1f8b9dd48", "committedDate": "2020-10-18T16:35:39Z", "message": "keep compatibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "269302d35510cb9933217310ba21c9e105940755", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/269302d35510cb9933217310ba21c9e105940755", "committedDate": "2020-10-18T16:37:23Z", "message": "Merge remote-tracking branch 'upstream/master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMzY2ODkz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-511366893", "createdAt": "2020-10-19T01:52:25Z", "commit": {"oid": "269302d35510cb9933217310ba21c9e105940755"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMTo1MjoyNVrOHj1j4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMTo1MjoyNVrOHj1j4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzMzOTc0NA==", "bodyText": "Please inject  (whitespace), rather than this strange replaceAll.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r507339744", "createdAt": "2020-10-19T01:52:25Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -49,11 +64,23 @@ void deserialize(String value) {\n         if (StringUtil.isEmpty(value)) {\n             return;\n         }\n-        final String[] extensionParts = value.split(\"-\");\n+        String[] extensionParts = value.replaceAll(\"-\", \"- \").split(\"-\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "269302d35510cb9933217310ba21c9e105940755"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMzY3MDAz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-511367003", "createdAt": "2020-10-19T01:52:58Z", "commit": {"oid": "269302d35510cb9933217310ba21c9e105940755"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMTo1Mjo1OFrOHj1l-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMTo1Mjo1OFrOHj1l-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzM0MDI4MA==", "bodyText": "Please use Long to separate real 0 and NULL.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r507340280", "createdAt": "2020-10-19T01:52:58Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -28,18 +33,28 @@\n  */\n public class ExtensionContext {\n \n+    private static final ILog LOGGER = LogManager.getLogger(ExtensionContext.class);\n     /**\n      * Tracing Mode. If true means represents all spans generated in this context should skip analysis.\n      */\n     private boolean skipAnalysis;\n \n+    /**\n+     * The sending timestamp of the exit span.\n+     */\n+    @Getter\n+    @Setter\n+    private long sendingTimestamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "269302d35510cb9933217310ba21c9e105940755"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5bcba15df8e91f7a8d8b4041f41de1886ad148d", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/c5bcba15df8e91f7a8d8b4041f41de1886ad148d", "committedDate": "2020-10-19T02:28:38Z", "message": "logic optimization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMzgyNzQz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-511382743", "createdAt": "2020-10-19T02:59:02Z", "commit": {"oid": "c5bcba15df8e91f7a8d8b4041f41de1886ad148d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMjo1OTowMlrOHj4kQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMjo1OTowMlrOHj4kQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzM4ODk5Mw==", "bodyText": "I think you misunderstand me, I mean no value should be represented by  , the separator should always be -.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r507388993", "createdAt": "2020-10-19T02:59:02Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -49,11 +73,23 @@ void deserialize(String value) {\n         if (StringUtil.isEmpty(value)) {\n             return;\n         }\n-        final String[] extensionParts = value.split(\"-\");\n+        String[] extensionParts = value.split(SEPARATOR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5bcba15df8e91f7a8d8b4041f41de1886ad148d"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "778d99fc9e13ea0e10841762dbe584c6bcbea866", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/778d99fc9e13ea0e10841762dbe584c6bcbea866", "committedDate": "2020-10-22T16:01:27Z", "message": "make space as default value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd6bc0540f7018ad58b308f7a55b575860efa354", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/bd6bc0540f7018ad58b308f7a55b575860efa354", "committedDate": "2020-10-22T16:01:33Z", "message": "Merge remote-tracking branch 'upstream/master' into adjustMqTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6967485ead0d1379446e85f625c1dfb1a0542db5", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/6967485ead0d1379446e85f625c1dfb1a0542db5", "committedDate": "2020-10-26T08:53:48Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTYyNDQ1", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-520162445", "createdAt": "2020-10-29T23:42:17Z", "commit": {"oid": "6967485ead0d1379446e85f625c1dfb1a0542db5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0MjoxOFrOHqycpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0MjoxOFrOHqycpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyODc3Mw==", "bodyText": "I think this equal is incorrect, as it is an object for now.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r514628773", "createdAt": "2020-10-29T23:42:18Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -100,11 +142,11 @@ public boolean equals(Object o) {\n         if (o == null || getClass() != o.getClass())\n             return false;\n         ExtensionContext that = (ExtensionContext) o;\n-        return skipAnalysis == that.skipAnalysis;\n+        return skipAnalysis == that.skipAnalysis && sendingTimestamp == that.sendingTimestamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6967485ead0d1379446e85f625c1dfb1a0542db5"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTY0NzY5", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-520164769", "createdAt": "2020-10-29T23:49:26Z", "commit": {"oid": "6967485ead0d1379446e85f625c1dfb1a0542db5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0OToyNlrOHqyk4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0OToyNlrOHqyk4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMDg4MQ==", "bodyText": "The timestamp of sending at the client side. This is used in async RPC such as MQ. Once it is set, the consumer side would calculate the latency between sending and receiving, and tag it in the span by using key transmission.latency  automatically.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r514630881", "createdAt": "2020-10-29T23:49:26Z", "author": {"login": "wu-sheng"}, "path": "docs/en/protocols/Skywalking-Cross-Process-Propagation-Headers-Protocol-v3.md", "diffHunk": "@@ -43,5 +43,7 @@ The current value includes fields.\n 1. Tracing Mode. empty, 0 or 1. empty or 0 is default. 1 represents all spans generated in this context should skip analysis,\n `spanObject#skipAnalysis=true`. This context should be propagated to upstream in the default, unless it is changed in the \n tracing process.\n+2. The Exit span sending timestamp.  Space is the default. If the downstream timestamp was not space, the latency cost between downstream and upstream services\n+   should be tagged in the entry spans of the upstream services.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6967485ead0d1379446e85f625c1dfb1a0542db5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7849fb96b128e8aa5885fb087abf153156ee6886", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/7849fb96b128e8aa5885fb087abf153156ee6886", "committedDate": "2020-10-30T00:45:38Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de827f7c04ca2b359e8b674c1afa8b86bbfd642e", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/de827f7c04ca2b359e8b674c1afa8b86bbfd642e", "committedDate": "2020-10-31T13:35:29Z", "message": "Merge remote-tracking branch 'upstream/master' into adjustMqTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4788b9575209f646f3bbb030c629d9a8f3d6d1e7", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/4788b9575209f646f3bbb030c629d9a8f3d6d1e7", "committedDate": "2020-10-31T13:37:44Z", "message": "fix doc and bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c8f7d5ae5b48449f17c3182512270b20a3256d0", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/3c8f7d5ae5b48449f17c3182512270b20a3256d0", "committedDate": "2020-10-31T13:43:05Z", "message": "optimize some codes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQwOTM3", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-521140937", "createdAt": "2020-10-31T13:47:25Z", "commit": {"oid": "3c8f7d5ae5b48449f17c3182512270b20a3256d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMzo0NzoyNlrOHrnjuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMzo0NzoyNlrOHrnjuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ5ODkzNg==", "bodyText": "sendingTimestamp may be null?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return skipAnalysis == that.skipAnalysis && sendingTimestamp.equals(that.sendingTimestamp);\n          \n          \n            \n                    return skipAnalysis == that.skipAnalysis && Objects.equals(sendingTimestamp, that.sendingTimestamp);", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r515498936", "createdAt": "2020-10-31T13:47:26Z", "author": {"login": "kezhenxu94"}, "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java", "diffHunk": "@@ -100,11 +143,11 @@ public boolean equals(Object o) {\n         if (o == null || getClass() != o.getClass())\n             return false;\n         ExtensionContext that = (ExtensionContext) o;\n-        return skipAnalysis == that.skipAnalysis;\n+        return skipAnalysis == that.skipAnalysis && sendingTimestamp.equals(that.sendingTimestamp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f7d5ae5b48449f17c3182512270b20a3256d0"}, "originalPosition": 110}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b26de21f57dc57e4569573c87b4eb27a0b6b7374", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/b26de21f57dc57e4569573c87b4eb27a0b6b7374", "committedDate": "2020-10-31T14:00:45Z", "message": "Update apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/ExtensionContext.java\n\nCo-authored-by: kezhenxu94 <kezhenxu94@163.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQyMDgz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-521142083", "createdAt": "2020-10-31T14:05:15Z", "commit": {"oid": "b26de21f57dc57e4569573c87b4eb27a0b6b7374"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxNDowNToxNVrOHrnp-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxNDowNToxNVrOHrnp-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTUwMDUzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            2. The timestamp of sending at the client side. This is used in async RPC such as MQ. Once it is set, the consumer side would calculate the latency between sending and receiving, and tag it in the span by using key transmission.latency automatically.\n          \n          \n            \n            2. The timestamp of sending at the client-side. This is used in async RPC such as MQ. Once it is set, the consumer side would calculate the latency between sending and receiving, and tag the latency in the span by using key `transmission.latency` automatically.", "url": "https://github.com/apache/skywalking/pull/5666#discussion_r515500536", "createdAt": "2020-10-31T14:05:15Z", "author": {"login": "wu-sheng"}, "path": "docs/en/protocols/Skywalking-Cross-Process-Propagation-Headers-Protocol-v3.md", "diffHunk": "@@ -43,5 +43,6 @@ The current value includes fields.\n 1. Tracing Mode. empty, 0 or 1. empty or 0 is default. 1 represents all spans generated in this context should skip analysis,\n `spanObject#skipAnalysis=true`. This context should be propagated to upstream in the default, unless it is changed in the \n tracing process.\n+2. The timestamp of sending at the client side. This is used in async RPC such as MQ. Once it is set, the consumer side would calculate the latency between sending and receiving, and tag it in the span by using key transmission.latency automatically.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b26de21f57dc57e4569573c87b4eb27a0b6b7374"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6632f3ee9d5d501833399fb011d446f77695f51d", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/6632f3ee9d5d501833399fb011d446f77695f51d", "committedDate": "2020-10-31T14:05:19Z", "message": "Update docs/en/protocols/Skywalking-Cross-Process-Propagation-Headers-Protocol-v3.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQyMTk0", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-521142194", "createdAt": "2020-10-31T14:07:02Z", "commit": {"oid": "6632f3ee9d5d501833399fb011d446f77695f51d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQ1MDIz", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-521145023", "createdAt": "2020-10-31T14:50:58Z", "commit": {"oid": "6632f3ee9d5d501833399fb011d446f77695f51d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b3952937c25dd9df9b75005e4042a5b116996f9", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/5b3952937c25dd9df9b75005e4042a5b116996f9", "committedDate": "2020-10-31T15:22:31Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee4c7d0edabbb56afba19603d6dfa054a7dc4b9e", "author": {"user": null}, "url": "https://github.com/apache/skywalking/commit/ee4c7d0edabbb56afba19603d6dfa054a7dc4b9e", "committedDate": "2020-10-31T15:23:40Z", "message": "Merge branch 'adjustMqTimestamp' of https://github.com/EvanLjp/skywalking into adjustMqTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8511b06bab41114d87b1c7d5bbd3532dc5cc8f7d", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/8511b06bab41114d87b1c7d5bbd3532dc5cc8f7d", "committedDate": "2020-10-31T16:01:51Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "325233aff4fd48f4e373e22965fabad39c580a0f", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/325233aff4fd48f4e373e22965fabad39c580a0f", "committedDate": "2020-11-01T01:58:45Z", "message": "Merge branch 'master' into adjustMqTimestamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTg3NzE5", "url": "https://github.com/apache/skywalking/pull/5666#pullrequestreview-521187719", "createdAt": "2020-11-01T02:38:35Z", "commit": {"oid": "325233aff4fd48f4e373e22965fabad39c580a0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1840, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}