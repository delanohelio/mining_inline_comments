{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMTI3MTk2", "number": 5235, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowMDowNFrOEVRS3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDo1NDowOVrOEVoI7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzM4OTA4OnYy", "diffSide": "RIGHT", "path": "docs/en/setup/service-agent/java-agent/README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowMDowNFrOG77V4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowMDowNFrOG77V4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ5MTQyNA==", "bodyText": "What does NB represent?", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r465491424", "createdAt": "2020-08-05T06:00:04Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/service-agent/java-agent/README.md", "diffHunk": "@@ -131,6 +131,8 @@ property key | Description | Default |\n `plugin.tomcat.collect_http_params`| This config item controls that whether the Tomcat plugin should collect the parameters of the request. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.springmvc.collect_http_params`| This config item controls that whether the SpringMVC plugin should collect the parameters of the request, when your Spring application is based on Tomcat, consider only setting either `plugin.tomcat.collect_http_params` or `plugin.springmvc.collect_http_params`. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.http.http_params_length_threshold`| When `COLLECT_HTTP_PARAMS` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete parameters, NB. this config item is added for the sake of performance.  | `1024` |\n+`plugin.feign.trace_params`| This config item controls that whether the Feign plugin should collect the parameters of the request. | `false` |\n+`plugin.feign.filter_length_limit`| When `TRACE_PARAMS` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete parameters, NB. this config item is added for the sake of performance.  | `1024` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzM5MzE1OnYy", "diffSide": "RIGHT", "path": "apm-sniffer/apm-sdk-plugin/feign-default-http-9.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/feign/http/v9/DefaultHttpClientInterceptor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowMTo1MFrOG77YRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzoyNjowMlrOG79g9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ5MjAzOQ==", "bodyText": "This is not just tracking the HTTP parameter, this is tracking the whole request BODY. The config name and document should be adjusted.\nAlso, you should do this based on HTTP request type, an HTTP request could include binary(such as a file), please use the format in the headers to filter the requests.", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r465492039", "createdAt": "2020-08-05T06:01:50Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-sdk-plugin/feign-default-http-9.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/feign/http/v9/DefaultHttpClientInterceptor.java", "diffHunk": "@@ -81,6 +82,16 @@ public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allAr\n         Tags.HTTP.METHOD.set(span, request.method());\n         Tags.URL.set(span, request.url());\n         SpanLayer.asHttp(span);\n+        if (FeignPluginConfig.Plugin.Feign.TRACE_PARAMS) {\n+            if (request.charset() != null && request.body() != null) {\n+                String tagValue = new String(request.body(), request.charset());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUyNzAyOA==", "bodyText": "thank you for your advice . I will try to solve it", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r465527028", "createdAt": "2020-08-05T07:26:02Z", "author": {"login": "zshit"}, "path": "apm-sniffer/apm-sdk-plugin/feign-default-http-9.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/feign/http/v9/DefaultHttpClientInterceptor.java", "diffHunk": "@@ -81,6 +82,16 @@ public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allAr\n         Tags.HTTP.METHOD.set(span, request.method());\n         Tags.URL.set(span, request.url());\n         SpanLayer.asHttp(span);\n+        if (FeignPluginConfig.Plugin.Feign.TRACE_PARAMS) {\n+            if (request.charset() != null && request.body() != null) {\n+                String tagValue = new String(request.body(), request.charset());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ5MjAzOQ=="}, "originalCommit": null, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTEyNzk1OnYy", "diffSide": "RIGHT", "path": "docs/en/setup/service-agent/java-agent/README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDo1MTozMlrOG8fboA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjo1OToxNlrOG8hfkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MjcyMA==", "bodyText": "The default value is incorrect. Is Json the only default option?", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r466082720", "createdAt": "2020-08-06T00:51:32Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/service-agent/java-agent/README.md", "diffHunk": "@@ -131,6 +131,9 @@ property key | Description | Default |\n `plugin.tomcat.collect_http_params`| This config item controls that whether the Tomcat plugin should collect the parameters of the request. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.springmvc.collect_http_params`| This config item controls that whether the SpringMVC plugin should collect the parameters of the request, when your Spring application is based on Tomcat, consider only setting either `plugin.tomcat.collect_http_params` or `plugin.springmvc.collect_http_params`. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.http.http_params_length_threshold`| When `COLLECT_HTTP_PARAMS` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete parameters, NB. this config item is added for the sake of performance.  | `1024` |\n+`plugin.feign.collect_request_body`| This config item controls that whether the Feign plugin should collect the http body of the request. | `false` |\n+`plugin.feign.filter_length_limit`| When `COLLECT_REQUEST_BODY` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete body.  | `1024` |\n+`plugin.feign.supported_content_types_prefix`| When `COLLECT_REQUEST_BODY` is enabled and content-type start with SUPPORTED_CONTENT_TYPES_PREFIX, collect the body of the request , multiple paths should be separated by `,`  | `1024` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c62dc7ff7a447c2d598abd0dc5228680860d9e2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjExMjk5OA==", "bodyText": "default option 'application/json,text/ '  ?", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r466112998", "createdAt": "2020-08-06T02:44:48Z", "author": {"login": "zshit"}, "path": "docs/en/setup/service-agent/java-agent/README.md", "diffHunk": "@@ -131,6 +131,9 @@ property key | Description | Default |\n `plugin.tomcat.collect_http_params`| This config item controls that whether the Tomcat plugin should collect the parameters of the request. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.springmvc.collect_http_params`| This config item controls that whether the SpringMVC plugin should collect the parameters of the request, when your Spring application is based on Tomcat, consider only setting either `plugin.tomcat.collect_http_params` or `plugin.springmvc.collect_http_params`. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.http.http_params_length_threshold`| When `COLLECT_HTTP_PARAMS` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete parameters, NB. this config item is added for the sake of performance.  | `1024` |\n+`plugin.feign.collect_request_body`| This config item controls that whether the Feign plugin should collect the http body of the request. | `false` |\n+`plugin.feign.filter_length_limit`| When `COLLECT_REQUEST_BODY` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete body.  | `1024` |\n+`plugin.feign.supported_content_types_prefix`| When `COLLECT_REQUEST_BODY` is enabled and content-type start with SUPPORTED_CONTENT_TYPES_PREFIX, collect the body of the request , multiple paths should be separated by `,`  | `1024` |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MjcyMA=="}, "originalCommit": {"oid": "5c62dc7ff7a447c2d598abd0dc5228680860d9e2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjExNjQ5OA==", "bodyText": "Personally, I prefer that. Any concern?", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r466116498", "createdAt": "2020-08-06T02:59:16Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/service-agent/java-agent/README.md", "diffHunk": "@@ -131,6 +131,9 @@ property key | Description | Default |\n `plugin.tomcat.collect_http_params`| This config item controls that whether the Tomcat plugin should collect the parameters of the request. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.springmvc.collect_http_params`| This config item controls that whether the SpringMVC plugin should collect the parameters of the request, when your Spring application is based on Tomcat, consider only setting either `plugin.tomcat.collect_http_params` or `plugin.springmvc.collect_http_params`. Also, activate implicitly in the profiled trace. | `false` |\n `plugin.http.http_params_length_threshold`| When `COLLECT_HTTP_PARAMS` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete parameters, NB. this config item is added for the sake of performance.  | `1024` |\n+`plugin.feign.collect_request_body`| This config item controls that whether the Feign plugin should collect the http body of the request. | `false` |\n+`plugin.feign.filter_length_limit`| When `COLLECT_REQUEST_BODY` is enabled, how many characters to keep and send to the OAP backend, use negative values to keep and send the complete body.  | `1024` |\n+`plugin.feign.supported_content_types_prefix`| When `COLLECT_REQUEST_BODY` is enabled and content-type start with SUPPORTED_CONTENT_TYPES_PREFIX, collect the body of the request , multiple paths should be separated by `,`  | `1024` |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MjcyMA=="}, "originalCommit": {"oid": "5c62dc7ff7a447c2d598abd0dc5228680860d9e2"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTEzMTk4OnYy", "diffSide": "RIGHT", "path": "test/plugin/scenarios/feign-scenario/src/main/java/org/apache/skywalking/apm/testcase/feign/controller/RestRequest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDo1NDowOVrOG8feGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDo1NDowOVrOG8feGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA4MzM1NQ==", "bodyText": "text/plain should be supported, right?", "url": "https://github.com/apache/skywalking/pull/5235#discussion_r466083355", "createdAt": "2020-08-06T00:54:09Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/feign-scenario/src/main/java/org/apache/skywalking/apm/testcase/feign/controller/RestRequest.java", "diffHunk": "@@ -43,6 +43,11 @@\n     @Body(\"%7B\\\"id\\\": \\\"{id}\\\", \\\"userName\\\": \\\"{userName}\\\"%7D\")\n     User updateUser(@Param(\"id\") int id, @Param(\"userName\") String userName);\n \n+    @RequestLine(\"PUT /modify/{id}\")\n+    @Headers(\"Content-Type: text/plain\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c62dc7ff7a447c2d598abd0dc5228680860d9e2"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4914, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}