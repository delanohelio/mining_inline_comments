{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTg0ODk2", "number": 4161, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwODo1NjoyOVrODVZwkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwOTozOTozMVrODVaN-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzY4NzIwOnYy", "diffSide": "RIGHT", "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwODo1NjoyOVrOFZnUig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwOToyMDoxN1rOFZnqsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA==", "bodyText": "If you want this too, you miss some codes change in the configuration model. Your changes are only related to cluster model.", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362402954", "createdAt": "2020-01-02T08:56:29Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwNDUzNA==", "bodyText": "\u662f\u4e0d\u7528\u6539\u8fd9\u4e2a\u6587\u4ef6\u4e48\uff1f", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362404534", "createdAt": "2020-01-02T09:04:09Z", "author": {"login": "web-xiaxia"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwODAzNQ==", "bodyText": "English, please. You are changing two places, one is cluster model, the other is configuration model. Both of them have Consul implementations, but they are totally different.", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362408035", "createdAt": "2020-01-02T09:17:44Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwODYyNg==", "bodyText": "configuration model  and cluster model  have changed", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362408626", "createdAt": "2020-01-02T09:20:17Z", "author": {"login": "web-xiaxia"}, "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzNzc2MjQ4OnYy", "diffSide": "RIGHT", "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQwOTozOTozMVrOFZn-BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxMTowMToxOVrOFZpXmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg==", "bodyText": "Why do not you use !Strings.isNullOrEmpty(config.getAclToken())? I think that it is more readable.", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362413572", "createdAt": "2020-01-02T09:39:31Z", "author": {"login": "dmsolr"}, "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "diffHunk": "@@ -76,6 +76,10 @@ public ClusterModuleConsulProvider() {\n //                    we should set this value or it will be blocked forever\n                     .withConnectTimeoutMillis(3000);\n \n+            if (config.getAclToken() != null && !config.getAclToken().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQyNTc4Ng==", "bodyText": "@web-xiaxia this should be fixed", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362425786", "createdAt": "2020-01-02T10:21:41Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "diffHunk": "@@ -76,6 +76,10 @@ public ClusterModuleConsulProvider() {\n //                    we should set this value or it will be blocked forever\n                     .withConnectTimeoutMillis(3000);\n \n+            if (config.getAclToken() != null && !config.getAclToken().isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg=="}, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQzNjUwNg==", "bodyText": "Replacement completed", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362436506", "createdAt": "2020-01-02T11:01:19Z", "author": {"login": "web-xiaxia"}, "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "diffHunk": "@@ -76,6 +76,10 @@ public ClusterModuleConsulProvider() {\n //                    we should set this value or it will be blocked forever\n                     .withConnectTimeoutMillis(3000);\n \n+            if (config.getAclToken() != null && !config.getAclToken().isEmpty()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg=="}, "originalCommit": {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4599, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}