{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MTAxODY4", "number": 5153, "title": "Support Apache ShardingSphere-Elasticjob", "bodyText": "Please answer these questions before submitting pull request\n\n\nWhy submit this pull request?\n\n\n Bug fix\n\n\n New feature provided\n\n\n Improve performance\n\n\nRelated issues\n#5152\n\n\n\nNew feature or improvement\n\nI will finish at elastic-job 3.0.0-alpha publish", "createdAt": "2020-07-22T12:56:54Z", "url": "https://github.com/apache/skywalking/pull/5153", "merged": true, "mergeCommit": {"oid": "69297b9ec624282156e59fd5bb3476805666e5c4"}, "closed": true, "closedAt": "2020-08-10T02:48:24Z", "author": {"login": "zhaoyuguang"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3aV7aAH2gAyNDU1MTAxODY4OmU1NzVjMmU3ZmZjMDU0ZGFhM2VkM2E5MDYzNTRmYjJlMzJiNTliNDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9ZDcXgFqTQ2MzkzNTI0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e575c2e7ffc054daa3ed3a906354fb2e32b59b49", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/e575c2e7ffc054daa3ed3a906354fb2e32b59b49", "committedDate": "2020-07-22T12:53:24Z", "message": "tmp commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd2113f79ff07f65521d67cc997bd47f4e59ed2", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/dcd2113f79ff07f65521d67cc997bd47f4e59ed2", "committedDate": "2020-07-22T13:37:09Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "728ebe8ae94fd056524f5da9d9b07f5944cd972b", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/728ebe8ae94fd056524f5da9d9b07f5944cd972b", "committedDate": "2020-07-22T13:44:07Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b072c9507d724b18fa80bef2d3e2765acf4af6bf", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/b072c9507d724b18fa80bef2d3e2765acf4af6bf", "committedDate": "2020-07-23T01:59:10Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b398dd28d0aad530ef62cdcacebc8291254e6812", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/b398dd28d0aad530ef62cdcacebc8291254e6812", "committedDate": "2020-07-24T09:59:56Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28731aee7dc61dfe502cde62e24dc3ce67e89035", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/28731aee7dc61dfe502cde62e24dc3ce67e89035", "committedDate": "2020-07-24T10:03:28Z", "message": "Merge branch 'zhaoyuguang_0001' of https://github.com/zhaoyuguang/incubator-skywalking into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e897d98cc7666ee0b754fe13d53cff187b00451f", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/e897d98cc7666ee0b754fe13d53cff187b00451f", "committedDate": "2020-07-25T12:14:50Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc0c86dd08b5ef4d7d54803fc8ab459b820e482e", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/fc0c86dd08b5ef4d7d54803fc8ab459b820e482e", "committedDate": "2020-07-25T12:15:38Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab1f73229a0317cdb9c5b6bbd72fcf7d7235600", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/7ab1f73229a0317cdb9c5b6bbd72fcf7d7235600", "committedDate": "2020-07-27T05:12:32Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd901447b89f79e650f9fb7cdb917667efbf98ee", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/bd901447b89f79e650f9fb7cdb917667efbf98ee", "committedDate": "2020-07-27T05:15:04Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b935c051353cc7975660c8c5a70d45897be269", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/55b935c051353cc7975660c8c5a70d45897be269", "committedDate": "2020-07-28T05:09:29Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7eca2cdd40906307cd50f27f599bf8e12ebfc27", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/c7eca2cdd40906307cd50f27f599bf8e12ebfc27", "committedDate": "2020-08-04T06:07:40Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNjEwOTI3", "url": "https://github.com/apache/skywalking/pull/5153#pullrequestreview-460610927", "createdAt": "2020-08-04T08:38:11Z", "commit": {"oid": "c7eca2cdd40906307cd50f27f599bf8e12ebfc27"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwODozODoxMVrOG7WyTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwODozODoxMVrOG7WyTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg5MjQ5Mg==", "bodyText": "Sorry, Apache Elastic Job? Maybe Apache ShardingSphere-Elasticjob is better?", "url": "https://github.com/apache/skywalking/pull/5153#discussion_r464892492", "createdAt": "2020-08-04T08:38:11Z", "author": {"login": "tristaZero"}, "path": "docs/en/setup/service-agent/java-agent/Supported-list.md", "diffHunk": "@@ -81,6 +81,7 @@\n * [Hystrix: Latency and Fault Tolerance for Distributed Systems](https://github.com/Netflix/Hystrix) 1.4.20 -> 1.5.12\n * Scheduler\n   * [Elastic Job](https://github.com/elasticjob/elastic-job) 2.x\n+  * [Apache Elastic Job](https://github.com/apache/shardingsphere-elasticjob) 3.0.0-alpha", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7eca2cdd40906307cd50f27f599bf8e12ebfc27"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "158e06e5e75e407518c12a77a40c9e2e5d5f8a8a", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/158e06e5e75e407518c12a77a40c9e2e5d5f8a8a", "committedDate": "2020-08-04T13:02:34Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "221ea2bb92a302f1f851173dd454e20a8d165d71", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/221ea2bb92a302f1f851173dd454e20a8d165d71", "committedDate": "2020-08-04T13:05:37Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c0c71005c8505f7e964ba05e1ad289766cba6b", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/c8c0c71005c8505f7e964ba05e1ad289766cba6b", "committedDate": "2020-08-08T06:18:50Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e724a3c2b59e992051a22423fd3bc660c5c8bd10", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/e724a3c2b59e992051a22423fd3bc660c5c8bd10", "committedDate": "2020-08-08T07:20:15Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5fa69d422b8ec2938784489f6dd8c9a3fffdbb0", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/d5fa69d422b8ec2938784489f6dd8c9a3fffdbb0", "committedDate": "2020-08-08T07:24:43Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a75beda4babb4c7cc5fd78948c3bbc3fa8f7d115", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/a75beda4babb4c7cc5fd78948c3bbc3fa8f7d115", "committedDate": "2020-08-08T07:28:17Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ec349417d241dff5cc3eefdc3e39d13b96f6485", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/0ec349417d241dff5cc3eefdc3e39d13b96f6485", "committedDate": "2020-08-08T07:46:11Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b270db1db4360e3c961ba9000ea8a70f93178fc", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/8b270db1db4360e3c961ba9000ea8a70f93178fc", "committedDate": "2020-08-08T08:14:58Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37c586e6de013297d5bb02b2b4a663ef03917fd2", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/37c586e6de013297d5bb02b2b4a663ef03917fd2", "committedDate": "2020-08-08T08:15:27Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82d1e64a5e820af7a87071d0a3ec475a1a319b3d", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/82d1e64a5e820af7a87071d0a3ec475a1a319b3d", "committedDate": "2020-08-08T08:39:39Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3329c246d071d1b13735040b16b1dd8385a48ae", "author": {"user": {"login": "zhaoyuguang", "name": "\u4e8e\u7389\u6854"}}, "url": "https://github.com/apache/skywalking/commit/a3329c246d071d1b13735040b16b1dd8385a48ae", "committedDate": "2020-08-08T08:39:56Z", "message": "Merge branch 'zhaoyuguang_0001' of https://github.com/zhaoyuguang/incubator-skywalking into zhaoyuguang_0001"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/58669023a04c0a7c4f8dbaa68da41bc8292a10bc", "committedDate": "2020-08-10T00:44:20Z", "message": "Merge branch 'master' into zhaoyuguang_0001"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTIwMjMz", "url": "https://github.com/apache/skywalking/pull/5153#pullrequestreview-463920233", "createdAt": "2020-08-10T00:46:41Z", "commit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMDo0Njo0MVrOG9_Haw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMDo0Njo0MVrOG9_Haw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1MDQxMQ==", "bodyText": "@tristaZero Could you check whether these are recommended and important messages for the elastic job users? Any thing more?", "url": "https://github.com/apache/skywalking/pull/5153#discussion_r467650411", "createdAt": "2020-08-10T00:46:41Z", "author": {"login": "wu-sheng"}, "path": "test/plugin/scenarios/elasticjob-3.x-scenario/config/expectedData.yaml", "diffHunk": "@@ -0,0 +1,53 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+segmentItems:\n+- serviceName: elasticjob-3.x-scenario\n+  segmentSize: ge 2\n+  segments:\n+  - segmentId: not null\n+    spans:\n+    - operationName: /elasticjob-3.x-scenario/case/ping\n+      operationId: 0\n+      parentSpanId: 0\n+      spanId: 1\n+      spanLayer: Http\n+      startTime: not null\n+      endTime: not null\n+      componentId: 12\n+      isError: false\n+      spanType: Exit\n+      peer: localhost:8080\n+      skipAnalysis: false\n+      tags:\n+        - {key: http.method, value: GET}\n+        - {key: url, value: 'http://localhost:8080/elasticjob-3.x-scenario/case/ping'}\n+    - operationName: ElasticJob/simpleJob\n+      operationId: 0\n+      parentSpanId: -1\n+      spanId: 0\n+      spanLayer: Unknown\n+      startTime: not null\n+      endTime: not null\n+      componentId: 24\n+      isError: false\n+      spanType: Entry\n+      peer: ''\n+      skipAnalysis: false\n+      tags:\n+        - {key: item, value: '0'}\n+        - {key: shardingTotalCount, value: '1'}\n+        - {key: taskId, value: not null}\n+        - {key: shardingItemParameters, value: '{0=Beijing}'}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTIwMjcw", "url": "https://github.com/apache/skywalking/pull/5153#pullrequestreview-463920270", "createdAt": "2020-08-10T00:47:06Z", "commit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMDo0NzowNlrOG9_Hmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMDo0NzowNlrOG9_Hmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1MDQ1OQ==", "bodyText": "@zhaoyuguang Tag key should be added as a constant in the plugin.", "url": "https://github.com/apache/skywalking/pull/5153#discussion_r467650459", "createdAt": "2020-08-10T00:47:06Z", "author": {"login": "wu-sheng"}, "path": "apm-sniffer/apm-sdk-plugin/elastic-job-3.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/elasticjob/ElasticJobExecutorInterceptor.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.elasticjob;\n+\n+import org.apache.shardingsphere.elasticjob.api.listener.ShardingContexts;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+\n+import java.lang.reflect.Method;\n+\n+public class ElasticJobExecutorInterceptor implements InstanceMethodsAroundInterceptor {\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes,\n+                             MethodInterceptResult result) throws Throwable {\n+        ShardingContexts shardingContexts = (ShardingContexts) allArguments[0];\n+        Integer item = (Integer) allArguments[1];\n+        String operateName = ComponentsDefine.ELASTIC_JOB.getName() + \"/\" + shardingContexts.getJobName();\n+        AbstractSpan span = ContextManager.createEntrySpan(operateName, new ContextCarrier());\n+        span.setComponent(ComponentsDefine.ELASTIC_JOB);\n+        span.tag(\"item\", item == null ? \"\" : String.valueOf(item));\n+        span.tag(\"shardingTotalCount\", Integer.toString(shardingContexts.getShardingTotalCount()));\n+        span.tag(\"taskId\", shardingContexts.getTaskId());\n+        span.tag(\"shardingItemParameters\", shardingContexts.getShardingItemParameters() == null ? \"\" : shardingContexts.getShardingItemParameters().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTIxNzYy", "url": "https://github.com/apache/skywalking/pull/5153#pullrequestreview-463921762", "createdAt": "2020-08-10T01:01:32Z", "commit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTM1MjQ1", "url": "https://github.com/apache/skywalking/pull/5153#pullrequestreview-463935245", "createdAt": "2020-08-10T02:46:29Z", "commit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjo0NjoyOVrOG-AGJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjo0NjoyOVrOG-AGJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY2NjQ3MQ==", "bodyText": "Hi @wu-sheng It seems these tags come from ShardingContexts, which is a necessary job context for users. I am not familiar with what content skyWalking needs for its plugin, but if it wants to get core job information, I think it is enough. :)", "url": "https://github.com/apache/skywalking/pull/5153#discussion_r467666471", "createdAt": "2020-08-10T02:46:29Z", "author": {"login": "tristaZero"}, "path": "apm-sniffer/apm-sdk-plugin/elastic-job-3.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/elasticjob/ElasticJobExecutorInterceptor.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.plugin.elasticjob;\n+\n+import org.apache.shardingsphere.elasticjob.api.listener.ShardingContexts;\n+import org.apache.skywalking.apm.agent.core.context.ContextCarrier;\n+import org.apache.skywalking.apm.agent.core.context.ContextManager;\n+import org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.EnhancedInstance;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstanceMethodsAroundInterceptor;\n+import org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.MethodInterceptResult;\n+import org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\n+\n+import java.lang.reflect.Method;\n+\n+public class ElasticJobExecutorInterceptor implements InstanceMethodsAroundInterceptor {\n+    @Override\n+    public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class<?>[] argumentsTypes,\n+                             MethodInterceptResult result) throws Throwable {\n+        ShardingContexts shardingContexts = (ShardingContexts) allArguments[0];\n+        Integer item = (Integer) allArguments[1];\n+        String operateName = ComponentsDefine.ELASTIC_JOB.getName() + \"/\" + shardingContexts.getJobName();\n+        AbstractSpan span = ContextManager.createEntrySpan(operateName, new ContextCarrier());\n+        span.setComponent(ComponentsDefine.ELASTIC_JOB);\n+        span.tag(\"item\", item == null ? \"\" : String.valueOf(item));\n+        span.tag(\"shardingTotalCount\", Integer.toString(shardingContexts.getShardingTotalCount()));\n+        span.tag(\"taskId\", shardingContexts.getTaskId());\n+        span.tag(\"shardingItemParameters\", shardingContexts.getShardingItemParameters() == null ? \"\" : shardingContexts.getShardingItemParameters().toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1MDQ1OQ=="}, "originalCommit": {"oid": "58669023a04c0a7c4f8dbaa68da41bc8292a10bc"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2118, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}