{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NDY3NDYx", "number": 4470, "title": "Enable OAP gRPC SSL transportation", "bodyText": "Porting to OpenSSL to enable SSL transportation. The server private\nkey is in the format of PCKS#8, certificates is x509 though.\nSigned-off-by: Gao Hongtao hanahmily@gmail.com", "createdAt": "2020-03-09T09:14:50Z", "url": "https://github.com/apache/skywalking/pull/4470", "merged": true, "mergeCommit": {"oid": "78d14ebbd6a62f3b90cf7e60d6d1c719754fadeb"}, "closed": true, "closedAt": "2020-03-15T00:15:30Z", "author": {"login": "hanahmily"}, "timelineItems": {"totalCount": 59, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL6MbVgH2gAyMzg1NDY3NDYxOjE1NjE5NmRkOGVmM2VmNDMyZjhlODQ5YTlmODI4ZTIzNWE2YTliODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNlHZiAFqTM3NDcyODAzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "156196dd8ef3ef432f8e849a9f828e235a6a9b82", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/156196dd8ef3ef432f8e849a9f828e235a6a9b82", "committedDate": "2020-03-09T09:07:19Z", "message": "Enable OAP gRPC SSL transportation\n\nPorting to OpenSSL to enable SSL transportation. The server private\nkey is in the format of PCKS#8, certificates is x509 though.\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52764bf5577f35691894a397155f569a297f2d68", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/52764bf5577f35691894a397155f569a297f2d68", "committedDate": "2020-03-09T09:15:17Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDM4MjMw", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-371038230", "createdAt": "2020-03-09T10:03:14Z", "commit": {"oid": "52764bf5577f35691894a397155f569a297f2d68"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd44c374665a7fde124a62f312cac126ce1b84d6", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/dd44c374665a7fde124a62f312cac126ce1b84d6", "committedDate": "2020-03-09T10:15:22Z", "message": "Add netty-tcnative-boringssl-static 2.0.26 licnese\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fe58ddaad0a92e060776c65a2f69e0556800904", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/8fe58ddaad0a92e060776c65a2f69e0556800904", "committedDate": "2020-03-09T10:16:25Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDU5NjM3", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-371059637", "createdAt": "2020-03-09T10:37:18Z", "commit": {"oid": "8fe58ddaad0a92e060776c65a2f69e0556800904"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMDozNzoxOFrOFziCJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMDozNzo1MlrOFziDQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU3OTMwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #Support gRPC SSL transportation for OAP server\n          \n          \n            \n            # Support gRPC SSL transportation for OAP server", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r389579300", "createdAt": "2020-03-09T10:37:18Z", "author": {"login": "kezhenxu94"}, "path": "docs/en/setup/backend/grpc-ssl.md", "diffHunk": "@@ -0,0 +1,33 @@\n+#Support gRPC SSL transportation for OAP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fe58ddaad0a92e060776c65a2f69e0556800904"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU3OTU4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            exchanges. Now OAP support to enable SSL transportation for gRPC receivers.\n          \n          \n            \n            exchanges. Now OAP supports to enable SSL transportation for gRPC receivers.", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r389579586", "createdAt": "2020-03-09T10:37:52Z", "author": {"login": "kezhenxu94"}, "path": "docs/en/setup/backend/grpc-ssl.md", "diffHunk": "@@ -0,0 +1,33 @@\n+#Support gRPC SSL transportation for OAP server\n+\n+For OAP communication we are currently using gRPC, a multi-platform RPC framework that uses protocol buffers for\n+message serialization. The nice part about gRPC is that it promotes the use of SSL/TLS to authenticate and encrypt\n+exchanges. Now OAP support to enable SSL transportation for gRPC receivers.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fe58ddaad0a92e060776c65a2f69e0556800904"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTMyOTU0", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-371132954", "createdAt": "2020-03-09T12:49:05Z", "commit": {"oid": "8fe58ddaad0a92e060776c65a2f69e0556800904"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c7e837bb53a6754c8824d46fff2fa0a9ff48808", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/3c7e837bb53a6754c8824d46fff2fa0a9ff48808", "committedDate": "2020-03-09T12:50:16Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afcd4443ed44bb989703e9eb6e89ecb46e3a22c6", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/afcd4443ed44bb989703e9eb6e89ecb46e3a22c6", "committedDate": "2020-03-09T14:29:24Z", "message": "Update docs/en/setup/backend/grpc-ssl.md\n\nCo-Authored-By: kezhenxu94 <kezhenxu94@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4994b152ef3767bbed7d8974925a83937f329b4", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/f4994b152ef3767bbed7d8974925a83937f329b4", "committedDate": "2020-03-09T14:29:35Z", "message": "Update docs/en/setup/backend/grpc-ssl.md\n\nCo-Authored-By: kezhenxu94 <kezhenxu94@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMjk2Nzky", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-371296792", "createdAt": "2020-03-09T15:42:43Z", "commit": {"oid": "f4994b152ef3767bbed7d8974925a83937f329b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxNTo0Mjo0M1rOFzuFFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxNTo0Mjo0M1rOFzuFFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc3NjY2MQ==", "bodyText": "This linked file should be updated too, to keep consistently", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r389776661", "createdAt": "2020-03-09T15:42:43Z", "author": {"login": "wu-sheng"}, "path": "docs/en/setup/backend/grpc-ssl.md", "diffHunk": "@@ -0,0 +1,32 @@\n+# Support gRPC SSL transportation for OAP server\n+\n+For OAP communication we are currently using gRPC, a multi-platform RPC framework that uses protocol buffers for\n+message serialization. The nice part about gRPC is that it promotes the use of SSL/TLS to authenticate and encrypt\n+exchanges. Now OAP supports to enable SSL transportation for gRPC receivers.\n+\n+You can follow below steps to enable this feature\n+\n+## Creating SSL/TLS Certificates\n+\n+It seems like step one is to generate certificates and key files for encrypting communication. I thought this would be\n+fairly straightforward using `openssl` from the command line, However, it may be simpler to use\n+[certstrap](https://github.com/square/certstrap), a simple certificate manager written in Go by the folks at Square.\n+The app avoids dealing with `openssl`, but has a very simple workflow: create a certificate authority, sign certificates\n+with it.\n+\n+After signing the certificates of OAP server, we should convert private key to a PKCS8 format before placing it into the host.\n+\n+```\n+$ openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in server.key -out server-key.pem\n+```\n+\n+## Config OAP server \n+\n+You can enable gRPC SSL by add following lines to `application.yml/core/default`.\n+```json\n+gRPCSslEnabled: true\n+gRPCSslKeyPath: /path/to/server-key.pem\n+gRPCSslCertChainPath: /path/to/server.crt\n+```\n+\n+If you port to java agent, refer to [TLS.md](../service-agent/java-agent/TLS.md) to config java agent to enable TLS.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4994b152ef3767bbed7d8974925a83937f329b4"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "590cfdbd342a40f7f9752837b2fe058d4124997a", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/590cfdbd342a40f7f9752837b2fe058d4124997a", "committedDate": "2020-03-10T00:00:23Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d61abf2c3a7a70a7f0ac812ff568d731a6f3823b", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/d61abf2c3a7a70a7f0ac812ff568d731a6f3823b", "committedDate": "2020-03-10T06:34:07Z", "message": "Add SSL to grpc remote client and sharing server\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ab4a2ebf7abfd58fba74504f20d6492e621ba13", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/9ab4a2ebf7abfd58fba74504f20d6492e621ba13", "committedDate": "2020-03-10T06:34:24Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d1192c9655a952dfea487b8ac49d8aecb7439e", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/c6d1192c9655a952dfea487b8ac49d8aecb7439e", "committedDate": "2020-03-10T06:57:40Z", "message": "Update documents\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b16f36b19987df81de07463bc1e62eb10e9d7f6", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/4b16f36b19987df81de07463bc1e62eb10e9d7f6", "committedDate": "2020-03-10T07:02:44Z", "message": "Fix nits\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae97361e371108b7bdfbf32d470a1277812ba9f0", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/ae97361e371108b7bdfbf32d470a1277812ba9f0", "committedDate": "2020-03-10T14:07:47Z", "message": "Fix test case\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "771233179d01f83a3e980de3418ea35a1e23a447", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/771233179d01f83a3e980de3418ea35a1e23a447", "committedDate": "2020-03-10T08:52:47Z", "message": "Fix test case\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}, "afterCommit": {"oid": "ae97361e371108b7bdfbf32d470a1277812ba9f0", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/ae97361e371108b7bdfbf32d470a1277812ba9f0", "committedDate": "2020-03-10T14:07:47Z", "message": "Fix test case\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83f5ad24198f38692983fa6b701f73a2c7378eae", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/83f5ad24198f38692983fa6b701f73a2c7378eae", "committedDate": "2020-03-10T14:32:55Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b389af09396c0a6694576c63c4864d6fa2e44a", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/13b389af09396c0a6694576c63c4864d6fa2e44a", "committedDate": "2020-03-10T15:12:36Z", "message": "Add e2e-ssl and remove other test cases temporarily\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8019a9933a4ba612057c4be0669ca58f361b69c8", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/8019a9933a4ba612057c4be0669ca58f361b69c8", "committedDate": "2020-03-10T15:13:52Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd6b9510074675478bf0a6d136206371c0339ce0", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/bd6b9510074675478bf0a6d136206371c0339ce0", "committedDate": "2020-03-11T04:40:40Z", "message": "Add TLS relevant files\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c0dc172232addee17501fc4a048c363b96ad97", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/e3c0dc172232addee17501fc4a048c363b96ad97", "committedDate": "2020-03-11T05:00:58Z", "message": "Decrease timeout\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da893402b5f451abd973077079740d77b859fd15", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/da893402b5f451abd973077079740d77b859fd15", "committedDate": "2020-03-11T06:18:25Z", "message": "Test config works\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "da893402b5f451abd973077079740d77b859fd15", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/da893402b5f451abd973077079740d77b859fd15", "committedDate": "2020-03-11T06:18:25Z", "message": "Test config works\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26501fe87dab026a3353a779081c2b2574bfcf1e", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/26501fe87dab026a3353a779081c2b2574bfcf1e", "committedDate": "2020-03-11T06:23:44Z", "message": "triger CI on oap-ssl branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad735b280530aa4872eb51394a10d808e01ff447", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/ad735b280530aa4872eb51394a10d808e01ff447", "committedDate": "2020-03-11T06:39:53Z", "message": "Disable agent ca\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e461b57cb6bf7aade5aede33684b51bfec34442", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/7e461b57cb6bf7aade5aede33684b51bfec34442", "committedDate": "2020-03-11T09:26:06Z", "message": "Switch to sharing server\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7e461b57cb6bf7aade5aede33684b51bfec34442", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/7e461b57cb6bf7aade5aede33684b51bfec34442", "committedDate": "2020-03-11T09:26:06Z", "message": "Switch to sharing server\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c06d6b391e1b3c02061bb08f449c3e89cd7695", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/d5c06d6b391e1b3c02061bb08f449c3e89cd7695", "committedDate": "2020-03-12T01:19:22Z", "message": "Add agent log to console\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "9a25e400fcc0c3740d9c5e3620e07f917fa63b93", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/9a25e400fcc0c3740d9c5e3620e07f917fa63b93", "committedDate": "2020-03-12T04:34:13Z", "message": "Upload log files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a25e400fcc0c3740d9c5e3620e07f917fa63b93", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/9a25e400fcc0c3740d9c5e3620e07f917fa63b93", "committedDate": "2020-03-12T04:34:13Z", "message": "Upload log files"}, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f2abc18966fa7fdeb288f702e58513a1b4bdcfa", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/6f2abc18966fa7fdeb288f702e58513a1b4bdcfa", "committedDate": "2020-03-13T02:42:18Z", "message": "Upload log files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "6f2abc18966fa7fdeb288f702e58513a1b4bdcfa", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/6f2abc18966fa7fdeb288f702e58513a1b4bdcfa", "committedDate": "2020-03-13T02:42:18Z", "message": "Upload log files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a085711e3653d3bf642aa84f73650e22595e383", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/7a085711e3653d3bf642aa84f73650e22595e383", "committedDate": "2020-03-13T03:12:18Z", "message": "Change backend\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d98d2424f0c5b3fef3cc04fc48b3cc2ff493f609", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/d98d2424f0c5b3fef3cc04fc48b3cc2ff493f609", "committedDate": "2020-03-13T03:13:00Z", "message": "Revert \"Change backend\"\n\nThis reverts commit 7a085711e3653d3bf642aa84f73650e22595e383."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f6974ab946f58f07eb821c2fe085b7895a30ffb", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/1f6974ab946f58f07eb821c2fe085b7895a30ffb", "committedDate": "2020-03-13T03:16:26Z", "message": "Update backend\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44f7667561b205afea0aea1e26dc4add993fe625", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/44f7667561b205afea0aea1e26dc4add993fe625", "committedDate": "2020-03-13T03:40:11Z", "message": "Revert e2e\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd7301f1e040618e4dc7f0f3d066f97458e97961", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/fd7301f1e040618e4dc7f0f3d066f97458e97961", "committedDate": "2020-03-13T03:41:28Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "262548404374557cbef14c3397db75b778bc27f9", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/262548404374557cbef14c3397db75b778bc27f9", "committedDate": "2020-03-13T04:25:30Z", "message": "Ignore TSL relevant files\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/262548404374557cbef14c3397db75b778bc27f9", "committedDate": "2020-03-13T04:25:30Z", "message": "Ignore TSL relevant files\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDc1MjY0", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-374075264", "createdAt": "2020-03-13T06:36:03Z", "commit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNjozNjowNFrOF14-Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNjo0MDoxOVrOF15CMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MjIzNA==", "bodyText": "Could you make the core style consistently. GRPCRemoteClient client use two constructors for ssl ON/OFF, here using a boolean and empty/null string.", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r392052234", "createdAt": "2020-03-13T06:36:04Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/remote/client/RemoteClientManager.java", "diffHunk": "@@ -55,21 +59,29 @@\n     private static final Logger logger = LoggerFactory.getLogger(RemoteClientManager.class);\n \n     private final ModuleDefineHolder moduleDefineHolder;\n+    private final boolean grpcSslEnabled;\n+    private final String grpcSslTrustCAPath;\n     private ClusterNodesQuery clusterNodesQuery;\n     private volatile List<RemoteClient> usingClients;\n     private GaugeMetrics gauge;\n     private int remoteTimeout;\n \n     /**\n      * Initial the manager for all remote communication clients.\n-     *\n-     * @param moduleDefineHolder for looking up other modules\n+     *  @param moduleDefineHolder for looking up other modules\n      * @param remoteTimeout      for cluster internal communication, in second unit.\n+     * @param grpcSslEnabled true: enable SSL between clusters, false: plain gRPC between the cluster.\n+     * @param grpcSslTrustCAPath trust certificate authorities file path.\n      */\n-    public RemoteClientManager(ModuleDefineHolder moduleDefineHolder, int remoteTimeout) {\n+    public RemoteClientManager(ModuleDefineHolder moduleDefineHolder,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MjM4NQ==", "bodyText": "A similar code style inconsistent here, using sslContext==null represents no SSL.", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r392052385", "createdAt": "2020-03-13T06:36:39Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/remote/client/GRPCRemoteClient.java", "diffHunk": "@@ -99,7 +110,7 @@ GRPCClient getClient() {\n         if (Objects.isNull(client)) {\n             synchronized (GRPCRemoteClient.class) {\n                 if (Objects.isNull(client)) {\n-                    this.client = new GRPCClient(address.getHost(), address.getPort());\n+                    this.client = new GRPCClient(address.getHost(), address.getPort(), sslContext);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MjgzNw==", "bodyText": "I think you miss the deletion of this?", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r392052837", "createdAt": "2020-03-13T06:38:34Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-receiver-plugin/skywalking-sharing-server-plugin/src/main/java/org/apache/skywalking/oap/server/receiver/sharing/server/SharingServerModuleProvider.java", "diffHunk": "@@ -80,6 +81,15 @@ public void prepare() {\n         if (config.getGRPCPort() != 0) {\n             grpcServer = new GRPCServer(Strings.isBlank(config.getGRPCHost()) ? \"0.0.0.0\" : config.getGRPCHost(), config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MzEwNA==", "bodyText": "I think this should not be uploaded? Why git ignore is not working for this?", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r392053104", "createdAt": "2020-03-13T06:39:39Z", "author": {"login": "wu-sheng"}, "path": "test/e2e/e2e-ssl/e2e-ssl.iml", "diffHunk": "@@ -0,0 +1,120 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MzI5Nw==", "bodyText": "Are these cert files alway valid? No expired time?", "url": "https://github.com/apache/skywalking/pull/4470#discussion_r392053297", "createdAt": "2020-03-13T06:40:19Z", "author": {"login": "wu-sheng"}, "path": "test/e2e/e2e-ssl/src/docker/certs/server-key.pem", "diffHunk": "@@ -0,0 +1,28 @@\n+-----BEGIN PRIVATE KEY-----", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "262548404374557cbef14c3397db75b778bc27f9"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "65cb79d840a5b3b280f080a71942b501816dd7df", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/65cb79d840a5b3b280f080a71942b501816dd7df", "committedDate": "2020-03-13T11:05:34Z", "message": "Polish codes\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dad85283585acbe9a5eb51056791917d099c307", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/4dad85283585acbe9a5eb51056791917d099c307", "committedDate": "2020-03-13T11:43:44Z", "message": "Polish codes\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "049fc81b2363da7a307d335a6998ae0d9471c272", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/049fc81b2363da7a307d335a6998ae0d9471c272", "committedDate": "2020-03-13T11:06:47Z", "message": "Merge branch 'master' into oap-ssl"}, "afterCommit": {"oid": "4dad85283585acbe9a5eb51056791917d099c307", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/4dad85283585acbe9a5eb51056791917d099c307", "committedDate": "2020-03-13T11:43:44Z", "message": "Polish codes\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e04dfc69fadeeb314baf1986155d9f744bd4120", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/1e04dfc69fadeeb314baf1986155d9f744bd4120", "committedDate": "2020-03-13T14:09:19Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e44a7e9c1b3a92af1281ec75643930fdb181efca", "author": {"user": {"login": "wu-sheng", "name": "\u5434\u665f Wu Sheng"}}, "url": "https://github.com/apache/skywalking/commit/e44a7e9c1b3a92af1281ec75643930fdb181efca", "committedDate": "2020-03-13T15:17:13Z", "message": "Merge branch 'master' into oap-ssl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2891e7c11a60c21ddb7a7ad07361842424e67fea", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/2891e7c11a60c21ddb7a7ad07361842424e67fea", "committedDate": "2020-03-14T11:14:23Z", "message": "Update certificates expires year to 2120\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d370b303ebedbe7a1b937185c34e86d5a762ba27", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/d370b303ebedbe7a1b937185c34e86d5a762ba27", "committedDate": "2020-03-14T13:14:52Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43c90495f160340286f8abc9f985140c3ea56a7b", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/43c90495f160340286f8abc9f985140c3ea56a7b", "committedDate": "2020-03-14T11:15:13Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}, "afterCommit": {"oid": "d370b303ebedbe7a1b937185c34e86d5a762ba27", "author": {"user": {"login": "hanahmily", "name": "Gao Hongtao"}}, "url": "https://github.com/apache/skywalking/commit/d370b303ebedbe7a1b937185c34e86d5a762ba27", "committedDate": "2020-03-14T13:14:52Z", "message": "Merge branch 'oap-ssl' of https://github.com/apache/skywalking into oap-ssl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzI4MDMx", "url": "https://github.com/apache/skywalking/pull/4470#pullrequestreview-374728031", "createdAt": "2020-03-14T13:41:40Z", "commit": {"oid": "d370b303ebedbe7a1b937185c34e86d5a762ba27"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2422, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}