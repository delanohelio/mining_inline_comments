{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNzIyOTkz", "number": 5454, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNDoyOTowMFrOEhE3RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMTo1NzozNlrOEhNbBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTE4MTQ4OnYy", "diffSide": "RIGHT", "path": "oap-server/server-bootstrap/src/main/resources/oal/core.oal", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNDoyOTowMFrOHOMSBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwNTozMjowN1rOHQ5qTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw==", "bodyText": "We don't visualize tls in the current UI. Please remove them.", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r484643333", "createdAt": "2020-09-08T04:29:00Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-bootstrap/src/main/resources/oal/core.oal", "diffHunk": "@@ -69,6 +69,12 @@ database_access_sla = from(DatabaseAccess.*).percent(status == true);\n database_access_cpm = from(DatabaseAccess.*).cpm();\n database_access_percentile = from(DatabaseAccess.latency).percentile(10);\n \n+// Example of TLS related metric. Detected point was not distinguished, that means mTLS requests from both sides will be\n+// counted in.\n+//////////\n+// service_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n+// service_instance_relation_mtls_cpm = from(ServiceInstanceRelation.*).filter(tlsMode == \"mTLS\").cpm();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a10284271958424210bc5f35f964e477a092f03"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ4Mzk2Mg==", "bodyText": "done", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r487483962", "createdAt": "2020-09-13T05:31:48Z", "author": {"login": "hanahmily"}, "path": "oap-server/server-bootstrap/src/main/resources/oal/core.oal", "diffHunk": "@@ -69,6 +69,12 @@ database_access_sla = from(DatabaseAccess.*).percent(status == true);\n database_access_cpm = from(DatabaseAccess.*).cpm();\n database_access_percentile = from(DatabaseAccess.latency).percentile(10);\n \n+// Example of TLS related metric. Detected point was not distinguished, that means mTLS requests from both sides will be\n+// counted in.\n+//////////\n+// service_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n+// service_instance_relation_mtls_cpm = from(ServiceInstanceRelation.*).filter(tlsMode == \"mTLS\").cpm();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw=="}, "originalCommit": {"oid": "1a10284271958424210bc5f35f964e477a092f03"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ4Mzk4Mw==", "bodyText": "done", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r487483983", "createdAt": "2020-09-13T05:32:07Z", "author": {"login": "hanahmily"}, "path": "oap-server/server-bootstrap/src/main/resources/oal/core.oal", "diffHunk": "@@ -69,6 +69,12 @@ database_access_sla = from(DatabaseAccess.*).percent(status == true);\n database_access_cpm = from(DatabaseAccess.*).cpm();\n database_access_percentile = from(DatabaseAccess.latency).percentile(10);\n \n+// Example of TLS related metric. Detected point was not distinguished, that means mTLS requests from both sides will be\n+// counted in.\n+//////////\n+// service_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n+// service_instance_relation_mtls_cpm = from(ServiceInstanceRelation.*).filter(tlsMode == \"mTLS\").cpm();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw=="}, "originalCommit": {"oid": "1a10284271958424210bc5f35f964e477a092f03"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMjU4MzcyOnYy", "diffSide": "RIGHT", "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/ServiceInstanceRelation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMTo1NzozNlrOHOZf1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMTo1NzozNlrOHOZf1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg1OTg2Mw==", "bodyText": "This and service relation source have been changed, scope-definitions.md doc should be updated.\n\nservice_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n\nThis example should belong to the doc I pointed to you.", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r484859863", "createdAt": "2020-09-08T11:57:36Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/ServiceInstanceRelation.java", "diffHunk": "@@ -103,6 +103,9 @@ public String getEntityId() {\n     @Getter\n     @Setter\n     private DetectPoint detectPoint;\n+    @Getter\n+    @Setter\n+    private String tlsMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a10284271958424210bc5f35f964e477a092f03"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 27, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}