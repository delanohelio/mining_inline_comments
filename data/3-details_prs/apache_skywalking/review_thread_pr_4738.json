{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNTgwMDgw", "number": 4738, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDoyMDo0MFrOD4wXqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNDowMzo0N1rOD42KlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODM5MzM3OnYy", "diffSide": "RIGHT", "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/query/type/TopNEntity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDoyMDo0MFrOGPqtoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDoyMDo0MFrOGPqtoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MTYzMg==", "bodyText": "The codes below returns something like \"4010.00\" even if the value is a bigint in MySQL, causing Long.parseLong to throw exception\n\n  \n    \n      skywalking/oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2AggregationQueryDAO.java\n    \n    \n         Line 82\n      in\n      0e4e4b8\n    \n    \n    \n    \n\n        \n          \n           topNEntity.setValue(resultSet.getString(\"value\"));", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419081632", "createdAt": "2020-05-03T10:20:40Z", "author": {"login": "kezhenxu94"}, "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/query/type/TopNEntity.java", "diffHunk": "@@ -38,6 +38,6 @@ public TopNEntity() {\n     public TopNEntity(SelectedRecord record) {\n         this.name = record.getName();\n         this.id = record.getId();\n-        this.value = Long.parseLong(record.getValue());\n+        this.value = Double.valueOf(record.getValue()).longValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4e4b888f0f1edac5ab6ae5bef5e860aa14f20b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODM5MzY4OnYy", "diffSide": "RIGHT", "path": "oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2AggregationQueryDAO.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDoyMDo1OVrOGPqtyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzo1ODowMFrOGPsS8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MTY3Mw==", "bodyText": "MySQL needs an alias in nested query", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419081673", "createdAt": "2020-05-03T10:20:59Z", "author": {"login": "kezhenxu94"}, "path": "oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2AggregationQueryDAO.java", "diffHunk": "@@ -68,7 +68,7 @@ public H2AggregationQueryDAO(JDBCHikariCPClient h2Client) {\n             });\n         }\n         sql.append(\" group by \").append(Metrics.ENTITY_ID);\n-        sql.append(\") order by value \")\n+        sql.append(\")  as T order by value \")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4e4b888f0f1edac5ab6ae5bef5e860aa14f20b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MjA1OA==", "bodyText": "Is alias Working in H2?", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419082058", "createdAt": "2020-05-03T10:24:35Z", "author": {"login": "wu-sheng"}, "path": "oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2AggregationQueryDAO.java", "diffHunk": "@@ -68,7 +68,7 @@ public H2AggregationQueryDAO(JDBCHikariCPClient h2Client) {\n             });\n         }\n         sql.append(\" group by \").append(Metrics.ENTITY_ID);\n-        sql.append(\") order by value \")\n+        sql.append(\")  as T order by value \")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MTY3Mw=="}, "originalCommit": {"oid": "0e4e4b888f0f1edac5ab6ae5bef5e860aa14f20b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEwNzU3MA==", "bodyText": "Is alias Working in H2?\n\nyes", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419107570", "createdAt": "2020-05-03T13:58:00Z", "author": {"login": "kezhenxu94"}, "path": "oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2AggregationQueryDAO.java", "diffHunk": "@@ -68,7 +68,7 @@ public H2AggregationQueryDAO(JDBCHikariCPClient h2Client) {\n             });\n         }\n         sql.append(\" group by \").append(Metrics.ENTITY_ID);\n-        sql.append(\") order by value \")\n+        sql.append(\")  as T order by value \")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MTY3Mw=="}, "originalCommit": {"oid": "0e4e4b888f0f1edac5ab6ae5bef5e860aa14f20b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTM0MjkzOnYy", "diffSide": "LEFT", "path": "apm-commons/apm-datacarrier/src/main/java/org/apache/skywalking/apm/commons/datacarrier/consumer/ConsumerPoolFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNDowMzo0N1rOGPyRfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNTo1NDowN1rOGPzadA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwNTUwMw==", "bodyText": "Doesn't agent use this API, right?", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419205503", "createdAt": "2020-05-04T04:03:47Z", "author": {"login": "wu-sheng"}, "path": "apm-commons/apm-datacarrier/src/main/java/org/apache/skywalking/apm/commons/datacarrier/consumer/ConsumerPoolFactory.java", "diffHunk": "@@ -48,43 +47,4 @@ public ConsumerPool get(String poolName) {\n         return pools.get(poolName);\n     }\n \n-    /**\n-     * Default pool provides the same capabilities as DataCarrier#consume(IConsumer, 1), which alloc one thread for one\n-     * DataCarrier.\n-     */\n-    public static final ConsumerPool DEFAULT_POOL = new ConsumerPool() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4f1c4779126783b318daa42d83b598eb8404796"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIyNDE4MA==", "bodyText": "Doesn't agent use this API, right?\n\nYes, never used", "url": "https://github.com/apache/skywalking/pull/4738#discussion_r419224180", "createdAt": "2020-05-04T05:54:07Z", "author": {"login": "kezhenxu94"}, "path": "apm-commons/apm-datacarrier/src/main/java/org/apache/skywalking/apm/commons/datacarrier/consumer/ConsumerPoolFactory.java", "diffHunk": "@@ -48,43 +47,4 @@ public ConsumerPool get(String poolName) {\n         return pools.get(poolName);\n     }\n \n-    /**\n-     * Default pool provides the same capabilities as DataCarrier#consume(IConsumer, 1), which alloc one thread for one\n-     * DataCarrier.\n-     */\n-    public static final ConsumerPool DEFAULT_POOL = new ConsumerPool() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwNTUwMw=="}, "originalCommit": {"oid": "c4f1c4779126783b318daa42d83b598eb8404796"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 286, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}