{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3ODQ5Mzk1", "number": 987, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjozNzowOVrOEIvZFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjo0NzoyMVrOEIvnvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjAwNTM0OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/cauroles/AuthorisedCaseAssignedUserRolesOperation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjozNzowOVrOGo4pMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjozNzowOVrOGo4pMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUyNDI3Mg==", "bodyText": "You made me find out https://www.quora.com/What-does-the-abbreviation-N-B-mean-and-why-do-people-use-it. :)", "url": "https://github.com/hmcts/ccd-data-store-api/pull/987#discussion_r445524272", "createdAt": "2020-06-25T12:37:09Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/cauroles/AuthorisedCaseAssignedUserRolesOperation.java", "diffHunk": "@@ -23,6 +23,12 @@ public AuthorisedCaseAssignedUserRolesOperation(final @Qualifier(\"default\") Case\n         this.cauRoleValidator = cauRoleValidator;\n     }\n \n+    public void addCaseUserRoles(List<CaseAssignedUserRole> caseUserRoles) {\n+        // NB: Although there are no user based authorisation steps performed here ...", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "399fcd10c834d375f5a667e3f92935028f0b2ab7"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjA0Mjg3OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/caseaccess/CaseAccessOperation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjo0NzoyMVrOGo5AjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjo0NzoyMVrOGo5AjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUzMDI1Mw==", "bodyText": "Calling caseDetailsRepository.findByReference again and again for every distinct case reference may not be performant enough in for a call sending case role assignments for many distinct cases, but as per the current non-functional requirements, we can still accept this.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/987#discussion_r445530253", "createdAt": "2020-06-25T12:47:21Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/caseaccess/CaseAccessOperation.java", "diffHunk": "@@ -104,6 +122,15 @@ public void updateUserAccess(CaseDetails caseDetails, CaseUser caseUser) {\n             .collect(Collectors.toCollection(ArrayList::new));\n     }\n \n+    private List<CaseDetails> getCaseDetailsList(List<Long> caseReferences) {\n+        return caseReferences.stream()\n+            .map(caseReference -> {\n+                Optional<CaseDetails> caseDetails = caseDetailsRepository.findByReference(null, caseReference);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "399fcd10c834d375f5a667e3f92935028f0b2ab7"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3726, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}