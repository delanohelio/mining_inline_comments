{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MzI4NzM5", "number": 1061, "title": "RDM-9250: Identify and remove PII (Personally Identifiable Information) from CCD logs", "bodyText": "JIRA link (if applicable)\nhttps://tools.hmcts.net/jira/browse/RDM-9250\nChange description\nRemoved PII from application logs\nDoes this PR introduce a breaking change? (check one with \"x\")\n[ ] Yes\n[X ] No", "createdAt": "2020-08-18T09:28:56Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061", "merged": true, "mergeCommit": {"oid": "f7da80166b01d6468f4dff2fdafcfb2a3f89a078"}, "closed": true, "closedAt": "2020-09-28T08:08:31Z", "author": {"login": "kiran-yenigala-hmcts"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdADjL7gH2gAyNDY5MzI4NzM5OjFjMzJmYzQyZGE2NWQyMmI2ZWZjYjU1OTcxMTdmODAxNWY2YTMxODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMVv-WAFqTQ5NjQxNTQxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/1c32fc42da65d22b6efcb5597117f8015f6a3187", "committedDate": "2020-08-18T09:25:23Z", "message": "RDM-9250: PII information removed from logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MTgwMDc1", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-469180075", "createdAt": "2020-08-18T10:06:52Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDowNjo1M1rOHCMncg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDowNjo1M1rOHCMncg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2NTkwNg==", "bodyText": "Thanks for not removing this totally.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r472065906", "createdAt": "2020-08-18T10:06:53Z", "author": {"login": "rafalkalita"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "diffHunk": "@@ -109,8 +109,8 @@ public IdamUser getUser() {\n             .map(GrantedAuthority::getAuthority)\n             .collect(Collectors.toSet());\n \n-        String email = getUser().getEmail();\n-        LOG.info(\"Retrieved roles for user={} roles={}\", email, userRoles);\n+        String userId = getUser().getId();\n+        LOG.info(\"Retrieved roles for userId={} roles={}\", userId, userRoles);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MTgwNzAx", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-469180701", "createdAt": "2020-08-18T10:07:42Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDI1Mjgz", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-474425283", "createdAt": "2020-08-25T12:22:12Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyMjoxM1rOHGVf5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyMjoxM1rOHGVf5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTczNA==", "bodyText": "maybe let's have our BA Jamal first check with the team who is processing the Audit logs whether this change is ok for them", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r476405734", "createdAt": "2020-08-25T12:22:13Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/auditlog/AuditService.java", "diffHunk": "@@ -40,7 +40,7 @@ public void audit(AuditContext auditContext) {\n         entry.setHttpMethod(auditContext.getHttpMethod());\n         entry.setPath(auditContext.getRequestPath());\n         entry.setRequestId(auditContext.getRequestId());\n-        entry.setIdamId(userRepository.getUser().getEmail());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NDI1NzEx", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-474425711", "createdAt": "2020-08-25T12:22:44Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MzY5MjA5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-496369209", "createdAt": "2020-09-25T12:22:10Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDE1NDEy", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#pullrequestreview-496415412", "createdAt": "2020-09-25T13:24:44Z", "commit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2887, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}