{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTUzMTkx", "number": 984, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoyMzowN1rOEHCQxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOToyNzozNlrOEISinw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODEyNTUwOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoyMzowN1rOGmMhnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMToyOTozMlrOGmRlbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwNDI4NA==", "bodyText": "we don't want to allow getting and setting the whole supplementary data. Consider providing methods to instead get and set specific properties", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r442704284", "createdAt": "2020-06-19T08:23:07Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java", "diffHunk": "@@ -208,6 +215,22 @@ public void setLastStateModifiedDate(LocalDateTime lastStateModifiedDate) {\n         this.lastStateModifiedDate = lastStateModifiedDate;\n     }\n \n+    public Map<String, JsonNode> getSupplementaryData() {\n+        return supplementaryData;\n+    }\n+\n+    public void setSupplementaryData(Map<String, JsonNode> supplementaryData) {\n+        this.supplementaryData = supplementaryData;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "290950af7555176c6417b9e53e4d162e1bee76fe"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc4NzE4Mg==", "bodyText": "it is work in progress I added for my own benefit while I am doing the work . But understood", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r442787182", "createdAt": "2020-06-19T11:29:32Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java", "diffHunk": "@@ -208,6 +215,22 @@ public void setLastStateModifiedDate(LocalDateTime lastStateModifiedDate) {\n         this.lastStateModifiedDate = lastStateModifiedDate;\n     }\n \n+    public Map<String, JsonNode> getSupplementaryData() {\n+        return supplementaryData;\n+    }\n+\n+    public void setSupplementaryData(Map<String, JsonNode> supplementaryData) {\n+        this.supplementaryData = supplementaryData;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwNDI4NA=="}, "originalCommit": {"oid": "290950af7555176c6417b9e53e4d162e1bee76fe"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODEyNzAwOnYy", "diffSide": "RIGHT", "path": "src/main/resources/db/changelog/db.changelog-master.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoyMzozOVrOGmMipw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoyMzozOVrOGmMipw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwNDU1MQ==", "bodyText": "can you push the file too please", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r442704551", "createdAt": "2020-06-19T08:23:39Z", "author": {"login": "mario-paniccia"}, "path": "src/main/resources/db/changelog/db.changelog-master.xml", "diffHunk": "@@ -32,4 +32,5 @@\n     <include file=\"db/changelog/db.changelog-RDM-6111.xml\"/>\n     <include file=\"db/changelog/db.changelog-RDM-4641.xml\"/>\n     <include file=\"db/changelog/db.changelog-RDM-8485.xml\"/>\n+    <include file=\"db/changelog/db.changelog-RDM-8747.xml\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "290950af7555176c6417b9e53e4d162e1bee76fe"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzQyMDI5OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/casedetails/CaseDetailsEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMDozNVrOGnkamA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMDozNVrOGnkamA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0NDI4MA==", "bodyText": "src/main/java/uk/gov/hmcts/ccd/data/casedetails/CaseDetailsEntity.java will be removed from the PR", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r444144280", "createdAt": "2020-06-23T11:10:35Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/casedetails/CaseDetailsEntity.java", "diffHunk": "@@ -1,31 +1,43 @@\n package uk.gov.hmcts.ccd.data.casedetails;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a9061f27d9d059fab03aaba5b20704fe20b58e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzQyMTYyOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMTowMlrOGnkbZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMTowMlrOGnkbZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0NDQ4NA==", "bodyText": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java  will be removed from the PR", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r444144484", "createdAt": "2020-06-23T11:11:02Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseDetails.java", "diffHunk": "@@ -30,7 +30,8 @@\n import static uk.gov.hmcts.ccd.domain.model.definition.FieldTypeDefinition.CASE_PAYMENT_HISTORY_VIEWER;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a9061f27d9d059fab03aaba5b20704fe20b58e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MTI3ODM5OnYy", "diffSide": "RIGHT", "path": "src/main/resources/db/changelog/db.changelog-RDM-8747.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOToyNzozNlrOGoKTiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMToyNjozMVrOGoOCMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2NTA2NQ==", "bodyText": "we have this as initially null?  and then will be gradually populated whenever supplementary data is written using the supplementary data update endpoint? Would this cause problems to the LS sql query? let's verify", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r444765065", "createdAt": "2020-06-24T09:27:36Z", "author": {"login": "mario-paniccia"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-8747.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+    <changeSet id=\"rdm-8747\" author=\"tobias.derose@hmcts.net\">\n+        <addColumn tableName=\"case_data\">\n+            <column name=\"supplementary_data\" type=\"jsonb\">\n+                <constraints nullable=\"true\"/>\n+            </column>\n+            <column name=\"supplementary_data_last_modified\" type=\"timestamp\">\n+                <constraints />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86b2e870e0e3fe8ac7f612fa6339a8c2cbd64755"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc5NTM3Mw==", "bodyText": "Yes it has been tested .  When cases are created  supplementary_data_last_modified is null. LogStash keep running and execution queries without error.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r444795373", "createdAt": "2020-06-24T10:22:24Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-8747.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+    <changeSet id=\"rdm-8747\" author=\"tobias.derose@hmcts.net\">\n+        <addColumn tableName=\"case_data\">\n+            <column name=\"supplementary_data\" type=\"jsonb\">\n+                <constraints nullable=\"true\"/>\n+            </column>\n+            <column name=\"supplementary_data_last_modified\" type=\"timestamp\">\n+                <constraints />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2NTA2NQ=="}, "originalCommit": {"oid": "86b2e870e0e3fe8ac7f612fa6339a8c2cbd64755"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDgyNjE2Mw==", "bodyText": "ok cool, having it as initially null is fine then.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/984#discussion_r444826163", "createdAt": "2020-06-24T11:26:31Z", "author": {"login": "mario-paniccia"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-8747.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+    <changeSet id=\"rdm-8747\" author=\"tobias.derose@hmcts.net\">\n+        <addColumn tableName=\"case_data\">\n+            <column name=\"supplementary_data\" type=\"jsonb\">\n+                <constraints nullable=\"true\"/>\n+            </column>\n+            <column name=\"supplementary_data_last_modified\" type=\"timestamp\">\n+                <constraints />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2NTA2NQ=="}, "originalCommit": {"oid": "86b2e870e0e3fe8ac7f612fa6339a8c2cbd64755"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3724, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}