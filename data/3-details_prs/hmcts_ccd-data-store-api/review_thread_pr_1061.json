{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MzI4NzM5", "number": 1061, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDowNjo1M1rOEZZ9HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyMjoxM1rOEcCwYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MDc1MTAwOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDowNjo1M1rOHCMncg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDowNjo1M1rOHCMncg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2NTkwNg==", "bodyText": "Thanks for not removing this totally.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r472065906", "createdAt": "2020-08-18T10:06:53Z", "author": {"login": "rafalkalita"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "diffHunk": "@@ -109,8 +109,8 @@ public IdamUser getUser() {\n             .map(GrantedAuthority::getAuthority)\n             .collect(Collectors.toSet());\n \n-        String email = getUser().getEmail();\n-        LOG.info(\"Retrieved roles for user={} roles={}\", email, userRoles);\n+        String userId = getUser().getId();\n+        LOG.info(\"Retrieved roles for userId={} roles={}\", userId, userRoles);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODQwNzM5OnYy", "diffSide": "LEFT", "path": "src/main/java/uk/gov/hmcts/ccd/auditlog/AuditService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyMjoxM1rOHGVf5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzoyNTowNFrOHYDfjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTczNA==", "bodyText": "maybe let's have our BA Jamal first check with the team who is processing the Audit logs whether this change is ok for them", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r476405734", "createdAt": "2020-08-25T12:22:13Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/auditlog/AuditService.java", "diffHunk": "@@ -40,7 +40,7 @@ public void audit(AuditContext auditContext) {\n         entry.setHttpMethod(auditContext.getHttpMethod());\n         entry.setPath(auditContext.getRequestPath());\n         entry.setRequestId(auditContext.getRequestId());\n-        entry.setIdamId(userRepository.getUser().getEmail());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk4NTEwMw==", "bodyText": "confirmed that this change is ok", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r494985103", "createdAt": "2020-09-25T13:25:04Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/auditlog/AuditService.java", "diffHunk": "@@ -40,7 +40,7 @@ public void audit(AuditContext auditContext) {\n         entry.setHttpMethod(auditContext.getHttpMethod());\n         entry.setPath(auditContext.getRequestPath());\n         entry.setRequestId(auditContext.getRequestId());\n-        entry.setIdamId(userRepository.getUser().getEmail());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTczNA=="}, "originalCommit": {"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3794, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}