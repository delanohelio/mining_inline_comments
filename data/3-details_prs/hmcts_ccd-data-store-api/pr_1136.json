{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNjY1OTc3", "number": 1136, "title": "Removed Sonar exclusions", "bodyText": "JIRA link (if applicable)\nhttps://tools.hmcts.net/jira/browse/RDM-9643\nChange description\nDoes this PR introduce a breaking change? (check one with \"x\")\n[ ] Yes\n[X] No", "createdAt": "2020-09-23T10:11:12Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136", "merged": true, "mergeCommit": {"oid": "c7afab7bf8ad59bf2b49b2ad9a9b3b29b7440309"}, "closed": true, "closedAt": "2020-10-07T23:10:44Z", "author": {"login": "sumansreenivasan"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLpwe8AH2gAyNDkxNjY1OTc3OmI4ZmRkNDZhZGIxN2E3ZDk1NWYzNzY5Y2RlZGMxNmRjMmJiYzFlZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQTi7LABqjM4NTI1MTAzOTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8fdd46adb17a7d955f3769cdedc16dc2bbc1eed", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/b8fdd46adb17a7d955f3769cdedc16dc2bbc1eed", "committedDate": "2020-09-23T10:09:28Z", "message": "Removed Sonar exclusions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NzUzNzg5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-497753789", "createdAt": "2020-09-28T17:35:45Z", "commit": {"oid": "b8fdd46adb17a7d955f3769cdedc16dc2bbc1eed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efc8c16b4fc1cd0adc1f7eac01288637b53f0d94", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/efc8c16b4fc1cd0adc1f7eac01288637b53f0d94", "committedDate": "2020-09-28T18:09:25Z", "message": "Merge branch 'develop' into RDM-9643_new"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODM1Mzc1", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-497835375", "createdAt": "2020-09-28T19:34:07Z", "commit": {"oid": "efc8c16b4fc1cd0adc1f7eac01288637b53f0d94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "377d4a022441c0c229be596eb701786771a72601", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/377d4a022441c0c229be596eb701786771a72601", "committedDate": "2020-10-01T10:45:03Z", "message": "Added a null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec12f720b2c77aecce3223c61942b50b0335d6a", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/4ec12f720b2c77aecce3223c61942b50b0335d6a", "committedDate": "2020-10-01T10:45:40Z", "message": "Merge remote-tracking branch 'origin/RDM-9643_new' into RDM-9643_new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23aa951bfe5fd08953cc21425b192a23728c6f9", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/d23aa951bfe5fd08953cc21425b192a23728c6f9", "committedDate": "2020-10-01T11:42:20Z", "message": "adding new CVE CVE-2020-5421"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "763a5d19df5b384cc0ae43ec474df7045f589358", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/763a5d19df5b384cc0ae43ec474df7045f589358", "committedDate": "2020-10-01T14:20:57Z", "message": "Added a null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f67b7281017b3491f513d2556b5ae78b63673c5f", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/f67b7281017b3491f513d2556b5ae78b63673c5f", "committedDate": "2020-10-01T15:29:27Z", "message": "Added a null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d5951e0d6d27040eab49a8c7b3de5c4eb568b2", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/58d5951e0d6d27040eab49a8c7b3de5c4eb568b2", "committedDate": "2020-10-01T16:12:11Z", "message": "Added a null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4891b1fa14ead3e31181ef1397f76608e0c7baa0", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/4891b1fa14ead3e31181ef1397f76608e0c7baa0", "committedDate": "2020-10-05T10:34:03Z", "message": "Added a null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/5d1453aacbbaa8af09fe55cd93b0226cdd069f3a", "committedDate": "2020-10-05T12:33:29Z", "message": "Merge branches 'RDM-9643_new' and 'develop' of https://github.com/hmcts/ccd-data-store-api into RDM-9643_new"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDEwNzI3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-502410727", "createdAt": "2020-10-05T20:51:05Z", "commit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MTowNVrOHctVYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MTowNVrOHctVYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NDkzMQ==", "bodyText": "getLocation is a bad naming. Please use a better one like, location.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499864931", "createdAt": "2020-10-05T20:51:05Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -205,7 +209,11 @@ private DraftResponse assembleDraft(Draft getDraft, Consumer<Exception> exceptio\n \n \n     private Long getDraftId(HttpHeaders responseHeaders) {\n-        String path = responseHeaders.getLocation().getPath();\n-        return Long.valueOf(path.substring(path.lastIndexOf('/') + 1));\n+        URI getLocation = responseHeaders.getLocation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDExNzM4", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-502411738", "createdAt": "2020-10-05T20:52:42Z", "commit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1Mjo0MlrOHctYWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1Mjo0MlrOHctYWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NTY4OA==", "bodyText": "please improve naming: getDraft  to draft.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499865688", "createdAt": "2020-10-05T20:52:42Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -192,11 +194,13 @@ private String getUriWithQueryParams() {\n     private DraftResponse assembleDraft(Draft getDraft, Consumer<Exception> exceptionConsumer) {\n         final DraftResponse draftResponse = new DraftResponse();\n         try {\n-            draftResponse.setId(getDraft.getId());\n-            draftResponse.setDocument(MAPPER.treeToValue(getDraft.getDocument(), CaseDraft.class));\n-            draftResponse.setType(getDraft.getType());\n-            draftResponse.setCreated(getDraft.getCreated().toLocalDateTime());\n-            draftResponse.setUpdated(getDraft.getUpdated().toLocalDateTime());\n+            if (getDraft != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDEyMzE0", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-502412314", "createdAt": "2020-10-05T20:53:33Z", "commit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MzozM1rOHctZ8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MzozM1rOHctZ8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NjA5Ng==", "bodyText": "please improve naming: getDrafts to drafts.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499866096", "createdAt": "2020-10-05T20:53:33Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -161,7 +163,7 @@ public void delete(final String draftId) {\n             final HttpEntity requestEntity = new HttpEntity(headers);\n             DraftList getDrafts = restTemplate.exchange(\n                 getUriWithQueryParams(), HttpMethod.GET, requestEntity, DraftList.class).getBody();\n-            return getDrafts.getData()\n+            return getDrafts == null ? null : getDrafts.getData()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDEyOTI3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-502412927", "createdAt": "2020-10-05T20:54:26Z", "commit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfe090c8f3bae44bf9fbef18d3e5ea0410a519a5", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/cfe090c8f3bae44bf9fbef18d3e5ea0410a519a5", "committedDate": "2020-10-06T08:29:28Z", "message": "Incorporated name change comments."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b94f17404deb58ed4d4abc4037e28757b389ea6b", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/b94f17404deb58ed4d4abc4037e28757b389ea6b", "committedDate": "2020-10-07T20:55:07Z", "message": "cleanup"}, "afterCommit": {"oid": "0973e4f7b7e1d0c8a483a3a020a92341ad9613c2", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/0973e4f7b7e1d0c8a483a3a020a92341ad9613c2", "committedDate": "2020-10-07T20:55:43Z", "message": "fake sanitisation to shut up stupid Sonar flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc32528bb9ca2b71767905bf0c676408a71ae8e0", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/bc32528bb9ca2b71767905bf0c676408a71ae8e0", "committedDate": "2020-10-07T20:58:49Z", "message": "use nicer wording"}, "afterCommit": {"oid": "96080bbe74e17741a48768f1e0058b9770d6a5fe", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/96080bbe74e17741a48768f1e0058b9770d6a5fe", "committedDate": "2020-10-07T20:59:28Z", "message": "fake sanitisation to shut up stupid Sonar flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47e11b8350cc03fcdb9b852230c208e3675a06f4", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/47e11b8350cc03fcdb9b852230c208e3675a06f4", "committedDate": "2020-10-07T21:02:19Z", "message": "correct identifier name"}, "afterCommit": {"oid": "fc3ca900dde7b3daf35912dd1d6fba2278238251", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/fc3ca900dde7b3daf35912dd1d6fba2278238251", "committedDate": "2020-10-07T21:02:51Z", "message": "fake sanitisation to shut up stupid Sonar flag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjY2Mjc5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#pullrequestreview-504266279", "createdAt": "2020-10-07T21:04:43Z", "commit": {"oid": "fc3ca900dde7b3daf35912dd1d6fba2278238251"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91014b28fe7f366b06c108747397d90fe8b98334", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/91014b28fe7f366b06c108747397d90fe8b98334", "committedDate": "2020-10-07T21:06:06Z", "message": "Validating DraftId, updated testcase."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff7f122dab8b32c3efc232cfa6cfd4528ae67ad", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/6ff7f122dab8b32c3efc232cfa6cfd4528ae67ad", "committedDate": "2020-10-07T21:06:07Z", "message": "fake sanitisation to shut up stupid Sonar flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc3ca900dde7b3daf35912dd1d6fba2278238251", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/fc3ca900dde7b3daf35912dd1d6fba2278238251", "committedDate": "2020-10-07T21:02:51Z", "message": "fake sanitisation to shut up stupid Sonar flag"}, "afterCommit": {"oid": "6ff7f122dab8b32c3efc232cfa6cfd4528ae67ad", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/6ff7f122dab8b32c3efc232cfa6cfd4528ae67ad", "committedDate": "2020-10-07T21:06:07Z", "message": "fake sanitisation to shut up stupid Sonar flag"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2744, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}