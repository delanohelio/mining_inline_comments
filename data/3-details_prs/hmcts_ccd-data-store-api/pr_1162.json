{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMjYyNjE5", "number": 1162, "title": "Added db changelog for RDM-9696", "bodyText": "JIRA link (if applicable)\nhttps://tools.hmcts.net/jira/browse/RDM-9696\nChange description\nDoes this PR introduce a breaking change? (check one with \"x\")\n[ ] Yes\n[X] No", "createdAt": "2020-10-13T12:33:26Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162", "merged": true, "mergeCommit": {"oid": "9faf1e84c01775f94c476f06fa4abfc85af5fd86"}, "closed": true, "closedAt": "2020-10-21T08:55:24Z", "author": {"login": "sumansreenivasan"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTGw5TAFqTUxMDQ5MzU2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUpb5dAFqTUxMzQ1MDA3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDkzNTY0", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#pullrequestreview-510493564", "createdAt": "2020-10-16T13:54:38Z", "commit": {"oid": "77e2d9ee6484bc9ceb03e4c6ccd36d6754b35939"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo1NDozOFrOHi_PAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzo1NDozOFrOHi_PAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0OTY2Ng==", "bodyText": "why change this?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#discussion_r506449666", "createdAt": "2020-10-16T13:54:38Z", "author": {"login": "MSancaktutar"}, "path": "src/main/resources/application.properties", "diffHunk": "@@ -137,7 +137,7 @@ ccd.draft.encryptionKey=${CCD_DRAFT_ENCRYPTION_KEY:xxxxxxxxxxxxxxxx}\n ccd.draft.maxTTLDays=${CCD_DRAFT_TTL_DAYS:180}\n \n # Search\n-search.elastic.enabled=${ELASTIC_SEARCH_ENABLED:false}\n+search.elastic.enabled=${ELASTIC_SEARCH_ENABLED:true}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e2d9ee6484bc9ceb03e4c6ccd36d6754b35939"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd5a4d3e95d8101ee65cb93b49426f2e9690507c", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/dd5a4d3e95d8101ee65cb93b49426f2e9690507c", "committedDate": "2020-10-16T13:58:58Z", "message": "Reverted ELASTIC_SEARCH_ENABLED"}, "afterCommit": {"oid": "7ecb06b29361a7155fccc2f2d7b61f0c46017aa8", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/7ecb06b29361a7155fccc2f2d7b61f0c46017aa8", "committedDate": "2020-10-16T14:14:53Z", "message": "Added db changelog for RDM-9696"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTI3NTQy", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#pullrequestreview-510527542", "createdAt": "2020-10-16T14:31:24Z", "commit": {"oid": "7ecb06b29361a7155fccc2f2d7b61f0c46017aa8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDozMToyNFrOHjBkGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDozMToyNFrOHjBkGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ4NzgzMw==", "bodyText": "each index should be created if it doesn't exist.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#discussion_r506487833", "createdAt": "2020-10-16T14:31:24Z", "author": {"login": "MSancaktutar"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-9696.xml", "diffHunk": "@@ -0,0 +1,20 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+\n+    <changeSet id=\"rdm-9696\" runInTransaction=\"false\" author=\"suman.sreenivasan@hmcts.net\">\n+        <sql dbms=\"postgresql\"\n+             endDelimiter=\"\\nGO\"\n+             splitStatements=\"true\"\n+             stripComments=\"true\">\n+            CREATE INDEX CONCURRENTLY idx_case_data_languagePreferenceWelsh ON public.case_data USING btree (btrim(upper((data #>> '{languagePreferenceWelsh}'::text[]))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ecb06b29361a7155fccc2f2d7b61f0c46017aa8"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTY2Mzk2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#pullrequestreview-510566396", "createdAt": "2020-10-16T15:15:18Z", "commit": {"oid": "2cfc67e9206734c860259d8e6c6e38c814b89d8e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c94aafb79402883241d5a4cf8426e3a2a00e0e4b", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c94aafb79402883241d5a4cf8426e3a2a00e0e4b", "committedDate": "2020-10-16T15:35:16Z", "message": "Added db changelog for RDM-9696"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cfc67e9206734c860259d8e6c6e38c814b89d8e", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/2cfc67e9206734c860259d8e6c6e38c814b89d8e", "committedDate": "2020-10-16T15:05:37Z", "message": "Added a check to see if Index exists."}, "afterCommit": {"oid": "c94aafb79402883241d5a4cf8426e3a2a00e0e4b", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c94aafb79402883241d5a4cf8426e3a2a00e0e4b", "committedDate": "2020-10-16T15:35:16Z", "message": "Added db changelog for RDM-9696"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNDUwMDcy", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1162#pullrequestreview-513450072", "createdAt": "2020-10-21T08:52:18Z", "commit": {"oid": "c94aafb79402883241d5a4cf8426e3a2a00e0e4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2771, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}