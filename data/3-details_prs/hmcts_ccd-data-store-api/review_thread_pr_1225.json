{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNDYxMjgy", "number": 1225, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzoxOToxMVrOE8t8bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwOTo1MzowMFrOE9jwyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTAyNzY2OnYy", "diffSide": "RIGHT", "path": "src/main/resources/db/changelog/db.changelog-RDM-10165.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzoxOToxMVrOH5AcmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDowNDoxOFrOH5r4KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTUzODIwMA==", "bodyText": "Does this (and the others in this file) defaultValue need to be set to an empty string, when it is nullable and I think StringUtils.isEmpty() checks for null too? Can we simply remove the default?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529538200", "createdAt": "2020-11-24T13:19:11Z", "author": {"login": "danlysiak"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-10165.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+\n+    <changeSet id=\"rdm-10165\" runInTransaction=\"false\" author=\"kiran.yenigala@hmcts.net\">\n+\n+        <addColumn tableName=\"case_event\">\n+            <column\n+                    name=\"proxied_by\"\n+                    type=\"varchar(64)\"\n+                    defaultValue=\"\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI0OTc2OA==", "bodyText": "Yes, We can remove the default value.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530249768", "createdAt": "2020-11-25T10:04:18Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/resources/db/changelog/db.changelog-RDM-10165.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+\n+    <changeSet id=\"rdm-10165\" runInTransaction=\"false\" author=\"kiran.yenigala@hmcts.net\">\n+\n+        <addColumn tableName=\"case_event\">\n+            <column\n+                    name=\"proxied_by\"\n+                    type=\"varchar(64)\"\n+                    defaultValue=\"\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTUzODIwMA=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTY1ODI4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozMDoxMlrOH5GiYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxNjoyMzo1M1rOH6hw5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYzNzk4NQ==", "bodyText": "property \"sonar.cpd.exclusions\", \"/data/casedetails/*.java,/model/std*.java\". Why we are excluding classes under /src/main/java/uk/gov/hmcts/ccd/domain/model/std/", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529637985", "createdAt": "2020-11-24T15:30:12Z", "author": {"login": "Thor-tech-of-metal"}, "path": "build.gradle", "diffHunk": "@@ -535,6 +535,7 @@ jsonSchema2Pojo {\n sonarqube {\n     properties {\n         property \"sonar.exclusions\", \"build/generated-sources/**/*.java,**/AuditRepository.java\"\n+        property \"sonar.cpd.exclusions\", \"**/data/casedetails/*.java,**/model/std*.java\"\n         property \"sonar.projectName\", \"ccd-data-store-api\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTEzMjY0Nw==", "bodyText": "removed this now", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r531132647", "createdAt": "2020-11-26T16:23:53Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "build.gradle", "diffHunk": "@@ -535,6 +535,7 @@ jsonSchema2Pojo {\n sonarqube {\n     properties {\n         property \"sonar.exclusions\", \"build/generated-sources/**/*.java,**/AuditRepository.java\"\n+        property \"sonar.cpd.exclusions\", \"**/data/casedetails/*.java,**/model/std*.java\"\n         property \"sonar.projectName\", \"ccd-data-store-api\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYzNzk4NQ=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTcwMzA5OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/user/CachedUserRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozNTo0MVrOH5HAFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxMDowNVrOH5sG9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY0NTU4OQ==", "bodyText": "May we  you can add a test in CachedUserRepositoryTest.  Optional It is not mandatory if sonar already passed. :)", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529645589", "createdAt": "2020-11-24T15:35:41Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/CachedUserRepository.java", "diffHunk": "@@ -47,6 +47,11 @@ public IdamUser getUser() {\n         return userRepository.getUser();\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1MzU1Nw==", "bodyText": "I don't think we need the test here as it is trying to get from DefaultUserRepository always", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530253557", "createdAt": "2020-11-25T10:10:05Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/CachedUserRepository.java", "diffHunk": "@@ -47,6 +47,11 @@ public IdamUser getUser() {\n         return userRepository.getUser();\n     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY0NTU4OQ=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTcyNDUxOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozODowOFrOH5HOIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxNDo0MVrOH5sTNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY0OTE4Ng==", "bodyText": "May we you can add a test in DefaultUserRepositoryTest Optional It is not mandatory if sonar already passed. :)", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529649186", "createdAt": "2020-11-24T15:38:08Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "diffHunk": "@@ -88,6 +88,12 @@ public IdamUser getUser() {\n         return toIdamUser(userInfo);\n     }\n \n+    @Override\n+    public IdamUser getUser(String userToken) {\n+        UserInfo userInfo = securityUtils.getUserInfo(userToken);\n+        return toIdamUser(userInfo);\n+    }\n+\n     @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1NjY5NQ==", "bodyText": "Added test case in DefaultUserRepositoryTest", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530256695", "createdAt": "2020-11-25T10:14:41Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "diffHunk": "@@ -88,6 +88,12 @@ public IdamUser getUser() {\n         return toIdamUser(userInfo);\n     }\n \n+    @Override\n+    public IdamUser getUser(String userToken) {\n+        UserInfo userInfo = securityUtils.getUserInfo(userToken);\n+        return toIdamUser(userInfo);\n+    }\n+\n     @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY0OTE4Ng=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTczMjIwOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/aggregated/CaseViewField.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozOTowOFrOH5HTdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozOTowOFrOH5HTdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MDU1MQ==", "bodyText": "Could you please move  the imports and take developed  version ?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529650551", "createdAt": "2020-11-24T15:39:08Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/aggregated/CaseViewField.java", "diffHunk": "@@ -1,15 +1,14 @@\n package uk.gov.hmcts.ccd.domain.model.aggregated;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTczNDc4OnYy", "diffSide": "LEFT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/aggregated/CaseViewFieldBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozOToyNVrOH5HU_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxNTo0N1rOH5sWMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MDk0MQ==", "bodyText": "Could you please move  the imports and take developed  version ?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529650941", "createdAt": "2020-11-24T15:39:25Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/aggregated/CaseViewFieldBuilder.java", "diffHunk": "@@ -1,14 +1,13 @@\n package uk.gov.hmcts.ccd.domain.model.aggregated;\n \n-import uk.gov.hmcts.ccd.domain.model.definition.CaseEventFieldDefinition;\n-import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1NzQ1OQ==", "bodyText": "reverted to develop version", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530257459", "createdAt": "2020-11-25T10:15:47Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/aggregated/CaseViewFieldBuilder.java", "diffHunk": "@@ -1,14 +1,13 @@\n package uk.gov.hmcts.ccd.domain.model.aggregated;\n \n-import uk.gov.hmcts.ccd.domain.model.definition.CaseEventFieldDefinition;\n-import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MDk0MQ=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTczNjE3OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseEventFieldDefinition.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozOTozM1rOH5HV5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxNjozOVrOH5sYqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MTE3Mg==", "bodyText": "Could you please move  the imports and take developed  version ?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529651172", "createdAt": "2020-11-24T15:39:33Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseEventFieldDefinition.java", "diffHunk": "@@ -3,12 +3,11 @@\n import com.fasterxml.jackson.annotation.JsonProperty;\n import io.swagger.annotations.ApiModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1ODA4OA==", "bodyText": "reverted to develop version", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530258088", "createdAt": "2020-11-25T10:16:39Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseEventFieldDefinition.java", "diffHunk": "@@ -3,12 +3,11 @@\n import com.fasterxml.jackson.annotation.JsonProperty;\n import io.swagger.annotations.ApiModel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MTE3Mg=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTczNzQ2OnYy", "diffSide": "LEFT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseFieldDefinition.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozOTo0MVrOH5HWwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyMDowNlrOH5shVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MTM5Mg==", "bodyText": "Could you please move  the imports and take developed  version ?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529651392", "createdAt": "2020-11-24T15:39:41Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseFieldDefinition.java", "diffHunk": "@@ -3,16 +3,15 @@\n import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.annotation.JsonProperty;\n import io.swagger.annotations.ApiModel;\n-import lombok.ToString;\n-import uk.gov.hmcts.ccd.domain.model.aggregated.CommonField;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI2MDMxMA==", "bodyText": "reverted to develop version", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530260310", "createdAt": "2020-11-25T10:20:06Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/definition/CaseFieldDefinition.java", "diffHunk": "@@ -3,16 +3,15 @@\n import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.annotation.JsonProperty;\n import io.swagger.annotations.ApiModel;\n-import lombok.ToString;\n-import uk.gov.hmcts.ccd.domain.model.aggregated.CommonField;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MTM5Mg=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTc0ODc1OnYy", "diffSide": "LEFT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/AuthorisedCreateEventOperation.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo0MDo1M1rOH5Hdsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxNzo0NFrOH5sbPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MzE3MA==", "bodyText": "Could you please take developed  version  and exclude this file from the pr? unless checkstyle crash :)", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529653170", "createdAt": "2020-11-24T15:40:53Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/AuthorisedCreateEventOperation.java", "diffHunk": "@@ -76,8 +76,7 @@ public CaseDetails createCaseEvent(String caseReference,\n \n         verifyUpsertAccess(content.getEvent(), content.getData(), existingCaseDetails, caseTypeDefinition, userRoles);\n \n-        final CaseDetails caseDetails = createEventOperation.createCaseEvent(caseReference,\n-                                                                             content);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1ODc1MQ==", "bodyText": "reverted to develop version", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530258751", "createdAt": "2020-11-25T10:17:44Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/AuthorisedCreateEventOperation.java", "diffHunk": "@@ -76,8 +76,7 @@ public CaseDetails createCaseEvent(String caseReference,\n \n         verifyUpsertAccess(content.getEvent(), content.getData(), existingCaseDetails, caseTypeDefinition, userRoles);\n \n-        final CaseDetails caseDetails = createEventOperation.createCaseEvent(caseReference,\n-                                                                             content);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MzE3MA=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTc1MDM3OnYy", "diffSide": "LEFT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/ClassifiedCreateEventOperation.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo0MTowNFrOH5HewQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoxODo0OVrOH5seCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MzQ0MQ==", "bodyText": "Could you please take developed  version  and exclude this file from the pr? unless checkstyle crash :)", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r529653441", "createdAt": "2020-11-24T15:41:04Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/ClassifiedCreateEventOperation.java", "diffHunk": "@@ -26,8 +26,7 @@ public ClassifiedCreateEventOperation(@Qualifier(\"default\") CreateEventOperation\n     @Override\n     public CaseDetails createCaseEvent(String caseReference,\n                                        CaseDataContent content) {\n-        final CaseDetails caseDetails = createEventOperation.createCaseEvent(caseReference,\n-                                                                           content);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI1OTQ2NQ==", "bodyText": "reverted to develop version", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530259465", "createdAt": "2020-11-25T10:18:49Z", "author": {"login": "kiran-yenigala-hmcts"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/service/createevent/ClassifiedCreateEventOperation.java", "diffHunk": "@@ -26,8 +26,7 @@ public ClassifiedCreateEventOperation(@Qualifier(\"default\") CreateEventOperation\n     @Override\n     public CaseDetails createCaseEvent(String caseReference,\n                                        CaseDataContent content) {\n-        final CaseDetails caseDetails = createEventOperation.createCaseEvent(caseReference,\n-                                                                           content);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MzQ0MQ=="}, "originalCommit": {"oid": "b1bed79d29e3909c26a9b3d66da046f2514c1511"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyOTg0NTIxOnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/std/CaseDataContent.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwOTo1MzowMFrOH6TyjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMjozNDowOFrOH6Zl7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwMzY5Mw==", "bodyText": "Why whole userToken?? we only need invoker's user details right?\nit\u2019s a bit odd to pass user auth token around systems rather than required userInfo elements.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530903693", "createdAt": "2020-11-26T09:53:00Z", "author": {"login": "smathangi"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/std/CaseDataContent.java", "diffHunk": "@@ -34,6 +34,9 @@\n     @JsonProperty(\"case_reference\")\n     private String caseReference;\n \n+    @JsonProperty(\"on_behalf_of_token\")\n+    private String onBehalfOfUserToken;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ba29ce9badfea85499d5e980a809a5440843385"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkyOTkyOA==", "bodyText": "hi @smathangi initial request from architects was to pass the whole token. I also thought userId would be enough so we started with userId.\nThe complication we found was that the IdamClient getUserDetails API wants the whole token in input to retrieve the user info, not the userId.\nTherefore we moved back to the initial suggestion of passing the whole token.\nI now also think that the benefit of passing the whole token is that the client can prove that he's authorised to use on_behalf_of because he has a valid token for that user\nI'm not adamant on this though, I guess there are pros and cons for both approaches. What do you think?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530929928", "createdAt": "2020-11-26T10:33:11Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/std/CaseDataContent.java", "diffHunk": "@@ -34,6 +34,9 @@\n     @JsonProperty(\"case_reference\")\n     private String caseReference;\n \n+    @JsonProperty(\"on_behalf_of_token\")\n+    private String onBehalfOfUserToken;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwMzY5Mw=="}, "originalCommit": {"oid": "1ba29ce9badfea85499d5e980a809a5440843385"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDk1Mzk2OA==", "bodyText": "CCD api is not using that token for authentication / authorisation purpose. So, to me what's the need to expose to CCD ?  Also one extra call to IDAM from ccd in the e2e user flow. Instead the caller (MCA) can actually pass all required bits (userid, first_name, lastName) in the payload.\nI just thought of flagging this - either way is fine with me. (as architects already discussed )", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530953968", "createdAt": "2020-11-26T11:12:28Z", "author": {"login": "smathangi"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/std/CaseDataContent.java", "diffHunk": "@@ -34,6 +34,9 @@\n     @JsonProperty(\"case_reference\")\n     private String caseReference;\n \n+    @JsonProperty(\"on_behalf_of_token\")\n+    private String onBehalfOfUserToken;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwMzY5Mw=="}, "originalCommit": {"oid": "1ba29ce9badfea85499d5e980a809a5440843385"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDk5ODc2NQ==", "bodyText": "Just had a chat with Mario. For now we can keep the implementation as it is.\nIt can be improved a bit later once architects give it a thought on new proposals ( 1. Caller (mca) pass valid data for all required fields . Or 2. Caller pass userId and CCD uses it's own system-user-token to retrieve userInfo for a given userId).", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1225#discussion_r530998765", "createdAt": "2020-11-26T12:34:08Z", "author": {"login": "smathangi"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/std/CaseDataContent.java", "diffHunk": "@@ -34,6 +34,9 @@\n     @JsonProperty(\"case_reference\")\n     private String caseReference;\n \n+    @JsonProperty(\"on_behalf_of_token\")\n+    private String onBehalfOfUserToken;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwMzY5Mw=="}, "originalCommit": {"oid": "1ba29ce9badfea85499d5e980a809a5440843385"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3649, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}