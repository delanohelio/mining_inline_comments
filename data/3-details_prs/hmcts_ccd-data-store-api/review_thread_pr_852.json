{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDM2NTgz", "number": 852, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzozOTowN1rODqM-Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwOTozOToxOVrODrkBhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5Mjk0OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzozOTowN1rOF5zwjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzozOTowN1rOF5zwjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTE2NA==", "bodyText": "This shouldn't be ANYTHING_PRESENT. We can know what to expect for this attribute in the response, and it is the same env variable as what we used for the request.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161164", "createdAt": "2020-03-22T23:39:07Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",\n+          \"email\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5MzEyOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzozOTozMFrOF5zwqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDozNjozOFrOF7VBDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTE5NA==", "bodyText": "This shouldn't be ANYTHING_PRESENT. We can know what to expect for this attribute in the response, and it is the same uid as what we used for the request.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161194", "createdAt": "2020-03-22T23:39:30Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1NDYzOA==", "bodyText": "${[scenarioContext][theInvokingUser][id]}", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r397754638", "createdAt": "2020-03-25T10:36:38Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTE5NA=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5Mzc4OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MDozNVrOF5zxCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MDozNVrOF5zxCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTI5MQ==", "bodyText": "These should also be consistent predefined values we can specifically expect in the response.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161291", "createdAt": "2020-03-22T23:40:35Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",\n+          \"email\": \"[[ANYTHING_PRESENT]]\",\n+          \"forename\": \"[[ANYTHING_PRESENT]]\",\n+          \"surname\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5NDAyOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MDo0OFrOF5zxJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MDo0OFrOF5zxJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTMxOA==", "bodyText": "same as above", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161318", "createdAt": "2020-03-22T23:40:48Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",\n+          \"email\": \"[[ANYTHING_PRESENT]]\",\n+          \"forename\": \"[[ANYTHING_PRESENT]]\",\n+          \"surname\": \"[[ANYTHING_PRESENT]]\",\n+          \"roles\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5NDU1OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MTozNVrOF5zxcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0MTozNVrOF5zxcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTM5NA==", "bodyText": "casetypes under BEFTA_JURISDICTION_1 are predefined. Please expressly list them as expected.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161394", "createdAt": "2020-03-22T23:41:35Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"[[ANYTHING_PRESENT]]\",\n+          \"email\": \"[[ANYTHING_PRESENT]]\",\n+          \"forename\": \"[[ANYTHING_PRESENT]]\",\n+          \"surname\": \"[[ANYTHING_PRESENT]]\",\n+          \"roles\": \"[[ANYTHING_PRESENT]]\",\n+          \"defaultService\": null\n+        }\n+      },\n+      \"channels\": null,\n+      \"jurisdictions\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": \"[[ANYTHING_PRESENT]]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5NzQwOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/F-051.feature", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0NTo0MlrOF5zy9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMTo0MToxMFrOF6ZJVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTc4MQ==", "bodyText": "This is a potential breaking change and should be checked if there is any consumer of this operation relying on the previous behaviour.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396161781", "createdAt": "2020-03-22T23:45:42Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/F-051.feature", "diffHunk": "@@ -16,13 +16,12 @@ Background:\n \n \n   @S-109\n-  Scenario: must return appropriate negative response for a user not having a profile in CCD\n+  Scenario: must return appropriate user setting from idam role for a user not having a profile in CCD\n     Given a user with [no profile in CCD]\n     When a request is prepared with appropriate values\n-    And the request [uses a Case ID that doesn\u2019t exist in CCD]\n     And it is submitted to call the [Get default settings for user] operation of [CCD Data Store]\n-    Then a negative response is received\n-    And the response [has the 403 return code]\n+    Then a positive response is received\n+    And the response [has the 200 return code]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjAzOQ==", "bodyText": "The line 24 can be removed, since, from a behavioural specification point of view, \"Then a positive response is received\" would be sufficient.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162039", "createdAt": "2020-03-22T23:48:23Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/F-051.feature", "diffHunk": "@@ -16,13 +16,12 @@ Background:\n \n \n   @S-109\n-  Scenario: must return appropriate negative response for a user not having a profile in CCD\n+  Scenario: must return appropriate user setting from idam role for a user not having a profile in CCD\n     Given a user with [no profile in CCD]\n     When a request is prepared with appropriate values\n-    And the request [uses a Case ID that doesn\u2019t exist in CCD]\n     And it is submitted to call the [Get default settings for user] operation of [CCD Data Store]\n-    Then a negative response is received\n-    And the response [has the 403 return code]\n+    Then a positive response is received\n+    And the response [has the 200 return code]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTc4MQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMzc4MQ==", "bodyText": "will do, someone may need to retrospectively go through all current scenarios as those 2 lines are seen together throughout the test suite", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396533781", "createdAt": "2020-03-23T15:23:25Z", "author": {"login": "noronhaa"}, "path": "src/aat/resources/features/F-051/F-051.feature", "diffHunk": "@@ -16,13 +16,12 @@ Background:\n \n \n   @S-109\n-  Scenario: must return appropriate negative response for a user not having a profile in CCD\n+  Scenario: must return appropriate user setting from idam role for a user not having a profile in CCD\n     Given a user with [no profile in CCD]\n     When a request is prepared with appropriate values\n-    And the request [uses a Case ID that doesn\u2019t exist in CCD]\n     And it is submitted to call the [Get default settings for user] operation of [CCD Data Store]\n-    Then a negative response is received\n-    And the response [has the 403 return code]\n+    Then a positive response is received\n+    And the response [has the 200 return code]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTc4MQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc3MzcxOQ==", "bodyText": "you're right in that.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396773719", "createdAt": "2020-03-23T21:41:10Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/F-051.feature", "diffHunk": "@@ -16,13 +16,12 @@ Background:\n \n \n   @S-109\n-  Scenario: must return appropriate negative response for a user not having a profile in CCD\n+  Scenario: must return appropriate user setting from idam role for a user not having a profile in CCD\n     Given a user with [no profile in CCD]\n     When a request is prepared with appropriate values\n-    And the request [uses a Case ID that doesn\u2019t exist in CCD]\n     And it is submitted to call the [Get default settings for user] operation of [CCD Data Store]\n-    Then a negative response is received\n-    And the response [has the 403 return code]\n+    Then a positive response is received\n+    And the response [has the 200 return code]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MTc4MQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTc5OTc5OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/F-102.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0ODo1NVrOF5z0Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0ODo1NVrOF5z0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjEwMw==", "bodyText": "line 61 can be removed", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162103", "createdAt": "2020-03-22T23:48:55Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/F-102.feature", "diffHunk": "@@ -50,3 +50,14 @@ Feature: F-102: Get jurisdictions available to the user\n     And the response [contains HTTP 400 Bad Request]\n     And the response [contains an error message : Access can only be 'create', 'read' or 'update']\n     And the response has all other details as expected\n+\n+  @S-580\n+  Scenario: must return a list of jurisdictions for a valid user with no user profile\n+    Given a user with [appropriate idam roles but no CCD user profile]\n+    When a request is prepared with appropriate values\n+    And the request [has CREATE as case access parameter]\n+    And it is submitted to call the [Get jurisdictions available to the user] operation of [CCD Data Store]\n+    Then a positive response is received\n+    And the response [contains HTTP 200 Ok status code]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTgwMDE5OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0OTozOVrOF5z0dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo0OTozOVrOF5z0dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjE2Ng==", "bodyText": "password used is for another user", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162166", "createdAt": "2020-03-22T23:49:39Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,54 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_PWD]]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTgwMTQyOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/S-580.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MTozMFrOF5z1JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MTozMFrOF5z1JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjM0MA==", "bodyText": "this will inherit the password of another user specified in the parent object, which is not good. every user should use its own password env variable.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162340", "createdAt": "2020-03-22T23:51:30Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTgwMTk5OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/S-580.td.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MjoyNFrOF5z1fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMTozOTo0OVrOF6ZG4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjQzMQ==", "bodyText": "these can be expected to be specific values, couldn't them?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162431", "createdAt": "2020-03-22T23:52:24Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU0MzIyNg==", "bodyText": "we are specifically looking for the list of jurisdictions here specifically rather than the entire list of events and states etc", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396543226", "createdAt": "2020-03-23T15:35:32Z", "author": {"login": "noronhaa"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjQzMQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc3MzA5MQ==", "bodyText": "The response should be checked in full. Returning a wrong list of events and states is a bug in the api even if we return the correct data in the rest of the response.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396773091", "createdAt": "2020-03-23T21:39:49Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjQzMQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTgwMjE0OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/S-580.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MjozMVrOF5z1jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MjozMVrOF5z1jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjQ0Nw==", "bodyText": "these can be expected to be specific values, couldn't they?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162447", "createdAt": "2020-03-22T23:52:31Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",\n+              \"searchAliasFields\": [],\n+              \"security_classification\": null,\n+              \"case_fields\": [],\n+              \"printable_document_url\": null,\n+              \"acls\": [\n+                {\n+                  \"role\": \"caseworker-befta_jurisdiction_1\",\n+                  \"create\": true,\n+                  \"read\": true,\n+                  \"update\": true,\n+                  \"delete\": false\n+                }\n+              ]\n+            },\n+            {\n+              \"id\": \"CASE_TYPE_WITH_NO_CASES\",\n+              \"description\": \"Create a case of type CASE_TYPE_WITH_NO_CASES\",\n+              \"version\": null,\n+              \"name\": \"CT With No Cases -Don't Create\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTgwMzA2OnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/S-580.td.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMzo1MzoyMVrOF5z1-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDozODoyNVrOF7VFFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjU1NQ==", "bodyText": "better make a dynamic reference to the field in the request, to avoid copy-paste duplication of the same value.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r396162555", "createdAt": "2020-03-22T23:53:21Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",\n+              \"searchAliasFields\": [],\n+              \"security_classification\": null,\n+              \"case_fields\": [],\n+              \"printable_document_url\": null,\n+              \"acls\": [\n+                {\n+                  \"role\": \"caseworker-befta_jurisdiction_1\",\n+                  \"create\": true,\n+                  \"read\": true,\n+                  \"update\": true,\n+                  \"delete\": false\n+                }\n+              ]\n+            },\n+            {\n+              \"id\": \"CASE_TYPE_WITH_NO_CASES\",\n+              \"description\": \"Create a case of type CASE_TYPE_WITH_NO_CASES\",\n+              \"version\": null,\n+              \"name\": \"CT With No Cases -Don't Create\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",\n+              \"searchAliasFields\": [],\n+              \"security_classification\": null,\n+              \"case_fields\": [],\n+              \"printable_document_url\": null,\n+              \"acls\": [\n+                {\n+                  \"role\": \"caseworker-befta_jurisdiction_1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1NTY3MQ==", "bodyText": "forget about it. that is not a data in the scenario context", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r397755671", "createdAt": "2020-03-25T10:38:25Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/S-580.td.json", "diffHunk": "@@ -0,0 +1,78 @@\n+{\n+  \"_guid_\": \"S-580\",\n+  \"_extends_\": \"F-102_Test_Data_Base\",\n+  \"title\": \"Get jurisdictions available to the user\",\n+  \"specs\": [\n+    \"appropriate idam roles but no CCD user profile\",\n+    \"has CREATE as case access parameter\",\n+    \"contains HTTP 200 Ok status code\",\n+    \"contains the list of jurisdictions a user has access to\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\"\n+  },\n+  \"request\": {\n+    \"_extends_\": \"Common_Request\",\n+    \"queryParams\": {\n+      \"access\": \"create\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_200_Response\",\n+    \"body\": {\n+      \"arrayInMap\": [\n+        {\n+          \"id\": \"BEFTA_JURISDICTION_1\",\n+          \"name\": \"BEFTA_JURISDICTION_1\",\n+          \"description\": \"Content for the Test Jurisdiction.\",\n+          \"caseTypes\": [\n+            {\n+              \"id\": \"BEFTA_CASETYPE_1_1\",\n+              \"description\": \"Create a case of type BEFTA_CASETYPE_1_1\",\n+              \"version\": null,\n+              \"name\": \"BEFTA Case Type 1 1\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",\n+              \"searchAliasFields\": [],\n+              \"security_classification\": null,\n+              \"case_fields\": [],\n+              \"printable_document_url\": null,\n+              \"acls\": [\n+                {\n+                  \"role\": \"caseworker-befta_jurisdiction_1\",\n+                  \"create\": true,\n+                  \"read\": true,\n+                  \"update\": true,\n+                  \"delete\": false\n+                }\n+              ]\n+            },\n+            {\n+              \"id\": \"CASE_TYPE_WITH_NO_CASES\",\n+              \"description\": \"Create a case of type CASE_TYPE_WITH_NO_CASES\",\n+              \"version\": null,\n+              \"name\": \"CT With No Cases -Don't Create\",\n+              \"jurisdiction\": null,\n+              \"events\": \"[[ANYTHING_PRESENT]]\",\n+              \"states\": \"[[ANYTHING_PRESENT]]\",\n+              \"searchAliasFields\": [],\n+              \"security_classification\": null,\n+              \"case_fields\": [],\n+              \"printable_document_url\": null,\n+              \"acls\": [\n+                {\n+                  \"role\": \"caseworker-befta_jurisdiction_1\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2MjU1NQ=="}, "originalCommit": {"oid": "109f2c4b8097ed5ca80591cf47ec7d898758d0d1"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjE5MzExOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-051/S-109.td.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMjo0MTo1NlrOF7ZMBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMjo0MTo1NlrOF7ZMBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgyMjk4Mg==", "bodyText": "we could use\n\"email\": \"${[scenarioContext][theInvokingUser][username]}\",", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r397822982", "createdAt": "2020-03-25T12:41:56Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-051/S-109.td.json", "diffHunk": "@@ -1,36 +1,481 @@\n {\n-\t\"_guid_\": \"S-109\",\n-\t\"_extends_\": \"Base_Expecting_403\",\n-\t\"title\": \"must return appropriate negative response for a user not having a profile in CCD\",\n+  \"_guid_\": \"S-109\",\n+  \"title\": \"must return appropriate user setting from idam role for a user not having a profile in CCD\",\n+  \"_extends_\": \"Base_Expecting_200\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get default settings for user\",\n+  \"method\": \"GET\",\n+  \"uri\": \"/caseworkers/{uid}/profile\",\n+  \"specs\": [\n+    \"no profile in CCD\",\n+    \"uses the Case ID of the case just created\",\n+    \"has the 200 return code\"\n+  ],\n+  \"user\": {\n+    \"username\": \"befta.caseworker.1.noprofile@gmail.com\",\n+    \"password\": \"[[$CCD_BEFTA_CASEWORKER_1_NO_PROFILE_PWD]]\"\n+  },\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"uid\": \"[[DYNAMIC]]\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"body\": {\n+      \"user\": {\n+        \"idam\": {\n+          \"id\": \"${[scenarioContext][theInvokingUser][id]}\",\n+          \"email\": \"befta.caseworker.1.noprofile@gmail.com\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e842b5cde4c49f8bc35635f80bced56e7a420283"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDA1NTczOnYy", "diffSide": "RIGHT", "path": "src/aat/resources/features/F-102/F-102.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwOTozOToxOVrOF7-e8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwOTozOToxOVrOF7-e8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQzNDAzNA==", "bodyText": "must return a list of jurisdictions for a valid user with no CCD user profile", "url": "https://github.com/hmcts/ccd-data-store-api/pull/852#discussion_r398434034", "createdAt": "2020-03-26T09:39:19Z", "author": {"login": "MSancaktutar"}, "path": "src/aat/resources/features/F-102/F-102.feature", "diffHunk": "@@ -50,3 +50,13 @@ Feature: F-102: Get jurisdictions available to the user\n     And the response [contains HTTP 400 Bad Request]\n     And the response [contains an error message : Access can only be 'create', 'read' or 'update']\n     And the response has all other details as expected\n+\n+  @S-580\n+  Scenario: must return a list of jurisdictions for a valid user with no user profile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d1cde3b84088fba686a81e596bf0637a512176"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3915, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}