{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjUzOTU3", "number": 1042, "title": "Rdm 2676", "bodyText": "RDM-2676: Validate CCD reference number when entered as a CaseLink\n   [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676).", "createdAt": "2020-08-03T15:44:27Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042", "merged": true, "mergeCommit": {"oid": "3141519068b604bc3b6e9edd14d6dbdf661b2d01"}, "closed": true, "closedAt": "2020-08-12T22:02:48Z", "author": {"login": "Thor-tech-of-metal"}, "timelineItems": {"totalCount": 49, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6Qt5RAH2gAyNDYyMjUzOTU3OmM2YzRlOTYwNmVhZTg0NTMyMDk1ZDE3NTVkYTE3ZjEwZGFjMmFmYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-NW_iAFqTQ2NjA0MzkyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c6c4e9606eae84532095d1755da17f10dac2afbc", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c6c4e9606eae84532095d1755da17f10dac2afbc", "committedDate": "2020-07-31T09:22:18Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ad468d95f54e16e8eebb47b89a75cc657d45465", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/2ad468d95f54e16e8eebb47b89a75cc657d45465", "committedDate": "2020-07-31T11:39:05Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a9fb8f8f89e150fb2572df83cf5e878ca2a07b9", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/2a9fb8f8f89e150fb2572df83cf5e878ca2a07b9", "committedDate": "2020-08-03T10:29:13Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd0c7657b0556b5a9a9f2851b1bf78132ee42464", "author": {"user": {"login": "yashikno", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/bd0c7657b0556b5a9a9f2851b1bf78132ee42464", "committedDate": "2020-08-03T10:50:02Z", "message": "Merge commit '494c12479ddc24adae2e892c6e873acd88cfdf0f' into HEAD"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed559a68a9dce9361d8cce1058b295fa95cf24c", "author": {"user": {"login": "hmcts-jenkins-cdm[bot]", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/eed559a68a9dce9361d8cce1058b295fa95cf24c", "committedDate": "2020-08-03T10:50:24Z", "message": "Bumping chart version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee0bc474fcdcd3045a0a50a228ac739e5cbeeded", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/ee0bc474fcdcd3045a0a50a228ac739e5cbeeded", "committedDate": "2020-08-03T11:17:45Z", "message": "Merge branch 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98c1792e49244c7ec1f1651cb86a3be6afedf5b3", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/98c1792e49244c7ec1f1651cb86a3be6afedf5b3", "committedDate": "2020-08-03T11:20:41Z", "message": "Merge branch 'RDM-2676' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c4ac8285aae262cb7afa6a5b079871302d64cfb", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/0c4ac8285aae262cb7afa6a5b079871302d64cfb", "committedDate": "2020-08-03T13:57:12Z", "message": "introduced PredefinedTypeField validator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "020ab046a41be2420b757dff4ad04d1b6d9f7ffe", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/020ab046a41be2420b757dff4ad04d1b6d9f7ffe", "committedDate": "2020-08-03T13:57:26Z", "message": "Merge remote-tracking branch 'origin/RDM-2676' into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6a8d8a1dd24c9729da040e59c0ce38edbccde29", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c6a8d8a1dd24c9729da040e59c0ce38edbccde29", "committedDate": "2020-08-03T14:43:42Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b78dd0ca26580d100ae998181b2531a3d49473f1", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/b78dd0ca26580d100ae998181b2531a3d49473f1", "committedDate": "2020-08-03T14:59:20Z", "message": "polished code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be52bc5f1856d0791b8d63a2589ecc91507495b0", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/be52bc5f1856d0791b8d63a2589ecc91507495b0", "committedDate": "2020-08-03T15:04:41Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b838d77530a9a0884b027b891d9ade541b7cc2", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/80b838d77530a9a0884b027b891d9ade541b7cc2", "committedDate": "2020-08-03T15:06:53Z", "message": "Merge branches 'RDM-2676' and 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac225f640239f1e14af5c26ef333a5c249e5c5b", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/aac225f640239f1e14af5c26ef333a5c249e5c5b", "committedDate": "2020-08-03T15:09:49Z", "message": "polished code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eadb4f461dadcd7f79e9b6660a5f1fb89a2112a5", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/eadb4f461dadcd7f79e9b6660a5f1fb89a2112a5", "committedDate": "2020-08-03T15:15:01Z", "message": "Merge branch 'RDM-2676' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d834f25c264ee5e365e40d46b43a3f4e9b76cc61", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/d834f25c264ee5e365e40d46b43a3f4e9b76cc61", "committedDate": "2020-08-03T15:41:02Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4313cd7841beb1ca7c06975e113fdf2811f40bba", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/4313cd7841beb1ca7c06975e113fdf2811f40bba", "committedDate": "2020-08-04T10:11:53Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0e8f41f71b9e083cd7838d7be1c67c33edd4468", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c0e8f41f71b9e083cd7838d7be1c67c33edd4468", "committedDate": "2020-08-04T12:04:32Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d9639e5ac048a604fab6a4f5d4f3dbc48c0ca9b", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/3d9639e5ac048a604fab6a4f5d4f3dbc48c0ca9b", "committedDate": "2020-08-04T13:58:33Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae1f9ebd8ab6274d8105c66f8ec8fa96e723f386", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/ae1f9ebd8ab6274d8105c66f8ec8fa96e723f386", "committedDate": "2020-08-04T14:35:18Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "246604c997f2a50c8d6f4be344c7dba68e0cd7c9", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/246604c997f2a50c8d6f4be344c7dba68e0cd7c9", "committedDate": "2020-08-05T12:20:22Z", "message": "added method to Repository to find case without applying access control"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb5ab54ae5f92995650169cc20784a97e423b186", "author": {"user": {"login": "mario-paniccia", "name": "Mario Paniccia"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/fb5ab54ae5f92995650169cc20784a97e423b186", "committedDate": "2020-08-05T13:13:20Z", "message": "added method to Repository to find case without applying access control"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5704ba458104e9552075118b67f5a3b81c57e5ee", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/5704ba458104e9552075118b67f5a3b81c57e5ee", "committedDate": "2020-08-05T13:58:47Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fbf427576c519d654f7dd3d59b7b1de2c47933e", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/9fbf427576c519d654f7dd3d59b7b1de2c47933e", "committedDate": "2020-08-05T14:24:46Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/2bba37ac1bd52b7a299c7b7a7bc62995fc40e035", "committedDate": "2020-08-05T15:00:16Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE0NzAw", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462414700", "createdAt": "2020-08-06T10:58:24Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDo1ODoyNFrOG8urMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDo1ODoyNFrOG8urMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzMjQ2NA==", "bodyText": "this seems a good candidate for a utility method put in a utility class", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466332464", "createdAt": "2020-08-06T10:58:24Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/types/TextCaseReferenceCaseLinkValidator.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package uk.gov.hmcts.ccd.domain.types;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;\n+import uk.gov.hmcts.ccd.domain.service.common.CaseService;\n+import uk.gov.hmcts.ccd.endpoint.exceptions.ResourceNotFoundException;\n+\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+import javax.inject.Singleton;\n+import java.util.Collections;\n+import java.util.List;\n+\n+@Named(\"TextCaseReferenceCaseLinkValidator\")\n+@Singleton\n+public class TextCaseReferenceCaseLinkValidator implements PredefinedTypeFieldValidator {\n+\n+    private CaseService caseService;\n+    private TextValidator textValidator;\n+\n+    @Inject\n+    public TextCaseReferenceCaseLinkValidator(@Qualifier(\"TextValidator\") TextValidator textValidator, CaseService caseService) {\n+        this.caseService = caseService;\n+        this.textValidator = textValidator;\n+    }\n+\n+    @Override\n+    public List<ValidationResult> validate(final String dataFieldId,\n+                                           final JsonNode dataValue,\n+                                           final CaseFieldDefinition caseFieldDefinition) {\n+\n+        List<ValidationResult> validationResults = textValidator.validate(dataFieldId, dataValue, caseFieldDefinition);\n+        if (validationResults.isEmpty() && !textValidator.isNullOrEmpty(dataValue)) {\n+            final String value = dataValue.textValue();\n+            return isAnExistingCase(value, dataFieldId);\n+        }\n+        return validationResults;\n+    }\n+\n+    private List<ValidationResult> isAnExistingCase(final String value, final String dataFieldId) {\n+        try {\n+            this.caseService.getCaseDetailsByCaseReference(formatCaseReference(value));\n+            return Collections.emptyList();\n+        } catch (ResourceNotFoundException resourceNotFoundException) {\n+            return Collections.singletonList(\n+                new ValidationResult(\n+                    value + \" does not correspond to an existing CCD case. Please update before proceeding\",\n+                    dataFieldId)\n+            );\n+        }\n+    }\n+\n+    private String formatCaseReference(String caseReference) {\n+        if (caseReference.contains(\"-\")) {\n+            return String.join(\"\", caseReference.split(\"-\"));\n+        }\n+        return caseReference;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE1NjA3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462415607", "createdAt": "2020-08-06T10:59:50Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDo1OTo1MFrOG8ut6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDo1OTo1MFrOG8ut6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzMzE2MQ==", "bodyText": "what happens in case of other exceptions that are not ResourceNotFoundException? we should test that out and decide what happens in that case", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466333161", "createdAt": "2020-08-06T10:59:50Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/types/TextCaseReferenceCaseLinkValidator.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package uk.gov.hmcts.ccd.domain.types;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;\n+import uk.gov.hmcts.ccd.domain.service.common.CaseService;\n+import uk.gov.hmcts.ccd.endpoint.exceptions.ResourceNotFoundException;\n+\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+import javax.inject.Singleton;\n+import java.util.Collections;\n+import java.util.List;\n+\n+@Named(\"TextCaseReferenceCaseLinkValidator\")\n+@Singleton\n+public class TextCaseReferenceCaseLinkValidator implements PredefinedTypeFieldValidator {\n+\n+    private CaseService caseService;\n+    private TextValidator textValidator;\n+\n+    @Inject\n+    public TextCaseReferenceCaseLinkValidator(@Qualifier(\"TextValidator\") TextValidator textValidator, CaseService caseService) {\n+        this.caseService = caseService;\n+        this.textValidator = textValidator;\n+    }\n+\n+    @Override\n+    public List<ValidationResult> validate(final String dataFieldId,\n+                                           final JsonNode dataValue,\n+                                           final CaseFieldDefinition caseFieldDefinition) {\n+\n+        List<ValidationResult> validationResults = textValidator.validate(dataFieldId, dataValue, caseFieldDefinition);\n+        if (validationResults.isEmpty() && !textValidator.isNullOrEmpty(dataValue)) {\n+            final String value = dataValue.textValue();\n+            return isAnExistingCase(value, dataFieldId);\n+        }\n+        return validationResults;\n+    }\n+\n+    private List<ValidationResult> isAnExistingCase(final String value, final String dataFieldId) {\n+        try {\n+            this.caseService.getCaseDetailsByCaseReference(formatCaseReference(value));\n+            return Collections.emptyList();\n+        } catch (ResourceNotFoundException resourceNotFoundException) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE3MDA5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462417009", "createdAt": "2020-08-06T11:01:58Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowMTo1OVrOG8uyDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowMTo1OVrOG8uyDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzNDIyMQ==", "bodyText": "Please update before proceeding is more a UI type of error message. But this validator is supposed to be generic. I would remove that from the message", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466334221", "createdAt": "2020-08-06T11:01:59Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/types/TextCaseReferenceCaseLinkValidator.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package uk.gov.hmcts.ccd.domain.types;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;\n+import uk.gov.hmcts.ccd.domain.service.common.CaseService;\n+import uk.gov.hmcts.ccd.endpoint.exceptions.ResourceNotFoundException;\n+\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+import javax.inject.Singleton;\n+import java.util.Collections;\n+import java.util.List;\n+\n+@Named(\"TextCaseReferenceCaseLinkValidator\")\n+@Singleton\n+public class TextCaseReferenceCaseLinkValidator implements PredefinedTypeFieldValidator {\n+\n+    private CaseService caseService;\n+    private TextValidator textValidator;\n+\n+    @Inject\n+    public TextCaseReferenceCaseLinkValidator(@Qualifier(\"TextValidator\") TextValidator textValidator, CaseService caseService) {\n+        this.caseService = caseService;\n+        this.textValidator = textValidator;\n+    }\n+\n+    @Override\n+    public List<ValidationResult> validate(final String dataFieldId,\n+                                           final JsonNode dataValue,\n+                                           final CaseFieldDefinition caseFieldDefinition) {\n+\n+        List<ValidationResult> validationResults = textValidator.validate(dataFieldId, dataValue, caseFieldDefinition);\n+        if (validationResults.isEmpty() && !textValidator.isNullOrEmpty(dataValue)) {\n+            final String value = dataValue.textValue();\n+            return isAnExistingCase(value, dataFieldId);\n+        }\n+        return validationResults;\n+    }\n+\n+    private List<ValidationResult> isAnExistingCase(final String value, final String dataFieldId) {\n+        try {\n+            this.caseService.getCaseDetailsByCaseReference(formatCaseReference(value));\n+            return Collections.emptyList();\n+        } catch (ResourceNotFoundException resourceNotFoundException) {\n+            return Collections.singletonList(\n+                new ValidationResult(\n+                    value + \" does not correspond to an existing CCD case. Please update before proceeding\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE3NjU2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462417656", "createdAt": "2020-08-06T11:03:03Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowMzowM1rOG8uz-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowMzowM1rOG8uz-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzNDcxMw==", "bodyText": "we need to add unite tests here for the unsecured case we introduced", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466334713", "createdAt": "2020-08-06T11:03:03Z", "author": {"login": "mario-paniccia"}, "path": "src/test/java/uk/gov/hmcts/ccd/data/casedetails/query/CaseDetailsQueryBuilderFactoryTest.java", "diffHunk": "@@ -67,7 +67,7 @@ void setUp() {\n         @Test\n         @DisplayName(\"should secure new builder instance with user authorisation\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE5NDQw", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462419440", "createdAt": "2020-08-06T11:06:01Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowNjowMVrOG8u5Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowNjowMVrOG8u5Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzNjEwMg==", "bodyText": "CaseDataValidatorTest is a generic class, should not contain tests for a specific field like this test. Le't make it more generic", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466336102", "createdAt": "2020-08-06T11:06:01Z", "author": {"login": "mario-paniccia"}, "path": "src/test/java/uk/gov/hmcts/ccd/domain/types/CaseDataValidatorTest.java", "diffHunk": "@@ -338,6 +338,24 @@ public void invalidCollection_notObject() throws Exception {\n         assertThat(result1.getFieldId(), equalTo(\"Initials.1\"));\n     }\n \n+    @Test\n+    public void shouldFailForTextCaseReference() throws Exception {\n+        final String DATA = \"{\\n\" +\n+            \"        \\\"CaseReference\\\": \\\"1596XXXXX1048-4059XXXOOOO\\\"\\n\" +\n+            \"      }\";\n+\n+        final Map<String, JsonNode> values = MAPPER.readValue(DATA, new TypeReference<HashMap<String, JsonNode>>() {\n+        });\n+        final List<ValidationResult> results = caseDataValidator.validate(values, caseFields);\n+        assertEquals(results.toString(), 1, results.size());\n+\n+        final ValidationResult result0 = results.get(0);\n+        assertThat(result0.getFieldId(), equalTo(\"CaseReference\"));\n+        assertThat(result0.getErrorMessage(),\n+            equalTo(\"The data entered is not valid for this type of field, please delete and re-enter using only valid data\")\n+        );\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE5NzI2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462419726", "createdAt": "2020-08-06T11:06:27Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowNjoyOFrOG8u6Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMTowNjoyOFrOG8u6Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzNjI5NQ==", "bodyText": "we need to introduce more tests. We have made an important change in the class logic. Please test it well", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466336295", "createdAt": "2020-08-06T11:06:28Z", "author": {"login": "mario-paniccia"}, "path": "src/test/java/uk/gov/hmcts/ccd/domain/types/CaseDataValidatorTest.java", "diffHunk": "@@ -338,6 +338,24 @@ public void invalidCollection_notObject() throws Exception {\n         assertThat(result1.getFieldId(), equalTo(\"Initials.1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDE5ODcy", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462419872", "createdAt": "2020-08-06T11:06:43Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDM4NTU5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462438559", "createdAt": "2020-08-06T11:39:37Z", "commit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTMzNTU0", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462533554", "createdAt": "2020-08-06T13:45:55Z", "commit": {"oid": "be797e01d83b1083a8900ff3182b14477c05a32d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo0NTo1NVrOG80PEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo0NTo1NVrOG80PEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMzU3MA==", "bodyText": "DONE", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r466423570", "createdAt": "2020-08-06T13:45:55Z", "author": {"login": "Thor-tech-of-metal"}, "path": "src/test/java/uk/gov/hmcts/ccd/data/casedetails/query/CaseDetailsQueryBuilderFactoryTest.java", "diffHunk": "@@ -67,7 +67,7 @@ void setUp() {\n         @Test\n         @DisplayName(\"should secure new builder instance with user authorisation\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMzNDcxMw=="}, "originalCommit": {"oid": "2bba37ac1bd52b7a299c7b7a7bc62995fc40e035"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be797e01d83b1083a8900ff3182b14477c05a32d", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/be797e01d83b1083a8900ff3182b14477c05a32d", "committedDate": "2020-08-06T13:46:46Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTQzMzYx", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-462543361", "createdAt": "2020-08-06T13:56:18Z", "commit": {"oid": "be797e01d83b1083a8900ff3182b14477c05a32d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c565dfeea2255d097a326857831737a976e7ad2f", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c565dfeea2255d097a326857831737a976e7ad2f", "committedDate": "2020-08-06T13:58:13Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6b6d3f199e3519daf09e21f61b4e1a2b51d1ae4", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/d6b6d3f199e3519daf09e21f61b4e1a2b51d1ae4", "committedDate": "2020-08-07T10:07:49Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d28275c557a81587765019b7128416f3d47e012", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/9d28275c557a81587765019b7128416f3d47e012", "committedDate": "2020-08-07T11:47:37Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/784d7ff7dcc5d1386ab73f0d400b8f5725a0796b", "committedDate": "2020-08-07T14:44:07Z", "message": " RDM-2676: Validate CCD reference number when entered as a CaseLink\n\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [RDM-2676] (https://tools.hmcts.net/jira/browse/RDM-2676)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDgyNDE5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-464082419", "createdAt": "2020-08-10T09:34:21Z", "commit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODgwMjM2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-464880236", "createdAt": "2020-08-11T09:02:09Z", "commit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjowOVrOG-u5hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjowOVrOG-u5hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQzMzI4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class CaseReferenceUtils {\n          \n          \n            \n            public class CommonUtils {", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r468433287", "createdAt": "2020-08-11T09:02:09Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/common/CaseReferenceUtils.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package uk.gov.hmcts.ccd.domain.model.common;\n+\n+public class CaseReferenceUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODgwNDk2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-464880496", "createdAt": "2020-08-11T09:02:31Z", "commit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjozMVrOG-u6Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjozMVrOG-u6Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQzMzQ4Nw==", "bodyText": "possible to come up with a more descriptive name? And add a javadoc with example please", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r468433487", "createdAt": "2020-08-11T09:02:31Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/model/common/CaseReferenceUtils.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package uk.gov.hmcts.ccd.domain.model.common;\n+\n+public class CaseReferenceUtils {\n+\n+    private CaseReferenceUtils() {\n+    }\n+\n+    public static String formatCaseReference(String caseReference) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODg1NzMz", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-464885733", "createdAt": "2020-08-11T09:09:31Z", "commit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowOTozMlrOG-vJzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowOTozMlrOG-vJzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQzNzQ1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final String message = \"Un expected error during case link validation.\";\n          \n          \n            \n                       String message = \"Unexpected error during case link validation.\";", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#discussion_r468437455", "createdAt": "2020-08-11T09:09:32Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/domain/types/TextCaseReferenceCaseLinkValidator.java", "diffHunk": "@@ -0,0 +1,68 @@\n+package uk.gov.hmcts.ccd.domain.types;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import uk.gov.hmcts.ccd.domain.model.definition.CaseFieldDefinition;\n+import uk.gov.hmcts.ccd.domain.service.common.CaseService;\n+import uk.gov.hmcts.ccd.endpoint.exceptions.ResourceNotFoundException;\n+import uk.gov.hmcts.ccd.endpoint.exceptions.ServiceException;\n+\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+import javax.inject.Singleton;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static uk.gov.hmcts.ccd.domain.model.common.CaseReferenceUtils.formatCaseReference;\n+\n+@Named(\"TextCaseReferenceCaseLinkValidator\")\n+@Singleton\n+public class TextCaseReferenceCaseLinkValidator implements PredefinedTypeFieldValidator {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(TextCaseReferenceCaseLinkValidator.class);\n+    private CaseService caseService;\n+    private TextValidator textValidator;\n+\n+    @Inject\n+    public TextCaseReferenceCaseLinkValidator(@Qualifier(\"TextValidator\") TextValidator textValidator, CaseService caseService) {\n+        this.caseService = caseService;\n+        this.textValidator = textValidator;\n+    }\n+\n+    @Override\n+    public List<ValidationResult> validate(final String dataFieldId,\n+                                           final JsonNode dataValue,\n+                                           final CaseFieldDefinition caseFieldDefinition) {\n+\n+        List<ValidationResult> validationResults = textValidator.validate(dataFieldId, dataValue, caseFieldDefinition);\n+        if (validationResults.isEmpty() && !textValidator.isNullOrEmpty(dataValue)) {\n+            final String value = dataValue.textValue();\n+            return isAnExistingCase(value, dataFieldId);\n+        }\n+        return validationResults;\n+    }\n+\n+    private List<ValidationResult> isAnExistingCase(final String value, final String dataFieldId) {\n+        try {\n+            this.caseService.getCaseDetailsByCaseReference(formatCaseReference(value));\n+            return Collections.emptyList();\n+        } catch (ResourceNotFoundException resourceNotFoundException) {\n+            return Collections.singletonList(\n+                new ValidationResult(\n+                    value + \" does not correspond to an existing CCD case.\",\n+                    dataFieldId)\n+            );\n+        } catch (Exception exception) {\n+            final String message = \"Un expected error during case link validation.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "784d7ff7dcc5d1386ab73f0d400b8f5725a0796b"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef7d36de8c3979331b86fb8bf9b6b9c8a5b059f", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/9ef7d36de8c3979331b86fb8bf9b6b9c8a5b059f", "committedDate": "2020-08-11T13:56:17Z", "message": "Merge branch 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fbdfb4be0ba09f606190a8836467973303f89d1", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/8fbdfb4be0ba09f606190a8836467973303f89d1", "committedDate": "2020-08-11T13:59:39Z", "message": "Merge branch 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b9277f1406f01806e235c6dd581eeed23983f02", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/3b9277f1406f01806e235c6dd581eeed23983f02", "committedDate": "2020-08-12T08:44:41Z", "message": "Merge branch 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b1fc8e1b2618a3b8d4014cbbce738773540c9b0", "author": {"user": {"login": "Thor-tech-of-metal", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/9b1fc8e1b2618a3b8d4014cbbce738773540c9b0", "committedDate": "2020-08-12T13:10:17Z", "message": "Merge branch 'develop' of github.com:hmcts/ccd-data-store-api into RDM-2676"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDQzOTI0", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1042#pullrequestreview-466043924", "createdAt": "2020-08-12T15:43:16Z", "commit": {"oid": "9b1fc8e1b2618a3b8d4014cbbce738773540c9b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2873, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}