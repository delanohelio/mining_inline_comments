{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NzEyMjI1", "number": 1047, "title": "RDM-9206: Supplementary Data ES Functional Tests", "bodyText": "JIRA link (if applicable)\nhttps://tools.hmcts.net/jira/browse/RDM-9206\nChange description\nAdd functional tests to check supplementary data update pushed to Elastic Search\nDoes this PR introduce a breaking change? (check one with \"x\")\n[ ] Yes\n[ X] No", "createdAt": "2020-08-07T16:45:41Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047", "merged": true, "mergeCommit": {"oid": "2f7b16ecb0ef6ef55eff98cc0d880adc6e985266"}, "closed": true, "closedAt": "2020-08-25T09:23:15Z", "author": {"login": "kiran-yenigala-hmcts"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8nOzIAH2gAyNDY0NzEyMjI1OjU0NjRiODY0Mzc5NjRlNzI2Njg2ODQzNTU3ODRiZDY2ZTk2ZjA0Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCSqpAgH2gAyNDY0NzEyMjI1Ojc5NThkMzFhYmU5ZGYxNGFkZWYwODVmNmJmOTNjOWFhOGY3NGY5OGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5464b86437964e72668684355784bd66e96f0477", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/5464b86437964e72668684355784bd66e96f0477", "committedDate": "2020-08-07T16:44:00Z", "message": "RDM-9206: functionl test cases added to test Elastic search functionality after the supplementary data update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "244a71a898a89f1e6d2df9cd90ffa5e3f027cce9", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/244a71a898a89f1e6d2df9cd90ffa5e3f027cce9", "committedDate": "2020-08-07T17:57:05Z", "message": "RDM-9206: duplicate guid removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7167f3439b0c5eebc6e481e3415f64b9f20fed03", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/7167f3439b0c5eebc6e481e3415f64b9f20fed03", "committedDate": "2020-08-07T19:42:20Z", "message": "RDM-9206: test data and spec sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8893028af59714d6fb489035e14c5a2bd47da13", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/f8893028af59714d6fb489035e14c5a2bd47da13", "committedDate": "2020-08-08T07:58:31Z", "message": "RDM-9206: test elastic searchCases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb088bdd8254ba1f4d3aefa00a65a4afb279ba59", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/bb088bdd8254ba1f4d3aefa00a65a4afb279ba59", "committedDate": "2020-08-10T23:39:35Z", "message": "RDM-9206: test elastic searchCases: fixed test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTQzOTIz", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#pullrequestreview-464943923", "createdAt": "2020-08-11T10:34:06Z", "commit": {"oid": "bb088bdd8254ba1f4d3aefa00a65a4afb279ba59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "427ee0618aa2866c744587e74ad29c962d234f60", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/427ee0618aa2866c744587e74ad29c962d234f60", "committedDate": "2020-08-12T09:21:52Z", "message": "Merge remote-tracking branch 'origin/post-19.1-cleanup' into RDM-9206"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/15aa36eb75dd172918a80fdecf225dc5a97db016", "committedDate": "2020-08-13T10:33:23Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-9206"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMzEzODMz", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#pullrequestreview-473313833", "createdAt": "2020-08-24T10:04:27Z", "commit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDowNDoyN1rOHFdfVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDowNDoyN1rOHFdfVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQ4ODA4Nw==", "bodyText": "Might suggest a small tweak to the bdd here the request [is configured to search for the previously created case by the updated supplementary data value]", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#discussion_r475488087", "createdAt": "2020-08-24T10:04:27Z", "author": {"login": "noronhaa"}, "path": "src/aat/resources/features/F-106/F-106.feature", "diffHunk": "@@ -37,3 +37,28 @@ Feature: F-106: Update Supplementary Data\n     And it is submitted to call the [Update Supplementary Data] operation of [CCD Data Store api],\n     Then a positive response is received,\n     And the response has all the details as expected.\n+\n+  @S-608 @elasticsearch @Ignore\n+  Scenario: Must return the updated supplementary data values from Data store and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMzE0MDA2", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#pullrequestreview-473314006", "createdAt": "2020-08-24T10:04:43Z", "commit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDowNDo0M1rOHFdf7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDowNDo0M1rOHFdf7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQ4ODIzNw==", "bodyText": "same as previous comment", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#discussion_r475488237", "createdAt": "2020-08-24T10:04:43Z", "author": {"login": "noronhaa"}, "path": "src/aat/resources/features/F-106/F-106.feature", "diffHunk": "@@ -37,3 +37,28 @@ Feature: F-106: Update Supplementary Data\n     And it is submitted to call the [Update Supplementary Data] operation of [CCD Data Store api],\n     Then a positive response is received,\n     And the response has all the details as expected.\n+\n+  @S-608 @elasticsearch @Ignore\n+  Scenario: Must return the updated supplementary data values from Data store and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],\n+    And a request is prepared with appropriate values,\n+    When it is submitted to call the [external search query] operation of [CCD Data Store Elastic Search API],\n+    Then the response [contains the previoulsy created case],\n+    And the response has all other details as expected.\n+\n+  @S-609 @elasticsearch @Ignore\n+  Scenario: Need to be able to decrement an existing property and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a successful call [by Dil to decrement supplementary_data] as in [F-106_Decrement_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMzE0MTIy", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#pullrequestreview-473314122", "createdAt": "2020-08-24T10:04:54Z", "commit": {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7958d31abe9df14adef085f6bf93c9aa8f74f98c", "author": {"user": null}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/7958d31abe9df14adef085f6bf93c9aa8f74f98c", "committedDate": "2020-08-25T08:09:57Z", "message": "RDM-9206: changed the spec based on code review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2882, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}