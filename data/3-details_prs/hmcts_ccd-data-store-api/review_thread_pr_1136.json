{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNjY1OTc3", "number": 1136, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MTowNVrOEqekHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MzozM1rOEqem3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyOTc2NDE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MTowNVrOHctVYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MTowNVrOHctVYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NDkzMQ==", "bodyText": "getLocation is a bad naming. Please use a better one like, location.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499864931", "createdAt": "2020-10-05T20:51:05Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -205,7 +209,11 @@ private DraftResponse assembleDraft(Draft getDraft, Consumer<Exception> exceptio\n \n \n     private Long getDraftId(HttpHeaders responseHeaders) {\n-        String path = responseHeaders.getLocation().getPath();\n-        return Long.valueOf(path.substring(path.lastIndexOf('/') + 1));\n+        URI getLocation = responseHeaders.getLocation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyOTc2ODY1OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1Mjo0MlrOHctYWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1Mjo0MlrOHctYWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NTY4OA==", "bodyText": "please improve naming: getDraft  to draft.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499865688", "createdAt": "2020-10-05T20:52:42Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -192,11 +194,13 @@ private String getUriWithQueryParams() {\n     private DraftResponse assembleDraft(Draft getDraft, Consumer<Exception> exceptionConsumer) {\n         final DraftResponse draftResponse = new DraftResponse();\n         try {\n-            draftResponse.setId(getDraft.getId());\n-            draftResponse.setDocument(MAPPER.treeToValue(getDraft.getDocument(), CaseDraft.class));\n-            draftResponse.setType(getDraft.getType());\n-            draftResponse.setCreated(getDraft.getCreated().toLocalDateTime());\n-            draftResponse.setUpdated(getDraft.getUpdated().toLocalDateTime());\n+            if (getDraft != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyOTc3MTE3OnYy", "diffSide": "RIGHT", "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MzozM1rOHctZ8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo1MzozM1rOHctZ8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2NjA5Ng==", "bodyText": "please improve naming: getDrafts to drafts.", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1136#discussion_r499866096", "createdAt": "2020-10-05T20:53:33Z", "author": {"login": "MSancaktutar"}, "path": "src/main/java/uk/gov/hmcts/ccd/data/draft/DefaultDraftGateway.java", "diffHunk": "@@ -161,7 +163,7 @@ public void delete(final String draftId) {\n             final HttpEntity requestEntity = new HttpEntity(headers);\n             DraftList getDrafts = restTemplate.exchange(\n                 getUriWithQueryParams(), HttpMethod.GET, requestEntity, DraftList.class).getBody();\n-            return getDrafts.getData()\n+            return getDrafts == null ? null : getDrafts.getData()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1453aacbbaa8af09fe55cd93b0226cdd069f3a"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3694, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}