{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNDgxNjA5", "number": 862, "title": "RDM-7373 Lower severity of CaseValidationException", "bodyText": "JIRA link (if applicable)\nRDM-7373: Lower log severity of Case Validation Errors\nChange description\nLogger calls\n\nMerge validation results log entry with exception log entry.\nUse the lower severity (Warn).\nLog field names only to prevent user data being sent to logs.\n\nApplication Insights telemetry\n\nAdd some validation result information to the exception telemetry.\nSet a lower severity level on the exception (Warning).\n\nDoes this PR introduce a breaking change? (check one with \"x\")\n[ ] Yes\n[x] No", "createdAt": "2020-03-25T09:39:04Z", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862", "merged": true, "mergeCommit": {"oid": "6f027c9a4eb4e87c664614f15ecc1bcae86e7b3c"}, "closed": true, "closedAt": "2020-09-02T09:17:28Z", "author": {"login": "mattnayler"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRELbjAH2gAyMzkzNDgxNjA5OjZhYmE3ZmJhYTM2ZTIwZjhmM2UwNDY0MWU4MzQxOTkxNmMwYTQ4MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE3tEIAH2gAyMzkzNDgxNjA5OjdmNzJiYjMwNTQzMGYzZjBlNWM5MThjZWEyMjk2NTg4ODE3ZGUwYWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6aba7fbaa36e20f8f3e04641e83419916c0a482c", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/6aba7fbaa36e20f8f3e04641e83419916c0a482c", "committedDate": "2020-03-25T09:34:54Z", "message": "RDM-7373 Lower severity of CaseValidationException\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n\n**Logger calls**\n* Merge validation results log entry with exception log entry.\n* Use the lower severity (`Warn`).\n* Log field names only to prevent user data being sent to logs.\n\n**Application Insights telemetry**\n* Add some validation result information to the exception telemetry.\n* Set a lower severity level on the exception (`Warning`)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e1d0fd1cebdf6811ea961cfab5c071c9fe587f8", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/1e1d0fd1cebdf6811ea961cfab5c071c9fe587f8", "committedDate": "2020-03-25T15:32:57Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "207c0413a0cf3c017952e83d492b540786411614", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/207c0413a0cf3c017952e83d492b540786411614", "committedDate": "2020-03-25T16:05:10Z", "message": "RDM-7373 Parse status code in RestExceptionHandler\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n\nTry to avoid SonarQube 'javasecurity:S5131' when building ResponseEntity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "406ab8b68db4a20763441ece83290a13f6553f82", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/406ab8b68db4a20763441ece83290a13f6553f82", "committedDate": "2020-03-26T14:39:56Z", "message": "Revert \"RDM-7373 Parse status code in RestExceptionHandler\"\n\nThis reverts commit 207c0413a0cf3c017952e83d492b540786411614."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3593ce7ccc8725fd65fcb6bee854a64f54ad3dd0", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/3593ce7ccc8725fd65fcb6bee854a64f54ad3dd0", "committedDate": "2020-03-27T11:02:24Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "102cc4431f81d03570b9a5f5e92a4709aa9d6916", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/102cc4431f81d03570b9a5f5e92a4709aa9d6916", "committedDate": "2020-03-27T17:51:32Z", "message": "RDM-7373 Encode requestURI when creating HttpError\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n\nTry to avoid SonarQube 'javasecurity:S5131' when returning HttpError as\na ResponseEntity in the RestExceptionHandler."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ec3982a4fd5c729f7ccdf2b0c850a9a1f7203bc", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/7ec3982a4fd5c729f7ccdf2b0c850a9a1f7203bc", "committedDate": "2020-03-31T15:42:02Z", "message": "RDM-7373 Tests for RestExceptionHandler changes\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n\nTests for:-\n* uk.gov.hmcts.ccd.AppInsights\n* uk.gov.hmcts.ccd.domain.model.common.HttpError (updated)\n* uk.gov.hmcts.ccd.endpoint.exceptionsRestExceptionHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bde615334706819bf03f90f50e4d926f1ba0aeb6", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/bde615334706819bf03f90f50e4d926f1ba0aeb6", "committedDate": "2020-03-31T15:44:28Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d06fed24b95c74d3f16be8be73221e7bcef69e7b", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/d06fed24b95c74d3f16be8be73221e7bcef69e7b", "committedDate": "2020-04-01T08:50:12Z", "message": "RDM-7373 Refactor RestExceptionHandler tests\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n\nTests for:-\n* uk.gov.hmcts.ccd.endpoint.exceptions.RestExceptionHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/29da58d8958ff0fcc61af615e67e7d076a7a981c", "committedDate": "2020-04-01T11:53:53Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-7373"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzU4OTY3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-386358967", "createdAt": "2020-04-02T12:05:08Z", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowNTowOFrOF_oB-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowNTowOFrOF_oB-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2MDQ3NQ==", "bodyText": "I was wondering whether it makes sense to not log the stacktrace for the the validation errors. What do you think @mattnayler?", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402260475", "createdAt": "2020-04-02T12:05:08Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/endpoint/exceptions/RestExceptionHandler.java", "diffHunk": "@@ -50,6 +60,29 @@ public RestExceptionHandler(AppInsights appInsights) {\n                 .body(error);\n     }\n \n+    @ExceptionHandler(CaseValidationException.class)\n+    @ResponseBody\n+    public ResponseEntity<HttpError> handleCaseValidationException(HttpServletRequest request, CaseValidationException exception) {\n+\n+        // read field IDs from CaseValidationException.details (i.e. avoid using full error details as this may contain user data)\n+        List<String> fieldIds = new ArrayList<>();\n+        if (exception.getDetails() != null) {\n+            String detailsJson = this.objectMapperService.convertObjectToString(exception.getDetails());\n+            fieldIds = JsonPath.read(detailsJson, \"$..field_errors[*].id\");\n+        }\n+\n+        Map<String, String> customProperties = new HashMap<>();\n+        customProperties.put(\"CaseValidationError field IDs\", Arrays.toString(fieldIds.toArray()));\n+\n+        LOG.warn(\"{}: The following list of fields are in an error state: {}\", exception.getMessage(), fieldIds, exception);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzU5MzI3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-386359327", "createdAt": "2020-04-02T12:05:39Z", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowNTozOVrOF_oC_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowNTozOVrOF_oC_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2MDczNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    LOG.warn(\"{}: The following list of fields are in an error state: {}\", exception.getMessage(), fieldIds, exception);\n          \n          \n            \n                    LOG.warn(\"{}: The following list of fields are in an invalid state: {}\", exception.getMessage(), fieldIds, exception);", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402260734", "createdAt": "2020-04-02T12:05:39Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/endpoint/exceptions/RestExceptionHandler.java", "diffHunk": "@@ -50,6 +60,29 @@ public RestExceptionHandler(AppInsights appInsights) {\n                 .body(error);\n     }\n \n+    @ExceptionHandler(CaseValidationException.class)\n+    @ResponseBody\n+    public ResponseEntity<HttpError> handleCaseValidationException(HttpServletRequest request, CaseValidationException exception) {\n+\n+        // read field IDs from CaseValidationException.details (i.e. avoid using full error details as this may contain user data)\n+        List<String> fieldIds = new ArrayList<>();\n+        if (exception.getDetails() != null) {\n+            String detailsJson = this.objectMapperService.convertObjectToString(exception.getDetails());\n+            fieldIds = JsonPath.read(detailsJson, \"$..field_errors[*].id\");\n+        }\n+\n+        Map<String, String> customProperties = new HashMap<>();\n+        customProperties.put(\"CaseValidationError field IDs\", Arrays.toString(fieldIds.toArray()));\n+\n+        LOG.warn(\"{}: The following list of fields are in an error state: {}\", exception.getMessage(), fieldIds, exception);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzYzNTc5", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-386363579", "createdAt": "2020-04-02T12:11:48Z", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjoxMTo0OFrOF_oQFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjoxMTo0OFrOF_oQFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2NDA4Ng==", "bodyText": "wonder whether we can enhance CaseValidationException with a property that stores fields with validation error so that here rather than manipulating JSON we could just call: exception.getFields() and we get back a list of field ids", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402264086", "createdAt": "2020-04-02T12:11:48Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/endpoint/exceptions/RestExceptionHandler.java", "diffHunk": "@@ -50,6 +60,29 @@ public RestExceptionHandler(AppInsights appInsights) {\n                 .body(error);\n     }\n \n+    @ExceptionHandler(CaseValidationException.class)\n+    @ResponseBody\n+    public ResponseEntity<HttpError> handleCaseValidationException(HttpServletRequest request, CaseValidationException exception) {\n+\n+        // read field IDs from CaseValidationException.details (i.e. avoid using full error details as this may contain user data)\n+        List<String> fieldIds = new ArrayList<>();\n+        if (exception.getDetails() != null) {\n+            String detailsJson = this.objectMapperService.convertObjectToString(exception.getDetails());\n+            fieldIds = JsonPath.read(detailsJson, \"$..field_errors[*].id\");\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzY0NzY3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-386364767", "createdAt": "2020-04-02T12:13:33Z", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjoxMzozM1rOF_oTxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjoxMzozM1rOF_oTxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2NTAzMA==", "bodyText": "mind adding a javadoc explaining the usage of custom properties", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402265030", "createdAt": "2020-04-02T12:13:33Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/AppInsights.java", "diffHunk": "@@ -33,6 +37,20 @@ public void trackException(Exception e) {\n         telemetry.trackException(e);\n     }\n \n+    public void trackException(Exception e, Map<String, String> customProperties, SeverityLevel severityLevel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzY1MTk3", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-386365197", "createdAt": "2020-04-02T12:14:13Z", "commit": {"oid": "29da58d8958ff0fcc61af615e67e7d076a7a981c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "412e35bb69a2a25bda3730b593c53b5cf2efe5c5", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/412e35bb69a2a25bda3730b593c53b5cf2efe5c5", "committedDate": "2020-04-03T08:31:58Z", "message": "RDM-7373 Refactor CaseValidationException\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19a1705d3fb5570dde74bd38a2c0f916c61b6389", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/19a1705d3fb5570dde74bd38a2c0f916c61b6389", "committedDate": "2020-04-03T08:33:24Z", "message": "Merge remote-tracking branch 'origin/develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a29b059c9351ed1cc01ce75a29f2c91833d79a5", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/3a29b059c9351ed1cc01ce75a29f2c91833d79a5", "committedDate": "2020-04-03T09:54:15Z", "message": "RDM-7373 CheckStyle update to CaseTypeService\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8b24643a020dba5759e774ff791f333ab5bcd50", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/e8b24643a020dba5759e774ff791f333ab5bcd50", "committedDate": "2020-04-03T11:13:10Z", "message": "RDM-7373 Refactor CaseValidationException\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/11b852c7e21af1364e2f0bb73efd18d92dd17f02", "committedDate": "2020-04-03T11:16:46Z", "message": "RDM-7373 Refactor CaseValidationException\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjIxNDc1", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-387221475", "createdAt": "2020-04-03T12:45:26Z", "commit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjo0NToyN1rOGAT3sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjo0NToyN1rOGAT3sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk3ODczOQ==", "bodyText": "don't think this null check and empty check is really needed", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402978739", "createdAt": "2020-04-03T12:45:27Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/endpoint/exceptions/CaseValidationException.java", "diffHunk": "@@ -2,11 +2,36 @@\n \n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.ResponseStatus;\n+import uk.gov.hmcts.ccd.domain.model.std.CaseFieldValidationError;\n+import uk.gov.hmcts.ccd.domain.model.std.CaseValidationError;\n+\n+import java.util.List;\n \n @ResponseStatus(code = HttpStatus.UNPROCESSABLE_ENTITY)\n public class CaseValidationException extends ValidationException {\n \n-    public CaseValidationException() {\n+    private final String[] fields;\n+\n+    public CaseValidationException(List<CaseFieldValidationError> fieldErrors) {\n         super(\"Case data validation failed\");\n+\n+        String[] fieldIds = new String[0];\n+\n+        if (fieldErrors != null && !fieldErrors.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjIyMjE1", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-387222215", "createdAt": "2020-04-03T12:46:26Z", "commit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjo0NjoyNlrOGAT59Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjo0NjoyNlrOGAT59Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk3OTMxNw==", "bodyText": "I'd recommend to prefer List than Array in Java. The perf gain of using Array is almost 0 but the boilerplate in the code is much higher because working with arrays in Java is very cumbersome", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#discussion_r402979317", "createdAt": "2020-04-03T12:46:26Z", "author": {"login": "mario-paniccia"}, "path": "src/main/java/uk/gov/hmcts/ccd/endpoint/exceptions/CaseValidationException.java", "diffHunk": "@@ -2,11 +2,36 @@\n \n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.ResponseStatus;\n+import uk.gov.hmcts.ccd.domain.model.std.CaseFieldValidationError;\n+import uk.gov.hmcts.ccd.domain.model.std.CaseValidationError;\n+\n+import java.util.List;\n \n @ResponseStatus(code = HttpStatus.UNPROCESSABLE_ENTITY)\n public class CaseValidationException extends ValidationException {\n \n-    public CaseValidationException() {\n+    private final String[] fields;\n+\n+    public CaseValidationException(List<CaseFieldValidationError> fieldErrors) {\n         super(\"Case data validation failed\");\n+\n+        String[] fieldIds = new String[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjIzMjE4", "url": "https://github.com/hmcts/ccd-data-store-api/pull/862#pullrequestreview-387223218", "createdAt": "2020-04-03T12:47:50Z", "commit": {"oid": "11b852c7e21af1364e2f0bb73efd18d92dd17f02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a92f16a513dfd504d5dfbaf9207fd5c431a4f3dc", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/a92f16a513dfd504d5dfbaf9207fd5c431a4f3dc", "committedDate": "2020-04-03T14:06:27Z", "message": "RDM-7373 Refactor CaseValidationException\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1b45d5a8a3836517009640f8d99cf1565ed198f", "author": {"user": {"login": "hemantt", "name": "Hemanth Potipati"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/c1b45d5a8a3836517009640f8d99cf1565ed198f", "committedDate": "2020-07-16T13:18:37Z", "message": "resolve confilcts on CaseTypeDefinitionServiceTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e3271bda86b0d04cfa676332fd54da52348df24", "author": {"user": {"login": "hemantt", "name": "Hemanth Potipati"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/0e3271bda86b0d04cfa676332fd54da52348df24", "committedDate": "2020-07-16T13:20:30Z", "message": "Merge branch 'develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bc0c589161c5739f42bad6dcb079fefe137c162", "author": {"user": {"login": "mattnayler", "name": "Matt Nayler"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/0bc0c589161c5739f42bad6dcb079fefe137c162", "committedDate": "2020-07-16T14:33:00Z", "message": "RDM-7373 Resolve conflicts on CaseTypeServiceTest\n\n   [RDM-7373](https://tools.hmcts.net/jira/browse/RDM-7373)\n   [RDM-8217](https://tools.hmcts.net/jira/browse/RDM-8217)\n\nUpdated to reflect class renames in RDM-8217.\nRenamed test class to reflect test subject."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a860fbbfc34e012b63aa66d8630ccd0b69bfeb1f", "author": {"user": {"login": "MSancaktutar", "name": null}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/a860fbbfc34e012b63aa66d8630ccd0b69bfeb1f", "committedDate": "2020-07-20T10:26:52Z", "message": "Merge branch 'develop' into RDM-7373"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f72bb305430f3f0e5c918cea2296588817de0ae", "author": {"user": {"login": "hemantt", "name": "Hemanth Potipati"}}, "url": "https://github.com/hmcts/ccd-data-store-api/commit/7f72bb305430f3f0e5c918cea2296588817de0ae", "committedDate": "2020-09-02T08:26:56Z", "message": "Empty commit to trigger build"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2643, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}