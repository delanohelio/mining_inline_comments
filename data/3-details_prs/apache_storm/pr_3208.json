{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNDY0MjY1", "number": 3208, "title": "[STORM-3579]  use the topo conf for thrift client in Worker code", "bodyText": "Explained in the Jira: https://issues.apache.org/jira/browse/STORM-3579\nThe problem here (and other places as well) is it's not using the correct config (daemon conf vs topology conf).\nworker.childopts and topology.worker.childopts are JVM parameters used to launch workers. Users can supply their own java.security.auth.login.config to the worker. And it should be used for the thrift client used by the worker.", "createdAt": "2020-02-11T04:06:19Z", "url": "https://github.com/apache/storm/pull/3208", "merged": true, "mergeCommit": {"oid": "cdd316964d45cea6e436f26f8e66a0ba0984b182"}, "closed": true, "closedAt": "2020-02-12T14:52:02Z", "author": {"login": "Ethanlm"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDJfCTAH2gAyMzczNDY0MjY1OjY1ZjM3NGM1ZTlhMjU4ZDFkNDg1ZThjOTljMzM0YzBiYTYxMjJmNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDn547gFqTM1NjcwNjExMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74", "author": {"user": {"login": "Ethanlm", "name": "Meng (Ethan) Li "}}, "url": "https://github.com/apache/storm/commit/65f374c5e9a258d1d485e8c99c334c0ba6122f74", "committedDate": "2020-02-11T03:50:54Z", "message": "[STORM-3579]  use the topo conf for thrift client in Worker code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NzEyODM1", "url": "https://github.com/apache/storm/pull/3208#pullrequestreview-356712835", "createdAt": "2020-02-11T14:44:06Z", "commit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NzA2MTEy", "url": "https://github.com/apache/storm/pull/3208#pullrequestreview-356706112", "createdAt": "2020-02-11T14:36:16Z", "commit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNjoxNlrOFoLSyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozOTozN1rOFoLbGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3MjM5Mg==", "bodyText": "can we update the javadoc that this is a supervisor conf?", "url": "https://github.com/apache/storm/pull/3208#discussion_r377672392", "createdAt": "2020-02-11T14:36:16Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -106,9 +105,9 @@\n      * @param port           - port on which the worker runs\n      * @param workerId       - worker id\n      */\n-\n     public Worker(Map<String, Object> conf, IContext context, String topologyId, String assignmentId,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3NDUyMg==", "bodyText": "Can you update the javadoc for NimbusClient.getConfiguredClient() to indicate it needs a topoconf?\nAre there any other uses of NimbusClient.getConfiguredClient() that need fixing?", "url": "https://github.com/apache/storm/pull/3208#discussion_r377674522", "createdAt": "2020-02-11T14:39:37Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -443,7 +451,7 @@ private void heartbeatToMasterIfLocalbeatFail(LSWorkerHeartbeat lsWorkerHeartbea\n         } catch (Exception tr1) {\n             //If any error/exception thrown, report directly to nimbus.\n             LOG.warn(\"Exception when send heartbeat to local supervisor\", tr1.getMessage());\n-            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(conf)) {\n+            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(topologyConf)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 119}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4661, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}