{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNjg1NjIw", "number": 3286, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjo1MToyM1rOEExI_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjo1MToyM1rOEExI_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNDM0ODc2OnYy", "diffSide": "RIGHT", "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjo1MToyM1rOGimKgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMToyNjoxMlrOGjSCTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ==", "bodyText": "Observation: that is really a long time for 10 messages. Wonder why it is that slow.", "url": "https://github.com/apache/storm/pull/3286#discussion_r438930049", "createdAt": "2020-06-11T16:51:23Z", "author": {"login": "bipinprasad"}, "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "diffHunk": "@@ -126,14 +126,15 @@ public void testExecutorTransfer() throws InterruptedException {\n         }\n \n         //give producers enough time to insert messages into the queue\n-        executorService.awaitTermination(100, TimeUnit.MILLISECONDS);\n+        executorService.awaitTermination(1000, TimeUnit.MILLISECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NzE1Ng==", "bodyText": "This test intentionally submits 10 threads with a 5 thread pool to create race condition between threads. 100ms was just fine in my laptop or VM. On travis, I guess the resource is much limited so the thread contention is more observable. 1s maximum should be good enough. We should be able to lower it but since this value is just a maximum, 1s should be harmless.", "url": "https://github.com/apache/storm/pull/3286#discussion_r438957156", "createdAt": "2020-06-11T17:39:59Z", "author": {"login": "Ethanlm"}, "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "diffHunk": "@@ -126,14 +126,15 @@ public void testExecutorTransfer() throws InterruptedException {\n         }\n \n         //give producers enough time to insert messages into the queue\n-        executorService.awaitTermination(100, TimeUnit.MILLISECONDS);\n+        executorService.awaitTermination(1000, TimeUnit.MILLISECONDS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}, "originalCommit": {"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk4NjA1Mg==", "bodyText": "As you said, this is harmless for testing. Hopefully the core performance has not been significantly affected.", "url": "https://github.com/apache/storm/pull/3286#discussion_r438986052", "createdAt": "2020-06-11T18:23:34Z", "author": {"login": "bipinprasad"}, "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "diffHunk": "@@ -126,14 +126,15 @@ public void testExecutorTransfer() throws InterruptedException {\n         }\n \n         //give producers enough time to insert messages into the queue\n-        executorService.awaitTermination(100, TimeUnit.MILLISECONDS);\n+        executorService.awaitTermination(1000, TimeUnit.MILLISECONDS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}, "originalCommit": {"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY0ODg0NA==", "bodyText": "Yeah, we haven't changed anything related to core performance. This is a new unit test. It works well in my laptop but fails sometimes on travis. That is mostly an environment difference.", "url": "https://github.com/apache/storm/pull/3286#discussion_r439648844", "createdAt": "2020-06-12T21:26:12Z", "author": {"login": "Ethanlm"}, "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "diffHunk": "@@ -126,14 +126,15 @@ public void testExecutorTransfer() throws InterruptedException {\n         }\n \n         //give producers enough time to insert messages into the queue\n-        executorService.awaitTermination(100, TimeUnit.MILLISECONDS);\n+        executorService.awaitTermination(1000, TimeUnit.MILLISECONDS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}, "originalCommit": {"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4309, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}