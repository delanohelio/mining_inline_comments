{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NjUzMzUy", "number": 3368, "title": "[STORM-3729] fix assgin memory error over 2g", "bodyText": "What is the purpose of the change\nDescribed in https://issues.apache.org/jira/projects/STORM/issues/STORM-3729. Assigning over 2g memory would let slot resources result 1m.\nHow was the change tested\nIt's easy to fix this problem. Use Long.parseLong instead of Integer.parsInt.", "createdAt": "2020-12-23T08:47:00Z", "url": "https://github.com/apache/storm/pull/3368", "merged": true, "mergeCommit": {"oid": "f451be2ef81c0821f65a1a4d671b90c221ef99db"}, "closed": true, "closedAt": "2021-01-05T15:28:20Z", "author": {"login": "zeahoo"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo7D7rAH2gAyNTQ0NjUzMzUyOmQxYjNhMDE3NjEwOTFjZjFiMTgxNTU5YTllOGYwNzM4YmRjNmMwYWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtMpoxAFqTU2MTg4NDc3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d1b3a01761091cf1b181559a9e8f0738bdc6c0ad", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/d1b3a01761091cf1b181559a9e8f0738bdc6c0ad", "committedDate": "2020-12-23T08:42:54Z", "message": "[STORM-3729] fix assgin memory error over 2g"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22de57beac187919a26b70810df002321fe73f33", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/22de57beac187919a26b70810df002321fe73f33", "committedDate": "2020-12-23T08:48:38Z", "message": "Update UtilsTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MDIzMTY2", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-558023166", "createdAt": "2020-12-23T16:05:09Z", "commit": {"oid": "d1b3a01761091cf1b181559a9e8f0738bdc6c0ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxNjowNTowOVrOIKpGCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxNjowNTowOVrOIKpGCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODAyOTk2MA==", "bodyText": "Even for several gigabytes, the number is still smaller than Integer.MAX_VALUE in terms of \"m\", \"k\" or \"g\" units, right?", "url": "https://github.com/apache/storm/pull/3368#discussion_r548029960", "createdAt": "2020-12-23T16:05:09Z", "author": {"login": "bipinprasad"}, "path": "storm-client/src/jvm/org/apache/storm/utils/Utils.java", "diffHunk": "@@ -1039,7 +1039,7 @@ public static Double parseJvmHeapMemByChildOpts(List<String> options, Double def\n                 }\n                 Matcher m = optsPattern.matcher(option);\n                 while (m.find()) {\n-                    int value = Integer.parseInt(m.group(1));\n+                    long value = Long.parseLong(m.group(1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b3a01761091cf1b181559a9e8f0738bdc6c0ad"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MDA4ODEx", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-558008811", "createdAt": "2020-12-23T15:55:29Z", "commit": {"oid": "22de57beac187919a26b70810df002321fe73f33"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxNTo1NToyOVrOIKo1cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxNTo1NTozNFrOIKo1rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODAyNTcxNA==", "bodyText": "nit: indention is a little off", "url": "https://github.com/apache/storm/pull/3368#discussion_r548025714", "createdAt": "2020-12-23T15:55:29Z", "author": {"login": "Ethanlm"}, "path": "storm-client/test/jvm/org/apache/storm/utils/UtilsTest.java", "diffHunk": "@@ -94,13 +94,15 @@ public void parseJvmHeapMemByChildOptsTestM() {\n         doParseJvmHeapMemByChildOptsTest(\"Xmx100M results in 100 MB\", \"Xmx100m\", 100.0);\n         doParseJvmHeapMemByChildOptsTest(\"Xmx100m results in 100 MB\", \"Xmx100M\", 100.0);\n         doParseJvmHeapMemByChildOptsTest(\"-Xmx100M results in 100 MB\", \"-Xmx100m\", 100.0);\n+\tdoParseJvmHeapMemByChildOptsTest(\"-Xmx2048M results in 2048 MB\", \"-Xmx2048m\", 2048.0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22de57beac187919a26b70810df002321fe73f33"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODAyNTc3Mg==", "bodyText": "nit: indention is a little off", "url": "https://github.com/apache/storm/pull/3368#discussion_r548025772", "createdAt": "2020-12-23T15:55:34Z", "author": {"login": "Ethanlm"}, "path": "storm-client/test/jvm/org/apache/storm/utils/UtilsTest.java", "diffHunk": "@@ -94,13 +94,15 @@ public void parseJvmHeapMemByChildOptsTestM() {\n         doParseJvmHeapMemByChildOptsTest(\"Xmx100M results in 100 MB\", \"Xmx100m\", 100.0);\n         doParseJvmHeapMemByChildOptsTest(\"Xmx100m results in 100 MB\", \"Xmx100M\", 100.0);\n         doParseJvmHeapMemByChildOptsTest(\"-Xmx100M results in 100 MB\", \"-Xmx100m\", 100.0);\n+\tdoParseJvmHeapMemByChildOptsTest(\"-Xmx2048M results in 2048 MB\", \"-Xmx2048m\", 2048.0);\n     }\n \n     @Test\n     public void parseJvmHeapMemByChildOptsTestG() {\n         doParseJvmHeapMemByChildOptsTest(\"Xmx1g results in 1024 MB\", \"Xmx1g\", 1024.0);\n         doParseJvmHeapMemByChildOptsTest(\"Xmx1G results in 1024 MB\", \"Xmx1G\", 1024.0);\n         doParseJvmHeapMemByChildOptsTest(\"-Xmx1g results in 1024 MB\", \"-Xmx1g\", 1024.0);\n+\tdoParseJvmHeapMemByChildOptsTest(\"-Xmx2g results in 2048 MB\", \"-Xmx2g\", 2048.0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22de57beac187919a26b70810df002321fe73f33"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "355efed0122c2013d4031b1b8cd53df0f3762629", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/355efed0122c2013d4031b1b8cd53df0f3762629", "committedDate": "2020-12-24T00:16:33Z", "message": "solve indention error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b98a462347599b606200f119361b1b7dfd6d0ce7", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/b98a462347599b606200f119361b1b7dfd6d0ce7", "committedDate": "2020-12-24T03:15:27Z", "message": "[STORM-3729] fix UtilsTest parameters in correct order."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fab7bf21b5e133962d1fb174f6c3f01555c67b97", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/fab7bf21b5e133962d1fb174f6c3f01555c67b97", "committedDate": "2020-12-24T03:19:35Z", "message": "Merge branch 'master' into STORM-3729"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NjQ1Njcz", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-558645673", "createdAt": "2020-12-24T15:16:44Z", "commit": {"oid": "fab7bf21b5e133962d1fb174f6c3f01555c67b97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNToxNjo0NFrOILJO3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNToxNjo0NFrOILJO3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU1NjUwOA==", "bodyText": "doubleValue is redundant", "url": "https://github.com/apache/storm/pull/3368#discussion_r548556508", "createdAt": "2020-12-24T15:16:44Z", "author": {"login": "Ethanlm"}, "path": "storm-client/test/jvm/org/apache/storm/utils/UtilsTest.java", "diffHunk": "@@ -89,7 +89,9 @@ private void doParseJvmHeapMemByChildOptsTest(String message, String opt, double\n     }\n \n     private void doParseJvmHeapMemByChildOptsTest(String message, List<String> opts, double expected) {\n-        Assert.assertEquals(message, Utils.parseJvmHeapMemByChildOpts(opts, 123.0), expected, 0);\n+        Assert.assertEquals(\n+            message,\n+            expected, Utils.parseJvmHeapMemByChildOpts(opts, 123.0).doubleValue(), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fab7bf21b5e133962d1fb174f6c3f01555c67b97"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NjY5Mjk0", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-558669294", "createdAt": "2020-12-24T15:42:07Z", "commit": {"oid": "fab7bf21b5e133962d1fb174f6c3f01555c67b97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ad9a3d5320dcc12c764a7831bbe08046c910723", "author": {"user": {"login": "zeahoo", "name": "Hal"}}, "url": "https://github.com/apache/storm/commit/9ad9a3d5320dcc12c764a7831bbe08046c910723", "committedDate": "2020-12-24T23:12:47Z", "message": "[STORM-3729] remove redundant cast from Double to double"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjMyOTQz", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-559232943", "createdAt": "2020-12-28T17:24:42Z", "commit": {"oid": "9ad9a3d5320dcc12c764a7831bbe08046c910723"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxODg0Nzcx", "url": "https://github.com/apache/storm/pull/3368#pullrequestreview-561884771", "createdAt": "2021-01-05T15:28:10Z", "commit": {"oid": "9ad9a3d5320dcc12c764a7831bbe08046c910723"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4979, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}