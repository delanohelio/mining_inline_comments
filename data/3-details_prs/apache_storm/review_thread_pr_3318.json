{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDk2MTYy", "number": 3318, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0MTo1MlrOEVCCkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo1NjoyMVrOEVCcSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDg4OTc3OnYy", "diffSide": "RIGHT", "path": "docs/metrics_v2.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0MTo1MlrOG7jp0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNToxNzo1OFrOG7lP2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwMzMxMw==", "bodyText": "I don't see the value in adding the version, I would just remove it.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465103313", "createdAt": "2020-08-04T14:41:52Z", "author": {"login": "agresch"}, "path": "docs/metrics_v2.md", "diffHunk": "@@ -72,7 +72,7 @@ public class TupleCountingBolt extends BaseRichBolt {\n  For metrics to be useful they must be *reported*, in other words sent somewhere where they can be consumed and analyzed.\n  That can be as simple as writing them to a log file, sending them to a time series database, or exposing them via JMX.\n  \n- As of Storm 1.2.0 the following metric reporters are supported\n+Since Storm 1.2.0, the following metric reporters are supported", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEyOTQzMw==", "bodyText": "will do", "url": "https://github.com/apache/storm/pull/3318#discussion_r465129433", "createdAt": "2020-08-04T15:17:58Z", "author": {"login": "Ethanlm"}, "path": "docs/metrics_v2.md", "diffHunk": "@@ -72,7 +72,7 @@ public class TupleCountingBolt extends BaseRichBolt {\n  For metrics to be useful they must be *reported*, in other words sent somewhere where they can be consumed and analyzed.\n  That can be as simple as writing them to a log file, sending them to a time series database, or exposing them via JMX.\n  \n- As of Storm 1.2.0 the following metric reporters are supported\n+Since Storm 1.2.0, the following metric reporters are supported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwMzMxMw=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDkwMTI3OnYy", "diffSide": "RIGHT", "path": "storm-client/src/jvm/org/apache/storm/Config.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0NDozNFrOG7jxJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxOToyNToxMVrOG7uP1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNTE5MQ==", "bodyText": "Should these be deprecated if only for backwards compatibility?", "url": "https://github.com/apache/storm/pull/3318#discussion_r465105191", "createdAt": "2020-08-04T14:44:34Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/Config.java", "diffHunk": "@@ -1731,21 +1744,28 @@\n     @IsInteger\n     @IsPositiveNumber\n     public static final String WORKER_BLOB_UPDATE_POLL_INTERVAL_SECS = \"worker.blob.update.poll.interval.secs\";\n+\n     /**\n-     * A specify Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * Specify the Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE = \"storm.daemon.metrics.reporter.plugin.locale\";\n+\n     /**\n-     * A specify rate-unit in TimeUnit to specify reporting frequency for daemon metrics reporter plugin.\n+     * Specify the rate unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT = \"storm.daemon.metrics.reporter.plugin.rate.unit\";\n+\n     /**\n-     * A specify duration-unit in TimeUnit to specify reporting window for daemon metrics reporter plugin.\n+     * Specify the duration unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEyOTM0NA==", "bodyText": "We need these configs. But they should sit in DaemonConfig class. I can't simply move it because if any topology invokes it directly, and if we move it and upgrade the cluster, I am afraid that this topology will have ClassNotFoundException.\nI thought about duplicating these configs in DaemonConfig and \"deprecate\" these in Config. I wasn't sure if it is a good idea since it adds two identical sets of configs.\nPlease let me know what your thoughts are", "url": "https://github.com/apache/storm/pull/3318#discussion_r465129344", "createdAt": "2020-08-04T15:17:48Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/Config.java", "diffHunk": "@@ -1731,21 +1744,28 @@\n     @IsInteger\n     @IsPositiveNumber\n     public static final String WORKER_BLOB_UPDATE_POLL_INTERVAL_SECS = \"worker.blob.update.poll.interval.secs\";\n+\n     /**\n-     * A specify Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * Specify the Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE = \"storm.daemon.metrics.reporter.plugin.locale\";\n+\n     /**\n-     * A specify rate-unit in TimeUnit to specify reporting frequency for daemon metrics reporter plugin.\n+     * Specify the rate unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT = \"storm.daemon.metrics.reporter.plugin.rate.unit\";\n+\n     /**\n-     * A specify duration-unit in TimeUnit to specify reporting window for daemon metrics reporter plugin.\n+     * Specify the duration unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNTE5MQ=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE2MTA3NQ==", "bodyText": "I see.  Ideally I probably would duplicate and deprecate these for future removal or file a JIRA to do this another day.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465161075", "createdAt": "2020-08-04T16:03:41Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/Config.java", "diffHunk": "@@ -1731,21 +1744,28 @@\n     @IsInteger\n     @IsPositiveNumber\n     public static final String WORKER_BLOB_UPDATE_POLL_INTERVAL_SECS = \"worker.blob.update.poll.interval.secs\";\n+\n     /**\n-     * A specify Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * Specify the Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE = \"storm.daemon.metrics.reporter.plugin.locale\";\n+\n     /**\n-     * A specify rate-unit in TimeUnit to specify reporting frequency for daemon metrics reporter plugin.\n+     * Specify the rate unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT = \"storm.daemon.metrics.reporter.plugin.rate.unit\";\n+\n     /**\n-     * A specify duration-unit in TimeUnit to specify reporting window for daemon metrics reporter plugin.\n+     * Specify the duration unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNTE5MQ=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE4NDAyMw==", "bodyText": "I can make the change", "url": "https://github.com/apache/storm/pull/3318#discussion_r465184023", "createdAt": "2020-08-04T16:39:34Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/Config.java", "diffHunk": "@@ -1731,21 +1744,28 @@\n     @IsInteger\n     @IsPositiveNumber\n     public static final String WORKER_BLOB_UPDATE_POLL_INTERVAL_SECS = \"worker.blob.update.poll.interval.secs\";\n+\n     /**\n-     * A specify Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * Specify the Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE = \"storm.daemon.metrics.reporter.plugin.locale\";\n+\n     /**\n-     * A specify rate-unit in TimeUnit to specify reporting frequency for daemon metrics reporter plugin.\n+     * Specify the rate unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT = \"storm.daemon.metrics.reporter.plugin.rate.unit\";\n+\n     /**\n-     * A specify duration-unit in TimeUnit to specify reporting window for daemon metrics reporter plugin.\n+     * Specify the duration unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNTE5MQ=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI3Njg4NA==", "bodyText": "I reverted the change because nimbus_test.clj is complaining.\nCaused by: java.lang.IllegalStateException: STORM-DAEMON-METRICS-REPORTER-PLUGIN-DURATION-UNIT already refers to: #'org.apache.storm.daemon-config/STORM-DAEMON-METRICS-REPORTER-PLUGIN-DURATION-UNIT in namespace: org.apache.storm.nimbus-test\n\nWill file a JIRA to deal with that once this PR is merged.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465276884", "createdAt": "2020-08-04T19:25:11Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/Config.java", "diffHunk": "@@ -1731,21 +1744,28 @@\n     @IsInteger\n     @IsPositiveNumber\n     public static final String WORKER_BLOB_UPDATE_POLL_INTERVAL_SECS = \"worker.blob.update.poll.interval.secs\";\n+\n     /**\n-     * A specify Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * Specify the Locale for daemon metrics reporter plugin. Use the specified IETF BCP 47 language tag string for a Locale.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE = \"storm.daemon.metrics.reporter.plugin.locale\";\n+\n     /**\n-     * A specify rate-unit in TimeUnit to specify reporting frequency for daemon metrics reporter plugin.\n+     * Specify the rate unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.\n      */\n     @IsString\n     public static final String STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT = \"storm.daemon.metrics.reporter.plugin.rate.unit\";\n+\n     /**\n-     * A specify duration-unit in TimeUnit to specify reporting window for daemon metrics reporter plugin.\n+     * Specify the duration unit in TimeUnit for daemon metrics reporter plugin.\n+     * This config should have been placed in the DaemonConfig class. Keeping it here only for backwards compatibility.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNTE5MQ=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDkxNzAzOnYy", "diffSide": "RIGHT", "path": "storm-client/src/jvm/org/apache/storm/daemon/metrics/ClientMetricsUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0Nzo1MlrOG7j7Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNToxMzo0MVrOG7lD-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNzcxOA==", "bodyText": "Can you add a javadoc indicating why this is a conf vs the others being reporterConf?  Is this a backwards compatibility thing?", "url": "https://github.com/apache/storm/pull/3318#discussion_r465107718", "createdAt": "2020-08-04T14:47:52Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/metrics/ClientMetricsUtils.java", "diffHunk": "@@ -20,26 +20,31 @@\n \n public class ClientMetricsUtils {\n \n-    public static TimeUnit getMetricsRateUnit(Map<String, Object> topoConf) {\n-        return getTimeUnitForCofig(topoConf, Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT);\n+    private static final String RATE_UNIT = \"rate.unit\";\n+    private static final String DURATION_UNIT = \"duration.unit\";\n+    // Use the specified IETF BCP 47 language tag string for a Locale\n+    private static final String LOCALE = \"locale\";\n+\n+    public static TimeUnit getMetricsRateUnit(Map<String, Object> reporterConf) {\n+        return getTimeUnitForConfig(reporterConf, RATE_UNIT);\n     }\n \n-    public static TimeUnit getMetricsDurationUnit(Map<String, Object> topoConf) {\n-        return getTimeUnitForCofig(topoConf, Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_DURATION_UNIT);\n+    public static TimeUnit getMetricsDurationUnit(Map<String, Object> reporterConf) {\n+        return getTimeUnitForConfig(reporterConf, DURATION_UNIT);\n     }\n \n-    public static Locale getMetricsReporterLocale(Map<String, Object> topoConf) {\n-        String languageTag = ObjectReader.getString(topoConf.get(Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE), null);\n+    public static Locale getMetricsReporterLocale(Map<String, Object> reporterConf) {\n+        String languageTag = ObjectReader.getString(reporterConf.get(LOCALE), null);\n         if (languageTag != null) {\n             return Locale.forLanguageTag(languageTag);\n         }\n         return null;\n     }\n \n-    private static TimeUnit getTimeUnitForCofig(Map<String, Object> topoConf, String configName) {\n-        String rateUnitString = ObjectReader.getString(topoConf.get(configName), null);\n-        if (rateUnitString != null) {\n-            return TimeUnit.valueOf(rateUnitString);\n+    public static TimeUnit getTimeUnitForConfig(Map<String, Object> conf, String configName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEyNjM5Mg==", "bodyText": "I can change it to reporterConf for clarity. I make it conf because this is actually a general function so it can be any conf.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465126392", "createdAt": "2020-08-04T15:13:41Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/metrics/ClientMetricsUtils.java", "diffHunk": "@@ -20,26 +20,31 @@\n \n public class ClientMetricsUtils {\n \n-    public static TimeUnit getMetricsRateUnit(Map<String, Object> topoConf) {\n-        return getTimeUnitForCofig(topoConf, Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_RATE_UNIT);\n+    private static final String RATE_UNIT = \"rate.unit\";\n+    private static final String DURATION_UNIT = \"duration.unit\";\n+    // Use the specified IETF BCP 47 language tag string for a Locale\n+    private static final String LOCALE = \"locale\";\n+\n+    public static TimeUnit getMetricsRateUnit(Map<String, Object> reporterConf) {\n+        return getTimeUnitForConfig(reporterConf, RATE_UNIT);\n     }\n \n-    public static TimeUnit getMetricsDurationUnit(Map<String, Object> topoConf) {\n-        return getTimeUnitForCofig(topoConf, Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_DURATION_UNIT);\n+    public static TimeUnit getMetricsDurationUnit(Map<String, Object> reporterConf) {\n+        return getTimeUnitForConfig(reporterConf, DURATION_UNIT);\n     }\n \n-    public static Locale getMetricsReporterLocale(Map<String, Object> topoConf) {\n-        String languageTag = ObjectReader.getString(topoConf.get(Config.STORM_DAEMON_METRICS_REPORTER_PLUGIN_LOCALE), null);\n+    public static Locale getMetricsReporterLocale(Map<String, Object> reporterConf) {\n+        String languageTag = ObjectReader.getString(reporterConf.get(LOCALE), null);\n         if (languageTag != null) {\n             return Locale.forLanguageTag(languageTag);\n         }\n         return null;\n     }\n \n-    private static TimeUnit getTimeUnitForCofig(Map<String, Object> topoConf, String configName) {\n-        String rateUnitString = ObjectReader.getString(topoConf.get(configName), null);\n-        if (rateUnitString != null) {\n-            return TimeUnit.valueOf(rateUnitString);\n+    public static TimeUnit getTimeUnitForConfig(Map<String, Object> conf, String configName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwNzcxOA=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDk1NTYxOnYy", "diffSide": "RIGHT", "path": "storm-server/src/main/java/org/apache/storm/daemon/metrics/MetricsUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo1NjoyMVrOG7kTBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNToxMjo0M1rOG7lBMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTExMzg2Mg==", "bodyText": "Unrelated to this PR, but it seems odd this is a metrics util thing rather than belonging to the CSV reporter class.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465113862", "createdAt": "2020-08-04T14:56:21Z", "author": {"login": "agresch"}, "path": "storm-server/src/main/java/org/apache/storm/daemon/metrics/MetricsUtils.java", "diffHunk": "@@ -58,10 +61,11 @@ private static PreparableReporter getPreparableReporter(String clazz) {\n         return reporter;\n     }\n \n-    public static File getCsvLogDir(Map<String, Object> topoConf) {\n-        String csvMetricsLogDirectory = ObjectReader.getString(topoConf.get(DaemonConfig.STORM_DAEMON_METRICS_REPORTER_CSV_LOG_DIR), null);\n+    public static File getCsvLogDir(Map<String, Object> daemonConf) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEyNTY4Mw==", "bodyText": "Yeah, but for compatibility, I can't simply move it. If any topology invokes it directly, and if we move it and upgrade the cluster, this old topology will have ClassNotFoundException.", "url": "https://github.com/apache/storm/pull/3318#discussion_r465125683", "createdAt": "2020-08-04T15:12:43Z", "author": {"login": "Ethanlm"}, "path": "storm-server/src/main/java/org/apache/storm/daemon/metrics/MetricsUtils.java", "diffHunk": "@@ -58,10 +61,11 @@ private static PreparableReporter getPreparableReporter(String clazz) {\n         return reporter;\n     }\n \n-    public static File getCsvLogDir(Map<String, Object> topoConf) {\n-        String csvMetricsLogDirectory = ObjectReader.getString(topoConf.get(DaemonConfig.STORM_DAEMON_METRICS_REPORTER_CSV_LOG_DIR), null);\n+    public static File getCsvLogDir(Map<String, Object> daemonConf) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTExMzg2Mg=="}, "originalCommit": {"oid": "b7241c55f68b8fbf18f089a1f4349f79163109f2"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4180, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}