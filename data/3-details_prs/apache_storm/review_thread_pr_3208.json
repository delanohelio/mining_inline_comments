{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNDY0MjY1", "number": 3208, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNjoxNlrODe06Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozOTozNlrODe0_Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNjUwNzExOnYy", "diffSide": "RIGHT", "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNjoxNlrOFoLSyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNzoxNDoyNVrOFo3UQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3MjM5Mg==", "bodyText": "can we update the javadoc that this is a supervisor conf?", "url": "https://github.com/apache/storm/pull/3208#discussion_r377672392", "createdAt": "2020-02-11T14:36:16Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -106,9 +105,9 @@\n      * @param port           - port on which the worker runs\n      * @param workerId       - worker id\n      */\n-\n     public Worker(Map<String, Object> conf, IContext context, String topologyId, String assignmentId,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM5MzY2NA==", "bodyText": "That would be great. Will do it (or some can do it) in the future if come across this code again.", "url": "https://github.com/apache/storm/pull/3208#discussion_r378393664", "createdAt": "2020-02-12T17:14:25Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -106,9 +105,9 @@\n      * @param port           - port on which the worker runs\n      * @param workerId       - worker id\n      */\n-\n     public Worker(Map<String, Object> conf, IContext context, String topologyId, String assignmentId,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3MjM5Mg=="}, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNjUyMDU5OnYy", "diffSide": "RIGHT", "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozOTozN1rOFoLbGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNzoxMjo0MlrOFo3QSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3NDUyMg==", "bodyText": "Can you update the javadoc for NimbusClient.getConfiguredClient() to indicate it needs a topoconf?\nAre there any other uses of NimbusClient.getConfiguredClient() that need fixing?", "url": "https://github.com/apache/storm/pull/3208#discussion_r377674522", "createdAt": "2020-02-11T14:39:37Z", "author": {"login": "agresch"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -443,7 +451,7 @@ private void heartbeatToMasterIfLocalbeatFail(LSWorkerHeartbeat lsWorkerHeartbea\n         } catch (Exception tr1) {\n             //If any error/exception thrown, report directly to nimbus.\n             LOG.warn(\"Exception when send heartbeat to local supervisor\", tr1.getMessage());\n-            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(conf)) {\n+            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(topologyConf)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM5MjY0OA==", "bodyText": "NimbusClient does not need a topoConf strictly. If it's used on supervisor, it will be a supervisor conf.", "url": "https://github.com/apache/storm/pull/3208#discussion_r378392648", "createdAt": "2020-02-12T17:12:42Z", "author": {"login": "Ethanlm"}, "path": "storm-client/src/jvm/org/apache/storm/daemon/worker/Worker.java", "diffHunk": "@@ -443,7 +451,7 @@ private void heartbeatToMasterIfLocalbeatFail(LSWorkerHeartbeat lsWorkerHeartbea\n         } catch (Exception tr1) {\n             //If any error/exception thrown, report directly to nimbus.\n             LOG.warn(\"Exception when send heartbeat to local supervisor\", tr1.getMessage());\n-            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(conf)) {\n+            try (NimbusClient nimbusClient = NimbusClient.getConfiguredClient(topologyConf)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3NDUyMg=="}, "originalCommit": {"oid": "65f374c5e9a258d1d485e8c99c334c0ba6122f74"}, "originalPosition": 119}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4356, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}