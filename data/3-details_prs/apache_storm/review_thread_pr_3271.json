{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5Njg5Njk3", "number": 3271, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NTo1MlrOD9jBiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NTo1MlrOD9jBiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODYzNTYxOnYy", "diffSide": "RIGHT", "path": "storm-server/src/main/java/org/apache/storm/daemon/nimbus/Nimbus.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NTo1MlrOGXG7sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTozNjozOVrOGZbgCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NDAxNw==", "bodyText": "What's the issue we want to solve here?\nIf it is just about skipping the code related to resources when the scheduler is not resourceAware, then we have other places like getTopologyPageInfo  we need to take care of", "url": "https://github.com/apache/storm/pull/3271#discussion_r426884017", "createdAt": "2020-05-18T20:45:52Z", "author": {"login": "Ethanlm"}, "path": "storm-server/src/main/java/org/apache/storm/daemon/nimbus/Nimbus.java", "diffHunk": "@@ -2920,7 +2920,7 @@ private SupervisorSummary makeSupervisorSummary(String supervisorId, SupervisorI\n                                                       (int) info.get_uptime_secs(), numPorts, numUsedPorts, supervisorId);\n         ret.set_total_resources(info.get_resources_map());\n         SupervisorResources resources = nodeIdToResources.get().get(supervisorId);\n-        if (resources != null) {\n+        if (resources != null && underlyingScheduler instanceof ResourceAwareScheduler) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8516a5d6bbabcd01cef824e4867bbdb10f773564"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMxODE1Mw==", "bodyText": "I have updated instances where code should avoid following resource calculation if not using ResourceAwareScheduler.", "url": "https://github.com/apache/storm/pull/3271#discussion_r429318153", "createdAt": "2020-05-22T15:36:39Z", "author": {"login": "kishorvpatil"}, "path": "storm-server/src/main/java/org/apache/storm/daemon/nimbus/Nimbus.java", "diffHunk": "@@ -2920,7 +2920,7 @@ private SupervisorSummary makeSupervisorSummary(String supervisorId, SupervisorI\n                                                       (int) info.get_uptime_secs(), numPorts, numUsedPorts, supervisorId);\n         ret.set_total_resources(info.get_resources_map());\n         SupervisorResources resources = nodeIdToResources.get().get(supervisorId);\n-        if (resources != null) {\n+        if (resources != null && underlyingScheduler instanceof ResourceAwareScheduler) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NDAxNw=="}, "originalCommit": {"oid": "8516a5d6bbabcd01cef824e4867bbdb10f773564"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4295, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}