{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5Njg5Njk3", "number": 3271, "title": "MINOR PATCH: Avoid fragmented resources on supervisor creation in nimbus", "bodyText": "What is the purpose of the change\nIf the underlying scheduler is not ResourceAwareScheduler and scheduler has no resources to register, then it does not have to calculate or report  any resources.\n(Explain why we should have this change)\nHow was the change tested\nlocal unit tests.\n(Explain what tests did you do to verify the code change)", "createdAt": "2020-05-18T19:11:37Z", "url": "https://github.com/apache/storm/pull/3271", "merged": true, "mergeCommit": {"oid": "07bb178de9ed6ab2f642d7e3ae464e736ba18975"}, "closed": true, "closedAt": "2020-07-09T16:10:36Z", "author": {"login": "kishorvpatil"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcimJIAAFqTQxMzkyNjk2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwsTzZAFqTQ0MDk5NjQ4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTI2OTY2", "url": "https://github.com/apache/storm/pull/3271#pullrequestreview-413926966", "createdAt": "2020-05-18T20:45:52Z", "commit": {"oid": "8516a5d6bbabcd01cef824e4867bbdb10f773564"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NTo1MlrOGXG7sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NTo1MlrOGXG7sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NDAxNw==", "bodyText": "What's the issue we want to solve here?\nIf it is just about skipping the code related to resources when the scheduler is not resourceAware, then we have other places like getTopologyPageInfo  we need to take care of", "url": "https://github.com/apache/storm/pull/3271#discussion_r426884017", "createdAt": "2020-05-18T20:45:52Z", "author": {"login": "Ethanlm"}, "path": "storm-server/src/main/java/org/apache/storm/daemon/nimbus/Nimbus.java", "diffHunk": "@@ -2920,7 +2920,7 @@ private SupervisorSummary makeSupervisorSummary(String supervisorId, SupervisorI\n                                                       (int) info.get_uptime_secs(), numPorts, numUsedPorts, supervisorId);\n         ret.set_total_resources(info.get_resources_map());\n         SupervisorResources resources = nodeIdToResources.get().get(supervisorId);\n-        if (resources != null) {\n+        if (resources != null && underlyingScheduler instanceof ResourceAwareScheduler) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8516a5d6bbabcd01cef824e4867bbdb10f773564"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8516a5d6bbabcd01cef824e4867bbdb10f773564", "author": {"user": {"login": "kishorvpatil", "name": "Kishor Patil"}}, "url": "https://github.com/apache/storm/commit/8516a5d6bbabcd01cef824e4867bbdb10f773564", "committedDate": "2020-05-18T19:05:31Z", "message": "Avoid fragmented resources on supervisor creation in nimbus"}, "afterCommit": {"oid": "63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "author": {"user": {"login": "kishorvpatil", "name": "Kishor Patil"}}, "url": "https://github.com/apache/storm/commit/63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "committedDate": "2020-05-22T15:32:37Z", "message": "Avoid fragmented resources on supervisor creation in nimbus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Mjg4Mzky", "url": "https://github.com/apache/storm/pull/3271#pullrequestreview-419288392", "createdAt": "2020-05-27T14:43:38Z", "commit": {"oid": "63cf5e3a55d2ab33eb8ba1663e26d0e203352084"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150aef15d7bcd75c9695d359b7ef567170db6794", "author": {"user": {"login": "kishorvpatil", "name": "Kishor Patil"}}, "url": "https://github.com/apache/storm/commit/150aef15d7bcd75c9695d359b7ef567170db6794", "committedDate": "2020-07-01T15:31:19Z", "message": "MINOR: Avoid fragmented resources on supervisor creation in nimbus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "author": {"user": {"login": "kishorvpatil", "name": "Kishor Patil"}}, "url": "https://github.com/apache/storm/commit/63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "committedDate": "2020-05-22T15:32:37Z", "message": "Avoid fragmented resources on supervisor creation in nimbus"}, "afterCommit": {"oid": "150aef15d7bcd75c9695d359b7ef567170db6794", "author": {"user": {"login": "kishorvpatil", "name": "Kishor Patil"}}, "url": "https://github.com/apache/storm/commit/150aef15d7bcd75c9695d359b7ef567170db6794", "committedDate": "2020-07-01T15:31:19Z", "message": "MINOR: Avoid fragmented resources on supervisor creation in nimbus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwOTk2NDgx", "url": "https://github.com/apache/storm/pull/3271#pullrequestreview-440996481", "createdAt": "2020-07-01T15:51:54Z", "commit": {"oid": "150aef15d7bcd75c9695d359b7ef567170db6794"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4582, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}