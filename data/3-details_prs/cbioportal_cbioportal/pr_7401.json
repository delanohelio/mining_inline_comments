{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTY1NDQ4", "number": 7401, "title": "Make metaImport.py use subcommands instead of -c", "bodyText": "Close #7201\nThe cbioportalImporter.py script no longer requires a -c flag to run a command. Each command is now a subcommand that can be run with its own flags.\nChecks\n\n Runs on heroku\n Has tests or has a separate issue that describes the types of test that should be created. If no test is included it should explicitly be mentioned in the PR why there is no test.\n The commit log is comprehensible. It follows 7 rules of great commit messages. For most PRs a single commit should suffice, in some cases multiple topical commits can be useful. During review it is ok to see tiny commits (e.g. Fix reviewer comments), but right before the code gets merged to master or rc branch, any such commits should be squashed since they are useless to the other developers. Definitely avoid merge commits, use rebase instead.\n Is this PR adding logic based on one or more clinical attributes? If yes, please make sure validation for this attribute is also present in the data validation / data loading layers (in backend repo) and documented in File-Formats Clinical data section!\n\nAny screenshots or GIFs?\nIf this is a new visual feature please add a before/after screenshot or gif\nhere with e.g. Giphy CAPTURE or Peek\nNotify reviewers\nRead our Pull request merging\npolicy. It can help to figure out who worked on the\nfile before you. Please use git blame <filename> to determine that\nand notify them either through slack or by assigning them as a reviewer on the PR", "createdAt": "2020-04-15T20:11:21Z", "url": "https://github.com/cBioPortal/cbioportal/pull/7401", "merged": true, "mergeCommit": {"oid": "0d107312f7ea086ab99e40f9f8c87174f79c0651"}, "closed": true, "closedAt": "2020-04-17T22:44:54Z", "author": {"login": "mdhvprasad"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX9hGNAH2gAyNDAzOTY1NDQ4OjViMjI3Y2RlZTI2NDUyZDMwODQ2NzUwZGQ5ZmFlMGU2NWM4ZjcyZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYpP7NAFqTM5NTgxMjU4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc", "author": {"user": {"login": "mdhvprasad", "name": "mvprasad"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/5b227cdee26452d30846750dd9fae0e65c8f72fc", "committedDate": "2020-04-15T19:46:42Z", "message": "Added subcommand functionality using argparse"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDM0MTk5", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#pullrequestreview-395034199", "createdAt": "2020-04-16T22:09:32Z", "commit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjowOTozMlrOGG48Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjowOTozMlrOGG48Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3NzUxOA==", "bodyText": "this command only applies to remove-study command so i would suggest to only add this to the remove_study subparser", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409877518", "createdAt": "2020-04-16T22:09:32Z", "author": {"login": "inodb"}, "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -410,6 +405,25 @@ def interface():\n                         help='Path to Data file')\n     parser.add_argument('-id', '--study_ids', type=str, required=False,\n                         help='Cancer Study IDs for `remove-study` command, comma separated')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDM2MTUz", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#pullrequestreview-395036153", "createdAt": "2020-04-16T22:13:39Z", "commit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjoxMzozOVrOGG5C8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjoxMzozOVrOGG5C8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3OTI4MQ==", "bodyText": "all these commands above are shared among the various subcommands. I think the way to handle that in argparse is to add them to the parent command as described here: https://stackoverflow.com/questions/7498595/python-argparse-add-argument-to-multiple-subparsers", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409879281", "createdAt": "2020-04-16T22:13:39Z", "author": {"login": "inodb"}, "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -410,6 +405,25 @@ def interface():\n                         help='Path to Data file')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDM3ODIy", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#pullrequestreview-395037822", "createdAt": "2020-04-16T22:17:24Z", "commit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjoxNzoyNVrOGG5Icw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMjoxNzoyNVrOGG5Icw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg4MDY5MQ==", "bodyText": "It would be nice to offer backwards compatibility for the -c parameter. I.e. if someone supplies that, call the relevant command accordingly. Maybe add in the help text that the recommended way is to use the command directly and that this is only to provide backwards compatibility", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409880691", "createdAt": "2020-04-16T22:17:25Z", "author": {"login": "inodb"}, "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -394,12 +394,7 @@ def check_dir(study_directory):\n         print('Study cannot be found: ' + study_directory, file=ERROR_FILE)\n         sys.exit(2)\n \n-def interface():\n-    parser = argparse.ArgumentParser(description='cBioPortal meta Importer')\n-    parser.add_argument('-c', '--command', type=str, required=False,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDM4MjIx", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#pullrequestreview-395038221", "createdAt": "2020-04-16T22:18:20Z", "commit": {"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cccb8864d688a06b62e98e2dca5cd939dfc399db", "author": {"user": {"login": "mdhvprasad", "name": "mvprasad"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/cccb8864d688a06b62e98e2dca5cd939dfc399db", "committedDate": "2020-04-17T18:31:56Z", "message": "PR Fixes. Added backwards compatibility and parent parsing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "997469076548cf4484425ca7be150a88252b4131", "author": {"user": {"login": "mdhvprasad", "name": "mvprasad"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/997469076548cf4484425ca7be150a88252b4131", "committedDate": "2020-04-17T18:45:20Z", "message": "Added outdated version message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37d38d0d0a0945856943ceae7147938cef178ada", "author": {"user": {"login": "mdhvprasad", "name": "mvprasad"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/37d38d0d0a0945856943ceae7147938cef178ada", "committedDate": "2020-04-17T21:27:43Z", "message": "Added error checking for calling multiple commands."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODEyNTg0", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#pullrequestreview-395812584", "createdAt": "2020-04-17T22:43:46Z", "commit": {"oid": "37d38d0d0a0945856943ceae7147938cef178ada"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1758, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}