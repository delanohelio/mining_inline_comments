{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NDgwNTkx", "number": 7343, "title": "backend change for supporting new survival data format", "bodyText": "Fix #7335\nThis pr will do the following thing:\n\nFor OS, DFS data, we still allow the data to be imported as old format (\u201cDECEASED\u201d, \u201cLIVING\u201d) importer will import them as new format. The validator will not complain about the OS and DFS to not have \u201c0:\u201d or \u201c1:\u201d before the data.\nFor other survival status attributes, the validator will need them to be the new format or need to run the survival data migration tool.\nChanged all existing tests data file to new data format\nChanged all reference (although some of them are already outdated: like 5. GetSurvivalDataJSON.java and clinical_timeline.jsp )\nUpdate all MD files to the new format.", "createdAt": "2020-03-31T17:24:50Z", "url": "https://github.com/cBioPortal/cbioportal/pull/7343", "merged": true, "mergeCommit": {"oid": "2b3f517c498dcf8c2f0a0975815ff44cc19fa537"}, "closed": true, "closedAt": "2020-05-14T22:37:55Z", "author": {"login": "dippindots"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTawqwABqjMxODg4NDM1NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchSiyIABqjMzMzgwNzcxODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdbe6aaf3351ea11fda1a94c74898dd6808b8606", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/bdbe6aaf3351ea11fda1a94c74898dd6808b8606", "committedDate": "2020-03-31T17:19:52Z", "message": "modify file format for survival data"}, "afterCommit": {"oid": "b873c4fa47ce8245d02cbd8c5fd530d725a62716", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b873c4fa47ce8245d02cbd8c5fd530d725a62716", "committedDate": "2020-04-01T17:00:53Z", "message": "modify file format for survival data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b873c4fa47ce8245d02cbd8c5fd530d725a62716", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b873c4fa47ce8245d02cbd8c5fd530d725a62716", "committedDate": "2020-04-01T17:00:53Z", "message": "modify file format for survival data"}, "afterCommit": {"oid": "08e51791dc6e27388b4bfbc4d10ea979429ec487", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/08e51791dc6e27388b4bfbc4d10ea979429ec487", "committedDate": "2020-04-07T05:07:27Z", "message": "backend support for survival data migration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cfb1a50346a748f3a30ac52d15dd80ee636c268", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/1cfb1a50346a748f3a30ac52d15dd80ee636c268", "committedDate": "2020-04-07T05:14:07Z", "message": "test"}, "afterCommit": {"oid": "777880cd8ad6d4ad4924c407971f4cfdb1ce6464", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/777880cd8ad6d4ad4924c407971f4cfdb1ce6464", "committedDate": "2020-04-07T05:26:11Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "777880cd8ad6d4ad4924c407971f4cfdb1ce6464", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/777880cd8ad6d4ad4924c407971f4cfdb1ce6464", "committedDate": "2020-04-07T05:26:11Z", "message": "test"}, "afterCommit": {"oid": "35ab2c20773d5d3261c7b7f59a2c9e95479a9ee8", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/35ab2c20773d5d3261c7b7f59a2c9e95479a9ee8", "committedDate": "2020-04-07T05:46:59Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35ab2c20773d5d3261c7b7f59a2c9e95479a9ee8", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/35ab2c20773d5d3261c7b7f59a2c9e95479a9ee8", "committedDate": "2020-04-07T05:46:59Z", "message": "test"}, "afterCommit": {"oid": "005f2eea7127743dbe43326578e90a0499a24c33", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/005f2eea7127743dbe43326578e90a0499a24c33", "committedDate": "2020-04-24T17:13:04Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "005f2eea7127743dbe43326578e90a0499a24c33", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/005f2eea7127743dbe43326578e90a0499a24c33", "committedDate": "2020-04-24T17:13:04Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "951fca080751085b9fcb487eef164b7dd4be345a", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/951fca080751085b9fcb487eef164b7dd4be345a", "committedDate": "2020-04-24T17:33:26Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "951fca080751085b9fcb487eef164b7dd4be345a", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/951fca080751085b9fcb487eef164b7dd4be345a", "committedDate": "2020-04-24T17:33:26Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "b0f482c7dd5404e975ba157aee73a47d0dd10fc9", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b0f482c7dd5404e975ba157aee73a47d0dd10fc9", "committedDate": "2020-04-24T18:48:50Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0f482c7dd5404e975ba157aee73a47d0dd10fc9", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b0f482c7dd5404e975ba157aee73a47d0dd10fc9", "committedDate": "2020-04-24T18:48:50Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "db07beaaa6e6dd356e7f0301a88b12f7d4ce2628", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/db07beaaa6e6dd356e7f0301a88b12f7d4ce2628", "committedDate": "2020-04-28T14:18:51Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db07beaaa6e6dd356e7f0301a88b12f7d4ce2628", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/db07beaaa6e6dd356e7f0301a88b12f7d4ce2628", "committedDate": "2020-04-28T14:18:51Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "2d4ed49bc70ec3d0aca8456ed6b5e64d3d8737c6", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/2d4ed49bc70ec3d0aca8456ed6b5e64d3d8737c6", "committedDate": "2020-04-28T15:10:06Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d4ed49bc70ec3d0aca8456ed6b5e64d3d8737c6", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/2d4ed49bc70ec3d0aca8456ed6b5e64d3d8737c6", "committedDate": "2020-04-28T15:10:06Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "a1fe4b7c5fbc3621588795eeff768836ff552715", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/a1fe4b7c5fbc3621588795eeff768836ff552715", "committedDate": "2020-04-28T15:21:06Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1fe4b7c5fbc3621588795eeff768836ff552715", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/a1fe4b7c5fbc3621588795eeff768836ff552715", "committedDate": "2020-04-28T15:21:06Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/94a85b668c3e94c6886729f977054dd715fa186e", "committedDate": "2020-04-28T15:50:49Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNjM1OTI4", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#pullrequestreview-402635928", "createdAt": "2020-04-29T12:54:10Z", "commit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMjo1NDoxMVrOGN9bTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMzoxMzoyNFrOGN-J7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI5MTA4NQ==", "bodyText": "If we are generalizing the code, why are we looking for specific values , like \"1:DECEASED\" or \"0:LIVING\" ?\nAlso, is \"os\" and \"dfs\" dataType, coming from the clinical data file now?", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r417291085", "createdAt": "2020-04-29T12:54:11Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/servlet/GetSurvivalDataJSON.java", "diffHunk": "@@ -144,9 +144,9 @@ protected void doPost(HttpServletRequest httpServletRequest,\n                     String osStatus = clinicalData.getOverallSurvivalStatus();\n                     if(osStatus == null || osStatus.length() == 0) {\n                         _result.put(\"status\", \"NA\");\n-                    } else if (osStatus.equalsIgnoreCase(\"DECEASED\")) {\n+                    } else if (osStatus.equalsIgnoreCase(\"1:DECEASED\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI5NzYyNQ==", "bodyText": "Should we pull these values out and put into a file for reading into the validator?  I thought we discussed something like this during the planning call.", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r417297625", "createdAt": "2020-04-29T13:04:27Z", "author": {"login": "n1zea144"}, "path": "core/src/main/scripts/importer/validateData.py", "diffHunk": "@@ -2655,30 +2655,51 @@ def checkLine(self, data):\n                                    'column_number': col_index + 1,\n                                    'cause': value})\n             elif col_name == 'OS_STATUS':\n-                if value == 'DECEASED':\n+                if value == '1:DECEASED':\n                     osstatus_is_deceased = True\n                 elif (value.lower() not in self.NULL_VALUES and\n-                        value not in ('LIVING', 'DECEASED')):\n+                        value not in ('LIVING', 'DECEASED', '0:LIVING', '1:DECEASED')):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzMwMDA2NA==", "bodyText": "Are we missing \":DECEASED\" \"1:Recurred/Progressed\"?", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r417300064", "createdAt": "2020-04-29T13:08:41Z", "author": {"login": "n1zea144"}, "path": "docs/File-Formats.md", "diffHunk": "@@ -202,8 +202,8 @@ Custom attributes:\n #STRING<TAB>STRING<TAB>NUMBER<TAB>STRING<TAB>NUMBER<TAB>...\n #1<TAB>1<TAB>1<TAB>1<TAB>1<TAB>\n PATIENT_ID<TAB>OS_STATUS<TAB>OS_MONTHS<TAB>DFS_STATUS<TAB>DFS_MONTHS<TAB>...\n-PATIENT_ID_1<TAB>DECEASED<TAB>17.97<TAB>Recurred/Progressed<TAB>30.98<TAB>...\n-PATIENT_ID_2<TAB>LIVING<TAB>63.01<TAB>DiseaseFree<TAB>63.01<TAB>...\n+PATIENT_ID_1<TAB>1<TAB>17.97<TAB>1<TAB>30.98<TAB>...", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzMwMjAxNg==", "bodyText": "Are we not generaIizing for other survival data here?", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r417302016", "createdAt": "2020-04-29T13:11:47Z", "author": {"login": "n1zea144"}, "path": "portal/src/main/webapp/WEB-INF/jsp/patient_view/clinical_timeline.jsp", "diffHunk": "@@ -159,7 +159,7 @@\n \n                 for (i=0; i < prefixes.length; i++) {\n                     var prefix = prefixes[i];\n-                    if (patientInfo[prefix+\"OS_STATUS\"] === \"DECEASED\" &&\n+                    if (patientInfo[prefix+\"OS_STATUS\"] === \"1:DECEASED\" &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzMwMzAyMQ==", "bodyText": "Are we not generalizing for other survival types here (admittedly I don't know where this file is used).", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r417303021", "createdAt": "2020-04-29T13:13:24Z", "author": {"login": "n1zea144"}, "path": "portal/src/main/webapp/css/patient-view/clinical-attributes.css", "diffHunk": "@@ -120,15 +120,15 @@\n     content: \" years old\";\n }\n /* attributes with special colors */\n-.clinical-attribute[attr-id=\"OS_STATUS\"][attr-value=\"DECEASED\"],\n-.clinical-attribute[attr-id=\"OS_STATUS\"][attr-value=\"DEAD\"],\n+.clinical-attribute[attr-id=\"OS_STATUS\"][attr-value=\"1:DECEASED\"],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8abb204978f55ab2050aecf66e6f52716449a2a2", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/8abb204978f55ab2050aecf66e6f52716449a2a2", "committedDate": "2020-04-29T23:03:12Z", "message": "update survival tests"}, "afterCommit": {"oid": "608492d4373bf54ac5da5422ddda60af212bd905", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/608492d4373bf54ac5da5422ddda60af212bd905", "committedDate": "2020-04-30T01:25:09Z", "message": "testImportClinicalDataSurvival:216"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "608492d4373bf54ac5da5422ddda60af212bd905", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/608492d4373bf54ac5da5422ddda60af212bd905", "committedDate": "2020-04-30T01:25:09Z", "message": "testImportClinicalDataSurvival:216"}, "afterCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b69759630a61eb0040436987801ad57079cfdcfb", "committedDate": "2020-04-30T01:47:19Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MTU0Mjcz", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#pullrequestreview-405154273", "createdAt": "2020-05-04T16:34:21Z", "commit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNjozNDoyMlrOGQIZ6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNjo1MDoxNFrOGQJCAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU2ODEwNQ==", "bodyText": "I suggest using the \"has\" approach as implemented in ImportClinicalData. MissingAttributeValues.  It makes for cleaner code -\n\n  \n    \n      cbioportal/core/src/main/java/org/mskcc/cbio/portal/scripts/ImportClinicalData.java\n    \n    \n         Line 81\n      in\n      b697596\n    \n    \n    \n    \n\n        \n          \n           static public boolean has(String value) {", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419568105", "createdAt": "2020-05-04T16:34:22Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/scripts/ImportClinicalData.java", "diffHunk": "@@ -559,7 +558,12 @@ private void addDatum(int internalId, String attrId, String attrVal, String attr\n         // attribute value exists and if so, perfom an update\n         if (attrType.equals(ClinicalAttribute.PATIENT_ATTRIBUTE)) {\n             numPatientSpecificClinicalAttributesAdded++;\n-            DaoClinicalData.addPatientDatum(internalId, attrId, attrVal.trim());\n+            // add prefix for OS or DFS attributes\n+            if (SurvivalAttributeUtil.isSurvivalAttribute(attrId)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3Mjg4Mg==", "bodyText": "I think this code may still be used by the old web service (R and MATLAB libraries included).  If I understand the code, you are transforming a value of \"1:DECEASED\" to \"1\" on the way out of this servlet...but why do you want to do this?", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419572882", "createdAt": "2020-05-04T16:41:54Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/servlet/GetSurvivalDataJSON.java", "diffHunk": "@@ -144,9 +144,9 @@ protected void doPost(HttpServletRequest httpServletRequest,\n                     String osStatus = clinicalData.getOverallSurvivalStatus();\n                     if(osStatus == null || osStatus.length() == 0) {\n                         _result.put(\"status\", \"NA\");\n-                    } else if (osStatus.equalsIgnoreCase(\"DECEASED\")) {\n+                    } else if (osStatus.equalsIgnoreCase(\"1:DECEASED\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI5MTA4NQ=="}, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3MzE4NA==", "bodyText": "Please add a newline here.", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419573184", "createdAt": "2020-05-04T16:42:21Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/util/SurvivalAttributeUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package org.mskcc.cbio.portal.util;\n+\n+public class SurvivalAttributeUtil {\n+\n+    private static final String ZERO_PREFIX = \"0:\";\n+    private static final String ONE_PREFIX = \"1:\";\n+\n+    public enum SurvivalStatusAttributes {\n+        OS_STATUS(\"OS_STATUS\"),\n+        DFS_STATUS(\"DFS_STATUS\");\n+\n+        String attributeId;\n+        SurvivalStatusAttributes(String attrId) {\n+            attributeId = attrId;\n+        }\n+\n+        String getAttributeId() {\n+            return attributeId;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingOneValues {\n+        DECEASED(\"DECEASED\"),\n+        RECURRED_PROGRESSED(\"Recurred/Progressed\"),\n+        RECURRED(\"Recurred\"),\n+        PROGRESSED(\"Progressed\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingOneValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingZeroValues {\n+        LIVING(\"LIVING\"),\n+        DISEASE_FREE(\"DiseaseFree\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingZeroValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public static boolean isSurvivalAttribute(String attributeId) {\n+        for (SurvivalStatusAttributes attribute : SurvivalStatusAttributes.values()) {\n+            if (attribute.getAttributeId().equals(attributeId)) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n+    public static String getModifiedAttributeValue(String value) {\n+        for (SurvivalStatusMappingOneValues attributeValue : SurvivalStatusMappingOneValues.values()) {\n+            if (attributeValue.getStatusValue().equals(value)) {\n+                return ONE_PREFIX + value;\n+            }\n+        }\n+        for (SurvivalStatusMappingZeroValues attributeValue : SurvivalStatusMappingZeroValues.values()) {\n+            if (attributeValue.getStatusValue().equals(value)) {\n+                return ZERO_PREFIX + value;\n+            }\n+        }\n+        // value is new format or is one of the NULL_VALUES\n+        return value;\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3Mzc0NA==", "bodyText": "Suggest using the \"has\" approach as linked above...", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419573744", "createdAt": "2020-05-04T16:43:15Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/util/SurvivalAttributeUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package org.mskcc.cbio.portal.util;\n+\n+public class SurvivalAttributeUtil {\n+\n+    private static final String ZERO_PREFIX = \"0:\";\n+    private static final String ONE_PREFIX = \"1:\";\n+\n+    public enum SurvivalStatusAttributes {\n+        OS_STATUS(\"OS_STATUS\"),\n+        DFS_STATUS(\"DFS_STATUS\");\n+\n+        String attributeId;\n+        SurvivalStatusAttributes(String attrId) {\n+            attributeId = attrId;\n+        }\n+\n+        String getAttributeId() {\n+            return attributeId;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingOneValues {\n+        DECEASED(\"DECEASED\"),\n+        RECURRED_PROGRESSED(\"Recurred/Progressed\"),\n+        RECURRED(\"Recurred\"),\n+        PROGRESSED(\"Progressed\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingOneValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingZeroValues {\n+        LIVING(\"LIVING\"),\n+        DISEASE_FREE(\"DiseaseFree\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingZeroValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public static boolean isSurvivalAttribute(String attributeId) {\n+        for (SurvivalStatusAttributes attribute : SurvivalStatusAttributes.values()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3MzgzNA==", "bodyText": "Suggest using the \"has\" approach as linked above...", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419573834", "createdAt": "2020-05-04T16:43:22Z", "author": {"login": "n1zea144"}, "path": "core/src/main/java/org/mskcc/cbio/portal/util/SurvivalAttributeUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package org.mskcc.cbio.portal.util;\n+\n+public class SurvivalAttributeUtil {\n+\n+    private static final String ZERO_PREFIX = \"0:\";\n+    private static final String ONE_PREFIX = \"1:\";\n+\n+    public enum SurvivalStatusAttributes {\n+        OS_STATUS(\"OS_STATUS\"),\n+        DFS_STATUS(\"DFS_STATUS\");\n+\n+        String attributeId;\n+        SurvivalStatusAttributes(String attrId) {\n+            attributeId = attrId;\n+        }\n+\n+        String getAttributeId() {\n+            return attributeId;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingOneValues {\n+        DECEASED(\"DECEASED\"),\n+        RECURRED_PROGRESSED(\"Recurred/Progressed\"),\n+        RECURRED(\"Recurred\"),\n+        PROGRESSED(\"Progressed\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingOneValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public enum SurvivalStatusMappingZeroValues {\n+        LIVING(\"LIVING\"),\n+        DISEASE_FREE(\"DiseaseFree\");\n+\n+        String statusValue;\n+        SurvivalStatusMappingZeroValues(String value) {\n+            statusValue = value;\n+        }\n+\n+        String getStatusValue() {\n+            return statusValue;\n+        }\n+    }\n+\n+    public static boolean isSurvivalAttribute(String attributeId) {\n+        for (SurvivalStatusAttributes attribute : SurvivalStatusAttributes.values()) {\n+            if (attribute.getAttributeId().equals(attributeId)) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n+    public static String getModifiedAttributeValue(String value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3ODM2OQ==", "bodyText": "You remember correctly, we did discuss as it relates to survival data migration tool.  I'm suggesting we use a similar approach to inject the vocabulary here.  Maybe you are only validating OS_STATUS and DFS_STATUS and nothing more?", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#discussion_r419578369", "createdAt": "2020-05-04T16:50:14Z", "author": {"login": "n1zea144"}, "path": "core/src/main/scripts/importer/validateData.py", "diffHunk": "@@ -2655,30 +2655,51 @@ def checkLine(self, data):\n                                    'column_number': col_index + 1,\n                                    'cause': value})\n             elif col_name == 'OS_STATUS':\n-                if value == 'DECEASED':\n+                if value == '1:DECEASED':\n                     osstatus_is_deceased = True\n                 elif (value.lower() not in self.NULL_VALUES and\n-                        value not in ('LIVING', 'DECEASED')):\n+                        value not in ('LIVING', 'DECEASED', '0:LIVING', '1:DECEASED')):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI5NzYyNQ=="}, "originalCommit": {"oid": "94a85b668c3e94c6886729f977054dd715fa186e"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b69759630a61eb0040436987801ad57079cfdcfb", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b69759630a61eb0040436987801ad57079cfdcfb", "committedDate": "2020-04-30T01:47:19Z", "message": "address comments"}, "afterCommit": {"oid": "84889942504443dd1b471924e1bc926df50ec74d", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/84889942504443dd1b471924e1bc926df50ec74d", "committedDate": "2020-05-05T20:53:03Z", "message": "add has() function to enum"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84889942504443dd1b471924e1bc926df50ec74d", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/84889942504443dd1b471924e1bc926df50ec74d", "committedDate": "2020-05-05T20:53:03Z", "message": "add has() function to enum"}, "afterCommit": {"oid": "86f066aca39614fc7d7978e746d95d391b34162c", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/86f066aca39614fc7d7978e746d95d391b34162c", "committedDate": "2020-05-05T21:39:52Z", "message": "add has() function to enum"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NjkyOTM3", "url": "https://github.com/cBioPortal/cbioportal/pull/7343#pullrequestreview-406692937", "createdAt": "2020-05-06T14:51:40Z", "commit": {"oid": "86f066aca39614fc7d7978e746d95d391b34162c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86f066aca39614fc7d7978e746d95d391b34162c", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/86f066aca39614fc7d7978e746d95d391b34162c", "committedDate": "2020-05-05T21:39:52Z", "message": "add has() function to enum"}, "afterCommit": {"oid": "3d661e981431b0de7ad80ec637f4986b10fd5f82", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/3d661e981431b0de7ad80ec637f4986b10fd5f82", "committedDate": "2020-05-14T19:15:18Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f72115a531a053294866654871f7280659265ff5", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/f72115a531a053294866654871f7280659265ff5", "committedDate": "2020-05-14T19:21:33Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d661e981431b0de7ad80ec637f4986b10fd5f82", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/3d661e981431b0de7ad80ec637f4986b10fd5f82", "committedDate": "2020-05-14T19:15:18Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}, "afterCommit": {"oid": "f72115a531a053294866654871f7280659265ff5", "author": {"user": {"login": "dippindots", "name": "Gaofei Zhao"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/f72115a531a053294866654871f7280659265ff5", "committedDate": "2020-05-14T19:21:33Z", "message": "add '0:' and '1:' as prefix before survival status clinical attribute data"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1743, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}