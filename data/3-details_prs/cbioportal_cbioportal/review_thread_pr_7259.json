{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMTI4OTcw", "number": 7259, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTozNDozOVrODk0usg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxODoyNDo0MFrODl5VfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTM5MjUwOnYy", "diffSide": "RIGHT", "path": "db-scripts/src/main/resources/cgds.sql", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTozNDozOVrOFxXWBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTozNDozOVrOFxXWBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMwNzAxMg==", "bodyText": "may be declare it as enum\nRESOURCE_TYPE ENUM('STUDY', 'PATIENT', 'SAMPLE') NOT NULL,", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r387307012", "createdAt": "2020-03-03T21:34:39Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,46 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,\n+  `RESOURCE_TYPE` varchar(255) NOT NULL COMMENT 'STUDY, PATIENT or SAMPLE',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ec4ceb008a8f725a20f4b862524a1df119e616"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTM5ODEzOnYy", "diffSide": "RIGHT", "path": "db-scripts/src/main/resources/cgds.sql", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTozNjoyN1rOFxXZYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyODo0OVrOFyVozQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMwNzg3Mg==", "bodyText": "@adamabeshouse just want to confirm that there won't be a duplicate RESOURCE_ID for different types within a study", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r387307872", "createdAt": "2020-03-03T21:36:27Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,46 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,\n+  `RESOURCE_TYPE` varchar(255) NOT NULL COMMENT 'STUDY, PATIENT or SAMPLE',\n+  `OPEN_BY_DEFAULT` BOOLEAN NOT NULL,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ec4ceb008a8f725a20f4b862524a1df119e616"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk1MTUwOQ==", "bodyText": "correct, that's what I think it should be. thats how it works with clinical attributes, right? (clinical attr, study) is unique? @kalletlak", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r387951509", "createdAt": "2020-03-04T21:42:35Z", "author": {"login": "adamabeshouse"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,46 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,\n+  `RESOURCE_TYPE` varchar(255) NOT NULL COMMENT 'STUDY, PATIENT or SAMPLE',\n+  `OPEN_BY_DEFAULT` BOOLEAN NOT NULL,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMwNzg3Mg=="}, "originalCommit": {"oid": "b1ec4ceb008a8f725a20f4b862524a1df119e616"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyNzYyOQ==", "bodyText": "yes", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r388327629", "createdAt": "2020-03-05T14:28:49Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,46 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,\n+  `RESOURCE_TYPE` varchar(255) NOT NULL COMMENT 'STUDY, PATIENT or SAMPLE',\n+  `OPEN_BY_DEFAULT` BOOLEAN NOT NULL,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMwNzg3Mg=="}, "originalCommit": {"oid": "b1ec4ceb008a8f725a20f4b862524a1df119e616"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjAzMTk5OnYy", "diffSide": "RIGHT", "path": "db-scripts/src/main/resources/cgds.sql", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1NTozMVrOFxweCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1NTozMVrOFxweCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcxODY2NA==", "bodyText": "set default value to false(0)", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r387718664", "createdAt": "2020-03-04T14:55:31Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,46 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,\n+  `RESOURCE_TYPE` varchar(255) NOT NULL COMMENT 'STUDY, PATIENT or SAMPLE',\n+  `OPEN_BY_DEFAULT` BOOLEAN NOT NULL,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ec4ceb008a8f725a20f4b862524a1df119e616"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTgxMjI1OnYy", "diffSide": "RIGHT", "path": "db-scripts/src/main/resources/migration.sql", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDowOTo0NFrOFyU53w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDowOTo0NFrOFyU53w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMxNTYxNQ==", "bodyText": "@dippindots @adamabeshouse any specific reason why DISPLAY_NAME could be null and DESCRIPTION not to be?", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r388315615", "createdAt": "2020-03-05T14:09:44Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/migration.sql", "diffHunk": "@@ -812,3 +812,41 @@ WHERE NOT EXISTS (SELECT * FROM genetic_profile WHERE  STABLE_ID=CONCAT(`fusion_\n     AND CANCER_STUDY_ID = `fusion_studies`.CANCER_STUDY_ID);\n DROP TEMPORARY TABLE fusion_studies;\n UPDATE `info` SET `DB_SCHEMA_VERSION`=\"2.12.3\";\n+\n+##version: 2.12.4\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) DEFAULT NULL,\n+  `DESCRIPTION` varchar(2048) NOT NULL,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16bd41483886fd183bd98a189bd2e31f48d9f7b7"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDYzMjkyOnYy", "diffSide": "RIGHT", "path": "db-scripts/src/main/resources/cgds.sql", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxODoyNDo0MFrOFzCx3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDowODoxN1rOFzF9Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA2NzIzMA==", "bodyText": "Since this ID is never used at all, why. not make (INTERNAL_ID, RESOURCE_ID, URL) as primary key?", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r389067230", "createdAt": "2020-03-06T18:24:40Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,52 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) DEFAULT NULL,\n+  `RESOURCE_TYPE` ENUM('STUDY', 'PATIENT', 'SAMPLE') NOT NULL,\n+  `OPEN_BY_DEFAULT` BOOLEAN DEFAULT 0,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),\n+  FOREIGN KEY (`CANCER_STUDY_ID`) REFERENCES `cancer_study` (`CANCER_STUDY_ID`) ON DELETE CASCADE\n+);\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_sample` (\n+  `ID` INT(11) NOT NULL auto_increment,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b7d5e428bf49557ad64a7c6a96b18cf09bd4ab6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4Njc4NA==", "bodyText": "technially someone could have a duplicate entry though", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r389086784", "createdAt": "2020-03-06T19:05:18Z", "author": {"login": "adamabeshouse"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,52 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) DEFAULT NULL,\n+  `RESOURCE_TYPE` ENUM('STUDY', 'PATIENT', 'SAMPLE') NOT NULL,\n+  `OPEN_BY_DEFAULT` BOOLEAN DEFAULT 0,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),\n+  FOREIGN KEY (`CANCER_STUDY_ID`) REFERENCES `cancer_study` (`CANCER_STUDY_ID`) ON DELETE CASCADE\n+);\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_sample` (\n+  `ID` INT(11) NOT NULL auto_increment,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA2NzIzMA=="}, "originalCommit": {"oid": "7b7d5e428bf49557ad64a7c6a96b18cf09bd4ab6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4ODc5NQ==", "bodyText": "I think it should be detected and blocked while importing", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r389088795", "createdAt": "2020-03-06T19:09:37Z", "author": {"login": "kalletlak"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,52 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) DEFAULT NULL,\n+  `RESOURCE_TYPE` ENUM('STUDY', 'PATIENT', 'SAMPLE') NOT NULL,\n+  `OPEN_BY_DEFAULT` BOOLEAN DEFAULT 0,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),\n+  FOREIGN KEY (`CANCER_STUDY_ID`) REFERENCES `cancer_study` (`CANCER_STUDY_ID`) ON DELETE CASCADE\n+);\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_sample` (\n+  `ID` INT(11) NOT NULL auto_increment,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA2NzIzMA=="}, "originalCommit": {"oid": "7b7d5e428bf49557ad64a7c6a96b18cf09bd4ab6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExOTI5NA==", "bodyText": "Thanks @kalletlak @adamabeshouse. Updated!", "url": "https://github.com/cBioPortal/cbioportal/pull/7259#discussion_r389119294", "createdAt": "2020-03-06T20:08:17Z", "author": {"login": "dippindots"}, "path": "db-scripts/src/main/resources/cgds.sql", "diffHunk": "@@ -865,5 +869,52 @@ CREATE TABLE `info` (\n   `DB_SCHEMA_VERSION` varchar(24),\n   `GENESET_VERSION` varchar(24)\n );\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_definition` (\n+  `RESOURCE_ID` varchar(255) NOT NULL,\n+  `DISPLAY_NAME` varchar(255) NOT NULL,\n+  `DESCRIPTION` varchar(2048) DEFAULT NULL,\n+  `RESOURCE_TYPE` ENUM('STUDY', 'PATIENT', 'SAMPLE') NOT NULL,\n+  `OPEN_BY_DEFAULT` BOOLEAN DEFAULT 0,\n+  `PRIORITY` int(11) NOT NULL,\n+  `CANCER_STUDY_ID` int(11) NOT NULL,\n+  PRIMARY KEY (`RESOURCE_ID`,`CANCER_STUDY_ID`),\n+  FOREIGN KEY (`CANCER_STUDY_ID`) REFERENCES `cancer_study` (`CANCER_STUDY_ID`) ON DELETE CASCADE\n+);\n+\n+-- --------------------------------------------------------\n+CREATE TABLE `resource_sample` (\n+  `ID` INT(11) NOT NULL auto_increment,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA2NzIzMA=="}, "originalCommit": {"oid": "7b7d5e428bf49557ad64a7c6a96b18cf09bd4ab6"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3588, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}