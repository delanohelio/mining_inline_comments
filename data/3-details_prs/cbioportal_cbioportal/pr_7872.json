{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTMxOTY3", "number": 7872, "title": "Add CNA Gene Filter to StudyViewFilter", "bodyText": "Fix #7870\nDescribe changes proposed in this pull request:\n\nThere is an existing filter that is used for the CNA table in the study view: geneFilters\nThis filter only supports CNA alts of -2, or 2.\nThis PR improves the logic for the service method that backs this filter so that it can filter by -2, -1, 0, 1, 2", "createdAt": "2020-09-09T20:56:31Z", "url": "https://github.com/cBioPortal/cbioportal/pull/7872", "merged": true, "mergeCommit": {"oid": "dacb06266b9289bfc1513ea2aa2f3c44dfb91378"}, "closed": true, "closedAt": "2020-11-02T16:37:11Z", "author": {"login": "Luke-Sikina"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHSpkYABqjM3NDc4MTczMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYnIl5AFqTUyMTc4OTUxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1543b1c07f386858cf9449d047aacaf04b970b46", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/1543b1c07f386858cf9449d047aacaf04b970b46", "committedDate": "2020-09-09T20:51:54Z", "message": "Add CNA Gene Filter to StudyViewFilter\n- Created CNAFilter type\n- Added CNAFilters to StudyViewFilter\n- Created CNAFilterApplier\n- Added CNAFilterApplier to StudyViewFilterApplier\n- Relevant tests"}, "afterCommit": {"oid": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "committedDate": "2020-09-09T20:58:11Z", "message": "Add CNA Gene Filter to StudyViewFilter\n\n- Created CNAFilter type\n- Added CNAFilters to StudyViewFilter\n- Created CNAFilterApplier\n- Added CNAFilterApplier to StudyViewFilterApplier\n- Relevant tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1OTI1MDQx", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#pullrequestreview-485925041", "createdAt": "2020-09-10T13:24:36Z", "commit": {"oid": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzoyNDozNlrOHPzZXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzoyNDozNlrOHPzZXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMzMjc2Ng==", "bodyText": "Studies can have multiple CNA profiles (ex: gbm_tcga_pub study has 2 CNA profiles). profileType needs to be included. It looks much similar to GenomicDataFilter, may be reuse it", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#discussion_r486332766", "createdAt": "2020-09-10T13:24:36Z", "author": {"login": "kalletlak"}, "path": "web/src/main/java/org/cbioportal/web/parameter/CNAFilter.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package org.cbioportal.web.parameter;\n+\n+import org.cbioportal.model.CNA;\n+\n+public class CNAFilter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "committedDate": "2020-09-09T20:58:11Z", "message": "Add CNA Gene Filter to StudyViewFilter\n\n- Created CNAFilter type\n- Added CNAFilters to StudyViewFilter\n- Created CNAFilterApplier\n- Added CNAFilterApplier to StudyViewFilterApplier\n- Relevant tests"}, "afterCommit": {"oid": "55c992c08bd55e874e2ffc1e9e5f076641321dbd", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/55c992c08bd55e874e2ffc1e9e5f076641321dbd", "committedDate": "2020-09-23T17:36:47Z", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDU5NDM4", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#pullrequestreview-496459438", "createdAt": "2020-09-25T14:11:03Z", "commit": {"oid": "55c992c08bd55e874e2ffc1e9e5f076641321dbd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNDoxMTowM1rOHYFVoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNDoxMTowM1rOHYFVoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAxNTMyOA==", "bodyText": "I think this is not required", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#discussion_r495015328", "createdAt": "2020-09-25T14:11:03Z", "author": {"login": "kalletlak"}, "path": "web/src/main/java/org/cbioportal/web/parameter/GeneFilter.java", "diffHunk": "@@ -16,7 +16,7 @@\n     private Set<String> molecularProfileIds;\n     private List<List<String>> geneQueries;\n \n-    private final String GENE_QUERY_PATTERN = \"^(\\\\w+)[\\\\s]*?(?:\\\\:(?:[\\\\s]*(?:(AMP)|(HOMDEL))\\\\b)+)?$\";\n+    private final String GENE_QUERY_PATTERN = \"^(\\\\w+)[\\\\s]*?(?:\\\\:(?:[\\\\s]*(?:(AMP)|(GAIN)|(DIPLOID)|(HETLOSS)|(HOMDEL))\\\\b)+)?$\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c992c08bd55e874e2ffc1e9e5f076641321dbd"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55c992c08bd55e874e2ffc1e9e5f076641321dbd", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/55c992c08bd55e874e2ffc1e9e5f076641321dbd", "committedDate": "2020-09-23T17:36:47Z", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts"}, "afterCommit": {"oid": "b3007625b9eece221c826809192bedf2c3125402", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b3007625b9eece221c826809192bedf2c3125402", "committedDate": "2020-10-27T13:11:59Z", "message": "Treatments API Tweaks\n- Add new endpoint for determining if sample treatments should be displayed.\n  This needed to be separated because for `gbm_columbia_2019`, sample treatments\n  should not be displayed, but patient treatments should.\n- Filter out unknown treatments from sample treatments API\n- Switch from using internal ID to stable ID for the patient field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cee09a5ba50cfacc0ad18f37709732b775e4b166", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/cee09a5ba50cfacc0ad18f37709732b775e4b166", "committedDate": "2020-10-29T18:36:22Z", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3007625b9eece221c826809192bedf2c3125402", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/b3007625b9eece221c826809192bedf2c3125402", "committedDate": "2020-10-27T13:11:59Z", "message": "Treatments API Tweaks\n- Add new endpoint for determining if sample treatments should be displayed.\n  This needed to be separated because for `gbm_columbia_2019`, sample treatments\n  should not be displayed, but patient treatments should.\n- Filter out unknown treatments from sample treatments API\n- Switch from using internal ID to stable ID for the patient field"}, "afterCommit": {"oid": "cee09a5ba50cfacc0ad18f37709732b775e4b166", "author": {"user": {"login": "Luke-Sikina", "name": "Luke Sikina"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/cee09a5ba50cfacc0ad18f37709732b775e4b166", "committedDate": "2020-10-29T18:36:22Z", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzg5NTE5", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#pullrequestreview-521789519", "createdAt": "2020-11-02T16:27:06Z", "commit": {"oid": "cee09a5ba50cfacc0ad18f37709732b775e4b166"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1693, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}