{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MjQ2Mzgw", "number": 7082, "title": "Fixed OncoKB proxy return type, and updated default URL", "bodyText": "Fix the incorrect response content type for the OncoKB proxy.\nUpdate the default URL to the latest OncoKB API endpoint.\n\nChecks\n\n Runs on heroku\n Has tests or has a separate issue that describes the types of test that should be created. If no test is included it should explicitly be mentioned in the PR why there is no test.\n The commit log is comprehensible. It follows 7 rules of great commit messages. For most PRs a single commit should suffice, in some cases multiple topical commits can be useful. During review it is ok to see tiny commits (e.g. Fix reviewer comments), but right before the code gets merged to master or rc branch, any such commits should be squashed since they are useless to the other developers. Definitely avoid merge commits, use rebase instead.\n Is this PR adding logic based on one or more clinical attributes? If yes, please make sure validation for this attribute is also present in the data validation / data loading layers (in backend repo) and documented in File-Formats Clinical data section!", "createdAt": "2020-01-30T19:30:19Z", "url": "https://github.com/cBioPortal/cbioportal/pull/7082", "merged": true, "mergeCommit": {"oid": "9c3ebbf16e31918edc765fc55d8add96bab30afe"}, "closed": true, "closedAt": "2020-01-30T21:53:04Z", "author": {"login": "onursumer"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_gk6HAH2gAyMzY5MjQ2MzgwOjZlMGI0OTM4NjYzNGJjZjIzM2ExN2JhYmMwM2U0ZGQ4OGI4MWM0Yjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_g2LlAFqTM1MTEzMDg4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6e0b49386634bcf233a17babc03e4dd88b81c4b9", "author": {"user": {"login": "onursumer", "name": "Onur Sumer"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/6e0b49386634bcf233a17babc03e4dd88b81c4b9", "committedDate": "2020-01-30T20:29:26Z", "message": "fixed OncoKB proxy return type, and updated default url"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83988b4c800f2a0aa2e6d84a4d12239344ffec2c", "author": {"user": {"login": "onursumer", "name": "Onur Sumer"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/83988b4c800f2a0aa2e6d84a4d12239344ffec2c", "committedDate": "2020-01-30T19:28:42Z", "message": "returning object instead of string in OncoKB response entity"}, "afterCommit": {"oid": "6e0b49386634bcf233a17babc03e4dd88b81c4b9", "author": {"user": {"login": "onursumer", "name": "Onur Sumer"}}, "url": "https://github.com/cBioPortal/cbioportal/commit/6e0b49386634bcf233a17babc03e4dd88b81c4b9", "committedDate": "2020-01-30T20:29:26Z", "message": "fixed OncoKB proxy return type, and updated default url"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMTI2NjIy", "url": "https://github.com/cBioPortal/cbioportal/pull/7082#pullrequestreview-351126622", "createdAt": "2020-01-30T20:40:54Z", "commit": {"oid": "6e0b49386634bcf233a17babc03e4dd88b81c4b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMTMwODg0", "url": "https://github.com/cBioPortal/cbioportal/pull/7082#pullrequestreview-351130884", "createdAt": "2020-01-30T20:48:14Z", "commit": {"oid": "6e0b49386634bcf233a17babc03e4dd88b81c4b9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMDo0ODoxNFrOFj5bmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMDo0ODoxNFrOFj5bmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE4NTQzMg==", "bodyText": "@onursumer what was the error by using String return type?", "url": "https://github.com/cBioPortal/cbioportal/pull/7082#discussion_r373185432", "createdAt": "2020-01-30T20:48:14Z", "author": {"login": "kalletlak"}, "path": "web/src/main/java/org/cbioportal/proxy/ProxyController.java", "diffHunk": "@@ -18,24 +18,32 @@\n \n @RestController\n public class ProxyController {\n+    private static final String DEFAULT_ONCOKB_URL = \"https://www.oncokb.org/api/v1\";\n+    \n     @Value(\"${show.oncokb:true}\")\n     private Boolean showOncokb;\n     @Value(\"${oncokb.token:}\")\n     private String oncokbToken;\n-    @Value(\"${oncokb.public_api.url:www.oncokb.org}\")\n-    private String oncokbPublicApiUrl;\n+    @Value(\"${oncokb.public_api.url:}\")\n+    private String oncokbApiUrl;\n \n     private Logger LOG = LoggerFactory.getLogger(ProxyController.class);\n \n     @RequestMapping(\"/**\")\n     public String proxy(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request)\n         throws URISyntaxException {\n         HttpHeaders httpHeaders = initHeaders(request);\n-        return exchangeData(body, buildUri(request.getPathInfo(), request.getQueryString(), false), method, httpHeaders).getBody();\n+        \n+        return exchangeData(body,\n+            buildUri(request.getPathInfo(), request.getQueryString(), false),\n+            method,\n+            httpHeaders,\n+            String.class\n+        ).getBody();\n     }\n \n     @RequestMapping(\"/oncokb/**\")\n-    public ResponseEntity<String> proxyOncokb(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request)\n+    public ResponseEntity<Object> proxyOncokb(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0b49386634bcf233a17babc03e4dd88b81c4b9"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1532, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}