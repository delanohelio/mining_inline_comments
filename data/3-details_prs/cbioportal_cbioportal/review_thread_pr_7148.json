{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNzY0NTg4", "number": 7148, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMDo1NjowNFrODg2YFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMDo1NjowNFrODg2YFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NzcxOTI3OnYy", "diffSide": "RIGHT", "path": "web/src/main/java/org/cbioportal/web/util/StudyViewFilterApplier.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMDo1NjowNFrOFrSG1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMDo1NjowNFrOFrSG1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkyOTc1MA==", "bodyText": "This is a temporary fix. the _fusion profile is created in the database for studies that still have fusions in the mutation table.", "url": "https://github.com/cBioPortal/cbioportal/pull/7148#discussion_r380929750", "createdAt": "2020-02-18T20:56:04Z", "author": {"login": "zhx828"}, "path": "web/src/main/java/org/cbioportal/web/util/StudyViewFilterApplier.java", "diffHunk": "@@ -125,20 +125,50 @@ public SampleIdentifier apply(Sample sample) {\n \n         if (!CollectionUtils.isEmpty(studyViewFilter.getGeneFilters())) {\n \n-            Set<String> molecularProfileIds = studyViewFilter.getGeneFilters().stream()\n-                    .flatMap(geneFilter -> geneFilter.getMolecularProfileIds().stream()).collect(Collectors.toSet());\n+            Set<String> molecularProfileIds = studyViewFilter.getGeneFilters()\n+                    .stream()\n+                    .flatMap(geneFilter -> {\n+                        // TODO: cleanup once fusion/structural data is fixed in database\n+                        // until then use mutation profile to fetch fusions\n+                        return geneFilter.getMolecularProfileIds().stream().flatMap(molecularProfileId -> {\n+                            ArrayList<String> ids = new ArrayList<String>();\n+                            ids.add(molecularProfileId);\n+                            if (molecularProfileId.endsWith(\"_fusion\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "042d404ef577a49b81e3752cb3343dae57d53391"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3446, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}