{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3OTQxMTU5", "number": 3066, "title": "Removal of automatically added 'query' parameter for entries subpath", "bodyText": "References\nAdd references/links to any related issues or PRs. These may include:\n\nFixes #2954\n\nDescription\nThis PR removes the automatically added \"query\" parameter that is prepended on the REST API's link to the entries. This makes sure that the related Angular UI doesn't add it's own 'query' parameter, resulting in two query params -> Breaking the functionality\nInstructions for Reviewers\n\nIn the ExternalSourceHalLinkFactory, the link was created using the buildLink method rather than the previously used getMethodOn() method\n\nThe reason for this is that the link generated by spring getMethod on and will add the mandatory param automatically\n\n\nThe tests were added to make sure that the JSON path contains the entries link without the query parameter\n\nTo reproduce this, go to an externalsources endpoint (ie, server/api/integration/externalsources/orcidV2), and check out the entries link returned by that response. This should NOT include the query parameter\nInclude guidance for how to test or review your PR. This may include: steps to reproduce a bug, screenshots or description of a new feature, or reasons behind specific changes.\nChecklist\nThis checklist provides a reminder of what we are going to look for when reviewing your PR. You need not complete this checklist prior to creating your PR (draft PRs are always welcome). If you are unsure about an item in the checklist, don't hesitate to ask. We're here to help!\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-11-26T09:21:50Z", "url": "https://github.com/DSpace/DSpace/pull/3066", "merged": true, "mergeCommit": {"oid": "7c8de66954cb3ccd0bcf551a8cd74b961a93eb17"}, "closed": true, "closedAt": "2021-01-14T14:43:45Z", "author": {"login": "jonas-atmire"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddugEbAH2gAyNTI3OTQxMTU5OmFjOGVlN2E4ZTZiZjA4OGRjOTI4OGY5MWNmMjAyNzFkMzI0ODE2ZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwDuT9AFqTU2ODE5ODYyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9", "author": {"user": {"login": "YanaDePauw", "name": "Yana De Pauw"}}, "url": "https://github.com/DSpace/DSpace/commit/ac8ee7a8e6bf088dc9288f91cf20271d324816d9", "committedDate": "2020-11-18T13:51:42Z", "message": "74271: [Issue 2954] External Sources \"entries\" subpath should not include \"query\" parameter by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTE2OTIx", "url": "https://github.com/DSpace/DSpace/pull/3066#pullrequestreview-548116921", "createdAt": "2020-12-09T12:07:06Z", "commit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MjE5Mzg4", "url": "https://github.com/DSpace/DSpace/pull/3066#pullrequestreview-548219388", "createdAt": "2020-12-09T14:10:16Z", "commit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNDoxMDoxNlrOICWf1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNDoxMDoxNlrOICWf1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMzNjY2MA==", "bodyText": "this actually demonstrate the existence of the bug and the solution, so if we wan't to deal with URI template this PR can be accepted", "url": "https://github.com/DSpace/DSpace/pull/3066#discussion_r539336660", "createdAt": "2020-12-09T14:10:16Z", "author": {"login": "abollini"}, "path": "dspace-server-webapp/src/test/java/org/dspace/app/rest/matcher/ExternalSourceMatcher.java", "diffHunk": "@@ -22,7 +23,9 @@ private ExternalSourceMatcher() {\n         return allOf(\n             hasJsonPath(\"$.id\", is(id)),\n             hasJsonPath(\"$.name\", is(name)),\n-            hasJsonPath(\"$.hierarchical\", is(hierarchical))\n+            hasJsonPath(\"$.hierarchical\", is(hierarchical)),\n+            hasJsonPath(\"$._links.entries.href\", is(REST_SERVER_URL +\n+                                                            \"integration/externalsources/\" + name + \"/entries\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NjA4Nzk4", "url": "https://github.com/DSpace/DSpace/pull/3066#pullrequestreview-565608798", "createdAt": "2021-01-11T18:02:37Z", "commit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4MTk4NjIw", "url": "https://github.com/DSpace/DSpace/pull/3066#pullrequestreview-568198620", "createdAt": "2021-01-14T12:45:54Z", "commit": {"oid": "ac8ee7a8e6bf088dc9288f91cf20271d324816d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1397, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}