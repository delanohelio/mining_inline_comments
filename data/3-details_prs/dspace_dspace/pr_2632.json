{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MTMyMTE5", "number": 2632, "title": "[DS-4409] Remove GeoIP download Ant target, reconfigure for external provision", "bodyText": "https://jira.lyrasis.org/browse/DS-4409\nMaxMind is changing the way that they make their GeoLite database available.  Rather than chase that with our own code, this patch removes our update code in favor of using MaxMind's updater externally.  This will require revising the install, update and configuration guides to explain the new process.\nAdditionally, the DSpace configuration for the GeoLite database is altered to point to a typical location outside of the installed instance.  Installers should check this property's value and adjust it as needed to suit their local environment.", "createdAt": "2020-01-03T21:41:25Z", "url": "https://github.com/DSpace/DSpace/pull/2632", "merged": true, "mergeCommit": {"oid": "75ea08f077a9228be5b03e9394d5ae9bb5a7a379"}, "closed": true, "closedAt": "2020-01-23T17:23:09Z", "author": {"login": "mwoodiupui"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb21R-5gH2gAyMzU5MTMyMTE5OmUwMTgzODYxNzUyNGI5MWViMWMyNjIwZDE3NzRjYjQ0Y2NlOThhNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9NtxMAFqTM0NzQ3NDcwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e01838617524b91eb1c2620d1774cb44cce98a54", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/e01838617524b91eb1c2620d1774cb44cce98a54", "committedDate": "2020-01-03T21:31:27Z", "message": "[DS-4409] Remove GeoIP download Ant target, reconfigure for external provision."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692bbd9449e9f3da5adfa4fceb8925b670ceb7f2", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/692bbd9449e9f3da5adfa4fceb8925b670ceb7f2", "committedDate": "2020-01-07T21:23:17Z", "message": "[DS-4409] Don't use live GeoLite database for testing -- there might not be one."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5OTE4NDAw", "url": "https://github.com/DSpace/DSpace/pull/2632#pullrequestreview-339918400", "createdAt": "2020-01-08T14:56:21Z", "commit": {"oid": "692bbd9449e9f3da5adfa4fceb8925b670ceb7f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDo1NjoyMVrOFbZang==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDo1NjoyMVrOFbZang==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI3MjI4Ng==", "bodyText": "Just a quick note...is this a \"standard\" path where GeoLite2 tends to install itself?  If so, this is OK to preconfigure (though we may want to enhance the comments here to link back to GeoLite2 install docs, if plausible).  If there is no \"standard\" location for GeoLite2, I wonder if we should consider commenting this out by default (if that doesn't break things), to essentially force people to set this to an appropriate setting after they install GeoLite2.\nI guess I'm just trying to think about the most appropriate error message for folks to see here if things end up misconfigured.  Is it better to see a \"File not found\" (pointing at this path) error, or is there somewhere we can simply check if usage-statistics.dbfile is set...and if not, throw an error saying that it is \"required for Solr Statistics\" and that GeoLite2 must be installed.", "url": "https://github.com/DSpace/DSpace/pull/2632#discussion_r364272286", "createdAt": "2020-01-08T14:56:21Z", "author": {"login": "tdonohue"}, "path": "dspace/config/modules/usage-statistics.cfg", "diffHunk": "@@ -1,13 +1,14 @@\n #---------------------------------------------------------------#\n #--------------USAGE STATISTICS CONFIGURATIONS------------------#\n #---------------------------------------------------------------#\n-# These configs are only used by the DSpace interfaces which    #\n-# track usage statistics (Solr)                                 #\n+# These properties are only used by the DSpace interfaces which #\n+# track usage statistics (Solr).                                #\n # See also: solr-statistics.cfg                                 #\n #---------------------------------------------------------------#\n \n-# The location for the Geo Database retrieved on update/installation\n-usage-statistics.dbfile = ${dspace.dir}/config/GeoLite2-City.mmdb\n+# The location for the database used to map client addresses to approximate\n+# physical locations.\n+usage-statistics.dbfile = /usr/share/GeoIP/GeoLite2-City.mmdb", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "692bbd9449e9f3da5adfa4fceb8925b670ceb7f2"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad03a9766033f6766bdaf30ce20e31777edd3606", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/ad03a9766033f6766bdaf30ce20e31777edd3606", "committedDate": "2020-01-09T21:13:38Z", "message": "[DS04409] There is another set of mock/fake classes for dspace-server-webapp.  Activate them."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa4f2898c61d268329f13b3552c12dff1ec3e36b", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/aa4f2898c61d268329f13b3552c12dff1ec3e36b", "committedDate": "2020-01-10T16:46:08Z", "message": "[DS-4409] Leave GeoLite database location unconfigured by default."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzY0NDA5", "url": "https://github.com/DSpace/DSpace/pull/2632#pullrequestreview-347364409", "createdAt": "2020-01-23T15:01:25Z", "commit": {"oid": "aa4f2898c61d268329f13b3552c12dff1ec3e36b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDc0NzAy", "url": "https://github.com/DSpace/DSpace/pull/2632#pullrequestreview-347474702", "createdAt": "2020-01-23T17:23:04Z", "commit": {"oid": "aa4f2898c61d268329f13b3552c12dff1ec3e36b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1546, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}