{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NTY1Njcx", "number": 2924, "title": "[Issue: 2821] Metadata export script file parameter removed from REST", "bodyText": "References\n\nFixes #2821\n\nDescription\nThe metadata-export script currently takes as input the filename, this PR removes that argument while leaving the argument in place for the CLI where the argument is the path of the file.\nInstructions for Reviewers\nThis PR was built further on: #2915 (we needed the changes made to the testing framework for rest scripts).\nTo verify, perform an export using the REST endpoint, the \"--file\" parameter should not be allowed here. Then do one from the CLI & the \"--file\" parameter should be there.\nChecklist\nThis checklist provides a reminder of what we are going to look for when reviewing your PR. You need not complete this checklist prior to creating your PR (draft PRs are always welcome). If you are unsure about an item in the checklist, don't hesitate to ask. We're here to help!\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-08-07T12:00:58Z", "url": "https://github.com/DSpace/DSpace/pull/2924", "merged": true, "mergeCommit": {"oid": "c5e3b70d8568ede545afb4c4090a2bb807c8724e"}, "closed": true, "closedAt": "2020-08-27T20:26:31Z", "author": {"login": "KevinVdV"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5XHyIgH2gAyNDY0NTY1NjcxOmJiZGM0N2ZiYmYxZjQ1OGEzMzExOTAwZTEyYTczMzhhODZkNTZhM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCGDlpAFqTQ3MzcxMDkyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bbdc47fbbf1f458a3311900e12a7338a86d56a3f", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/bbdc47fbbf1f458a3311900e12a7338a86d56a3f", "committedDate": "2020-07-28T14:16:05Z", "message": "[Task 72215] removed the eperson flag from the REST metadata import script whilst leaving cli unaltered"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8df7e572b53550103c2969f6e4f64d83dfd85338", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/8df7e572b53550103c2969f6e4f64d83dfd85338", "committedDate": "2020-07-29T07:05:13Z", "message": "[Task 72215] small bugfix in MetadataImport scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f384deca7863240d095dfb4ad473c035302b21a", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/8f384deca7863240d095dfb4ad473c035302b21a", "committedDate": "2020-07-30T13:58:54Z", "message": "[Task 72215] made sure that the script rest calls in tests are single threaded and fixed CsvImportIT tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd63d6216e88ee3299f5872ff489a672510ee39c", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/fd63d6216e88ee3299f5872ff489a672510ee39c", "committedDate": "2020-07-31T09:39:22Z", "message": "[Task 72215] moved CSVMetadataImportreferenceIT to the dspace-api module and fixed tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ea393570969737e7c7ee5ca97177086055d0c1a", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/7ea393570969737e7c7ee5ca97177086055d0c1a", "committedDate": "2020-07-31T09:42:45Z", "message": "[Task 72215] minor cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3c8f65199504cdfc1b1eaa743797e543c5b143", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/9f3c8f65199504cdfc1b1eaa743797e543c5b143", "committedDate": "2020-08-06T09:09:48Z", "message": "Merge remote-tracking branch 'dspace/main' into w2p-72215_metadataimport-email-parameter\n\nConflicts:\n\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java\n\tdspace-api/src/test/java/org/dspace/app/csv/CSVMetadataImportReferenceIT.java\n\tdspace-server-webapp/src/test/java/org/dspace/app/rest/csv/CsvImportIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "362064f76f516c289f4c80eb7509a5f3e7cf8b67", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/362064f76f516c289f4c80eb7509a5f3e7cf8b67", "committedDate": "2020-08-06T09:10:00Z", "message": "[Task 72215] fixing issues after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69b722a97f81f7f610cfb6cef7f6d3353eb096d4", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/69b722a97f81f7f610cfb6cef7f6d3353eb096d4", "committedDate": "2020-08-06T13:56:12Z", "message": "[Task 72430] removed the metadata export file parameter for the REST api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "483ec64ce024b2db6c29db118607446619db3bc2", "author": {"user": {"login": "KevinVdV", "name": "Kevin Van de Velde"}}, "url": "https://github.com/DSpace/DSpace/commit/483ec64ce024b2db6c29db118607446619db3bc2", "committedDate": "2020-08-07T11:47:20Z", "message": "[Issue: 2821] Metadata-export adding file name extension"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNDIxMjUw", "url": "https://github.com/DSpace/DSpace/pull/2924#pullrequestreview-463421250", "createdAt": "2020-08-07T15:52:04Z", "commit": {"oid": "483ec64ce024b2db6c29db118607446619db3bc2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNTo1MjowNFrOG9fCdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNTo1MjowNFrOG9fCdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEyNDg1NA==", "bodyText": "No, please.  We should have a meaningful name for the export file & not a random filename.  I had recommended we name the export file based on the UUID of the collection/community you are exporting.  So, this name should be based on the -i input value (which specifies the object we are exporting).  It can be any one of the following:\n\n[objection-uuid].csv\n[object-type]-[object-uuid].csv (e.g. COLLECTION-[uuid].csv)\nOr, one of the above based on the value of -i param.  So, for example, if exporting a Collection with handle \"123/456\" then the file might be named: 123-456.csv or COLLECTION-123-456.csv", "url": "https://github.com/DSpace/DSpace/pull/2924#discussion_r467124854", "createdAt": "2020-08-07T15:52:04Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataExport.java", "diffHunk": "@@ -88,4 +89,8 @@ public void setup() throws ParseException {\n         }\n         handle = commandLine.getOptionValue('i');\n     }\n+\n+    protected String getFileNameForExportFile() {\n+        return UUID.randomUUID().toString() + \".csv\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "483ec64ce024b2db6c29db118607446619db3bc2"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec76371456ca1cf84a649515128b113c6d3d0eaf", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/ec76371456ca1cf84a649515128b113c6d3d0eaf", "committedDate": "2020-08-12T08:31:16Z", "message": "[Task 72430] applied feedback on the filename for MetadataExport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzEwOTI1", "url": "https://github.com/DSpace/DSpace/pull/2924#pullrequestreview-473710925", "createdAt": "2020-08-24T17:28:26Z", "commit": {"oid": "ec76371456ca1cf84a649515128b113c6d3d0eaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1306, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}