{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDk3NDE3", "number": 2780, "title": "Upgrade to the ORCID v3 API", "bodyText": "References\nhttps://jira.lyrasis.org/browse/DS-4525\nDSpace/orcid-jaxb-api#3\nDescription\nThis PR move our integration to the ORCID v3 API adding some configuration placeholder that were missing making a bit harder to enable the feature\nInstructions for Reviewers\nYou need to get at least credentials for public ORCID API or for the sandbox environment and configure the following properties in your local.cfg\n# URL of ORCID API\n# Defaults to using the Public API V3 (pub.orcid.org)\norcid.api.url = https://pub.orcid.org/v3.0\norcid.url = https://orcid.org/\n\n# ORCID Credentials\norcid.clientid = \norcid.clientsecret = \n\n#ORCID JWT Endpoint\norcid.oauth.url = https://orcid.org/oauth/token\n\nChecklist\nThis checklist provides a reminder of what we are going to look for when reviewing your PR. You need not complete this checklist prior to creating your PR (draft PRs are always welcome). If you are unsure about an item in the checklist, don't hesitate to ask. We're here to help!\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n[N/A] My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\nWe would like to add extra IT to prove the end2end intergation with ORCID when client credentials are provided as ENV variables (to allow automatic build on Travis without disclosure of secrets). If the credentials are missing the test will be skipped, this can be also a mechanism to allow execution of these e2e test only for some builds\n[N/A] If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n[N/A] If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-06-16T09:43:00Z", "url": "https://github.com/DSpace/DSpace/pull/2780", "merged": true, "mergeCommit": {"oid": "e7a2cbc2c931835b66bfeb1d42637f0f735859f0"}, "closed": true, "closedAt": "2020-11-30T17:10:09Z", "author": {"login": "abollini"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrx8FSAH2gAyNDM1MDk3NDE3OmVjMzQ4YTYzZjE1NmQyMTMwMzVhOTVlZTNlNjYyZTkyNTMwOWU1YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgPJjEgFqTUzOTExMzQ3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ec348a63f156d213035a95ee3e662e925309e5c0", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ec348a63f156d213035a95ee3e662e925309e5c0", "committedDate": "2020-06-16T09:35:48Z", "message": "Update ORCID to V3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ffde8ec2cc2cc4780f51d0b6d342a0babab59aa", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/2ffde8ec2cc2cc4780f51d0b6d342a0babab59aa", "committedDate": "2020-06-16T09:35:48Z", "message": "Minor cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzM2MjM3", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-431336237", "createdAt": "2020-06-16T09:44:04Z", "commit": {"oid": "2ffde8ec2cc2cc4780f51d0b6d342a0babab59aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0NDowNFrOGkTpKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0NDowNFrOGkTpKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMzc1Mg==", "bodyText": "This will be removed once the DSpace/orcid-jaxb-api#3 is merged and the new artifact is pushed to maven central", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r440723752", "createdAt": "2020-06-16T09:44:04Z", "author": {"login": "abollini"}, "path": "pom.xml", "diffHunk": "@@ -1853,6 +1853,17 @@\n             <url>https://maven.restlet.com</url>\n         </repository>\n         -->\n+        <repository>\n+            <id>4science-nexus</id>\n+            <url>https://nexus.4science.it/repository/maven-public</url>\n+            <layout>default</layout>\n+            <releases>\n+                <enabled>true</enabled>\n+            </releases>\n+            <snapshots>\n+                <enabled>true</enabled>\n+            </snapshots>\n+        </repository>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ffde8ec2cc2cc4780f51d0b6d342a0babab59aa"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d77c505a668f0997d6f2c334058cd87be15761f3", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/d77c505a668f0997d6f2c334058cd87be15761f3", "committedDate": "2020-06-16T14:27:27Z", "message": "added ITs for ORCID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/e2f79861e3e4e1a64464fa54db5fab7918843636", "committedDate": "2020-06-16T15:14:44Z", "message": "Fix wrong name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDQwNDc1", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-435040475", "createdAt": "2020-06-22T15:32:12Z", "commit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTozMjo0NVrOGnGCXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTo0NjoxMVrOGnGlwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY0NjU1Ng==", "bodyText": "The spacing here is messed up. It looks like you are using tabs instead of spaces. Could you correct the alignment here?", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r443646556", "createdAt": "2020-06-22T15:32:45Z", "author": {"login": "tdonohue"}, "path": "dspace-api/pom.xml", "diffHunk": "@@ -628,13 +628,13 @@\n             <artifactId>aws-java-sdk-s3</artifactId>\n             <version>1.10.50</version>\n         </dependency>\n-\n-        <!-- For ORCID v2 integration -->\n+        \n         <dependency>\n-            <groupId>org.dspace</groupId>\n-            <artifactId>orcid-jaxb-api</artifactId>\n-            <version>2.1.0</version>\n-        </dependency>\n+\t\t\t<groupId>org.dspace</groupId>\n+\t\t\t<artifactId>orcid-jaxb-api</artifactId>\n+\t\t\t<version>3.0.0-SNAPSHOT</version>\n+\t\t</dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY0ODQ4MQ==", "bodyText": "Should we provide a link or more information on where to obtain these ORCID credentials for your repository?  I'm assuming that this Id/secret can be obtained via either the \"Member API\" or \"Public API\" signup available here: https://orcid.org/content/register-client-application-0  Is that correct?", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r443648481", "createdAt": "2020-06-22T15:35:36Z", "author": {"login": "tdonohue"}, "path": "dspace/config/dspace.cfg", "diffHunk": "@@ -1459,10 +1459,18 @@ sherpa.romeo.apikey =\n #    org.dspace.content.authority.SolrAuthority = SolrAuthorAuthority\n \n # URL of ORCID API\n-# Defaults to using the Public API (pub.orcid.org)\n-orcid.api.url = https://pub.orcid.org/v2.1\n+# Defaults to using the Public API V3 (pub.orcid.org)\n+orcid.api.url = https://pub.orcid.org/v3.0\n orcid.url = https://orcid.org/\n \n+# ORCID Credentials", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1MjA3MQ==", "bodyText": "I'd like to see a second Integration Test that runs against a sample (static) response from ORCID (which we can enable to run always in Travis CI).  Otherwise, we only have this disabled end-to-end test, which wouldn't allow us to continually validate that our code works with the ORCID API.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r443652071", "createdAt": "2020-06-22T15:40:52Z", "author": {"login": "tdonohue"}, "path": "dspace-server-webapp/src/test/java/org/dspace/app/rest/OrcidExternalSourcesIT.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/**\n+ * The contents of this file are subject to the license and copyright\n+ * detailed in the LICENSE and NOTICE files at the root of the source\n+ * tree and available online at\n+ *\n+ * http://www.dspace.org/license/\n+ */\n+package org.dspace.app.rest;\n+\n+import static com.jayway.jsonpath.matchers.JsonPathMatchers.hasJsonPath;\n+import static org.hamcrest.Matchers.is;\n+import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.dspace.app.rest.test.AbstractControllerIntegrationTest;\n+import org.dspace.services.ConfigurationService;\n+import org.hamcrest.Matchers;\n+import org.junit.Assume;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+/**\n+ * This test suite includes end to end test to verify the integration with ORCID as an External Source.\n+ * The test run only if the orcid.clientid property is configured.\n+ * \n+ * @author Mykhaylo Boychuk (4Science.it)\n+ *\n+ */\n+public class OrcidExternalSourcesIT extends AbstractControllerIntegrationTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1NTA4Nw==", "bodyText": "You shouldn't need to do any of this at all.  The DSpace configuration system will also read values set as environment variables automatically.  See https://github.com/DSpace/DSpace/blob/master/dspace/config/config-definition.xml#L29-L37\nSo, instead of all this logic, you can simply set environment variables named orcid.clientid and orcid.clientsecret, and those should override any defaults in local.cfg.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r443655087", "createdAt": "2020-06-22T15:45:23Z", "author": {"login": "tdonohue"}, "path": ".travis.yml", "diffHunk": "@@ -21,6 +21,8 @@ jdk:\n \n before_install:\n   # Remove outdated settings.xml from Travis builds. Workaround for https://github.com/travis-ci/travis-ci/issues/4629\n+  - sed -i 's/^orcid\\.clientid.*/orcid.clientid='$ORCID_CLIENTID'/g' dspace-api/src/test/data/dspaceFolder/config/local.cfg\n+  - sed -i 's/^orcid\\.clientsecret.*/orcid.clientsecret='$ORCID_CLIENTSECRET'/g' dspace-api/src/test/data/dspaceFolder/config/local.cfg", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1NTYxNw==", "bodyText": "These should not be needed.  Again, these can be set directly as environment variables, so you don't need to insert them here so that they can be replaced later.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r443655617", "createdAt": "2020-06-22T15:46:11Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/data/dspaceFolder/config/local.cfg", "diffHunk": "@@ -120,3 +120,6 @@ rest.properties.exposed = configuration.not.existing\n configuration.not.exposed = secret_value\n configuration.exposed.single.value = public_value\n configuration.exposed.array.value = public_value_1, public_value_2\n+\n+orcid.clientid = \n+orcid.clientsecret = ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDA2MzE2", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-450006316", "createdAt": "2020-07-16T16:16:02Z", "commit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe41f58c512a09ee28912128029a6f0887834c4b", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/fe41f58c512a09ee28912128029a6f0887834c4b", "committedDate": "2020-09-23T14:57:14Z", "message": "Merge branch 'main' into D4CRIS-952-orcidV3-merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50efbd29bb0c33f3d937aa8be1e4c74e122f5811", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/50efbd29bb0c33f3d937aa8be1e4c74e122f5811", "committedDate": "2020-09-23T15:52:59Z", "message": "added dependensy to use official artifact of orcid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ae8f0e9fafc1a9a56a69cc03de2d9c0c5c16b16", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/2ae8f0e9fafc1a9a56a69cc03de2d9c0c5c16b16", "committedDate": "2020-09-24T16:55:37Z", "message": "added mockito test to prove functionality of OrcidExternalSources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "007c8f035d179dc5eecb0040d9bbc867dc10b676", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/007c8f035d179dc5eecb0040d9bbc867dc10b676", "committedDate": "2020-09-25T08:45:31Z", "message": "added missing bean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba4d1c20f1dc4ccd2aa1bcce8cf640eea0cfce0c", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/ba4d1c20f1dc4ccd2aa1bcce8cf640eea0cfce0c", "committedDate": "2020-09-25T08:47:25Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a47781193881956e263de8b9032605955b30deb", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/3a47781193881956e263de8b9032605955b30deb", "committedDate": "2020-09-28T08:30:32Z", "message": "added pooling http cliente connection manager to send to ORCID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "850d93546ab625fbba5b54ce269dae3d4dd927c7", "author": {"user": {"login": "Micheleboychuk", "name": "Mykhaylo Boychuk"}}, "url": "https://github.com/DSpace/DSpace/commit/850d93546ab625fbba5b54ce269dae3d4dd927c7", "committedDate": "2020-09-28T16:33:58Z", "message": "update test and OrcidRestConnector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6000f6e5e913540235a0756e424d1c84319e78e", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/e6000f6e5e913540235a0756e424d1c84319e78e", "committedDate": "2020-11-05T14:49:41Z", "message": "Merge branch 'main' of https://github.com/DSpace/DSpace into D4CRIS-952-orcidV3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8aab9d88b23449c690e3f89e14f5362e5c7b5e4", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/a8aab9d88b23449c690e3f89e14f5362e5c7b5e4", "committedDate": "2020-11-05T21:10:29Z", "message": "Improve ORCID testing via mock response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d938a62829b8fff89348d6d3d117d316a9b0fc7", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/9d938a62829b8fff89348d6d3d117d316a9b0fc7", "committedDate": "2020-11-05T21:13:02Z", "message": "Switch to the official orcid model maven artifact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d52f012706a7ae4bc22eb6e64bc668f64a64bc0", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/9d52f012706a7ae4bc22eb6e64bc668f64a64bc0", "committedDate": "2020-11-05T21:49:59Z", "message": "Solve dependencies convergence issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjkxNTEz", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-525291513", "createdAt": "2020-11-06T16:08:33Z", "commit": {"oid": "9d52f012706a7ae4bc22eb6e64bc668f64a64bc0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNjowODozNFrOHu0IkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNjoxODowNVrOHu0fCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg1MDcwNQ==", "bodyText": "This looks to be an accidental change?  It was removed a while back from our Travis settings as it's no longer needed.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r518850705", "createdAt": "2020-11-06T16:08:34Z", "author": {"login": "tdonohue"}, "path": ".travis.yml", "diffHunk": "@@ -27,6 +27,9 @@ env:\n     # (Useful for builds which don't need to repeat code checks)\n     - SKIP_CODE_CHECKS=\"-Denforcer.skip=true -Dcheckstyle.skip=true -Dlicense.skip=true -Dxml.skip=true\"\n \n+before_install:\n+  # Remove outdated settings.xml from Travis builds. Workaround for https://github.com/travis-ci/travis-ci/issues/4629\n+  - rm ~/.m2/settings.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d52f012706a7ae4bc22eb6e64bc668f64a64bc0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg1Mzg0NA==", "bodyText": "This should be removed now.  You should not need this now that you've switched to using org.orcid:orcid-model as the dependency.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r518853844", "createdAt": "2020-11-06T16:13:42Z", "author": {"login": "tdonohue"}, "path": "pom.xml", "diffHunk": "@@ -1895,6 +1895,17 @@\n             <url>https://maven.restlet.com</url>\n         </repository>\n         -->\n+        <repository>\n+            <id>4science-nexus</id>\n+            <url>https://nexus.4science.it/repository/maven-public</url>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d52f012706a7ae4bc22eb6e64bc668f64a64bc0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg1NjQ1Ng==", "bodyText": "It looks like previous feedback was resolved by adding some static XML test output and adding a few *MockitoTest() methods to this same class.\n@abollini : Could you update the JavaDocs at the top of this class to note that it does static testing by default (using the *MockitoTest() methods below), but will do full end-to-end testing (of the real API) when you set orcid.clientid", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r518856456", "createdAt": "2020-11-06T16:18:05Z", "author": {"login": "tdonohue"}, "path": "dspace-server-webapp/src/test/java/org/dspace/app/rest/OrcidExternalSourcesIT.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/**\n+ * The contents of this file are subject to the license and copyright\n+ * detailed in the LICENSE and NOTICE files at the root of the source\n+ * tree and available online at\n+ *\n+ * http://www.dspace.org/license/\n+ */\n+package org.dspace.app.rest;\n+\n+import static com.jayway.jsonpath.matchers.JsonPathMatchers.hasJsonPath;\n+import static org.hamcrest.Matchers.is;\n+import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.dspace.app.rest.test.AbstractControllerIntegrationTest;\n+import org.dspace.services.ConfigurationService;\n+import org.hamcrest.Matchers;\n+import org.junit.Assume;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+/**\n+ * This test suite includes end to end test to verify the integration with ORCID as an External Source.\n+ * The test run only if the orcid.clientid property is configured.\n+ * \n+ * @author Mykhaylo Boychuk (4Science.it)\n+ *\n+ */\n+public class OrcidExternalSourcesIT extends AbstractControllerIntegrationTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1MjA3MQ=="}, "originalCommit": {"oid": "e2f79861e3e4e1a64464fa54db5fab7918843636"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2e13ebd069d24b09975bdf9d6f1966858524c00", "author": {"user": {"login": "abollini", "name": "Andrea Bollini"}}, "url": "https://github.com/DSpace/DSpace/commit/e2e13ebd069d24b09975bdf9d6f1966858524c00", "committedDate": "2020-11-11T11:27:51Z", "message": "Remove unnecessary changes and add more javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTQ2NTc1", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-533946575", "createdAt": "2020-11-18T22:50:39Z", "commit": {"oid": "e2e13ebd069d24b09975bdf9d6f1966858524c00"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjo1MDozOVrOH2Fjqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMjo1MDozOVrOH2Fjqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjIwMg==", "bodyText": "It looks like this change from orcidV2 to orcid for the sourceIdentifier will require minor updates to Angular UI's en.json5 language pack... In the UI, I'm seeing missing labels in the External Services features when it comes to ORCID.\nSo, for example, this line needs to be updated to be:\n\"submission.import-external.source.orcid\": \"ORCID\",\n\nThe same seems to be true for all other i18n keys which include orcidV2 in them.  The key names all need to be updated to just use orcid.\nThis is a minor change overall, but we should clean this up in a small PR to the Angular UI.", "url": "https://github.com/DSpace/DSpace/pull/2780#discussion_r526476202", "createdAt": "2020-11-18T22:50:39Z", "author": {"login": "tdonohue"}, "path": "dspace/config/spring/api/external-services.xml", "diffHunk": "@@ -20,10 +20,17 @@\n         <property name=\"apiKey\" value=\"${sherpa.romeo.apikey}\"/>\n \n     </bean>\n-    <bean class=\"org.dspace.external.provider.impl.OrcidV2AuthorDataProvider\" init-method=\"init\">\n-        <constructor-arg value=\"${orcid.api.url}\"/>\n-        <property name=\"sourceIdentifier\" value=\"orcidV2\"/>\n+    <bean class=\"org.dspace.external.provider.impl.OrcidV3AuthorDataProvider\" init-method=\"init\">\n+        <property name=\"sourceIdentifier\" value=\"orcid\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2e13ebd069d24b09975bdf9d6f1966858524c00"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MTEzNDc2", "url": "https://github.com/DSpace/DSpace/pull/2780#pullrequestreview-539113476", "createdAt": "2020-11-26T09:01:50Z", "commit": {"oid": "e2e13ebd069d24b09975bdf9d6f1966858524c00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1491, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}