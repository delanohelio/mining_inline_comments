{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NzE1NzM2", "number": 3013, "title": "Features Endpoint: Permissions to view stats, map items, see versions", "bodyText": "References\n\nFixes #2969\n\nDescription\nThis PR introduces new REST Authorization features\n\ncanManageMappedItems\ncanViewSearchStatistics\ncanViewUsageStatistics\ncanViewVersions\ncanViewWorkflowStatistics\n\nInstructions for Reviewers\nList of changes in this PR:\n\nAdded the five above mentioned features for various DSpaceObjects\nProvided tests for these new features\n\nHow to test this PR:\n\nRetrieve the features for the Item, Collection, Community and Site objects as an admin and verify that their respective new features are present. The tests will deal with all cases that can happen for each feature individually.\n\nChecklist\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-10-16T09:34:35Z", "url": "https://github.com/DSpace/DSpace/pull/3013", "merged": true, "mergeCommit": {"oid": "cf5d52d60b6b94382d69cc96dad5c04bd4b37497"}, "closed": true, "closedAt": "2020-10-29T21:33:53Z", "author": {"login": "Raf-atmire"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSFe3vgH2gAyNTA0NzE1NzM2OjA0ZjRlMWUyMzRiNWQzZjdlMGE4MGM5NTdiMzQ2MGU0MzhkYmYxMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXAepVAFqTUxODg3OTg2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04f4e1e234b5d3f7e0a80c957b3460e438dbf12c", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/04f4e1e234b5d3f7e0a80c957b3460e438dbf12c", "committedDate": "2020-10-13T09:51:07Z", "message": "73986: Features Endpoint - Usage Statistics Permissions in REST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9463e28504b493bdb7ae8f4d3d8214e0dbb276e", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/c9463e28504b493bdb7ae8f4d3d8214e0dbb276e", "committedDate": "2020-10-14T13:39:03Z", "message": "73986: Features Endpoint - Usage Statistics Permissions in REST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6e50aef51549834cb876489e8c40c4a190352f3", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/c6e50aef51549834cb876489e8c40c4a190352f3", "committedDate": "2020-10-15T13:06:53Z", "message": "74055: Features Endpoint - Workflow Statistics Permissions in REST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cecb4846dc726ff767026e202ea57ad45ebf70bb", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/cecb4846dc726ff767026e202ea57ad45ebf70bb", "committedDate": "2020-10-15T13:30:50Z", "message": "74057: Features Endpoint - Search Statistics Permissions in REST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380ece2f2c723c6f6fb97e117b361b9e5b8056b1", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/380ece2f2c723c6f6fb97e117b361b9e5b8056b1", "committedDate": "2020-10-15T14:34:04Z", "message": "74059: Features Endpoint - Manage Mapped Item Permissions in REST implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "242ea654439809b7e803187d799d58e9e8ce0e19", "author": {"user": {"login": "peter-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/242ea654439809b7e803187d799d58e9e8ce0e19", "committedDate": "2020-10-15T15:13:43Z", "message": "74062: Features Endpoint - Version Permissions in REST implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a2e41c5a0a5b11899d2b8f539245789423ab662", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/4a2e41c5a0a5b11899d2b8f539245789423ab662", "committedDate": "2020-10-16T09:04:20Z", "message": "Added additional tests to the FeatureITs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ed4aaf87d40d2ae2ec7a20fa73ce4d294ffb7ab", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/1ed4aaf87d40d2ae2ec7a20fa73ce4d294ffb7ab", "committedDate": "2020-10-16T10:57:50Z", "message": "fixed checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTc1NTE2", "url": "https://github.com/DSpace/DSpace/pull/3013#pullrequestreview-516975516", "createdAt": "2020-10-26T16:46:14Z", "commit": {"oid": "1ed4aaf87d40d2ae2ec7a20fa73ce4d294ffb7ab"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo0NjoxNFrOHoYpHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo0NjoxNFrOHoYpHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEwODgzMQ==", "bodyText": "These settings are all unnecessary, as they are the default values already in versioning.cfg and usage-statistics.cfg.\nIn any case, you also do NOT need to add most settings to this local.cfg.  Settings for Unit/Integration tests can be tweaked dynamically in the tests themselves by calling configurationService.setProperty() to change the value to whatever you want it to be.  I see you've done this already in some of your ITs, which is correct.\nConfigurations ONLY need to be added to this local.cfg if they CANNOT be reloaded/set dynamically.  There are very few configurations that fall into this category...mostly those that initialize our database/webapp.\nIn any case, all the above is just an FYI. These changes can be removed.", "url": "https://github.com/DSpace/DSpace/pull/3013#discussion_r512108831", "createdAt": "2020-10-26T16:46:14Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/data/dspaceFolder/config/local.cfg", "diffHunk": "@@ -129,3 +129,11 @@ configuration.exposed.array.value = public_value_1, public_value_2\n # Test config for the authentication ip functionality\n authentication-ip.Staff = 5.5.5.5\n authentication-ip.Student = 6.6.6.6\n+\n+# Test config for the usage statistics authorization\n+usage-statistics.authorization.admin.usage = true\n+usage-statistics.authorization.admin.workflow = true\n+usage-statistics.authorization.admin.search = true\n+\n+# Test config for the versioning authorization\n+versioning.item.history.view.admin = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ed4aaf87d40d2ae2ec7a20fa73ce4d294ffb7ab"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f90384dbbc53b1dc06759aa70552e996ec5460fe", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/f90384dbbc53b1dc06759aa70552e996ec5460fe", "committedDate": "2020-10-27T12:12:22Z", "message": "Removed unnecessary config in test local.cfg"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4ODc5ODY4", "url": "https://github.com/DSpace/DSpace/pull/3013#pullrequestreview-518879868", "createdAt": "2020-10-28T16:50:58Z", "commit": {"oid": "f90384dbbc53b1dc06759aa70552e996ec5460fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1357, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}