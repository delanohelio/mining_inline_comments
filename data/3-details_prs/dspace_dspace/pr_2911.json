{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4OTM3NTg4", "number": 2911, "title": "[Issue 2800] workflowgroup collection links", "bodyText": "References\nFixes GitHub issue\nMUST BE MERGED ALONGSIDE DSpace/dspace-angular#829\nDescription\nThis PR will add support so that links can be grouped under a certain string.\nInstructions for Reviewers\nBuild the code & retrieve a collection in a rest call, look at the \"_links\" section, the workflow group links will be grouped under the \"workflowGroups\" string.\nChecklist\nThis checklist provides a reminder of what we are going to look for when reviewing your PR. You need not complete this checklist prior to creating your PR (draft PRs are always welcome). If you are unsure about an item in the checklist, don't hesitate to ask. We're here to help!\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-07-30T07:40:15Z", "url": "https://github.com/DSpace/DSpace/pull/2911", "merged": true, "mergeCommit": {"oid": "d1ee942bd49e23b1ee4f281446fec1522bf0828e"}, "closed": true, "closedAt": "2020-08-06T20:52:14Z", "author": {"login": "KevinVdV"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3XdZ1gH2gAyNDU4OTM3NTg4OjIzOWJjNTI3MWQyNDg5MjNjZjY1ZGYyNzdjY2ZjOWE0YTQyNDQ4NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8NNn1gH2gAyNDU4OTM3NTg4OjYxZDQ0MDg3ZmQ2ZDhiOGU5ZjAzNWU1OTYyZmVkY2RlOGVmOGVhN2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "239bc5271d248923cf65df277ccfc9a4a4244860", "author": {"user": {"login": "KevinVdV", "name": "Kevin Van de Velde"}}, "url": "https://github.com/DSpace/DSpace/commit/239bc5271d248923cf65df277ccfc9a4a4244860", "committedDate": "2020-07-22T09:31:51Z", "message": "[Issue: 2800] Put dynamic workflowgroup links on Collections in an array"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338764b0462f59d3deff7054711978747131ded2", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/338764b0462f59d3deff7054711978747131ded2", "committedDate": "2020-07-29T11:00:16Z", "message": "[Task 72222] fixed a bug with the links after the implementation of the array dynamic workflowgroup links"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5Mjk4NTE5", "url": "https://github.com/DSpace/DSpace/pull/2911#pullrequestreview-459298519", "createdAt": "2020-07-31T16:18:48Z", "commit": {"oid": "338764b0462f59d3deff7054711978747131ded2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNjoxODo0OFrOG6OTaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNjoxODo0OFrOG6OTaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcwNDkzOQ==", "bodyText": "While this entire for loop should work, just a note that this can be simplified in Java 8+ like this:\n// If a link of this name doesn't already exist in the list, add it\nif (!list.stream().anyMatch((l -> l.getName().equalsIgnoreCase(name)))) {\n    super.add(link);\n}\n\nIf you prefer your manner, that's fine. It'll work.  Just noting an opportunity for code simplification here.", "url": "https://github.com/DSpace/DSpace/pull/2911#discussion_r463704939", "createdAt": "2020-07-31T16:18:48Z", "author": {"login": "tdonohue"}, "path": "dspace-server-webapp/src/main/java/org/dspace/app/rest/model/hateoas/HALResource.java", "diffHunk": "@@ -49,6 +51,20 @@ public void setPageHeader(EmbeddedPageHeader page) {\n     public EntityModel<T> add(Link link) {\n         if (!hasLink(link.getRel())) {\n             return super.add(link);\n+        } else {\n+            String name = link.getName();\n+            if (StringUtils.isNotBlank(name)) {\n+                List<Link> list = this.getLinks(link.getRel());\n+                boolean doesNameExist = false;\n+                for (Link existingLink : list) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "338764b0462f59d3deff7054711978747131ded2"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9de632d6597a87108dcb61db62e08b1d3b4da708", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/9de632d6597a87108dcb61db62e08b1d3b4da708", "committedDate": "2020-08-06T09:22:25Z", "message": "Merge remote-tracking branch 'dspace/main' into issue-2800-workflowgroup-collection-links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61d44087fd6d8b8e9f035e5962fedcde8ef8ea7b", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/61d44087fd6d8b8e9f035e5962fedcde8ef8ea7b", "committedDate": "2020-08-06T10:25:11Z", "message": "[Task 72222] simplified the for loop in halResource to use java8 stream"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1293, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}