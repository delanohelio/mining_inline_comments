{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTc5MjE4", "number": 2925, "title": "72450: AdministratorOfFeature: fixes", "bodyText": "References\n\nFixes GitHub issue\n\nDescription\nThe AdministratorOfFeature apparently didn't support items at all, this has been fixed now\nInstructions for Reviewers\nThis can be tested by querying the authorizations of an item, e.g. using\n/server/api/authz/authorization/search/object?uri=https://dspace7-test.atmire.com/server/api/core/items/b1bc3a49-49b1-417a-ac90-8d5c7ba5e0ac&embed=feature\nChecklist\nThis checklist provides a reminder of what we are going to look for when reviewing your PR. You need not complete this checklist prior to creating your PR (draft PRs are always welcome). If you are unsure about an item in the checklist, don't hesitate to ask. We're here to help!\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-08-10T15:39:12Z", "url": "https://github.com/DSpace/DSpace/pull/2925", "merged": true, "mergeCommit": {"oid": "af2726831f06d5a4a5b02d4e74ab3b968dc4c127"}, "closed": true, "closedAt": "2020-08-27T21:39:42Z", "author": {"login": "benbosman"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9ijjUAH2gAyNDY1NTc5MjE4OjlmYTFiNzhlMmVmYzk4NDczOTdiYjY0MTIyZDQxNmZjZThlMjc5Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDAJ0cAH2gAyNDY1NTc5MjE4OjU3MThkNzhhYjU5YjMyNTc3OGEzNDQwY2RjNjQ1ZDgwYzk0MjQyNDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9fa1b78e2efc9847397bb64122d416fce8e279c7", "author": {"user": {"login": "YanaDePauw", "name": "Yana De Pauw"}}, "url": "https://github.com/DSpace/DSpace/commit/9fa1b78e2efc9847397bb64122d416fce8e279c7", "committedDate": "2020-08-10T13:51:04Z", "message": "72450: AdministratorOfFeature: fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjg0NjEz", "url": "https://github.com/DSpace/DSpace/pull/2925#pullrequestreview-473684613", "createdAt": "2020-08-24T16:56:48Z", "commit": {"oid": "9fa1b78e2efc9847397bb64122d416fce8e279c7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNjo1Njo0OFrOHFuBGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNjo1Njo0OFrOHFuBGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc1ODg3NQ==", "bodyText": "As this is used heavily in ITs, I don't think we should have a log.info here.  I'd recommend we remove it, or change to a log.debug if you feel it's needed for debugging issues.", "url": "https://github.com/DSpace/DSpace/pull/2925#discussion_r475758875", "createdAt": "2020-08-24T16:56:48Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/java/org/dspace/builder/AbstractDSpaceObjectBuilder.java", "diffHunk": "@@ -146,6 +146,33 @@ protected AbstractDSpaceObjectBuilder(Context context) {\n         }\n         return (B) this;\n     }\n+    /**\n+     * Support method to grant the {@link Constants#READ} permission over an object only to a specific group. Any other\n+     * READ permissions will be removed\n+     *\n+     * @param dso\n+     *            the DSpaceObject on which grant the permission\n+     * @param eperson\n+     *            the eperson that will be granted of the permission\n+     * @return the builder properly configured to build the object with the additional admin permission\n+     */\n+    protected <B extends AbstractDSpaceObjectBuilder<T>> B setAdminPermission(DSpaceObject dso, EPerson eperson,\n+                                                                                 Date startDate) {\n+        try {\n+\n+            ResourcePolicy rp = authorizeService.createOrModifyPolicy(null, context, null, null,\n+                                                                      eperson, startDate, Constants.ADMIN,\n+                                                                      \"Integration Test\", dso);\n+            if (rp != null) {\n+                log.info(\"Updating resource policy with REMOVE for eperson: \" + eperson.getEmail());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fa1b78e2efc9847397bb64122d416fce8e279c7"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5718d78ab59b325778a3440cdc645d80c9424243", "author": {"user": {"login": "YanaDePauw", "name": "Yana De Pauw"}}, "url": "https://github.com/DSpace/DSpace/commit/5718d78ab59b325778a3440cdc645d80c9424243", "committedDate": "2020-08-27T13:09:44Z", "message": "72751: Remove log.info line from builder"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1309, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}