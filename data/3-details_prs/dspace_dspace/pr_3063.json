{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NDg5MzU4", "number": 3063, "title": "Fix many warnings from errorprone", "bodyText": "References\n\nFixes #3061\n\nDescription\nMany small fixes for warnings and suggestions by errorprone.  Also the usual IDE suggestions, tidying commentary, etc.\nInstructions for Reviewers\nThe aim of this patch is to reduce the long scroll of warnings from a successful build to manageable size, and make the remaining ones easier to notice so that they get some attention.  What you should see is that the output of a build is not so overwhelming.  No new features or specific bug fixes are included, though some of the fixed code was probably buggy.  Some of the affected code should be easier to understand.  There may be slight performance improvements.\nThis patch includes most of the commits from #2956 because without them many of the errorprone warnings would not be shown.  (There is a limit in the Java compiler on the numbers of errors and warnings shown.  This suggests that we have not been seeing all of the warnings.  We should keep these trimmed down so that we don't miss something that's worse than annoying.)\nChecklist\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-11-25T14:33:35Z", "url": "https://github.com/DSpace/DSpace/pull/3063", "merged": true, "mergeCommit": {"oid": "e2a95c49c5ca6494de3bcbf2e5cb469652d9319a"}, "closed": true, "closedAt": "2021-09-22T19:26:08Z", "author": {"login": "mwoodiupui"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfr3O2AH2gAyNTI3NDg5MzU4OjY1ZjA0ZmNlYzkzOTBjNmI0Njc4MDM5YzYzZjUzNWUwZWQxOGU1OWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABfA741SgFqTc2MTMxOTM1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "65f04fcec9390c6b4678039c63f535e0ed18e59d", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/65f04fcec9390c6b4678039c63f535e0ed18e59d", "committedDate": "2020-11-24T15:55:08Z", "message": "First batch of errorprone fixes. #3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6112babc3685a2eb84ee55e50215835e43c260d", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/f6112babc3685a2eb84ee55e50215835e43c260d", "committedDate": "2020-11-25T01:22:06Z", "message": "More errorprone warnings.  #3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce4ca33346d879f6e65424409eec7eed4435fdfe", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ce4ca33346d879f6e65424409eec7eed4435fdfe", "committedDate": "2020-11-25T21:55:08Z", "message": "Merge branch 'main' of github.com:mwoodiupui/DSpace into 3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a036b99f1c3483bc26d6c7660925f537d5f41f7e", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/a036b99f1c3483bc26d6c7660925f537d5f41f7e", "committedDate": "2020-11-30T21:21:01Z", "message": "Catch correct error for replaced class, to fix test errors.  Satisfy checkstyle.  #3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac29b3ec50a0314ea19b48ae8d658ebbe1c2e71f", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ac29b3ec50a0314ea19b48ae8d658ebbe1c2e71f", "committedDate": "2020-12-07T15:50:58Z", "message": "Merge branch 'main' into 3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2c08b31094c9fdfc80a86c37eace5e782d4d48b", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/c2c08b31094c9fdfc80a86c37eace5e782d4d48b", "committedDate": "2020-12-08T13:07:54Z", "message": "Restore thread-safety to see if it is needed.  #3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3175d56d5c5be68f83761940b1e9392f95c9a22", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/f3175d56d5c5be68f83761940b1e9392f95c9a22", "committedDate": "2021-09-07T18:30:20Z", "message": "Merge branch 'main' into 3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35e280019fbb91be697287d757b5b321d11f0485", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/35e280019fbb91be697287d757b5b321d11f0485", "committedDate": "2021-09-08T17:35:46Z", "message": "Collections.EMPTY_LIST is immutable, possibly causing addBitstream to throw exception."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20816f945e228a2f66c87a0dc90ef47afc5eaabd", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/20816f945e228a2f66c87a0dc90ef47afc5eaabd", "committedDate": "2021-09-08T17:40:53Z", "message": "Log and continue instead of throwing exception when caller stack is empty."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "948014646af8716a8104b0e3960f65f183e52675", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/948014646af8716a8104b0e3960f65f183e52675", "committedDate": "2021-09-08T19:40:44Z", "message": "Mention bitstream ID in exception for better debugging.  (3061)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b96106ea3103275a6c8aae05309deea410431ba", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/4b96106ea3103275a6c8aae05309deea410431ba", "committedDate": "2021-09-08T19:52:33Z", "message": "Merge remote-tracking branch 'upstream/main' into 3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "384d46348aec6c63ac3d4e141a8a91e6944d87e5", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/384d46348aec6c63ac3d4e141a8a91e6944d87e5", "committedDate": "2021-09-10T15:32:58Z", "message": "Another batch of Error Prone fixes.  (#3061)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd310f536f676e9e239e6eac19285f19bcbb34f", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/edd310f536f676e9e239e6eac19285f19bcbb34f", "committedDate": "2021-09-10T16:51:24Z", "message": "Address Error Prone complaints about tests.  (#3061)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6013062a0836157f151e1b051eb0b12565ed372f", "author": {"user": {"login": "mwoodiupui", "name": "Mark H. Wood"}}, "url": "https://github.com/DSpace/DSpace/commit/6013062a0836157f151e1b051eb0b12565ed372f", "committedDate": "2021-09-15T20:18:18Z", "message": "Merge remote-tracking branch 'upstream/main' into 3061"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "106d37404b3c5fa8278f864c95f550c79aed4710", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/106d37404b3c5fa8278f864c95f550c79aed4710", "committedDate": "2021-09-16T12:41:42Z", "message": "Fix incorrect merge.  (#3061)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f463239d2eed66ad78d4ec5db31cb523332e989", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/9f463239d2eed66ad78d4ec5db31cb523332e989", "committedDate": "2021-09-16T17:23:48Z", "message": "Address new LGTM alert for removed parameter. (#3061)"}}, {"__typename": "PullRequestReview", "id": "PRR_kwDOADkekM4tK1k8", "url": "https://github.com/DSpace/DSpace/pull/3063#pullrequestreview-757815612", "createdAt": "2021-09-17T19:59:13Z", "commit": {"oid": "9f463239d2eed66ad78d4ec5db31cb523332e989"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xN1QxOTo1OToxM1rOKmXZKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xN1QyMDoxMzo0NFrOKmX1ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "PRRC_kwDOADkekM4qZdkr", "bodyText": "Should this be && !element.isEmpty() like other changes above in this same class?", "url": "https://github.com/DSpace/DSpace/pull/3063#discussion_r711317803", "createdAt": "2021-09-17T19:59:13Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/main/java/org/dspace/app/bulkedit/DSpaceCSV.java", "diffHunk": "@@ -577,7 +577,7 @@ public final void addItem(String line) throws Exception {\n                 csvLine.add(headings.get(i - 1), null);\n                 String[] elements = part.split(escapedValueSeparator);\n                 for (String element : elements) {\n-                    if ((element != null) && (!\"\".equals(element))) {\n+                    if ((element != null) && !\"\".equals(element)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f463239d2eed66ad78d4ec5db31cb523332e989"}, "originalPosition": 106}, {"id": "PRRC_kwDOADkekM4qZfVq", "bodyText": "Again, this line and 4 lines above.  Should this both be turned into an ![variable].isEmpty()?", "url": "https://github.com/DSpace/DSpace/pull/3063#discussion_r711325034", "createdAt": "2021-09-17T20:13:44Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/main/java/org/dspace/core/I18nUtil.java", "diffHunk": "@@ -316,18 +314,17 @@ private static String getFilename(Locale locale, String fileName, String fileTyp\n         // with Language, Country\n         String fileNameLC = null;\n         // with Language\n-        String fileNameL = null;\n-        fileNameL = fileName + \"_\" + locale.getLanguage();\n+        String fileNameL = fileName + \"_\" + locale.getLanguage();\n \n         if (fileType == null) {\n             fileType = \"\";\n         }\n \n-        if (!(\"\".equals(locale.getCountry()))) {\n+        if (!\"\".equals(locale.getCountry())) {\n             fileNameLC = fileName + \"_\" + locale.getLanguage() + \"_\"\n                 + locale.getCountry();\n \n-            if (!(\"\".equals(locale.getVariant()))) {\n+            if (!\"\".equals(locale.getVariant())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f463239d2eed66ad78d4ec5db31cb523332e989"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b366f8b7429947eecceb3b7daeec29f03605d64", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/1b366f8b7429947eecceb3b7daeec29f03605d64", "committedDate": "2021-09-20T12:55:11Z", "message": "Address review comments:  missed some isEmpty fixes.  [#3061]"}}, {"__typename": "PullRequestReview", "id": "PRR_kwDOADkekM4tYM--", "url": "https://github.com/DSpace/DSpace/pull/3063#pullrequestreview-761319358", "createdAt": "2021-09-22T19:26:01Z", "commit": {"oid": "1b366f8b7429947eecceb3b7daeec29f03605d64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1394, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}