{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjY4ODg3", "number": 3076, "title": "Submission forms migration script", "bodyText": "References\n\nFixes #2818\n\nDescription\nThis PR introduces a script that will parse input-forms.xml and item-submission.xml from DSpace <7 versions into the submission-forms.xml and item-submission.xml standard for DSpace 7.\nThis script can be called by using submission-forms-migrate -s {path-to-config-dir}/item-submission.xml -f {path-to-config-dir}/input-forms.xml\nwith the path-to-config-dir leading to the config dir for the DSpace <7 instance that you're looking to migrate.\nThe migrated xml files will be present in the DSpace's install dir in the config folder\nInstructions for Reviewers\nList of changes in this PR:\n\nintroduced a script to automatically migrate the old submission xml files to the new ones\n\nHow to test this PR:\n\nSetup this branch\nCall the script using {dspace.dir}/dspace submission-forms-migrate -s {path-to-config-dir}/item-submission.xml -f {path-to-config-dir}/input-forms.xml\nVerify that the new submission xml files are present in the {dspace.dir}/config directory\n\nChecklist\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-12-07T13:26:52Z", "url": "https://github.com/DSpace/DSpace/pull/3076", "merged": true, "mergeCommit": {"oid": "5f468770ff36e5adae629b0dbd24e81e323564a2"}, "closed": true, "closedAt": "2021-02-10T17:19:23Z", "author": {"login": "Raf-atmire"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmxXMDAFqTU1Mzg1MjA3OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABd4z0KuAFqTU4Nzg1Njg1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODUyMDc5", "url": "https://github.com/DSpace/DSpace/pull/3076#pullrequestreview-553852079", "createdAt": "2020-12-16T16:17:02Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTczNzk0MDE5", "url": "https://github.com/DSpace/DSpace/pull/3076#pullrequestreview-573794019", "createdAt": "2021-01-21T22:36:58Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMVQyMjozNjo1OFrOIYMloA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMVQyMjozNzozMVrOIYMmkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjI0Mjk3Ng==", "bodyText": "I'd like us to add some comments to describe this stylesheet, as it's not self-explanatory or clearly named.  We should say something like:\n<!-- This XSLT is used by `./dspace submission-forms-migrate` to transform a DSpace 6.x (or below) item-submission.xml configuration file into a DSpace 7.x (or above) item-submission.xml -->", "url": "https://github.com/DSpace/DSpace/pull/3076#discussion_r562242976", "createdAt": "2021-01-21T22:36:58Z", "author": {"login": "tdonohue"}, "path": "dspace/config/migration/item-submissions.xsl", "diffHunk": "@@ -0,0 +1,121 @@\n+<?xml version=\"1.0\"?>\n+<xsl:stylesheet version=\"1.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjI0MzIxNw==", "bodyText": "Same here, we need a comment to describe the purpose of this file.  Something like:\n<!-- This XSLT is used by `./dspace submission-forms-migrate` to transform a DSpace 6.x (or below) input-forms.xml configuration file into a DSpace 7.x (or above) submission-forms.xml -->", "url": "https://github.com/DSpace/DSpace/pull/3076#discussion_r562243217", "createdAt": "2021-01-21T22:37:31Z", "author": {"login": "tdonohue"}, "path": "dspace/config/migration/submission-forms.xsl", "diffHunk": "@@ -0,0 +1,91 @@\n+<?xml version=\"1.0\"?>\n+\n+<xsl:stylesheet version=\"1.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg3MDY2MDM2", "url": "https://github.com/DSpace/DSpace/pull/3076#pullrequestreview-587066036", "createdAt": "2021-02-09T22:11:38Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "529e8ac0110a8f10e37559acc4afec9aaa5856a6", "author": {"user": {"login": "YanaDePauw", "name": "Yana De Pauw"}}, "url": "https://github.com/DSpace/DSpace/commit/529e8ac0110a8f10e37559acc4afec9aaa5856a6", "committedDate": "2021-02-10T09:55:44Z", "message": "73214: Submission forms migrations #1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d239c95170206c3b34e7fb3e8ac482b27f8ea55b", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/d239c95170206c3b34e7fb3e8ac482b27f8ea55b", "committedDate": "2021-02-10T09:55:44Z", "message": "74490: item-submissions.xmml migration XSL; WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abc333bf9ca3c5bc99242c44ee63f23b8708b926", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/abc333bf9ca3c5bc99242c44ee63f23b8708b926", "committedDate": "2021-02-10T09:55:44Z", "message": "74491: Java script for transforming the xml files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b63643808d2a3bc89be9be087d6c60760f120a83", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/b63643808d2a3bc89be9be087d6c60760f120a83", "committedDate": "2021-02-10T09:55:44Z", "message": "74491: Feedback 2020-11-17 applied"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccdb4bf5035e4741b6d13349aad4240a9a09c7c7", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/ccdb4bf5035e4741b6d13349aad4240a9a09c7c7", "committedDate": "2021-02-10T09:55:44Z", "message": "removed super from handler log calls in SubmissionFormsMigration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150c8452fd8717f35194adc743d6f81c47d8b0d9", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/150c8452fd8717f35194adc743d6f81c47d8b0d9", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: Migrate submission-process information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0be29845d49dbe37f5bcdc47ff4e5ad31bd9bee", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/b0be29845d49dbe37f5bcdc47ff4e5ad31bd9bee", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: Add static steps license and upload &\nadd a step per form page from input-forms (static type submission-form; class DescribeStep)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c6bcfe9f1fc64ee798cc396a89394e4b4d34c1", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/f7c6bcfe9f1fc64ee798cc396a89394e4b4d34c1", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: submission-map (mapping collection-submissionProcess) from old input-forms.xml instead of item-submission.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bbfc1ded5314c65817300eb40ede791c0130c73", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/0bbfc1ded5314c65817300eb40ede791c0130c73", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: onebox => twobox in submission-forms (twobox no longer present in dspace7)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5117b636179e89f06d206ed5f0fbfddb0b8b433f", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/5117b636179e89f06d206ed5f0fbfddb0b8b433f", "committedDate": "2021-02-10T09:55:45Z", "message": "Minor change in order of steps in submission-process in submission-definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ef0795ba34683424ef84dd48d681a8800b48faa", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/3ef0795ba34683424ef84dd48d681a8800b48faa", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: Create dummy DTD files for validation if not present in input dirs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3d38f7f260d3b1b39a1eb37a79e0cf5e4fd170d", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/f3d38f7f260d3b1b39a1eb37a79e0cf5e4fd170d", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: No more submission-forms-migrate script access via REST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9d68ab5e6feb0dc98d1a29cbcf45eb988d8281f", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/d9d68ab5e6feb0dc98d1a29cbcf45eb988d8281f", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: Refactor temp file creation/deletion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28b0f8f6cc9d6d637dcd45ab08a5ba030471f76e", "author": {"user": {"login": "Raf-atmire", "name": null}}, "url": "https://github.com/DSpace/DSpace/commit/28b0f8f6cc9d6d637dcd45ab08a5ba030471f76e", "committedDate": "2021-02-10T09:55:45Z", "message": "Fixed checkstyle issues on SubmissionFormsMigration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e686495b27ef509f661786b92e4800f93be3ecd", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/1e686495b27ef509f661786b92e4800f93be3ecd", "committedDate": "2021-02-10T09:55:45Z", "message": "74720: relative to absolute paths; comments & output files .migrated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c03578321b9708d0534a4d3b91c498381a98888a", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/c03578321b9708d0534a4d3b91c498381a98888a", "committedDate": "2021-02-10T10:18:10Z", "message": "PR #3076: item-submission.xml changes from #3081 in xsl transformation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "c03578321b9708d0534a4d3b91c498381a98888a", "author": {"user": {"login": "MarieVerdonck", "name": "Marie Verdonck"}}, "url": "https://github.com/DSpace/DSpace/commit/c03578321b9708d0534a4d3b91c498381a98888a", "committedDate": "2021-02-10T10:18:10Z", "message": "PR #3076: item-submission.xml changes from #3081 in xsl transformation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg3ODU2ODU3", "url": "https://github.com/DSpace/DSpace/pull/3076#pullrequestreview-587856857", "createdAt": "2021-02-10T17:19:08Z", "commit": {"oid": "c03578321b9708d0534a4d3b91c498381a98888a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1403, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}