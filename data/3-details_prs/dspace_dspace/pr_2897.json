{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NzQ2NDY1", "number": 2897, "title": "#2893 Move builders from dspace-server-webapp to dspace-api.", "bodyText": "References\n#2893\nDescription\nMove DSO Builders from dspace-server-webapp to dspace-api and share.\nInstructions for Reviewers\nList of changes in this PR:\n\nMoved most Builders to dspace-api.  REST-specific code was not moved.\nNOTE:  most Builders moved from package org.dspace.app.rest.builder to org.dspace.builder.\nTook up some recommendations from code quality tools.\nRenamed an IT from AuthorizeConfigIntegrationTest to AuthorizeConfigIT because the old name made it run with the unit tests.\nNOTE:  this changes the default Maven treatment of tests from \"do not build or run\" (maven.test.skip) to \"build but do not run\" (skipTests).\ndspace-api:org.dspace.app.bulkedit.MetadataExportTest now uses Builder classes instead of creating DSOs \"by hand\" to demonstrate that the newly-common Builder classes now work in both dspace-api and dspace-server-webapp.\n\nHow to test:\nRun all test suites.  They should show the same results as before.\nChecklist\n\n My PR is small in size (e.g. less than 1,000 lines of code, not including comments & integration tests). Exceptions may be made if previously agreed upon.\n My PR passes Checkstyle validation based on the Code Style Guide.\n My PR includes Javadoc for all new (or modified) public methods and classes. It also includes Javadoc for large or complex private methods.\n My PR passes all tests and includes new/updated Unit or Integration Tests based on the Code Testing Guide.\n If my PR includes new, third-party dependencies (in any pom.xml), I've made sure their licenses align with the DSpace BSD License based on the Licensing of Contributions documentation.\n If my PR modifies the REST API, I've linked to the REST Contract page (or open PR) related to this change.", "createdAt": "2020-07-21T21:06:19Z", "url": "https://github.com/DSpace/DSpace/pull/2897", "merged": true, "mergeCommit": {"oid": "5eacfc07f38f8414c7982a461485cf71c6ee980a"}, "closed": true, "closedAt": "2020-08-04T18:43:08Z", "author": {"login": "mwoodiupui"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3aTHuAH2gAyNDU0NzQ2NDY1OmRkOWMwYjk5OTlmNzVmMWYyMDQ1ZGE4ZTM4MmJkN2ZjYTM5ZTkzY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7pyYUgH2gAyNDU0NzQ2NDY1OmUxYWQ1MjBjODZlMGY4YjU2YTQ1MmQyMmNhNWFhYmZiYTZkMjgyMGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dd9c0b9999f75f1f2045da8e382bd7fca39e93cd", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/dd9c0b9999f75f1f2045da8e382bd7fca39e93cd", "committedDate": "2020-07-22T12:50:20Z", "message": "#2893 Move builders from dspace-server-webapp to dspace-api."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d6c8891ec8bff691f3576a2cbdef827e9b23baf", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/9d6c8891ec8bff691f3576a2cbdef827e9b23baf", "committedDate": "2020-07-22T13:58:23Z", "message": "#2893 Rebase on current main, patch recently-added class, tidy documentation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "9d6c8891ec8bff691f3576a2cbdef827e9b23baf", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/9d6c8891ec8bff691f3576a2cbdef827e9b23baf", "committedDate": "2020-07-22T13:58:23Z", "message": "#2893 Rebase on current main, patch recently-added class, tidy documentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "459dc2163b5906e139d61de1efa35a85f9670928", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/459dc2163b5906e139d61de1efa35a85f9670928", "committedDate": "2020-07-22T16:02:15Z", "message": "Fix bad LGTM default that suppresses test JARs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daed71b91bd7985507c67883ac4f3e8916320e21", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/daed71b91bd7985507c67883ac4f3e8916320e21", "committedDate": "2020-07-22T19:07:25Z", "message": "Add shebang to lgtm-build in attempt to make it work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef353a5f44e6dc6541deb5f027b41b91d127399a", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ef353a5f44e6dc6541deb5f027b41b91d127399a", "committedDate": "2020-07-22T19:22:05Z", "message": "Try again to make LGTM run custom command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "453e1c9c914b975ca3f2f5d8607634a092fbfffc", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/453e1c9c914b975ca3f2f5d8607634a092fbfffc", "committedDate": "2020-07-22T19:28:12Z", "message": "Yet another attempt to understand undocumented LGTM build command(s)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1139ff0a3e425f2153aca73782eb31a2df8926d", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/c1139ff0a3e425f2153aca73782eb31a2df8926d", "committedDate": "2020-07-22T19:42:13Z", "message": "Trim lgtm build command some more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b14f52313e0e992d3ca8c1d26046f9d4c7e809bb", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/b14f52313e0e992d3ca8c1d26046f9d4c7e809bb", "committedDate": "2020-07-23T14:32:10Z", "message": "Set JAVA_HOME trying to make LGTM work as UNdocumented."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0076e6b37b178059c0e788f5726bd9cf19384096", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/0076e6b37b178059c0e788f5726bd9cf19384096", "committedDate": "2020-07-23T17:00:36Z", "message": "Clean up a lot of ErrorProne and Checkstyle warnings.  #2983\nSo I can see what else is wrong."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca31be285989295b93ba66c211230e786faf34f3", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ca31be285989295b93ba66c211230e786faf34f3", "committedDate": "2020-07-23T17:30:51Z", "message": "#2983 More Checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec7c38675944b26b6ec2c81642f8510abefe678", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/1ec7c38675944b26b6ec2c81642f8510abefe678", "committedDate": "2020-07-24T01:15:25Z", "message": "Use skipTests not maven.test.skip so tests always built; fix dependencies. #2983"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46dc547db86afb4f1bcfc6863bc9ae00a0c63e83", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/46dc547db86afb4f1bcfc6863bc9ae00a0c63e83", "committedDate": "2020-07-24T14:33:26Z", "message": "#2893 Reconfigure test building on LGTM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2ad45d25d7b269e5a1a6a691ea0b8a91aebbc80", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/f2ad45d25d7b269e5a1a6a691ea0b8a91aebbc80", "committedDate": "2020-07-24T14:38:06Z", "message": "Merge branch 'main' into #2893"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc4663b783b8bcaa09794f4473026d2b810c0f91", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/bc4663b783b8bcaa09794f4473026d2b810c0f91", "committedDate": "2020-07-24T14:39:23Z", "message": "#2893 try LGTM with default command again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20a3d94a1b9c39b15067189079777c0b08919b12", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/20a3d94a1b9c39b15067189079777c0b08919b12", "committedDate": "2020-07-24T14:53:34Z", "message": "#2893 Re-enable test running in Travis; document changes to how-to-test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6a0d76094e4120d7a6e1226b216cd9df3f8a08d", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/f6a0d76094e4120d7a6e1226b216cd9df3f8a08d", "committedDate": "2020-07-24T15:19:02Z", "message": "#2893 Discard un-needed custom LGTM build script."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd", "committedDate": "2020-07-24T21:13:01Z", "message": "#2893 Rework a dspace-api IT to use Builders as a demo."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NzA0MTU3", "url": "https://github.com/DSpace/DSpace/pull/2897#pullrequestreview-456704157", "createdAt": "2020-07-28T14:40:20Z", "commit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MDoyMVrOG4P-vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTowMDowNlrOG4Q_VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzNTI2Mg==", "bodyText": "Rather than manually installing the Item, you can just use the ItemBuilder here.  For example, remove the call to the WorkspaceItemBuilder and replace all this with:\nItem item = ItemBuilder.createItem(context, collection).withAuthor(\"Donald,Smith\").build();\n\nThis would allow you to remove the itemService.delete() at the end of this method as well (along with the context turn off/on authN surrounding it).", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r461635262", "createdAt": "2020-07-28T14:40:21Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataExportIT.java", "diffHunk": "@@ -14,58 +14,60 @@\n import java.nio.charset.StandardCharsets;\n \n import org.apache.commons.io.IOUtils;\n-import org.dspace.AbstractIntegrationTest;\n+import org.dspace.AbstractIntegrationTestWithDatabase;\n import org.dspace.app.launcher.ScriptLauncher;\n import org.dspace.app.scripts.handler.impl.TestDSpaceRunnableHandler;\n+import org.dspace.builder.CollectionBuilder;\n+import org.dspace.builder.CommunityBuilder;\n+import org.dspace.builder.WorkspaceItemBuilder;\n import org.dspace.content.Collection;\n import org.dspace.content.Community;\n import org.dspace.content.Item;\n import org.dspace.content.WorkspaceItem;\n import org.dspace.content.factory.ContentServiceFactory;\n-import org.dspace.content.service.CollectionService;\n-import org.dspace.content.service.CommunityService;\n import org.dspace.content.service.InstallItemService;\n import org.dspace.content.service.ItemService;\n-import org.dspace.content.service.WorkspaceItemService;\n import org.dspace.services.ConfigurationService;\n import org.dspace.services.factory.DSpaceServicesFactory;\n import org.junit.Test;\n \n-public class MetadataExportTest extends AbstractIntegrationTest {\n-\n-    private ItemService itemService = ContentServiceFactory.getInstance().getItemService();\n-    private CollectionService collectionService = ContentServiceFactory.getInstance().getCollectionService();\n-    private CommunityService communityService = ContentServiceFactory.getInstance().getCommunityService();\n-    private WorkspaceItemService workspaceItemService = ContentServiceFactory.getInstance().getWorkspaceItemService();\n-    private InstallItemService installItemService = ContentServiceFactory.getInstance().getInstallItemService();\n-    private ConfigurationService configurationService = DSpaceServicesFactory.getInstance().getConfigurationService();\n+public class MetadataExportIT\n+        extends AbstractIntegrationTestWithDatabase {\n+    private final ItemService itemService\n+            = ContentServiceFactory.getInstance().getItemService();\n+    private final InstallItemService installItemService\n+            = ContentServiceFactory.getInstance().getInstallItemService();\n+    private final ConfigurationService configurationService\n+            = DSpaceServicesFactory.getInstance().getConfigurationService();\n \n     @Test\n     public void metadataExportToCsvTest() throws Exception {\n         context.turnOffAuthorisationSystem();\n-        Community community = communityService.create(null, context);\n-        Collection collection = collectionService.create(context, community);\n-        WorkspaceItem wi = workspaceItemService.create(context, collection, true);\n+        Community community = CommunityBuilder.createCommunity(context).build();\n+        Collection collection = CollectionBuilder.createCollection(context, community).build();\n+        WorkspaceItem wi = WorkspaceItemBuilder.createWorkspaceItem(context, collection).build();\n         Item item = wi.getItem();\n         itemService.addMetadata(context, item, \"dc\", \"contributor\", \"author\", null, \"Donald, Smith\");\n         item = installItemService.installItem(context, wi);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzODgyMw==", "bodyText": "Why is this method needed?  Is it an @Override?", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r461638823", "createdAt": "2020-07-28T14:44:40Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/java/org/dspace/discovery/MockSolrSearchCore.java", "diffHunk": "@@ -22,4 +22,8 @@ public void afterPropertiesSet() throws Exception {\n         solr = null;\n     }\n \n+    public void reset() {\n+        // This method intentionally left blank.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY0NjM2NQ==", "bodyText": "Where is this method called/used? Should this have an @Override?  Or maybe more clear JavaDocs on its usage/purpose", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r461646365", "createdAt": "2020-07-28T14:53:51Z", "author": {"login": "tdonohue"}, "path": "dspace-api/src/test/java/org/dspace/statistics/MockSolrLoggerServiceImpl.java", "diffHunk": "@@ -62,18 +64,28 @@ public void afterPropertiesSet() throws Exception {\n      * @return faked CityResponse\n      */\n     private CityResponse mockCityResponse() {\n-        List<String> cityNames = new ArrayList<String>(Collections.singleton(\"New York\"));\n+        List<String> cityNames = new ArrayList<>(Collections.singleton(\"New York\"));\n         City city = new City(cityNames, 1, 1, new HashMap());\n \n-        List<String> countryNames = new ArrayList<String>(Collections.singleton(\"United States\"));\n+        List<String> countryNames = new ArrayList<>(Collections.singleton(\"United States\"));\n         Country country = new Country(countryNames, 1, 1, \"US\", new HashMap());\n \n         Location location = new Location(1, 1, 40.760498D, -73.9933D, 501, 1, \"EST\");\n \n         Postal postal = new Postal(\"10036\", 1);\n \n         return new CityResponse(city, new Continent(), country, location, new MaxMind(), postal,\n-                                country, new RepresentedCountry(), new ArrayList<>(0),\n-                                new Traits());\n+                                                 country,  new RepresentedCountry(), new ArrayList<>(0),\n+                                                 new Traits());\n+    }\n+\n+    /** Remove all records. */\n+    public void reset() {\n+        mockSolrServer.reset();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY1MTI4MQ==", "bodyText": "alignment it a little odd here. It looks like the two lines you added have tabs in front, which pushes the alignment off slightly.", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r461651281", "createdAt": "2020-07-28T14:59:28Z", "author": {"login": "tdonohue"}, "path": "pom.xml", "diffHunk": "@@ -475,29 +475,33 @@\n     </build>\n \n     <profiles>\n-        <!-- Skip Unit Tests by default, but allow override on command line\n-           by setting property \"-Dmaven.test.skip=false\" -->\n+        <!-- Skip running Unit Tests by default, but allow override on\n+           command line by setting property \"-DskipTests=false\".\n+\t   Tests are always built, because we have modules that depend\n+\t   on common test infrastructure. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY1MTc5Nw==", "bodyText": "Again, tiny alignment issue cause of a tab on the last line", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r461651797", "createdAt": "2020-07-28T15:00:06Z", "author": {"login": "tdonohue"}, "path": "pom.xml", "diffHunk": "@@ -475,29 +475,33 @@\n     </build>\n \n     <profiles>\n-        <!-- Skip Unit Tests by default, but allow override on command line\n-           by setting property \"-Dmaven.test.skip=false\" -->\n+        <!-- Skip running Unit Tests by default, but allow override on\n+           command line by setting property \"-DskipTests=false\".\n+\t   Tests are always built, because we have modules that depend\n+\t   on common test infrastructure. -->\n         <profile>\n             <id>skiptests</id>\n             <activation>\n-                <!-- This profile should be active at all times, unless the user\n-                     specifies a different value for \"maven.test.skip\" -->\n+                <!-- This profile should be active at all times, unless the\n+                     user specifies a different value for \"skipTests\" -->\n                 <property>\n-                    <name>!maven.test.skip</name>\n+                    <name>!skipTests</name>\n                 </property>\n             </activation>\n             <properties>\n-                <maven.test.skip>true</maven.test.skip>\n+                <skipTests>true</skipTests>\n             </properties>\n         </profile>\n \n-        <!-- Skip Integration Tests by default, but allow override on\n-             command line by setting property \"-DskipITs=false\" -->\n+        <!-- Skip running Integration Tests by default, but allow override on\n+             command line by setting property \"-DskipITs=false\".\n+             ITs are always built, because we have modules that depend\n+\t     on common test infrastructure. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0a6771bc7b0f36a7bb530b72f74da7b7d7cedd"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3bc495198fe1974d4ace715bccee6ee08333f4e", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/e3bc495198fe1974d4ace715bccee6ee08333f4e", "committedDate": "2020-07-29T16:41:16Z", "message": "#2893 Tabs to spaces."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecd8a886337e74372cb322f0ea45c807ee536d65", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ecd8a886337e74372cb322f0ea45c807ee536d65", "committedDate": "2020-07-29T16:44:09Z", "message": "#2893 More proper use of Builders in demo test suite."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ee4b7ab9d4ccdc522d16f6436a042f57c61b573", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/8ee4b7ab9d4ccdc522d16f6436a042f57c61b573", "committedDate": "2020-07-29T16:48:31Z", "message": "Address questions about dummy methods.  This breaks tests. #2893\nMerge more from dspace-server-webapp to make tests work again.\nTidy up XML layout.  Improve alignment of declared to actual dependencies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/a27355f79a0b304068e496bc3f2e394a3d1c6926", "committedDate": "2020-07-29T21:21:55Z", "message": "#2893 dspace/modules/additions also needs new dependencies, updates."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NDA2MTUx", "url": "https://github.com/DSpace/DSpace/pull/2897#pullrequestreview-459406151", "createdAt": "2020-07-31T19:21:17Z", "commit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxOToyMTo1NVrOG6Ta-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxOToyNzowOFrOG6Tj6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc4ODc5Mw==", "bodyText": "Should this have a <scope>test</scope> as well?\nI'm not exactly sure why this new dependency was added, as it doesn't appear on main branch at all.  I'm assuming it's a dependency convergence error in the test environment?", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r463788793", "createdAt": "2020-07-31T19:21:55Z", "author": {"login": "tdonohue"}, "path": "dspace-api/pom.xml", "diffHunk": "@@ -537,6 +618,35 @@\n                 </exclusion>\n             </exclusions>\n         </dependency>\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-core</artifactId>\n+            <version>${solr.client.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc4OTA0MA==", "bodyText": "Same as above, should this have  <scope>test</scope> as well?", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r463789040", "createdAt": "2020-07-31T19:22:28Z", "author": {"login": "tdonohue"}, "path": "dspace/modules/additions/pom.xml", "diffHunk": "@@ -194,6 +203,35 @@\n             </exclusion>\n          </exclusions>\n       </dependency>\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-core</artifactId>\n+            <version>${solr.client.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc4OTkwMA==", "bodyText": "Should this change be in the Parent POM (or maybe just removed)?  It looks like in the Parent POM ([src]/pom.xml) we already have commons-cli version 1.3.1 right now...So, it's unclear why we have a different version specified here.", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r463789900", "createdAt": "2020-07-31T19:24:28Z", "author": {"login": "tdonohue"}, "path": "dspace-api/pom.xml", "diffHunk": "@@ -323,6 +325,11 @@\n             <artifactId>apache-jena-libs</artifactId>\n             <type>pom</type>\n         </dependency>\n+        <dependency>\n+            <groupId>commons-cli</groupId>\n+            <artifactId>commons-cli</artifactId>\n+            <version>1.4</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc5MDc0MQ==", "bodyText": "This new dependency is also a bit odd...we don't have this one specified on main branch.  Was this a dependency conversion fix?", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r463790741", "createdAt": "2020-07-31T19:26:25Z", "author": {"login": "tdonohue"}, "path": "dspace-api/pom.xml", "diffHunk": "@@ -537,6 +618,35 @@\n                 </exclusion>\n             </exclusions>\n         </dependency>\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-core</artifactId>\n+            <version>${solr.client.version}</version>\n+        </dependency>\n+        <!-- Reminder: Keep icu4j (in Parent POM) synced with version used by lucene-analyzers-icu below,\n+             otherwise ICUFoldingFilterFactory may throw errors in tests.  -->\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-analyzers-icu</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-analyzers-smartcn</artifactId>\n+            <version>${solr.client.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.lucene</groupId>\n+            <artifactId>lucene-analyzers-stempel</artifactId>\n+            <version>${solr.client.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.xmlbeans</groupId>\n+            <artifactId>xmlbeans</artifactId>\n+            <version>2.6.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "originalPosition": 163}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc5MTA4MA==", "bodyText": "Same here...why the switch to -core?  This seems new as well as it's not on main branch.", "url": "https://github.com/DSpace/DSpace/pull/2897#discussion_r463791080", "createdAt": "2020-07-31T19:27:08Z", "author": {"login": "tdonohue"}, "path": "dspace-api/pom.xml", "diffHunk": "@@ -717,7 +827,7 @@\n \n         <dependency>\n             <groupId>org.xmlunit</groupId>\n-            <artifactId>xmlunit-matchers</artifactId>\n+            <artifactId>xmlunit-core</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27355f79a0b304068e496bc3f2e394a3d1c6926"}, "originalPosition": 173}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "442f563fccfe8af2810339fc03f24076c81acdcd", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/442f563fccfe8af2810339fc03f24076c81acdcd", "committedDate": "2020-07-31T20:30:02Z", "message": "#2893 Move several explicit dependency versions up to dependencyManagement in parent."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea995d66aaaaeb8a70c4378da7855f9be847b918", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/ea995d66aaaaeb8a70c4378da7855f9be847b918", "committedDate": "2020-07-31T20:50:27Z", "message": "Merge remote-tracking branch 'upstream/main' into #2893"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc198bae00198ffd068d74d913aa67206f914714", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/dc198bae00198ffd068d74d913aa67206f914714", "committedDate": "2020-07-31T20:52:59Z", "message": "#2893 Fix new class that used old package for Builders."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87843a0edc82a491aa56bd016b88bfc9dfcc0f91", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/87843a0edc82a491aa56bd016b88bfc9dfcc0f91", "committedDate": "2020-07-31T22:12:23Z", "message": "Merge remote-tracking branch 'upstream/main' into #2893"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTkyMDUz", "url": "https://github.com/DSpace/DSpace/pull/2897#pullrequestreview-460992053", "createdAt": "2020-08-04T16:47:55Z", "commit": {"oid": "87843a0edc82a491aa56bd016b88bfc9dfcc0f91"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1ad520c86e0f8b56a452d22ca5aabfba6d2820a", "author": {"user": null}, "url": "https://github.com/DSpace/DSpace/commit/e1ad520c86e0f8b56a452d22ca5aabfba6d2820a", "committedDate": "2020-08-04T17:08:45Z", "message": "Merge remote-tracking branch 'upstream/main' into #2893"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1532, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}