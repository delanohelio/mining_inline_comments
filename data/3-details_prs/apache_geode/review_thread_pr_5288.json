{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODQwNTc5", "number": 5288, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoxOToyOVrOEINCXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzozMTo1MlrOEINI1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDM3NjYzOnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoxOToyOVrOGoBlOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNDoxNzoxMlrOGo81kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjEzOA==", "bodyText": "Does it need both id and name? Are all the attributes necessary in the rest interface? Rest interface is supposed to be a more simplified/opinionated interface than the xml. It doesn't have to repeat everything that xml object has. Rather only focus on the attributes that users would need to configure most. If having it there would confuse users rather than help them, better not provide it in the rest interface.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444622138", "createdAt": "2020-06-24T03:19:29Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {\n+  public static final String DISK_STORE_CONFIG_ENDPOINT = \"/diskstores\";\n+\n+  @JsonIgnore\n+  private String id;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkzMTczMg==", "bodyText": "We weren't sure what would and would not be used often. If we have someone who can sound off on what to include I'm happy to trim the list of properties and revert to defaults where we don't have them.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444931732", "createdAt": "2020-06-24T14:23:30Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {\n+  public static final String DISK_STORE_CONFIG_ENDPOINT = \"/diskstores\";\n+\n+  @JsonIgnore\n+  private String id;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjEzOA=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTI2MzgxMA==", "bodyText": "What's your use case for needing these rest api? For now I would suggest just expose those attributes that you needed.  It's always easy to add attributes to the config objects", "url": "https://github.com/apache/geode/pull/5288#discussion_r445263810", "createdAt": "2020-06-25T01:49:40Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {\n+  public static final String DISK_STORE_CONFIG_ENDPOINT = \"/diskstores\";\n+\n+  @JsonIgnore\n+  private String id;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjEzOA=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU1MjMwMg==", "bodyText": "We need it for setting up disk-stores in k8s.", "url": "https://github.com/apache/geode/pull/5288#discussion_r445552302", "createdAt": "2020-06-25T13:20:42Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {\n+  public static final String DISK_STORE_CONFIG_ENDPOINT = \"/diskstores\";\n+\n+  @JsonIgnore\n+  private String id;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjEzOA=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU5Mjk3Ng==", "bodyText": "Do you need to configure all the attributes in k8s? I am asking because of what we did for Region config object, we only expose what's critical to configure the region to simplify user experience. I would hope Diskstore would do the same. Maybe talk to Gang to find out what are the most used attributes when configuring diskstore and what are the user's pain point given the current set of options in gfsh", "url": "https://github.com/apache/geode/pull/5288#discussion_r445592976", "createdAt": "2020-06-25T14:17:12Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {\n+  public static final String DISK_STORE_CONFIG_ENDPOINT = \"/diskstores\";\n+\n+  @JsonIgnore\n+  private String id;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjEzOA=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDM3Nzc2OnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskDir.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoyMDowMlrOGoBl2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDoyMjowMlrOGoUaaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjI5Nw==", "bodyText": "would an int/long be better?", "url": "https://github.com/apache/geode/pull/5288#discussion_r444622297", "createdAt": "2020-06-24T03:20:02Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskDir.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.io.Serializable;\n+\n+import org.apache.geode.management.api.JsonSerializable;\n+\n+public class DiskDir implements Serializable, JsonSerializable {\n+  private String name;\n+  private String dirSize;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkzMDY2NA==", "bodyText": "Yes, probably better.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444930664", "createdAt": "2020-06-24T14:22:02Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskDir.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.io.Serializable;\n+\n+import org.apache.geode.management.api.JsonSerializable;\n+\n+public class DiskDir implements Serializable, JsonSerializable {\n+  private String name;\n+  private String dirSize;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMjI5Nw=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDM4NDM4OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/management/internal/configuration/mutators/DiskStoreManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoyNTozMFrOGoBqTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDoyMTo0N1rOGoUZrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMzQzOA==", "bodyText": "I don't think you need the check here. the pipeline should already make sure that there is no existing one that has the same id exists before it's calling this add", "url": "https://github.com/apache/geode/pull/5288#discussion_r444623438", "createdAt": "2020-06-24T03:25:30Z", "author": {"login": "jinmeiliao"}, "path": "geode-core/src/main/java/org/apache/geode/management/internal/configuration/mutators/DiskStoreManager.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.internal.configuration.mutators;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.commons.lang3.StringUtils;\n+\n+import org.apache.geode.cache.configuration.CacheConfig;\n+import org.apache.geode.cache.configuration.DiskStoreType;\n+import org.apache.geode.distributed.ConfigurationPersistenceService;\n+import org.apache.geode.management.configuration.DiskStore;\n+import org.apache.geode.management.internal.configuration.converters.DiskStoreConverter;\n+\n+public class DiskStoreManager extends CacheConfigurationManager<DiskStore> {\n+  private final DiskStoreConverter diskStoreConverter = new DiskStoreConverter();\n+\n+  public DiskStoreManager(ConfigurationPersistenceService service) {\n+    super(service);\n+  }\n+\n+  @Override\n+  public void add(DiskStore config, CacheConfig existing) {\n+    List<DiskStoreType> diskStoreTypes = existing.getDiskStores();\n+    if (diskStoreTypes.stream().noneMatch(diskStoreType -> diskStoreType.getName()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkzMDQ3OA==", "bodyText": "Okay, we'll check if we can drop these checks without side effects.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444930478", "createdAt": "2020-06-24T14:21:47Z", "author": {"login": "jmelchio"}, "path": "geode-core/src/main/java/org/apache/geode/management/internal/configuration/mutators/DiskStoreManager.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.internal.configuration.mutators;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.commons.lang3.StringUtils;\n+\n+import org.apache.geode.cache.configuration.CacheConfig;\n+import org.apache.geode.cache.configuration.DiskStoreType;\n+import org.apache.geode.distributed.ConfigurationPersistenceService;\n+import org.apache.geode.management.configuration.DiskStore;\n+import org.apache.geode.management.internal.configuration.converters.DiskStoreConverter;\n+\n+public class DiskStoreManager extends CacheConfigurationManager<DiskStore> {\n+  private final DiskStoreConverter diskStoreConverter = new DiskStoreConverter();\n+\n+  public DiskStoreManager(ConfigurationPersistenceService service) {\n+    super(service);\n+  }\n+\n+  @Override\n+  public void add(DiskStore config, CacheConfig existing) {\n+    List<DiskStoreType> diskStoreTypes = existing.getDiskStores();\n+    if (diskStoreTypes.stream().noneMatch(diskStoreType -> diskStoreType.getName()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMzQzOA=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDM4NTAxOnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/management/internal/configuration/mutators/DiskStoreManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoyNTo1OVrOGoBqtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzoyNTo1OVrOGoBqtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyMzU0Mw==", "bodyText": "same as add, no need to check", "url": "https://github.com/apache/geode/pull/5288#discussion_r444623543", "createdAt": "2020-06-24T03:25:59Z", "author": {"login": "jinmeiliao"}, "path": "geode-core/src/main/java/org/apache/geode/management/internal/configuration/mutators/DiskStoreManager.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.internal.configuration.mutators;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.commons.lang3.StringUtils;\n+\n+import org.apache.geode.cache.configuration.CacheConfig;\n+import org.apache.geode.cache.configuration.DiskStoreType;\n+import org.apache.geode.distributed.ConfigurationPersistenceService;\n+import org.apache.geode.management.configuration.DiskStore;\n+import org.apache.geode.management.internal.configuration.converters.DiskStoreConverter;\n+\n+public class DiskStoreManager extends CacheConfigurationManager<DiskStore> {\n+  private final DiskStoreConverter diskStoreConverter = new DiskStoreConverter();\n+\n+  public DiskStoreManager(ConfigurationPersistenceService service) {\n+    super(service);\n+  }\n+\n+  @Override\n+  public void add(DiskStore config, CacheConfig existing) {\n+    List<DiskStoreType> diskStoreTypes = existing.getDiskStores();\n+    if (diskStoreTypes.stream().noneMatch(diskStoreType -> diskStoreType.getName()\n+        .equals(config.getName()))) {\n+      diskStoreTypes.add(diskStoreConverter.fromConfigObject(config));\n+    }\n+  }\n+\n+  @Override\n+  public void update(DiskStore config, CacheConfig existing) {\n+    throw new IllegalStateException(\"Not implemented\");\n+  }\n+\n+  @Override\n+  public void delete(DiskStore config, CacheConfig existing) {\n+    existing.getDiskStores().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDM5MzE4OnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzozMTo1MlrOGoBvkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzo0MToyM1rOGocghg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng==", "bodyText": "If DiskStoreInfo is an empty class (no runtime info to gather for this configuration object), then you can declare this DiskStore as public class DiskStore extends GroupableConfiguration<RuntimeInfo>. This way, for get/list, the cms will not even issue the functions to the servers to try to retrieve an empty object.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444624786", "createdAt": "2020-06-24T03:31:52Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyODk3NA==", "bodyText": "In its current configuration it does list the servers to which the DiskStore has been applied. I'll try and see if this continues when we roll it into the DiskStore class. If that is the case we can drop the DiskStoreInfo class.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444928974", "createdAt": "2020-06-24T14:19:50Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3MzcwMQ==", "bodyText": "It appears the DiskStoreRealizer needs a concrete implementation of RuntimeInfo.", "url": "https://github.com/apache/geode/pull/5288#discussion_r444973701", "createdAt": "2020-06-24T15:18:21Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk4OTg3MA==", "bodyText": "If it returns null in the get method?", "url": "https://github.com/apache/geode/pull/5288#discussion_r444989870", "createdAt": "2020-06-24T15:41:12Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0NTUyNg==", "bodyText": "That would work but then we wouldn't even get a list of machines where the disk-stores live at run time.", "url": "https://github.com/apache/geode/pull/5288#discussion_r445045526", "createdAt": "2020-06-24T17:09:45Z", "author": {"login": "jmelchio"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA2MzMwMg==", "bodyText": "Ah, I see, you don't need further diskstore info on each server, but you do need the server id. I guess you can leave it as is.", "url": "https://github.com/apache/geode/pull/5288#discussion_r445063302", "createdAt": "2020-06-24T17:41:23Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/configuration/DiskStore.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.geode.management.configuration;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnore;\n+\n+import org.apache.geode.annotations.Experimental;\n+import org.apache.geode.management.runtime.DiskStoreInfo;\n+\n+@Experimental\n+public class DiskStore extends GroupableConfiguration<DiskStoreInfo> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNDc4Ng=="}, "originalCommit": {"oid": "53e61e15456205343e597985d9e84cb59fe35900"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3864, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}