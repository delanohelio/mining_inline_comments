{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MjA0MTA2", "number": 5462, "title": "GEODE-8435: restore ability to connect gfsh by serialization version", "bodyText": "This used to work until recently.\nGeode releases were never impacted, but loss of this feature is a nuisance for developer builds that don't typically pass a product version, leading to unintuitive errors like Cannot use a 0.0.0 gfsh client to connect to a 0.0.0 cluster\nSerialization version is the safest way to check gfsh compatibility, since in general it is unwise to make assumptions about product version because it is not intrinsic to Geode.\nThis PR also codifies forward and backward compatibility to be based on serialization major version, i.e. gfsh 1.x will not promise future compatibility with Geode 2.x, but gfsh 2.x would presumably support backward compatibility with a 1.10 or later cluster (we can of course change this if Geode ever reaches 2.0 and we do decide to break backward compatibility)\nThis PR restores the serialization version check, which was lost during GEODE-8331.  However, serialization version was only exposed in Geode 1.12, and since we are now interoperable back to Geode 1.10, the product version range check remains a necessary fallback iff remote serialization version is unavailable.", "createdAt": "2020-08-18T05:05:52Z", "url": "https://github.com/apache/geode/pull/5462", "merged": true, "mergeCommit": {"oid": "9c31b21d1c23c52f1c047eed696d1db84390aa28"}, "closed": true, "closedAt": "2020-08-21T16:32:07Z", "author": {"login": "onichols-pivotal"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc__tSoAH2gAyNDY5MjA0MTA2OmIzNmU0YzBmMWIzNjI1NGVlYzZhNDI5MzRjMGJmZTBjZjRiMDlmOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBHTH7gFqTQ3MjYxNjU4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b36e4c0f1b36254eec6a42934c0bfe0cf4b09f9d", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/b36e4c0f1b36254eec6a42934c0bfe0cf4b09f9d", "committedDate": "2020-08-18T04:56:48Z", "message": "GEODE-8435: restore ability to connect gfsh to any cluster with matching serialization version, regardless of product version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f99ab789269149b37a3b8861566521065144273f", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/f99ab789269149b37a3b8861566521065144273f", "committedDate": "2020-08-18T07:45:45Z", "message": "do the more expensive check only if the range check failed, add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NjMwODkx", "url": "https://github.com/apache/geode/pull/5462#pullrequestreview-469630891", "createdAt": "2020-08-18T16:35:11Z", "commit": {"oid": "f99ab789269149b37a3b8861566521065144273f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNjozNToxMVrOHCcuOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzoyMzoxNVrOHCekkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMyOTc4NA==", "bodyText": "Intuitively, it seems that this logic should be tried first and that the alternative (examining the marketing version) should be the fallback.\nAnother issue with this block of code is that the exception is silently ignored. At a minimum we need a clear comment explaining where the exception comes from since none of the method signatures inside the block have throws clauses. Seems like we could eliminate this try-catch entirely.\nAlso, it would aid in maintenance if the code on lines 171-197 was extracted into a method. This would simplify ConnectCommand.connect() and would give us the opportunity to name the new method, hide variables, etc. By the way, the comment at line 171 lies:\n    // since 1.14, only allow gfsh to connect to cluster that's older than 1.10\n\nShould say \"newer\" not \"older\".\nUm also, the logic on line 178-179:\n      if (versionComponent(remoteVersion, VERSION_MAJOR).equals(\"1\") && minorVersion >= 10 ||\n          versionComponent(remoteVersion, VERSION_MAJOR).equals(\"9\") && minorVersion >= 9) {\n\nNeeds a gating condition that checks the product name so that these version checks only succeed for Geode and GemFire respectively.", "url": "https://github.com/apache/geode/pull/5462#discussion_r472329784", "createdAt": "2020-08-18T16:35:11Z", "author": {"login": "Bill"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -186,6 +186,16 @@ public ResultModel connect(\n       gfsh.logInfo(\"failed to get the the remote version.\", ex);\n     }\n \n+    // fallback: see if serialization versions matches (Geode 1.12 or later cluster)\n+    try {\n+      String gfshGeodeSerializationVersion = gfsh.getGeodeSerializationVersion();\n+      String remoteGeodeSerializationVersion = invoker.getRemoteGeodeSerializationVersion();\n+      if (gfshGeodeSerializationVersion.equals(remoteGeodeSerializationVersion)) {\n+        return result;\n+      }\n+    } catch (Exception ignore) {\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99ab789269149b37a3b8861566521065144273f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM2MDA4Mw==", "bodyText": "This is my understanding of the equivalence classes for testing are (rsv = remote serialization version read via JMX, rmv = remote marketing version read via JMX)\nrsv >= 1.12 && rmv == dont-care\n   compatible, covered by connectToManagerBySerializationVersion()\nrsv < 1.12\n   impossible\nrsv unknown\n   rmv >= 1.10\n     compatible, covered by connectToManagerOlderThan1_10() sic\n   rmv < 1.10\n      incompatible\n   rmv unknown\n      incompatible\n\nBy the way connectToManagerOlderThan1_10() is mis-named: it's actually connecting to version 1.10\u2014not a version older than 1.10. Please fix this name.\nBut then I also see these tests:\nconnectToManagerWithDifferentMajorVersion()\nconnectToManagerWithDifferentMinorVersion()\n\nSo major and minor versions seem to be important too. But only for certain version ranges? Actually ConnectCommand does not, in general respect semver at all. I think those tests need to be removed.", "url": "https://github.com/apache/geode/pull/5462#discussion_r472360083", "createdAt": "2020-08-18T17:23:15Z", "author": {"login": "Bill"}, "path": "geode-gfsh/src/test/java/org/apache/geode/management/internal/cli/commands/ConnectCommandTest.java", "diffHunk": "@@ -417,4 +417,21 @@ public void connectToManagerBefore1_10() {\n         .statusIsError()\n         .containsOutput(\"Cannot use a 1.14 gfsh client to connect to a 1.9 cluster\");\n   }\n+\n+  @Test\n+  public void connectToManagerBySerializationVersion() {\n+    when(gfsh.getVersion()).thenReturn(\"0.0.0\");\n+    when(gfsh.getGeodeSerializationVersion()).thenReturn(\"1.14.0\");\n+    when(operationInvoker.getRemoteVersion()).thenReturn(\"0.0.0\");\n+    when(operationInvoker.getRemoteGeodeSerializationVersion()).thenReturn(\"1.14.0\");\n+    when(operationInvoker.isConnected()).thenReturn(true);\n+\n+    ResultModel resultModel = new ResultModel();\n+    when(connectCommand.jmxConnect(any(), anyBoolean(), any(), any(), anyBoolean()))\n+        .thenReturn(resultModel);\n+\n+    gfshParserRule.executeAndAssertThat(connectCommand, \"connect --locator=localhost:4040\")\n+        .statusIsSuccess()\n+        .doesNotContainOutput(\"Cannot use a 0.0.0 gfsh client to connect to a 0.0.0 cluster\");\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99ab789269149b37a3b8861566521065144273f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9b982acc4c8ea91aeca28f664a8b6e52841081a", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/c9b982acc4c8ea91aeca28f664a8b6e52841081a", "committedDate": "2020-08-19T00:38:09Z", "message": "incorporate PR feedback and formalize the contract that we will promise future compatibility within the same major"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTMxNzY0", "url": "https://github.com/apache/geode/pull/5462#pullrequestreview-470531764", "createdAt": "2020-08-19T14:44:41Z", "commit": {"oid": "c9b982acc4c8ea91aeca28f664a8b6e52841081a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNDo0NDo0MlrOHDK1RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNDo0NDo0MlrOHDK1RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA4NTI1Mw==", "bodyText": "I think we should try to get the geodeSeriliazationVersion first since that's introduced later than the remoteVersion. If we can't get the remoteVersion, we definitely would fail at getting the remoteGeodeSerilizationVersion", "url": "https://github.com/apache/geode/pull/5462#discussion_r473085253", "createdAt": "2020-08-19T14:44:42Z", "author": {"login": "jinmeiliao"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -168,26 +168,30 @@ public ResultModel connect(\n       return result;\n     }\n \n-    // since 1.14, only allow gfsh to connect to cluster that's older than 1.10\n     String remoteVersion = null;\n-    String gfshVersion = gfsh.getVersion();\n+    String remoteGeodeSerializationVersion = null;\n     try {\n       remoteVersion = invoker.getRemoteVersion();\n-      int minorVersion = Integer.parseInt(versionComponent(remoteVersion, VERSION_MINOR));\n-      if (versionComponent(remoteVersion, VERSION_MAJOR).equals(\"1\") && minorVersion >= 10 ||\n-          versionComponent(remoteVersion, VERSION_MAJOR).equals(\"9\") && minorVersion >= 9) {\n-        InfoResultModel versionInfo = result.addInfo(\"versionInfo\");\n-        versionInfo.addLine(\"You are connected to a cluster of version: \" + remoteVersion);\n-        return result;\n+      try {\n+        remoteGeodeSerializationVersion = invoker.getRemoteGeodeSerializationVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b982acc4c8ea91aeca28f664a8b6e52841081a"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNjY4NDUw", "url": "https://github.com/apache/geode/pull/5462#pullrequestreview-470668450", "createdAt": "2020-08-19T17:00:51Z", "commit": {"oid": "c9b982acc4c8ea91aeca28f664a8b6e52841081a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzowMDo1MVrOHDQ-Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzowMDo1MVrOHDQ-Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE4NTgzMQ==", "bodyText": "Maybe call this method shouldConnect?\nYour logic is correct, but maybe to make this more readable and have the code reflect our train of thought better, you can consider this logic flow:\n// client should connect to cluster version newer than 1.10\nboolean shouldConnect (String ourSerializationVersion, String remoteVersion, String remoteSerializationVersion) {\n  if (remoteVersion == null) { // pre 1.5\n     return false;\n  }\n  // post 1.12, this should always return true, since it's definitely after 1.10.  I think this should fix the hydra test \n  // not sure if we need the ourSerilizationVersion to make this decision\n  if (remoteSerializationVersion !=null) {\n      return true;\n  }\n  // after 1.5 but before 1.12, use remoteVersion to deteremin if it's after 1.10 or 9.9\n  ......\n\n}", "url": "https://github.com/apache/geode/pull/5462#discussion_r473185831", "createdAt": "2020-08-19T17:00:51Z", "author": {"login": "jinmeiliao"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -197,6 +201,32 @@ public ResultModel connect(\n     }\n   }\n \n+  /**\n+   * because remote serialization version was not exposed until 1.12, but we are compatible back to\n+   * 1.10, then any 1.x remote serialization version implies compatibility; otherwise make some\n+   * narrow assumptions about product version numbers known to be associated with 1.10/1.11 to fill\n+   * the gap.\n+   *\n+   * It seems reasonable to commit to future compatibility with any future Geode of the same major,\n+   * but we should probably draw the line somewhere and not promise that gfsh 1.x will be eternally\n+   * compatible with Geode 2.x and later\n+   */\n+  static boolean isCompatible(String ourSerializationVersion, String remoteVersion,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b982acc4c8ea91aeca28f664a8b6e52841081a"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3d9b227af2ed0826fe4dbc1b8543ba1104dbab", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/1d3d9b227af2ed0826fe4dbc1b8543ba1104dbab", "committedDate": "2020-08-19T22:29:06Z", "message": "incorporate review feedback to make shouldConnect more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8680f1eb57bbc9db43f2d373b970b134c9585995", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/8680f1eb57bbc9db43f2d373b970b134c9585995", "committedDate": "2020-08-19T22:40:07Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc", "author": {"user": {"login": "onichols-pivotal", "name": "Owen Nichols"}}, "url": "https://github.com/apache/geode/commit/478fc0ba7dc00c04ddc28d6a115ac7efefc88adc", "committedDate": "2020-08-19T22:48:58Z", "message": "test bad response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDM4NTUw", "url": "https://github.com/apache/geode/pull/5462#pullrequestreview-471038550", "createdAt": "2020-08-19T23:52:02Z", "commit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMzo1MjowMlrOHDg9nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMzo1MjowMlrOHDg9nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzQ0NzgzNw==", "bodyText": "This is fine, but if you just call the invoker method directly, and use gfsh.logToFile in the catch block, things should be fine too. The difference is that user won't see this \"failed to get the remote version\" message when they connect to pre-1.5 cluster, but they would still see \"you can't use a xxx version gfsh to connect to this cluster\"", "url": "https://github.com/apache/geode/pull/5462#discussion_r473447837", "createdAt": "2020-08-19T23:52:02Z", "author": {"login": "jinmeiliao"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -168,26 +168,27 @@ public ResultModel connect(\n       return result;\n     }\n \n-    // since 1.14, only allow gfsh to connect to cluster that's older than 1.10\n     String remoteVersion = null;\n-    String gfshVersion = gfsh.getVersion();\n+    String remoteGeodeSerializationVersion = null;\n     try {\n       remoteVersion = invoker.getRemoteVersion();\n-      int minorVersion = Integer.parseInt(versionComponent(remoteVersion, VERSION_MINOR));\n-      if (versionComponent(remoteVersion, VERSION_MAJOR).equals(\"1\") && minorVersion >= 10 ||\n-          versionComponent(remoteVersion, VERSION_MAJOR).equals(\"9\") && minorVersion >= 9) {\n-        InfoResultModel versionInfo = result.addInfo(\"versionInfo\");\n-        versionInfo.addLine(\"You are connected to a cluster of version: \" + remoteVersion);\n-        return result;\n-      }\n+      remoteGeodeSerializationVersion = getRemoteSerializationVersion(invoker);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNjE2NTg4", "url": "https://github.com/apache/geode/pull/5462#pullrequestreview-472616588", "createdAt": "2020-08-21T16:09:55Z", "commit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNjowOTo1NVrOHEzDZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNjoxODo1NFrOHEzVWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc5MjgwNw==", "bodyText": "It's great that we now have a method that encodes the logic but does no I/O!\nIt's a minor issue that this method requires the caller to always (try to) retrieve the remoteVersion even though, if remoteSerializationVersion was retrieved then remoteVersion is not necessary.\nThis could be addressed by passing a Supplier<String> remoteVersionSupplier. On the other hand it's not a big deal and this PR is approved without that change.", "url": "https://github.com/apache/geode/pull/5462#discussion_r474792807", "createdAt": "2020-08-21T16:09:55Z", "author": {"login": "Bill"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -197,9 +198,56 @@ public ResultModel connect(\n     }\n   }\n \n-  private static String versionComponent(String version, int component) {\n+  private static String getRemoteSerializationVersion(OperationInvoker invoker) {\n+    try {\n+      return invoker.getRemoteGeodeSerializationVersion();\n+    } catch (Exception ignore) {\n+      // expected to fail for Geode cluster older than 1.12\n+      return null;\n+    }\n+  }\n+\n+  /**\n+   * because remote serialization version was not exposed until 1.12, but we are compatible back to\n+   * 1.10, then any 1.x remote serialization version implies compatibility; otherwise make some\n+   * narrow assumptions about product version numbers known to be associated with 1.10/1.11 to fill\n+   * the gap.\n+   *\n+   * It seems reasonable to commit to future compatibility with any future Geode of the same major,\n+   * but we should probably draw the line somewhere and not promise that gfsh 1.x will be eternally\n+   * compatible with Geode 2.x and later\n+   */\n+  static boolean shouldConnect(String ourSerializationVersion, String remoteVersion,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc5MzkwNw==", "bodyText": "This method would be easier to analyze if this check on remoteVersion was moved down with the other checks on remoteVersion (after the checks on remoteSerializationVersion.\nNotice the form of the check on remoteSerializationVersion that follows. There's a null-check guarding it. Doing the same for remoteVersion would make the checks symmetrical.\nIt's acceptable as-is though.", "url": "https://github.com/apache/geode/pull/5462#discussion_r474793907", "createdAt": "2020-08-21T16:12:09Z", "author": {"login": "Bill"}, "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/commands/ConnectCommand.java", "diffHunk": "@@ -197,9 +198,56 @@ public ResultModel connect(\n     }\n   }\n \n-  private static String versionComponent(String version, int component) {\n+  private static String getRemoteSerializationVersion(OperationInvoker invoker) {\n+    try {\n+      return invoker.getRemoteGeodeSerializationVersion();\n+    } catch (Exception ignore) {\n+      // expected to fail for Geode cluster older than 1.12\n+      return null;\n+    }\n+  }\n+\n+  /**\n+   * because remote serialization version was not exposed until 1.12, but we are compatible back to\n+   * 1.10, then any 1.x remote serialization version implies compatibility; otherwise make some\n+   * narrow assumptions about product version numbers known to be associated with 1.10/1.11 to fill\n+   * the gap.\n+   *\n+   * It seems reasonable to commit to future compatibility with any future Geode of the same major,\n+   * but we should probably draw the line somewhere and not promise that gfsh 1.x will be eternally\n+   * compatible with Geode 2.x and later\n+   */\n+  static boolean shouldConnect(String ourSerializationVersion, String remoteVersion,\n+      String remoteSerializationVersion) {\n+    // pre 1.5\n+    if (remoteVersion == null) {\n+      return false;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc5NzQwMQ==", "bodyText": "Big improvement in these test methods!\nNow that they are setting \"all the things\" there is an opportunity to make these test cases more understandable by factoring out the when-then statements into a separate method. That would take away the visual noise and allow maintainers to see more clearly what each test case is really doing\u2014similar to the tests for ConnectCommand.shouldConnect() below!\nThese methods work though so they are acceptable as-is.", "url": "https://github.com/apache/geode/pull/5462#discussion_r474797401", "createdAt": "2020-08-21T16:18:54Z", "author": {"login": "Bill"}, "path": "geode-gfsh/src/test/java/org/apache/geode/management/internal/cli/commands/ConnectCommandTest.java", "diffHunk": "@@ -362,28 +362,40 @@ public void resolveSslProperties() {\n   }\n \n   @Test\n-  public void connectToManagerWithDifferentMajorVersion() {\n+  public void connectToManagerWithOlderMajorVersionAllowed() {\n     when(gfsh.getVersion()).thenReturn(\"2.2\");\n-    when(operationInvoker.getRemoteVersion()).thenReturn(\"1.2\");\n+    when(operationInvoker.getRemoteVersion()).thenReturn(\"1.10\");\n+    when(gfsh.getGeodeSerializationVersion()).thenReturn(\"2.2\");\n+    when(operationInvoker.getRemoteGeodeSerializationVersion()).thenReturn(\"1.10\");\n     when(operationInvoker.isConnected()).thenReturn(true);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "478fc0ba7dc00c04ddc28d6a115ac7efefc88adc"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4146, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}