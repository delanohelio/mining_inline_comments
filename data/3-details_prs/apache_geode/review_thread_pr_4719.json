{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MjIxNDky", "number": 4719, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOTowODo0OVrODi0PAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyNzo1MFrODi0n0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODMzOTg1OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/PoolImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOTowODo0OVrOFuRkxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDoxODo1MlrOFutO6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2Njc1OQ==", "bodyText": "The other acquireConnection() method uses a hard-coded timeout of 45000L, though I don't know why that is.  Why does this version use 15000L? We should remove the \"test hook\" comment because this method is used in GatewaySenderEventRemoteDispatcher.initializeConnection().", "url": "https://github.com/apache/geode/pull/4719#discussion_r384066759", "createdAt": "2020-02-25T19:08:49Z", "author": {"login": "bschuchardt"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/PoolImpl.java", "diffHunk": "@@ -921,7 +921,7 @@ public void returnConnection(Connection conn) {\n    * Test hook that acquires and returns a connection from the pool with a given ServerLocation.\n    */\n   public Connection acquireConnection(ServerLocation loc) {\n-    return manager.borrowConnection(loc, false);\n+    return manager.borrowConnection(loc, 15000L, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxOTkxMg==", "bodyText": "Thanx for comments.\nI find that previous code contained this value 15000L (which is removed with GEODE-6535).", "url": "https://github.com/apache/geode/pull/4719#discussion_r384519912", "createdAt": "2020-02-26T14:18:52Z", "author": {"login": "mivanac"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/PoolImpl.java", "diffHunk": "@@ -921,7 +921,7 @@ public void returnConnection(Connection conn) {\n    * Test hook that acquires and returns a connection from the pool with a given ServerLocation.\n    */\n   public Connection acquireConnection(ServerLocation loc) {\n-    return manager.borrowConnection(loc, false);\n+    return manager.borrowConnection(loc, 15000L, false);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2Njc1OQ=="}, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODM3NzM5OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyMDoyOVrOFuR8SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDoxMDozM1rOFus6aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3Mjc3Nw==", "bodyText": "I don't see where this is throwing ServerOperationException.  It throws its superclass, ServerConnectivityException.", "url": "https://github.com/apache/geode/pull/4719#discussion_r384072777", "createdAt": "2020-02-25T19:20:29Z", "author": {"login": "bschuchardt"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "diffHunk": "@@ -308,24 +308,49 @@ public Connection borrowConnection(long acquireTimeout)\n    * destroyed when returned to the pool.\n    */\n   @Override\n-  public PooledConnection borrowConnection(ServerLocation server,\n-      boolean onlyUseExistingCnx) throws AllConnectionsInUseException, NoAvailableServersException {\n+  public PooledConnection borrowConnection(ServerLocation server, long acquireTimeout,\n+      boolean onlyUseExistingCnx)\n+      throws AllConnectionsInUseException, NoAvailableServersException, ServerOperationException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxNDY2NA==", "bodyText": "Updated", "url": "https://github.com/apache/geode/pull/4719#discussion_r384514664", "createdAt": "2020-02-26T14:10:33Z", "author": {"login": "mivanac"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "diffHunk": "@@ -308,24 +308,49 @@ public Connection borrowConnection(long acquireTimeout)\n    * destroyed when returned to the pool.\n    */\n   @Override\n-  public PooledConnection borrowConnection(ServerLocation server,\n-      boolean onlyUseExistingCnx) throws AllConnectionsInUseException, NoAvailableServersException {\n+  public PooledConnection borrowConnection(ServerLocation server, long acquireTimeout,\n+      boolean onlyUseExistingCnx)\n+      throws AllConnectionsInUseException, NoAvailableServersException, ServerOperationException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3Mjc3Nw=="}, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODM5Mzc2OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyNToxM1rOFuSGTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyNToxM1rOFuSGTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NTM0MQ==", "bodyText": "If onlyUseExistingCnx is true then the acquireTimeout parameter is ignored.", "url": "https://github.com/apache/geode/pull/4719#discussion_r384075341", "createdAt": "2020-02-25T19:25:13Z", "author": {"login": "bschuchardt"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManager.java", "diffHunk": "@@ -56,6 +56,7 @@ Connection borrowConnection(long aquireTimeout)\n    * no connection is available.\n    *\n    * @param server The server the connection needs to be to.\n+   * @param aquireTimeout The amount of time to wait for a connection to become available.\n    * @param onlyUseExistingCnx if true, will not create a new connection if none are available.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODQwMzM5OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyNzo1MFrOFuSMCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDoxODoyMlrOFutNyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NjgxMA==", "bodyText": "We should get rid of the javadoc on this method.  It's hiding a more complete javadoc in the ConnectionManager interface.", "url": "https://github.com/apache/geode/pull/4719#discussion_r384076810", "createdAt": "2020-02-25T19:27:50Z", "author": {"login": "bschuchardt"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "diffHunk": "@@ -308,24 +308,49 @@ public Connection borrowConnection(long acquireTimeout)\n    * destroyed when returned to the pool.\n    */\n   @Override\n-  public PooledConnection borrowConnection(ServerLocation server,\n-      boolean onlyUseExistingCnx) throws AllConnectionsInUseException, NoAvailableServersException {\n+  public PooledConnection borrowConnection(ServerLocation server, long acquireTimeout,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxOTYyNg==", "bodyText": "Updated", "url": "https://github.com/apache/geode/pull/4719#discussion_r384519626", "createdAt": "2020-02-26T14:18:22Z", "author": {"login": "mivanac"}, "path": "geode-core/src/main/java/org/apache/geode/cache/client/internal/pooling/ConnectionManagerImpl.java", "diffHunk": "@@ -308,24 +308,49 @@ public Connection borrowConnection(long acquireTimeout)\n    * destroyed when returned to the pool.\n    */\n   @Override\n-  public PooledConnection borrowConnection(ServerLocation server,\n-      boolean onlyUseExistingCnx) throws AllConnectionsInUseException, NoAvailableServersException {\n+  public PooledConnection borrowConnection(ServerLocation server, long acquireTimeout,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NjgxMA=="}, "originalCommit": {"oid": "56729a9f453009f2bc46e275ffeb85944a997279"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3780, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}