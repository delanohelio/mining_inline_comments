{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNzA3ODE0", "number": 5473, "title": "GEODE-7864: Fix some LGTM alerts and suppress some false positives", "bodyText": "Thank you for submitting a contribution to Apache Geode.\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n\n Is there a JIRA ticket associated with this PR? Is it referenced in the commit message?\n\n\n Has your PR been rebased against the latest commit within the target branch (typically develop)?\n\n\n Is your initial contribution a single, squashed commit?\n\n\n Does gradlew build run cleanly?\n\n\n[N/A] Have you written or updated unit tests to verify your changes?\n\n\n[N/A] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under ASF 2.0?\n\n\nNote:\nPlease ensure that once the PR is submitted, check Concourse for build issues and\nsubmit an update to your PR as soon as possible. If you need help, please send an\nemail to dev@geode.apache.org.", "createdAt": "2020-08-24T19:04:05Z", "url": "https://github.com/apache/geode/pull/5473", "merged": true, "mergeCommit": {"oid": "93efb8051f8f6803d610fe86a8c68c8bfd18a27c"}, "closed": true, "closedAt": "2020-08-27T21:16:12Z", "author": {"login": "DonalEvans"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCHUZhAH2gAyNDcyNzA3ODE0OjNmMTY0MGQ5ZThhMDgwZTMxNDA0MjA5ZWQ4NjhiMGYzMmJhYzk3OGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCiwEzAH2gAyNDcyNzA3ODE0Ojk1NGRjZGE2ZTM2OWQwMDNlOGY4YzdlMmU1Nzk4Y2IyZmRhNDc5ODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3f1640d9e8a080e31404209ed868b0f32bac978e", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/3f1640d9e8a080e31404209ed868b0f32bac978e", "committedDate": "2020-08-24T18:56:42Z", "message": "GEODE-7864: Fix some LGTM alerts and suppress some false positives\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd99d158baaae2d0af1b565ce7c37f7cedf29320", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/cd99d158baaae2d0af1b565ce7c37f7cedf29320", "committedDate": "2020-08-24T18:56:43Z", "message": "Fix dereferenced variable may be null alerts in Oplog.java\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "577ba6586beb3ba7673a68828f5bd5308ac082f8", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/577ba6586beb3ba7673a68828f5bd5308ac082f8", "committedDate": "2020-08-24T18:56:43Z", "message": "Fixed dereferenced variable may be null alerts in PartitionedRegion\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e67db75dc053245ffa4aa26275f00ddce505762", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/8e67db75dc053245ffa4aa26275f00ddce505762", "committedDate": "2020-08-24T18:56:43Z", "message": "More dereferenced variable may be null fixes\n\n- InitialImageOperation\n- GMSMembership\n- ParallelGatewaySenderQueue\n- DiskStoreImpl\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/45f04b8da7c3071352c3805af465896cf13406f3", "committedDate": "2020-08-24T18:56:43Z", "message": "Fix alerts in LocalRegion and HARegionQueue\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0OTIwODYz", "url": "https://github.com/apache/geode/pull/5473#pullrequestreview-474920863", "createdAt": "2020-08-25T21:19:25Z", "commit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMToxOToyNlrOHGqI-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMTozMDozNlrOHGqxBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc0MzkyOQ==", "bodyText": "Did you decrease protection here?", "url": "https://github.com/apache/geode/pull/5473#discussion_r476743929", "createdAt": "2020-08-25T21:19:26Z", "author": {"login": "mhansonp"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/Oplog.java", "diffHunk": "@@ -3583,7 +3597,7 @@ private void basicCreate(DiskRegion dr, DiskEntry entry, ValueWrapper value, byt\n             logger.trace(LogMarker.PERSIST_WRITES_VERBOSE,\n                 \"basicCreate: id=<{}> key=<{}> valueOffset={} userBits={} valueLen={} valueBytes={} drId={} versionTag={} oplog#{}\",\n                 abs(id.getKeyId()), entry.getKey(), startPosForSynchOp, userBits,\n-                (value != null ? value.getLength() : 0), value.getBytesAsString(), dr.getId(), tag,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3"}, "originalPosition": 287}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc0OTQ3Nw==", "bodyText": "Is the first part of the test required? \"if (!olf.RAFClosed\" It sits below an assert that in order to pass must be true.", "url": "https://github.com/apache/geode/pull/5473#discussion_r476749477", "createdAt": "2020-08-25T21:25:28Z", "author": {"login": "mhansonp"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/Oplog.java", "diffHunk": "@@ -5653,7 +5667,7 @@ private void deleteFile(final OplogFile olf) {\n       if (!olf.f.exists())\n         return;\n       assert olf.RAFClosed;\n-      if (!olf.RAFClosed || olf.raf != null) {\n+      if (!olf.RAFClosed && olf.raf != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3"}, "originalPosition": 297}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NDE4Mw==", "bodyText": "Is there a reason you reduced protection after adding it in elsewhere?", "url": "https://github.com/apache/geode/pull/5473#discussion_r476754183", "createdAt": "2020-08-25T21:30:36Z", "author": {"login": "mhansonp"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/PartitionedRegion.java", "diffHunk": "@@ -2641,9 +2640,7 @@ private VersionedObjectList sendMsgByBucket(final Integer bucketId, PutAllPRMess\n             retryTime.waitToRetryNode();\n           }\n           event.setPossibleDuplicate(true);\n-          if (prMsg != null) {\n-            prMsg.setPossibleDuplicate(true);\n-          }\n+          prMsg.setPossibleDuplicate(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0OTI5NTMy", "url": "https://github.com/apache/geode/pull/5473#pullrequestreview-474929532", "createdAt": "2020-08-25T21:34:26Z", "commit": {"oid": "45f04b8da7c3071352c3805af465896cf13406f3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d7674902f9f77dc66d18a6c3d5c711e7ab30b33", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/5d7674902f9f77dc66d18a6c3d5c711e7ab30b33", "committedDate": "2020-08-26T00:01:07Z", "message": "Remove redundant check in Oplog.java\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MDY0MDkx", "url": "https://github.com/apache/geode/pull/5473#pullrequestreview-475064091", "createdAt": "2020-08-26T00:03:14Z", "commit": {"oid": "5d7674902f9f77dc66d18a6c3d5c711e7ab30b33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MDY3NjM3", "url": "https://github.com/apache/geode/pull/5473#pullrequestreview-475067637", "createdAt": "2020-08-26T00:14:37Z", "commit": {"oid": "5d7674902f9f77dc66d18a6c3d5c711e7ab30b33"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwMDoxNDozN1rOHGzzlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwMDoxNDozN1rOHGzzlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjkwMjI5Mg==", "bodyText": "Since lgtm is not a \"normal\" warning to suppress, it may be worth explaining this somewhere why we are suppressing it (rather than fixing it).  Also it seems like we're using both @SuppressWarnings(\"lgtm[]) and comments // lgtm[] should be using one consistently or is there certain use cases that require one or the other?", "url": "https://github.com/apache/geode/pull/5473#discussion_r476902292", "createdAt": "2020-08-26T00:14:37Z", "author": {"login": "moleske"}, "path": "geode-core/src/main/java/org/apache/geode/cache/query/internal/NullToken.java", "diffHunk": "@@ -33,6 +33,7 @@\n  */\n public class NullToken implements DataSerializableFixedID, Comparable {\n \n+  @SuppressWarnings(\"lgtm[java/useless-null-check]\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d7674902f9f77dc66d18a6c3d5c711e7ab30b33"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "954dcda6e369d003e8f8c7e2e5798cb2fda47989", "author": {"user": {"login": "DonalEvans", "name": "Donal Evans"}}, "url": "https://github.com/apache/geode/commit/954dcda6e369d003e8f8c7e2e5798cb2fda47989", "committedDate": "2020-08-26T02:54:22Z", "message": "Add explanatory comments for LGTM suppressions\n\nAuthored-by: Donal Evans <doevans@vmware.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4162, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}