{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjMyNzYx", "number": 4582, "title": "GEODE-7686: Update the vMotion recommendations in the User Guide", "bodyText": "Removed some blanket prohibitions.\nAcknowledged that vMotion migration introduces a performance hit, but it's temporary.\nRecommended that users conduct tests to evaluate the impacts on their specific configurations.", "createdAt": "2020-01-10T21:40:31Z", "url": "https://github.com/apache/geode/pull/4582", "merged": true, "mergeCommit": {"oid": "ec4fb9e303cdf45cef87d4bb44d77f37e38c2b6d"}, "closed": true, "closedAt": "2020-01-14T19:05:43Z", "author": {"login": "davebarnes97"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5FjF2AH2gAyMzYxNjMyNzYxOjA5YWQyY2ZiODEyYTY4Yzg4ODE3MTA5MGQ5NWVlYmI1ZjFhYzI4ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6Hj8eAFqTM0MjI2MDk5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09ad2cfb812a68c888171090d95eebb5f1ac28fa", "author": {"user": {"login": "davebarnes97", "name": "Dave Barnes"}}, "url": "https://github.com/apache/geode/commit/09ad2cfb812a68c888171090d95eebb5f1ac28fa", "committedDate": "2020-01-10T21:36:28Z", "message": "GEODE-7686: Update the vMotion recommendations in the User Guide based on recent understandings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjE5MDUw", "url": "https://github.com/apache/geode/pull/4582#pullrequestreview-342219050", "createdAt": "2020-01-14T00:00:18Z", "commit": {"oid": "09ad2cfb812a68c888171090d95eebb5f1ac28fa"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMDowMDoxOFrOFdIgVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMDowMTo0OVrOFdIh1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA5MjM3NQ==", "bodyText": "Lowercase \"large receive offloads\" here.", "url": "https://github.com/apache/geode/pull/4582#discussion_r366092375", "createdAt": "2020-01-14T00:00:18Z", "author": {"login": "joeymcallister"}, "path": "geode-docs/managing/monitor_tune/performance_on_vsphere.html.md.erb", "diffHunk": "@@ -70,23 +70,27 @@ These guidelines help you reduce latency.\n \n     If you restart the ESXi host, the above configuration must be reapplied.\n \n+\n     **Note:**\n-    Disabling interrupt coalescing can reduce latency in virtual machines; however, it can impact performance and cause higher CPU utilization. It can also defeat the benefits of Large Receive Offloads (LRO) because some physical NICs (such as Intel 10GbE NICs) automatically disable LRO when interrupt coalescing is disabled. See [http://kb.vmware.com/kb/1027511](http://kb.vmware.com/kb/1027511) for more details.\n+    Disabling interrupt coalescing can reduce latency in virtual machines; however, it can impact performance and cause higher CPU utilization. It can also defeat the benefits of Large Receive Offloads (LRO) because some physical NICs (such as Intel 10GbE NICs) automatically disable LRO when interrupt coalescing is disabled.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ad2cfb812a68c888171090d95eebb5f1ac28fa"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA5Mjc1OA==", "bodyText": "Add a comma after \"networking.\"", "url": "https://github.com/apache/geode/pull/4582#discussion_r366092758", "createdAt": "2020-01-14T00:01:49Z", "author": {"login": "joeymcallister"}, "path": "geode-docs/managing/monitor_tune/performance_on_vsphere.html.md.erb", "diffHunk": "@@ -70,23 +70,27 @@ These guidelines help you reduce latency.\n \n     If you restart the ESXi host, the above configuration must be reapplied.\n \n+\n     **Note:**\n-    Disabling interrupt coalescing can reduce latency in virtual machines; however, it can impact performance and cause higher CPU utilization. It can also defeat the benefits of Large Receive Offloads (LRO) because some physical NICs (such as Intel 10GbE NICs) automatically disable LRO when interrupt coalescing is disabled. See [http://kb.vmware.com/kb/1027511](http://kb.vmware.com/kb/1027511) for more details.\n+    Disabling interrupt coalescing can reduce latency in virtual machines; however, it can impact performance and cause higher CPU utilization. It can also defeat the benefits of Large Receive Offloads (LRO) because some physical NICs (such as Intel 10GbE NICs) automatically disable LRO when interrupt coalescing is disabled.\n+This type of tuning benefits <%=vars.product_name%> workloads, but it can hurt other non-<%=vars.product_name_long%> workloads that are memory throughput-bound, as opposed to latency sensitive as in the case of <%=vars.product_name%> workloads.\n+See [http://kb.vmware.com/kb/1027511](http://kb.vmware.com/kb/1027511) for more details.\n \n -   **Virtual NIC:** Use the following guidelines when configuring your virtual NICs:\n     -   Use VMXNET3 virtual NICs for your latency-sensitive or otherwise performance-critical virtual machines. See [http://kb.vmware.com/kb/1001805](http://kb.vmware.com/kb/1001805) for details on selecting the appropriate type of virtual NIC for your virtual machine.\n     -   VMXNET3 supports adaptive interrupt coalescing that can help drive high throughput to virtual machines that have multiple vCPUs with parallelized workloads (multiple threads), while minimizing latency of virtual interrupt delivery. However, if your workload is extremely sensitive to latency, VMware recommends that you disable virtual interrupt coalescing for your virtual NICs. You can do this programmatically via API or by editing your virtual machine's .vmx configuration file. Refer to your vSphere API Reference or VMware ESXi documentation for specific instructions.\n \n ## <a id=\"topic_E6EB8AB6CCEF435A98B48B867FE9BFEB\" class=\"no-quick-link\"></a>VMware vSphere vMotion and DRS Cluster Usage\n \n-This topic discusses use limitations of vSphere vMotion, including the use of it with DRS.\n+This topic discusses use limitations of vSphere vMotion, including its use with DRS.\n+\n+When vMotion migrations occur, there is an expected temporary drop in the performance of both read-operation and write-operation workloads.\n+These workloads resume their normal rate of operation once the vMotion migration of the servers is completed.\n+\n+VMware recommends that all vMotion migration activity of <%=vars.product_name_long%> members occurs over 10GbE, during periods of low activity and scheduled maintenance windows.\n+Test vMotion migrations in your own environment to assess differences in workload, networking and scale.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ad2cfb812a68c888171090d95eebb5f1ac28fa"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81cec566b4327f1c83cd175ccc2a76793d8c97a2", "author": {"user": {"login": "davebarnes97", "name": "Dave Barnes"}}, "url": "https://github.com/apache/geode/commit/81cec566b4327f1c83cd175ccc2a76793d8c97a2", "committedDate": "2020-01-14T00:56:01Z", "message": "GEODE-7686: incorporate reviewer correction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d52af22bc17830a7f8fecb16d949fea197cdf7", "author": {"user": {"login": "davebarnes97", "name": "Dave Barnes"}}, "url": "https://github.com/apache/geode/commit/08d52af22bc17830a7f8fecb16d949fea197cdf7", "committedDate": "2020-01-14T01:32:29Z", "message": "GEODE-7686: incorporate reviewer correction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjYwOTk1", "url": "https://github.com/apache/geode/pull/4582#pullrequestreview-342260995", "createdAt": "2020-01-14T02:31:08Z", "commit": {"oid": "08d52af22bc17830a7f8fecb16d949fea197cdf7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3834, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}