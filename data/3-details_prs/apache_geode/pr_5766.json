{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NTgyNTY0", "number": 5766, "title": "GEODE-8738: Updated documentation about WAN deployments with sites wi\u2026", "bodyText": "\u2026th the same IP address and port for all gateway receivers\nThank you for submitting a contribution to Apache Geode.\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n\n Is there a JIRA ticket associated with this PR? Is it referenced in the commit message?\n\n\n Has your PR been rebased against the latest commit within the target branch (typically develop)?\n\n\n Is your initial contribution a single, squashed commit?\n\n\n Does gradlew build run cleanly?\n\n\n Have you written or updated unit tests to verify your changes?\n\n\n If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under ASF 2.0?\n\n\nNote:\nPlease ensure that once the PR is submitted, check Concourse for build issues and\nsubmit an update to your PR as soon as possible. If you need help, please send an\nemail to dev@geode.apache.org.", "createdAt": "2020-11-20T09:47:13Z", "url": "https://github.com/apache/geode/pull/5766", "merged": true, "mergeCommit": {"oid": "c992f5155193f6339edb6493553aae072581d526"}, "closed": true, "closedAt": "2020-12-01T18:51:10Z", "author": {"login": "albertogpz"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeb3gvAH2gAyNTI0NTgyNTY0OjY4MDg1ZTBmNTU3MDBmMGVlYWUzZDE5MDZlMDY5NmJlNjU4YTE1MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh-j60gFqTU0MjE5Nzc3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520", "author": {"user": {"login": "albertogpz", "name": "Alberto Gomez"}}, "url": "https://github.com/apache/geode/commit/68085e0f55700f0eeae3d1906e0696be658a1520", "committedDate": "2020-11-20T18:43:02Z", "message": "GEODE-8738: Updated documentation about WAN deployments with sites with the same IP address and port for all gateway receivers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e98d39875a3117701d141b6fc2e8eec0f2cd994c", "author": {"user": {"login": "albertogpz", "name": "Alberto Gomez"}}, "url": "https://github.com/apache/geode/commit/e98d39875a3117701d141b6fc2e8eec0f2cd994c", "committedDate": "2020-11-20T09:45:33Z", "message": "GEODE-8738: Updated documentation about WAN deployments with sites with the same IP address and port for all gateway receivers"}, "afterCommit": {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520", "author": {"user": {"login": "albertogpz", "name": "Alberto Gomez"}}, "url": "https://github.com/apache/geode/commit/68085e0f55700f0eeae3d1906e0696be658a1520", "committedDate": "2020-11-20T18:43:02Z", "message": "GEODE-8738: Updated documentation about WAN deployments with sites with the same IP address and port for all gateway receivers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODE3NTM2", "url": "https://github.com/apache/geode/pull/5766#pullrequestreview-535817536", "createdAt": "2020-11-20T22:25:36Z", "commit": {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e43924b2de89dea9d5b513269e7776310100e8ca", "author": {"user": {"login": "albertogpz", "name": "Alberto Gomez"}}, "url": "https://github.com/apache/geode/commit/e43924b2de89dea9d5b513269e7776310100e8ca", "committedDate": "2020-11-21T08:38:57Z", "message": "GEODE-8738: Update with review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMzk2OTgz", "url": "https://github.com/apache/geode/pull/5766#pullrequestreview-541396983", "createdAt": "2020-12-01T00:19:29Z", "commit": {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMDoxOToyOVrOH8TGpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMDoxOToyOVrOH8TGpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk4OTYwNQ==", "bodyText": "There is a typo: \"recievers\"", "url": "https://github.com/apache/geode/pull/5766#discussion_r532989605", "createdAt": "2020-12-01T00:19:29Z", "author": {"login": "alb3rtobr"}, "path": "geode-docs/topologies_and_comm/multi_site_configuration/setting_up_a_multisite_system.html.md.erb", "diffHunk": "@@ -387,3 +387,51 @@ boglesbymac(ny-3:88715)<v4>:36808 | 5371 | 5            |[\"boglesbymac(ln-1:8865\n boglesbymac(ny-4:88724)<v5>:52993 | 5247 | 6            |[\"boglesbymac(ln-1:88651)<v2>:48277\",\"boglesbymac(ln-4:88681)<v5>:42784\",\"boglesbymac(ln-2:88662)<v3>:12796\",\"boglesbymac(ln-3:88672)<v4>:43675\"]\n ```\n \n+### <a id=\"setting_up_a_multisite_system__section_E3A44F85359046C7ADD12861D261637C\" class=\"no-quick-link\"></a>Configuring just one IP address and port to access all gateway receivers in a site\n+\n+There could be WAN deployments in which we do not want to expose the IP address and port of every gateway receiver to the other site but instead expose just one IP address and port for all gateway receivers. This way, the internal topology of the site is hidden to the other site. This case is quite common in cloud deployments, in which a reverse proxy/load balancer distributes incoming requests to the site (in our case, replication requests) among the available servers (in our case, gateway receivers).\n+\n+<%=vars.product_name%> supports this configuration by means of a particular use of the hostname-for-senders, start-port and end-port parameters of the gateway receiver.\n+\n+In order to configure a WAN deployment that hides the gateway receivers behind the same IP address and port, all the gateway receivers must have the same value for the hostname-for-senders parameter (the hostname or IP address to be used by clients to access them) and the same value in the start-port and end-port parameters (the port to be used by clients to access them).\n+\n+As an example, a deployment in which all gateway receivers of a site are accessed via the \"gateway1.mycompany.com\" hostname and port \"1971\", every gateway receiver in that site must be configured as follows:\n+\n+``` pre\n+gfsh> create gateway-receiver --hostname-for-senders=\"gateway1.mycompany.com\" --start-port=1971 --end-port=1971\n+```\n+\n+The following output shows how the receiver side would look like after this configuration if 4 gateway recievers were configured:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "531e42a377f9ddc46fbc6659c275b4884db56cf6", "author": {"user": {"login": "albertogpz", "name": "Alberto Gomez"}}, "url": "https://github.com/apache/geode/commit/531e42a377f9ddc46fbc6659c275b4884db56cf6", "committedDate": "2020-12-01T09:11:20Z", "message": "GEODE-8738: Fix typo found in review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNzgwNjA4", "url": "https://github.com/apache/geode/pull/5766#pullrequestreview-541780608", "createdAt": "2020-12-01T10:55:51Z", "commit": {"oid": "531e42a377f9ddc46fbc6659c275b4884db56cf6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMTk3Nzcx", "url": "https://github.com/apache/geode/pull/5766#pullrequestreview-542197771", "createdAt": "2020-12-01T18:50:05Z", "commit": {"oid": "531e42a377f9ddc46fbc6659c275b4884db56cf6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3897, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}