{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNDgwNTYw", "number": 5164, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0Mjo1OFrOEAL2Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0Mjo1OFrOEAL2Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjI5NjA3OnYy", "diffSide": "RIGHT", "path": "geode-gfsh/src/distributedTest/java/org/apache/geode/management/internal/cli/commands/GfshHostNameVerificationDistributedTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0Mjo1OFrOGbTvxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0OTozNFrOGbT_5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4ODI2Mg==", "bodyText": "these 2 lines should be put in \"else\" or some better place?", "url": "https://github.com/apache/geode/pull/5164#discussion_r431288262", "createdAt": "2020-05-27T16:42:58Z", "author": {"login": "gesterzhou"}, "path": "geode-gfsh/src/distributedTest/java/org/apache/geode/management/internal/cli/commands/GfshHostNameVerificationDistributedTest.java", "diffHunk": "@@ -60,14 +62,19 @@ public void setupCluster() throws Exception {\n         .isCA()\n         .generate();\n \n-    CertificateMaterial locatorCertificate = new CertificateBuilder()\n+    String hostname = LocalHostUtil.getCanonicalLocalHostName();\n+    final CertificateBuilder builder = new CertificateBuilder()\n         .commonName(\"locator\")\n         .issuedBy(ca)\n         .sanDnsName(InetAddress.getLoopbackAddress().getHostName())\n-        .sanDnsName(InetAddress.getLocalHost().getHostName())\n-        .sanIpAddress(InetAddress.getLocalHost())\n-        .sanIpAddress(InetAddress.getByName(\"0.0.0.0\")) // to pass on windows\n-        .generate();\n+        .sanDnsName(hostname)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37a2989c1623aad20574a572d843546db7392e0a"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI5MjM4OA==", "bodyText": "loopback is supposed to be there.  The hostnamechecker in the jdk will ignore the sanDnsName(hostname) entry if it's an IP literal and instead look for a sanIpAddress entry , so it doesn't hurt to have the sanDnsName there.", "url": "https://github.com/apache/geode/pull/5164#discussion_r431292388", "createdAt": "2020-05-27T16:49:34Z", "author": {"login": "bschuchardt"}, "path": "geode-gfsh/src/distributedTest/java/org/apache/geode/management/internal/cli/commands/GfshHostNameVerificationDistributedTest.java", "diffHunk": "@@ -60,14 +62,19 @@ public void setupCluster() throws Exception {\n         .isCA()\n         .generate();\n \n-    CertificateMaterial locatorCertificate = new CertificateBuilder()\n+    String hostname = LocalHostUtil.getCanonicalLocalHostName();\n+    final CertificateBuilder builder = new CertificateBuilder()\n         .commonName(\"locator\")\n         .issuedBy(ca)\n         .sanDnsName(InetAddress.getLoopbackAddress().getHostName())\n-        .sanDnsName(InetAddress.getLocalHost().getHostName())\n-        .sanIpAddress(InetAddress.getLocalHost())\n-        .sanIpAddress(InetAddress.getByName(\"0.0.0.0\")) // to pass on windows\n-        .generate();\n+        .sanDnsName(hostname)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4ODI2Mg=="}, "originalCommit": {"oid": "37a2989c1623aad20574a572d843546db7392e0a"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4106, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}