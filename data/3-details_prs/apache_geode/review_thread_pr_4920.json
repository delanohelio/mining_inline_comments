{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNTE4NjIw", "number": 4920, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTo1Nzo1M1rODvwb6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyNjozNlrODwEcog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDAzMjQyOnYy", "diffSide": "RIGHT", "path": "geode-assembly/src/acceptanceTest/java/org/apache/geode/client/sni/ClientSNIAcceptanceTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTo1Nzo1M1rOGCXqHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0MDowMFrOGCybBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNzk1MA==", "bodyText": "It isn't obvious from reading this test class, where that foo/bar entry came from and why we expect it to be there. Of course it was added by geode-starter.gfsh, but that was incidental.", "url": "https://github.com/apache/geode/pull/4920#discussion_r405137950", "createdAt": "2020-04-07T21:57:53Z", "author": {"login": "Bill"}, "path": "geode-assembly/src/acceptanceTest/java/org/apache/geode/client/sni/ClientSNIAcceptanceTest.java", "diffHunk": "@@ -97,5 +97,6 @@ public void connectToSNIProxyDocker() {\n     region.destroy(\"hello\");\n     region.put(\"hello\", \"world\");\n     assertThat(region.get(\"hello\")).isEqualTo(\"world\");\n+    assertThat(region.get(\"foo\")).isEqualTo(\"bar\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3NjQ1NQ==", "bodyText": "I've added comments about the region \"jellyfish\" and the entry \"bar\" being created by the gfsh script", "url": "https://github.com/apache/geode/pull/4920#discussion_r405576455", "createdAt": "2020-04-08T14:40:00Z", "author": {"login": "bschuchardt"}, "path": "geode-assembly/src/acceptanceTest/java/org/apache/geode/client/sni/ClientSNIAcceptanceTest.java", "diffHunk": "@@ -97,5 +97,6 @@ public void connectToSNIProxyDocker() {\n     region.destroy(\"hello\");\n     region.put(\"hello\", \"world\");\n     assertThat(region.get(\"hello\")).isEqualTo(\"world\");\n+    assertThat(region.get(\"foo\")).isEqualTo(\"bar\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNzk1MA=="}, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDA0NDk1OnYy", "diffSide": "RIGHT", "path": "geode-docs/reference/topics/client-cache.html.md.erb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjowMjozNFrOGCXx8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0MjoxOFrOGCyhDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzOTk1Mg==", "bodyText": "\"Server Name Extension field\" -> \"Server Name Indication field\"", "url": "https://github.com/apache/geode/pull/4920#discussion_r405139952", "createdAt": "2020-04-07T22:02:34Z", "author": {"login": "Bill"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Extension field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3Nzk5Ng==", "bodyText": "thanks Bill", "url": "https://github.com/apache/geode/pull/4920#discussion_r405577996", "createdAt": "2020-04-08T14:42:18Z", "author": {"login": "bschuchardt"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Extension field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzOTk1Mg=="}, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDA3MzkxOnYy", "diffSide": "RIGHT", "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjoxMzo0NVrOGCYEPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0MDo0MlrOGCycsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE0NDYzOA==", "bodyText": "I was concerned about using the term \"gateway\" (instead of \"proxy\") here but my research indicates \"gateway\" is not inappropriate \u2713 :)", "url": "https://github.com/apache/geode/pull/4920#discussion_r405144638", "createdAt": "2020-04-07T22:13:45Z", "author": {"login": "Bill"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE2NDkzNg==", "bodyText": "@Bill solid double negation there...", "url": "https://github.com/apache/geode/pull/4920#discussion_r405164936", "createdAt": "2020-04-07T23:06:38Z", "author": {"login": "echobravopapa"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE0NDYzOA=="}, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3Njg4MA==", "bodyText": "I've corrected your comment to read \"is appropriate\" :-)", "url": "https://github.com/apache/geode/pull/4920#discussion_r405576880", "createdAt": "2020-04-08T14:40:42Z", "author": {"login": "bschuchardt"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE0NDYzOA=="}, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDA4ODA4OnYy", "diffSide": "RIGHT", "path": "geode-dunit/src/main/java/org/apache/geode/test/dunit/internal/ProcessManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjoxOToxOFrOGCYMxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjoxOToxOFrOGCYMxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE0NjgyMQ==", "bodyText": "ooh good catch!", "url": "https://github.com/apache/geode/pull/4920#discussion_r405146821", "createdAt": "2020-04-07T22:19:18Z", "author": {"login": "Bill"}, "path": "geode-dunit/src/main/java/org/apache/geode/test/dunit/internal/ProcessManager.java", "diffHunk": "@@ -258,8 +258,10 @@ private String removeModuleFromGradlePath(String classpath, String module) {\n       // remove current-version product classes and resources from the classpath\n       dunitClasspath =\n           removeModulesFromPath(dunitClasspath, \"geode-common\", \"geode-core\", \"geode-cq\",\n-              \"geode-http-service\", \"geode-json\", \"geode-log4j\", \"geode-lucene\",\n-              \"geode-serialization\", \"geode-wan\", \"geode-gfsh\");\n+              \"geode-http-service\", \"geode-json\", \"geode-log4j\", \"geode-lucene\", \"geode-tcp-server\",\n+              \"geode-membership\", \"geode-management\", \"geode-logging\", \"geode-web\",\n+              \"geode-rebalancer\",\n+              \"geode-serialization\", \"geode-wan\", \"geode-gfsh\", \"geode-lucene\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276582533c885092d8e1d076d426a4c9f2e0b908"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzI5MTI5OnYy", "diffSide": "RIGHT", "path": "geode-docs/reference/topics/client-cache.html.md.erb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyMTo1NVrOGC27XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzozOTowMlrOGC55bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MDI2OQ==", "bodyText": "formatting: I believe you need a space in \"(SNI)field\" -> \"(SNI) field\"", "url": "https://github.com/apache/geode/pull/4920#discussion_r405650269", "createdAt": "2020-04-08T16:21:55Z", "author": {"login": "Bill"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Indication (SNI)field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY5ODkyNA==", "bodyText": "done", "url": "https://github.com/apache/geode/pull/4920#discussion_r405698924", "createdAt": "2020-04-08T17:39:02Z", "author": {"login": "bschuchardt"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Indication (SNI)field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MDI2OQ=="}, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzI5MzczOnYy", "diffSide": "RIGHT", "path": "geode-docs/reference/topics/client-cache.html.md.erb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyMjozOVrOGC29HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyMjozOVrOGC29HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MDcxNg==", "bodyText": "I like this better now that you have a number here \u2713", "url": "https://github.com/apache/geode/pull/4920#discussion_r405650716", "createdAt": "2020-04-08T16:22:39Z", "author": {"login": "Bill"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Indication (SNI)field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.\n+\n+**Note:**\n+This setting may be used with either a Server list or a Locator list.  It will be used to form connections to either.\n+\n+**Default:**\n+\n+**API:** `org.apache.geode.cache.client.proxy.ProxySocketFactories`\n+\n+**Example:**\n+\n+``` pre\n+<pool ...>\n+ <socket-factory>\n+    <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+    <parameter name=\"hostname\">\n+      <string>my-haproxy-address</string>\n+    </parameter>\n+    <parameter name=\"port\">\n+      <string>12345</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzMwMzM0OnYy", "diffSide": "RIGHT", "path": "geode-docs/reference/topics/client-cache.html.md.erb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyNDo1MFrOGC3DFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzozOTozMFrOGC56bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MjI0Ng==", "bodyText": "for consistency, since the documentation refers to a \"gateway\" (not a \"proxy\") and also since HAproxy is only one of many choices, I recomend calling this something like my-sni-gateway-address", "url": "https://github.com/apache/geode/pull/4920#discussion_r405652246", "createdAt": "2020-04-08T16:24:50Z", "author": {"login": "Bill"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Indication (SNI)field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.\n+\n+**Note:**\n+This setting may be used with either a Server list or a Locator list.  It will be used to form connections to either.\n+\n+**Default:**\n+\n+**API:** `org.apache.geode.cache.client.proxy.ProxySocketFactories`\n+\n+**Example:**\n+\n+``` pre\n+<pool ...>\n+ <socket-factory>\n+    <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+    <parameter name=\"hostname\">\n+      <string>my-haproxy-address</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY5OTE4Mw==", "bodyText": "done - it's now my-gateway-address like the other place", "url": "https://github.com/apache/geode/pull/4920#discussion_r405699183", "createdAt": "2020-04-08T17:39:30Z", "author": {"login": "bschuchardt"}, "path": "geode-docs/reference/topics/client-cache.html.md.erb", "diffHunk": "@@ -338,6 +338,32 @@ Provide a server list or `locator` list, but not both.\n        port=\"123456\"/>\n </pool>\n ```\n+## <a id=\"cc-socket-factory\" class=\"no-quick-link\"></a>&lt;socket-factory&gt;\n+\n+Defines a factory to create socket connections to locators and servers.  A typical use of this element is to redirect connections to an ingress gateway such as Istio or HAProxy in a cluster where the TLS (SSL) Server Name Indication (SNI)field is set to indicate the actual locator or server the client is trying to reach.  This allows you to expose only the gateway hostname:port without the client needing to be able to resolve the names of the locator and server machines.\n+\n+**Note:**\n+This setting may be used with either a Server list or a Locator list.  It will be used to form connections to either.\n+\n+**Default:**\n+\n+**API:** `org.apache.geode.cache.client.proxy.ProxySocketFactories`\n+\n+**Example:**\n+\n+``` pre\n+<pool ...>\n+ <socket-factory>\n+    <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+    <parameter name=\"hostname\">\n+      <string>my-haproxy-address</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MjI0Ng=="}, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzMwNjAzOnYy", "diffSide": "RIGHT", "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyNTozM1rOGC3EyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyNTozM1rOGC3EyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MjY4MQ==", "bodyText": "\"gateway\" \u2713", "url": "https://github.com/apache/geode/pull/4920#discussion_r405652681", "createdAt": "2020-04-08T16:25:33Z", "author": {"login": "Bill"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:\n+        <pool... >\n+          <socket-factory>\n+            <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+            <parameter name=\"hostname\">\n+              <string>my-gateway-address</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzMxMTA2OnYy", "diffSide": "RIGHT", "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoyNjozNlrOGC3HzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzozOTo1MlrOGC57QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MzQ1Mw==", "bodyText": "for consistency with the other .erb file, should we have a number here?", "url": "https://github.com/apache/geode/pull/4920#discussion_r405653453", "createdAt": "2020-04-08T16:26:36Z", "author": {"login": "Bill"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:\n+        <pool... >\n+          <socket-factory>\n+            <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+            <parameter name=\"hostname\">\n+              <string>my-gateway-address</string>\n+            </parameter>\n+            <parameter name=\"port\">\n+              <string>my-gateway-port-number</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY5OTM5Mg==", "bodyText": "12345", "url": "https://github.com/apache/geode/pull/4920#discussion_r405699392", "createdAt": "2020-04-08T17:39:52Z", "author": {"login": "bschuchardt"}, "path": "geode-docs/topologies_and_comm/cs_configuration/setting_up_a_client_server_system.html.md.erb", "diffHunk": "@@ -53,15 +53,28 @@ Configure your server and client processes and data regions to run your client/s\n     \n         <client-cache>\n            <pool name=\"publisher\" subscription-enabled=\"true\">\n-              <locator host=\"lucy\" port=\"41111\"/> \n-              <locator host=\"lucy\" port=\"41111\"/> \n+              <locator host=\"lucy1\" port=\"41111\"/>\n+              <locator host=\"lucy2\" port=\"41111\"/>\n            </pool>\n            ...\n            <region name=\"clientRegion\" ...\n               <region-attributes pool-name=\"publisher\" ...\n \n     You do not need to provide the complete list of locators to the clients at startup, but you should provide as complete a list as possible. The locators maintain a dynamic list of locators and servers and provide the information to the clients as needed.\n \n+    When TLS (SSL) is used clients can also be directed to go through a SNI gateway such as Istio or HAProxy to reach locators and servers.  To do this add the following to your cache.xml pool configuration:\n+        <pool... >\n+          <socket-factory>\n+            <class-name>org.apache.geode.cache.client.proxy.SniSocketFactory</class-name>\n+            <parameter name=\"hostname\">\n+              <string>my-gateway-address</string>\n+            </parameter>\n+            <parameter name=\"port\">\n+              <string>my-gateway-port-number</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1MzQ1Mw=="}, "originalCommit": {"oid": "1260318f02dfb5e84b8e85d744a133217b1abe9f"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4265, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}