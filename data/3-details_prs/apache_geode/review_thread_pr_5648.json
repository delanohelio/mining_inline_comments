{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NzExMDcx", "number": 5648, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMDozMjoxMlrOExXcQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMDozMjoxMlrOExXcQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTk5NzQ0OnYy", "diffSide": "RIGHT", "path": "geode-core/src/integrationTest/java/org/apache/geode/distributed/LauncherMemberMXBeanIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMDozMjoxMlrOHndoFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMDozOToxMlrOHonUrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0MTkwOQ==", "bodyText": "I'm really reluctant to add gc() or runFinalization(). Why do you think these will fix flakiness in this test?", "url": "https://github.com/apache/geode/pull/5648#discussion_r511141909", "createdAt": "2020-10-23T20:32:12Z", "author": {"login": "kirklund"}, "path": "geode-core/src/integrationTest/java/org/apache/geode/distributed/LauncherMemberMXBeanIntegrationTest.java", "diffHunk": "@@ -227,6 +227,8 @@ public void showJVMMetrics_returnsOJVMMetricsType()\n         if (cdsValue.equals(osMetricValue)) {\n           break;\n         }\n+        System.gc();\n+        System.runFinalization();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7669962cfc52cf77cec4c37c73e4723062b446f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwMTMwMw==", "bodyText": "Yes, I'm probably on the wrong track here. The test flakiness is around reporting memory stats. Since the underlying (volatile) values are retrieved from VMStatsMonitor would it then be better to reduce the stat sampling period so that values are updated more frequently?", "url": "https://github.com/apache/geode/pull/5648#discussion_r512001303", "createdAt": "2020-10-26T14:27:02Z", "author": {"login": "jdeppe-pivotal"}, "path": "geode-core/src/integrationTest/java/org/apache/geode/distributed/LauncherMemberMXBeanIntegrationTest.java", "diffHunk": "@@ -227,6 +227,8 @@ public void showJVMMetrics_returnsOJVMMetricsType()\n         if (cdsValue.equals(osMetricValue)) {\n           break;\n         }\n+        System.gc();\n+        System.runFinalization();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0MTkwOQ=="}, "originalCommit": {"oid": "c7669962cfc52cf77cec4c37c73e4723062b446f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0OTAxOQ==", "bodyText": "or can you change the test to be more patient to see an expected value? Do you know how often these values are currently being updated?", "url": "https://github.com/apache/geode/pull/5648#discussion_r512149019", "createdAt": "2020-10-26T17:39:38Z", "author": {"login": "dschneider-pivotal"}, "path": "geode-core/src/integrationTest/java/org/apache/geode/distributed/LauncherMemberMXBeanIntegrationTest.java", "diffHunk": "@@ -227,6 +227,8 @@ public void showJVMMetrics_returnsOJVMMetricsType()\n         if (cdsValue.equals(osMetricValue)) {\n           break;\n         }\n+        System.gc();\n+        System.runFinalization();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0MTkwOQ=="}, "originalCommit": {"oid": "c7669962cfc52cf77cec4c37c73e4723062b446f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM0OTM1Ng==", "bodyText": "If I understand the code correctly, I believe they are being updated via a StatsMonitor, so I presume no more frequently than statistic-sample-rate. The test could retrieve that setting and try for at least that amount of time.", "url": "https://github.com/apache/geode/pull/5648#discussion_r512349356", "createdAt": "2020-10-27T00:39:12Z", "author": {"login": "jdeppe-pivotal"}, "path": "geode-core/src/integrationTest/java/org/apache/geode/distributed/LauncherMemberMXBeanIntegrationTest.java", "diffHunk": "@@ -227,6 +227,8 @@ public void showJVMMetrics_returnsOJVMMetricsType()\n         if (cdsValue.equals(osMetricValue)) {\n           break;\n         }\n+        System.gc();\n+        System.runFinalization();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0MTkwOQ=="}, "originalCommit": {"oid": "c7669962cfc52cf77cec4c37c73e4723062b446f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4566, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}