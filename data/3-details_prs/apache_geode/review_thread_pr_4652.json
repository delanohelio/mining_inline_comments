{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MzQwODE5", "number": 4652, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzowMjoxM1rODczlRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzowMjoxM1rODczlRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTMxODQ1OnYy", "diffSide": "RIGHT", "path": "geode-membership/src/main/java/org/apache/geode/distributed/internal/membership/gms/DefaultMembershipStatistics.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzowMjoxM1rOFlDBOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzozNTozNVrOFlDs6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM5MTA5Nw==", "bodyText": "Where are these stats being used? Is it ok that they are not thread-safe?", "url": "https://github.com/apache/geode/pull/4652#discussion_r374391097", "createdAt": "2020-02-03T23:02:13Z", "author": {"login": "Bill"}, "path": "geode-membership/src/main/java/org/apache/geode/distributed/internal/membership/gms/DefaultMembershipStatistics.java", "diffHunk": "@@ -17,10 +17,35 @@\n import org.apache.geode.distributed.internal.membership.api.MembershipStatistics;\n \n /**\n- * MembeshipStatisticsNoOp is the default implementation of MembershipStatistics. Create\n+ * DefaultMembeshipStatistics is the default implementation of MembershipStatistics. Create\n  * and install your own if you want to record membership stats.\n  */\n-public class MembershipStatisticsNoOp implements MembershipStatistics {\n+public class DefaultMembershipStatistics implements MembershipStatistics {\n+  private long sentBytes;\n+  private long ucastWriteBytes;\n+  private long ucastReadBytes;\n+  private long mcastWriteBytes;\n+  private long mcastReadBytes;\n+  private long ucastRetransmits;\n+  private long mcastRetransmits;\n+  private long mcastRetransmitRequests;\n+  private long heartbeatRequestsSent;\n+  private long heartbeatRequestsReceived;\n+  private long heartbeatsSent;\n+  private long heartbeatsReceived;\n+  private long suspectsSent;\n+  private long suspectsReceived;\n+  private long finalCheckRequestsSent;\n+  private long finalCheckRequestsReceived;\n+  private long finalCheckResponsesSent;\n+  private long finalCheckResponsesReceived;\n+  private long tcpFinalCheckRequestsSent;\n+  private long tcpFinalCheckRequestsReceived;\n+  private long tcpFinalCheckResponsesSent;\n+  private long tcpFinalCheckResponsesReceived;\n+  private long udpFinalCheckRequestsSent;\n+  private long udpFinalCheckResponsesReceived;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db323935d6e0eeff3a56b385f472b6a422d28897"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM5MjE1MQ==", "bodyText": "@Bill The stats are being used in unit tests", "url": "https://github.com/apache/geode/pull/4652#discussion_r374392151", "createdAt": "2020-02-03T23:05:13Z", "author": {"login": "bschuchardt"}, "path": "geode-membership/src/main/java/org/apache/geode/distributed/internal/membership/gms/DefaultMembershipStatistics.java", "diffHunk": "@@ -17,10 +17,35 @@\n import org.apache.geode.distributed.internal.membership.api.MembershipStatistics;\n \n /**\n- * MembeshipStatisticsNoOp is the default implementation of MembershipStatistics. Create\n+ * DefaultMembeshipStatistics is the default implementation of MembershipStatistics. Create\n  * and install your own if you want to record membership stats.\n  */\n-public class MembershipStatisticsNoOp implements MembershipStatistics {\n+public class DefaultMembershipStatistics implements MembershipStatistics {\n+  private long sentBytes;\n+  private long ucastWriteBytes;\n+  private long ucastReadBytes;\n+  private long mcastWriteBytes;\n+  private long mcastReadBytes;\n+  private long ucastRetransmits;\n+  private long mcastRetransmits;\n+  private long mcastRetransmitRequests;\n+  private long heartbeatRequestsSent;\n+  private long heartbeatRequestsReceived;\n+  private long heartbeatsSent;\n+  private long heartbeatsReceived;\n+  private long suspectsSent;\n+  private long suspectsReceived;\n+  private long finalCheckRequestsSent;\n+  private long finalCheckRequestsReceived;\n+  private long finalCheckResponsesSent;\n+  private long finalCheckResponsesReceived;\n+  private long tcpFinalCheckRequestsSent;\n+  private long tcpFinalCheckRequestsReceived;\n+  private long tcpFinalCheckResponsesSent;\n+  private long tcpFinalCheckResponsesReceived;\n+  private long udpFinalCheckRequestsSent;\n+  private long udpFinalCheckResponsesReceived;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM5MTA5Nw=="}, "originalCommit": {"oid": "db323935d6e0eeff3a56b385f472b6a422d28897"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQwMjI4Mg==", "bodyText": "Am I wrong to be concerned about (lack of) synchronization on these fields?\nI understand the stakes are low on test code\u2014but I wonder if the uncoordinated access could lead to test flakiness. Happy to be talked out of this position :)", "url": "https://github.com/apache/geode/pull/4652#discussion_r374402282", "createdAt": "2020-02-03T23:35:35Z", "author": {"login": "Bill"}, "path": "geode-membership/src/main/java/org/apache/geode/distributed/internal/membership/gms/DefaultMembershipStatistics.java", "diffHunk": "@@ -17,10 +17,35 @@\n import org.apache.geode.distributed.internal.membership.api.MembershipStatistics;\n \n /**\n- * MembeshipStatisticsNoOp is the default implementation of MembershipStatistics. Create\n+ * DefaultMembeshipStatistics is the default implementation of MembershipStatistics. Create\n  * and install your own if you want to record membership stats.\n  */\n-public class MembershipStatisticsNoOp implements MembershipStatistics {\n+public class DefaultMembershipStatistics implements MembershipStatistics {\n+  private long sentBytes;\n+  private long ucastWriteBytes;\n+  private long ucastReadBytes;\n+  private long mcastWriteBytes;\n+  private long mcastReadBytes;\n+  private long ucastRetransmits;\n+  private long mcastRetransmits;\n+  private long mcastRetransmitRequests;\n+  private long heartbeatRequestsSent;\n+  private long heartbeatRequestsReceived;\n+  private long heartbeatsSent;\n+  private long heartbeatsReceived;\n+  private long suspectsSent;\n+  private long suspectsReceived;\n+  private long finalCheckRequestsSent;\n+  private long finalCheckRequestsReceived;\n+  private long finalCheckResponsesSent;\n+  private long finalCheckResponsesReceived;\n+  private long tcpFinalCheckRequestsSent;\n+  private long tcpFinalCheckRequestsReceived;\n+  private long tcpFinalCheckResponsesSent;\n+  private long tcpFinalCheckResponsesReceived;\n+  private long udpFinalCheckRequestsSent;\n+  private long udpFinalCheckResponsesReceived;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM5MTA5Nw=="}, "originalCommit": {"oid": "db323935d6e0eeff3a56b385f472b6a422d28897"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3743, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}