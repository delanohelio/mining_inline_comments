{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzE1MjUx", "number": 5076, "title": "Geode 7812: Changes to PutAllClientServerDistributionTest", "bodyText": "Fixed issues causing testEventIdOutOfOrderInPartitionRegionSingleHop to fail", "createdAt": "2020-05-08T16:20:48Z", "url": "https://github.com/apache/geode/pull/5076", "merged": true, "mergeCommit": {"oid": "a1d0c74d72c1daf87e7b854f7635fc6eb92ccd77"}, "closed": true, "closedAt": "2020-05-08T19:55:16Z", "author": {"login": "mhansonp"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfFTxDgH2gAyNDE1MzE1MjUxOjY2ZjVlOTc2ZmU2MjA3OWE2YjAxZmQxNTJiMjFhZWNlMDU2YzMwMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfX1gwAFqTQwODUwMjk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "66f5e976fe62079a6b01fd152b21aece056c3004", "author": {"user": {"login": "mhansonp", "name": null}}, "url": "https://github.com/apache/geode/commit/66f5e976fe62079a6b01fd152b21aece056c3004", "committedDate": "2020-05-07T22:48:51Z", "message": "GEODE-7812: Stripped down fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af9234da279334d8dee9fc34c3b253db216109db", "author": {"user": {"login": "mhansonp", "name": null}}, "url": "https://github.com/apache/geode/commit/af9234da279334d8dee9fc34c3b253db216109db", "committedDate": "2020-05-08T16:19:00Z", "message": "GEODE-7812: Cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MzY4Njk0", "url": "https://github.com/apache/geode/pull/5076#pullrequestreview-408368694", "createdAt": "2020-05-08T16:42:34Z", "commit": {"oid": "af9234da279334d8dee9fc34c3b253db216109db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86c40999545ea657e087ae81b9827a2df9e804bd", "author": {"user": {"login": "mhansonp", "name": null}}, "url": "https://github.com/apache/geode/commit/86c40999545ea657e087ae81b9827a2df9e804bd", "committedDate": "2020-05-08T18:21:16Z", "message": "GEODE-7812: Changing batch size."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTAyOTky", "url": "https://github.com/apache/geode/pull/5076#pullrequestreview-408502992", "createdAt": "2020-05-08T20:23:55Z", "commit": {"oid": "af9234da279334d8dee9fc34c3b253db216109db"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDoyMzo1NVrOGSyg_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDoyMzo1NVrOGSyg_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM1NTE5Nw==", "bodyText": "It could so happen the number of buckets on this server could be less than 30; making putAll to success, changing it to less number will help.", "url": "https://github.com/apache/geode/pull/5076#discussion_r422355197", "createdAt": "2020-05-08T20:23:55Z", "author": {"login": "agingade"}, "path": "geode-cq/src/distributedTest/java/org/apache/geode/internal/cache/PutAllClientServerDistributedTest.java", "diffHunk": "@@ -2305,24 +2300,21 @@ public void testEventIdMisorderInPRSingleHop() {\n     myRegion.getAttributesMutator().addCacheListener(new CountingCacheListener<>(clientCounter));\n     myRegion.registerInterest(\"ALL_KEYS\");\n \n+    // server1 and server2 will closeCache after created 10 keys\n     // server1 add slow listener\n     server1.invoke(() -> {\n       Region<String, TickerData> region = getCache().getRegion(regionName);\n       region.getAttributesMutator()\n           .addCacheListener(new SlowCountingCacheListener<>(new Action<>(Operation.CREATE,\n-              creates -> executorServiceRule.submit(() -> {\n-                closeCacheConditionally(creates, 10);\n-              }))));\n+              creates -> closeCacheConditionally(creates, 10))));\n     });\n \n     // server2 add slow listener\n     server2.invoke(() -> {\n       Region<String, TickerData> region = getCache().getRegion(regionName);\n       region.getAttributesMutator()\n           .addCacheListener(new SlowCountingCacheListener<>(new Action<>(Operation.CREATE,\n-              creates -> executorServiceRule.submit(() -> {\n-                closeCacheConditionally(creates, 10);\n-              }))));\n+              creates -> closeCacheConditionally(creates, 30))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af9234da279334d8dee9fc34c3b253db216109db"}, "originalPosition": 527}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4707, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}