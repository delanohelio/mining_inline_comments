{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTk3NDky", "number": 5048, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMDozNlrOD52FUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDo0MDoyNFrOD52Xtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTgxNTIwOnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/net/NioSslEngine.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMDozNlrOGRV5cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMDozNlrOGRV5cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNzc0NQ==", "bodyText": "that's cute, personalized data ;P", "url": "https://github.com/apache/geode/pull/5048#discussion_r420837745", "createdAt": "2020-05-06T14:30:36Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/main/java/org/apache/geode/internal/net/NioSslEngine.java", "diffHunk": "@@ -398,6 +398,7 @@ public void close(SocketChannel socketChannel) {\n     } finally {\n       bufferPool.releaseBuffer(TRACKED_SENDER, myNetData);\n       bufferPool.releaseBuffer(TRACKED_RECEIVER, peerAppData);\n+      myNetData = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6f34027f63dbb547d4ee41b27ee1c6bbe96b715"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTgyNDk0OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/tcp/MsgStreamerList.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMjozOVrOGRV_gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMjozOVrOGRV_gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzOTI5OA==", "bodyText": "thx for removing all those crufty comments", "url": "https://github.com/apache/geode/pull/5048#discussion_r420839298", "createdAt": "2020-05-06T14:32:39Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/main/java/org/apache/geode/internal/tcp/MsgStreamerList.java", "diffHunk": "@@ -63,25 +63,16 @@ public int writeMessage() throws IOException {\n     for (MsgStreamer streamer : this.streamers) {\n       if (ex != null) {\n         streamer.release();\n-        // TODO: shouldn't we call continue here?\n-        // It seems wrong to call writeMessage on a streamer we have just released.\n-        // But why do we call release on a streamer when we had an exception on one\n-        // of the previous streamer?\n-        // release clears the direct bb and returns it to the pool but leaves\n-        // it has the \"buffer\". THen we call writeMessage and it will use \"buffer\"\n-        // that has also been returned to the pool.\n-        // I think we only have a MsgStreamerList when a DS has a mix of versions\n-        // which usually is just during a rolling upgrade so that might be why we\n-        // haven't noticed this causing a bug.\n-      }\n-      try {\n-        result += streamer.writeMessage();\n-        // if there is an exception we need to finish the\n-        // loop and release the other streamer's buffers\n-      } catch (RuntimeException e) {\n-        ex = e;\n-      } catch (IOException e) {\n-        ioex = e;\n+      } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6f34027f63dbb547d4ee41b27ee1c6bbe96b715"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTg2MjMwOnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/net/BufferPool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDo0MDoyNFrOGRWXJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDo1MDowNlrOGRW2Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0NTM0OQ==", "bodyText": "is the GF prefixed version of the property need to be exposed/documented?", "url": "https://github.com/apache/geode/pull/5048#discussion_r420845349", "createdAt": "2020-05-06T14:40:24Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/main/java/org/apache/geode/internal/net/BufferPool.java", "diffHunk": "@@ -69,7 +74,8 @@ public BufferPool(DMStats stats) {\n   /**\n    * use direct ByteBuffers instead of heap ByteBuffers for NIO operations\n    */\n-  public static final boolean useDirectBuffers = !Boolean.getBoolean(\"p2p.nodirectBuffers\");\n+  public static final boolean useDirectBuffers = !(Boolean.getBoolean(\"p2p.nodirectBuffers\")\n+      || Boolean.getBoolean(GeodeGlossary.GEMFIRE_PREFIX + \"noDirectBuffers\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6f34027f63dbb547d4ee41b27ee1c6bbe96b715"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg1MzI1NQ==", "bodyText": "is the GF prefixed version of the property need to be exposed/documented?\n\nyes, but I'm not sure what the best way is to do that.  I updated properties.html in this PR with the new property.", "url": "https://github.com/apache/geode/pull/5048#discussion_r420853255", "createdAt": "2020-05-06T14:50:06Z", "author": {"login": "bschuchardt"}, "path": "geode-core/src/main/java/org/apache/geode/internal/net/BufferPool.java", "diffHunk": "@@ -69,7 +74,8 @@ public BufferPool(DMStats stats) {\n   /**\n    * use direct ByteBuffers instead of heap ByteBuffers for NIO operations\n    */\n-  public static final boolean useDirectBuffers = !Boolean.getBoolean(\"p2p.nodirectBuffers\");\n+  public static final boolean useDirectBuffers = !(Boolean.getBoolean(\"p2p.nodirectBuffers\")\n+      || Boolean.getBoolean(GeodeGlossary.GEMFIRE_PREFIX + \"noDirectBuffers\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0NTM0OQ=="}, "originalCommit": {"oid": "c6f34027f63dbb547d4ee41b27ee1c6bbe96b715"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4169, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}