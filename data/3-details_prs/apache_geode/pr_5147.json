{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNjQ2OTgy", "number": 5147, "title": "GEODE-8171: javadoc for putAll need to have accurate exception", "bodyText": "Thank you for submitting a contribution to Apache Geode.\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n\n Is there a JIRA ticket associated with this PR? Is it referenced in the commit message?\n\n\n Has your PR been rebased against the latest commit within the target branch (typically develop)?\n\n\n Is your initial contribution a single, squashed commit?\n\n\n Does gradlew build run cleanly?\n\n\n Have you written or updated unit tests to verify your changes?\n\n\n If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under ASF 2.0?\n\n\nNote:\nPlease ensure that once the PR is submitted, check Concourse for build issues and\nsubmit an update to your PR as soon as possible. If you need help, please send an\nemail to dev@geode.apache.org.", "createdAt": "2020-05-22T00:06:23Z", "url": "https://github.com/apache/geode/pull/5147", "merged": true, "mergeCommit": {"oid": "53d16314b340c6841bfe9bcc01a64ad84cdf1b83"}, "closed": true, "closedAt": "2020-05-27T21:52:53Z", "author": {"login": "gesterzhou"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjmwLjgH2gAyNDIxNjQ2OTgyOmQxNGNiNTQ4MzdmMjZhNzJiMjkyYjZjYWRmZDgyYzE3NjMzZGZiM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclganlgFqTQxOTYzMjgxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/d14cb54837f26a72b292b6cadfd82c17633dfb3d", "committedDate": "2020-05-22T00:02:27Z", "message": "GEODE-8171: javadoc for putAll need to have accurate exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTc0NTgz", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-416574583", "createdAt": "2020-05-22T00:21:30Z", "commit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDoyMTozMFrOGZG9Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDoyMzozOVrOGZG_jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MTU3OA==", "bodyText": "\"the entries\" are they in two different lines or it is my browser. If they are two lines, it will be nice to have in the same line.", "url": "https://github.com/apache/geode/pull/5147#discussion_r428981578", "createdAt": "2020-05-22T00:21:30Z", "author": {"login": "agingade"}, "path": "geode-core/src/main/java/org/apache/geode/cache/Region.java", "diffHunk": "@@ -1359,10 +1359,30 @@ Object selectValue(String queryPredicate) throws FunctionDomainException, TypeMi\n    * in the specified map. This operation will be distributed to other caches if the scope is not\n    * <code>Scope.LOCAL</code>.\n    *\n-   * @param map the key/value pairs to put in this region.\n-   * @since GemFire 5.0\n+   * If any exception is thrown due to this call, it can imply that there may have been a partial\n+   * update performed on the region. Use putAll from within a transaction to get atomicity with all\n+   * the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MjE1Nw==", "bodyText": "May be changing it to \"throwsExpectedExceptions\"?", "url": "https://github.com/apache/geode/pull/5147#discussion_r428982157", "createdAt": "2020-05-22T00:23:39Z", "author": {"login": "agingade"}, "path": "geode-cq/src/distributedTest/java/org/apache/geode/internal/cache/PutAllClientServerDistributedTest.java", "diffHunk": "@@ -1827,6 +1829,135 @@ public void testPartialKeyInLocalRegion() {\n     });\n   }\n \n+  /**\n+   * Verify all the possible exceptions a putAll/put/removeAll/destroy could return\n+   */\n+  @Test\n+  public void testPutAllReturnsExceptions() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2OTkyMTY1", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-416992165", "createdAt": "2020-05-22T15:17:54Z", "commit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNToxNzo1NVrOGZa6Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNToxNzo1NVrOGZa6Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMwODQ5MA==", "bodyText": "This sentence is missing some pronouns, and the last sentence might be worded better.  Here's my attempt at a rewrite:\nIf an exception is thrown due to this call, it can imply that there may have been a partial\n\nupdate performed on the region. Use putAll from within a transaction to obtain\nan atomic update.", "url": "https://github.com/apache/geode/pull/5147#discussion_r429308490", "createdAt": "2020-05-22T15:17:55Z", "author": {"login": "karensmolermiller"}, "path": "geode-core/src/main/java/org/apache/geode/cache/Region.java", "diffHunk": "@@ -1359,10 +1359,30 @@ Object selectValue(String queryPredicate) throws FunctionDomainException, TypeMi\n    * in the specified map. This operation will be distributed to other caches if the scope is not\n    * <code>Scope.LOCAL</code>.\n    *\n-   * @param map the key/value pairs to put in this region.\n-   * @since GemFire 5.0\n+   * If any exception is thrown due to this call, it can imply that there may have been a partial\n+   * update performed on the region. Use putAll from within a transaction to get atomicity with all\n+   * the\n+   * entries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14cb54837f26a72b292b6cadfd82c17633dfb3d"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7511338193b620f6f09bbac0dd563a9fdee7d8ee", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/7511338193b620f6f09bbac0dd563a9fdee7d8ee", "committedDate": "2020-05-22T17:50:19Z", "message": "fix javadoc and add more cases for put"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51ce6e0ca38de615f2497c223f0bdf3026de7218", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/51ce6e0ca38de615f2497c223f0bdf3026de7218", "committedDate": "2020-05-23T03:09:43Z", "message": "add TimeoutException handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTgxMjA1", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-418581205", "createdAt": "2020-05-26T18:48:57Z", "commit": {"oid": "51ce6e0ca38de615f2497c223f0bdf3026de7218"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "854ec9c4d62395bfd79e4f9bd5d2b724bae6d212", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/854ec9c4d62395bfd79e4f9bd5d2b724bae6d212", "committedDate": "2020-05-26T21:09:01Z", "message": "update javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "683306d7cf132a4ea452960c52d212353cae88bc", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/683306d7cf132a4ea452960c52d212353cae88bc", "committedDate": "2020-05-26T21:15:01Z", "message": "remove the duplicated see java.util.Map#putAll"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4Njg3NTI5", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-418687529", "createdAt": "2020-05-26T21:20:13Z", "commit": {"oid": "683306d7cf132a4ea452960c52d212353cae88bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjA1NzM2", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-419605736", "createdAt": "2020-05-27T21:02:11Z", "commit": {"oid": "854ec9c4d62395bfd79e4f9bd5d2b724bae6d212"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMjoxMVrOGbdApA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMzo1MVrOGbdD3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0MDAzNg==", "bodyText": "Please slightly reword LeaseExpiredException (in BOTH putall signatures):\nif the lease expired on a distributed lock, for regions with Scope.GLOBAL", "url": "https://github.com/apache/geode/pull/5147#discussion_r431440036", "createdAt": "2020-05-27T21:02:11Z", "author": {"login": "karensmolermiller"}, "path": "geode-core/src/main/java/org/apache/geode/cache/Region.java", "diffHunk": "@@ -1362,49 +1362,77 @@ Object selectValue(String queryPredicate) throws FunctionDomainException, TypeMi\n    * <code>Scope.LOCAL</code>.\n    *\n    * If an exception is thrown due to this call, it can imply that there may have been a partial\n-   * update performed on the region. Use putAll from within a transaction to to obtain an atomic\n-   * update.\n+   * update performed on the region.\n    * <p>\n    *\n    * @see java.util.Map#putAll(Map map)\n-   * @param map the key/value pairs to put in this region.\n+   * @param map the key/value pairs to put in this region\n+   * @throws ServerOperationException if called from a client, and the server throws an exception\n+   *         such as CacheWriterException, PartitionedRegionStorageException or LowMemoryException.\n+   *         These server exceptions become the ServerOperationException cause\n+   * @throws ServerConnectivityException if called from a client, and the server throws\n+   *         CancelException. CancelException will be the ServerConnectivityException cause\n    * @throws NullPointerException if key is null or if value is null (use invalidate instead), or if\n    *         the key or value do not meet serializability requirements\n    * @throws ClassCastException if key does not satisfy the keyConstraint\n-   * @throws org.apache.geode.distributed.LeaseExpiredException if lease expired on distributed lock\n-   *         for Scope.GLOBAL\n-   * @throws TimeoutException if timed out getting distributed lock for Scope.GLOBAL\n+   * @throws org.apache.geode.distributed.LeaseExpiredException if lease expired on distributed\n+   *         lock for regions with Scope.GLOBAL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "854ec9c4d62395bfd79e4f9bd5d2b724bae6d212"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0MDg2Mw==", "bodyText": "Please slightly reword NullPointerException (in BOTH putAll signatures):\nif the key is null, if the value is null (use invalidate instead), or if the key or value do not meet serialization requirements", "url": "https://github.com/apache/geode/pull/5147#discussion_r431440863", "createdAt": "2020-05-27T21:03:51Z", "author": {"login": "karensmolermiller"}, "path": "geode-core/src/main/java/org/apache/geode/cache/Region.java", "diffHunk": "@@ -1362,49 +1362,77 @@ Object selectValue(String queryPredicate) throws FunctionDomainException, TypeMi\n    * <code>Scope.LOCAL</code>.\n    *\n    * If an exception is thrown due to this call, it can imply that there may have been a partial\n-   * update performed on the region. Use putAll from within a transaction to to obtain an atomic\n-   * update.\n+   * update performed on the region.\n    * <p>\n    *\n    * @see java.util.Map#putAll(Map map)\n-   * @param map the key/value pairs to put in this region.\n+   * @param map the key/value pairs to put in this region\n+   * @throws ServerOperationException if called from a client, and the server throws an exception\n+   *         such as CacheWriterException, PartitionedRegionStorageException or LowMemoryException.\n+   *         These server exceptions become the ServerOperationException cause\n+   * @throws ServerConnectivityException if called from a client, and the server throws\n+   *         CancelException. CancelException will be the ServerConnectivityException cause\n    * @throws NullPointerException if key is null or if value is null (use invalidate instead), or if\n    *         the key or value do not meet serializability requirements", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "854ec9c4d62395bfd79e4f9bd5d2b724bae6d212"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eefa198d688fb7a77bf84d8b348a66e6946fb21", "author": {"user": {"login": "gesterzhou", "name": "Xiaojian Zhou"}}, "url": "https://github.com/apache/geode/commit/6eefa198d688fb7a77bf84d8b348a66e6946fb21", "committedDate": "2020-05-27T21:22:08Z", "message": "fix based on karen's comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjMyODE5", "url": "https://github.com/apache/geode/pull/5147#pullrequestreview-419632819", "createdAt": "2020-05-27T21:47:20Z", "commit": {"oid": "6eefa198d688fb7a77bf84d8b348a66e6946fb21"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4572, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}