{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2ODQ3OTg2", "number": 5510, "title": "GEODE-8492: Redis 'clients' statistic goes negative", "bodyText": "When running a long running app, we noticed that our \"clients\" statistic was negative. It should always be greater than or equal to 0.\nIt seems like the call to decrement the number of clients was being invoked multiple times for each client.\nWe created an atomic boolean to manage the client's closed state.", "createdAt": "2020-09-14T19:55:39Z", "url": "https://github.com/apache/geode/pull/5510", "merged": true, "mergeCommit": {"oid": "f2ccbc8ae860fc018baba7cc8de7b5e01a22c606"}, "closed": true, "closedAt": "2020-09-16T16:31:06Z", "author": {"login": "sabbey37"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI4tlNAH2gAyNDg2ODQ3OTg2OmQwNDA2OThkMGEwNmMxZmNiYzEwNmY5NGIzZjRiNzc1ODI2MjllNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJcVA_gH2gAyNDg2ODQ3OTg2OmY5NzRiMTAxMmViYmJiODA3MGIyMTY5YzdiNDUxYWJiMTkyZjQyN2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d040698d0a06c1fcbc106f94b3f4b77582629e75", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/d040698d0a06c1fcbc106f94b3f4b77582629e75", "committedDate": "2020-09-14T19:53:06Z", "message": "GEODE-8492: Redis 'clients' statistic goes negative"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTAwNTI5", "url": "https://github.com/apache/geode/pull/5510#pullrequestreview-488100529", "createdAt": "2020-09-14T20:04:07Z", "commit": {"oid": "d040698d0a06c1fcbc106f94b3f4b77582629e75"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDowNDowN1rOHRkqOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDowNDowN1rOHRkqOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE4ODQ3NQ==", "bodyText": "add visible for testing", "url": "https://github.com/apache/geode/pull/5510#discussion_r488188475", "createdAt": "2020-09-14T20:04:07Z", "author": {"login": "dschneider-pivotal"}, "path": "geode-redis/src/main/java/org/apache/geode/redis/internal/RedisStats.java", "diffHunk": "@@ -177,6 +177,10 @@ public void removeClient() {\n     stats.incLong(clientId, -1);\n   }\n \n+  public long getClients() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d040698d0a06c1fcbc106f94b3f4b77582629e75"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f5ae6c960778cf15135ba8e6abf1f7810db1956", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/7f5ae6c960778cf15135ba8e6abf1f7810db1956", "committedDate": "2020-09-14T20:06:45Z", "message": "Marks getClients method as VisibleForTesting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTA0Mjg2", "url": "https://github.com/apache/geode/pull/5510#pullrequestreview-488104286", "createdAt": "2020-09-14T20:09:42Z", "commit": {"oid": "7f5ae6c960778cf15135ba8e6abf1f7810db1956"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489b111ca5c47a551284e24d52723825869dadc1", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/489b111ca5c47a551284e24d52723825869dadc1", "committedDate": "2020-09-15T21:35:48Z", "message": "Creates separate RedisStatsIntegrationTest file"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00cc338b5582d406bde6018e76a91cbd1592e6f0", "author": {"user": {"login": "dschneider-pivotal", "name": "Darrel Schneider"}}, "url": "https://github.com/apache/geode/commit/00cc338b5582d406bde6018e76a91cbd1592e6f0", "committedDate": "2020-09-15T00:43:26Z", "message": "now only the stat is conditionally changed in channelInactive"}, "afterCommit": {"oid": "489b111ca5c47a551284e24d52723825869dadc1", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/489b111ca5c47a551284e24d52723825869dadc1", "committedDate": "2020-09-15T21:35:48Z", "message": "Creates separate RedisStatsIntegrationTest file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95962af792b9fc1b4b5a88e9f0796ebf0327bf7e", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/95962af792b9fc1b4b5a88e9f0796ebf0327bf7e", "committedDate": "2020-09-15T21:38:05Z", "message": "spA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f974b1012ebbbb8070b2169c7b451abb192f427d", "author": {"user": {"login": "sabbey37", "name": "Sarah"}}, "url": "https://github.com/apache/geode/commit/f974b1012ebbbb8070b2169c7b451abb192f427d", "committedDate": "2020-09-16T13:22:51Z", "message": "Adds license to new test file"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4211, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}