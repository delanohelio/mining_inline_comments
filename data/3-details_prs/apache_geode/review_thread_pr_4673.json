{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMTM4NzEx", "number": 4673, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMTo1NTo0OVrODd2A8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowMzozOFrODd30NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjIwMjc0OnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMTo1NTo0OVrOFmrlCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwNToxNzozN1rOFmyiWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEwNDIwMw==", "bodyText": "Would groupInfo be a better name for this field (and the corresponding getter and setter)?", "url": "https://github.com/apache/geode/pull/4673#discussion_r376104203", "createdAt": "2020-02-06T21:55:49Z", "author": {"login": "demery-pivotal"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "diffHunk": "@@ -39,13 +40,13 @@\n   private String id;\n   @JsonInclude\n   @JsonProperty\n-  private List<EntityGroupInfo<T, R>> configurationByGroup = new ArrayList<>();\n+  private List<EntityGroupInfo<T, R>> groups = new ArrayList<>();\n \n   public EntityInfo() {}\n \n-  public EntityInfo(String id, List<EntityGroupInfo<T, R>> configurationByGroup) {\n+  public EntityInfo(String id, List<EntityGroupInfo<T, R>> groups) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIxODIwMQ==", "bodyText": "I think \"id\" and \"groups\" seem to go together in this class. I would prefer to make the keys of the json short.", "url": "https://github.com/apache/geode/pull/4673#discussion_r376218201", "createdAt": "2020-02-07T05:17:37Z", "author": {"login": "jinmeiliao"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "diffHunk": "@@ -39,13 +40,13 @@\n   private String id;\n   @JsonInclude\n   @JsonProperty\n-  private List<EntityGroupInfo<T, R>> configurationByGroup = new ArrayList<>();\n+  private List<EntityGroupInfo<T, R>> groups = new ArrayList<>();\n \n   public EntityInfo() {}\n \n-  public EntityInfo(String id, List<EntityGroupInfo<T, R>> configurationByGroup) {\n+  public EntityInfo(String id, List<EntityGroupInfo<T, R>> groups) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEwNDIwMw=="}, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjIwNDYwOnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMTo1NjoyNlrOFmrmMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMTo1NjoyNlrOFmrmMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEwNDQ5Nw==", "bodyText": "Whatever you decide to name the field, change the label here to match.", "url": "https://github.com/apache/geode/pull/4673#discussion_r376104497", "createdAt": "2020-02-06T21:56:26Z", "author": {"login": "demery-pivotal"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "diffHunk": "@@ -88,19 +97,19 @@ public boolean equals(Object o) {\n     }\n     EntityInfo<?, ?> that = (EntityInfo<?, ?>) o;\n     return Objects.equals(id, that.id) &&\n-        Objects.equals(configurationByGroup, that.configurationByGroup);\n+        Objects.equals(groups, that.groups);\n   }\n \n   @Override\n   public int hashCode() {\n-    return Objects.hash(id, configurationByGroup);\n+    return Objects.hash(id, groups);\n   }\n \n   @Override\n   public String toString() {\n     return \"ConfigurationInfo{\" +\n         \"id='\" + id + '\\'' +\n-        \", configurationByGroup=\" + configurationByGroup +\n+        \", configurationByGroup=\" + groups +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjQ4Nzk1OnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/api/ClusterManagementListResult.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo1ODo0MlrOFmuT4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo1ODo0MlrOFmuT4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0ODk2Mw==", "bodyText": "result and results don't seem like good names. How about entityGroupInfo and entityGroupInfos?", "url": "https://github.com/apache/geode/pull/4673#discussion_r376148963", "createdAt": "2020-02-06T23:58:42Z", "author": {"login": "dschneider-pivotal"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/ClusterManagementListResult.java", "diffHunk": "@@ -34,50 +34,72 @@\n @Experimental\n public class ClusterManagementListResult<T extends AbstractConfiguration<R>, R extends RuntimeInfo>\n     extends ClusterManagementResult {\n-  /**\n-   * for internal use only\n-   */\n+\n   public ClusterManagementListResult() {}\n \n-  /**\n-   * for internal use only\n-   */\n   public ClusterManagementListResult(StatusCode statusCode, String message) {\n     super(statusCode, message);\n   }\n \n-  // Override the mapper setting so that we always show result\n-  @JsonInclude\n-  @JsonProperty\n-  private List<EntityGroupInfo<T, R>> result = new ArrayList<>();\n+  private Map<String, EntityInfo<T, R>> entities = new HashMap<>();\n \n   /**\n    * Returns the combined payload of the list call\n    */\n-  public List<EntityGroupInfo<T, R>> getResult() {\n-    return result;\n+  @JsonIgnore\n+  public List<EntityGroupInfo<T, R>> getEntityGroupInfo() {\n+    return entities.values().stream()\n+        .flatMap(x -> x.getGroups().stream())\n+        .collect(Collectors.toList());\n+  }\n+\n+  // this annotation makes sure we always show the result even though it's an empty list\n+  @JsonInclude\n+  public List<EntityInfo<T, R>> getResult() {\n+    return entities.values().stream().collect(Collectors.toList());\n+  }\n+\n+  public void setResult(List<EntityInfo<T, R>> entities) {\n+    this.entities.clear();\n+    for (EntityInfo entity : entities) {\n+      this.entities.put(entity.getId(), entity);\n+    }\n+  }\n+\n+  public void addEntityInfo(EntityInfo<T, R> entityInfo) {\n+    this.entities.put(entityInfo.getId(), entityInfo);\n+  }\n+\n+  @JsonIgnore\n+  public void setEntityGroupInfo(List<EntityGroupInfo<T, R>> results) {\n+    this.entities.clear();\n+    for (EntityGroupInfo result : results) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjQ5NTIwOnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowMjoxMVrOFmuYDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowMjoxMVrOFmuYDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE1MDAyOQ==", "bodyText": "groups.isEmpty() is a little better", "url": "https://github.com/apache/geode/pull/4673#discussion_r376150029", "createdAt": "2020-02-07T00:02:11Z", "author": {"login": "dschneider-pivotal"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/EntityInfo.java", "diffHunk": "@@ -56,28 +57,36 @@ public void setId(String id) {\n     this.id = id;\n   }\n \n-  public List<EntityGroupInfo<T, R>> getConfigurationByGroup() {\n-    return configurationByGroup;\n+  public List<EntityGroupInfo<T, R>> getGroups() {\n+    return groups;\n   }\n \n-  public void setConfigurationByGroup(List<EntityGroupInfo<T, R>> configurationByGroup) {\n-    this.configurationByGroup = configurationByGroup;\n+  public void setGroups(List<EntityGroupInfo<T, R>> groups) {\n+    this.groups = groups;\n   }\n \n   @JsonIgnore\n   public List<T> getConfigurations() {\n-    return configurationByGroup.stream()\n+    return groups.stream()\n         .map(EntityGroupInfo::getConfiguration)\n         .collect(toList());\n   }\n \n   @JsonIgnore\n   public List<R> getRuntimeInfos() {\n-    return configurationByGroup.stream()\n+    return groups.stream()\n         .flatMap(r -> r.getRuntimeInfo().stream())\n         .collect(toList());\n   }\n \n+  @JsonProperty(access = JsonProperty.Access.READ_ONLY)\n+  public Links getLinks() {\n+    if (groups.size() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjQ5NzgwOnYy", "diffSide": "RIGHT", "path": "geode-management/src/main/java/org/apache/geode/management/api/ClusterManagementListResult.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowMzozOFrOFmuZsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowMzozOFrOFmuZsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE1MDQ0OA==", "bodyText": "make this \"final\" if this is the only assignment", "url": "https://github.com/apache/geode/pull/4673#discussion_r376150448", "createdAt": "2020-02-07T00:03:38Z", "author": {"login": "dschneider-pivotal"}, "path": "geode-management/src/main/java/org/apache/geode/management/api/ClusterManagementListResult.java", "diffHunk": "@@ -34,50 +34,72 @@\n @Experimental\n public class ClusterManagementListResult<T extends AbstractConfiguration<R>, R extends RuntimeInfo>\n     extends ClusterManagementResult {\n-  /**\n-   * for internal use only\n-   */\n+\n   public ClusterManagementListResult() {}\n \n-  /**\n-   * for internal use only\n-   */\n   public ClusterManagementListResult(StatusCode statusCode, String message) {\n     super(statusCode, message);\n   }\n \n-  // Override the mapper setting so that we always show result\n-  @JsonInclude\n-  @JsonProperty\n-  private List<EntityGroupInfo<T, R>> result = new ArrayList<>();\n+  private Map<String, EntityInfo<T, R>> entities = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3981de9fdc42a5c14ce36533e6838d3ebd6963ab"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3749, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}