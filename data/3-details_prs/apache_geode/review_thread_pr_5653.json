{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4MzgwMzE4", "number": 5653, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTozMDowOFrOEyJd7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTo0NjozOFrOEyJqGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE5MzczOnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTozMDowOFrOHooJyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjo1NDowMlrOHotlEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM2Mjk1Mg==", "bodyText": "Can we restrict the access to package protected if we remove the private restriction.\nCould we possibly also rename the method to \"calculateTimeToSleep\", as it is clearer than the current method name.", "url": "https://github.com/apache/geode/pull/5653#discussion_r512362952", "createdAt": "2020-10-27T01:30:08Z", "author": {"login": "kohlmu-pivotal"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "diffHunk": "@@ -1393,7 +1393,11 @@ private boolean areAllTransactionsCompleteInBatch(Map incompleteTransactions) {\n     return (incompleteTransactions.size() == 0);\n   }\n \n-  private long getTimeToSleep(long timeToWait) {\n+  @VisibleForTesting\n+  public static long getTimeToSleep(long timeToWait) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5c8e88cfa63c33573e071c365aaad8c8f0980fb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ1MTg1Nw==", "bodyText": "Good points, thanks.", "url": "https://github.com/apache/geode/pull/5653#discussion_r512451857", "createdAt": "2020-10-27T06:54:02Z", "author": {"login": "albertogpz"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "diffHunk": "@@ -1393,7 +1393,11 @@ private boolean areAllTransactionsCompleteInBatch(Map incompleteTransactions) {\n     return (incompleteTransactions.size() == 0);\n   }\n \n-  private long getTimeToSleep(long timeToWait) {\n+  @VisibleForTesting\n+  public static long getTimeToSleep(long timeToWait) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM2Mjk1Mg=="}, "originalCommit": {"oid": "b5c8e88cfa63c33573e071c365aaad8c8f0980fb"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDIyNDg4OnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTo0NjozOFrOHoobyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjo1NDowOVrOHotlUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM2NzU2MA==", "bodyText": "surely this logic could be timeToWait <= 0.\nIf so, can we amend and add a test.", "url": "https://github.com/apache/geode/pull/5653#discussion_r512367560", "createdAt": "2020-10-27T01:46:38Z", "author": {"login": "kohlmu-pivotal"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "diffHunk": "@@ -1393,7 +1393,11 @@ private boolean areAllTransactionsCompleteInBatch(Map incompleteTransactions) {\n     return (incompleteTransactions.size() == 0);\n   }\n \n-  private long getTimeToSleep(long timeToWait) {\n+  @VisibleForTesting\n+  public static long getTimeToSleep(long timeToWait) {\n+    if (timeToWait < 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5c8e88cfa63c33573e071c365aaad8c8f0980fb"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ1MTkyMQ==", "bodyText": "Agree.", "url": "https://github.com/apache/geode/pull/5653#discussion_r512451921", "createdAt": "2020-10-27T06:54:09Z", "author": {"login": "albertogpz"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/parallel/ParallelGatewaySenderQueue.java", "diffHunk": "@@ -1393,7 +1393,11 @@ private boolean areAllTransactionsCompleteInBatch(Map incompleteTransactions) {\n     return (incompleteTransactions.size() == 0);\n   }\n \n-  private long getTimeToSleep(long timeToWait) {\n+  @VisibleForTesting\n+  public static long getTimeToSleep(long timeToWait) {\n+    if (timeToWait < 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM2NzU2MA=="}, "originalCommit": {"oid": "b5c8e88cfa63c33573e071c365aaad8c8f0980fb"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4571, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}