{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MzM5NTk0", "number": 5770, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozNjozNVrOE-w5ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzo1MjoyNlrOE-xTjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjQ4MjkzOnYy", "diffSide": "RIGHT", "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/serial/SerialGatewaySenderEventProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozNjozNVrOH8GHXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozNjozNVrOH8GHXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc3Njc5Ng==", "bodyText": "This change is because the CacheListener to handle the unprocessedEventsMap is set here, hence I wanted the listener to be up and running before the map is initialized so that no events are missed because they were put in the map before the listener was running.", "url": "https://github.com/apache/geode/pull/5770#discussion_r532776796", "createdAt": "2020-11-30T17:36:35Z", "author": {"login": "nabarunnag"}, "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/serial/SerialGatewaySenderEventProcessor.java", "diffHunk": "@@ -111,10 +111,9 @@ public SerialGatewaySenderEventProcessor(AbstractGatewaySender sender, String id\n       ThreadsMonitoring tMonitoring, boolean cleanQueues) {\n     super(\"Event Processor for GatewaySender_\" + id, sender, tMonitoring);\n \n+    initializeMessageQueue(id, cleanQueues);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "119f99323a995d7bef129364380f63a76f3150d3"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjU0OTg5OnYy", "diffSide": "RIGHT", "path": "geode-wan/src/distributedTest/java/org/apache/geode/internal/cache/wan/serial/SerialWANPersistenceEnabledGatewaySenderDUnitTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzo1MjoyNlrOH8GwVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMTozMDoyNFrOH8UkMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc4NzI4Nw==", "bodyText": "Instead of using the logger in this test to track progress, you could instead use the invoke() method signature that passes a String description/name as the first parameter, which allows anyone debugging the test to see when the invocation in question starts and finishes. Just personal preference, but I think it makes things neater and provides a little more information to anyone looking at the test output.", "url": "https://github.com/apache/geode/pull/5770#discussion_r532787287", "createdAt": "2020-11-30T17:52:26Z", "author": {"login": "DonalEvans"}, "path": "geode-wan/src/distributedTest/java/org/apache/geode/internal/cache/wan/serial/SerialWANPersistenceEnabledGatewaySenderDUnitTest.java", "diffHunk": "@@ -603,27 +605,32 @@ public void testReplicatedRegionPersistentWanGateway_restartSenderWithCleanQueue\n     vm7.invoke(() -> WANTestBase.createPersistentReplicatedRegion(getTestMethodName() + \"_RR\", \"ln\",\n         isOffHeap()));\n \n+    vm4.invoke(() -> WANTestBase.pauseSender(\"ln\"));\n+    vm5.invoke(() -> WANTestBase.pauseSender(\"ln\"));\n+\n     vm4.invoke(() -> WANTestBase.doPuts(getTestMethodName() + \"_RR\", 1000));\n \n     logger.info(\"Completed puts in the region\");\n \n     vm4.invoke(() -> WANTestBase.stopSender(\"ln\"));\n     vm5.invoke(() -> WANTestBase.stopSender(\"ln\"));\n \n-    logger.info(\"Stopped all the senders. \");\n \n-    // Create receiver on remote site\n-    createReceiverInVMs(vm2, vm3);\n+    logger.info(\"Stopped all the senders. \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "119f99323a995d7bef129364380f63a76f3150d3"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAxMzU1Mw==", "bodyText": "A valid point Donal. I am creating another GEODE ticket to just remove all the logger.info in tests. There are a couple of more statements that went in other commits.", "url": "https://github.com/apache/geode/pull/5770#discussion_r533013553", "createdAt": "2020-12-01T01:30:24Z", "author": {"login": "nabarunnag"}, "path": "geode-wan/src/distributedTest/java/org/apache/geode/internal/cache/wan/serial/SerialWANPersistenceEnabledGatewaySenderDUnitTest.java", "diffHunk": "@@ -603,27 +605,32 @@ public void testReplicatedRegionPersistentWanGateway_restartSenderWithCleanQueue\n     vm7.invoke(() -> WANTestBase.createPersistentReplicatedRegion(getTestMethodName() + \"_RR\", \"ln\",\n         isOffHeap()));\n \n+    vm4.invoke(() -> WANTestBase.pauseSender(\"ln\"));\n+    vm5.invoke(() -> WANTestBase.pauseSender(\"ln\"));\n+\n     vm4.invoke(() -> WANTestBase.doPuts(getTestMethodName() + \"_RR\", 1000));\n \n     logger.info(\"Completed puts in the region\");\n \n     vm4.invoke(() -> WANTestBase.stopSender(\"ln\"));\n     vm5.invoke(() -> WANTestBase.stopSender(\"ln\"));\n \n-    logger.info(\"Stopped all the senders. \");\n \n-    // Create receiver on remote site\n-    createReceiverInVMs(vm2, vm3);\n+    logger.info(\"Stopped all the senders. \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc4NzI4Nw=="}, "originalCommit": {"oid": "119f99323a995d7bef129364380f63a76f3150d3"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4522, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}