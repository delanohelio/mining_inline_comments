{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MTU1MTQy", "number": 4893, "title": "GEODE-7920: Geode UDP INT thread found processing cache operations", "bodyText": "Modified DistributionMessage to look for JGroups \"internal\" executor\nthreads.  We thought we'd turned off all JGroups thread pools but this\none is still around.  We don't want to process DistributionMessages in\nthese threads unless absolutely necessary since they're needed when\nprocessing incoming messages.\nThank you for submitting a contribution to Apache Geode.\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n\n Is there a JIRA ticket associated with this PR? Is it referenced in the commit message?\n\n\n Has your PR been rebased against the latest commit within the target branch (typically develop)?\n\n\n Is your initial contribution a single, squashed commit?\n\n\n Does gradlew build run cleanly?\n\n\n Have you written or updated unit tests to verify your changes?\n\n\n If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under ASF 2.0?\n\n\nNote:\nPlease ensure that once the PR is submitted, check Concourse for build issues and\nsubmit an update to your PR as soon as possible. If you need help, please send an\nemail to dev@geode.apache.org.", "createdAt": "2020-04-01T18:16:30Z", "url": "https://github.com/apache/geode/pull/4893", "merged": true, "mergeCommit": {"oid": "6312b324ddc1e99337f3ebf37a9775a53af0aa86"}, "closed": true, "closedAt": "2020-04-03T15:28:21Z", "author": {"login": "bschuchardt"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTbv7lAH2gAyMzk3MTU1MTQyOjhmMjRhYmJjN2JhZGUzZjhlNjVhNTJhMWEwNDAyMzQzZTEyYmEyYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTdrRIgFqTM4NTkyMjg0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f24abbc7bade3f8e65a52a1a0402343e12ba2b5", "author": {"user": {"login": "bschuchardt", "name": "Bruce Schuchardt"}}, "url": "https://github.com/apache/geode/commit/8f24abbc7bade3f8e65a52a1a0402343e12ba2b5", "committedDate": "2020-04-01T18:10:26Z", "message": "GEODE-7920: Geode UDP INT thread found processing cache operations\n\nModified DistributionMessage to look for JGroups \"internal\" executor\nthreads.  We thought we'd turned off all JGroups thread pools but this\none is still around.  We don't want to process DistributionMessages in\nthese threads unless absolutely necessary since they're needed when\nprocessing incoming messages."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODQ5NDMw", "url": "https://github.com/apache/geode/pull/4893#pullrequestreview-385849430", "createdAt": "2020-04-01T18:37:52Z", "commit": {"oid": "8f24abbc7bade3f8e65a52a1a0402343e12ba2b5"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODozNzo1MlrOF_Nn0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODo0MTowM1rOF_NvUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyNzc5NQ==", "bodyText": "the old name was very creative, but a bit subjective... like the rename", "url": "https://github.com/apache/geode/pull/4893#discussion_r401827795", "createdAt": "2020-04-01T18:37:52Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/main/java/org/apache/geode/distributed/internal/DistributionMessage.java", "diffHunk": "@@ -476,13 +477,19 @@ protected boolean mayNotifySerialGatewaySender(ClusterDistributionManager dm) {\n   }\n \n   /**\n-   * returns true if the current thread should not be used for inline processing. i.e., it is a\n-   * \"precious\" resource\n+   * returns true if the current thread should not be used for inline processing because it\n+   * is responsible for reading geode-membership messages. Blocking such a thread can cause\n+   * a server to be kicked out\n    */\n-  public static boolean isPreciousThread() {\n+  public static boolean isMembershipMessengerThread() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f24abbc7bade3f8e65a52a1a0402343e12ba2b5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyODQ5NA==", "bodyText": "looks like some dead code cruft ... maybe we scrape it off while we're nearby", "url": "https://github.com/apache/geode/pull/4893#discussion_r401828494", "createdAt": "2020-04-01T18:39:00Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/main/java/org/apache/geode/distributed/internal/ShutdownMessage.java", "diffHunk": "@@ -79,7 +79,7 @@ protected void process(final ClusterDistributionManager dm) {\n     // reply.setRecipient(getSender());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f24abbc7bade3f8e65a52a1a0402343e12ba2b5"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyOTcxNA==", "bodyText": "is/was there a failing test that caught the underlying issue?", "url": "https://github.com/apache/geode/pull/4893#discussion_r401829714", "createdAt": "2020-04-01T18:41:03Z", "author": {"login": "echobravopapa"}, "path": "geode-core/src/test/java/org/apache/geode/distributed/internal/DistributionMessageTest.java", "diffHunk": "@@ -35,4 +39,12 @@ public void shouldBeMockable() throws Exception {\n \n     verify(mockDistributionMessage, times(1)).setReplySender(mockReplySender);\n   }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f24abbc7bade3f8e65a52a1a0402343e12ba2b5"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f8c74b8993c450551658aa744d3dab7d96a0a73", "author": {"user": {"login": "bschuchardt", "name": "Bruce Schuchardt"}}, "url": "https://github.com/apache/geode/commit/6f8c74b8993c450551658aa744d3dab7d96a0a73", "committedDate": "2020-04-01T20:09:56Z", "message": "removing commented-out code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTIyODQz", "url": "https://github.com/apache/geode/pull/4893#pullrequestreview-385922843", "createdAt": "2020-04-01T20:25:09Z", "commit": {"oid": "6f8c74b8993c450551658aa744d3dab7d96a0a73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4727, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}