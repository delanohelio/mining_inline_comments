{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNjEyMDM4", "number": 2004, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwMzo1OToyN1rODk57ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDoxNjo1NFrODk6D4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDI0NDI2OnYy", "diffSide": "RIGHT", "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwMzo1OToyN1rOFxfUYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwMzo1OToyN1rOFxfUYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzY2NA==", "bodyText": "As far as I remember (not sure) String.format is slower than concatenation due to regex (which is slow).\nI would just rewrite it like: sb.append(\">\").append(levels[i - 1]).append(\": \").append(counts[i]).append(\"; \").append(System.lineSeparator()); to make sure that we have the best performance here. Actually string concatanation is compiled into a sequence of .append by the compiler but I am not sure how it compiles string concatanations which a passed into string builder. So, as for me the safest code would be to write sequance of .append chain here instead of plain string concatanations or String.format.", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437664", "createdAt": "2020-03-04T03:59:27Z", "author": {"login": "porunov"}, "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "diffHunk": "@@ -215,11 +215,11 @@ private void printHistogram(StringBuilder sb, int[] levels, int[] counts) {\n         int i;\n         for (i = 0; i < levels.length; i++) {\n             if (counts[i] > 0) {\n-                sb.append(\"<=\" + levels[i] + \": \" + counts[i] + \"; \");\n+                sb.append(String.format(\"<=%d: %d; \", levels[i], counts[i]));\n             }\n         }\n         if (counts[i] > 0) {\n-            sb.append(\">\" + levels[i - 1] + \": \" + counts[i] + \"; \").append(System.lineSeparator());\n+            sb.append(String.format(\">%d: %d; \", levels[i - 1], counts[i])).append(System.lineSeparator());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDI0NDk0OnYy", "diffSide": "RIGHT", "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDowMDowNlrOFxfUyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDowMDowNlrOFxfUyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzc3MA==", "bodyText": "Same here. I would use sequence of .append instead of String.format", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437770", "createdAt": "2020-03-04T04:00:06Z", "author": {"login": "porunov"}, "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "diffHunk": "@@ -215,11 +215,11 @@ private void printHistogram(StringBuilder sb, int[] levels, int[] counts) {\n         int i;\n         for (i = 0; i < levels.length; i++) {\n             if (counts[i] > 0) {\n-                sb.append(\"<=\" + levels[i] + \": \" + counts[i] + \"; \");\n+                sb.append(String.format(\"<=%d: %d; \", levels[i], counts[i]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDI0NjQxOnYy", "diffSide": "RIGHT", "path": "janusgraph-examples/example-common/src/main/java/org/janusgraph/example/JanusGraphApp.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDowMToxMFrOFxfVqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDowMToxMFrOFxfVqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzk5Mw==", "bodyText": "Same here. Try to avoid usage of String.format", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437993", "createdAt": "2020-03-04T04:01:10Z", "author": {"login": "porunov"}, "path": "janusgraph-examples/example-common/src/main/java/org/janusgraph/example/JanusGraphApp.java", "diffHunk": "@@ -219,10 +219,12 @@ protected String createSchemaRequest() {\n \n         // mixed indexes\n         if (useMixedIndex) {\n-            s.append(\"management.buildIndex(\\\"vAge\\\", Vertex.class).addKey(age).buildMixedIndex(\\\"\" + mixedIndexConfigName\n-                    + \"\\\"); \");\n-            s.append(\"management.buildIndex(\\\"eReasonPlace\\\", Edge.class).addKey(reason).addKey(place).buildMixedIndex(\\\"\"\n-                    + mixedIndexConfigName + \"\\\"); \");\n+            s.append(String.format(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDI1NzE2OnYy", "diffSide": "RIGHT", "path": "janusgraph-core/src/main/java/org/janusgraph/util/datastructures/RandomRemovalList.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDoxMDoxMVrOFxfcKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMTo1Njo0MlrOFx_HIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzOTY1Nw==", "bodyText": "I would also moved this whole class into janusgraph-test because it is used only for tests.", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387439657", "createdAt": "2020-03-04T04:10:11Z", "author": {"login": "porunov"}, "path": "janusgraph-core/src/main/java/org/janusgraph/util/datastructures/RandomRemovalList.java", "diffHunk": "@@ -134,7 +134,10 @@ public boolean contains(Object o) {\n     public boolean containsAll(Collection<?> c) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk1ODU2MQ==", "bodyText": "I removed the class complete.", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387958561", "createdAt": "2020-03-04T21:56:42Z", "author": {"login": "farodin91"}, "path": "janusgraph-core/src/main/java/org/janusgraph/util/datastructures/RandomRemovalList.java", "diffHunk": "@@ -134,7 +134,10 @@ public boolean contains(Object o) {\n     public boolean containsAll(Collection<?> c) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzOTY1Nw=="}, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDI2NTkzOnYy", "diffSide": "LEFT", "path": ".editorconfig", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNDoxNjo1NFrOFxfhlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzoyMDo0MlrOFxiP4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ0MTA0Ng==", "bodyText": "I am not familiar with .editorconfig but why is it removed?", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387441046", "createdAt": "2020-03-04T04:16:54Z", "author": {"login": "porunov"}, "path": ".editorconfig", "diffHunk": "@@ -6,11 +6,3 @@ root = true\n charset = utf-8\n indent_style = space\n indent_size = 4\n-\n-[*.java]\n-indent_style = space\n-indent_size = 4\n-\n-[*.xml,*.xslt]\n-indent_style = space\n-indent_size = 4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4NTY2NQ==", "bodyText": "Same config as the first config which include all files.", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387485665", "createdAt": "2020-03-04T07:20:42Z", "author": {"login": "farodin91"}, "path": ".editorconfig", "diffHunk": "@@ -6,11 +6,3 @@ root = true\n charset = utf-8\n indent_style = space\n indent_size = 4\n-\n-[*.java]\n-indent_style = space\n-indent_size = 4\n-\n-[*.xml,*.xslt]\n-indent_style = space\n-indent_size = 4", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ0MTA0Ng=="}, "originalCommit": {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1548, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}