{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxOTQ5ODky", "number": 1949, "title": "Set RelationTypeIndex status to ENABLED when the index uses a new key", "bodyText": "This solves #1947 and also fixes one line that should have been refactored in #1190 (PR #1192)\nPreviously, creating a relation type index enforced a reindex operation in order to enable the index, even if one of the sort keys has been newly created within the same management transaction. Analogous to the handling of global indexes, this PR solves the issue and enables the index right away if it contains at least one new key and therefore is empty at creation time.\n\nThank you for contributing to JanusGraph!\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n Is there an issue associated with this PR? Is it referenced in the commit message?\n Does your PR body contain #xyz where xyz is the issue number you are trying to resolve?\n Has your PR been rebased against the latest commit within the target branch (typically master)?\n Is your initial contribution a single, squashed commit?\n\nFor code changes:\n\n Have you written and/or updated unit tests to verify your changes?", "createdAt": "2020-02-06T15:07:21Z", "url": "https://github.com/JanusGraph/janusgraph/pull/1949", "merged": true, "mergeCommit": {"oid": "59eec9d6a8eb22f88c07eb7edfd2a90c3f994e29"}, "closed": true, "closedAt": "2020-02-12T03:15:14Z", "author": {"login": "rngcntr"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB8QDtgFqTM1NTA0MTM2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDUvhoAFqTM1NjgyNzk4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDQxMzY3", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#pullrequestreview-355041367", "createdAt": "2020-02-07T09:51:51Z", "commit": {"oid": "426060e5222d644fe7407d97509255a1a44403a7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "426060e5222d644fe7407d97509255a1a44403a7", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/426060e5222d644fe7407d97509255a1a44403a7", "committedDate": "2020-02-06T15:00:02Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}, "afterCommit": {"oid": "51fba8fbddcd3e94ece5f400c5efad1943650af6", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/51fba8fbddcd3e94ece5f400c5efad1943650af6", "committedDate": "2020-02-10T08:02:46Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODAxOTA0", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#pullrequestreview-355801904", "createdAt": "2020-02-10T09:48:50Z", "commit": {"oid": "51fba8fbddcd3e94ece5f400c5efad1943650af6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwOTo0ODo1MFrOFnfo3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwOTo0OToxOFrOFnfp5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk1NzE0OA==", "bodyText": "has -> have", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#discussion_r376957148", "createdAt": "2020-02-10T09:48:50Z", "author": {"login": "FlorianHockmann"}, "path": "docs/index-management/index-performance.md", "diffHunk": "@@ -445,10 +445,10 @@ range/interval constraints.\n     The types that are currently supported are `Boolean`, `UUID`, `Byte`, `Float`, `Long`, `String`, \n     `Integer`, `Date`, `Double`, `Character`, and `Short`\n \n-If the vertex-centric index is built against an edge label that is\n-defined in the same management transaction, the index will be\n-immediately available for querying. If the edge label has already been\n-in use, building a vertex-centric index against it requires the\n+If the vertex-centric index is built against an either edge label or at least one\n+property key that is defined in the same management transaction, the index will be\n+immediately available for querying. If both the edge label and all of the indexed\n+property keys has already been in use, building a vertex-centric index against it requires the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51fba8fbddcd3e94ece5f400c5efad1943650af6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk1NzQxMw==", "bodyText": "against an either edge label or -> against either an edge label or", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#discussion_r376957413", "createdAt": "2020-02-10T09:49:18Z", "author": {"login": "FlorianHockmann"}, "path": "docs/index-management/index-performance.md", "diffHunk": "@@ -445,10 +445,10 @@ range/interval constraints.\n     The types that are currently supported are `Boolean`, `UUID`, `Byte`, `Float`, `Long`, `String`, \n     `Integer`, `Date`, `Double`, `Character`, and `Short`\n \n-If the vertex-centric index is built against an edge label that is\n-defined in the same management transaction, the index will be\n-immediately available for querying. If the edge label has already been\n-in use, building a vertex-centric index against it requires the\n+If the vertex-centric index is built against an either edge label or at least one", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51fba8fbddcd3e94ece5f400c5efad1943650af6"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51fba8fbddcd3e94ece5f400c5efad1943650af6", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/51fba8fbddcd3e94ece5f400c5efad1943650af6", "committedDate": "2020-02-10T08:02:46Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}, "afterCommit": {"oid": "a82c92e0401469ef33bb1aead9eea3ac76456227", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/a82c92e0401469ef33bb1aead9eea3ac76456227", "committedDate": "2020-02-10T10:11:02Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce", "committedDate": "2020-02-10T10:13:51Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a82c92e0401469ef33bb1aead9eea3ac76456227", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/a82c92e0401469ef33bb1aead9eea3ac76456227", "committedDate": "2020-02-10T10:11:02Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}, "afterCommit": {"oid": "3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce", "author": {"user": {"login": "rngcntr", "name": null}}, "url": "https://github.com/JanusGraph/janusgraph/commit/3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce", "committedDate": "2020-02-10T10:13:51Z", "message": "Fix uncritical behavior missed in #1192\n\nImplement check on newly created sort keys #1947\n\nThis includes test cases for different combinations of existing and new edge\nlabels and property keys.\n\nSigned-off-by: Florian Grieskamp <florian.grieskamp@gdata.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODIzMTMy", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#pullrequestreview-355823132", "createdAt": "2020-02-10T10:20:28Z", "commit": {"oid": "3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODI3OTg0", "url": "https://github.com/JanusGraph/janusgraph/pull/1949#pullrequestreview-356827984", "createdAt": "2020-02-11T16:57:52Z", "commit": {"oid": "3ea591360b7cfa0dffdb90ae0eb60cef59cca1ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4810, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}