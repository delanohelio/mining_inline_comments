{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MDU0NzYz", "number": 2310, "title": "Use testcontainers for solr", "bodyText": "Fixes #1472\nPart of #2260\nFYI: kerberos tests are disabled as before on travis ci. I will create a ticket to activate kerberos tests again. #2311\nSigned-off-by: Jan Jansen jan.jansen@gdata.de\n\nThank you for contributing to JanusGraph!\nIn order to streamline the review of the contribution we ask you\nto ensure the following steps have been taken:\nFor all changes:\n\n Is there an issue associated with this PR? Is it referenced in the commit message?\n Does your PR body contain #xyz where xyz is the issue number you are trying to resolve?\n Has your PR been rebased against the latest commit within the target branch (typically master)?\n Is your initial contribution a single, squashed commit?\n\nFor code changes:\n\n Have you written and/or updated unit tests to verify your changes?", "createdAt": "2020-12-28T11:26:09Z", "url": "https://github.com/JanusGraph/janusgraph/pull/2310", "merged": true, "mergeCommit": {"oid": "36a43a5bcd1ca8e8fdcabd6d1f55c9665ee8fde0"}, "closed": true, "closedAt": "2020-12-30T06:58:04Z", "author": {"login": "farodin91"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqkljHgBqjQxNTE4MDI3NTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrFuVlgFqTU1OTc1OTg3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d6e0360b7180bba977fe863dab524d38350d0c9", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/7d6e0360b7180bba977fe863dab524d38350d0c9", "committedDate": "2020-12-28T11:15:36Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}, "afterCommit": {"oid": "d73c1fe7cf9aca68d8aa4a70b6e658fe2786f1b1", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/d73c1fe7cf9aca68d8aa4a70b6e658fe2786f1b1", "committedDate": "2020-12-28T11:39:30Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d73c1fe7cf9aca68d8aa4a70b6e658fe2786f1b1", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/d73c1fe7cf9aca68d8aa4a70b6e658fe2786f1b1", "committedDate": "2020-12-28T11:39:30Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}, "afterCommit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/ce0e51f68932736b14e1e0dcf9f81e1c62770f15", "committedDate": "2020-12-28T11:40:52Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MTM3MTk0", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#pullrequestreview-559137194", "createdAt": "2020-12-28T13:06:01Z", "commit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NTYzNzU0", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#pullrequestreview-559563754", "createdAt": "2020-12-29T14:46:12Z", "commit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNDo0NjoxMlrOIMQ5og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNjoxMTo1MVrOIMSyJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTczMDcyMg==", "bodyText": "Is it used anywhere?", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#discussion_r549730722", "createdAt": "2020-12-29T14:46:12Z", "author": {"login": "li-boxuan"}, "path": "janusgraph-solr/pom.xml", "diffHunk": "@@ -214,6 +248,12 @@\n                         <configuration>\n                             <argLine>${default.test.jvm.opts}</argLine>\n                             <skipTests>${skip.solr.test}</skipTests>\n+                            <excludedGroups>${test.solr.excludes}</excludedGroups>\n+                            <systemPropertyVariables>\n+                                <solr.docker.image>${solr.docker.image}</solr.docker.image>\n+                                <solr.docker.version>${solr.docker.version}</solr.docker.version>\n+                                <solr.test.version>${solr.test.version}</solr.test.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTczMTAxNA==", "bodyText": "Unused import", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#discussion_r549731014", "createdAt": "2020-12-29T14:46:50Z", "author": {"login": "li-boxuan"}, "path": "janusgraph-solr/src/main/java/org/janusgraph/diskstorage/solr/SolrIndex.java", "diffHunk": "@@ -125,6 +112,8 @@\n import com.google.common.base.Joiner;\n import com.google.common.base.Preconditions;\n \n+import javax.swing.text.html.Option;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc2MTU3Mw==", "bodyText": "Now that we are using test containers for Solr tests, do you want to update TESTING.md in this PR?", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#discussion_r549761573", "createdAt": "2020-12-29T16:11:51Z", "author": {"login": "li-boxuan"}, "path": "janusgraph-solr/src/test/java/org/janusgraph/diskstorage/solr/BerkeleySolrTest.java", "diffHunk": "@@ -16,26 +16,21 @@\n \n import org.janusgraph.diskstorage.configuration.ModifiableConfiguration;\n import org.janusgraph.diskstorage.configuration.WriteConfiguration;\n-import org.janusgraph.graphdb.configuration.GraphDatabaseConfiguration;\n-import static org.janusgraph.BerkeleyStorageSetup.getBerkeleyJEConfiguration;\n-import static org.janusgraph.graphdb.configuration.GraphDatabaseConfiguration.*;\n+import org.testcontainers.junit.jupiter.Container;\n+import org.testcontainers.junit.jupiter.Testcontainers;\n \n-/**\n- * @author Matthias Broecheler (me@matthiasb.com)\n- */\n+import static org.janusgraph.BerkeleyStorageSetup.getBerkeleyJEConfiguration;\n \n+@Testcontainers\n public class BerkeleySolrTest extends SolrJanusGraphIndexTest {\n \n+    @Container\n+    protected static JanusGraphSolrContainer solrContainer = new JanusGraphSolrContainer();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b10d7204640c9d691a685e471cd938f040885882", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/b10d7204640c9d691a685e471cd938f040885882", "committedDate": "2020-12-29T22:11:21Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce0e51f68932736b14e1e0dcf9f81e1c62770f15", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/ce0e51f68932736b14e1e0dcf9f81e1c62770f15", "committedDate": "2020-12-28T11:40:52Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}, "afterCommit": {"oid": "b10d7204640c9d691a685e471cd938f040885882", "author": {"user": {"login": "farodin91", "name": "Jan Jansen"}}, "url": "https://github.com/JanusGraph/janusgraph/commit/b10d7204640c9d691a685e471cd938f040885882", "committedDate": "2020-12-29T22:11:21Z", "message": "Use testcontainers for solr\n\nFixes #1472\nPart of #2260\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NzU5ODcw", "url": "https://github.com/JanusGraph/janusgraph/pull/2310#pullrequestreview-559759870", "createdAt": "2020-12-30T02:16:07Z", "commit": {"oid": "b10d7204640c9d691a685e471cd938f040885882"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4719, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}