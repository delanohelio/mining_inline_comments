{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNzkyMDAz", "number": 11995, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjoyODo0NFrOEVE5Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMjowNVrOEVE-cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTM1NzU0OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjoyODo0NFrOG7oLMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjoyODo0NFrOG7oLMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3NzM5NA==", "bodyText": "Why is this not just overloadNotificationSend = false? It looks like this would break if you flipped the plugin off/on while overloaded currently.", "url": "https://github.com/runelite/runelite/pull/11995#discussion_r465177394", "createdAt": "2020-08-04T16:28:44Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "diffHunk": "@@ -73,18 +74,24 @@\n \n \t@Getter\n \tprivate int pointsPerHour;\n-\t\n+\n \tprivate Instant nmzSessionStartTime;\n \n \t// This starts as true since you need to get\n \t// above the threshold before sending notifications\n \tprivate boolean absorptionNotificationSend = true;\n+\tprivate boolean overloadNotificationSend = false;\n+\tprivate Duration overloadWarningOffset;\n+\tprivate Instant lastOverload;\n \n \t@Override\n \tprotected void startUp() throws Exception\n \t{\n \t\toverlayManager.add(overlay);\n \t\toverlay.removeAbsorptionCounter();\n+\n+\t\tupdateWarningOffset();\n+\t\tlastOverload = Instant.now();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb4f606886ff9712e5d21be227f2f0b7affd743d"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTM2MzI3OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMDoxMVrOG7oOug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMDoxMVrOG7oOug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3ODI5OA==", "bodyText": "Duration overloadWarningOffset = OVERLOAD_DURATION.minus(Duration.ofSeconds(config.overloadEarlyWarningSeconds()));\n\ncan just be here. It isn't necessary to store the config value yourself.", "url": "https://github.com/runelite/runelite/pull/11995#discussion_r465178298", "createdAt": "2020-08-04T16:30:11Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "diffHunk": "@@ -192,6 +212,26 @@ else if (msg.contains(\"Ultimate force\"))\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\telse if (msg.contains(\"You drink some of your overload potion.\"))\n+\t\t{\n+\t\t\tlastOverload = Instant.now();  // Save time of last overload\n+\t\t\toverloadNotificationSend = true;  // Queue up a overload notification once time threshold is reached\n+\t\t}\n+\n+\t}\n+\n+\tprivate void checkOverload()\n+\t{\n+\t\t// overloadNotificationSend is already true since this method is being called\n+\n+\t\t// Consider counting or calculating ticks instead of duration\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb4f606886ff9712e5d21be227f2f0b7affd743d"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTM2NzA4OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMTowN1rOG7oRGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMTowN1rOG7oRGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3ODkwNA==", "bodyText": "Probably the overloadNotificationSend / config.overloadEarlyWarningSeconds() checks should just be in here instead then.", "url": "https://github.com/runelite/runelite/pull/11995#discussion_r465178904", "createdAt": "2020-08-04T16:31:07Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZonePlugin.java", "diffHunk": "@@ -192,6 +212,26 @@ else if (msg.contains(\"Ultimate force\"))\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\telse if (msg.contains(\"You drink some of your overload potion.\"))\n+\t\t{\n+\t\t\tlastOverload = Instant.now();  // Save time of last overload\n+\t\t\toverloadNotificationSend = true;  // Queue up a overload notification once time threshold is reached\n+\t\t}\n+\n+\t}\n+\n+\tprivate void checkOverload()\n+\t{\n+\t\t// overloadNotificationSend is already true since this method is being called", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb4f606886ff9712e5d21be227f2f0b7affd743d"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTM3MDIxOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZoneConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMTo1N1rOG7oTCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMTo1N1rOG7oTCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3OTQwMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tmin = OVERLOAD_WARNING_LIMIT_MIN,\n          \n          \n            \n            \t\tmin = 0,", "url": "https://github.com/runelite/runelite/pull/11995#discussion_r465179402", "createdAt": "2020-08-04T16:31:57Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZoneConfig.java", "diffHunk": "@@ -98,11 +100,30 @@ default boolean overloadNotification()\n \t\treturn true;\n \t}\n \n+\tint OVERLOAD_WARNING_LIMIT_MIN = 0;\n+\tint OVERLOAD_WARNING_LIMIT_MAX = 300;\n+\n+\t@Range(\n+\t\tmin = OVERLOAD_WARNING_LIMIT_MIN,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb4f606886ff9712e5d21be227f2f0b7affd743d"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTM3MDcyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZoneConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMjowNVrOG7oTVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjozMjowNVrOG7oTVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3OTQ3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tmax = OVERLOAD_WARNING_LIMIT_MAX\n          \n          \n            \n            \t\tmax = 300", "url": "https://github.com/runelite/runelite/pull/11995#discussion_r465179476", "createdAt": "2020-08-04T16:32:05Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/nightmarezone/NightmareZoneConfig.java", "diffHunk": "@@ -98,11 +100,30 @@ default boolean overloadNotification()\n \t\treturn true;\n \t}\n \n+\tint OVERLOAD_WARNING_LIMIT_MIN = 0;\n+\tint OVERLOAD_WARNING_LIMIT_MAX = 300;\n+\n+\t@Range(\n+\t\tmin = OVERLOAD_WARNING_LIMIT_MIN,\n+\t\tmax = OVERLOAD_WARNING_LIMIT_MAX", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb4f606886ff9712e5d21be227f2f0b7affd743d"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3394, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}