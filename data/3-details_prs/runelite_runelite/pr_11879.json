{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMzczNDkx", "number": 11879, "title": "inventory-grid: show grid when viewing bank", "bodyText": "closes #9055\nEnable grid when viewing the bank.", "createdAt": "2020-06-11T22:58:15Z", "url": "https://github.com/runelite/runelite/pull/11879", "merged": true, "mergeCommit": {"oid": "9fef3ad47df49d476858a9ef3b8e9f149b222429"}, "closed": true, "closedAt": "2020-08-02T17:22:25Z", "author": {"login": "while-loop"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqWbi7ABqjM0MzYyNjQ0ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6_xfdABqjM2MTM0NjYwMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73ef21851a45ae81c9c0865270d966e64a7f8d79", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/73ef21851a45ae81c9c0865270d966e64a7f8d79", "committedDate": "2020-06-11T22:49:32Z", "message": "inventory-grid: show grid in when viewing bank"}, "afterCommit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/1451957f33b4ef4c2bb20b333e86486145705cc2", "committedDate": "2020-06-11T22:58:36Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDU0NDgx", "url": "https://github.com/runelite/runelite/pull/11879#pullrequestreview-444054481", "createdAt": "2020-07-07T16:24:26Z", "commit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjoyNDoyNlrOGuGPmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjoyNDoyNlrOGuGPmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk4OTk3OA==", "bodyText": "This will just throw a bunch of npes under normal operation.", "url": "https://github.com/runelite/runelite/pull/11879#discussion_r450989978", "createdAt": "2020-07-07T16:24:26Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/inventorygrid/InventoryGridOverlay.java", "diffHunk": "@@ -130,6 +151,25 @@ else if (config.showGrid())\n \t\treturn null;\n \t}\n \n+\tprivate int getDraggedIndex(Widget inventoryWidget, Widget draggingWidget)\n+\t{\n+\t\tfor (int i = 0; i < INVENTORY_SIZE; i++)\n+\t\t{\n+\t\t\tif (inventoryWidget.getChild(i) == draggingWidget)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDU3ODcz", "url": "https://github.com/runelite/runelite/pull/11879#pullrequestreview-444057873", "createdAt": "2020-07-07T16:28:28Z", "commit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjoyODoyOFrOGuGZWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjoyODoyOFrOGuGZWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk5MjQ3Mg==", "bodyText": "Widgets are safe to reference compare, not sure why you have removed this here?", "url": "https://github.com/runelite/runelite/pull/11879#discussion_r450992472", "createdAt": "2020-07-07T16:28:28Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/inventorygrid/InventoryGridOverlay.java", "diffHunk": "@@ -72,10 +72,24 @@ private InventoryGridOverlay(InventoryGridConfig config, Client client, ItemMana\n \t@Override\n \tpublic Dimension render(Graphics2D graphics)\n \t{\n-\t\tfinal Widget if1DraggingWidget = client.getIf1DraggedWidget();\n-\t\tfinal Widget inventoryWidget = client.getWidget(WidgetInfo.INVENTORY);\n+\t\tWidget draggingWidget = client.getIf1DraggedWidget();\n+\t\tfinal int draggedItemIndex;\n+\t\tfinal Widget inventoryWidget;\n+\t\tfinal boolean dynamic = draggingWidget == null;\n \n-\t\tif (if1DraggingWidget == null || if1DraggingWidget != inventoryWidget)\n+\t\tif (dynamic)\n+\t\t{\n+\t\t\tinventoryWidget = client.getWidget(WidgetInfo.BANK_INVENTORY_ITEMS_CONTAINER);\n+\t\t\tdraggingWidget = client.getDraggedWidget();\n+\t\t\tdraggedItemIndex = getDraggedIndex(inventoryWidget, draggingWidget);\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tinventoryWidget = client.getWidget(WidgetInfo.INVENTORY);\n+\t\t\tdraggedItemIndex = client.getIf1DraggedItemIndex();\n+\t\t}\n+\n+\t\tif (draggingWidget == null || inventoryWidget == null || draggingWidget.getId() != inventoryWidget.getId())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDU5OTE4", "url": "https://github.com/runelite/runelite/pull/11879#pullrequestreview-444059918", "createdAt": "2020-07-07T16:30:52Z", "commit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjozMDo1MlrOGuGfWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjozMDo1MlrOGuGfWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk5NDAwOA==", "bodyText": "Im pretty sure this is just draggingWidget.getIndex()", "url": "https://github.com/runelite/runelite/pull/11879#discussion_r450994008", "createdAt": "2020-07-07T16:30:52Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/inventorygrid/InventoryGridOverlay.java", "diffHunk": "@@ -72,10 +72,24 @@ private InventoryGridOverlay(InventoryGridConfig config, Client client, ItemMana\n \t@Override\n \tpublic Dimension render(Graphics2D graphics)\n \t{\n-\t\tfinal Widget if1DraggingWidget = client.getIf1DraggedWidget();\n-\t\tfinal Widget inventoryWidget = client.getWidget(WidgetInfo.INVENTORY);\n+\t\tWidget draggingWidget = client.getIf1DraggedWidget();\n+\t\tfinal int draggedItemIndex;\n+\t\tfinal Widget inventoryWidget;\n+\t\tfinal boolean dynamic = draggingWidget == null;\n \n-\t\tif (if1DraggingWidget == null || if1DraggingWidget != inventoryWidget)\n+\t\tif (dynamic)\n+\t\t{\n+\t\t\tinventoryWidget = client.getWidget(WidgetInfo.BANK_INVENTORY_ITEMS_CONTAINER);\n+\t\t\tdraggingWidget = client.getDraggedWidget();\n+\t\t\tdraggedItemIndex = getDraggedIndex(inventoryWidget, draggingWidget);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1451957f33b4ef4c2bb20b333e86486145705cc2", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/1451957f33b4ef4c2bb20b333e86486145705cc2", "committedDate": "2020-06-11T22:58:36Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "27bd1329d231247f8d8e66b9159294262b29b027", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/27bd1329d231247f8d8e66b9159294262b29b027", "committedDate": "2020-08-01T02:51:07Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27bd1329d231247f8d8e66b9159294262b29b027", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/27bd1329d231247f8d8e66b9159294262b29b027", "committedDate": "2020-08-01T02:51:07Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "575398fc6be217c74892af18a4d270b2a2b8168a", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/575398fc6be217c74892af18a4d270b2a2b8168a", "committedDate": "2020-08-01T03:11:52Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "575398fc6be217c74892af18a4d270b2a2b8168a", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/575398fc6be217c74892af18a4d270b2a2b8168a", "committedDate": "2020-08-01T03:11:52Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "ddc450289749f843595a83e91ebfd502d7e4e3d4", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/ddc450289749f843595a83e91ebfd502d7e4e3d4", "committedDate": "2020-08-01T03:13:48Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ddc450289749f843595a83e91ebfd502d7e4e3d4", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/ddc450289749f843595a83e91ebfd502d7e4e3d4", "committedDate": "2020-08-01T03:13:48Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "8b4e3e640a97f8b3b233ab69f9e5c3069a12b6eb", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/8b4e3e640a97f8b3b233ab69f9e5c3069a12b6eb", "committedDate": "2020-08-01T03:14:05Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b4e3e640a97f8b3b233ab69f9e5c3069a12b6eb", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/8b4e3e640a97f8b3b233ab69f9e5c3069a12b6eb", "committedDate": "2020-08-01T03:14:05Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "77d212e44e23acef9865d90dae7dc1ff01ac4634", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/77d212e44e23acef9865d90dae7dc1ff01ac4634", "committedDate": "2020-08-01T03:31:19Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NTQ5OTUx", "url": "https://github.com/runelite/runelite/pull/11879#pullrequestreview-459549951", "createdAt": "2020-08-01T03:50:50Z", "commit": {"oid": "77d212e44e23acef9865d90dae7dc1ff01ac4634"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQwMzo1MDo1MFrOG6bRfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQwMzo1MTowMVrOG6bRhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkxNzQzNg==", "bodyText": "private static WidgetItem getWidgetItem(Widget parentWidget, int idx)\n    {\n        if (parentWidget.isIf3())\n        {\n            Widget wi = parentWidget.getChild(idx);\n            return new WidgetItem(wi.getItemId(), wi.getItemQuantity(), -1, wi.getBounds(), parentWidget, null);\n        }\n        else\n        {\n            return parentWidget.getWidgetItem(idx);\n        }\n    }", "url": "https://github.com/runelite/runelite/pull/11879#discussion_r463917436", "createdAt": "2020-08-01T03:50:50Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/inventorygrid/InventoryGridOverlay.java", "diffHunk": "@@ -130,6 +154,12 @@ else if (config.showGrid())\n \t\treturn null;\n \t}\n \n+\tprivate WidgetItem getWidgetItem(Widget parentWidget, int idx)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d212e44e23acef9865d90dae7dc1ff01ac4634"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkxNzQ0Ng==", "bodyText": "draggingWidget.isIf3() ? draggingWidget.getParent() != inventoryWidget : draggingWidget != inventoryWidget", "url": "https://github.com/runelite/runelite/pull/11879#discussion_r463917446", "createdAt": "2020-08-01T03:51:01Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/inventorygrid/InventoryGridOverlay.java", "diffHunk": "@@ -72,10 +72,27 @@ private InventoryGridOverlay(InventoryGridConfig config, Client client, ItemMana\n \t@Override\n \tpublic Dimension render(Graphics2D graphics)\n \t{\n-\t\tfinal Widget if1DraggingWidget = client.getIf1DraggedWidget();\n-\t\tfinal Widget inventoryWidget = client.getWidget(WidgetInfo.INVENTORY);\n+\t\tWidget draggingWidget = client.getIf1DraggedWidget();\n+\t\tfinal int draggedItemIndex;\n+\t\tfinal Widget inventoryWidget;\n+\t\tfinal boolean isIf3 = draggingWidget == null;\n \n-\t\tif (if1DraggingWidget == null || if1DraggingWidget != inventoryWidget)\n+\t\tif (isIf3)\n+\t\t{\n+\t\t\tinventoryWidget = client.getWidget(WidgetInfo.BANK_INVENTORY_ITEMS_CONTAINER);\n+\t\t\tdraggingWidget = client.getDraggedWidget();\n+\t\t\tdraggedItemIndex = draggingWidget != null ? draggingWidget.getIndex() : -1;\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tinventoryWidget = client.getWidget(WidgetInfo.INVENTORY);\n+\t\t\tdraggedItemIndex = client.getIf1DraggedItemIndex();\n+\t\t}\n+\n+\t\t// Compare the widgets against their ID and not reference.\n+\t\t// When using `if1` widgets the dragging and inventory widgets instances are the same.\n+\t\t// When using `if3` widgets the widget instances are different, but share the same parent ID.\n+\t\tif (draggingWidget == null || inventoryWidget == null || draggingWidget.getId() != inventoryWidget.getId())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d212e44e23acef9865d90dae7dc1ff01ac4634"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77d212e44e23acef9865d90dae7dc1ff01ac4634", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/77d212e44e23acef9865d90dae7dc1ff01ac4634", "committedDate": "2020-08-01T03:31:19Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "cb3ffb4b19951d31d268d4248e26aa9581bce3ea", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/cb3ffb4b19951d31d268d4248e26aa9581bce3ea", "committedDate": "2020-08-01T04:01:13Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb3ffb4b19951d31d268d4248e26aa9581bce3ea", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/cb3ffb4b19951d31d268d4248e26aa9581bce3ea", "committedDate": "2020-08-01T04:01:13Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "dd9695b2572ec53a1072ab33ae7014d56000d470", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/dd9695b2572ec53a1072ab33ae7014d56000d470", "committedDate": "2020-08-01T21:25:55Z", "message": "inventory-grid: show grid when viewing bank"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c8f21dc969067d7a21e4127e4f8b1d3aea00f01", "author": {"user": {"login": "Adam-", "name": "Adam"}}, "url": "https://github.com/runelite/runelite/commit/1c8f21dc969067d7a21e4127e4f8b1d3aea00f01", "committedDate": "2020-08-02T15:48:34Z", "message": "inventory-grid: show grid when viewing bank\n\nCo-authored-by: while-loop <cvballa3g0@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd9695b2572ec53a1072ab33ae7014d56000d470", "author": {"user": {"login": "while-loop", "name": "Anthony"}}, "url": "https://github.com/runelite/runelite/commit/dd9695b2572ec53a1072ab33ae7014d56000d470", "committedDate": "2020-08-01T21:25:55Z", "message": "inventory-grid: show grid when viewing bank"}, "afterCommit": {"oid": "1c8f21dc969067d7a21e4127e4f8b1d3aea00f01", "author": {"user": {"login": "Adam-", "name": "Adam"}}, "url": "https://github.com/runelite/runelite/commit/1c8f21dc969067d7a21e4127e4f8b1d3aea00f01", "committedDate": "2020-08-02T15:48:34Z", "message": "inventory-grid: show grid when viewing bank\n\nCo-authored-by: while-loop <cvballa3g0@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3615, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}