{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NDMyODM3", "number": 11556, "title": "Add duplicate chat options to chatfilter", "bodyText": "A few things to note:\n\nI decided to use a cache for keeping count of the messages\n\n\nThis allows it to count more than just the chat buffer length, so if you are logged in for many hours, message counts can go into the hundreds or thousands with no problem\nThis also prevents modification of the chat buffer itself, so it will retain all of the chat history. This means if the plugin is turned off after consolidating the chats, the chat will go back to normal\nTo prevent this cache from growing unbounded, I added a configurable max size. I defaulted to 500, however this is left up to the user. This size corresponds to unique messages, not total messages.\n\n\nPublic chat consolidation is configurable\n\n\nOnly the \"spammy\" message types are consolidated by default: ENGINE, GAMEMESSAGE, NPC_EXAMINE, OBJECT_EXAMINE, SPAM.\nPUBLICCHAT is configurable on/off, default off\n\n\nPublic chat can be hidden after X amount of duplicates\n\n\nIf the player so chooses, they can filter out messages if they are repeated a bunch. I tested this out in world 1 and had great success. After a bit of standing around the GE, the duplicate messages were filtered out and only regular conversation was left", "createdAt": "2020-05-12T01:29:52Z", "url": "https://github.com/runelite/runelite/pull/11556", "merged": true, "mergeCommit": {"oid": "f85f6be5cf6d97b0bc053ad50915496d7a78eef2"}, "closed": true, "closedAt": "2020-05-23T17:19:15Z", "author": {"login": "CoreyForsyth"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgacivAFqTQwOTY0NDk0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABckJyWlABqjMzNjcyMjI5MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjQ0OTQ3", "url": "https://github.com/runelite/runelite/pull/11556#pullrequestreview-409644947", "createdAt": "2020-05-12T01:48:40Z", "commit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMTo0ODo0MFrOGTzRvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMTo1Nzo0M1rOGTzbMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxNjI1NQ==", "bodyText": "You need to configure your imports according to https://github.com/runelite/runelite/wiki/Code-Conventions", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423416255", "createdAt": "2020-05-12T01:48:40Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterPlugin.java", "diffHunk": "@@ -28,36 +28,47 @@\n import com.google.common.annotations.VisibleForTesting;\n import com.google.common.base.CharMatcher;\n import com.google.common.base.Splitter;\n+import com.google.common.collect.Iterables;\n+import com.google.common.collect.LinkedListMultimap;\n+import com.google.common.collect.ListMultimap;\n import com.google.inject.Provides;\n-import java.util.ArrayList;\n-import java.util.List;\n-import java.util.Objects;\n-import java.util.regex.Matcher;\n-import java.util.regex.Pattern;\n-import java.util.regex.PatternSyntaxException;\n-import javax.inject.Inject;\n+import lombok.extern.slf4j.Slf4j;\n import net.runelite.api.ChatMessageType;\n import net.runelite.api.Client;\n+import net.runelite.api.GameState;\n import net.runelite.api.MessageNode;\n import net.runelite.api.Player;\n-import net.runelite.client.events.ConfigChanged;\n+import net.runelite.api.events.ChatMessage;\n+import net.runelite.api.events.GameStateChanged;\n import net.runelite.api.events.OverheadTextChanged;\n import net.runelite.api.events.ScriptCallbackEvent;\n import net.runelite.client.config.ConfigManager;\n import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.events.ConfigChanged;\n import net.runelite.client.game.ClanManager;\n import net.runelite.client.plugins.Plugin;\n import net.runelite.client.plugins.PluginDescriptor;\n+import net.runelite.client.util.ColorUtil;\n import net.runelite.client.util.Text;\n import org.apache.commons.lang3.StringUtils;\n \n+import javax.inject.Inject;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxNzEyNA==", "bodyText": "This can just be inlined after stringStack[stringStackSize - 1] = message", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423417124", "createdAt": "2020-05-12T01:52:01Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterPlugin.java", "diffHunk": "@@ -292,4 +295,92 @@ boolean shouldFilterByName(final String playerName)\n \t\t}\n \t\treturn false;\n \t}\n+\n+\t@Subscribe\n+\tpublic void onChatMessage(ChatMessage chatMessage)\n+\t{\n+\t\tif (shouldCollapseMessageType(chatMessage.getType()))\n+\t\t{\n+\t\t\tduplicateChatCache.put(chatMessage.getName() + chatMessage.getMessage(), chatMessage.getMessageNode().getId());\n+\t\t}\n+\t\tif (duplicateChatCache.keySet().size() > config.maxTrackedChats())\n+\t\t{\n+\t\t\tcleanupChatTrackers();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(final GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.HOPPING || event.getGameState() == GameState.LOGIN_SCREEN)\n+\t\t{\n+\t\t\tduplicateChatCache.clear();\n+\t\t}\n+\t}\n+\n+\tprivate void cleanupChatTrackers()\n+\t{\n+\t\tlog.debug(\"Cleaning up chat counts. Current size: {}\", duplicateChatCache.keySet().size());\n+\t\tduplicateChatCache.keySet().removeIf(key -> duplicateChatCache.get(key).size() <= 1);\n+\t\tlog.debug(\"After clearing messages with count == 1: {}\", duplicateChatCache.keySet().size());\n+\t\t// Keep at least a buffer of 10 free spaces\n+\t\tif (duplicateChatCache.keySet().size() > config.maxTrackedChats() - 10)\n+\t\t{\n+\t\t\tduplicateChatCache.clear();\n+\t\t}\n+\t}\n+\n+\tprivate boolean shouldFilterMessageType(ChatMessageType chatMessageType)\n+\t{\n+\t\tswitch (chatMessageType)\n+\t\t{\n+\t\t\tcase PUBLICCHAT:\n+\t\t\tcase MODCHAT:\n+\t\t\tcase AUTOTYPER:\n+\t\t\tcase PRIVATECHAT:\n+\t\t\tcase MODPRIVATECHAT:\n+\t\t\tcase FRIENDSCHAT:\n+\t\t\t\treturn true;\n+\t\t\tcase LOGINLOGOUTNOTIFICATION:\n+\t\t\tdefault:\n+\t\t\t\treturn false;\n+\t\t}\n+\t}\n+\n+\tprivate boolean shouldCollapseMessageType(ChatMessageType chatMessageType)\n+\t{\n+\t\tswitch (chatMessageType)\n+\t\t{\n+\t\t\tcase ENGINE:\n+\t\t\tcase GAMEMESSAGE:\n+\t\t\tcase NPC_EXAMINE:\n+\t\t\tcase OBJECT_EXAMINE:\n+\t\t\tcase SPAM:\n+\t\t\t\treturn true;\n+\t\t\tcase PUBLICCHAT:\n+\t\t\t\treturn config.consolidatePlayerChat();\n+\t\t\tdefault:\n+\t\t\t\treturn false;\n+\t\t}\n+\t}\n+\n+\tprivate boolean shouldBlockDuplicatePlayerChat(String fullMessage, ChatMessageType chatMessageType)\n+\t{\n+\t\treturn chatMessageType == ChatMessageType.PUBLICCHAT &&\n+\t\t\t\tconfig.maxRepeatedPublicChats() > 1 &&\n+\t\t\t\tduplicateChatCache.get(fullMessage).size() > config.maxRepeatedPublicChats();\n+\t}\n+\n+\tprivate String addCountToGameMessage(String gameMessage, int count)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 226}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxNzkyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tname = \"Consolidate Player Chat\",\n          \n          \n            \n            \t\tname = \"Collapse Player Chat\",", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423417923", "createdAt": "2020-05-12T01:54:59Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",\n+\t\tdescription = \"Configures the color for the count of game messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"consolidatePlayerChat\",\n+\t\tname = \"Consolidate Player Chat\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODA1NQ==", "bodyText": "It should be configurable to collapse other message types.", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418055", "createdAt": "2020-05-12T01:55:24Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterPlugin.java", "diffHunk": "@@ -292,4 +295,92 @@ boolean shouldFilterByName(final String playerName)\n \t\t}\n \t\treturn false;\n \t}\n+\n+\t@Subscribe\n+\tpublic void onChatMessage(ChatMessage chatMessage)\n+\t{\n+\t\tif (shouldCollapseMessageType(chatMessage.getType()))\n+\t\t{\n+\t\t\tduplicateChatCache.put(chatMessage.getName() + chatMessage.getMessage(), chatMessage.getMessageNode().getId());\n+\t\t}\n+\t\tif (duplicateChatCache.keySet().size() > config.maxTrackedChats())\n+\t\t{\n+\t\t\tcleanupChatTrackers();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(final GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.HOPPING || event.getGameState() == GameState.LOGIN_SCREEN)\n+\t\t{\n+\t\t\tduplicateChatCache.clear();\n+\t\t}\n+\t}\n+\n+\tprivate void cleanupChatTrackers()\n+\t{\n+\t\tlog.debug(\"Cleaning up chat counts. Current size: {}\", duplicateChatCache.keySet().size());\n+\t\tduplicateChatCache.keySet().removeIf(key -> duplicateChatCache.get(key).size() <= 1);\n+\t\tlog.debug(\"After clearing messages with count == 1: {}\", duplicateChatCache.keySet().size());\n+\t\t// Keep at least a buffer of 10 free spaces\n+\t\tif (duplicateChatCache.keySet().size() > config.maxTrackedChats() - 10)\n+\t\t{\n+\t\t\tduplicateChatCache.clear();\n+\t\t}\n+\t}\n+\n+\tprivate boolean shouldFilterMessageType(ChatMessageType chatMessageType)\n+\t{\n+\t\tswitch (chatMessageType)\n+\t\t{\n+\t\t\tcase PUBLICCHAT:\n+\t\t\tcase MODCHAT:\n+\t\t\tcase AUTOTYPER:\n+\t\t\tcase PRIVATECHAT:\n+\t\t\tcase MODPRIVATECHAT:\n+\t\t\tcase FRIENDSCHAT:\n+\t\t\t\treturn true;\n+\t\t\tcase LOGINLOGOUTNOTIFICATION:\n+\t\t\tdefault:\n+\t\t\t\treturn false;\n+\t\t}\n+\t}\n+\n+\tprivate boolean shouldCollapseMessageType(ChatMessageType chatMessageType)\n+\t{\n+\t\tswitch (chatMessageType)\n+\t\t{\n+\t\t\tcase ENGINE:\n+\t\t\tcase GAMEMESSAGE:\n+\t\t\tcase NPC_EXAMINE:\n+\t\t\tcase OBJECT_EXAMINE:\n+\t\t\tcase SPAM:\n+\t\t\t\treturn true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 211}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODIwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tdescription = \"Configures consolidation of player chat\",\n          \n          \n            \n            \t\tdescription = \"Configures if duplicate player chat can be collapsed.\",", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418204", "createdAt": "2020-05-12T01:56:00Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",\n+\t\tdescription = \"Configures the color for the count of game messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"consolidatePlayerChat\",\n+\t\tname = \"Consolidate Player Chat\",\n+\t\tdescription = \"Configures consolidation of player chat\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODI1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tdefault boolean consolidatePlayerChat()\n          \n          \n            \n            \tdefault boolean collapsePlayerChat()", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418259", "createdAt": "2020-05-12T01:56:13Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",\n+\t\tdescription = \"Configures the color for the count of game messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"consolidatePlayerChat\",\n+\t\tname = \"Consolidate Player Chat\",\n+\t\tdescription = \"Configures consolidation of player chat\",\n+\t\tposition = 9\n+\t)\n+\tdefault boolean consolidatePlayerChat()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODMzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tkeyName = \"consolidatePlayerChat\",\n          \n          \n            \n            \t\tkeyName = \"collapsePlayerChat\",", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418331", "createdAt": "2020-05-12T01:56:26Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",\n+\t\tdescription = \"Configures the color for the count of game messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"consolidatePlayerChat\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODUwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tname = \"Default count color\",\n          \n          \n            \n            \t\tname = \"Collapsed Count Color\",", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418505", "createdAt": "2020-05-12T01:57:09Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQxODY3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tdescription = \"Configures the color for the count of game messages\",\n          \n          \n            \n            \t\tdescription = \"Configures the color for the number of collapsed messages\",", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r423418674", "createdAt": "2020-05-12T01:57:43Z", "author": {"login": "raiyni"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +111,49 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Default count color\",\n+\t\tdescription = \"Configures the color for the count of game messages\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7bf602d04e6a539b749dd96839a0a9a7eec5ab5"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNDY5NDEz", "url": "https://github.com/runelite/runelite/pull/11556#pullrequestreview-411469413", "createdAt": "2020-05-14T05:13:30Z", "commit": {"oid": "17c5c04888f133b49570c72e9e1f242e8bc8d366"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNToxMzozMFrOGVMTFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNToxNjowNlrOGVMVfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg3NDc3Mg==", "bodyText": "Your indents here are one level too far.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tkeyName = \"collapseGameChat\",\n          \n          \n            \n            \t\t\tname = \"Collapse Game Chat\",\n          \n          \n            \n            \t\t\tdescription = \"Configures if duplicate game chat can be collapsed\",\n          \n          \n            \n            \t\t\tposition = 9\n          \n          \n            \n            \t\tkeyName = \"collapseGameChat\",\n          \n          \n            \n            \t\tname = \"Collapse Game Chat\",\n          \n          \n            \n            \t\tdescription = \"Configures if duplicate game chat can be collapsed\",\n          \n          \n            \n            \t\tposition = 9", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r424874772", "createdAt": "2020-05-14T05:13:30Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +110,60 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Collapsed Count Color\",\n+\t\tdescription = \"Configures the color for the number of collapsed messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\t\tkeyName = \"collapseGameChat\",\n+\t\t\tname = \"Collapse Game Chat\",\n+\t\t\tdescription = \"Configures if duplicate game chat can be collapsed\",\n+\t\t\tposition = 9", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17c5c04888f133b49570c72e9e1f242e8bc8d366"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg3NTE1Mg==", "bodyText": "Also the description for the added configs should be written into more active statements, eg. \"Collapse duplicate game chat messages into a single line\"", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r424875152", "createdAt": "2020-05-14T05:15:05Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +110,60 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Collapsed Count Color\",\n+\t\tdescription = \"Configures the color for the number of collapsed messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\t\tkeyName = \"collapseGameChat\",\n+\t\t\tname = \"Collapse Game Chat\",\n+\t\t\tdescription = \"Configures if duplicate game chat can be collapsed\",\n+\t\t\tposition = 9", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg3NDc3Mg=="}, "originalCommit": {"oid": "17c5c04888f133b49570c72e9e1f242e8bc8d366"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg3NTM5MA==", "bodyText": "Will users care about this?", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r424875390", "createdAt": "2020-05-14T05:16:06Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +110,60 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Collapsed Count Color\",\n+\t\tdescription = \"Configures the color for the number of collapsed messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\t\tkeyName = \"collapseGameChat\",\n+\t\t\tname = \"Collapse Game Chat\",\n+\t\t\tdescription = \"Configures if duplicate game chat can be collapsed\",\n+\t\t\tposition = 9\n+\t)\n+\tdefault boolean collapseGameChat()\n+\t{\n+\t\treturn false;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"collapsePlayerChat\",\n+\t\tname = \"Collapse Player Chat\",\n+\t\tdescription = \"Configures if duplicate player chat can be collapsed\",\n+\t\tposition = 10\n+\t)\n+\tdefault boolean collapsePlayerChat()\n+\t{\n+\t\treturn false;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"maxRepeatedPublicChats\",\n+\t\tname = \"Max repeated public chats\",\n+\t\tdescription = \"Blocks messages if repeated this many times. 0 is off\",\n+\t\tposition = 11\n+\t)\n+\tdefault int maxRepeatedPublicChats()\n+\t{\n+\t\treturn 5;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"maxTrackedChats\",\n+\t\tname = \"Max Tracked Chats\",\n+\t\tdescription = \"Configures the maximum number of chats that are tracked. Suggested 500\",\n+\t\tposition = 12\n+\t)\n+\t@Range(min = 100)\n+\tdefault int maxTrackedChats()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17c5c04888f133b49570c72e9e1f242e8bc8d366"}, "originalPosition": 68}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17c5c04888f133b49570c72e9e1f242e8bc8d366", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/17c5c04888f133b49570c72e9e1f242e8bc8d366", "committedDate": "2020-05-13T00:18:42Z", "message": "Add unit tests for collapse chat"}, "afterCommit": {"oid": "74bd6cfc1aa61151e25eb6b564397a1d69df9c9f", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/74bd6cfc1aa61151e25eb6b564397a1d69df9c9f", "committedDate": "2020-05-14T21:36:50Z", "message": "Add duplicate chat options to chatfilter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74bd6cfc1aa61151e25eb6b564397a1d69df9c9f", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/74bd6cfc1aa61151e25eb6b564397a1d69df9c9f", "committedDate": "2020-05-14T21:36:50Z", "message": "Add duplicate chat options to chatfilter"}, "afterCommit": {"oid": "3fe34815f18aaeb709704fc4c7363bb66b015eb4", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/3fe34815f18aaeb709704fc4c7363bb66b015eb4", "committedDate": "2020-05-14T22:02:13Z", "message": "Add duplicate chat options to chatfilter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fe34815f18aaeb709704fc4c7363bb66b015eb4", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/3fe34815f18aaeb709704fc4c7363bb66b015eb4", "committedDate": "2020-05-14T22:02:13Z", "message": "Add duplicate chat options to chatfilter"}, "afterCommit": {"oid": "ad9edf3e3be10a4030f7f6b3c627737f3cfb2b21", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/ad9edf3e3be10a4030f7f6b3c627737f3cfb2b21", "committedDate": "2020-05-21T22:59:53Z", "message": "Add filter duplicate public chat option to chatfilter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad9edf3e3be10a4030f7f6b3c627737f3cfb2b21", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/ad9edf3e3be10a4030f7f6b3c627737f3cfb2b21", "committedDate": "2020-05-21T22:59:53Z", "message": "Add filter duplicate public chat option to chatfilter"}, "afterCommit": {"oid": "10b5bd2a2945ce5954227ee6fc59db3b30ac5771", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/10b5bd2a2945ce5954227ee6fc59db3b30ac5771", "committedDate": "2020-05-21T23:16:59Z", "message": "Add filter duplicate public chat option to chatfilter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10b5bd2a2945ce5954227ee6fc59db3b30ac5771", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/10b5bd2a2945ce5954227ee6fc59db3b30ac5771", "committedDate": "2020-05-21T23:16:59Z", "message": "Add filter duplicate public chat option to chatfilter"}, "afterCommit": {"oid": "65c3128deaa2274b67906813132e0b58ec41a3cd", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/65c3128deaa2274b67906813132e0b58ec41a3cd", "committedDate": "2020-05-22T00:29:25Z", "message": "Add filter duplicate public chat option to chatfilter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65c3128deaa2274b67906813132e0b58ec41a3cd", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/65c3128deaa2274b67906813132e0b58ec41a3cd", "committedDate": "2020-05-22T00:29:25Z", "message": "Add filter duplicate public chat option to chatfilter"}, "afterCommit": {"oid": "dda411f5babaff25d781ca3c2be3148dbc15aa04", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/dda411f5babaff25d781ca3c2be3148dbc15aa04", "committedDate": "2020-05-22T01:37:47Z", "message": "Add filter duplicate public chat option to chatfilter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDE2MzM2", "url": "https://github.com/runelite/runelite/pull/11556#pullrequestreview-417016336", "createdAt": "2020-05-22T15:51:47Z", "commit": {"oid": "02d6657dad264a5b035a01741479c4e1c2d63148"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTo1MTo0N1rOGZcBHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTo1MTo0N1rOGZcBHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMyNjYyMw==", "bodyText": "IMO this seems kind of useless? If you just append the count it would take the color of whatever the message was, probably", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r429326623", "createdAt": "2020-05-22T15:51:47Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +109,37 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Collapsed Count Color\",\n+\t\tdescription = \"Configures the color for the number of collapsed messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02d6657dad264a5b035a01741479c4e1c2d63148"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDE2NjEw", "url": "https://github.com/runelite/runelite/pull/11556#pullrequestreview-417016610", "createdAt": "2020-05-22T15:52:11Z", "commit": {"oid": "02d6657dad264a5b035a01741479c4e1c2d63148"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTo1MjoxMVrOGZcB-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTo1MjoxMVrOGZcB-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMyNjg0Mw==", "bodyText": "This doesn't belong in this commit", "url": "https://github.com/runelite/runelite/pull/11556#discussion_r429326843", "createdAt": "2020-05-22T15:52:11Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterConfig.java", "diffHunk": "@@ -108,4 +109,37 @@ default boolean filterLogin()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"chatCountColor\",\n+\t\tname = \"Collapsed Count Color\",\n+\t\tdescription = \"Configures the color for the number of collapsed messages\",\n+\t\tposition = 8\n+\t)\n+\tdefault Color chatCountColor()\n+\t{\n+\t\treturn new Color(0xA00080);\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"collapseGameChat\",\n+\t\tname = \"Collapse Game Chat\",\n+\t\tdescription = \"Collapse duplicate game chat messages into a single line\",\n+\t\tposition = 9\n+\t)\n+\tdefault boolean collapseGameChat()\n+\t{\n+\t\treturn false;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"collapsePlayerChat\",\n+\t\tname = \"Collapse Player Chat\",\n+\t\tdescription = \"Collapse duplicate player chat messages into a single line\",\n+\t\tposition = 10\n+\t)\n+\tdefault boolean collapsePlayerChat()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02d6657dad264a5b035a01741479c4e1c2d63148"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dda411f5babaff25d781ca3c2be3148dbc15aa04", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/dda411f5babaff25d781ca3c2be3148dbc15aa04", "committedDate": "2020-05-22T01:37:47Z", "message": "Add filter duplicate public chat option to chatfilter"}, "afterCommit": {"oid": "0ae2822bef34f52409ac55b01e869a7e10b5df63", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/0ae2822bef34f52409ac55b01e869a7e10b5df63", "committedDate": "2020-05-22T18:49:46Z", "message": "chatfilter: add duplicate public chat filter\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ae2822bef34f52409ac55b01e869a7e10b5df63", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/0ae2822bef34f52409ac55b01e869a7e10b5df63", "committedDate": "2020-05-22T18:49:46Z", "message": "chatfilter: add duplicate public chat filter\n\nCo-authored-by: Adam <Adam@sigterm.info>"}, "afterCommit": {"oid": "5708ebf9d504c548d4498516d243dafbebc9671e", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/5708ebf9d504c548d4498516d243dafbebc9671e", "committedDate": "2020-05-22T19:16:55Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5708ebf9d504c548d4498516d243dafbebc9671e", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/5708ebf9d504c548d4498516d243dafbebc9671e", "committedDate": "2020-05-22T19:16:55Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}, "afterCommit": {"oid": "02c9928017269d5c3d988d28ec846239ff406214", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/02c9928017269d5c3d988d28ec846239ff406214", "committedDate": "2020-05-22T19:22:49Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02c9928017269d5c3d988d28ec846239ff406214", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/02c9928017269d5c3d988d28ec846239ff406214", "committedDate": "2020-05-22T19:22:49Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}, "afterCommit": {"oid": "a687ad644b97bbae7d56c5e2e55e6e78fbcb2c3b", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/a687ad644b97bbae7d56c5e2e55e6e78fbcb2c3b", "committedDate": "2020-05-22T19:34:28Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8ab2a0f67da96269e01a6f4aac4373863f1846b", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/a8ab2a0f67da96269e01a6f4aac4373863f1846b", "committedDate": "2020-05-23T16:50:20Z", "message": "chatfilter: add collapse duplicate chat option\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb6a0431d0a8de792bc64962489bea1ab9c4ca6a", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/cb6a0431d0a8de792bc64962489bea1ab9c4ca6a", "committedDate": "2020-05-23T16:50:47Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a687ad644b97bbae7d56c5e2e55e6e78fbcb2c3b", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/a687ad644b97bbae7d56c5e2e55e6e78fbcb2c3b", "committedDate": "2020-05-22T19:34:28Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}, "afterCommit": {"oid": "cb6a0431d0a8de792bc64962489bea1ab9c4ca6a", "author": {"user": {"login": "CoreyForsyth", "name": null}}, "url": "https://github.com/runelite/runelite/commit/cb6a0431d0a8de792bc64962489bea1ab9c4ca6a", "committedDate": "2020-05-23T16:50:47Z", "message": "chatfilter: add option to block repeated public messages\n\nCo-authored-by: Adam <Adam@sigterm.info>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3728, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}