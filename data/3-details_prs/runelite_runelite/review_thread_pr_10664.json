{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MjY3NTQ2", "number": 10664, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzo1MDo0OVrODhbATA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjo1NToyNFrODo6n9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MzcyMDQ0OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzo1MDo0OVrOFsJItw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMjo0MToyMVrOFsR29A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ==", "bodyText": "This shouldn't be in this PR", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381831351", "createdAt": "2020-02-20T07:50:49Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -588,6 +600,34 @@ public void requestFocus()\n \t\t{\n \t\t\tOSXUtil.requestFocus();\n \t\t}\n+\t\t// The workaround for Windows is to minimise and then un-minimise the client to bring\n+\t\t// it to the front because java.awt.Window#toFront doesn't work reliably.\n+\t\t// See https://stackoverflow.com/questions/309023/how-to-bring-a-window-to-the-front/7435722#7435722\n+\t\telse if (OSType.getOSType() == OSType.Windows && !frame.isFocused())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4NTg3Mw==", "bodyText": "\ud83d\udc40 how'd that get in there", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381885873", "createdAt": "2020-02-20T09:41:55Z", "author": {"login": "Hannah-GBS"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -588,6 +600,34 @@ public void requestFocus()\n \t\t{\n \t\t\tOSXUtil.requestFocus();\n \t\t}\n+\t\t// The workaround for Windows is to minimise and then un-minimise the client to bring\n+\t\t// it to the front because java.awt.Window#toFront doesn't work reliably.\n+\t\t// See https://stackoverflow.com/questions/309023/how-to-bring-a-window-to-the-front/7435722#7435722\n+\t\telse if (OSType.getOSType() == OSType.Windows && !frame.isFocused())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ=="}, "originalCommit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk3NDI2MA==", "bodyText": "Fixed\nprobably\nmaybe\ngit is hard", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381974260", "createdAt": "2020-02-20T12:41:21Z", "author": {"login": "Hannah-GBS"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -588,6 +600,34 @@ public void requestFocus()\n \t\t{\n \t\t\tOSXUtil.requestFocus();\n \t\t}\n+\t\t// The workaround for Windows is to minimise and then un-minimise the client to bring\n+\t\t// it to the front because java.awt.Window#toFront doesn't work reliably.\n+\t\t// See https://stackoverflow.com/questions/309023/how-to-bring-a-window-to-the-front/7435722#7435722\n+\t\telse if (OSType.getOSType() == OSType.Windows && !frame.isFocused())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ=="}, "originalCommit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NTk3Mzg3OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0Mjo1MFrOFsezig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0Mjo1MFrOFsezig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjM3OA==", "bodyText": "This can be shortened to final HotkeyListener sidebarListener = new HotkeyListener(config::sidebarToggleKey)", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186378", "createdAt": "2020-02-20T18:42:50Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -346,7 +343,7 @@ public void init(final RuneLite runelite) throws Exception\n \n \t\t\t// Add key listener\n \t\t\tfinal HotkeyListener sidebarListener = new HotkeyListener(() ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0d23a3bfe0c176bad5874db9a677a791e5dd47"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NTk3NTA1OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0MzoxN1rOFse0WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0MzoxN1rOFse0WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjU4NA==", "bodyText": "This can be shortened to final HotkeyListener pluginPanelListener = new HotkeyListener(config::panelToggleKey)", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186584", "createdAt": "2020-02-20T18:43:17Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -354,6 +354,18 @@ public void hotkeyPressed()\n \n \t\t\tkeyManager.registerKeyListener(sidebarListener);\n \n+\t\t\tfinal HotkeyListener pluginPanelListener = new HotkeyListener(() ->\n+\t\t\t\tconfig.panelToggleKey())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NTk5MzMwOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0OTowMFrOFse_zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0OTowMFrOFse_zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4OTUxNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t//Checks if the toolbar was previously closed by toggleSidebar\n          \n          \n            \n            \t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382189517", "createdAt": "2020-02-20T18:49:00Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -739,6 +751,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t//Checks if the toolbar was previously closed by toggleSidebar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjMwMTMyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjo1NToyNFrOF3w58A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjowMzowOFrOF4YdjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAxNzI2NA==", "bodyText": "Per Adam's comment, this causes the frame to expand by the plugin toolbar's width if you collapse the panel (F+12) then expand the sidebar (F+11). From what I can tell, that's partially because of the sidebarOpen = !sidebarOpen; state mutation which happens here.\nAnyway, I think this whole method body can safely be replaced by the following:\nfinal boolean pluginPanelOpen = pluginPanel != null;\n\ncurrentButton.setSelected(!pluginPanelOpen);\n\nif (pluginPanelOpen)\n{\n\tcontract();\n}\nelse\n{\n\texpand(currentNavButton);\n}", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r394017264", "createdAt": "2020-03-17T22:55:24Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -742,6 +749,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar\n+\t\t\tif (!container.isAncestorOf(pluginToolbar))\n+\t\t\t{\n+\t\t\t\tcontainer.add(pluginToolbar);\n+\t\t\t\tframe.expandBy(pluginToolbar.getWidth());\n+\t\t\t}\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NTM1Ng==", "bodyText": "I neglected to suggest a null check for currentButton, since that can be nulled when clicking a plugin panel open and closed again. I've amended your commit to add this.", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r394665356", "createdAt": "2020-03-18T22:03:08Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -742,6 +749,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar\n+\t\t\tif (!container.isAncestorOf(pluginToolbar))\n+\t\t\t{\n+\t\t\t\tcontainer.add(pluginToolbar);\n+\t\t\t\tframe.expandBy(pluginToolbar.getWidth());\n+\t\t\t}\n+\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAxNzI2NA=="}, "originalCommit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3903, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}