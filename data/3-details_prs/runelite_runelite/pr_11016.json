{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NzYzNTgy", "number": 11016, "title": "friendslist: update titles using onScriptPostFired rather than onGameTick", "bodyText": "", "createdAt": "2020-03-15T16:48:52Z", "url": "https://github.com/runelite/runelite/pull/11016", "merged": true, "mergeCommit": {"oid": "902078cb620e4fc447b74ce3040b8b6e308b56d2"}, "closed": true, "closedAt": "2020-03-18T20:51:45Z", "author": {"login": "melkypie"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcN8ma5ABqjMxMzA3MzQwODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO1eY5gBqjMxNDEwMTk1MzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1ce15a418c9235c69b6f63636f08d9cedff29fe", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/f1ce15a418c9235c69b6f63636f08d9cedff29fe", "committedDate": "2020-03-15T16:48:04Z", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick"}, "afterCommit": {"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "committedDate": "2020-03-15T17:03:01Z", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NTgzMzUz", "url": "https://github.com/runelite/runelite/pull/11016#pullrequestreview-376583353", "createdAt": "2020-03-18T06:02:25Z", "commit": {"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjowMjoyNVrOF33Thw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjowMjoyNVrOF33Thw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjExOQ==", "bodyText": "There's already extra whitespace at the end of the method before, we definitely don't need more of it. Remove these empty lines.\n\n  \n    \n      \n        Suggested change", "url": "https://github.com/runelite/runelite/pull/11016#discussion_r394122119", "createdAt": "2020-03-18T06:02:25Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/friendlist/FriendListPlugin.java", "diffHunk": "@@ -62,44 +63,52 @@ protected void shutDown()\n \t}\n \n \t@Subscribe\n-\tpublic void onGameTick(GameTick tick)\n+\tpublic void onScriptPostFired(ScriptPostFired event)\n \t{\n-\t\tfinal int world = client.getWorld();\n-\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n-\n-\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n-\t\tfinal int friendCount = friendContainer.getCount();\n-\t\tif (friendCount >= 0)\n+\t\tif (event.getScriptId() == ScriptID.FRIENDS_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n+\t\t\tfinal int friendCount = friendContainer.getCount();\n+\t\t\tif (friendCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n \n-\t\t\tfinal String title = \"Friends - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tfriendCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Friends - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tfriendCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetFriendsListTitle(title);\n+\t\t\t\tsetFriendsListTitle(title);\n+\t\t\t}\n \t\t}\n-\n-\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n-\t\tfinal int ignoreCount = ignoreContainer.getCount();\n-\t\tif (ignoreCount >= 0)\n+\t\telse if (event.getScriptId() == ScriptID.IGNORE_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n+\t\t\tfinal int ignoreCount = ignoreContainer.getCount();\n+\t\t\tif (ignoreCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n \n-\t\t\tfinal String title = \"Ignores - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tignoreCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Ignores - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tignoreCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetIgnoreListTitle(title);\n+\t\t\t\tsetIgnoreListTitle(title);\n+\t\t\t}\n \t\t}\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "committedDate": "2020-03-18T11:18:16Z", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "committedDate": "2020-03-15T17:03:01Z", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick"}, "afterCommit": {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "committedDate": "2020-03-18T11:18:16Z", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4070, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}