{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0Mzg0MDM1", "number": 10955, "title": "scripts: use ScriptPostFired event for scripts that callback at the end of the script", "bodyText": "Make plugins use the ScriptPostFired event that was added with #10565, removing the scripts that can be done using the event.", "createdAt": "2020-03-05T16:42:46Z", "url": "https://github.com/runelite/runelite/pull/10955", "merged": true, "mergeCommit": {"oid": "172b30dc420e0ae3645e6454dc647c929600e6c3"}, "closed": true, "closedAt": "2020-03-06T19:59:27Z", "author": {"login": "melkypie"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKucqgAFqTM2OTc0MDQ4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKz9lagBqjMxMDMyMzAzMDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzQwNDgz", "url": "https://github.com/runelite/runelite/pull/10955#pullrequestreview-369740483", "createdAt": "2020-03-05T16:52:15Z", "commit": {"oid": "d005e891f1575ab245b59a05129dc38549227844"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1MjoxNVrOFyblfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1MjoxNVrOFyblfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQyNTA4Nw==", "bodyText": "Not sure why this was on the clientthread before, both these events are always on the client thread", "url": "https://github.com/runelite/runelite/pull/10955#discussion_r388425087", "createdAt": "2020-03-05T16:52:15Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -554,12 +556,15 @@ public void onScriptCallbackEvent(ScriptCallbackEvent scriptCallbackEvent)\n \t\t\t\tclientThread.invokeLater(() -> confirmKickPlayer(kickPlayerName));\n \t\t\t\tbreak;\n \t\t\t}\n-\t\t\tcase \"clanChatChannelRebuild\":\n-\t\t\t\tif (config.showIgnores())\n-\t\t\t\t{\n-\t\t\t\t\tclientThread.invoke(() -> colorIgnoredPlayers(config.showIgnoresColor()));\n-\t\t\t\t}\n-\t\t\t\tbreak;\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onScriptPostFired(ScriptPostFired event)\n+\t{\n+\t\tif (event.getScriptId() == CLAN_CHAT_CHANNEL_REBUILD && config.showIgnores())\n+\t\t{\n+\t\t\tclientThread.invoke(() -> colorIgnoredPlayers(config.showIgnoresColor()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d005e891f1575ab245b59a05129dc38549227844"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzQ2MzY1", "url": "https://github.com/runelite/runelite/pull/10955#pullrequestreview-369746365", "createdAt": "2020-03-05T16:59:12Z", "commit": {"oid": "d005e891f1575ab245b59a05129dc38549227844"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1OToxMlrOFyb3VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1OToxMlrOFyb3VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQyOTY1Mw==", "bodyText": "All of the script ids should just be added to ScriptID", "url": "https://github.com/runelite/runelite/pull/10955#discussion_r388429653", "createdAt": "2020-03-05T16:59:12Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -97,6 +98,7 @@\n \tprivate static final String RECENT_TITLE = \"Recent CCs\";\n \tprivate static final int JOIN_LEAVE_DURATION = 20;\n \tprivate static final int MESSAGE_DELAY = 10;\n+\tprivate static final int CLAN_CHAT_CHANNEL_REBUILD = 1658;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d005e891f1575ab245b59a05129dc38549227844"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d005e891f1575ab245b59a05129dc38549227844", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/d005e891f1575ab245b59a05129dc38549227844", "committedDate": "2020-03-05T16:35:07Z", "message": "scripts: use ScriptPostFired event for scripts that callback at the end of the script\n\nUses the ScriptPostFired event that was added with the script inspector dev tool, removing the scripts that can be done with it."}, "afterCommit": {"oid": "95e6984456b65e826b02e7cf85b59b2cc05d7b58", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/95e6984456b65e826b02e7cf85b59b2cc05d7b58", "committedDate": "2020-03-05T18:13:23Z", "message": "scripts: use ScriptPostFired event for scripts that callback at the end of the script\n\nUses the ScriptPostFired event that was added with the script inspector dev tool, removing the scripts that can be done with it."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTc1Mjk5", "url": "https://github.com/runelite/runelite/pull/10955#pullrequestreview-369975299", "createdAt": "2020-03-05T23:01:20Z", "commit": {"oid": "95e6984456b65e826b02e7cf85b59b2cc05d7b58"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMzowMToyMVrOFynSlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMzowMToyMVrOFynSlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYxNjg1Mw==", "bodyText": "All of your @ScriptArguments are wrong", "url": "https://github.com/runelite/runelite/pull/10955#discussion_r388616853", "createdAt": "2020-03-05T23:01:21Z", "author": {"login": "abextm"}, "path": "runelite-api/src/main/java/net/runelite/api/ScriptID.java", "diffHunk": "@@ -203,4 +203,28 @@\n \t */\n \t@ScriptArguments(string = 1)\n \tpublic static final int CLAN_SEND_KICK = 215;\n+\n+\t/**\n+\t * Builds the items kept on death widget\n+\t */\n+\t@ScriptArguments()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95e6984456b65e826b02e7cf85b59b2cc05d7b58"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a8021453964af4997dcdee4b20fd86a1127588d", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/5a8021453964af4997dcdee4b20fd86a1127588d", "committedDate": "2020-03-05T23:17:09Z", "message": "scripts: use ScriptPostFired event for scripts that callback at the end of the script\n\nUses the ScriptPostFired event that was added with the script inspector dev tool, removing the scripts that can be done with it."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95e6984456b65e826b02e7cf85b59b2cc05d7b58", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/95e6984456b65e826b02e7cf85b59b2cc05d7b58", "committedDate": "2020-03-05T18:13:23Z", "message": "scripts: use ScriptPostFired event for scripts that callback at the end of the script\n\nUses the ScriptPostFired event that was added with the script inspector dev tool, removing the scripts that can be done with it."}, "afterCommit": {"oid": "5a8021453964af4997dcdee4b20fd86a1127588d", "author": {"user": {"login": "melkypie", "name": "Melky"}}, "url": "https://github.com/runelite/runelite/commit/5a8021453964af4997dcdee4b20fd86a1127588d", "committedDate": "2020-03-05T23:17:09Z", "message": "scripts: use ScriptPostFired event for scripts that callback at the end of the script\n\nUses the ScriptPostFired event that was added with the script inspector dev tool, removing the scripts that can be done with it."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4022, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}