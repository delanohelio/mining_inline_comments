{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDkyNDc2", "number": 11716, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNDowN1rOEAQyjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjo0MToxOVrOECBSSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzEwNTQwOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNDowN1rOGbbzbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNDowN1rOGbbzbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQyMDI3MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tdefault boolean notifyOnBroadcast() { return false; }\n          \n          \n            \n            \tdefault boolean notifyOnBroadcast()\n          \n          \n            \n            \t{\n          \n          \n            \n            \t\treturn false;\n          \n          \n            \n            \t}", "url": "https://github.com/runelite/runelite/pull/11716#discussion_r431420271", "createdAt": "2020-05-27T20:24:07Z", "author": {"login": "Spedwards"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsConfig.java", "diffHunk": "@@ -97,4 +97,12 @@ default boolean notifyOnDuel()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\t\tposition = 6,\n+\t\t\tkeyName = \"notifyOnBroadcast\",\n+\t\t\tname = \"Notify on broadcast\",\n+\t\t\tdescription = \"Notifies you whenever Jagex sends a broadcast\"\n+\t)\n+\tdefault boolean notifyOnBroadcast() { return false; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1d3f29f098ee125b4d2fb4a787d249ca6dabdd0"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MjQzOTU5OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNjozMToxOVrOGcQWkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNjozMToxOVrOGcQWkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4MTIzMw==", "bodyText": "You need to fix your auto-formatter.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tposition = 6,\n          \n          \n            \n            \t\t\tkeyName = \"notifyOnBroadcast\",\n          \n          \n            \n            \t\t\tname = \"Notify on broadcast\",\n          \n          \n            \n            \t\t\tdescription = \"Notifies you whenever Jagex sends a broadcast\"\n          \n          \n            \n            \t\tposition = 6,\n          \n          \n            \n            \t\tkeyName = \"notifyOnBroadcast\",\n          \n          \n            \n            \t\tname = \"Notify on broadcast\",\n          \n          \n            \n            \t\tdescription = \"Notifies you whenever Jagex sends a broadcast\"", "url": "https://github.com/runelite/runelite/pull/11716#discussion_r432281233", "createdAt": "2020-05-29T06:31:19Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsConfig.java", "diffHunk": "@@ -97,4 +97,15 @@ default boolean notifyOnDuel()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\t\tposition = 6,\n+\t\t\tkeyName = \"notifyOnBroadcast\",\n+\t\t\tname = \"Notify on broadcast\",\n+\t\t\tdescription = \"Notifies you whenever Jagex sends a broadcast\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7aa5ce5b19989ad91ea8166400cbedfb59177e8"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTUyNzg4OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsPlugin.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjozNzo1M1rOGeN8vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjozNzo1M1rOGeN8vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMzOTAwNw==", "bodyText": "Instead of copying this from EmojiPlugin, move the method from there to Text (naming it removeFormattingTags) and make it public in a commit prior to the current changes. (and add tests for it--see TextTest's removeTags test cases)", "url": "https://github.com/runelite/runelite/pull/11716#discussion_r434339007", "createdAt": "2020-06-03T06:37:53Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsPlugin.java", "diffHunk": "@@ -124,6 +126,30 @@ private void updateHighlights()\n \t\t}\n \t}\n \n+\t/**\n+\t * Remove tags, except for &lt;lt&gt; and &lt;gt&gt;\n+\t *\n+\t * @return\n+\t */\n+\tprivate static String removeTags(String str)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9ba71fa2eee0a70e0e6855a09260238e02ac4d9"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTUzNjcyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsPlugin.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjo0MToxOVrOGeOCIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjo0MToxOVrOGeOCIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM0MDM4NA==", "bodyText": "This would notify twice on broadcasts that have links. I recommend combining the bodies of these two conditional blocks by doing the following: make a guard clause for config.notifyOnBroadcast(), then a check for broadcast.lastIndexOf('|') being -1 (if it isn't, get the substring prior to that vertical bar). Finally, remove the formatting tags, then notify that string.", "url": "https://github.com/runelite/runelite/pull/11716#discussion_r434340384", "createdAt": "2020-06-03T06:41:19Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatnotifications/ChatNotificationsPlugin.java", "diffHunk": "@@ -144,6 +170,20 @@ public void onChatMessage(ChatMessage chatMessage)\n \t\t\t\t\tnotifier.notify(chatMessage.getMessage());\n \t\t\t\t}\n \t\t\t\tbreak;\n+\t\t\tcase BROADCAST:\n+\t\t\t\tif (chatMessage.getMessage().contains(\"|\") && config.notifyOnBroadcast())\n+\t\t\t\t{\n+\t\t\t\t\t// Broadcasts can accompanied by a clickable link that is notated by `|` followed by a number that determines which website is linked.\n+\t\t\t\t\t// This prevents it from printing in broadcast notifications.\n+\t\t\t\t\tString broadcast = removeTags(chatMessage.getMessage());\n+\t\t\t\t\tnotifier.notify(broadcast.substring(0, broadcast.lastIndexOf('|')));\n+\t\t\t\t}\n+\t\t\t\tif (config.notifyOnBroadcast())\n+\t\t\t\t{\n+\t\t\t\t\tString broadcast = removeTags(chatMessage.getMessage());\n+\t\t\t\t\tnotifier.notify(broadcast);\n+\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9ba71fa2eee0a70e0e6855a09260238e02ac4d9"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3443, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}