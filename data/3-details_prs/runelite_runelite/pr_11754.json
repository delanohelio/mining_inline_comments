{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MzgyMTI0", "number": 11754, "title": "chatfilter: fix colored messages not being collapsed", "bodyText": "Chat filter plugin was not collapsing messages that included any formating like colors.\nFixes #11734", "createdAt": "2020-05-30T00:10:13Z", "url": "https://github.com/runelite/runelite/pull/11754", "merged": true, "mergeCommit": {"oid": "735d7eba372c97de5604d7a01987de168fa6f9c4"}, "closed": true, "closedAt": "2020-06-14T17:28:38Z", "author": {"login": "Bardiches"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmLzrCAFqTQyMTM1NzcyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrO2XsgBqjM0NDE4NDU2Nzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzU3NzI4", "url": "https://github.com/runelite/runelite/pull/11754#pullrequestreview-421357728", "createdAt": "2020-05-30T00:20:36Z", "commit": {"oid": "28fc67ac377e4ec7b8ce4b6aec19b4cb3fdd5e01"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMDoyMDozNlrOGcvZ3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMDoyMDozNlrOGcvZ3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4OTk4Mg==", "bodyText": "This test appears unrelated to the issue, and also passes on master without any modifications to the plugin.", "url": "https://github.com/runelite/runelite/pull/11754#discussion_r432789982", "createdAt": "2020-05-30T00:20:36Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/test/java/net/runelite/client/plugins/chatfilter/ChatFilterPluginTest.java", "diffHunk": "@@ -382,4 +382,16 @@ public void publicChatFilteredOnDuplicate()\n \n \t\tassertEquals(0, client.getIntStack()[client.getIntStackSize() - 3]);\n \t}\n+\n+\t@Test\n+\tpublic void testDuplicateChatFilterIgnoresColor()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28fc67ac377e4ec7b8ce4b6aec19b4cb3fdd5e01"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28fc67ac377e4ec7b8ce4b6aec19b4cb3fdd5e01", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/28fc67ac377e4ec7b8ce4b6aec19b4cb3fdd5e01", "committedDate": "2020-05-30T00:03:37Z", "message": "chatfilter: fix colored messages not being collapsed"}, "afterCommit": {"oid": "5cb3e78638b8fd336a3729bc00af8ddd8089dcac", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/5cb3e78638b8fd336a3729bc00af8ddd8089dcac", "committedDate": "2020-05-30T00:28:41Z", "message": "chatfilter: fix colored messages not being collapsed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cb3e78638b8fd336a3729bc00af8ddd8089dcac", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/5cb3e78638b8fd336a3729bc00af8ddd8089dcac", "committedDate": "2020-05-30T00:28:41Z", "message": "chatfilter: fix colored messages not being collapsed"}, "afterCommit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a", "committedDate": "2020-05-30T02:56:03Z", "message": "chatfilter: fix colored messages not being collapsed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzczNzg4", "url": "https://github.com/runelite/runelite/pull/11754#pullrequestreview-421373788", "createdAt": "2020-05-30T03:26:36Z", "commit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMzoyNjozNlrOGcwXPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMzoyNjozNlrOGcwXPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwNTY5NA==", "bodyText": "Are you sure this is correct? I think message always has to be messageNode.getValue()?", "url": "https://github.com/runelite/runelite/pull/11754#discussion_r432805694", "createdAt": "2020-05-30T03:26:36Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatfilter/ChatFilterPlugin.java", "diffHunk": "@@ -192,7 +192,7 @@ public void onScriptCallbackEvent(ScriptCallbackEvent event)\n \t\t\t: COLLAPSIBLE_MESSAGETYPES.contains(chatMessageType) && config.collapseGameChat();\n \t\tif (!blockMessage && shouldCollapse)\n \t\t{\n-\t\t\tDuplicate duplicateCacheEntry = duplicateChatCache.get(name + \":\" + message);\n+\t\t\tDuplicate duplicateCacheEntry = duplicateChatCache.get(name + \":\" + messageNode.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzczODI4", "url": "https://github.com/runelite/runelite/pull/11754#pullrequestreview-421373828", "createdAt": "2020-05-30T03:27:19Z", "commit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMzoyNzoxOVrOGcwXYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMzoyNzoxOVrOGcwXYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwNTczMA==", "bodyText": "Moving removeFormattingTags is fine, but should be in a separate commit since it is unrelated.", "url": "https://github.com/runelite/runelite/pull/11754#discussion_r432805730", "createdAt": "2020-05-30T03:27:19Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/emojis/EmojiPlugin.java", "diffHunk": "@@ -201,29 +201,4 @@ String updateMessage(final String message)\n \n \t\treturn Strings.join(messageWords, \" \");\n \t}\n-\n-\t/**\n-\t * Remove tags, except for &lt;lt&gt; and &lt;gt&gt;\n-\t *\n-\t * @return\n-\t */\n-\tprivate static String removeTags(String str)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/c0d4dc773b62ceeeea4c621997ea0f3ba4005a8a", "committedDate": "2020-05-30T02:56:03Z", "message": "chatfilter: fix colored messages not being collapsed"}, "afterCommit": {"oid": "04f257d9b128232b4dd0cbb2a8a60893eb4311e9", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/04f257d9b128232b4dd0cbb2a8a60893eb4311e9", "committedDate": "2020-05-30T04:37:05Z", "message": "chatfilter: fix formatted messages not being collapsed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fc309f02b58fa16503897c2e880a5ada1c33e0b", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/6fc309f02b58fa16503897c2e880a5ada1c33e0b", "committedDate": "2020-06-14T16:42:25Z", "message": "chatfilter: fix formatted messages not being collapsed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04f257d9b128232b4dd0cbb2a8a60893eb4311e9", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/04f257d9b128232b4dd0cbb2a8a60893eb4311e9", "committedDate": "2020-05-30T04:37:05Z", "message": "chatfilter: fix formatted messages not being collapsed"}, "afterCommit": {"oid": "6fc309f02b58fa16503897c2e880a5ada1c33e0b", "author": {"user": {"login": "Bardiches", "name": "Steven Goodman"}}, "url": "https://github.com/runelite/runelite/commit/6fc309f02b58fa16503897c2e880a5ada1c33e0b", "committedDate": "2020-06-14T16:42:25Z", "message": "chatfilter: fix formatted messages not being collapsed"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3535, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}