{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NDk2NjI2", "number": 10797, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjozODozNlrODgPUdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNjo0MzoxMVrODl3TUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMyMDIyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjozODozNlrOFqVsIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjozODozNlrOFqVsIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzOTg3Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tparser.accepts(\"sessionfile\", \"Use a specified session file\").withRequiredArg();\n          \n          \n            \n            \t\tArgumentAcceptingOptionSpec<String>  sessionFileOp = parser.accepts(\"sessionfile\", \"Use a specified session file\")\n          \n          \n            \n            \t\t.withRequiredArg()\n          \n          \n            \n            \t\t.defaultsTo(\"session\");\n          \n      \n    \n    \n  \n\nthen use you can just do\nString sessionFile = options.valueOf(sessionFileOp)", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r379939872", "createdAt": "2020-02-16T22:38:36Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -172,6 +178,8 @@ public static void main(String[] args) throws Exception\n \t\tfinal OptionParser parser = new OptionParser();\n \t\tparser.accepts(\"developer-mode\", \"Enable developer tools\");\n \t\tparser.accepts(\"debug\", \"Show extra debugging output\");\n+\t\tparser.accepts(\"sessionfile\", \"Use a specified session file\").withRequiredArg();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7442ec301bcf7a5939216781ef2cfbabbfbec326"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMyMDgxOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLiteModule.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjo0MDoxNFrOFqVsdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMToxOTo0MVrOFqg-0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzOTk1Ng==", "bodyText": "also imo these should be Files", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r379939956", "createdAt": "2020-02-16T22:40:14Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLiteModule.java", "diffHunk": "@@ -61,17 +61,23 @@\n \n \tprivate final Supplier<Applet> clientLoader;\n \tprivate final boolean developerMode;\n+\tprivate final String sessionfile;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7442ec301bcf7a5939216781ef2cfbabbfbec326"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk2MDc3Ng==", "bodyText": "Maybe I was doing something wrong but bindConstant did not like Files", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r379960776", "createdAt": "2020-02-17T02:14:35Z", "author": {"login": "Trevor159"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLiteModule.java", "diffHunk": "@@ -61,17 +61,23 @@\n \n \tprivate final Supplier<Applet> clientLoader;\n \tprivate final boolean developerMode;\n+\tprivate final String sessionfile;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzOTk1Ng=="}, "originalCommit": {"oid": "7442ec301bcf7a5939216781ef2cfbabbfbec326"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDEyNDg4MA==", "bodyText": "Yeah because File is not constant", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r380124880", "createdAt": "2020-02-17T11:19:41Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLiteModule.java", "diffHunk": "@@ -61,17 +61,23 @@\n \n \tprivate final Supplier<Applet> clientLoader;\n \tprivate final boolean developerMode;\n+\tprivate final String sessionfile;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzOTk1Ng=="}, "originalCommit": {"oid": "7442ec301bcf7a5939216781ef2cfbabbfbec326"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MjU0MDIwOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/account/SessionManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMToyMjoyOFrOFqhDbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMToyMjoyOFrOFqhDbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDEyNjA2MQ==", "bodyText": "What if someone is doing ./my-session-file what is relative path and completely valid use-case? Pretty sure then this check will be incorrect", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r380126061", "createdAt": "2020-02-17T11:22:28Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/account/SessionManager.java", "diffHunk": "@@ -52,35 +55,49 @@\n @Slf4j\n public class SessionManager\n {\n-\tprivate static final File SESSION_FILE = new File(RuneLite.RUNELITE_DIR, \"session\");\n-\n \t@Getter\n \tprivate AccountSession accountSession;\n \n \tprivate final EventBus eventBus;\n \tprivate final ConfigManager configManager;\n \tprivate final WSClient wsClient;\n+\tprivate final File sessionFile;\n \n \t@Inject\n-\tprivate SessionManager(ConfigManager configManager, EventBus eventBus, WSClient wsClient)\n+\tprivate SessionManager(\n+\t\t@Named(\"sessionfile\") String sessionfile,\n+\t\tConfigManager configManager,\n+\t\tEventBus eventBus,\n+\t\tWSClient wsClient)\n \t{\n \t\tthis.configManager = configManager;\n \t\tthis.eventBus = eventBus;\n \t\tthis.wsClient = wsClient;\n+\n+\t\tPath path = Paths.get(sessionfile);\n+\t\tif (path.isAbsolute())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0e973fe2de3d839f7a55369e696863e9e42e501"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NDUzNDkxOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzo0NDoxOVrOFwo5Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMzoxMjoxMFrOFwyxUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0NTkzMA==", "bodyText": "Did you try ofType(File.class);? Does that work?", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r386545930", "createdAt": "2020-03-02T17:44:19Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -172,6 +176,10 @@ public static void main(String[] args) throws Exception\n \t\tfinal OptionParser parser = new OptionParser();\n \t\tparser.accepts(\"developer-mode\", \"Enable developer tools\");\n \t\tparser.accepts(\"debug\", \"Show extra debugging output\");\n+\t\tparser.accepts(\"sessionfile\", \"Use a specified session file\")\n+\t\t\t.withRequiredArg().defaultsTo(DEFAULT_SESSION_FILE);\n+\t\tparser.accepts(\"config\", \"Use a specified config file\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfb78aee8ce3251ff0ad1a499cc81bae5a512093"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjcwNzc5Mg==", "bodyText": "I wanted the input as a string so I can change the directory to the RL directory. The most common usecase will be args in the launcher with users that will not understand that the file is going into the cwd. My current implementation also lets users use the cwd or an absolute path if they want.", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r386707792", "createdAt": "2020-03-02T23:12:10Z", "author": {"login": "Trevor159"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -172,6 +176,10 @@ public static void main(String[] args) throws Exception\n \t\tfinal OptionParser parser = new OptionParser();\n \t\tparser.accepts(\"developer-mode\", \"Enable developer tools\");\n \t\tparser.accepts(\"debug\", \"Show extra debugging output\");\n+\t\tparser.accepts(\"sessionfile\", \"Use a specified session file\")\n+\t\t\t.withRequiredArg().defaultsTo(DEFAULT_SESSION_FILE);\n+\t\tparser.accepts(\"config\", \"Use a specified config file\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0NTkzMA=="}, "originalCommit": {"oid": "bfb78aee8ce3251ff0ad1a499cc81bae5a512093"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTc4MjQwOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwMDo1OTozMVrOFw028w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwMDo1OTozMVrOFw028w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc0MjAwMw==", "bodyText": "You can just store this as local variable so you can get File from it without casting (see updateMode)", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r386742003", "createdAt": "2020-03-03T00:59:31Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -177,9 +178,11 @@ public static void main(String[] args) throws Exception\n \t\tparser.accepts(\"developer-mode\", \"Enable developer tools\");\n \t\tparser.accepts(\"debug\", \"Show extra debugging output\");\n \t\tparser.accepts(\"sessionfile\", \"Use a specified session file\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "324f4be3d948f50af5fcc35d946a2a95ff1d254e"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTc4MzY1OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwMTowMDoxOFrOFw03vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNTowOToyN1rOFxJvUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc0MjIwNA==", "bodyText": "I dont think you need to actually override this and valuePattern", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r386742204", "createdAt": "2020-03-03T01:00:18Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -358,6 +374,37 @@ public void shutdown()\n \t\tdiscordService.close();\n \t}\n \n+\tprivate static class FileConverter implements ValueConverter<File>\n+\t{\n+\t\t@Override\n+\t\tpublic File convert(String fileName)\n+\t\t{\n+\t\t\tPath path = Paths.get(fileName);\n+\t\t\tif (path.isAbsolute()\n+\t\t\t\t|| fileName.startsWith(\"./\")\n+\t\t\t\t|| fileName.startsWith(\".\\\\\"))\n+\t\t\t{\n+\t\t\t\treturn new File(fileName);\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\treturn new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t\t}\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic Class<? extends File> valueType()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "324f4be3d948f50af5fcc35d946a2a95ff1d254e"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA4NDExNQ==", "bodyText": "By not overriding it I meant those methods should not need to be there", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387084115", "createdAt": "2020-03-03T15:09:27Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -358,6 +374,37 @@ public void shutdown()\n \t\tdiscordService.close();\n \t}\n \n+\tprivate static class FileConverter implements ValueConverter<File>\n+\t{\n+\t\t@Override\n+\t\tpublic File convert(String fileName)\n+\t\t{\n+\t\t\tPath path = Paths.get(fileName);\n+\t\t\tif (path.isAbsolute()\n+\t\t\t\t|| fileName.startsWith(\"./\")\n+\t\t\t\t|| fileName.startsWith(\".\\\\\"))\n+\t\t\t{\n+\t\t\t\treturn new File(fileName);\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\treturn new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t\t}\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic Class<? extends File> valueType()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc0MjIwNA=="}, "originalCommit": {"oid": "324f4be3d948f50af5fcc35d946a2a95ff1d254e"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTEzNTgzOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/util/JoptFileConverter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxMTozMFrOFxU2qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxNToyNFrOFxU_CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2NjIxNg==", "bodyText": "Should the file have to exist? With the current config/session implementation it will generate the file if it does not exist.", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387266216", "createdAt": "2020-03-03T20:11:30Z", "author": {"login": "Trevor159"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptFileConverter implements ValueConverter<File>\n+{\n+\t@Override\n+\tpublic File convert(String fileName)\n+\t{\n+\t\tfinal File file;\n+\n+\t\tif (Paths.get(fileName).isAbsolute()\n+\t\t\t|| fileName.startsWith(\"./\")\n+\t\t\t|| fileName.startsWith(\".\\\\\"))\n+\t\t{\n+\t\t\tfile = new File(fileName);\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tfile = new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t}\n+\n+\t\tfinal Path path = Paths.get(file.getAbsolutePath());\n+\n+\t\tif (!Files.exists(path) || !Files.isRegularFile(path) || !Files.isWritable(path)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa6b88e23d7f00e8134cfdcfc451980a4e52e189"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2ODM2MA==", "bodyText": "Oh, right. Yeah i guess, I will change the check", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387268360", "createdAt": "2020-03-03T20:15:24Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptFileConverter implements ValueConverter<File>\n+{\n+\t@Override\n+\tpublic File convert(String fileName)\n+\t{\n+\t\tfinal File file;\n+\n+\t\tif (Paths.get(fileName).isAbsolute()\n+\t\t\t|| fileName.startsWith(\"./\")\n+\t\t\t|| fileName.startsWith(\".\\\\\"))\n+\t\t{\n+\t\t\tfile = new File(fileName);\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tfile = new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t}\n+\n+\t\tfinal Path path = Paths.get(file.getAbsolutePath());\n+\n+\t\tif (!Files.exists(path) || !Files.isRegularFile(path) || !Files.isWritable(path)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2NjIxNg=="}, "originalCommit": {"oid": "aa6b88e23d7f00e8134cfdcfc451980a4e52e189"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTE1MTgxOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/util/JoptFileConverter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxNTo1OVrOFxVAIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxNTo1OVrOFxVAIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2ODY0MQ==", "bodyText": "This should have a name that describes what it is doing", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387268641", "createdAt": "2020-03-03T20:15:59Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa6b88e23d7f00e8134cfdcfc451980a4e52e189"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTE2MzEyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxOToyOFrOFxVHAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDozNDowNVrOFxVimw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ==", "bodyText": "thats even worse", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387270401", "createdAt": "2020-03-03T20:19:28Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDc1MQ==", "bodyText": "Well its literally what it is doing", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387270751", "createdAt": "2020-03-03T20:20:10Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MTI1Nw==", "bodyText": "The classname should tell my why its not JOptSimple's FileConverter", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387271257", "createdAt": "2020-03-03T20:21:10Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MjE3NA==", "bodyText": "Hmm? jopt does not have FileConverter", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387272174", "createdAt": "2020-03-03T20:23:11Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MjY3Mg==", "bodyText": "It creates a ValueConverter<File> internally, which is what I was referencing, which is different than this. Also don't prefix it with Jopt", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387272672", "createdAt": "2020-03-03T20:24:16Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3NDM1OQ==", "bodyText": "Its not prefix its simply converting jopt value to file. If you have any ideas for name instead of just not liking current name then that would be a bit more helpful :d", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387274359", "createdAt": "2020-03-03T20:27:43Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3NjM1OA==", "bodyText": "it should probably be ConfigFileConverter or something and be private to n.r.c.RuneLite since nothing else has a use for it", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387276358", "createdAt": "2020-03-03T20:31:42Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3NzQ2Nw==", "bodyText": "Alright updated", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387277467", "createdAt": "2020-03-03T20:34:05Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/util/JoptValueToFileConverter.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020, Trevor <https://github.com/Trevor159>\n+ * Copyright (c) 2020, Tomas Slusny <slusnucky@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.util;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import joptsimple.ValueConversionException;\n+import joptsimple.ValueConverter;\n+import net.runelite.client.RuneLite;\n+\n+public class JoptValueToFileConverter implements ValueConverter<File>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDQwMQ=="}, "originalCommit": {"oid": "a1c3b16de711389fce1b3d9d043b05b0f8e3d3df"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTIyOTg5OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDo0MTo1MFrOFxVxDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDo0Mzo1MFrOFxV0vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI4MTE2Nw==", "bodyText": "Why do we convert to nio just for this?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (Files.exists(path) && (!Files.isRegularFile(path) || !Files.isWritable(path)))\n          \n          \n            \n            \t\t\tif (file.exists() && (!file.isFile() || !file.canWrite()))", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387281167", "createdAt": "2020-03-03T20:41:50Z", "author": {"login": "abextm"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -373,38 +375,50 @@ public void shutdown()\n \t\tdiscordService.close();\n \t}\n \n-\tprivate static class FileConverter implements ValueConverter<File>\n+\t@VisibleForTesting\n+\tpublic static void setInjector(Injector injector)\n+\t{\n+\t\tRuneLite.injector = injector;\n+\t}\n+\n+\tprivate static class ConfigFileConverter implements ValueConverter<File>\n \t{\n \t\t@Override\n \t\tpublic File convert(String fileName)\n \t\t{\n-\t\t\tPath path = Paths.get(fileName);\n-\t\t\tif (path.isAbsolute()\n+\t\t\tfinal File file;\n+\n+\t\t\tif (Paths.get(fileName).isAbsolute()\n \t\t\t\t|| fileName.startsWith(\"./\")\n \t\t\t\t|| fileName.startsWith(\".\\\\\"))\n \t\t\t{\n-\t\t\t\treturn new File(fileName);\n+\t\t\t\tfile = new File(fileName);\n \t\t\t}\n \t\t\telse\n \t\t\t{\n-\t\t\t\treturn new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t\t\tfile = new File(RuneLite.RUNELITE_DIR, fileName);\n \t\t\t}\n+\n+\t\t\tfinal Path path = Paths.get(file.getAbsolutePath());\n+\n+\t\t\tif (Files.exists(path) && (!Files.isRegularFile(path) || !Files.isWritable(path)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bf55feb359eef78f04572ace2c1f39e37d2f9a1"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI4MjEwOQ==", "bodyText": "Because I was trying file.isWrite and it wasnt there, lol. Updated", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r387282109", "createdAt": "2020-03-03T20:43:50Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/RuneLite.java", "diffHunk": "@@ -373,38 +375,50 @@ public void shutdown()\n \t\tdiscordService.close();\n \t}\n \n-\tprivate static class FileConverter implements ValueConverter<File>\n+\t@VisibleForTesting\n+\tpublic static void setInjector(Injector injector)\n+\t{\n+\t\tRuneLite.injector = injector;\n+\t}\n+\n+\tprivate static class ConfigFileConverter implements ValueConverter<File>\n \t{\n \t\t@Override\n \t\tpublic File convert(String fileName)\n \t\t{\n-\t\t\tPath path = Paths.get(fileName);\n-\t\t\tif (path.isAbsolute()\n+\t\t\tfinal File file;\n+\n+\t\t\tif (Paths.get(fileName).isAbsolute()\n \t\t\t\t|| fileName.startsWith(\"./\")\n \t\t\t\t|| fileName.startsWith(\".\\\\\"))\n \t\t\t{\n-\t\t\t\treturn new File(fileName);\n+\t\t\t\tfile = new File(fileName);\n \t\t\t}\n \t\t\telse\n \t\t\t{\n-\t\t\t\treturn new File(RuneLite.RUNELITE_DIR, fileName);\n+\t\t\t\tfile = new File(RuneLite.RUNELITE_DIR, fileName);\n \t\t\t}\n+\n+\t\t\tfinal Path path = Paths.get(file.getAbsolutePath());\n+\n+\t\t\tif (Files.exists(path) && (!Files.isRegularFile(path) || !Files.isWritable(path)))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI4MTE2Nw=="}, "originalCommit": {"oid": "1bf55feb359eef78f04572ace2c1f39e37d2f9a1"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDI5OTcwOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/config/ConfigManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNjo0MzoxMVrOFy_hug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNjo0MzoxMVrOFy_hug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAxMzk0Ng==", "bodyText": "This is probably not less-correct than before, but I think the config writing code still has races since it does an open+truncate and then lock. So, I think it could truncate a file while another RL is holding a lock and writing to it.", "url": "https://github.com/runelite/runelite/pull/10797#discussion_r389013946", "createdAt": "2020-03-06T16:43:11Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/config/ConfigManager.java", "diffHunk": "@@ -331,7 +335,7 @@ private void saveToFile(final File propertiesFile) throws IOException\n \n \t\tparent.mkdirs();\n \n-\t\tFile tempFile = new File(parent, SETTINGS_FILE_NAME + \".tmp\");\n+\t\tFile tempFile = new File(parent, RuneLite.DEFAULT_CONFIG_FILE + \".tmp\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72f95aedb1bb90b6f0a5435c5564da572cb2c1f9"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3810, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}