{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MjY3NTQ2", "number": 10664, "title": "Sidebar toggle hotkey changes", "bodyText": "Re-do of #10638 because I'm an idiot. Last time I promise.\nAdds a config option for the existing Ctrl+F11 hotkey which hides the sidebar entirely.\nAdds a new configurable hotkey that toggles the current/last open plugin panel (defaults to Ctrl+F12).\nBoth configs are at the bottom of the Runelite config panel.", "createdAt": "2020-01-26T22:19:43Z", "url": "https://github.com/runelite/runelite/pull/10664", "merged": true, "mergeCommit": {"oid": "62ea2b9eb430e456722eab5ccef0d33c3e23a706"}, "closed": true, "closedAt": "2020-05-13T02:53:00Z", "author": {"login": "Hannah-GBS"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGGT83gFqTM2MTY4OTM1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgvtiQABqjMzMzAwODEzNDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjg5MzU4", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-361689358", "createdAt": "2020-02-20T07:50:49Z", "commit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzo1MDo0OVrOFsJItw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzo1MDo0OVrOFsJItw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ==", "bodyText": "This shouldn't be in this PR", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381831351", "createdAt": "2020-02-20T07:50:49Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -588,6 +600,34 @@ public void requestFocus()\n \t\t{\n \t\t\tOSXUtil.requestFocus();\n \t\t}\n+\t\t// The workaround for Windows is to minimise and then un-minimise the client to bring\n+\t\t// it to the front because java.awt.Window#toFront doesn't work reliably.\n+\t\t// See https://stackoverflow.com/questions/309023/how-to-bring-a-window-to-the-front/7435722#7435722\n+\t\telse if (OSType.getOSType() == OSType.Windows && !frame.isFocused())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c917b0ba54ffdef42fdcee600815a8b324ed6f30", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/c917b0ba54ffdef42fdcee600815a8b324ed6f30", "committedDate": "2020-01-26T22:15:25Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/d641346cd7afd15922d165c1de6bb36e2f54dcf5", "committedDate": "2020-02-20T12:39:07Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMTQyMDc1", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-362142075", "createdAt": "2020-02-20T18:42:50Z", "commit": {"oid": "9b0d23a3bfe0c176bad5874db9a677a791e5dd47"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0Mjo1MFrOFsezig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxODo0OTowMFrOFse_zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjM3OA==", "bodyText": "This can be shortened to final HotkeyListener sidebarListener = new HotkeyListener(config::sidebarToggleKey)", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186378", "createdAt": "2020-02-20T18:42:50Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -346,7 +343,7 @@ public void init(final RuneLite runelite) throws Exception\n \n \t\t\t// Add key listener\n \t\t\tfinal HotkeyListener sidebarListener = new HotkeyListener(() ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0d23a3bfe0c176bad5874db9a677a791e5dd47"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjU4NA==", "bodyText": "This can be shortened to final HotkeyListener pluginPanelListener = new HotkeyListener(config::panelToggleKey)", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186584", "createdAt": "2020-02-20T18:43:17Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -354,6 +354,18 @@ public void hotkeyPressed()\n \n \t\t\tkeyManager.registerKeyListener(sidebarListener);\n \n+\t\t\tfinal HotkeyListener pluginPanelListener = new HotkeyListener(() ->\n+\t\t\t\tconfig.panelToggleKey())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4OTUxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t//Checks if the toolbar was previously closed by toggleSidebar\n          \n          \n            \n            \t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382189517", "createdAt": "2020-02-20T18:49:00Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -739,6 +751,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t//Checks if the toolbar was previously closed by toggleSidebar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5"}, "originalPosition": 38}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/d641346cd7afd15922d165c1de6bb36e2f54dcf5", "committedDate": "2020-02-20T12:39:07Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "committedDate": "2020-02-21T07:06:32Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDQwNTYw", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-365440560", "createdAt": "2020-02-27T06:32:17Z", "commit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjgwNzc3", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-370680777", "createdAt": "2020-03-06T23:11:22Z", "commit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDYwMTU3", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-376460157", "createdAt": "2020-03-17T22:55:24Z", "commit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjo1NToyNFrOF3w58A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjo1NToyNFrOF3w58A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAxNzI2NA==", "bodyText": "Per Adam's comment, this causes the frame to expand by the plugin toolbar's width if you collapse the panel (F+12) then expand the sidebar (F+11). From what I can tell, that's partially because of the sidebarOpen = !sidebarOpen; state mutation which happens here.\nAnyway, I think this whole method body can safely be replaced by the following:\nfinal boolean pluginPanelOpen = pluginPanel != null;\n\ncurrentButton.setSelected(!pluginPanelOpen);\n\nif (pluginPanelOpen)\n{\n\tcontract();\n}\nelse\n{\n\texpand(currentNavButton);\n}", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r394017264", "createdAt": "2020-03-17T22:55:24Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -742,6 +749,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar\n+\t\t\tif (!container.isAncestorOf(pluginToolbar))\n+\t\t\t{\n+\t\t\t\tcontainer.add(pluginToolbar);\n+\t\t\t\tframe.expandBy(pluginToolbar.getWidth());\n+\t\t\t}\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "committedDate": "2020-02-21T07:06:32Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "committedDate": "2020-03-18T00:22:57Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "committedDate": "2020-03-18T00:22:57Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "committedDate": "2020-03-18T21:36:36Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "committedDate": "2020-03-18T21:36:36Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "0edc2250ba1434f43b5d1727069e7b1d92d6d952", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/0edc2250ba1434f43b5d1727069e7b1d92d6d952", "committedDate": "2020-03-18T21:58:38Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjY2NTg3", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-377266587", "createdAt": "2020-03-18T22:01:50Z", "commit": {"oid": "0edc2250ba1434f43b5d1727069e7b1d92d6d952"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0edc2250ba1434f43b5d1727069e7b1d92d6d952", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/0edc2250ba1434f43b5d1727069e7b1d92d6d952", "committedDate": "2020-03-18T21:58:38Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "4cde9ed1e4ce635c9b7ba211180c611f6940288d", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/4cde9ed1e4ce635c9b7ba211180c611f6940288d", "committedDate": "2020-03-31T17:24:06Z", "message": "Add configurable hotkey to toggle the plugin panel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0OTYzNjU3", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-384963657", "createdAt": "2020-03-31T17:44:11Z", "commit": {"oid": "4cde9ed1e4ce635c9b7ba211180c611f6940288d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNTM5NjQx", "url": "https://github.com/runelite/runelite/pull/10664#pullrequestreview-410539641", "createdAt": "2020-05-13T02:07:35Z", "commit": {"oid": "4cde9ed1e4ce635c9b7ba211180c611f6940288d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7784395255a41c350a3088796b996ecf4d56a89a", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/7784395255a41c350a3088796b996ecf4d56a89a", "committedDate": "2020-05-13T02:45:13Z", "message": "client: Make toggle sidebar hotkey configurable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15e0f1e5f22a1543b08253edaf15779128cb688d", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/15e0f1e5f22a1543b08253edaf15779128cb688d", "committedDate": "2020-05-13T02:45:41Z", "message": "client: Add configurable hotkey to toggle plugin panel"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4cde9ed1e4ce635c9b7ba211180c611f6940288d", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/4cde9ed1e4ce635c9b7ba211180c611f6940288d", "committedDate": "2020-03-31T17:24:06Z", "message": "Add configurable hotkey to toggle the plugin panel"}, "afterCommit": {"oid": "15e0f1e5f22a1543b08253edaf15779128cb688d", "author": {"user": {"login": "Hannah-GBS", "name": "Hannah_GBS"}}, "url": "https://github.com/runelite/runelite/commit/15e0f1e5f22a1543b08253edaf15779128cb688d", "committedDate": "2020-05-13T02:45:41Z", "message": "client: Add configurable hotkey to toggle plugin panel"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4418, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}