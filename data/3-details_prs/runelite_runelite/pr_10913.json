{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxODM5MTIz", "number": 10913, "title": "Add an option to show the average amount for a loot source in the loot tracker", "bodyText": "I've found myself manually calculating the average anyway out of curiousity.\nThis adds a tooltip to the number of kills label so that the average can be seen.\nFor those who'd prefer, it also allows the total GP to be replaced with the average value.\nThe tooltip will show the option not selected.", "createdAt": "2020-02-29T11:44:14Z", "url": "https://github.com/runelite/runelite/pull/10913", "merged": true, "mergeCommit": {"oid": "24e291fd463c9b5bf6910a116d32c3625b8a3851"}, "closed": true, "closedAt": "2020-03-16T22:57:22Z", "author": {"login": "mikesena"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJ9CP-AFqTM2Nzc0MzYzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOIrpOAFqTM3NDk1OTAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzQzNjMz", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-367743633", "createdAt": "2020-03-03T07:12:33Z", "commit": {"oid": "e1d0726d0fda238209d3afd496a921970969aed6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzoxMjozM1rOFw6azw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzoxNzo1OFrOFw6hXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzMzEwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tdescription = \"Whether to show the total value or the average\"\n          \n          \n            \n            \t\tdescription = \"Show the average value of each loot instead of the sum total value\"", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r386833103", "createdAt": "2020-03-03T07:12:33Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerConfig.java", "diffHunk": "@@ -69,6 +69,16 @@ default boolean showPriceType()\n \t\treturn false;\n \t}\n \n+\t@ConfigItem(\n+\t\tkeyName = \"showAverage\",\n+\t\tname = \"Show Average Price\",\n+\t\tdescription = \"Whether to show the total value or the average\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1d0726d0fda238209d3afd496a921970969aed6"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzNDc4Mw==", "bodyText": "Why does this change add the average string to the tooltip even when the configuration option is disabled?", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r386834783", "createdAt": "2020-03-03T07:17:58Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,24 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tString totalString = priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(totalString + \" (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t\n+\t\t}\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1d0726d0fda238209d3afd496a921970969aed6"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46d5b9f83c1426ec3c090ddc709f5804a260dd83", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/46d5b9f83c1426ec3c090ddc709f5804a260dd83", "committedDate": "2020-03-03T20:28:25Z", "message": "Update runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerConfig.java\n\nCo-Authored-By: Jordan <Nightfirecat@users.noreply.github.com>"}, "afterCommit": {"oid": "7171069e133c361f12803c5924460990d1c079dd", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/7171069e133c361f12803c5924460990d1c079dd", "committedDate": "2020-03-03T20:30:07Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MjkzODUy", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-369293852", "createdAt": "2020-03-05T04:50:24Z", "commit": {"oid": "7171069e133c361f12803c5924460990d1c079dd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNDo1MDoyNFrOFyGVgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNDo1MDoyNFrOFyGVgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3NjkzMA==", "bodyText": "Compared to the price label text prior to this change, this is missing the + \" gp\" suffix. totalString should be used instead\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));\n          \n          \n            \n            \t\t\tpriceLabel.setText(totalString);", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388076930", "createdAt": "2020-03-05T04:50:24Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,24 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tString totalString = priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(totalString + \" (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7171069e133c361f12803c5924460990d1c079dd"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7171069e133c361f12803c5924460990d1c079dd", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/7171069e133c361f12803c5924460990d1c079dd", "committedDate": "2020-03-03T20:30:07Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}, "afterCommit": {"oid": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "committedDate": "2020-03-05T06:25:33Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MzUwMzQw", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-369350340", "createdAt": "2020-03-05T07:45:35Z", "commit": {"oid": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNzo0NTozNVrOFyJJ0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNzo0NTozNVrOFyJJ0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMzA5MA==", "bodyText": "There's loads of trailing space here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t\n          \n          \n            \n            \t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388123090", "createdAt": "2020-03-05T07:45:35Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "committedDate": "2020-03-05T06:25:33Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}, "afterCommit": {"oid": "4a64382c0199631bcf3e9379110231446dc0a2b5", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/4a64382c0199631bcf3e9379110231446dc0a2b5", "committedDate": "2020-03-05T09:51:36Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNTU1OTk2", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-370555996", "createdAt": "2020-03-06T19:02:46Z", "commit": {"oid": "4a64382c0199631bcf3e9379110231446dc0a2b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a64382c0199631bcf3e9379110231446dc0a2b5", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/4a64382c0199631bcf3e9379110231446dc0a2b5", "committedDate": "2020-03-05T09:51:36Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}, "afterCommit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/21e7224990635c03027723b5b510ca4ed384c92b", "committedDate": "2020-03-07T12:13:45Z", "message": "Toggle average prices from the panel instead of the config page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzk3ODcy", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-370797872", "createdAt": "2020-03-08T01:10:04Z", "commit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwMToxMDowNFrOFzShQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwMTozOTo0NVrOFzSm1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNTEyMg==", "bodyText": "Remove this eof line addition now that there are no other config changes", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389325122", "createdAt": "2020-03-08T01:10:04Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerConfig.java", "diffHunk": "@@ -90,4 +90,4 @@ default boolean syncPanel()\n \t{\n \t\treturn true;\n \t}\n-}\n\\ No newline at end of file\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjQ2Mw==", "bodyText": "This makes the average value of a single kill 0, which is not correct.", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389326463", "createdAt": "2020-03-08T01:37:25Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjU1MA==", "bodyText": "Why is this tooltip added here? Given that this is price information, it should only be handled with the price data on the right, which is already covered in the code above.", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389326550", "createdAt": "2020-03-08T01:39:45Z", "author": {"login": "Nightfirecat"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\n+\t\t}\n \n \t\tfinal long kills = getTotalKills();\n \t\tif (kills > 1)\n \t\t{\n \t\t\tsubTitleLabel.setText(\"x \" + kills);\n+\t\t\tsubTitleLabel.setToolTipText(averageString + \" (average)\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b"}, "originalPosition": 46}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21e7224990635c03027723b5b510ca4ed384c92b", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/21e7224990635c03027723b5b510ca4ed384c92b", "committedDate": "2020-03-07T12:13:45Z", "message": "Toggle average prices from the panel instead of the config page"}, "afterCommit": {"oid": "37738b3989f70a4d509799f0591ac64fb89ad7c5", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/37738b3989f70a4d509799f0591ac64fb89ad7c5", "committedDate": "2020-03-08T09:43:39Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNzg5ODcy", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-373789872", "createdAt": "2020-03-12T18:10:23Z", "commit": {"oid": "37738b3989f70a4d509799f0591ac64fb89ad7c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "committedDate": "2020-03-14T11:31:31Z", "message": "Show the average per kill as a tooltip in the loot tracker box"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37738b3989f70a4d509799f0591ac64fb89ad7c5", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/37738b3989f70a4d509799f0591ac64fb89ad7c5", "committedDate": "2020-03-08T09:43:39Z", "message": "Add an option to show the average amount for a loot source in the loot tracker"}, "afterCommit": {"oid": "f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "author": {"user": {"login": "mikesena", "name": "Michael"}}, "url": "https://github.com/runelite/runelite/commit/f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "committedDate": "2020-03-14T11:31:31Z", "message": "Show the average per kill as a tooltip in the loot tracker box"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTU5MDE5", "url": "https://github.com/runelite/runelite/pull/10913#pullrequestreview-374959019", "createdAt": "2020-03-16T07:07:56Z", "commit": {"oid": "f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4319, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}