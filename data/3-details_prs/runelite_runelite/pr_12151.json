{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MjMwODg5", "number": 12151, "title": "Fix minimum overlay size resizing", "bodyText": "This PR fixes a bug which would \"push\" overlays resized in the right/down-ward directions beyond their minimum sizes. A video demonstrating the updated behavior can be downloaded here: https://cdn.discordapp.com/attachments/419891709883973642/732809556131840081/simplescreenrecorder-2020-07-14_21.02.28.webm", "createdAt": "2020-07-15T04:08:49Z", "url": "https://github.com/runelite/runelite/pull/12151", "merged": true, "mergeCommit": {"oid": "6bac3e81b822f722d1107f8b6f63642be007d2a1"}, "closed": true, "closedAt": "2020-07-24T18:50:32Z", "author": {"login": "Nightfirecat"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1nUT2gFqTQ1MDI2NzUxNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4IGWWgFqTQ1NTA5MDIxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjY3NTE2", "url": "https://github.com/runelite/runelite/pull/12151#pullrequestreview-450267516", "createdAt": "2020-07-16T22:49:57Z", "commit": {"oid": "da9bb49d91357f828e320a645ec45b529891a280"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjo0OTo1N1rOGy_amg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjo1MjoyOFrOGy_eAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEyMDk4Ng==", "bodyText": "This should just be checked in Overlay class (for example override setPrefferedSize there and check it also there)", "url": "https://github.com/runelite/runelite/pull/12151#discussion_r456120986", "createdAt": "2020-07-16T22:49:57Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/screenmarkers/ScreenMarkerPlugin.java", "diffHunk": "@@ -216,6 +216,11 @@ public void finishCreation(boolean aborted)\n \t\t{\n \t\t\tfinal ScreenMarkerOverlay screenMarkerOverlay = new ScreenMarkerOverlay(marker);\n \t\t\tscreenMarkerOverlay.setPreferredLocation(overlay.getBounds().getLocation());\n+\n+\t\t\t// Ensure created overlay is of at least minimum width/height\n+\t\t\tfinal Rectangle markerBounds = overlay.getBounds();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da9bb49d91357f828e320a645ec45b529891a280"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEyMTg1OA==", "bodyText": "Why is allowing smaller minimum size useful?", "url": "https://github.com/runelite/runelite/pull/12151#discussion_r456121858", "createdAt": "2020-07-16T22:52:28Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/plugins/screenmarkers/ScreenMarkerOverlay.java", "diffHunk": "@@ -49,6 +50,7 @@\n \t\tsetLayer(OverlayLayer.ALWAYS_ON_TOP);\n \t\tsetPriority(OverlayPriority.HIGH);\n \t\tsetResizable(true);\n+\t\tsetMinimumSize(new Dimension(OverlayRenderer.OVERLAY_RESIZE_TOLERANCE * 2 + 1, OverlayRenderer.OVERLAY_RESIZE_TOLERANCE * 2 + 1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da9bb49d91357f828e320a645ec45b529891a280"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da9bb49d91357f828e320a645ec45b529891a280", "author": {"user": {"login": "Nightfirecat", "name": "Jordan"}}, "url": "https://github.com/runelite/runelite/commit/da9bb49d91357f828e320a645ec45b529891a280", "committedDate": "2020-07-15T03:58:10Z", "message": "OverlayRenderer: Fix overlay resizing logic\n\nPrior to this commit, reducing the size of an overlay not attached to an\nanchor point using the north or west edges and corners such that its\ndimensions would be below the minimum overlay size would push that\noverlay in that direction as it was dragged. This commit updates the\noverlay resize logic to prevent \"pushing\" overlays when trying to reduce\nthe width or height below the overlay's minimum size."}, "afterCommit": {"oid": "17120b9fb9f545f98c41c1bc7598eb842f6b43c9", "author": {"user": {"login": "Nightfirecat", "name": "Jordan"}}, "url": "https://github.com/runelite/runelite/commit/17120b9fb9f545f98c41c1bc7598eb842f6b43c9", "committedDate": "2020-07-21T07:43:22Z", "message": "OverlayRenderer: Fix overlay resizing logic\n\nPrior to this commit, reducing the size of an overlay not attached to an\nanchor point using the north or west edges and corners such that its\ndimensions would be below the minimum overlay size would push that\noverlay in that direction as it was dragged. This commit updates the\noverlay resize logic to prevent \"pushing\" overlays when trying to reduce\nthe width or height below the overlay's minimum size."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMzY4NTkz", "url": "https://github.com/runelite/runelite/pull/12151#pullrequestreview-452368593", "createdAt": "2020-07-21T11:36:16Z", "commit": {"oid": "17120b9fb9f545f98c41c1bc7598eb842f6b43c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDg3NzAw", "url": "https://github.com/runelite/runelite/pull/12151#pullrequestreview-455087700", "createdAt": "2020-07-24T18:07:41Z", "commit": {"oid": "17120b9fb9f545f98c41c1bc7598eb842f6b43c9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODowNzo0MVrOG24_Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODowNzo0MVrOG24_Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIxMDAxOQ==", "bodyText": "Double space", "url": "https://github.com/runelite/runelite/pull/12151#discussion_r460210019", "createdAt": "2020-07-24T18:07:41Z", "author": {"login": "deathbeam"}, "path": "runelite-client/src/main/java/net/runelite/client/ui/overlay/OverlayRenderer.java", "diffHunk": "@@ -460,53 +460,83 @@ public MouseEvent mouseDragged(MouseEvent mouseEvent)\n \n \t\tif (inOverlayResizingMode)\n \t\t{\n-\t\t\tfinal Rectangle r = currentManagedBounds;\n+\t\t\tfinal int left = p.x - currentManagedBounds.x; // Distance (in pixels) from the left edge of the bounds\n+\t\t\tfinal int top = p.y - currentManagedBounds.y;  // Distance (in pixels) from the top edge of the bounds\n+\t\t\tfinal int originalX = currentManagedBounds.x;\n+\t\t\tfinal int originalY = currentManagedBounds.y;\n+\t\t\tint x = originalX;\n+\t\t\tint y = originalY;\n+\t\t\tint width = currentManagedBounds.width;\n+\t\t\tint height = currentManagedBounds.height;\n \n-\t\t\tfinal int dx = p.x - r.x;\n-\t\t\tfinal int dy = p.y - r.y;\n \t\t\tswitch (clientUI.getCurrentCursor().getType())\n \t\t\t{\n \t\t\t\tcase Cursor.N_RESIZE_CURSOR:\n-\t\t\t\t\tint height = r.height - dy;\n-\t\t\t\t\tr.setRect(r.x, r.y + dy, r.width, height);\n+\t\t\t\t\ty += top;\n+\t\t\t\t\theight -=  top;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17120b9fb9f545f98c41c1bc7598eb842f6b43c9"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3c7ce535d87728cf98d5901bb46aa288fbcee5d", "author": {"user": {"login": "Nightfirecat", "name": "Jordan"}}, "url": "https://github.com/runelite/runelite/commit/b3c7ce535d87728cf98d5901bb46aa288fbcee5d", "committedDate": "2020-07-24T18:09:15Z", "message": "OverlayRenderer: Fix overlay resizing logic\n\nPrior to this commit, reducing the size of an overlay not attached to an\nanchor point using the north or west edges and corners such that its\ndimensions would be below the minimum overlay size would push that\noverlay in that direction as it was dragged. This commit updates the\noverlay resize logic to prevent \"pushing\" overlays when trying to reduce\nthe width or height below the overlay's minimum size."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17120b9fb9f545f98c41c1bc7598eb842f6b43c9", "author": {"user": {"login": "Nightfirecat", "name": "Jordan"}}, "url": "https://github.com/runelite/runelite/commit/17120b9fb9f545f98c41c1bc7598eb842f6b43c9", "committedDate": "2020-07-21T07:43:22Z", "message": "OverlayRenderer: Fix overlay resizing logic\n\nPrior to this commit, reducing the size of an overlay not attached to an\nanchor point using the north or west edges and corners such that its\ndimensions would be below the minimum overlay size would push that\noverlay in that direction as it was dragged. This commit updates the\noverlay resize logic to prevent \"pushing\" overlays when trying to reduce\nthe width or height below the overlay's minimum size."}, "afterCommit": {"oid": "b3c7ce535d87728cf98d5901bb46aa288fbcee5d", "author": {"user": {"login": "Nightfirecat", "name": "Jordan"}}, "url": "https://github.com/runelite/runelite/commit/b3c7ce535d87728cf98d5901bb46aa288fbcee5d", "committedDate": "2020-07-24T18:09:15Z", "message": "OverlayRenderer: Fix overlay resizing logic\n\nPrior to this commit, reducing the size of an overlay not attached to an\nanchor point using the north or west edges and corners such that its\ndimensions would be below the minimum overlay size would push that\noverlay in that direction as it was dragged. This commit updates the\noverlay resize logic to prevent \"pushing\" overlays when trying to reduce\nthe width or height below the overlay's minimum size."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDkwMjE3", "url": "https://github.com/runelite/runelite/pull/12151#pullrequestreview-455090217", "createdAt": "2020-07-24T18:12:01Z", "commit": {"oid": "b3c7ce535d87728cf98d5901bb46aa288fbcee5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3478, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}