{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MzA2NzI3", "number": 11358, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMjoyMFrOD13neQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo0Njo0OVrOD1--jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODEyMzQ1OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMjoyMFrOGLg6Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMjoyMFrOGLg6Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNjY5OA==", "bodyText": "this null check should be down next to the delete call", "url": "https://github.com/runelite/runelite/pull/11358#discussion_r414726698", "createdAt": "2020-04-24T17:02:20Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "diffHunk": "@@ -75,6 +75,11 @@ public void start()\n \t@Subscribe\r\n \tprivate void onClientShutdown(ClientShutdown e)\r\n \t{\r\n+\t\tif (sessionId == null)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea6a83bd7a9c3a6c353ec2afb442432529a8dd7b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODQyOTQ2OnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxODoxOToxNFrOGLjvsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoxMTozOFrOGLnhPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MzE2OQ==", "bodyText": "There are potentially ~3 threads here (event, which comes in on EDT?), this thread, and the thread executing ping, so this is not thread safe. You should make a local reference to sessionId and then use that.", "url": "https://github.com/runelite/runelite/pull/11358#discussion_r414773169", "createdAt": "2020-04-24T18:19:14Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "diffHunk": "@@ -81,7 +81,10 @@ private void onClientShutdown(ClientShutdown e)\n \t\t{\r\n \t\t\ttry\r\n \t\t\t{\r\n-\t\t\t\tsessionClient.delete(sessionId);\r\n+\t\t\t\tif (sessionId != null)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14123c5e087ba3c91ff51916287b3cb18bc45516"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTAwNg==", "bodyText": "Good catch, I hadn't thought of the threaded nature of this.", "url": "https://github.com/runelite/runelite/pull/11358#discussion_r414835006", "createdAt": "2020-04-24T20:11:38Z", "author": {"login": "Doxterpepper"}, "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "diffHunk": "@@ -81,7 +81,10 @@ private void onClientShutdown(ClientShutdown e)\n \t\t{\r\n \t\t\ttry\r\n \t\t\t{\r\n-\t\t\t\tsessionClient.delete(sessionId);\r\n+\t\t\t\tif (sessionId != null)\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MzE2OQ=="}, "originalCommit": {"oid": "14123c5e087ba3c91ff51916287b3cb18bc45516"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTMyOTQyOnYy", "diffSide": "RIGHT", "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo0Njo0OVrOGLru9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo0Njo0OVrOGLru9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNDA1NA==", "bodyText": "this should be localUuid", "url": "https://github.com/runelite/runelite/pull/11358#discussion_r414904054", "createdAt": "2020-04-24T22:46:49Z", "author": {"login": "Adam-"}, "path": "runelite-client/src/main/java/net/runelite/client/ClientSessionManager.java", "diffHunk": "@@ -81,7 +81,11 @@ private void onClientShutdown(ClientShutdown e)\n \t\t{\r\n \t\t\ttry\r\n \t\t\t{\r\n-\t\t\t\tsessionClient.delete(sessionId);\r\n+\t\t\t\tUUID localUuid = sessionId;\r\n+\t\t\t\tif (localUuid != null)\r\n+\t\t\t\t{\r\n+\t\t\t\t\tsessionClient.delete(sessionId);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85a49d4c2d141f823a2084f5fbc96fb97c3973a"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3644, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}