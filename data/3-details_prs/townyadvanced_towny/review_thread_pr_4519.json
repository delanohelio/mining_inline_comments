{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNTYxNTE2", "number": 4519, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyMTo1NVrOFA0pBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyNDozNVrOFA0t0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2NDA2NzkxOnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyMTo1NVrOH_S_Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyMTo1NVrOH_S_Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEzMzQ2Mg==", "bodyText": "This should have been done to line 958.", "url": "https://github.com/TownyAdvanced/Towny/pull/4519#discussion_r536133462", "createdAt": "2020-12-04T14:21:55Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "diffHunk": "@@ -954,11 +960,20 @@ public void nationRank(Player player, String[] split) throws TownyException {\n \t\t\t\t\t}\r\n \t\t\t\t} catch (AlreadyRegisteredException e) {\r\n \t\t\t\t\t// Must already have this rank\r\n-\t\t\t\t\tTownyMessaging.sendMsg(player, Translation.of(\"msg_resident_already_has_rank\", target.getName(), \"Nation\"));\r\n+\t\t\t\t\tTownyMessaging.sendMsg(player, nationRankAddEvent.getCancelMessage());\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf56abec468ac49fead0399162e9e01c7fc98634"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2NDA4MDE4OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/event/NationRankAddEvent.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyNDozNVrOH_TGiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNDoyNDozNVrOH_TGiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEzNTMwNA==", "bodyText": "The cancelMessage should be Translation.of(\"msg_resident_not_part_of_any_town\") which can be set directly on line 18.", "url": "https://github.com/TownyAdvanced/Towny/pull/4519#discussion_r536135304", "createdAt": "2020-12-04T14:24:35Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/event/NationRankAddEvent.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.palmergames.bukkit.towny.event;\n+\n+import com.palmergames.bukkit.towny.object.Nation;\n+import com.palmergames.bukkit.towny.object.Resident;\n+import com.palmergames.bukkit.towny.object.Translation;\n+import org.bukkit.event.Cancellable;\n+import org.bukkit.event.Event;\n+import org.bukkit.event.HandlerList;\n+\n+public class NationRankAddEvent extends Event implements Cancellable {\n+\n+\tprivate static final HandlerList handlers = new HandlerList();\n+\n+\tprivate final Nation nation;\n+\tprivate final Resident res;\n+\tprivate final String rank;\n+\tprivate boolean isCancelled = false;\n+\tprivate String cancelMessage;\n+\n+\tpublic NationRankAddEvent(Nation nation, String rank, Resident res) {\n+\t\tthis.nation = nation;\n+\t\tthis.rank = rank;\n+\t\tthis.res = res;\n+\t\tthis.cancelMessage = Translation.of(\"msg_resident_already_has_rank\", res.getName(), \"Nation\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf56abec468ac49fead0399162e9e01c7fc98634"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1200, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}