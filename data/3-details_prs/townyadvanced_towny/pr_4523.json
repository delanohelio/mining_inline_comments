{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzM3NzY3", "number": 4523, "title": "Move neutral setting to Government, allowing Towns to become neutral.", "bodyText": "Description:\n\nThis PR will again lower the changes between Towny and SiegeWar Towny.\nIt will also increase customize-ability of Event War and other plugins.\n\nAdd towny.command.town.toggle.neutral permission node.\nAdds setNeutral, isNeutral to Government.\nAdds neutral setting to Towns in the database.\nDeprecates the Nation toggleNeutral.\nDoes NOT add the /town toggle neutral|peaceful command yet.\nMoves the neutrality tests for war off of the Nation object and onto the war listeners.\n\n\nNew Nodes/Commands/ConfigOptions:\n\nPermission node: towny.command.town.toggle.neutral\n\nChild node of towny.command.town.toggle.*\n\n\nRelevant Towny Issue ticket:\n\nCloses #4531\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-12-04T19:24:36Z", "url": "https://github.com/TownyAdvanced/Towny/pull/4523", "merged": true, "mergeCommit": {"oid": "f371cf699f20a0ad6a59be20ba441f675cad7cff"}, "closed": true, "closedAt": "2020-12-06T21:23:21Z", "author": {"login": "LlmDl"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjjW1OABqjQwNzY3NTMwNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjlNi4AH2gAyNTMyNzM3NzY3OmU5ZWFmNWQ5NzY2OTQ0MzY4ODZhNDc2MzdkZTk0ZjcwMzgxNWUxMGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60eb672fbb6c29fb56d8a84ad3904927da1223cc", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/60eb672fbb6c29fb56d8a84ad3904927da1223cc", "committedDate": "2020-12-06T16:00:53Z", "message": "Remove Nation#toggleNeutral() logic into war listeners."}, "afterCommit": {"oid": "ebac00d41cb7cf02a8245eedf132e23ddad6d3e3", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/ebac00d41cb7cf02a8245eedf132e23ddad6d3e3", "committedDate": "2020-12-04T18:54:35Z", "message": "Move neutral setting to Government, allowing Towns to become neutral.\n\n- Add towny.command.town.toggle.neutral permission node.\n- Adds setNeutral, isNeutral to Government.\n- Adds neutral setting to Towns in the database.\n- Deprecates the Nation toggleNeutral.\n- Does NOT add the /town toggle neutral|peaceful command yet."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfcc5ece24c7d0965fe1b2fa868b0529b1c22b40", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cfcc5ece24c7d0965fe1b2fa868b0529b1c22b40", "committedDate": "2020-12-06T16:28:58Z", "message": "Move neutral setting to Government, allowing Towns to become neutral.\n\n- Add towny.command.town.toggle.neutral permission node.\n- Adds setNeutral, isNeutral to Government.\n- Adds neutral setting to Towns in the database.\n- Deprecates the Nation toggleNeutral.\n- Does NOT add the /town toggle neutral|peaceful command yet."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed", "committedDate": "2020-12-06T16:30:32Z", "message": "Remove Nation#toggleNeutral() logic into war listeners."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebac00d41cb7cf02a8245eedf132e23ddad6d3e3", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/ebac00d41cb7cf02a8245eedf132e23ddad6d3e3", "committedDate": "2020-12-04T18:54:35Z", "message": "Move neutral setting to Government, allowing Towns to become neutral.\n\n- Add towny.command.town.toggle.neutral permission node.\n- Adds setNeutral, isNeutral to Government.\n- Adds neutral setting to Towns in the database.\n- Deprecates the Nation toggleNeutral.\n- Does NOT add the /town toggle neutral|peaceful command yet."}, "afterCommit": {"oid": "e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed", "committedDate": "2020-12-06T16:30:32Z", "message": "Remove Nation#toggleNeutral() logic into war listeners."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzMyNDA0", "url": "https://github.com/TownyAdvanced/Towny/pull/4523#pullrequestreview-545732404", "createdAt": "2020-12-06T17:55:44Z", "commit": {"oid": "e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNzo1NTo0NVrOIANaFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNzo1NzoyNlrOIANbog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5MDU4Mw==", "bodyText": "If we're catching an exception, we either need to say why it is ignored, or do something with it; like get a stacktrace or send a debug logger message.\nAdditionally, this try-catch doesn't seem to throw anything and appears as if it can be omitted. If it does happen to throw something, the parent catch would be the first to find out.", "url": "https://github.com/TownyAdvanced/Towny/pull/4523#discussion_r537090583", "createdAt": "2020-12-06T17:55:45Z", "author": {"login": "TheFlagCourier"}, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -818,6 +818,14 @@ public boolean loadTown(Town town) {\n \t\t\t\t\t} catch (Exception ee) {\n \t\t\t\t\t\ttown.setRuinedTime(0);\n \t\t\t\t\t}\n+\t\t\t\t\n+\t\t\t\tline = keys.get(\"neutral\");\n+\t\t\t\tif (line != null)\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\ttown.setNeutral(Boolean.parseBoolean(line));\n+\t\t\t\t\t} catch (Exception ignored) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5MDk3OA==", "bodyText": "Might be a good idea to add a @since tag, with the upcoming version's number. Same for the isNeutral() check below.", "url": "https://github.com/TownyAdvanced/Towny/pull/4523#discussion_r537090978", "createdAt": "2020-12-06T17:57:26Z", "author": {"login": "TheFlagCourier"}, "path": "src/com/palmergames/bukkit/towny/object/Government.java", "diffHunk": "@@ -142,7 +143,25 @@ public final void setOpen(boolean isOpen) {\n \tpublic final boolean isOpen() { \n \t\treturn isOpen; \n \t}\n+\t\n+\t/**\n+\t * Sets the neutrality/peacefulness of the object. \n+\t * \n+\t * @param neutral whether the object will be neutral or peaceful.\n+\t */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8dc58ec6f05b4b8dd2bb68c02293f1a266508ed"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9eaf5d976694436886a47637de94f703815e10e", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/e9eaf5d976694436886a47637de94f703815e10e", "committedDate": "2020-12-06T18:25:52Z", "message": "Removes unneeded exception catching, adds @since javadocing."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4149, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}