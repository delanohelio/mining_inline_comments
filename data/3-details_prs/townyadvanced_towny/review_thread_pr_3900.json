{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMjE2Nzgz", "number": 3900, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwMTozMzowMFrODxAEdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwMTozMzowMFrODxAEdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNzA3OTU5OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwMTozMzowMFrOGERV3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwMTozMzowMFrOGERV3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzEzMTYxMg==", "bodyText": "This lang string can be changed to the generic msg_confirm_purchase string and all the lang file changes can be reverted.", "url": "https://github.com/TownyAdvanced/Towny/pull/3900#discussion_r407131612", "createdAt": "2020-04-12T01:33:00Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "diffHunk": "@@ -656,12 +656,29 @@ public boolean parsePlotCommand(Player player, String[] split) throws TownyExcep\n \t\t\t\t\t\t\t\t if (OutpostUtil.OutpostTests(town, resident, townyWorld, key, isAdmin, true)) {\r\n \t\t\t\t\t\t\t\t\t if (TownySettings.isUsingEconomy() && !town.getAccount().pay(TownySettings.getOutpostCost(), String.format(\"Plot Set Outpost\"))) \r\n \t\t\t\t\t\t\t\t\t\t throw new TownyException(TownySettings.getLangString(\"msg_err_cannot_afford_to_set_outpost\"));\r\n-\r\n-\t\t\t\t\t\t\t\t\t TownyMessaging.sendMessage(player, String.format(TownySettings.getLangString(\"msg_plot_set_cost\"), TownyEconomyHandler.getFormattedBalance(TownySettings.getOutpostCost()), TownySettings.getLangString(\"outpost\")));\r\n-\t\t\t\t\t\t\t\t\t townBlock.setOutpost(true);\r\n-\t\t\t\t\t\t\t\t\t town.addOutpostSpawn(player.getLocation());\r\n-\t\t\t\t\t\t\t\t\t townyUniverse.getDataSource().saveTown(town);\r\n-\t\t\t\t\t\t\t\t\t townyUniverse.getDataSource().saveTownBlock(townBlock);\r\n+\t\t\t\t\t\t\t\t\t \r\n+\t\t\t\t\t\t\t\t\t // Create a confirmation for setting outpost.\r\n+\t\t\t\t\t\t\t\t\t Confirmation confirmation = new Confirmation(() -> {\r\n+\t\t\t\t\t\t\t\t\t\t townBlock.setOutpost(true);\r\n+\t\t\t\t\t\t\t\t\t\t \r\n+\t\t\t\t\t\t\t\t\t\t try {\r\n+\t\t\t\t\t\t\t\t\t\t\t town.addOutpostSpawn(player.getLocation());\r\n+\t\t\t\t\t\t\t\t\t\t } catch (TownyException e) {\r\n+\t\t\t\t\t\t\t\t\t\t\t TownyMessaging.sendErrorMsg(e.getMessage());\r\n+\t\t\t\t\t\t\t\t\t\t\t return;\r\n+\t\t\t\t\t\t\t\t\t\t }\r\n+\t\t\t\t\t\t\t\t\t\t \r\n+\t\t\t\t\t\t\t\t\t\t townyUniverse.getDataSource().saveTown(town);\r\n+\t\t\t\t\t\t\t\t\t\t townyUniverse.getDataSource().saveTownBlock(townBlock);\r\n+\t\t\t\t\t\t\t\t\t\t TownyMessaging.sendMessage(player, String.format(TownySettings.getLangString(\"msg_plot_set_cost\"), TownyEconomyHandler.getFormattedBalance(TownySettings.getOutpostCost()), TownySettings.getLangString(\"outpost\")));\r\n+\t\t\t\t\t\t\t\t\t });\r\n+\t\t\t\t\t\t\t\t\t // Set title.\r\n+\t\t\t\t\t\t\t\t\t String title = String.format(TownySettings.getLangString(\"msg_warn_outpost_cost\"), TownyEconomyHandler.getFormattedBalance(TownySettings.getOutpostCost()));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2f01a4e06df013f245028eb4290c780804207fa"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1269, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}