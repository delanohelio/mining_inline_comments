{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NzUwNTM0", "number": 3714, "title": "Better tab completes", "bodyText": "Description:\n\nSee commits for individual changes.\nThis PR changes commands to:\n\nBe more readable\nReturn more relevant subcommands/residents/towns/nations/worlds\nAdd missing features for certain subcommands, like /t invite\nReturn empty list instead of null (online players) when no completions match\n\nFixed Trie to not be case sensitive when searching, and to respect case when adding new keys. Also fixed adding only lowercase strings in TownyUniverse.\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-02-23T21:03:14Z", "url": "https://github.com/TownyAdvanced/Towny/pull/3714", "merged": true, "mergeCommit": {"oid": "cd3c0202de5e8707db12f06fd9df693fa90e14c4"}, "closed": true, "closedAt": "2020-02-24T13:51:54Z", "author": {"login": "stzups"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcG8c-lgH2gAyMzc4NzUwNTM0OjFkNjZhYWU1YzAxMzc1ZTc1NjExNWMxM2JhMjQ5NzlhZTJiNzY0Mzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHd3GbgFqTM2MzQwMDkzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d66aae5c01375e756115c13ba24979ae2b76437", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/1d66aae5c01375e756115c13ba24979ae2b76437", "committedDate": "2020-02-22T22:55:35Z", "message": "Removed braces for readability on one line if statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e3adf3565dc58e959cd0c2ee53043c7d2e4889a", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/2e3adf3565dc58e959cd0c2ee53043c7d2e4889a", "committedDate": "2020-02-22T23:14:18Z", "message": "Implemented better tab completion for plot command\n      - No results returns nothing instead of online players\n      - Made tab complete results static\n      - Restructured for readability\n      - Implemented perm and toggle tab completes for /plot group\n      - Made /plot perm return more relevant results\n      - Moved onTabComplete to below onCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de85298e90ec9f0375ea6be3284ea8f84ccbd583", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/de85298e90ec9f0375ea6be3284ea8f84ccbd583", "committedDate": "2020-02-22T23:15:17Z", "message": "Added comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6aa4de3fdc045a985613263228a905522f375ea", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/f6aa4de3fdc045a985613263228a905522f375ea", "committedDate": "2020-02-23T14:43:38Z", "message": "Moved set and toggle completions to BaseCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ded136ccb574142552341b60c1e6e321e9c81bc", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/5ded136ccb574142552341b60c1e6e321e9c81bc", "committedDate": "2020-02-23T14:45:31Z", "message": "Added better tab completion for residents\n- Removal of broken commands for tab completions\n- Expansion of residentToggleTabCompletes\n- Addition of residentModeTabCompletes\n- Made all completes static\n- Move onTabComplete to below onCommand\n- Refactored onTabComplete to be more specific and implement more args"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "954c0fbf34f01cb01db590185ac78d5fe76cf30b", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/954c0fbf34f01cb01db590185ac78d5fe76cf30b", "committedDate": "2020-02-23T15:21:24Z", "message": "Formatting for consistency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ab7db5bedf317feda28fd894379085a55a955f2", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/5ab7db5bedf317feda28fd894379085a55a955f2", "committedDate": "2020-02-23T15:42:12Z", "message": "Rename setTabComplete to permTabComplete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b8b0608fc68dfb23029b847e64dd9d7719f2c8", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/45b8b0608fc68dfb23029b847e64dd9d7719f2c8", "committedDate": "2020-02-23T16:35:36Z", "message": "Added better tab completion to /town\n- Added more static tab completes\n- Rank returns residents and ranks\n- /t outlaw remove returns current outlaws\n- /t kick returns residents\n- added /t invite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a9162734c1cf8a554b8cc9d2aac1b353dd755af", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/5a9162734c1cf8a554b8cc9d2aac1b353dd755af", "committedDate": "2020-02-23T16:51:39Z", "message": "Added better tab completion to /towny\n- Made tab completions static\n- Reformat for readability/consistency\n- Fixed /towny top resident/land tab completes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31de2d03af5a0a5576f94da71dc6c4f5da537a59", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/31de2d03af5a0a5576f94da71dc6c4f5da537a59", "committedDate": "2020-02-23T16:56:15Z", "message": "Tree doesn't show as a tag completion for players"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc03fcca627be3326162ff63652c62178f8d32cc", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc03fcca627be3326162ff63652c62178f8d32cc", "committedDate": "2020-02-23T16:59:30Z", "message": "Remove unnecessary if (args.length > 0), always true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de39e29f76556deb60a3461a28b404cf55b507ef", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/de39e29f76556deb60a3461a28b404cf55b507ef", "committedDate": "2020-02-23T17:25:36Z", "message": "Fixed townyworld"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "841076614b916b8ed9909550e494b01a8b83b933", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/841076614b916b8ed9909550e494b01a8b83b933", "committedDate": "2020-02-23T19:29:59Z", "message": "Made methods static"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09d3dc44053ea6384c64b131ee8ea078fc8d6df0", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/09d3dc44053ea6384c64b131ee8ea078fc8d6df0", "committedDate": "2020-02-23T19:52:47Z", "message": "Moved some tab completions to their own function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6adf7a194d1206c322e0889c5f4cb08544b9e37b", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/6adf7a194d1206c322e0889c5f4cb08544b9e37b", "committedDate": "2020-02-23T19:53:50Z", "message": "Added better tab completion to /townyadmin\n- Added missing subcommands to completions\n- Made subcommands static\n- Added consistent functionality for all subcommands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "200e62eeb8f43b2764200ae5f1e81190d6b6a254", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/200e62eeb8f43b2764200ae5f1e81190d6b6a254", "committedDate": "2020-02-23T20:15:31Z", "message": "Tab completions now return uppercase letters where applicable\n- Performance is mostly unaffected by the 100 get(string)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaeb652965593ff6f88fe7796dff49ad3b2e96b7", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/aaeb652965593ff6f88fe7796dff49ad3b2e96b7", "committedDate": "2020-02-23T21:00:33Z", "message": "Fix casing issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52c73d545d31059d47f7bec04981a882c5596db", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/c52c73d545d31059d47f7bec04981a882c5596db", "committedDate": "2020-02-23T21:06:27Z", "message": "Removekey is case sensitive, comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "918de7606f9ee7e28130b6d82b0fe8a1edad6631", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/918de7606f9ee7e28130b6d82b0fe8a1edad6631", "committedDate": "2020-02-23T21:25:28Z", "message": "added /t join"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc799e054f22702cf340a35b0b0ba8012340e8e6", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc799e054f22702cf340a35b0b0ba8012340e8e6", "committedDate": "2020-02-23T21:31:41Z", "message": "Fixed typo getting the wrong trie"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17b006a140de9232234edb3fc9cde9b2f1c4a911", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/17b006a140de9232234edb3fc9cde9b2f1c4a911", "committedDate": "2020-02-23T21:32:07Z", "message": "Now using proper casing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "366b9da47b1861dc64f688eca5f20481f4fe8858", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/366b9da47b1861dc64f688eca5f20481f4fe8858", "committedDate": "2020-02-23T21:32:48Z", "message": "No need to build the trie, it is already built when newResident, newNation, and newTown are called during load"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMTI1OTY3", "url": "https://github.com/TownyAdvanced/Towny/pull/3714#pullrequestreview-363125967", "createdAt": "2020-02-23T22:06:47Z", "commit": {"oid": "366b9da47b1861dc64f688eca5f20481f4fe8858"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yM1QyMjowNjo0N1rOFtTFaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yM1QyMjoxMTowN1rOFtTG4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA0MjkyMA==", "bodyText": "One thing I forgot to mention last time around was that accept/deny are configurable in the config. I dunno if we want to handle that.", "url": "https://github.com/TownyAdvanced/Towny/pull/3714#discussion_r383042920", "createdAt": "2020-02-23T22:06:47Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/InviteCommand.java", "diffHunk": "@@ -55,22 +55,21 @@ public InviteCommand(Towny instance) {\n \t@Override\n \tpublic List<String> onTabComplete(CommandSender sender, Command command, String alias, String[] args) {\n \t\t\n-\t\tif (args.length == 1) {\n-\t\t\treturn NameUtil.filterByStart(inviteTabCompletes, args[0]);\n-\t\t}\n-\t\t\n-\t\tif (args.length == 2) {\n-\t\t\tswitch (args[0].toLowerCase()) {\n-\t\t\t\tcase \"accept\":\n-\t\t\t\tcase \"deny\":\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\treturn NameUtil.filterByStart(TownyUniverse.getInstance().getDataSource().getResident(sender.getName()).getReceivedInvites()\n-\t\t\t\t\t\t\t.stream()\n-\t\t\t\t\t\t\t.map(Invite::getSender)\n-\t\t\t\t\t\t\t.map(TownyInviteSender::getName)\n-\t\t\t\t\t\t\t.collect(Collectors.toList()), args[1]);\n-\t\t\t\t\t} catch (TownyException ignored) {}\n-\t\t\t}\n+\t\tswitch (args.length) {\n+\t\t\tcase 1:\n+\t\t\t\treturn NameUtil.filterByStart(inviteTabCompletes, args[0]);\n+\t\t\tcase 2:\n+\t\t\t\tswitch (args[0].toLowerCase()) {\n+\t\t\t\t\tcase \"accept\":\n+\t\t\t\t\tcase \"deny\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "366b9da47b1861dc64f688eca5f20481f4fe8858"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA0MzI5Nw==", "bodyText": "map is one that cannot be used from console", "url": "https://github.com/TownyAdvanced/Towny/pull/3714#discussion_r383043297", "createdAt": "2020-02-23T22:11:07Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/TownyCommand.java", "diffHunk": "@@ -57,11 +58,22 @@\n \t\t\"time\",\r\n \t\t\"top\",\r\n \t\t\"spy\",\r\n-\t\t\"tree\",\r\n \t\t\"universe\",\r\n \t\t\"v\",\r\n \t\t\"war\"\r\n \t));\r\n+\t\r\n+\tprivate static final List<String> townyConsoleTabCompletes = new ArrayList<>(Arrays.asList(\r\n+\t\t\"map\",\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "366b9da47b1861dc64f688eca5f20481f4fe8858"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6cbf3b3e5adc64514dd1cd507939378d362b1c3", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/d6cbf3b3e5adc64514dd1cd507939378d362b1c3", "committedDate": "2020-02-23T22:24:19Z", "message": "Remove map from console tab completes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e075c23e310b71a775b3d0120f5662835beff5e6", "author": {"user": {"login": "stzups", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/e075c23e310b71a775b3d0120f5662835beff5e6", "committedDate": "2020-02-23T22:25:04Z", "message": "Accept/deny is configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNDAwOTMx", "url": "https://github.com/TownyAdvanced/Towny/pull/3714#pullrequestreview-363400931", "createdAt": "2020-02-24T13:50:59Z", "commit": {"oid": "e075c23e310b71a775b3d0120f5662835beff5e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3229, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}