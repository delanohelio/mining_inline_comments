{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NDMwNTAz", "number": 4324, "title": "Improve delete events.", "bodyText": "Description:\n\nThis PR aims to improve the towny object delete events. It adds fetching the UUID, and the time registered for each towny object: Resident, Town, and Nation.\nIt also allows fetching the nation from the PreDeleteNationEvent so that behavior of the PreDeleteTownEvent (brought to my attention by NNYaKNpGms0eUVpiSdHx on discord).\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-09-17T06:07:38Z", "url": "https://github.com/TownyAdvanced/Towny/pull/4324", "merged": true, "mergeCommit": {"oid": "7ebad2f1d7966fb00336a459f34d7bffc5587a54"}, "closed": true, "closedAt": "2020-09-18T12:07:52Z", "author": {"login": "silverwolfg11"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJqpUjAH2gAyNDg4NDMwNTAzOjk0Yzc1ODcyNmFkODBkMTA2YjIyMzk0MDk1ZDA2N2JkNzliYTAyMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKEc-mgFqTQ5MTQwNTUyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94c758726ad80d106b22394095d067bd79ba022e", "author": {"user": {"login": "silverwolfg11", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/94c758726ad80d106b22394095d067bd79ba022e", "committedDate": "2020-09-17T06:03:42Z", "message": "Improve delete events."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNjAzMzE0", "url": "https://github.com/TownyAdvanced/Towny/pull/4324#pullrequestreview-490603314", "createdAt": "2020-09-17T13:37:39Z", "commit": {"oid": "94c758726ad80d106b22394095d067bd79ba022e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMzozNzozOVrOHTipXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMzozNzozOVrOHTipXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI1MjYzNg==", "bodyText": "This one here could be a bit of trouble. It would return null if the resident has not had a UUID applied to it, (which could certainly happen if they haven't logged in since UUID collection began and the old-resident-delete is why they're deleted,) or if the admin has the UUID gathering task turned off. Maybe put a warning that it could return null in the javadoc?", "url": "https://github.com/TownyAdvanced/Towny/pull/4324#discussion_r490252636", "createdAt": "2020-09-17T13:37:39Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/event/DeletePlayerEvent.java", "diffHunk": "@@ -18,15 +17,28 @@ public static HandlerList getHandlerList() {\n         return handlers;\n     }\n \n-    public DeletePlayerEvent(String player) {\n-        super(!Bukkit.getServer().isPrimaryThread());\n-        this.playerName = player;\n+    public DeletePlayerEvent(Resident resident) {\n+        super(resident.getName(), resident.getUUID(), resident.getRegistered());\n     }\n \n     /**\n      * @return the deleted player's name.\n      */\n     public String getPlayerName() {\n-        return playerName;\n+        return name;\n     }\n+\n+\t/**\n+\t * @return deleted player's uuid\n+\t */\n+\tpublic UUID getPlayerUUID() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94c758726ad80d106b22394095d067bd79ba022e"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc0a9e8e657683e4272fbbcf86b33f30cd67a264", "author": {"user": {"login": "silverwolfg11", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc0a9e8e657683e4272fbbcf86b33f30cd67a264", "committedDate": "2020-09-17T19:22:14Z", "message": "Notate player UUID nullability."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDA1NTIz", "url": "https://github.com/TownyAdvanced/Towny/pull/4324#pullrequestreview-491405523", "createdAt": "2020-09-18T12:07:45Z", "commit": {"oid": "cc0a9e8e657683e4272fbbcf86b33f30cd67a264"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4185, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}