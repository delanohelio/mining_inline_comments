{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMjc0NDcz", "number": 3802, "title": "Small cleanup and microperformance changes.", "bodyText": "Signed-off-by: Articdive 13535885+Articdive@users.noreply.github.com\n\nDescription:\n\nThis just removes some small things I found while searching through the project looking at certain things, it just removes some redundant casts/assignments\n\nNew Nodes/Commands/ConfigOptions:\n\nNot the case\n\nRelevant Towny Issue ticket:\n\nNot the case\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-03-19T22:53:09Z", "url": "https://github.com/TownyAdvanced/Towny/pull/3802", "merged": true, "mergeCommit": {"oid": "571ed949baf77e62f01b2574e905746427673ef8"}, "closed": true, "closedAt": "2020-04-02T17:00:42Z", "author": {"login": "Articdive"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPmCthAFqTM3ODc3MzAzNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTJeQNAFqTM4NTA5NTc5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzczMDM2", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-378773036", "createdAt": "2020-03-20T19:54:18Z", "commit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxOTo1NDoxOFrOF5hYCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxOTo1NDoxOFrOF5hYCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg1OTk3Nw==", "bodyText": "Should probably be this if the casting isn't needed to work. Have you tested this?\n\t\t\t} else { // So it's not from the sender, then it's from the receiver so\n\t\t\t\toutput = Colors.Blue + invite.getSender().getName() + Colors.Gray + \" - \" + Colors.Green + name;\n\t\t\t\tif (invite.getReceiver() instanceof Resident) {\n\t\t\t\t\tobject = TownySettings.getLangString(\"town_sing\");\n\t\t\t\t}\n\t\t\t\tif (invite.getReceiver() instanceof Town || invite.getReceiver() instanceof Nation) {\n\t\t\t\t\tobject = TownySettings.getLangString(\"nation_sing\");\n\t\t\t\t}\n\t\t\t}", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395859977", "createdAt": "2020-03-20T19:54:18Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/InviteCommand.java", "diffHunk": "@@ -309,15 +309,15 @@ public static void sendInviteList(Player player, List<Invite> list, int page, bo\n \t\t\t\t}\n \t\t\t} else { // So it's not from the sender, then it's from the receiver so\n \t\t\t\tif (invite.getReceiver() instanceof Resident) {\n-\t\t\t\t\toutput = Colors.Blue + ((Town) invite.getSender()).getName() + Colors.Gray + \" - \" + Colors.Green + name;\n+\t\t\t\t\toutput = Colors.Blue + invite.getSender().getName() + Colors.Gray + \" - \" + Colors.Green + name;\n \t\t\t\t\tobject = TownySettings.getLangString(\"town_sing\");\n \t\t\t\t}\n \t\t\t\tif (invite.getReceiver() instanceof Town) {\n-\t\t\t\t\toutput = Colors.Blue + ((Nation) invite.getSender()).getName() + Colors.Gray + \" - \" + Colors.Green + name;\n+\t\t\t\t\toutput = Colors.Blue + invite.getSender().getName() + Colors.Gray + \" - \" + Colors.Green + name;\n \t\t\t\t\tobject = TownySettings.getLangString(\"nation_sing\");\n \t\t\t\t}\n \t\t\t\tif (invite.getReceiver() instanceof Nation) {\n-\t\t\t\t\toutput = Colors.Blue + ((Nation) invite.getSender()).getName() + Colors.Gray + \" - \" + Colors.Green + name;\n+\t\t\t\t\toutput = Colors.Blue + invite.getSender().getName() + Colors.Gray + \" - \" + Colors.Green + name;\n \t\t\t\t\tobject = TownySettings.getLangString(\"nation_sing\");\n \t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzczNzA1", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-378773705", "createdAt": "2020-03-20T19:55:26Z", "commit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxOTo1NToyNlrOF5hZ9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowODoyOVrOF5hwfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MDQ3MQ==", "bodyText": "This \\ wasn't doing anything?", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395860471", "createdAt": "2020-03-20T19:55:26Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/db/TownySQLSource.java", "diffHunk": "@@ -435,7 +435,7 @@ public boolean QueueDeleteDB(String tb_name, HashMap<String, Object> args) {\n                 Map.Entry<String, Object> me = i.next();\n                 wherecode.append(\"`\").append(me.getKey()).append(\"` = \");\n                 if (me.getValue() instanceof String)\n-                    wherecode.append(\"'\").append(((String) me.getValue()).replace(\"'\", \"\\''\")).append(\"'\");\n+                    wherecode.append(\"'\").append(((String) me.getValue()).replace(\"'\", \"''\")).append(\"'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NTYxMQ==", "bodyText": "Wondering if this needs the ints to keep whole numbers. Have you tested the regeneration of blocks?", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395865611", "createdAt": "2020-03-20T20:06:49Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/regen/PlotBlockData.java", "diffHunk": "@@ -122,8 +122,8 @@ public boolean restoreNextBlock() {\n \t\twhile (reverse > 0) {\r\n \t\t\treverse--; //regen bottom up to stand a better chance of restoring tree's and plants.\r\n \t\t\ty = height - (reverse % height);\r\n-\t\t\tx = (int) (reverse / height) % size;\r\n-\t\t\tz = ((int) (reverse / height) / size) % size;\r\n+\t\t\tx = (reverse / height) % size;\r\n+\t\t\tz = (reverse / height / size) % size;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NTkwOA==", "bodyText": "Was this tested?", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395865908", "createdAt": "2020-03-20T20:07:36Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/utils/CombatUtil.java", "diffHunk": "@@ -138,7 +138,7 @@ public static boolean preventDamageCall(Towny plugin, TownyWorld world, Entity a\n \t\t\t * The target is in a TownBlock and...\n \t\t\t * the target is a tame wolf and we are not it's owner\n \t\t\t */\n-\t\t\tif ((defendingPlayer != null) || ((defenderTB != null) && ((defendingEntity instanceof Wolf) && ((Wolf) defendingEntity).isTamed() && !((Wolf) defendingEntity).getOwner().equals((AnimalTamer) attackingEntity)))) {\n+\t\t\tif ((defendingPlayer != null) || ((defenderTB != null) && ((defendingEntity instanceof Wolf) && ((Wolf) defendingEntity).isTamed() && !((Wolf) defendingEntity).getOwner().equals(attackingEntity)))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NjIzNw==", "bodyText": "I'm assuming this was an IDE thing?", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395866237", "createdAt": "2020-03-20T20:08:29Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/util/TimeMgmt.java", "diffHunk": "@@ -52,12 +52,12 @@ public static String formatCountdownTime(long l) {\n \r\n \t\tString out = \"\";\r\n \t\tif (l >= 3600) {\r\n-\t\t\tint h = (int) Math.floor(l / 3600);\r\n+\t\t\tint h = (int) Math.floor(l / 3600.0);\r\n \t\t\tout = h + TownySettings.getLangString(\"msg_hours\");\r\n \t\t\tl -= h * 3600;\r\n \t\t}\r\n \t\tif (l >= 60) {\r\n-\t\t\tint m = (int) Math.floor(l / 60);\r\n+\t\t\tint m = (int) Math.floor(l / 60.0);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODcyNzY4", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-378872768", "createdAt": "2020-03-21T00:26:11Z", "commit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNjoxMVrOF5mVYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNjoxMVrOF5mVYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTIxOQ==", "bodyText": "I know this was out of scope, but can be replaced with iMax = Math.min(page *10, nations.size());\nSame for TownCommand.", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395941219", "createdAt": "2020-03-21T00:26:11Z", "author": {"login": "silverwolfg11"}, "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "diffHunk": "@@ -1250,7 +1250,7 @@ public void sendList(CommandSender sender, List<Nation> nations, int page, int t\n \t\tif ((page * 10) > nations.size()) {\r\n \t\t\tiMax = nations.size();\r\n \t\t}\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODcyOTAy", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-378872902", "createdAt": "2020-03-21T00:27:14Z", "commit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNzoxNFrOF5mV3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNzoxNFrOF5mV3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTM0Mg==", "bodyText": "For micro-performance, you could set the initial capacity to iMax - (10*page) + 10", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#discussion_r395941342", "createdAt": "2020-03-21T00:27:14Z", "author": {"login": "silverwolfg11"}, "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "diffHunk": "@@ -1250,7 +1250,7 @@ public void sendList(CommandSender sender, List<Nation> nations, int page, int t\n \t\tif ((page * 10) > nations.size()) {\r\n \t\t\tiMax = nations.size();\r\n \t\t}\r\n-\t\tList<String> nationsordered = new ArrayList();\r\n+\t\tList<String> nationsordered = new ArrayList<>();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f49d1ccc3b5683d7652931083b44052ddb0942d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f52ea27271880a2dbb7561af0cc3bad00087471", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/0f52ea27271880a2dbb7561af0cc3bad00087471", "committedDate": "2020-03-23T17:20:47Z", "message": "Small cleanup and microperformance changes.\n\nSigned-off-by: Articdive <13535885+Articdive@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4b9450d5a1a3b8b03a7dcf53ba6b58b1eb36472", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/c4b9450d5a1a3b8b03a7dcf53ba6b58b1eb36472", "committedDate": "2020-03-23T17:19:27Z", "message": "Merge remote-tracking branch 'origin/cleanup' into cleanup"}, "afterCommit": {"oid": "0f52ea27271880a2dbb7561af0cc3bad00087471", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/0f52ea27271880a2dbb7561af0cc3bad00087471", "committedDate": "2020-03-23T17:20:47Z", "message": "Small cleanup and microperformance changes.\n\nSigned-off-by: Articdive <13535885+Articdive@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc233c5ba8ef6e9c58d05ce42a813d680535de39", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc233c5ba8ef6e9c58d05ce42a813d680535de39", "committedDate": "2020-03-23T19:31:38Z", "message": "More cleanup and microperformance changes.\n\nSigned-off-by: Articdive <13535885+Articdive@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dee2238aa2c9bcd9f67530a8799af5b155b7952", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/3dee2238aa2c9bcd9f67530a8799af5b155b7952", "committedDate": "2020-03-23T17:46:38Z", "message": "More cleanup and microperformance changes.\n\nSigned-off-by: Articdive <13535885+Articdive@users.noreply.github.com>"}, "afterCommit": {"oid": "cc233c5ba8ef6e9c58d05ce42a813d680535de39", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc233c5ba8ef6e9c58d05ce42a813d680535de39", "committedDate": "2020-03-23T19:31:38Z", "message": "More cleanup and microperformance changes.\n\nSigned-off-by: Articdive <13535885+Articdive@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjA3NDkz", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-381607493", "createdAt": "2020-03-25T23:24:49Z", "commit": {"oid": "cc233c5ba8ef6e9c58d05ce42a813d680535de39"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca4908d727b952d9de08401f0d41bf7344f13eaf", "author": {"user": {"login": "Articdive", "name": "Articdive"}}, "url": "https://github.com/TownyAdvanced/Towny/commit/ca4908d727b952d9de08401f0d41bf7344f13eaf", "committedDate": "2020-03-31T08:00:44Z", "message": "Merge branch 'master' of https://github.com/TownyAdvanced/Towny into cleanup\n\n\u0001 Conflicts:\n\u0001\tsrc/com/palmergames/bukkit/towny/command/NationCommand.java\n\u0001\tsrc/com/palmergames/bukkit/towny/command/TownCommand.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MDk1Nzk0", "url": "https://github.com/TownyAdvanced/Towny/pull/3802#pullrequestreview-385095794", "createdAt": "2020-03-31T20:52:50Z", "commit": {"oid": "ca4908d727b952d9de08401f0d41bf7344f13eaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4238, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}