{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDIwMjg5", "number": 4153, "title": "Add 3 \"placeholders\" usable in \"entering town titles\".", "bodyText": "Hi,\nI'm still learning programming.\nI hope these changes aren't full of bad coding practices. In this case, I will be happy to have a feedback on how to fix them.\nDescription:\n\nThis small PR add 3 news \"placeholders\" usable in notification.titles.* config node:\n\n{town_motd} : show the town's townboard.\n{town_residents} : show the number of residents of the town.\n{town_residents_online} : show the number of online residents (including npcs) of the town.\n\nThe way of how thoses placeholders are applied to the title and subtitle string variables has been modified. Placeholders are now stored inside a HashMap, and applied inside a loop of each HashMap's entries.\n{town_residents_online} is using a new Town method, getNumResidentsOnline().\n\nNew Nodes/Commands/ConfigOptions:\n\n\nNone\n\n\nRelevant Towny Issue ticket:\n\n\nNone\n\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-07-09T18:20:06Z", "url": "https://github.com/TownyAdvanced/Towny/pull/4153", "merged": true, "mergeCommit": {"oid": "f3cf0282ec21ac21b14e47a9b1198feb3a8c4be3"}, "closed": true, "closedAt": "2020-07-11T22:00:49Z", "author": {"login": "Yldales"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczBB3pAH2gAyNDQ3MDIwMjg5OmQ5YjZlNDVlNDg0MDVmYzUyNGU2ZWRjNDU2NDczNDlmZWQ0M2YzZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczZEDAAFqTQ0NjA2MTgzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9b6e45e48405fc524e6edc45647349fed43f3e7", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/d9b6e45e48405fc524e6edc45647349fed43f3e7", "committedDate": "2020-07-08T21:08:10Z", "message": "Added a new Town method, getNumResidentsOnline(), returning as integer the count of the online(s) resident(s) inside the town."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbaa6e7fbf7e48c76f8a5ab1afa81994f654985a", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/dbaa6e7fbf7e48c76f8a5ab1afa81994f654985a", "committedDate": "2020-07-08T21:10:05Z", "message": "Added 3 \"placeholders\" ({town_motd}, {town_residents} and {town_residents_online}) who can be used inside notification.titles.*."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71b79ee51e4644b2e933ca35a73a6e8338b00215", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/71b79ee51e4644b2e933ca35a73a6e8338b00215", "committedDate": "2020-07-08T21:12:41Z", "message": "Merge remote-tracking branch 'remotes/upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe0f4162d91743c68f040177822e2cc38ad8cf03", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/fe0f4162d91743c68f040177822e2cc38ad8cf03", "committedDate": "2020-07-09T17:48:29Z", "message": "Clean up."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODcxNTIw", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#pullrequestreview-445871520", "createdAt": "2020-07-09T18:35:10Z", "commit": {"oid": "fe0f4162d91743c68f040177822e2cc38ad8cf03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxODozNToxMVrOGvdJ6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxODozNToxMVrOGvdJ6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQxMzkyOQ==", "bodyText": "This needs to be removed, we already have a method TownyAPI#getOnlineResidents() that does this.", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#discussion_r452413929", "createdAt": "2020-07-09T18:35:11Z", "author": null, "path": "src/com/palmergames/bukkit/towny/object/Town.java", "diffHunk": "@@ -296,6 +297,22 @@ public int getNumResidents() {\n \t\treturn residents.size();\n \t}\n \n+\tpublic int getNumResidentsOnline() {\n+\t\tint onlineResidents = 0;\n+\t\tfor(Resident resident: getResidents()) {\n+\t\t\tif(resident.isNPC()) {\n+\t\t\t\tonlineResidents++;\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\t\n+\t\t\tPlayer player = Bukkit.getServer().getPlayer(resident.getName());\n+\t\t\tif(player.isOnline()) {\n+\t\t\t\tonlineResidents++;\n+\t\t\t}\n+\t\t}\n+\t\treturn onlineResidents;\n+\t}\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe0f4162d91743c68f040177822e2cc38ad8cf03"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f48511adcff567f94e8138c04c0fc2aad1b05faf", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/f48511adcff567f94e8138c04c0fc2aad1b05faf", "committedDate": "2020-07-09T19:05:36Z", "message": "Removed `getNumResidentsOnline()`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69621d15c6af546dceb6b15fc57004a282b8d5e3", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/69621d15c6af546dceb6b15fc57004a282b8d5e3", "committedDate": "2020-07-09T19:07:29Z", "message": "Make `{town_residents_online}` use `TownyAPI#getOnlineResidents(town)`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODk2NTE2", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#pullrequestreview-445896516", "createdAt": "2020-07-09T19:12:21Z", "commit": {"oid": "69621d15c6af546dceb6b15fc57004a282b8d5e3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOToxMjoyMVrOGveV8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOToxMjoyMVrOGveV8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQzMzM5Mg==", "bodyText": "Undo wildcard import.", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#discussion_r452433392", "createdAt": "2020-07-09T19:12:21Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/listeners/TownyPlayerListener.java", "diffHunk": "@@ -1,11 +1,6 @@\n package com.palmergames.bukkit.towny.listeners;\n \n-import com.palmergames.bukkit.towny.Towny;\n-import com.palmergames.bukkit.towny.TownyAPI;\n-import com.palmergames.bukkit.towny.TownyMessaging;\n-import com.palmergames.bukkit.towny.TownySettings;\n-import com.palmergames.bukkit.towny.TownyTimerHandler;\n-import com.palmergames.bukkit.towny.TownyUniverse;\n+import com.palmergames.bukkit.towny.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69621d15c6af546dceb6b15fc57004a282b8d5e3"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ebb63b4345f56bc278bce454ba957f5c189ff85", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/2ebb63b4345f56bc278bce454ba957f5c189ff85", "committedDate": "2020-07-09T19:20:06Z", "message": "Revert back Town.java."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4c069422f635224f8a99e277c4c0fa325f765a8", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/f4c069422f635224f8a99e277c4c0fa325f765a8", "committedDate": "2020-07-09T19:26:20Z", "message": "Restore imports in TownyPlayerListener.java."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "484fd4abd0415de2b9e4bc881c103ba24d0a6c7c", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/484fd4abd0415de2b9e4bc881c103ba24d0a6c7c", "committedDate": "2020-07-09T19:34:03Z", "message": "Removed unwanted empty line in TownyPlayerListener.java."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90dec42e56ecb0a22fa1a956ac48f94fc677aa0a", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/90dec42e56ecb0a22fa1a956ac48f94fc677aa0a", "committedDate": "2020-07-09T19:41:38Z", "message": "Fix {town_residents_online} output :x"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDYxODM3", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#pullrequestreview-446061837", "createdAt": "2020-07-10T01:08:16Z", "commit": {"oid": "90dec42e56ecb0a22fa1a956ac48f94fc677aa0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3223, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}