{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMDUwMDUx", "number": 4119, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQyMzozOTowOVrOEOeEvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyODoxMlrOEOzokA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjA4MjU1OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/object/Resident.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQyMzozOTowOVrOGxpCxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMDo1Mzo0OVrOGxqVIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcwNTg2Mw==", "bodyText": "This should be just townsblocks not new ArrayList<>(townBlocks)", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454705863", "createdAt": "2020-07-14T23:39:09Z", "author": null, "path": "src/com/palmergames/bukkit/towny/object/Resident.java", "diffHunk": "@@ -307,24 +310,69 @@ public Town getTown() throws NotRegisteredException {\n \n \tpublic void setTown(Town town) throws AlreadyRegisteredException {\n \n+\t\tif (this.town == town)\n+\t\t\treturn;\n+\n+\t\tTowny.getPlugin().deleteCache(this.getName());\n+\t\tsetTitle(\"\");\n+\t\tsetSurname(\"\");\n+\t\tupdatePerms();\n+\t\t\n+\n \t\tif (town == null) {\n \t\t\tthis.town = null;\n-\t\t\tsetTitle(\"\");\n-\t\t\tsetSurname(\"\");\n-\t\t\tupdatePerms();\n \t\t\treturn;\n \t\t}\n \n-\t\tif (this.town == town)\n-\t\t\treturn;\n-\n \t\tif (hasTown())\n \t\t\tthrow new AlreadyRegisteredException();\n \n \t\tthis.town = town;\n-\t\tsetTitle(\"\");\n-\t\tsetSurname(\"\");\n-\t\tupdatePerms();\n+\t\ttown.addResident(this);\n+\t\tBukkitTools.getPluginManager().callEvent(new TownAddResidentEvent(this, town));\n+\t}\n+\t\n+\tpublic void removeTown() {\n+\t\t\n+\t\tif (!hasTown())\n+\t\t\treturn;\n+\n+\t\tTown town = this.town;\n+\t\t\n+\t\tBukkitTools.getPluginManager().callEvent(new TownRemoveResidentEvent(this, town));\n+\t\ttry {\n+\t\t\t\n+\t\t\ttown.removeResident(this);\n+\t\t\t\n+\t\t} catch (NotRegisteredException e1) {\n+\t\t\te1.printStackTrace();\n+\t\t} catch (EmptyTownException e1) {\n+\t\t\tTownyUniverse.getInstance().getDataSource().removeTown(town);\n+\t\t}\n+\t\t\n+\t\tfor (TownBlock townBlock : new ArrayList<>(townBlocks)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcwNjE5Mg==", "bodyText": "I started with that and it throws concurrentmodification exceptions all over.", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454706192", "createdAt": "2020-07-14T23:40:03Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/object/Resident.java", "diffHunk": "@@ -307,24 +310,69 @@ public Town getTown() throws NotRegisteredException {\n \n \tpublic void setTown(Town town) throws AlreadyRegisteredException {\n \n+\t\tif (this.town == town)\n+\t\t\treturn;\n+\n+\t\tTowny.getPlugin().deleteCache(this.getName());\n+\t\tsetTitle(\"\");\n+\t\tsetSurname(\"\");\n+\t\tupdatePerms();\n+\t\t\n+\n \t\tif (town == null) {\n \t\t\tthis.town = null;\n-\t\t\tsetTitle(\"\");\n-\t\t\tsetSurname(\"\");\n-\t\t\tupdatePerms();\n \t\t\treturn;\n \t\t}\n \n-\t\tif (this.town == town)\n-\t\t\treturn;\n-\n \t\tif (hasTown())\n \t\t\tthrow new AlreadyRegisteredException();\n \n \t\tthis.town = town;\n-\t\tsetTitle(\"\");\n-\t\tsetSurname(\"\");\n-\t\tupdatePerms();\n+\t\ttown.addResident(this);\n+\t\tBukkitTools.getPluginManager().callEvent(new TownAddResidentEvent(this, town));\n+\t}\n+\t\n+\tpublic void removeTown() {\n+\t\t\n+\t\tif (!hasTown())\n+\t\t\treturn;\n+\n+\t\tTown town = this.town;\n+\t\t\n+\t\tBukkitTools.getPluginManager().callEvent(new TownRemoveResidentEvent(this, town));\n+\t\ttry {\n+\t\t\t\n+\t\t\ttown.removeResident(this);\n+\t\t\t\n+\t\t} catch (NotRegisteredException e1) {\n+\t\t\te1.printStackTrace();\n+\t\t} catch (EmptyTownException e1) {\n+\t\t\tTownyUniverse.getInstance().getDataSource().removeTown(town);\n+\t\t}\n+\t\t\n+\t\tfor (TownBlock townBlock : new ArrayList<>(townBlocks)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcwNTg2Mw=="}, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyNjk0NQ==", "bodyText": "Fixed via iterator", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454726945", "createdAt": "2020-07-15T00:53:49Z", "author": null, "path": "src/com/palmergames/bukkit/towny/object/Resident.java", "diffHunk": "@@ -307,24 +310,69 @@ public Town getTown() throws NotRegisteredException {\n \n \tpublic void setTown(Town town) throws AlreadyRegisteredException {\n \n+\t\tif (this.town == town)\n+\t\t\treturn;\n+\n+\t\tTowny.getPlugin().deleteCache(this.getName());\n+\t\tsetTitle(\"\");\n+\t\tsetSurname(\"\");\n+\t\tupdatePerms();\n+\t\t\n+\n \t\tif (town == null) {\n \t\t\tthis.town = null;\n-\t\t\tsetTitle(\"\");\n-\t\t\tsetSurname(\"\");\n-\t\t\tupdatePerms();\n \t\t\treturn;\n \t\t}\n \n-\t\tif (this.town == town)\n-\t\t\treturn;\n-\n \t\tif (hasTown())\n \t\t\tthrow new AlreadyRegisteredException();\n \n \t\tthis.town = town;\n-\t\tsetTitle(\"\");\n-\t\tsetSurname(\"\");\n-\t\tupdatePerms();\n+\t\ttown.addResident(this);\n+\t\tBukkitTools.getPluginManager().callEvent(new TownAddResidentEvent(this, town));\n+\t}\n+\t\n+\tpublic void removeTown() {\n+\t\t\n+\t\tif (!hasTown())\n+\t\t\treturn;\n+\n+\t\tTown town = this.town;\n+\t\t\n+\t\tBukkitTools.getPluginManager().callEvent(new TownRemoveResidentEvent(this, town));\n+\t\ttry {\n+\t\t\t\n+\t\t\ttown.removeResident(this);\n+\t\t\t\n+\t\t} catch (NotRegisteredException e1) {\n+\t\t\te1.printStackTrace();\n+\t\t} catch (EmptyTownException e1) {\n+\t\t\tTownyUniverse.getInstance().getDataSource().removeTown(town);\n+\t\t}\n+\t\t\n+\t\tfor (TownBlock townBlock : new ArrayList<>(townBlocks)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcwNTg2Mw=="}, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjI1MDc3OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMTowNzoyOVrOGxqjkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMTowNzoyOVrOGxqjkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczMDY0Mg==", "bodyText": "Were you having ConcurrentModicationExpection's here as well? If not this should be just universe.getResidentMap.values()", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454730642", "createdAt": "2020-07-15T01:07:29Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "diffHunk": "@@ -291,6 +290,27 @@ public TownyWorld getTownWorld(String townName) {\n \t@Override\n \tpublic void removeResident(Resident resident) {\n \n+\t\t// Remove resident from towns' outlawlists.\n+\t\tfor (Town townOutlaw : getTowns()) {\n+\t\t\tif (townOutlaw.hasOutlaw(resident)) {\n+\t\t\t\ttownOutlaw.removeOutlaw(resident);\n+\t\t\t\tsaveTown(townOutlaw);\n+\t\t\t}\n+\t\t}\n+\n+\t\t// Remove resident from residents' friendslists.\n+\t\tList<Resident> toSave = new ArrayList<>();\n+\t\tfor (Resident toCheck : new ArrayList<>(universe.getResidentMap().values())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjI3MTU4OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToxODowNFrOGxqvhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToxODowNFrOGxqvhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczMzcwMw==", "bodyText": "Although this isn't part of the diff, I still have the same comment as the others, why a new arraylist if that arraylist already exists?", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454733703", "createdAt": "2020-07-15T01:18:04Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "diffHunk": "@@ -1053,12 +1010,8 @@ public void renamePlayer(Resident resident, String newName) throws AlreadyRegist\n \t\t\tList<Resident> toSaveResident = new ArrayList<>(getResidents());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 201}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjI3NDcwOnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToxOTo1N1rOGxqxcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToxOTo1N1rOGxqxcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczNDE5Mg==", "bodyText": "same thing as above", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454734192", "createdAt": "2020-07-15T01:19:57Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyDatabaseHandler.java", "diffHunk": "@@ -1067,12 +1020,8 @@ public void renamePlayer(Resident resident, String newName) throws AlreadyRegist\n \t\t\tList<Town> toSaveTown = new ArrayList<>(getTowns());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 216}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjI3OTU3OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyMjo0OFrOGxq0Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyMjo0OFrOGxq0Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczNDkzMA==", "bodyText": "Add a FileNameFilter for the file listings, we should only be picking up \".txt\" files, not just every file in the directory. See https://stackoverflow.com/questions/37900798/filenamefilter-to-show-list-files-with-certain-extension-and-directories for an example.", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454734930", "createdAt": "2020-07-15T01:22:48Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +346,46 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;\n+\t\tList residents = new ArrayList<String>();\n \n+\t\t// Build up a list of residents from any existing legacy residents.txt files.\n \t\ttry (BufferedReader fin = new BufferedReader(new InputStreamReader(new FileInputStream(dataFolderPath + File.separator + \"residents.txt\"), StandardCharsets.UTF_8))) {\n \t\t\t\n-\t\t\twhile ((line = fin.readLine()) != null) {\n-\t\t\t\tif (!line.equals(\"\")) {\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\tnewResident(line);\n-\t\t\t\t\t} catch (AlreadyRegisteredException e) {\n-\t\t\t\t\t\tTownyMessaging.sendDebugMsg(\"Duplicate resident '\" + line + \"' found in residents.txt, ignoring.\");\n-\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\twhile ((line = fin.readLine()) != null && !line.equals(\"\"))\n+\t\t\t\tresidents.add(line);\n+\t\t} catch (Exception ignored) {\n+\t\t\t// No residents.txt any more.\n+\t\t}\n+\t\tFile residentFolder = new File(dataFolderPath + File.separator + \"residents\");\n+\t\tFile[] residentFiles = residentFolder.listFiles();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjI4NjUzOnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNjo0OFrOGxq4YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNjo0OFrOGxq4YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczNTk2OA==", "bodyText": "This can be removed by applying the above fix", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r454735968", "createdAt": "2020-07-15T01:26:48Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +346,46 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;\n+\t\tList residents = new ArrayList<String>();\n \n+\t\t// Build up a list of residents from any existing legacy residents.txt files.\n \t\ttry (BufferedReader fin = new BufferedReader(new InputStreamReader(new FileInputStream(dataFolderPath + File.separator + \"residents.txt\"), StandardCharsets.UTF_8))) {\n \t\t\t\n-\t\t\twhile ((line = fin.readLine()) != null) {\n-\t\t\t\tif (!line.equals(\"\")) {\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\tnewResident(line);\n-\t\t\t\t\t} catch (AlreadyRegisteredException e) {\n-\t\t\t\t\t\tTownyMessaging.sendDebugMsg(\"Duplicate resident '\" + line + \"' found in residents.txt, ignoring.\");\n-\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\twhile ((line = fin.readLine()) != null && !line.equals(\"\"))\n+\t\t\t\tresidents.add(line);\n+\t\t} catch (Exception ignored) {\n+\t\t\t// No residents.txt any more.\n+\t\t}\n+\t\tFile residentFolder = new File(dataFolderPath + File.separator + \"residents\");\n+\t\tFile[] residentFiles = residentFolder.listFiles();\n+\t\tfor (File resident : residentFiles) {\n+\t\t\t// Don't load resident files if they weren't in the residents.txt file.\n+\t\t\tString name = resident.getName().replace(\".txt\", \"\");\n+\t\t\tif (residents.size() > 0 && !residents.contains(name)) {\n+\t\t\t\tTownyMessaging.sendDebugMsg(\"Removing \" + resident.getName() + \" because they are not found in the residents.txt.\");\n+\t\t\t\tdeleteFile(resident.getAbsolutePath());\n+\t\t\t\tcontinue;\n \t\t\t}\n-\n-\t\t\treturn true;\n-\t\t\t\n-\t\t} catch (Exception e) {\n-\t\t\tTownyMessaging.sendErrorMsg(\"Error Loading Resident List at \" + line + \", in towny\\\\data\\\\residents.txt\");\n-\t\t\te.printStackTrace();\n-\t\t\treturn false;\n \t\t\t\n+\t\t\tif (!resident.getName().endsWith(\".txt\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b29562d54d254ceae34207580ba5ee0753e1a2e5"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTQ5MDY3OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNzo1NjoyMFrOGyJcHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNzo1NjoyMFrOGyJcHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIzNjYzOQ==", "bodyText": "This can be condensed into a lambda:\nFile[] residentFiles = residentFolder.listFiles((file) -> file.getName.toLowerCase().endsWith(\".txt\");", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r455236639", "createdAt": "2020-07-15T17:56:20Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +347,48 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;\n+\t\tList residents = new ArrayList<String>();\n \n+\t\t// Build up a list of residents from any existing legacy residents.txt files.\n \t\ttry (BufferedReader fin = new BufferedReader(new InputStreamReader(new FileInputStream(dataFolderPath + File.separator + \"residents.txt\"), StandardCharsets.UTF_8))) {\n \t\t\t\n-\t\t\twhile ((line = fin.readLine()) != null) {\n-\t\t\t\tif (!line.equals(\"\")) {\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\tnewResident(line);\n-\t\t\t\t\t} catch (AlreadyRegisteredException e) {\n-\t\t\t\t\t\tTownyMessaging.sendDebugMsg(\"Duplicate resident '\" + line + \"' found in residents.txt, ignoring.\");\n-\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t}\n-\t\t\t\t}\n+\t\t\twhile ((line = fin.readLine()) != null && !line.equals(\"\"))\n+\t\t\t\tresidents.add(line);\n+\t\t} catch (Exception ignored) {\n+\t\t\t// No residents.txt any more.\n+\t\t}\n+\t\tFile residentFolder = new File(dataFolderPath + File.separator + \"residents\");\n+\t\tFile[] residentFiles = residentFolder.listFiles(new FileFilter() {\n+\t\t\t@Override\n+\t\t\tpublic boolean accept(File residentFolder) {\n+\t\t\t\treturn residentFolder.getName().toLowerCase().endsWith(\".txt\"); \n+\t\t\t}\n+\t\t});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f893d3430bdd792fbc0cb5231e54db4c2addec1"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTYxNDgzOnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyODoxMVrOGyKp1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyOToxMlrOGyKrxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NjUzNQ==", "bodyText": "Setting this to null is redundant, String line; has the exact same effect.", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r455256535", "createdAt": "2020-07-15T18:28:11Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +347,48 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f893d3430bdd792fbc0cb5231e54db4c2addec1"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NzAyOA==", "bodyText": "Eclipse complains when it isn't initialized.", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r455257028", "createdAt": "2020-07-15T18:29:12Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +347,48 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NjUzNQ=="}, "originalCommit": {"oid": "5f893d3430bdd792fbc0cb5231e54db4c2addec1"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTYxNDg4OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyODoxMlrOGyKp4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyODoxMlrOGyKp4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NjU0NA==", "bodyText": "You're using the raw type of List, you should be using the parameterized type:\nList<String> residents = new ArrayList<>();", "url": "https://github.com/TownyAdvanced/Towny/pull/4119#discussion_r455256544", "createdAt": "2020-07-15T18:28:12Z", "author": null, "path": "src/com/palmergames/bukkit/towny/db/TownyFlatFileSource.java", "diffHunk": "@@ -349,28 +347,48 @@ public boolean loadResidentList() {\n \t\t\n \t\tTownyMessaging.sendDebugMsg(\"Loading Resident List\");\n \t\tString line = null;\n+\t\tList residents = new ArrayList<String>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f893d3430bdd792fbc0cb5231e54db4c2addec1"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1279, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}