{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NzYyMDcw", "number": 3861, "title": "Add Spawn Confirmations for Towns and Nations with Spawn Costs", "bodyText": "Description:\n\nThis adds confirmations to town nation and outpost spawning if there is an associated cost.\nNote: This is bypasses the /t list and /n list clickables as they present the price up front. It also ignores warnings if you are spawning to your own town/nation.\nNew Config Nodes\nglobal_town_settings.spawn_warnings - default true, sets whether these types of confirmations should show.\n\nThis PR includes lang strings.\n\nRelevant Towny Issue ticket:\n\nCloses #3828\n\n\n I have tested this pull request for defects on a server.\n\n\nBy making this pull request, I represent that I have the right to waive copyright and related rights to my contribution, and agree that all copyright and related rights in my contributions are waived, and I acknowledge that the TownyAdvanced organization has the copyright to use and modify my contribution under the Towny License for perpetuity.", "createdAt": "2020-04-01T05:08:31Z", "url": "https://github.com/TownyAdvanced/Towny/pull/3861", "merged": true, "mergeCommit": {"oid": "0e110ace914e8f6878f5ba8ae4c1f79d830443bc"}, "closed": true, "closedAt": "2020-04-11T19:46:18Z", "author": null, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTQh_VgH2gAyMzk2NzYyMDcwOmQ3YzA2MmVmM2E4YWY2NGM2NTRmMzhmZTNlNjE2MTcwNzQwMmQxOWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWrFfiAH2gAyMzk2NzYyMDcwOmU0Yjk2MDhiOTI4N2E3MTEyOTljMzQ5MzRhNDQ5OTBiYjY0NDQ0Mzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7c062ef3a8af64c654f38fe3e6161707402d19a", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/d7c062ef3a8af64c654f38fe3e6161707402d19a", "committedDate": "2020-04-01T05:06:15Z", "message": "add spawn confirmations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66b45a366b587c6ca99437df5fc7a68cbf774248", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/66b45a366b587c6ca99437df5fc7a68cbf774248", "committedDate": "2020-04-01T15:37:49Z", "message": "add config option for ignoring spawn warnings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "557d7943f407b4b2bdf995349fb1dd04b375398d", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/557d7943f407b4b2bdf995349fb1dd04b375398d", "committedDate": "2020-04-01T17:33:31Z", "message": "change default for warnings to true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e3a2b60ca8b21fd1d36b4657f80a3be52f8f81", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/27e3a2b60ca8b21fd1d36b4657f80a3be52f8f81", "committedDate": "2020-04-02T17:11:04Z", "message": "Merge branch 'master' into feature/spawn-confirmations\n\n# Conflicts:\n#\tresources/pt-br.yml\n#\tsrc/com/palmergames/bukkit/towny/command/TownCommand.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82d0a028c9815a2b6cf31f279c770ef9f6342c4f", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/82d0a028c9815a2b6cf31f279c770ef9f6342c4f", "committedDate": "2020-04-02T22:21:33Z", "message": "Make sure town is public before sending confirmation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36cdac8c1e1e8e1eb78c58df3fbdf2fb6a7578ab", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/36cdac8c1e1e8e1eb78c58df3fbdf2fb6a7578ab", "committedDate": "2020-04-02T22:49:02Z", "message": "Show warning for residents of town/nation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7744ce6f9d088904401ddde5b63163acd0e1189", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/c7744ce6f9d088904401ddde5b63163acd0e1189", "committedDate": "2020-04-03T01:51:38Z", "message": "fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61be2bb010e1a0a7913fce21f8094c25fe60fbb2", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/61be2bb010e1a0a7913fce21f8094c25fe60fbb2", "committedDate": "2020-04-07T22:30:26Z", "message": "Implement new confirmation system, needs work on console."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c31eb6b7928379843cf82eabf7c9e11eb55a2434", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/c31eb6b7928379843cf82eabf7c9e11eb55a2434", "committedDate": "2020-04-08T03:18:50Z", "message": "Generify confirmation holders and finish implementation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87542256a165f121c87b5c4b6c93e1ed3da585b7", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/87542256a165f121c87b5c4b6c93e1ed3da585b7", "committedDate": "2020-04-08T04:51:42Z", "message": "Fix atomic reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea42dfe6eb37711c3818f206ac1d0099dbf9544", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/2ea42dfe6eb37711c3818f206ac1d0099dbf9544", "committedDate": "2020-04-08T15:17:15Z", "message": "Fix bugs and code formatting issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ae03d3ffd9ce8ba8ce0201a8a4f95195ecfd0a6", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/8ae03d3ffd9ce8ba8ce0201a8a4f95195ecfd0a6", "committedDate": "2020-04-08T15:29:27Z", "message": "make sure timeout message only shows on an actual timeout."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64c0b6cac26262a4bb5f4fcc34d0037b2389a6e1", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/64c0b6cac26262a4bb5f4fcc34d0037b2389a6e1", "committedDate": "2020-04-08T20:22:12Z", "message": "Confirmations now send confirmations messages automatically."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc2ee2aec8df2575161c23052ecb49ebeb9530b6", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/cc2ee2aec8df2575161c23052ecb49ebeb9530b6", "committedDate": "2020-04-08T20:43:38Z", "message": "Removed CommandSender from Confirmation\n\nOnly ConfirmationHandler will deal with CommandSender's"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe0e3c63345f678f0265b48d67f94107609476c", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/ffe0e3c63345f678f0265b48d67f94107609476c", "committedDate": "2020-04-08T20:51:40Z", "message": "Add duration field for Confirmation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c7f4c921a297ff0ca682be043893645866b7c16", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/9c7f4c921a297ff0ca682be043893645866b7c16", "committedDate": "2020-04-08T20:58:57Z", "message": "fix constructor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "367f400a72737e86affe98b1850dfb63f8d0d358", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/367f400a72737e86affe98b1850dfb63f8d0d358", "committedDate": "2020-04-08T21:23:32Z", "message": "Fix purge command feedback being only seen in console & moved purge\npermission test to pre-confirmation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bd1918c95b5a5a1444cf708f955e52c8cc487b5", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/0bd1918c95b5a5a1444cf708f955e52c8cc487b5", "committedDate": "2020-04-08T21:56:33Z", "message": "Fix /t unclaim all showing two confirmations & Fix unwanted refunds."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3add00e466ec8840a68ea983bdb839d2c6c61356", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/3add00e466ec8840a68ea983bdb839d2c6c61356", "committedDate": "2020-04-08T21:57:40Z", "message": "Remove commented out message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c334d37e75dceba382235d088f5546399c322e01", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/c334d37e75dceba382235d088f5546399c322e01", "committedDate": "2020-04-08T23:54:00Z", "message": "Merge branch 'refactor/confirmation-overhaul' into feature/spawn-confirmations\n\n# Conflicts:\n#\tresources/chinese.yml\n#\tresources/english.yml\n#\tresources/es-mx.yml\n#\tresources/french.yml\n#\tresources/german.yml\n#\tresources/italian.yml\n#\tresources/korean.yml\n#\tresources/norwegian.yml\n#\tresources/pt-br.yml\n#\tresources/russian.yml\n#\tresources/spanish.yml\n#\tresources/zh-TW.yml\n#\tsrc/com/palmergames/bukkit/towny/command/NationCommand.java\n#\tsrc/com/palmergames/bukkit/towny/confirmations/ConfirmationHandler.java\n#\tsrc/com/palmergames/bukkit/towny/confirmations/ConfirmationType.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bcf9859db45a4c09adf6c40582ff5699749b58e", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/5bcf9859db45a4c09adf6c40582ff5699749b58e", "committedDate": "2020-04-09T00:11:38Z", "message": "Merge in new confirm code and update older confirmation code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2f05801ed43b964d1f038899b643a82518bf00", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/0c2f05801ed43b964d1f038899b643a82518bf00", "committedDate": "2020-04-10T14:25:10Z", "message": "Merge branch 'master' into feature/spawn-confirmations\n\n# Conflicts:\n#\tresources/chinese.yml\n#\tresources/english.yml\n#\tresources/es-mx.yml\n#\tresources/french.yml\n#\tresources/german.yml\n#\tresources/italian.yml\n#\tresources/korean.yml\n#\tresources/norwegian.yml\n#\tresources/pt-br.yml\n#\tresources/russian.yml\n#\tresources/spanish.yml\n#\tresources/zh-TW.yml\n#\tsrc/com/palmergames/bukkit/towny/command/NationCommand.java\n#\tsrc/com/palmergames/bukkit/towny/command/PlotCommand.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f1401369081db8ceb54555d1ad412ce7a63544d", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/6f1401369081db8ceb54555d1ad412ce7a63544d", "committedDate": "2020-04-10T14:36:17Z", "message": "remove debug messages."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTEzMDI4", "url": "https://github.com/TownyAdvanced/Towny/pull/3861#pullrequestreview-391513028", "createdAt": "2020-04-10T15:47:13Z", "commit": {"oid": "6f1401369081db8ceb54555d1ad412ce7a63544d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNTo0NzoxM1rOGD-JfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNTo0OTowNVrOGD-Mvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgxNzE0OA==", "bodyText": "Version number gone backwards.", "url": "https://github.com/TownyAdvanced/Towny/pull/3861#discussion_r406817148", "createdAt": "2020-04-10T15:47:13Z", "author": {"login": "LlmDl"}, "path": "resources/italian.yml", "diffHunk": "@@ -1,5 +1,5 @@\n name: Towny\n-version: 0.79\n+version: 0.78", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f1401369081db8ceb54555d1ad412ce7a63544d"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgxNzk4Mg==", "bodyText": "Your branch of confirmations overhaul was missing the commit I made this morning.", "url": "https://github.com/TownyAdvanced/Towny/pull/3861#discussion_r406817982", "createdAt": "2020-04-10T15:49:05Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "diffHunk": "@@ -1365,7 +1372,7 @@ public void mergeNation(Player player, String name) throws TownyException {\n \t\t\t});\r\n \t\t\t\r\n \t\t\t// Send confirmation.\r\n-\t\t\tConfirmationHandler.sendConfirmation(BukkitTools.getPlayerExact(king.getName()), confirmation);\r\n+\t\t\tConfirmationHandler.sendConfirmation(player, confirmation);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f1401369081db8ceb54555d1ad412ce7a63544d"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f950db70fb7edab31c1ce6144023cd4ab1164d70", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/f950db70fb7edab31c1ce6144023cd4ab1164d70", "committedDate": "2020-04-10T18:00:45Z", "message": "Remove TownSpawnConfirmation.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d17b7d01f6e91743c4847d26dfd5bdf0f7fc996a", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/d17b7d01f6e91743c4847d26dfd5bdf0f7fc996a", "committedDate": "2020-04-10T18:01:56Z", "message": "Merge branch 'master' into feature/spawn-confirmations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7fc9a46a87bf8189580fd7cc4f72cdcadc56f19", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/c7fc9a46a87bf8189580fd7cc4f72cdcadc56f19", "committedDate": "2020-04-10T18:02:31Z", "message": "Fixes issues and pull merges master."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bcb555dcdc04f238558e1efc58e0b0bda291c60", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/7bcb555dcdc04f238558e1efc58e0b0bda291c60", "committedDate": "2020-04-11T01:14:29Z", "message": "Fix nation merging confirmation going to the wrong person."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ead9dc2b271fb53c77556d858cf32a28ce21cf9", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/2ead9dc2b271fb53c77556d858cf32a28ce21cf9", "committedDate": "2020-04-11T13:13:48Z", "message": "Move spawn confirmations to SpawnUtil.\n\nStill requires:\n  - testing.\n  - tab completing showing -ignore options for /t and /n spawn/outpost\ncommands."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2dc1f45c92ff5a2ecc68c9713952bcc889f3a81", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/a2dc1f45c92ff5a2ecc68c9713952bcc889f3a81", "committedDate": "2020-04-11T14:12:13Z", "message": "Update and fix language files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a4c512156b5245c813e8989ee5a11d5ddf843dc", "author": {"user": null}, "url": "https://github.com/TownyAdvanced/Towny/commit/4a4c512156b5245c813e8989ee5a11d5ddf843dc", "committedDate": "2020-04-11T16:03:04Z", "message": "Merge branch 'master' into feature/spawn-confirmations\n\n# Conflicts:\n#\tresources/chinese.yml\n#\tresources/english.yml\n#\tresources/es-mx.yml\n#\tresources/french.yml\n#\tresources/german.yml\n#\tresources/italian.yml\n#\tresources/korean.yml\n#\tresources/norwegian.yml\n#\tresources/polish.yml\n#\tresources/pt-br.yml\n#\tresources/russian.yml\n#\tresources/spanish.yml\n#\tresources/zh-TW.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26a3edd801ecbc0e3b04dd4bf38f83f2b5a1b5ee", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/26a3edd801ecbc0e3b04dd4bf38f83f2b5a1b5ee", "committedDate": "2020-04-11T16:09:11Z", "message": "Adds -ignore to tab completions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89f09440e79a0075cc6a4bd0acb74312c3cbed47", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/89f09440e79a0075cc6a4bd0acb74312c3cbed47", "committedDate": "2020-04-11T16:09:29Z", "message": "Merge branch 'feature/spawn-confirmations' of https://github.com/TownyAdvanced/Towny.git into feature/spawn-confirmations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzgxMTQ4", "url": "https://github.com/TownyAdvanced/Towny/pull/3861#pullrequestreview-391781148", "createdAt": "2020-04-11T16:38:22Z", "commit": {"oid": "89f09440e79a0075cc6a4bd0acb74312c3cbed47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4b9608b9287a711299c34934a44990bb6444437", "author": {"user": {"login": "LlmDl", "name": null}}, "url": "https://github.com/TownyAdvanced/Towny/commit/e4b9608b9287a711299c34934a44990bb6444437", "committedDate": "2020-04-11T19:44:20Z", "message": "Merge remote-tracking branch 'origin/master' into\nfeature/spawn-confirmations"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4260, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}