{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDEyMDc3", "number": 4600, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODozNVrOFGZr2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODo0N1rOFGZsIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjU2NjAyOnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODozNVrOIHZkpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODozNVrOIHZkpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYyOTkyNg==", "bodyText": "revert whitespacing change", "url": "https://github.com/TownyAdvanced/Towny/pull/4600#discussion_r544629926", "createdAt": "2020-12-16T21:18:35Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "diffHunk": "@@ -1111,11 +1115,17 @@ public void plotToggle(Player player, TownBlock townBlock, String[] split) {\n \t\t\t\t\t// Prevent plot pvp from being enabled if admin pvp is disabled\r\n \t\t\t\t\tif (townBlock.getTown().isAdminDisabledPVP() && !townBlock.getPermissions().pvp)\r\n \t\t\t\t\t\tthrow new TownyException(Translation.of(\"msg_err_admin_controlled_pvp_prevents_you_from_changing_pvp\", \"adminDisabledPVP\", \"on\"));\r\n-\t\t\t\t\t\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71799e30b4a0ed7e3265798e58eaf30172e19d13"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjU2NjQzOnYy", "diffSide": "LEFT", "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODo0MlrOIHZk5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODo0MlrOIHZk5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYyOTk5MA==", "bodyText": "revert whitespacing change", "url": "https://github.com/TownyAdvanced/Towny/pull/4600#discussion_r544629990", "createdAt": "2020-12-16T21:18:42Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "diffHunk": "@@ -1125,20 +1135,40 @@ public void plotToggle(Player player, TownBlock townBlock, String[] split) {\n \t\t\t\t} else if (split[0].equalsIgnoreCase(\"explosion\")) {\r\n \t\t\t\t\t// Make sure we are allowed to set these permissions.\r\n \t\t\t\t\ttoggleTest(player, townBlock, StringMgmt.join(split, \" \"));\r\n+\r\n+\t\t\t\t\tPlotToggleExplosionEvent plotToggleExplosionEvent = new PlotToggleExplosionEvent(townBlock.getTown(), player, choice.orElse(!townBlock.getPermissions().explosion));\r\n+\t\t\t\t\tBukkit.getPluginManager().callEvent(plotToggleExplosionEvent);\r\n+\t\t\t\t\tif (plotToggleExplosionEvent.isCancelled()){\r\n+\t\t\t\t\t\treturn;\r\n+\t\t\t\t\t}\r\n+\r\n \t\t\t\t\ttownBlock.getPermissions().explosion = choice.orElse(!townBlock.getPermissions().explosion);\r\n \t\t\t\t\tTownyMessaging.sendMessage(player, Translation.of(\"msg_changed_expl\", \"the Plot\", townBlock.getPermissions().explosion ? Translation.of(\"enabled\") : Translation.of(\"disabled\")));\r\n \r\n \t\t\t\t} else if (split[0].equalsIgnoreCase(\"fire\")) {\r\n \t\t\t\t\t// Make sure we are allowed to set these permissions.\r\n \t\t\t\t\ttoggleTest(player, townBlock, StringMgmt.join(split, \" \"));\r\n+\r\n+\t\t\t\t\tPlotToggleFireEvent plotToggleFireEvent = new PlotToggleFireEvent(townBlock.getTown(), player, choice.orElse(!townBlock.getPermissions().fire));\r\n+\t\t\t\t\tBukkit.getPluginManager().callEvent(plotToggleFireEvent);\r\n+\t\t\t\t\tif (plotToggleFireEvent.isCancelled()){\r\n+\t\t\t\t\t\treturn;\r\n+\t\t\t\t\t}\r\n+\r\n \t\t\t\t\ttownBlock.getPermissions().fire = choice.orElse(!townBlock.getPermissions().fire);\r\n \t\t\t\t\tTownyMessaging.sendMessage(player, Translation.of(\"msg_changed_fire\", \"the Plot\", townBlock.getPermissions().fire ? Translation.of(\"enabled\") : Translation.of(\"disabled\")));\r\n \r\n \t\t\t\t} else if (split[0].equalsIgnoreCase(\"mobs\")) {\r\n \t\t\t\t\t// Make sure we are allowed to set these permissions.\r\n \t\t\t\t\ttoggleTest(player, townBlock, StringMgmt.join(split, \" \"));\r\n+\r\n+\t\t\t\t\tPlotToggleMobsEvent plotToggleMobsEvent= new PlotToggleMobsEvent(townBlock.getTown(), player, choice.orElse(!townBlock.getPermissions().mobs));\r\n+\t\t\t\t\tBukkit.getPluginManager().callEvent(plotToggleMobsEvent);\r\n+\t\t\t\t\tif (plotToggleMobsEvent.isCancelled()){\r\n+\t\t\t\t\t\treturn;\r\n+\t\t\t\t\t}\r\n+\r\n \t\t\t\t\ttownBlock.getPermissions().mobs = choice.orElse(!townBlock.getPermissions().mobs);\r\n-\t\t\t\t\t\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71799e30b4a0ed7e3265798e58eaf30172e19d13"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjU2Njc0OnYy", "diffSide": "RIGHT", "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODo0N1rOIHZlEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMToxODo0N1rOIHZlEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMDAzNA==", "bodyText": "revert whitespacing change", "url": "https://github.com/TownyAdvanced/Towny/pull/4600#discussion_r544630034", "createdAt": "2020-12-16T21:18:47Z", "author": {"login": "LlmDl"}, "path": "src/com/palmergames/bukkit/towny/command/PlotCommand.java", "diffHunk": "@@ -1155,7 +1185,7 @@ public void plotToggle(Player player, TownBlock townBlock, String[] split) {\n \t\t\t} catch (Exception e) {\r\n \t\t\t\tTownyMessaging.sendErrorMsg(player, e.getMessage());\r\n \t\t\t}\r\n-\t\t\t\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71799e30b4a0ed7e3265798e58eaf30172e19d13"}, "originalPosition": 77}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1205, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}