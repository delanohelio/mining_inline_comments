{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMTI3NTkw", "number": 9372, "title": "toggle supersize distances (fix #9367)", "bodyText": "make all (up to) three tiny distance fields clickable\nadd toggle cycle: first distance supersized => second distance supersized (if available) => no distance supersized", "createdAt": "2020-11-12T20:06:35Z", "url": "https://github.com/cgeo/cgeo/pull/9372", "merged": true, "mergeCommit": {"oid": "ea28725181abc25747851703ea27675869598ec5"}, "closed": true, "closedAt": "2020-11-14T07:59:57Z", "author": {"login": "moving-bits"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb4PCdAH2gAyNTIwMTI3NTkwOmIwN2RhMTkxYmYyZWJhYWIyMzFjNmRlZjY3MmE4MTdhNDQzM2I2Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcJABWgFqTUzMDE2NDExNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b07da191bf2ebaab231c6def672a817a4433b638", "author": {"user": {"login": "moving-bits", "name": null}}, "url": "https://github.com/cgeo/cgeo/commit/b07da191bf2ebaab231c6def672a817a4433b638", "committedDate": "2020-11-12T20:04:18Z", "message": "toggle supersize distances (fix #9367)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5OTA1NzUw", "url": "https://github.com/cgeo/cgeo/pull/9372#pullrequestreview-529905750", "createdAt": "2020-11-13T09:29:18Z", "commit": {"oid": "b07da191bf2ebaab231c6def672a817a4433b638"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwOToyOToxOFrOHym9Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwOToyOToxOFrOHym9Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgyOTEzNA==", "bodyText": "I have a bit of a bad feeling with these \"magic\" supersize numbers (0, 1 and 2). Is it an option to use an enum instead?\nAlso, the code seems like it would be vulnerable if \"bothViewsNeeded\" is switched from true to false and vice versa in consective calls. I think this is actually not the case since a previously stored supersize value of 2 would be reduced to 0 in case bothViewsNeeded=false, which as far as I understand the code triggers the \"correct\" behaviour of not displaying a supersize. But there is some hidden magic in there which is not obvious imho.", "url": "https://github.com/cgeo/cgeo/pull/9372#discussion_r522829134", "createdAt": "2020-11-13T09:29:18Z", "author": {"login": "eddiemuc"}, "path": "main/src/cgeo/geocaching/maps/MapDistanceDrawerCommons.java", "diffHunk": "@@ -28,27 +31,34 @@ public MapDistanceDrawerCommons(final View root) {\n \n         distance1InfoView.setOnClickListener(v -> swap());\n         distance1View.setOnClickListener(v -> swap());\n+        distance2InfoView.setOnClickListener(v -> swap());\n+        distance2View.setOnClickListener(v -> swap());\n+        routeDistanceView.setOnClickListener(v -> swap());\n         distanceSupersizeView.setOnClickListener(v -> swap());\n     }\n \n     public void drawDistance(final boolean showBothDistances, final float distance, final float realDistance) {\n-        final boolean bothViewsNeeded = showBothDistances && realDistance != 0.0f && distance != realDistance;\n-        final boolean supersize = Settings.getSupersizeDistance();\n-        final TextView d = supersize ? distanceSupersizeView : distance1View;\n+        bothViewsNeeded = showBothDistances && realDistance != 0.0f && distance != realDistance;\n+        final int supersize = Settings.getSupersizeDistance() % (bothViewsNeeded ? 3 : 2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07da191bf2ebaab231c6def672a817a4433b638"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMTY0MTE0", "url": "https://github.com/cgeo/cgeo/pull/9372#pullrequestreview-530164114", "createdAt": "2020-11-13T15:36:17Z", "commit": {"oid": "b07da191bf2ebaab231c6def672a817a4433b638"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1543, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}