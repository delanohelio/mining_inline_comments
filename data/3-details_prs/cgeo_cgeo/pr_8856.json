{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMjUxNDQ2", "number": 8856, "title": "New entry in settings for cache details to disable extraction of waypoints from personal cache notes", "bodyText": "see issue #8848", "createdAt": "2020-08-20T21:28:59Z", "url": "https://github.com/cgeo/cgeo/pull/8856", "merged": true, "mergeCommit": {"oid": "993116732d6e7c3fe76be62db41fc190913d5809"}, "closed": true, "closedAt": "2020-08-23T12:51:08Z", "author": {"login": "baiti"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdA3Y48AFqTQ3MjAwOTY3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBtRoqgH2gAyNDcxMjUxNDQ2OjJjZTA5NjI5YzYwM2VjM2VjZDE2YmY3MGU2NjA2YzlkMDBmYzg0Nzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDA5Njc2", "url": "https://github.com/cgeo/cgeo/pull/8856#pullrequestreview-472009676", "createdAt": "2020-08-20T21:49:12Z", "commit": {"oid": "1bda34ad6753875e2f3bb08e15efc4478514b31b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTo0OToxMlrOHEUekg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTo0OToxMlrOHEUekg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI5MTg1OA==", "bodyText": "I suggest something like:\n\"Globally disable waypoint extraction from personal note. It can still be enabled for individual caches by deactivating the checkbox below the personal note of the cache.\"", "url": "https://github.com/cgeo/cgeo/pull/8856#discussion_r474291858", "createdAt": "2020-08-20T21:49:12Z", "author": {"login": "Lineflyer"}, "path": "main/res/values/strings.xml", "diffHunk": "@@ -600,6 +600,8 @@\n     <string name=\"init_summary_disabled\">Exclude disabled caches</string>\n     <string name=\"init_archived\">Exclude Archived</string>\n     <string name=\"init_summary_archived\">Exclude archived caches</string>\n+    <string name=\"init_global_wp_extraction_disable\">Waypoint Extraction</string>\n+    <string name=\"init_summary_global_wp_extraction_disable\">Disable waypoint extraction from personal cache notes</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bda34ad6753875e2f3bb08e15efc4478514b31b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDA3MDg4", "url": "https://github.com/cgeo/cgeo/pull/8856#pullrequestreview-472007088", "createdAt": "2020-08-20T21:44:04Z", "commit": {"oid": "1bda34ad6753875e2f3bb08e15efc4478514b31b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTo0NDowNFrOHEUVvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMTo1MToxN1rOHEUiBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4OTU5Ng==", "bodyText": "IMHO this line is not needed, as this setting is new, so no need to migrate.", "url": "https://github.com/cgeo/cgeo/pull/8856#discussion_r474289596", "createdAt": "2020-08-20T21:44:04Z", "author": {"login": "moving-bits"}, "path": "main/src/cgeo/geocaching/settings/Settings.java", "diffHunk": "@@ -194,6 +194,7 @@ private static void migrateSettings() {\n             e.putInt(getKey(R.string.pref_defaultNavigationTool), prefsV0.getInt(getKey(R.string.pref_defaultNavigationTool), NavigationAppsEnum.COMPASS.id));\n             e.putInt(getKey(R.string.pref_defaultNavigationTool2), prefsV0.getInt(getKey(R.string.pref_defaultNavigationTool2), NavigationAppsEnum.INTERNAL_MAP.id));\n             e.putBoolean(getKey(R.string.pref_debug), prefsV0.getBoolean(getKey(R.string.pref_debug), false));\n+            e.putBoolean(getKey(R.string.pref_global_wp_extraction_disable), prefsV0.getBoolean(getKey(R.string.pref_global_wp_extraction_disable), false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bda34ad6753875e2f3bb08e15efc4478514b31b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI5Mjc0MQ==", "bodyText": "Not sure if I understand this condition correctly. To my understanding we wanted to implement an opt-out system. Wouldn't we need to check this in the Geocache class then instead of here? Distinguish on cache-level between a manually set value (true/false), which would override the global setting, and a \"not yet set\" value, which would activate the global setting for this cache?", "url": "https://github.com/cgeo/cgeo/pull/8856#discussion_r474292741", "createdAt": "2020-08-20T21:51:17Z", "author": {"login": "moving-bits"}, "path": "main/src/cgeo/geocaching/models/Geocache.java", "diffHunk": "@@ -1558,7 +1558,7 @@ public boolean addWaypointsFromNote() {\n      */\n     public boolean addWaypointsFromText(@Nullable final String text, final boolean updateDb, @NonNull final String namePrefix, final boolean forceExtraction) {\n         boolean changed = false;\n-        if (forceExtraction || !preventWaypointsFromNote) {\n+        if (forceExtraction || (!Settings.isGlobalWpExtractionDisabled() && !preventWaypointsFromNote)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bda34ad6753875e2f3bb08e15efc4478514b31b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "948a85e931071870371567b043522a512aad37d7", "author": {"user": {"login": "baiti", "name": null}}, "url": "https://github.com/cgeo/cgeo/commit/948a85e931071870371567b043522a512aad37d7", "committedDate": "2020-08-23T12:12:34Z", "message": "new entry in settings for cache details to disable extraction of waypoints from personal cache notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "883304f1f2a931f3c28b3a260f02a0265497786b", "author": {"user": {"login": "baiti", "name": null}}, "url": "https://github.com/cgeo/cgeo/commit/883304f1f2a931f3c28b3a260f02a0265497786b", "committedDate": "2020-08-23T12:12:34Z", "message": "issue-8848"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f571f53298822ae5968ff1f50f87c7a30ffb2d25", "author": {"user": {"login": "baiti", "name": null}}, "url": "https://github.com/cgeo/cgeo/commit/f571f53298822ae5968ff1f50f87c7a30ffb2d25", "committedDate": "2020-08-23T12:36:09Z", "message": "new entry in settings for cache details to disable extraction of waypoints from personal cache notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ce09629c603ec3ecd16bf70e6606c9d00fc8479", "author": {"user": {"login": "baiti", "name": null}}, "url": "https://github.com/cgeo/cgeo/commit/2ce09629c603ec3ecd16bf70e6606c9d00fc8479", "committedDate": "2020-08-23T12:36:09Z", "message": "issue-8848"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1614, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}