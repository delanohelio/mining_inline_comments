{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDQ3NzM3", "number": 9537, "title": "Deprecation fixes and LayoutInflater.from", "bodyText": "From #9531", "createdAt": "2020-12-14T00:01:01Z", "url": "https://github.com/cgeo/cgeo/pull/9537", "merged": true, "mergeCommit": {"oid": "87e6f1520382701683adbf43373e814151ab21ec"}, "closed": true, "closedAt": "2020-12-18T23:22:47Z", "author": {"login": "TacoTheDank"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmVnzDAFqTU1MjE4NDcxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnfxvSAFqTU1NTg0ODQzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMTg0NzE4", "url": "https://github.com/cgeo/cgeo/pull/9537#pullrequestreview-552184718", "createdAt": "2020-12-15T07:55:29Z", "commit": {"oid": "dc6ae2220bdb28a5f9cde6b37777140df9c7d7f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzo1NToyOVrOIF9hfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzo1NTo0NFrOIF9iCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTc4OA==", "bodyText": "Why not use LoaderManager.getInstance(this). as with the other changes?", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543121788", "createdAt": "2020-12-15T07:55:29Z", "author": {"login": "bekuno"}, "path": "main/src/cgeo/geocaching/CacheListActivity.java", "diffHunk": "@@ -1536,9 +1536,9 @@ public void onClick(final View arg0) {\n             showProgress(true);\n             showFooterLoadingCaches();\n \n-            getSupportLoaderManager().restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n+            LoaderManager.getInstance(CacheListActivity.this).restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc6ae2220bdb28a5f9cde6b37777140df9c7d7f5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTkyOQ==", "bodyText": "Why not use LoaderManager.getInstance(this). as with the other changes?", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543121929", "createdAt": "2020-12-15T07:55:44Z", "author": {"login": "bekuno"}, "path": "main/src/cgeo/geocaching/CacheListActivity.java", "diffHunk": "@@ -1536,9 +1536,9 @@ public void onClick(final View arg0) {\n             showProgress(true);\n             showFooterLoadingCaches();\n \n-            getSupportLoaderManager().restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n+            LoaderManager.getInstance(CacheListActivity.this).restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n             // the loader for subsequent pages takes over - therefore the initial loader needs to be destroyed\n-            getSupportLoaderManager().destroyLoader(type.getLoaderId());\n+            LoaderManager.getInstance(CacheListActivity.this).destroyLoader(type.getLoaderId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc6ae2220bdb28a5f9cde6b37777140df9c7d7f5"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNzM1MTc1", "url": "https://github.com/cgeo/cgeo/pull/9537#pullrequestreview-552735175", "createdAt": "2020-12-15T18:12:27Z", "commit": {"oid": "4ae5347080db827780d06e5c69dd50e188cbdbf9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMjoyN1rOIGZGBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMjoyN1rOIGZGBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3MzUxMQ==", "bodyText": "clipboard.getText(); is also deprecated. Is there a chance for solution as before for setText()?", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543573511", "createdAt": "2020-12-15T18:12:27Z", "author": {"login": "bekuno"}, "path": "main/src/cgeo/geocaching/utils/ClipboardUtils.java", "diffHunk": "@@ -25,22 +26,23 @@ private ClipboardUtils() {\n      * @param text\n      *            The text to place in the clipboard.\n      */\n-    @SuppressWarnings(\"deprecation\")\n     public static void copyToClipboard(@NonNull final CharSequence text) {\n         // fully qualified name used here to avoid buggy deprecation warning (of javac) on the import statement\n-        final android.text.ClipboardManager clipboard = (android.text.ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n-        clipboard.setText(text);\n+        final ClipboardManager clipboard = (ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n+        if (clipboard != null) {\n+            final ClipData data = ClipData.newPlainText(null, text);\n+            clipboard.setPrimaryClip(data);\n+        }\n     }\n \n     /**\n      * get clipboard content\n      *\n      */\n-    @SuppressWarnings(\"deprecation\")\n     @Nullable\n     public static String getText() {\n         // fully qualified name used here to avoid buggy deprecation warning (of javac) on the import statement\n-        final android.text.ClipboardManager clipboard = (android.text.ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n+        final ClipboardManager clipboard = (ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n         final CharSequence text = clipboard.getText();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ae5347080db827780d06e5c69dd50e188cbdbf9"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ded5502d553b32df93a131dfb71bf44cf4856c", "author": {"user": {"login": "TacoTheDank", "name": "Taco"}}, "url": "https://github.com/cgeo/cgeo/commit/11ded5502d553b32df93a131dfb71bf44cf4856c", "committedDate": "2020-12-16T21:33:05Z", "message": "Fix some deprecations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca02d2ba9558e9b0f6077e6d1ad6b2dfa01cc5d4", "author": {"user": {"login": "TacoTheDank", "name": "Taco"}}, "url": "https://github.com/cgeo/cgeo/commit/ca02d2ba9558e9b0f6077e6d1ad6b2dfa01cc5d4", "committedDate": "2020-12-16T21:33:51Z", "message": "Use LayoutInflater.from instead of getSystemService where possible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1ODQ4NDM2", "url": "https://github.com/cgeo/cgeo/pull/9537#pullrequestreview-555848436", "createdAt": "2020-12-18T22:21:40Z", "commit": {"oid": "ca02d2ba9558e9b0f6077e6d1ad6b2dfa01cc5d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1527, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}