{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyOTk0OTEx", "number": 9495, "title": "rel to #9488: report db problem to user", "bodyText": "rel to #9488: report db problem to user\nChanged c:geo code such that in case of fatal db problem user gets an error message asking him to report the problem by sending logfile. Code also makes sure that sending logfile is actually doable even when db is not accessible (this meant to safeguard some of db-using functions esp dbextension)", "createdAt": "2020-12-05T10:27:24Z", "url": "https://github.com/cgeo/cgeo/pull/9495", "merged": true, "mergeCommit": {"oid": "af7a2f9b9ea07370ab13ab6018fa27ed6035bbad"}, "closed": true, "closedAt": "2020-12-06T16:47:50Z", "author": {"login": "eddiemuc"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjULkFgFqTU0NTY1NDcxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjg8qCABqjQwNzY2MDQ1NTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjU0NzE1", "url": "https://github.com/cgeo/cgeo/pull/9495#pullrequestreview-545654715", "createdAt": "2020-12-05T22:35:13Z", "commit": {"oid": "4c5d00d85f6beddfc1bd2800ef03bc02ec64f8de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQyMjozNToxM1rOIACIMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQyMjozNToxM1rOIACIMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjkwNTc3Nw==", "bodyText": "We should make this translatable, shouldn't we?", "url": "https://github.com/cgeo/cgeo/pull/9495#discussion_r536905777", "createdAt": "2020-12-05T22:35:13Z", "author": {"login": "Lineflyer"}, "path": "main/src/cgeo/geocaching/MainActivity.java", "diffHunk": "@@ -278,6 +278,16 @@ public void onCreate(final Bundle savedInstanceState) {\n         // don't call the super implementation with the layout argument, as that would set the wrong theme\n         super.onCreate(savedInstanceState);\n \n+        //check database\n+        final String errorMsg = DataStore.initAndCheck(false);\n+        if (errorMsg != null) {\n+           Dialogs.message(this, \"Fatal DB error - please report\",\n+               \"Fatal error while trying to open/create cache database. \" +\n+                   \"c:geo cannot be used in this state.\\n\\n\" +\n+                   \"Please support us in analyzing and fixing this problem by report it via Settings -> System -> Generate logfile. \" +\n+                   \"\\n\\n[\" + errorMsg + \"]\");\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5d00d85f6beddfc1bd2800ef03bc02ec64f8de"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c5d00d85f6beddfc1bd2800ef03bc02ec64f8de", "author": {"user": {"login": "eddiemuc", "name": "Eddie"}}, "url": "https://github.com/cgeo/cgeo/commit/4c5d00d85f6beddfc1bd2800ef03bc02ec64f8de", "committedDate": "2020-12-05T10:26:46Z", "message": "rel to #9488: report db problem to user"}, "afterCommit": {"oid": "113c563ea7b99ae7e3b10db539df1f906c8aea81", "author": {"user": {"login": "eddiemuc", "name": "Eddie"}}, "url": "https://github.com/cgeo/cgeo/commit/113c563ea7b99ae7e3b10db539df1f906c8aea81", "committedDate": "2020-12-06T10:54:13Z", "message": "rel to #9488: report db problem to user, allow for direct problem reporting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ebd555d2236c4b93969c1119c7b68a5fd6636f0", "author": {"user": {"login": "eddiemuc", "name": "Eddie"}}, "url": "https://github.com/cgeo/cgeo/commit/7ebd555d2236c4b93969c1119c7b68a5fd6636f0", "committedDate": "2020-12-06T13:27:19Z", "message": "rel to #9488: report db problem to user, allow for direct problem reporting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "113c563ea7b99ae7e3b10db539df1f906c8aea81", "author": {"user": {"login": "eddiemuc", "name": "Eddie"}}, "url": "https://github.com/cgeo/cgeo/commit/113c563ea7b99ae7e3b10db539df1f906c8aea81", "committedDate": "2020-12-06T10:54:13Z", "message": "rel to #9488: report db problem to user, allow for direct problem reporting"}, "afterCommit": {"oid": "7ebd555d2236c4b93969c1119c7b68a5fd6636f0", "author": {"user": {"login": "eddiemuc", "name": "Eddie"}}, "url": "https://github.com/cgeo/cgeo/commit/7ebd555d2236c4b93969c1119c7b68a5fd6636f0", "committedDate": "2020-12-06T13:27:19Z", "message": "rel to #9488: report db problem to user, allow for direct problem reporting"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1549, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}