{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MTY1OTYy", "number": 644, "title": "Shade AWS instrumentation library when using in agent", "bodyText": "Fixes #488\nI considered shading in the aws-sdk auto module instead but don't think it's simple to get tests to use the shaded classes in that case. Using an unpublished shaded jar generated by the manual module instead seems to work quite well.", "createdAt": "2020-07-07T05:36:45Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644", "merged": true, "mergeCommit": {"oid": "8f3b7565b035c19d71f0f10fb33e9afd067f2cf5"}, "closed": true, "closedAt": "2020-07-08T03:36:56Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyfF_pAH2gAyNDQ1MTY1OTYyOmE0MjA4ODA3MDlhZmRkMDI4M2U3OTg1MThhNDVhZWE2MjBiOGY2MjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyxgSxgH2gAyNDQ1MTY1OTYyOmIyMTc4MTljNDcwYWUwZTY2Y2VkYmFkMTY3NTlmZGIwMmQzODYyYTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a420880709afdd0283e798518a45aea620b8f621", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a420880709afdd0283e798518a45aea620b8f621", "committedDate": "2020-07-07T05:35:54Z", "message": "Shade AWS instrumentation library when using in agent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTc3MzU0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#pullrequestreview-443577354", "createdAt": "2020-07-07T05:45:08Z", "commit": {"oid": "a420880709afdd0283e798518a45aea620b8f621"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNTo0NTowOFrOGtv4kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNTo1MTozN1rOGtwAUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYyMzYzMg==", "bodyText": "is this the same?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              archiveClassifier.set('agent')\n          \n          \n            \n              archiveClassifier = 'agent'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#discussion_r450623632", "createdAt": "2020-07-07T05:45:08Z", "author": {"login": "trask"}, "path": "instrumentation-core/aws-sdk/aws-sdk-2.2/aws-sdk-2.2.gradle", "diffHunk": "@@ -48,3 +53,11 @@ dependencies {\n   latestDepTestCompile group: 'software.amazon.awssdk', name: 'dynamodb', version: '+'\n   latestDepTestCompile group: 'software.amazon.awssdk', name: 'kinesis', version: '+'\n }\n+\n+shadowJar {\n+  archiveClassifier.set('agent')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a420880709afdd0283e798518a45aea620b8f621"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYyNTYxNw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#discussion_r450625617", "createdAt": "2020-07-07T05:51:37Z", "author": {"login": "trask"}, "path": "gradle/publish.gradle", "diffHunk": "@@ -10,7 +10,7 @@ publishing {\n   }\n   publications {\n     maven(MavenPublication) {\n-      if (project.tasks.findByName(\"shadowJar\") != null) {\n+      if (project.tasks.findByName(\"shadowJar\") != null && !findProperty('noShadowPublish')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a420880709afdd0283e798518a45aea620b8f621"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86eb66505ed20824f3b5bf8117d94e6f4b51d065", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/86eb66505ed20824f3b5bf8117d94e6f4b51d065", "committedDate": "2020-07-07T05:59:40Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-auto-instr-java into shade-aws"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75c494d58529c583cda3220cd40fb065246714bb", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/75c494d58529c583cda3220cd40fb065246714bb", "committedDate": "2020-07-07T06:01:30Z", "message": "Cleanup and doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTgyMjUx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#pullrequestreview-443582251", "createdAt": "2020-07-07T05:58:28Z", "commit": {"oid": "a420880709afdd0283e798518a45aea620b8f621"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNTo1ODoyOFrOGtwIMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNTo1ODoyOFrOGtwIMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYyNzYzMw==", "bodyText": "Does seem to work though IntelliJ doesn't like it - will be optimistic IntelliJ fixes it eventually", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#discussion_r450627633", "createdAt": "2020-07-07T05:58:28Z", "author": {"login": "anuraaga"}, "path": "instrumentation-core/aws-sdk/aws-sdk-2.2/aws-sdk-2.2.gradle", "diffHunk": "@@ -48,3 +53,11 @@ dependencies {\n   latestDepTestCompile group: 'software.amazon.awssdk', name: 'dynamodb', version: '+'\n   latestDepTestCompile group: 'software.amazon.awssdk', name: 'kinesis', version: '+'\n }\n+\n+shadowJar {\n+  archiveClassifier.set('agent')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYyMzYzMg=="}, "originalCommit": {"oid": "a420880709afdd0283e798518a45aea620b8f621"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTg1NTQy", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/644#pullrequestreview-443585542", "createdAt": "2020-07-07T06:06:57Z", "commit": {"oid": "75c494d58529c583cda3220cd40fb065246714bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a6ef0e786d476f4477a9f75425f523d1c1799e", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/80a6ef0e786d476f4477a9f75425f523d1c1799e", "committedDate": "2020-07-07T06:10:13Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b217819c470ae0e66cedbad16759fdb02d3862a2", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b217819c470ae0e66cedbad16759fdb02d3862a2", "committedDate": "2020-07-08T03:02:55Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-auto-instr-java into shade-aws"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3059, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}