{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3ODEyOTkz", "number": 977, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDo0MToxMFrOEZptgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjoxMjoxOVrOEZrY_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzMzMjUxOnYy", "diffSide": "RIGHT", "path": "gradle/instrumentation-common.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDo0MToxMFrOHCl5ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDo0MToxMFrOHCl5ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ4MDE4Ng==", "bodyText": "Does 2.x work also?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *   example to restrict to just a major version by specifying `2.x`.\n          \n          \n            \n             *   example to restrict to just a major version by specifying `2.+`.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/977#discussion_r472480186", "createdAt": "2020-08-18T20:41:10Z", "author": {"login": "trask"}, "path": "gradle/instrumentation-common.gradle", "diffHunk": "@@ -0,0 +1,76 @@\n+/** Common setup for manual instrumentation of libraries and auto instrumentation. */\n+\n+\n+/**\n+ * We define three dependency configurations to use when adding dependencies to libraries being\n+ * instrumented.\n+ *\n+ * - library: A dependency on the instrumented library. Results in the dependency being added to\n+ *     compileOnly and testImplementation. If the build is run with -PtestLatestDeps=true, the\n+ *     version when added to testImplementation will be overridden by `+`, the latest version\n+ *     possible. For simple libraries without different behavior between versions, it is possible\n+ *     to have a single dependency on library only.\n+ *\n+ * - testLibrary: A dependency on a library for testing. This will usually be used to either\n+ *     a) use a different version of the library for compilation and testing and b) to add a helper\n+ *     that is only required for tests (e.g., library-testing artifact). The dependency will be\n+ *     added to testImplementation and will have a version of `+` when testing latest deps as\n+ *     described above.\n+ *\n+ * - latestDepTestLibrary: A dependency on a library for testing when testing of latest dependency\n+ *   version is enabled. This dependency will be added as-is to testImplementation, but only if\n+ *   -PtestLatestDeps=true. The version will not be modified but it will be given highest\n+ *   precedence. Use this to restrict the latest version dependency from the default `+`, for\n+ *   example to restrict to just a major version by specifying `2.x`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c172fcf5bf21d6c54bd8456ac1b94b088a70fd2f"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzU1NDIxOnYy", "diffSide": "RIGHT", "path": "instrumentation/hibernate/hibernate-4.3/hibernate-4.3.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMTo1MjozNFrOHCn_WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMTo1MjozNFrOHCn_WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUxNDM5Mg==", "bodyText": "Also see more general version of this issue #749", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/977#discussion_r472514392", "createdAt": "2020-08-18T21:52:34Z", "author": {"login": "trask"}, "path": "instrumentation/hibernate/hibernate-4.3/hibernate-4.3.gradle", "diffHunk": "@@ -26,13 +19,12 @@ dependencies {\n   testImplementation project(':instrumentation:hibernate:hibernate-3.3')\n   testImplementation project(':instrumentation:hibernate:hibernate-4.0')\n \n-  testImplementation group: 'org.hibernate', name: 'hibernate-core', version: '4.3.0.Final'\n-  testImplementation group: 'org.hibernate', name: 'hibernate-entitymanager', version: '4.3.0.Final'\n+  testLibrary group: 'org.hibernate', name: 'hibernate-entitymanager', version: '4.3.0.Final'\n   testImplementation group: 'org.hsqldb', name: 'hsqldb', version: '2.0.0'\n-  testImplementation group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.5.1.RELEASE'\n+  testLibrary group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.5.1.RELEASE'\n \n-  latestDepTestImplementation group: 'org.hibernate', name: 'hibernate-core', version: '(,6.0.0.Final)'\n-  latestDepTestImplementation group: 'org.hibernate', name: 'hibernate-entitymanager', version: '(,6.0.0.Final)'\n-  latestDepTestImplementation group: 'org.hsqldb', name: 'hsqldb', version: '2.0.0'\n-  latestDepTestImplementation group: 'org.springframework.data', name: 'spring-data-jpa', version: '+'\n+  // TODO(anuraaga): Investigate why these tests don't pass on 5 or 6\n+  // https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues/1042", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c172fcf5bf21d6c54bd8456ac1b94b088a70fd2f"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzU3MTMwOnYy", "diffSide": "RIGHT", "path": "instrumentation/java-classloader/tomcat-testing/tomcat-testing.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMTo1ODozNlrOHCoJhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMTo1ODozNlrOHCoJhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUxNjk5Ng==", "bodyText": "unrelated, but since we're here \ud83d\ude04\nit's not related to requiring different instrumentation (anymore since #152)\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              //This seems to be the earliest version that has org.apache.catalina.loader.WebappClassLoaderBase\n          \n          \n            \n              //Older versions would require slightly different instrumentation.\n          \n          \n            \n              // This is the earliest version that has org.apache.catalina.loader.ParallelWebappClassLoader\n          \n          \n            \n              // which is used in the test", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/977#discussion_r472516996", "createdAt": "2020-08-18T21:58:36Z", "author": {"login": "trask"}, "path": "instrumentation/java-classloader/tomcat-testing/tomcat-testing.gradle", "diffHunk": "@@ -12,18 +11,10 @@ muzzle {\n   }\n }\n \n-testSets {\n-  latestDepTest {\n-    dirName = 'test'\n-  }\n-}\n-\n dependencies {\n   testImplementation project(':instrumentation:java-classloader')\n \n   //This seems to be the earliest version that has org.apache.catalina.loader.WebappClassLoaderBase\n   //Older versions would require slightly different instrumentation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c172fcf5bf21d6c54bd8456ac1b94b088a70fd2f"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzYwNzY0OnYy", "diffSide": "RIGHT", "path": "instrumentation/servlet/servlet-common/servlet-common.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjoxMjoxOVrOHCofVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwNDoxNDoxMVrOHCxZNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUyMjU4Mg==", "bodyText": "i think?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              testImplementation group: 'org.eclipse.jetty', name: 'jetty-server', version: '7.0.0.v20091005'\n          \n          \n            \n              testImplementation group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '7.0.0.v20091005'\n          \n          \n            \n              testLibrary group: 'org.eclipse.jetty', name: 'jetty-server', version: '7.0.0.v20091005'\n          \n          \n            \n              testLibrary group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '7.0.0.v20091005'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/977#discussion_r472522582", "createdAt": "2020-08-18T22:12:19Z", "author": {"login": "trask"}, "path": "instrumentation/servlet/servlet-common/servlet-common.gradle", "diffHunk": "@@ -22,7 +17,4 @@ dependencies {\n   }\n   testImplementation group: 'org.eclipse.jetty', name: 'jetty-server', version: '7.0.0.v20091005'\n   testImplementation group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '7.0.0.v20091005'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c172fcf5bf21d6c54bd8456ac1b94b088a70fd2f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY2ODQ2OQ==", "bodyText": "Oops, no it wasn't - the previous latestDepTest was a ghost, it didn't specify the source set :P #1051", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/977#discussion_r472668469", "createdAt": "2020-08-19T04:14:11Z", "author": {"login": "anuraaga"}, "path": "instrumentation/servlet/servlet-common/servlet-common.gradle", "diffHunk": "@@ -22,7 +17,4 @@ dependencies {\n   }\n   testImplementation group: 'org.eclipse.jetty', name: 'jetty-server', version: '7.0.0.v20091005'\n   testImplementation group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '7.0.0.v20091005'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUyMjU4Mg=="}, "originalCommit": {"oid": "c172fcf5bf21d6c54bd8456ac1b94b088a70fd2f"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 36, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}