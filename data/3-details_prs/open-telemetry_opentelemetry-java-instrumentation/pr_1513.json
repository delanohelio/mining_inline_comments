{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNzY5NjUy", "number": 1513, "title": "Add explicit names to metrics/trace SPI factories", "bodyText": "Signed-off-by: Pavol Loffay p.loffay@gmail.com\nResolves #1287\nSee https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/sdk-environment-variables.md", "createdAt": "2020-10-28T18:57:37Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513", "merged": true, "mergeCommit": {"oid": "c931b1b85a508d25583bbbeb7e92dcf2fa9da367"}, "closed": true, "closedAt": "2020-10-29T10:14:43Z", "author": {"login": "pavolloffay"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXCxwXgFqTUxOTAxMzQ3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXOyEPgH2gAyNTExNzY5NjUyOjdiNzBjNWE0MTQyMTU1ZWIzY2NlMDEyMmRmNDk2NDMxN2Y2ZmUzZWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDEzNDc0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513#pullrequestreview-519013474", "createdAt": "2020-10-28T19:28:01Z", "commit": {"oid": "338c562acd57c7535a7c65fe370e974be6463ea8"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOToyODowMVrOHp6Ijg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOToyOToyNlrOHp6Lqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcwNjEyNg==", "bodyText": "i think it's a little confusing why we support multiple names without a bit of explanation:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Returns names of metric servers supported by this factory.\n          \n          \n            \n               * Returns names of metric servers supported by this factory.\n          \n          \n            \n               *\n          \n          \n            \n               * <p>Multiple names are useful for enabling a pair of span and metric exporters using the same\n          \n          \n            \n               * name, while still having separate names for enabling them individually.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513#discussion_r513706126", "createdAt": "2020-10-28T19:28:01Z", "author": {"login": "trask"}, "path": "javaagent-spi/src/main/java/io/opentelemetry/javaagent/spi/exporter/MetricServer.java", "diffHunk": "@@ -23,4 +24,11 @@\n    * @param config The configuration\n    */\n   void start(MetricProducer producer, Properties config);\n+\n+  /**\n+   * Returns names of metric servers supported by this factory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "338c562acd57c7535a7c65fe370e974be6463ea8"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcwNjkyMw==", "bodyText": "same as above\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Returns names of span exporters supported by this factory.\n          \n          \n            \n               * Returns names of span exporters supported by this factory.\n          \n          \n            \n               *\n          \n          \n            \n               * <p>Multiple names are useful for enabling a pair of span and metric exporters using the same\n          \n          \n            \n               * name, while still having separate names for enabling them individually.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513#discussion_r513706923", "createdAt": "2020-10-28T19:29:26Z", "author": {"login": "trask"}, "path": "javaagent-spi/src/main/java/io/opentelemetry/javaagent/spi/exporter/SpanExporterFactory.java", "diffHunk": "@@ -21,4 +22,11 @@\n    * @return An implementation of a {@link SpanExporter}\n    */\n   SpanExporter fromConfig(Properties config);\n+\n+  /**\n+   * Returns names of span exporters supported by this factory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "338c562acd57c7535a7c65fe370e974be6463ea8"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDYxNjY3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513#pullrequestreview-519061667", "createdAt": "2020-10-28T20:35:12Z", "commit": {"oid": "338c562acd57c7535a7c65fe370e974be6463ea8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDozNToxMlrOHp8ZnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDozNToxMlrOHp8ZnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc0MzI2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (spanExporterFactory.getNames().contains(exporterName)) return spanExporterFactory;\n          \n          \n            \n                  if (spanExporterFactory.getNames().contains(exporterName)) {\n          \n          \n            \n                    return spanExporterFactory;\n          \n          \n            \n                  }", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1513#discussion_r513743260", "createdAt": "2020-10-28T20:35:12Z", "author": {"login": "iNikem"}, "path": "javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/TracerInstaller.java", "diffHunk": "@@ -122,21 +114,11 @@ private static SpanExporterFactory findSpanExporterFactory(String exporterName)\n         ServiceLoader.load(SpanExporterFactory.class, TracerInstaller.class.getClassLoader());\n \n     for (SpanExporterFactory spanExporterFactory : serviceLoader) {\n-      if (spanExporterFactory\n-          .getClass()\n-          .getSimpleName()\n-          .toLowerCase()\n-          .startsWith(exporterName(exporterName).toLowerCase())) {\n-        return spanExporterFactory;\n-      }\n+      if (spanExporterFactory.getNames().contains(exporterName)) return spanExporterFactory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "338c562acd57c7535a7c65fe370e974be6463ea8"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7b21768b6f21fc8566fc766beb5b82bce8668b6", "author": {"user": {"login": "pavolloffay", "name": "Pavol Loffay"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b7b21768b6f21fc8566fc766beb5b82bce8668b6", "committedDate": "2020-10-29T07:18:33Z", "message": "Add explicit names to metrics/trace SPI factories\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf61c1cd3e31b5ddfd09038a3bf71229f06fbdde", "author": {"user": {"login": "pavolloffay", "name": "Pavol Loffay"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cf61c1cd3e31b5ddfd09038a3bf71229f06fbdde", "committedDate": "2020-10-28T20:53:36Z", "message": "comment\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>"}, "afterCommit": {"oid": "b7b21768b6f21fc8566fc766beb5b82bce8668b6", "author": {"user": {"login": "pavolloffay", "name": "Pavol Loffay"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b7b21768b6f21fc8566fc766beb5b82bce8668b6", "committedDate": "2020-10-29T07:18:33Z", "message": "Add explicit names to metrics/trace SPI factories\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b70c5a4142155eb3cce0122df4964317f6fe3ec", "author": {"user": {"login": "pavolloffay", "name": "Pavol Loffay"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7b70c5a4142155eb3cce0122df4964317f6fe3ec", "committedDate": "2020-10-29T09:30:51Z", "message": "Fix tests\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2422, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}