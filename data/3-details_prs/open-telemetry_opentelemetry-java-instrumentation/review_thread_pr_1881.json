{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MTUxNzk1", "number": 1881, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODoyODo0M1rOFDnyvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwOTozOToyMlrOFD5lHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MzQyMDE0OnYy", "diffSide": "RIGHT", "path": "docs/contributing/writing-instrumentation.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODoyODo0M1rOIDXbOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODoyODo0M1rOIDXbOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMDQ0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n          \n          \n            \n            Subclasses of `InstrumentationModule` will often implement advice classes as static inner classes.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540400442", "createdAt": "2020-12-10T18:28:43Z", "author": {"login": "iNikem"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MzQyNTA0OnYy", "diffSide": "RIGHT", "path": "docs/contributing/writing-instrumentation.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODoyOTo0N1rOIDXePw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNzowMDowNFrOIDrpVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMTIxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Simply referring to the inner class and\n          \n          \n            \n            calling `getName()` would be easier to read and understand than\n          \n          \n            \n            Simply writing `WonderfulAdvice.class.getName()` would be easier to read and understand than", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540401215", "createdAt": "2020-12-10T18:29:47Z", "author": {"login": "iNikem"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n+These classes are referred to by name in the mappings from method descriptor to advice class,\n+typically in the `transform()` method.\n+\n+For instance, this `MyInstrumentationModule` defines a single advice that mathches\n+on a single `execute` method:\n+\n+```\n+transformers.put(\n+  isMethod().and(named(\"execute\")), \n+  MyInstrumentationModule.class.getName() + \"$WonderfulAdvice\");\n+```\n+\n+Simply referring to the inner class and\n+calling `getName()` would be easier to read and understand than", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwNjc0Ng==", "bodyText": "Thanks.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540406746", "createdAt": "2020-12-10T18:38:16Z", "author": {"login": "breedx-splk"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n+These classes are referred to by name in the mappings from method descriptor to advice class,\n+typically in the `transform()` method.\n+\n+For instance, this `MyInstrumentationModule` defines a single advice that mathches\n+on a single `execute` method:\n+\n+```\n+transformers.put(\n+  isMethod().and(named(\"execute\")), \n+  MyInstrumentationModule.class.getName() + \"$WonderfulAdvice\");\n+```\n+\n+Simply referring to the inner class and\n+calling `getName()` would be easier to read and understand than", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMTIxNQ=="}, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDczMTczMw==", "bodyText": "You decided against accepting this suggestion? It is fine, you just send mixed signals here :)", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540731733", "createdAt": "2020-12-11T07:00:04Z", "author": {"login": "iNikem"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n+These classes are referred to by name in the mappings from method descriptor to advice class,\n+typically in the `transform()` method.\n+\n+For instance, this `MyInstrumentationModule` defines a single advice that mathches\n+on a single `execute` method:\n+\n+```\n+transformers.put(\n+  isMethod().and(named(\"execute\")), \n+  MyInstrumentationModule.class.getName() + \"$WonderfulAdvice\");\n+```\n+\n+Simply referring to the inner class and\n+calling `getName()` would be easier to read and understand than", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMTIxNQ=="}, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MzQyODgzOnYy", "diffSide": "RIGHT", "path": "docs/contributing/writing-instrumentation.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODozMDo0MlrOIDXgsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODo0Mjo0NlrOIDX-6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMTg0MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Instrumentation modules are typically loaded by the user's classloader, and this \n          \n          \n            \n            Instrumentation modules are loaded by the agent's classloader, and this", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540401841", "createdAt": "2020-12-10T18:30:42Z", "author": {"login": "iNikem"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n+These classes are referred to by name in the mappings from method descriptor to advice class,\n+typically in the `transform()` method.\n+\n+For instance, this `MyInstrumentationModule` defines a single advice that mathches\n+on a single `execute` method:\n+\n+```\n+transformers.put(\n+  isMethod().and(named(\"execute\")), \n+  MyInstrumentationModule.class.getName() + \"$WonderfulAdvice\");\n+```\n+\n+Simply referring to the inner class and\n+calling `getName()` would be easier to read and understand than\n+this odd mix of string concatenation...but please NOTE:  **this is intentional** \n+and should be maintained.\n+\n+Instrumentation modules are typically loaded by the user's classloader, and this ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwOTU3Ng==", "bodyText": "Thanks for clearing me up, I had it backwards!", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540409576", "createdAt": "2020-12-10T18:42:46Z", "author": {"login": "breedx-splk"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes static inner classes.\n+These classes are referred to by name in the mappings from method descriptor to advice class,\n+typically in the `transform()` method.\n+\n+For instance, this `MyInstrumentationModule` defines a single advice that mathches\n+on a single `execute` method:\n+\n+```\n+transformers.put(\n+  isMethod().and(named(\"execute\")), \n+  MyInstrumentationModule.class.getName() + \"$WonderfulAdvice\");\n+```\n+\n+Simply referring to the inner class and\n+calling `getName()` would be easier to read and understand than\n+this odd mix of string concatenation...but please NOTE:  **this is intentional** \n+and should be maintained.\n+\n+Instrumentation modules are typically loaded by the user's classloader, and this ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwMTg0MQ=="}, "originalCommit": {"oid": "3bf00c0e278bc77fd950caf8124875d6f6c1ab43"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NjMzNDM5OnYy", "diffSide": "RIGHT", "path": "docs/contributing/writing-instrumentation.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwOTozOToyMlrOIDwv2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNjo0NjowOVrOIEBAaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgxNTMyMA==", "bodyText": "transformers() method belongs to the TypeInstrumentation interface and I think it's a bit better to focus on them in this particular gotcha. A module just brings everything together.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Subclasses of `InstrumentationModule` will often implement advice classes as static inner classes.\n          \n          \n            \n            Implementations of `TypeInstrumentation` will often implement advice classes as static inner classes.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540815320", "createdAt": "2020-12-11T09:39:22Z", "author": {"login": "mateuszrzeszutek"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes as static inner classes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b52db98873253a2094e5b39c10bc4e3c1cfa9b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgxNjIzOQ==", "bodyText": "It might be useful to mention that it's okay to keep the advice class in the module class or in the package.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r540816239", "createdAt": "2020-12-11T09:40:45Z", "author": {"login": "mateuszrzeszutek"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes as static inner classes.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgxNTMyMA=="}, "originalCommit": {"oid": "84b52db98873253a2094e5b39c10bc4e3c1cfa9b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4MTcwNw==", "bodyText": "Thanks @mateuszrzeszutek I agree that your suggestion is more specific.  Adding it.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1881#discussion_r541081707", "createdAt": "2020-12-11T16:46:09Z", "author": {"login": "breedx-splk"}, "path": "docs/contributing/writing-instrumentation.md", "diffHunk": "@@ -124,3 +124,27 @@ are not legal in Java 7 (and prior) bytecode.\n Because OpenTelemetry API has many common default methods (e.g. `Span.current()`),\n the `javaagent-api` artifact has a class `Java8BytecodeBridge` which provides static methods\n for accessing these default methods from advice.\n+\n+### Why hard code advice class names?\n+\n+Subclasses of `InstrumentationModule` will often implement advice classes as static inner classes.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgxNTMyMA=="}, "originalCommit": {"oid": "84b52db98873253a2094e5b39c10bc4e3c1cfa9b"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4344, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}