{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4Njc4MDc5", "number": 1167, "title": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper", "bodyText": "Fixes #1083\nThe third time's the charm, I hope. This PR contains removal of the ServletoutputStream wrapper according to this comment.\nThis might be not so bad anyway, because according to ServletResponse#getOutputStream() JavaDoc:\n     * Either this method or {@link #getWriter} may \n     * be called to write the body, not both.\n\nso only those implementations that use getOutputStream() will get inaccurate content sizes (always 0), while those using getWriter() will be perfectly fine.", "createdAt": "2020-09-03T14:35:10Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1167", "merged": true, "mergeCommit": {"oid": "79b2ce3a90acc97f99f4d6f9edced4ebeb9703ab"}, "closed": true, "closedAt": "2020-09-09T12:31:06Z", "author": {"login": "mateuszrzeszutek"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFSZPXgBqjM3MjUzNDIxNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHI4APgFqTQ4NDgzMjg2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99eca840b83672452e79ffa9dc42d9d584d56c89", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/99eca840b83672452e79ffa9dc42d9d584d56c89", "committedDate": "2020-09-03T14:06:55Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}, "afterCommit": {"oid": "e48396ce04e13dd9590863627c1589ab8f05b14c", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e48396ce04e13dd9590863627c1589ab8f05b14c", "committedDate": "2020-09-03T15:32:28Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMjI3Njg1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1167#pullrequestreview-482227685", "createdAt": "2020-09-03T21:52:08Z", "commit": {"oid": "e48396ce04e13dd9590863627c1589ab8f05b14c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMTo1MjowOFrOHM4rXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMTo1MjowOFrOHM4rXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI3MzU2NA==", "bodyText": "allowing 0 indicates that the response was not counted. if it's not counted in the tests I wouldn't expect it to be counted elsewhere.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1167#discussion_r483273564", "createdAt": "2020-09-03T21:52:08Z", "author": {"login": "FrankSpitulski"}, "path": "instrumentation/dropwizard-testing/src/test/groovy/DropwizardTest.groovy", "diffHunk": "@@ -122,7 +122,7 @@ class DropwizardTest extends HttpServerTest<DropwizardTestSupport> {\n         \"${SemanticAttributes.HTTP_USER_AGENT.key()}\" TEST_USER_AGENT\n         \"${SemanticAttributes.HTTP_CLIENT_IP.key()}\" TEST_CLIENT_IP\n         // exception bodies are not yet recorded\n-        \"${SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH.key()}\" { it == responseContentLength || /* async */it == null }\n+        \"${SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH.key()}\" { it == 0 || it == responseContentLength || /* async */it == null }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e48396ce04e13dd9590863627c1589ab8f05b14c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e48396ce04e13dd9590863627c1589ab8f05b14c", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e48396ce04e13dd9590863627c1589ab8f05b14c", "committedDate": "2020-09-03T15:32:28Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}, "afterCommit": {"oid": "cd90a0bb7c25ff1a1f3cb92d2480ec4bf1e3e444", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cd90a0bb7c25ff1a1f3cb92d2480ec4bf1e3e444", "committedDate": "2020-09-04T11:24:01Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd90a0bb7c25ff1a1f3cb92d2480ec4bf1e3e444", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cd90a0bb7c25ff1a1f3cb92d2480ec4bf1e3e444", "committedDate": "2020-09-04T11:24:01Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}, "afterCommit": {"oid": "9386e201b6529f0ae1e2e20ce746050b521b9ddd", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9386e201b6529f0ae1e2e20ce746050b521b9ddd", "committedDate": "2020-09-04T11:43:04Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9386e201b6529f0ae1e2e20ce746050b521b9ddd", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9386e201b6529f0ae1e2e20ce746050b521b9ddd", "committedDate": "2020-09-04T11:43:04Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}, "afterCommit": {"oid": "f1b01d9fb924aa8b723557f2ba604401e290209e", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f1b01d9fb924aa8b723557f2ba604401e290209e", "committedDate": "2020-09-09T07:10:31Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5341441b3a943608637d869a7407711541c1eb56", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5341441b3a943608637d869a7407711541c1eb56", "committedDate": "2020-09-09T07:17:42Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1b01d9fb924aa8b723557f2ba604401e290209e", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f1b01d9fb924aa8b723557f2ba604401e290209e", "committedDate": "2020-09-09T07:10:31Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}, "afterCommit": {"oid": "5341441b3a943608637d869a7407711541c1eb56", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5341441b3a943608637d869a7407711541c1eb56", "committedDate": "2020-09-09T07:17:42Z", "message": "Fix Servlet instrumentation for servlet-api 3.1+ - remove output stream wrapper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NzYwMzIz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1167#pullrequestreview-484760323", "createdAt": "2020-09-09T08:07:50Z", "commit": {"oid": "5341441b3a943608637d869a7407711541c1eb56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODMyODYy", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1167#pullrequestreview-484832862", "createdAt": "2020-09-09T09:35:07Z", "commit": {"oid": "5341441b3a943608637d869a7407711541c1eb56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2558, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}