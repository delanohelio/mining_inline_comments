{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MjcyNjc5", "number": 1764, "title": "Enable caching of bytebuddy cache.", "bodyText": "I noticed bytebuddyjava task is never cached, and it seems like rerunning it causes downstream tasks like tests to always run. Allowing it to be cached fixes this - I could confirm that now ./gradlew test ./gradlew clean ./gradlew test is fast, before it reran tests every single time.\nThat being said, I'm a bit nervous of this change since I would expect bytebuddyjava to be deterministic and not affect downstream tasks - @agoallikmaa can you doublecheck there isn't anything else wrong with the task to make sure us caching it won't cause any pollution?", "createdAt": "2020-11-25T08:32:28Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1764", "merged": true, "mergeCommit": {"oid": "6ab51c1194d7edc8b35176ea5d333f581e9142eb"}, "closed": true, "closedAt": "2020-11-26T01:25:28Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf6F4GAH2gAyNTI3MjcyNjc5OmE0ZjdhYjQzMzQxNThhZjQwNjE3MTFlY2Q1Yjk0ZTJhZTUzY2VmOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgH3j1AFqTUzODkyMDkyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a4f7ab4334158af4061711ecd5b94e2ae53cef9d", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a4f7ab4334158af4061711ecd5b94e2ae53cef9d", "committedDate": "2020-11-25T08:29:48Z", "message": "Enable caching of bytebuddy cache."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NDczODE5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1764#pullrequestreview-538473819", "createdAt": "2020-11-25T13:04:36Z", "commit": {"oid": "a4f7ab4334158af4061711ecd5b94e2ae53cef9d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzowNDozNlrOH5yhQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzowNDozNlrOH5yhQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM1ODU5NA==", "bodyText": "It is indeed suspicious. I would assume that better approach would be to have correctly configured inputs and outputs for this task", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1764#discussion_r530358594", "createdAt": "2020-11-25T13:04:36Z", "author": {"login": "iNikem"}, "path": "buildSrc/src/main/java/io/opentelemetry/instrumentation/gradle/bytebuddy/ByteBuddyPluginConfigurator.java", "diffHunk": "@@ -68,6 +68,7 @@ public void configure() {\n   private Task createLanguageTask(AbstractCompile compileTask, String name) {\n     ByteBuddySimpleTask task = project.getTasks().create(name, ByteBuddySimpleTask.class);\n     task.setGroup(\"Byte Buddy\");\n+    task.getOutputs().cacheIf(unused -> true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4f7ab4334158af4061711ecd5b94e2ae53cef9d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c4a3bedd0a3e3c674a2971ac99cf27d22ada4e4", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0c4a3bedd0a3e3c674a2971ac99cf27d22ada4e4", "committedDate": "2020-11-25T13:39:36Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java-instrumentation into cache-bytebuddy-task"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTIwOTIw", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1764#pullrequestreview-538920920", "createdAt": "2020-11-26T00:32:50Z", "commit": {"oid": "0c4a3bedd0a3e3c674a2971ac99cf27d22ada4e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2083, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}