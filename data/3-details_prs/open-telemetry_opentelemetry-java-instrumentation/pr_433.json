{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMzA4Mjg4", "number": 433, "title": "Merge changes from dd-trace-java 0.52.0", "bodyText": "https://github.com/DataDog/dd-trace-java/releases/tag/v0.52.0\nI didn't merge Migrate Hibernate instrumentation from deprecated finishSpanOnClose because those changes didn't seem necessary given #122.", "createdAt": "2020-05-23T18:11:48Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433", "merged": true, "mergeCommit": {"oid": "6c619ab114ad0405b15df548ceef4536bdedbd27"}, "closed": true, "closedAt": "2020-05-26T20:25:05Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckLFUJgBqjMzNjcyOTk4ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclJcmiABqjMzNzQ5NTY4NDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53f7fae25854e3e786d803bfc08cf796db65240a", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/53f7fae25854e3e786d803bfc08cf796db65240a", "committedDate": "2020-05-23T18:08:32Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}, "afterCommit": {"oid": "a8b66fab2b3601a45ff17681b4a9306aa2164dbc", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a8b66fab2b3601a45ff17681b4a9306aa2164dbc", "committedDate": "2020-05-23T18:21:53Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8b66fab2b3601a45ff17681b4a9306aa2164dbc", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a8b66fab2b3601a45ff17681b4a9306aa2164dbc", "committedDate": "2020-05-23T18:21:53Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}, "afterCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3", "committedDate": "2020-05-23T18:49:06Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzI3ODU3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#pullrequestreview-417327857", "createdAt": "2020-05-24T05:25:08Z", "commit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNToyNTowOVrOGZsu3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNTo0MTozNVrOGZsxtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMDQ3Ng==", "bodyText": "Why? What happens otherwise?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r429600476", "createdAt": "2020-05-24T05:25:09Z", "author": {"login": "iNikem"}, "path": "agent-bootstrap/src/main/java/io/opentelemetry/auto/bootstrap/InstrumentationContext.java", "diffHunk": "@@ -28,6 +28,8 @@ private InstrumentationContext() {}\n    * <p>However, the implementation is actually provided by bytecode transformation for performance\n    * reasons.\n    *\n+   * <p>This method must only be called within an Advice class.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMDUzMg==", "bodyText": "Seems unused?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r429600532", "createdAt": "2020-05-24T05:26:13Z", "author": {"login": "iNikem"}, "path": "agent-bootstrap/src/main/java/io/opentelemetry/auto/bootstrap/instrumentation/decorator/HttpServerDecorator.java", "diffHunk": "@@ -22,13 +22,20 @@\n import io.opentelemetry.trace.Status;\n import java.net.URI;\n import java.net.URISyntaxException;\n+import java.util.regex.Pattern;\n import lombok.extern.slf4j.Slf4j;\n \n @Slf4j\n public abstract class HttpServerDecorator<REQUEST, CONNECTION, RESPONSE> extends ServerDecorator {\n   public static final String SPAN_ATTRIBUTE = \"io.opentelemetry.auto.span\";\n+  public static final String RESPONSE_ATTRIBUTE = \"io.opentelemetry.auto.response\";\n   public static final String DEFAULT_SPAN_NAME = \"HTTP request\";\n \n+  // Source: https://www.regextester.com/22\n+  private static final Pattern VALID_IPV4_ADDRESS =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMDY2Mg==", "bodyText": "I don\u2019t think we need these ifs polluting the code", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r429600662", "createdAt": "2020-05-24T05:29:20Z", "author": {"login": "iNikem"}, "path": "agent-tooling/src/main/java/io/opentelemetry/auto/tooling/HelperInjector.java", "diffHunk": "@@ -142,12 +142,14 @@ public static HelperInjector forDynamicTypes(\n             helperModules.add(new WeakReference<>(javaModule.unwrap()));\n           }\n         } catch (final Exception e) {\n-          log.error(\n-              \"Error preparing helpers while processing {} for {}. Failed to inject helper classes into instance {}\",\n-              typeDescription,\n-              requestingName,\n-              classLoader,\n-              e);\n+          if (log.isErrorEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMDczNw==", "bodyText": "First remove, then shuffle", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r429600737", "createdAt": "2020-05-24T05:30:47Z", "author": {"login": "iNikem"}, "path": "buildSrc/src/main/groovy/MuzzlePlugin.groovy", "diffHunk": "@@ -261,6 +270,21 @@ class MuzzlePlugin implements Plugin<Project> {\n     return inverseDirectives\n   }\n \n+  private static void limitLargeRanges(VersionRangeResult result, Set<Version> versions, Set<String> skipVersions) {\n+    List<Version> copy = new ArrayList<>(versions)\n+    Collections.shuffle(copy)\n+    copy.removeAll(skipVersions)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwMTIwNg==", "bodyText": "Shouldn\u2019t instrumentation be called grizzly-http-2.3?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r429601206", "createdAt": "2020-05-24T05:41:35Z", "author": {"login": "iNikem"}, "path": "instrumentation/grizzly-http-2.3.20/grizzly-http-2.3.20.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+apply from: \"${rootDir}/gradle/instrumentation.gradle\"\n+apply plugin: 'org.unbroken-dome.test-sets'\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bea2b6b239a97a73d6f48b4ce98aa621c3f77f3"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTg2MDI4", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#pullrequestreview-417986028", "createdAt": "2020-05-26T05:49:28Z", "commit": {"oid": "19699d792d0ac8f3abe6283d8caf7f66c941586d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzY0OTQ0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#pullrequestreview-418364944", "createdAt": "2020-05-26T14:37:52Z", "commit": {"oid": "58382e2248f1d0f5061f20a6fda05e514af81cf4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozNzo1MlrOGahYYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozNzo1MlrOGahYYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ2MzA3NA==", "bodyText": "Since you still have the version number set in trace-java.gradle, you probably don't need to make this change.  We rely purely on tags now for releases, so that file doesn't change which is why we have to be more careful.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/433#discussion_r430463074", "createdAt": "2020-05-26T14:37:52Z", "author": {"login": "tylerbenson"}, "path": ".circleci/config.yml", "diffHunk": "@@ -44,7 +44,7 @@ jobs:\n             - workspace\n \n       - save_cache:\n-          key: trace-java-{{ checksum \"trace-java.gradle\" }}-{{ .Branch }}-{{ .Revision }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58382e2248f1d0f5061f20a6fda05e514af81cf4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a16b519176cc4f6d9ee6004a7f6fe405e1d554d4", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a16b519176cc4f6d9ee6004a7f6fe405e1d554d4", "committedDate": "2020-05-26T18:54:55Z", "message": "Update gradle to 6.4 (DataDog/dd-trace-java#1443)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bb17e1c3cc0b2db991b3c5d44ee646a01ca90fc", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3bb17e1c3cc0b2db991b3c5d44ee646a01ca90fc", "committedDate": "2020-05-26T18:54:55Z", "message": "Remove deprecated usage from internal instrumentation (DataDog/dd-trace-java#1441)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74d249a2ef3c24c432702afe1700db37c95a916", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f74d249a2ef3c24c432702afe1700db37c95a916", "committedDate": "2020-05-26T18:54:55Z", "message": "Migrate lettuce instrumentation away from deprecated finishSpanOnClose (DataDog/dd-trace-java#1445)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c58d25945940ef3403c1fca29ca33aafbe6f3952", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c58d25945940ef3403c1fca29ca33aafbe6f3952", "committedDate": "2020-05-26T18:54:55Z", "message": "Make Retrys consistent (DataDog/dd-trace-java#1442)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbe1c00ac15ab25730ff1767b8c7b1dd00e3e4d8", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/dbe1c00ac15ab25730ff1767b8c7b1dd00e3e4d8", "committedDate": "2020-05-26T18:54:56Z", "message": "Adding an option to manually disable Kafka headers (DataDog/dd-trace-java#1448)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0e19d6a83fea47db37f63be034ce54b67618a38", "author": {"user": {"login": "devinsba", "name": "Brian Devins-Suresh"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f0e19d6a83fea47db37f63be034ce54b67618a38", "committedDate": "2020-05-26T18:54:56Z", "message": "Rename java packages for lettuce 4 and 5 to not have collisions (DataDog/dd-trace-java#1450)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67219faf253878bee7bb532a74cefd5998698a6f", "author": {"user": {"login": "devinsba", "name": "Brian Devins-Suresh"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/67219faf253878bee7bb532a74cefd5998698a6f", "committedDate": "2020-05-26T18:54:56Z", "message": "Add version specific names to allow disabling only a specific version (DataDog/dd-trace-java#1456)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ae5434d59003902b4e33eca5688493e77d112e", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/77ae5434d59003902b4e33eca5688493e77d112e", "committedDate": "2020-05-26T18:54:57Z", "message": "Attempt to improve muzzle time by randomly ignoring versions until 10 remain (DataDog/dd-trace-java#1451)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec0c313a78407572c269415c514187b64ed32745", "author": {"user": {"login": "devinsba", "name": "Brian Devins-Suresh"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ec0c313a78407572c269415c514187b64ed32745", "committedDate": "2020-05-26T18:54:57Z", "message": "Save circle cache with name matching restore patterns (DataDog/dd-trace-java#1457)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebebbc7daec9a7fd78f54c8387b1a09ced30c267", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ebebbc7daec9a7fd78f54c8387b1a09ced30c267", "committedDate": "2020-05-26T18:54:57Z", "message": "Wrap log statements using varargs to avoid object allocation (DataDog/dd-trace-java#1466)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c9639fbbe804f6d4d5a83065cc4ca546b8211d", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d8c9639fbbe804f6d4d5a83065cc4ca546b8211d", "committedDate": "2020-05-26T18:54:59Z", "message": "Grizzly-http and grizzly-client instrumentation (DataDog/dd-trace-java#1365)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7ac69ee146a14fcee87c51b48e464e0fb916609", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b7ac69ee146a14fcee87c51b48e464e0fb916609", "committedDate": "2020-05-26T18:54:59Z", "message": "More refactoring for ScopeManager (DataDog/dd-trace-java#1467)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b6536e31c1225b06dfe6f31cbebecb8b3983d48", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/8b6536e31c1225b06dfe6f31cbebecb8b3983d48", "committedDate": "2020-05-26T18:54:59Z", "message": "Remove Java 9 and 10 from the build (DataDog/dd-trace-java#1473)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a6ea807ea7e5048b4647e152011b1b5a71597f1", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6a6ea807ea7e5048b4647e152011b1b5a71597f1", "committedDate": "2020-05-26T18:55:00Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e77abc835bf207da0ef03fb5e07db90d0304f56", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1e77abc835bf207da0ef03fb5e07db90d0304f56", "committedDate": "2020-05-26T18:40:39Z", "message": "fixup! fixup! fixup! Grizzly-http and grizzly-client instrumentation (DataDog/dd-trace-java#1365)"}, "afterCommit": {"oid": "6a6ea807ea7e5048b4647e152011b1b5a71597f1", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6a6ea807ea7e5048b4647e152011b1b5a71597f1", "committedDate": "2020-05-26T18:55:00Z", "message": "Disable CI cache for muzzle (DataDog/dd-trace-java#1479)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3180, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}