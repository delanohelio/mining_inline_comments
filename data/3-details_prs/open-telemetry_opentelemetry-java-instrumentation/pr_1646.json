{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNzA5Mzk4", "number": 1646, "title": "Prevent bootstrap classes from being included into agent classloader", "bodyText": "Fixes #1547", "createdAt": "2020-11-16T14:45:18Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646", "merged": true, "mergeCommit": {"oid": "a446d7ea2238b5426d3e7a5162068baab9800937"}, "closed": true, "closedAt": "2020-11-17T21:31:42Z", "author": {"login": "iNikem"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddGD35AH2gAyNTIxNzA5Mzk4OjlhYzczYjA0OTM3NWZlZmQ4MjkwZmQ2NDE5ODkwMGIzYzliZjNmNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddgem7AFqTUzMjgyOTMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9ac73b049375fefd8290fd64198900b3c9bf3f6c", "committedDate": "2020-11-16T14:44:42Z", "message": "Prevent bootstrap classes from being included into agent classloader"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNDAzOTg5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#pullrequestreview-531403989", "createdAt": "2020-11-16T15:02:50Z", "commit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODE2Njgx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#pullrequestreview-531816681", "createdAt": "2020-11-16T21:51:14Z", "commit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMTo1MToxNFrOH0VCjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMTo1MToxNFrOH0VCjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYzMjcxNw==", "bodyText": "seems better (generally at least) to exclude at dependency level, can be done below:\n  dependencies {\n    exclude(project(':instrumentation-api'))\n    exclude(project(':javaagent-api'))\n    exclude(project(':javaagent-bootstrap'))\n  }", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#discussion_r524632717", "createdAt": "2020-11-16T21:51:14Z", "author": {"login": "trask"}, "path": "instrumentation/instrumentation.gradle", "diffHunk": "@@ -53,6 +50,9 @@ shadowJar {\n   mergeServiceFiles()\n \n   exclude '**/module-info.class'\n+  //These classes are added to bootstrap classloader by javaagent module\n+  exclude 'io/opentelemetry/instrumentation/api/**/*.*'\n+  exclude 'io/opentelemetry/javaagent/instrumentation/api/**/*.*'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMDMzNDg3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#pullrequestreview-532033487", "createdAt": "2020-11-17T05:34:22Z", "commit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNTozNDoyMlrOH0lA1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNTozNDoyMlrOH0lA1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg5NDQyMg==", "bodyText": "Should this also be compileOnly?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#discussion_r524894422", "createdAt": "2020-11-17T05:34:22Z", "author": {"login": "anuraaga"}, "path": "instrumentation/instrumentation.gradle", "diffHunk": "@@ -34,16 +34,13 @@ subprojects {\n }\n \n dependencies {\n-  implementation project(':instrumentation-api')\n-  implementation project(':javaagent-api')\n-  implementation(project(':javaagent-tooling')) {\n-    exclude module: ':javaagent-bootstrap'\n-  }\n+  compileOnly project(':instrumentation-api')\n+  compileOnly project(':javaagent-api')\n+  implementation(project(':javaagent-tooling'))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ac73b049375fefd8290fd64198900b3c9bf3f6c"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df0b21066daa01192f52251a6b41940a360b4c46", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/df0b21066daa01192f52251a6b41940a360b4c46", "committedDate": "2020-11-17T15:25:10Z", "message": "Better exclusion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyODI5MzIz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1646#pullrequestreview-532829323", "createdAt": "2020-11-17T21:31:26Z", "commit": {"oid": "df0b21066daa01192f52251a6b41940a360b4c46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2250, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}