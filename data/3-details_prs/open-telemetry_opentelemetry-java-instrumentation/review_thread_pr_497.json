{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMzE1MDg5", "number": 497, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0MToxN1rOEE167w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1NTowNlrOEE5fvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTEzMTk5OnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0MToxN1rOGiuD6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0MToxN1rOGiuD6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA1OTQzMw==", "bodyText": "I'd suggest supporting Java 8+, unless there's a specific reason to only support Java 11+\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sourceCompatibility = '11'\n          \n          \n            \n            sourceCompatibility = '8'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439059433", "createdAt": "2020-06-11T20:41:17Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '11'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTE0Mjg5OnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0NTowOFrOGiuKqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0NTowOFrOGiuKqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2MTE2Mg==", "bodyText": "0.5.0 is the latest version, I'd suggest using\napply from: \"$rootDir/gradle/java.gradle\"\n\nat the top of the gradle file, and then you can use\ncompile deps.opentelemetryApi\ncompile deps.opentelemetrySdk", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439061162", "createdAt": "2020-06-11T20:45:08Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '11'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n+\timplementation 'org.springframework.boot:spring-boot-starter-web'\n+\tcompileOnly 'org.projectlombok:lombok'\n+\tannotationProcessor 'org.projectlombok:lombok'\n+\ttestImplementation('org.springframework.boot:spring-boot-starter-test') {\n+\t\texclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n+\t}\n+\tcompile \"io.opentelemetry:opentelemetry-api:0.4.0\"\n+\tcompile \"io.opentelemetry:opentelemetry-sdk:0.4.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTE1MTEyOnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/settings.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0ODowOFrOGiuQAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0ODowOFrOGiuQAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2MjUyOA==", "bodyText": "instead of making this a root project, let's add this new module to the existing root project", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439062528", "createdAt": "2020-06-11T20:48:08Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/settings.gradle", "diffHunk": "@@ -0,0 +1 @@\n+rootProject.name = 'spring'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTYwNjg3OnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDowNTo0NFrOGiypCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDowNTo0NFrOGiypCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNDQ3NA==", "bodyText": "I'm sure things will get sorted out as the code gets in but one thought is that most dependencies should be compileOnly since spring boot starters actually enable features in a user's app. Instead, the general design should be recognizing when a user app is using a feature and instrumenting only those. @ConditionalOnClass tends to be very important for it :)\nI guess this project will be similar to sleuth (maybe it could use it too? not sure). So will be a good reference point I think https://github.com/spring-cloud/spring-cloud-sleuth/tree/master/spring-cloud-sleuth-core", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439134474", "createdAt": "2020-06-12T00:05:44Z", "author": {"login": "anuraaga"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9e6e06700c0d07b9fbfb2b660e6e495a411f064"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTYxMzExOnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/src/main/java/io/opentelemetry/contrib/spring/Application.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDowNzo0OVrOGiys6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDoxMDowMlrOGiyxlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNTQ2NA==", "bodyText": "@trask Is this the right package? The other instrumentation in instrumentation-core doesn't use the word contrib. If this is something separate from \"official instrumentation\", then we may need a contrib folder as well to group them together. But I guess this could just be instrumentation?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439135464", "createdAt": "2020-06-12T00:07:49Z", "author": {"login": "anuraaga"}, "path": "instrumentation-core/spring/src/main/java/io/opentelemetry/contrib/spring/Application.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package io.opentelemetry.contrib.spring;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9e6e06700c0d07b9fbfb2b660e6e495a411f064"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNjY2Mg==", "bodyText": "\ud83d\udc4d we aren't using the contrib terminology for things in this repo", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439136662", "createdAt": "2020-06-12T00:10:02Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/src/main/java/io/opentelemetry/contrib/spring/Application.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package io.opentelemetry.contrib.spring;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNTQ2NA=="}, "originalCommit": {"oid": "a9e6e06700c0d07b9fbfb2b660e6e495a411f064"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTcwOTMzOnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1MDowNFrOGizndA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1MDowNFrOGizndA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MDQ1Mg==", "bodyText": "I don't think you need this now that you are applying the common \"java.gradle\" above\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            repositories {\n          \n          \n            \n            \tmavenCentral()\n          \n          \n            \n            }", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439150452", "createdAt": "2020-06-12T00:50:04Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTcxMjQ4OnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1MTo0MVrOGizpNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1MTo0MVrOGizpNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MDkwMw==", "bodyText": "I think you get this now from \"java.gradle\" also\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tcompileOnly 'org.projectlombok:lombok'\n          \n          \n            \n            \tannotationProcessor 'org.projectlombok:lombok'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439150903", "createdAt": "2020-06-12T00:51:41Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n+\timplementation 'org.springframework.boot:spring-boot-starter-web'\n+\tcompileOnly 'org.projectlombok:lombok'\n+\tannotationProcessor 'org.projectlombok:lombok'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTcxNzc0OnYy", "diffSide": "RIGHT", "path": "instrumentation-core/spring/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1NTowNlrOGizsYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMDo1OToyMlrOGizw1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MTcxNA==", "bodyText": "is this for lombok? maybe u don't need this anymore also with \"java.gradle\" above", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439151714", "createdAt": "2020-06-12T00:55:06Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1Mjg1NA==", "bodyText": "Yes, it's just for lombok. I'll remove it now.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439152854", "createdAt": "2020-06-12T00:59:22Z", "author": {"login": "mabdinur"}, "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MTcxNA=="}, "originalCommit": {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 497, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}