{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjg5NTAz", "number": 878, "title": "clean up spring dependencies", "bodyText": "Apply gradle/instrumentation-library.gradle to spring library instrumentation\nChange spring api/implementation dependencies to compileOnly\nExclude org.slf4j.slf4j-simple from agent-bootstrap (agent-bootstrap exposes sl4j-simple artifact and this can conflict with loggers in a user's application)\n\nNext steps will include:\n\nfollowing the instructions in writing-instrumentation to move library instrumentation from instrumentation-core to instrumentation/..../library", "createdAt": "2020-08-03T16:56:51Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878", "merged": true, "mergeCommit": {"oid": "906d80be12359cf85bf8b64e481b02dc31ade592"}, "closed": true, "closedAt": "2020-08-04T02:07:37Z", "author": {"login": "mabdinur"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7VOcmAFqTQ2MDE5NjkwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7bzwdgFqTQ2MDQyNjM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTk2OTA0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#pullrequestreview-460196904", "createdAt": "2020-08-03T17:11:23Z", "commit": {"oid": "d2ea1c44d7c55e514b2b6defc428113b8b6bd7ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNzoxMToyM1rOG7Brvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNzoxMToyM1rOG7Brvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0Njc1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n              api deps.opentelemetrySdk\n          \n      \n    \n    \n  \n\n@trask Would it make sense to add this dependency or do we leave it up to users add the sdk dependency?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#discussion_r464546751", "createdAt": "2020-08-03T17:11:23Z", "author": {"login": "mabdinur"}, "path": "gradle/instrumentation-library.gradle", "diffHunk": "@@ -15,7 +15,9 @@ dependencies {\n   // TODO(anuraaga): We currently include common instrumentation logic like decorators in the\n   // bootstrap, but we need to move it out so manual instrumentation does not depend on code from\n   // the agent, like Agent.\n-  api project(':auto-bootstrap')\n+  api project(':auto-bootstrap'){\n+    exclude group: 'org.slf4j', module: 'slf4j-simple'\n+  }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2ea1c44d7c55e514b2b6defc428113b8b6bd7ca"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "521629ffa318a8846fe94e45d7cc9883fb8ce164", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/521629ffa318a8846fe94e45d7cc9883fb8ce164", "committedDate": "2020-08-03T19:39:32Z", "message": "clean up spring dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d9c934e8c748d8afcd3a0629ef6d60a894b6e62", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/8d9c934e8c748d8afcd3a0629ef6d60a894b6e62", "committedDate": "2020-08-03T19:57:47Z", "message": "remove duplicate plugins"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2ea1c44d7c55e514b2b6defc428113b8b6bd7ca", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d2ea1c44d7c55e514b2b6defc428113b8b6bd7ca", "committedDate": "2020-08-03T16:50:54Z", "message": "clean up spring dependencies"}, "afterCommit": {"oid": "8d9c934e8c748d8afcd3a0629ef6d60a894b6e62", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/8d9c934e8c748d8afcd3a0629ef6d60a894b6e62", "committedDate": "2020-08-03T19:57:47Z", "message": "remove duplicate plugins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6a1f372acdc568924ee39e5ecc19070f46d158b", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e6a1f372acdc568924ee39e5ecc19070f46d158b", "committedDate": "2020-08-03T20:06:00Z", "message": "cleanup servlet gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ac2e79f62534e5f31e542653f8d770900c2d5bc", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2ac2e79f62534e5f31e542653f8d770900c2d5bc", "committedDate": "2020-08-03T20:12:37Z", "message": "fix exclude"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6421aaae9022f118a1dc12f9b8125073402d6a16", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6421aaae9022f118a1dc12f9b8125073402d6a16", "committedDate": "2020-08-03T20:55:46Z", "message": "add missing dependency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzUyOTk5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#pullrequestreview-460352999", "createdAt": "2020-08-03T21:28:17Z", "commit": {"oid": "6421aaae9022f118a1dc12f9b8125073402d6a16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMToyODoxN1rOG7JUPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMToyODoxN1rOG7JUPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY3MTgwNQ==", "bodyText": "i think the shadow jar is only for use by the corresponding auto-instrumentation modules, so i think we don't want to publish the shadow jar for anything under :instrumentation-core\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              noShadowPublish = false", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#discussion_r464671805", "createdAt": "2020-08-03T21:28:17Z", "author": {"login": "trask"}, "path": "instrumentation-core/servlet/servlet.gradle", "diffHunk": "@@ -1,14 +1,11 @@\n-group = 'io.opentelemetry.instrumentation'\n-\n-apply from: \"$rootDir/gradle/java.gradle\"\n-apply from: \"$rootDir/gradle/publish.gradle\"\n+ext {\n+  noShadowPublish = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6421aaae9022f118a1dc12f9b8125073402d6a16"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37796cc93b927bd360e1ac63a54f0907bcc00a49", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/37796cc93b927bd360e1ac63a54f0907bcc00a49", "committedDate": "2020-08-03T22:02:26Z", "message": "fix gradle publish"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09b33946d9fa9b896297bc8aeaa2159b553fc33f", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/09b33946d9fa9b896297bc8aeaa2159b553fc33f", "committedDate": "2020-08-03T21:34:56Z", "message": "Update spring-webmvc-3.1.gradle"}, "afterCommit": {"oid": "37796cc93b927bd360e1ac63a54f0907bcc00a49", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/37796cc93b927bd360e1ac63a54f0907bcc00a49", "committedDate": "2020-08-03T22:02:26Z", "message": "fix gradle publish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c44c408fc0066526d51e56bdcee7c7190c596f6", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7c44c408fc0066526d51e56bdcee7c7190c596f6", "committedDate": "2020-08-03T22:06:47Z", "message": "Update spring-web-3.1.gradle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzg1Nzky", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#pullrequestreview-460385792", "createdAt": "2020-08-03T22:42:47Z", "commit": {"oid": "7c44c408fc0066526d51e56bdcee7c7190c596f6"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMjo0Mjo0N1rOG7LBLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMjo1MjozOFrOG7LNfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY5OTY5NQ==", "bodyText": "this is used by servlet auto-instrumentation. and i think you'll also need to update those auto-instrumentation to use configuration: 'shadow', and use shaded package name\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              javaSubPackage = ''\n          \n          \n            \n              javaSubPackage = 'servlet'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#discussion_r464699695", "createdAt": "2020-08-03T22:42:47Z", "author": {"login": "trask"}, "path": "instrumentation-core/servlet/servlet.gradle", "diffHunk": "@@ -1,14 +1,10 @@\n-group = 'io.opentelemetry.instrumentation'\n-\n-apply from: \"$rootDir/gradle/java.gradle\"\n-apply from: \"$rootDir/gradle/publish.gradle\"\n+ext {\n+  javaSubPackage = ''", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c44c408fc0066526d51e56bdcee7c7190c596f6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcwMjc3MQ==", "bodyText": "maybe something more explicit which disables the shadowJar task in instrumentation-library.gradle, e.g.\nwe could also have lack of javaSubPackage disable the shadowJar task, but don't want people to accidentally forget about shading these dependencies for auto-instrumentation, so think maybe this is safer\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ext {\n          \n          \n            \n              javaSubPackage = ''\n          \n          \n            \n            }\n          \n          \n            \n              noShadow = true", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#discussion_r464702771", "createdAt": "2020-08-03T22:52:24Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/spring-web-3.1/spring-web-3.1.gradle", "diffHunk": "@@ -1,25 +1,9 @@\n-group = 'io.opentelemetry.instrumentation'\n+ext {\n+  javaSubPackage = ''\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c44c408fc0066526d51e56bdcee7c7190c596f6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcwMjg0NA==", "bodyText": "same comment as above", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#discussion_r464702844", "createdAt": "2020-08-03T22:52:38Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/spring-webmvc-3.1/spring-webmvc-3.1.gradle", "diffHunk": "@@ -1,24 +1,12 @@\n-group = 'io.opentelemetry.instrumentation'\n-\n-apply from: \"$rootDir/gradle/java.gradle\"\n-apply from: \"$rootDir/gradle/publish.gradle\"\n+ext {\n+  javaSubPackage = ''\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c44c408fc0066526d51e56bdcee7c7190c596f6"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc73e9402a97f47b3be5fb9583633955b08cbe5f", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cc73e9402a97f47b3be5fb9583633955b08cbe5f", "committedDate": "2020-08-03T23:02:27Z", "message": "Update instrumentation-core/servlet/servlet.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eaf2727b3b92e839c87c9904bec7f1fb693b0de", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9eaf2727b3b92e839c87c9904bec7f1fb693b0de", "committedDate": "2020-08-03T23:03:31Z", "message": "Update instrumentation-core/spring/spring-web-3.1/spring-web-3.1.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6742f2fcfe8bdb7b11ffedc16c47aeb62e61aa19", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6742f2fcfe8bdb7b11ffedc16c47aeb62e61aa19", "committedDate": "2020-08-03T23:03:59Z", "message": "Update spring-webmvc-3.1.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84701e2f19c59f010b8739f14cc886f18920c880", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/84701e2f19c59f010b8739f14cc886f18920c880", "committedDate": "2020-08-03T23:08:03Z", "message": "update grpc dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b3c78cb962ad058c6e506493c88b97d63bcb937", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1b3c78cb962ad058c6e506493c88b97d63bcb937", "committedDate": "2020-08-03T23:34:41Z", "message": "fix noshawdow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adf33ad5e30c6b49c829afdac5ab05c81bbb19c5", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/adf33ad5e30c6b49c829afdac5ab05c81bbb19c5", "committedDate": "2020-08-04T00:11:51Z", "message": "noshawdow check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "241d7d1c8b4168f7b063b3fa715a35dbb9edc891", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/241d7d1c8b4168f7b063b3fa715a35dbb9edc891", "committedDate": "2020-08-04T00:13:17Z", "message": "Update spring-boot-autoconfigure.gradle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDI2MzUy", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/878#pullrequestreview-460426352", "createdAt": "2020-08-04T00:51:35Z", "commit": {"oid": "241d7d1c8b4168f7b063b3fa715a35dbb9edc891"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2921, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}