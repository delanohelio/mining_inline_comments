{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NTU3NzE2", "number": 701, "title": "Remove http server decorator", "bodyText": "Last subclasses of HttpServerDecorator are gone. These instrumentation used it, but in fact produced INTERNAL spans. This PR removes from them those semantic attributes which belongs to SERVER spans as was briefly discussed on Gitter.", "createdAt": "2020-07-15T15:27:25Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701", "merged": true, "mergeCommit": {"oid": "9b6b5e621ff9df01d497fa2ee4e515240d12f9d8"}, "closed": true, "closedAt": "2020-07-17T17:14:20Z", "author": {"login": "iNikem"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1JVfKgH2gAyNDQ5NTU3NzE2OjljYmRjZmZmNWI1NDVhZTg0YWZkYWY3OTFlMzBkNzg3ZmM3ZGUyM2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc12wrtgFqTQ1MDgxMjAxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9cbdcfff5b545ae84afdaf791e30d787fc7de23c", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9cbdcfff5b545ae84afdaf791e30d787fc7de23c", "committedDate": "2020-07-15T11:56:41Z", "message": "Ratpack migrated from ServerDecorator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "109ded71f0c47c90bc5d4818075e7a2ccef90a96", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/109ded71f0c47c90bc5d4818075e7a2ccef90a96", "committedDate": "2020-07-15T12:17:15Z", "message": "Finatra migrated from ServerDecorator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0333d60b0224f790843c1ba5a15e9be2f26c6da", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b0333d60b0224f790843c1ba5a15e9be2f26c6da", "committedDate": "2020-07-15T12:29:05Z", "message": "Play 2.3 migrated from ServerDecorator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b452ac2705ec4bc072b7efa49e658de508f79193", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b452ac2705ec4bc072b7efa49e658de508f79193", "committedDate": "2020-07-15T12:44:44Z", "message": "Play 2.4 migrated from ServerDecorator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56eb2a222b1d2984f6e300f0a19261b3729f9d81", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/56eb2a222b1d2984f6e300f0a19261b3729f9d81", "committedDate": "2020-07-15T12:58:59Z", "message": "Play 2.6 migrated from ServerDecorator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f69b6527fff6483dd8e0b56566dbb3067272ebb0", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f69b6527fff6483dd8e0b56566dbb3067272ebb0", "committedDate": "2020-07-15T15:21:28Z", "message": "Polish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d207ac3463ca3d564dc84772be8ffc45f01e2d93", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d207ac3463ca3d564dc84772be8ffc45f01e2d93", "committedDate": "2020-07-15T18:37:10Z", "message": "Polish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d3037a65048f6b2f5e2edd120bac81cde22961", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/27d3037a65048f6b2f5e2edd120bac81cde22961", "committedDate": "2020-07-15T19:07:36Z", "message": "Organize imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/75256e235b2f47bac95b87e60bdc191249330cd4", "committedDate": "2020-07-16T09:09:51Z", "message": "Relax muzzle checks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NjY1Njc2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#pullrequestreview-449665676", "createdAt": "2020-07-16T09:13:26Z", "commit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjgzMzQ0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#pullrequestreview-450283344", "createdAt": "2020-07-16T23:33:03Z", "commit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMzozOToyNlrOGzAY2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMzo1MjoxOVrOGzAoyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEzNjkyMw==", "bodyText": "I agree with your TODO, delete \ud83d\ude04\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (!TRACER.getCurrentSpan().getContext().isValid()) {\n          \n          \n            \n                  // TODO should we do that for INTERNAL span?\n          \n          \n            \n                  final SpanContext extractedContext = extract(req.headers(), GETTER);\n          \n          \n            \n                  if (extractedContext.isValid()) {\n          \n          \n            \n                    spanBuilder.setParent(extractedContext);\n          \n          \n            \n                  }", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#discussion_r456136923", "createdAt": "2020-07-16T23:39:26Z", "author": {"login": "trask"}, "path": "instrumentation/play/play-2.3/src/main/java/io/opentelemetry/auto/instrumentation/play/v2_3/PlayAdvice.java", "diffHunk": "@@ -37,17 +36,17 @@\n   public static SpanWithScope onEnter(@Advice.Argument(0) final Request req) {\n     final Span.Builder spanBuilder = TRACER.spanBuilder(\"play.request\");\n     if (!TRACER.getCurrentSpan().getContext().isValid()) {\n+      // TODO should we do that for INTERNAL span?\n       final SpanContext extractedContext = extract(req.headers(), GETTER);\n       if (extractedContext.isValid()) {\n         spanBuilder.setParent(extractedContext);\n       }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEzNzMxMw==", "bodyText": "and delete\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // An upstream framework (e.g. akka-http, netty) has already started the span.\n          \n          \n            \n                // Do not extract the context.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#discussion_r456137313", "createdAt": "2020-07-16T23:40:37Z", "author": {"login": "trask"}, "path": "instrumentation/play/play-2.3/src/main/java/io/opentelemetry/auto/instrumentation/play/v2_3/PlayAdvice.java", "diffHunk": "@@ -37,17 +36,17 @@\n   public static SpanWithScope onEnter(@Advice.Argument(0) final Request req) {\n     final Span.Builder spanBuilder = TRACER.spanBuilder(\"play.request\");\n     if (!TRACER.getCurrentSpan().getContext().isValid()) {\n+      // TODO should we do that for INTERNAL span?\n       final SpanContext extractedContext = extract(req.headers(), GETTER);\n       if (extractedContext.isValid()) {\n         spanBuilder.setParent(extractedContext);\n       }\n-    } else {\n-      // An upstream framework (e.g. akka-http, netty) has already started the span.\n-      // Do not extract the context.\n     }\n+    // An upstream framework (e.g. akka-http, netty) has already started the span.\n+    // Do not extract the context.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEzOTIyMg==", "bodyText": "delete !isValid condition above, and delete this comment \u26a1\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // An upstream framework (e.g. akka-http, netty) has already started the span.\n          \n          \n            \n                // Do not extract the context.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#discussion_r456139222", "createdAt": "2020-07-16T23:46:49Z", "author": {"login": "trask"}, "path": "instrumentation/play/play-2.4/src/main/java/io/opentelemetry/auto/instrumentation/play/v2_4/PlayAdvice.java", "diffHunk": "@@ -40,13 +40,11 @@ public static SpanWithScope onEnter(@Advice.Argument(0) final Request req) {\n       if (extractedContext.isValid()) {\n         spanBuilder.setParent(extractedContext);\n       }\n-    } else {\n-      // An upstream framework (e.g. akka-http, netty) has already started the span.\n-      // Do not extract the context.\n     }\n+    // An upstream framework (e.g. akka-http, netty) has already started the span.\n+    // Do not extract the context.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEzOTgwMA==", "bodyText": "and again, let's delete condition above, and this comment \ud83d\udc4d\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // An upstream framework (e.g. akka-http, netty) has already started the span.\n          \n          \n            \n                // Do not extract the context.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#discussion_r456139800", "createdAt": "2020-07-16T23:48:54Z", "author": {"login": "trask"}, "path": "instrumentation/play/play-2.6/src/main/java/io/opentelemetry/auto/instrumentation/play/v2_6/PlayAdvice.java", "diffHunk": "@@ -40,13 +40,12 @@ public static SpanWithScope onEnter(@Advice.Argument(0) final Request req) {\n       if (extractedContext.isValid()) {\n         spanBuilder.setParent(extractedContext);\n       }\n-    } else {\n-      // An upstream framework (e.g. akka-http, netty) has already started the span.\n-      // Do not extract the context.\n     }\n+    // An upstream framework (e.g. akka-http, netty) has already started the span.\n+    // Do not extract the context.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0MTAwMA==", "bodyText": "Can you check your Intellij import settings for groovy?\n\nWith java use the following import layout (groovy should still use the default)\n\nhttps://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/master/CONTRIBUTING.md#intellij-idea", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#discussion_r456141000", "createdAt": "2020-07-16T23:52:19Z", "author": {"login": "trask"}, "path": "testing/src/main/groovy/io/opentelemetry/auto/test/utils/ConfigUtils.groovy", "diffHunk": "@@ -17,10 +17,9 @@\n package io.opentelemetry.auto.test.utils\n \n import io.opentelemetry.auto.config.Config\n-import lombok.SneakyThrows\n-\n import java.lang.reflect.Modifier\n import java.util.concurrent.Callable\n+import lombok.SneakyThrows", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75256e235b2f47bac95b87e60bdc191249330cd4"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29319b1e60d372a93d7832b956f80c46183e90e", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a29319b1e60d372a93d7832b956f80c46183e90e", "committedDate": "2020-07-17T05:46:59Z", "message": "Ratpack version 1.4 is now supported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f773023b57e95c7faee34d829f21bc35a84d00e", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/8f773023b57e95c7faee34d829f21bc35a84d00e", "committedDate": "2020-07-17T07:31:50Z", "message": "Fix muzzle failures on Play"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODEyMDEz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/701#pullrequestreview-450812013", "createdAt": "2020-07-17T16:52:07Z", "commit": {"oid": "8f773023b57e95c7faee34d829f21bc35a84d00e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3117, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}