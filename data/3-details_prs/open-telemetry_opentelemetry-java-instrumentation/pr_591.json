{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwOTg3Nzk0", "number": 591, "title": "Fix khttp sporadic test failure", "bodyText": "Closes #518 \ud83e\udd1e", "createdAt": "2020-06-28T02:05:47Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/591", "merged": true, "mergeCommit": {"oid": "1411c38ba46170fc12ddba72cd9729ea5b661721"}, "closed": true, "closedAt": "2020-06-28T19:08:07Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcviq3dgH2gAyNDQwOTg3Nzk0Ojk0ZDkxMTI5YjYxMzQ3M2U5NmU3YzliOWNlNWI1YjY5NDdmYWExZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvnqyEgFqTQzODc1NDI5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94d91129b613473e96e7c9b9ce5b5b6947faa1d7", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/94d91129b613473e96e7c9b9ce5b5b6947faa1d7", "committedDate": "2020-06-28T02:04:07Z", "message": "Fix khttp sporadic test failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzM3NTkx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/591#pullrequestreview-438737591", "createdAt": "2020-06-28T02:26:28Z", "commit": {"oid": "94d91129b613473e96e7c9b9ce5b5b6947faa1d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwMjoyNjoyOFrOGp5u_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwMjoyNjoyOFrOGp5u_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5MDcxNw==", "bodyText": "If I'm not mistaken the timeout for khttp is seconds so now we're setting it to 2000s - yeah that'll keep the flakes out ;) But probably meant to convert to secs.\nAlso if the value isn't ever used in assertions, perhaps can only have one timeout in the base class since it's not such a big deal for us to distinguish them when executing requests in tests.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/591#discussion_r446590717", "createdAt": "2020-06-28T02:26:28Z", "author": {"login": "anuraaga"}, "path": "instrumentation/khttp-0.1/src/test/groovy/KHttpClientTest.groovy", "diffHunk": "@@ -21,7 +21,9 @@ class KHttpClientTest extends HttpClientTest {\n \n   @Override\n   int doRequest(String method, URI uri, Map<String, String> headers, Closure callback) {\n-    def response = KHttp.request(method, uri.toString(), headers, Collections.emptyMap(), null, null, null, null, 1)\n+    // khttp applies the same timeout for both connect and read\n+    def timeout = Math.max(CONNECT_TIMEOUT_MS, READ_TIMEOUT_MS)\n+    def response = KHttp.request(method, uri.toString(), headers, Collections.emptyMap(), null, null, null, null, timeout)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94d91129b613473e96e7c9b9ce5b5b6947faa1d7"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d49eb3a8e4e95436aa6bcecf61de5903801e11eb", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d49eb3a8e4e95436aa6bcecf61de5903801e11eb", "committedDate": "2020-06-28T03:01:58Z", "message": "Use correct time unit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzQwMzMx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/591#pullrequestreview-438740331", "createdAt": "2020-06-28T03:31:23Z", "commit": {"oid": "d49eb3a8e4e95436aa6bcecf61de5903801e11eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7976128dd95d95e1b24b191b98135f28e3d33ca", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a7976128dd95d95e1b24b191b98135f28e3d33ca", "committedDate": "2020-06-28T06:17:20Z", "message": "Merge branch 'master' into fix-sporadic-test-failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzU0Mjk1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/591#pullrequestreview-438754295", "createdAt": "2020-06-28T07:53:33Z", "commit": {"oid": "a7976128dd95d95e1b24b191b98135f28e3d33ca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3011, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}