{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzkzMDI2", "number": 102, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMjoxM1rODbrFPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMjozMlrODbrFqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQzOTk4OnYy", "diffSide": "RIGHT", "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/ChannelFutureListenerInstrumentation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMjoxM1rOFjSwGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODo0OTo0OFrOFjTmhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTcwNg==", "bodyText": "static import?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/102#discussion_r372551706", "createdAt": "2020-01-29T18:22:13Z", "author": {"login": "tylerbenson"}, "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/ChannelFutureListenerInstrumentation.java", "diffHunk": "@@ -84,25 +82,27 @@ public static AgentScope activateScope(@Advice.Argument(0) final ChannelFuture f\n       if (cause == null) {\n         return null;\n       }\n-      final AgentSpan parentSpan =\n+      final Span parentSpan =\n           future.channel().attr(AttributeKeys.PARENT_CONNECT_SPAN_ATTRIBUTE_KEY).getAndRemove();\n       if (parentSpan == null) {\n         return null;\n       }\n-      final AgentScope parentScope = activateSpan(parentSpan, false);\n+      final Scope parentScope = NettyHttpServerDecorator.TRACER.withSpan(parentSpan);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1afad22a9a072ea5ed75abd2ab98fcfb1fad7429"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU2NTYzNg==", "bodyText": "i was following similar import for DECORATE below, i was thinking maybe this was intentional here since it was not obvious in this file which would be used (NettyHttpServerDecorator or NettyHttpClientDecorator)", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/102#discussion_r372565636", "createdAt": "2020-01-29T18:49:48Z", "author": {"login": "trask"}, "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/ChannelFutureListenerInstrumentation.java", "diffHunk": "@@ -84,25 +82,27 @@ public static AgentScope activateScope(@Advice.Argument(0) final ChannelFuture f\n       if (cause == null) {\n         return null;\n       }\n-      final AgentSpan parentSpan =\n+      final Span parentSpan =\n           future.channel().attr(AttributeKeys.PARENT_CONNECT_SPAN_ATTRIBUTE_KEY).getAndRemove();\n       if (parentSpan == null) {\n         return null;\n       }\n-      final AgentScope parentScope = activateSpan(parentSpan, false);\n+      final Scope parentScope = NettyHttpServerDecorator.TRACER.withSpan(parentSpan);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTcwNg=="}, "originalCommit": {"oid": "1afad22a9a072ea5ed75abd2ab98fcfb1fad7429"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQ0MTA2OnYy", "diffSide": "RIGHT", "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/NettyChannelPipelineInstrumentation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMjozMlrOFjSwzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODo1MTozNFrOFjTqQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTg4NA==", "bodyText": "Static import?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/102#discussion_r372551884", "createdAt": "2020-01-29T18:22:32Z", "author": {"login": "tylerbenson"}, "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/NettyChannelPipelineInstrumentation.java", "diffHunk": "@@ -148,9 +148,9 @@ public static void addHandler(\n   public static class ChannelPipelineConnectAdvice {\n     @Advice.OnMethodEnter\n     public static void addParentSpan(@Advice.This final ChannelPipeline pipeline) {\n-      final AgentSpan span = activeSpan();\n-      if (span != null) {\n-        final Attribute<AgentSpan> attribute =\n+      final Span span = NettyHttpServerDecorator.TRACER.getCurrentSpan();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1afad22a9a072ea5ed75abd2ab98fcfb1fad7429"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU2NjU5Mw==", "bodyText": "same as above", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/102#discussion_r372566593", "createdAt": "2020-01-29T18:51:34Z", "author": {"login": "trask"}, "path": "instrumentation/netty-4.0/src/main/java/io/opentelemetry/auto/instrumentation/netty40/NettyChannelPipelineInstrumentation.java", "diffHunk": "@@ -148,9 +148,9 @@ public static void addHandler(\n   public static class ChannelPipelineConnectAdvice {\n     @Advice.OnMethodEnter\n     public static void addParentSpan(@Advice.This final ChannelPipeline pipeline) {\n-      final AgentSpan span = activeSpan();\n-      if (span != null) {\n-        final Attribute<AgentSpan> attribute =\n+      final Span span = NettyHttpServerDecorator.TRACER.getCurrentSpan();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTg4NA=="}, "originalCommit": {"oid": "1afad22a9a072ea5ed75abd2ab98fcfb1fad7429"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 628, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}