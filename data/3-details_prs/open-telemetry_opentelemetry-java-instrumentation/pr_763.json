{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NDE1NzUw", "number": 763, "title": "Add tests to spring-boot-autoconfigure", "bodyText": "Add auto configuration tests\nAdd bean post processor tests", "createdAt": "2020-07-23T00:11:49Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/763", "merged": true, "mergeCommit": {"oid": "fbfa0626945294b49afad3347066f5093a2e16a0"}, "closed": true, "closedAt": "2020-07-28T19:09:57Z", "author": {"login": "mabdinur"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3kDgqAH2gAyNDU1NDE1NzUwOjZkNGRhMjdiN2IyZTdhZDRlZDQ2MDRlNjM4YTMwZmNiZTEwYjJlNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5bLu2gFqTQ1NjkyMTE1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6d4da27b7b2e7ad4ed4604e638a30fcbe10b2e79", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6d4da27b7b2e7ad4ed4604e638a30fcbe10b2e79", "committedDate": "2020-07-23T00:12:20Z", "message": "add tests to springboot-autoconfigure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b2e05491e37c41f10eb65e553e5a5e2a8d1767a", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6b2e05491e37c41f10eb65e553e5a5e2a8d1767a", "committedDate": "2020-07-23T00:12:20Z", "message": "Update WebMVCFilterAutoConfigurationTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a9db3f962593f56b8bcadab53e58bd5b08c0bb6", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2a9db3f962593f56b8bcadab53e58bd5b08c0bb6", "committedDate": "2020-07-23T00:12:20Z", "message": "fixed tracer autoconfiguration tests, added missing bean test case, and added java docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155280deee1aeada818710ba9dad58052825404a", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/155280deee1aeada818710ba9dad58052825404a", "committedDate": "2020-07-23T00:12:21Z", "message": "fixed test names and added is missing tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6325f9896565d5ba7ba0861cd246f55c73d7c20", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b6325f9896565d5ba7ba0861cd246f55c73d7c20", "committedDate": "2020-07-23T00:02:12Z", "message": "fix inject mocks"}, "afterCommit": {"oid": "0ba63820e74e232d995ee151afb8ca5e42f67f99", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0ba63820e74e232d995ee151afb8ca5e42f67f99", "committedDate": "2020-07-23T00:12:21Z", "message": "fix inject mocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "632792ccafbef90d3f98413cfd8dc4626644d685", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/632792ccafbef90d3f98413cfd8dc4626644d685", "committedDate": "2020-07-23T02:41:46Z", "message": "re-run tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ba63820e74e232d995ee151afb8ca5e42f67f99", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0ba63820e74e232d995ee151afb8ca5e42f67f99", "committedDate": "2020-07-23T00:12:21Z", "message": "fix inject mocks"}, "afterCommit": {"oid": "632792ccafbef90d3f98413cfd8dc4626644d685", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/632792ccafbef90d3f98413cfd8dc4626644d685", "committedDate": "2020-07-23T02:41:46Z", "message": "re-run tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Mjc3ODUx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/763#pullrequestreview-456277851", "createdAt": "2020-07-28T03:30:58Z", "commit": {"oid": "632792ccafbef90d3f98413cfd8dc4626644d685"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMzozMDo1OFrOG37SYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMzozMDo1OFrOG37SYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI5NjIyNA==", "bodyText": "did you mean to call this multiple times?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/763#discussion_r461296224", "createdAt": "2020-07-28T03:30:58Z", "author": {"login": "trask"}, "path": "instrumentation-core/spring/spring-boot-autoconfigure/src/test/java/io/opentelemetry/instrumentation/spring/autoconfigure/httpclients/webclient/WebClientBeanPostProcessorTest.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.instrumentation.spring.autoconfigure.httpclients.webclient;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import io.opentelemetry.instrumentation.springwebflux.client.WebClientTracingFilter;\n+import io.opentelemetry.trace.Tracer;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+import org.springframework.web.reactive.function.client.WebClient;\n+\n+/** Spring bean post processor test {@link WebClientBeanPostProcessor} */\n+@RunWith(MockitoJUnitRunner.class)\n+public class WebClientBeanPostProcessorTest {\n+\n+  @Mock Tracer tracer;\n+\n+  WebClientBeanPostProcessor webClientBeanPostProcessor = new WebClientBeanPostProcessor(tracer);\n+\n+  @Test\n+  public void\n+      should_return_object_if_processed_bean_is_NOT_of_type_WebClient_or_WebClientBuilder() {\n+    assertEquals(\n+        webClientBeanPostProcessor\n+            .postProcessAfterInitialization(new Object(), \"testObject\")\n+            .getClass(),\n+        Object.class);\n+  }\n+\n+  @Test\n+  public void should_return_web_client_if_processed_bean_is_of_type_WebClient() {\n+    WebClient webClient = WebClient.create();\n+\n+    assertTrue(\n+        webClientBeanPostProcessor.postProcessAfterInitialization(webClient, \"testWebClient\")\n+            instanceof WebClient);\n+  }\n+\n+  @Test\n+  public void should_return_WebClientBuilder_if_processed_bean_is_of_type_WebClientBuilder() {\n+    WebClient.Builder webClientBuilder = WebClient.builder();\n+\n+    assertTrue(\n+        webClientBeanPostProcessor.postProcessAfterInitialization(\n+                webClientBuilder, \"testWebClientBuilder\")\n+            instanceof WebClient.Builder);\n+  }\n+\n+  @Test\n+  public void should_add_ONE_exchange_filter_to_WebClient() {\n+    WebClient webClient = WebClient.create();\n+    Object processedWebClient =\n+        webClientBeanPostProcessor.postProcessAfterInitialization(webClient, \"testWebClient\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "632792ccafbef90d3f98413cfd8dc4626644d685"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7c69079672ea5a817f4f73ba9253f53862867f", "author": {"user": {"login": "mabdinur", "name": "Munir Abdinur"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/be7c69079672ea5a817f4f73ba9253f53862867f", "committedDate": "2020-07-28T18:31:09Z", "message": "Update WebClientBeanPostProcessorTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTIxMTU1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/763#pullrequestreview-456921155", "createdAt": "2020-07-28T19:00:01Z", "commit": {"oid": "be7c69079672ea5a817f4f73ba9253f53862867f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2827, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}