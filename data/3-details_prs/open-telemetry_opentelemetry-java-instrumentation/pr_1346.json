{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5ODI5NTQ1", "number": 1346, "title": "spotbugs upgrade and fixes for JMS1 tests", "bodyText": "My previous PR (#1325) missed a spotBugs issue in KotlinCoroutineTests. This turned out into a minor change, in order to avoid adding an exclusion for KotlinCoroutineTests in spotBugs\n\njms-1.1: tests where tweaked to pass spotBugs checks\nthe spotBugs gradle plugin and tool upgrade was applied.", "createdAt": "2020-10-08T10:46:25Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346", "merged": true, "mergeCommit": {"oid": "020d445dd3fda826f50cb8d66a3e364d552fa4f7"}, "closed": true, "closedAt": "2020-10-09T08:19:00Z", "author": {"login": "imavroukakis"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQgQIGAFqTUwNDcwMDk3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQwWEHAH2gAyNDk5ODI5NTQ1OjdjYTVkYmE2M2ZkMDA2NTdjYzdlMmZkYTA1Nzc4ZWVmYWYwNGRhYWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NzAwOTcz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#pullrequestreview-504700973", "createdAt": "2020-10-08T11:52:27Z", "commit": {"oid": "a6525b40e700bf52a8dcf707cdad68bc0fa9bb91"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMTo1MjoyN1rOHea2-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMTo1NDozM1rOHea7OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY1OTM4Nw==", "bodyText": "Why older version here?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501659387", "createdAt": "2020-10-08T11:52:27Z", "author": {"login": "iNikem"}, "path": "gradle/spotbugs.gradle", "diffHunk": "@@ -7,6 +7,26 @@ allprojects {\n     omitVisitors = [\"FindDeadLocalStores\"]\n     effort = \"max\"\n     excludeFilter = file(\"$rootDir/gradle/spotbugs-exclude.xml\")\n+    toolVersion = '4.1.3'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6525b40e700bf52a8dcf707cdad68bc0fa9bb91"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY1OTgwNw==", "bodyText": "First, why html report for tests is enabled and for other code disabled? Second, if this report is disabled, why do you configure its destination?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501659807", "createdAt": "2020-10-08T11:53:17Z", "author": {"login": "iNikem"}, "path": "gradle/spotbugs.gradle", "diffHunk": "@@ -7,6 +7,26 @@ allprojects {\n     omitVisitors = [\"FindDeadLocalStores\"]\n     effort = \"max\"\n     excludeFilter = file(\"$rootDir/gradle/spotbugs-exclude.xml\")\n+    toolVersion = '4.1.3'\n+  }\n+\n+  spotbugsTest {\n+    reports {\n+      html {\n+        enabled = true\n+        destination = file(\"$buildDir/reports/spotbugs/main/spotbugs.html\")\n+        stylesheet = 'fancy-hist.xsl'\n+      }\n+    }\n+  }\n+  spotbugsMain {\n+    reports {\n+      html {\n+        enabled = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6525b40e700bf52a8dcf707cdad68bc0fa9bb91"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY2MDA0OA==", "bodyText": "what check requires uppercase names?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501660048", "createdAt": "2020-10-08T11:53:47Z", "author": {"login": "iNikem"}, "path": "instrumentation/jms-1.1/src/test/groovy/JMS1Test.groovy", "diffHunk": "@@ -33,7 +33,7 @@ class JMS1Test extends AgentTestRunner {\n \n   private static final Logger logger = LoggerFactory.getLogger(JMS1Test)\n \n-  public static GenericContainer activemq = new GenericContainer(\"rmohr/activemq\")\n+  private static final GenericContainer BROKER = new GenericContainer(\"rmohr/activemq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6525b40e700bf52a8dcf707cdad68bc0fa9bb91"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY2MDQ3Mw==", "bodyText": "Why this change was required?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501660473", "createdAt": "2020-10-08T11:54:33Z", "author": {"login": "iNikem"}, "path": "instrumentation/kotlin-coroutines/src/test/kotlin/KotlinCoroutineTests.kt", "diffHunk": "@@ -105,27 +104,17 @@ class KotlinCoroutineTests(private val dispatcher: CoroutineDispatcher) {\n    */\n   fun tracedWithDeferredFirstCompletions() = runTest {\n \n-    val children = listOf(\n-      async {\n-        tracedChild(\"timeout1\")\n-        false\n-      },\n-      async {\n-        tracedChild(\"timeout2\")\n-        false\n-      },\n-      async {\n-        tracedChild(\"timeout3\")\n-        true\n-      }\n-    )\n-\n     withTimeout(TimeUnit.SECONDS.toMillis(30)) {\n-      select<Boolean> {\n-        children.forEach { child ->\n-          child.onAwait { it }\n-        }\n-      }\n+      tracedChild(\"timeout1\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6525b40e700bf52a8dcf707cdad68bc0fa9bb91"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64e676df6905d798edcff5f65392e8fafc666949", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/64e676df6905d798edcff5f65392e8fafc666949", "committedDate": "2020-10-08T15:06:24Z", "message": "spotless upgrade and fixes for JMS1 tests\n\n* includes missed bugs in KotlinCoroutineTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "750954a1b9f9fb5d58953e5e78b3c4e2ad301263", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/750954a1b9f9fb5d58953e5e78b3c4e2ad301263", "committedDate": "2020-10-08T15:06:24Z", "message": "create spotBugs XML reports on CI, HTML locally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5", "committedDate": "2020-10-08T15:21:29Z", "message": "use updatedCodeNarc rules with lowercase tolerance"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b7750ef37485746737d2b6447d0608438908654", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5b7750ef37485746737d2b6447d0608438908654", "committedDate": "2020-10-08T15:05:23Z", "message": "create spotBugs XML reports on CI, HTML locally"}, "afterCommit": {"oid": "224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5", "committedDate": "2020-10-08T15:21:29Z", "message": "use updatedCodeNarc rules with lowercase tolerance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTA4MjIx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#pullrequestreview-504908221", "createdAt": "2020-10-08T15:30:39Z", "commit": {"oid": "224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNTozMDozOVrOHekToQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNTozMDozOVrOHekToQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxNDE3Nw==", "bodyText": "What of these are default configuration anyway and what specifically you want to override?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501814177", "createdAt": "2020-10-08T15:30:39Z", "author": {"login": "iNikem"}, "path": "gradle/spotbugs.gradle", "diffHunk": "@@ -2,11 +2,35 @@ allprojects {\n   apply plugin: 'com.github.spotbugs'\n \n   spotbugs {\n-    ignoreFailures = true\n+    ignoreFailures = false\n     reportLevel = \"high\"\n     omitVisitors = [\"FindDeadLocalStores\"]\n     effort = \"max\"\n     excludeFilter = file(\"$rootDir/gradle/spotbugs-exclude.xml\")\n+    toolVersion = '4.1.3'\n+  }\n+\n+  if (!isCI) {\n+    spotbugsTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224ec9a1a2dfde8c17b5af468a9ed6e48f6106c5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e50bc5875b755f1f1bdbfd9494ae2aba45c2a486", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e50bc5875b755f1f1bdbfd9494ae2aba45c2a486", "committedDate": "2020-10-08T16:20:14Z", "message": "remove if and move bool to each property"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTg4MTA0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#pullrequestreview-504988104", "createdAt": "2020-10-08T17:02:47Z", "commit": {"oid": "e50bc5875b755f1f1bdbfd9494ae2aba45c2a486"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowMjo0N1rOHeoBLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowMjo0N1rOHeoBLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg3NDk4OA==", "bodyText": "If these are default values anyway, then remove them", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#discussion_r501874988", "createdAt": "2020-10-08T17:02:47Z", "author": {"login": "iNikem"}, "path": "gradle/spotbugs.gradle", "diffHunk": "@@ -10,27 +10,24 @@ allprojects {\n     toolVersion = '4.1.3'\n   }\n \n-  if (!isCI) {\n-    spotbugsTest {\n-      reports {\n-        html.enabled = true\n-        xml.enabled = false\n-        html {\n-          destination = file(\"$buildDir/reports/spotbugs/main.html\")\n-          stylesheet = 'fancy-hist.xsl'\n-        }\n+  spotbugsTest {\n+    reports {\n+      html.enabled = !isCI\n+      xml.enabled = isCI\n+      html {\n+        destination = file(\"$buildDir/reports/spotbugs/main.html\")\n+        stylesheet = 'fancy-hist.xsl'\n       }\n     }\n-    spotbugsMain {\n-      reports {\n-        html.enabled = true\n-        xml.enabled = false\n-        html {\n-          destination = file(\"$buildDir/reports/spotbugs/main.html\")\n-          stylesheet = 'fancy-hist.xsl'\n-        }\n+  }\n+  spotbugsMain {\n+    reports {\n+      html.enabled = !isCI\n+      xml.enabled = isCI\n+      html {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e50bc5875b755f1f1bdbfd9494ae2aba45c2a486"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "276b0dfa55879d17615df9207992860d591ec40a", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/276b0dfa55879d17615df9207992860d591ec40a", "committedDate": "2020-10-08T18:01:13Z", "message": "allow spotBugs gradle plugin to upgrade the spotbugs tool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef06096c5f5a506d0db7c6aa01138d104b410373", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ef06096c5f5a506d0db7c6aa01138d104b410373", "committedDate": "2020-10-08T18:24:22Z", "message": "revert to original test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7426c1281e4da8bf32260ae8cb27147fadd58ab", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c7426c1281e4da8bf32260ae8cb27147fadd58ab", "committedDate": "2020-10-08T18:31:49Z", "message": "exclude all kotlin source from spotbugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57275252a55be4bf474ed17c217009ee3ac7992f", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/57275252a55be4bf474ed17c217009ee3ac7992f", "committedDate": "2020-10-08T18:51:25Z", "message": "remove default location for spotBugs report"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTQxODQ4", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1346#pullrequestreview-505141848", "createdAt": "2020-10-08T20:29:47Z", "commit": {"oid": "57275252a55be4bf474ed17c217009ee3ac7992f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d59c9bb9f2f7f82b7fc5e89d3476af5070e106e", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6d59c9bb9f2f7f82b7fc5e89d3476af5070e106e", "committedDate": "2020-10-09T05:39:41Z", "message": "do not pass null to a Span's attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ca5dba63fd00657cc7e2fda05778eefaf04daab", "author": {"user": {"login": "imavroukakis", "name": "Ioannis Mavroukakis"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7ca5dba63fd00657cc7e2fda05778eefaf04daab", "committedDate": "2020-10-09T06:39:34Z", "message": "Merge branch 'master' into spotless-jms1tests-fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2299, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}