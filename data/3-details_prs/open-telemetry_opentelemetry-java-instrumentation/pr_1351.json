{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMzI0NjQ5", "number": 1351, "title": "Remove unnecessary scopes", "bodyText": "Closes #898", "createdAt": "2020-10-09T03:42:06Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351", "merged": true, "mergeCommit": {"oid": "c739f7db6bb671f9ba5a7b953977d19ad133e20a"}, "closed": true, "closedAt": "2020-10-11T21:31:38Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQtyeYgH2gAyNTAwMzI0NjQ5OjNlYWM0YWE2NTFmYTU1ODZhMDBiZWFlOWJkZWQwMTg2MTFmZTYyNTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRlzIWgH2gAyNTAwMzI0NjQ5Ojg2MTIzOTA4OWY4NmM5MjhiYzgyNmU2MDI0YWZlZWViNzZkZDFmMjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3eac4aa651fa5586a00beae9bded018611fe6257", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3eac4aa651fa5586a00beae9bded018611fe6257", "committedDate": "2020-10-09T03:40:53Z", "message": "Remove unnecessary scopes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDgxNTA4", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351#pullrequestreview-505481508", "createdAt": "2020-10-09T08:49:33Z", "commit": {"oid": "3eac4aa651fa5586a00beae9bded018611fe6257"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NTIzNDI5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351#pullrequestreview-505523429", "createdAt": "2020-10-09T09:47:27Z", "commit": {"oid": "3eac4aa651fa5586a00beae9bded018611fe6257"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwOTo0NzoyN1rOHfC4EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwOTo0ODoxNVrOHfC5tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMxNTAyNA==", "bodyText": "Here the correct parent span is important. I think this change breaks it.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351#discussion_r502315024", "createdAt": "2020-10-09T09:47:27Z", "author": {"login": "iNikem"}, "path": "instrumentation/servlet/servlet-common/src/main/java/io/opentelemetry/instrumentation/auto/servlet/dispatcher/RequestDispatcherInstrumentation.java", "diffHunk": "@@ -115,18 +114,16 @@ public static void start(\n         parent = servletContext;\n       }\n \n-      try (Scope ignored = ContextUtils.withScopedContext(parent)) {\n-        span = TRACER.startSpan(method);\n+      span = TRACER.startSpan(method);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3eac4aa651fa5586a00beae9bded018611fe6257"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMxNTQ0NA==", "bodyText": "What if processResult creates new spans? Will their parent change now?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351#discussion_r502315444", "createdAt": "2020-10-09T09:48:15Z", "author": {"login": "iNikem"}, "path": "instrumentation/spymemcached-2.12/src/main/java/io/opentelemetry/instrumentation/auto/spymemcached/CompletionListener.java", "diffHunk": "@@ -28,29 +26,27 @@ public CompletionListener(MemcachedConnection connection, String methodName) {\n   }\n \n   protected void closeAsyncSpan(T future) {\n-    try (Scope ignored = currentContextWith(span)) {\n-      try {\n-        processResult(span, future);\n-      } catch (CancellationException e) {\n+    try {\n+      processResult(span, future);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3eac4aa651fa5586a00beae9bded018611fe6257"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4ee45955fc1594f77e2cfe708e69f0e5baf6d4e", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d4ee45955fc1594f77e2cfe708e69f0e5baf6d4e", "committedDate": "2020-10-09T17:39:40Z", "message": "revert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e62f8c59bf4bcfa598cc02411e2f4d357b11069", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/8e62f8c59bf4bcfa598cc02411e2f4d357b11069", "committedDate": "2020-10-09T17:42:08Z", "message": "Merge remote-tracking branch 'upstream/master' into unnecessary-scopes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDg0NzEw", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1351#pullrequestreview-506084710", "createdAt": "2020-10-10T09:56:26Z", "commit": {"oid": "8e62f8c59bf4bcfa598cc02411e2f4d357b11069"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78158abb0268f4f66763decc6f6dcda1a3cde4b2", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/78158abb0268f4f66763decc6f6dcda1a3cde4b2", "committedDate": "2020-10-11T18:21:28Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b89cdd792bf5cbea58234b6840784b9f5728babc", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b89cdd792bf5cbea58234b6840784b9f5728babc", "committedDate": "2020-10-11T20:44:32Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "861239089f86c928bc826e6024afeeeb76dd1f21", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/861239089f86c928bc826e6024afeeeb76dd1f21", "committedDate": "2020-10-11T20:56:17Z", "message": "Merge remote-tracking branch 'upstream/master' into unnecessary-scopes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2306, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}