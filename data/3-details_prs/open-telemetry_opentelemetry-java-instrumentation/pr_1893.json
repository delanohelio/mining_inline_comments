{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDMyMTcw", "number": 1893, "title": "HTTP client instrumentation cleanup, part 0", "bodyText": "Splitting up #1840.\nThis PR makes a few small changes to BaseTracer and HttpClientTacer that other parts use.", "createdAt": "2020-12-13T22:21:31Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893", "merged": true, "mergeCommit": {"oid": "e2264222ce22a5b9314919849c041f0ea852eee9"}, "closed": true, "closedAt": "2020-12-15T00:34:07Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdl4xBsAH2gAyNTM5MDMyMTcwOjJjNmU2MzlkZTE5MjIxYzY2YzAzNDZiM2UwYzM2YjU3NThmYTQ0MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmOimKgH2gAyNTM5MDMyMTcwOjQ4YWMyM2E5MjQyY2RjYzljMGU4Y2RiODJmMzRjMjNjNjJkMzY4NmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2c6e639de19221c66c0346b3e0c36b5758fa4412", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2c6e639de19221c66c0346b3e0c36b5758fa4412", "committedDate": "2020-12-13T22:20:40Z", "message": "HTTP client instrumentation cleanup, part 0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDExMDE3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#pullrequestreview-551011017", "createdAt": "2020-12-14T02:50:01Z", "commit": {"oid": "2c6e639de19221c66c0346b3e0c36b5758fa4412"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMjo1MDowMVrOIE9t1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMjo1MDowMVrOIE9t1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA3NjM3NA==", "bodyText": "I'd put this method in a PR with at least one usage of it - inClientSpan / withClientSpan are quite clear here, but not this method which isn't used. One way to keep PRs small is to change just one usage in one PR, and remaining usages in a mechanical way in another.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#discussion_r542076374", "createdAt": "2020-12-14T02:50:01Z", "author": {"login": "anuraaga"}, "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/HttpClientTracer.java", "diffHunk": "@@ -112,6 +116,15 @@ public void endExceptionally(Context context, Throwable throwable) {\n     super.endExceptionally(span, throwable, -1);\n   }\n \n+  /** Convenience method primarily for bytecode instrumentation. */\n+  public void endMaybeExceptionally(Context context, RESPONSE response, Throwable throwable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c6e639de19221c66c0346b3e0c36b5758fa4412"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a03ecc075e3b0c18ef3375a0447972342c402fdb", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a03ecc075e3b0c18ef3375a0447972342c402fdb", "committedDate": "2020-12-14T02:55:31Z", "message": "Add an example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDQzMTQ1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#pullrequestreview-551043145", "createdAt": "2020-12-14T04:56:40Z", "commit": {"oid": "a03ecc075e3b0c18ef3375a0447972342c402fdb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNDo1Njo0MFrOIE_30w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNDo1Njo0MFrOIE_30w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjExMTY5OQ==", "bodyText": "I think a while ago we had a thought that this pattern is technically the most precise\nThrowable err = null;\ntry (context.makeCurrent()) {\n  doWork();\n} catch (Throwable t) {\n  err = t;\n} finally {\n  span.end\n}\nIf so I guess this class isn't only useful for bytecode manipulation - do you think we can remove the two variants and merge into a single end method eventually?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#discussion_r542111699", "createdAt": "2020-12-14T04:56:40Z", "author": {"login": "anuraaga"}, "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/HttpClientTracer.java", "diffHunk": "@@ -112,6 +116,15 @@ public void endExceptionally(Context context, Throwable throwable) {\n     super.endExceptionally(span, throwable, -1);\n   }\n \n+  /** Convenience method primarily for bytecode instrumentation. */\n+  public void endMaybeExceptionally(Context context, RESPONSE response, Throwable throwable) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA3NjM3NA=="}, "originalCommit": {"oid": "2c6e639de19221c66c0346b3e0c36b5758fa4412"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDQzNDY0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#pullrequestreview-551043464", "createdAt": "2020-12-14T04:57:49Z", "commit": {"oid": "a03ecc075e3b0c18ef3375a0447972342c402fdb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNDo1Nzo0OVrOIE_5LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNDo1Nzo0OVrOIE_5LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjExMjA0NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void endMaybeExceptionally(Context context, RESPONSE response, Throwable throwable) {\n          \n          \n            \n              public void endMaybeExceptionally(Context context, RESPONSE response, @Nullable Throwable throwable) {", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#discussion_r542112045", "createdAt": "2020-12-14T04:57:49Z", "author": {"login": "anuraaga"}, "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/HttpClientTracer.java", "diffHunk": "@@ -112,6 +116,15 @@ public void endExceptionally(Context context, Throwable throwable) {\n     super.endExceptionally(span, throwable, -1);\n   }\n \n+  /** Convenience method primarily for bytecode instrumentation. */\n+  public void endMaybeExceptionally(Context context, RESPONSE response, Throwable throwable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03ecc075e3b0c18ef3375a0447972342c402fdb"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfd546702150fcb003785f44a9acc32fd7827435", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cfd546702150fcb003785f44a9acc32fd7827435", "committedDate": "2020-12-14T05:29:09Z", "message": "Mark param Nullable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b7d1ed0615c792e084a5b4ff120fcfbfaf3041d", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1b7d1ed0615c792e084a5b4ff120fcfbfaf3041d", "committedDate": "2020-12-14T05:35:58Z", "message": "Add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDYzMDM5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#pullrequestreview-551063039", "createdAt": "2020-12-14T05:58:04Z", "commit": {"oid": "1b7d1ed0615c792e084a5b4ff120fcfbfaf3041d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTc5Mzk4", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1893#pullrequestreview-551179398", "createdAt": "2020-12-14T09:22:47Z", "commit": {"oid": "1b7d1ed0615c792e084a5b4ff120fcfbfaf3041d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48ac23a9242cdcc9c0e8cdb82f34c23c62d3686d", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/48ac23a9242cdcc9c0e8cdb82f34c23c62d3686d", "committedDate": "2020-12-14T23:42:49Z", "message": "Merge remote-tracking branch 'upstream/master' into http-client-instrumentation-part-0"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1978, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}