{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzI0MDI2", "number": 917, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNDoyNTo0M1rOEWEtpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNToxMDoyOFrOEWFInw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTgxMzUxOnYy", "diffSide": "LEFT", "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNDoyNTo0M1rOG9MB3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwNDo1ODo0OVrOG9tjMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgxMzQwNg==", "bodyText": "Why this was bad?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/917#discussion_r466813406", "createdAt": "2020-08-07T04:25:43Z", "author": {"login": "iNikem"}, "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "diffHunk": "@@ -98,26 +103,34 @@ public void start(final io.vertx.core.Future<Void> startFuture) {\n         });\n   }\n \n-  @WithSpan", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99ab64fe25d7bb5098060dcd49b29c5cbe097b9b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM2MjYwOQ==", "bodyText": "it seems like it adds an unnecessary dependency on the annotation instrumentation", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/917#discussion_r467362609", "createdAt": "2020-08-08T04:58:49Z", "author": {"login": "trask"}, "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "diffHunk": "@@ -98,26 +103,34 @@ public void start(final io.vertx.core.Future<Void> startFuture) {\n         });\n   }\n \n-  @WithSpan", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgxMzQwNg=="}, "originalCommit": {"oid": "99ab64fe25d7bb5098060dcd49b29c5cbe097b9b"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTg4MjU1OnYy", "diffSide": "RIGHT", "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNToxMDoyOFrOG9Mq9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwNTo0Njo0MlrOG9tyEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgyMzkyNg==", "bodyText": "Can we put this change in another PR? Is it related to annotations?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/917#discussion_r466823926", "createdAt": "2020-08-07T05:10:28Z", "author": {"login": "anuraaga"}, "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "diffHunk": "@@ -98,26 +103,34 @@ public void start(final io.vertx.core.Future<Void> startFuture) {\n         });\n   }\n \n-  @WithSpan\n   private void handleListProducts(final RoutingContext routingContext) {\n-    HttpServerResponse response = routingContext.response();\n-    Single<JsonArray> jsonArraySingle = listProducts();\n-\n-    jsonArraySingle.subscribe(\n-        arr -> response.putHeader(\"content-type\", \"application/json\").end(arr.encode()));\n+    Span span = tracer.spanBuilder(\"handleListProducts\").startSpan();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99ab64fe25d7bb5098060dcd49b29c5cbe097b9b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM2MjY4OA==", "bodyText": "this replaces the span that was generated by the @WithSpan annotation that i removed", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/917#discussion_r467362688", "createdAt": "2020-08-08T04:59:57Z", "author": {"login": "trask"}, "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "diffHunk": "@@ -98,26 +103,34 @@ public void start(final io.vertx.core.Future<Void> startFuture) {\n         });\n   }\n \n-  @WithSpan\n   private void handleListProducts(final RoutingContext routingContext) {\n-    HttpServerResponse response = routingContext.response();\n-    Single<JsonArray> jsonArraySingle = listProducts();\n-\n-    jsonArraySingle.subscribe(\n-        arr -> response.putHeader(\"content-type\", \"application/json\").end(arr.encode()));\n+    Span span = tracer.spanBuilder(\"handleListProducts\").startSpan();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgyMzkyNg=="}, "originalCommit": {"oid": "99ab64fe25d7bb5098060dcd49b29c5cbe097b9b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM2NjQxOA==", "bodyText": "Oops missed that", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/917#discussion_r467366418", "createdAt": "2020-08-08T05:46:42Z", "author": {"login": "anuraaga"}, "path": "instrumentation/vertx-reactive-3.5/src/test/groovy/VertxReactiveWebServer.java", "diffHunk": "@@ -98,26 +103,34 @@ public void start(final io.vertx.core.Future<Void> startFuture) {\n         });\n   }\n \n-  @WithSpan\n   private void handleListProducts(final RoutingContext routingContext) {\n-    HttpServerResponse response = routingContext.response();\n-    Single<JsonArray> jsonArraySingle = listProducts();\n-\n-    jsonArraySingle.subscribe(\n-        arr -> response.putHeader(\"content-type\", \"application/json\").end(arr.encode()));\n+    Span span = tracer.spanBuilder(\"handleListProducts\").startSpan();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgyMzkyNg=="}, "originalCommit": {"oid": "99ab64fe25d7bb5098060dcd49b29c5cbe097b9b"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4986, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}