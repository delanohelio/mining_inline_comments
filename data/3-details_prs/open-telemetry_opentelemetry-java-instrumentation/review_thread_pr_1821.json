{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDU2NjM4", "number": 1821, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzo1NjowM1rOFAB5mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMTowNjo1M1rOFAe-sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NTc1NDUwOnYy", "diffSide": "RIGHT", "path": "smoke-tests/matrix/src/payara-dockerfile.template", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzo1NjowM1rOH-E1OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMDo1NzozM1rOH-yv4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA==", "bodyText": "Can we use docker build-arg instead of custom templating?\nhttps://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534852920", "createdAt": "2020-12-03T07:56:03Z", "author": {"login": "anuraaga"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2MjUzMw==", "bodyText": "Can you use them for FROM? I thought not", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534862533", "createdAt": "2020-12-03T08:01:40Z", "author": {"login": "iNikem"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2NTY2NQ==", "bodyText": "Think so, I've used it in Zipkin before https://github.com/openzipkin/zipkin/blob/master/docker/Dockerfile#L31", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534865665", "createdAt": "2020-12-03T08:03:29Z", "author": {"login": "anuraaga"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2ODAyMA==", "bodyText": "https://docs.docker.com/engine/reference/builder/#understand-how-arg-and-from-interact", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534868020", "createdAt": "2020-12-03T08:04:50Z", "author": {"login": "vovencij"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDk1NDk3Nw==", "bodyText": "Still struggling to get it working... What's the big difference between gradle token expansion and docker build args?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534954977", "createdAt": "2020-12-03T08:54:10Z", "author": {"login": "iNikem"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDk4NzYxNA==", "bodyText": "Fixed", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534987614", "createdAt": "2020-12-03T09:18:07Z", "author": {"login": "iNikem"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDk4NzkxMg==", "bodyText": "Just that it can be more convenient to run docker build locally sometimes. But no big deal.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534987912", "createdAt": "2020-12-03T09:18:34Z", "author": {"login": "anuraaga"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTYwNTIxOA==", "bodyText": "oh that's cool, hadn't seen that before", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r535605218", "createdAt": "2020-12-03T20:57:33Z", "author": {"login": "trask"}, "path": "smoke-tests/matrix/src/payara-dockerfile.template", "diffHunk": "@@ -0,0 +1,5 @@\n+FROM payara/server-full:@version@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MjkyMA=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NTc1ODI1OnYy", "diffSide": "RIGHT", "path": "smoke-tests/matrix/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzo1NjoyN1rOH-E35Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzo1NzozNlrOH-FAZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MzYwNQ==", "bodyText": "I think this is worth some comments on what it's preparing", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534853605", "createdAt": "2020-12-03T07:56:27Z", "author": {"login": "anuraaga"}, "path": "smoke-tests/matrix/build.gradle", "diffHunk": "@@ -0,0 +1,100 @@\n+import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage\n+import com.bmuschko.gradle.docker.tasks.image.DockerPushImage\n+import org.apache.tools.ant.filters.ReplaceTokens\n+\n+plugins {\n+  id \"war\"\n+  id \"com.bmuschko.docker-remote-api\" version \"6.6.1\"\n+}\n+\n+compileJava {\n+  options.release.set(8)\n+}\n+\n+repositories {\n+  jcenter()\n+}\n+dependencies {\n+  implementation(\"javax.servlet:javax.servlet-api:3.0.1\")\n+}\n+\n+static def dockerFileName(String template) {\n+  template.replace(\"-dockerfile.template\", \".dockerfile\")\n+}\n+\n+def dockerWorkingDir = new File(project.buildDir, \"docker\")\n+\n+def buildMatrixTask = tasks.create(\"buildMatrix\") {\n+  group = \"build\"\n+  description = \"Builds all Docker images for the test matrix\"\n+}\n+\n+Set<String> matrix = []\n+def pushMatrixTask = tasks.create(\"pushMatrix\", DockerPushImage) {\n+  group = \"publishing\"\n+  description = \"Push all Docker images for the test matrix\"\n+  dependsOn(buildMatrixTask)\n+  images.set(matrix)\n+}\n+\n+def targets = [\n+  \"jetty\"  : [\n+    \"9.4.35\"      : [\"8\", \"11\", \"15\"],\n+    \"10.0.0.beta3\": [\"11\", \"15\"],\n+  ],\n+  \"tomcat\" : [\n+    \"7.0.107\"   : [\"8\"],\n+    \"8.5.60\"    : [\"8\", \"11\"],\n+    \"9.0.40\"    : [\"8\", \"11\"],\n+    \"10.0.0-M10\": [\"8\", \"11\"]\n+  ],\n+  \"payara\" : [\n+    \"5.2020.6\"      : [\"8\"],\n+    \"5.2020.6-jdk11\": [\"11\"]\n+  ],\n+  \"wildfly\": [\n+    \"13.0.0.Final\": [\"8\", \"11\", \"15\"],\n+    \"17.0.1.Final\": [\"8\", \"11\", \"15\"],\n+    \"21.0.0.Final\": [\"8\", \"11\", \"15\"]\n+  ],\n+  \"liberty\": [\n+    \"20.0.0.12\": [\"8\", \"11\", \"15\", \"8-jdk-openj9\", \"11-jdk-openj9\", \"15-jdk-openj9\"]\n+  ]\n+]\n+\n+targets.each { server, data ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1NTc4Mw==", "bodyText": "Nevermind I guess README is enough too", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r534855783", "createdAt": "2020-12-03T07:57:36Z", "author": {"login": "anuraaga"}, "path": "smoke-tests/matrix/build.gradle", "diffHunk": "@@ -0,0 +1,100 @@\n+import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage\n+import com.bmuschko.gradle.docker.tasks.image.DockerPushImage\n+import org.apache.tools.ant.filters.ReplaceTokens\n+\n+plugins {\n+  id \"war\"\n+  id \"com.bmuschko.docker-remote-api\" version \"6.6.1\"\n+}\n+\n+compileJava {\n+  options.release.set(8)\n+}\n+\n+repositories {\n+  jcenter()\n+}\n+dependencies {\n+  implementation(\"javax.servlet:javax.servlet-api:3.0.1\")\n+}\n+\n+static def dockerFileName(String template) {\n+  template.replace(\"-dockerfile.template\", \".dockerfile\")\n+}\n+\n+def dockerWorkingDir = new File(project.buildDir, \"docker\")\n+\n+def buildMatrixTask = tasks.create(\"buildMatrix\") {\n+  group = \"build\"\n+  description = \"Builds all Docker images for the test matrix\"\n+}\n+\n+Set<String> matrix = []\n+def pushMatrixTask = tasks.create(\"pushMatrix\", DockerPushImage) {\n+  group = \"publishing\"\n+  description = \"Push all Docker images for the test matrix\"\n+  dependsOn(buildMatrixTask)\n+  images.set(matrix)\n+}\n+\n+def targets = [\n+  \"jetty\"  : [\n+    \"9.4.35\"      : [\"8\", \"11\", \"15\"],\n+    \"10.0.0.beta3\": [\"11\", \"15\"],\n+  ],\n+  \"tomcat\" : [\n+    \"7.0.107\"   : [\"8\"],\n+    \"8.5.60\"    : [\"8\", \"11\"],\n+    \"9.0.40\"    : [\"8\", \"11\"],\n+    \"10.0.0-M10\": [\"8\", \"11\"]\n+  ],\n+  \"payara\" : [\n+    \"5.2020.6\"      : [\"8\"],\n+    \"5.2020.6-jdk11\": [\"11\"]\n+  ],\n+  \"wildfly\": [\n+    \"13.0.0.Final\": [\"8\", \"11\", \"15\"],\n+    \"17.0.1.Final\": [\"8\", \"11\", \"15\"],\n+    \"21.0.0.Final\": [\"8\", \"11\", \"15\"]\n+  ],\n+  \"liberty\": [\n+    \"20.0.0.12\": [\"8\", \"11\", \"15\", \"8-jdk-openj9\", \"11-jdk-openj9\", \"15-jdk-openj9\"]\n+  ]\n+]\n+\n+targets.each { server, data ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg1MzYwNQ=="}, "originalCommit": {"oid": "24da507b91ade2fb2da46f1d1dd7d290e4041020"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MDUxODg5OnYy", "diffSide": "RIGHT", "path": "smoke-tests/matrix/build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMTowNjo1M1rOH-zm7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMTowNjo1M1rOH-zm7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTYxOTMwOA==", "bodyText": "this is some really great test coverage that we were missing!!!", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1821#discussion_r535619308", "createdAt": "2020-12-03T21:06:53Z", "author": {"login": "trask"}, "path": "smoke-tests/matrix/build.gradle", "diffHunk": "@@ -0,0 +1,93 @@\n+import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage\n+import com.bmuschko.gradle.docker.tasks.image.DockerPushImage\n+\n+plugins {\n+  id \"war\"\n+  id \"com.bmuschko.docker-remote-api\" version \"6.6.1\"\n+}\n+\n+compileJava {\n+  options.release.set(8)\n+}\n+\n+repositories {\n+  jcenter()\n+}\n+dependencies {\n+  implementation(\"javax.servlet:javax.servlet-api:3.0.1\")\n+}\n+\n+def buildMatrixTask = tasks.create(\"buildMatrix\") {\n+  group = \"build\"\n+  description = \"Builds all Docker images for the test matrix\"\n+}\n+\n+Set<String> matrix = []\n+tasks.create(\"pushMatrix\", DockerPushImage) {\n+  group = \"publishing\"\n+  description = \"Push all Docker images for the test matrix\"\n+  dependsOn(buildMatrixTask)\n+  images.set(matrix)\n+}\n+\n+def targets = [\n+  \"jetty\"  : [\n+    \"9.4.35\"      : [\"8\", \"11\", \"15\"],\n+    \"10.0.0.beta3\": [\"11\", \"15\"],\n+  ],\n+  \"tomcat\" : [\n+    \"7.0.107\"   : [\"8\"],\n+    \"8.5.60\"    : [\"8\", \"11\"],\n+    \"9.0.40\"    : [\"8\", \"11\"],\n+    \"10.0.0-M10\": [\"8\", \"11\"]\n+  ],\n+  \"payara\" : [\n+    \"5.2020.6\"      : [\"8\"],\n+    \"5.2020.6-jdk11\": [\"11\"]\n+  ],\n+  \"wildfly\": [\n+    \"13.0.0.Final\": [\"8\", \"11\", \"15\"],\n+    \"17.0.1.Final\": [\"8\", \"11\", \"15\"],\n+    \"21.0.0.Final\": [\"8\", \"11\", \"15\"]\n+  ],\n+  \"liberty\": [\n+    \"20.0.0.12\": [\"8\", \"11\", \"15\", \"8-jdk-openj9\", \"11-jdk-openj9\", \"15-jdk-openj9\"]\n+  ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b28774dd4dfdd139d40cc7144c909ddce25e4a4"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4478, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}