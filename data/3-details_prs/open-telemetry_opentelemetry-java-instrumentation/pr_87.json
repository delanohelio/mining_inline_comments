{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NTQ0NzA0", "number": 87, "title": "Refactored http-url-connection, java-concurrent, jax-rs-annotation-*", "bodyText": "Closes #85 jax-rs-annotations-* needs refactoring\nCloses #84 java-concurrent needs refactoring\nCloses #83 http-url-connection needs refactoring", "createdAt": "2020-01-23T20:08:40Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/87", "merged": true, "mergeCommit": {"oid": "88957e9ab63104b45082a349ddf19fc8708b6f55"}, "closed": true, "closedAt": "2020-01-23T21:08:50Z", "author": {"login": "prydin"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb83-0rgH2gAyMzY2NTQ0NzA0OmIyNGFhYjUyMzkwZmM1NjAyZGMyNzNkMWNkMGEwNzdiOWIyMGQ3NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9QtKNgH2gAyMzY2NTQ0NzA0Ojk3ZDA0MWY3MTFjMmIzNzMyMmY2ZDRlNGNhMWQ0MzY5MzZiZWFhODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b24aab52390fc5602dc273d1cd0a077b9b20d744", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b24aab52390fc5602dc273d1cd0a077b9b20d744", "committedDate": "2020-01-22T16:03:47Z", "message": "Refactor of twilio (WIP)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3260b8d7114af1f14da71552605efcbc3c9ddbb2", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3260b8d7114af1f14da71552605efcbc3c9ddbb2", "committedDate": "2020-01-23T12:40:26Z", "message": "Merge from upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aacae447391e0c4554929be25d81db335b2c00e", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1aacae447391e0c4554929be25d81db335b2c00e", "committedDate": "2020-01-23T13:59:00Z", "message": "Refactored http-url-connection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "009987917c65d52355debb2d88a5d8d0d87dd6e0", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/009987917c65d52355debb2d88a5d8d0d87dd6e0", "committedDate": "2020-01-23T15:34:40Z", "message": "Refactored java-concurrent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "272f531fd1981be54f873a6f2be7b2b3d0ffb886", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/272f531fd1981be54f873a6f2be7b2b3d0ffb886", "committedDate": "2020-01-23T18:34:50Z", "message": "Refactored jax-rs-annotation-1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224497083859edf448046cbf4529a6837b48a248", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/224497083859edf448046cbf4529a6837b48a248", "committedDate": "2020-01-23T19:58:04Z", "message": "Refactored jax-rs-annotations-2 instrumentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0f104508a760471738470f152cad7b5cd1667c1", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d0f104508a760471738470f152cad7b5cd1667c1", "committedDate": "2020-01-23T20:19:55Z", "message": "Adjusted formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTc3NjM2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/87#pullrequestreview-347577636", "createdAt": "2020-01-23T20:13:36Z", "commit": {"oid": "224497083859edf448046cbf4529a6837b48a248"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDoxMzozNlrOFhLP7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDoxMzozNlrOFhLP7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMzMTYzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return new SpanScopePair(span, TRACER.withSpan(span));\n          \n          \n            \n                    return TRACER.withSpan(DefaultSpan.getInvalid());\n          \n      \n    \n    \n  \n\nand pass Scope to @OnMethodExit\n(the idea behind this instrumentation is that it prevents the current span from propagating into async work that should not be considered as part of the current request)", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/87#discussion_r370331631", "createdAt": "2020-01-23T20:13:36Z", "author": {"login": "trask"}, "path": "instrumentation/java-concurrent/src/main/java/io/opentelemetry/auto/instrumentation/java/concurrent/AsyncPropagatingDisableInstrumentation.java", "diffHunk": "@@ -87,18 +85,18 @@ public DisableAsyncInstrumentation(\n   public static class DisableAsyncAdvice {\n \n     @Advice.OnMethodEnter(suppress = Throwable.class)\n-    public static AgentScope enter() {\n-      final AgentSpan span = activeSpan();\n-      if (span != null) {\n-        return activateSpan(noopSpan(), false);\n+    public static SpanScopePair enter() {\n+      final Span span = TRACER.getCurrentSpan();\n+      if (span.getContext().isValid()) {\n+        return new SpanScopePair(span, TRACER.withSpan(span));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224497083859edf448046cbf4529a6837b48a248"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61405b16cd3af890037b7e8df46c5e499d8fed78", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/61405b16cd3af890037b7e8df46c5e499d8fed78", "committedDate": "2020-01-23T20:31:26Z", "message": "Update instrumentation/java-concurrent/src/main/java/io/opentelemetry/auto/instrumentation/java/concurrent/AsyncPropagatingDisableInstrumentation.java\n\nCo-Authored-By: Trask Stalnaker <trask.stalnaker@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4c7b7c9fcebcf20290738c80b83e50d3aae2f44", "author": {"user": {"login": "prydin", "name": "Pontus Rydin"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e4c7b7c9fcebcf20290738c80b83e50d3aae2f44", "committedDate": "2020-01-23T20:40:34Z", "message": "Fixed compilation issue after accepting proposed change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTk4NTg4", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/87#pullrequestreview-347598588", "createdAt": "2020-01-23T20:51:54Z", "commit": {"oid": "e4c7b7c9fcebcf20290738c80b83e50d3aae2f44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d041f711c2b37322f6d4e4ca1d436936beaa85", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/97d041f711c2b37322f6d4e4ca1d436936beaa85", "committedDate": "2020-01-23T20:52:07Z", "message": "Merge branch 'master' into prydin-instr-refactor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3367, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}