{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3ODM5OTI4", "number": 1158, "title": "mapping redis (jedis) connection net.peer attributes", "bodyText": "Changes to\n\nset net.peer.* semantic attributes for jedis instrumentation.- both 1.4 and 3.0\nutilising existing helper utils\nmaking extra effort to resolve address (if hostname, not IP)\nslight refactor of the utils for method delegation", "createdAt": "2020-09-02T13:57:17Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158", "merged": true, "mergeCommit": {"oid": "f033fd451a575dbf1e466bd8e9405aeac5818ff3"}, "closed": true, "closedAt": "2020-09-03T03:55:24Z", "author": {"login": "kubawach"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE8np6gFqTQ4MDg1OTgyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFIavHAFqTQ4MTQ3NDEyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwODU5ODIz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#pullrequestreview-480859823", "createdAt": "2020-09-02T14:10:19Z", "commit": {"oid": "3a3dd2ca6acf9644ce1d2a786fc76c3eabb8c33c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNDoxMDoxOVrOHLxA7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNDoxMDoxOVrOHLxA7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA5OTQzNw==", "bodyText": "Please review the order of method. Before this change it was somewhat logical if you look at parameter types. Now it seems to me as more chaotic.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#discussion_r482099437", "createdAt": "2020-09-02T14:10:19Z", "author": {"login": "iNikem"}, "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/utils/NetPeerUtils.java", "diffHunk": "@@ -26,24 +26,7 @@\n \n   private NetPeerUtils() {}\n \n-  public static void setNetPeer(Span span, InetSocketAddress remoteConnection) {\n-    if (remoteConnection != null) {\n-      InetAddress remoteAddress = remoteConnection.getAddress();\n-      if (remoteAddress != null) {\n-        setNetPeer(span, remoteAddress);\n-      } else {\n-        // Failed DNS lookup, the host string is the name.\n-        setNetPeer(span, remoteConnection.getHostString(), null);\n-      }\n-      span.setAttribute(SemanticAttributes.NET_PEER_PORT.key(), remoteConnection.getPort());\n-    }\n-  }\n-\n-  public static void setNetPeer(Span span, InetAddress remoteAddress) {\n-    setNetPeer(span, remoteAddress.getHostName(), remoteAddress.getHostAddress());\n-  }\n-\n-  public static void setNetPeer(Span span, String peerName, String peerIp) {\n+  public static void setNetPeer(Span span, String peerName, String peerIp, int port) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a3dd2ca6acf9644ce1d2a786fc76c3eabb8c33c"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a3dd2ca6acf9644ce1d2a786fc76c3eabb8c33c", "author": {"user": {"login": "kubawach", "name": "Jakub Wach"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3a3dd2ca6acf9644ce1d2a786fc76c3eabb8c33c", "committedDate": "2020-09-02T13:56:31Z", "message": "mapping redis (jedis) connection net.peer properties"}, "afterCommit": {"oid": "51bf7a10cd7010d387262540f996556098694b75", "author": {"user": {"login": "kubawach", "name": "Jakub Wach"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/51bf7a10cd7010d387262540f996556098694b75", "committedDate": "2020-09-02T15:38:25Z", "message": "mapping redis (jedis) connection net.peer properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTg1MDE2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#pullrequestreview-480985016", "createdAt": "2020-09-02T16:16:00Z", "commit": {"oid": "51bf7a10cd7010d387262540f996556098694b75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjoxNjowMFrOHL24mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjoxNjowMFrOHL24mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE5NTYxMA==", "bodyText": "Don't forget to remove :)", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#discussion_r482195610", "createdAt": "2020-09-02T16:16:00Z", "author": {"login": "iNikem"}, "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/utils/NetPeerUtils.java", "diffHunk": "@@ -26,24 +26,10 @@\n \n   private NetPeerUtils() {}\n \n-  public static void setNetPeer(Span span, InetSocketAddress remoteConnection) {\n-    if (remoteConnection != null) {\n-      InetAddress remoteAddress = remoteConnection.getAddress();\n-      if (remoteAddress != null) {\n-        setNetPeer(span, remoteAddress);\n-      } else {\n-        // Failed DNS lookup, the host string is the name.\n-        setNetPeer(span, remoteConnection.getHostString(), null);\n-      }\n-      span.setAttribute(SemanticAttributes.NET_PEER_PORT.key(), remoteConnection.getPort());\n-    }\n-  }\n+  public static void setNetPeer(Span span, String peerName, String peerIp, int port) {\n \n-  public static void setNetPeer(Span span, InetAddress remoteAddress) {\n-    setNetPeer(span, remoteAddress.getHostName(), remoteAddress.getHostAddress());\n-  }\n+    System.out.println(\"NAME: \"+peerName+\", IP: \"+peerIp+\", PORT: \"+port);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51bf7a10cd7010d387262540f996556098694b75"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35eb17445713d6667d230e3c670fd0233ecdf2b0", "author": {"user": {"login": "kubawach", "name": "Jakub Wach"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/35eb17445713d6667d230e3c670fd0233ecdf2b0", "committedDate": "2020-09-02T18:46:53Z", "message": "mapping redis (jedis) connection net.peer properties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51bf7a10cd7010d387262540f996556098694b75", "author": {"user": {"login": "kubawach", "name": "Jakub Wach"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/51bf7a10cd7010d387262540f996556098694b75", "committedDate": "2020-09-02T15:38:25Z", "message": "mapping redis (jedis) connection net.peer properties"}, "afterCommit": {"oid": "35eb17445713d6667d230e3c670fd0233ecdf2b0", "author": {"user": {"login": "kubawach", "name": "Jakub Wach"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/35eb17445713d6667d230e3c670fd0233ecdf2b0", "committedDate": "2020-09-02T18:46:53Z", "message": "mapping redis (jedis) connection net.peer properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMjI5MDYx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#pullrequestreview-481229061", "createdAt": "2020-09-02T19:23:13Z", "commit": {"oid": "35eb17445713d6667d230e3c670fd0233ecdf2b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNDc0MTI2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1158#pullrequestreview-481474126", "createdAt": "2020-09-03T03:55:18Z", "commit": {"oid": "35eb17445713d6667d230e3c670fd0233ecdf2b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2550, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}