{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2ODIwMjA5", "number": 1576, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjoyMzozN1rOE3B9gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjozMDoxM1rOE3CCxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTM5MjY1OnYy", "diffSide": "LEFT", "path": "instrumentation/rabbitmq-2.7/src/main/java/io/opentelemetry/javaagent/instrumentation/rabbitmq/amqp/RabbitCommandInstrumentation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjoyMzozN1rOHwJLxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjoyMzozN1rOHwJLxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI0NDE2NA==", "bodyText": "nice to get rid of these \ud83d\udc4d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1576#discussion_r520244164", "createdAt": "2020-11-10T02:23:37Z", "author": {"login": "trask"}, "path": "instrumentation/rabbitmq-2.7/src/main/java/io/opentelemetry/javaagent/instrumentation/rabbitmq/amqp/RabbitCommandInstrumentation.java", "diffHunk": "@@ -72,14 +55,5 @@ public static void setSpanNameAddHeaders(@Advice.This Command command) {\n         tracer().onCommand(span, command);\n       }\n     }\n-\n-    /**\n-     * This instrumentation will match with 2.6, but the channel instrumentation only matches with\n-     * 2.7 because of TracedDelegatingConsumer. This unused method is added to ensure consistent\n-     * muzzle validation by preventing match with 2.6.\n-     */\n-    public static void muzzleCheck(TracedDelegatingConsumer consumer) {\n-      consumer.handleRecoverOk(null);\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbeebe463a2b4af358c35b54702ab787a2a3c98"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTQwMzUyOnYy", "diffSide": "RIGHT", "path": "instrumentation/servlet/servlet-2.2/src/main/java/io/opentelemetry/javaagent/instrumentation/servlet/v2_2/ServletAndFilterChainInstrumentation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjoyOTowM1rOHwJSBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjoyOTowM1rOHwJSBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI0NTc2NA==", "bodyText": "the splitting up of classLoaderMatcher() turned out nice \ud83d\udc4d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1576#discussion_r520245764", "createdAt": "2020-11-10T02:29:03Z", "author": {"login": "trask"}, "path": "instrumentation/servlet/servlet-2.2/src/main/java/io/opentelemetry/javaagent/instrumentation/servlet/v2_2/ServletAndFilterChainInstrumentation.java", "diffHunk": "@@ -11,52 +11,27 @@\n import static java.util.Collections.singletonMap;\n import static net.bytebuddy.matcher.ElementMatchers.isPublic;\n import static net.bytebuddy.matcher.ElementMatchers.named;\n-import static net.bytebuddy.matcher.ElementMatchers.not;\n import static net.bytebuddy.matcher.ElementMatchers.takesArgument;\n \n-import com.google.auto.service.AutoService;\n-import io.opentelemetry.javaagent.tooling.Instrumenter;\n+import io.opentelemetry.javaagent.tooling.TypeInstrumentation;\n import java.util.Map;\n import net.bytebuddy.description.method.MethodDescription;\n import net.bytebuddy.description.type.TypeDescription;\n import net.bytebuddy.matcher.ElementMatcher;\n \n-@AutoService(Instrumenter.class)\n-public final class Servlet2Instrumentation extends Instrumenter.Default {\n+final class ServletAndFilterChainInstrumentation implements TypeInstrumentation {\n \n-  public Servlet2Instrumentation() {\n-    super(\"servlet\", \"servlet-2\");\n-  }\n-\n-  // this is required to make sure servlet 2 instrumentation won't apply to servlet 3\n   @Override\n   public ElementMatcher<ClassLoader> classLoaderMatcher() {\n     // Optimization for expensive typeMatcher.\n-    return hasClassesNamed(\"javax.servlet.http.HttpServlet\")\n-        .and(not(hasClassesNamed(\"javax.servlet.AsyncEvent\", \"javax.servlet.AsyncListener\")));\n+    return hasClassesNamed(\"javax.servlet.http.HttpServlet\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbeebe463a2b4af358c35b54702ab787a2a3c98"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTQwNjE1OnYy", "diffSide": "RIGHT", "path": "instrumentation/servlet/servlet-common/servlet-common.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjozMDoxM1rOHwJTeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMjozMDoxM1rOHwJTeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI0NjEzNg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1576#discussion_r520246136", "createdAt": "2020-11-10T02:30:13Z", "author": {"login": "trask"}, "path": "instrumentation/servlet/servlet-common/servlet-common.gradle", "diffHunk": "@@ -4,7 +4,12 @@ muzzle {\n   pass {\n     group = \"javax.servlet\"\n     module = \"servlet-api\"\n-    versions = \"[2.2,)\"\n+    versions = \"(0,)\"\n+  }\n+  pass {\n+    group = \"javax.servlet\"\n+    module = 'javax.servlet-api'\n+    versions = \"[3.0,)\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbeebe463a2b4af358c35b54702ab787a2a3c98"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4534, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}