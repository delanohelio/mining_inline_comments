{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyODY0NDcx", "number": 1668, "title": "Create javaagent dirs for all instrumentations", "bodyText": "Closes #1638\n#!/bin/bash -e\n\nwhile read dir; do\n  echo \"$dir\"\n  name=$(basename $dir)\n  module=$(echo $dir | sed 's|/|:|g')\n  mkdir temp\n  mv instrumentation/$dir/* temp\n  mv temp instrumentation/$dir/javaagent\n  mv instrumentation/$dir/javaagent/$name.gradle instrumentation/$dir/javaagent/$name-javaagent.gradle\n  find -name '*.gradle' -type f | xargs sed -i \"s/:instrumentation:$module/:instrumentation:$module:javaagent/\"\ndone < list\n\nlist:\nakka-actor-2.5\nakka-http-10.0\napache-camel-2.20\napache-httpasyncclient-4.0\napache-httpclient/apache-httpclient-2.0\napache-httpclient/apache-httpclient-4.0\nasync-http-client-1.9\naws-sdk/aws-sdk-1.11\ncassandra/cassandra-3.0\ncassandra/cassandra-4.0\nclassloaders\ncouchbase/couchbase-2.0\ncouchbase/couchbase-2.6\ndropwizard-views-0.7\nelasticsearch/elasticsearch-rest-5.0\nelasticsearch/elasticsearch-rest-6.4\nelasticsearch/elasticsearch-rest-common\nelasticsearch/elasticsearch-transport-5.0\nelasticsearch/elasticsearch-transport-5.3\nelasticsearch/elasticsearch-transport-6.0\nelasticsearch/elasticsearch-transport-common\nexecutors\nexternal-annotations\nfinatra-2.9\ngeode-1.4\ngoogle-http-client-1.19\ngrizzly-2.0\nguava-10.0\nhibernate/hibernate-3.3\nhibernate/hibernate-4.0\nhibernate/hibernate-4.3\nhibernate/hibernate-common\nhttp-url-connection\nhystrix-1.4\njava-httpclient\njaxrs/jaxrs-1.0\njaxrs/jaxrs-2.0/jaxrs-2.0-common\njaxrs/jaxrs-2.0/jaxrs-2.0-jersey-2.0\njaxrs/jaxrs-2.0/jaxrs-2.0-resteasy-3.0\njaxrs/jaxrs-2.0/jaxrs-2.0-resteasy-3.1\njaxrs-client/jaxrs-client-1.1\njaxrs-client/jaxrs-client-2.0/jaxrs-client-2.0-common\njaxrs-client/jaxrs-client-2.0/jaxrs-client-2.0-jersey-2.0\njaxrs-client/jaxrs-client-2.0/jaxrs-client-2.0-resteasy-2.0\njdbc\njedis/jedis-1.4\njedis/jedis-3.0\njetty-8.0\njms-1.1\njsp-2.3\nkafka-clients-0.11\nkafka-streams-0.11\nkhttp-0.1\nkotlinx-coroutines\nkubernetes-client-7.0\nlettuce/lettuce-4.0\nlettuce/lettuce-5.0\nlettuce/lettuce-5.1\nlettuce/lettuce-common\nlog4j/log4j-1.2\nlog4j/log4j-2.7\nmethods\nmongo/mongo-3.1\nmongo/mongo-3.7\nmongo/mongo-async-3.3\nmongo/mongo-common\nnetty/netty-3.8\nnetty/netty-4.0\nnetty/netty-4.1\nokhttp/okhttp-2.2\nokhttp/okhttp-3.0\nopentelemetry-annotations-1.0\nopentelemetry-api-1.0\nplay/play-2.3\nplay/play-2.4\nplay/play-2.6\nplay-ws/play-ws-1.0\nplay-ws/play-ws-2.0\nplay-ws/play-ws-2.1\nplay-ws/play-ws-common\nrabbitmq-2.7\nratpack-1.4\nreactor-3.1\nreactor-netty-0.9\nrediscala-1.8\nredisson-3.0\nrmi\nscala-executors\nservlet/servlet-2.2\nservlet/servlet-3.0\nservlet/servlet-common\nspark-2.3\nspring/spring-data-1.8\nspring/spring-scheduling-3.1\nspymemcached-2.12\ntwilio-6.6\nvertx-reactive-3.5\nvertx-web-3.0", "createdAt": "2020-11-18T02:25:13Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668", "merged": true, "mergeCommit": {"oid": "5f263644da9383616016d2cc007a3301f7885c4b"}, "closed": true, "closedAt": "2020-11-29T05:04:17Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeMfOmABqjQwMTg1NjUwNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhJL08ABqjQwNDg2OTc5MzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0673fe132c6ffd612ba79091440c83585212a9d8", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0673fe132c6ffd612ba79091440c83585212a9d8", "committedDate": "2020-11-18T02:21:55Z", "message": "Remaining modules"}, "afterCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a4f99b4d0d9feaab9f60512469e37c5e19818fad", "committedDate": "2020-11-20T00:47:36Z", "message": "Add note about kotlin coroutine library instrumentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MzcyMzcw", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#pullrequestreview-535372370", "createdAt": "2020-11-20T12:06:07Z", "commit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMjowNjowN1rOH3NGmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMjowNjowN1rOH3NGmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0ODQwOQ==", "bodyText": "rxjava-1.0 looks more like a library instrumentation, should we add javaagent here?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#discussion_r527648409", "createdAt": "2020-11-20T12:06:07Z", "author": {"login": "mateuszrzeszutek"}, "path": "settings.gradle", "diffHunk": "@@ -144,39 +144,39 @@ include ':instrumentation:mongo:mongo-3.7'\n include ':instrumentation:mongo:mongo-async-3.3'\n include ':instrumentation:mongo:mongo-common'\n include ':instrumentation:mongo:mongo-testing'\n-include ':instrumentation:netty:netty-3.8'\n-include ':instrumentation:netty:netty-4.0'\n-include ':instrumentation:netty:netty-4.1'\n-include ':instrumentation:okhttp:okhttp-2.2'\n-include ':instrumentation:okhttp:okhttp-3.0'\n-include ':instrumentation:opentelemetry-api-beta'\n+include ':instrumentation:netty:netty-3.8:javaagent'\n+include ':instrumentation:netty:netty-4.0:javaagent'\n+include ':instrumentation:netty:netty-4.1:javaagent'\n+include ':instrumentation:okhttp:okhttp-2.2:javaagent'\n+include ':instrumentation:okhttp:okhttp-3.0:javaagent'\n+include ':instrumentation:opentelemetry-api-beta:javaagent'\n include ':instrumentation:oshi:javaagent'\n include ':instrumentation:oshi:library'\n-include ':instrumentation:play:play-2.3'\n-include ':instrumentation:play:play-2.4'\n-include ':instrumentation:play:play-2.6'\n-include ':instrumentation:play-ws:play-ws-1.0'\n-include ':instrumentation:play-ws:play-ws-2.0'\n-include ':instrumentation:play-ws:play-ws-2.1'\n-include ':instrumentation:play-ws:play-ws-common'\n+include ':instrumentation:play:play-2.3:javaagent'\n+include ':instrumentation:play:play-2.4:javaagent'\n+include ':instrumentation:play:play-2.6:javaagent'\n+include ':instrumentation:play-ws:play-ws-1.0:javaagent'\n+include ':instrumentation:play-ws:play-ws-2.0:javaagent'\n+include ':instrumentation:play-ws:play-ws-2.1:javaagent'\n+include ':instrumentation:play-ws:play-ws-common:javaagent'\n include ':instrumentation:play-ws:play-ws-testing'\n-include ':instrumentation:rabbitmq-2.7'\n-include ':instrumentation:ratpack-1.4'\n-include ':instrumentation:reactor-3.1'\n-include ':instrumentation:reactor-netty-0.9'\n-include ':instrumentation:rediscala-1.8'\n-include ':instrumentation:redisson-3.0'\n-include ':instrumentation:rmi'\n-include ':instrumentation:rxjava-1.0'\n-include ':instrumentation:rxjava-1.0'\n-include ':instrumentation:scala-concurrent'\n+include ':instrumentation:rabbitmq-2.7:javaagent'\n+include ':instrumentation:ratpack-1.4:javaagent'\n+include ':instrumentation:reactor-3.1:javaagent'\n+include ':instrumentation:reactor-netty-0.9:javaagent'\n+include ':instrumentation:rediscala-1.8:javaagent'\n+include ':instrumentation:redisson-3.0:javaagent'\n+include ':instrumentation:rmi:javaagent'\n+include ':instrumentation:rxjava-1.0:javaagent'\n+include ':instrumentation:rxjava-1.0:javaagent'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "originalPosition": 203}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDI1OTY2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#pullrequestreview-535425966", "createdAt": "2020-11-20T13:28:16Z", "commit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzoyODoxN1rOH3PoCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzozMzoyMlrOH3Pz0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY4OTczOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              // Netty is used, but it adds complexity to the tests since we're using embedded ES.\n          \n          \n            \n              //TODO: review the following claim, we are not using embedded ES anymore\n          \n          \n            \n              // Netty is used, but it adds complexity to the tests since we're using embedded ES.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#discussion_r527689739", "createdAt": "2020-11-20T13:28:17Z", "author": {"login": "iNikem"}, "path": "instrumentation/elasticsearch/elasticsearch-rest-6.4/javaagent/elasticsearch-rest-6.4-javaagent.gradle", "diffHunk": "@@ -23,12 +23,12 @@ testSets {\n dependencies {\n   compileOnly group: 'org.elasticsearch.client', name: 'elasticsearch-rest-client', version: '6.4.0'\n \n-  implementation project(':instrumentation:elasticsearch:elasticsearch-rest-common')\n+  implementation project(':instrumentation:elasticsearch:elasticsearch-rest-common:javaagent')\n \n-  testImplementation project(':instrumentation:apache-httpclient:apache-httpclient-4.0')\n-  testImplementation project(':instrumentation:apache-httpasyncclient-4.0')\n+  testImplementation project(':instrumentation:apache-httpclient:apache-httpclient-4.0:javaagent')\n+  testImplementation project(':instrumentation:apache-httpasyncclient-4.0:javaagent')\n   // Netty is used, but it adds complexity to the tests since we're using embedded ES.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY5MDg2Ng==", "bodyText": "I don't think it makes sense to have javaagent sub-module in purely testing modules.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#discussion_r527690866", "createdAt": "2020-11-20T13:29:57Z", "author": {"login": "iNikem"}, "path": "instrumentation/jaxrs/jaxrs-2.0/jaxrs-2.0-jersey-2.0/javaagent/jaxrs-2.0-jersey-2.0-javaagent.gradle", "diffHunk": "@@ -14,10 +14,10 @@ dependencies {\n   compileOnly group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.0'\n   compileOnly group: 'org.glassfish.jersey.core', name: 'jersey-server', version: '2.0'\n \n-  implementation project(':instrumentation:jaxrs:jaxrs-2.0:jaxrs-2.0-common')\n+  implementation project(':instrumentation:jaxrs:jaxrs-2.0:jaxrs-2.0-common:javaagent')\n \n-  testImplementation project(':instrumentation:servlet:servlet-3.0')\n-  testImplementation project(':instrumentation:jaxrs:jaxrs-2.0:jaxrs-2.0-testing')\n+  testImplementation project(':instrumentation:servlet:servlet-3.0:javaagent')\n+  testImplementation project(':instrumentation:jaxrs:jaxrs-2.0:jaxrs-2.0-testing:javaagent')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY5Mjc1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            include ':instrumentation:rxjava-1.0:javaagent'\n          \n          \n            \n            include ':instrumentation:rxjava-1.0:javaagent'\n          \n          \n            \n            include ':instrumentation:rxjava-1.0:javaagent'", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1668#discussion_r527692752", "createdAt": "2020-11-20T13:33:22Z", "author": {"login": "iNikem"}, "path": "settings.gradle", "diffHunk": "@@ -144,39 +144,39 @@ include ':instrumentation:mongo:mongo-3.7'\n include ':instrumentation:mongo:mongo-async-3.3'\n include ':instrumentation:mongo:mongo-common'\n include ':instrumentation:mongo:mongo-testing'\n-include ':instrumentation:netty:netty-3.8'\n-include ':instrumentation:netty:netty-4.0'\n-include ':instrumentation:netty:netty-4.1'\n-include ':instrumentation:okhttp:okhttp-2.2'\n-include ':instrumentation:okhttp:okhttp-3.0'\n-include ':instrumentation:opentelemetry-api-beta'\n+include ':instrumentation:netty:netty-3.8:javaagent'\n+include ':instrumentation:netty:netty-4.0:javaagent'\n+include ':instrumentation:netty:netty-4.1:javaagent'\n+include ':instrumentation:okhttp:okhttp-2.2:javaagent'\n+include ':instrumentation:okhttp:okhttp-3.0:javaagent'\n+include ':instrumentation:opentelemetry-api-beta:javaagent'\n include ':instrumentation:oshi:javaagent'\n include ':instrumentation:oshi:library'\n-include ':instrumentation:play:play-2.3'\n-include ':instrumentation:play:play-2.4'\n-include ':instrumentation:play:play-2.6'\n-include ':instrumentation:play-ws:play-ws-1.0'\n-include ':instrumentation:play-ws:play-ws-2.0'\n-include ':instrumentation:play-ws:play-ws-2.1'\n-include ':instrumentation:play-ws:play-ws-common'\n+include ':instrumentation:play:play-2.3:javaagent'\n+include ':instrumentation:play:play-2.4:javaagent'\n+include ':instrumentation:play:play-2.6:javaagent'\n+include ':instrumentation:play-ws:play-ws-1.0:javaagent'\n+include ':instrumentation:play-ws:play-ws-2.0:javaagent'\n+include ':instrumentation:play-ws:play-ws-2.1:javaagent'\n+include ':instrumentation:play-ws:play-ws-common:javaagent'\n include ':instrumentation:play-ws:play-ws-testing'\n-include ':instrumentation:rabbitmq-2.7'\n-include ':instrumentation:ratpack-1.4'\n-include ':instrumentation:reactor-3.1'\n-include ':instrumentation:reactor-netty-0.9'\n-include ':instrumentation:rediscala-1.8'\n-include ':instrumentation:redisson-3.0'\n-include ':instrumentation:rmi'\n-include ':instrumentation:rxjava-1.0'\n-include ':instrumentation:rxjava-1.0'\n-include ':instrumentation:scala-concurrent'\n+include ':instrumentation:rabbitmq-2.7:javaagent'\n+include ':instrumentation:ratpack-1.4:javaagent'\n+include ':instrumentation:reactor-3.1:javaagent'\n+include ':instrumentation:reactor-netty-0.9:javaagent'\n+include ':instrumentation:rediscala-1.8:javaagent'\n+include ':instrumentation:redisson-3.0:javaagent'\n+include ':instrumentation:rmi:javaagent'\n+include ':instrumentation:rxjava-1.0:javaagent'\n+include ':instrumentation:rxjava-1.0:javaagent'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad"}, "originalPosition": 203}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4f99b4d0d9feaab9f60512469e37c5e19818fad", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a4f99b4d0d9feaab9f60512469e37c5e19818fad", "committedDate": "2020-11-20T00:47:36Z", "message": "Add note about kotlin coroutine library instrumentation"}, "afterCommit": {"oid": "f1c7185289d37f7c162d4d50ddf76372d62fe237", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f1c7185289d37f7c162d4d50ddf76372d62fe237", "committedDate": "2020-11-22T19:16:25Z", "message": "Feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1f49a46e0c8393701760b28720f40dd82a6b5b0", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b1f49a46e0c8393701760b28720f40dd82a6b5b0", "committedDate": "2020-11-29T04:38:21Z", "message": "Create javaagent dirs for all instrumentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ed6e4869826a7683bea260f91abe26ec89477e4", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1ed6e4869826a7683bea260f91abe26ec89477e4", "committedDate": "2020-11-29T04:38:22Z", "message": "Add note about kotlin coroutine library instrumentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f00eaccf0180d6aa8f9d6db53f136f7d55f0674", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4f00eaccf0180d6aa8f9d6db53f136f7d55f0674", "committedDate": "2020-11-29T04:38:23Z", "message": "Feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1c7185289d37f7c162d4d50ddf76372d62fe237", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f1c7185289d37f7c162d4d50ddf76372d62fe237", "committedDate": "2020-11-22T19:16:25Z", "message": "Feedback"}, "afterCommit": {"oid": "4f00eaccf0180d6aa8f9d6db53f136f7d55f0674", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4f00eaccf0180d6aa8f9d6db53f136f7d55f0674", "committedDate": "2020-11-29T04:38:23Z", "message": "Feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2277, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}