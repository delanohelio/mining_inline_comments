{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MTA4MTQ4", "number": 1606, "title": "Instrument java.servlet.Filter directly", "bodyText": "I'm not sure why we instrument java.servlet.FilterChain.doFilter() instead of the more general java.servlet.Filter.doFilter().\nLet's see if any tests fail with this change \ud83d\ude02.\nSee #1578", "createdAt": "2020-11-09T23:32:01Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1606", "merged": true, "mergeCommit": {"oid": "80b068b459c020d7033b44f73e29fb15e23725c6"}, "closed": true, "closedAt": "2020-11-19T03:59:29Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbBtbfgBqjM5NzY5MjA1Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddqnXbgFqTUzMzI0NDc0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc9cf8cc35def4862d82ad614f82cd795f624457", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cc9cf8cc35def4862d82ad614f82cd795f624457", "committedDate": "2020-11-10T02:55:52Z", "message": "Merge remote-tracking branch 'upstream/master' into instrument-filter-directly"}, "afterCommit": {"oid": "5538fdfc588feec975cbfb98d07bcdff1216406d", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5538fdfc588feec975cbfb98d07bcdff1216406d", "committedDate": "2020-11-10T04:32:24Z", "message": "Remove some additional ignores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfdd8749f04f1eb977371ed18a3e6aa0d0fe7675", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/bfdd8749f04f1eb977371ed18a3e6aa0d0fe7675", "committedDate": "2020-11-18T02:33:09Z", "message": "Instrument filter directly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e01e318d3ab90ecab28f0bc15f49520aafd4f57", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5e01e318d3ab90ecab28f0bc15f49520aafd4f57", "committedDate": "2020-11-18T02:33:10Z", "message": "Remove some additional ignores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14cd6b40a684394597cc0bf88698940dbc531543", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/14cd6b40a684394597cc0bf88698940dbc531543", "committedDate": "2020-11-18T03:36:38Z", "message": "Fix OncePerRequestFilter not being instrumented itself"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5538fdfc588feec975cbfb98d07bcdff1216406d", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5538fdfc588feec975cbfb98d07bcdff1216406d", "committedDate": "2020-11-10T04:32:24Z", "message": "Remove some additional ignores"}, "afterCommit": {"oid": "14cd6b40a684394597cc0bf88698940dbc531543", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/14cd6b40a684394597cc0bf88698940dbc531543", "committedDate": "2020-11-18T03:36:38Z", "message": "Fix OncePerRequestFilter not being instrumented itself"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMTgwMDEz", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1606#pullrequestreview-533180013", "createdAt": "2020-11-18T07:57:47Z", "commit": {"oid": "14cd6b40a684394597cc0bf88698940dbc531543"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNzo1Nzo0N1rOH1hDFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNzo1Nzo0N1rOH1hDFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTg3ODAzNg==", "bodyText": "can't have helper class extend OncePerRequestFilter, because then OncePerRequestFilter won't be instrumented itself", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1606#discussion_r525878036", "createdAt": "2020-11-18T07:57:47Z", "author": {"login": "trask"}, "path": "instrumentation/spring/spring-webmvc-3.1/javaagent/src/main/java/io/opentelemetry/javaagent/instrumentation/springwebmvc/HandlerMappingResourceNameFilter.java", "diffHunk": "@@ -12,33 +12,44 @@\n import io.opentelemetry.instrumentation.api.tracer.BaseTracer;\n import java.io.IOException;\n import java.util.List;\n+import javax.servlet.Filter;\n import javax.servlet.FilterChain;\n+import javax.servlet.FilterConfig;\n import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n import org.springframework.beans.factory.support.GenericBeanDefinition;\n import org.springframework.core.Ordered;\n-import org.springframework.web.filter.OncePerRequestFilter;\n import org.springframework.web.servlet.HandlerExecutionChain;\n import org.springframework.web.servlet.HandlerMapping;\n \n-public class HandlerMappingResourceNameFilter extends OncePerRequestFilter implements Ordered {\n+public class HandlerMappingResourceNameFilter implements Filter, Ordered {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14cd6b40a684394597cc0bf88698940dbc531543"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjQ0NzQ3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1606#pullrequestreview-533244747", "createdAt": "2020-11-18T09:20:03Z", "commit": {"oid": "14cd6b40a684394597cc0bf88698940dbc531543"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2203, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}