{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjUxNjM0", "number": 241, "title": "Better span names for kafka", "bodyText": "3 things going on in this PR:\n\n\nUpdate span names, based on guidance at the almost merged open-telemetry/opentelemetry-specification#418\n\n\nUse span name destination if not able to calculate destination for some other reason (open-telemetry/opentelemetry-specification#418 doesn't specify default, probably will need to revisit this later)\n\n\nRemove resource.name attribute, which used to serve similar purpose to span name", "createdAt": "2020-03-18T20:36:38Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241", "merged": true, "mergeCommit": {"oid": "56a1227afe1cda4456f6c0375c333e0c4256cfc7"}, "closed": true, "closedAt": "2020-03-18T22:55:28Z", "author": {"login": "trask"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO9ZquAH2gAyMzkwNjUxNjM0OjBiYTZmZWIyMThlNTFiNjUyMjVhOGY5MDA3ZDgwODJjYTAyYWRjMTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO-5sOgH2gAyMzkwNjUxNjM0OmUwMDRlNmNiZmQ5NGQyN2VlYWY1MmQwNzMxMjA1OWIzNzNhNWE0Yzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0ba6feb218e51b65225a8f9007d8082ca02adc17", "committedDate": "2020-03-18T20:33:16Z", "message": "Better span names for kafka"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjYzODAy", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#pullrequestreview-377263802", "createdAt": "2020-03-18T21:56:37Z", "commit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMTo1NjozOFrOF4YSgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMTo1NjozOFrOF4YSgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MjUyOA==", "bodyText": "this else is redundant, since the if has a return in it.", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394662528", "createdAt": "2020-03-18T21:56:38Z", "author": {"login": "jkwatson"}, "path": "instrumentation/kafka-clients-0.11/src/main/java/io/opentelemetry/auto/instrumentation/kafka_clients/KafkaDecorator.java", "diffHunk": "@@ -54,24 +53,35 @@ protected String getComponentName() {\n     return \"java-kafka\";\n   }\n \n-  public void onConsume(final Span span, final ConsumerRecord record) {\n+  public String spanNameOnConsume(final ConsumerRecord record) {\n+    final String topic = record.topic();\n+    if (topic != null) {\n+      return topic;\n+    } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjY5Mzc0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#pullrequestreview-377269374", "createdAt": "2020-03-18T22:07:25Z", "commit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjowNzoyNVrOF4YkGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjowNzoyNVrOF4YkGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NzAzMg==", "bodyText": "just curious (not trying to be critical), but why wouldn't you put the else block in this case, but you would below?", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394667032", "createdAt": "2020-03-18T22:07:25Z", "author": {"login": "jkwatson"}, "path": "instrumentation/kafka-streams-0.11/src/main/java/io/opentelemetry/auto/instrumentation/kafka_streams/KafkaStreamsDecorator.java", "diffHunk": "@@ -44,10 +43,20 @@ protected String getSpanType() {\n     return SpanTypes.MESSAGE_CONSUMER;\n   }\n \n+  public String spanNameForConsume(final StampedRecord record) {\n+    if (record == null) {\n+      return null;\n+    }\n+    final String topic = record.topic();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mjc0MTg1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#pullrequestreview-377274185", "createdAt": "2020-03-18T22:17:11Z", "commit": {"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e004e6cbfd94d27eeaf52d07312059b373a5a4c7", "author": {"user": {"login": "trask", "name": "Trask Stalnaker"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e004e6cbfd94d27eeaf52d07312059b373a5a4c7", "committedDate": "2020-03-18T22:18:09Z", "message": "Merge branch 'master' into better-span-names-kafka"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3268, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}