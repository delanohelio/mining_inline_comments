{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNTkzODkw", "number": 421, "title": "Separate out core instrumentation for AWS SDK to allow manual setup o\u2026", "bodyText": "\u2026f instrumentation.\nRelated: #45\n@trask Created this WIP PR exloring separating out the core instrumentation of AWS SDK so it can be used directly by users without the agent. Let me know if this is the direction you had in mind.\nI haven't dug into the testing story yet, interestingly in this case, which may not apply for other instrumentation, the manual instrumentation misses out on the feature of being able to propagate context to Netty instrumentation (agent is doing quite an invasive AOP to enable it), so the agent and non-agent would need different test cases anyways.\nLet me know if you have any thoughts!\n/cc @shengxil", "createdAt": "2020-05-20T08:31:31Z", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421", "merged": true, "mergeCommit": {"oid": "d4a14f6b98cdad4048a64c9fa7f6a4ec39ece143"}, "closed": true, "closedAt": "2020-05-27T17:43:57Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjExizAH2gAyNDIwNTkzODkwOjE5ZjMxNGNiYTE3NGYzNTNjNTFmMzU4MWRhNGRmYWFiY2U5NTU4ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclc7YegFqTQxOTQ2MzY3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "19f314cba174f353c51f3581da4dfaabce9558d1", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/19f314cba174f353c51f3581da4dfaabce9558d1", "committedDate": "2020-05-20T08:27:10Z", "message": "Separate out core instrumentation for AWS SDK to allow manual setup of instrumentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODQxNDE1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421#pullrequestreview-415841415", "createdAt": "2020-05-21T02:39:04Z", "commit": {"oid": "19f314cba174f353c51f3581da4dfaabce9558d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMjozOTowNFrOGYkTLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMjozOTowNFrOGYkTLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQxMzc0Mw==", "bodyText": "This should make ./gradlew :instrumentation:aws-sdk:aws-sdk-2.2:muzzle pass:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  packageName + \".TracingExecutionInterceptor\",\n          \n          \n            \n                  \"io.opentelemetry.instrumentation.awssdk.v2_2.AwsSdk\",\n          \n          \n            \n                  \"io.opentelemetry.instrumentation.awssdk.v2_2.AwsSdkClientDecorator\",\n          \n          \n            \n                  packageName + \".TracingExecutionInterceptor\",", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421#discussion_r428413743", "createdAt": "2020-05-21T02:39:04Z", "author": {"login": "trask"}, "path": "instrumentation/aws-sdk/aws-sdk-2.2/src/main/java/io/opentelemetry/auto/instrumentation/awssdk/v2_2/AbstractAwsClientInstrumentation.java", "diffHunk": "@@ -27,9 +27,8 @@ public AbstractAwsClientInstrumentation() {\n   @Override\n   public String[] helperClassNames() {\n     return new String[] {\n-      packageName + \".AwsSdkClientDecorator\",\n       packageName + \".TracingExecutionInterceptor\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19f314cba174f353c51f3581da4dfaabce9558d1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb33c4db8a3540657238569f65ac6c319106c30f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/cb33c4db8a3540657238569f65ac6c319106c30f", "committedDate": "2020-05-21T05:04:14Z", "message": "Instrumentation core test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27fc298c4989d6b023feae212109c23d5fd32abb", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/27fc298c4989d6b023feae212109c23d5fd32abb", "committedDate": "2020-05-21T05:49:26Z", "message": "Tests and use CLIENT for manual instrumentation.:"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad3231a610beff8000573ea4ddc8f641e176f736", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ad3231a610beff8000573ea4ddc8f641e176f736", "committedDate": "2020-05-22T00:15:55Z", "message": "Oops:"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c0796a3cd74c70626a84f39b47e9b1d9159bd54", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9c0796a3cd74c70626a84f39b47e9b1d9159bd54", "committedDate": "2020-05-22T00:17:22Z", "message": "Fix comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3d4b8cb2c9395936429842fca3159e387127a12", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c3d4b8cb2c9395936429842fca3159e387127a12", "committedDate": "2020-05-22T01:21:33Z", "message": "Groovy but not muzzled."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed5b4ee335ddb64a0f5088c5c194984d7bcd4dc0", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ed5b4ee335ddb64a0f5088c5c194984d7bcd4dc0", "committedDate": "2020-05-22T02:34:00Z", "message": "Spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3522240bbfb5cc7d5b020e2f79bca0225bd84f95", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3522240bbfb5cc7d5b020e2f79bca0225bd84f95", "committedDate": "2020-05-26T03:31:01Z", "message": "Take the muzzle off of 2.1.4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e2697c86fcea82e00ca808c5de3862d796404fa", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9e2697c86fcea82e00ca808c5de3862d796404fa", "committedDate": "2020-05-26T05:20:14Z", "message": "Format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d22af7bb64b634b907ebce67d36b8c6bcdc3194", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4d22af7bb64b634b907ebce67d36b8c6bcdc3194", "committedDate": "2020-05-27T00:45:28Z", "message": "Merge branch 'master' into split-aws-sdk-instrumentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODY0NjIw", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421#pullrequestreview-418864620", "createdAt": "2020-05-27T05:22:58Z", "commit": {"oid": "4d22af7bb64b634b907ebce67d36b8c6bcdc3194"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyMjo1OFrOGa5zrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyMjo1OFrOGa5zrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MzI3Ng==", "bodyText": "I think this is a bit more consistent with other instrumentation to align the lower bound with the min version that we test (and the muzzle build should still pass):\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                versions = \"[2.1.4,)\"\n          \n          \n            \n                assertInverse = true\n          \n          \n            \n                versions = \"[2.2.0,)\"", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421#discussion_r430863276", "createdAt": "2020-05-27T05:22:58Z", "author": {"login": "trask"}, "path": "instrumentation/aws-sdk/aws-sdk-2.2/aws-sdk-2.2.gradle", "diffHunk": "@@ -9,7 +9,7 @@ muzzle {\n   pass {\n     group = \"software.amazon.awssdk\"\n     module = \"aws-core\"\n-    versions = \"[2.2.0,)\"\n+    versions = \"[2.1.4,)\"\n     assertInverse = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d22af7bb64b634b907ebce67d36b8c6bcdc3194"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29932a59a0180065e6402c84c93c1749a1a93f98", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/29932a59a0180065e6402c84c93c1749a1a93f98", "committedDate": "2020-05-27T06:11:52Z", "message": "Update instrumentation/aws-sdk/aws-sdk-2.2/aws-sdk-2.2.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29c2c213989b9b9b14939479d0c19ab00011ccf4", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/29c2c213989b9b9b14939479d0c19ab00011ccf4", "committedDate": "2020-05-27T07:48:21Z", "message": "Update README.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDYzNjcx", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/421#pullrequestreview-419463671", "createdAt": "2020-05-27T17:43:29Z", "commit": {"oid": "29c2c213989b9b9b14939479d0c19ab00011ccf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3173, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}