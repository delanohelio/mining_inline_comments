{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDU1NjQ4", "number": 8306, "title": "Routing region fix #7668", "bodyText": "", "createdAt": "2020-01-23T16:36:16Z", "url": "https://github.com/osmandapp/OsmAnd/pull/8306", "merged": true, "mergeCommit": {"oid": "c378b30740d7586daec651d860f4c4ceea7ed9e3"}, "closed": true, "closedAt": "2020-01-28T08:27:59Z", "author": {"login": "MadWasp79"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9F7wJAH2gAyMzY2NDU1NjQ4OmU1Y2E4Nzc4MDI1MTNjNDA1MTQ2MzhhMGI0ZjZjYmM4Nzc2MGIyMjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9f5W6gH2gAyMzY2NDU1NjQ4OjMxNWUxYzM4YTc3ZmFkNWU1MGNlMDk2MGUwZWEzMzI2MzA5OTNjYjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5ca877802513c40514638a0b4f6cbc87760b223", "author": {"user": {"login": "MadWasp79", "name": "Denis Kolomiets"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/e5ca877802513c40514638a0b4f6cbc87760b223", "committedDate": "2020-01-23T08:19:06Z", "message": "fix defining driving region #7668"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0aaddf28c88e4647cd7d88585ebef5e2df7e21c", "author": {"user": {"login": "MadWasp79", "name": "Denis Kolomiets"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/d0aaddf28c88e4647cd7d88585ebef5e2df7e21c", "committedDate": "2020-01-23T08:40:24Z", "message": "fix defining driving region 2 #7668"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69", "author": {"user": {"login": "MadWasp79", "name": "Denis Kolomiets"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/42a7a5d88dc183444fba4fe09f76a87f9c598d69", "committedDate": "2020-01-23T16:31:04Z", "message": "fix defining driving region 3 #7668"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDg1MjAz", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#pullrequestreview-347485203", "createdAt": "2020-01-23T17:40:19Z", "commit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MDoyMFrOFhG6Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MDoyMFrOFhG6Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MDU2Ng==", "bodyText": "should be stored offfline in settings", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370260566", "createdAt": "2020-01-23T17:40:20Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -57,6 +57,7 @@\n \tprivate List<LatLon> intermediatePoints;\n \tprivate Location lastProjection;\n \tprivate Location lastFixedLocation;\n+\tprivate LatLon lastStartLocation = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDg1OTc3", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#pullrequestreview-347485977", "createdAt": "2020-01-23T17:41:40Z", "commit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MTo0MFrOFhG9DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MTo0MFrOFhG9DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTI2MQ==", "bodyText": "Constant ?", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261261", "createdAt": "2020-01-23T17:41:40Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {\n+\t\tLatLon start = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\tif (lastStartLocation == null) {\n+\t\t\tlastStartLocation = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\t\tapp.getMapViewTrackingUtilities().detectDrivingRegion(lastStartLocation);\n+\t\t} else if (MapUtils.getDistance(start, lastStartLocation) > 100000) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDg2NTc4", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#pullrequestreview-347486578", "createdAt": "2020-01-23T17:42:38Z", "commit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MjozOFrOFhG-4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MjozOFrOFhG-4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTcyOA==", "bodyText": "cacheStartLocation method name is wrong ?", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261728", "createdAt": "2020-01-23T17:42:38Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDg2ODIx", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#pullrequestreview-347486821", "createdAt": "2020-01-23T17:43:03Z", "commit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MzowNFrOFhG_sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MzowNFrOFhG_sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTkzNg==", "bodyText": "Potentially duplicate WorldRegion from BinaryMapDataObject is not fixed here!", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261936", "createdAt": "2020-01-23T17:43:04Z", "author": {"login": "vshcherb"}, "path": "OsmAnd-java/src/main/java/net/osmand/map/OsmandRegions.java", "diffHunk": "@@ -743,17 +743,8 @@ public BinaryMapDataObject getSmallestBinaryMapDataObjectAt(List<BinaryMapDataOb\n \t\t\twhile (it.hasNext()) {\n \t\t\t\tBinaryMapDataObject o = it.next();\n \t\t\t\tif (o.getTypes() != null) {\n-\t\t\t\t\tboolean isRegion = true;\n-\t\t\t\t\tfor (int i = 0; i < o.getTypes().length; i++) {\n-\t\t\t\t\t\tTagValuePair tp = o.getMapIndex().decodeType(o.getTypes()[i]);\n-\t\t\t\t\t\tif (\"boundary\".equals(tp.value)) {\n-\t\t\t\t\t\t\tisRegion = false;\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n \t\t\t\t\tWorldRegion downloadRegion = getRegionData(getFullName(o));\n-\t\t\t\t\tif (!isRegion\n-\t\t\t\t\t\t\t|| downloadRegion == null\n+\t\t\t\t\tif ( downloadRegion == null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "576c4330b46efe2b1c04d70cc847c6ecad0d298d", "author": {"user": {"login": "MadWasp79", "name": "Denis Kolomiets"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/576c4330b46efe2b1c04d70cc847c6ecad0d298d", "committedDate": "2020-01-24T13:51:27Z", "message": "refactoring and fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "315e1c38a77fad5e50ce0960e0ea332630993cb6", "author": {"user": {"login": "MadWasp79", "name": "Denis Kolomiets"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/315e1c38a77fad5e50ce0960e0ea332630993cb6", "committedDate": "2020-01-24T14:34:01Z", "message": "typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3591, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}