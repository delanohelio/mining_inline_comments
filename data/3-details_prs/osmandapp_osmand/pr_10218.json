{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNDIxODA5", "number": 10218, "title": "Issue 251 Add photo change visibility to hidden", "bodyText": "Implemented\n\n\nOpenplacereviews files from pull request 10178 copied\nhttps://github.com/osmandapp/OsmAnd/pull/10178/files#diff-95b72b4f22c3469cb18389309559479e3e1ab3fa147df7c232079197bbf7725dR319\n\n\nadd photo hidden", "createdAt": "2020-11-17T13:44:46Z", "url": "https://github.com/osmandapp/OsmAnd/pull/10218", "merged": true, "mergeCommit": {"oid": "6340ba68d9c96d987efe6a16ff6091890f303e88"}, "closed": true, "closedAt": "2020-11-23T14:57:20Z", "author": {"login": "angry010101"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddIOe_AH2gAyNTIyNDIxODA5OmEwNTM0YzcyMzJmZTk3OWQ1MDEwOTU5M2ZiMGRkNGZhOWY5ZmVkZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfVdrxgH2gAyNTIyNDIxODA5OmM3ZjdhOWVmZGNhNGE5M2UyYTEwNTRmMGM3NTEyNDJhOGE0MTQ0ZmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a0534c7232fe979d50109593fb0dd4fa9f9fedda", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/a0534c7232fe979d50109593fb0dd4fa9f9fedda", "committedDate": "2020-11-16T17:16:06Z", "message": "move started"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc6bcbcc59cae192dd986011b5e9005380672a8c", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/bc6bcbcc59cae192dd986011b5e9005380672a8c", "committedDate": "2020-11-16T17:24:06Z", "message": "opr files added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/8ea9ba2925de6e5433cae3e4122b13a0d1b8578e", "committedDate": "2020-11-17T13:42:21Z", "message": "add photo hidden"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzc1MTQx", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#pullrequestreview-532375141", "createdAt": "2020-11-17T13:45:53Z", "commit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0NTo1M1rOH01joA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0NTo1M1rOH01joA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE2NTQ3Mg==", "bodyText": "Here should not be gone, it should be in separate request! And this request we should test with button present", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#discussion_r525165472", "createdAt": "2020-11-17T13:45:53Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/MenuBuilder.java", "diffHunk": "@@ -336,6 +336,8 @@ public void onClick(View view) {\n \t\tb.setTypeface(null, Typeface.BOLD);\n \t\tb.setText(context.getResources().getString(R.string.shared_string_add_photo));\n \t\tb.setBackgroundResource(R.drawable.btn_border_light);\n+\t\t//TODO feature under development\n+\t\tb.setVisibility(View.GONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzc1OTcx", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#pullrequestreview-532375971", "createdAt": "2020-11-17T13:46:50Z", "commit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0Njo1MFrOH01mBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0Njo1MFrOH01mBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE2NjA4Nw==", "bodyText": "Here we need to fix pottential BUG! there is no clear evidence that\n((JSONObject) obj.get(0))\nhas no crash!", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#discussion_r525166087", "createdAt": "2020-11-17T13:46:50Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/cards/ImageCard.java", "diffHunk": "@@ -509,6 +509,7 @@ private void getPicturesForPlace(List<ImageCard> result, long l) {\n \t\t\t\t\t\"Requesting location images...\", false, false);\n \t\t\ttry {\n \t\t\t\tif (!Algorithms.isEmpty(response)) {\n+\t\t\t\t\t//TODO extract place id\n \t\t\t\t\tJSONArray obj = new JSONObject(response).getJSONArray(\"objects\");\n \t\t\t\t\tJSONArray images = ((JSONObject) ((JSONObject) obj.get(0)).get(\"images\")).getJSONArray(\"outdoor\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzc3MzI2", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#pullrequestreview-532377326", "createdAt": "2020-11-17T13:48:16Z", "commit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0ODoxNlrOH01p9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo0ODoxNlrOH01p9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE2NzA5Mg==", "bodyText": "What do we need such small class? Could be emdedded to the service it's used", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#discussion_r525167092", "createdAt": "2020-11-17T13:48:16Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/osmedit/opr/OPRImage.java", "diffHunk": "@@ -0,0 +1,8 @@\n+package net.osmand.plus.osmedit.opr;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzgwMDcx", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#pullrequestreview-532380071", "createdAt": "2020-11-17T13:51:11Z", "commit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo1MToxMlrOH01yJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzo1MToxMlrOH01yJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE2OTE5MQ==", "bodyText": "local variable OPRImage - guidelines?", "url": "https://github.com/osmandapp/OsmAnd/pull/10218#discussion_r525169191", "createdAt": "2020-11-17T13:51:12Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/osmedit/opr/OpenDBAPI.java", "diffHunk": "@@ -0,0 +1,107 @@\n+package net.osmand.plus.osmedit.opr;\n+\n+import android.net.TrafficStats;\n+import android.os.Build;\n+import com.google.gson.GsonBuilder;\n+import net.osmand.PlatformUtil;\n+import net.osmand.plus.BuildConfig;\n+import org.apache.commons.logging.Log;\n+import org.bouncycastle.jce.provider.BouncyCastleProvider;\n+import org.openplacereviews.opendb.SecUtils;\n+import org.openplacereviews.opendb.ops.OpOperation;\n+import org.openplacereviews.opendb.util.JsonFormatter;\n+import org.openplacereviews.opendb.util.exception.FailedVerificationException;\n+\n+import java.io.BufferedReader;\n+import java.io.DataOutputStream;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.net.HttpURLConnection;\n+import java.net.URL;\n+import java.security.KeyPair;\n+import java.security.Security;\n+import java.util.*;\n+\n+import static org.openplacereviews.opendb.SecUtils.*;\n+\n+\n+public class OpenDBAPI {\n+\tprivate static final Log log = PlatformUtil.getLog(SecUtils.class);\n+\n+\tprivate static final int THREAD_ID = 11200;\n+\n+\tpublic int uploadImage(String[] placeId, String privateKey, String username, String image) throws FailedVerificationException {\n+\t\tif (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {\n+\t\t\tSecurity.removeProvider(\"BC\");\n+\t\t\tSecurity.addProvider(new BouncyCastleProvider());\n+\t\t}\n+\t\tKeyPair kp = SecUtils.getKeyPair(ALGO_EC, privateKey, null);\n+\t\tString signed = username;// + \":opr-web\";\n+\n+\t\tJsonFormatter formatter = new JsonFormatter();\n+\t\tOPRImage OPRImage = new GsonBuilder().create().fromJson(image, OPRImage.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ea9ba2925de6e5433cae3e4122b13a0d1b8578e"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bde2da819f7b6fd4543a58ca186c8b584780def", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/2bde2da819f7b6fd4543a58ca186c8b584780def", "committedDate": "2020-11-17T15:07:16Z", "message": "adding image id code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b0ab427a055f4699b963585ef63d0473b0ff52", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/14b0ab427a055f4699b963585ef63d0473b0ff52", "committedDate": "2020-11-17T16:17:53Z", "message": "add check email functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cef32531b88e54f249a072b64cfa7adf02766c6", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/5cef32531b88e54f249a072b64cfa7adf02766c6", "committedDate": "2020-11-18T16:21:25Z", "message": "encode url bug check login fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c307a0e4fe21cc16d8f9f303de9db1726a5048d1", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/c307a0e4fe21cc16d8f9f303de9db1726a5048d1", "committedDate": "2020-11-20T10:26:23Z", "message": "photo upload feature implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2207239904c016a8f6d9f12082b22bf2e632434", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/a2207239904c016a8f6d9f12082b22bf2e632434", "committedDate": "2020-11-20T12:13:10Z", "message": "ui bug fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4035885842334cca4d2ad32098ca2b6f69ce70d8", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/4035885842334cca4d2ad32098ca2b6f69ce70d8", "committedDate": "2020-11-23T07:51:52Z", "message": "Merge branch 'master' of git://github.com/osmandapp/Osmand into issue_251_android_add_photo_backend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a91901eeefca5c4176940b423f2155dc358a0b2", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/5a91901eeefca5c4176940b423f2155dc358a0b2", "committedDate": "2020-11-23T09:02:02Z", "message": "conflict resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0462f635a8ebf04e5f8b64a9697eedad6481149a", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/0462f635a8ebf04e5f8b64a9697eedad6481149a", "committedDate": "2020-11-23T09:17:18Z", "message": "visibility updated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7f7a9efdca4a93e2a1054f0c751242a8a4144ff", "author": {"user": {"login": "angry010101", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/c7f7a9efdca4a93e2a1054f0c751242a8a4144ff", "committedDate": "2020-11-23T13:49:19Z", "message": "condition added"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3402, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}