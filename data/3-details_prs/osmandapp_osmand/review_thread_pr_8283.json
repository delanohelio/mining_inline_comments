{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MzE0MTE4", "number": 8283, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzoyOFrODZgN9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDowMjoxOVrODaLhiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MDY4ODUzOnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzoyOFrOFf7LYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzoyOFrOFf7LYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxOTc0NQ==", "bodyText": "??? delete", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r369019745", "createdAt": "2020-01-21T14:07:28Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "diffHunk": "@@ -193,7 +192,7 @@ public void registerLayers(MapActivity activity) {\n \t\t\tactivity.getMapView().removeLayer(parkingLayer);\n \t\t}\n \t\tparkingLayer = new ParkingPositionLayer(activity, this);\n-\t\tactivity.getMapView().addLayer(parkingLayer, 5.5f);\n+//\t\tactivity.getMapView().addLayer(parkingLayer, 5.5f);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MDY4OTA5OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzozN1rOFf7Lsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzozN1rOFf7Lsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxOTgyNw==", "bodyText": "ParkingPositionLayer - delete", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r369019827", "createdAt": "2020-01-21T14:07:37Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "diffHunk": "@@ -193,7 +192,7 @@ public void registerLayers(MapActivity activity) {\n \t\t\tactivity.getMapView().removeLayer(parkingLayer);\n \t\t}\n \t\tparkingLayer = new ParkingPositionLayer(activity, this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Nzc4Mzc2OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/base/FavoriteImageDrawable.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDowMjoxOVrOFg_KoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDowMjoxOVrOFg_KoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEzMzY2NA==", "bodyText": "should be cut", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r370133664", "createdAt": "2020-01-23T14:02:19Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/base/FavoriteImageDrawable.java", "diffHunk": "@@ -42,31 +41,39 @@\n \tprivate Paint paintInnerCircle = new Paint();\n \tprivate ColorFilter colorFilter;\n \tprivate ColorFilter grayFilter;\n-\tprivate Drawable personalPointBitmap;\n \n \tprivate FavoriteImageDrawable(Context ctx, int color, boolean withShadow, boolean synced, FavouritePoint point) {\n \t\tthis.withShadow = withShadow;\n \t\tthis.synced = synced;\n \t\tResources res = ctx.getResources();\n \t\tint overlayIconId = point != null ? point.getOverlayIconId() : 0;\n \t\tif (overlayIconId != 0) {\n-\t\t\tpersonalPointBitmap = UiUtilities.tintDrawable(ResourcesCompat.getDrawable(res, overlayIconId, null),\n-\t\t\t\t\tContextCompat.getColor(ctx, R.color.icon_color_default_light));\n+\t\t\tfavIcon = ((OsmandApplication) ctx.getApplicationContext()).getUIUtilities()\n+\t\t\t\t\t.getIcon(getMapIconId(ctx, overlayIconId), R.color.color_white);\n+\t\t\tlistDrawable = ((OsmandApplication) ctx.getApplicationContext()).getUIUtilities()\n+\t\t\t\t\t.getIcon(overlayIconId, R.color.color_white);\n+\t\t} else {\n+\t\t\tfavIcon = res.getDrawable(R.drawable.map_favorite);\n+\t\t\tlistDrawable = ResourcesCompat.getDrawable(res, R.drawable.ic_action_fav_dark, null).mutate();\n \t\t}\n \t\tint col = color == 0 || color == Color.BLACK ? res.getColor(R.color.color_favorite) : color;\n-\t\tfavIcon = BitmapFactory.decodeResource(res, R.drawable.map_favorite);\n \t\tfavBackground = BitmapFactory.decodeResource(res, R.drawable.map_white_favorite_shield);\n \t\tsyncedStroke = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_stroke);\n \t\tsyncedColor = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_color);\n \t\tsyncedShadow = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_shadow);\n \t\tsyncedIcon = BitmapFactory.decodeResource(res, R.drawable.map_marker_point_14dp);\n-\t\tlistDrawable = ResourcesCompat.getDrawable(res, R.drawable.ic_action_fav_dark, null).mutate();\n \t\tinitSimplePaint(paintOuter, color == 0 || color == Color.BLACK ? 0x88555555 : color);\n \t\tinitSimplePaint(paintInnerCircle, col);\n \t\tcolorFilter = new PorterDuffColorFilter(col, PorterDuff.Mode.MULTIPLY);\n \t\tgrayFilter = new PorterDuffColorFilter(res.getColor(R.color.color_favorite_gray), PorterDuff.Mode.MULTIPLY);\n \t}\n \n+\tprivate int getMapIconId(Context ctx, int iconId) {\n+\t\tString iconName = ctx.getResources().getResourceEntryName(iconId);\n+\t\treturn ctx.getResources().getIdentifier(iconName\n+\t\t\t\t.replaceFirst(\"mx_\", \"mm_\"), \"drawable\", ctx.getPackageName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e974d7ca72fdbed62eef645292321c17824d172a"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3388, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}