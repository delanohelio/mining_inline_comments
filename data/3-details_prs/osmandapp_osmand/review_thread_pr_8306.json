{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDU1NjQ4", "number": 8306, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MDoyMFrODaQYPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MzowNFrODaQbrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODU3OTE4OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MDoyMFrOFhG6Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwODo0NjowNVrOFhW8JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MDU2Ng==", "bodyText": "should be stored offfline in settings", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370260566", "createdAt": "2020-01-23T17:40:20Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -57,6 +57,7 @@\n \tprivate List<LatLon> intermediatePoints;\n \tprivate Location lastProjection;\n \tprivate Location lastFixedLocation;\n+\tprivate LatLon lastStartLocation = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUyMzE3Mg==", "bodyText": "fixed", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370523172", "createdAt": "2020-01-24T08:46:05Z", "author": {"login": "MadWasp79"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -57,6 +57,7 @@\n \tprivate List<LatLon> intermediatePoints;\n \tprivate Location lastProjection;\n \tprivate Location lastFixedLocation;\n+\tprivate LatLon lastStartLocation = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MDU2Ng=="}, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODU4Mzk3OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MTo0MFrOFhG9DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwODo0NjowMVrOFhW8DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTI2MQ==", "bodyText": "Constant ?", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261261", "createdAt": "2020-01-23T17:41:40Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {\n+\t\tLatLon start = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\tif (lastStartLocation == null) {\n+\t\t\tlastStartLocation = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\t\tapp.getMapViewTrackingUtilities().detectDrivingRegion(lastStartLocation);\n+\t\t} else if (MapUtils.getDistance(start, lastStartLocation) > 100000) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTU4Mw==", "bodyText": "Could be 1 line \"lastStartLocation == null || MapUtils.getDistance(start, lastStartLocation) < CACHE_RADIUS )", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261583", "createdAt": "2020-01-23T17:42:20Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {\n+\t\tLatLon start = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\tif (lastStartLocation == null) {\n+\t\t\tlastStartLocation = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\t\tapp.getMapViewTrackingUtilities().detectDrivingRegion(lastStartLocation);\n+\t\t} else if (MapUtils.getDistance(start, lastStartLocation) > 100000) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTI2MQ=="}, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUyMzE0OQ==", "bodyText": "fixed", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370523149", "createdAt": "2020-01-24T08:46:01Z", "author": {"login": "MadWasp79"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {\n+\t\tLatLon start = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\tif (lastStartLocation == null) {\n+\t\t\tlastStartLocation = new LatLon(nextStartLocation.getLatitude(), nextStartLocation.getLongitude());\n+\t\t\tapp.getMapViewTrackingUtilities().detectDrivingRegion(lastStartLocation);\n+\t\t} else if (MapUtils.getDistance(start, lastStartLocation) > 100000) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTI2MQ=="}, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODU4NjY4OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MjozOFrOFhG-4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwODo0NjowM1rOFhW8HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTcyOA==", "bodyText": "cacheStartLocation method name is wrong ?", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261728", "createdAt": "2020-01-23T17:42:38Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUyMzE2NA==", "bodyText": "fixed", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370523164", "createdAt": "2020-01-24T08:46:03Z", "author": {"login": "MadWasp79"}, "path": "OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java", "diffHunk": "@@ -260,6 +262,17 @@ public LatLon getFinalLocation() {\n \t\treturn finalLocation;\n \t}\n \n+\tpublic void cacheStartLocation(Location nextStartLocation) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTcyOA=="}, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODU4Nzk4OnYy", "diffSide": "RIGHT", "path": "OsmAnd-java/src/main/java/net/osmand/map/OsmandRegions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MzowNFrOFhG_sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo0MzowNFrOFhG_sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2MTkzNg==", "bodyText": "Potentially duplicate WorldRegion from BinaryMapDataObject is not fixed here!", "url": "https://github.com/osmandapp/OsmAnd/pull/8306#discussion_r370261936", "createdAt": "2020-01-23T17:43:04Z", "author": {"login": "vshcherb"}, "path": "OsmAnd-java/src/main/java/net/osmand/map/OsmandRegions.java", "diffHunk": "@@ -743,17 +743,8 @@ public BinaryMapDataObject getSmallestBinaryMapDataObjectAt(List<BinaryMapDataOb\n \t\t\twhile (it.hasNext()) {\n \t\t\t\tBinaryMapDataObject o = it.next();\n \t\t\t\tif (o.getTypes() != null) {\n-\t\t\t\t\tboolean isRegion = true;\n-\t\t\t\t\tfor (int i = 0; i < o.getTypes().length; i++) {\n-\t\t\t\t\t\tTagValuePair tp = o.getMapIndex().decodeType(o.getTypes()[i]);\n-\t\t\t\t\t\tif (\"boundary\".equals(tp.value)) {\n-\t\t\t\t\t\t\tisRegion = false;\n-\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n \t\t\t\t\tWorldRegion downloadRegion = getRegionData(getFullName(o));\n-\t\t\t\t\tif (!isRegion\n-\t\t\t\t\t\t\t|| downloadRegion == null\n+\t\t\t\t\tif ( downloadRegion == null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a7a5d88dc183444fba4fe09f76a87f9c598d69"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3391, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}