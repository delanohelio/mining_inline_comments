{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MzE0MTE4", "number": 8283, "title": "Fix parking issue. Show Home Work Parking icon on map.", "bodyText": "", "createdAt": "2020-01-21T13:47:51Z", "url": "https://github.com/osmandapp/OsmAnd/pull/8283", "merged": true, "mergeCommit": {"oid": "95e90fd489b185c89b441599c962ab3dd8aa74e4"}, "closed": true, "closedAt": "2020-01-23T16:19:27Z", "author": {"login": "Dima-1"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8haxvAH2gAyMzY1MzE0MTE4OmY1NWU0ZjdjMDA1MmRkZDdhMGQwMjMwNmNhMzNmNWQzZTE3OWY1Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9MBBOgH2gAyMzY1MzE0MTE4OmRiMDgwYTk0NDdmNmY4MDg4YzJhNGFiNmFkZDVkOTRkNTNjNDhmOGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/f55e4f7c0052ddd7a0d02306ca33f5d3e179f577", "committedDate": "2020-01-21T13:46:30Z", "message": "Fix parking issue. Show Home Work Parking icon on map. Disable ParkingPositionPlugin layer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTAxNjUy", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#pullrequestreview-345901652", "createdAt": "2020-01-21T14:07:28Z", "commit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzoyOFrOFf7LYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzoyOFrOFf7LYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxOTc0NQ==", "bodyText": "??? delete", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r369019745", "createdAt": "2020-01-21T14:07:28Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "diffHunk": "@@ -193,7 +192,7 @@ public void registerLayers(MapActivity activity) {\n \t\t\tactivity.getMapView().removeLayer(parkingLayer);\n \t\t}\n \t\tparkingLayer = new ParkingPositionLayer(activity, this);\n-\t\tactivity.getMapView().addLayer(parkingLayer, 5.5f);\n+//\t\tactivity.getMapView().addLayer(parkingLayer, 5.5f);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTAxNzYz", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#pullrequestreview-345901763", "createdAt": "2020-01-21T14:07:37Z", "commit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzozN1rOFf7Lsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowNzozN1rOFf7Lsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxOTgyNw==", "bodyText": "ParkingPositionLayer - delete", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r369019827", "createdAt": "2020-01-21T14:07:37Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/parkingpoint/ParkingPositionPlugin.java", "diffHunk": "@@ -193,7 +192,7 @@ public void registerLayers(MapActivity activity) {\n \t\t\tactivity.getMapView().removeLayer(parkingLayer);\n \t\t}\n \t\tparkingLayer = new ParkingPositionLayer(activity, this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55e4f7c0052ddd7a0d02306ca33f5d3e179f577"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32783e61cd106d4511f0c88890af95abd35a8ca1", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/32783e61cd106d4511f0c88890af95abd35a8ca1", "committedDate": "2020-01-21T15:51:45Z", "message": "Delete ParkingPositionLayer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "210515c2fd034f6c3991e6ef61d1557c5472413e", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/210515c2fd034f6c3991e6ef61d1557c5472413e", "committedDate": "2020-01-22T11:46:59Z", "message": "Add writing icon name to file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2737e95ce712148e2fa9663e950ff6d783d9c7d7", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/2737e95ce712148e2fa9663e950ff6d783d9c7d7", "committedDate": "2020-01-22T12:06:12Z", "message": "Merge branch 'master' into home_icon_on_map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b1bfa9ce3ab2e5fbd1163dad169542d079a1dcd", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/2b1bfa9ce3ab2e5fbd1163dad169542d079a1dcd", "committedDate": "2020-01-22T15:32:44Z", "message": "Implement different icons on the map and on the ui"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6e841f61901e57a9f87c11549b02284c217a0f1", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/e6e841f61901e57a9f87c11549b02284c217a0f1", "committedDate": "2020-01-22T15:53:15Z", "message": "Fix getColor api 16"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f39004c5e589621086959ed6067a87637182996", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/4f39004c5e589621086959ed6067a87637182996", "committedDate": "2020-01-23T12:08:18Z", "message": "GPXLayer custom icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e974d7ca72fdbed62eef645292321c17824d172a", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/e974d7ca72fdbed62eef645292321c17824d172a", "committedDate": "2020-01-23T13:13:53Z", "message": "Fix favorite import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzE3MDMw", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#pullrequestreview-347317030", "createdAt": "2020-01-23T14:02:19Z", "commit": {"oid": "e974d7ca72fdbed62eef645292321c17824d172a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDowMjoxOVrOFg_KoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDowMjoxOVrOFg_KoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEzMzY2NA==", "bodyText": "should be cut", "url": "https://github.com/osmandapp/OsmAnd/pull/8283#discussion_r370133664", "createdAt": "2020-01-23T14:02:19Z", "author": {"login": "vshcherb"}, "path": "OsmAnd/src/net/osmand/plus/base/FavoriteImageDrawable.java", "diffHunk": "@@ -42,31 +41,39 @@\n \tprivate Paint paintInnerCircle = new Paint();\n \tprivate ColorFilter colorFilter;\n \tprivate ColorFilter grayFilter;\n-\tprivate Drawable personalPointBitmap;\n \n \tprivate FavoriteImageDrawable(Context ctx, int color, boolean withShadow, boolean synced, FavouritePoint point) {\n \t\tthis.withShadow = withShadow;\n \t\tthis.synced = synced;\n \t\tResources res = ctx.getResources();\n \t\tint overlayIconId = point != null ? point.getOverlayIconId() : 0;\n \t\tif (overlayIconId != 0) {\n-\t\t\tpersonalPointBitmap = UiUtilities.tintDrawable(ResourcesCompat.getDrawable(res, overlayIconId, null),\n-\t\t\t\t\tContextCompat.getColor(ctx, R.color.icon_color_default_light));\n+\t\t\tfavIcon = ((OsmandApplication) ctx.getApplicationContext()).getUIUtilities()\n+\t\t\t\t\t.getIcon(getMapIconId(ctx, overlayIconId), R.color.color_white);\n+\t\t\tlistDrawable = ((OsmandApplication) ctx.getApplicationContext()).getUIUtilities()\n+\t\t\t\t\t.getIcon(overlayIconId, R.color.color_white);\n+\t\t} else {\n+\t\t\tfavIcon = res.getDrawable(R.drawable.map_favorite);\n+\t\t\tlistDrawable = ResourcesCompat.getDrawable(res, R.drawable.ic_action_fav_dark, null).mutate();\n \t\t}\n \t\tint col = color == 0 || color == Color.BLACK ? res.getColor(R.color.color_favorite) : color;\n-\t\tfavIcon = BitmapFactory.decodeResource(res, R.drawable.map_favorite);\n \t\tfavBackground = BitmapFactory.decodeResource(res, R.drawable.map_white_favorite_shield);\n \t\tsyncedStroke = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_stroke);\n \t\tsyncedColor = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_color);\n \t\tsyncedShadow = BitmapFactory.decodeResource(res, R.drawable.map_shield_marker_point_shadow);\n \t\tsyncedIcon = BitmapFactory.decodeResource(res, R.drawable.map_marker_point_14dp);\n-\t\tlistDrawable = ResourcesCompat.getDrawable(res, R.drawable.ic_action_fav_dark, null).mutate();\n \t\tinitSimplePaint(paintOuter, color == 0 || color == Color.BLACK ? 0x88555555 : color);\n \t\tinitSimplePaint(paintInnerCircle, col);\n \t\tcolorFilter = new PorterDuffColorFilter(col, PorterDuff.Mode.MULTIPLY);\n \t\tgrayFilter = new PorterDuffColorFilter(res.getColor(R.color.color_favorite_gray), PorterDuff.Mode.MULTIPLY);\n \t}\n \n+\tprivate int getMapIconId(Context ctx, int iconId) {\n+\t\tString iconName = ctx.getResources().getResourceEntryName(iconId);\n+\t\treturn ctx.getResources().getIdentifier(iconName\n+\t\t\t\t.replaceFirst(\"mx_\", \"mm_\"), \"drawable\", ctx.getPackageName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e974d7ca72fdbed62eef645292321c17824d172a"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db080a9447f6f8088c2a4ab6add5d94d53c48f8d", "author": {"user": {"login": "Dima-1", "name": "Dmitry"}}, "url": "https://github.com/osmandapp/OsmAnd/commit/db080a9447f6f8088c2a4ab6add5d94d53c48f8d", "committedDate": "2020-01-23T15:24:17Z", "message": "Fix icon name without prefix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3588, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}