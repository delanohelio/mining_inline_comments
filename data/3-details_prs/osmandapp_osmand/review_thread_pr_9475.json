{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxODQ2MTA4", "number": 9475, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzozMzo0NlrOEP2u3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0OTowMlrOEP2zdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDYwODI4OnYy", "diffSide": "RIGHT", "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzozMzo0NlrOGzvjCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxNToyMDoxNVrOGzwQXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwOTU3OQ==", "bodyText": "new fields always should be last parameter\ncc @Chumva", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456909579", "createdAt": "2020-07-19T13:33:46Z", "author": {"login": "vshcherb"}, "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "diffHunk": "@@ -56,6 +66,7 @@ public void writeToBundle(Bundle bundle) {\n \t\tbundle.putDouble(\"latitude\", latitude);\n \t\tbundle.putDouble(\"longitude\", longitude);\n \t\tbundle.putInt(\"zoom\", zoom);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDUwMw==", "bodyText": "It is ok to add new fields in Bundle in a different order because values are stored with keys. But preferably add them at the end for better understanding differences among versions. But in parcelable order of written and read values is important and changes in it will break reading values.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910503", "createdAt": "2020-07-19T13:42:56Z", "author": {"login": "Chumva"}, "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "diffHunk": "@@ -56,6 +66,7 @@ public void writeToBundle(Bundle bundle) {\n \t\tbundle.putDouble(\"latitude\", latitude);\n \t\tbundle.putDouble(\"longitude\", longitude);\n \t\tbundle.putInt(\"zoom\", zoom);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwOTU3OQ=="}, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkyMDA5Ng==", "bodyText": "Do you think it's better to reorder everything even the parameters order in the constructor, or just the putFloat?", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456920096", "createdAt": "2020-07-19T15:10:05Z", "author": {"login": "ehermann"}, "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "diffHunk": "@@ -56,6 +66,7 @@ public void writeToBundle(Bundle bundle) {\n \t\tbundle.putDouble(\"latitude\", latitude);\n \t\tbundle.putDouble(\"longitude\", longitude);\n \t\tbundle.putInt(\"zoom\", zoom);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwOTU3OQ=="}, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkyMTE4Mg==", "bodyText": "putFloat and getFloat will be enough", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456921182", "createdAt": "2020-07-19T15:20:15Z", "author": {"login": "Chumva"}, "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "diffHunk": "@@ -56,6 +66,7 @@ public void writeToBundle(Bundle bundle) {\n \t\tbundle.putDouble(\"latitude\", latitude);\n \t\tbundle.putDouble(\"longitude\", longitude);\n \t\tbundle.putInt(\"zoom\", zoom);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwOTU3OQ=="}, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDYxNTg5OnYy", "diffSide": "RIGHT", "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0Mzo1NFrOGzvm7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0Mzo1NFrOGzvm7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDU3Mg==", "bodyText": "This one should be written last.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910572", "createdAt": "2020-07-19T13:43:54Z", "author": {"login": "Chumva"}, "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -52,13 +63,15 @@ public void writeToParcel(Parcel out, int flags) {\n \t\tout.writeDouble(latitude);\n \t\tout.writeDouble(longitude);\n \t\tout.writeInt(zoom);\n+\t\tout.writeFloat(rotation);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDYxNjMzOnYy", "diffSide": "RIGHT", "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NDoyOVrOGzvnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NDoyOVrOGzvnJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDYzMA==", "bodyText": "Also, read the new value in the end.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910630", "createdAt": "2020-07-19T13:44:29Z", "author": {"login": "Chumva"}, "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -52,13 +63,15 @@ public void writeToParcel(Parcel out, int flags) {\n \t\tout.writeDouble(latitude);\n \t\tout.writeDouble(longitude);\n \t\tout.writeInt(zoom);\n+\t\tout.writeFloat(rotation);\n \t\tout.writeByte((byte) (animated ? 1 : 0));\n \t}\n \n \tprivate void readFromParcel(Parcel in) {\n \t\tlatitude = in.readDouble();\n \t\tlongitude = in.readDouble();\n \t\tzoom = in.readInt();\n+\t\trotation = in.readFloat();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDYxODA1OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NjowOFrOGzvoAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NjowOFrOGzvoAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDg0OA==", "bodyText": "Probably it is better to use !Float.isNaN() because this expression might be true even if rotation is NaN.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910848", "createdAt": "2020-07-19T13:46:08Z", "author": {"login": "Chumva"}, "path": "OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java", "diffHunk": "@@ -300,6 +302,9 @@ public void onReceive(Context context, Intent intent) {\n \t\t\t\t\t\t\tzoom = zoom > mapView.getMaxZoom() ? mapView.getMaxZoom() : zoom;\n \t\t\t\t\t\t\tzoom = zoom < mapView.getMinZoom() ? mapView.getMinZoom() : zoom;\n \t\t\t\t\t\t}\n+\t\t\t\t\t\tif(rotation != Float.NaN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDYyMDA3OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/aidl/map/SetMapLocationParams.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0OTowMlrOGzvpFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0OTowMlrOGzvpFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMTEyNA==", "bodyText": "The second constructor is not necessary for backwards compatibility, the only order of written and read values is important, except for some situations with lists of items.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456911124", "createdAt": "2020-07-19T13:49:02Z", "author": {"login": "Chumva"}, "path": "OsmAnd/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -8,12 +8,18 @@\n \tprivate double latitude;\n \tprivate double longitude;\n \tprivate int zoom;\n+\tprivate float rotation;\n \tprivate boolean animated;\n \n \tpublic SetMapLocationParams(double latitude, double longitude, int zoom, boolean animated) {\n+\t\tthis(latitude, longitude, zoom, Float.NaN, animated);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3444, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}