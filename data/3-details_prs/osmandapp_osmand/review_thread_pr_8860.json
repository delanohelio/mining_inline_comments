{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNjg3NzMy", "number": 8860, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozNDozMlrOD4wcjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOTowMDozOVrOD5um1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODQwNTkxOnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/ContextMenuAdapter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozNDozMlrOGPqz0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozNDozMlrOGPqz0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MzIxNg==", "bodyText": "Bad code. Remove try - catch.", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419083216", "createdAt": "2020-05-03T10:34:32Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/ContextMenuAdapter.java", "diffHunk": "@@ -91,10 +92,10 @@ public void addItem(ContextMenuItem item) {\n \t\t\t\titem.setOrder(getItemOrder(id, item.getOrder()));\n \t\t\t}\n \t\t\titems.add(item.getPos(), item);\n-\t\t\tsortItemsByOrder();\n \t\t} catch (IndexOutOfBoundsException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODQwODU3OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/dialogs/ConfigureMapMenu.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozNzoyOVrOGPq1IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozNzoyOVrOGPq1IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MzU1Mg==", "bodyText": "Make sortItemsByOrder private and remove it from all other places. It must be called from addItem only!", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419083552", "createdAt": "2020-05-03T10:37:29Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/dialogs/ConfigureMapMenu.java", "diffHunk": "@@ -911,6 +911,7 @@ public void onClick(DialogInterface dialog, int which) {\n \t\t\t\t\t.setCategory(true).setLayout(R.layout.list_group_title_with_switch).createItem());\n \t\t\tcreateCustomRenderingProperties(adapter, activity, customRules, app, selectedProfileColor, nightMode, themeRes);\n \t\t}\n+\t\tadapter.sortItemsByOrder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODQwOTE2OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozODoxOFrOGPq1aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozODoxOFrOGPq1aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MzYyNw==", "bodyText": "Do not commit TODO", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419083627", "createdAt": "2020-05-03T10:38:18Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java", "diffHunk": "@@ -568,18 +568,30 @@ public void onClick(View v) {\n //\t\tTODO refactor section", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODQwOTgxOnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozODo0MFrOGPq1sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDozODo0MFrOGPq1sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MzY5OA==", "bodyText": "Wrong", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419083698", "createdAt": "2020-05-03T10:38:40Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java", "diffHunk": "@@ -568,18 +568,30 @@ public void onClick(View v) {\n //\t\tTODO refactor section\n \t\tContextMenuAdapter adapter = menu.getActionsContextMenuAdapter(false);\n \t\tList<ContextMenuItem> items = new ArrayList<>();\n+\t\tList<String> mainIds = app.getSettings().CONTEXT_MENU_ACTIONS_ITEMS.get().getMainActionIds();\n \t\tfor (ContextMenuItem item : adapter.getItems()) {\n \t\t\tif (!item.isHidden()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODU1MTc4OnYy", "diffSide": "RIGHT", "path": "OsmAnd/res/values/strings.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzoxNDo0MFrOGPr93w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzoxNDo0MFrOGPr93w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEwMjE3NQ==", "bodyText": "What with other translations?", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419102175", "createdAt": "2020-05-03T13:14:40Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/res/values/strings.xml", "diffHunk": "@@ -59,7 +62,7 @@\n     <string name=\"replace_point_descr\">Replace another point with this</string>\n     <string name=\"developer_plugin\">Developer Plugin</string>\n     <string name=\"move_inside_category\">You can move items only inside this category.</string>\n-    <string name=\"additional_actions_descr\">You can access these actions by tapping the \u201cActions\u201d button.</string>\n+    <string name=\"additional_actions_descr\">You can access these actions by tapping the \u201c%1$s\u201d button.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODU1Nzg2OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/ContextMenuAdapter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzoyMDo0M1rOGPsA0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzoyMDo0M1rOGPsA0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEwMjkzMA==", "bodyText": "Wrong code. Should be \"if (id != null && (id.startsWith(idScheme))\" only.", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419102930", "createdAt": "2020-05-03T13:20:43Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/ContextMenuAdapter.java", "diffHunk": "@@ -579,7 +580,7 @@ public boolean onRowItemClick(ArrayAdapter<ContextMenuItem> adapter, View view,\n \t\tList<ContextMenuItem> items = new ArrayList<>();\n \t\tfor (ContextMenuItem item : this.items) {\n \t\t\tString id = item.getId();\n-\t\t\tif (id != null && id.startsWith(idScheme) && !APP_PROFILES_ID.equals(id)) {\n+\t\t\tif (id != null && (id.startsWith(idScheme) && !APP_PROFILES_ID.equals(id) || id.startsWith(AIDL_LAYERS_PREFIX))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwODU4MjMzOnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/OsmandSettings.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzo0NzoxMFrOGPsNdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMzo0NzoxMFrOGPsNdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEwNjE2NQ==", "bodyText": "Not clear why AIDL_LAYERS_PREFIX here", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r419106165", "createdAt": "2020-05-03T13:47:10Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/OsmandSettings.java", "diffHunk": "@@ -1206,7 +1218,11 @@ public void readFromJsonString(String jsonString, @NonNull String idScheme) {\n \t\t\tif (jsonArray != null) {\n \t\t\t\tfor (int i = 0; i < jsonArray.length(); i++) {\n \t\t\t\t\tString id = jsonArray.optString(i);\n-\t\t\t\t\tlist.add(idScheme + id);\n+\t\t\t\t\tif (id.startsWith(AIDL_LAYERS_PREFIX)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a19429077a0bb11471faec296ae99c26b25f74"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODU5MDI4OnYy", "diffSide": "RIGHT", "path": "OsmAnd/src/net/osmand/plus/ContextMenuItem.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOTowMDozOVrOGRJ-yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOTowMDozOVrOGRJ-yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0MjUwNg==", "bodyText": "mPosition?", "url": "https://github.com/osmandapp/OsmAnd/pull/8860#discussion_r420642506", "createdAt": "2020-05-06T09:00:39Z", "author": {"login": "max-klaus"}, "path": "OsmAnd/src/net/osmand/plus/ContextMenuItem.java", "diffHunk": "@@ -416,14 +417,13 @@ public ItemBuilder setId(String id) {\n \t\tpublic ContextMenuItem createItem() {\n \t\t\treturn new ContextMenuItem(mTitleId, mTitle, mIcon, mColorRes, mSecondaryIcon,\n \t\t\t\t\tmSelected, mProgress, mLayout, mLoading, mIsCategory, mIsClickable, mSkipPaintingWithoutColor,\n-\t\t\t\t\tmPosition, mOrder, mDescription, mItemClickListener, mIntegerListener, mProgressListener, itemDeleteAction,\n+\t\t\t\t\tmPosition, mOrder, mDescription, mItemClickListener, mIntegerListener, mProgressListener, mItemDeleteAction,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "125ede4e5d8e4ae94eccda6bcd5253f9fa537b56"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3366, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}