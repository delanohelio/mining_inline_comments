{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxODQ2MTA4", "number": 9475, "title": "Add rotation to setMapLocation API", "bodyText": "Added a rotation parameter to setMapLocation.\nI think it's better to have it before animated parameter, but if you prefer to put it at the end I can do it.\nI also added a  SetMapLocationParams constructor without rotation for backward compatibility", "createdAt": "2020-07-18T10:14:11Z", "url": "https://github.com/osmandapp/OsmAnd/pull/9475", "merged": true, "mergeCommit": {"oid": "394565665848bdc1bcb617c8a3de512fb1bf2c18"}, "closed": true, "closedAt": "2020-07-19T16:05:30Z", "author": {"login": "ehermann"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2FnWfAH2gAyNDUxODQ2MTA4OmZhYzYzZTJjYjM1NjVkMDNhZTY1ZDcxNTQ3NmVlYzQ0ZjgyNjI2MGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2fIl1AH2gAyNDUxODQ2MTA4OjFhZDg5M2MzZGEzZDRjNzg4MTBmMmE2YmZiMjk5YjIxNjliMzc4NzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fac63e2cb3565d03ae65d715476eec44f826260f", "author": {"user": {"login": "ehermann", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/fac63e2cb3565d03ae65d715476eec44f826260f", "committedDate": "2020-07-18T10:10:30Z", "message": "Add rotation to setMapLocation API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d61f19511b78bba59543592eb2c0077e2000ffd", "author": {"user": {"login": "ehermann", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/5d61f19511b78bba59543592eb2c0077e2000ffd", "committedDate": "2020-07-18T11:40:02Z", "message": "Minor change, remove newline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c", "author": {"user": {"login": "ehermann", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/743eaf19d0cf1b328dafd58d9a0d7c3b1091435c", "committedDate": "2020-07-18T11:44:45Z", "message": "Minor change, style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTMyMjYz", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#pullrequestreview-451132263", "createdAt": "2020-07-19T13:33:45Z", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzozMzo0NlrOGzvjCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzozMzo0NlrOGzvjCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwOTU3OQ==", "bodyText": "new fields always should be last parameter\ncc @Chumva", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456909579", "createdAt": "2020-07-19T13:33:46Z", "author": {"login": "vshcherb"}, "path": "OsmAnd-api/src/net/osmand/aidlapi/map/SetMapLocationParams.java", "diffHunk": "@@ -56,6 +66,7 @@ public void writeToBundle(Bundle bundle) {\n \t\tbundle.putDouble(\"latitude\", latitude);\n \t\tbundle.putDouble(\"longitude\", longitude);\n \t\tbundle.putInt(\"zoom\", zoom);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTMyOTkz", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#pullrequestreview-451132993", "createdAt": "2020-07-19T13:43:53Z", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0Mzo1NFrOGzvm7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0Mzo1NFrOGzvm7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDU3Mg==", "bodyText": "This one should be written last.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910572", "createdAt": "2020-07-19T13:43:54Z", "author": {"login": "Chumva"}, "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -52,13 +63,15 @@ public void writeToParcel(Parcel out, int flags) {\n \t\tout.writeDouble(latitude);\n \t\tout.writeDouble(longitude);\n \t\tout.writeInt(zoom);\n+\t\tout.writeFloat(rotation);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTMzMDM4", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#pullrequestreview-451133038", "createdAt": "2020-07-19T13:44:29Z", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NDoyOVrOGzvnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NDoyOVrOGzvnJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDYzMA==", "bodyText": "Also, read the new value in the end.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910630", "createdAt": "2020-07-19T13:44:29Z", "author": {"login": "Chumva"}, "path": "OsmAnd-telegram/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -52,13 +63,15 @@ public void writeToParcel(Parcel out, int flags) {\n \t\tout.writeDouble(latitude);\n \t\tout.writeDouble(longitude);\n \t\tout.writeInt(zoom);\n+\t\tout.writeFloat(rotation);\n \t\tout.writeByte((byte) (animated ? 1 : 0));\n \t}\n \n \tprivate void readFromParcel(Parcel in) {\n \t\tlatitude = in.readDouble();\n \t\tlongitude = in.readDouble();\n \t\tzoom = in.readInt();\n+\t\trotation = in.readFloat();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTMzMTc3", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#pullrequestreview-451133177", "createdAt": "2020-07-19T13:46:08Z", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NjowOFrOGzvoAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0NjowOFrOGzvoAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMDg0OA==", "bodyText": "Probably it is better to use !Float.isNaN() because this expression might be true even if rotation is NaN.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456910848", "createdAt": "2020-07-19T13:46:08Z", "author": {"login": "Chumva"}, "path": "OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java", "diffHunk": "@@ -300,6 +302,9 @@ public void onReceive(Context context, Intent intent) {\n \t\t\t\t\t\t\tzoom = zoom > mapView.getMaxZoom() ? mapView.getMaxZoom() : zoom;\n \t\t\t\t\t\t\tzoom = zoom < mapView.getMinZoom() ? mapView.getMinZoom() : zoom;\n \t\t\t\t\t\t}\n+\t\t\t\t\t\tif(rotation != Float.NaN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTMzNDA4", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#pullrequestreview-451133408", "createdAt": "2020-07-19T13:49:02Z", "commit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0OTowMlrOGzvpFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMzo0OTowMlrOGzvpFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMTEyNA==", "bodyText": "The second constructor is not necessary for backwards compatibility, the only order of written and read values is important, except for some situations with lists of items.", "url": "https://github.com/osmandapp/OsmAnd/pull/9475#discussion_r456911124", "createdAt": "2020-07-19T13:49:02Z", "author": {"login": "Chumva"}, "path": "OsmAnd/src/net/osmand/aidl/map/SetMapLocationParams.java", "diffHunk": "@@ -8,12 +8,18 @@\n \tprivate double latitude;\n \tprivate double longitude;\n \tprivate int zoom;\n+\tprivate float rotation;\n \tprivate boolean animated;\n \n \tpublic SetMapLocationParams(double latitude, double longitude, int zoom, boolean animated) {\n+\t\tthis(latitude, longitude, zoom, Float.NaN, animated);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743eaf19d0cf1b328dafd58d9a0d7c3b1091435c"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e87ed289c7aef40f6646eec65d76d6a46d51decc", "author": {"user": {"login": "ehermann", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/e87ed289c7aef40f6646eec65d76d6a46d51decc", "committedDate": "2020-07-19T15:40:45Z", "message": "applied suggestions from reviewers:\nreorder puFloat and getFload, and removing additional constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ad893c3da3d4c78810f2a6bfb299b2169b37873", "author": {"user": {"login": "ehermann", "name": null}}, "url": "https://github.com/osmandapp/OsmAnd/commit/1ad893c3da3d4c78810f2a6bfb299b2169b37873", "committedDate": "2020-07-19T15:54:26Z", "message": "Minor fix, forgot to update Osmand-Telegram"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3460, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}