{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNDg0ODYz", "number": 3595, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzoyODoxNFrOD8EM3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0MTowNlrOD8EjTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MzA5OTgyOnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/settingsfragments/SettingsFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzoyODoxNFrOGUxkmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzoyODoxNFrOGUxkmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQzNjg4OQ==", "bodyText": "Please make this @VisibleForTesting", "url": "https://github.com/Catrobat/Catroid/pull/3595#discussion_r424436889", "createdAt": "2020-05-13T13:28:14Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/settingsfragments/SettingsFragment.java", "diffHunk": "@@ -401,6 +409,16 @@ public static void enableLegoMindstormsEV3Bricks(Context context) {\n \t\t\t\t.apply();\n \t}\n \n+\tpublic static void setMultiplayerVariablesPreferenceEnabled(Context context, boolean value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MzE1NzI2OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/formulaeditor/FormulaEditorMultiplayerVariablesTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0MTowNlrOGUyJkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0MTowNlrOGUyJkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ0NjM1Mg==", "bodyText": "Please try to make this a parameterized test.", "url": "https://github.com/Catrobat/Catroid/pull/3595#discussion_r424446352", "createdAt": "2020-05-13T13:41:06Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/formulaeditor/FormulaEditorMultiplayerVariablesTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.uiespresso.formulaeditor;\n+\n+import org.catrobat.catroid.R;\n+import org.catrobat.catroid.content.Script;\n+import org.catrobat.catroid.content.bricks.ChangeSizeByNBrick;\n+import org.catrobat.catroid.testsuites.annotations.Cat;\n+import org.catrobat.catroid.testsuites.annotations.Level;\n+import org.catrobat.catroid.ui.SpriteActivity;\n+import org.catrobat.catroid.ui.settingsfragments.SettingsFragment;\n+import org.catrobat.catroid.uiespresso.content.brick.utils.BrickTestUtils;\n+import org.catrobat.catroid.uiespresso.util.rules.FragmentActivityTestRule;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+\n+import static org.catrobat.catroid.uiespresso.formulaeditor.utils.FormulaEditorWrapper.onFormulaEditor;\n+import static org.hamcrest.CoreMatchers.not;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.action.ViewActions.click;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.isEnabled;\n+import static androidx.test.espresso.matcher.ViewMatchers.withId;\n+\n+public class FormulaEditorMultiplayerVariablesTest {\n+\t@Rule\n+\tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n+\t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION,\n+\t\t\tSpriteActivity.FRAGMENT_SCRIPTS);\n+\n+\t@Before\n+\tpublic void setUp() throws Exception {\n+\t\tScript script = BrickTestUtils.createProjectAndGetStartScript(\"FormulaEditorMultiplayerVariablesTest\");\n+\t\tscript.addBrick(new ChangeSizeByNBrick(0));\n+\n+\t\tbaseActivityTestRule.launchActivity();\n+\n+\t\tonView(withId(R.id.brick_change_size_by_edit_text))\n+\t\t\t\t.perform(click());\n+\n+\t\tonFormulaEditor()\n+\t\t\t\t.performOpenDataFragment();\n+\t}\n+\n+\t@Category({Cat.AppUi.class, Level.Functional.class})\n+\t@Test\n+\tpublic void testMultiplayerScopeIsVisibleWithEnabledPreference() {\n+\t\tSettingsFragment.setMultiplayerVariablesPreferenceEnabled(\n+\t\t\t\tApplicationProvider.getApplicationContext(), true);\n+\n+\t\tonView(withId(R.id.button_add))\n+\t\t\t\t.perform(click());\n+\n+\t\tonView(withId(R.id.multiplayer))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t}\n+\n+\t@Category({Cat.AppUi.class, Level.Functional.class})\n+\t@Test\n+\tpublic void testMultiplayerScopeIsNotVisibleWithDisabledPreference() {\n+\t\tSettingsFragment.setMultiplayerVariablesPreferenceEnabled(\n+\t\t\t\tApplicationProvider.getApplicationContext(), false);\n+\n+\t\tonView(withId(R.id.button_add))\n+\t\t\t\t.perform(click());\n+\n+\t\tonView(withId(R.id.multiplayer))\n+\t\t\t\t.check(matches(not(isDisplayed())));\n+\t}\n+\n+\t@Category({Cat.AppUi.class, Level.Functional.class})\n+\t@Test\n+\tpublic void testMakeListOptionBecomesDisabledWhenMultiplayerScopeIsSelected() {\n+\t\tSettingsFragment.setMultiplayerVariablesPreferenceEnabled(\n+\t\t\t\tApplicationProvider.getApplicationContext(), true);\n+\t\tonView(withId(R.id.button_add))\n+\t\t\t\t.perform(click());\n+\t\tonView(withId(R.id.multiplayer))\n+\t\t\t\t.perform(click());\n+\n+\t\tonView(withId(R.id.make_list))\n+\t\t\t\t.check(matches(not(isEnabled())));\n+\n+\t\tonView(withId(R.id.global))\n+\t\t\t\t.perform(click());\n+\t\tonView(withId(R.id.make_list))\n+\t\t\t\t.check(matches(isEnabled()));\n+\t}\n+\n+\t@Category({Cat.AppUi.class, Level.Functional.class})\n+\t@Test\n+\tpublic void testMultiplayerScopeBecomesDisabledWhenMakeListIsSelected() {\n+\t\tSettingsFragment.setMultiplayerVariablesPreferenceEnabled(", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 120}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3932, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}