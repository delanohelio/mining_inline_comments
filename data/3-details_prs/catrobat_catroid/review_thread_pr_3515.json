{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjUyNjcz", "number": 3515, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzo1MTo1MFrODoVzsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTozNDozMVrODwDE1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjI2OTMwOnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "isResolved": true, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzo1MTo1MFrOF21DgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQxNTozNToxMVrOF5qDlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw==", "bodyText": "This method and the other methods are already implemented in the ProjectListFragment.\nPlease, find a way (maybe pass the intent as an argument) to minimize code duplication.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r393036673", "createdAt": "2020-03-16T13:51:50Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ1NDYwNQ==", "bodyText": "I don't think the import method in ProjectListFragment would work because it implemented to receive a Uri with scheme of \"file\". Whereas almost all apps share file through content URI for security.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r393454605", "createdAt": "2020-03-17T05:40:04Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzgyOTI0NA==", "bodyText": "Yes, it is possible, your new code is exactly the same as in ProjectListFragment, except the \"file\" check and the definition of the src file.\nAnd I think that's solvable with \"Uri.fromFile(...);\".\nAnd if not, have a look at the FilePickerActivity and ProjectListFragment.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r393829244", "createdAt": "2020-03-17T16:57:50Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI0NzQzNQ==", "bodyText": "Okay, I'll have a look at how to can solve it. Thanks!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r394247435", "createdAt": "2020-03-18T10:33:18Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3MzI5OA==", "bodyText": "@gPathpp Is the \"file\" check in the import method of ProjectListFragment, really required?", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r395973298", "createdAt": "2020-03-21T08:21:28Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4NTk3MQ==", "bodyText": "Which scheme does the data have? Maybe a content URI?\nI will ask @84n4n4 about this check. (He wrote this code)", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r395985971", "createdAt": "2020-03-21T11:47:03Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk5MzM0MQ==", "bodyText": "i cant recall exactly why this check is there. but the whole thing was a mess to get to work properly for all android versions.\nanyways:\n\nremove the check\ndont duplicate code, use the one in fragment that is there\ntest on all supported major android versions!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r395993341", "createdAt": "2020-03-21T13:37:25Z", "author": {"login": "84n4n4"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwMDM0Mw==", "bodyText": "Which scheme does the data have? Maybe a content URI?\n\nYup, the scheme for the implicit intents is content Uri.\nThe filePickerActivity returns scheme in file Uri.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r396000343", "createdAt": "2020-03-21T15:10:34Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwMjE5Nw==", "bodyText": "@84n4n4 Oh. It might be an issue because I don't have access to all android versions :P (excluding emulators).\nIs it better to add an argument to the check? You must have kept it there for some reason.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r396002197", "createdAt": "2020-03-21T15:35:11Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -75,4 +100,50 @@ public void handleAddButton(View view) {\n \t\tNewProjectDialogFragment dialog = new NewProjectDialogFragment();\n \t\tdialog.show(getSupportFragmentManager(), NewProjectDialogFragment.TAG);\n \t}\n+\n+\tprivate ProjectUnzipAndImportTask.ProjectUnzipAndImportListener projectUnzipAndImportListener =\n+\t\t\tnew ProjectUnzipAndImportTask.ProjectUnzipAndImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate ProjectImportTask.ProjectImportListener projectImportListener =\n+\t\t\tnew ProjectImportTask.ProjectImportListener() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onImportFinished(boolean success) {\n+\t\t\t\t\tif (!success) {\n+\t\t\t\t\t\tToastUtil.showError(ProjectListActivity.this, R.string.error_import_project);\n+\t\t\t\t\t}\n+\t\t\t\t\tloadFragment(new ProjectListFragment());\n+\t\t\t\t}\n+\t\t\t};\n+\n+\tprivate void importProjectFromExternal(String path, Intent intent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjY3Mw=="}, "originalCommit": null, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NDg1ODAxOnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMToxNDo0NVrOF8sxjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMTozMzo1MFrOGBDivQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTE5MjQ2Mg==", "bodyText": "PLEASE-EXPLAIN: Is it really necessary to bundle the intent? Why don't you pass the intent.getExtras() itself?", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r399192462", "createdAt": "2020-03-27T11:14:45Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -35,18 +37,32 @@\n \n public class ProjectListActivity extends BaseCastActivity {\n \n+\tpublic static final String TAG = ProjectListActivity.class.getSimpleName();\n+\n \t@Override\n \tpublic void onCreate(Bundle savedInstanceState) {\n \t\tsuper.onCreate(savedInstanceState);\n-\n \t\tsetContentView(R.layout.activity_recycler);\n \t\tsetSupportActionBar(findViewById(R.id.toolbar));\n \t\tgetSupportActionBar().setTitle(R.string.project_list_title);\n \t\tgetSupportActionBar().setDisplayHomeAsUpEnabled(true);\n \n \t\tBottomBar.hidePlayButton(this);\n \n-\t\tloadFragment(new ProjectListFragment());\n+\t\tFragment projectListFragment = new ProjectListFragment();\n+\n+\t\tIntent importProjectFromImplicitIntent = getIntent();\n+\t\tif (importProjectFromImplicitIntent.getAction() != null) {\n+\t\t\ttry {\n+\t\t\t\tBundle data = new Bundle();\n+\t\t\t\tdata.putParcelable(\"intent\", importProjectFromImplicitIntent);\n+\t\t\t\tprojectListFragment.setArguments(data);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1OTgwNQ==", "bodyText": "I'm passing the intent itself into the fragment. it's necessary to pass the intent to the import method for accessing the content provider.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r403759805", "createdAt": "2020-04-05T21:33:50Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectListActivity.java", "diffHunk": "@@ -35,18 +37,32 @@\n \n public class ProjectListActivity extends BaseCastActivity {\n \n+\tpublic static final String TAG = ProjectListActivity.class.getSimpleName();\n+\n \t@Override\n \tpublic void onCreate(Bundle savedInstanceState) {\n \t\tsuper.onCreate(savedInstanceState);\n-\n \t\tsetContentView(R.layout.activity_recycler);\n \t\tsetSupportActionBar(findViewById(R.id.toolbar));\n \t\tgetSupportActionBar().setTitle(R.string.project_list_title);\n \t\tgetSupportActionBar().setDisplayHomeAsUpEnabled(true);\n \n \t\tBottomBar.hidePlayButton(this);\n \n-\t\tloadFragment(new ProjectListFragment());\n+\t\tFragment projectListFragment = new ProjectListFragment();\n+\n+\t\tIntent importProjectFromImplicitIntent = getIntent();\n+\t\tif (importProjectFromImplicitIntent.getAction() != null) {\n+\t\t\ttry {\n+\t\t\t\tBundle data = new Bundle();\n+\t\t\t\tdata.putParcelable(\"intent\", importProjectFromImplicitIntent);\n+\t\t\t\tprojectListFragment.setArguments(data);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTE5MjQ2Mg=="}, "originalCommit": null, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NDkzNDA0OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMTozODo1N1rOF8tgcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMTozODo1N1rOF8tgcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIwNDQ2Ng==", "bodyText": "PLEASE-FIX: This check is unnecessary because the other import-use-case only generates \"file\" URIs and this use-case ignores it. => the boolean-flag, the check, and these try-catches only obfuscate code.  => delete it\nThanks!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r399204466", "createdAt": "2020-03-27T11:38:57Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -195,8 +212,19 @@ private void importProject(Intent data) {\n \t\t\treturn;\n \t\t}\n \n-\t\tif (!data.getData().getScheme().equals(\"file\")) {\n-\t\t\tthrow new IllegalArgumentException(\"importProject has to be called with a file uri. (not a content uri\");\n+\t\tboolean isImporting = false;\n+\t\ttry {\n+\t\t\tisImporting = data.getExtras().getSerializable(\"IS_IMPORTING_FROM_IMPLICIT_INTENT\") != null;\n+\t\t} catch (NullPointerException e) {\n+\t\t\tLog.e(TAG, \"Null pointer exception\", e);\n+\t\t}\n+\n+\t\ttry {\n+\t\t\tif (!data.getData().getScheme().equals(\"file\") && !isImporting) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTAxMzY0OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMjowNDoxNVrOF8uQpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQyMzoyMTozMVrOF__4mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIxNjgwNA==", "bodyText": "PLEASE FIX: Since the bundle holds the intent and vise-versa, this could probably lead to a memory loss.\nSure, the Garbage-Collector of Java may realize this, but it's also not a good idea to recycle variables.\n(->Intent->Bundle->)", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r399216804", "createdAt": "2020-03-27T12:04:15Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -86,6 +90,19 @@\n \n \tprivate static final int REQUEST_IMPORT_PROJECT = 7;\n \n+\t@Override\n+\tpublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n+\t\tView view = super.onCreateView(inflater, container, savedInstanceState);\n+\t\tif (getArguments() != null) {\n+\t\t\tBundle data = getArguments();\n+\t\t\tIntent intent = data.getParcelable(\"intent\");\n+\t\t\tdata.putSerializable(\"IS_IMPORTING_FROM_IMPLICIT_INTENT\", true);\n+\t\t\tintent.putExtras(data);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIxOTYyOQ==", "bodyText": "Feel free to refactor function signatures, etc.. to get your code as short and as readable as possible ;)", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r399219629", "createdAt": "2020-03-27T12:09:56Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -86,6 +90,19 @@\n \n \tprivate static final int REQUEST_IMPORT_PROJECT = 7;\n \n+\t@Override\n+\tpublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n+\t\tView view = super.onCreateView(inflater, container, savedInstanceState);\n+\t\tif (getArguments() != null) {\n+\t\t\tBundle data = getArguments();\n+\t\t\tIntent intent = data.getParcelable(\"intent\");\n+\t\t\tdata.putSerializable(\"IS_IMPORTING_FROM_IMPLICIT_INTENT\", true);\n+\t\t\tintent.putExtras(data);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIxNjgwNA=="}, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY1MDMyMg==", "bodyText": "Thanks for pointing these out for me!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r402650322", "createdAt": "2020-04-02T23:18:24Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -86,6 +90,19 @@\n \n \tprivate static final int REQUEST_IMPORT_PROJECT = 7;\n \n+\t@Override\n+\tpublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n+\t\tView view = super.onCreateView(inflater, container, savedInstanceState);\n+\t\tif (getArguments() != null) {\n+\t\t\tBundle data = getArguments();\n+\t\t\tIntent intent = data.getParcelable(\"intent\");\n+\t\t\tdata.putSerializable(\"IS_IMPORTING_FROM_IMPLICIT_INTENT\", true);\n+\t\t\tintent.putExtras(data);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIxNjgwNA=="}, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY1MTI4OA==", "bodyText": "Thanks for pointing these out for me!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r402651288", "createdAt": "2020-04-02T23:21:31Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -86,6 +90,19 @@\n \n \tprivate static final int REQUEST_IMPORT_PROJECT = 7;\n \n+\t@Override\n+\tpublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n+\t\tView view = super.onCreateView(inflater, container, savedInstanceState);\n+\t\tif (getArguments() != null) {\n+\t\t\tBundle data = getArguments();\n+\t\t\tIntent intent = data.getParcelable(\"intent\");\n+\t\t\tdata.putSerializable(\"IS_IMPORTING_FROM_IMPLICIT_INTENT\", true);\n+\t\t\tintent.putExtras(data);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIxNjgwNA=="}, "originalCommit": null, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzA4NjI5OnYy", "diffSide": "LEFT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTozNDozMVrOGC053A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMjozMDowNlrOGJzxXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYxNzExNg==", "bodyText": "PRAISE: The code looks much better than before!\nPLEASE-EXPLAIN: What's the source of the null-ptr-exception?\nPLEASE-FIX: I think there is a race condition with the adapter.\nThe adapter is used in the callback methods, the import method is called \"onCreateView\", but the adapter is initialized \"inOnActivityCreated\"  => if the import finishes before the activity was created a null-ptr-exception occurs.\nhttps://stackoverflow.com/questions/28929637/difference-and-uses-of-oncreate-oncreateview-and-onactivitycreated-in-fra", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r405617116", "createdAt": "2020-04-08T15:34:31Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -217,7 +227,7 @@ private void importProject(Intent data) {\n \t\t\t\t\t\t.execute(projectFile);\n \t\t\t}\n \t\t\tsetShowProgressBar(true);\n-\t\t} catch (IOException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg2MDc2OQ==", "bodyText": "Actually I could not reproduce the null pointer exception in testing. But there was a test for it.", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r411860769", "createdAt": "2020-04-21T04:32:06Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -217,7 +227,7 @@ private void importProject(Intent data) {\n \t\t\t\t\t\t.execute(projectFile);\n \t\t\t}\n \t\t\tsetShowProgressBar(true);\n-\t\t} catch (IOException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYxNzExNg=="}, "originalCommit": null, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4ODgwNw==", "bodyText": "Ok, which test?\nAnyway, please fix the race condition with the adapter (move the code from \"onCreateView\" to \"onActivityCreated\").", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r412288807", "createdAt": "2020-04-21T15:31:21Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -217,7 +227,7 @@ private void importProject(Intent data) {\n \t\t\t\t\t\t.execute(projectFile);\n \t\t\t}\n \t\t\tsetShowProgressBar(true);\n-\t\t} catch (IOException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYxNzExNg=="}, "originalCommit": null, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3MzQ2Mw==", "bodyText": "This is the test: org.catrobat.catroid.uiespresso.ui.actionbar.ActionModeMergeTest.onlyTwoProjectsCheckedTest\nI moved the code from \"onCreateView\" to \"onActivityCreated\", Its much better, the progress dialog is displayed, Thanks!", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r412473463", "createdAt": "2020-04-21T20:36:05Z", "author": {"login": "Gwzwnglai-AuBurn"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -217,7 +227,7 @@ private void importProject(Intent data) {\n \t\t\t\t\t\t.execute(projectFile);\n \t\t\t}\n \t\t\tsetShowProgressBar(true);\n-\t\t} catch (IOException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYxNzExNg=="}, "originalCommit": null, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjkzODU5MA==", "bodyText": "I see.\nPlease do not catch the exception instead avoid it.\nIn most cases, Android Studio tells you where a null-ptr exception can occur. (hover with the mouse over code with yellow background)", "url": "https://github.com/Catrobat/Catroid/pull/3515#discussion_r412938590", "createdAt": "2020-04-22T12:30:06Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ProjectListFragment.java", "diffHunk": "@@ -217,7 +227,7 @@ private void importProject(Intent data) {\n \t\t\t\t\t\t.execute(projectFile);\n \t\t\t}\n \t\t\tsetShowProgressBar(true);\n-\t\t} catch (IOException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYxNzExNg=="}, "originalCommit": null, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4012, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}