{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2ODE0NTA5", "number": 3568, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzozNToyNVrOEETDFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzo0NToyNlrOEETUfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTQxODQ2OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzozNToyNVrOGh1HNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMTozMTo1OVrOGiZTZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyNjM5MQ==", "bodyText": "PLEASE-EXPLAIN: For what does this function do?\nPLEASE-FIX: Please Rename this function.", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438126391", "createdAt": "2020-06-10T13:35:25Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -74,6 +87,30 @@ public synchronized void playSoundFileWithStartTime(String pathToSoundfile,\n \t\t}\n \t}\n \n+\tprivate void stopSameSpritePlayingSameSound(String pathToSoundFile, Sprite spriteToStartSound,\n+\t\t\tBrick brickToStartSound) {\n+\t\tfor (MediaPlayerWithSoundDetails mediaPlayer : mediaPlayers) {\n+\t\t\tif (mediaPlayer.isPlaying() && mediaPlayer.getStartedBySprite() == spriteToStartSound\n+\t\t\t\t\t&& mediaPlayer.getPathToSoundFile().equals(pathToSoundFile)\n+\t\t\t\t\t&& checkStopWithStartedBrick(mediaPlayer, brickToStartSound)) {\n+\t\t\t\tmediaPlayer.stop();\n+\t\t\t\trecentlyStoppedSoundfilePaths.add(new SoundFilePathWithSprite(\n+\t\t\t\t\t\tmediaPlayer.getPathToSoundFile(), spriteToStartSound));\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate boolean checkStopWithStartedBrick(MediaPlayerWithSoundDetails mediaPlayer, Brick brickToStartSound) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcxOTMzMg==", "bodyText": "I have found a better solution for the problem this function solved. I have deleted this function and the brickToStartSound.", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438719332", "createdAt": "2020-06-11T11:31:59Z", "author": {"login": "maxf24"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -74,6 +87,30 @@ public synchronized void playSoundFileWithStartTime(String pathToSoundfile,\n \t\t}\n \t}\n \n+\tprivate void stopSameSpritePlayingSameSound(String pathToSoundFile, Sprite spriteToStartSound,\n+\t\t\tBrick brickToStartSound) {\n+\t\tfor (MediaPlayerWithSoundDetails mediaPlayer : mediaPlayers) {\n+\t\t\tif (mediaPlayer.isPlaying() && mediaPlayer.getStartedBySprite() == spriteToStartSound\n+\t\t\t\t\t&& mediaPlayer.getPathToSoundFile().equals(pathToSoundFile)\n+\t\t\t\t\t&& checkStopWithStartedBrick(mediaPlayer, brickToStartSound)) {\n+\t\t\t\tmediaPlayer.stop();\n+\t\t\t\trecentlyStoppedSoundfilePaths.add(new SoundFilePathWithSprite(\n+\t\t\t\t\t\tmediaPlayer.getPathToSoundFile(), spriteToStartSound));\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate boolean checkStopWithStartedBrick(MediaPlayerWithSoundDetails mediaPlayer, Brick brickToStartSound) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyNjM5MQ=="}, "originalCommit": null, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTQyNTM4OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzozNzowNVrOGh1Lyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoxNTowMVrOGh25xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyNzU2Mw==", "bodyText": "PLEASE-EXPLAIN: Why do you compare the Script pointers here?", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438127563", "createdAt": "2020-06-10T13:37:05Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -74,6 +87,30 @@ public synchronized void playSoundFileWithStartTime(String pathToSoundfile,\n \t\t}\n \t}\n \n+\tprivate void stopSameSpritePlayingSameSound(String pathToSoundFile, Sprite spriteToStartSound,\n+\t\t\tBrick brickToStartSound) {\n+\t\tfor (MediaPlayerWithSoundDetails mediaPlayer : mediaPlayers) {\n+\t\t\tif (mediaPlayer.isPlaying() && mediaPlayer.getStartedBySprite() == spriteToStartSound\n+\t\t\t\t\t&& mediaPlayer.getPathToSoundFile().equals(pathToSoundFile)\n+\t\t\t\t\t&& checkStopWithStartedBrick(mediaPlayer, brickToStartSound)) {\n+\t\t\t\tmediaPlayer.stop();\n+\t\t\t\trecentlyStoppedSoundfilePaths.add(new SoundFilePathWithSprite(\n+\t\t\t\t\t\tmediaPlayer.getPathToSoundFile(), spriteToStartSound));\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate boolean checkStopWithStartedBrick(MediaPlayerWithSoundDetails mediaPlayer, Brick brickToStartSound) {\n+\t\tif (brickToStartSound instanceof PlaySoundAndWaitBrick || brickToStartSound instanceof SpeakAndWaitBrick) {\n+\t\t\treturn mediaPlayer.getStartedByBrick().getScript() != brickToStartSound.getScript();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE1NTcxOQ==", "bodyText": "This is the only (real) usage of the StartedByBrick. Is this line of code necessary or can this functionality be implemented in a better way?", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438155719", "createdAt": "2020-06-10T14:15:01Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -74,6 +87,30 @@ public synchronized void playSoundFileWithStartTime(String pathToSoundfile,\n \t\t}\n \t}\n \n+\tprivate void stopSameSpritePlayingSameSound(String pathToSoundFile, Sprite spriteToStartSound,\n+\t\t\tBrick brickToStartSound) {\n+\t\tfor (MediaPlayerWithSoundDetails mediaPlayer : mediaPlayers) {\n+\t\t\tif (mediaPlayer.isPlaying() && mediaPlayer.getStartedBySprite() == spriteToStartSound\n+\t\t\t\t\t&& mediaPlayer.getPathToSoundFile().equals(pathToSoundFile)\n+\t\t\t\t\t&& checkStopWithStartedBrick(mediaPlayer, brickToStartSound)) {\n+\t\t\t\tmediaPlayer.stop();\n+\t\t\t\trecentlyStoppedSoundfilePaths.add(new SoundFilePathWithSprite(\n+\t\t\t\t\t\tmediaPlayer.getPathToSoundFile(), spriteToStartSound));\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate boolean checkStopWithStartedBrick(MediaPlayerWithSoundDetails mediaPlayer, Brick brickToStartSound) {\n+\t\tif (brickToStartSound instanceof PlaySoundAndWaitBrick || brickToStartSound instanceof SpeakAndWaitBrick) {\n+\t\t\treturn mediaPlayer.getStartedByBrick().getScript() != brickToStartSound.getScript();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyNzU2Mw=="}, "originalCommit": null, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTQzNDk2OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzozOTowN1rOGh1Rkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzozOTowN1rOGh1Rkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyOTA0Mw==", "bodyText": "Nice!", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438129043", "createdAt": "2020-06-10T13:39:07Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -42,9 +50,10 @@\n \tprivate static final String TAG = SoundManager.class.getSimpleName();\n \tprivate static final SoundManager INSTANCE = new SoundManager();\n \n-\tprivate final List<MediaPlayer> mediaPlayers = new ArrayList<MediaPlayer>(MAX_MEDIA_PLAYERS);\n+\tprivate final List<MediaPlayerWithSoundDetails> mediaPlayers = new ArrayList<>(MAX_MEDIA_PLAYERS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTQ2MzAxOnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzo0NToyN1rOGh1jsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzo0NToyN1rOGh1jsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEzMzY4MA==", "bodyText": "PLEASE-FIX:\n\nRename method. (it does not stop the sprite, or does it?)\nRename the parameters spriteToStartSound -> sprite (it doesn't start the sound in this method) and the same for the brick\nRename pathToSoundFile to soundFilePath", "url": "https://github.com/Catrobat/Catroid/pull/3568#discussion_r438133680", "createdAt": "2020-06-10T13:45:27Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/io/SoundManager.java", "diffHunk": "@@ -74,6 +87,30 @@ public synchronized void playSoundFileWithStartTime(String pathToSoundfile,\n \t\t}\n \t}\n \n+\tprivate void stopSameSpritePlayingSameSound(String pathToSoundFile, Sprite spriteToStartSound,", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3913, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}