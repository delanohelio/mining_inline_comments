{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNDE3NjI5", "number": 3456, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDowMTo1NlrODedsGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzoxMjo0M1rODfig1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMjcwMjk4OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/content/bricks/FormulaBrick.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDowMTo1NlrOFnnGqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDowMTo1NlrOFnnGqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA3OTQ2Nw==", "bodyText": "Please make a new interface or a class (VisualPlacementBrick or smth) to minimize code duplication.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r377079467", "createdAt": "2020-02-10T14:01:56Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/content/bricks/FormulaBrick.java", "diffHunk": "@@ -149,6 +170,81 @@ public void showFormulaEditorToEditFormula(View view) {\n \t\t}\n \t}\n \n+\tpublic void showFormulaEditorVisualPlacementDecision(final View view) {\n+\t\tContext context = view.getContext();\n+\t\tFragment currentFragment = UiUtils.getActivityFromView(view).getSupportFragmentManager()\n+\t\t\t\t.findFragmentById(R.id.fragment_container);\n+\n+\t\tboolean showVisualPlacementDialog;\n+\t\tif (this instanceof PlaceAtBrick) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDMyMTA0OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDowOTowOFrOFov5gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDowOTowOFrOFov5gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI3MjEyOQ==", "bodyText": "Please split up in separate test cases.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378272129", "createdAt": "2020-02-12T14:09:08Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -48,56 +54,98 @@\n import static android.support.test.espresso.matcher.ViewMatchers.withText;\n \n import static org.catrobat.catroid.uiespresso.content.brick.utils.BrickDataInteractionWrapper.onBrickAtPosition;\n-import static org.catrobat.catroid.uiespresso.content.brick.utils.BrickTestUtils.createProjectAndGetStartScript;\n import static org.catrobat.catroid.uiespresso.formulaeditor.utils.FormulaEditorWrapper.onFormulaEditor;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \tprivate int brickPosition;\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", GlideToBrick.class, R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", PlaceAtBrick.class, R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic Class brickClass;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(9)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tTestUtils.deleteProjects(brickClass.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n \t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script = BrickTestUtils.createProjectAndGetStartScript(\"VisualPlacementBrickTest\");\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testVisualPlacementBrick() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 120}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDM1ODQ3OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoxODowNVrOFowPsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoxODowNVrOFowPsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI3NzgwOA==", "bodyText": "Please delete the right project.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378277808", "createdAt": "2020-02-12T14:18:05Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -48,56 +54,98 @@\n import static android.support.test.espresso.matcher.ViewMatchers.withText;\n \n import static org.catrobat.catroid.uiespresso.content.brick.utils.BrickDataInteractionWrapper.onBrickAtPosition;\n-import static org.catrobat.catroid.uiespresso.content.brick.utils.BrickTestUtils.createProjectAndGetStartScript;\n import static org.catrobat.catroid.uiespresso.formulaeditor.utils.FormulaEditorWrapper.onFormulaEditor;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \tprivate int brickPosition;\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", GlideToBrick.class, R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", PlaceAtBrick.class, R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic Class brickClass;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(9)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tTestUtils.deleteProjects(brickClass.getSimpleName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDM4MzQ3OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/intents/visualplacement/SpriteActivityVisualPlacementTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNDoxOVrOFowe9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNDoxOVrOFowe9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4MTcxOQ==", "bodyText": "Please delete this, it looks like a copy/paste error of a previous developer.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378281719", "createdAt": "2020-02-12T14:24:19Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/intents/visualplacement/SpriteActivityVisualPlacementTest.java", "diffHunk": "@@ -86,7 +86,7 @@ public void setUp() throws Exception {\n \t@After\n \tpublic void tearDown() throws Exception {\n \t\tIntents.release();\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDM4NTE5OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/ui/activity/ProjectActivityTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNDo0NlrOFowgAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNDo0NlrOFowgAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4MTk4NA==", "bodyText": "Here also.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378281984", "createdAt": "2020-02-12T14:24:46Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/ui/activity/ProjectActivityTest.java", "diffHunk": "@@ -88,7 +88,7 @@ public void setUp() {\n \t@After\n \tpublic void tearDown() throws Exception {\n \t\tIntents.release();\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDM5NDU3OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/content/bricks/GlideToBrick.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNzowNVrOFowl3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDoyNzowNVrOFowl3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4MzQ4Nw==", "bodyText": "Please rename this to getXEditTextId or smth. (same for Y)", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378283487", "createdAt": "2020-02-12T14:27:05Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/content/bricks/GlideToBrick.java", "diffHunk": "@@ -77,4 +77,24 @@ public void addActionToSequence(Sprite sprite, ScriptSequenceAction sequence) {\n \t\t\t\tgetFormulaWithBrickField(BrickField.Y_DESTINATION),\n \t\t\t\tgetFormulaWithBrickField(BrickField.DURATION_IN_SECONDS)));\n \t}\n+\n+\t@Override\n+\tpublic BrickField getXBrickField() {\n+\t\treturn BrickField.X_DESTINATION;\n+\t}\n+\n+\t@Override\n+\tpublic BrickField getYBrickField() {\n+\t\treturn BrickField.Y_DESTINATION;\n+\t}\n+\n+\t@Override\n+\tpublic int getXEditText() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDQxMzk5OnYy", "diffSide": "RIGHT", "path": "catroid/src/main/java/org/catrobat/catroid/ui/SpriteActivity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDozMTo1NFrOFowx4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNDozMTo1NFrOFowx4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4NjU2MQ==", "bodyText": "Make this to VisualPlacementBrick to minimize code duplication.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378286561", "createdAt": "2020-02-12T14:31:54Z", "author": {"login": "gPathpp"}, "path": "catroid/src/main/java/org/catrobat/catroid/ui/SpriteActivity.java", "diffHunk": "@@ -352,7 +353,11 @@ public void onActivityResult(int requestCode, int resultCode, Intent data) {\n \t\t\t\tif (fragment instanceof ScriptFragment) {\n \t\t\t\t\tBrick brick = ((ScriptFragment) fragment).findBrickByHash(brickHash);\n \t\t\t\t\tif (brick != null) {\n-\t\t\t\t\t\t((PlaceAtBrick) brick).setCoordinates(xCoordinate, yCoordinate);\n+\t\t\t\t\t\tif (brick instanceof PlaceAtBrick) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MzgzMjQ3OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjoyMjoyM1rOFpRyOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjoyMzoyM1rOFpRzzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgyNzMyMg==", "bodyText": "Please check if the pressBack here is really necessary.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378827322", "createdAt": "2020-02-13T12:22:23Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\n+\t\tonView(withId(editTextYId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgyNzcyNQ==", "bodyText": "And in all other tests in this file too, please.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378827725", "createdAt": "2020-02-13T12:23:23Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\n+\t\tonView(withId(editTextYId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgyNzMyMg=="}, "originalCommit": null, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzg1OTY5OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozMjozOFrOFpSDRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozMjozOFrOFpSDRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMTY4Nw==", "bodyText": "Since the input and the expected outcomes are everywhere the same, you could possibly move them into the test cases.\n(to reduce the overhead)", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378831687", "createdAt": "2020-02-13T12:32:38Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzg2OTMwOnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozNjowNlrOFpSJWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozNjowNlrOFpSJWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMzI0MA==", "bodyText": "If you make this type VisualPlacementBrick you can call the getX/getYEditTextId() and remove the two parameters.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378833240", "createdAt": "2020-02-13T12:36:06Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzg5OTgzOnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NjoxMFrOFpSbeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NjoxMFrOFpSbeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzNzg4MA==", "bodyText": "Please rename this, the visual placement option should also be shown if the formula was edited, but not with formulas which are not only a number. (like \"1+2\")", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378837880", "createdAt": "2020-02-13T12:46:10Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\n+\t\tonView(withId(editTextYId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testIsVisualPlacementShownOnBrickClick() {\n+\t\tonBrickAtPosition(1).performClick();\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testNoVisualPlacementAfterFormulaEdited() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 146}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MzkwNjc0OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0ODoyNFrOFpSfoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0ODoyNFrOFpSfoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODk0NA==", "bodyText": "Please search for a better option to verify that the FormulaEditor is shown.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378838944", "createdAt": "2020-02-13T12:48:24Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\n+\t\tonView(withId(editTextYId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testIsVisualPlacementShownOnBrickClick() {\n+\t\tonBrickAtPosition(1).performClick();\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testNoVisualPlacementAfterFormulaEdited() {\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n \t\t\t\t.perform(click());\n \t\tonFormulaEditor()\n-\t\t\t\t.performEnterFormula(\"1+2\")\n+\t\t\t\t.performEnterFormula(firstInput)\n \t\t\t\t.performCloseAndSave();\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n-\t\t\t\t.check(matches(withText(\"1 + 2 \")));\n-\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.check(matches(withText(expectedFirstOutput)))\n \t\t\t\t.perform(click());\n \t\tonFormulaEditor()", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 162}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzk0NDA2OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzowMTowM1rOFpS2yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzowMTowM1rOFpS2yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODg0NDg3Mg==", "bodyText": "You could separate this test too.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378844872", "createdAt": "2020-02-13T13:01:03Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 126}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzk3OTA4OnYy", "diffSide": "RIGHT", "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzoxMjo0M1rOFpTMMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzoxMjo0M1rOFpTMMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODg1MDM1NA==", "bodyText": "Please add a test case that verifies that the visual placement activity is shown after the click (or a similar test ;)). Have a look at Mockito :D.", "url": "https://github.com/Catrobat/Catroid/pull/3456#discussion_r378850354", "createdAt": "2020-02-13T13:12:43Z", "author": {"login": "gPathpp"}, "path": "catroid/src/androidTest/java/org/catrobat/catroid/uiespresso/content/brick/app/VisualPlacementBrickTest.java", "diffHunk": "@@ -51,62 +56,129 @@\n import static androidx.test.espresso.matcher.ViewMatchers.withId;\n import static androidx.test.espresso.matcher.ViewMatchers.withText;\n \n-@RunWith(AndroidJUnit4.class)\n-public class PlaceAtBrickTest {\n-\tprivate int brickPosition;\n+@Category({Cat.AppUi.class, Level.Smoke.class})\n+@RunWith(Parameterized.class)\n+public class VisualPlacementBrickTest {\n \n \t@Rule\n \tpublic FragmentActivityTestRule<SpriteActivity> baseActivityTestRule = new\n \t\t\tFragmentActivityTestRule<>(SpriteActivity.class, SpriteActivity.EXTRA_FRAGMENT_POSITION, SpriteActivity.FRAGMENT_SCRIPTS);\n \n+\t@Parameterized.Parameters(name = \"{0}\")\n+\tpublic static Collection<Object[]> data() {\n+\t\treturn Arrays.asList(new Object[][] {\n+\t\t\t\t{\"GlideToBrick\", R.string.brick_glide, new GlideToBrick(),\n+\t\t\t\t\t\tR.id.brick_glide_to_edit_text_x, R.id.brick_glide_to_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"},\n+\t\t\t\t{\"PlaceAtBrick\", R.string.brick_place_at, new PlaceAtBrick(),\n+\t\t\t\t\t\tR.id.brick_place_at_edit_text_x, R.id.brick_place_at_edit_text_y, \"1+2\",\n+\t\t\t\t\t\t42, \"1 + 2 \", \"42 \"}\n+\t\t});\n+\t}\n+\n+\t@Parameterized.Parameter\n+\tpublic String name;\n+\n+\t@Parameterized.Parameter(1)\n+\tpublic int brickString;\n+\n+\t@Parameterized.Parameter(2)\n+\tpublic Brick brick;\n+\n+\t@Parameterized.Parameter(3)\n+\tpublic int editTextXId;\n+\n+\t@Parameterized.Parameter(4)\n+\tpublic int editTextYId;\n+\n+\t@Parameterized.Parameter(5)\n+\tpublic String firstInput;\n+\n+\t@Parameterized.Parameter(6)\n+\tpublic int secondInput;\n+\n+\t@Parameterized.Parameter(7)\n+\tpublic String expectedFirstOutput;\n+\n+\t@Parameterized.Parameter(8)\n+\tpublic String expectedSecondOutput;\n+\n \t@After\n \tpublic void tearDown() throws Exception {\n-\t\tTestUtils.deleteProjects(PlaceAtBrickTest.class.getSimpleName());\n+\t\tbaseActivityTestRule.finishActivity();\n+\t\tTestUtils.deleteProjects(VisualPlacementBrickTest.class.getSimpleName());\n \t}\n \n \t@Before\n \tpublic void setUp() throws Exception {\n-\t\tbrickPosition = 1;\n-\t\tcreateProjectAndGetStartScript(PlaceAtBrickTest.class.getSimpleName())\n-\t\t\t\t.addBrick(new PlaceAtBrick());\n+\t\tScript script =\n+\t\t\t\tBrickTestUtils.createProjectAndGetStartScript(VisualPlacementBrickTest.class.getSimpleName());\n+\t\tscript.addBrick(brick);\n+\n \t\tbaseActivityTestRule.launchActivity();\n \t}\n \n-\t@Category({Cat.AppUi.class, Level.Smoke.class})\n \t@Test\n-\tpublic void testPlaceAtBrick() {\n-\t\tonBrickAtPosition(brickPosition).checkShowsText(R.string.brick_place_at);\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\tpublic void testIsVisualPlacementShown() {\n+\t\tonBrickAtPosition(1).checkShowsText(brickString);\n+\t\tonView(withId(editTextXId))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n-\t\t\t\t.check(matches(isDisplayed()))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\n+\t\tonView(withId(editTextYId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testIsVisualPlacementShownOnBrickClick() {\n+\t\tonBrickAtPosition(1).performClick();\n+\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n+\t\t\t\t.check(matches(isDisplayed()));\n+\t\tpressBack();\n+\t}\n+\n+\t@Test\n+\tpublic void testNoVisualPlacementAfterFormulaEdited() {\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n \t\t\t\t.perform(click());\n \t\tonFormulaEditor()\n-\t\t\t\t.performEnterFormula(\"1+2\")\n+\t\t\t\t.performEnterFormula(firstInput)\n \t\t\t\t.performCloseAndSave();\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n-\t\t\t\t.check(matches(withText(\"1 + 2 \")));\n-\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.check(matches(withText(expectedFirstOutput)))\n \t\t\t\t.perform(click());\n \t\tonFormulaEditor()\n-\t\t\t\t.performEnterNumber(42)\n+\t\t\t\t.performEnterNumber(0)\n \t\t\t\t.performCloseAndSave();\n-\t\tonView(withId(R.id.brick_place_at_edit_text_x))\n-\t\t\t\t.check(matches(withText(\"42 \")));\n+\t}\n \n-\t\tonView(withId(R.id.brick_place_at_edit_text_y))\n+\t@Test\n+\tpublic void testVisualPlacementAfterNumberEntered() {\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.perform(click());\n+\t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n+\t\t\t\t.perform(click());\n+\t\tonFormulaEditor()\n+\t\t\t\t.performEnterNumber(secondInput)\n+\t\t\t\t.performCloseAndSave();\n+\t\tonView(withId(editTextXId))\n+\t\t\t\t.check(matches(withText(expectedSecondOutput)))\n \t\t\t\t.perform(click());\n \t\tonView(withText(R.string.brick_place_at_option_place_visually))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tonView(withText(R.string.brick_context_dialog_formula_edit_brick))\n \t\t\t\t.check(matches(isDisplayed()));\n \t\tpressBack();\n-\n-\t\tonBrickAtPosition(brickPosition).performClick();\n-\t\tonView(withText(R.string.brick_place_at_option_place_visually))\n-\t\t\t\t.check(matches(isDisplayed()));\n \t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 192}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3974, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}