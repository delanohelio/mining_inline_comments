{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwMjM5MDg5", "number": 3794, "title": "fixDagAndTools", "bodyText": "#3349\nI couldn't reproduce the original error described in the ticket above, but there was another problem anyway. In the cwl documentation, I only see $include and $import but we were checking for that without a $.\nNow able to see a dag and tool table for  https://github.com/dockstore-testing/multi-step-cwl when testing locally, but it's still incorrect because of #3352\n#3797\nThe workflow mentioned doesn't include a cwlVersion which caused the NPE. Changed getContent() to return an optional instead. The version is marked as invalid in the versions table, but doesn't have a validation message in the files tab. When I register it locally now, it does have a validation message as well. I think the one on production just needs to be refreshed to get the validation message.\nMerged DockstoreTestUser2/dockstore-whalesay-imports#1 and updated some tests to use the new branch created.", "createdAt": "2020-09-04T22:56:58Z", "url": "https://github.com/dockstore/dockstore/pull/3794", "merged": true, "mergeCommit": {"oid": "5caaad2b37a37e6b0c0f6844b6008e180e64e759"}, "closed": true, "closedAt": "2020-09-23T17:58:52Z", "author": {"login": "NatalieEO"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFsj7DgH2gAyNDgwMjM5MDg5OmQ4YjMwNDdhNGQ5YzAzNTBlM2UxNGVmZjRjYzQ0MTgyZGE5YTZmZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLuxQPAH2gAyNDgwMjM5MDg5OmZkZmM5YjgwMjc2YzY4ZDJjY2RjNmM4ODIxMGMyMzlkZjcyMjExN2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8", "committedDate": "2020-09-04T22:01:55Z", "message": "$import $include"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MjA3MjM0", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-484207234", "createdAt": "2020-09-08T14:37:33Z", "commit": {"oid": "d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDozNzozM1rOHOgVIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDozNzozM1rOHOgVIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3MTgxMQ==", "bodyText": "Was the $ optional at some point?", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r484971811", "createdAt": "2020-09-08T14:37:33Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/CWLHandler.java", "diffHunk": "@@ -358,12 +358,12 @@ public String getContent(String mainDescriptorPath, String mainDescriptor, Set<S\n                         stepToType.put(workflowStepId, expressionToolType);\n                     } else if (run instanceof Map) {\n                         // must be import or include\n-                        Object importVal = ((Map)run).get(\"import\");\n+                        Object importVal = ((Map)run).get(\"$import\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d969e88023d00f77052e297cc880e65fc83e7d39", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/d969e88023d00f77052e297cc880e65fc83e7d39", "committedDate": "2020-09-08T20:39:43Z", "message": "check for docker if type tool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcec146abb115388a3c63d17ee08b80aa15041e9", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/fcec146abb115388a3c63d17ee08b80aa15041e9", "committedDate": "2020-09-08T20:54:26Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTA5NTUw", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-484509550", "createdAt": "2020-09-08T21:36:50Z", "commit": {"oid": "fcec146abb115388a3c63d17ee08b80aa15041e9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDgzOTM2", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-485083936", "createdAt": "2020-09-09T14:42:49Z", "commit": {"oid": "fcec146abb115388a3c63d17ee08b80aa15041e9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NDU0NTky", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-485454592", "createdAt": "2020-09-09T22:50:02Z", "commit": {"oid": "fcec146abb115388a3c63d17ee08b80aa15041e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMjo1MDowMlrOHPc5EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMjo1MDowMlrOHPc5EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk2NDA0OA==", "bodyText": "Is there any reason for this? Just added two slashes at the end of the line? Just trying to make sure I understand.", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r485964048", "createdAt": "2020-09-09T22:50:02Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/CWLHandler.java", "diffHunk": "@@ -561,7 +566,7 @@ private String getRequirementOrHint(List<Object> requirements, List<Object> hint\n      * @param yaml\n      * @return\n      */\n-    private String parseSecondaryFile(String stepDockerRequirement, String secondaryFileContents, Gson gson, Yaml yaml) {\n+    private String parseSecondaryFile(String stepDockerRequirement, String secondaryFileContents, Gson gson, Yaml yaml) { //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcec146abb115388a3c63d17ee08b80aa15041e9"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f19334385fe1fd251b7189ca3938b378cb411fd", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/9f19334385fe1fd251b7189ca3938b378cb411fd", "committedDate": "2020-09-14T19:43:48Z", "message": "change return to Optional<String> to avoid NPEs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTEzMzM5", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-488113339", "createdAt": "2020-09-14T20:23:36Z", "commit": {"oid": "9f19334385fe1fd251b7189ca3938b378cb411fd"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDoyMzozNlrOHRlQxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDozMzoxNFrOHRljgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE5ODM0MQ==", "bodyText": "I can't believe I'm going to say this, since I think Optional is great, and I'm always pushing people to use it, but this change will force us to update the Galaxy plugin as well, since it implements this interface. Not sure we want to go down that route. Maybe... Best to get Denis' opinion.", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488198341", "createdAt": "2020-09-14T20:23:36Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/LanguageHandlerInterface.java", "diffHunk": "@@ -141,7 +141,7 @@\n      * @param dao                  used to retrieve information on tools\n      * @return either a DAG or some form of a list of tools for a workflow\n      */\n-    String getContent(String mainDescriptorPath, String mainDescriptor, Set<SourceFile> secondarySourceFiles, Type type, ToolDAO dao);\n+    Optional<String> getContent(String mainDescriptorPath, String mainDescriptor, Set<SourceFile> secondarySourceFiles, Type type, ToolDAO dao);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f19334385fe1fd251b7189ca3938b378cb411fd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwMTE1NQ==", "bodyText": "Before, if there was an error, it would setToolTableJson(null). Now you don't set it at all. Do you want that?\nI don't know the answer, just raising the question. In theory, without understanding the whole flow, it seems like if there were already a value in that fiel, it would get cleared before your change, and now it doesn't.\nThis happens in at least 2 other places (ran across this one first). Checking that this is as intended everywhere. Could very well be the bug fix :) But I'm still concerned about old values not being cleared.", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488201155", "createdAt": "2020-09-14T20:29:06Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/WorkflowResource.java", "diffHunk": "@@ -1543,10 +1549,13 @@ public String getTableToolContent(@ApiParam(hidden = true) @Parameter(hidden = t\n         if (mainDescriptor != null) {\n             Set<SourceFile> secondaryDescContent = extractDescriptorAndSecondaryFiles(workflowVersion);\n             LanguageHandlerInterface lInterface = LanguageHandlerFactory.getInterface(workflow.getFileType());\n-            final String toolTableJson = lInterface.getContent(workflowVersion.getWorkflowPath(), mainDescriptor.getContent(), secondaryDescContent,\n+            final Optional<String> toolTableJson = lInterface.getContent(workflowVersion.getWorkflowPath(), mainDescriptor.getContent(), secondaryDescContent,\n                 LanguageHandlerInterface.Type.TOOLS, toolDAO);\n-            workflowVersion.setToolTableJson(toolTableJson);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f19334385fe1fd251b7189ca3938b378cb411fd"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwMzEzOA==", "bodyText": "Were you going to fetch both, with and without the $, or did you decided that with the $ is the only way to go? If $ is the only way to go, does that mean $import and $include have never worked?", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488203138", "createdAt": "2020-09-14T20:33:14Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/CWLHandler.java", "diffHunk": "@@ -358,12 +358,12 @@ public String getContent(String mainDescriptorPath, String mainDescriptor, Set<S\n                         stepToType.put(workflowStepId, expressionToolType);\n                     } else if (run instanceof Map) {\n                         // must be import or include\n-                        Object importVal = ((Map)run).get(\"import\");\n+                        Object importVal = ((Map)run).get(\"$import\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3MTgxMQ=="}, "originalCommit": {"oid": "d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTQ2NDI4", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-488146428", "createdAt": "2020-09-14T21:15:02Z", "commit": {"oid": "9f19334385fe1fd251b7189ca3938b378cb411fd"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f27537b85c4aa0aaece89d412d7e800a65d77a1", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/3f27537b85c4aa0aaece89d412d7e800a65d77a1", "committedDate": "2020-09-14T21:43:40Z", "message": "fix test, clear dag and tool table if there was an error retrieving the info."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODY1MDMz", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-488865033", "createdAt": "2020-09-15T16:34:23Z", "commit": {"oid": "3f27537b85c4aa0aaece89d412d7e800a65d77a1"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjozNDoyM1rOHSKUIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjo0ODo0N1rOHSK2qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgwNTQxMQ==", "bodyText": "This is the other instance of it not being set to null where it would have been before", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488805411", "createdAt": "2020-09-15T16:34:23Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/WorkflowResource.java", "diffHunk": "@@ -1460,8 +1462,10 @@ public Workflow manualRegister(@ApiParam(hidden = true) @Parameter(hidden = true\n \n                     // store dag\n                     if (existingTag.getDagJson() == null) {\n-                        String dagJson = lInterface.getCleanDAG(w.getWorkflowPath(), getMainDescriptorFile(existingTag).getContent(), extractDescriptorAndSecondaryFiles(existingTag), LanguageHandlerInterface.Type.DAG, toolDAO);\n-                        existingTag.setDagJson(dagJson);\n+                        Optional<String> dagJson = lInterface.getCleanDAG(w.getWorkflowPath(), getMainDescriptorFile(existingTag).getContent(), extractDescriptorAndSecondaryFiles(existingTag), LanguageHandlerInterface.Type.DAG, toolDAO);\n+                        if (dagJson.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f27537b85c4aa0aaece89d412d7e800a65d77a1"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgxMTY5Mg==", "bodyText": "This is fine, but you could also write it like:\nfinal String json = toolTableJson.getOrElse(null);\nworkflowVersion.setTooltableJson(json);\nreturn json;", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488811692", "createdAt": "2020-09-15T16:44:38Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/WorkflowResource.java", "diffHunk": "@@ -1543,10 +1552,16 @@ public String getTableToolContent(@ApiParam(hidden = true) @Parameter(hidden = t\n         if (mainDescriptor != null) {\n             Set<SourceFile> secondaryDescContent = extractDescriptorAndSecondaryFiles(workflowVersion);\n             LanguageHandlerInterface lInterface = LanguageHandlerFactory.getInterface(workflow.getFileType());\n-            final String toolTableJson = lInterface.getContent(workflowVersion.getWorkflowPath(), mainDescriptor.getContent(), secondaryDescContent,\n+            final Optional<String> toolTableJson = lInterface.getContent(workflowVersion.getWorkflowPath(), mainDescriptor.getContent(), secondaryDescContent,\n                 LanguageHandlerInterface.Type.TOOLS, toolDAO);\n-            workflowVersion.setToolTableJson(toolTableJson);\n-            return toolTableJson;\n+            if (toolTableJson.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f27537b85c4aa0aaece89d412d7e800a65d77a1"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgxNDI1MA==", "bodyText": "I think you have the wrong link, it links back to this comment.\nI don't know enough about CWL to know the answer. Maybe you could query all of our CWL source files to see if they're present without the$?", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r488814250", "createdAt": "2020-09-15T16:48:47Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/CWLHandler.java", "diffHunk": "@@ -358,12 +358,12 @@ public String getContent(String mainDescriptorPath, String mainDescriptor, Set<S\n                         stepToType.put(workflowStepId, expressionToolType);\n                     } else if (run instanceof Map) {\n                         // must be import or include\n-                        Object importVal = ((Map)run).get(\"import\");\n+                        Object importVal = ((Map)run).get(\"$import\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3MTgxMQ=="}, "originalCommit": {"oid": "d8b3047a4d9c0350e3e14eff4cc44182da9a6ff8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTU0MDEw", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-488954010", "createdAt": "2020-09-15T18:29:56Z", "commit": {"oid": "3f27537b85c4aa0aaece89d412d7e800a65d77a1"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6", "committedDate": "2020-09-19T00:33:45Z", "message": "handle with and without $, use less optional, clean up"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyOTU3MzQ5", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-492957349", "createdAt": "2020-09-21T20:30:55Z", "commit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMDozMDo1NVrOHVhVQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMDozMDo1NVrOHVhVQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjMyODI1Nw==", "bodyText": "I don't understand the whole flow, but this is saying that if run is a Map, then return an Optional.empty if the map doesn't reference an import. Are we saying we always want that? I guess so, and I'm saying in English what the code does, and this may be the whole point of the fix, but it also seems like a bit of a change, so just making sure.", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r492328257", "createdAt": "2020-09-21T20:30:55Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/languages/CWLHandler.java", "diffHunk": "@@ -358,15 +358,20 @@ public String getContent(String mainDescriptorPath, String mainDescriptor, Set<S\n                         stepToType.put(workflowStepId, expressionToolType);\n                     } else if (run instanceof Map) {\n                         // must be import or include\n-                        Object importVal = ((Map)run).get(\"import\");\n+                        Object importVal = ((Map)run).containsKey(\"$import\") ? ((Map)run).get(\"$import\") : ((Map)run).get(\"import\");\n                         if (importVal != null) {\n                             secondaryFile = importVal.toString();\n                         }\n \n-                        Object includeVal = ((Map)run).get(\"include\");\n+                        Object includeVal = ((Map)run).containsKey(\"$include\") ? ((Map)run).get(\"$include\") : ((Map)run).get(\"include\");\n                         if (includeVal != null) {\n                             secondaryFile = includeVal.toString();\n                         }\n+\n+                        if (secondaryFile == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTI1MjQ4", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-493925248", "createdAt": "2020-09-23T00:05:21Z", "commit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzMxNjQ1", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-494731645", "createdAt": "2020-09-23T14:37:17Z", "commit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDozNzoxN1rOHWxxnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDozNzoxN1rOHWxxnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY0NjIzNw==", "bodyText": "Weird comment formatting", "url": "https://github.com/dockstore/dockstore/pull/3794#discussion_r493646237", "createdAt": "2020-09-23T14:37:17Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/DAGHelper.java", "diffHunk": "@@ -38,11 +38,12 @@ private DAGHelper() {\n      * @param dag The unclean DAG with edges that may have undefined nodes\n      * @return The clean DAG without edges that have undefined nodes\n      */\n+    //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzQ5ODQw", "url": "https://github.com/dockstore/dockstore/pull/3794#pullrequestreview-494749840", "createdAt": "2020-09-23T14:54:14Z", "commit": {"oid": "ed2f2679de586ab2bb83af2ba0ae7ba34fa6a3c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfc9b80276c68d2ccdc6c88210c239df722117d", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/fdfc9b80276c68d2ccdc6c88210c239df722117d", "committedDate": "2020-09-23T15:59:50Z", "message": "remove comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1761, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}