{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NzQ1NDkx", "number": 3427, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDowODowN1rOD28_uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDoxMTozNFrOD29Ddg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTQ5MDQ5OnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDowODowN1rOGM81ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNToxNTowNVrOGNZLBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIzMjg5MA==", "bodyText": "Based on a discussion on another PR, I wonder if this should be case-insensitive? Probably better if not, even if we're slightly inconsistent.", "url": "https://github.com/dockstore/dockstore/pull/3427#discussion_r416232890", "createdAt": "2020-04-28T00:08:07Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "diffHunk": "@@ -980,7 +980,10 @@ public void checkCanRead(User user, Entry tool) {\n         FileType fileType =\n             (descriptorType.toUpperCase().equals(DescriptorType.CWL.toString())) ? DescriptorLanguage.FileType.CWL_TEST_JSON : DescriptorLanguage.FileType.WDL_TEST_JSON;\n         for (String path : testParameterPaths) {\n-            sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);\n+            boolean fileDeleted = sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea6eb7878d0bc934eea68c597feca4b7bf299b4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY5NzA5Mw==", "bodyText": "\ud83e\udd14", "url": "https://github.com/dockstore/dockstore/pull/3427#discussion_r416697093", "createdAt": "2020-04-28T15:15:05Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "diffHunk": "@@ -980,7 +980,10 @@ public void checkCanRead(User user, Entry tool) {\n         FileType fileType =\n             (descriptorType.toUpperCase().equals(DescriptorType.CWL.toString())) ? DescriptorLanguage.FileType.CWL_TEST_JSON : DescriptorLanguage.FileType.WDL_TEST_JSON;\n         for (String path : testParameterPaths) {\n-            sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);\n+            boolean fileDeleted = sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIzMjg5MA=="}, "originalCommit": {"oid": "aea6eb7878d0bc934eea68c597feca4b7bf299b4"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTUwMDA2OnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDoxMTozNFrOGM863A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDoxMTozNFrOGM863A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIzNDIwNA==", "bodyText": "Technically you could have a file with that path based on your condition on line 983 -- if it had a different type. Probably would never happen, but you could say \"There are no existing test parameter files...\".", "url": "https://github.com/dockstore/dockstore/pull/3427#discussion_r416234204", "createdAt": "2020-04-28T00:11:34Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "diffHunk": "@@ -980,7 +980,10 @@ public void checkCanRead(User user, Entry tool) {\n         FileType fileType =\n             (descriptorType.toUpperCase().equals(DescriptorType.CWL.toString())) ? DescriptorLanguage.FileType.CWL_TEST_JSON : DescriptorLanguage.FileType.WDL_TEST_JSON;\n         for (String path : testParameterPaths) {\n-            sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);\n+            boolean fileDeleted = sourceFiles.removeIf((SourceFile v) -> v.getPath().equals(path) && v.getType() == fileType);\n+            if (!fileDeleted) {\n+                throw new CustomWebApplicationException(\"There are no existing files with the path: \" + path, HttpStatus.SC_NOT_FOUND);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea6eb7878d0bc934eea68c597feca4b7bf299b4"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2922, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}