{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMzczODU4", "number": 3798, "title": "Custom message if can't recognize key in .dockstore.yml", "bodyText": "#3564\ngive custom message instead if can't recognize a property in .dockstore.yml", "createdAt": "2020-09-08T23:59:57Z", "url": "https://github.com/dockstore/dockstore/pull/3798", "merged": true, "mergeCommit": {"oid": "b2d5c7763529946113a8d26eb938564467e93d09"}, "closed": true, "closedAt": "2020-09-10T21:03:10Z", "author": {"login": "NatalieEO"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHAo0_AH2gAyNDgyMzczODU4OmY1NWMyZWRhMmFjYmVmZjQ2YTYwYmY0YjA3Yzg3MDJlNGU5NDhiNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHm8r7gFqTQ4NjI5MTc0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f55c2eda2acbeff46a60bf4b07c8702e4e948b76", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/f55c2eda2acbeff46a60bf4b07c8702e4e948b76", "committedDate": "2020-09-08T23:59:18Z", "message": "if a key is unrecognized, create custom msg"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MzM4NjIw", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-485338620", "createdAt": "2020-09-09T19:25:56Z", "commit": {"oid": "f55c2eda2acbeff46a60bf4b07c8702e4e948b76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOToyNTo1NlrOHPWd2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOToyNTo1NlrOHPWd2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg1ODc3Nw==", "bodyText": "Could use a test, these string parse indexes feel breakable if the underlying library changes", "url": "https://github.com/dockstore/dockstore/pull/3798#discussion_r485858777", "createdAt": "2020-09-09T19:25:56Z", "author": {"login": "denis-yuen"}, "path": "dockstore-common/src/main/java/io/dockstore/common/yaml/DockstoreYamlHelper.java", "diffHunk": "@@ -177,7 +177,15 @@ private static DockstoreYaml12 readDockstoreYaml12(final String content) throws\n             final Yaml yaml = new Yaml(constructor);\n             return yaml.load(content);\n         } catch (Exception e) {\n-            final String msg = ERROR_READING_DOCKSTORE_YML + e.getMessage();\n+            String msg = ERROR_READING_DOCKSTORE_YML;\n+            String errorMsg = e.getMessage();\n+            if (errorMsg.startsWith(\"Cannot create property=\")) {\n+                int startIndex = errorMsg.indexOf(\"=\") + 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55c2eda2acbeff46a60bf4b07c8702e4e948b76"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NDUzNTk3", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-485453597", "createdAt": "2020-09-09T22:47:25Z", "commit": {"oid": "f55c2eda2acbeff46a60bf4b07c8702e4e948b76"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae2ad267a81c88fb6aa5492063ab1dd8e8b1fc6b", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/ae2ad267a81c88fb6aa5492063ab1dd8e8b1fc6b", "committedDate": "2020-09-09T23:54:01Z", "message": "add unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTEwMTQ0", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-486110144", "createdAt": "2020-09-10T16:27:21Z", "commit": {"oid": "ae2ad267a81c88fb6aa5492063ab1dd8e8b1fc6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzoyMVrOHP8Kqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzoyMVrOHP8Kqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NjQ1OQ==", "bodyText": "Pattern.compile is relatively expensive. If the pattern isn't changing, which it's not, you should just compile it once. Best link I could find off-hand. Realistically, it's more of an issue in a loop; one call here isn't going to make a noticeable difference to the end user. Still, little things add up and it's easy enough to fix.\nSince you're using a regex here, suggest you just use one regex for everything, rather than a combo of contains and regex, e.g., something like (not tested, probably has syntax errors, and may not match your target string): Pattern.compile(\"Unable to find property '(.+)'\");\n\nI also encourage the use of final when applicable. And I thought Codacy at one point flagged those, but I guess it's not any more.", "url": "https://github.com/dockstore/dockstore/pull/3798#discussion_r486476459", "createdAt": "2020-09-10T16:27:21Z", "author": {"login": "coverbeck"}, "path": "dockstore-common/src/main/java/io/dockstore/common/yaml/DockstoreYamlHelper.java", "diffHunk": "@@ -177,7 +177,21 @@ private static DockstoreYaml12 readDockstoreYaml12(final String content) throws\n             final Yaml yaml = new Yaml(constructor);\n             return yaml.load(content);\n         } catch (Exception e) {\n-            final String msg = ERROR_READING_DOCKSTORE_YML + e.getMessage();\n+            String msg = ERROR_READING_DOCKSTORE_YML;\n+            String errorMsg = e.getMessage();\n+            final String cannotCreateProperty = \"Unable to find property \";\n+            if (errorMsg.contains(cannotCreateProperty)) {\n+                String truncatedError = errorMsg.substring(errorMsg.indexOf(cannotCreateProperty) + cannotCreateProperty.length());\n+                Pattern pattern = Pattern.compile(\"'(.+)'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2ad267a81c88fb6aa5492063ab1dd8e8b1fc6b"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e2b2d411d7ec69dd9b31fb3a43cd7c7ac234da1", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/8e2b2d411d7ec69dd9b31fb3a43cd7c7ac234da1", "committedDate": "2020-09-10T17:25:35Z", "message": "refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83df8dbbaf683a488fa5565073b0fd1d56695f87", "author": {"user": {"login": "NatalieEO", "name": null}}, "url": "https://github.com/dockstore/dockstore/commit/83df8dbbaf683a488fa5565073b0fd1d56695f87", "committedDate": "2020-09-10T17:47:06Z", "message": "check style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MjY4NTgw", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-486268580", "createdAt": "2020-09-10T20:02:01Z", "commit": {"oid": "83df8dbbaf683a488fa5565073b0fd1d56695f87"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2Mjg0MDg0", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-486284084", "createdAt": "2020-09-10T20:25:45Z", "commit": {"oid": "83df8dbbaf683a488fa5565073b0fd1d56695f87"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MjkxNzQx", "url": "https://github.com/dockstore/dockstore/pull/3798#pullrequestreview-486291741", "createdAt": "2020-09-10T20:37:23Z", "commit": {"oid": "83df8dbbaf683a488fa5565073b0fd1d56695f87"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1765, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}