{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4ODExMTk3", "number": 3788, "title": "Set up git-secrets/maven integration", "bodyText": "The intention of this PR is to help keep passwords and keys from ending up in the source tree using git-secrets. git-secrets itself must be installed and available in the path for this to work. This helps avoid the need to manage whether the git hooks have been installed, and whether the correct providers are set up.\nA .gitallowed file is added that will allow all the matches discovered while hooking this up.\nOnce this is merged, developers will have to have install git-secrets to the their path, but this PR will manage setting it up for the repo.\nYou can try it out by running mvn initialize. Then try adding a credentials file to a commit.\n[default]\naws_access_key_id = AKIAZHZQVUBBBBBBBBBB\naws_secret_access_key = 5AHiqowZsCCCCCCCCCCBBBBBBBBBBCCCCCCCCCC0\n\nYou should see an error like:\ncredentials:2:aws_access_key_id = AKIAZHZQVUBBBBBBBBBB\ncredentials:3:aws_secret_access_key = 5AHiqowZsCCCCCCCCCCBBBBBBBBBBCCCCCCCCCC0\n\n[ERROR] Matched one or more prohibited patterns\n\nPossible mitigations:\n- Mark false positives as allowed using: git config --add secrets.allowed ...\n- Mark false positives as allowed by adding regular expressions to .gitallowed at repository's root directory\n- List your configured patterns: git config --get-all secrets.patterns\n- List your configured allowed patterns: git config --get-all secrets.allowed\n- List your configured allowed patterns in .gitallowed at repository's root directory\n\nAnd your changes will not have been committed. The suggested method is to use .gitallowed if you are confident it is a false positive for a file that has a password-like string in it.\nIn a future PR we could consider adding the scan to a CI stage. https://ucsc-cgl.atlassian.net/browse/SEAB-1531", "createdAt": "2020-09-03T18:25:38Z", "url": "https://github.com/dockstore/dockstore/pull/3788", "merged": true, "mergeCommit": {"oid": "77f9b79a23f104f2596c4b2a03c98ce790030378"}, "closed": true, "closedAt": "2020-09-11T18:47:18Z", "author": {"login": "david4096"}, "timelineItems": {"totalCount": 40, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFVO6UgBqjM3MjYxMzcwNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH4KjdgBqjM3NTcxMDI1MTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fde183f523af7ca872ea911bc0598e4e59ebbdb3", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/fde183f523af7ca872ea911bc0598e4e59ebbdb3", "committedDate": "2020-09-03T18:23:49Z", "message": "Add an exec plugin that sets git config during initialize"}, "afterCommit": {"oid": "a244772a25e6fc33540d4704840d70be8d0c9af1", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/a244772a25e6fc33540d4704840d70be8d0c9af1", "committedDate": "2020-09-03T18:50:31Z", "message": "Add an exec plugin that sets git config during initialize\nSet up git secrets AWS provider\nMake sure we don't set extra configs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "394ecdb87d5299f7800ccce6c4a587f92d726b4f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/394ecdb87d5299f7800ccce6c4a587f92d726b4f", "committedDate": "2020-09-03T19:29:25Z", "message": "Move installation to a bash script"}, "afterCommit": {"oid": "6f81d9b19ab15b3f73d81f44bd4c9a68b545ca79", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/6f81d9b19ab15b3f73d81f44bd4c9a68b545ca79", "committedDate": "2020-09-03T19:30:57Z", "message": "Move installation to a bash script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab3973f5a1f865257f896bfcdf4abb1b2382bdc8", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/ab3973f5a1f865257f896bfcdf4abb1b2382bdc8", "committedDate": "2020-09-03T20:31:06Z", "message": "Clear false positives in current source"}, "afterCommit": {"oid": "b77f15e96bacb26b0a997f689ed5b2e855ada065", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/b77f15e96bacb26b0a997f689ed5b2e855ada065", "committedDate": "2020-09-03T20:51:14Z", "message": "Clear false positives in current source"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMjM3OTE3", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-482237917", "createdAt": "2020-09-03T22:13:28Z", "commit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMjc5NTk5", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-482279599", "createdAt": "2020-09-04T00:12:52Z", "commit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwMDoxMjo1MlrOHM7WkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwMDoyNjowOVrOHM7j3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMxNzM5Mw==", "bodyText": "Will this work on Windows? Do we care if not?\nAt compliance meeting you said more people were starting to use Windows, although I'm not aware of any on Dockstore team. And if they do, they could presumably use WSL. But, checking to be safe.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r483317393", "createdAt": "2020-09-04T00:12:52Z", "author": {"login": "coverbeck"}, "path": "pom.xml", "diffHunk": "@@ -431,9 +431,26 @@\n                     <artifactId>license-maven-plugin</artifactId>\n                     <version>2.0.0</version>\n                 </plugin>\n+                <plugin>\n+                    <artifactId>exec-maven-plugin</artifactId>\n+                    <version>1.6.0</version>\n+                    <groupId>org.codehaus.mojo</groupId>\n+                    <executions>\n+                        <execution>\n+                            <id>Install git-secrets</id>\n+                            <phase>initialize</phase>\n+                            <goals>\n+                                <goal>exec</goal>\n+                            </goals>\n+                            <configuration>\n+                                <executable>bash</executable>\n+                                <commandlineArgs>${project.parent.basedir}/git-hooks/install.sh</commandlineArgs>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMxOTM1MA==", "bodyText": "What happens if git-secrets is not installed? Presumably/hopefully this script fails and in turn causes the build to fail?\nDo you need the oft recommended by Denis:\n\nset -o errexit\nset -o nounset\nset -o pipefail\n\n\nEvery time a build is done, this will remove hooks, call git secrets --register-aws, and add hooks again. Is that OK? If the git secrets --register-aws is idempotent, should be fine, but just checking.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r483319350", "createdAt": "2020-09-04T00:20:29Z", "author": {"login": "coverbeck"}, "path": "git-hooks/install.sh", "diffHunk": "@@ -0,0 +1,9 @@\n+#!/bin/bash", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMyMDc5OQ==", "bodyText": "The risk of allow-listing files is that somebody could accidentally add a secret to one of the files, and it wouldn't be caught. Don't know if I'm being overly paranoid, but throwing it out there for consideration.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r483320799", "createdAt": "2020-09-04T00:26:09Z", "author": {"login": "coverbeck"}, "path": ".gitallowed", "diffHunk": "@@ -0,0 +1,32 @@\n+# Each line is a regular expression against the output of git-secrets", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98543bc65a9eb5ccaf0f9f1ff21b96a5b4855b5e", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/98543bc65a9eb5ccaf0f9f1ff21b96a5b4855b5e", "committedDate": "2020-09-04T18:57:51Z", "message": "Move script, simplify, set bash flags"}, "afterCommit": {"oid": "511c6fc0c5ad4e6a46e000d4007dd8ac51850983", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/511c6fc0c5ad4e6a46e000d4007dd8ac51850983", "committedDate": "2020-09-04T19:02:56Z", "message": "Move script, simplify, set bash flags"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4911b1fa910b7e3effff750597bb5c3c6ceca827", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/4911b1fa910b7e3effff750597bb5c3c6ceca827", "committedDate": "2020-09-04T19:21:00Z", "message": "Install git-secrets in CI"}, "afterCommit": {"oid": "8e69a384dc7dc8b38286a21e5d9fe4c7ff23cdac", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/8e69a384dc7dc8b38286a21e5d9fe4c7ff23cdac", "committedDate": "2020-09-04T19:23:12Z", "message": "Install git-secrets in CI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e69a384dc7dc8b38286a21e5d9fe4c7ff23cdac", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/8e69a384dc7dc8b38286a21e5d9fe4c7ff23cdac", "committedDate": "2020-09-04T19:23:12Z", "message": "Install git-secrets in CI"}, "afterCommit": {"oid": "79a4500778495f9becb52462e730c855450af8d9", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/79a4500778495f9becb52462e730c855450af8d9", "committedDate": "2020-09-04T19:36:27Z", "message": "Install git-secrets in CI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee47d56e91c7e19e2936762490ff1cf6a3093a8e", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/ee47d56e91c7e19e2936762490ff1cf6a3093a8e", "committedDate": "2020-09-04T22:06:52Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}, "afterCommit": {"oid": "567d6c4745dabddee57b8560bba967608047d375", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/567d6c4745dabddee57b8560bba967608047d375", "committedDate": "2020-09-04T22:11:24Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "567d6c4745dabddee57b8560bba967608047d375", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/567d6c4745dabddee57b8560bba967608047d375", "committedDate": "2020-09-04T22:11:24Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}, "afterCommit": {"oid": "9a085ea46db870a51503ec04ffddcc9045dfda96", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/9a085ea46db870a51503ec04ffddcc9045dfda96", "committedDate": "2020-09-04T22:14:04Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a085ea46db870a51503ec04ffddcc9045dfda96", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/9a085ea46db870a51503ec04ffddcc9045dfda96", "committedDate": "2020-09-04T22:14:04Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}, "afterCommit": {"oid": "655f8009807a59ccaf8043ce6f8522f3ea72b3da", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/655f8009807a59ccaf8043ce6f8522f3ea72b3da", "committedDate": "2020-09-04T22:14:43Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "655f8009807a59ccaf8043ce6f8522f3ea72b3da", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/655f8009807a59ccaf8043ce6f8522f3ea72b3da", "committedDate": "2020-09-04T22:14:43Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged."}, "afterCommit": {"oid": "992374750f6459b415639eaf2e63af2924899e8f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/992374750f6459b415639eaf2e63af2924899e8f", "committedDate": "2020-09-04T22:26:07Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "992374750f6459b415639eaf2e63af2924899e8f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/992374750f6459b415639eaf2e63af2924899e8f", "committedDate": "2020-09-04T22:26:07Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script"}, "afterCommit": {"oid": "25090ac2546a11403c7ecb6bf116833344ca707f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/25090ac2546a11403c7ecb6bf116833344ca707f", "committedDate": "2020-09-04T22:33:15Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25090ac2546a11403c7ecb6bf116833344ca707f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/25090ac2546a11403c7ecb6bf116833344ca707f", "committedDate": "2020-09-04T22:33:15Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script"}, "afterCommit": {"oid": "19f4712035438269cea3eba4135ae77f4124ad57", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/19f4712035438269cea3eba4135ae77f4124ad57", "committedDate": "2020-09-04T23:13:59Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script\nAnd add git-secrets to lgtm"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e7f0646a32267d2dc14031b60f38fc14c82b60b", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/1e7f0646a32267d2dc14031b60f38fc14c82b60b", "committedDate": "2020-09-05T00:19:41Z", "message": "One lgtm.yml to rule them all"}, "afterCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/5154b1f49a9d0c12d004e3d56dfe1683fc133329", "committedDate": "2020-09-05T00:28:10Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjcyMTgy", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-483672182", "createdAt": "2020-09-07T17:19:27Z", "commit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoxOToyN1rOHOFPXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzo0Nzo0OFrOHOFmjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUyNzk2Nw==", "bodyText": "Was this file auto-generated? Would it be possible to auto-generate? This file doesn't seem easily maintainable. Also it isn't clear what the reason is for these exceptions.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484527967", "createdAt": "2020-09-07T17:19:27Z", "author": {"login": "chmreid"}, "path": ".gitallowed", "diffHunk": "@@ -0,0 +1,32 @@\n+# Each line is a regular expression against the output of git-secrets", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMyMDc5OQ=="}, "originalCommit": {"oid": "481a0ba6c043641fcf70d441b87aafe270fdf0fa"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUyODIzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            of the source tree. For information on installing it on your platform check https://github.com/awslabs/git-secrets#id6 .\n          \n          \n            \n            of the source tree. For information on installing it on your platform check <https://github.com/awslabs/git-secrets#id6>.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484528235", "createdAt": "2020-09-07T17:20:28Z", "author": {"login": "chmreid"}, "path": "README.md", "diffHunk": "@@ -163,6 +163,13 @@ We also have a matching [checkstyle.xml](checkstyle.xml) that can be imported in\n \n For users of Intellij or comparable IDEs, we also suggest loading the checkstyle.xml with a plugin in order to display warnings and errors while coding live rather than encountering them later when running a build. \n \n+#### Installing git-secrets\n+\n+Dockstore uses git-secrets to help make sure that keys and private data stay out\n+of the source tree. For information on installing it on your platform check https://github.com/awslabs/git-secrets#id6 .", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUyOTE5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      name: git-secrets Scan\n          \n          \n            \n                      name: Run git-secrets scan on dockstore repository", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484529196", "createdAt": "2020-09-07T17:24:57Z", "author": {"login": "chmreid"}, "path": ".circleci/config.yml", "diffHunk": "@@ -96,6 +110,12 @@ jobs:\n             scripts/check_migrations.sh\n           environment:\n             TESTING_PROFILE: automated-review\n+      - run:\n+          name: git-secrets Scan", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUzMDA5MA==", "bodyText": "This should probably be a recursive scan - otherwise directories are not scanned\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        git secrets --scan\n          \n          \n            \n                        git secrets -r --scan", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484530090", "createdAt": "2020-09-07T17:29:25Z", "author": {"login": "chmreid"}, "path": ".circleci/config.yml", "diffHunk": "@@ -96,6 +110,12 @@ jobs:\n             scripts/check_migrations.sh\n           environment:\n             TESTING_PROFILE: automated-review\n+      - run:\n+          name: git-secrets Scan\n+          # Needs to be after a build so that the correct configuration is set\n+          # by the exec-maven plugin\n+          command: |\n+            git secrets --scan", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUzMDc1Mg==", "bodyText": "It looks like you added an \"Install git-secrets\" section to this OpenAPI validation step, but no other steps use it. Was this supposed to be removed? Or is it used by the Maven stuff?", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484530752", "createdAt": "2020-09-07T17:32:37Z", "author": {"login": "chmreid"}, "path": ".circleci/config.yml", "diffHunk": "@@ -31,6 +31,13 @@ jobs:\n             wget https://github.com/mikefarah/yq/releases/download/3.3.2/yq_linux_amd64\n             chmod a+x yq_linux_amd64\n             sudo mv yq_linux_amd64 /usr/bin/yq\n+      - run:\n+          name: Install git-secrets", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUzMTU4Nw==", "bodyText": "Suggestion for future PR: add some instructions to the Readme that mentions how to install the git secret hooks locally and use the install hooks script. Then Dockstore engineers could have git secrets running/set up locally, and that step can make its way into an (the?) onboarding checklist.", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484531587", "createdAt": "2020-09-07T17:37:01Z", "author": {"login": "chmreid"}, "path": "git-hooks/commit-msg", "diffHunk": "@@ -0,0 +1,2 @@\n+#!/usr/bin/env bash\n+git secrets --commit_msg_hook -- \"$@\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUzMzkwMg==", "bodyText": "I'm a bit confused (also ignorant of how exec-maven-plugin works) - is this command running the install hooks command on this (the local CI) machine, or is the command being run on some Maven server somewhere in the cloud?", "url": "https://github.com/dockstore/dockstore/pull/3788#discussion_r484533902", "createdAt": "2020-09-07T17:47:48Z", "author": {"login": "chmreid"}, "path": "pom.xml", "diffHunk": "@@ -431,9 +431,26 @@\n                     <artifactId>license-maven-plugin</artifactId>\n                     <version>2.0.0</version>\n                 </plugin>\n+                <plugin>\n+                    <artifactId>exec-maven-plugin</artifactId>\n+                    <version>1.6.0</version>\n+                    <groupId>org.codehaus.mojo</groupId>\n+                    <executions>\n+                        <execution>\n+                            <id>Install git-secrets</id>\n+                            <phase>initialize</phase>\n+                            <goals>\n+                                <goal>exec</goal>\n+                            </goals>\n+                            <configuration>\n+                                <executable>bash</executable>\n+                                <commandlineArgs>${project.parent.basedir}/scripts/install-git-hooks.sh</commandlineArgs>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5154b1f49a9d0c12d004e3d56dfe1683fc133329", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/5154b1f49a9d0c12d004e3d56dfe1683fc133329", "committedDate": "2020-09-05T00:28:10Z", "message": "One lgtm.yml to rule them all"}, "afterCommit": {"oid": "69227572731474dd6c43e7c61acf0b2d7615b3cc", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/69227572731474dd6c43e7c61acf0b2d7615b3cc", "committedDate": "2020-09-08T22:22:41Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69227572731474dd6c43e7c61acf0b2d7615b3cc", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/69227572731474dd6c43e7c61acf0b2d7615b3cc", "committedDate": "2020-09-08T22:22:41Z", "message": "One lgtm.yml to rule them all"}, "afterCommit": {"oid": "31e8d21704e1cf92dfe25d1fac0eb4332897a16c", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/31e8d21704e1cf92dfe25d1fac0eb4332897a16c", "committedDate": "2020-09-08T22:24:52Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31e8d21704e1cf92dfe25d1fac0eb4332897a16c", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/31e8d21704e1cf92dfe25d1fac0eb4332897a16c", "committedDate": "2020-09-08T22:24:52Z", "message": "One lgtm.yml to rule them all"}, "afterCommit": {"oid": "ce09b2bee0f0a5f0d7d13b7c2a10b5a29c9fda4d", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/ce09b2bee0f0a5f0d7d13b7c2a10b5a29c9fda4d", "committedDate": "2020-09-08T22:29:26Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce09b2bee0f0a5f0d7d13b7c2a10b5a29c9fda4d", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/ce09b2bee0f0a5f0d7d13b7c2a10b5a29c9fda4d", "committedDate": "2020-09-08T22:29:26Z", "message": "One lgtm.yml to rule them all"}, "afterCommit": {"oid": "bd2590e86513a4cf1c51899427a4089b2449f9fb", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/bd2590e86513a4cf1c51899427a4089b2449f9fb", "committedDate": "2020-09-08T22:37:50Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7a166c7b63212317f8c84738c62c2a7077fb9a0", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/e7a166c7b63212317f8c84738c62c2a7077fb9a0", "committedDate": "2020-09-08T22:58:12Z", "message": "Update README.md\n\nCo-authored-by: Chaz Reid <53452777+chmreid@users.noreply.github.com>"}, "afterCommit": {"oid": "1e377c81c2359c5ee54592510890004d040e8c1f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/1e377c81c2359c5ee54592510890004d040e8c1f", "committedDate": "2020-09-08T22:59:00Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDcwMjU2", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-485070256", "createdAt": "2020-09-09T14:29:47Z", "commit": {"oid": "9e96d4dbc35941988a57f9f073491ae0b8a9e63e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NDUzMDQ2", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-485453046", "createdAt": "2020-09-09T22:46:07Z", "commit": {"oid": "9e96d4dbc35941988a57f9f073491ae0b8a9e63e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cdfc6169ec6b9ca1f02d38f4fe0b36833bed721", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/5cdfc6169ec6b9ca1f02d38f4fe0b36833bed721", "committedDate": "2020-09-10T17:42:19Z", "message": "Use preferred hidden lgtm yml"}, "afterCommit": {"oid": "0daa58e8e4a784ae9cd07d12bfc38dda67a0aa54", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/0daa58e8e4a784ae9cd07d12bfc38dda67a0aa54", "committedDate": "2020-09-10T17:42:36Z", "message": "Use preferred hidden lgtm yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTY5MjYx", "url": "https://github.com/dockstore/dockstore/pull/3788#pullrequestreview-486169261", "createdAt": "2020-09-10T17:45:19Z", "commit": {"oid": "0daa58e8e4a784ae9cd07d12bfc38dda67a0aa54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e64ad9edccc2e421b73b5f98723bb837191a818", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/6e64ad9edccc2e421b73b5f98723bb837191a818", "committedDate": "2020-09-10T23:35:30Z", "message": "Travis failures need a new commit\nSomething is failing when a build is rerun and a coveralls\nsupport has already been submitted. Trying a workaround of\njust making a new commit to rerun the tests. This will rerun\nall the tests. Sorry :/"}, "afterCommit": {"oid": "d5bd882f47aaff523a89243c5ffcc06afa49d13d", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/d5bd882f47aaff523a89243c5ffcc06afa49d13d", "committedDate": "2020-09-10T23:48:32Z", "message": "Travis failures need a new commit\nSomething is failing when a build is rerun and a coveralls\nsupport has already been submitted. Trying a workaround of\njust making a new commit to rerun the tests. This will rerun\nall the tests. Sorry :/"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86611b06ba2a27749ad97514ed3d53f8e45165f4", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/86611b06ba2a27749ad97514ed3d53f8e45165f4", "committedDate": "2020-09-11T16:40:01Z", "message": "Add an exec plugin that sets git config during initialize\nSet up git secrets AWS provider\nMake sure we don't set extra configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71c2dc2f6555ad99f30602172c913b9e2c25bc4e", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/71c2dc2f6555ad99f30602172c913b9e2c25bc4e", "committedDate": "2020-09-11T16:40:01Z", "message": "Move installation to a bash script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70469fedcaf8ac6a050bd4abfaf38abfb1e4e8c2", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/70469fedcaf8ac6a050bd4abfaf38abfb1e4e8c2", "committedDate": "2020-09-11T16:40:01Z", "message": "Clear false positives in current source"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8245fa2c6defda85c43779c9e04cccc31c06d0f", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/c8245fa2c6defda85c43779c9e04cccc31c06d0f", "committedDate": "2020-09-11T16:40:01Z", "message": "Add readme, comments to .gitallowed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e14f38ff70f63edcb4d770ab2722f3d5d7c4ee03", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/e14f38ff70f63edcb4d770ab2722f3d5d7c4ee03", "committedDate": "2020-09-11T16:40:01Z", "message": "Move script, simplify, set bash flags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42d2b914a95f27a8f41ccaed803ee3f413818a25", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/42d2b914a95f27a8f41ccaed803ee3f413818a25", "committedDate": "2020-09-11T16:40:01Z", "message": "Install git-secrets in CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64e37ea003301dbd12fc3fe895c5a896decd09d5", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/64e37ea003301dbd12fc3fe895c5a896decd09d5", "committedDate": "2020-09-11T16:40:01Z", "message": "Change gitallowed to be more paranoid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62158e6e135064684d2bf69b98264497b1e04b05", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/62158e6e135064684d2bf69b98264497b1e04b05", "committedDate": "2020-09-11T16:40:01Z", "message": "Run git-secrets scan in circle\nTechnically if someone pushes a secret to a branch\nit will still be in the git tree, however, this\ncheck will help it keep from being merged.\n\nFix travis wget script\nAnd add git-secrets to lgtm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4e4629cae5a8a34743affaf19a632e92cfe691a", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/a4e4629cae5a8a34743affaf19a632e92cfe691a", "committedDate": "2020-09-11T16:40:01Z", "message": "Clean up .gitallowed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f01619c3b1329c6f6e5df13a71bd46437fefaf", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/21f01619c3b1329c6f6e5df13a71bd46437fefaf", "committedDate": "2020-09-11T16:40:01Z", "message": "One lgtm.yml to rule them all"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cf9534cfc1dc0c318099988e3fc17dbdc2bcb7c", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/2cf9534cfc1dc0c318099988e3fc17dbdc2bcb7c", "committedDate": "2020-09-11T16:40:01Z", "message": "Accepted suggestions by @chmreid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a44490f350a83d0f33183928336a948b61604594", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/a44490f350a83d0f33183928336a948b61604594", "committedDate": "2020-09-11T16:40:01Z", "message": "Use preferred hidden lgtm yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a94013aeb6171a54d0d571e3591ea1d4f878e982", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/a94013aeb6171a54d0d571e3591ea1d4f878e982", "committedDate": "2020-09-11T16:40:01Z", "message": "Travis failures need a new commit\nSomething is failing when a build is rerun and a coveralls\nsupport has already been submitted. Trying a workaround of\njust making a new commit to rerun the tests. This will rerun\nall the tests. Sorry :/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5bd882f47aaff523a89243c5ffcc06afa49d13d", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/d5bd882f47aaff523a89243c5ffcc06afa49d13d", "committedDate": "2020-09-10T23:48:32Z", "message": "Travis failures need a new commit\nSomething is failing when a build is rerun and a coveralls\nsupport has already been submitted. Trying a workaround of\njust making a new commit to rerun the tests. This will rerun\nall the tests. Sorry :/"}, "afterCommit": {"oid": "a94013aeb6171a54d0d571e3591ea1d4f878e982", "author": {"user": {"login": "david4096", "name": "David Steinberg"}}, "url": "https://github.com/dockstore/dockstore/commit/a94013aeb6171a54d0d571e3591ea1d4f878e982", "committedDate": "2020-09-11T16:40:01Z", "message": "Travis failures need a new commit\nSomething is failing when a build is rerun and a coveralls\nsupport has already been submitted. Trying a workaround of\njust making a new commit to rerun the tests. This will rerun\nall the tests. Sorry :/"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1755, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}