{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NzE3MDgz", "number": 3667, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMToyNTozMlrOEO3oWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMjoxMDoxNVrOEO41Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MDI2OTcwOnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMToyNTozM1rOGyRC0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTo1Njo0M1rOGyStYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MTIzMw==", "bodyText": "I wonder if to be safe, you shouldn't do getEmail(myself) || myself.getEmail()? Would that ever happen, that there's not a primary email, but the profile has an email?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455361233", "createdAt": "2020-07-15T21:25:33Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -895,7 +905,7 @@ public void syncUserMetadataFromGitHub(User user) {\n             GHMyself myself = github.getMyself();\n             User.Profile profile = new User.Profile();\n             profile.name = myself.getName();\n-            profile.email = myself.getEmail();\n+            profile.email = getEmail(myself);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2NDU2MA==", "bodyText": "Is it possible to have an email thats not primary? I thought GitHub automatically sets your only email as the primary email, or the first email you listed as the primary.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455364560", "createdAt": "2020-07-15T21:31:09Z", "author": {"login": "ByteMap"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -895,7 +905,7 @@ public void syncUserMetadataFromGitHub(User user) {\n             GHMyself myself = github.getMyself();\n             User.Profile profile = new User.Profile();\n             profile.name = myself.getName();\n-            profile.email = myself.getEmail();\n+            profile.email = getEmail(myself);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MTIzMw=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM3MDQwOA==", "bodyText": "I don't know, I'm just asking. :) Can you remove all your emails from your GitHub account, or does it require you to have at least one?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455370408", "createdAt": "2020-07-15T21:37:20Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -895,7 +905,7 @@ public void syncUserMetadataFromGitHub(User user) {\n             GHMyself myself = github.getMyself();\n             User.Profile profile = new User.Profile();\n             profile.name = myself.getName();\n-            profile.email = myself.getEmail();\n+            profile.email = getEmail(myself);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MTIzMw=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM4ODUxNQ==", "bodyText": "GitHub requires me to have at least one email. I am unable to remove all of my emails.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455388515", "createdAt": "2020-07-15T21:56:43Z", "author": {"login": "ByteMap"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -895,7 +905,7 @@ public void syncUserMetadataFromGitHub(User user) {\n             GHMyself myself = github.getMyself();\n             User.Profile profile = new User.Profile();\n             profile.name = myself.getName();\n-            profile.email = myself.getEmail();\n+            profile.email = getEmail(myself);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MTIzMw=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MDI3ODgzOnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMToyODoxMlrOGyRH8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTo0MDo0OVrOGyRzaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MjU0NQ==", "bodyText": "Does getEmails2 always return a collection? Take a look at code to be sure. Concerned about possible NPE.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455362545", "createdAt": "2020-07-15T21:28:12Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {\n+        for (GHEmail email: myself.getEmails2()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM3MzY3Mw==", "bodyText": "From the documentation, getEmails2 always return a collection. The code throws a IOException, but I do not see a NPE being thrown in the code, or in the methods that it uses. This documentation says the method returns 'always non-null': https://github-api.kohsuke.org/apidocs/org/kohsuke/github/GHMyself.html#getEmails2()", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455373673", "createdAt": "2020-07-15T21:40:49Z", "author": {"login": "ByteMap"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {\n+        for (GHEmail email: myself.getEmails2()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MjU0NQ=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MDQ2NjY3OnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMjoxMDoxNVrOGyTDkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMzoyMjozOVrOGyUpVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE5Mg==", "bodyText": "Is this public for a reason?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455394192", "createdAt": "2020-07-15T22:10:15Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NTQ5Mw==", "bodyText": "No reason at all, nothing outside of the class is using the getEmail() method. Is it best to change it to private?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455395493", "createdAt": "2020-07-15T22:13:28Z", "author": {"login": "ByteMap"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE5Mg=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQxOTYwNw==", "bodyText": "Changed it to private.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455419607", "createdAt": "2020-07-15T23:20:38Z", "author": {"login": "ByteMap"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE5Mg=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQyMDI0NA==", "bodyText": "Yeah, just makes things easier to reason about.\ne.g. when refactoring, I know I can change this method without breaking anything outside of this class, the IDE can tell me when the method is un-used, etc.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455420244", "createdAt": "2020-07-15T23:22:39Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE5Mg=="}, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2784, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}