{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMDcxMDEw", "number": 3213, "title": "Start hooking up endpoints and tests for GA4GH V2 final", "bodyText": "new endpoints use a new swagger codegen for the new GA4GH TRS V2 server implementation\na silly regression in the swagger codegen plugin means we check-in all templates rather than just the ones that changed (see commit and readme below)\nadded a readme describing the changes we did to the templates\nadded some minimal openapiv3 annotations to the old swagger templates so that the old TRS endpoints still show up and are executable in the swagger-ui pointing at openapi.yaml\nadded a minimal test to show how to call the new endpoint\nturns out checkstyle was not running on any classes that happened to be in a directory called swagger, cleaned them up and turned this on resulting in a pile of small changes and cleanup\n\n\n\nwhew\nTODO: actually hook things up so you can get tools", "createdAt": "2020-02-04T21:57:48Z", "url": "https://github.com/dockstore/dockstore/pull/3213", "merged": true, "mergeCommit": {"oid": "cc58ba4d664787103d0a81cea17e27e2a20ce3f1"}, "closed": true, "closedAt": "2020-02-06T15:56:27Z", "author": {"login": "denis-yuen"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAwOkHAH2gAyMzcxMDcxMDEwOjIzMDBhMTBmYjcxNmM4YzI5MGQ4ZDZmODYxNDRjMDUzMDBjMGRjZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBf3tngFqTM1NDE0MDA2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2300a10fb716c8c290d8d6f86144c05300c0dcf1", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/2300a10fb716c8c290d8d6f86144c05300c0dcf1", "committedDate": "2020-02-03T17:17:26Z", "message": "Laggard junit update\n\n* do not know why develop is able to build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5c3d938067a3d198e6fd49d46ade3214e082c4", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/8e5c3d938067a3d198e6fd49d46ade3214e082c4", "committedDate": "2020-02-03T17:17:47Z", "message": "Update codegen plugin before adding TRS V2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa692d188c0f10caf727415a9225e67f90b04bec", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/aa692d188c0f10caf727415a9225e67f90b04bec", "committedDate": "2020-02-03T17:38:35Z", "message": "Wipe out deprecated unstar endpoints #3195"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c81147e9171fe6451a6944e497320ccc7d9b257b", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/c81147e9171fe6451a6944e497320ccc7d9b257b", "committedDate": "2020-02-03T20:26:58Z", "message": "Start TRS V2 final hook up\n\n* also properly enable checkstyle on swagger directories"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edc5eac26153efd4cdf4ba92bdc3940ccb397faf", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/edc5eac26153efd4cdf4ba92bdc3940ccb397faf", "committedDate": "2020-02-03T20:31:49Z", "message": "Revert \"Wipe out deprecated unstar endpoints #3195\"\n\nThis reverts commit aa692d188c0f10caf727415a9225e67f90b04bec."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9254c1d4ebefe6d30f1fdccb1a2da479ead5789", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/b9254c1d4ebefe6d30f1fdccb1a2da479ead5789", "committedDate": "2020-02-03T21:28:44Z", "message": "More hookup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9c965acdb54a4286753ba6b2ebbab745e8202ad", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/b9c965acdb54a4286753ba6b2ebbab745e8202ad", "committedDate": "2020-02-03T22:09:34Z", "message": "Missing classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9ee786bd222e691e47c0268c0a64f0db45e15f1", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/f9ee786bd222e691e47c0268c0a64f0db45e15f1", "committedDate": "2020-02-04T21:37:54Z", "message": "Rehook up with swagger v3 codegen plugin\n\n* https://github.com/swagger-api/swagger-codegen/issues/9893 really\nsucks\n* added list of changes made to templates in a readme in the template directory\n* some minimal testing with a client class to demonstrate a full trip of\nthe new information through to a test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f287471bc860e845bc653caa49ad8bdf646344c5", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/f287471bc860e845bc653caa49ad8bdf646344c5", "committedDate": "2020-02-04T21:44:10Z", "message": "Merge branch 'develop' into feature/trs_hook_up_start"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNzg2Mzk5", "url": "https://github.com/dockstore/dockstore/pull/3213#pullrequestreview-353786399", "createdAt": "2020-02-05T15:03:59Z", "commit": {"oid": "f287471bc860e845bc653caa49ad8bdf646344c5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTowMzo1OVrOFl7EQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTowNTowNFrOFl7G_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwOTM3OQ==", "bodyText": "Didn't V2 final get rid of /api?", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375309379", "createdAt": "2020-02-05T15:03:59Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/DockstoreWebserviceApplication.java", "diffHunk": "@@ -145,7 +145,8 @@\n  * @author dyuen\n  */\n public class DockstoreWebserviceApplication extends Application<DockstoreWebserviceConfiguration> {\n-    public static final String GA4GH_API_PATH = \"/api/ga4gh/v2\";\n+    public static final String GA4GH_API_PATH_V2_BETA = \"/api/ga4gh/v2\";\n+    public static final String GA4GH_API_PATH_V2_FINAL = \"/api/ga4gh/trs/v2\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f287471bc860e845bc653caa49ad8bdf646344c5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMDA3Nw==", "bodyText": "Version same as the one mentioned in root pom", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375310077", "createdAt": "2020-02-05T15:05:04Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/pom.xml", "diffHunk": "@@ -1090,13 +1094,51 @@\n                     <generateModelTests>false</generateModelTests>\n                     <generateModelDocumentation>false</generateModelDocumentation>\n                     <generateSupportingFiles>true</generateSupportingFiles>\n-                    <ignoreFileOverride>${pom.basedir}/src/main/resources/swagger-templates/swagger-codegen-ignore</ignoreFileOverride>\n                     <withXml>true</withXml>\n                     <library>jersey2</library>\n+                    <ignoreFileOverride>${pom.basedir}/src/main/resources/swagger-templates/swagger-codegen-ignore</ignoreFileOverride>\n                     <templateDirectory>${pom.basedir}/src/main/resources/swagger-templates</templateDirectory>\n                 </configuration>\n                 <executions>\n                     <execution>\n+                        <id>v2-beta</id>\n+                        <goals>\n+                            <goal>generate</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.swagger.codegen.v3</groupId>\n+                <artifactId>swagger-codegen-maven-plugin</artifactId>\n+                <version>3.0.16</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f287471bc860e845bc653caa49ad8bdf646344c5"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/22b85d83f8d74ecadb32b5b2b9293108bf461857", "committedDate": "2020-02-05T15:27:53Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzOTE1NTU5", "url": "https://github.com/dockstore/dockstore/pull/3213#pullrequestreview-353915559", "createdAt": "2020-02-05T17:47:23Z", "commit": {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MDc1MzE0", "url": "https://github.com/dockstore/dockstore/pull/3213#pullrequestreview-354075314", "createdAt": "2020-02-05T22:07:37Z", "commit": {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMjowNzozN1rOFmI3yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMjowNzozN1rOFmI3yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUzNTU2MQ==", "bodyText": "Without understanding the whole flow and realizing it may be beyond the scope of this PR, do we still need to use Joda? According to their own website, you only need to be using pre-Java 8.", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375535561", "createdAt": "2020-02-05T22:07:37Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/resources/openapi-templates/JodaDateTimeProvider.mustache", "diffHunk": "@@ -0,0 +1,44 @@\n+package {{apiPackage}};\n+\n+import com.sun.jersey.core.spi.component.ComponentContext;\n+import com.sun.jersey.spi.inject.Injectable;\n+import com.sun.jersey.spi.inject.PerRequestTypeInjectableProvider;\n+\n+import javax.ws.rs.QueryParam;\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.Context;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.Response.Status;\n+import javax.ws.rs.core.UriInfo;\n+import javax.ws.rs.ext.Provider;\n+import org.joda.time.DateTime;\n+import java.util.List;\n+\n+@Provider\n+public class JodaDateTimeProvider extends PerRequestTypeInjectableProvider<QueryParam, DateTime> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTQwMDYz", "url": "https://github.com/dockstore/dockstore/pull/3213#pullrequestreview-354140063", "createdAt": "2020-02-06T00:47:55Z", "commit": {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1887, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}