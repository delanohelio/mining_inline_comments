{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNzU5MDc2", "number": 3156, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToxMTowOFrODY8IIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMToyNjo1N1rODanaVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDc3NTM3OnYy", "diffSide": "RIGHT", "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/BasicIT.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToxMTowOFrOFfFXHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToxMTowOFrOFfFXHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEzODAxNQ==", "bodyText": "Nitpick: easier to read using isEmpty", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r368138015", "createdAt": "2020-01-17T21:11:08Z", "author": {"login": "denis-yuen"}, "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/BasicIT.java", "diffHunk": "@@ -249,18 +249,19 @@ public void testVersionTagDockerhub() {\n         starRequest.setStar(true);\n         toolsApi.starEntry(tool.getId(), starRequest);\n         events = eventsApi.getEvents(EventSearchType.STARRED_ENTRIES.toString(), 10, 0);\n-        Assert.assertEquals(\"Should be an event for the tag that was automatically created for the newly registered tool\", 1, events.size());\n+        Assert.assertEquals(\"Should not be an event for the non-tag version that was automatically created for the newly registered tool\", 0, events.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8361c003b9de44ace2427f4db5358b40b3045a2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDc3NTcxOnYy", "diffSide": "RIGHT", "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/BasicIT.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToxMToxOFrOFfFXTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToxMToxOFrOFfFXTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEzODA2Mw==", "bodyText": "Ditto", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r368138063", "createdAt": "2020-01-17T21:11:18Z", "author": {"login": "denis-yuen"}, "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/BasicIT.java", "diffHunk": "@@ -1393,7 +1394,7 @@ public void eventResourcePaginationTest() {\n         starRequest.setStar(true);\n         toolsApi.starEntry(tool.getId(), starRequest);\n         events = eventsApi.getEvents(EventSearchType.STARRED_ENTRIES.toString(), 10, 0);\n-        Assert.assertEquals(\"Should be an event for the tag that was automatically created for the newly registered tool\", 1, events.size());\n+        Assert.assertEquals(\"Should not be an event for the non-tag version that was automatically created for the newly registered tool\", 0, events.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8361c003b9de44ace2427f4db5358b40b3045a2"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDc5OTYyOnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/resources/openapi.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToyMzowNVrOFfFl_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToyMzowNVrOFfFl_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE0MTgyMg==", "bodyText": "Avoid this change", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r368141822", "createdAt": "2020-01-17T21:23:05Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/openapi.yaml", "diffHunk": "@@ -6682,17 +6682,184 @@ components:\n         content:\n           type: string\n     BioWorkflow:\n-      allOf:\n-        - $ref: \"#/components/schemas/Workflow\"\n-        - type: object\n-          properties:\n-            parent_id:\n-              type: integer\n-              format: int64\n-              readOnly: true\n-            is_checker:\n-              type: boolean\n-          description: This describes one workflow in the dockstore\n+      type: object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8361c003b9de44ace2427f4db5358b40b3045a2"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDgwMDI5OnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/resources/swagger.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToyMzoxOVrOFfFmXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMToyMzoxOVrOFfFmXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE0MTkxNw==", "bodyText": "Ditto", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r368141917", "createdAt": "2020-01-17T21:23:19Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/swagger.yaml", "diffHunk": "@@ -6262,18 +6262,209 @@ definitions:\n       content:\n         type: \"string\"\n   BioWorkflow:\n-    allOf:\n-    - $ref: \"#/definitions/Workflow\"\n-    - type: \"object\"\n-      properties:\n-        parent_id:\n-          type: \"integer\"\n-          format: \"int64\"\n-          readOnly: true\n-        is_checker:\n-          type: \"boolean\"\n-          position: 23\n-      description: \"This describes one workflow in the dockstore\"\n+    type: \"object\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8361c003b9de44ace2427f4db5358b40b3045a2"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3ODAyNDEyOnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/core/Event.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNTozODoyN1rOFfiM8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNTozODoyN1rOFfiM8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYxMDU0NQ==", "bodyText": "Think this needs @JsonIgnoreProperties like the others", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r368610545", "createdAt": "2020-01-20T15:38:27Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/core/Event.java", "diffHunk": "@@ -80,6 +80,11 @@\n     @ApiModelProperty(value = \"User initiating the event.\", position = 6)\n     private User initiatorUser;\n \n+    @ManyToOne", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60b818c6f6c74dbfaa3ec6e65f4bdc265138e783"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjM1Mjg0OnYy", "diffSide": "RIGHT", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMToyNjo1OFrOFhq37g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMToyNjo1OFrOFhq37g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg0OTc3NA==", "bodyText": "Should the 3rd param by byId instead of tag? Don't know Hibernate well enough to say if it matters.\nIn DockerRepoTagResource, you use byId.", "url": "https://github.com/dockstore/dockstore/pull/3156#discussion_r370849774", "createdAt": "2020-01-24T21:26:58Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/DockerRepoResource.java", "diffHunk": "@@ -499,15 +498,15 @@ public Tool registerManual(@ApiParam(hidden = true) @Auth User user,\n         if (tool.isPrivateAccess() && Strings.isNullOrEmpty(tool.getToolMaintainerEmail())) {\n             throw new CustomWebApplicationException(\"Tool maintainer email is required for private tools.\", HttpStatus.SC_BAD_REQUEST);\n         }\n-        boolean releaseCreated = false;\n         // populate user in tool\n         tool.addUser(user);\n         // create dependent Tags before creating tool\n         Set<Tag> createdTags = new HashSet<>();\n         for (Tag tag : tool.getWorkflowVersions()) {\n             final long l = tagDAO.create(tag);\n-            createdTags.add(tagDAO.findById(l));\n-            releaseCreated = true;\n+            Tag byId = tagDAO.findById(l);\n+            createdTags.add(byId);\n+            this.eventDAO.createAddTagToEntryEvent(user, tool, tag);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4488c5e7c2ec1d6071339f479496e365db8463d"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3093, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}