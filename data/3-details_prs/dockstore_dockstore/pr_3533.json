{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4Njc4NDkw", "number": 3533, "title": "fix hosted tool delete error", "bodyText": "Last built is not set for hosted tool versions, so instead use the dbcreatedate. This fixes the issue with the UI tests.", "createdAt": "2020-06-05T19:14:54Z", "url": "https://github.com/dockstore/dockstore/pull/3533", "merged": true, "mergeCommit": {"oid": "9514cd90bded8ab78c3dc4c24350a6ace715687c"}, "closed": true, "closedAt": "2020-06-08T13:57:20Z", "author": {"login": "agduncan94"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoXljKgH2gAyNDI4Njc4NDkwOjMzMDRmNGIwMjFkZGI1ZWQ2ZGRjNTNlZjAxNDQ3NzA4ODY3MGZiNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcocNxLAFqTQyNTY5NDg5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3304f4b021ddb5ed6ddc53ef014477088670fb77", "author": {"user": {"login": "agduncan94", "name": "Andrew Duncan"}}, "url": "https://github.com/dockstore/dockstore/commit/3304f4b021ddb5ed6ddc53ef014477088670fb77", "committedDate": "2020-06-05T19:11:53Z", "message": "fix hosted tool delete error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NTcxNjM4", "url": "https://github.com/dockstore/dockstore/pull/3533#pullrequestreview-425571638", "createdAt": "2020-06-05T19:36:00Z", "commit": {"oid": "3304f4b021ddb5ed6ddc53ef014477088670fb77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTozNjowMFrOGf67rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOTozNjowMFrOGf67rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEyNDU5MA==", "bodyText": "devil's advocate?\nWhat's the difference? Why not just always use dbcreatedate?", "url": "https://github.com/dockstore/dockstore/pull/3533#discussion_r436124590", "createdAt": "2020-06-05T19:36:00Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/AbstractHostedEntryResource.java", "diffHunk": "@@ -390,7 +390,7 @@ public T deleteHostedVersion(@ApiParam(hidden = true) @Auth User user,\n         // If the version that's about to be deleted is the default version, unset it\n         if (entry.getActualDefaultVersion().getName().equals(version)) {\n             Optional<U> max = entry.getWorkflowVersions().stream().filter(v -> !Objects.equals(v.getName(), version))\n-                    .max(Comparator.comparingLong(ver -> ver.getDate().getTime()));\n+                    .max(Comparator.comparingLong(ver -> ver.getDate() != null ? ver.getDate().getTime() : ver.getDbCreateDate().getTime()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3304f4b021ddb5ed6ddc53ef014477088670fb77"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e019fa7a64876ea19f80174c9588bd969fe449d1", "author": {"user": {"login": "agduncan94", "name": "Andrew Duncan"}}, "url": "https://github.com/dockstore/dockstore/commit/e019fa7a64876ea19f80174c9588bd969fe449d1", "committedDate": "2020-06-05T19:43:02Z", "message": "Merge branch 'develop' into feature/fix-hosted-tool-tag-delete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NTgxNjUy", "url": "https://github.com/dockstore/dockstore/pull/3533#pullrequestreview-425581652", "createdAt": "2020-06-05T19:47:15Z", "commit": {"oid": "e019fa7a64876ea19f80174c9588bd969fe449d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53d2225d9b397c4e41570163338e0a54a5c371f1", "author": {"user": {"login": "agduncan94", "name": "Andrew Duncan"}}, "url": "https://github.com/dockstore/dockstore/commit/53d2225d9b397c4e41570163338e0a54a5c371f1", "committedDate": "2020-06-05T20:15:14Z", "message": "use dbcreatetime for finding most recent version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9ef65eea69f1f4644fc1e1eb9025e9086686610", "author": {"user": {"login": "agduncan94", "name": "Andrew Duncan"}}, "url": "https://github.com/dockstore/dockstore/commit/d9ef65eea69f1f4644fc1e1eb9025e9086686610", "committedDate": "2020-06-05T20:34:46Z", "message": "Merge branch 'feature/fix-hosted-tool-tag-delete' of github.com:ga4gh/dockstore into feature/fix-hosted-tool-tag-delete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjM4Mjk3", "url": "https://github.com/dockstore/dockstore/pull/3533#pullrequestreview-425638297", "createdAt": "2020-06-05T21:34:42Z", "commit": {"oid": "d9ef65eea69f1f4644fc1e1eb9025e9086686610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjQzNTA3", "url": "https://github.com/dockstore/dockstore/pull/3533#pullrequestreview-425643507", "createdAt": "2020-06-05T21:46:56Z", "commit": {"oid": "d9ef65eea69f1f4644fc1e1eb9025e9086686610"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1Njk0ODk4", "url": "https://github.com/dockstore/dockstore/pull/3533#pullrequestreview-425694898", "createdAt": "2020-06-06T00:35:26Z", "commit": {"oid": "d9ef65eea69f1f4644fc1e1eb9025e9086686610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1911, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}