{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTA3MDAw", "number": 3187, "title": "Feature/3143/extendeduser", "bodyText": "Partial #3143 to speed up the extended user endpoint.  Still could use more optimizations I believe.\nBefore:\n    974458 nanoseconds spent acquiring 2 JDBC connections;\n    83384 nanoseconds spent releasing 2 JDBC connections;\n    40787339 nanoseconds spent preparing 2538 JDBC statements;\n    685346097 nanoseconds spent executing 2538 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    0 nanoseconds spent performing 0 L2C puts;\n    0 nanoseconds spent performing 0 L2C hits;\n    0 nanoseconds spent performing 0 L2C misses;\n    54512291 nanoseconds spent executing 1 flushes (flushing a total of 1881 entities and 3818 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n\nAfter:\n    2774782 nanoseconds spent acquiring 2 JDBC connections;\n    169564 nanoseconds spent releasing 2 JDBC connections;\n    2275580 nanoseconds spent preparing 2 JDBC statements;\n    14760844 nanoseconds spent executing 2 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    0 nanoseconds spent performing 0 L2C puts;\n    0 nanoseconds spent performing 0 L2C hits;\n    0 nanoseconds spent performing 0 L2C misses;\n    892104 nanoseconds spent executing 1 flushes (flushing a total of 1 entities and 5 collections);\n    394570 nanoseconds spent executing 1 partial-flushes (flushing a total of 1 entities and 1 collections)\n\nThere are two statements because there's another DAO function called to get the authenticated user entity from hibernate, not related to the extended user endpoint per se.  This is likely the optimal amount of statements.", "createdAt": "2020-01-28T16:23:39Z", "url": "https://github.com/dockstore/dockstore/pull/3187", "merged": true, "mergeCommit": {"oid": "8cb6a7317d9e1733c23b55f7b4f0e8f52538208a"}, "closed": true, "closedAt": "2020-01-29T14:30:58Z", "author": {"login": "garyluu"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-i-sWgH2gAyMzY4MTA3MDAwOjlhMGJkYWUzNzY1YTBlNDdjODNlYWQyYjljMmI1Y2RhN2QzNmQyMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_GV7CAFqTM1MDEyMTY0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9a0bdae3765a0e47c83ead2b9c2b5cda7d36d231", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/9a0bdae3765a0e47c83ead2b9c2b5cda7d36d231", "committedDate": "2020-01-27T20:43:29Z", "message": "More optimized extendeduser endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "861400b7b224d19260f8df7a0a5f5bfed70c69b9", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/861400b7b224d19260f8df7a0a5f5bfed70c69b9", "committedDate": "2020-01-27T21:01:57Z", "message": "Fix imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTIzODgz", "url": "https://github.com/dockstore/dockstore/pull/3187#pullrequestreview-349523883", "createdAt": "2020-01-28T16:35:04Z", "commit": {"oid": "861400b7b224d19260f8df7a0a5f5bfed70c69b9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjozNTowNFrOFisBAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjozNTowNFrOFisBAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkxNzA1Ng==", "bodyText": "the way this query is written (a count), I don't think you will ever get a null result so I think you can cast to/return a long", "url": "https://github.com/dockstore/dockstore/pull/3187#discussion_r371917056", "createdAt": "2020-01-28T16:35:04Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/jdbi/UserDAO.java", "diffHunk": "@@ -76,6 +76,11 @@ public User findByGitHubUsername(String username) {\n         return (User)query.uniqueResult();\n     }\n \n+    public Long findPublishedEntries(String username)  {\n+        final Query query = namedQuery(\"io.dockstore.webservice.core.User.countPublishedEntries\").setParameter(\"username\", username);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "861400b7b224d19260f8df7a0a5f5bfed70c69b9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6e92493e5350ce1e19542c147efa30d0fffd0e7", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/e6e92493e5350ce1e19542c147efa30d0fffd0e7", "committedDate": "2020-01-28T16:37:32Z", "message": "Use primitive long"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTQ4NDI1", "url": "https://github.com/dockstore/dockstore/pull/3187#pullrequestreview-349548425", "createdAt": "2020-01-28T17:06:13Z", "commit": {"oid": "e6e92493e5350ce1e19542c147efa30d0fffd0e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTU0MzU4", "url": "https://github.com/dockstore/dockstore/pull/3187#pullrequestreview-349554358", "createdAt": "2020-01-28T17:14:20Z", "commit": {"oid": "e6e92493e5350ce1e19542c147efa30d0fffd0e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTgxOTgz", "url": "https://github.com/dockstore/dockstore/pull/3187#pullrequestreview-349581983", "createdAt": "2020-01-28T17:55:31Z", "commit": {"oid": "e6e92493e5350ce1e19542c147efa30d0fffd0e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTIxNjQ3", "url": "https://github.com/dockstore/dockstore/pull/3187#pullrequestreview-350121647", "createdAt": "2020-01-29T13:55:32Z", "commit": {"oid": "e6e92493e5350ce1e19542c147efa30d0fffd0e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1881, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}