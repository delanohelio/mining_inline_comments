{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MDAyMDA0", "number": 3846, "title": "Feature/seab 1637/collection entry version db", "bodyText": "For:\n\nhttps://ucsc-cgl.atlassian.net/browse/SEAB-1637\nhttps://ucsc-cgl.atlassian.net/browse/SEAB-1640\n\nFrontend ticket is somewhere else (guessing someone will do it at a later date). Hopefully these updates will work with it.", "createdAt": "2020-10-05T17:21:01Z", "url": "https://github.com/dockstore/dockstore/pull/3846", "merged": true, "mergeCommit": {"oid": "2e977229c3664eb7e6f02f82a8b0cad44007a98f"}, "closed": true, "closedAt": "2020-10-09T23:48:45Z", "author": {"login": "garyluu"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOVK5YgH2gAyNDk4MDAyMDA0OjI2ODI1N2U4OTQwNTExMjE3MjZjOTYyYmE2M2E4OWM5NzU4MDlkNDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ9IpwgFqTUwNjAwMTI5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "268257e894051121726c962ba63a89c975809d48", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/268257e894051121726c962ba63a89c975809d48", "committedDate": "2020-10-01T17:52:05Z", "message": "Add versionId column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e5e9e2500411894a202ae07ffcf590273be57f2", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/0e5e9e2500411894a202ae07ffcf590273be57f2", "committedDate": "2020-10-01T19:39:02Z", "message": "Fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0b4fd49d54f313378f262f32c6979ad87959103", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/e0b4fd49d54f313378f262f32c6979ad87959103", "committedDate": "2020-10-01T19:42:11Z", "message": "Fix cast error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba4ca34bc2dc365e201f8645d99d7d7ed9627596", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/ba4ca34bc2dc365e201f8645d99d7d7ed9627596", "committedDate": "2020-10-01T19:51:40Z", "message": "Fix the fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9ffe3b0a25e400b482263bf99c078dfa5adf199", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/b9ffe3b0a25e400b482263bf99c078dfa5adf199", "committedDate": "2020-10-02T00:36:14Z", "message": "Another iteration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3bd9cefed35710584ee67f77012b04be8d529b4", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/c3bd9cefed35710584ee67f77012b04be8d529b4", "committedDate": "2020-10-02T15:39:12Z", "message": "Make some columns non-null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9607169fc93306d10a1bac0c328a1f97d4ae402e", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/9607169fc93306d10a1bac0c328a1f97d4ae402e", "committedDate": "2020-10-02T16:10:39Z", "message": "Simplify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12696ff18e732516ae09b5ca0df08ecfc7cc6b60", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/12696ff18e732516ae09b5ca0df08ecfc7cc6b60", "committedDate": "2020-10-02T16:24:56Z", "message": "Rename table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d3ded18e0da4d2fd1ac5c4da06c7355fd29b7e8", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/6d3ded18e0da4d2fd1ac5c4da06c7355fd29b7e8", "committedDate": "2020-10-02T20:04:47Z", "message": "Rename table, cleanup, add test, change HQL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5f3d78a0c40fab1cd5788997edab6ebdb3e7cc8", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/c5f3d78a0c40fab1cd5788997edab6ebdb3e7cc8", "committedDate": "2020-10-02T21:51:51Z", "message": "Add version to response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7286e0792d0ba344c3d38f7a14d2c44628b7c29d", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/7286e0792d0ba344c3d38f7a14d2c44628b7c29d", "committedDate": "2020-10-05T14:49:56Z", "message": "Use versionName"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc3d7557410a19f9e849c63b74fbb363e3d5cde", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/4dc3d7557410a19f9e849c63b74fbb363e3d5cde", "committedDate": "2020-10-05T15:31:26Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f65691215cdf7324f7559d630101f67895d44f0", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/6f65691215cdf7324f7559d630101f67895d44f0", "committedDate": "2020-10-05T15:44:25Z", "message": "Update swagger/openapi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/0c543ee52d2ef51d928735653b95fcc5c563eae2", "committedDate": "2020-10-05T17:21:11Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDQ3MTkw", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-504047190", "createdAt": "2020-10-07T16:12:52Z", "commit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjoxMjo1MlrOHd7EKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjoxMjo1MlrOHd7EKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEzODQ3Mw==", "bodyText": "Can you have a unique constraint on all 3 columns together (entry_id, version_id, collection_id)? The problem is that version_id is nullable; I don't know if that will work.\nMaybe this: https://stackoverflow.com/questions/8289100/create-unique-constraint-with-null-columns", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r501138473", "createdAt": "2020-10-07T16:12:52Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/resources/migrations.1.10.0.xml", "diffHunk": "@@ -77,4 +77,22 @@\n     <changeSet author=\"nolwarre (generated)\" id=\"notificationsCharLimit\">\n         <modifyDataType columnName=\"message\" newDataType=\"varchar(1024)\" tableName=\"notification\"/>\n     </changeSet>\n+    <changeSet author=\"gluu (generated)\" id=\"1601569350016-13\">\n+        <createTable tableName=\"collection_entry_version\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjY1MTE0", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-504265114", "createdAt": "2020-10-07T21:02:54Z", "commit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMTowMjo1NFrOHeFbpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMTowNzoyNFrOHeFkPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwODMyNQ==", "bodyText": "Bike-shedding, but really not a fan of this formatting style in Java", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r501308325", "createdAt": "2020-10-07T21:02:54Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/core/Collection.java", "diffHunk": "@@ -85,10 +87,16 @@\n     @Schema(description = \"Short description of the collection\", required = true, example = \"A collection of alignment algorithms\")\n     private String topic;\n \n-    @ManyToMany(fetch = FetchType.LAZY)\n-    @JoinTable(name = \"collection_entry\", joinColumns = @JoinColumn(name = \"collectionid\"), inverseJoinColumns = @JoinColumn(name = \"entryid\"))\n+    @OneToMany(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMDUyNg==", "bodyText": "Why does this join table have its own id (possible inspiration from user_entry or organization_user which don't have their own id.", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r501310526", "createdAt": "2020-10-07T21:07:24Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/migrations.1.10.0.xml", "diffHunk": "@@ -77,4 +77,22 @@\n     <changeSet author=\"nolwarre (generated)\" id=\"notificationsCharLimit\">\n         <modifyDataType columnName=\"message\" newDataType=\"varchar(1024)\" tableName=\"notification\"/>\n     </changeSet>\n+    <changeSet author=\"gluu (generated)\" id=\"1601569350016-13\">\n+        <createTable tableName=\"collection_entry_version\">\n+            <column autoIncrement=\"true\" name=\"id\" type=\"SERIAL\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b8d89b94e054f625f97e4003490db18a5845774", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/8b8d89b94e054f625f97e4003490db18a5845774", "committedDate": "2020-10-08T17:36:11Z", "message": "PR changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74b37d08c10aea8d1539ce7e5cf6f8b8f3b9a644", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/74b37d08c10aea8d1539ce7e5cf6f8b8f3b9a644", "committedDate": "2020-10-08T17:57:10Z", "message": "Assert equals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11b5efd2eabc459526da52f737059f6128bf4bc9", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/11b5efd2eabc459526da52f737059f6128bf4bc9", "committedDate": "2020-10-08T17:57:23Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc4a8b2f0204b1dff145c2432400a1abd84ae943", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/cc4a8b2f0204b1dff145c2432400a1abd84ae943", "committedDate": "2020-10-08T17:57:37Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54d615ca4d395627fe408da4d4ff99c64ed90f73", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/54d615ca4d395627fe408da4d4ff99c64ed90f73", "committedDate": "2020-10-08T18:50:06Z", "message": "Random fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/1827310df08b52be7ec3b2c7d86e4f5a0df69911", "committedDate": "2020-10-08T20:29:31Z", "message": "Fix migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTY3ODU0", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-505167854", "createdAt": "2020-10-08T21:09:34Z", "commit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTowOTozNFrOHewgKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMToxNDo0NlrOHewp1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAxMzk5Mw==", "bodyText": "Missing newline per GitHub", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502013993", "createdAt": "2020-10-08T21:09:34Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/resources/import.sql", "diffHunk": "@@ -38,3 +38,6 @@ ALTER TABLE workflowversion ADD CONSTRAINT fk_workflowVersionMetadata FOREIGN KE\n \n -- cannot seem to define these due to inheritance\n ALTER TABLE tag ADD CONSTRAINT parentid_constraint FOREIGN KEY(parentid) REFERENCES tool (id) DEFERRABLE INITIALLY DEFERRED;\n+\n+CREATE UNIQUE INDEX unique_collection_entry ON collection_entry_version USING btree (collection_id, entry_id) WHERE version_id IS NULL;\n+CREATE UNIQUE INDEX unique_collection_entry_version ON collection_entry_version USING btree (collection_id, entry_id, version_id) WHERE version_id IS NOT NULL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAxNjQ3MQ==", "bodyText": "What is this file for again? This SQL is already in the migrations XML..", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502016471", "createdAt": "2020-10-08T21:14:46Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/resources/import.sql", "diffHunk": "@@ -38,3 +38,6 @@ ALTER TABLE workflowversion ADD CONSTRAINT fk_workflowVersionMetadata FOREIGN KE\n \n -- cannot seem to define these due to inheritance\n ALTER TABLE tag ADD CONSTRAINT parentid_constraint FOREIGN KEY(parentid) REFERENCES tool (id) DEFERRABLE INITIALLY DEFERRED;\n+\n+CREATE UNIQUE INDEX unique_collection_entry ON collection_entry_version USING btree (collection_id, entry_id) WHERE version_id IS NULL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e1668102050c227d692ec43170d3a1f9fda2ad6", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/6e1668102050c227d692ec43170d3a1f9fda2ad6", "committedDate": "2020-10-08T22:08:50Z", "message": "New line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MjA3NjU2", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-505207656", "createdAt": "2020-10-08T22:24:32Z", "commit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNDozMlrOHeycUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzozMFrOHeygvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0NTc3Ng==", "bodyText": "there's a comment above\n-- this file is a last chance to modify any database schema in hibernate (hbm2ddl) create mode with postgres-specific\n-- changes not possible in JPA\n\nbasically, if you can't create something (like partial indexes) in JPA because they're postgres specific, create them here and in migrations", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502045776", "createdAt": "2020-10-08T22:24:32Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/import.sql", "diffHunk": "@@ -38,3 +38,6 @@ ALTER TABLE workflowversion ADD CONSTRAINT fk_workflowVersionMetadata FOREIGN KE\n \n -- cannot seem to define these due to inheritance\n ALTER TABLE tag ADD CONSTRAINT parentid_constraint FOREIGN KEY(parentid) REFERENCES tool (id) DEFERRABLE INITIALLY DEFERRED;\n+\n+CREATE UNIQUE INDEX unique_collection_entry ON collection_entry_version USING btree (collection_id, entry_id) WHERE version_id IS NULL;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAxNjQ3MQ=="}, "originalCommit": {"oid": "1827310df08b52be7ec3b2c7d86e4f5a0df69911"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0NjkxMA==", "bodyText": "interesting", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502046910", "createdAt": "2020-10-08T22:27:30Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/migrations.1.10.0.xml", "diffHunk": "@@ -77,4 +77,22 @@\n     <changeSet author=\"nolwarre (generated)\" id=\"notificationsCharLimit\">\n         <modifyDataType columnName=\"message\" newDataType=\"varchar(1024)\" tableName=\"notification\"/>\n     </changeSet>\n+    <changeSet author=\"gluu (generated)\" id=\"1601569350016-13\">\n+        <createTable tableName=\"collection_entry_version\">\n+            <column autoIncrement=\"true\" name=\"id\" type=\"SERIAL\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMDUyNg=="}, "originalCommit": {"oid": "0c543ee52d2ef51d928735653b95fcc5c563eae2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODc0OTI1", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-505874925", "createdAt": "2020-10-09T17:44:05Z", "commit": {"oid": "6e1668102050c227d692ec43170d3a1f9fda2ad6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1de120fc16d7586111a28be72b002b2f84457a", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/5f1de120fc16d7586111a28be72b002b2f84457a", "committedDate": "2020-10-09T17:45:41Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODc5MDM2", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-505879036", "createdAt": "2020-10-09T17:50:44Z", "commit": {"oid": "5f1de120fc16d7586111a28be72b002b2f84457a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecc7691c1c40a6ae60e8f80dec84da93da71c8f7", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/ecc7691c1c40a6ae60e8f80dec84da93da71c8f7", "committedDate": "2020-10-09T18:13:09Z", "message": "Fix merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f9cd621345293455b49b502b28693a77370e48d", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/2f9cd621345293455b49b502b28693a77370e48d", "committedDate": "2020-10-09T19:26:07Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1OTYwOTQw", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-505960940", "createdAt": "2020-10-09T20:10:50Z", "commit": {"oid": "2f9cd621345293455b49b502b28693a77370e48d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aff7e13c6f4ab8506532117c33c9761be30bd1b", "author": {"user": {"login": "garyluu", "name": "Gary Luu"}}, "url": "https://github.com/dockstore/dockstore/commit/5aff7e13c6f4ab8506532117c33c9761be30bd1b", "committedDate": "2020-10-09T21:20:55Z", "message": "Merge branch 'develop' into feature/SEAB-1637/CollectionEntryVersionDB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDAxMjY5", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-506001269", "createdAt": "2020-10-09T21:33:36Z", "commit": {"oid": "5aff7e13c6f4ab8506532117c33c9761be30bd1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTozMzozNlrOHfZNYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTozMzozNlrOHfZNYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MDkyOQ==", "bodyText": "Codacy found an issue: '9L' is a magic number.", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502680929", "createdAt": "2020-10-09T21:33:36Z", "author": {"login": "denis-yuen"}, "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/OrganizationIT.java", "diffHunk": "@@ -1314,6 +1312,25 @@ public void testBasicCollections() {\n             fail(\"Was able to reject an approved collection\");\n         }\n \n+        // version 8 and 9 belong to entryId 2\n+        long versionId = 9L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aff7e13c6f4ab8506532117c33c9761be30bd1b"}, "originalPosition": 130}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDAxMjk4", "url": "https://github.com/dockstore/dockstore/pull/3846#pullrequestreview-506001298", "createdAt": "2020-10-09T21:33:39Z", "commit": {"oid": "5aff7e13c6f4ab8506532117c33c9761be30bd1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTozMzozOVrOHfZNcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTozMzozOVrOHfZNcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MDk0NA==", "bodyText": "Codacy found an issue: '3' is a magic number.", "url": "https://github.com/dockstore/dockstore/pull/3846#discussion_r502680944", "createdAt": "2020-10-09T21:33:39Z", "author": {"login": "denis-yuen"}, "path": "dockstore-integration-testing/src/test/java/io/dockstore/client/cli/OrganizationIT.java", "diffHunk": "@@ -1314,6 +1312,25 @@ public void testBasicCollections() {\n             fail(\"Was able to reject an approved collection\");\n         }\n \n+        // version 8 and 9 belong to entryId 2\n+        long versionId = 9L;\n+\n+        // Add tool and specific version to collection\n+        organizationsApi.addEntryToCollection(organization.getId(), collectionId, entryId, versionId);\n+        organizationsApi.addEntryToCollection(organization.getId(), collectionId, entryId, null);\n+\n+        // There should now be two entries for collection with ID 1 (one with version, one without), 3 entries in total\n+        collectionById = organizationsApi.getCollectionById(organizationID, collectionId);\n+        assertEquals(3, collectionById.getEntries().size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aff7e13c6f4ab8506532117c33c9761be30bd1b"}, "originalPosition": 138}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1792, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}