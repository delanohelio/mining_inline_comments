{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MDY0NTI0", "number": 3234, "title": "Deprecate zip endpoint", "bodyText": "For #2259.\nThe implementation for the zip upload is independent from the JSON upload (which uses the PATCH endpoint, so the check to see if the contents match the previous version is already done). Thus, I'm deprecating the zip endpoint: POST /hostedEntry/{entryid}.\nI also annotated the zip endpoint as deprecated for openapi3.", "createdAt": "2020-02-13T20:08:40Z", "url": "https://github.com/dockstore/dockstore/pull/3234", "merged": true, "mergeCommit": {"oid": "452319be4ad6a43e8fcb30f5d2ce2c8abad53af2"}, "closed": true, "closedAt": "2020-02-14T20:08:17Z", "author": {"login": "kathy-t"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD_i-0gH2gAyMzc1MDY0NTI0OjUwZDdiOWE3NGVhMTlhZmVhZTdjZDJiMGNhZWE4ODBlNjIyMmRjODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEU2ZnAFqTM1OTE3NTEzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50d7b9a74ea19afeae7cd2b0caea880e6222dc88", "author": {"user": null}, "url": "https://github.com/dockstore/dockstore/commit/50d7b9a74ea19afeae7cd2b0caea880e6222dc88", "committedDate": "2020-02-13T18:50:05Z", "message": "deprecate zip endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470", "author": {"user": null}, "url": "https://github.com/dockstore/dockstore/commit/35d48fc978246dbdc34633d9618bb740f72ec470", "committedDate": "2020-02-13T18:55:30Z", "message": "fixed tabbing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTIwMDQ4", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-358520048", "createdAt": "2020-02-13T20:14:40Z", "commit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMDoxNDo0MFrOFpiF8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMDo0NjozMlrOFpjAIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA5NDUxNQ==", "bodyText": "name = \"bearer\" can probably be JWT_SECURITY_DEFINITION_NAME", "url": "https://github.com/dockstore/dockstore/pull/3234#discussion_r379094515", "createdAt": "2020-02-13T20:14:40Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/HostedWorkflowResource.java", "diffHunk": "@@ -177,10 +183,15 @@ public Workflow editHosted(User user, Long entryId, Set<SourceFile> sourceFiles)\n     @Path(\"/hostedEntry/{entryId}\")\n     @Timed\n     @UnitOfWork\n-    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\",\n-            authorizations = {@Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n-    public Workflow addZip(@ApiParam(hidden = true) @Auth User user, @ApiParam(value = \"hosted entry ID\")\n-        @PathParam(\"entryId\") Long entryId,  @FormDataParam(\"file\") InputStream payload) {\n+    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\", authorizations = {\n+        @Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n+    @Deprecated(since = \"1.9.0\")\n+    @Operation(operationId = \"addZip\", summary = \"Creates a new revision of a hosted workflow from a zip\", security = @SecurityRequirement(name = \"bearer\"), deprecated = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA5NTEwMg==", "bodyText": "double-check that the deprecated = true is actually needed and the @Deprecated is not enough for both", "url": "https://github.com/dockstore/dockstore/pull/3234#discussion_r379095102", "createdAt": "2020-02-13T20:16:04Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/HostedWorkflowResource.java", "diffHunk": "@@ -177,10 +183,15 @@ public Workflow editHosted(User user, Long entryId, Set<SourceFile> sourceFiles)\n     @Path(\"/hostedEntry/{entryId}\")\n     @Timed\n     @UnitOfWork\n-    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\",\n-            authorizations = {@Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n-    public Workflow addZip(@ApiParam(hidden = true) @Auth User user, @ApiParam(value = \"hosted entry ID\")\n-        @PathParam(\"entryId\") Long entryId,  @FormDataParam(\"file\") InputStream payload) {\n+    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\", authorizations = {\n+        @Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n+    @Deprecated(since = \"1.9.0\")\n+    @Operation(operationId = \"addZip\", summary = \"Creates a new revision of a hosted workflow from a zip\", security = @SecurityRequirement(name = \"bearer\"), deprecated = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODM2OA==", "bodyText": "MediaType.APPLICATION_JSON", "url": "https://github.com/dockstore/dockstore/pull/3234#discussion_r379108368", "createdAt": "2020-02-13T20:44:14Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/HostedWorkflowResource.java", "diffHunk": "@@ -177,10 +183,15 @@ public Workflow editHosted(User user, Long entryId, Set<SourceFile> sourceFiles)\n     @Path(\"/hostedEntry/{entryId}\")\n     @Timed\n     @UnitOfWork\n-    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\",\n-            authorizations = {@Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n-    public Workflow addZip(@ApiParam(hidden = true) @Auth User user, @ApiParam(value = \"hosted entry ID\")\n-        @PathParam(\"entryId\") Long entryId,  @FormDataParam(\"file\") InputStream payload) {\n+    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\", authorizations = {\n+        @Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n+    @Deprecated(since = \"1.9.0\")\n+    @Operation(operationId = \"addZip\", summary = \"Creates a new revision of a hosted workflow from a zip\", security = @SecurityRequirement(name = \"bearer\"), deprecated = true)\n+    @ApiResponse(responseCode = \"200\", description = \"successful operation\", content = @Content(mediaType = \"application/json\", schema = @Schema(implementation = Workflow.class)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwOTAyMQ==", "bodyText": "Make a private static final thing for \"addZip\" and \"Creates a new revision of a hosted workflow from a zip\"", "url": "https://github.com/dockstore/dockstore/pull/3234#discussion_r379109021", "createdAt": "2020-02-13T20:45:38Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/HostedWorkflowResource.java", "diffHunk": "@@ -177,10 +183,15 @@ public Workflow editHosted(User user, Long entryId, Set<SourceFile> sourceFiles)\n     @Path(\"/hostedEntry/{entryId}\")\n     @Timed\n     @UnitOfWork\n-    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\",\n-            authorizations = {@Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n-    public Workflow addZip(@ApiParam(hidden = true) @Auth User user, @ApiParam(value = \"hosted entry ID\")\n-        @PathParam(\"entryId\") Long entryId,  @FormDataParam(\"file\") InputStream payload) {\n+    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\", authorizations = {\n+        @Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n+    @Deprecated(since = \"1.9.0\")\n+    @Operation(operationId = \"addZip\", summary = \"Creates a new revision of a hosted workflow from a zip\", security = @SecurityRequirement(name = \"bearer\"), deprecated = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwOTQxMQ==", "bodyText": "Also, see if you can find a responseCode String somewhere. I was not able to", "url": "https://github.com/dockstore/dockstore/pull/3234#discussion_r379109411", "createdAt": "2020-02-13T20:46:32Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/HostedWorkflowResource.java", "diffHunk": "@@ -177,10 +183,15 @@ public Workflow editHosted(User user, Long entryId, Set<SourceFile> sourceFiles)\n     @Path(\"/hostedEntry/{entryId}\")\n     @Timed\n     @UnitOfWork\n-    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\",\n-            authorizations = {@Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n-    public Workflow addZip(@ApiParam(hidden = true) @Auth User user, @ApiParam(value = \"hosted entry ID\")\n-        @PathParam(\"entryId\") Long entryId,  @FormDataParam(\"file\") InputStream payload) {\n+    @ApiOperation(nickname = \"addZip\", value = \"Creates a new revision of a hosted workflow from a zip\", authorizations = {\n+        @Authorization(value = JWT_SECURITY_DEFINITION_NAME)}, response = Workflow.class)\n+    @Deprecated(since = \"1.9.0\")\n+    @Operation(operationId = \"addZip\", summary = \"Creates a new revision of a hosted workflow from a zip\", security = @SecurityRequirement(name = \"bearer\"), deprecated = true)\n+    @ApiResponse(responseCode = \"200\", description = \"successful operation\", content = @Content(mediaType = \"application/json\", schema = @Schema(implementation = Workflow.class)))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODM2OA=="}, "originalCommit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTQ3OTM3", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-358547937", "createdAt": "2020-02-13T21:01:36Z", "commit": {"oid": "35d48fc978246dbdc34633d9618bb740f72ec470"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4995e131488b345378f5ec5b446b5e9b95b550", "author": {"user": null}, "url": "https://github.com/dockstore/dockstore/commit/6b4995e131488b345378f5ec5b446b5e9b95b550", "committedDate": "2020-02-14T14:51:05Z", "message": "added and used constants for operationId, description, and mediaType"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDA2MjI2", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359006226", "createdAt": "2020-02-14T15:08:24Z", "commit": {"oid": "6b4995e131488b345378f5ec5b446b5e9b95b550"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDI2OTU4", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359026958", "createdAt": "2020-02-14T15:36:18Z", "commit": {"oid": "6b4995e131488b345378f5ec5b446b5e9b95b550"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "118c2dc66e4123ef2b811ac0dc66da247c027296", "author": {"user": null}, "url": "https://github.com/dockstore/dockstore/commit/118c2dc66e4123ef2b811ac0dc66da247c027296", "committedDate": "2020-02-14T15:52:15Z", "message": "made user, entryId, and payload parameters final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDQxMDE1", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359041015", "createdAt": "2020-02-14T15:55:44Z", "commit": {"oid": "118c2dc66e4123ef2b811ac0dc66da247c027296"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDY2ODMw", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359066830", "createdAt": "2020-02-14T16:32:40Z", "commit": {"oid": "118c2dc66e4123ef2b811ac0dc66da247c027296"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MDkyOTg5", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359092989", "createdAt": "2020-02-14T17:12:12Z", "commit": {"oid": "118c2dc66e4123ef2b811ac0dc66da247c027296"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MTc1MTM0", "url": "https://github.com/dockstore/dockstore/pull/3234#pullrequestreview-359175134", "createdAt": "2020-02-14T19:39:18Z", "commit": {"oid": "118c2dc66e4123ef2b811ac0dc66da247c027296"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1903, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}