{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MjcwNDc5", "number": 3350, "title": "slight optimization for user/my{Entries} endpoints", "bodyText": "#3143\nIdeally would instead use a minimal entry object to populate the user/my{Entries} pages for a user, but would require some significant UI changes. Something to revisit later.\nFor now, just doing a slight optimization by changing the endpoints to return only the relevant entry type for that endpoint (ex just Workflow, Tools, or Services). Loading myWorkflows for me was about 27% faster, and since I have very few Tools and Services, those pages now load near instantly.", "createdAt": "2020-03-26T16:15:28Z", "url": "https://github.com/dockstore/dockstore/pull/3350", "merged": true, "mergeCommit": {"oid": "39d4547c1606864eca7c4b79b4f170ab51f080d6"}, "closed": true, "closedAt": "2020-04-01T18:28:18Z", "author": {"login": "Ldcabansay"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRQGSygH2gAyMzk0MjcwNDc5OjA3MDBjZmU2MzkzYzdlYWEwOWU1MjMzOTAzOWNkZGE2YmJlYWRkZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTKRBOgH2gAyMzk0MjcwNDc5OjVmNzk3NGUzN2U2OTQwOTEzMjcyMjdiMGRhOTYyMDU2ZmI2MTIwZGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0700cfe6393c7eaa09e52339039cdda6bbeadde2", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/0700cfe6393c7eaa09e52339039cdda6bbeadde2", "committedDate": "2020-03-25T23:28:09Z", "message": "small optimization, get Tools, Workflows, and Services separately for each user/my{entry} endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMTc3MzU1", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-382177355", "createdAt": "2020-03-26T16:20:13Z", "commit": {"oid": "0700cfe6393c7eaa09e52339039cdda6bbeadde2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjoyMDoxNFrOF8PCfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjoyMDoxNFrOF8PCfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ==", "bodyText": "I think this should return a List<T> intstead of List<Entry>. Then you shouldn't need to do the casts in UserResource.", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398705279", "createdAt": "2020-03-26T16:20:14Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/jdbi/EntryDAO.java", "diffHunk": "@@ -154,6 +154,10 @@ public T findPublishedById(long id) {\n         return list(namedQuery(\"io.dockstore.webservice.core.\" + typeOfT.getSimpleName() + \".getEntryLiteByUserId\").setParameter(\"userId\", userId));\n     }\n \n+    public List<Entry> findMyEntries(long userId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0700cfe6393c7eaa09e52339039cdda6bbeadde2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMjU2OTEy", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-382256912", "createdAt": "2020-03-26T17:45:43Z", "commit": {"oid": "0700cfe6393c7eaa09e52339039cdda6bbeadde2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e79b2ae3576be64af99d85f08fed89bd2dbe1842", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/e79b2ae3576be64af99d85f08fed89bd2dbe1842", "committedDate": "2020-03-26T19:27:23Z", "message": "add optimization to more endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2094ccdeed365d786b7fe0841145807d9839bc0", "author": {"user": {"login": "denis-yuen", "name": "Denis Yuen"}}, "url": "https://github.com/dockstore/dockstore/commit/c2094ccdeed365d786b7fe0841145807d9839bc0", "committedDate": "2020-03-26T20:08:19Z", "message": "Add cherry pick 4d6b96a: Seems to work locally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95da81950a8660c45254950f7f915064dc317ce4", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/95da81950a8660c45254950f7f915064dc317ce4", "committedDate": "2020-03-26T21:06:13Z", "message": "added a todo, mainly pushing to kickoff new circleCI build after config error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODUzMzEx", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-382853311", "createdAt": "2020-03-27T13:26:15Z", "commit": {"oid": "95da81950a8660c45254950f7f915064dc317ce4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzoyNjoxNVrOF8w_4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzoyNjoxNVrOF8w_4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI2MTY2Nw==", "bodyText": "Where'd these changes come from?", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r399261667", "createdAt": "2020-03-27T13:26:15Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/resources/openapi3/openapi.yaml", "diffHunk": "@@ -1417,6 +1500,8 @@ components:\n             $ref: '#/components/schemas/FileFormat'\n           type: array\n           uniqueItems: true\n+        parent:\n+          $ref: '#/components/schemas/EntryObjectObject'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95da81950a8660c45254950f7f915064dc317ce4"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0def2a6265119e06bf151d4faac4d6c06d6b1ef8", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/0def2a6265119e06bf151d4faac4d6c06d6b1ef8", "committedDate": "2020-03-29T23:32:08Z", "message": "Merge branch 'develop' into feature/3143/optimize_myEntries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MDA5NzI0", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-384009724", "createdAt": "2020-03-30T16:08:24Z", "commit": {"oid": "0def2a6265119e06bf151d4faac4d6c06d6b1ef8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MDEwOTg2", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-384010986", "createdAt": "2020-03-30T16:09:47Z", "commit": {"oid": "0def2a6265119e06bf151d4faac4d6c06d6b1ef8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da9888b109b9d345bd8b86b72b6263227113350a", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/da9888b109b9d345bd8b86b72b6263227113350a", "committedDate": "2020-03-30T18:05:42Z", "message": "add openapi.yaml changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/63015f82905bc7af1338681a77c63798722f50ae", "committedDate": "2020-03-31T01:27:46Z", "message": "fix broken test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NzIxMzkz", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-384721393", "createdAt": "2020-03-31T13:17:17Z", "commit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzoxNzoxN1rOF-VSig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzoxNzoxN1rOF-VSig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkwNDg0Mg==", "bodyText": "Don't need to check this file in.", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r400904842", "createdAt": "2020-03-31T13:17:17Z", "author": {"login": "garyluu"}, "path": "dockstore-webservice/src/main/resources/openapi3/openapi.yaml", "diffHunk": "@@ -2902,7 +2902,7 @@ paths:\n           content:\n             application/json:\n               schema:\n-                $ref: '#/components/schemas/Aliasable'\n+                $ref: '#/components/schemas/Collection'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0Nzk0MTkx", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-384794191", "createdAt": "2020-03-31T14:32:20Z", "commit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODE4Njg3", "url": "https://github.com/dockstore/dockstore/pull/3350#pullrequestreview-384818687", "createdAt": "2020-03-31T14:56:27Z", "commit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo1NjoyOFrOF-Z8Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo1NjoyOFrOF-Z8Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk4MTAwNw==", "bodyText": "Not really sure I understand what is going on here.\nI would have expected services on line 220 to be filled with services, then workflows here to be filled with workflows.\nIt seems odd to me to expect a 500 error?", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r400981007", "createdAt": "2020-03-31T14:56:28Z", "author": {"login": "denis-yuen"}, "path": "dockstore-integration-testing/src/test/java/io/dockstore/webservice/ServiceIT.java", "diffHunk": "@@ -217,7 +218,14 @@ public void testGitHubAppEndpoints() throws Exception {\n         // Test user endpoints\n         UsersApi usersApi = new UsersApi(webClient);\n         services = usersApi.userServices(service.getUsers().get(0).getId());\n-        List<io.swagger.client.model.Workflow> workflows = usersApi.userWorkflows(service.getUsers().get(0).getId());\n+        List<io.swagger.client.model.Workflow> workflows = new ArrayList<>();\n+        try {\n+            workflows.addAll(usersApi.userWorkflows(service.getUsers().get(0).getId()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63015f82905bc7af1338681a77c63798722f50ae"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f7974e37e694091327227b0da962056fb6120df", "author": {"user": {"login": "Ldcabansay", "name": "Louise Cabansay"}}, "url": "https://github.com/dockstore/dockstore/commit/5f7974e37e694091327227b0da962056fb6120df", "committedDate": "2020-03-31T21:48:17Z", "message": "fix named queries for BioWorkflow, more slight optimizations, revert openapi.yml changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1814, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}