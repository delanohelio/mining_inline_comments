{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NzE3MDgz", "number": 3667, "title": "Feature/seab 1401/collect emails", "bodyText": "Collect User Emails From GitHub\nSEAB#1401\nImplemented a getEmail() method that goes through every single email\nfrom a GitHub user (regardless if they have private email turned on/off)\nand returns their primary email\nCreated a integration test to verify that the fields of object Profile\nis correct after updating the logged in user's metadata\nIncluded a new fixture 'GitHubEmail.json' for Hoverfly\nImplemented a new case for Hoverfly to check for the new endpoint\n'/user/emails'", "createdAt": "2020-07-15T20:29:52Z", "url": "https://github.com/dockstore/dockstore/pull/3667", "merged": true, "mergeCommit": {"oid": "c4576a1f198bdc0cb753d63bf6b5743a15d072d8"}, "closed": true, "closedAt": "2020-07-17T21:19:26Z", "author": {"login": "ByteMap"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0qp6OAH2gAyNDQ5NzE3MDgzOjdlZmMwYzQ1NzE0NGRlZTFlMDNlM2NmOTdmOGQ1ODVkMjAxMzk5MDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc16adoAFqTQ1MDk1ODEzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7efc0c457144dee1e03e3cf97f8d585d20139904", "author": {"user": {"login": "ByteMap", "name": "Andy Chen"}}, "url": "https://github.com/dockstore/dockstore/commit/7efc0c457144dee1e03e3cf97f8d585d20139904", "committedDate": "2020-07-14T00:11:56Z", "message": "Collect User Emails From GitHub\n\nSEAB#1401\n\nImplemented a getEmail() method that goes through every single email\nfrom a GitHub user (regardless if they have private email turned on/off)\nand returns their primary email\n\nCreated a integration test to verify that the fields of object Profile\nis correct after updating the logged in user's metadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a", "author": {"user": {"login": "ByteMap", "name": "Andy Chen"}}, "url": "https://github.com/dockstore/dockstore/commit/b217f4e1db656acce75cf78371960a8ebaad663a", "committedDate": "2020-07-15T18:14:10Z", "message": "Addressed tests failing for API call on user/emails\n\nIncluded a new fixture 'GitHubEmail.json' for Hoverfly\n\nImplemented a new case for Hoverfly to check for the new endpoint\n'/user/emails'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzI4ODc3", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-449328877", "createdAt": "2020-07-15T21:03:44Z", "commit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzUyNTM3", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-449352537", "createdAt": "2020-07-15T21:25:32Z", "commit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMToyNTozM1rOGyRC0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMToyODoxMlrOGyRH8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MTIzMw==", "bodyText": "I wonder if to be safe, you shouldn't do getEmail(myself) || myself.getEmail()? Would that ever happen, that there's not a primary email, but the profile has an email?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455361233", "createdAt": "2020-07-15T21:25:33Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -895,7 +905,7 @@ public void syncUserMetadataFromGitHub(User user) {\n             GHMyself myself = github.getMyself();\n             User.Profile profile = new User.Profile();\n             profile.name = myself.getName();\n-            profile.email = myself.getEmail();\n+            profile.email = getEmail(myself);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM2MjU0NQ==", "bodyText": "Does getEmails2 always return a collection? Take a look at code to be sure. Concerned about possible NPE.", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455362545", "createdAt": "2020-07-15T21:28:12Z", "author": {"login": "coverbeck"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {\n+        for (GHEmail email: myself.getEmails2()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5Mzc5MDQ1", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-449379045", "createdAt": "2020-07-15T22:10:15Z", "commit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMjoxMDoxNVrOGyTDkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMjoxMDoxNVrOGyTDkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE5Mg==", "bodyText": "Is this public for a reason?", "url": "https://github.com/dockstore/dockstore/pull/3667#discussion_r455394192", "createdAt": "2020-07-15T22:10:15Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/helpers/GitHubSourceCodeRepo.java", "diffHunk": "@@ -885,6 +886,15 @@ protected String getCommitID(String repositoryId, Version version) {\n         return null;\n     }\n \n+    public String getEmail(GHMyself myself) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b217f4e1db656acce75cf78371960a8ebaad663a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13a4de73815b9f5fc7514de466b0d6671774bba5", "author": {"user": {"login": "ByteMap", "name": "Andy Chen"}}, "url": "https://github.com/dockstore/dockstore/commit/13a4de73815b9f5fc7514de466b0d6671774bba5", "committedDate": "2020-07-15T23:19:34Z", "message": "Changed \"getEmail\" helper method to private"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8468b590a1a7c7973c65a9a90dd58829dd4de62a", "author": {"user": {"login": "ByteMap", "name": "Andy Chen"}}, "url": "https://github.com/dockstore/dockstore/commit/8468b590a1a7c7973c65a9a90dd58829dd4de62a", "committedDate": "2020-07-15T23:24:24Z", "message": "Merge branch 'develop' into feature/SEAB-1401/collectEmails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODMxOTM3", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-450831937", "createdAt": "2020-07-17T17:23:20Z", "commit": {"oid": "8468b590a1a7c7973c65a9a90dd58829dd4de62a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5afc549ceabb2053a5b859eb799ad156031a5ab", "author": {"user": {"login": "ByteMap", "name": "Andy Chen"}}, "url": "https://github.com/dockstore/dockstore/commit/d5afc549ceabb2053a5b859eb799ad156031a5ab", "committedDate": "2020-07-17T19:49:29Z", "message": "Merge branch 'develop' into feature/SEAB-1401/collectEmails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTU3Mzk5", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-450957399", "createdAt": "2020-07-17T21:06:02Z", "commit": {"oid": "d5afc549ceabb2053a5b859eb799ad156031a5ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTU4MTMx", "url": "https://github.com/dockstore/dockstore/pull/3667#pullrequestreview-450958131", "createdAt": "2020-07-17T21:07:28Z", "commit": {"oid": "d5afc549ceabb2053a5b859eb799ad156031a5ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1677, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}