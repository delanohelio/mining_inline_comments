{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1MDA1NzE3", "number": 3836, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODoxOTo0OVrOEosDSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODoyMzoxMlrOEosIuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExMTAwMjM1OnYy", "diffSide": "RIGHT", "path": "scripts/check-licenses.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODoxOTo0OVrOHZ7KoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODoxOTo0OVrOHZ7KoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0NTgyNQ==", "bodyText": "No newline, per GitHub", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496945825", "createdAt": "2020-09-29T18:19:49Z", "author": {"login": "coverbeck"}, "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then\n+    exit 0;\n+fi\n+\n+cp THIRD-PARTY-LICENSES.txt generated-licenses.txt\n+git checkout THIRD-PARTY-LICENSES.txt\n+diff generated-licenses.txt THIRD-PARTY-LICENSES.txt", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExMTAxNjI1OnYy", "diffSide": "RIGHT", "path": "scripts/check-licenses.sh", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODoyMzoxMlrOHZ7TCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMzoyNjo1M1rOHaddLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng==", "bodyText": "I'm not clear why we need this, although it is following the convention of propose_migration. \ud83e\udd37", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496947976", "createdAt": "2020-09-29T18:23:12Z", "author": {"login": "coverbeck"}, "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk1MDM2NA==", "bodyText": "Me neither. The other similar scripts seem to do it \u00af\\_(\u30c4)_/\u00af", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496950364", "createdAt": "2020-09-29T18:27:13Z", "author": {"login": "GFJHogue"}, "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}, "originalCommit": {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA5MDQ1Nw==", "bodyText": "- run:\n          name: check that JPA classes are consistent with migrations\n          command: |\n            scripts/check_migrations.sh\n          environment:\n            TESTING_PROFILE: automated-review\n\nIt seems to run in circle. But check_migrations uses if [ \"${TESTING_PROFILE}\" = \"automated-review\" ]; then to only run in that phase. This seems to be the opposite, so it always runs except for that phase?\nNot sure if that is intentional", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r497090457", "createdAt": "2020-09-29T22:11:33Z", "author": {"login": "denis-yuen"}, "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}, "originalCommit": {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUwNzYzMQ==", "bodyText": "They both behave the same way.\nThe main code for check_migrations is inside of the if block.\nThe main code that I have for check-licenses is outside of the if block (easier to inherit the exit code of diff when not skipping).", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r497507631", "createdAt": "2020-09-30T13:26:53Z", "author": {"login": "GFJHogue"}, "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}, "originalCommit": {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2858, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}