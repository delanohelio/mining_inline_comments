{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTk3NjA3", "number": 3321, "title": "Fix broken elastic search and my workflows", "bodyText": "#3310 #3253\nAttempts were being made to assign null to the Java primitive boolean\nisLegacyVersion field in WorkflowVersion. This would happen when\nfetching workflows, which would at least cause ES reindex\nand My Workflows to fail.\nDon't allow nulls in the table.\nAlso cat detected_migrations as part of this; was using to debug my\ninitial failures.", "createdAt": "2020-03-13T05:22:55Z", "url": "https://github.com/dockstore/dockstore/pull/3321", "merged": true, "mergeCommit": {"oid": "853fb797990ec557cf574f6d5e28d36acad5aff8"}, "closed": true, "closedAt": "2020-03-16T16:31:37Z", "author": {"login": "coverbeck"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNFI75gH2gAyMzg3NTk3NjA3OmFmYzI4MWQzYTQ4Y2JlOWQxOTM0MjU0ZDM0Y2I1MjNlOTA2OGQ1NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOQsK-gFqTM3NTM4MDA5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "afc281d3a48cbe9d1934254d34cb523e9068d562", "author": {"user": {"login": "coverbeck", "name": "Charles Overbeck"}}, "url": "https://github.com/dockstore/dockstore/commit/afc281d3a48cbe9d1934254d34cb523e9068d562", "committedDate": "2020-03-13T00:26:23Z", "message": "Quick fix for broken elastic search and my workflows\n\n#3310\n\nAttempts were being made to assign null to the Java primitive boolean\nisLegacyVersion field in WorkflowVersion. This would happen when\nfetching workflows, which would at least cause ES reindex\nand My Workflows to fail.\n\nDon't allow nulls in the table.\n\nQuick fix because I don't know how it got into the state where the value\nis null. But it makes sense to not allow nulls in any case. Nor did I\nadd a test. But I would like to get dev.dockstore.net working again."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a222d8e7ea4fe910a09504c294c29485833418aa", "author": {"user": {"login": "coverbeck", "name": "Charles Overbeck"}}, "url": "https://github.com/dockstore/dockstore/commit/a222d8e7ea4fe910a09504c294c29485833418aa", "committedDate": "2020-03-13T05:21:54Z", "message": "Hopefully the cause of check_migrations failing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08193594ef2de6294267e80c8cf82a022fa2f5cb", "author": {"user": {"login": "coverbeck", "name": "Charles Overbeck"}}, "url": "https://github.com/dockstore/dockstore/commit/08193594ef2de6294267e80c8cf82a022fa2f5cb", "committedDate": "2020-03-13T05:41:23Z", "message": "Print out detected migrations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "892e319f2820b4f8ec3058956b17150412bd00e5", "author": {"user": {"login": "coverbeck", "name": "Charles Overbeck"}}, "url": "https://github.com/dockstore/dockstore/commit/892e319f2820b4f8ec3058956b17150412bd00e5", "committedDate": "2020-03-13T05:58:05Z", "message": "ColumnDefinition needs to match migrations.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzU2Mjgw", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-374356280", "createdAt": "2020-03-13T14:43:24Z", "commit": {"oid": "892e319f2820b4f8ec3058956b17150412bd00e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDo0MzoyNFrOF2GU4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDo0MzoyNFrOF2GU4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI3MTA3NQ==", "bodyText": "FYI, this could lead to some subtle errors. My understanding is that if someone (e.g. a developer or staging) has run this migration already.\nLiquibase will not re-run it with these changes. So they may think they have an up-to-date database but actually something slightly different.", "url": "https://github.com/dockstore/dockstore/pull/3321#discussion_r392271075", "createdAt": "2020-03-13T14:43:24Z", "author": {"login": "denis-yuen"}, "path": "dockstore-webservice/src/main/resources/migrations.1.9.0.xml", "diffHunk": "@@ -50,10 +50,11 @@\n \n     <changeSet author=\"aduncan (generated)\" id=\"addLegacyVersionColumn\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "892e319f2820b4f8ec3058956b17150412bd00e5"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565", "author": {"user": {"login": "coverbeck", "name": "Charles Overbeck"}}, "url": "https://github.com/dockstore/dockstore/commit/25e5c8a1c4ee9111f50ce6db6734c908bdac5565", "committedDate": "2020-03-13T19:39:01Z", "message": "Move changes into a new changeset\n\nBTW, this branch also tackles #3253"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njg2NjM0", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-374686634", "createdAt": "2020-03-14T01:30:27Z", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njg3NTM0", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-374687534", "createdAt": "2020-03-14T01:42:10Z", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTQ2NDcz", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-375146473", "createdAt": "2020-03-16T12:06:33Z", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzMzMzQ2", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-375333346", "createdAt": "2020-03-16T15:35:41Z", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzgwMDk1", "url": "https://github.com/dockstore/dockstore/pull/3321#pullrequestreview-375380095", "createdAt": "2020-03-16T16:27:45Z", "commit": {"oid": "25e5c8a1c4ee9111f50ce6db6734c908bdac5565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1828, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}