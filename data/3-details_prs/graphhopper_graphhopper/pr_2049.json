{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NTc0MTU3", "number": 2049, "title": "Setup deployment on GitHub packages", "bodyText": "Every commit is built and the Maven artifacts are deployed to GitHub packages (See the 'packages' icon in the 'Code' tab on GitHub) where the version is set to the git commit hash. The 'Actions' tab on GitHub shows the build jobs. The builds do not contain the ready-to-use fat jars for the GraphHopper server and are only meant to be used for development purposes.", "createdAt": "2020-05-28T15:44:00Z", "url": "https://github.com/graphhopper/graphhopper/pull/2049", "merged": true, "mergeCommit": {"oid": "b15256635e179355563945d068fce87a6c58cd2d"}, "closed": true, "closedAt": "2020-05-28T17:28:01Z", "author": {"login": "easbar"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclup0-AH2gAyNDI0NTc0MTU3OjAzMTVmZGVjMzY0YTMxYzFiZjUzZDNhM2JkNzkzOWY5NzZjZDdjZmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclv8KgAFqTQyMDI1NDY3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0315fdec364a31c1bf53d3a3bd7939f976cd7cff", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/0315fdec364a31c1bf53d3a3bd7939f976cd7cff", "committedDate": "2020-05-28T14:22:36Z", "message": "Try to setup GH workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c853bff634f85a66533a34d4372b2eef0e316b0", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/6c853bff634f85a66533a34d4372b2eef0e316b0", "committedDate": "2020-05-28T14:25:51Z", "message": "Trigger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e73cd47503686c9ca792bbc1c183a757c9e7ed6", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/6e73cd47503686c9ca792bbc1c183a757c9e7ed6", "committedDate": "2020-05-28T14:28:24Z", "message": "rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "328cc2eb91af2d491788452cccedc7e336a982ab", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/328cc2eb91af2d491788452cccedc7e336a982ab", "committedDate": "2020-05-28T14:35:21Z", "message": "Again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8754cc6037062dc48dc8e805706548a9ae2727e2", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/8754cc6037062dc48dc8e805706548a9ae2727e2", "committedDate": "2020-05-28T14:37:30Z", "message": "Use batch mode, skip tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9142333d4ed237ef7415201365a89e758353634", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/b9142333d4ed237ef7415201365a89e758353634", "committedDate": "2020-05-28T15:14:45Z", "message": "Merge branch 'master' into github_packages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff55b1c770fffb6cc27e63996fbb5da500f8b07b", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/ff55b1c770fffb6cc27e63996fbb5da500f8b07b", "committedDate": "2020-05-28T15:17:27Z", "message": "Exclude fat jars and npm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a797d16b2f9fe2052230c43fe23da07df0c77e96", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/a797d16b2f9fe2052230c43fe23da07df0c77e96", "committedDate": "2020-05-28T15:26:09Z", "message": "Rename and add cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d17423ec33ce2a2b3f8a43885ce61e4d080ccb", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/e0d17423ec33ce2a2b3f8a43885ce61e4d080ccb", "committedDate": "2020-05-28T15:26:35Z", "message": "Test cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7d27f878d9535c2f28c7026cb9617471a83baa4", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/b7d27f878d9535c2f28c7026cb9617471a83baa4", "committedDate": "2020-05-28T15:26:43Z", "message": "Restore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/342aba7e73c60c79d18311ccad6d55789a628dc5", "committedDate": "2020-05-28T15:35:39Z", "message": "Skip node&npm installation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjQ3NTA3", "url": "https://github.com/graphhopper/graphhopper/pull/2049#pullrequestreview-420247507", "createdAt": "2020-05-28T15:45:23Z", "commit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTo0NToyNFrOGb7bqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTo0NTo1MFrOGb7c4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkzODQ3Mg==", "bodyText": "This creates a hash code from the pom.xml files and uses this has caching key to cache the .m2 folder. The cached files still have to be downloaded on every build so its probably not much faster, but at least this way the logs are not as messy :)", "url": "https://github.com/graphhopper/graphhopper/pull/2049#discussion_r431938472", "createdAt": "2020-05-28T15:45:24Z", "author": {"login": "easbar"}, "path": ".github/workflows/push-packages.yml", "diffHunk": "@@ -0,0 +1,24 @@\n+name: Publish to GitHub Packages\n+on: push\n+jobs:\n+  publish:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - uses: actions/checkout@v2\n+      - uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Cache Maven artifacts\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.m2/repository\n+          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+          restore-keys: |\n+            ${{ runner.os }}-maven-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkzODc4NQ==", "bodyText": "I do not think we need this as we are not releasing any 'snapshot' artifacts?", "url": "https://github.com/graphhopper/graphhopper/pull/2049#discussion_r431938785", "createdAt": "2020-05-28T15:45:50Z", "author": {"login": "easbar"}, "path": "pom.xml", "diffHunk": "@@ -264,10 +264,11 @@\n     </build>\n \n     <distributionManagement>\n-        <snapshotRepository>\n-            <id>ossrh</id>\n-            <url>https://oss.sonatype.org/content/repositories/snapshots</url>\n-        </snapshotRepository>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjUxOTI0", "url": "https://github.com/graphhopper/graphhopper/pull/2049#pullrequestreview-420251924", "createdAt": "2020-05-28T15:49:48Z", "commit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTo0OTo0OVrOGb7nkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTo0OTo0OVrOGb7nkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTk0MTUyMg==", "bodyText": "Ah, here we can use it this.", "url": "https://github.com/graphhopper/graphhopper/pull/2049#discussion_r431941522", "createdAt": "2020-05-28T15:49:49Z", "author": {"login": "karussell"}, "path": ".github/workflows/push-packages.yml", "diffHunk": "@@ -18,7 +18,7 @@ jobs:\n       - name: Build and publish package\n         run: |\n           mvn -B versions:set -DnewVersion=$GITHUB_SHA -DgenerateBackupPoms=false\n-          mvn -B -DskipTests -Dskip.npm -Pskip-shaded-web-jar -Pskip-tools-jar deploy\n+          mvn -B -DskipTests -Dskip.installnodenpm -Dskip.npm -Pskip-shaded-web-jar -Pskip-tools-jar deploy", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMjU0Njc0", "url": "https://github.com/graphhopper/graphhopper/pull/2049#pullrequestreview-420254674", "createdAt": "2020-05-28T15:52:32Z", "commit": {"oid": "342aba7e73c60c79d18311ccad6d55789a628dc5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4659, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}