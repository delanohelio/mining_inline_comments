{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNzQ1NjM0", "number": 2222, "title": "Simplify edge geometry before the distance is calculated", "bodyText": "During import we calculate edge.getDistance() before we simplify the edge geometry. Therefore the edge distance can be different to the distance we would calculate from the edge geometry:\nedge.getDistance() != new DistanceCalcEarth().calcDistance(edge.fetchWayGeometry(FetchMode.ALL));\nThis doesn't seem right, so in this PR I moved the edge simplification in front of the distance calculation.", "createdAt": "2020-12-21T21:55:52Z", "url": "https://github.com/graphhopper/graphhopper/pull/2222", "merged": true, "mergeCommit": {"oid": "a194fba625eea8e38e2c9627aa269fb7688f6699"}, "closed": true, "closedAt": "2020-12-29T10:19:26Z", "author": {"login": "easbar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdodJbWgH2gAyNTQzNzQ1NjM0OjY1MGJlYTRhMzM0NjU3NjBiMDIxZWNmODY2NTQ0NzQzOTkzMTRiM2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdq35qcgH2gAyNTQzNzQ1NjM0OjYyOWJiMmUxZTQ0MDhmZTdmNDIxN2QxNzU4YTMyMjIyYzZiODk5MDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "650bea4a33465760b021ecf86654474399314b3a", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/650bea4a33465760b021ecf86654474399314b3a", "committedDate": "2020-12-21T21:51:45Z", "message": "Simplify edge geometry before the distance is calculated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2Njg5OTEz", "url": "https://github.com/graphhopper/graphhopper/pull/2222#pullrequestreview-556689913", "createdAt": "2020-12-21T21:57:53Z", "commit": {"oid": "650bea4a33465760b021ecf86654474399314b3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMTo1Nzo1NFrOIJnLmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMTo1Nzo1NFrOIJnLmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk1MDA0MQ==", "bodyText": "This is the only test where my change lead to a distance deviation above 1m, is this ok?", "url": "https://github.com/graphhopper/graphhopper/pull/2222#discussion_r546950041", "createdAt": "2020-12-21T21:57:54Z", "author": {"login": "easbar"}, "path": "reader-osm/src/test/java/com/graphhopper/GraphHopperTest.java", "diffHunk": "@@ -887,7 +887,7 @@ public void testSRTMWithInstructions() {\n                 setAlgorithm(ASTAR).setProfile(profile));\n \n         ResponsePath res = rsp.getBest();\n-        assertEquals(1625.4, res.getDistance(), .1);\n+        assertEquals(1614.3, res.getDistance(), .1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "650bea4a33465760b021ecf86654474399314b3a"}, "originalPosition": 106}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad65f7f61f30987e58369775520132617185eb0c", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/ad65f7f61f30987e58369775520132617185eb0c", "committedDate": "2020-12-22T06:55:52Z", "message": "Fix gtfs test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1b37f127131b49d47e32d73aecd59c739fb9471", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/d1b37f127131b49d47e32d73aecd59c739fb9471", "committedDate": "2020-12-22T12:09:26Z", "message": "Remove unused wayOsmId parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDQyMzc2", "url": "https://github.com/graphhopper/graphhopper/pull/2222#pullrequestreview-559442376", "createdAt": "2020-12-29T09:13:50Z", "commit": {"oid": "d1b37f127131b49d47e32d73aecd59c739fb9471"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "629bb2e1e4408fe7f4217d1758a32222c6b89903", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/629bb2e1e4408fe7f4217d1758a32222c6b89903", "committedDate": "2020-12-29T10:09:49Z", "message": "Merge branch 'master' into simplify_before_dist"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4550, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}