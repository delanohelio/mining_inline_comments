{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NDA0ODIy", "number": 2162, "title": "CustomWeighting: ensure Map is ordered", "bodyText": "There is a bug which could occur for Java or the API when using multiple encoded values and/or multiple cases for one encoded value. The next goal should be to make CustomModel.getPriority/getSpeedFactor/getMaxSpeed type safe which we might reach when we limit the language to only \"clause\" as key and number as value (which is a next but much bigger step).", "createdAt": "2020-10-24T09:44:39Z", "url": "https://github.com/graphhopper/graphhopper/pull/2162", "merged": true, "mergeCommit": {"oid": "dd9dbd5da6823392a2403af9002d2e848b9281f1"}, "closed": true, "closedAt": "2020-10-25T22:33:31Z", "author": {"login": "karussell"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVeCFAAH2gAyNTA5NDA0ODIyOjllOTUxYmZmOGJjYzBlNjRhY2NlMDIxYzlmZTZmZjMxZjY3ZTQ1MWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWHgvcAH2gAyNTA5NDA0ODIyOjJmYjc0NzdkODZmNjU1MGEyN2YxNzk4ZWY0N2I2NGRjZTkxM2IyY2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e951bff8bcc0e64acce021c9fe6ff31f67e451f", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/9e951bff8bcc0e64acce021c9fe6ff31f67e451f", "committedDate": "2020-10-23T22:09:04Z", "message": "CustomWeighting: ensure Map is ordered"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98b90b202d6f906b11277bbd32fd926aabc09fbb", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/98b90b202d6f906b11277bbd32fd926aabc09fbb", "committedDate": "2020-10-24T09:47:07Z", "message": "minor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MjY1ODI3", "url": "https://github.com/graphhopper/graphhopper/pull/2162#pullrequestreview-516265827", "createdAt": "2020-10-24T10:03:17Z", "commit": {"oid": "98b90b202d6f906b11277bbd32fd926aabc09fbb"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNFQxMDowMzoxOFrOHnr1Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNFQxMDowMzozM1rOHnr1lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM3NDYyMg==", "bodyText": "junit 5 has assertThrows(...).", "url": "https://github.com/graphhopper/graphhopper/pull/2162#discussion_r511374622", "createdAt": "2020-10-24T10:03:18Z", "author": {"login": "easbar"}, "path": "core/src/test/java/com/graphhopper/routing/weighting/CustomWeightingTest.java", "diffHunk": "@@ -243,6 +244,19 @@ public void testIntEncodedValue() {\n         assertEquals(3.70, weighting.calcEdgeWeight(fastEdge, false), 0.01);\n     }\n \n+    @Test\n+    public void unorderedMapShouldFail() {\n+        Map map = new HashMap<>();\n+        map.put(\" > 1.5\", 0.2); // allow decimal values in range even for int encoded value\n+        CustomModel vehicleModel = new CustomModel();\n+        vehicleModel.getPriority().put(\"lanes\", map);\n+        try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98b90b202d6f906b11277bbd32fd926aabc09fbb"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM3NDc0MA==", "bodyText": "whitespace", "url": "https://github.com/graphhopper/graphhopper/pull/2162#discussion_r511374740", "createdAt": "2020-10-24T10:03:33Z", "author": {"login": "easbar"}, "path": "example/src/main/java/com/graphhopper/example/RoutingExample.java", "diffHunk": "@@ -97,10 +93,12 @@ public static void headingAndAlternativeRoute(GraphHopper hopper) {\n                 addPoint(new GHPoint(42.508774, 1.535414)).addPoint(new GHPoint(42.506595, 1.528795)).\n                 setHeadings(Arrays.asList(180d, 90d)).\n                 // use flexible mode (i.e. disable contraction hierarchies) to make heading and pass_through working\n-                putHint(Parameters.CH.DISABLE, true);\n+                        putHint(Parameters.CH.DISABLE, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98b90b202d6f906b11277bbd32fd926aabc09fbb"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8ab97c0524e5690abafcd39252a26ceb8c43be6", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/c8ab97c0524e5690abafcd39252a26ceb8c43be6", "committedDate": "2020-10-24T10:37:32Z", "message": "cleaner juni5 assertThrows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fb7477d86f6550a27f1798ef47b64dce913b2cb", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/2fb7477d86f6550a27f1798ef47b64dce913b2cb", "committedDate": "2020-10-25T22:28:40Z", "message": "one more assertThrow"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4491, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}