{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNzAzMjI2", "number": 1944, "title": "Refactor distance calculation utilities to be elevation-aware", "bodyText": "In preparation for making Douglas Peucker polyline simplification elevation-aware (discussion, larger diff I'm breaking into separate reviews), this review implements calcNormalizedEdgeDistance3D on each DistanceCalc implementation so 3D Douglas Peucker can call it from here and refactors a bit:\n\nNow that each implementation is 3D-aware, remove DistanceCalc3D and add a 3D calcDist method onto each implementation\nRename DistanceCalc2D to DistanceCalcEuclidean since it also handles elevation", "createdAt": "2020-03-03T02:00:39Z", "url": "https://github.com/graphhopper/graphhopper/pull/1944", "merged": true, "mergeCommit": {"oid": "7367af01d67a53f6f9dadf10e589fd87d7622fb4"}, "closed": true, "closedAt": "2020-03-12T16:22:58Z", "author": {"login": "msbarry"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJ4UP2AH2gAyMzgyNzAzMjI2OjEwNmYzYjgzMTc0Mjc2ZmRhNjRkOTc0MWQ1ZGVkZjJmOWIyYzdkYTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM4wCyAH2gAyMzgyNzAzMjI2OmQ4NDJmZTY3ZWE4ZDdlZjI1YWU2Y2RhOWVkNGRjMjNjZDhlMDk4ODM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "106f3b83174276fda64d9741d5dedf2f9b2c7da1", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/106f3b83174276fda64d9741d5dedf2f9b2c7da1", "committedDate": "2020-03-03T01:48:12Z", "message": "refactor all distance calculations to be elevation-aware"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9391008ac157effdb25bc4f880f14e161633d085", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/9391008ac157effdb25bc4f880f14e161633d085", "committedDate": "2020-03-03T10:46:10Z", "message": "some edge case handling and remove DistanceCalc2D"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MDU3NDY0", "url": "https://github.com/graphhopper/graphhopper/pull/1944#pullrequestreview-368057464", "createdAt": "2020-03-03T15:07:13Z", "commit": {"oid": "9391008ac157effdb25bc4f880f14e161633d085"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNTowNzoxM1rOFxJpeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNTowNzoxM1rOFxJpeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA4MjYxOA==", "bodyText": "Why do we need this method? If calcDist3D is called then the elevation values should be valid and not NaN.", "url": "https://github.com/graphhopper/graphhopper/pull/1944#discussion_r387082618", "createdAt": "2020-03-03T15:07:13Z", "author": {"login": "karussell"}, "path": "api/src/main/java/com/graphhopper/util/DistanceCalcEarth.java", "diffHunk": "@@ -254,6 +305,10 @@ public boolean isCrossBoundary(double lon1, double lon2) {\n         return abs(lon1 - lon2) > 300;\n     }\n \n+    protected boolean hasElevationDiff(double a, double b) {\n+        return a != b && !Double.isNaN(a) && !Double.isNaN(b);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9391008ac157effdb25bc4f880f14e161633d085"}, "originalPosition": 96}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "731220a7f12d2fbc2ce24165104e0658c419705c", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/731220a7f12d2fbc2ce24165104e0658c419705c", "committedDate": "2020-03-05T01:33:20Z", "message": "Merge branch 'master' into 3d-distance-utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abccb415e874155049ab0023ef4464dd7b29ffc7", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/abccb415e874155049ab0023ef4464dd7b29ffc7", "committedDate": "2020-03-10T12:48:41Z", "message": "Merge branch 'master' into 3d-distance-utilities"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxOTM0MDEy", "url": "https://github.com/graphhopper/graphhopper/pull/1944#pullrequestreview-371934012", "createdAt": "2020-03-10T13:09:54Z", "commit": {"oid": "abccb415e874155049ab0023ef4464dd7b29ffc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzowOTo1NVrOF0OBFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzowOTo1NVrOF0OBFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI5OTkyNA==", "bodyText": "Is this currently unused?", "url": "https://github.com/graphhopper/graphhopper/pull/1944#discussion_r390299924", "createdAt": "2020-03-10T13:09:55Z", "author": {"login": "karussell"}, "path": "core/src/main/java/com/graphhopper/GraphHopper.java", "diffHunk": "@@ -121,6 +121,7 @@\n     // for data reader\n     private String dataReaderFile;\n     private double dataReaderWayPointMaxDistance = 1;\n+    private double dataReaderElevationMaxDistance = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abccb415e874155049ab0023ef4464dd7b29ffc7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxOTM0MTg3", "url": "https://github.com/graphhopper/graphhopper/pull/1944#pullrequestreview-371934187", "createdAt": "2020-03-10T13:10:10Z", "commit": {"oid": "abccb415e874155049ab0023ef4464dd7b29ffc7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78a4a3669854a0d1594791e34fbda86976281689", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/78a4a3669854a0d1594791e34fbda86976281689", "committedDate": "2020-03-10T23:48:52Z", "message": "Merge branch 'master' into 3d-distance-utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40120050b7ba8022c0e329131e785d6ad6f3c425", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/40120050b7ba8022c0e329131e785d6ad6f3c425", "committedDate": "2020-03-10T23:50:29Z", "message": "rm extra change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d842fe67ea8d7ef25ae6cda9ed4dc23cd8e09883", "author": {"user": {"login": "msbarry", "name": "Michael Barry"}}, "url": "https://github.com/graphhopper/graphhopper/commit/d842fe67ea8d7ef25ae6cda9ed4dc23cd8e09883", "committedDate": "2020-03-12T10:00:20Z", "message": "Merge branch 'master' into 3d-distance-utilities"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4596, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}