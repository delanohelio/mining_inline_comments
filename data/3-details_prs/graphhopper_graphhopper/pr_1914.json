{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODI2ODg0", "number": 1914, "title": "No longer enable CH by default in GraphHopper class", "bodyText": "So far when creating a new GraphHopper instance the CHPreparationHandler was set to be enabled and \"fastest\" was used as default weighting, resulting in a \"fastest\" CH preparation for every vehicle. In this PR I have removed this default so there no longer are any CH preparations by default. I also removed the LMPreparationHandler#setEnabled methods, because there are only two cases: Either some CH/LM profiles are configured (then CH/LM is enabled) or not (then CH/LM is disabled), which means setEnabled(false) is equivalent to setting up no CH/LMProfiles and setEnabled(true) requires setting up the profiles and is thus unnecessary.\nThe usage goes like this now:\ngraphhopper:\n   # nothing changed here: adding some weightings means they will be prepared using CH\n   prepare.ch.weightings=fastest\n   # using an empty string or setting to 'no' means the list of weightings is empty, just as before this PR\n   prepare.lm.weightings=no\n// create a new GraphHopper object. note that compared to before this PR there is no CH profile\nGraphHopper hopper = new GraphHopper();\n// these methods are all gone\n// hopper.setCHEnabled(true);\n// hopper.getCHPreparationHandler().setEnabled(true);\n// hopper.getLMPreparationHandler().setEnabled(false);\n\n// to enable CH/LM we need to add the profiles\n// this resembles the previous behavior (CH will be 'enabled' by adding the profile)\nhopper.getCHPreparationHandler().setCHProfileStrings(\"fastest\");", "createdAt": "2020-02-16T13:39:16Z", "url": "https://github.com/graphhopper/graphhopper/pull/1914", "merged": true, "mergeCommit": {"oid": "a05de4b10f1135a980e0c23dad41dec0899ca9ae"}, "closed": true, "closedAt": "2020-02-17T13:35:18Z", "author": {"login": "easbar"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcE2FStAH2gAyMzc1ODI2ODg0OmUxYmVkOGU3NGY0NjExYTIwZDVjYzBiMzI1N2JjODFmNzEzMzhmZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFLPmfAH2gAyMzc1ODI2ODg0OmQ5MjY3ZTA3ODY1NzRkZWUzYWFjZmU4YWU4Mzk0Y2EyNzQ3OGQ0NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e1bed8e74f4611a20d5cc0b3257bc81f71338fd7", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/e1bed8e74f4611a20d5cc0b3257bc81f71338fd7", "committedDate": "2020-02-16T10:22:26Z", "message": "Make sure CH enabled/disabled is chosen explicitly everywhere\n\n* for any usage of GraphHopper there should either be a setCHEnabled(false) call or some CH profile strings should be set\n\n* -> now we can remove it again :)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8974338cdd7ddb5f968ca5c3e982579efaf2357d", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/8974338cdd7ddb5f968ca5c3e982579efaf2357d", "committedDate": "2020-02-16T13:19:49Z", "message": "No longer enable CH by default in GraphHopper class\n\n* remove enabled flag in CH/LMPreparationHandlers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDA0NDIy", "url": "https://github.com/graphhopper/graphhopper/pull/1914#pullrequestreview-359404422", "createdAt": "2020-02-16T13:40:45Z", "commit": {"oid": "8974338cdd7ddb5f968ca5c3e982579efaf2357d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo0MDo0NVrOFqTgeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo0MjoxM1rOFqTg8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDEyMg==", "bodyText": "@michaz ? I wasn't sure if CH was used for this test only by accident (because of the default) or if its actually intended.", "url": "https://github.com/graphhopper/graphhopper/pull/1914#discussion_r379904122", "createdAt": "2020-02-16T13:40:45Z", "author": {"login": "easbar"}, "path": "reader-gtfs/src/test/java/com/graphhopper/ExtendedRouteTypeIT.java", "diffHunk": "@@ -48,6 +48,8 @@ public static void init() {\n         ghConfig.put(\"graph.flag_encoders\", \"car,foot\");\n         ghConfig.put(\"graph.location\", GRAPH_LOC);\n         ghConfig.put(\"gtfs.file\", \"files/another-sample-feed-extended-route-type.zip\");\n+        // todonow: do we want the (previously by default) CH profiles here? (same question for all GraphHopperGtfs basically\n+        ghConfig.put(\"prepare.ch.weightings\", \"fastest\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8974338cdd7ddb5f968ca5c3e982579efaf2357d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDI0MQ==", "bodyText": "@michaz ? We probably want to update the command line parameters to -Ddw.graphhopper.xyz (since -Dgraphhopper.xyz is no longer working after #1879), and I was wondering why we are setting ch.weightings=no here (while for some gtfs tests we were using CH) (see other comment)", "url": "https://github.com/graphhopper/graphhopper/pull/1914#discussion_r379904241", "createdAt": "2020-02-16T13:42:13Z", "author": {"login": "easbar"}, "path": "reader-gtfs/README.md", "diffHunk": "@@ -17,10 +17,10 @@ wget http://download.geofabrik.de/europe/germany/brandenburg-latest.osm.pbf\n # The following process will take roughly 5 minutes on a modern laptop when it is executed for the first time.\n # It imports the previously downloaded OSM data of the Brandenburg area as well as the GTFS.\n java -Xmx8g -Xms8g \\\n+# todonow: this is a) outdated, and b) why no CH (when in tests its enabled?)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8974338cdd7ddb5f968ca5c3e982579efaf2357d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2f8bd950906c66d852d5b1089a2328a795447b0", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/a2f8bd950906c66d852d5b1089a2328a795447b0", "committedDate": "2020-02-16T15:34:28Z", "message": "Remove outdated comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1280914179889c4431891236ddb27dff49424b1", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/a1280914179889c4431891236ddb27dff49424b1", "committedDate": "2020-02-17T10:08:22Z", "message": "Merge branch 'master' into no_ch_by_default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5293dd960668798161b3ae3b7325104f711e5402", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/5293dd960668798161b3ae3b7325104f711e5402", "committedDate": "2020-02-17T10:30:06Z", "message": "Remove CH for PT, update PT readme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ff358bcb4af31abbe06339fd828f1d35c7f7f9", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/a7ff358bcb4af31abbe06339fd828f1d35c7f7f9", "committedDate": "2020-02-17T10:54:06Z", "message": "Minor cleanup in RoutingAlgorithmWithOSMIT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9267e0786574dee3aacfe8ae8394ca27478d465", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/d9267e0786574dee3aacfe8ae8394ca27478d465", "committedDate": "2020-02-17T11:01:42Z", "message": "Merge branch 'master' into no_ch_by_default\n\n# Conflicts:\n#\treader-gtfs/README.md"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4571, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}