{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MDQ4Mzgx", "number": 1876, "title": "Improve picking up default graph", "bodyText": "fixes #1862\nDone:\n\nRouteNetwork.EV_SUFFIX is replaced via the simpler RouteNetwork.key() method that enforces the parameter. Same for TurnCost.EV_SUFFIX.\nMade bike_network a shared EncodedValue (before it was in bike namespace and associated to a specific bike encoder which does not make much sense as it is valid for all BikeFlagEncoders)\nforce separating shared encoded values (come first) and encoded values of FlagEncoders (later)\ndefault config.yml is now loadable via new GraphHopper().load(graph-cache)\nbug fix in PathTest that used the wrong encoder\nbug fix in EnumEncodedValue that calculated the size wrong and wasted a bit space", "createdAt": "2020-01-28T14:35:53Z", "url": "https://github.com/graphhopper/graphhopper/pull/1876", "merged": true, "mergeCommit": {"oid": "2b06bd28083c11746ba63ee0dd60622832391ae8"}, "closed": true, "closedAt": "2020-01-30T13:33:56Z", "author": {"login": "karussell"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-yRxfAH2gAyMzY4MDQ4MzgxOjBmYzJlMjg0YzdhMDJhMWMyNGQ0ODFkOGE5NTViNDJkMzM3ZWM0ZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-5TZ2gH2gAyMzY4MDQ4MzgxOmIxMTE3MWMwMjI5YTZmODMzODc2YzZhMDU1Y2U4ZTQ4ZDIwMGQ3NWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0fc2e284c7a02a1c24d481d8a955b42d337ec4f1", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/0fc2e284c7a02a1c24d481d8a955b42d337ec4f1", "committedDate": "2020-01-28T14:32:54Z", "message": "found improvement for bit range calculation; fix issue with configured EncodingManager to make #1862 easier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "256a243acd458aafcb444f640b2500770434ee32", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/256a243acd458aafcb444f640b2500770434ee32", "committedDate": "2020-01-28T22:01:03Z", "message": "made all tests pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f89a40e65f4dc05040b2f2077e068635767801b", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/8f89a40e65f4dc05040b2f2077e068635767801b", "committedDate": "2020-01-28T22:11:13Z", "message": "merged master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzQyNTg5", "url": "https://github.com/graphhopper/graphhopper/pull/1876#pullrequestreview-349742589", "createdAt": "2020-01-28T22:13:47Z", "commit": {"oid": "8f89a40e65f4dc05040b2f2077e068635767801b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMzo0N1rOFi2e_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMzo0N1rOFi2e_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4ODU3Mw==", "bodyText": "@easbar can you have a look into this test. After merging master I'm getting:\njava.lang.IllegalStateException: Configured CH profile: fastest|car|edge_based=false is not contained in loaded weightings for CH[fastest|car|edge_based=false|u_turn_costs=-1, fastest|bike|edge_based=false|u_turn_costs=-1].\nYou configured: [fastest|car|edge_based=false, fastest|bike|edge_based=false]\n\nAnd cannot make it working. IMO both profiles are identical.\nIs this due to the compatibility layer? Should we remove this :) ?\nAnd I also noticed that Objects.hash and Objects.equals is used in CHProfile which is not available in Java 7 but replacing this should be simple. Sorry it should be Java 7 ...", "url": "https://github.com/graphhopper/graphhopper/pull/1876#discussion_r372088573", "createdAt": "2020-01-28T22:13:47Z", "author": {"login": "karussell"}, "path": "core/src/test/java/com/graphhopper/storage/GraphHopperStorageCHTest.java", "diffHunk": "@@ -61,8 +61,10 @@ private GraphHopperStorage newGHStorage(boolean is3D, boolean forEdgeBasedTraver\n     private GraphHopperStorage newGHStorage(Directory dir, boolean is3D, boolean forEdgeBasedTraversal, int segmentSize) {\n         GraphHopperStorage graph = new GraphBuilder(encodingManager)\n                 .setDir(dir).set3D(is3D).withTurnCosts(true).setSegmentSize(segmentSize).build();\n-        FastestWeighting weighting = new FastestWeighting(carEncoder, new DefaultTurnCostProvider(carEncoder, graph.getTurnCostStorage()));\n-        graph.addCHGraph(new CHProfile(weighting, forEdgeBasedTraversal));\n+        for (FlagEncoder encoder : encodingManager.fetchEdgeEncoders()) {\n+            FastestWeighting weighting = new FastestWeighting(encoder, new DefaultTurnCostProvider(encoder, graph.getTurnCostStorage()));\n+            graph.addCHGraph(new CHProfile(weighting, forEdgeBasedTraversal));\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f89a40e65f4dc05040b2f2077e068635767801b"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efc032b6ba9cada3a2115b9cb746da7a76dfc8db", "author": {"user": {"login": "easbar", "name": "Andi"}}, "url": "https://github.com/graphhopper/graphhopper/commit/efc032b6ba9cada3a2115b9cb746da7a76dfc8db", "committedDate": "2020-01-28T22:42:52Z", "message": "Fixes test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11171c0229a6f833876c6a055ce8e48d200d75a", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/b11171c0229a6f833876c6a055ce8e48d200d75a", "committedDate": "2020-01-28T22:44:01Z", "message": "test fix regarding TurnCost.key"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4703, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}