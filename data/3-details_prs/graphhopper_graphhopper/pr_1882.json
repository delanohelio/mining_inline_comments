{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NjgxNzc2", "number": 1882, "title": "Improve turn instructions when leaving the roads", "bodyText": "Fixes #1047.\nThis fixes the two examples given in #1047 and also the new example provided by @karussell.\nLet me know what you think about the results? I haven't done too much live testing yet. So feedback would be very welcome.\nI also renamed the two edge variable in InstructionsOutgoingEdges again :). I hope the naming is OK? I really struggled with the filteredEdges naming.", "createdAt": "2020-01-29T17:35:02Z", "url": "https://github.com/graphhopper/graphhopper/pull/1882", "merged": true, "mergeCommit": {"oid": "a03a93823d4f7f7eefdbca27437451e02b11eba2"}, "closed": true, "closedAt": "2020-02-05T12:27:02Z", "author": {"login": "boldtrn"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_JV1QgH2gAyMzY4NjgxNzc2OmU2MThhYjU0MzAxMDI4NjY0NWVhNjRkOTAyNDVmNDA0MjIyZDAxNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBD4aEAH2gAyMzY4NjgxNzc2OmQ1OGNlZDMxZjUxMzIxYzI1MWFkYzMyMzk4NTNiYjhiYTE4OGVmYmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e618ab543010286645ea64d90245f404222d0176", "author": {"user": {"login": "boldtrn", "name": "Robin"}}, "url": "https://github.com/graphhopper/graphhopper/commit/e618ab543010286645ea64d90245f404222d0176", "committedDate": "2020-01-29T17:25:09Z", "message": "Improve turn instructions when leaving the roads"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "248fed1431e56986fb70738324dfaaebeb7fd00d", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/248fed1431e56986fb70738324dfaaebeb7fd00d", "committedDate": "2020-02-03T16:09:30Z", "message": "Merge branch 'master' into add_turns_when_leaving_the_road"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMzg5ODYy", "url": "https://github.com/graphhopper/graphhopper/pull/1882#pullrequestreview-352389862", "createdAt": "2020-02-03T16:31:59Z", "commit": {"oid": "248fed1431e56986fb70738324dfaaebeb7fd00d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjozMTo1OVrOFk3tOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjozMTo1OVrOFk3tOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDIwNTc1NA==", "bodyText": "Can you refactor this to the normal Java style getAllowedTurns? (e.g. see GraphHopper.getWorkerThreads)", "url": "https://github.com/graphhopper/graphhopper/pull/1882#discussion_r374205754", "createdAt": "2020-02-03T16:31:59Z", "author": {"login": "karussell"}, "path": "core/src/main/java/com/graphhopper/routing/InstructionsFromEdges.java", "diffHunk": "@@ -391,12 +391,12 @@ private int getTurn(EdgeIteratorState edge, int baseNode, int prevNode, int adjN\n             forceInstruction = true;\n         }\n \n-        InstructionsOutgoingEdges outgoingEdges = new InstructionsOutgoingEdges(prevEdge, edge, encoder, maxSpeedEnc, crossingExplorer, nodeAccess, prevNode, baseNode, adjNode);\n-        int nrOfPossibleTurns = outgoingEdges.nrOfAllowedOutgoingEdges();\n+        InstructionsOutgoingEdges outgoingEdges = new InstructionsOutgoingEdges(prevEdge, edge, encoder, maxSpeedEnc, roadClassEnc, roadClassLinkEnc, crossingExplorer, nodeAccess, prevNode, baseNode, adjNode);\n+        int nrOfPossibleTurns = outgoingEdges.nrOfAllowedTurns();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "248fed1431e56986fb70738324dfaaebeb7fd00d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b71a0bcdf4524d7c3a5c6d7f1448b2e0de071c", "author": {"user": {"login": "boldtrn", "name": "Robin"}}, "url": "https://github.com/graphhopper/graphhopper/commit/b9b71a0bcdf4524d7c3a5c6d7f1448b2e0de071c", "committedDate": "2020-02-04T16:10:12Z", "message": "Rename nrOf to get following default Java naming."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d58ced31f51321c251adc3239853bb8ba188efbb", "author": {"user": {"login": "boldtrn", "name": "Robin"}}, "url": "https://github.com/graphhopper/graphhopper/commit/d58ced31f51321c251adc3239853bb8ba188efbb", "committedDate": "2020-02-04T16:11:20Z", "message": "Merge branch 'master' into add_turns_when_leaving_the_road"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4709, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}