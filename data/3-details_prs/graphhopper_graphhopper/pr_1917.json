{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MTY0NDM1", "number": 1917, "title": "Fix problems with block_area", "bodyText": "This PR fixes #1324.\nThere were a couple of bugs with the block_area feature that are fixed within this PR:\n\nvirtual edges are handled now, see #1127\nbread first search is replaced with locationIndex lookup, which avoids several problems documented in #1324\nedgeId cache is properly used (return early!), which should lead to a speed up\nmultiple block areas are properly used\nfixes #1905", "createdAt": "2020-02-17T14:24:27Z", "url": "https://github.com/graphhopper/graphhopper/pull/1917", "merged": true, "mergeCommit": {"oid": "55408cedb40b6eac59d04b21b45095042d538fe7"}, "closed": true, "closedAt": "2020-02-22T17:11:17Z", "author": {"login": "karussell"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcE7YuVgH2gAyMzc2MTY0NDM1OmJhMTliYjkzMTFjY2MyN2UxYzY5MGZhMjU4OGZiOTk4OTE3MGU5ZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGg-CUgH2gAyMzc2MTY0NDM1OmZmOTJhNDhhOGI3YmU1ZWYxNmIzMjViZWNhZDlkNmVlOTRhYTZjODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ba19bb9311ccc27e1c690fa2588fb9989170e9d7", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/ba19bb9311ccc27e1c690fa2588fb9989170e9d7", "committedDate": "2020-02-16T16:33:11Z", "message": "do not use edgeId cache for virtual edges, #1127"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "853661d907df102ecebcdad2709b3f577c775c00", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/853661d907df102ecebcdad2709b3f577c775c00", "committedDate": "2020-02-17T14:07:50Z", "message": "replaced BFS with locationIndex query; speed up: return immediately if edgeIds are known; proper cached edgeId handling if multiple shapes, fixes #1324"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NzcxODYy", "url": "https://github.com/graphhopper/graphhopper/pull/1917#pullrequestreview-359771862", "createdAt": "2020-02-17T14:26:04Z", "commit": {"oid": "853661d907df102ecebcdad2709b3f577c775c00"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNDoyNjowNFrOFqmP7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNDoyNjowNFrOFqmP7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIxMTE4MA==", "bodyText": "Here we could think about a more generic solution as this is also required for the CustomWeighting in #1841.", "url": "https://github.com/graphhopper/graphhopper/pull/1917#discussion_r380211180", "createdAt": "2020-02-17T14:26:04Z", "author": {"login": "karussell"}, "path": "core/src/main/java/com/graphhopper/GraphHopper.java", "diffHunk": "@@ -1073,6 +1073,9 @@ else if (ALT_ROUTE.equalsIgnoreCase(algoStr))\n                 return Collections.emptyList();\n \n             QueryGraph queryGraph = QueryGraph.lookup(graph, qResults);\n+            if (weighting instanceof BlockAreaWeighting)\n+                ((BlockAreaWeighting) weighting).setQueryGraph(queryGraph);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "853661d907df102ecebcdad2709b3f577c775c00"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029e59fb651c019495fb4221943a69287c294524", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/029e59fb651c019495fb4221943a69287c294524", "committedDate": "2020-02-17T14:30:13Z", "message": "merged master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff92a48a8b7be5ef16b325becad9d6ee94aa6c82", "author": {"user": {"login": "karussell", "name": "Peter"}}, "url": "https://github.com/graphhopper/graphhopper/commit/ff92a48a8b7be5ef16b325becad9d6ee94aa6c82", "committedDate": "2020-02-21T14:54:21Z", "message": "re-enable block_area for /spt and /isochrone, fixes #1905"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4573, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}