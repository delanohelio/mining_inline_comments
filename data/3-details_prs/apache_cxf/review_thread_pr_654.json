{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxOTM3NDY5", "number": 654, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODoyMzozMVrODsVuCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODoyMzozMVrODsVuCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3ODE5Nzg2OnYy", "diffSide": "RIGHT", "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODoyMzozMVrOF9LWBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMDoxMDo0MVrOF9NS7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzMxNg==", "bodyText": "Is it possible for the tests to inherit from the ClientCallbackTest?  There might be subtle differences that I'm missing, but it might be nice to consolidate a lot of this test code in the base test class and then have the other tests (Jaxws, Jaxrs, MP, etc.) just offer their own sub-class instance of the callback.", "url": "https://github.com/apache/cxf/pull/654#discussion_r399693316", "createdAt": "2020-03-28T18:23:31Z", "author": {"login": "andymc12"}, "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "diffHunk": "@@ -0,0 +1,162 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.message.MessageImpl;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.Assert.assertThrows;\n+\n+public class JaxwsClientCallbackTest {\n+    private Map<String, Object> ctx;\n+    private JaxwsClientCallback<String> callback;\n+    private AsyncHandler<String> handler;\n+    private ScheduledExecutorService executor;\n+    \n+    @Before\n+    public void setUp() {\n+        executor = Executors.newSingleThreadScheduledExecutor();\n+        handler = new AsyncHandler<String>() {\n+            @Override\n+            public void handleResponse(Response<String> res) {\n+            }\n+        };\n+        \n+        callback = new JaxwsClientCallback<String>(handler, null);\n+        ctx = new HashMap<String, Object>();\n+    }\n+    \n+    @After\n+    public void tearDown() throws Exception {\n+        executor.shutdown();\n+        executor.awaitTermination(5, TimeUnit.SECONDS);\n+    }\n+    \n+    @Test\n+    public void testHandleResponseCallback() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f8bde23d871977d26eb28a14bec75a62045e827"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5ODA2OQ==", "bodyText": "Thanks @andymc12, makes perfect sense, I will consolidate them in order to reduce the duplication of test code.", "url": "https://github.com/apache/cxf/pull/654#discussion_r399698069", "createdAt": "2020-03-28T19:10:23Z", "author": {"login": "reta"}, "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "diffHunk": "@@ -0,0 +1,162 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.message.MessageImpl;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.Assert.assertThrows;\n+\n+public class JaxwsClientCallbackTest {\n+    private Map<String, Object> ctx;\n+    private JaxwsClientCallback<String> callback;\n+    private AsyncHandler<String> handler;\n+    private ScheduledExecutorService executor;\n+    \n+    @Before\n+    public void setUp() {\n+        executor = Executors.newSingleThreadScheduledExecutor();\n+        handler = new AsyncHandler<String>() {\n+            @Override\n+            public void handleResponse(Response<String> res) {\n+            }\n+        };\n+        \n+        callback = new JaxwsClientCallback<String>(handler, null);\n+        ctx = new HashMap<String, Object>();\n+    }\n+    \n+    @After\n+    public void tearDown() throws Exception {\n+        executor.shutdown();\n+        executor.awaitTermination(5, TimeUnit.SECONDS);\n+    }\n+    \n+    @Test\n+    public void testHandleResponseCallback() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzMxNg=="}, "originalCommit": {"oid": "2f8bde23d871977d26eb28a14bec75a62045e827"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwMTY2MA==", "bodyText": "Hm ... turned out to be more complicated than I thought. This is a test code and each callback is in different module (cfx-core, cxf-rt-client, cxf-mp-client, cxf-jaxws-frontend). I could move all of them the systests but the tests really belong to the its module (where callbacks live).", "url": "https://github.com/apache/cxf/pull/654#discussion_r399701660", "createdAt": "2020-03-28T19:45:52Z", "author": {"login": "reta"}, "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "diffHunk": "@@ -0,0 +1,162 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.message.MessageImpl;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.Assert.assertThrows;\n+\n+public class JaxwsClientCallbackTest {\n+    private Map<String, Object> ctx;\n+    private JaxwsClientCallback<String> callback;\n+    private AsyncHandler<String> handler;\n+    private ScheduledExecutorService executor;\n+    \n+    @Before\n+    public void setUp() {\n+        executor = Executors.newSingleThreadScheduledExecutor();\n+        handler = new AsyncHandler<String>() {\n+            @Override\n+            public void handleResponse(Response<String> res) {\n+            }\n+        };\n+        \n+        callback = new JaxwsClientCallback<String>(handler, null);\n+        ctx = new HashMap<String, Object>();\n+    }\n+    \n+    @After\n+    public void tearDown() throws Exception {\n+        executor.shutdown();\n+        executor.awaitTermination(5, TimeUnit.SECONDS);\n+    }\n+    \n+    @Test\n+    public void testHandleResponseCallback() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzMxNg=="}, "originalCommit": {"oid": "2f8bde23d871977d26eb28a14bec75a62045e827"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcxNzEyNw==", "bodyText": "No worries. I wondered if that would be an issue.  And I agree with you that the right place for these tests is in the module with the runtime code that they test.  Thanks for putting this together!", "url": "https://github.com/apache/cxf/pull/654#discussion_r399717127", "createdAt": "2020-03-28T22:28:13Z", "author": {"login": "andymc12"}, "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "diffHunk": "@@ -0,0 +1,162 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.message.MessageImpl;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.Assert.assertThrows;\n+\n+public class JaxwsClientCallbackTest {\n+    private Map<String, Object> ctx;\n+    private JaxwsClientCallback<String> callback;\n+    private AsyncHandler<String> handler;\n+    private ScheduledExecutorService executor;\n+    \n+    @Before\n+    public void setUp() {\n+        executor = Executors.newSingleThreadScheduledExecutor();\n+        handler = new AsyncHandler<String>() {\n+            @Override\n+            public void handleResponse(Response<String> res) {\n+            }\n+        };\n+        \n+        callback = new JaxwsClientCallback<String>(handler, null);\n+        ctx = new HashMap<String, Object>();\n+    }\n+    \n+    @After\n+    public void tearDown() throws Exception {\n+        executor.shutdown();\n+        executor.awaitTermination(5, TimeUnit.SECONDS);\n+    }\n+    \n+    @Test\n+    public void testHandleResponseCallback() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzMxNg=="}, "originalCommit": {"oid": "2f8bde23d871977d26eb28a14bec75a62045e827"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyNTI5Mg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/apache/cxf/pull/654#discussion_r399725292", "createdAt": "2020-03-29T00:10:41Z", "author": {"login": "reta"}, "path": "rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxwsClientCallbackTest.java", "diffHunk": "@@ -0,0 +1,162 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.concurrent.CyclicBarrier;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.message.MessageImpl;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.Assert.assertThrows;\n+\n+public class JaxwsClientCallbackTest {\n+    private Map<String, Object> ctx;\n+    private JaxwsClientCallback<String> callback;\n+    private AsyncHandler<String> handler;\n+    private ScheduledExecutorService executor;\n+    \n+    @Before\n+    public void setUp() {\n+        executor = Executors.newSingleThreadScheduledExecutor();\n+        handler = new AsyncHandler<String>() {\n+            @Override\n+            public void handleResponse(Response<String> res) {\n+            }\n+        };\n+        \n+        callback = new JaxwsClientCallback<String>(handler, null);\n+        ctx = new HashMap<String, Object>();\n+    }\n+    \n+    @After\n+    public void tearDown() throws Exception {\n+        executor.shutdown();\n+        executor.awaitTermination(5, TimeUnit.SECONDS);\n+    }\n+    \n+    @Test\n+    public void testHandleResponseCallback() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzMxNg=="}, "originalCommit": {"oid": "2f8bde23d871977d26eb28a14bec75a62045e827"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3696, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}