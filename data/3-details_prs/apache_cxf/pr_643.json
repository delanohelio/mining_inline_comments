{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NzgxMDQ4", "number": 643, "title": "CXF-8215: SSE breaks Pipeline Processing", "bodyText": "The JAX-RS Specification 2.1 contains the chapter 9 for \"Server-Sent Events\", specifically section 9.5 \"Pipeline Processing\" states:\n\nFor compatibility purposes, implementations MUST initiate processing of an SSE response when either the first message is sent or when the resource method returns, whichever happens first. The initial SSE response, which may only include the HTTP headers, is processed using the standard JAX-RS pipeline as described in Appendix C. Each subsequent SSE event may include a different payload and thus require the use of a specific message body writer. Note that since this use case differs slightly from the normal JAX-RS pipeline, implementations SHOULD NOT call entity interceptors on each individual event (1).\n\nIn case of CXF SSE processing, the JAXRSOutInterceptor is not called and as such, the container response processing filters are also ignored.", "createdAt": "2020-02-24T01:49:49Z", "url": "https://github.com/apache/cxf/pull/643", "merged": true, "mergeCommit": {"oid": "c4aefe5fec2c94354517f49a55cf0d6efdb98545"}, "closed": true, "closedAt": "2020-02-29T03:18:18Z", "author": {"login": "reta"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHsheGAFqTM2MzkwNTA4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcI6irhgBqjMwODQwNjA2MTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzOTA1MDg4", "url": "https://github.com/apache/cxf/pull/643#pullrequestreview-363905088", "createdAt": "2020-02-25T06:54:45Z", "commit": {"oid": "23132e250667d86bf5949e69055d499967ded9c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNjo1NDo0NVrOFt6eoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNjo1NDo0NVrOFt6eoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY4ODM1Mw==", "bodyText": "Is this put and the above check if get is equal to null responsible that it is not called twice?", "url": "https://github.com/apache/cxf/pull/643#discussion_r383688353", "createdAt": "2020-02-25T06:54:45Z", "author": {"login": "maggu2810"}, "path": "rt/rs/sse/src/main/java/org/apache/cxf/jaxrs/sse/interceptor/SseInterceptor.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxrs.sse.interceptor;\n+\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+import javax.ws.rs.core.Response;\n+\n+import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.jaxrs.impl.ResponseImpl;\n+import org.apache.cxf.jaxrs.model.OperationResourceInfo;\n+import org.apache.cxf.jaxrs.provider.ServerProviderFactory;\n+import org.apache.cxf.jaxrs.utils.JAXRSUtils;\n+import org.apache.cxf.message.Exchange;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.phase.AbstractPhaseInterceptor;\n+import org.apache.cxf.phase.Phase;\n+\n+public class SseInterceptor extends AbstractPhaseInterceptor<Message> {\n+    private static final Logger LOG = LogUtils.getL7dLogger(SseInterceptor.class);\n+    \n+    public SseInterceptor() {\n+        super(Phase.POST_LOGICAL);\n+    }\n+    public SseInterceptor(String phase) {\n+        super(phase);\n+    }\n+\n+    public void handleMessage(Message message) {\n+        if (!isRequestor(message) && message.get(SseInterceptor.class) == null) {\n+            message.put(SseInterceptor.class, this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23132e250667d86bf5949e69055d499967ded9c2"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dae37a5a06c866293a9d1781f003605c87db38fe", "author": {"user": {"login": "reta", "name": "Andriy Redko"}}, "url": "https://github.com/apache/cxf/commit/dae37a5a06c866293a9d1781f003605c87db38fe", "committedDate": "2020-02-29T01:48:50Z", "message": "CXF-8215: SSE breaks Pipeline Processing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "23132e250667d86bf5949e69055d499967ded9c2", "author": {"user": {"login": "reta", "name": "Andriy Redko"}}, "url": "https://github.com/apache/cxf/commit/23132e250667d86bf5949e69055d499967ded9c2", "committedDate": "2020-02-24T01:45:09Z", "message": "CXF-8215: SSE breaks Pipeline Processing"}, "afterCommit": {"oid": "dae37a5a06c866293a9d1781f003605c87db38fe", "author": {"user": {"login": "reta", "name": "Andriy Redko"}}, "url": "https://github.com/apache/cxf/commit/dae37a5a06c866293a9d1781f003605c87db38fe", "committedDate": "2020-02-29T01:48:50Z", "message": "CXF-8215: SSE breaks Pipeline Processing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2201, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}