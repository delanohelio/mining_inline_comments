{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MzA0OTM0", "number": 656, "title": "Consolidate getTargetMethod calls", "bodyText": "I was looking at getting the target method in a new interceptor and realized that there are a few different places in the code that is essentially doing the same thing.  So I thought it would be better for maintenance to consolidate that function in one place.\nFeedback appreciated.  If nobody objects, I'd like to back port this to 3.3.x too.\nThanks!", "createdAt": "2020-03-26T17:14:35Z", "url": "https://github.com/apache/cxf/pull/656", "merged": true, "mergeCommit": {"oid": "0a62ccf4d93a04e5c495b27e744aebe0a74980f4"}, "closed": true, "closedAt": "2020-03-28T14:04:04Z", "author": {"login": "andymc12"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRgyrvgH2gAyMzk0MzA0OTM0OjhiMTFkNmIyNjM2OTY1MGU1ZjRjNmYzNzMwZGJiOTdkNjA5MjdkOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcR8O5NAFqTM4MzI3NzAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8b11d6b26369650e5f4c6f3730dbb97d60927d9b", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/apache/cxf/commit/8b11d6b26369650e5f4c6f3730dbb97d60927d9b", "committedDate": "2020-03-26T18:55:07Z", "message": "Consolidate getTargetMethod calls\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a371883be5f641b99a3998bfe6017d0a564c1d4e", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/apache/cxf/commit/a371883be5f641b99a3998bfe6017d0a564c1d4e", "committedDate": "2020-03-26T17:11:30Z", "message": "Consolidate getTargetMethod calls\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>"}, "afterCommit": {"oid": "8b11d6b26369650e5f4c6f3730dbb97d60927d9b", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/apache/cxf/commit/8b11d6b26369650e5f4c6f3730dbb97d60927d9b", "committedDate": "2020-03-26T18:55:07Z", "message": "Consolidate getTargetMethod calls\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDk3Nzg2", "url": "https://github.com/apache/cxf/pull/656#pullrequestreview-382497786", "createdAt": "2020-03-26T23:54:33Z", "commit": {"oid": "8b11d6b26369650e5f4c6f3730dbb97d60927d9b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NDozM1rOF8ek7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NDozM1rOF8ek7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1OTg1Mg==", "bodyText": "Minor, may be introducing the overloaded method MessageUtils.getTargetMethod(inMessage) (which calls the original one with null supplier) would be a bit more cleaner, no need to guess what second argument is. Alternatively, could be Optional<Method> so the caller can raise exceptions or get along with null. What do you think?", "url": "https://github.com/apache/cxf/pull/656#discussion_r398959852", "createdAt": "2020-03-26T23:54:33Z", "author": {"login": "reta"}, "path": "core/src/main/java/org/apache/cxf/validation/AbstractValidationInterceptor.java", "diffHunk": "@@ -108,15 +107,7 @@ protected Method getServiceMethod(Message message) {\n         Message inMessage = message.getExchange().getInMessage();\n         Method method = null;\n         if (inMessage != null) {\n-            method = (Method)inMessage.get(\"org.apache.cxf.resource.method\");\n-            if (method == null) {\n-                BindingOperationInfo bop = inMessage.getExchange().getBindingOperationInfo();\n-                if (bop != null) {\n-                    MethodDispatcher md = (MethodDispatcher)\n-                        inMessage.getExchange().getService().get(MethodDispatcher.class.getName());\n-                    method = md.getMethod(bop);\n-                }\n-            }\n+            method = MessageUtils.getTargetMethod(inMessage, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b11d6b26369650e5f4c6f3730dbb97d60927d9b"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNjIzMzg0", "url": "https://github.com/apache/cxf/pull/656#pullrequestreview-382623384", "createdAt": "2020-03-27T07:17:00Z", "commit": {"oid": "8b11d6b26369650e5f4c6f3730dbb97d60927d9b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aa6e0a402b8ce7dfff8a931a507b884d7152cea", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/apache/cxf/commit/7aa6e0a402b8ce7dfff8a931a507b884d7152cea", "committedDate": "2020-03-27T15:05:10Z", "message": "Code review comments - use Optional<Method>\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjc3MDE5", "url": "https://github.com/apache/cxf/pull/656#pullrequestreview-383277019", "createdAt": "2020-03-28T02:53:22Z", "commit": {"oid": "7aa6e0a402b8ce7dfff8a931a507b884d7152cea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2227, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}