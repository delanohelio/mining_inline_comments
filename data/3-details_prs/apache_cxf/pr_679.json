{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNTkwMDk0", "number": 679, "title": "CXF-8300 - Swagger2Feature displays cached API when service is redepl\u2026", "bodyText": "\u2026oyed\nThe idea behind the fix is to update the Swagger2Feature.ServletConfigProvider to return a random UUID for SwaggerContextService.CONFIG_ID_KEY. In Swaggers BaseApiListingResource, it will return the cached Swagger API if the initializedConfig map already contains this Id:\nif (SwaggerContextService.isConfigIdInitParamDefined(sc)) { if (!initializedConfig.containsKey(sc.getServletName() + \"_\" + SwaggerContextService.getConfigIdFromInitParam(sc))) { swagger = scan(app, servletContext, sc, uriInfo); } } \nWhen the service is redeployed, the ServletConfigProvider will be added with a different random Id, which will force a reload of the Swagger document in BaseApiListingResource.", "createdAt": "2020-06-09T07:26:04Z", "url": "https://github.com/apache/cxf/pull/679", "merged": true, "mergeCommit": {"oid": "ee9a519fc027560fb8fdad95fefb3077bd9c9e2a"}, "closed": true, "closedAt": "2020-06-10T08:54:50Z", "author": {"login": "coheigea"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpf1RIgH2gAyNDMxNTkwMDk0OjJkMzBlYjkyYWJmZWEyN2I1OTRkNWMxYjI4NjQzMGY4ZDZkMDQ5ZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpqnf8AFqTQyNzQ5MzUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d30eb92abfea27b594d5c1b286430f8d6d049d4", "author": {"user": {"login": "coheigea", "name": "Colm O hEigeartaigh"}}, "url": "https://github.com/apache/cxf/commit/2d30eb92abfea27b594d5c1b286430f8d6d049d4", "committedDate": "2020-06-09T07:22:13Z", "message": "CXF-8300 - Swagger2Feature displays cached API when service is redeployed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NDkzNDU5", "url": "https://github.com/apache/cxf/pull/679#pullrequestreview-427493459", "createdAt": "2020-06-09T19:56:01Z", "commit": {"oid": "2d30eb92abfea27b594d5c1b286430f8d6d049d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxOTo1NjowMVrOGhZ9SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxOTo1NjowMVrOGhZ9SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY4MTQ4MA==", "bodyText": "\ud83d\udc4d We use similar technique in OpenAPI feature as well", "url": "https://github.com/apache/cxf/pull/679#discussion_r437681480", "createdAt": "2020-06-09T19:56:01Z", "author": {"login": "reta"}, "path": "rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java", "diffHunk": "@@ -576,6 +577,8 @@ public String findSwaggerUiRoot() {\n \n         private class ServletConfigProvider implements ContextProvider<ServletConfig> {\n \n+            private String id = UUID.randomUUID().toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d30eb92abfea27b594d5c1b286430f8d6d049d4"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NDkzNTM5", "url": "https://github.com/apache/cxf/pull/679#pullrequestreview-427493539", "createdAt": "2020-06-09T19:56:08Z", "commit": {"oid": "2d30eb92abfea27b594d5c1b286430f8d6d049d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2096, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}