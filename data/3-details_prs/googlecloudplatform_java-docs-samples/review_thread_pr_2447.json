{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMjM2MTQz", "number": 2447, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMzozNlrODprqUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNDoxMFrODprrAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDMzNTU0OnYy", "diffSide": "RIGHT", "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMzozNlrOF5A5HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMzozNlrOF5A5HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyNzc3Mg==", "bodyText": "Fine if it works, but I'd bet these things can't happen right after the other.  (some hysteresis).\n(and it would be a flaky test again)", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2447#discussion_r395327772", "createdAt": "2020-03-19T21:23:36Z", "author": {"login": "lesv"}, "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "diffHunk": "@@ -103,8 +105,13 @@ public void testInspectGcsFile() throws InterruptedException, ExecutionException\n     InspectGcsFile.inspectGcsFile(PROJECT_ID, GCS_PATH, TOPIC_ID, SUBSCRIPTION_ID);\n \n     String output = bout.toString();\n-    assertThat(output, containsString(\"Info type: PHONE_NUMBER\"));\n-    assertThat(output, containsString(\"Info type: EMAIL_ADDRESS\"));\n+    assertThat(output, containsString(\"Job created: \"));\n+\n+    String jobId = output.split(\"Job created: \")[1].split(\"\\n\")[0];\n+    CancelDlpJobRequest request = CancelDlpJobRequest.newBuilder().setName(jobId).build();\n+    try (DlpServiceClient client = DlpServiceClient.create()) {\n+      client.cancelDlpJob(request);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1846b0eb54fbef3a4d3339f799fb2b13f26ec62"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDMzNjUyOnYy", "diffSide": "RIGHT", "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMzo1NFrOF5A5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMzo1NFrOF5A5sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyNzkyMw==", "bodyText": "Fine if it works, but I'd bet these things can't happen right after the other.  (some hysteresis).\n(and it would be a flaky test again)", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2447#discussion_r395327923", "createdAt": "2020-03-19T21:23:54Z", "author": {"login": "lesv"}, "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "diffHunk": "@@ -114,8 +121,13 @@ public void testInspectDatastoreEntity()\n         PROJECT_ID, datastoreNamespace, datastoreKind, TOPIC_ID, SUBSCRIPTION_ID);\n \n     String output = bout.toString();\n-    assertThat(output, containsString(\"Info type: PHONE_NUMBER\"));\n-    assertThat(output, containsString(\"Info type: EMAIL_ADDRESS\"));\n+    assertThat(output, containsString(\"Job created: \"));\n+\n+    String jobId = output.split(\"Job created: \")[1].split(\"\\n\")[0];\n+    CancelDlpJobRequest request = CancelDlpJobRequest.newBuilder().setName(jobId).build();\n+    try (DlpServiceClient client = DlpServiceClient.create()) {\n+      client.cancelDlpJob(request);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1846b0eb54fbef3a4d3339f799fb2b13f26ec62"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDMzNzI4OnYy", "diffSide": "RIGHT", "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNDoxMFrOF5A6Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNDoxMFrOF5A6Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODA0Mw==", "bodyText": "Fine if it works, but I'd bet these things can't happen right after the other.  (some hysteresis).\n(and it would be a flaky test again)", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2447#discussion_r395328043", "createdAt": "2020-03-19T21:24:10Z", "author": {"login": "lesv"}, "path": "dlp/src/test/java/dlp/snippets/InspectTests.java", "diffHunk": "@@ -125,6 +137,12 @@ public void testInspectBigQueryTable()\n         PROJECT_ID, DATASET_ID, TABLE_ID, TOPIC_ID, SUBSCRIPTION_ID);\n \n     String output = bout.toString();\n-    assertThat(output, containsString(\"Info type: PHONE_NUMBER\"));\n+    assertThat(output, containsString(\"Job created: \"));\n+\n+    String jobId = output.split(\"Job created: \")[1].split(\"\\n\")[0];\n+    CancelDlpJobRequest request = CancelDlpJobRequest.newBuilder().setName(jobId).build();\n+    try (DlpServiceClient client = DlpServiceClient.create()) {\n+      client.cancelDlpJob(request);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1846b0eb54fbef3a4d3339f799fb2b13f26ec62"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1009, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}