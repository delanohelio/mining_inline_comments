{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0Mzc5NDM3", "number": 2852, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyMDoyM1rOD6Ct0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyMDoyM1rOD6Ct0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMTg4NDk5OnYy", "diffSide": "RIGHT", "path": "iot/api-client/manager/src/test/java/com/example/cloud/iot/examples/ManagerIT.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDoyMDoyM1rOGRp9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTozMjo1MFrOGRrPvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2NjQxMw==", "bodyText": "What if we run two of these at once?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2852#discussion_r421166413", "createdAt": "2020-05-07T00:20:23Z", "author": {"login": "lesv"}, "path": "iot/api-client/manager/src/test/java/com/example/cloud/iot/examples/ManagerIT.java", "diffHunk": "@@ -115,6 +115,16 @@ public void clearTestRegistries() throws Exception {\n             DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, registryId);\n           }\n         }\n+        // Also remove the current test registry\n+        try {\n+          DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, REGISTRY_ID);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "768251704027e7ddfec0cf7a27af45b202271f7b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NjQ5OA==", "bodyText": "They should have different registry IDs, this is more to protect against a failure in a previous test having a resource conflict in all subsequent tests.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2852#discussion_r421186498", "createdAt": "2020-05-07T01:29:21Z", "author": {"login": "gguuss"}, "path": "iot/api-client/manager/src/test/java/com/example/cloud/iot/examples/ManagerIT.java", "diffHunk": "@@ -115,6 +115,16 @@ public void clearTestRegistries() throws Exception {\n             DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, registryId);\n           }\n         }\n+        // Also remove the current test registry\n+        try {\n+          DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, REGISTRY_ID);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2NjQxMw=="}, "originalCommit": {"oid": "768251704027e7ddfec0cf7a27af45b202271f7b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NzUxNw==", "bodyText": "It may make sense to use part of a UUID4 in the registry name though to help prevent that but for now the name is calculated as:\nprivate static final String REGISTRY_ID = \"java-reg-\" + (System.currentTimeMillis() / 100L);\nSo that stale registries can be pruned in this step without deleting registries currently being tested while preventing stale registries from reaching the 100 registries per project limit.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2852#discussion_r421187517", "createdAt": "2020-05-07T01:32:50Z", "author": {"login": "gguuss"}, "path": "iot/api-client/manager/src/test/java/com/example/cloud/iot/examples/ManagerIT.java", "diffHunk": "@@ -115,6 +115,16 @@ public void clearTestRegistries() throws Exception {\n             DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, registryId);\n           }\n         }\n+        // Also remove the current test registry\n+        try {\n+          DeviceRegistryExample.clearRegistry(CLOUD_REGION, PROJECT_ID, REGISTRY_ID);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2NjQxMw=="}, "originalCommit": {"oid": "768251704027e7ddfec0cf7a27af45b202271f7b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 676, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}