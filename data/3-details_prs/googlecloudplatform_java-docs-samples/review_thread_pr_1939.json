{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMDk2MjUx", "number": 1939, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyMzowNlrODX8bvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyNDowN1rODX8dCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDMzOTgyOnYy", "diffSide": "RIGHT", "path": "translate/cloud-client/src/main/java/com/example/translate/BatchTranslateTextWithModel.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyMzowNlrOFdhSXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyMzowNlrOFdhSXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5ODM5OA==", "bodyText": "nit: I think some comments for on each section might add value. Something like // Configure the source of the file from a GCS bucket, // Configure the output file in a GCS bucket, etc.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/1939#discussion_r366498398", "createdAt": "2020-01-14T18:23:06Z", "author": {"login": "kurtisvg"}, "path": "translate/cloud-client/src/main/java/com/example/translate/BatchTranslateTextWithModel.java", "diffHunk": "@@ -0,0 +1,104 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.translate;\n+\n+// [START translate_v3_batch_translate_text_with_model]\n+import com.google.api.gax.longrunning.OperationFuture;\n+import com.google.cloud.translate.v3.BatchTranslateMetadata;\n+import com.google.cloud.translate.v3.BatchTranslateResponse;\n+import com.google.cloud.translate.v3.BatchTranslateTextRequest;\n+import com.google.cloud.translate.v3.GcsDestination;\n+import com.google.cloud.translate.v3.GcsSource;\n+import com.google.cloud.translate.v3.InputConfig;\n+import com.google.cloud.translate.v3.LocationName;\n+import com.google.cloud.translate.v3.OutputConfig;\n+import com.google.cloud.translate.v3.TranslationServiceClient;\n+\n+import java.io.IOException;\n+import java.util.concurrent.ExecutionException;\n+\n+public class BatchTranslateTextWithModel {\n+\n+  public static void batchTranslateTextWithModel()\n+      throws InterruptedException, ExecutionException, IOException {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"YOUR-PROJECT-ID\";\n+    // Supported Languages: https://cloud.google.com/translate/docs/languages\n+    String sourceLanguage = \"your-source-language\";\n+    String targetLanguage = \"your-target-language\";\n+    String inputUri = \"gs://your-gcs-bucket/path/to/input/file.txt\";\n+    String outputUri = \"gs://your-gcs-bucket/path/to/results/\";\n+    String modelId = \"YOUR-MODEL-ID\";\n+    batchTranslateTextWithModel(\n+        projectId, sourceLanguage, targetLanguage, inputUri, outputUri, modelId);\n+  }\n+\n+  // Batch translate text using AutoML Translation model\n+  public static void batchTranslateTextWithModel(\n+      String projectId,\n+      String sourceLanguage,\n+      String targetLanguage,\n+      String inputUri,\n+      String outputUri,\n+      String modelId)\n+      throws IOException, ExecutionException, InterruptedException {\n+\n+    // Initialize client that will be used to send requests. This client only needs to be created\n+    // once, and can be reused for multiple requests. After completing all of your requests, call\n+    // the \"close\" method on the client to safely clean up any remaining background resources.\n+    try (TranslationServiceClient client = TranslationServiceClient.create()) {\n+      // Supported Locations: `global`, [glossary location], or [model location]\n+      // Glossaries must be hosted in `us-central1`\n+      // Custom Models must use the same location as your model. (us-central1)\n+      String location = \"us-central1\";\n+      LocationName parent = LocationName.of(projectId, location);\n+\n+      GcsSource gcsSource = GcsSource.newBuilder().setInputUri(inputUri).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2031bc4129bf48103bbfae79bc009278341b6bc"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDM0MzEyOnYy", "diffSide": "RIGHT", "path": "translate/cloud-client/src/main/java/com/example/translate/BatchTranslateTextWithModel.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyNDowN1rOFdhUeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyNDowN1rOFdhUeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5ODkzOA==", "bodyText": "nit: A comment here clarifying that this will send the request to the server to start the job asynchronously would also be useful.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/1939#discussion_r366498938", "createdAt": "2020-01-14T18:24:07Z", "author": {"login": "kurtisvg"}, "path": "translate/cloud-client/src/main/java/com/example/translate/BatchTranslateTextWithModel.java", "diffHunk": "@@ -0,0 +1,104 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.translate;\n+\n+// [START translate_v3_batch_translate_text_with_model]\n+import com.google.api.gax.longrunning.OperationFuture;\n+import com.google.cloud.translate.v3.BatchTranslateMetadata;\n+import com.google.cloud.translate.v3.BatchTranslateResponse;\n+import com.google.cloud.translate.v3.BatchTranslateTextRequest;\n+import com.google.cloud.translate.v3.GcsDestination;\n+import com.google.cloud.translate.v3.GcsSource;\n+import com.google.cloud.translate.v3.InputConfig;\n+import com.google.cloud.translate.v3.LocationName;\n+import com.google.cloud.translate.v3.OutputConfig;\n+import com.google.cloud.translate.v3.TranslationServiceClient;\n+\n+import java.io.IOException;\n+import java.util.concurrent.ExecutionException;\n+\n+public class BatchTranslateTextWithModel {\n+\n+  public static void batchTranslateTextWithModel()\n+      throws InterruptedException, ExecutionException, IOException {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"YOUR-PROJECT-ID\";\n+    // Supported Languages: https://cloud.google.com/translate/docs/languages\n+    String sourceLanguage = \"your-source-language\";\n+    String targetLanguage = \"your-target-language\";\n+    String inputUri = \"gs://your-gcs-bucket/path/to/input/file.txt\";\n+    String outputUri = \"gs://your-gcs-bucket/path/to/results/\";\n+    String modelId = \"YOUR-MODEL-ID\";\n+    batchTranslateTextWithModel(\n+        projectId, sourceLanguage, targetLanguage, inputUri, outputUri, modelId);\n+  }\n+\n+  // Batch translate text using AutoML Translation model\n+  public static void batchTranslateTextWithModel(\n+      String projectId,\n+      String sourceLanguage,\n+      String targetLanguage,\n+      String inputUri,\n+      String outputUri,\n+      String modelId)\n+      throws IOException, ExecutionException, InterruptedException {\n+\n+    // Initialize client that will be used to send requests. This client only needs to be created\n+    // once, and can be reused for multiple requests. After completing all of your requests, call\n+    // the \"close\" method on the client to safely clean up any remaining background resources.\n+    try (TranslationServiceClient client = TranslationServiceClient.create()) {\n+      // Supported Locations: `global`, [glossary location], or [model location]\n+      // Glossaries must be hosted in `us-central1`\n+      // Custom Models must use the same location as your model. (us-central1)\n+      String location = \"us-central1\";\n+      LocationName parent = LocationName.of(projectId, location);\n+\n+      GcsSource gcsSource = GcsSource.newBuilder().setInputUri(inputUri).build();\n+      // Supported Mime Types: https://cloud.google.com/translate/docs/supported-formats\n+      InputConfig inputConfig =\n+          InputConfig.newBuilder().setGcsSource(gcsSource).setMimeType(\"text/plain\").build();\n+\n+      GcsDestination gcsDestination =\n+          GcsDestination.newBuilder().setOutputUriPrefix(outputUri).build();\n+      OutputConfig outputConfig =\n+          OutputConfig.newBuilder().setGcsDestination(gcsDestination).build();\n+\n+      String modelPath =\n+          String.format(\"projects/%s/locations/%s/models/%s\", projectId, location, modelId);\n+\n+      BatchTranslateTextRequest request =\n+          BatchTranslateTextRequest.newBuilder()\n+              .setParent(parent.toString())\n+              .setSourceLanguageCode(sourceLanguage)\n+              .addTargetLanguageCodes(targetLanguage)\n+              .addInputConfigs(inputConfig)\n+              .setOutputConfig(outputConfig)\n+              .putModels(targetLanguage, modelPath)\n+              .build();\n+\n+      OperationFuture<BatchTranslateResponse, BatchTranslateMetadata> future =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2031bc4129bf48103bbfae79bc009278341b6bc"}, "originalPosition": 93}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 606, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}