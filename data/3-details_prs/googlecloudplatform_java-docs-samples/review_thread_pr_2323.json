{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MzI2MjU1", "number": 2323, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNDowNDowNFrODoF09g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNDowNDo1MVrODoF0_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzY1MTEwOnYy", "diffSide": "RIGHT", "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNDowNDowNFrOF2czwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNzo0OToxMVrOF2dckw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzOTQyNA==", "bodyText": "I think here we want to set it to a version that's not the default so changing it to \"1\" would be ideal.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            db, QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())\n          \n          \n            \n                            db, QueryOptions.newBuilder().setOptimizerVersion(\"1\").build())", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2323#discussion_r392639424", "createdAt": "2020-03-15T04:04:04Z", "author": {"login": "skuruppu"}, "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "diffHunk": "@@ -1433,6 +1434,45 @@ static void queryWithTimestampParameter(DatabaseClient dbClient) {\n   }\n   // [END spanner_query_with_timestamp_parameter]\n \n+  // [START spanner_create_client_with_query_options]\n+  static void clientWithQueryOptions(DatabaseId db) {\n+    SpannerOptions options =\n+        SpannerOptions.newBuilder()\n+            .setDefaultQueryOptions(\n+                db, QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e418e698c7010d16a5b03e77fd93ed040520def"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY0OTg3NQ==", "bodyText": "Done.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2323#discussion_r392649875", "createdAt": "2020-03-15T07:49:11Z", "author": {"login": "olavloite"}, "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "diffHunk": "@@ -1433,6 +1434,45 @@ static void queryWithTimestampParameter(DatabaseClient dbClient) {\n   }\n   // [END spanner_query_with_timestamp_parameter]\n \n+  // [START spanner_create_client_with_query_options]\n+  static void clientWithQueryOptions(DatabaseId db) {\n+    SpannerOptions options =\n+        SpannerOptions.newBuilder()\n+            .setDefaultQueryOptions(\n+                db, QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzOTQyNA=="}, "originalCommit": {"oid": "6e418e698c7010d16a5b03e77fd93ed040520def"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzY1MTE2OnYy", "diffSide": "RIGHT", "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNDowNDo1MVrOF2czyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwNzo0OToxOVrOF2dcmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzOTQzNA==", "bodyText": "Same here, I think it's useful to show how to set the version to something other than the default.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                .withQueryOptions(QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())\n          \n          \n            \n                                .withQueryOptions(QueryOptions.newBuilder().setOptimizerVersion(\"1\").build())", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2323#discussion_r392639434", "createdAt": "2020-03-15T04:04:51Z", "author": {"login": "skuruppu"}, "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "diffHunk": "@@ -1433,6 +1434,45 @@ static void queryWithTimestampParameter(DatabaseClient dbClient) {\n   }\n   // [END spanner_query_with_timestamp_parameter]\n \n+  // [START spanner_create_client_with_query_options]\n+  static void clientWithQueryOptions(DatabaseId db) {\n+    SpannerOptions options =\n+        SpannerOptions.newBuilder()\n+            .setDefaultQueryOptions(\n+                db, QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())\n+            .build();\n+    Spanner spanner = options.getService();\n+    DatabaseClient dbClient = spanner.getDatabaseClient(db);\n+    try (ResultSet resultSet =\n+        dbClient\n+            .singleUse()\n+            .executeQuery(Statement.of(\"SELECT SingerId, AlbumId, AlbumTitle FROM Albums\"))) {\n+      while (resultSet.next()) {\n+        System.out.printf(\n+            \"%d %d %s\\n\", resultSet.getLong(0), resultSet.getLong(1), resultSet.getString(2));\n+      }\n+    }\n+  }\n+  // [END spanner_create_client_with_query_options]\n+\n+  // [START spanner_query_with_query_options]\n+  static void queryWithQueryOptions(DatabaseClient dbClient) {\n+    try (ResultSet resultSet =\n+        dbClient\n+            .singleUse()\n+            .executeQuery(\n+                Statement\n+                    .newBuilder(\"SELECT SingerId, AlbumId, AlbumTitle FROM Albums\")\n+                    .withQueryOptions(QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e418e698c7010d16a5b03e77fd93ed040520def"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY0OTg4MQ==", "bodyText": "Done.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2323#discussion_r392649881", "createdAt": "2020-03-15T07:49:19Z", "author": {"login": "olavloite"}, "path": "spanner/cloud-client/src/main/java/com/example/spanner/SpannerSample.java", "diffHunk": "@@ -1433,6 +1434,45 @@ static void queryWithTimestampParameter(DatabaseClient dbClient) {\n   }\n   // [END spanner_query_with_timestamp_parameter]\n \n+  // [START spanner_create_client_with_query_options]\n+  static void clientWithQueryOptions(DatabaseId db) {\n+    SpannerOptions options =\n+        SpannerOptions.newBuilder()\n+            .setDefaultQueryOptions(\n+                db, QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())\n+            .build();\n+    Spanner spanner = options.getService();\n+    DatabaseClient dbClient = spanner.getDatabaseClient(db);\n+    try (ResultSet resultSet =\n+        dbClient\n+            .singleUse()\n+            .executeQuery(Statement.of(\"SELECT SingerId, AlbumId, AlbumTitle FROM Albums\"))) {\n+      while (resultSet.next()) {\n+        System.out.printf(\n+            \"%d %d %s\\n\", resultSet.getLong(0), resultSet.getLong(1), resultSet.getString(2));\n+      }\n+    }\n+  }\n+  // [END spanner_create_client_with_query_options]\n+\n+  // [START spanner_query_with_query_options]\n+  static void queryWithQueryOptions(DatabaseClient dbClient) {\n+    try (ResultSet resultSet =\n+        dbClient\n+            .singleUse()\n+            .executeQuery(\n+                Statement\n+                    .newBuilder(\"SELECT SingerId, AlbumId, AlbumTitle FROM Albums\")\n+                    .withQueryOptions(QueryOptions.newBuilder().setOptimizerVersion(\"latest\").build())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzOTQzNA=="}, "originalCommit": {"oid": "6e418e698c7010d16a5b03e77fd93ed040520def"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1026, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}