{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MjYxODA5", "number": 2200, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0MDozMlrODizoNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Njo0NFrODizw5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI0MDUzOnYy", "diffSide": "RIGHT", "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0MDozMlrOFuQnQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo1MTo0MFrOFuQ_3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MTAwOA==", "bodyText": "Imports should be in the snippet tag.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384051008", "createdAt": "2020-02-25T18:40:32Z", "author": {"login": "lesv"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NzMxMQ==", "bodyText": "I'm going to break these out into their our files to include imports.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384057311", "createdAt": "2020-02-25T18:51:40Z", "author": {"login": "tdh911"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MTAwOA=="}, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI1MDAwOnYy", "diffSide": "RIGHT", "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0MzoyMFrOFuQs-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0MzoyMFrOFuQs-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MjQ3NQ==", "bodyText": "better to do the concatenate in code directly rather than passing it like this.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384052475", "createdAt": "2020-02-25T18:43:20Z", "author": {"login": "lesv"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;\n+\n+/** Snippets for how to work with Notifications in Cloud SCC. */\n+final class NotificationConfigSnippets {\n+  private NotificationConfigSnippets() {}\n+\n+  public static NotificationConfig createNotificationConfig(\n+      String organizationId, String pubsubTopic, String notificationConfigId) throws IOException {\n+\n+    // [START scc_create_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-topic}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI1MTI0OnYy", "diffSide": "RIGHT", "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Mzo0MFrOFuQttQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Mzo0MFrOFuQttQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MjY2MQ==", "bodyText": "Good to tell folks about this.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384052661", "createdAt": "2020-02-25T18:43:40Z", "author": {"login": "lesv"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;\n+\n+/** Snippets for how to work with Notifications in Cloud SCC. */\n+final class NotificationConfigSnippets {\n+  private NotificationConfigSnippets() {}\n+\n+  public static NotificationConfig createNotificationConfig(\n+      String organizationId, String pubsubTopic, String notificationConfigId) throws IOException {\n+\n+    // [START scc_create_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-topic}\";\n+    // Ensure this ServiceAccount has the \"pubsub.topics.setIamPolicy\" permission on the topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI2MDI5OnYy", "diffSide": "RIGHT", "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjowM1rOFuQzFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxOToyNzoyN1rOFuSLMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDAzOA==", "bodyText": "Where do I get this?  does it have a special format?   Should it be unique / what?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384054038", "createdAt": "2020-02-25T18:46:03Z", "author": {"login": "lesv"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;\n+\n+/** Snippets for how to work with Notifications in Cloud SCC. */\n+final class NotificationConfigSnippets {\n+  private NotificationConfigSnippets() {}\n+\n+  public static NotificationConfig createNotificationConfig(\n+      String organizationId, String pubsubTopic, String notificationConfigId) throws IOException {\n+\n+    // [START scc_create_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-topic}\";\n+    // Ensure this ServiceAccount has the \"pubsub.topics.setIamPolicy\" permission on the topic.\n+\n+    String orgName = String.format(\"organizations/%s\", organizationId);\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      CreateNotificationConfigRequest request =\n+          CreateNotificationConfigRequest.newBuilder()\n+              .setParent(orgName)\n+              .setConfigId(notificationConfigId)\n+              .setNotificationConfig(\n+                  NotificationConfig.newBuilder()\n+                      .setDescription(\"Java notification config\")\n+                      .setPubsubTopic(pubsubTopic)\n+                      .setEventType(EventType.FINDING)\n+                      .setStreamingConfig(\n+                          StreamingConfig.newBuilder().setFilter(\"state = \\\"ACTIVE\\\"\").build())\n+                      .build())\n+              .build();\n+\n+      NotificationConfig response = client.createNotificationConfig(request);\n+      System.out.println(String.format(\"Notification config was created: %s\", response));\n+      return response;\n+    }\n+    // [END scc_create_notification_config]\n+  }\n+\n+  public static boolean deleteNotificationConfig(String organizationId, String notificationConfigId)\n+      throws IOException {\n+\n+    // [START scc_delete_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+\n+    NotificationConfigName notificationConfigName =\n+        NotificationConfigName.newBuilder()\n+            .setOrganization(organizationId)\n+            .setNotificationConfig(notificationConfigId)\n+            .build();\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      client.deleteNotificationConfig(notificationConfigName);\n+\n+      System.out.println(String.format(\"Deleted Notification config: %s\", notificationConfigName));\n+    }\n+    // [END scc_delete_notification_config]\n+\n+    return true;\n+  }\n+\n+  public static NotificationConfig getNotificationConfig(\n+      String organizationId, String notificationConfigId) throws IOException {\n+\n+    // [START scc_get_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NjU5NA==", "bodyText": "I adjusted the inline comment to make it clear its user provided and unique.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384076594", "createdAt": "2020-02-25T19:27:27Z", "author": {"login": "tdh911"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;\n+\n+/** Snippets for how to work with Notifications in Cloud SCC. */\n+final class NotificationConfigSnippets {\n+  private NotificationConfigSnippets() {}\n+\n+  public static NotificationConfig createNotificationConfig(\n+      String organizationId, String pubsubTopic, String notificationConfigId) throws IOException {\n+\n+    // [START scc_create_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-topic}\";\n+    // Ensure this ServiceAccount has the \"pubsub.topics.setIamPolicy\" permission on the topic.\n+\n+    String orgName = String.format(\"organizations/%s\", organizationId);\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      CreateNotificationConfigRequest request =\n+          CreateNotificationConfigRequest.newBuilder()\n+              .setParent(orgName)\n+              .setConfigId(notificationConfigId)\n+              .setNotificationConfig(\n+                  NotificationConfig.newBuilder()\n+                      .setDescription(\"Java notification config\")\n+                      .setPubsubTopic(pubsubTopic)\n+                      .setEventType(EventType.FINDING)\n+                      .setStreamingConfig(\n+                          StreamingConfig.newBuilder().setFilter(\"state = \\\"ACTIVE\\\"\").build())\n+                      .build())\n+              .build();\n+\n+      NotificationConfig response = client.createNotificationConfig(request);\n+      System.out.println(String.format(\"Notification config was created: %s\", response));\n+      return response;\n+    }\n+    // [END scc_create_notification_config]\n+  }\n+\n+  public static boolean deleteNotificationConfig(String organizationId, String notificationConfigId)\n+      throws IOException {\n+\n+    // [START scc_delete_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+\n+    NotificationConfigName notificationConfigName =\n+        NotificationConfigName.newBuilder()\n+            .setOrganization(organizationId)\n+            .setNotificationConfig(notificationConfigId)\n+            .build();\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      client.deleteNotificationConfig(notificationConfigName);\n+\n+      System.out.println(String.format(\"Deleted Notification config: %s\", notificationConfigName));\n+    }\n+    // [END scc_delete_notification_config]\n+\n+    return true;\n+  }\n+\n+  public static NotificationConfig getNotificationConfig(\n+      String organizationId, String notificationConfigId) throws IOException {\n+\n+    // [START scc_get_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDAzOA=="}, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI2Mjc4OnYy", "diffSide": "RIGHT", "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Njo0NFrOFuQ0kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Njo0NFrOFuQ0kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDQxNw==", "bodyText": "We should format things for them so they just provide the projectID and topic name.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2200#discussion_r384054417", "createdAt": "2020-02-25T18:46:44Z", "author": {"login": "lesv"}, "path": "securitycenter/src/main/java/com/google/cloud/examples/securitycenter/snippets/NotificationConfigSnippets.java", "diffHunk": "@@ -0,0 +1,161 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.examples.securitycenter.snippets;\n+\n+import com.google.cloud.securitycenter.v1p1beta1.CreateNotificationConfigRequest;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.EventType;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfig.StreamingConfig;\n+import com.google.cloud.securitycenter.v1p1beta1.NotificationConfigName;\n+import com.google.cloud.securitycenter.v1p1beta1.OrganizationName;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient;\n+import com.google.cloud.securitycenter.v1p1beta1.SecurityCenterClient.ListNotificationConfigsPagedResponse;\n+import com.google.common.collect.ImmutableList;\n+import com.google.protobuf.FieldMask;\n+import java.io.IOException;\n+\n+/** Snippets for how to work with Notifications in Cloud SCC. */\n+final class NotificationConfigSnippets {\n+  private NotificationConfigSnippets() {}\n+\n+  public static NotificationConfig createNotificationConfig(\n+      String organizationId, String pubsubTopic, String notificationConfigId) throws IOException {\n+\n+    // [START scc_create_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-topic}\";\n+    // Ensure this ServiceAccount has the \"pubsub.topics.setIamPolicy\" permission on the topic.\n+\n+    String orgName = String.format(\"organizations/%s\", organizationId);\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      CreateNotificationConfigRequest request =\n+          CreateNotificationConfigRequest.newBuilder()\n+              .setParent(orgName)\n+              .setConfigId(notificationConfigId)\n+              .setNotificationConfig(\n+                  NotificationConfig.newBuilder()\n+                      .setDescription(\"Java notification config\")\n+                      .setPubsubTopic(pubsubTopic)\n+                      .setEventType(EventType.FINDING)\n+                      .setStreamingConfig(\n+                          StreamingConfig.newBuilder().setFilter(\"state = \\\"ACTIVE\\\"\").build())\n+                      .build())\n+              .build();\n+\n+      NotificationConfig response = client.createNotificationConfig(request);\n+      System.out.println(String.format(\"Notification config was created: %s\", response));\n+      return response;\n+    }\n+    // [END scc_create_notification_config]\n+  }\n+\n+  public static boolean deleteNotificationConfig(String organizationId, String notificationConfigId)\n+      throws IOException {\n+\n+    // [START scc_delete_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+\n+    NotificationConfigName notificationConfigName =\n+        NotificationConfigName.newBuilder()\n+            .setOrganization(organizationId)\n+            .setNotificationConfig(notificationConfigId)\n+            .build();\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      client.deleteNotificationConfig(notificationConfigName);\n+\n+      System.out.println(String.format(\"Deleted Notification config: %s\", notificationConfigName));\n+    }\n+    // [END scc_delete_notification_config]\n+\n+    return true;\n+  }\n+\n+  public static NotificationConfig getNotificationConfig(\n+      String organizationId, String notificationConfigId) throws IOException {\n+\n+    // [START scc_get_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"config-id\";\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      NotificationConfig response =\n+          client.getNotificationConfig(\n+              NotificationConfigName.newBuilder()\n+                  .setOrganization(organizationId)\n+                  .setNotificationConfig(notificationConfigId)\n+                  .build());\n+\n+      System.out.println(String.format(\"Notification config: %s\", response));\n+      return response;\n+    }\n+    // [END scc_get_notification_config]\n+  }\n+\n+  public static ImmutableList<NotificationConfig> listNotificationConfigs(String organizationId)\n+      throws IOException {\n+    // [START scc_list_notification_configs]\n+    // String organizationId = \"{your-org-id}\";\n+\n+    OrganizationName orgName =\n+        OrganizationName.newBuilder().setOrganization(organizationId).build();\n+\n+    try (SecurityCenterClient client = SecurityCenterClient.create()) {\n+      ListNotificationConfigsPagedResponse response = client.listNotificationConfigs(orgName);\n+\n+      ImmutableList<NotificationConfig> notificationConfigs =\n+          ImmutableList.copyOf(response.iterateAll());\n+      System.out.println(\n+          String.format(\"List notifications response: %s\", response.getPage().getValues()));\n+      return notificationConfigs;\n+    }\n+    // [END scc_list_notification_configs]\n+  }\n+\n+  public static NotificationConfig updateNotificationConfig(\n+      String organizationId, String notificationConfigId, String pubsubTopic) throws IOException {\n+    // [START scc_update_notification_config]\n+    // String organizationId = \"{your-org-id}\";\n+    // String notificationConfigId = \"{your-config-id}\";\n+    String notificationConfigName =\n+        String.format(\n+            \"organizations/%s/notificationConfigs/%s\", organizationId, notificationConfigId);\n+\n+    // String pubsubTopic = \"projects/{your-project}/topics/{your-new-topic}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b52073c8c96cbe200dae2d1a76893677392d197"}, "originalPosition": 141}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1036, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}