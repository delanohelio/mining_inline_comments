{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMzgzMjQ4", "number": 2810, "title": "Wrap BufferedWriter in PrintWriter to simplify some code.", "bodyText": "This enables us to replace writer.write(String.format(...)) with\nwriter.printf(...).\nAlso use the var keyword to simplify a couple of places where a type\nhad to be fully-qualified because of a naming conflict.", "createdAt": "2020-04-28T21:59:34Z", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810", "merged": true, "mergeCommit": {"oid": "269baf50e4ec898e96289f2096373c119f26710d"}, "closed": true, "closedAt": "2020-04-29T18:41:44Z", "author": {"login": "eamonnmcmanus"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccLD85AH2gAyNDEwMzgzMjQ4OjM3NWYzMWUzYWExNmE2ODY4NDhkYTA1YzYzY2IyM2MzYzAyMmIyYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccbtJvgFqTQwMjg3MTU4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "375f31e3aa16a686848da05c63cb23c3c022b2bb", "author": {"user": {"login": "eamonnmcmanus", "name": "\u00c9amonn McManus"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/375f31e3aa16a686848da05c63cb23c3c022b2bb", "committedDate": "2020-04-28T21:49:14Z", "message": "Wrap BufferedWriter in PrintWriter to simplify some code.\n\nThis enables us to replace `writer.write(String.format(...))` with\n`writer.printf(...)`.\n\nAlso use the `var` keyword to simplify a couple of places where a type\nhad to be fully-qualified because of a naming conflict."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjUwMDc2", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810#pullrequestreview-402250076", "createdAt": "2020-04-28T22:13:11Z", "commit": {"oid": "375f31e3aa16a686848da05c63cb23c3c022b2bb"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMjoxMzoxMlrOGNo9dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMjoxMzo1MVrOGNo-gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk1NTc2Ng==", "bodyText": "I have mixed feelings on var - it's simpler, but (to me) feels less idiomatic for Java.\n@kurtisvg @lesv WDYT?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810#discussion_r416955766", "createdAt": "2020-04-28T22:13:12Z", "author": {"login": "ace-n"}, "path": "functions/http/send-http-request/src/main/java/functions/SendHttpRequest.java", "diffHunk": "@@ -41,17 +41,15 @@ public void service(HttpRequest request, HttpResponse response)\n       throws IOException, InterruptedException {\n     // Create a GET sendHttpRequest to \"http://example.com\"\n     String url = \"http://example.com\";\n-    java.net.http.HttpRequest getRequest =\n-        java.net.http.HttpRequest.newBuilder().uri(URI.create(url)).GET().build();\n+    var getRequest = java.net.http.HttpRequest.newBuilder().uri(URI.create(url)).GET().build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "375f31e3aa16a686848da05c63cb23c3c022b2bb"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk1NjAzMg==", "bodyText": "Nit: spotbugs does not like \\n, and prefers %n instead.\nApply that comment throughout this file.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810#discussion_r416956032", "createdAt": "2020-04-28T22:13:51Z", "author": {"login": "ace-n"}, "path": "functions/spanner/src/main/java/functions/HelloSpanner.java", "diffHunk": "@@ -97,27 +97,26 @@ DatabaseClient getClient() throws Throwable {\n \n   @Override\n   public void service(HttpRequest request, HttpResponse response) throws Exception {\n-    BufferedWriter writer = response.getWriter();\n+    var writer = new PrintWriter(response.getWriter());\n     try {\n       DatabaseClient client = getClient();\n       try (ResultSet rs =\n           client\n               .singleUse()\n               .executeQuery(Statement.of(\"SELECT SingerId, AlbumId, AlbumTitle FROM Albums\"))) {\n-        writer.write(\"Albums:\\n\");\n+        writer.printf(\"Albums:\\n\");\n         while (rs.next()) {\n-          writer.write(\n-              String.format(\n-                  \"%d %d %s\\n\",\n-                  rs.getLong(\"SingerId\"), rs.getLong(\"AlbumId\"), rs.getString(\"AlbumTitle\")));\n+          writer.printf(\n+              \"%d %d %s\\n\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "375f31e3aa16a686848da05c63cb23c3c022b2bb"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "826c331cd824b08d91d302c86a23cbeeca41e252", "author": {"user": {"login": "eamonnmcmanus", "name": "\u00c9amonn McManus"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/826c331cd824b08d91d302c86a23cbeeca41e252", "committedDate": "2020-04-28T22:33:21Z", "message": "Replace `\\n` with `%n` in a format string."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b028fce17b6b110fa56d7cf73290552ec2011fc5", "author": {"user": {"login": "eamonnmcmanus", "name": "\u00c9amonn McManus"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/b028fce17b6b110fa56d7cf73290552ec2011fc5", "committedDate": "2020-04-28T22:34:45Z", "message": "Merge branch 'master' into function-sample-printf"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyODcxNTg4", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810#pullrequestreview-402871588", "createdAt": "2020-04-29T17:11:51Z", "commit": {"oid": "b028fce17b6b110fa56d7cf73290552ec2011fc5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNzoxMTo1MVrOGOIx0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNzoxMTo1MVrOGOIx0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3NzA3NA==", "bodyText": "It's J11, it's often clearer and less error prone.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2810#discussion_r417477074", "createdAt": "2020-04-29T17:11:51Z", "author": {"login": "lesv"}, "path": "functions/http/send-http-request/src/main/java/functions/SendHttpRequest.java", "diffHunk": "@@ -41,17 +41,15 @@ public void service(HttpRequest request, HttpResponse response)\n       throws IOException, InterruptedException {\n     // Create a GET sendHttpRequest to \"http://example.com\"\n     String url = \"http://example.com\";\n-    java.net.http.HttpRequest getRequest =\n-        java.net.http.HttpRequest.newBuilder().uri(URI.create(url)).GET().build();\n+    var getRequest = java.net.http.HttpRequest.newBuilder().uri(URI.create(url)).GET().build();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk1NTc2Ng=="}, "originalCommit": {"oid": "375f31e3aa16a686848da05c63cb23c3c022b2bb"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 792, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}