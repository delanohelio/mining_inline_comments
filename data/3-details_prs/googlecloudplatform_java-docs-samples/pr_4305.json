{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2ODA5MDQ4", "number": 4305, "title": "STS check latest transfer operation sample", "bodyText": "Adds a new sample for checking the latest transfer operation in Storage Transfer Service", "createdAt": "2020-11-24T21:54:23Z", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305", "merged": true, "mergeCommit": {"oid": "372ebb81816e49f2520f4f8e56744a0c793281b8"}, "closed": true, "closedAt": "2020-12-04T16:41:58Z", "author": {"login": "JesseLovelace"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfwrCEAH2gAyNTI2ODA5MDQ4OjQwODQwMGY3Y2Q4OTQ4MWVlZDQ1MzNiNmRhYTliOTljM2Q5YjYxZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi6hjOAFqTU0NTEyMTEyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "408400f7cd89481eed4533b6daa9b99c3d9b61e8", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/408400f7cd89481eed4533b6daa9b99c3d9b61e8", "committedDate": "2020-11-24T21:31:20Z", "message": "STS check latest transfer operation sample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDQ0MjUz", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#pullrequestreview-538044253", "createdAt": "2020-11-24T23:19:03Z", "commit": {"oid": "408400f7cd89481eed4533b6daa9b99c3d9b61e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMzoxOTowM1rOH5cQBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMzoyMDozMVrOH5cVnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTk5MzczMg==", "bodyText": "Add new lines to end of both files.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#discussion_r529993732", "createdAt": "2020-11-24T23:19:03Z", "author": {"login": "frankyn"}, "path": "storage/storage-transfer/src/test/java/com/google/cloud/storage/storagetransfer/samples/test/CheckLatestTransferOperationTest.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package com.google.cloud.storage.storagetransfer.samples.test;\n+\n+import static com.google.common.truth.Truth.assertThat;\n+\n+import com.google.api.services.storagetransfer.v1.Storagetransfer;\n+import com.google.api.services.storagetransfer.v1.model.Date;\n+import com.google.api.services.storagetransfer.v1.model.GcsData;\n+import com.google.api.services.storagetransfer.v1.model.ObjectConditions;\n+import com.google.api.services.storagetransfer.v1.model.Schedule;\n+import com.google.api.services.storagetransfer.v1.model.TimeOfDay;\n+import com.google.api.services.storagetransfer.v1.model.TransferJob;\n+import com.google.api.services.storagetransfer.v1.model.TransferOptions;\n+import com.google.api.services.storagetransfer.v1.model.TransferSpec;\n+import com.google.cloud.storage.storagetransfer.samples.CheckLatestTransferOperation;\n+import com.google.cloud.storage.storagetransfer.samples.TransferClientCreator;\n+import com.google.cloud.storage.storagetransfer.samples.TransferJobUtils;\n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import org.junit.Test;\n+\n+public class CheckLatestTransferOperationTest {\n+  private static final String PROJECT_ID = System.getenv(\"GOOGLE_CLOUD_PROJECT\");\n+\n+  @Test\n+  public void testCheckLatestTransferOperation() throws Exception {\n+    Date date = TransferJobUtils.createDate(\"2000-01-01\");\n+    TimeOfDay time = TransferJobUtils.createTimeOfDay(\"00:00:00\");\n+    TransferJob transferJob =\n+        new TransferJob()\n+            .setDescription(\"Sample job\")\n+            .setProjectId(PROJECT_ID)\n+            .setTransferSpec(\n+                new TransferSpec()\n+                    .setGcsDataSource(new GcsData().setBucketName(PROJECT_ID + \"-storagetransfer-source\"))\n+                    .setGcsDataSink(new GcsData().setBucketName(PROJECT_ID + \"-storagetransfer-sink\"))\n+                    .setObjectConditions(\n+                        new ObjectConditions()\n+                            .setMinTimeElapsedSinceLastModification(\"2592000s\" /* 30 days */))\n+                    .setTransferOptions(\n+                        new TransferOptions().setDeleteObjectsFromSourceAfterTransfer(true)))\n+            .setSchedule(new Schedule().setScheduleStartDate(date).setStartTimeOfDay(time))\n+            .setStatus(\"ENABLED\");\n+\n+    Storagetransfer client = TransferClientCreator.createStorageTransferClient();\n+    TransferJob response  = client.transferJobs().create(transferJob).execute();\n+\n+    PrintStream standardOut = System.out;\n+    final ByteArrayOutputStream sampleOutputCapture = new ByteArrayOutputStream();\n+    System.setOut(new PrintStream(sampleOutputCapture));\n+\n+    CheckLatestTransferOperation.CheckLatestTransferOperation(PROJECT_ID, response.getName());\n+\n+    String sampleOutput = sampleOutputCapture.toString();\n+    System.setOut(standardOut);\n+    assertThat(sampleOutput.contains(response.getName()));\n+  }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "408400f7cd89481eed4533b6daa9b99c3d9b61e8"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTk5NTE2NQ==", "bodyText": "Is there an example you could use in place of my-job-name or is this the format it uses?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#discussion_r529995165", "createdAt": "2020-11-24T23:20:31Z", "author": {"login": "frankyn"}, "path": "storage/storage-transfer/src/main/java/com/google/cloud/storage/storagetransfer/samples/CheckLatestTransferOperation.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright 2020 Google Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.storage.storagetransfer.samples;\n+\n+// [START storagetransfer_get_latest_transfer_operation]\n+\n+import com.google.api.client.googleapis.util.Utils;\n+import com.google.api.services.storagetransfer.v1.Storagetransfer;\n+import com.google.api.services.storagetransfer.v1.StoragetransferScopes;\n+import com.google.api.services.storagetransfer.v1.model.Operation;\n+import com.google.api.services.storagetransfer.v1.model.TransferJob;\n+import com.google.auth.http.HttpCredentialsAdapter;\n+import com.google.auth.oauth2.GoogleCredentials;\n+\n+import java.io.IOException;\n+\n+public class CheckLatestTransferOperation {\n+\n+  // Gets the requested transfer job and checks its latest operation\n+  public static void CheckLatestTransferOperation(String projectId, String jobName)\n+      throws IOException {\n+    // Your Google Cloud Project ID\n+    // String projectId = \"your-project-id\";\n+\n+    // The name of the job to check\n+    // String jobName = \"my-job-name\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "408400f7cd89481eed4533b6daa9b99c3d9b61e8"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38b0141e72878fbd8ccd729c7edd84c1e8904195", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/38b0141e72878fbd8ccd729c7edd84c1e8904195", "committedDate": "2020-11-25T22:36:22Z", "message": "Merge branch 'master' into stslatestopsample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMDk0OTg2", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#pullrequestreview-541094986", "createdAt": "2020-11-30T16:46:31Z", "commit": {"oid": "38b0141e72878fbd8ccd729c7edd84c1e8904195"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7882f35c9aa3dea083eb0b702f1d271d1885cc8a", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/7882f35c9aa3dea083eb0b702f1d271d1885cc8a", "committedDate": "2020-12-03T19:43:26Z", "message": "STS check latest transfer operation sample"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9503402bb2807eaab857aa16e017c3be234e0afe", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/9503402bb2807eaab857aa16e017c3be234e0afe", "committedDate": "2020-12-03T19:44:44Z", "message": "Merge branch 'stslatestopsample' of github.com:GoogleCloudPlatform/java-docs-samples into stslatestopsample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MzcwNjI3", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#pullrequestreview-544370627", "createdAt": "2020-12-03T20:05:21Z", "commit": {"oid": "9503402bb2807eaab857aa16e017c3be234e0afe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d6533e76bca80cc7fbb077091ac7bdd48a0f59", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/11d6533e76bca80cc7fbb077091ac7bdd48a0f59", "committedDate": "2020-12-03T20:53:20Z", "message": "Merge branch 'stslatestopsample' of github.com:GoogleCloudPlatform/java-docs-samples into stslatestopsample"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "351673fb71d90dae1c70991efd2f9eb8cdc126e4", "author": {"user": {"login": "JesseLovelace", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/351673fb71d90dae1c70991efd2f9eb8cdc126e4", "committedDate": "2020-12-03T20:53:26Z", "message": "Merge branch 'stslatestopsample' of github.com:GoogleCloudPlatform/java-docs-samples into stslatestopsample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTIxMTI3", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/4305#pullrequestreview-545121127", "createdAt": "2020-12-04T16:41:48Z", "commit": {"oid": "351673fb71d90dae1c70991efd2f9eb8cdc126e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 418, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}