{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NjIwNTIy", "number": 2394, "title": "GCF: Add Slack sample + clean up imports", "bodyText": "Do not merge until this has actually been tested with Slack.\n(@lesv I added you since Kurtis is OOO - LMK if I should ping someone else!)", "createdAt": "2020-03-13T06:51:57Z", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394", "merged": true, "mergeCommit": {"oid": "1e5e99a19a893e44c55170771773ed1ec41adb55"}, "closed": true, "closedAt": "2020-03-21T00:45:02Z", "author": {"login": "ace-n"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNKjihAH2gAyMzg3NjIwNTIyOjExMTM5Nzg4YmE5YTYwZWJhMmE3NWJhNDdmMzA1NTdhZjFkZmJiZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPqHSRgH2gAyMzg3NjIwNTIyOmYzMzZhZTVhYWIzYzk0MDA2ZjgyMTYwM2QwY2NkYzIwNmEyZDg4YjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/11139788ba9a60eba2a75ba47f30557af1dfbbdb", "committedDate": "2020-03-13T06:44:58Z", "message": "Add Slack sample + clean up imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NDc5MzM3", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-374479337", "createdAt": "2020-03-13T17:19:51Z", "commit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNzoxOTo1MVrOF2MHCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNzozMjoyN1rOF2MiDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2NTgzMw==", "bodyText": "I would hope this isn't true.  Can't you also write to stderr / stdout?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392365833", "createdAt": "2020-03-13T17:19:51Z", "author": {"login": "lesv"}, "path": "functions/snippets/pom.xml", "diffHunk": "@@ -26,20 +26,32 @@\n   </properties>\n \n   <dependencies>\n-    <!-- Required to for com.example.functions.ParseContentType -->\n+    <!-- Required for com.example.functions.ParseContentType -->\n     <dependency>\n       <groupId>com.google.code.gson</groupId>\n       <artifactId>gson</artifactId>\n       <version>2.8.6</version>\n     </dependency>\n \n-    <!-- Required to for com.example.functions.RetrieveLogs -->\n+    <!-- Required for com.example.functions.RetrieveLogs -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2Njk5Mg==", "bodyText": "OK, but isn't this against 12 factor?  (Shouldn't config come from EnvVar's)?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392366992", "createdAt": "2020-03-13T17:21:54Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2OTA4MA==", "bodyText": "Not sure what to recommend here - this has lots of stuff wrong.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392369080", "createdAt": "2020-03-13T17:25:43Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {\n+    JsonObject attachmentJson = new JsonObject();\n+    JsonArray attachments = new JsonArray();\n+\n+    JsonObject responseJson = new JsonObject();\n+    responseJson.addProperty(\"response_type\", \"in_channel\");\n+    responseJson.addProperty(\"text\", String.format(\"Query: %s\", query));\n+\n+    // Extract the first entity from the result list, if any\n+    if (kgResults.size() == 0) {\n+      attachmentJson.addProperty(\"text\",\"No results match your query...\");\n+\n+      attachments.add(attachmentJson);\n+      responseJson.add(\"attachments\", attachmentJson);\n+\n+      return gson.toJson(responseJson);\n+    }\n+\n+    ArrayMap entity = (ArrayMap) ((ArrayMap) kgResults.get(0)).get(\"result\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2OTIwOA==", "bodyText": "List is rarely a good idea.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392369208", "createdAt": "2020-03-13T17:25:56Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3MDU3NA==", "bodyText": "Lots of .toString()'s are often a flag of bad design.  .toString() on an object isn't guaranteed to provide something presentable.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392370574", "createdAt": "2020-03-13T17:28:25Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {\n+    JsonObject attachmentJson = new JsonObject();\n+    JsonArray attachments = new JsonArray();\n+\n+    JsonObject responseJson = new JsonObject();\n+    responseJson.addProperty(\"response_type\", \"in_channel\");\n+    responseJson.addProperty(\"text\", String.format(\"Query: %s\", query));\n+\n+    // Extract the first entity from the result list, if any\n+    if (kgResults.size() == 0) {\n+      attachmentJson.addProperty(\"text\",\"No results match your query...\");\n+\n+      attachments.add(attachmentJson);\n+      responseJson.add(\"attachments\", attachmentJson);\n+\n+      return gson.toJson(responseJson);\n+    }\n+\n+    ArrayMap entity = (ArrayMap) ((ArrayMap) kgResults.get(0)).get(\"result\");\n+\n+    // Construct Knowledge Graph response attachment\n+    String title = entity.get(\"name\").toString();\n+    if (entity.containsKey(\"description\")) {\n+      title = String.format(\"%s: %s\", title, entity.get(\"description\").toString());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3MTg4Mg==", "bodyText": "You rarely need private, and List<Object> is rarely correct.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392371882", "createdAt": "2020-03-13T17:30:55Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {\n+    JsonObject attachmentJson = new JsonObject();\n+    JsonArray attachments = new JsonArray();\n+\n+    JsonObject responseJson = new JsonObject();\n+    responseJson.addProperty(\"response_type\", \"in_channel\");\n+    responseJson.addProperty(\"text\", String.format(\"Query: %s\", query));\n+\n+    // Extract the first entity from the result list, if any\n+    if (kgResults.size() == 0) {\n+      attachmentJson.addProperty(\"text\",\"No results match your query...\");\n+\n+      attachments.add(attachmentJson);\n+      responseJson.add(\"attachments\", attachmentJson);\n+\n+      return gson.toJson(responseJson);\n+    }\n+\n+    ArrayMap entity = (ArrayMap) ((ArrayMap) kgResults.get(0)).get(\"result\");\n+\n+    // Construct Knowledge Graph response attachment\n+    String title = entity.get(\"name\").toString();\n+    if (entity.containsKey(\"description\")) {\n+      title = String.format(\"%s: %s\", title, entity.get(\"description\").toString());\n+    }\n+    attachmentJson.addProperty(\"title\", title);\n+\n+    if (entity.containsKey(\"detailedDescription\")) {\n+      ArrayMap detailedDescJson = (ArrayMap) entity.get(\"detailedDescription\");\n+      addPropertyIfPresent(attachmentJson, \"title_link\", detailedDescJson, \"url\");\n+      addPropertyIfPresent(attachmentJson, \"text\", detailedDescJson, \"articleBody\");\n+    }\n+\n+    if (entity.containsKey(\"image\")) {\n+      ArrayMap imageJson = (ArrayMap) entity.get(\"image\");\n+      addPropertyIfPresent(attachmentJson, \"image_url\", imageJson, \"contentUrl\");\n+    }\n+\n+    // Construct top level response\n+    attachments.add(attachmentJson);\n+    responseJson.add(\"attachments\", attachmentJson);\n+\n+    return gson.toJson(responseJson);\n+  }\n+\n+  private List<Object> searchKnowledgeGraph(String query) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 132}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3MjA5NA==", "bodyText": "private probably isn't needed.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392372094", "createdAt": "2020-03-13T17:31:20Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3Mjc1MQ==", "bodyText": "List<Object> rarely a good idea.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392372751", "createdAt": "2020-03-13T17:32:27Z", "author": {"login": "lesv"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {\n+    JsonObject attachmentJson = new JsonObject();\n+    JsonArray attachments = new JsonArray();\n+\n+    JsonObject responseJson = new JsonObject();\n+    responseJson.addProperty(\"response_type\", \"in_channel\");\n+    responseJson.addProperty(\"text\", String.format(\"Query: %s\", query));\n+\n+    // Extract the first entity from the result list, if any\n+    if (kgResults.size() == 0) {\n+      attachmentJson.addProperty(\"text\",\"No results match your query...\");\n+\n+      attachments.add(attachmentJson);\n+      responseJson.add(\"attachments\", attachmentJson);\n+\n+      return gson.toJson(responseJson);\n+    }\n+\n+    ArrayMap entity = (ArrayMap) ((ArrayMap) kgResults.get(0)).get(\"result\");\n+\n+    // Construct Knowledge Graph response attachment\n+    String title = entity.get(\"name\").toString();\n+    if (entity.containsKey(\"description\")) {\n+      title = String.format(\"%s: %s\", title, entity.get(\"description\").toString());\n+    }\n+    attachmentJson.addProperty(\"title\", title);\n+\n+    if (entity.containsKey(\"detailedDescription\")) {\n+      ArrayMap detailedDescJson = (ArrayMap) entity.get(\"detailedDescription\");\n+      addPropertyIfPresent(attachmentJson, \"title_link\", detailedDescJson, \"url\");\n+      addPropertyIfPresent(attachmentJson, \"text\", detailedDescJson, \"articleBody\");\n+    }\n+\n+    if (entity.containsKey(\"image\")) {\n+      ArrayMap imageJson = (ArrayMap) entity.get(\"image\");\n+      addPropertyIfPresent(attachmentJson, \"image_url\", imageJson, \"contentUrl\");\n+    }\n+\n+    // Construct top level response\n+    attachments.add(attachmentJson);\n+    responseJson.add(\"attachments\", attachmentJson);\n+\n+    return gson.toJson(responseJson);\n+  }\n+\n+  private List<Object> searchKnowledgeGraph(String query) throws IOException {\n+    Kgsearch.Entities.Search kgRequest = kgClient.entities().search();\n+    kgRequest.setQuery(query);\n+    kgRequest.setKey(API_KEY);\n+\n+    return kgRequest.execute().getItemListElement();\n+  }\n+\n+  @Override\n+  public void service(HttpRequest request, HttpResponse response) throws IOException {\n+\n+    // Validate request\n+    if (request.getMethod() != \"POST\") {\n+      response.setStatusCode(HttpURLConnection.HTTP_BAD_METHOD);\n+      return;\n+    }\n+\n+    // reader can only be read once per request, so we preserve its contents\n+    String bodyString = request.getReader().lines().collect(Collectors.joining());\n+    JsonObject body = (new Gson()).fromJson(bodyString, JsonObject.class);\n+\n+    if (body == null || !body.has(\"text\")) {\n+      response.setStatusCode(HttpURLConnection.HTTP_BAD_REQUEST);\n+      return;\n+    }\n+\n+    if (!isValidSlackWebhook(request, bodyString)) {\n+      response.setStatusCode(HttpURLConnection.HTTP_UNAUTHORIZED);\n+      return;\n+    }\n+\n+    String query = body.get(\"text\").getAsString();\n+\n+    // Call knowledge graph API\n+    List<Object> kgResults = searchKnowledgeGraph(query);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 166}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b84f11b129e955eef71b31ea9f1f7be9c349b091", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/b84f11b129e955eef71b31ea9f1f7be9c349b091", "committedDate": "2020-03-14T05:11:38Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "282749602d18df3c69832d8158ea2068fd552667", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/282749602d18df3c69832d8158ea2068fd552667", "committedDate": "2020-03-14T05:12:18Z", "message": "Remove excess gcloudignore + actually disable tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njg3NzE4", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-374687718", "createdAt": "2020-03-14T01:44:23Z", "commit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwMTo0NDoyM1rOF2XF0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwMTo0Nzo0MFrOF2XGww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU0NTc0NQ==", "bodyText": "Update: decided to use env vars here.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392545745", "createdAt": "2020-03-14T01:44:23Z", "author": {"login": "ace-n"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2Njk5Mg=="}, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU0NTc3MQ==", "bodyText": "Done. (Removed private keyword from method declarations in this file.)", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392545771", "createdAt": "2020-03-14T01:44:58Z", "author": {"login": "ace-n"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3MjA5NA=="}, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU0NTgyNQ==", "bodyText": "Refactored (to use JsonObject) per the comment below.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392545825", "createdAt": "2020-03-14T01:45:39Z", "author": {"login": "ace-n"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM2OTIwOA=="}, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU0NTk4Nw==", "bodyText": "Refactored to use JsonObject (and getAsString()).", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r392545987", "createdAt": "2020-03-14T01:47:40Z", "author": {"login": "ace-n"}, "path": "functions/snippets/src/main/java/com/example/functions/SlackSlashCommand.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.functions;\n+\n+import com.github.seratch.jslack.app_backend.SlackSignature;\n+import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\n+import com.google.api.client.json.jackson2.JacksonFactory;\n+import com.google.api.client.util.ArrayMap;\n+import com.google.api.services.kgsearch.v1.Kgsearch;\n+import com.google.cloud.functions.HttpFunction;\n+import com.google.cloud.functions.HttpRequest;\n+import com.google.cloud.functions.HttpResponse;\n+import com.google.gson.Gson;\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.security.GeneralSecurityException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.stream.Collectors;\n+\n+public class SlackSlashCommand implements HttpFunction {\n+\n+  private Kgsearch kgClient;\n+  private static String API_KEY;\n+  private static String SLACK_SECRET;\n+  private static final Logger LOGGER = Logger.getLogger(HelloHttp.class.getName());\n+  private SlackSignature.Verifier verifier;\n+  private Gson gson = new Gson();\n+\n+  public SlackSlashCommand() throws IOException, GeneralSecurityException {\n+    kgClient = new Kgsearch.Builder(\n+        GoogleNetHttpTransport.newTrustedTransport(), new JacksonFactory(), null).build();\n+\n+    // Read + parse config file\n+    Path configPath = Path.of(System.getProperty(\"user.dir\"), \"config.json\");\n+    JsonObject configJson = (new Gson()).fromJson(Files.readString(configPath), JsonObject.class);\n+\n+    SLACK_SECRET = configJson.get(\"SLACK_SECRET\").getAsString();\n+    API_KEY = configJson.get(\"KG_API_KEY\").getAsString();\n+\n+    verifier = new SlackSignature.Verifier(new SlackSignature.Generator(SLACK_SECRET));\n+  }\n+\n+  private boolean isValidSlackWebhook(HttpRequest request, String requestBody) throws IOException {\n+\n+    // Check for headers\n+    HashMap<String, List<String>> headers = new HashMap(request.getHeaders());\n+    if (!headers.containsKey(\"X-Slack-Request-Timestamp\")\n+        || !headers.containsKey(\"X-Slack-Signature\")) {\n+      return false;\n+    }\n+\n+    return verifier.isValid(\n+        headers.get(\"X-Slack-Request-Timestamp\").get(0),\n+        requestBody,\n+        headers.get(\"X-Slack-Signature\").get(0),\n+        1L);\n+  }\n+\n+  private void addPropertyIfPresent(\n+      JsonObject target, String targetName, ArrayMap source, String sourceName) {\n+    if (source.containsKey(sourceName)) {\n+      target.addProperty(targetName, source.get(sourceName).toString());\n+    }\n+  }\n+\n+  private String formatSlackMessage(List<Object> kgResults, String query) {\n+    JsonObject attachmentJson = new JsonObject();\n+    JsonArray attachments = new JsonArray();\n+\n+    JsonObject responseJson = new JsonObject();\n+    responseJson.addProperty(\"response_type\", \"in_channel\");\n+    responseJson.addProperty(\"text\", String.format(\"Query: %s\", query));\n+\n+    // Extract the first entity from the result list, if any\n+    if (kgResults.size() == 0) {\n+      attachmentJson.addProperty(\"text\",\"No results match your query...\");\n+\n+      attachments.add(attachmentJson);\n+      responseJson.add(\"attachments\", attachmentJson);\n+\n+      return gson.toJson(responseJson);\n+    }\n+\n+    ArrayMap entity = (ArrayMap) ((ArrayMap) kgResults.get(0)).get(\"result\");\n+\n+    // Construct Knowledge Graph response attachment\n+    String title = entity.get(\"name\").toString();\n+    if (entity.containsKey(\"description\")) {\n+      title = String.format(\"%s: %s\", title, entity.get(\"description\").toString());\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM3MDU3NA=="}, "originalCommit": {"oid": "11139788ba9a60eba2a75ba47f30557af1dfbbdb"}, "originalPosition": 111}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7638e6caf9f5f8d5499279d619c6b66f8f9a9c04", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/7638e6caf9f5f8d5499279d619c6b66f8f9a9c04", "committedDate": "2020-03-16T02:48:36Z", "message": "Merge branch 'master' into gcf-slack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6383b60197d0fd0818776938476c4f06ee9d3833", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/6383b60197d0fd0818776938476c4f06ee9d3833", "committedDate": "2020-03-16T08:48:02Z", "message": "Simplify tests + run them on Kokoro. ALSO bugfix unused shellchecks."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTgwNjE2", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-375580616", "createdAt": "2020-03-16T21:02:58Z", "commit": {"oid": "6383b60197d0fd0818776938476c4f06ee9d3833"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMTowMjo1OFrOF3Fq1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMTowMjo1OFrOF3Fq1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMwODg4Nw==", "bodyText": "Thanks - probably should have been in it's own PR", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r393308887", "createdAt": "2020-03-16T21:02:58Z", "author": {"login": "lesv"}, "path": ".kokoro/tests/run_tests.sh", "diffHunk": "@@ -65,12 +65,14 @@ if [[ \"$SCRIPT_DEBUG\" != \"true\" ]]; then\n     source \"${KOKORO_GFILE_DIR}/aws-secrets.sh\"\n     # shellcheck source=src/storage-hmac-credentials.sh\n     source \"${KOKORO_GFILE_DIR}/storage-hmac-credentials.sh\"\n-    # shellcheck source=src/dlp_secrets.sh\n+    # shellcheck source=src/dlp_secrets.txt\n     source \"${KOKORO_GFILE_DIR}/dlp_secrets.txt\"\n-    # shellcheck source=src/bigtable_secrets.sh\n+    # shellcheck source=src/bigtable_secrets.txt\n     source \"${KOKORO_GFILE_DIR}/bigtable_secrets.txt\"\n-    # shellcheck source=src/automl_secrets.sh\n+    # shellcheck source=src/automl_secrets.txt\n     source \"${KOKORO_GFILE_DIR}/automl_secrets.txt\"\n+    # shellcheck source=src/functions_secrets.txt\n+    source \"${KOKORO_GFILE_DIR}/functions_secrets.txt\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383b60197d0fd0818776938476c4f06ee9d3833"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTg0Nzg4", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-375584788", "createdAt": "2020-03-16T21:10:16Z", "commit": {"oid": "6383b60197d0fd0818776938476c4f06ee9d3833"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMToxMDoxNlrOF3F3zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMToxMDoxNlrOF3F3zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMxMjIwNA==", "bodyText": "Should this now be removed?", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r393312204", "createdAt": "2020-03-16T21:10:16Z", "author": {"login": "lesv"}, "path": "functions/snippets/config.slack.json", "diffHunk": "@@ -0,0 +1,4 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383b60197d0fd0818776938476c4f06ee9d3833"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2d0ffd33b1192a9c4eddc066768239ddbc4c6b", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/0c2d0ffd33b1192a9c4eddc066768239ddbc4c6b", "committedDate": "2020-03-17T01:08:15Z", "message": "Remove extra file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "032e107f06f1b82eb5da399f653be4ab60c72f92", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/032e107f06f1b82eb5da399f653be4ab60c72f92", "committedDate": "2020-03-17T01:25:35Z", "message": "HACK: resolve surefire issue via file presence"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MDk5OTMy", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-377099932", "createdAt": "2020-03-18T17:47:31Z", "commit": {"oid": "032e107f06f1b82eb5da399f653be4ab60c72f92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo0NzozMVrOF4QUNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo0NzozMVrOF4QUNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUzMTg5Mw==", "bodyText": ".gcloudignore isn't going to github, so you are turning off our tests.", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#discussion_r394531893", "createdAt": "2020-03-18T17:47:31Z", "author": {"login": "lesv"}, "path": "functions/snippets/pom.xml", "diffHunk": "@@ -102,10 +114,36 @@\n     </dependency>\n   </dependencies>\n \n-  <!-- Required for Java 8 (Alpha) functions in the inline editor -->\n+  <!-- Disable tests when deploying to GCF -->\n+  <!-- (where .gcloudignore isn't present) -->\n+  <profiles>\n+    <profile>\n+      <activation>\n+        <file>\n+          <missing>.gcloudignore</missing>\n+        </file>\n+      </activation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "032e107f06f1b82eb5da399f653be4ab60c72f92"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38a32f1953bbc343a7c58326a5029f5fda325b1a", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/38a32f1953bbc343a7c58326a5029f5fda325b1a", "committedDate": "2020-03-19T03:07:37Z", "message": "HACK take 2: use a different filepath"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5005a1bcc7604728d3d4b5bf0d9379120d4c3375", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/5005a1bcc7604728d3d4b5bf0d9379120d4c3375", "committedDate": "2020-03-20T00:38:24Z", "message": "HACK take 3: use env var not used by local Cloud Build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcbcf2807551b60e03a73a22f38fa4ad3e58176c", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/fcbcf2807551b60e03a73a22f38fa4ad3e58176c", "committedDate": "2020-03-20T00:43:32Z", "message": "DUMMY take 1"}, "afterCommit": {"oid": "5005a1bcc7604728d3d4b5bf0d9379120d4c3375", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/5005a1bcc7604728d3d4b5bf0d9379120d4c3375", "committedDate": "2020-03-20T00:38:24Z", "message": "HACK take 3: use env var not used by local Cloud Build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fc41828534500ae55baf5643dd988a24670d1be", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/1fc41828534500ae55baf5643dd988a24670d1be", "committedDate": "2020-03-20T01:22:36Z", "message": "Merge branch 'master' into gcf-slack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1583f6391e14c6c71d6cab715597b90028965738", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/1583f6391e14c6c71d6cab715597b90028965738", "committedDate": "2020-03-20T01:24:48Z", "message": "Remove gitignore now that config.json isnt used"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d64f80dbbecc746064980942556a63f21df3011b", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/d64f80dbbecc746064980942556a63f21df3011b", "committedDate": "2020-03-20T19:24:40Z", "message": "Merge branch 'master' into gcf-slack"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzU1ODA1", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2394#pullrequestreview-378755805", "createdAt": "2020-03-20T19:24:45Z", "commit": {"oid": "1583f6391e14c6c71d6cab715597b90028965738"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ee5f0dd46333a1af5df658ee076d21fdf5fe9d8", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/5ee5f0dd46333a1af5df658ee076d21fdf5fe9d8", "committedDate": "2020-03-20T20:44:21Z", "message": "DBG: print defined env vars"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dc41288916f8c9fb8c4dd577c742f64ab848f12", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/3dc41288916f8c9fb8c4dd577c742f64ab848f12", "committedDate": "2020-03-20T20:53:36Z", "message": "DBG take 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3be1ce9e9c0d975fca8ef79f26cb67feb6d5e69", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/d3be1ce9e9c0d975fca8ef79f26cb67feb6d5e69", "committedDate": "2020-03-20T21:32:51Z", "message": "DBG take 3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b6ea96655897c0c45ec2b1a9f291090be592818", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/4b6ea96655897c0c45ec2b1a9f291090be592818", "committedDate": "2020-03-20T22:30:04Z", "message": "DBG take 4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d877a9f0a2d67caabff165b5b1922f5566b7a0", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/c6d877a9f0a2d67caabff165b5b1922f5566b7a0", "committedDate": "2020-03-20T23:26:44Z", "message": "DBG take 5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fcc16e1ca1f40875673339965ce8889fb07ca6f", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/3fcc16e1ca1f40875673339965ce8889fb07ca6f", "committedDate": "2020-03-20T23:47:19Z", "message": "DBG take 6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "784175883948de45a754ea9241ceace44aed9d29", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/784175883948de45a754ea9241ceace44aed9d29", "committedDate": "2020-03-21T00:12:06Z", "message": "DBG take 7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "561fb1133689ddf3ddc9b580740f2d4fd64e7229", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/561fb1133689ddf3ddc9b580740f2d4fd64e7229", "committedDate": "2020-03-21T00:15:45Z", "message": "Fix tests...?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18b011eed7458e037663c8fe9a4e190582289653", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/18b011eed7458e037663c8fe9a4e190582289653", "committedDate": "2020-03-21T00:29:45Z", "message": "Revert dbg commits + fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f336ae5aab3c94006f821603d0ccdc206a2d88b4", "author": {"user": {"login": "ace-n", "name": "Ace Nassri"}}, "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/f336ae5aab3c94006f821603d0ccdc206a2d88b4", "committedDate": "2020-03-21T00:38:55Z", "message": "Merge branch 'master' into gcf-slack"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 923, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}