{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTk5MDQ0", "number": 309, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNToyODoxM1rOELvGGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNTozMDo0MlrOELvKNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNzQxNDAxOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/dennisguse/opentracks/TrackDeleteActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNToyODoxM1rOGtcPWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNToyODoxM1rOGtcPWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMwMTc4Nw==", "bodyText": "When deleting is finished the user can see the spinner going down. Why don't hide it before finish()?\nfindViewById(R.id.progress_bar).setVisibility(View.INVISIBLE);", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/309#discussion_r450301787", "createdAt": "2020-07-06T15:28:13Z", "author": {"login": "rgmf"}, "path": "src/main/java/de/dennisguse/opentracks/TrackDeleteActivity.java", "diffHunk": "@@ -44,53 +42,52 @@ public void onCreate(Bundle savedInstanceState) {\n         setResult(RESULT_CANCELED);\n \n         Intent intent = getIntent();\n-        long[] trackIds = intent.getLongArrayExtra(EXTRA_TRACK_IDS);\n-\n-        Object retained = getLastNonConfigurationInstance();\n-        if (retained instanceof DeleteAsyncTask) {\n-            deleteAsyncTask = (DeleteAsyncTask) retained;\n-            deleteAsyncTask.setActivity(this);\n-        } else {\n-            deleteAsyncTask = new DeleteAsyncTask(this, trackIds);\n-            deleteAsyncTask.execute();\n-        }\n+        trackIds = intent.getLongArrayExtra(EXTRA_TRACK_IDS);\n+\n+        deleteAsyncTask = new DeleteAsyncTask();\n     }\n \n     @Override\n-    public Object onRetainNonConfigurationInstance() {\n-        deleteAsyncTask.setActivity(null);\n-        return deleteAsyncTask;\n+    protected void onStart() {\n+        super.onStart();\n+        deleteAsyncTask.execute();\n     }\n \n     @Override\n-    protected Dialog onCreateDialog(int id) {\n-        if (id != DIALOG_PROGRESS_ID) {\n-            return null;\n-        }\n-        return DialogUtils.createSpinnerProgressDialog(\n-                this, R.string.track_delete_progress_message, new DialogInterface.OnCancelListener() {\n-                    @Override\n-                    public void onCancel(DialogInterface dialog) {\n-                        deleteAsyncTask.cancel(true);\n-                        dialog.dismiss();\n-                        finish();\n-                    }\n-                });\n+    protected void onStop() {\n+        super.onStop();\n+        deleteAsyncTask.cancel(true);\n+    }\n+\n+    @Override\n+    protected int getLayoutResId() {\n+        return R.layout.track_delete;\n     }\n \n-    /**\n-     * Invokes when the associated AsyncTask completes.\n-     */\n     public void onAsyncTaskCompleted() {\n-        removeDialog(DIALOG_PROGRESS_ID);\n         setResult(RESULT_OK);\n         finish();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2ceb88e8376f656093d50a4881376b53e442f44"}, "originalPosition": 88}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNzQyNDUyOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/dennisguse/opentracks/AbstractListActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNTozMDo0MlrOGtcV_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNTozMDo0MlrOGtcV_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMwMzQ4Ng==", "bodyText": "I like the best this transition for TrackDeleteActivity start (below startActivityForResult):\noverridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/309#discussion_r450303486", "createdAt": "2020-07-06T15:30:42Z", "author": {"login": "rgmf"}, "path": "src/main/java/de/dennisguse/opentracks/AbstractListActivity.java", "diffHunk": "@@ -62,17 +62,15 @@ protected void deleteTracks(long[] trackIds) {\n     @Override\n     public void onConfirmDeleteDone(long[] trackIds) {\n         boolean stopRecording = false;\n-        if (trackIds.length == 1 && trackIds[0] == -1L) {\n-            stopRecording = true;\n-        } else {\n-            long recordingTrackId = PreferencesUtils.getRecordingTrackId(this);\n-            for (long trackId : trackIds) {\n-                if (trackId == recordingTrackId) {\n-                    stopRecording = true;\n-                    break;\n-                }\n+\n+        long recordingTrackId = PreferencesUtils.getRecordingTrackId(this);\n+        for (long trackId : trackIds) {\n+            if (trackId == recordingTrackId) {\n+                stopRecording = true;\n+                break;\n             }\n         }\n+\n         if (stopRecording) {\n             getTrackRecordingServiceConnection().stopRecording(this, false);\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2ceb88e8376f656093d50a4881376b53e442f44"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1923, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}