{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDk2ODU2", "number": 543, "title": "Viewpager2 zoom", "bodyText": "Almost not tested.\nApproach: ChartView handles all touchEvents if\n\nmore than one pointer is down (i.e., zooming in progress), or\nthe view is in zoomed mode (and the user can scroll)\notherwise the parent may react to the events.\n\nThe following case felt weird:\n\nGo to \"By time\"\nZoom\nScroll from right to left until moving to \"By distance\"\nSwipe back to \"By time\"\nThen the ChartView is reset and thus the user needs to zoom/scroll again.\nAlso: The user has no indication to see when he might swipe to the next tab as s/he doesn't\nknow how much is left on the x-axis.", "createdAt": "2020-12-05T21:46:24Z", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/543", "merged": true, "mergeCommit": {"oid": "eb79f2277a9b225d9c2456e4c6b0a9c249a7e529"}, "closed": true, "closedAt": "2020-12-06T21:35:45Z", "author": {"login": "dennisguse"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhAmipAH2gAyNTMzMDk2ODU2Ojk0Mzg1ZTUzOWY0YWY5MmVmMWQxMjFlYWUyNTg5NWNlMTdiZWMyMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjhRstgFqTU0NTcwNzU4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94385e539f4af92ef1d121eae25895ce17bec210", "author": {"user": {"login": "rgmf", "name": "Rom\u00e1n Mart\u00ednez"}}, "url": "https://github.com/OpenTracksApp/OpenTracks/commit/94385e539f4af92ef1d121eae25895ce17bec210", "committedDate": "2020-11-28T18:38:50Z", "message": "ViewPager migrate to ViewPager2. Fixes #522.\nSwiping between tabs work. Fixes #105."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a22d13b7fcb3cbd6153eb02d7adae028a981f3f", "author": {"user": {"login": "dennisguse", "name": "Dennis Guse"}}, "url": "https://github.com/OpenTracksApp/OpenTracks/commit/7a22d13b7fcb3cbd6153eb02d7adae028a981f3f", "committedDate": "2020-12-05T21:34:23Z", "message": "ChartView let's parent handle TouchEvents if not zoomed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzAxNTY3", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/543#pullrequestreview-545701567", "createdAt": "2020-12-06T12:40:46Z", "commit": {"oid": "7a22d13b7fcb3cbd6153eb02d7adae028a981f3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxMjo0MDo0N1rOIAJwCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxMjo0MDo0N1rOIAJwCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAzMDY2NQ==", "bodyText": "In that way only can swip if there are not zoom.\nIf you prefer that behaviour, what would you think add double tap to zoom out?", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/543#discussion_r537030665", "createdAt": "2020-12-06T12:40:47Z", "author": {"login": "rgmf"}, "path": "src/main/java/de/dennisguse/opentracks/chart/ChartView.java", "diffHunk": "@@ -527,6 +542,10 @@ public void computeScroll() {\n     public boolean onTouchEvent(MotionEvent event) {\n         boolean isZoom = detectorZoom.onTouchEvent(event);\n         boolean isScrollTab = detectorScrollFlingTab.onTouchEvent(event);\n+\n+        // ChartView handles zoom gestures (more than one pointer) and all gestures when zoomed itself\n+        requestDisallowInterceptTouchEventInParent(event.getPointerCount() != 1 || zoomLevel != MIN_ZOOM_LEVEL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a22d13b7fcb3cbd6153eb02d7adae028a981f3f"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzA3NTgy", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/543#pullrequestreview-545707582", "createdAt": "2020-12-06T13:50:47Z", "commit": {"oid": "7a22d13b7fcb3cbd6153eb02d7adae028a981f3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2225, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}