{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1ODczMDM0", "number": 1991, "title": "Avro: Schema conversions should preserve field docs", "bodyText": "This addresses issue #1954", "createdAt": "2020-12-27T23:49:06Z", "url": "https://github.com/apache/iceberg/pull/1991", "merged": true, "mergeCommit": {"oid": "7001d95b8635d58f54795e1ec4c588697e86f47d"}, "closed": true, "closedAt": "2020-12-28T18:47:59Z", "author": {"login": "kbendick"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqZIKmAH2gAyNTQ1ODczMDM0OmQ3YzZlZjZiZTU2ZjY4NDkyZWIwYmI0ODBkYWRhM2JmMjYyZjZiMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdqqtLkgFqTU1OTI2MTMyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7c6ef6be56f68492eb0bb480dada3bf262f6b1d", "author": {"user": {"login": "kbendick", "name": "Kyle Bendickson"}}, "url": "https://github.com/apache/iceberg/commit/d7c6ef6be56f68492eb0bb480dada3bf262f6b1d", "committedDate": "2020-12-27T22:18:36Z", "message": "Handle field level doc comments when converting between avro and iceberg types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc851c9f77ad6be8e695c0c035c346f7e95ad12e", "author": {"user": {"login": "kbendick", "name": "Kyle Bendickson"}}, "url": "https://github.com/apache/iceberg/commit/fc851c9f77ad6be8e695c0c035c346f7e95ad12e", "committedDate": "2020-12-27T23:21:29Z", "message": "Add in test to ensure field docs are preserved in roundtrip iceberg-avro schema conversions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MDA3MzUx", "url": "https://github.com/apache/iceberg/pull/1991#pullrequestreview-559007351", "createdAt": "2020-12-28T06:07:36Z", "commit": {"oid": "9e99c2e17b190aae09c0939338231ca3874cfaf7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQwNjowNzozNlrOILyI8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQwNjowNzozNlrOILyI8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTIyNjczNw==", "bodyText": "Technically this limit needs to be at least 12817 bytes.\nThat's one byte larger than the number of bins used in the tests * the size of the largest manifest file in either test run (v1 or v2, v2 is slightly larger) for the set of operations defined in the test to meet their assertions, but I chose a value slightly larger / rounded value to match somewhat how the test was previously set up.\nFeel free to suggest a different value.", "url": "https://github.com/apache/iceberg/pull/1991#discussion_r549226737", "createdAt": "2020-12-28T06:07:36Z", "author": {"login": "kbendick"}, "path": "core/src/test/java/org/apache/iceberg/TestMergeAppend.java", "diffHunk": "@@ -239,8 +239,10 @@ public void testMergeWithExistingManifest() {\n   public void testManifestMergeMinCount() throws IOException {\n     Assert.assertEquals(\"Table should start empty\", 0, listManifestFiles().size());\n     table.updateProperties().set(TableProperties.MANIFEST_MIN_MERGE_COUNT, \"2\")\n-        // each manifest file is 5227 bytes, so 12000 bytes limit will give us 2 bins with 3 manifest/data files.\n-        .set(TableProperties.MANIFEST_TARGET_SIZE_BYTES, \"12000\")\n+        // Each initial v1/v2 ManifestFile is 5661/6397 bytes respectively. Merging two of the given\n+        // manifests make one v1/v2 ManifestFile of 5672/6408 bytes respectively, so 12850 bytes\n+        // limit will give us two bins with three manifest/data files.\n+        .set(TableProperties.MANIFEST_TARGET_SIZE_BYTES, \"12850\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e99c2e17b190aae09c0939338231ca3874cfaf7"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa3ba3cdaadeb570124609997ec05476a82fc7b5", "author": {"user": {"login": "kbendick", "name": "Kyle Bendickson"}}, "url": "https://github.com/apache/iceberg/commit/fa3ba3cdaadeb570124609997ec05476a82fc7b5", "committedDate": "2020-12-28T06:24:55Z", "message": "Update table test that uses outdated manifest file size to configure the target to merge to account for increase in manifest file header size"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e99c2e17b190aae09c0939338231ca3874cfaf7", "author": {"user": {"login": "kbendick", "name": "Kyle Bendickson"}}, "url": "https://github.com/apache/iceberg/commit/9e99c2e17b190aae09c0939338231ca3874cfaf7", "committedDate": "2020-12-28T05:51:20Z", "message": "Update comments about the updated manifest target size to account for field docs in the manifest header"}, "afterCommit": {"oid": "fa3ba3cdaadeb570124609997ec05476a82fc7b5", "author": {"user": {"login": "kbendick", "name": "Kyle Bendickson"}}, "url": "https://github.com/apache/iceberg/commit/fa3ba3cdaadeb570124609997ec05476a82fc7b5", "committedDate": "2020-12-28T06:24:55Z", "message": "Update table test that uses outdated manifest file size to configure the target to merge to account for increase in manifest file header size"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjYxMzIw", "url": "https://github.com/apache/iceberg/pull/1991#pullrequestreview-559261320", "createdAt": "2020-12-28T18:47:25Z", "commit": {"oid": "fa3ba3cdaadeb570124609997ec05476a82fc7b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3333, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}