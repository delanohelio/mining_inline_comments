{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2ODM4NzI4", "number": 2007, "title": "Fix update partition spec with only rename changes", "bodyText": "Fix update partition spec with only rename changes by treating the new spec as incompatible one.", "createdAt": "2020-12-30T07:51:35Z", "url": "https://github.com/apache/iceberg/pull/2007", "merged": true, "mergeCommit": {"oid": "fb222525f1d9a07be53d6b6a7b1831ce1713a6ca"}, "closed": true, "closedAt": "2020-12-31T20:09:48Z", "author": {"login": "jun-he"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdrKgcaAH2gAyNTQ2ODM4NzI4OmQ5NGQzMTg2MTQxZWMzNWViYzgwMmE2YTM1ZGM5MDg0MDlkZWFkZjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrprXNgFqTU2MDU0MzM5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d94d3186141ec35ebc802a6a35dc908409deadf5", "author": {"user": {"login": "jun-he", "name": null}}, "url": "https://github.com/apache/iceberg/commit/d94d3186141ec35ebc802a6a35dc908409deadf5", "committedDate": "2020-12-30T07:50:28Z", "message": "Fix update partition spec with only rename changes by treating the new spec as incompatible one."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMTY3NjU0", "url": "https://github.com/apache/iceberg/pull/2007#pullrequestreview-560167654", "createdAt": "2020-12-30T19:04:54Z", "commit": {"oid": "d94d3186141ec35ebc802a6a35dc908409deadf5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxOTowNDo1NFrOIMzdgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxOTowNDo1NFrOIMzdgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDI5Njk2MA==", "bodyText": "This seems like it should be its own test case. Could you move it?", "url": "https://github.com/apache/iceberg/pull/2007#discussion_r550296960", "createdAt": "2020-12-30T19:04:54Z", "author": {"login": "rdblue"}, "path": "core/src/test/java/org/apache/iceberg/TestTableUpdatePartitionSpec.java", "diffHunk": "@@ -140,6 +140,19 @@ public void testRenameField() {\n \n     Assert.assertEquals(\"should match evolved spec\", evolvedSpec, table.spec());\n     Assert.assertEquals(1002, table.spec().lastAssignedFieldId());\n+\n+    table.updateSpec()\n+        .renameField(\"id_bucket_8\", \"id_partition\")\n+        .commit();\n+\n+    evolvedSpec = PartitionSpec.builderFor(table.schema())\n+        .withSpecId(3)\n+        .bucket(\"data\", 16, \"data_bucket\")\n+        .bucket(\"id\", 8, \"id_partition\")\n+        .truncate(\"id\", 4, \"id_trunc_4\")\n+        .build();\n+    Assert.assertEquals(\"should match evolved spec\", evolvedSpec, table.spec());\n+    Assert.assertEquals(1002, table.spec().lastAssignedFieldId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d94d3186141ec35ebc802a6a35dc908409deadf5"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "267ffb2e3f630b0f263b8e063b2e18dcc5455457", "author": {"user": {"login": "jun-he", "name": null}}, "url": "https://github.com/apache/iceberg/commit/267ffb2e3f630b0f263b8e063b2e18dcc5455457", "committedDate": "2020-12-31T08:10:29Z", "message": "address the comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTQzMzk0", "url": "https://github.com/apache/iceberg/pull/2007#pullrequestreview-560543394", "createdAt": "2020-12-31T20:09:27Z", "commit": {"oid": "267ffb2e3f630b0f263b8e063b2e18dcc5455457"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3354, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}