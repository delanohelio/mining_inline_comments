{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MTc4NDI2", "number": 1205, "title": "Update the site for the 0.9.0 release", "bodyText": "This updates the site for the 0.9.0 release:\n\nAdd 0.9.0 to the releases page\nPoint Javadoc redirect to 0.9.0\nAdd warnings to Spark documentation\nUpdate the Getting Started page to use Spark 3 SQL instead of the Java API and DataFrames\nAdd Spark catalogs to Configuration\nRemove duplicate Spark API Quickstart with the same content as Java API Quickstart\nMinor updates to CSS to reduce density", "createdAt": "2020-07-15T00:31:11Z", "url": "https://github.com/apache/iceberg/pull/1205", "merged": true, "mergeCommit": {"oid": "39348fec94d08a9eb4f3da0b41e002adc8b832d9"}, "closed": true, "closedAt": "2020-07-15T18:58:46Z", "author": {"login": "rdblue"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0_c_rAH2gAyNDQ5MTc4NDI2OjM2OWMzMmRjNDEzN2QxNjQzN2MwYjcxMzI2YTBmYmFmZTMwNmNjYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1OlOeAFqTQ0OTIwNTQ1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "369c32dc4137d16437c0b71326a0fbafe306ccc4", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/369c32dc4137d16437c0b71326a0fbafe306ccc4", "committedDate": "2020-07-15T00:25:50Z", "message": "Update the site for the 0.9.0 release."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NTUzMzE1", "url": "https://github.com/apache/iceberg/pull/1205#pullrequestreview-448553315", "createdAt": "2020-07-15T00:32:45Z", "commit": {"oid": "369c32dc4137d16437c0b71326a0fbafe306ccc4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMDozMjo0NVrOGxp_RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMDozMjo0NVrOGxp_RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyMTM0OQ==", "bodyText": "@dongjoon-hyun, this is the warning I've added to make people aware of the issues with the DataFrameReader. Please take a look if you have time. There is also one below for the v1 DataFrameWriter API.", "url": "https://github.com/apache/iceberg/pull/1205#discussion_r454721349", "createdAt": "2020-07-15T00:32:45Z", "author": {"login": "rdblue"}, "path": "site/docs/spark.md", "diffHunk": "@@ -286,6 +286,11 @@ val df = spark.read\n     .table(\"prod.db.table\")\n ```\n \n+!!! Warning\n+    When reading with DataFrames in Spark 3, use `table` to load a table by name from a catalog.\n+    Using `format(\"iceberg\")` loads an isolated table reference that is not refreshed when other queries update the table.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "369c32dc4137d16437c0b71326a0fbafe306ccc4"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/2b40723c134f7701b73916e4c3162b015c0f3f40", "committedDate": "2020-07-15T00:51:11Z", "message": "Fix broken link."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NTY4MjU3", "url": "https://github.com/apache/iceberg/pull/1205#pullrequestreview-448568257", "createdAt": "2020-07-15T01:24:18Z", "commit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNDoxOFrOGxq17A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNDoxOFrOGxq17A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczNTM0MA==", "bodyText": "Ya. We should release Apache Spark 3.0.1 soon for the users.", "url": "https://github.com/apache/iceberg/pull/1205#discussion_r454735340", "createdAt": "2020-07-15T01:24:18Z", "author": {"login": "dongjoon-hyun"}, "path": "site/docs/spark.md", "diffHunk": "@@ -353,6 +358,13 @@ To replace data in the table with the result of a query, use `INSERT OVERWRITE`.\n \n The partitions that will be replaced by `INSERT OVERWRITE` depends on Spark's partition overwrite mode and the partitioning of a table.\n \n+!!! Warning\n+    Spark 3.0.0 has a correctness bug that affects dynamic `INSERT OVERWRITE` with hidden partitioning, [SPARK-32168][spark-32168].\n+    For tables with [hidden partitions](../partitioning), wait for Spark 3.0.1.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NTY4MzQ2", "url": "https://github.com/apache/iceberg/pull/1205#pullrequestreview-448568346", "createdAt": "2020-07-15T01:24:36Z", "commit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNDozNlrOGxq2Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMToyNDozNlrOGxq2Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczNTQxOA==", "bodyText": "Thanks, @rdblue !", "url": "https://github.com/apache/iceberg/pull/1205#discussion_r454735418", "createdAt": "2020-07-15T01:24:36Z", "author": {"login": "dongjoon-hyun"}, "path": "site/docs/spark.md", "diffHunk": "@@ -432,6 +444,13 @@ Spark 3 introduced the new `DataFrameWriterV2` API for writing to tables using d\n     - `df.writeTo(t).append()` is equivalent to `INSERT INTO`\n     - `df.writeTo(t).overwritePartitions()` is equivalent to dynamic `INSERT OVERWRITE`\n \n+The v1 DataFrame `write` API is still supported, but is not recommended.\n+\n+!!! Warning\n+    When writing with the v1 DataFrame API in Spark 3, use `saveAsTable` or `insertInto` to load tables with a catalog.\n+    Using `format(\"iceberg\")` loads an isolated table reference that will not automatically refresh tables used by queries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NTY5OTMy", "url": "https://github.com/apache/iceberg/pull/1205#pullrequestreview-448569932", "createdAt": "2020-07-15T01:30:00Z", "commit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MjA1NDU4", "url": "https://github.com/apache/iceberg/pull/1205#pullrequestreview-449205458", "createdAt": "2020-07-15T18:03:24Z", "commit": {"oid": "2b40723c134f7701b73916e4c3162b015c0f3f40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4261, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}