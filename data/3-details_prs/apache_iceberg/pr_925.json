{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTUzOTQy", "number": 925, "title": "Move manifest factory methods", "bodyText": "This is a refactor that was part of #913, but causes that commit to change lots of files. Separating it out should be cleaner.", "createdAt": "2020-04-15T19:45:07Z", "url": "https://github.com/apache/iceberg/pull/925", "merged": true, "mergeCommit": {"oid": "a5e77369c330873a6a292b8952b1ca09b7712bb7"}, "closed": true, "closedAt": "2020-04-15T23:44:36Z", "author": {"login": "rdblue"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX_hk3AH2gAyNDAzOTUzOTQyOmRiYjBjNTJkYmE0NjFhYmRiZTUzMzI3MWRjZTgxODlmMzcwZDc2Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYAxXTgH2gAyNDAzOTUzOTQyOmZmOGUxODIzODUzNGFkMzUwYjhmOTI5ZDRlOWJiZmRhOWY1Zjc3NTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dbb0c52dba461abdbe533271dce8189f370d7628", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/dbb0c52dba461abdbe533271dce8189f370d7628", "committedDate": "2020-04-15T22:07:02Z", "message": "Move manifest factory methods to ManifestFiles."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "689c3709389cf5f124f2b19670f27c82ac84c6b7", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/689c3709389cf5f124f2b19670f27c82ac84c6b7", "committedDate": "2020-04-15T22:07:02Z", "message": "Move copyManifest methods and add format version argument."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72bd99d21840eb0f9c9367200f15301840221b33", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/72bd99d21840eb0f9c9367200f15301840221b33", "committedDate": "2020-04-15T22:08:03Z", "message": "Fix tests added in #845."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9e331864dab48c7f667345e8bfcc87cb12e7e36", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/f9e331864dab48c7f667345e8bfcc87cb12e7e36", "committedDate": "2020-04-15T19:44:08Z", "message": "Move copyManifest methods and add format version argument."}, "afterCommit": {"oid": "72bd99d21840eb0f9c9367200f15301840221b33", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/72bd99d21840eb0f9c9367200f15301840221b33", "committedDate": "2020-04-15T22:08:03Z", "message": "Fix tests added in #845."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTcxOTU4", "url": "https://github.com/apache/iceberg/pull/925#pullrequestreview-394171958", "createdAt": "2020-04-15T22:12:53Z", "commit": {"oid": "f9e331864dab48c7f667345e8bfcc87cb12e7e36"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMjoyNzoyMlrOGGNyqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMjozMDozM1rOGGN3hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3MDYwMQ==", "bodyText": "Do we want to deprecate this too?", "url": "https://github.com/apache/iceberg/pull/925#discussion_r409170601", "createdAt": "2020-04-15T22:27:22Z", "author": {"login": "aokolnychyi"}, "path": "core/src/main/java/org/apache/iceberg/ManifestWriter.java", "diffHunk": "@@ -94,15 +46,7 @@ static ManifestFile copyManifest(ManifestReader reader, OutputFile outputFile, l\n    * @return a manifest writer\n    */\n   public static ManifestWriter write(PartitionSpec spec, OutputFile outputFile) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72bd99d21840eb0f9c9367200f15301840221b33"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3MTg0Nw==", "bodyText": "Why do we keep only this version for compatibility? I thought the one below was the preferred way. Would it make sense to keep both and mark them deprecated? Versions that accept ManifestFile were not released yet, so we should definitely remove those.", "url": "https://github.com/apache/iceberg/pull/925#discussion_r409171847", "createdAt": "2020-04-15T22:30:33Z", "author": {"login": "aokolnychyi"}, "path": "core/src/main/java/org/apache/iceberg/ManifestReader.java", "diffHunk": "@@ -62,63 +61,18 @@\n   /**\n    * Returns a new {@link ManifestReader} for an {@link InputFile}.\n    * <p>\n-   * <em>Note:</em> Most callers should use {@link #read(ManifestFile, FileIO, Map)} to ensure that\n+   * <em>Note:</em> Callers should use {@link ManifestFiles#read(ManifestFile, FileIO, Map)} to ensure that\n    * manifest entries with partial metadata can inherit missing properties from the manifest metadata.\n-   * <p>\n-   * <em>Note:</em> Most callers should use {@link #read(InputFile, Map)} if all manifest entries\n-   * contain full metadata and they want to ensure that the schema used by filters is the latest\n-   * table schema. This should be used only when reading a manifest without filters.\n    *\n    * @param file an InputFile\n    * @return a manifest reader\n+   * @deprecated use {@link ManifestFiles#read(ManifestFile, FileIO, Map)}.\n    */\n+  @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72bd99d21840eb0f9c9367200f15301840221b33"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTgwMDIw", "url": "https://github.com/apache/iceberg/pull/925#pullrequestreview-394180020", "createdAt": "2020-04-15T22:31:19Z", "commit": {"oid": "72bd99d21840eb0f9c9367200f15301840221b33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c565af50ae9bbaffd59c3acd39b0335c099ad97a", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/c565af50ae9bbaffd59c3acd39b0335c099ad97a", "committedDate": "2020-04-15T22:44:40Z", "message": "Deprecate ManifestWriter.write method."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ebeb7bce6e7201292f3acdb924c61b8cfc56de3", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/3ebeb7bce6e7201292f3acdb924c61b8cfc56de3", "committedDate": "2020-04-15T22:54:17Z", "message": "Add old ManifestReader.read method and remove deprecated uses."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff8e18238534ad350b8f929d4e9bbfda9f5f7756", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/ff8e18238534ad350b8f929d4e9bbfda9f5f7756", "committedDate": "2020-04-15T23:34:11Z", "message": "Fix tests."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4805, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}