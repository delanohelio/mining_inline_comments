{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMDU1NDU1", "number": 1579, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNjowNjoxN1rOEssXAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNjowNjoxN1rOEssXAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1Mjk5NTg1OnYy", "diffSide": "RIGHT", "path": "mr/src/test/java/org/apache/iceberg/mr/hive/TestHiveIcebergFilterFactory.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNjowNjoxN1rOHgExzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQyMDoxNzo1NFrOHgL-Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5NDc2NQ==", "bodyText": "We need to avoid using classes that will change behavior based on time zone to parse the value of a date or timestamp. This method was purposely not used. The problem here is probably that although the instant value is correct, the Date uses the JVM time zone somehow.", "url": "https://github.com/apache/iceberg/pull/1579#discussion_r503394765", "createdAt": "2020-10-12T16:06:17Z", "author": {"login": "rdblue"}, "path": "mr/src/test/java/org/apache/iceberg/mr/hive/TestHiveIcebergFilterFactory.java", "diffHunk": "@@ -207,8 +206,8 @@ public void testBooleanType() {\n   @Test\n   public void testDateType() {\n     SearchArgument.Builder builder = SearchArgumentFactory.newBuilder();\n-    Date gmtDate = new Date(LocalDate.of(2015, 11, 12).atStartOfDay(ZoneOffset.UTC).toInstant().toEpochMilli());\n-    SearchArgument arg = builder.startAnd().equals(\"date\", PredicateLeaf.Type.DATE, gmtDate).end().build();\n+    Date date = Date.valueOf(\"2015-11-12\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a42de42d500ab342d8c727ab8d22c0f471f3198"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ4MzE0Nw==", "bodyText": "I had a feeling this method was purposely not used, but I wasn't sure of a better option so I figured I'd open the PR and then let somebody point it out. I also figured that the flakey test was indicative of more than just a flakey test. I'll apply your suggestions this evening after work.", "url": "https://github.com/apache/iceberg/pull/1579#discussion_r503483147", "createdAt": "2020-10-12T19:10:08Z", "author": {"login": "kbendick"}, "path": "mr/src/test/java/org/apache/iceberg/mr/hive/TestHiveIcebergFilterFactory.java", "diffHunk": "@@ -207,8 +206,8 @@ public void testBooleanType() {\n   @Test\n   public void testDateType() {\n     SearchArgument.Builder builder = SearchArgumentFactory.newBuilder();\n-    Date gmtDate = new Date(LocalDate.of(2015, 11, 12).atStartOfDay(ZoneOffset.UTC).toInstant().toEpochMilli());\n-    SearchArgument arg = builder.startAnd().equals(\"date\", PredicateLeaf.Type.DATE, gmtDate).end().build();\n+    Date date = Date.valueOf(\"2015-11-12\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5NDc2NQ=="}, "originalCommit": {"oid": "0a42de42d500ab342d8c727ab8d22c0f471f3198"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzUxMjYzNQ==", "bodyText": "I reverted this to the previous code. It's running on my local now with the patch for daysFromDate.", "url": "https://github.com/apache/iceberg/pull/1579#discussion_r503512635", "createdAt": "2020-10-12T20:17:54Z", "author": {"login": "kbendick"}, "path": "mr/src/test/java/org/apache/iceberg/mr/hive/TestHiveIcebergFilterFactory.java", "diffHunk": "@@ -207,8 +206,8 @@ public void testBooleanType() {\n   @Test\n   public void testDateType() {\n     SearchArgument.Builder builder = SearchArgumentFactory.newBuilder();\n-    Date gmtDate = new Date(LocalDate.of(2015, 11, 12).atStartOfDay(ZoneOffset.UTC).toInstant().toEpochMilli());\n-    SearchArgument arg = builder.startAnd().equals(\"date\", PredicateLeaf.Type.DATE, gmtDate).end().build();\n+    Date date = Date.valueOf(\"2015-11-12\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5NDc2NQ=="}, "originalCommit": {"oid": "0a42de42d500ab342d8c727ab8d22c0f471f3198"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3585, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}