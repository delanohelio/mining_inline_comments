{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExODExMDQy", "number": 1673, "title": "Entries Tables Working with Delete Manifests", "bodyText": "Previously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed.", "createdAt": "2020-10-28T20:13:54Z", "url": "https://github.com/apache/iceberg/pull/1673", "merged": true, "mergeCommit": {"oid": "43a7427874ab01c6811979b3b97e6c97fe074184"}, "closed": true, "closedAt": "2020-10-29T18:51:19Z", "author": {"login": "RussellSpitzer"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXDjnxgFqTUxOTA1NDk5MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXWxzOAFqTUxOTk3NTQ2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDU0OTkx", "url": "https://github.com/apache/iceberg/pull/1673#pullrequestreview-519054991", "createdAt": "2020-10-28T20:26:06Z", "commit": {"oid": "94c92efd2e5c1d0f1a424d7332e29bb70ffed585"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDoyNjowNlrOHp8Fcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDoyNjowNlrOHp8Fcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzczODA5OA==", "bodyText": "Nit: I think it's usually better to wrap a line at the start of an argument instead of at a method call in an argument, so \\nops.current().specsById() instead of ops.current()\\n.specsById(). Otherwise, it looks like you may be calling specsById on ManifestReadTask.", "url": "https://github.com/apache/iceberg/pull/1673#discussion_r513738098", "createdAt": "2020-10-28T20:26:06Z", "author": {"login": "rdblue"}, "path": "core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java", "diffHunk": "@@ -112,28 +113,36 @@ protected long targetSplitSize(TableOperations ops) {\n       ResidualEvaluator residuals = ResidualEvaluator.unpartitioned(filter);\n \n       return CloseableIterable.transform(manifests, manifest ->\n-          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals));\n+          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals, ops.current()\n+              .specsById()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94c92efd2e5c1d0f1a424d7332e29bb70ffed585"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDU1Njkx", "url": "https://github.com/apache/iceberg/pull/1673#pullrequestreview-519055691", "createdAt": "2020-10-28T20:27:05Z", "commit": {"oid": "94c92efd2e5c1d0f1a424d7332e29bb70ffed585"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1d2101122cac07988b50590e1e9318764d49cf4", "author": {"user": {"login": "RussellSpitzer", "name": "Russell Spitzer"}}, "url": "https://github.com/apache/iceberg/commit/f1d2101122cac07988b50590e1e9318764d49cf4", "committedDate": "2020-10-28T20:35:03Z", "message": "Entries Tables Working with Delete Manifests\n\nPreviously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94c92efd2e5c1d0f1a424d7332e29bb70ffed585", "author": {"user": {"login": "RussellSpitzer", "name": "Russell Spitzer"}}, "url": "https://github.com/apache/iceberg/commit/94c92efd2e5c1d0f1a424d7332e29bb70ffed585", "committedDate": "2020-10-28T19:02:49Z", "message": "Entries Tables Working with Delete Manifests\n\nPreviously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed."}, "afterCommit": {"oid": "f1d2101122cac07988b50590e1e9318764d49cf4", "author": {"user": {"login": "RussellSpitzer", "name": "Russell Spitzer"}}, "url": "https://github.com/apache/iceberg/commit/f1d2101122cac07988b50590e1e9318764d49cf4", "committedDate": "2020-10-28T20:35:03Z", "message": "Entries Tables Working with Delete Manifests\n\nPreviously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTc1NDYx", "url": "https://github.com/apache/iceberg/pull/1673#pullrequestreview-519975461", "createdAt": "2020-10-29T18:49:48Z", "commit": {"oid": "f1d2101122cac07988b50590e1e9318764d49cf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3637, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}