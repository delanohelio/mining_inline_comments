{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMTE1MTE1", "number": 903, "title": "Prepare metadata writers for format v2", "bodyText": "Adding support for row-level deletes requires a new format version, v2. Previously, table format was checked when reading metadata, but not used anywhere else. This adds the format version to TableMetadata and updates metadata writes to pass the format version. This makes it possible to maintain v1 and iterate on v2 metadata in parallel.", "createdAt": "2020-04-08T22:38:32Z", "url": "https://github.com/apache/iceberg/pull/903", "merged": true, "mergeCommit": {"oid": "c094da57db072187b2d930ae6c5590218012ec3f"}, "closed": true, "closedAt": "2020-04-09T19:14:34Z", "author": {"login": "rdblue"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVvskvgH2gAyNDAxMTE1MTE1OjczMGIzOTEzMmYxNjEyNjg3OWVjZjhjM2Q5ZjQ5MTZhZTlkMTIzMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWBSF8gFqTM5MTA1NTA1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "730b39132f16126879ecf8c3d9f4916ae9d12312", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/730b39132f16126879ecf8c3d9f4916ae9d12312", "committedDate": "2020-04-08T22:32:43Z", "message": "Remove unnecessary constructor from TableMetadata."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce4b25dd9f7ffce9861f758b6118b10ca789e04c", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/ce4b25dd9f7ffce9861f758b6118b10ca789e04c", "committedDate": "2020-04-08T22:34:08Z", "message": "Track format version in TableMetadata."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "804d60a3d3864b8fe2e130d4f28937fd6278bca4", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/804d60a3d3864b8fe2e130d4f28937fd6278bca4", "committedDate": "2020-04-08T22:34:08Z", "message": "Pass formatVersion when creating a manifest writer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dd9c68150b20e1d821898c12e5bb971bca0b7fb", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/6dd9c68150b20e1d821898c12e5bb971bca0b7fb", "committedDate": "2020-04-08T22:34:08Z", "message": "Pass formatVersion when creating a manifest list writer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2facd4470384cf0d3429b1d71c36e906fbdc4b80", "author": {"user": {"login": "rdblue", "name": "Ryan Blue"}}, "url": "https://github.com/apache/iceberg/commit/2facd4470384cf0d3429b1d71c36e906fbdc4b80", "committedDate": "2020-04-08T23:24:57Z", "message": "Add v2 change section to spec."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDU0NzY3", "url": "https://github.com/apache/iceberg/pull/903#pullrequestreview-391054767", "createdAt": "2020-04-09T19:01:41Z", "commit": {"oid": "2facd4470384cf0d3429b1d71c36e906fbdc4b80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxOTowMTo0MVrOGDlkeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxOTowMTo0MVrOGDlkeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQxNDQ1Ng==", "bodyText": "+1", "url": "https://github.com/apache/iceberg/pull/903#discussion_r406414456", "createdAt": "2020-04-09T19:01:41Z", "author": {"login": "aokolnychyi"}, "path": "site/docs/spec.md", "diffHunk": "@@ -677,3 +677,17 @@ This serialization scheme is for storing single values as individual binary valu\n | **`map`**                    | Not supported                                                                                                |\n \n \n+## Format version changes\n+\n+### Version 2\n+\n+Writing metadata:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2facd4470384cf0d3429b1d71c36e906fbdc4b80"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDU1MDUx", "url": "https://github.com/apache/iceberg/pull/903#pullrequestreview-391055051", "createdAt": "2020-04-09T19:02:05Z", "commit": {"oid": "2facd4470384cf0d3429b1d71c36e906fbdc4b80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4773, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}