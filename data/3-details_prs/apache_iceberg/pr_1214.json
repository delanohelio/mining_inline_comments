{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMDMwMTk1", "number": 1214, "title": "[Python] Minor fixes for tests", "bodyText": "In the course of implementing create table I came across minor issues:\n\nrename test fixtures to suppress warnings and prevent pytest from treating them as tests\ntest partition code path & fix incorrect signature when creating metadata\nhandle file: as well as file:// as it seems both schemas are used\nadd mypy annotations in areas where I fixed code\nfix tox/mypy", "createdAt": "2020-07-18T16:58:32Z", "url": "https://github.com/apache/iceberg/pull/1214", "merged": true, "mergeCommit": {"oid": "1742a2174b4ecbcfb8d41728fb77d3d26d0f4816"}, "closed": true, "closedAt": "2020-07-21T16:12:44Z", "author": {"login": "rymurr"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2ufZPgFqTQ1MTQ1NzM3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3AQAaABqjM1Njk0MjM4NzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDU3Mzc3", "url": "https://github.com/apache/iceberg/pull/1214#pullrequestreview-451457377", "createdAt": "2020-07-20T09:47:50Z", "commit": {"oid": "d10305db1a197a973d9c91b439c56fce795e68d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOTo0Nzo1MVrOG0DREg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOTo0Nzo1MVrOG0DREg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIzMjY1OA==", "bodyText": "Is this still needed with the ts_table fixture already parametrized?", "url": "https://github.com/apache/iceberg/pull/1214#discussion_r457232658", "createdAt": "2020-07-20T09:47:51Z", "author": {"login": "xhochy"}, "path": "python/tests/core/test_base_table_scan.py", "diffHunk": "@@ -14,11 +14,12 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-\n from iceberg.api import Schema\n from iceberg.api.types import IntegerType, NestedField\n+import pytest\n \n \n+@pytest.mark.parametrize(\"ts_table\", ['one', 'none'], indirect=True)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d10305db1a197a973d9c91b439c56fce795e68d1"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d10305db1a197a973d9c91b439c56fce795e68d1", "author": {"user": {"login": "rymurr", "name": "Ryan Murray"}}, "url": "https://github.com/apache/iceberg/commit/d10305db1a197a973d9c91b439c56fce795e68d1", "committedDate": "2020-07-18T16:57:24Z", "message": "[Python] Minor fixes for tests\n\nIn the course of implementing create table I came across minor issues:\n* rename test fixtures to suppress warnings and prevent pytest from treating them as tests\n* test partition code path & fix incorrect signature when creating metadata\n* handle `file:` as well as `file://` as it seems both schemas are used\n* add mypy annotations in areas where I fixed code\n* fix tox/mypy"}, "afterCommit": {"oid": "e21321fca1c4c6a477249475753b377126155a80", "author": {"user": {"login": "rymurr", "name": "Ryan Murray"}}, "url": "https://github.com/apache/iceberg/commit/e21321fca1c4c6a477249475753b377126155a80", "committedDate": "2020-07-20T14:49:16Z", "message": "[Python] Minor fixes for tests\n\nIn the course of implementing create table I came across minor issues:\n* rename test fixtures to suppress warnings and prevent pytest from treating them as tests\n* test partition code path & fix incorrect signature when creating metadata\n* handle `file:` as well as `file://` as it seems both schemas are used\n* add mypy annotations in areas where I fixed code\n* fix tox/mypy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDU0MzMz", "url": "https://github.com/apache/iceberg/pull/1214#pullrequestreview-452054333", "createdAt": "2020-07-21T00:55:41Z", "commit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1NTo0MVrOG0kP7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1NTo0MVrOG0kP7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc3MzAzOQ==", "bodyText": "Why is PartitionSpecBuilder in quotes?\nNot a problem, I've just not seen that before. Schema isn't in quotes.", "url": "https://github.com/apache/iceberg/pull/1214#discussion_r457773039", "createdAt": "2020-07-21T00:55:41Z", "author": {"login": "rdblue"}, "path": "python/iceberg/api/partition_spec.py", "diffHunk": "@@ -183,7 +183,7 @@ def __repr__(self):\n         return \"\".join(sb)\n \n     @staticmethod\n-    def builder_for(schema):\n+    def builder_for(schema: Schema) -> \"PartitionSpecBuilder\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDU1MDEz", "url": "https://github.com/apache/iceberg/pull/1214#pullrequestreview-452055013", "createdAt": "2020-07-21T00:57:56Z", "commit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1Nzo1NlrOG0kSRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1Nzo1NlrOG0kSRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc3MzYzNg==", "bodyText": "Nit: this file doesn't need to change and could cause git conflicts.", "url": "https://github.com/apache/iceberg/pull/1214#discussion_r457773636", "createdAt": "2020-07-21T00:57:56Z", "author": {"login": "rdblue"}, "path": "python/tests/core/test_base_table_scan.py", "diffHunk": "@@ -14,7 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDU1MzAy", "url": "https://github.com/apache/iceberg/pull/1214#pullrequestreview-452055302", "createdAt": "2020-07-21T00:58:55Z", "commit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1ODo1NVrOG0kTMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDo1ODo1NVrOG0kTMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc3Mzg3NQ==", "bodyText": "Are the renames from Mock to Test worth the trouble? Unless this is following a python convention, it seems like this is just going to cause git conflicts.", "url": "https://github.com/apache/iceberg/pull/1214#discussion_r457773875", "createdAt": "2020-07-21T00:58:55Z", "author": {"login": "rdblue"}, "path": "python/tests/api/test_helpers.py", "diffHunk": "@@ -74,7 +74,7 @@ def predicate(self, pred):\n             return None\n \n \n-class TestDataFile(DataFile):\n+class MockDataFile(DataFile):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e21321fca1c4c6a477249475753b377126155a80"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d19fc6797313c63887c4d6278b26263db9b2fcf", "author": {"user": {"login": "rymurr", "name": "Ryan Murray"}}, "url": "https://github.com/apache/iceberg/commit/0d19fc6797313c63887c4d6278b26263db9b2fcf", "committedDate": "2020-07-21T06:14:42Z", "message": "[Python] Minor fixes for tests\n\nIn the course of implementing create table I came across minor issues:\n* rename test fixtures to suppress warnings and prevent pytest from treating them as tests\n* test partition code path & fix incorrect signature when creating metadata\n* handle `file:` as well as `file://` as it seems both schemas are used\n* add mypy annotations in areas where I fixed code\n* fix tox/mypy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e21321fca1c4c6a477249475753b377126155a80", "author": {"user": {"login": "rymurr", "name": "Ryan Murray"}}, "url": "https://github.com/apache/iceberg/commit/e21321fca1c4c6a477249475753b377126155a80", "committedDate": "2020-07-20T14:49:16Z", "message": "[Python] Minor fixes for tests\n\nIn the course of implementing create table I came across minor issues:\n* rename test fixtures to suppress warnings and prevent pytest from treating them as tests\n* test partition code path & fix incorrect signature when creating metadata\n* handle `file:` as well as `file://` as it seems both schemas are used\n* add mypy annotations in areas where I fixed code\n* fix tox/mypy"}, "afterCommit": {"oid": "0d19fc6797313c63887c4d6278b26263db9b2fcf", "author": {"user": {"login": "rymurr", "name": "Ryan Murray"}}, "url": "https://github.com/apache/iceberg/commit/0d19fc6797313c63887c4d6278b26263db9b2fcf", "committedDate": "2020-07-21T06:14:42Z", "message": "[Python] Minor fixes for tests\n\nIn the course of implementing create table I came across minor issues:\n* rename test fixtures to suppress warnings and prevent pytest from treating them as tests\n* test partition code path & fix incorrect signature when creating metadata\n* handle `file:` as well as `file://` as it seems both schemas are used\n* add mypy annotations in areas where I fixed code\n* fix tox/mypy"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4278, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}