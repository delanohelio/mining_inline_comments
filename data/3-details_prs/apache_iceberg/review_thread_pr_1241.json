{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NDMxMTg5", "number": 1241, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODozNjoyNlrOER7Tzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODo1NjozM1rOER7qAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MjMyOTc1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/iceberg/SnapshotSummary.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODozNjoyNlrOG250fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMDo1MTozNVrOG29Z1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIyMzYxMg==", "bodyText": "happy to change if a different prefix string would be more suitable", "url": "https://github.com/apache/iceberg/pull/1241#discussion_r460223612", "createdAt": "2020-07-24T18:36:26Z", "author": {"login": "moulimukherjee"}, "path": "core/src/main/java/org/apache/iceberg/SnapshotSummary.java", "diffHunk": "@@ -47,6 +47,7 @@\n   public static final String PUBLISHED_WAP_ID_PROP = \"published-wap-id\";\n   public static final String SOURCE_SNAPSHOT_ID_PROP = \"source-snapshot-id\";\n   public static final String REPLACE_PARTITIONS_PROP = \"replace-partitions\";\n+  public static final String EXTRA_METADATA_PREFIX = \"extra-metadata.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12239b9c1c16709cc0d8e0d48b17f9c0e43c3da4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI3NjQyNA==", "bodyText": "Sounds good to me. What about context. or snapshot.property.? I want it to be somewhat obvious what the prefix indicates, but as short as possible.", "url": "https://github.com/apache/iceberg/pull/1241#discussion_r460276424", "createdAt": "2020-07-24T20:37:45Z", "author": {"login": "rdblue"}, "path": "core/src/main/java/org/apache/iceberg/SnapshotSummary.java", "diffHunk": "@@ -47,6 +47,7 @@\n   public static final String PUBLISHED_WAP_ID_PROP = \"published-wap-id\";\n   public static final String SOURCE_SNAPSHOT_ID_PROP = \"source-snapshot-id\";\n   public static final String REPLACE_PARTITIONS_PROP = \"replace-partitions\";\n+  public static final String EXTRA_METADATA_PREFIX = \"extra-metadata.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIyMzYxMg=="}, "originalCommit": {"oid": "12239b9c1c16709cc0d8e0d48b17f9c0e43c3da4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4MjMyNw==", "bodyText": "snapshot.property sounds good. I'll make changes.", "url": "https://github.com/apache/iceberg/pull/1241#discussion_r460282327", "createdAt": "2020-07-24T20:51:35Z", "author": {"login": "moulimukherjee"}, "path": "core/src/main/java/org/apache/iceberg/SnapshotSummary.java", "diffHunk": "@@ -47,6 +47,7 @@\n   public static final String PUBLISHED_WAP_ID_PROP = \"published-wap-id\";\n   public static final String SOURCE_SNAPSHOT_ID_PROP = \"source-snapshot-id\";\n   public static final String REPLACE_PARTITIONS_PROP = \"replace-partitions\";\n+  public static final String EXTRA_METADATA_PREFIX = \"extra-metadata.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIyMzYxMg=="}, "originalCommit": {"oid": "12239b9c1c16709cc0d8e0d48b17f9c0e43c3da4"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MjM4NjU3OnYy", "diffSide": "RIGHT", "path": "spark/src/test/java/org/apache/iceberg/spark/source/TestDataSourceOptions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODo1NjozM1rOG26X8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxODo1NjozM1rOG26X8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIzMjY5MQ==", "bodyText": "plumbing to pass extra information from write options", "url": "https://github.com/apache/iceberg/pull/1241#discussion_r460232691", "createdAt": "2020-07-24T18:56:33Z", "author": {"login": "moulimukherjee"}, "path": "spark/src/test/java/org/apache/iceberg/spark/source/TestDataSourceOptions.java", "diffHunk": "@@ -364,4 +364,28 @@ public void testDefaultMetadataSplitSize() throws IOException {\n     int partitionNum = metadataDf.javaRDD().getNumPartitions();\n     Assert.assertEquals(\"Spark partitions should match\", expectedSplits, partitionNum);\n   }\n+\n+  @Test\n+  public void testExtraSnapshotMetadata() throws IOException {\n+    String tableLocation = temp.newFolder(\"iceberg-table\").toString();\n+    HadoopTables tables = new HadoopTables(CONF);\n+    tables.create(SCHEMA, PartitionSpec.unpartitioned(), Maps.newHashMap(), tableLocation);\n+\n+    List<SimpleRecord> expectedRecords = Lists.newArrayList(\n+            new SimpleRecord(1, \"a\"),\n+            new SimpleRecord(2, \"b\")\n+    );\n+    Dataset<Row> originalDf = spark.createDataFrame(expectedRecords, SimpleRecord.class);\n+    originalDf.select(\"id\", \"data\").write()\n+            .format(\"iceberg\")\n+            .mode(\"append\")\n+            .option(\"extra-metadata.extra-key\", \"someValue\")\n+            .option(\"extra-metadata.another-key\", \"anotherValue\")\n+            .save(tableLocation);\n+\n+    Table table = tables.load(tableLocation);\n+\n+    Assert.assertTrue(table.currentSnapshot().summary().get(\"extra-key\").equals(\"someValue\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12239b9c1c16709cc0d8e0d48b17f9c0e43c3da4"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3799, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}