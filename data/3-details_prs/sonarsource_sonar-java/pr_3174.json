{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MjY3NTA5", "number": 3174, "title": "SONARJAVA-3523 Extend S3415 (Arguments order) to support TestNG assertions", "bodyText": "", "createdAt": "2020-09-11T16:57:00Z", "url": "https://github.com/SonarSource/sonar-java/pull/3174", "merged": true, "mergeCommit": {"oid": "7df08617c9213b1d4708fa188cf5b0437fde35c1"}, "closed": true, "closedAt": "2020-09-14T15:43:57Z", "author": {"login": "alban-auzeill"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH4jiGAH2gAyNDg1MjY3NTA5OmMzMzkxOGZjZmM3N2Y4NDEyOWQ2OTE2YmEwMzBiMjUyYzliYjE2YjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI0xH-gH2gAyNDg1MjY3NTA5OmQyN2FkMzdhYWY5MzQxMTY4MGI5NDI2Y2I2MDE5OTdiZDVhN2E4Mjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1", "author": {"user": {"login": "alban-auzeill", "name": "Alban Auzeill"}}, "url": "https://github.com/SonarSource/sonar-java/commit/c33918fcfc77f84129d6916ba030b252c9bb16b1", "committedDate": "2020-09-11T17:08:12Z", "message": "SONARJAVA-3523 Extend S3415 (Arguments order) to support TestNG assertions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "051a993103bcc7a8106739c8afeb6861db32a39c", "author": {"user": {"login": "alban-auzeill", "name": "Alban Auzeill"}}, "url": "https://github.com/SonarSource/sonar-java/commit/051a993103bcc7a8106739c8afeb6861db32a39c", "committedDate": "2020-09-11T16:56:07Z", "message": "SONARJAVA-3523 Extend S3415 (Arguments order) to support TestNG assertions"}, "afterCommit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1", "author": {"user": {"login": "alban-auzeill", "name": "Alban Auzeill"}}, "url": "https://github.com/SonarSource/sonar-java/commit/c33918fcfc77f84129d6916ba030b252c9bb16b1", "committedDate": "2020-09-11T17:08:12Z", "message": "SONARJAVA-3523 Extend S3415 (Arguments order) to support TestNG assertions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTkyODY4", "url": "https://github.com/SonarSource/sonar-java/pull/3174#pullrequestreview-487592868", "createdAt": "2020-09-14T09:49:46Z", "commit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOTo0OTo0NlrOHRMMuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOTo1NjowOFrOHRMcWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc4NzcwNQ==", "bodyText": "Maybe it would be nice if you move all string literals into constants to have the consistency here", "url": "https://github.com/SonarSource/sonar-java/pull/3174#discussion_r487787705", "createdAt": "2020-09-14T09:49:46Z", "author": {"login": "margarita-nedzelska-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionArgumentOrderCheck.java", "diffHunk": "@@ -59,12 +65,17 @@\n   protected MethodMatchers getMethodInvocationMatchers() {\n     return MethodMatchers.or(\n       MethodMatchers.create().ofTypes(ORG_JUNIT_ASSERT)\n-        .names(\"assertEquals\", \"assertSame\", \"assertNotSame\")\n+        .names(ASSERT_EQUALS, ASSERT_SAME, ASSERT_NOT_SAME)\n+        .withAnyParameters()\n+        .build(),\n+      // TestNG\n+      MethodMatchers.create().ofTypes(ORG_TESTNG_ASSERT)\n+        .names(ASSERT_EQUALS, ASSERT_NOT_EQUALS, ASSERT_SAME, ASSERT_NOT_SAME)\n         .withAnyParameters()\n         .build(),\n       // JUnit 5\n       MethodMatchers.create().ofTypes(ORG_JUNIT5_ASSERTIONS)\n-        .names(\"assertArrayEquals\", \"assertEquals\", \"assertIterableEquals\", \"assertLinesMatch\", \"assertNotEquals\", \"assertNotSame\", \"assertSame\")\n+        .names(\"assertArrayEquals\", ASSERT_EQUALS, \"assertIterableEquals\", \"assertLinesMatch\", ASSERT_NOT_EQUALS, ASSERT_NOT_SAME, ASSERT_SAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc5MDIzOA==", "bodyText": "This message could be extracted to string constants, cause it's used in few places.", "url": "https://github.com/SonarSource/sonar-java/pull/3174#discussion_r487790238", "createdAt": "2020-09-14T09:54:00Z", "author": {"login": "margarita-nedzelska-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionArgumentOrderCheck.java", "diffHunk": "@@ -77,11 +88,14 @@ protected MethodMatchers getMethodInvocationMatchers() {\n \n   @Override\n   protected void onMethodInvocationFound(MethodInvocationTree mit) {\n-    if (mit.symbol().owner().type().is(ORG_JUNIT5_ASSERTIONS)) {\n+    Type ownerType = mit.symbol().owner().type();\n+    if (ownerType.is(ORG_JUNIT5_ASSERTIONS)) {\n       checkArguments(mit.arguments().get(0), mit.arguments().get(1), \"expected value, actual value\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc5MDY4NQ==", "bodyText": "Could be moved to constants too.", "url": "https://github.com/SonarSource/sonar-java/pull/3174#discussion_r487790685", "createdAt": "2020-09-14T09:54:37Z", "author": {"login": "margarita-nedzelska-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionArgumentOrderCheck.java", "diffHunk": "@@ -77,11 +88,14 @@ protected MethodMatchers getMethodInvocationMatchers() {\n \n   @Override\n   protected void onMethodInvocationFound(MethodInvocationTree mit) {\n-    if (mit.symbol().owner().type().is(ORG_JUNIT5_ASSERTIONS)) {\n+    Type ownerType = mit.symbol().owner().type();\n+    if (ownerType.is(ORG_JUNIT5_ASSERTIONS)) {\n       checkArguments(mit.arguments().get(0), mit.arguments().get(1), \"expected value, actual value\");\n-    } else if (mit.symbol().owner().type().is(ORG_JUNIT_ASSERT)) {\n+    } else if (ownerType.is(ORG_JUNIT_ASSERT)) {\n       ExpressionTree argToCheck = getActualArgument(mit);\n       checkArguments(previousArg(argToCheck, mit), argToCheck, \"expected value, actual value\");\n+    } else if (ownerType.is(ORG_TESTNG_ASSERT)) {\n+      checkArguments(mit.arguments().get(1), mit.arguments().get(0), \"actual value, expected value\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc5MTcwNw==", "bodyText": "I am not sure whether these matchers could be used in other places. If so, might be a nice candidate for moving to Utils/Helpers", "url": "https://github.com/SonarSource/sonar-java/pull/3174#discussion_r487791707", "createdAt": "2020-09-14T09:56:08Z", "author": {"login": "margarita-nedzelska-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionArgumentOrderCheck.java", "diffHunk": "@@ -59,12 +65,17 @@\n   protected MethodMatchers getMethodInvocationMatchers() {\n     return MethodMatchers.or(\n       MethodMatchers.create().ofTypes(ORG_JUNIT_ASSERT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c33918fcfc77f84129d6916ba030b252c9bb16b1"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d27ad37aaf93411680b9426cb601997bd5a7a829", "author": {"user": {"login": "alban-auzeill", "name": "Alban Auzeill"}}, "url": "https://github.com/SonarSource/sonar-java/commit/d27ad37aaf93411680b9426cb601997bd5a7a829", "committedDate": "2020-09-14T15:17:21Z", "message": "Move string literals into constants"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1981, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}