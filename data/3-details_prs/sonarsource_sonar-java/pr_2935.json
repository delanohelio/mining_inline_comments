{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMzM2NTg4", "number": 2935, "title": "SONARJAVA-3373 Rule S5810: JUnit5 test classes and methods should not have private visibility", "bodyText": "", "createdAt": "2020-05-05T06:49:44Z", "url": "https://github.com/SonarSource/sonar-java/pull/2935", "merged": true, "mergeCommit": {"oid": "629818587782b6f301c54d882ef913d50ef5fd85"}, "closed": true, "closedAt": "2020-05-06T07:42:25Z", "author": {"login": "alban-auzeill"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceM13BAH2gAyNDEzMzM2NTg4OjUyYWNjNjcyNWMwNzMzYjYxMjMyNjdhMDJiZGYyN2Y3NDUzYWJhODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcei3AkAH2gAyNDEzMzM2NTg4Ojk0OTUyMjk3ZGI5OGM2YzNlN2E4Y2EzNTcwMjA4YzAwMDFlYmExY2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "52acc6725c0733b6123267a02bdf27f7453aba87", "author": {"user": {"login": "alban-auzeill", "name": "Alban Auzeill"}}, "url": "https://github.com/SonarSource/sonar-java/commit/52acc6725c0733b6123267a02bdf27f7453aba87", "committedDate": "2020-05-05T05:01:30Z", "message": "SONARJAVA-3373 Rule S5810: JUnit5 test classes and methods should not have private visibility"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjYxOTM3", "url": "https://github.com/SonarSource/sonar-java/pull/2935#pullrequestreview-405661937", "createdAt": "2020-05-05T10:23:36Z", "commit": {"oid": "52acc6725c0733b6123267a02bdf27f7453aba87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMDoyMzozNlrOGQjMug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMDoyMzozNlrOGQjMug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDAwNzA5OA==", "bodyText": "Do we have some standardized way of constructing strings? I've previously seen a lot of String.format as well - is that choice up to personal preference?", "url": "https://github.com/SonarSource/sonar-java/pull/2935#discussion_r420007098", "createdAt": "2020-05-05T10:23:36Z", "author": {"login": "johann-beleites-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/AbstractJUnit5NotCompliantModifierChecker.java", "diffHunk": "@@ -55,18 +51,18 @@ public void visitNode(Tree tree) {\n       .filter(UnitTestUtils::hasJUnit5TestAnnotation)\n       .collect(Collectors.toList());\n \n-    testMethods.stream().map(MethodTree::modifiers).forEach(this::raiseIssueOnPresentAccessModifiers);\n+    testMethods.stream().map(MethodTree::modifiers).forEach(this::raiseIssueOnNotCompliantModifiers);\n \n     if (!testMethods.isEmpty()) {\n-      raiseIssueOnPresentAccessModifiers(classTree.modifiers());\n+      raiseIssueOnNotCompliantModifiers(classTree.modifiers());\n     }\n   }\n \n-  private void raiseIssueOnPresentAccessModifiers(ModifiersTree modifierTree) {\n+  private void raiseIssueOnNotCompliantModifiers(ModifiersTree modifierTree) {\n     modifierTree.modifiers().stream()\n-      .filter(modifierKeyword -> NON_COMPLIANT_MODIFIERS.contains(modifierKeyword.modifier()))\n-      .map(modifierKeywordTree -> (Tree) modifierKeywordTree)\n+      .filter(modifier -> isNotCompliant(modifier.modifier()))\n       .findFirst()\n-      .ifPresent(modifierKeyword -> reportIssue(modifierKeyword, \"Remove this access modifier\"));\n+      .ifPresent(modifier -> reportIssue(modifier, \"Remove this '\" + modifier.keyword().text() + \"' modifier.\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52acc6725c0733b6123267a02bdf27f7453aba87"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MzM0MDg1", "url": "https://github.com/SonarSource/sonar-java/pull/2935#pullrequestreview-406334085", "createdAt": "2020-05-06T06:34:41Z", "commit": {"oid": "52acc6725c0733b6123267a02bdf27f7453aba87"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94952297db98c6c3e7a8ca3570208c0001eba1ca", "author": {"user": {"login": "johann-beleites-sonarsource", "name": "Johann Beleites"}}, "url": "https://github.com/SonarSource/sonar-java/commit/94952297db98c6c3e7a8ca3570208c0001eba1ca", "committedDate": "2020-05-06T06:40:40Z", "message": "Merge branch 'master' into alban/SONARJAVA-3373"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1802, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}