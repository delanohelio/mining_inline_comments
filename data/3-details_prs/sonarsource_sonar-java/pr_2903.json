{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NzE4OTUx", "number": 2903, "title": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks", "bodyText": "", "createdAt": "2020-04-06T15:17:28Z", "url": "https://github.com/SonarSource/sonar-java/pull/2903", "merged": true, "mergeCommit": {"oid": "aefa9ade38d8dbe8a0301d2442fd20ddcc0f75f9"}, "closed": true, "closedAt": "2020-04-07T08:52:15Z", "author": {"login": "saberduck"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVAamogBqjMyMDU5MjQwMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVPVFjAFqTM4ODkxMjMzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05f97cbbb18d90d8e71fd7aa9db241c18bb758c3", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/05f97cbbb18d90d8e71fd7aa9db241c18bb758c3", "committedDate": "2020-04-06T15:10:07Z", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks"}, "afterCommit": {"oid": "a99e60d29af14f4dab8adddad0446c982a71beb8", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/a99e60d29af14f4dab8adddad0446c982a71beb8", "committedDate": "2020-04-06T15:27:23Z", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "committedDate": "2020-04-06T16:21:40Z", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a99e60d29af14f4dab8adddad0446c982a71beb8", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/a99e60d29af14f4dab8adddad0446c982a71beb8", "committedDate": "2020-04-06T15:27:23Z", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks"}, "afterCommit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "committedDate": "2020-04-06T16:21:40Z", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4ODAwNDUw", "url": "https://github.com/SonarSource/sonar-java/pull/2903#pullrequestreview-388800450", "createdAt": "2020-04-07T05:48:25Z", "commit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNTo0ODoyNVrOGBzxDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNjowNzowOFrOGB0KOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU0OTkwMw==", "bodyText": "I think that here a comment is in order to explain why we add plugin jar to jsp classpath. It is far from obvious from the context why it is done so.", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404549903", "createdAt": "2020-04-07T05:48:25Z", "author": {"login": "benzonico"}, "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1MjE4NA==", "bodyText": "I think this method deserves either a renaming or a javadoc to explain we are looking up for the sonar-java plugin", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404552184", "createdAt": "2020-04-07T05:55:22Z", "author": {"login": "benzonico"}, "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());\n+    jspClasspath.addAll(javaClasspath.getElements());\n+    return jspClasspath;\n+  }\n+\n+  private static File findPluginJar() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1NjM0Ng==", "bodyText": "this would probably be more robust to call for getJavaClasspath rather than relying on order of callers for javaclasspath to be initialized.", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404556346", "createdAt": "2020-04-07T06:07:08Z", "author": {"login": "benzonico"}, "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());\n+    jspClasspath.addAll(javaClasspath.getElements());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a320ac311e9045501f8e7d992f5ebee4b67c6377", "author": {"user": {"login": "saberduck", "name": "Tibor Blenessy"}}, "url": "https://github.com/SonarSource/sonar-java/commit/a320ac311e9045501f8e7d992f5ebee4b67c6377", "committedDate": "2020-04-07T07:43:26Z", "message": "review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4OTEyMzM3", "url": "https://github.com/SonarSource/sonar-java/pull/2903#pullrequestreview-388912337", "createdAt": "2020-04-07T08:50:06Z", "commit": {"oid": "a320ac311e9045501f8e7d992f5ebee4b67c6377"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1776, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}