{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMjYxNzA3", "number": 2967, "title": "SONARJAVA-3349 support AssertJ assertions with missing message", "bodyText": "", "createdAt": "2020-05-26T15:01:09Z", "url": "https://github.com/SonarSource/sonar-java/pull/2967", "merged": true, "mergeCommit": {"oid": "0fbdfb30c346aa963c7d09c1ed15e54f9bd44078"}, "closed": true, "closedAt": "2020-05-27T12:10:38Z", "author": {"login": "johann-beleites-sonarsource"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclCOdYgH2gAyNDIzMjYxNzA3OmVhOTgyZDdiODZlYzdhOThlYzgyZjAyMDNiNWIwNzY0NDc1NjQ2MmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclYJt-gFqTQxOTEyNzE3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ea982d7b86ec7a98ec82f0203b5b07644756462b", "author": {"user": {"login": "johann-beleites-sonarsource", "name": "Johann Beleites"}}, "url": "https://github.com/SonarSource/sonar-java/commit/ea982d7b86ec7a98ec82f0203b5b07644756462b", "committedDate": "2020-05-26T10:36:53Z", "message": "SONARJAVA-3349 Added support AssertJ assertions lacking messages. Also added support for a couple more message methods in Fest along the way, reducing the FP rate."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a96b256b4ee9bcf13f226e9a21b3607c37458e1", "author": {"user": {"login": "johann-beleites-sonarsource", "name": "Johann Beleites"}}, "url": "https://github.com/SonarSource/sonar-java/commit/9a96b256b4ee9bcf13f226e9a21b3607c37458e1", "committedDate": "2020-05-26T14:59:52Z", "message": "SONARJAVA-3349 Added ruling findings for S2698 to expected findings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTc2NDk1", "url": "https://github.com/SonarSource/sonar-java/pull/2967#pullrequestreview-418976495", "createdAt": "2020-05-27T08:38:43Z", "commit": {"oid": "ea982d7b86ec7a98ec82f0203b5b07644756462b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODozODo0NFrOGa_Lzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODo1MTo0N1rOGa_quQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk1MTM3NQ==", "bodyText": "You can merge these two matchers.", "url": "https://github.com/SonarSource/sonar-java/pull/2967#discussion_r430951375", "createdAt": "2020-05-27T08:38:44Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionsWithoutMessageCheck.java", "diffHunk": "@@ -51,33 +62,48 @@\n   @Override\n   protected MethodMatchers getMethodInvocationMatchers() {\n     return MethodMatchers.or(\n-      MethodMatchers.create().ofTypes(\"org.junit.jupiter.api.Assertions\").name(name -> name.startsWith(ASSERT) || name.equals(\"fail\")).withAnyParameters().build(),\n-      MethodMatchers.create().ofTypes(\"org.junit.Assert\").name(name -> name.startsWith(ASSERT) || name.equals(\"fail\")).withAnyParameters().build(),\n-      MethodMatchers.create().ofTypes(\"junit.framework.Assert\").name(name -> name.startsWith(ASSERT) || name.startsWith(\"fail\")).withAnyParameters().build(),\n-      MethodMatchers.create().ofTypes(\"org.fest.assertions.Fail\").name(name -> name.startsWith(\"fail\")).withAnyParameters().build(),\n-      MethodMatchers.create().ofSubTypes(GENERIC_ASSERT).anyName().withAnyParameters().build()\n+      MethodMatchers.create()\n+        .ofTypes(\"org.junit.jupiter.api.Assertions\", \"org.junit.Assert\", \"junit.framework.Assert\", \"org.fest.assertions.Fail\",\n+          \"org.assertj.core.api.Fail\")\n+        .name(name -> name.startsWith(ASSERT) || name.equals(\"fail\")).withAnyParameters().build(),\n+      MethodMatchers.create().ofSubTypes(FEST_GENERIC_ASSERT).anyName().withAnyParameters().build(),\n+      MethodMatchers.create().ofSubTypes(ASSERTJ_ABSTRACT_ASSERT).anyName().withAnyParameters().build()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea982d7b86ec7a98ec82f0203b5b07644756462b"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk1OTI4OQ==", "bodyText": "I feel we can find a better name for the parameter, to clearly show that it will match message methods.", "url": "https://github.com/SonarSource/sonar-java/pull/2967#discussion_r430959289", "createdAt": "2020-05-27T08:51:47Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-checks/src/main/java/org/sonar/java/checks/tests/AssertionsWithoutMessageCheck.java", "diffHunk": "@@ -128,19 +166,21 @@ private static boolean isAssertWithTwoParams(MethodInvocationTree mit) {\n   }\n \n   private static boolean isString(ExpressionTree expressionTree) {\n-    return expressionTree.symbolType().is(\"java.lang.String\");\n+    return expressionTree.symbolType().is(JAVA_LANG_STRING);\n   }\n \n-  private static class FestVisitor extends BaseTreeVisitor {\n+  private static class FestLikeVisitor extends BaseTreeVisitor {\n     boolean useDescription = false;\n+    private final MethodMatchers methodMatchers;\n+\n+    public FestLikeVisitor(MethodMatchers methodMatchers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea982d7b86ec7a98ec82f0203b5b07644756462b"}, "originalPosition": 127}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b7a1f505400512e021a7f247c6f73bb156d4acc", "author": {"user": {"login": "johann-beleites-sonarsource", "name": "Johann Beleites"}}, "url": "https://github.com/SonarSource/sonar-java/commit/6b7a1f505400512e021a7f247c6f73bb156d4acc", "committedDate": "2020-05-27T09:35:07Z", "message": "SONARJAVA-3349 Improved rule description/title and improved naming of a variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c616355f0461c993ba04490ce9b85b32a1b1c68f", "author": {"user": {"login": "johann-beleites-sonarsource", "name": "Johann Beleites"}}, "url": "https://github.com/SonarSource/sonar-java/commit/c616355f0461c993ba04490ce9b85b32a1b1c68f", "committedDate": "2020-05-27T09:58:08Z", "message": "Merged two MethodMatchers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MTI3MTc3", "url": "https://github.com/SonarSource/sonar-java/pull/2967#pullrequestreview-419127177", "createdAt": "2020-05-27T12:09:37Z", "commit": {"oid": "c616355f0461c993ba04490ce9b85b32a1b1c68f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1690, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}