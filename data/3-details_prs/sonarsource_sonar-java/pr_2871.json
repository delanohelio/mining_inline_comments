{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MjY0OTAz", "number": 2871, "title": "SONARJAVA-3315 Unify CheckVerifiers accross the plugin", "bodyText": "", "createdAt": "2020-03-10T17:21:49Z", "url": "https://github.com/SonarSource/sonar-java/pull/2871", "merged": true, "mergeCommit": {"oid": "e7f1493fa8572fa88ed528be37fc8debabc5e671"}, "closed": true, "closedAt": "2020-03-17T08:16:53Z", "author": {"login": "m-g-sonar"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMiuDhgBqjMxMTc3NDI5ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOeFOigFqTM3NTgwODk4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a74c76f47e9657ecd352aa77010112c5f7b2a75", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/5a74c76f47e9657ecd352aa77010112c5f7b2a75", "committedDate": "2020-03-11T08:11:20Z", "message": "fix"}, "afterCommit": {"oid": "9d15115b832ebfa3fef9695cba807acddd646ed4", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/9d15115b832ebfa3fef9695cba807acddd646ed4", "committedDate": "2020-03-11T08:20:03Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d15115b832ebfa3fef9695cba807acddd646ed4", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/9d15115b832ebfa3fef9695cba807acddd646ed4", "committedDate": "2020-03-11T08:20:03Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "52dc5e1bae18a6d3e79b0a7a6538c3689c0e8b84", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/52dc5e1bae18a6d3e79b0a7a6538c3689c0e8b84", "committedDate": "2020-03-11T11:03:19Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52dc5e1bae18a6d3e79b0a7a6538c3689c0e8b84", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/52dc5e1bae18a6d3e79b0a7a6538c3689c0e8b84", "committedDate": "2020-03-11T11:03:19Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "c88a616a0dbc17001d4631e1ef575b328e8283b0", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/c88a616a0dbc17001d4631e1ef575b328e8283b0", "committedDate": "2020-03-11T11:28:48Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c88a616a0dbc17001d4631e1ef575b328e8283b0", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/c88a616a0dbc17001d4631e1ef575b328e8283b0", "committedDate": "2020-03-11T11:28:48Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "b95f5583c2675986df91de9582e720c394862c7b", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/b95f5583c2675986df91de9582e720c394862c7b", "committedDate": "2020-03-11T15:22:00Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b95f5583c2675986df91de9582e720c394862c7b", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/b95f5583c2675986df91de9582e720c394862c7b", "committedDate": "2020-03-11T15:22:00Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "a6b8f1359e80d9d74f9f95dcc67a621654b112ee", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/a6b8f1359e80d9d74f9f95dcc67a621654b112ee", "committedDate": "2020-03-11T15:41:24Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyODk4MTc3", "url": "https://github.com/SonarSource/sonar-java/pull/2871#pullrequestreview-372898177", "createdAt": "2020-03-11T15:58:37Z", "commit": {"oid": "a6b8f1359e80d9d74f9f95dcc67a621654b112ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNTo1ODozN1rOF09l7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNTo1ODozN1rOF09l7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA3OTQwNA==", "bodyText": "This one is interesting... it never worked. unifying the verifiers made that comment invalid, and I realized we were not raising issue here. I didn't investigated if it's expected or not.", "url": "https://github.com/SonarSource/sonar-java/pull/2871#discussion_r391079404", "createdAt": "2020-03-11T15:58:37Z", "author": {"login": "m-g-sonar"}, "path": "java-checks/src/test/files/checks/LeastSpecificTypeCheck.java", "diffHunk": "@@ -153,7 +153,7 @@ public static void visibility(Visibility vis) { // Compliant - Base has package\n \n   protected static class Visibility2 extends ProtectedBase { }\n \n-  public static void visibility(Visibility2 vis) { // // Noncompliant {{Use 'A.ProtectedBase' here; it is a more general type than 'Visibility2'.}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6b8f1359e80d9d74f9f95dcc67a621654b112ee"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53584b494ba1cf7d39902f29ff65104163acb8c9", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/53584b494ba1cf7d39902f29ff65104163acb8c9", "committedDate": "2020-03-11T16:13:49Z", "message": "fix"}, "afterCommit": {"oid": "5ebcf3a44f1584f6207949fa501fe6d9807694d9", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/5ebcf3a44f1584f6207949fa501fe6d9807694d9", "committedDate": "2020-03-12T09:57:44Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ebcf3a44f1584f6207949fa501fe6d9807694d9", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/5ebcf3a44f1584f6207949fa501fe6d9807694d9", "committedDate": "2020-03-12T09:57:44Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "ae0bdab7e4ba8fd9e9e9d3b7670285627a0cff0e", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/ae0bdab7e4ba8fd9e9e9d3b7670285627a0cff0e", "committedDate": "2020-03-12T14:28:09Z", "message": "SONARJAVA-3307 Update test files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae0bdab7e4ba8fd9e9e9d3b7670285627a0cff0e", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/ae0bdab7e4ba8fd9e9e9d3b7670285627a0cff0e", "committedDate": "2020-03-12T14:28:09Z", "message": "SONARJAVA-3307 Update test files"}, "afterCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/9e58531cdbf73a6afccf0434f0eda4e384cc2039", "committedDate": "2020-03-12T14:37:44Z", "message": "SONARJAVA-3315 Update test files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNzI0OTI0", "url": "https://github.com/SonarSource/sonar-java/pull/2871#pullrequestreview-373724924", "createdAt": "2020-03-12T16:44:24Z", "commit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNjo0NDoyNFrOF1mmkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwOToyMDowN1rOF18kTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc1MTMxMw==", "bodyText": "You should let a comment here to clearly state that this is a FN.", "url": "https://github.com/SonarSource/sonar-java/pull/2871#discussion_r391751313", "createdAt": "2020-03-12T16:44:24Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-checks/src/test/files/checks/LeastSpecificTypeCheck.java", "diffHunk": "@@ -153,7 +153,7 @@ public static void visibility(Visibility vis) { // Compliant - Base has package\n \n   protected static class Visibility2 extends ProtectedBase { }\n \n-  public static void visibility(Visibility2 vis) { // // Noncompliant {{Use 'A.ProtectedBase' here; it is a more general type than 'Visibility2'.}}\n+  public static void visibility(Visibility2 vis) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc1OTk3NQ==", "bodyText": "Code after this line does not appear anywhere in the two new files, this will reduce the coverage.", "url": "https://github.com/SonarSource/sonar-java/pull/2871#discussion_r391759975", "createdAt": "2020-03-12T16:57:31Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-checks/src/test/files/checks/AbstractClassNoFieldShouldBeInterfaceCheck.java", "diffHunk": "@@ -1,82 +0,0 @@\n-import com.google.auto.value.AutoOneOf;\n-import com.google.auto.value.AutoValue;\n-import org.immutables.value.Value;\n-\n-abstract class A {\n-  private int b;\n-\n-  abstract void method();\n-}\n-abstract class B { // Noncompliant [[sc=16;ec=17]] {{Convert the abstract class \"B\" into an interface.}}\n-  int method(){\n-    return 1;\n-  }\n-  class F {}\n-}\n-class C {\n-  int method(){\n-    return 1;\n-  }\n-}\n-\n-abstract class D {\n-  protected void method() {\n-\n-  }\n-}\n-\n-abstract class E extends A {\n-}\n-\n-public abstract class F {\n-  public abstract double v();\n-\n-  @Override\n-  public String toString() {\n-    return \":\";\n-  }\n-}\n-\n-public abstract class G {\n-  public abstract double v();\n-\n-  public String toString() {\n-    return \":\";\n-  }\n-}\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4Nzg3OQ==", "bodyText": "No deprecation for this file?", "url": "https://github.com/SonarSource/sonar-java/pull/2871#discussion_r392087879", "createdAt": "2020-03-13T08:28:16Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-checks-testkit/src/main/java/org/sonar/java/checks/verifier/MultipleFilesJavaCheckVerifier.java", "diffHunk": "@@ -39,7 +29,10 @@\n  * The main difference is that this class run a check on multiple files and verifies the results at the end of analysis.\n  */\n @Beta\n-public class MultipleFilesJavaCheckVerifier extends CheckVerifier {\n+public final class MultipleFilesJavaCheckVerifier {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExMTE4Mw==", "bodyText": "at least sounds strange to me here, maybe reword as:\nIt is required to provide to the verifier at least the following.", "url": "https://github.com/SonarSource/sonar-java/pull/2871#discussion_r392111183", "createdAt": "2020-03-13T09:20:07Z", "author": {"login": "quentin-jaquier-sonarsource"}, "path": "java-frontend/src/main/java/org/sonar/java/testing/CheckVerifier.java", "diffHunk": "@@ -0,0 +1,185 @@\n+/*\n+ * SonarQube Java\n+ * Copyright (C) 2012-2020 SonarSource SA\n+ * mailto:info AT sonarsource DOT com\n+ *\n+ * This program is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation; either\n+ * version 3 of the License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public License\n+ * along with this program; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n+ */\n+package org.sonar.java.testing;\n+\n+import java.io.File;\n+import java.util.Collection;\n+import org.sonar.plugins.java.api.JavaFileScanner;\n+\n+/**\n+ * This interface defines how to use checks (rules) verifiers. It's goal is to provide all the required information\n+ * to the analyzer to verify checks' expected behavior.\n+ * <p>\n+ * The starting point to define a verifier is {@link #newVerifier()}. Then, configuration can be specified.\n+ * <p>\n+ * It is required to provide at least to the verifier the following:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa4c7d348e779f8d399c56b0b8c8f3f6759ae81b", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/aa4c7d348e779f8d399c56b0b8c8f3f6759ae81b", "committedDate": "2020-03-16T09:17:04Z", "message": "SONARJAVA-3315 Unify CheckVerifiers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa1b0749678147579654f10f22e0159641b9e039", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/aa1b0749678147579654f10f22e0159641b9e039", "committedDate": "2020-03-16T10:40:04Z", "message": "Fix from review"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e58531cdbf73a6afccf0434f0eda4e384cc2039", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/9e58531cdbf73a6afccf0434f0eda4e384cc2039", "committedDate": "2020-03-12T14:37:44Z", "message": "SONARJAVA-3315 Update test files"}, "afterCommit": {"oid": "aa1b0749678147579654f10f22e0159641b9e039", "author": {"user": {"login": "m-g-sonar", "name": "Michael Gumowski"}}, "url": "https://github.com/SonarSource/sonar-java/commit/aa1b0749678147579654f10f22e0159641b9e039", "committedDate": "2020-03-16T10:40:04Z", "message": "Fix from review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1ODA4OTgy", "url": "https://github.com/SonarSource/sonar-java/pull/2871#pullrequestreview-375808982", "createdAt": "2020-03-17T08:03:53Z", "commit": {"oid": "aa1b0749678147579654f10f22e0159641b9e039"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1752, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}