{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNTAxMDg0", "number": 232, "title": "BLUEBUTTON-1644: Update the flamegraph play to fix bitrot", "bodyText": "Wasn't working anymore, due to changes in the AWS environments, my local system, etc.\nAlso moved it out of the HealthAPT Ansible directory.\nhttps://jira.cms.gov/browse/BLUEBUTTON-1644", "createdAt": "2020-02-26T20:53:44Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232", "merged": true, "mergeCommit": {"oid": "f1abced9a08ecfc3083657c2322350db52c30f84"}, "closed": true, "closedAt": "2021-01-28T17:18:08Z", "author": {"login": "karlmdavis"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcINFGogH2gAyMzgwNTAxMDg0OmIwMmI4ZTRhOTBkYzYwODQ0MTZhNTkyN2E1NTFiMGVkMGFmNGY1ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd0n5trAFqTU3ODU1Njc0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/b02b8e4a90dc6084416a5927a551b0ed0af4f5e3", "committedDate": "2020-02-26T20:51:49Z", "message": "Update the flamegraph play to fix bitrot.\n\nWasn't working anymore, due to changes in the AWS environments, my local\nsystem, etc.\n\nAlso moved it out of the HealthAPT Ansible directory.\n\nBLUEBUTTON-1644"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjM4NzU2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#pullrequestreview-365238756", "createdAt": "2020-02-26T21:01:41Z", "commit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMTo0MVrOFu8ENg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowNDowOFrOFu8IxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MjkzNA==", "bodyText": "Had to do this in order to get the --inventory=foo.ec2.internal play parameter working, as it requires the enabled-by-default-but-disabled-here hosts_list plugin to be enabled.\nAnyone know why this config was locked down to just ini? If there's not a good reason, let's just deleted this line altogether as part of this PR.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384762934", "createdAt": "2020-02-26T21:01:41Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/ansible.cfg", "diffHunk": "@@ -42,4 +42,4 @@ pipelining = True\n #ssh_args = -o ControlMaster=no\n \n [inventory]\n-enable_plugins = ini\n+#enable_plugins = ini", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MzQ3Nw==", "bodyText": "Fun fact: pgrep -f 'java.*DataServerLauncherApp' would be a much better filter/search command here, but won't work for reasons that escape me. It looks like maybe pgrep -f won't search the command line past a certain character limit?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384763477", "createdAt": "2020-02-26T21:02:54Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -5,17 +5,17 @@\n #\n # Usage:\n #\n-#     $ pipenv run ./ansible-playbook-wrapper data_server_collect_flame_graph.yml --extra-vars \"perf_record_seconds=15 find_process_command='pgrep java' jdk_path=/etc/alternatives/java_sdk_1.8.0_openjdk\" --limit bluebutton-healthapt-test-data-server-a-1\n+#     $ pipenv run ./ansible-playbook-wrapper data_server_collect_flame_graph.yml --inventory='somehost.ec2.internal' --extra-vars \"perf_record_seconds=15 find_process_command='pgrep -f bfd-server-launcher.*jetty' java_user='bfd' jdk_path=/etc/alternatives/java_sdk_1.8.0_openjdk\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MzkxOA==", "bodyText": "We should consider updating our default builds to install the JDK like this, rather than the JRE. It's super useful to have a JDK around for all sorts of things.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384763918", "createdAt": "2020-02-26T21:03:47Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -49,6 +48,7 @@\n           - cmake\n           - gcc\n           - gcc-c++\n+          - java-1.8.0-openjdk-devel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2NDEwMA==", "bodyText": "Whoops: need to go uncomment this and make sure that things still work.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384764100", "createdAt": "2020-02-26T21:04:08Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -92,6 +92,23 @@\n         PERF_RECORD_SECONDS: \"{{ perf_record_seconds }}\"\n       become: true\n \n+      #    - name: Attach Java Symbol Agent to Java Process\n+      #      shell: \"java -cp attach-main.jar:$JAVA_HOME/lib/tools.jar net.virtualvoid.perf.AttachOnce {{ process_pid }}\"\n+      #      args:\n+      #        chdir: \"{{ perf_map_agent_path_remote }}/out\"\n+      #      environment:\n+      #        JAVA_HOME: \"{{ jdk_path }}\"\n+      #      become: true\n+      #      become_user: \"{{ java_user }}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f6e40c579157ce8dc273017c259cad1dbfcac3e", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/5f6e40c579157ce8dc273017c259cad1dbfcac3e", "committedDate": "2020-02-26T21:07:36Z", "message": "Uncomment a task that I'd disabled temporarily.\n\nBLUEBUTTON-1644"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NzMyMjQz", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#pullrequestreview-365732243", "createdAt": "2020-02-27T14:55:37Z", "commit": {"oid": "5f6e40c579157ce8dc273017c259cad1dbfcac3e"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDo1NTozN1rOFvUt0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDo1NTozN1rOFvUt0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NjgwMw==", "bodyText": "No idea why it was locked to ini. Agreed we should remove.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r385166803", "createdAt": "2020-02-27T14:55:37Z", "author": {"login": "jzulim"}, "path": "ops/ansible/playbooks-ccs/ansible.cfg", "diffHunk": "@@ -42,4 +42,4 @@ pipelining = True\n #ssh_args = -o ControlMaster=no\n \n [inventory]\n-enable_plugins = ini\n+#enable_plugins = ini", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MjkzNA=="}, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTQ0NjQz", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#pullrequestreview-367544643", "createdAt": "2020-03-02T21:34:44Z", "commit": {"oid": "5f6e40c579157ce8dc273017c259cad1dbfcac3e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c945aad995ac6d39e50575e57ce878095101173e", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/c945aad995ac6d39e50575e57ce878095101173e", "committedDate": "2021-01-21T18:28:49Z", "message": "Merge branch 'master' into BLUEBUTTON-1644-java-flamegraph-script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1282b6e6fbebb097c7b9b6c4b1e41794ba6fa35b", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/1282b6e6fbebb097c7b9b6c4b1e41794ba6fa35b", "committedDate": "2021-01-21T18:35:49Z", "message": "Merge branch 'master' into BLUEBUTTON-1644-java-flamegraph-script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05194131c80fd2a00f7c830d1085334a6281a179", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/05194131c80fd2a00f7c830d1085334a6281a179", "committedDate": "2021-01-21T19:57:45Z", "message": "Merge branch 'master' into BLUEBUTTON-1644-java-flamegraph-script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d686dcc090e0b1a60a816c95f174ff28384c5d38", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d686dcc090e0b1a60a816c95f174ff28384c5d38", "committedDate": "2021-01-25T20:46:35Z", "message": "Merge branch 'master' into BLUEBUTTON-1644-java-flamegraph-script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc1ODI0MzI4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#pullrequestreview-575824328", "createdAt": "2021-01-25T21:30:40Z", "commit": {"oid": "d686dcc090e0b1a60a816c95f174ff28384c5d38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7129ce78d73607684ea96111eb22dd2e5ca32ceb", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/7129ce78d73607684ea96111eb22dd2e5ca32ceb", "committedDate": "2021-01-28T16:58:47Z", "message": "Merge branch 'master' into BLUEBUTTON-1644-java-flamegraph-script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc4NTU2NzQ0", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#pullrequestreview-578556744", "createdAt": "2021-01-28T17:10:38Z", "commit": {"oid": "7129ce78d73607684ea96111eb22dd2e5ca32ceb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 695, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}