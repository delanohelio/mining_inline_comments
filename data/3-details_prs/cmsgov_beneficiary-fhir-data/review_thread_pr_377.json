{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NDc5NjU4", "number": 377, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOEvhTzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOEvhTzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MjY0MjcxOnYy", "diffSide": "RIGHT", "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/InpatientClaimTransformer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOHkjOpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOHkjOpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA4Nzk3Mg==", "bodyText": "Moving this for reuse for inpatient and snf, nice.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377#discussion_r508087972", "createdAt": "2020-10-19T22:00:47Z", "author": {"login": "jzulim"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/InpatientClaimTransformer.java", "diffHunk": "@@ -313,21 +313,8 @@ private static ExplanationOfBenefit transformClaim(InpatientClaim claimGroup) {\n      * rather than requiring if-blocks.\n      */\n     Consumer<Optional<Diagnosis>> diagnosisAdder =\n-        diagnosisToAdd -> {\n-          if (diagnosisToAdd.isPresent()) {\n-            Optional<Diagnosis> matchingDiagnosis =\n-                diagnoses.stream()\n-                    .filter(d -> d.getCode().equals(diagnosisToAdd.get().getCode()))\n-                    .findFirst();\n-            if (matchingDiagnosis.isPresent()) {\n-              // append labels\n-              matchingDiagnosis.get().setLabels(DiagnosisLabel.PRINCIPAL);\n-              diagnoses.add(matchingDiagnosis.get());\n-            } else {\n-              diagnoses.add(diagnosisToAdd.get());\n-            }\n-          }\n-        };\n+        TransformerUtils.addPrincipalDiagnosis(diagnoses);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 259, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}