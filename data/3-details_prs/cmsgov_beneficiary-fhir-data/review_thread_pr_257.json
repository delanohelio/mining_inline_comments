{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2ODE3MjMx", "number": 257, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoxMjo0N1rOD18DnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0Nzo1N1rOD1802A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODg1MDg0OnYy", "diffSide": "RIGHT", "path": "insights/scripts/foodtruck/Pipfile", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoxMjo0N1rOGLnjjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNjo0NTozOVrOGMtKAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ==", "bodyText": "There was some discussion here as to whether the pipfile standard was being maintained: #187", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414835599", "createdAt": "2020-04-24T20:12:47Z", "author": {"login": "njdister"}, "path": "insights/scripts/foodtruck/Pipfile", "diffHunk": "@@ -0,0 +1,13 @@\n+[[source]]\n+name = \"pypi\"\n+url = \"https://pypi.org/simple\"\n+verify_ssl = true\n+\n+[dev-packages]\n+pylint = \"*\"\n+\n+[packages]\n+boto3 = \"*\"\n+\n+[requires]\n+python_version = \"3.8\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjg2OQ==", "bodyText": "Interesting. I've been using pipenv because it is similar to NPM. Nevertheless, I'll go to requirements.txt.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415882869", "createdAt": "2020-04-27T14:54:02Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/scripts/foodtruck/Pipfile", "diffHunk": "@@ -0,0 +1,13 @@\n+[[source]]\n+name = \"pypi\"\n+url = \"https://pypi.org/simple\"\n+verify_ssl = true\n+\n+[dev-packages]\n+pylint = \"*\"\n+\n+[packages]\n+boto3 = \"*\"\n+\n+[requires]\n+python_version = \"3.8\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3NTkzNw==", "bodyText": "Added a requirements.txt file.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415975937", "createdAt": "2020-04-27T16:45:39Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/scripts/foodtruck/Pipfile", "diffHunk": "@@ -0,0 +1,13 @@\n+[[source]]\n+name = \"pypi\"\n+url = \"https://pypi.org/simple\"\n+verify_ssl = true\n+\n+[dev-packages]\n+pylint = \"*\"\n+\n+[packages]\n+boto3 = \"*\"\n+\n+[requires]\n+python_version = \"3.8\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODg4ODE3OnYy", "diffSide": "RIGHT", "path": "insights/terraform/groups/main.tf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoyMzozMFrOGLn41A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDozNToxN1rOGLoRCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MTA0NA==", "bodyText": "Shouldn't this be a resource rather than a data source (since these groups don't currently exist) or am I misunderstanding how this works?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414841044", "createdAt": "2020-04-24T20:23:30Z", "author": {"login": "njdister"}, "path": "insights/terraform/groups/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+locals {\n+  # Add new group members here\n+  member_map  = {\n+    analysts  = [\"HWRI\", \"SKKH\"]\n+    authors   = [\"TUVE\"]\n+    readers   = []\n+  }\n+}\n+\n+# Add to the IAM groups\n+\n+data \"aws_iam_group\" \"groups\" {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NzI0MA==", "bodyText": "Nevermind, it took me slightly longer to reason that groups and group memberships were managed in separate places", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414847240", "createdAt": "2020-04-24T20:35:17Z", "author": {"login": "njdister"}, "path": "insights/terraform/groups/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+locals {\n+  # Add new group members here\n+  member_map  = {\n+    analysts  = [\"HWRI\", \"SKKH\"]\n+    authors   = [\"TUVE\"]\n+    readers   = []\n+  }\n+}\n+\n+# Add to the IAM groups\n+\n+data \"aws_iam_group\" \"groups\" {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MTA0NA=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk0MDUxOnYy", "diffSide": "RIGHT", "path": "insights/terraform/modules/bucket/main.tf", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDozNzo0N1rOGLoWJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODo0MTo1M1rOGO1xbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ==", "bodyText": "Any reason to go with AES over KMS?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414848551", "createdAt": "2020-04-24T20:37:47Z", "author": {"login": "njdister"}, "path": "insights/terraform/modules/bucket/main.tf", "diffHunk": "@@ -0,0 +1,39 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+resource \"aws_s3_bucket\" \"main\" {\n+  bucket    = \"bfd-insights-${var.sensitivity}-${data.aws_caller_identity.current.account_id}\"\n+  acl       = \"private\"\n+  tags      = merge({sensitivity = var.sensitivity}, var.tags)\n+\n+  server_side_encryption_configuration {\n+    rule {\n+      apply_server_side_encryption_by_default {\n+        sse_algorithm     = \"AES256\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTAyMQ==", "bodyText": "This is a judgment call. AES uses the KMS, so fundamentally the security offered is the same. AWS does rotate keys more frequently than us, so that is an advantage. From a configuration point of view, it is difficult to get all the components in the workflow to use a CMK stored in KMS. I couldn't get it to work on with Athena, for example. Every BFD partner will need access to PutObjects into this bucket, so the cross-account permissions will are already complex without the complexity of KMS permissions.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979021", "createdAt": "2020-04-27T16:49:46Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/terraform/modules/bucket/main.tf", "diffHunk": "@@ -0,0 +1,39 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+resource \"aws_s3_bucket\" \"main\" {\n+  bucket    = \"bfd-insights-${var.sensitivity}-${data.aws_caller_identity.current.account_id}\"\n+  acl       = \"private\"\n+  tags      = merge({sensitivity = var.sensitivity}, var.tags)\n+\n+  server_side_encryption_configuration {\n+    rule {\n+      apply_server_side_encryption_by_default {\n+        sse_algorithm     = \"AES256\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIxNDI1NA==", "bodyText": "Look at the new changes. Switched to a CMK.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r418214254", "createdAt": "2020-04-30T18:41:53Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/terraform/modules/bucket/main.tf", "diffHunk": "@@ -0,0 +1,39 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+resource \"aws_s3_bucket\" \"main\" {\n+  bucket    = \"bfd-insights-${var.sensitivity}-${data.aws_caller_identity.current.account_id}\"\n+  acl       = \"private\"\n+  tags      = merge({sensitivity = var.sensitivity}, var.tags)\n+\n+  server_side_encryption_configuration {\n+    rule {\n+      apply_server_side_encryption_by_default {\n+        sse_algorithm     = \"AES256\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk2ODczOnYy", "diffSide": "RIGHT", "path": "insights/terraform/modules/database/main.tf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0NTo0MlrOGLomIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNjo1MDozMFrOGMtYTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjY0MA==", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here.  Is this intended?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414852640", "createdAt": "2020-04-24T20:45:42Z", "author": {"login": "njdister"}, "path": "insights/terraform/modules/database/main.tf", "diffHunk": "@@ -0,0 +1,37 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTU5Nw==", "bodyText": "Yes. We may refactor when a second bucket is introduced, but that is few weeks away.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979597", "createdAt": "2020-04-27T16:50:30Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/terraform/modules/database/main.tf", "diffHunk": "@@ -0,0 +1,37 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjY0MA=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk3MzIyOnYy", "diffSide": "RIGHT", "path": "insights/terraform/modules/firehose/main.tf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0NjozN1rOGLoodA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0NjozN1rOGLoodA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzIzNg==", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here. Is this intended?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414853236", "createdAt": "2020-04-24T20:46:37Z", "author": {"login": "njdister"}, "path": "insights/terraform/modules/firehose/main.tf", "diffHunk": "@@ -0,0 +1,63 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODk3Njg4OnYy", "diffSide": "RIGHT", "path": "insights/terraform/modules/table/main.tf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo0Nzo1N1rOGLoqsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNjo1MDo1MVrOGMtZbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzgwOA==", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here. Is this intended?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414853808", "createdAt": "2020-04-24T20:47:57Z", "author": {"login": "njdister"}, "path": "insights/terraform/modules/table/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTg4NA==", "bodyText": "See previous answer", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979884", "createdAt": "2020-04-27T16:50:51Z", "author": {"login": "RickHawesUSDS"}, "path": "insights/terraform/modules/table/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzgwOA=="}, "originalCommit": {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 344, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}