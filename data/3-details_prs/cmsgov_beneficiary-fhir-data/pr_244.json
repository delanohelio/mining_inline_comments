{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3ODQzMTQ2", "number": 244, "title": "Create Logrotate Definitions to Ensure Disk Space", "bodyText": "PR for creating logrotate definitions for the bfd-server logs located here, Nathan Dister determined that the extra disk space was not needed if we rotate the logs:\n/usr/local/bfd-server/access.json\n/usr/local/bfd-server/access.log\n/usr/local/bfd-server/bfd-server-startup.log\n/usr/local/bfd-server/bluebutton-server-app-log.json\n/usr/local/bfd-server/gc.log\n/usr/local/bfd-server/newrelic_agent.log", "createdAt": "2020-03-13T15:35:57Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244", "merged": true, "mergeCommit": {"oid": "d930dabf60e389721df1dff7cf8e2e48ced99a4d"}, "closed": true, "closedAt": "2020-04-08T16:06:14Z", "author": {"login": "cthulhuplus"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNQ4N7gH2gAyMzg3ODQzMTQ2OmIxYjcwZDUxMjU5YWJmMTljOTkzMjdiMDdjMDg5ZTA1ZGFhNjVhMzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVp47lgFqTM5MDEwMTU4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b1b70d51259abf19c99327b07c089e05daa65a30", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/b1b70d51259abf19c99327b07c089e05daa65a30", "committedDate": "2020-03-13T14:06:59Z", "message": "Moving disk space to AMI build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ba339050afc73e115685742b3fdfce40e3d880", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/85ba339050afc73e115685742b3fdfce40e3d880", "committedDate": "2020-03-13T16:23:22Z", "message": "Updated file path for user_data_file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3248e955e71b67a95a5e98605fe737bbe3da558b", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/3248e955e71b67a95a5e98605fe737bbe3da558b", "committedDate": "2020-03-16T16:37:28Z", "message": "Creating log rotation definitions for bfd-server logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDQwNjUw", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-376440650", "createdAt": "2020-03-17T22:10:41Z", "commit": {"oid": "3248e955e71b67a95a5e98605fe737bbe3da558b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MDEwMTI2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-377010126", "createdAt": "2020-03-18T16:02:08Z", "commit": {"oid": "3248e955e71b67a95a5e98605fe737bbe3da558b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a502bbbccabaa91c69d811a7fa3db530ea95b815", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/a502bbbccabaa91c69d811a7fa3db530ea95b815", "committedDate": "2020-03-18T16:21:15Z", "message": "Removed excess disk terraform provisioning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e7709952414fd5c60bc11f8060f4661ffd3812a", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/5e7709952414fd5c60bc11f8060f4661ffd3812a", "committedDate": "2020-03-18T16:25:15Z", "message": "Added comments to disabled disk extension terraform"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MDM0NDIw", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-377034420", "createdAt": "2020-03-18T16:29:05Z", "commit": {"oid": "5e7709952414fd5c60bc11f8060f4661ffd3812a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjoyOTowNVrOF4NKyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNjoyOTowNVrOF4NKyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ4MDMzMA==", "bodyText": "Maybe link or reference JIRA ticket here?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#discussion_r394480330", "createdAt": "2020-03-18T16:29:05Z", "author": {"login": "jzulim"}, "path": "ops/terraform/modules/resources/templates/fhir_server.tpl", "diffHunk": "@@ -4,10 +4,12 @@ set -e\n exec > >(tee -a /var/log/user_data.log 2>&1)\n \n # Extend gold image defined root partition with all available free space\n-sudo growpart /dev/nvme0n1 2\n-sudo pvresize /dev/nvme0n1p2\n-sudo lvextend -l +100%FREE /dev/VolGroup00/rootVol\n-sudo xfs_growfs /\n+# The extend gold image has been commented out in favor of rotating the logs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e7709952414fd5c60bc11f8060f4661ffd3812a"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1aaa388d5f9b7159d51d95378f707733d371eed", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/e1aaa388d5f9b7159d51d95378f707733d371eed", "committedDate": "2020-03-18T16:31:54Z", "message": "Added ticket ID to comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38bf5f7b84079c01be41e76d550ab6fe1d8bd18c", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/38bf5f7b84079c01be41e76d550ab6fe1d8bd18c", "committedDate": "2020-03-18T17:03:08Z", "message": "Added 1 rotation, copytruncate, and compression"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MTIwMjMx", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-377120231", "createdAt": "2020-03-18T18:14:10Z", "commit": {"oid": "38bf5f7b84079c01be41e76d550ab6fe1d8bd18c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dbf21218cc8a03f7a53b58c291053a85b2d8fd6", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/3dbf21218cc8a03f7a53b58c291053a85b2d8fd6", "committedDate": "2020-04-01T11:26:37Z", "message": "Readded extra disk, removed sudo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f487f0340b5db8415a6d5270edf753bf91eae06b", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/f487f0340b5db8415a6d5270edf753bf91eae06b", "committedDate": "2020-04-01T12:43:27Z", "message": "Merge branch 'master' into bbrooks/BLUEBUTTON-1582-Move-Add-Disk-Space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26546cc99369174ccd73c3842b44603616ce4655", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/26546cc99369174ccd73c3842b44603616ce4655", "committedDate": "2020-04-01T13:15:30Z", "message": "Merge branch 'master' into bbrooks/BLUEBUTTON-1582-Move-Add-Disk-Space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3724fa0fc1c1711fa8d3a82bf43ea242a95a6f3", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/e3724fa0fc1c1711fa8d3a82bf43ea242a95a6f3", "committedDate": "2020-04-01T13:54:00Z", "message": "Added sudo back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aba8c9fe0c719f0828388cc77a6927bf6e7c285b", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/aba8c9fe0c719f0828388cc77a6927bf6e7c285b", "committedDate": "2020-04-02T14:54:26Z", "message": "Adding the disk space back to 100"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NjA0NDMw", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-388604430", "createdAt": "2020-04-06T20:47:14Z", "commit": {"oid": "aba8c9fe0c719f0828388cc77a6927bf6e7c285b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMDo0NzoxNVrOGBpRFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMDo0NzoxNVrOGBpRFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM3Nzg3Nw==", "bodyText": "Can you remove sudo from these statements and test again?  I want to see how much time we might be losing to that one bug that caused issues for me in the AMI refactor.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#discussion_r404377877", "createdAt": "2020-04-06T20:47:15Z", "author": {"login": "njdister"}, "path": "ops/terraform/modules/resources/templates/fhir_server.tpl", "diffHunk": "@@ -4,6 +4,8 @@ set -e\n exec > >(tee -a /var/log/user_data.log 2>&1)\n \n # Extend gold image defined root partition with all available free space\n+# The extend gold image has been commented out in favor of rotating the logs\n+# Doing this should improve deploy time, BLUEBUTTON-1582\n sudo growpart /dev/nvme0n1 2\n sudo pvresize /dev/nvme0n1p2\n sudo lvextend -l +100%FREE /dev/VolGroup00/rootVol", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba8c9fe0c719f0828388cc77a6927bf6e7c285b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d69f7a4b0f6784d817c8a02f98075811684da621", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d69f7a4b0f6784d817c8a02f98075811684da621", "committedDate": "2020-04-07T12:46:29Z", "message": "Removed sudo for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4ab448e40b6e697bff7f8cd33a81d86c861e2e6", "author": {"user": {"login": "cthulhuplus", "name": "Bill Brooks"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/b4ab448e40b6e697bff7f8cd33a81d86c861e2e6", "committedDate": "2020-04-07T15:22:06Z", "message": "Reduced disk space added to 60Gb from 100Gb"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MzI1Njk4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-389325698", "createdAt": "2020-04-07T17:13:55Z", "commit": {"oid": "b4ab448e40b6e697bff7f8cd33a81d86c861e2e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTAxNTg2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/244#pullrequestreview-390101586", "createdAt": "2020-04-08T15:46:47Z", "commit": {"oid": "b4ab448e40b6e697bff7f8cd33a81d86c861e2e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 712, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}