{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NTgxOTIx", "number": 239, "title": "BLUEBUTTON-1900: Ensure all FHIR resources have a lastUpdated value", "bodyText": "Why\nBased on conversations with the FHIR community, all resources should have a lastUpdated if any of them do.\nWhat Changed\n\nCreated a fallback lastUpdated value for resource loaded in the database.\nUsed the fallback value for FHIR resources based on SQL entities that do have a lastUpdated value. This all handled in the setLastUpdated helper function.\nTests associated with this logic\n\nWhat to review\n\nThe handling of null and optional values\n\nSecurity Impact\nN/A", "createdAt": "2020-03-06T01:01:38Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239", "merged": true, "mergeCommit": {"oid": "510b5a52f10b4daf89e2a358b21fa2c07f5853dc"}, "closed": true, "closedAt": "2020-03-13T14:54:06Z", "author": {"login": "RickHawesUSDS"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcK1HwfAH2gAyMzg0NTgxOTIxOmQ1MTllMzc3NjdjNWQwYjFhOWJkMDMyMjViNzVkYTA3N2RhMzQ4Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNQNxIgFqTM3NDI5MjQxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d519e37767c5d0b1a9bd03225b75da077da348c7", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d519e37767c5d0b1a9bd03225b75da077da348c7", "committedDate": "2020-03-06T00:38:46Z", "message": "Added a FALLBACK_LAST_UPDATED value\n\n- Used when a null lastUpdated value is in the SQL record"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDIxODYx", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239#pullrequestreview-370021861", "createdAt": "2020-03-06T01:03:26Z", "commit": {"oid": "d519e37767c5d0b1a9bd03225b75da077da348c7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTowMzoyNlrOFyp1eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTowMzoyNlrOFyp1eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY1ODU1Mg==", "bodyText": "This is an arbitrary date that is before any actual lastUpdated values. I've chosen the first second of the year, to look arbitrary.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239#discussion_r388658552", "createdAt": "2020-03-06T01:03:26Z", "author": {"login": "RickHawesUSDS"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/TransformerConstants.java", "diffHunk": "@@ -225,4 +227,10 @@\n    */\n   static final String CODING_BBAPI_BENE_HICN_HASH_OLD =\n       \"http://bluebutton.cms.hhs.gov/identifier#hicnHash\";\n+\n+  /**\n+   * Fallback value to use when a record does not have a lastUpdated value. These records where\n+   * loaded before the lastUpdated feature was in place.\n+   */\n+  static final Date FALLBACK_LAST_UPDATED = Date.from(Instant.parse(\"2020-01-01T00:00:00Z\"));\n }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d519e37767c5d0b1a9bd03225b75da077da348c7"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMzYwNDAy", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239#pullrequestreview-370360402", "createdAt": "2020-03-06T14:28:22Z", "commit": {"oid": "d519e37767c5d0b1a9bd03225b75da077da348c7"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52aa5cf6d668b7aea3da6df485a63934be310d45", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/52aa5cf6d668b7aea3da6df485a63934be310d45", "committedDate": "2020-03-10T03:19:45Z", "message": "Fix the order of the lastUpdated test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "412675b2cdc16519e1c0a8dc968403c6a7177abd", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/412675b2cdc16519e1c0a8dc968403c6a7177abd", "committedDate": "2020-03-10T12:49:13Z", "message": "Update imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczODg2OTAy", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239#pullrequestreview-373886902", "createdAt": "2020-03-12T20:43:18Z", "commit": {"oid": "412675b2cdc16519e1c0a8dc968403c6a7177abd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MjkyNDE4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/239#pullrequestreview-374292418", "createdAt": "2020-03-13T13:20:37Z", "commit": {"oid": "412675b2cdc16519e1c0a8dc968403c6a7177abd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 705, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}