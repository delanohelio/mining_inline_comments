{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0Mzc2MDE2", "number": 386, "title": "BFD-501: Adding x-forwarded and unifying bulk headers to documentation", "bodyText": "Change Details\nWe are wanting to add the x-forarded-for header to synchronous requests (i.e. BB2.0) and would like to unify our bulk header requests so they are not peer partner specific.\n\n\nAcceptance Validation\nAre the header names correct and do they imply their usage correctly?\nDo the header descriptions provide the context for future and current users?\n\n\nFeedback Requested\nAre the header names correct and do they imply their usage correctly?\nDo the header descriptions provide the context for future and current users?\n\nExternal References\n\n\nBFD-501\n\nSecurity Implications\n\n\n new software dependencies\n\n\n\n altered security controls\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications", "createdAt": "2020-11-02T22:47:27Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386", "merged": true, "mergeCommit": {"oid": "46a520954ec05f0767d70962bbe32e141d568eb2"}, "closed": true, "closedAt": "2020-11-12T17:50:01Z", "author": {"login": "jzulim"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYsdBAAH2gAyNTE0Mzc2MDE2OmNkYjM4YjE5M2U2OWQ3YmM2NWY2MDNiNGU5NjU5ZWJjNmQ0NTk4NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb2HuTAFqTUyOTMyOTgwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/cdb38b193e69d7bc65f603b4e9659ebc6d459873", "committedDate": "2020-11-02T22:38:56Z", "message": "Adding x-forwarded and unifying bulk headers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMTMyOTE5", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-522132919", "createdAt": "2020-11-03T00:55:13Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMDo1NToxM1rOHsc3pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMDo1NToxM1rOHsc3pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM3MjM5MQ==", "bodyText": "Will requests that contain these deprecated headers be rejected?\nFor reference, the code in BCDA which sets these headers is here.\nCC: @mtrang1263", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#discussion_r516372391", "createdAt": "2020-11-03T00:55:13Z", "author": {"login": "msnook"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -25,28 +25,13 @@ For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful val\n * `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n * `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n * `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+* `x-forwarded-for`: a standard header for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or a load balancer.\n \n ## Asynchronous Requests\n \n For asynchronous (i.e. bulk) requests, BFD users SHALL include meaningful values for as many as possible of the following HTTP headers.\n \n-### BCDA", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NDQxMjk2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-526441296", "createdAt": "2020-11-09T16:39:59Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNjozOTo1OVrOHv3X9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNjozOTo1OVrOHv3X9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk1MjM3Mw==", "bodyText": "What is the recommended migration path for these headers?\nShould BCDA start sending BULK-CLIENTID and BULK-JOBID in addition to BCDA-CMSID and BCDA-JOBID?\nAnd if we do not send these two headers (and continue sending BCDA-CMSID and BCDA-JOBID), will our request get rejected?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#discussion_r519952373", "createdAt": "2020-11-09T16:39:59Z", "author": {"login": "mtrang1263"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -25,28 +25,13 @@ For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful val\n * `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n * `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n * `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+* `x-forwarded-for`: a standard header for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or a load balancer.\n \n ## Asynchronous Requests\n \n For asynchronous (i.e. bulk) requests, BFD users SHALL include meaningful values for as many as possible of the following HTTP headers.\n \n-### BCDA\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `BCDA-CMSID`: the 5 digit A1234 Identifier for ACOs\n-* `BCDA-JOBID`: integer generated by DB sequence\n-\n-### AB2D\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `AB2D-CMSID`: the Part D contract ID\n-* `AB2D-JOBID`: integer generated by DB sequence\n-\n-### DPC\n-\n * `BlueButton-OriginalQueryId`: (see above; same thing)\n     * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `DPC-CMSID`: The NPI of the downstream requesting provider or organization.\n-* `DPC-JOBID`: integer generated by DB sequence\n+* `BULK-CLIENTID`: a unique identifier of the bulk client for whom this request is for (i.e. ACO ID, NPI, Part D Contract)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjIyMDc4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-527622078", "createdAt": "2020-11-10T21:29:07Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMToyOTowN1rOHwwUAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMToyOTowN1rOHwwUAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg4NTI1MQ==", "bodyText": "Do we need another header to differentiate between the various partner applications? Or do we believe that BULK-CLIENTID can be leverage to see who the source was (e.g. BCDA request would have BULK-CLIENTID set to A****, V***, E***)", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#discussion_r520885251", "createdAt": "2020-11-10T21:29:07Z", "author": {"login": "mtrang1263"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -25,28 +25,13 @@ For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful val\n * `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n * `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n * `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+* `x-forwarded-for`: a standard header for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or a load balancer.\n \n ## Asynchronous Requests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjM1MzQy", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-527635342", "createdAt": "2020-11-10T21:49:36Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjgxMTY1", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-527681165", "createdAt": "2020-11-10T23:09:32Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowOTozM1rOHwzL0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzoxODoxNVrOHwzZFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzMjMwNA==", "bodyText": "We use UUIDs for almost everything in the backend, including job ids. We do not use db sequences. Is an integer really a must?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#discussion_r520932304", "createdAt": "2020-11-10T23:09:33Z", "author": {"login": "DeirdreHolub"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -25,28 +25,13 @@ For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful val\n * `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n * `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n * `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+* `x-forwarded-for`: a standard header for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or a load balancer.\n \n ## Asynchronous Requests\n \n For asynchronous (i.e. bulk) requests, BFD users SHALL include meaningful values for as many as possible of the following HTTP headers.\n \n-### BCDA\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `BCDA-CMSID`: the 5 digit A1234 Identifier for ACOs\n-* `BCDA-JOBID`: integer generated by DB sequence\n-\n-### AB2D\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `AB2D-CMSID`: the Part D contract ID\n-* `AB2D-JOBID`: integer generated by DB sequence\n-\n-### DPC\n-\n * `BlueButton-OriginalQueryId`: (see above; same thing)\n     * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `DPC-CMSID`: The NPI of the downstream requesting provider or organization.\n-* `DPC-JOBID`: integer generated by DB sequence\n+* `BULK-CLIENTID`: a unique identifier of the bulk client for whom this request is for (i.e. ACO ID, NPI, Part D Contract)\n+* `BULK-JOBID`: integer generated by DB sequence", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNTcwMg==", "bodyText": "DPC uses UUIDs as internal identifiers, as mentioned elsewhere in another comment. DPC logging always includes the UUID, not the NPI. Any problem with using UUID here?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#discussion_r520935702", "createdAt": "2020-11-10T23:18:15Z", "author": {"login": "DeirdreHolub"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -25,28 +25,13 @@ For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful val\n * `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n * `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n * `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+* `x-forwarded-for`: a standard header for identifying the originating IP address of a client connecting to a web server through an HTTP proxy or a load balancer.\n \n ## Asynchronous Requests\n \n For asynchronous (i.e. bulk) requests, BFD users SHALL include meaningful values for as many as possible of the following HTTP headers.\n \n-### BCDA\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `BCDA-CMSID`: the 5 digit A1234 Identifier for ACOs\n-* `BCDA-JOBID`: integer generated by DB sequence\n-\n-### AB2D\n-\n-* `BlueButton-OriginalQueryId`: (see above; same thing)\n-    * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `AB2D-CMSID`: the Part D contract ID\n-* `AB2D-JOBID`: integer generated by DB sequence\n-\n-### DPC\n-\n * `BlueButton-OriginalQueryId`: (see above; same thing)\n     * For asynchronous jobs, users SHALL use the `BlueButton-OriginalQueryId` for the HTTP request that created/submitted/whatever the job.\n-* `DPC-CMSID`: The NPI of the downstream requesting provider or organization.\n-* `DPC-JOBID`: integer generated by DB sequence\n+* `BULK-CLIENTID`: a unique identifier of the bulk client for whom this request is for (i.e. ACO ID, NPI, Part D Contract)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Mzc2NjY4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-528376668", "createdAt": "2020-11-11T17:17:34Z", "commit": {"oid": "cdb38b193e69d7bc65f603b4e9659ebc6d459873"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "140d18c787b792dfbaac4eee376fa8a9658ed817", "author": {"user": {"login": "jzulim", "name": "John Zulim"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/140d18c787b792dfbaac4eee376fa8a9658ed817", "committedDate": "2020-11-12T16:50:01Z", "message": "Change language to specify alternative ID's"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzI3NzE3", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-529327717", "createdAt": "2020-11-12T17:34:30Z", "commit": {"oid": "140d18c787b792dfbaac4eee376fa8a9658ed817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzI5ODAz", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/386#pullrequestreview-529329803", "createdAt": "2020-11-12T17:36:30Z", "commit": {"oid": "140d18c787b792dfbaac4eee376fa8a9658ed817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 506, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}