{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NDc5NjU4", "number": 377, "title": "Cbrune/bfd 482 snfdiagnosisfix", "bodyText": "Change Details\n\n\nAdded fix so that SNF claims can show principal and admitting when their respective diagnosis codes are the same\nAcceptance Validation\n\nAll unit tests pass and make sure the diagnosis code for a snf that is the same for principal and admitting show up\n\nFeedback Requested\n\nExternal References\n\n\nBFD-482\n\nSecurity Implications\n\nno\n\n new software dependencies\n\n\n\n altered security controls\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications", "createdAt": "2020-10-16T01:00:09Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377", "merged": true, "mergeCommit": {"oid": "f688f62de587701f8e5bdd201a73e25be9a79ce0"}, "closed": true, "closedAt": "2020-10-22T18:53:16Z", "author": {"login": "cbrunefearless"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdRAljdAH2gAyNTA0NDc5NjU4OjJiNjA2ZjBhZjVhMzBmZWZjZDYxMzgxODFmYTAxYWExMjE2OTdmMDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVF0JsAFqTUxNDk4MjYyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b606f0af5a30fefcd6138181fa01aa121697f02", "author": {"user": {"login": "cbrunefearless", "name": "Chris Brune"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/2b606f0af5a30fefcd6138181fa01aa121697f02", "committedDate": "2020-10-10T01:34:58Z", "message": "Removed the principal code out into the transformerutils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1af5809553ccedaeecc01401e8b1faa48b16a3ce", "author": {"user": {"login": "cbrunefearless", "name": "Chris Brune"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/1af5809553ccedaeecc01401e8b1faa48b16a3ce", "committedDate": "2020-10-15T16:43:14Z", "message": "Fix for snf claims not showing principal and admitting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f", "author": {"user": {"login": "cbrunefearless", "name": "Chris Brune"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/80930fd3202bf7304129d80b08ead46f5376111f", "committedDate": "2020-10-15T16:59:17Z", "message": "Fix for snf claims not showing principal and admitting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExODY3NTUx", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377#pullrequestreview-511867551", "createdAt": "2020-10-19T15:07:35Z", "commit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMTkwODY4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377#pullrequestreview-512190868", "createdAt": "2020-10-19T22:00:47Z", "commit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOHkjOpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMjowMDo0N1rOHkjOpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA4Nzk3Mg==", "bodyText": "Moving this for reuse for inpatient and snf, nice.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377#discussion_r508087972", "createdAt": "2020-10-19T22:00:47Z", "author": {"login": "jzulim"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/InpatientClaimTransformer.java", "diffHunk": "@@ -313,21 +313,8 @@ private static ExplanationOfBenefit transformClaim(InpatientClaim claimGroup) {\n      * rather than requiring if-blocks.\n      */\n     Consumer<Optional<Diagnosis>> diagnosisAdder =\n-        diagnosisToAdd -> {\n-          if (diagnosisToAdd.isPresent()) {\n-            Optional<Diagnosis> matchingDiagnosis =\n-                diagnoses.stream()\n-                    .filter(d -> d.getCode().equals(diagnosisToAdd.get().getCode()))\n-                    .findFirst();\n-            if (matchingDiagnosis.isPresent()) {\n-              // append labels\n-              matchingDiagnosis.get().setLabels(DiagnosisLabel.PRINCIPAL);\n-              diagnoses.add(matchingDiagnosis.get());\n-            } else {\n-              diagnoses.add(diagnosisToAdd.get());\n-            }\n-          }\n-        };\n+        TransformerUtils.addPrincipalDiagnosis(diagnoses);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTgyNjI5", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/377#pullrequestreview-514982629", "createdAt": "2020-10-22T17:56:08Z", "commit": {"oid": "80930fd3202bf7304129d80b08ead46f5376111f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 631, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}