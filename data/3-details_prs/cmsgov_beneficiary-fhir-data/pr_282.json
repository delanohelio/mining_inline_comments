{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NjY3Mzkz", "number": 282, "title": "BFD-172: BB2 project setup", "bodyText": "This is PR sets up the BB2 project in BFD-Insights. This PR captures the work done so far on setting up this project because I am going to pause this work for a while.\nChange Details\n\nCreates a bb2 project folder with bb2 resources: bucket, database, events table, glue roles\nCreates a synthetic data firehose\nCreates a BB2 synthetic event generator\nDocuments for BB2\nDocuments about normalizing BB2 data\n\nAcceptance Validation\n\nThis is work in progress.\n\nFeedback Requested\n\nIs this PR safe?\nNot meant to be complete\n\nExternal References\nBFD-172: Setup BB2 Project\nSecurity Implications\nNone\n\n new software dependencies\n\n\n\n altered security controls\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications", "createdAt": "2020-05-18T18:25:10Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/282", "merged": true, "mergeCommit": {"oid": "7f9c00972118b57997206bcd8423c7af56801135"}, "closed": true, "closedAt": "2020-07-23T15:42:00Z", "author": {"login": "RickHawesUSDS"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcikBJ2gH2gAyNDE5NjY3MzkzOjNkYWM3NDczYTAzY2ExODY1NmExMDg0MGY3NmFhNGYyMWE5ZjMwNWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0iKzbgFqTQ0NzI5NDg4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3dac7473a03ca18656a10840f76aa4f21a9f305c", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/3dac7473a03ca18656a10840f76aa4f21a9f305c", "committedDate": "2020-05-18T18:17:21Z", "message": "Initial BB2 setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a634f834601d865482b032bfe9e95d7664c926fd", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/a634f834601d865482b032bfe9e95d7664c926fd", "committedDate": "2020-05-18T18:17:21Z", "message": "Added a core tables doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0129cca24836fb2b6361e28a98e3381fda3449d", "author": {"user": null}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d0129cca24836fb2b6361e28a98e3381fda3449d", "committedDate": "2020-05-18T18:17:21Z", "message": "Update on bb2 moderate bucket"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDMzMjE2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/282#pullrequestreview-415433216", "createdAt": "2020-05-20T15:04:43Z", "commit": {"oid": "d0129cca24836fb2b6361e28a98e3381fda3449d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowNDo0M1rOGYQW_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowNDo0M1rOGYQW_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA4NzAzOQ==", "bodyText": "I'm a little confused by this part, we only want to login 1 out of 20 times?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/282#discussion_r428087039", "createdAt": "2020-05-20T15:04:43Z", "author": {"login": "adaykin"}, "path": "insights/scripts/bb2/apps.py", "diffHunk": "@@ -0,0 +1,79 @@\n+import random\n+import events\n+from datetime import datetime, timedelta\n+\n+class App:  \n+  def generate_session(self, start_time: datetime, bene):\n+    return []\n+\n+  def random_hash(self):\n+    hex_letters = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f']\n+    return ''.join(random.choice(hex_letters) for _ in range(32))\n+\n+class Humana(App):\n+  def app_id(self):\n+    return 13\n+  \n+  def app_name(self):\n+    return \"Humana\"\n+  \n+  def dev_id(self):\n+    return 180\n+  \n+  def dev_name(self):\n+    return \"mscrimshire+humana@gmail.com\"\n+\n+  def generate_session(self, start_time: datetime, bene):\n+    token_hash = self.random_hash()\n+    current_time = start_time\n+    call_period = timedelta(seconds=0.4)\n+\n+    if random.randint(0,30) == 0: \n+      yield events.my_medicare_login(bene, self, current_time)\n+      current_time += call_period\n+\n+    yield events.token_response(bene, self, current_time, token_hash)\n+    current_time += call_period\n+\n+    for _ in range(random.randint(1, 9)):\n+      yield events.eob_response(bene, self, current_time, token_hash)\n+      current_time += call_period\n+\n+    yield events.patient_response(bene, self, current_time, token_hash)\n+\n+\n+class Evidation(App):\n+  def app_id(self):\n+    return 32\n+  \n+  def app_name(self):\n+    return \"Evidation on behalf of Heartline\"\n+  \n+  def dev_id(self):\n+    return  11770\n+  \n+  def dev_name(self):\n+    return \"mscrimshire+evidationheartline@gmail.com\"\n+\n+  def generate_session(self, start_time: datetime, bene):\n+    token_hash = self.random_hash()\n+    current_time = start_time\n+    call_period = timedelta(seconds=0.3)\n+\n+    if random.randint(0,20) == 0: ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0129cca24836fb2b6361e28a98e3381fda3449d"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1Njc5OTIx", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/282#pullrequestreview-415679921", "createdAt": "2020-05-20T20:13:33Z", "commit": {"oid": "d0129cca24836fb2b6361e28a98e3381fda3449d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Mjk0ODg4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/282#pullrequestreview-447294888", "createdAt": "2020-07-13T14:18:43Z", "commit": {"oid": "d0129cca24836fb2b6361e28a98e3381fda3449d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 750, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}