{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDYwMzk0", "number": 368, "title": "BFD-354: Document HTTP request headers (for audit and optional data)", "bodyText": "Change Details\n\n\nAdd docs on HTTP request headers.\nCovers the headers used for audit purposes and those that toggle optional data in the results.\nPlease note that I also included a bunch of formatting and whitespace changes here in the README.md, to:\n\nResolve Git issues with the file.\nEnsure that it made sense, from an info architecture angle.\n\n(You'll want to either review the commits individually or suppress whitespace changes when reviewing.)\nhttps://jira.cms.gov/browse/BFD-354\nAcceptance Validation\n\n\n\nIs the documentation clear?\nIs the documentation correct?\nIs the documentation complete (or complete enough for now)?\n\nFeedback Requested\n\n(See Acceptance Criteria, above.)\nExternal References\n\nN/A\nSecurity Implications\n\nNo security implications noted here:\n\n new software dependencies\n\n\n\n altered security controls\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications", "createdAt": "2020-10-01T18:22:38Z", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368", "merged": true, "mergeCommit": {"oid": "9abb6cb0be85fd5b691be60eb98016a527ebec10"}, "closed": true, "closedAt": "2020-10-08T17:55:50Z", "author": {"login": "karlmdavis"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOVAjRgH2gAyNDk2NDYwMzk0OmY4ZjEzMzM5ZDA4MDA2NTQ4Y2EwMmYwYTJjZjk2YmVjYzI0Mjg0OGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPtlb3gFqTUwMjUxNDYwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8f13339d08006548ca02f0a2cf96becc242848b", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/f8f13339d08006548ca02f0a2cf96becc242848b", "committedDate": "2020-10-01T17:40:47Z", "message": "Fix up README headers.\n\nThey were a bit off and made the doc a bit more confusing.\n\nBFD-354"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abe8ea89475e9bbc56225e4bb6fd05e840ea58f6", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/abe8ea89475e9bbc56225e4bb6fd05e840ea58f6", "committedDate": "2020-10-01T18:00:37Z", "message": "Fix line endings and trailing whitespace in README\n\nIt was all goofed up.\n\nBFD-354"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b29d9bc2d4a057734bc8e2b9faffd1d205e9d6e", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/7b29d9bc2d4a057734bc8e2b9faffd1d205e9d6e", "committedDate": "2020-10-01T18:13:45Z", "message": "Add docs on HTTP request headers.\n\nCovers the headers used for audit purposes and those that toggle\noptional data in the results.\n\nBFD-354"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4", "author": {"user": {"login": "karlmdavis", "name": "Karl M. Davis"}}, "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4", "committedDate": "2020-10-01T18:24:18Z", "message": "Add section for (internal) developer docs.\n\nAlmost certainly missing several others, but this is a start, at least.\n\nBFD-354"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDkxODUx", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#pullrequestreview-502491851", "createdAt": "2020-10-05T23:39:59Z", "commit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDkyMzQ2", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#pullrequestreview-502492346", "createdAt": "2020-10-05T23:41:39Z", "commit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzo0MTozOVrOHcxQhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzo0MTozOVrOHcxQhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyOTIyMg==", "bodyText": "@keithdadkins - This should do the trick for using header to aggregate bulk metrics. It'll also allow us to further breakdown these bulk partner requests by the requesting party (ACO, Provider, etc.)", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#discussion_r499929222", "createdAt": "2020-10-05T23:41:39Z", "author": {"login": "jzulim"}, "path": "docs/request-audit-headers.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# BFD Audit Headers\n+\n+This document details the HTTP headers that should be included when calling BFD,\n+  to ensure that proper audit information is available to the BFD team.\n+Future versions of BFD may enforce/require some or all of these headers.\n+\n+These fields allow enginees & operators to read the BFD logs\n+  and see exactly _why_ data was requested.\n+Some of this information is redundant with information already captured elsewhere,\n+  but experience has shown it to be very helpful when investigating issues.\n+\n+## Synchronous Requests\n+\n+For synchronous (i.e. non-bulk) requests, BFD users SHALL include meaningful values for as many as possible of the following HTTP headers.\n+\n+* `BlueButton-OriginalQueryId`: a unique ID (e.g. UUID) generated by the frontend system, per HTTP request to that frontend system.\n+    * This ID SHALL be included in all log events for the frontend system.\n+    * This allows requests to be traced across systems.\n+* `BlueButton-OriginalQueryCounter`: start at `1` and increment for every request to BFD with the same `BlueButton-OriginalQueryId` value.\n+* `BlueButton-OriginalQueryTimestamp`: an ISO-8601 UTC timestamp representing (roughly) when the original request reached the frontend system.\n+* `BlueButton-DeveloperId`: the unique ID in the frontend system for the developer/vendor of the third-party application.\n+* `BlueButton-Developer`: the human-readable name in the frontend system for the developer/vendor of the third-party application.\n+* `BlueButton-ApplicationId`: the unique ID in the frontend system for the application/client that will receieve the data.\n+* `BlueButton-Application`: the human-readable name in the frontend system for the application/client that will receive the data.\n+* `BlueButton-UserId`: the unique ID in the frontend system for the user (e.g. beneficiary) that data is being requested on behalf of.\n+* `BlueButton-User`: the human-readable login ID (e.g. email address) in the frontend system for the user (e.g. beneficiary) that the data is being requested on behalf of.\n+* `BlueButton-BeneficiaryId`: the unique beneificary ID (e.g. `Patient.id`) from BFD for the user the beneficiary whose data is being requested.\n+\n+## Asynchronous Requests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDkyNDk4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#pullrequestreview-502492498", "createdAt": "2020-10-05T23:42:09Z", "commit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzo0MjowOVrOHcxRHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMzo0MjowOVrOHcxRHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyOTM3NA==", "bodyText": "I did not know how this behavior worked, this documentation helped a lot. Thx!", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#discussion_r499929374", "createdAt": "2020-10-05T23:42:09Z", "author": {"login": "jzulim"}, "path": "docs/request-options.md", "diffHunk": "@@ -0,0 +1,28 @@\n+# BFD Request Options\n+\n+This document details the request options that can be used when calling BFD.\n+Future versions of BFD may apply some of these options automatically,\n+  based on other request details (e.g. authentication/authorization).\n+\n+## Optional Data\n+\n+Some data fields are optional; they're only included when the request is configured to do so.\n+\n+* HTTP Header: `IncludeIdentifiers`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNTE0NjAz", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/368#pullrequestreview-502514603", "createdAt": "2020-10-06T00:52:43Z", "commit": {"oid": "52d12e33c29a552f3e74fd4d128e3dbf1ed0f0b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 620, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}