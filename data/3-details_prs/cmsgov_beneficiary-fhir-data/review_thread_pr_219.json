{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MDExNjg3", "number": 219, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODoyMzo0NVrODfpqNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOTozNjozMFrODfrFeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NTE0OTk5OnYy", "diffSide": "RIGHT", "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODoyMzo0NVrOFpeoqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODoyNjoyOFrOFpeuJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAzNzg2Nw==", "bodyText": "It looks like these can be removed, I don't see them being used anywhere.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379037867", "createdAt": "2020-02-13T18:23:45Z", "author": {"login": "whytheplatypus"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -28,36 +28,17 @@\n   private final String resource;\n   private final String searchByDesc;\n   private final String identifier;\n-  private final DateRangeParam lastUpdated;\n-  private final String excludeSamhsa;\n-  private final Set<ClaimType> claimTypes;\n+  private final RequestDetails requestDetails;\n \n   public PageLinkBuilder(\n-      RequestDetails requestDetails,\n-      String resource,\n-      String searchByDesc,\n-      String identifier,\n-      DateRangeParam lastUpdated,\n-      Set<ClaimType> claimTypes,\n-      String excludeSamhsa) {\n+      RequestDetails requestDetails, String resource, String searchByDesc, String identifier) {\n     this.pageSize = parseIntegerParameters(requestDetails, Constants.PARAM_COUNT);\n     this.startIndex = parseIntegerParameters(requestDetails, \"startIndex\");\n     this.serverBase = requestDetails.getServerBaseForRequest();\n     this.resource = resource;\n     this.searchByDesc = searchByDesc;\n     this.identifier = identifier;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a43c15f1a7c8f6d5408ea7fcc21f98beeba640"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAzOTI3MQ==", "bodyText": "Good catch. Will verify and remove them.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379039271", "createdAt": "2020-02-13T18:26:28Z", "author": {"login": "dtisza1"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -28,36 +28,17 @@\n   private final String resource;\n   private final String searchByDesc;\n   private final String identifier;\n-  private final DateRangeParam lastUpdated;\n-  private final String excludeSamhsa;\n-  private final Set<ClaimType> claimTypes;\n+  private final RequestDetails requestDetails;\n \n   public PageLinkBuilder(\n-      RequestDetails requestDetails,\n-      String resource,\n-      String searchByDesc,\n-      String identifier,\n-      DateRangeParam lastUpdated,\n-      Set<ClaimType> claimTypes,\n-      String excludeSamhsa) {\n+      RequestDetails requestDetails, String resource, String searchByDesc, String identifier) {\n     this.pageSize = parseIntegerParameters(requestDetails, Constants.PARAM_COUNT);\n     this.startIndex = parseIntegerParameters(requestDetails, \"startIndex\");\n     this.serverBase = requestDetails.getServerBaseForRequest();\n     this.resource = resource;\n     this.searchByDesc = searchByDesc;\n     this.identifier = identifier;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAzNzg2Nw=="}, "originalCommit": {"oid": "54a43c15f1a7c8f6d5408ea7fcc21f98beeba640"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NTM2MDI2OnYy", "diffSide": "RIGHT", "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToyODo0N1rOFpguTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToyODo0N1rOFpguTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3MjA3OA==", "bodyText": "Small suggestion. You can make this read simpler by removing...\nMap<String, String> param = new HashMap<>(requestDetails...", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379072078", "createdAt": "2020-02-13T19:28:47Z", "author": {"login": "RickHawesUSDS"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -179,41 +155,27 @@ public void addPageLinks(Bundle toBundle, int numTotalResults) {\n    */\n   private String createPageLink(int startIndex) {\n     StringBuilder b = new StringBuilder();\n+\n+    // Setup URL base and resource.\n     b.append(serverBase);\n     b.append(resource);\n-    b.append(Constants.PARAM_COUNT + \"=\" + getPageSize());\n-    b.append(\"&startIndex=\" + startIndex);\n-    b.append(\"&\" + searchByDesc + \"=\" + identifier);\n-\n-    // Add the lastUpdated parameters if present\n-    if (lastUpdated != null) {\n-      DateParam lowerBound = lastUpdated.getLowerBound();\n-      if (lowerBound != null && !lowerBound.isEmpty()) {\n-        b.append(\n-            \"&\"\n-                + Constants.PARAM_LASTUPDATED\n-                + \"=\"\n-                + lowerBound.getPrefix().getValue()\n-                + lowerBound.getValueAsString());\n-      }\n-      DateParam upperBound = lastUpdated.getUpperBound();\n-      if (upperBound != null && !upperBound.isEmpty()) {\n-        b.append(\n-            \"&\"\n-                + Constants.PARAM_LASTUPDATED\n-                + \"=\"\n-                + upperBound.getPrefix().getValue()\n-                + upperBound.getValueAsString());\n-      }\n-    }\n \n-    // Add the \"type\" parameter if present\n-    if (claimTypes != null) {\n-      b.append(\"&type=\" + claimTypes.toString().toLowerCase().replaceAll(\"[\\\\[\\\\] ]\", \"\"));\n-    }\n+    // Get a copy of all request parameters.\n+    Map<String, String[]> params = new HashMap<String, String[]>(requestDetails.getParameters());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb7a7c7357b3f826fec2627e793bc9059b2d73de"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NTM4MzYwOnYy", "diffSide": "RIGHT", "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOTozNjozMFrOFpg9bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNToxMDo0NFrOFp5vFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NTk0OQ==", "bodyText": "Now that we are really improving this method. I'm wondering if we could use UriBuilder instead of StringBuilder here.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379075949", "createdAt": "2020-02-13T19:36:30Z", "author": {"login": "RickHawesUSDS"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -179,41 +155,27 @@ public void addPageLinks(Bundle toBundle, int numTotalResults) {\n    */\n   private String createPageLink(int startIndex) {\n     StringBuilder b = new StringBuilder();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb7a7c7357b3f826fec2627e793bc9059b2d73de"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4NzE2Ng==", "bodyText": "That sounds interesting. Will check that out :-)", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379087166", "createdAt": "2020-02-13T19:58:47Z", "author": {"login": "dtisza1"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -179,41 +155,27 @@ public void addPageLinks(Bundle toBundle, int numTotalResults) {\n    */\n   private String createPageLink(int startIndex) {\n     StringBuilder b = new StringBuilder();\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NTk0OQ=="}, "originalCommit": {"oid": "cb7a7c7357b3f826fec2627e793bc9059b2d73de"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ4MTg3OA==", "bodyText": "@RickHawesUSDS I changed it to use the URIBuilder. This worked out well. I'll update how the links now look in the change details.  TY!", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/219#discussion_r379481878", "createdAt": "2020-02-14T15:10:44Z", "author": {"login": "dtisza1"}, "path": "apps/bfd-server/bfd-server-war/src/main/java/gov/cms/bfd/server/war/stu3/providers/PageLinkBuilder.java", "diffHunk": "@@ -179,41 +155,27 @@ public void addPageLinks(Bundle toBundle, int numTotalResults) {\n    */\n   private String createPageLink(int startIndex) {\n     StringBuilder b = new StringBuilder();\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NTk0OQ=="}, "originalCommit": {"oid": "cb7a7c7357b3f826fec2627e793bc9059b2d73de"}, "originalPosition": 73}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 299, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}