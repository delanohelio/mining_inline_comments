{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNTAxMDg0", "number": 232, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMTo0MVrODjPVZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowNDowOFrODjPYMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Mjc3OTg4OnYy", "diffSide": "RIGHT", "path": "ops/ansible/playbooks-ccs/ansible.cfg", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMTo0MVrOFu8ENg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDo1NTozN1rOFvUt0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MjkzNA==", "bodyText": "Had to do this in order to get the --inventory=foo.ec2.internal play parameter working, as it requires the enabled-by-default-but-disabled-here hosts_list plugin to be enabled.\nAnyone know why this config was locked down to just ini? If there's not a good reason, let's just deleted this line altogether as part of this PR.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384762934", "createdAt": "2020-02-26T21:01:41Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/ansible.cfg", "diffHunk": "@@ -42,4 +42,4 @@ pipelining = True\n #ssh_args = -o ControlMaster=no\n \n [inventory]\n-enable_plugins = ini\n+#enable_plugins = ini", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NjgwMw==", "bodyText": "No idea why it was locked to ini. Agreed we should remove.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r385166803", "createdAt": "2020-02-27T14:55:37Z", "author": {"login": "jzulim"}, "path": "ops/ansible/playbooks-ccs/ansible.cfg", "diffHunk": "@@ -42,4 +42,4 @@ pipelining = True\n #ssh_args = -o ControlMaster=no\n \n [inventory]\n-enable_plugins = ini\n+#enable_plugins = ini", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MjkzNA=="}, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Mjc4MzA5OnYy", "diffSide": "RIGHT", "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMjo1NFrOFu8GVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMjo1NFrOFu8GVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MzQ3Nw==", "bodyText": "Fun fact: pgrep -f 'java.*DataServerLauncherApp' would be a much better filter/search command here, but won't work for reasons that escape me. It looks like maybe pgrep -f won't search the command line past a certain character limit?", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384763477", "createdAt": "2020-02-26T21:02:54Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -5,17 +5,17 @@\n #\n # Usage:\n #\n-#     $ pipenv run ./ansible-playbook-wrapper data_server_collect_flame_graph.yml --extra-vars \"perf_record_seconds=15 find_process_command='pgrep java' jdk_path=/etc/alternatives/java_sdk_1.8.0_openjdk\" --limit bluebutton-healthapt-test-data-server-a-1\n+#     $ pipenv run ./ansible-playbook-wrapper data_server_collect_flame_graph.yml --inventory='somehost.ec2.internal' --extra-vars \"perf_record_seconds=15 find_process_command='pgrep -f bfd-server-launcher.*jetty' java_user='bfd' jdk_path=/etc/alternatives/java_sdk_1.8.0_openjdk\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Mjc4NjA1OnYy", "diffSide": "RIGHT", "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowMzo0N1rOFu8IDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMToyMToyM1rOFu8slQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MzkxOA==", "bodyText": "We should consider updating our default builds to install the JDK like this, rather than the JRE. It's super useful to have a JDK around for all sorts of things.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384763918", "createdAt": "2020-02-26T21:03:47Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -49,6 +48,7 @@\n           - cmake\n           - gcc\n           - gcc-c++\n+          - java-1.8.0-openjdk-devel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3MzI2OQ==", "bodyText": "I'm pretty sure we already do: \n  \n    \n      beneficiary-fhir-data/ops/ansible/roles/bfd-server/tasks/install.yml\n    \n    \n         Line 9\n      in\n      a5e50a5\n    \n    \n    \n    \n\n        \n          \n           - java-1.8.0-openjdk-devel", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384773269", "createdAt": "2020-02-26T21:21:23Z", "author": {"login": "njdister"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -49,6 +48,7 @@\n           - cmake\n           - gcc\n           - gcc-c++\n+          - java-1.8.0-openjdk-devel", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2MzkxOA=="}, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Mjc4NzA1OnYy", "diffSide": "RIGHT", "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowNDowOFrOFu8IxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTowNDowOFrOFu8IxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2NDEwMA==", "bodyText": "Whoops: need to go uncomment this and make sure that things still work.", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/232#discussion_r384764100", "createdAt": "2020-02-26T21:04:08Z", "author": {"login": "karlmdavis"}, "path": "ops/ansible/playbooks-ccs/data_server_collect_flame_graph.yml", "diffHunk": "@@ -92,6 +92,23 @@\n         PERF_RECORD_SECONDS: \"{{ perf_record_seconds }}\"\n       become: true\n \n+      #    - name: Attach Java Symbol Agent to Java Process\n+      #      shell: \"java -cp attach-main.jar:$JAVA_HOME/lib/tools.jar net.virtualvoid.perf.AttachOnce {{ process_pid }}\"\n+      #      args:\n+      #        chdir: \"{{ perf_map_agent_path_remote }}/out\"\n+      #      environment:\n+      #        JAVA_HOME: \"{{ jdk_path }}\"\n+      #      become: true\n+      #      become_user: \"{{ java_user }}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02b8e4a90dc6084416a5927a551b0ed0af4f5e3"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 321, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}