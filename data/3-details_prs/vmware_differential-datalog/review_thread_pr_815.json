{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMDE0MDMy", "number": 815, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDoyNVrOE5x7UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDo0N1rOE5x8Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDIyMjg4OnYy", "diffSide": "RIGHT", "path": "tools/install-flatbuf.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDoyNVrOH0dbWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMDo0MTo1OVrOH0f3xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDEzOA==", "bodyText": "is this a bug?", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524770138", "createdAt": "2020-11-16T23:50:25Z", "author": {"login": "mbudiu-vmw"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip\n+}\n+\n+echo \"Installing Flatbuf\"\n if [ \"x`flatbuffers/flatc --version`\" != \"xflatc version 1.11.0\" ]; then\n-    echo \"Installing Flatbuf\"\n-    retry fetch_flatbuf\n-    cd flatbuffers\n-    cmake -G \"Unix Makefiles\"\n-    make\n-    cd ..\n+    if ( [ \"$(uname)\" = \"Darwin\" ] || [ \"$(uname)\" = \"Linux\" ] ); then\n+        retry fetch_flatbuf_unix\n+        cd flatbuffers\n+        cmake -G \"Unix Makefiles\"\n+        make\n+        cd ..\n+    else\n+        retry fetch_flatbuf_unix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMDE4MQ==", "bodyText": "Just bad naming.", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524810181", "createdAt": "2020-11-17T00:41:59Z", "author": {"login": "ryzhyk"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip\n+}\n+\n+echo \"Installing Flatbuf\"\n if [ \"x`flatbuffers/flatc --version`\" != \"xflatc version 1.11.0\" ]; then\n-    echo \"Installing Flatbuf\"\n-    retry fetch_flatbuf\n-    cd flatbuffers\n-    cmake -G \"Unix Makefiles\"\n-    make\n-    cd ..\n+    if ( [ \"$(uname)\" = \"Darwin\" ] || [ \"$(uname)\" = \"Linux\" ] ); then\n+        retry fetch_flatbuf_unix\n+        cd flatbuffers\n+        cmake -G \"Unix Makefiles\"\n+        make\n+        cd ..\n+    else\n+        retry fetch_flatbuf_unix", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDEzOA=="}, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDIyNTI2OnYy", "diffSide": "RIGHT", "path": "tools/install-flatbuf.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDo0N1rOH0dc7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMDo0MzozN1rOH0f5lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDU0Mw==", "bodyText": "windows comes with curl?", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524770543", "createdAt": "2020-11-16T23:50:47Z", "author": {"login": "mbudiu-vmw"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMDY0Ng==", "bodyText": "Travis runs CI script in an environment that does. This is probably not going to work on all flavors of windows.", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524810646", "createdAt": "2020-11-17T00:43:37Z", "author": {"login": "ryzhyk"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDU0Mw=="}, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4659, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}