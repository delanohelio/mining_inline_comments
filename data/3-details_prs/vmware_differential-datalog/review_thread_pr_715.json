{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MDgyNjk0", "number": 715, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjozOTowMVrOESlTgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0NToxNlrOESlZoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTIxMDI3OnYy", "diffSide": "RIGHT", "path": "doc/language_reference/language_reference.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjozOTowMVrOG32DUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjozOTowMVrOG32DUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxMDQ0OA==", "bodyText": "I think you should allow empty vectors in this grammar.\nThe fact that the implementation may not is a bug.", "url": "https://github.com/vmware/differential-datalog/pull/715#discussion_r461210448", "createdAt": "2020-07-27T22:39:01Z", "author": {"login": "mbudiu-vmw"}, "path": "doc/language_reference/language_reference.md", "diffHunk": "@@ -409,9 +411,11 @@ they produce results of type `string`, e.g.:\n Other terms:\n \n ```EBNF\n+vec_literal  :: \"[\" expr (\",\" expr)* \"]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94b2767a8e5210bdd8938dbd1953ee28f4b78d93"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTIyMTM0OnYy", "diffSide": "RIGHT", "path": "src/Language/DifferentialDatalog/Validate.hs", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0MzoyOVrOG32Jvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0MzoyOVrOG32Jvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxMjA5NQ==", "bodyText": "do you want to delete these?", "url": "https://github.com/vmware/differential-datalog/pull/715#discussion_r461212095", "createdAt": "2020-07-27T22:43:29Z", "author": {"login": "mbudiu-vmw"}, "path": "src/Language/DifferentialDatalog/Validate.hs", "diffHunk": "@@ -583,13 +583,13 @@ exprValidate1 d _ _   (ESlice p _ h l)    =\n     check d (h >= l) p\n           $ \"Upper bound of the slice must be greater than lower bound\"\n exprValidate1 _ _ _   EMatch{}            = return ()\n-exprValidate1 d _ ctx (EVarDecl p v)      = do\n+exprValidate1 d _ ctx (EVarDecl p _)      = do\n     check d (ctxInSetL ctx || ctxInMatchPat ctx) p \"Variable declaration is not allowed in this context\"\n-    checkNoVar p d ctx v\n+    --checkNoVar p d ctx v", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94b2767a8e5210bdd8938dbd1953ee28f4b78d93"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTIyMjc4OnYy", "diffSide": "LEFT", "path": "test/datalog_tests/function.fail.ast.expected", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0NDowOFrOG32KoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0NDowOFrOG32KoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxMjMyMQ==", "bodyText": "should this be at least a warning?", "url": "https://github.com/vmware/differential-datalog/pull/715#discussion_r461212321", "createdAt": "2020-07-27T22:44:08Z", "author": {"login": "mbudiu-vmw"}, "path": "test/datalog_tests/function.fail.ast.expected", "diffHunk": "@@ -18,10 +14,6 @@ expression '(var w: bool)'\n         C0{.x = w: bool} -> w,\n                 ^^^^^^^\n \n-error: ./test/datalog_tests/function.fail.dl:7:5-7:11: Variable v already defined in this scope", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94b2767a8e5210bdd8938dbd1953ee28f4b78d93"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTIyNTkzOnYy", "diffSide": "LEFT", "path": "test/datalog_tests/function.fail.dl", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0NToxNlrOG32Mbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjo0NToxNlrOG32Mbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxMjc4Mw==", "bodyText": "This looks quite ambiguous. It would be nicer if you required a var to always be used when introducing a new var. If you just use an identifier this could be an error.", "url": "https://github.com/vmware/differential-datalog/pull/715#discussion_r461212783", "createdAt": "2020-07-27T22:45:16Z", "author": {"login": "mbudiu-vmw"}, "path": "test/datalog_tests/function.fail.dl", "diffHunk": "@@ -20,21 +20,6 @@ function vars(): () = {\n \n //---\n \n-typedef Alt = C0{x: bit<32>}\n-            | C1{x: bit<32>}\n-\n-// shadow argument name\n-function shadow(v: string): () = {\n-    var a: Alt = C0{1};\n-\n-    var i: bit<32> = match (a) {\n-        C0{.x = v} -> v,\n-        C1{v} -> v", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94b2767a8e5210bdd8938dbd1953ee28f4b78d93"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4805, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}