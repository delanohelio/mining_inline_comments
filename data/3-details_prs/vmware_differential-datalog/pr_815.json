{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMDE0MDMy", "number": 815, "title": "Windows compatibility.", "bodyText": "Windows support with limited amount of testing.\n@Kixiron", "createdAt": "2020-11-16T22:42:08Z", "url": "https://github.com/vmware/differential-datalog/pull/815", "merged": true, "mergeCommit": {"oid": "c6064587321fcda4c6a92ced85d09e750e82001c"}, "closed": true, "closedAt": "2020-11-17T18:57:26Z", "author": {"login": "ryzhyk"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcqakigH2gAyNTIyMDE0MDMyOjkzOTY4YWQ2NDRiYmExMTVmZGM2NjRlMmE2MmIxNTIzNDkwYWFlZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddN343gFqTUzMTkxNDkyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93968ad644bba115fdc664e2a62b1523490aaee3", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/93968ad644bba115fdc664e2a62b1523490aaee3", "committedDate": "2020-11-15T06:32:09Z", "message": "stack.yml: Upgrade to LTS 16.21."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc84748f4bf2bbac471d0c634c5c29bd1875141d", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/cc84748f4bf2bbac471d0c634c5c29bd1875141d", "committedDate": "2020-11-15T06:32:17Z", "message": "Fix warnings by GHC 8.10.2.\n\nI tried the latest nightly GHC, which reports a bunch of new warnings.\nThis commit fixes the warnings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c388bb31c2198fc52c66738122fcc7698957069", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/3c388bb31c2198fc52c66738122fcc7698957069", "committedDate": "2020-11-15T18:21:51Z", "message": "Eliminate the use of MissingH.\n\nThe 'MissingH' package that we relies on for string splitting and\nreplacement depends on 'regex-posix', which does not compile on Windows\n(it can be made to work theoretically, but not worth the effort).  We\nget rid of all uses of 'MissingH' with the help of the 'splitOn'\nfunction from the 'split' package."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "751cd8f7871b414387676b26d2f107bab6be1d0a", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/751cd8f7871b414387676b26d2f107bab6be1d0a", "committedDate": "2020-11-15T19:33:14Z", "message": ".travis.yml: Comment out Python-related commands.\n\nWe are no longer running Souffle tests in Travis.  Comment out\nPython-related stuff to simplify and speedup Travis build."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/fdf4dde6bee0a618a189aadf940d1559bb6b9c25", "committedDate": "2020-11-16T22:36:00Z", "message": "Windows build on Travis; compatibility fixes.\n\nFixup the test framework and the compiler to deal with the stupidity of\nWindows."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTE0OTI4", "url": "https://github.com/vmware/differential-datalog/pull/815#pullrequestreview-531914928", "createdAt": "2020-11-16T23:50:25Z", "commit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDoyNVrOH0dbWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzo1MDo0N1rOH0dc7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDEzOA==", "bodyText": "is this a bug?", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524770138", "createdAt": "2020-11-16T23:50:25Z", "author": {"login": "mbudiu-vmw"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip\n+}\n+\n+echo \"Installing Flatbuf\"\n if [ \"x`flatbuffers/flatc --version`\" != \"xflatc version 1.11.0\" ]; then\n-    echo \"Installing Flatbuf\"\n-    retry fetch_flatbuf\n-    cd flatbuffers\n-    cmake -G \"Unix Makefiles\"\n-    make\n-    cd ..\n+    if ( [ \"$(uname)\" = \"Darwin\" ] || [ \"$(uname)\" = \"Linux\" ] ); then\n+        retry fetch_flatbuf_unix\n+        cd flatbuffers\n+        cmake -G \"Unix Makefiles\"\n+        make\n+        cd ..\n+    else\n+        retry fetch_flatbuf_unix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3MDU0Mw==", "bodyText": "windows comes with curl?", "url": "https://github.com/vmware/differential-datalog/pull/815#discussion_r524770543", "createdAt": "2020-11-16T23:50:47Z", "author": {"login": "mbudiu-vmw"}, "path": "tools/install-flatbuf.sh", "diffHunk": "@@ -7,20 +7,34 @@ retry() {\n   $cmd || (sleep 2 && $cmd) || (sleep 10 && $cmd)\n }\n \n-fetch_flatbuf() {\n+fetch_flatbuf_unix() {\n     rm -rf flatbuffers\n     mkdir flatbuffers\n     curl -L https://github.com/google/flatbuffers/archive/v1.11.0.tar.gz | tar -zx -C flatbuffers --strip-components 1\n }\n \n+fetch_flatbuf_windows() {\n+    curl -L https://github.com/google/flatbuffers/releases/download/v1.11.0/flatc_windows_exe.zip > fb.zip && unzip fb.zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf4dde6bee0a618a189aadf940d1559bb6b9c25"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4438, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}