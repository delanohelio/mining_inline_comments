{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NDE2MTUz", "number": 661, "title": "ovsdb2ddlog: --rw option.", "bodyText": "Resolves #659.\novsdb2ddlog has a --ro option for tables that are partially read-write.\nOVN has a couple of tables that only have one or two writable columns,\nso it'd be nice to just specify those, e.g. with --rw in place of --ro.\nIt leads to easier maintenance as columns are added.\nThis commit introduces --rw option, which is mutually exclusive with\n--ro, i.e., at most one of them can be used for a particular table.\n@blp", "createdAt": "2020-05-08T20:20:26Z", "url": "https://github.com/vmware/differential-datalog/pull/661", "merged": true, "mergeCommit": {"oid": "47c8aa622fabfad28fea1daf483645c4c527468d"}, "closed": true, "closedAt": "2020-05-09T01:48:08Z", "author": {"login": "ryzhyk"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfX9pQgFqTQwODUwNzU3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfYK1AgBqjMzMTgzODk4MjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTA3NTcw", "url": "https://github.com/vmware/differential-datalog/pull/661#pullrequestreview-408507570", "createdAt": "2020-05-08T20:30:46Z", "commit": {"oid": "89457f17ffe7ccc0ed37b24c6f1b5320f1d0398c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDozMDo0NlrOGSyt0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDozMjo0OVrOGSyxGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM1ODQ4MQ==", "bodyText": "Since you went to the trouble of defining a type you could probably have defined one with named fields; this would make it easier to read the code. But this is fine, since it's not used that much.", "url": "https://github.com/vmware/differential-datalog/pull/661#discussion_r422358481", "createdAt": "2020-05-08T20:30:46Z", "author": {"login": "mbudiu-vmw"}, "path": "src/Language/DifferentialDatalog/OVSDB/Compile.hs", "diffHunk": "@@ -85,11 +88,15 @@ data TableKind = TableInput\n                | TableDeltaUpdate\n                deriving(Eq)\n \n+-- | Output relation configuration:\n+-- (name, Left <set_of_readonly_columns> or Right <Set of rw columns>)\n+type OutputRelConfig = (String, Either [String] [String])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89457f17ffe7ccc0ed37b24c6f1b5320f1d0398c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM1OTMyMA==", "bodyText": "this thing about uuid does not seem to be documented.\nAlso, the name of this function has a negation, it would be nicer if it was GetRWCols instead.", "url": "https://github.com/vmware/differential-datalog/pull/661#discussion_r422359320", "createdAt": "2020-05-08T20:32:49Z", "author": {"login": "mbudiu-vmw"}, "path": "src/Language/DifferentialDatalog/OVSDB/Compile.hs", "diffHunk": "@@ -306,10 +316,11 @@ uuidCol = TableColumn { columnPos       = nopos\n                       , columnMutable   = Nothing\n                       }\n \n-tableGetNonROCols :: (?outputs::[(String, [String])]) => Table -> [TableColumn]\n+tableGetNonROCols :: (?outputs::[OutputRelConfig]) => Table -> [TableColumn]\n tableGetNonROCols t =\n     case lookup (name t) ?outputs of\n-         Nothing -> ovscols\n-         Just ro -> filter (\\col -> notElem (name col) ro) ovscols\n+         Nothing         -> ovscols\n+         Just (Left ro)  -> filter (\\col -> notElem (name col) ro) ovscols\n+         Just (Right rw) -> filter (\\col -> elem (name col) rw || (name col == \"_uuid\")) ovscols", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89457f17ffe7ccc0ed37b24c6f1b5320f1d0398c"}, "originalPosition": 140}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28cdc0d01234183d57cb5975eaf343096b71917a", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/28cdc0d01234183d57cb5975eaf343096b71917a", "committedDate": "2020-05-08T20:47:08Z", "message": "ovsdb2ddlog: --rw option.\n\nResolves #659.\n\novsdb2ddlog has a --ro option for tables that are partially read-write.\nOVN has a couple of tables that only have one or two writable columns,\nso it'd be nice to just specify those, e.g. with --rw in place of --ro.\nIt leads to easier maintenance as columns are added.\n\nThis commit introduces --rw option, which is mutually exclusive with\n--ro, i.e., at most one of them can be used for a particular table."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89457f17ffe7ccc0ed37b24c6f1b5320f1d0398c", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/89457f17ffe7ccc0ed37b24c6f1b5320f1d0398c", "committedDate": "2020-05-08T20:16:54Z", "message": "ovsdb2ddlog: --rw option.\n\nResolves #659.\n\novsdb2ddlog has a --ro option for tables that are partially read-write.\nOVN has a couple of tables that only have one or two writable columns,\nso it'd be nice to just specify those, e.g. with --rw in place of --ro.\nIt leads to easier maintenance as columns are added.\n\nThis commit introduces --rw option, which is mutually exclusive with\n--ro, i.e., at most one of them can be used for a particular table."}, "afterCommit": {"oid": "28cdc0d01234183d57cb5975eaf343096b71917a", "author": {"user": {"login": "ryzhyk", "name": "Leonid Ryzhyk"}}, "url": "https://github.com/vmware/differential-datalog/commit/28cdc0d01234183d57cb5975eaf343096b71917a", "committedDate": "2020-05-08T20:47:08Z", "message": "ovsdb2ddlog: --rw option.\n\nResolves #659.\n\novsdb2ddlog has a --ro option for tables that are partially read-write.\nOVN has a couple of tables that only have one or two writable columns,\nso it'd be nice to just specify those, e.g. with --rw in place of --ro.\nIt leads to easier maintenance as columns are added.\n\nThis commit introduces --rw option, which is mutually exclusive with\n--ro, i.e., at most one of them can be used for a particular table."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4527, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}