{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NzI0NTcy", "number": 832, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODozOToyOVrOE-yciw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNzo0NDoyOVrOE_RIEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjczNjc1OnYy", "diffSide": "RIGHT", "path": "Cargo.toml", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODozOToyOVrOH8IgwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQyMDowNTowOFrOH8L2TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA==", "bodyText": "This will conflict with the workspace code you added to Compile.hs earlier.  We actually used to have this section here some time ago, but ended up removing it.  I believe the reason was that cargo complained when adding a dependency on the generated Rust project from external crates, as it does not like seeing workspaces anywhere other than in the main crate.\nAlso, this breaks CI build.", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532816064", "createdAt": "2020-11-30T18:39:29Z", "author": {"login": "ryzhyk"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg0Njk0Ng==", "bodyText": "It shouldn't conflict with the Compile.hs code since generated code should be out-of-tree except in the case of tests, and I may be able to fix those errors by adding exclude = [\"test/*\"] to the root Cargo.toml.\nI personally really want this since it's such a massive QOL improvement (before I had to open rust/template in another dir in order to get things working), and I've even had someone comment to me that they wish this repo had a root file so they could get ide errors", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532846946", "createdAt": "2020-11-30T19:31:38Z", "author": {"login": "Kixiron"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1MTMxNQ==", "bodyText": "Ok, let's work on the workspace thing then, but I think it can be a separate PR.  I like the other things you did here and would like to merge, but I feel like doing workspaces properly may take some more time.", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532851315", "createdAt": "2020-11-30T19:39:06Z", "author": {"login": "ryzhyk"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1MjA4NA==", "bodyText": "It shouldn't conflict with the Compile.hs code since generated code should be out-of-tree except in the case of tests, and I may be able to fix those errors by adding exclude = [\"test/*\"] to the root Cargo.toml.\n\nYes, but the generated code will then contain two workspace sections, won't it?", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532852084", "createdAt": "2020-11-30T19:40:21Z", "author": {"login": "ryzhyk"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1ODA4OQ==", "bodyText": "It won't since this Cargo.toml only affects the source directory of differential-datalog itself, while the generated code (generally elsewhere) has its own, separate workspace", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532858089", "createdAt": "2020-11-30T19:49:01Z", "author": {"login": "Kixiron"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NTQ2OA==", "bodyText": "My bad, I only now realized this is a separate .toml. In that case I have no objections as long as we can fix the CI.", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532865468", "createdAt": "2020-11-30T19:55:50Z", "author": {"login": "ryzhyk"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg3MDczMw==", "bodyText": "You were indeed correct and it was trickier than I anticipated, so I'll do it separately", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r532870733", "createdAt": "2020-11-30T20:05:08Z", "author": {"login": "Kixiron"}, "path": "Cargo.toml", "diffHunk": "@@ -0,0 +1,9 @@\n+[workspace]\n+members = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgxNjA2NA=="}, "originalCommit": {"oid": "82333a540467af296614e63238ea84e6349b044d"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0Nzc2MzM5OnYy", "diffSide": "RIGHT", "path": "rust/template/distributed_datalog/src/lib.rs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNzo0NDoyOVrOH84hzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNzo0NDoyOVrOH84hzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYwMjc2NA==", "bodyText": "Can you please undo this change too?  It upsets older rustc. I have a backwards compatible fix in an upcoming PR.\nOther than this the PR looks great.", "url": "https://github.com/vmware/differential-datalog/pull/832#discussion_r533602764", "createdAt": "2020-12-01T17:44:29Z", "author": {"login": "ryzhyk"}, "path": "rust/template/distributed_datalog/src/lib.rs", "diffHunk": "@@ -5,7 +5,7 @@\n     future_incompatible,\n     illegal_floating_point_literal_pattern,\n     improper_ctypes,\n-    intra_doc_link_resolution_failure,\n+    broken_intra_doc_links,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7afeab4e7369d31432649622d00745ca92ba0b23"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4675, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}