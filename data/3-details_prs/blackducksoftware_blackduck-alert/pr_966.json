{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwOTE4NTk5", "number": 966, "title": "helm alertdb", "bodyText": "Helm Chart support for Alert 6.0.0\nThe alert container connects to the database via environment variables passed into the container.\nThis allows Alert to support an on premise postgres database deployed with Alert or an external Alert database to be deployed.\nI will release a new version of the alertdb container after this PR has been merged.  You will see a 1.0.2-SNAPSHOT for the alertdb container.  I could not get the same container to work in both helm and swarm.  The healthcheck of the postgresql-12-centos7 image would not return properly in docker swarm and the container would never be healthy.\n@mphammer and  @msenmurugan please review the helm charts in this PR.  This chart works for fresh installs and upgrades from 5.3.1.", "createdAt": "2020-04-29T19:51:23Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966", "merged": true, "mergeCommit": {"oid": "f6e2aa33ab8d9f7df0d492126fcd09d2c1dd59fe"}, "closed": true, "closedAt": "2020-04-30T20:23:09Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 44, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcagApfgH2gAyNDEwOTE4NTk5OmNhOTk1NzZhNTdlN2I4Y2M3YjEyMjRhZTkxYzNmZGIxNWQzYzc0NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccy8eOAFqTQwMzg0NjM1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca99576a57e7b8cc7b1224ae91c3fdb15d3c7442", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ca99576a57e7b8cc7b1224ae91c3fdb15d3c7442", "committedDate": "2020-04-23T17:05:47Z", "message": "refactor: Allow a database connection through environment variables."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c75c5b8251d63ea4da2cad93d36ba5baecd4f03", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9c75c5b8251d63ea4da2cad93d36ba5baecd4f03", "committedDate": "2020-04-23T17:09:54Z", "message": "refactor: Remove the environment variable for the database name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1027cb3448219e2a1d39b4c0c79109c1ddf89a63", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1027cb3448219e2a1d39b4c0c79109c1ddf89a63", "committedDate": "2020-04-23T18:43:30Z", "message": "refactor: Create the database on startup of the alert container."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96c3fe87be31d9ac8e59d4ca2e6e02eae1a38287", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/96c3fe87be31d9ac8e59d4ca2e6e02eae1a38287", "committedDate": "2020-04-23T19:02:58Z", "message": "refactor: Only create the database tables if the database has been created in postgres."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdefe953318844248d5e2bc859bd1fc0721024f8", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/cdefe953318844248d5e2bc859bd1fc0721024f8", "committedDate": "2020-04-23T19:36:11Z", "message": "refactor: Clean up the connection function."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "663d17d916cbed842040a8e4762e5accdd212a5f", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/663d17d916cbed842040a8e4762e5accdd212a5f", "committedDate": "2020-04-23T20:11:28Z", "message": "refactor: Fix why the container always exits."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f1f68d29c3e52e538fb45446c44e4f3a9f99f39", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2f1f68d29c3e52e538fb45446c44e4f3a9f99f39", "committedDate": "2020-04-24T10:37:45Z", "message": "build: Update database image version."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6adefd0d72fab7ef8ecdc5aa6def31ee2d0ddc0", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a6adefd0d72fab7ef8ecdc5aa6def31ee2d0ddc0", "committedDate": "2020-04-24T11:27:19Z", "message": "refactor: Use the correct variable for the database name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "792e84c6a13c38dc1564ea38dc93912ab087ab0d", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/792e84c6a13c38dc1564ea38dc93912ab087ab0d", "committedDate": "2020-04-24T13:45:04Z", "message": "refactor: Add files to support external DB deployment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "978d2947fb923ef32c72545f1012147dceed70f8", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/978d2947fb923ef32c72545f1012147dceed70f8", "committedDate": "2020-04-24T14:03:45Z", "message": "refactor: Remove default credentials from image."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "233389c0d6b1de149ca246b4b4f01e32bc718306", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/233389c0d6b1de149ca246b4b4f01e32bc718306", "committedDate": "2020-04-24T17:55:35Z", "message": "refactor: Resolve some issues with environment variables."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a4ece216889032cd7ba9249f691147c7a2196a6", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0a4ece216889032cd7ba9249f691147c7a2196a6", "committedDate": "2020-04-24T17:57:09Z", "message": "Merge remote-tracking branch 'origin/master' into ps_helm_alertdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4022e27d86df5be48fbe2daec084ae836948167", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a4022e27d86df5be48fbe2daec084ae836948167", "committedDate": "2020-04-27T19:52:37Z", "message": "feat: Add the initial chart template for the database."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad15e96323b95deeeaa6774be5f164cc48671547", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ad15e96323b95deeeaa6774be5f164cc48671547", "committedDate": "2020-04-28T14:05:19Z", "message": "refactor: Remove the envFrom causing duplicate keys."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1b62b0554c32b7a5834ce3bbc3ec596686d28a8", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a1b62b0554c32b7a5834ce3bbc3ec596686d28a8", "committedDate": "2020-04-28T14:08:58Z", "message": "refactor: Add additional health check parameters."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40ca68911b0b8d094ea7bb497a81abeafcc0dc61", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/40ca68911b0b8d094ea7bb497a81abeafcc0dc61", "committedDate": "2020-04-28T14:34:10Z", "message": "refactor: Fix spacing on port environment variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b6f656baadbac451fe4afed7e0ab87c2ef169f0", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9b6f656baadbac451fe4afed7e0ab87c2ef169f0", "committedDate": "2020-04-28T14:44:29Z", "message": "refactor: Supply value to alertdb.host since it is required to pass the build."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95b042e3600e3ade7f2ffc1bfd480974c7680bf2", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/95b042e3600e3ade7f2ffc1bfd480974c7680bf2", "committedDate": "2020-04-28T17:16:19Z", "message": "refactor: Fix the indent statements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3168591d0b455505785f2bc3bbd6ecfc63bededd", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/3168591d0b455505785f2bc3bbd6ecfc63bededd", "committedDate": "2020-04-28T19:43:48Z", "message": "feat: Changes to get the alert chart to start correctly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af075a8ec2ccf15b3295a84d7d6b1d1b9fbf5245", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/af075a8ec2ccf15b3295a84d7d6b1d1b9fbf5245", "committedDate": "2020-04-29T18:29:20Z", "message": "refactor: Fix the mount point for the database."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d79086ffa550b2ed4434e2ca1c3e2a7f8174b82", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4d79086ffa550b2ed4434e2ca1c3e2a7f8174b82", "committedDate": "2020-04-29T19:08:20Z", "message": "Merge remote-tracking branch 'origin/master' into ps_helm_alertdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/bb70c0e0b05757f5820424b61bc2133292758fee", "committedDate": "2020-04-29T19:50:20Z", "message": "refactor: Make the last search migration more specific to a single config."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDAzNzUx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403003751", "createdAt": "2020-04-29T20:14:13Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDoxNDoxM1rOGOPRSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDoxOTo1OFrOGOPdoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4MzQzNQ==", "bodyText": "Perhaps a variable to store this value would be better since it's used in multiple locations and needs to be the same.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417583435", "createdAt": "2020-04-29T20:14:13Z", "author": {"login": "bamandel"}, "path": "build.gradle", "diffHunk": "@@ -216,8 +217,8 @@ task runServer(type: com.synopsys.integration.alert.build.RunServerTask, depends\n                                 '--spring.datasource.username=sa',\n                                 '--spring.datasource.password=blackduck',\n                                 '--spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver',\n-                                '--spring.datasource.url=jdbc:tc:postgresql:11.7:///alertdb?TC_INITSCRIPT=file:src/test/resources/testDatabase/init_test_db.sql&TC_TMPFS=/testtmpfs:rw',\n-                                '--spring.datasource.hikari.jdbc-url=jdbc:tc:postgresql:11.7:///alertdb?TC_INITSCRIPT=file:src/test/resources/testDatabase/init_test_db.sql&TC_TMPFS=/testtmpfs:rw',\n+                                '--spring.datasource.url=jdbc:tc:postgresql:12.2:///alertdb?TC_INITSCRIPT=file:src/test/resources/testDatabase/init_test_db.sql&TC_TMPFS=/testtmpfs:rw',\n+                                '--spring.datasource.hikari.jdbc-url=jdbc:tc:postgresql:12.2:///alertdb?TC_INITSCRIPT=file:src/test/resources/testDatabase/init_test_db.sql&TC_TMPFS=/testtmpfs:rw',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NjM5OA==", "bodyText": "A brief comment about why this is relevant would help me here personally.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417586398", "createdAt": "2020-04-29T20:19:39Z", "author": {"login": "bamandel"}, "path": "docker-entrypoint.sh", "diffHunk": "@@ -329,12 +332,47 @@ liquibaseChangelockReset() {\n   echo \"End releasing liquibase changeloglock.\"\n }\n \n+validatePostgresConnection() {\n+  # https://stackoverflow.com/a/58784528/6921621", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NjU5Mg==", "bodyText": "Same as above since it's the same link", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417586592", "createdAt": "2020-04-29T20:19:58Z", "author": {"login": "bamandel"}, "path": "docker-entrypoint.sh", "diffHunk": "@@ -329,12 +332,47 @@ liquibaseChangelockReset() {\n   echo \"End releasing liquibase changeloglock.\"\n }\n \n+validatePostgresConnection() {\n+  # https://stackoverflow.com/a/58784528/6921621\n+    echo \"Checking for postgres connectivity: \"\n+    if psql \"${alertDatabaseConfig}\" -c '\\l';\n+    then\n+      echo \"Alert postgres database connection valid.\"\n+    else\n+      echo \"Alert postgres connection cannot be made.\"\n+      sleep 10\n+      exit 1\n+    fi\n+}\n+\n+createPostgresDatabase() {\n+  # https://stackoverflow.com/a/58784528/6921621", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDI0NTQz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403024543", "createdAt": "2020-04-29T20:44:42Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk0NDU3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403194457", "createdAt": "2020-04-30T04:37:06Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDozNzowNlrOGOZWCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDozNzowNlrOGOZWCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc0ODQ4OA==", "bodyText": "Instead of alertdb, can we have it as postgres?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417748488", "createdAt": "2020-04-30T04:37:06Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/values.yaml", "diffHunk": "@@ -41,6 +41,29 @@ cfssl:\n   securityContext: {}\n   podSecurityContext: {}\n \n+# alertdb - configurations for the alertdb Pod\n+alertdb:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk1NjE0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403195614", "createdAt": "2020-04-30T04:41:37Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0MTozN1rOGOZaIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0MTozN1rOGOZaIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc0OTUzNw==", "bodyText": "To all the names, can you please remove -alert? This is because already in synopsysctl we are taking care of adding -alert to the release name.\nAnd also the customer who uses Black Duck along with Alert, then need to mandatory add -alert to the release name in order to work. This is because you can't have 2 releases having same names for different apps in the same namespace.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417749537", "createdAt": "2020-04-30T04:41:37Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alertdb.yaml", "diffHunk": "@@ -0,0 +1,178 @@\n+{{- if not .Values.alertdb.isExternal }}\n+apiVersion: v1\n+kind: Service\n+metadata:\n+  labels:\n+    app: alert\n+    component: alertdb\n+  name: {{ .Release.Name }}-alert-postgres", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk1Nzcw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403195770", "createdAt": "2020-04-30T04:42:19Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0MjoyMFrOGOZa1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0MjoyMFrOGOZa1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc0OTcxNw==", "bodyText": "To all the labels, can you please add name to the label?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417749717", "createdAt": "2020-04-30T04:42:20Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alertdb.yaml", "diffHunk": "@@ -0,0 +1,178 @@\n+{{- if not .Values.alertdb.isExternal }}\n+apiVersion: v1\n+kind: Service\n+metadata:\n+  labels:\n+    app: alert", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk2NTg2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403196586", "createdAt": "2020-04-30T04:45:20Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0NToyMFrOGOZdvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0NToyMFrOGOZdvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc1MDQ2MQ==", "bodyText": "can you please change the -D to point to /var/lib/postgresql/data", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417750461", "createdAt": "2020-04-30T04:45:20Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alertdb.yaml", "diffHunk": "@@ -0,0 +1,178 @@\n+{{- if not .Values.alertdb.isExternal }}\n+apiVersion: v1\n+kind: Service\n+metadata:\n+  labels:\n+    app: alert\n+    component: alertdb\n+  name: {{ .Release.Name }}-alert-postgres\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  ports:\n+    - name: port-5432\n+      port: {{ .Values.alertdb.port }}\n+      protocol: TCP\n+      targetPort: {{ .Values.alertdb.port }}\n+  selector:\n+    app: alert\n+    component: alertdb\n+  type: ClusterIP\n+{{- if and .Values.enablePersistentStorage (not .Values.alertdb.persistentVolumeClaimName) }}\n+---\n+apiVersion: v1\n+kind: PersistentVolumeClaim\n+metadata:\n+  labels:\n+    app: alert\n+    component: alertdb\n+    name: {{ .Release.Name }}\n+  name: {{ .Release.Name }}-alert-postgres\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  {{- if .Values.alertdb.storageClass }}\n+  storageClassName: {{ .Values.alertdb.storageClass }}\n+  {{- else if .Values.storageClass }}\n+  storageClassName: {{ .Values.storageClass }}\n+  {{- end}}\n+  {{ if .Values.alert.volumeName -}}\n+  volumeName: {{ .Values.alertdb.volumeName }}\n+  {{ end -}}\n+  accessModes:\n+    - ReadWriteOnce\n+  resources:\n+    requests:\n+      storage: {{ .Values.alertdb.claimSize }}\n+{{- end }}\n+---\n+\n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  labels:\n+    app: alert\n+    component: alertdb\n+  name: {{ .Release.Name }}-alert-postgres\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  {{- if eq .Values.status \"Running\" }}\n+  replicas: 1\n+  {{- else }}\n+  replicas: 0\n+  {{- end }}\n+  selector:\n+    matchLabels:\n+      app: alert\n+      component: alertdb\n+  strategy:\n+    type: Recreate\n+  template:\n+    metadata:\n+      labels:\n+        app: alert\n+        component: alertdb\n+      annotations:\n+        checksum/alertdb-config: {{ include (print $.Template.BasePath \"/alertdb-config.yaml\") . | sha256sum }}\n+      name: {{ .Release.Name }}-alert-postgres\n+    spec:\n+      containers:\n+      - env:\n+        - name: POSTGRESQL_MAX_CONNECTIONS\n+          value: \"300\"\n+        - name: POSTGRESQL_SHARED_BUFFERS\n+          value: 1024MB\n+        - name: POSTGRESQL_USER\n+          valueFrom:\n+            configMapKeyRef:\n+              key: ALERT_DB_USERNAME\n+              name: {{ .Release.Name }}-alert-db-config\n+        - name: POSTGRESQL_DATABASE\n+          valueFrom:\n+            configMapKeyRef:\n+              key: ALERT_DB_NAME\n+              name: {{ .Release.Name }}-alert-db-config\n+        - name: ALERT_DB_HOST\n+          valueFrom:\n+            configMapKeyRef:\n+              key: ALERT_DB_HOST\n+              name: {{ .Release.Name }}-alert-db-config\n+        - name: ALERT_DB_PORT\n+          valueFrom:\n+            configMapKeyRef:\n+              key: ALERT_DB_PORT\n+              name: {{ .Release.Name }}-alert-db-config\n+        - name: POSTGRESQL_PASSWORD\n+          valueFrom:\n+            secretKeyRef:\n+              key: ALERT_POSTGRES_USER_PASSWORD_FILE\n+              name: {{ .Release.Name }}-alert-db-creds\n+        {{- if .Values.alertdb.registry }}\n+        image: {{ .Values.alertdb.registry }}/postgresql-12-centos7:1\n+        {{- else }}\n+        image: {{ .Values.registry }}/postgresql-12-centos7:1\n+        {{- end}}\n+        imagePullPolicy: IfNotPresent\n+        lifecycle:\n+          preStop:\n+            exec:\n+              command:\n+                - sh\n+                - -c\n+                - LD_LIBRARY_PATH=/opt/rh/rh-postgresql12/root/usr/lib64 /opt/rh/rh-postgresql12/root/usr/bin/pg_ctl -D /var/lib/pgsql/data/userdata -l logfile stop", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 120}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk2OTU0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403196954", "createdAt": "2020-04-30T04:46:51Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0Njo1MVrOGOZfRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0Njo1MVrOGOZfRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc1MDg1Mw==", "bodyText": "pls change it to persistentVolumeClaimName: . Remove {}.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417750853", "createdAt": "2020-04-30T04:46:51Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/values.yaml", "diffHunk": "@@ -41,6 +41,29 @@ cfssl:\n   securityContext: {}\n   podSecurityContext: {}\n \n+# alertdb - configurations for the alertdb Pod\n+alertdb:\n+  registry: \"docker.io/centos\" # override the docker registry at container level\n+  isExternal: true # false for running Postgres as a container and true for using External Postgres database\n+  host: \"localhost\" # required only for external postgres, for postgres as a container, it will point to <name>-alert-postgres\n+  port: 5432\n+  # NOTE: do not change usernames when using postgres as a container; only configure if using external database\n+  userUserName: sa\n+  userPassword: blackduck\n+  databaseName: alertdb\n+  # pvc related parameters for postgres container\n+  persistentVolumeClaimName: {} # set if you want to create your own PVC (used for migration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTk3NTcz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403197573", "createdAt": "2020-04-30T04:49:13Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0OToxM1rOGOZhcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNDo0OToxM1rOGOZhcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc1MTQwOQ==", "bodyText": "you won't be having 2 users in an app? one is an admin who can have access at DDL level and another user is having DML level access. The code need to use the DML level access. This is to avoid any SQL injection and also the permissions restricting to the user.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417751409", "createdAt": "2020-04-30T04:49:13Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/values.yaml", "diffHunk": "@@ -41,6 +41,29 @@ cfssl:\n   securityContext: {}\n   podSecurityContext: {}\n \n+# alertdb - configurations for the alertdb Pod\n+alertdb:\n+  registry: \"docker.io/centos\" # override the docker registry at container level\n+  isExternal: true # false for running Postgres as a container and true for using External Postgres database\n+  host: \"localhost\" # required only for external postgres, for postgres as a container, it will point to <name>-alert-postgres\n+  port: 5432\n+  # NOTE: do not change usernames when using postgres as a container; only configure if using external database\n+  userUserName: sa", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNDc1NjY3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403475667", "createdAt": "2020-04-30T12:35:14Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMjozNToxNFrOGOnOkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMjozNToxNFrOGOnOkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzk3NTk1Mg==", "bodyText": "We can call this variable blackDuckProviderKey to make it more clear in the initialize() method that this is the only expected config in an upgrade.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417975952", "createdAt": "2020-04-30T12:35:14Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/workflow/startup/component/LastSearchDataMigration.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.workflow.startup.component;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.core.annotation.Order;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.ProviderTaskPropertiesAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.util.FilePersistenceUtil;\n+import com.synopsys.integration.alert.provider.blackduck.BlackDuckProviderKey;\n+import com.synopsys.integration.alert.provider.blackduck.tasks.BlackDuckAccumulator;\n+\n+@Component\n+@Order(55)\n+public class LastSearchDataMigration extends StartupComponent {\n+    private static final Logger logger = LoggerFactory.getLogger(LastSearchDataMigration.class);\n+    private static final String LAST_SEARCH_FILE = \"blackduck-accumulator-task-last-search.txt\";\n+\n+    // Because pg_stat_file requires admin privileges to run, we have to migrate the last search file data in code.\n+    // We don't have admin privileges to postgres when alert starts.\n+\n+    private BlackDuckProviderKey providerKey;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNDc2MjUy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403476252", "createdAt": "2020-04-30T12:36:04Z", "commit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMjozNjowNVrOGOnQWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMjozNjowNVrOGOnQWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzk3NjQwOQ==", "bodyText": "Let's also deprecate this class for removal in 8.0.0.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r417976409", "createdAt": "2020-04-30T12:36:05Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/workflow/startup/component/LastSearchDataMigration.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.workflow.startup.component;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.core.annotation.Order;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.ProviderTaskPropertiesAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.util.FilePersistenceUtil;\n+import com.synopsys.integration.alert.provider.blackduck.BlackDuckProviderKey;\n+import com.synopsys.integration.alert.provider.blackduck.tasks.BlackDuckAccumulator;\n+\n+@Component\n+@Order(55)\n+public class LastSearchDataMigration extends StartupComponent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb70c0e0b05757f5820424b61bc2133292758fee"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f42aa0d4c1482066cd21999353c990e6ea5025d6", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f42aa0d4c1482066cd21999353c990e6ea5025d6", "committedDate": "2020-04-30T13:53:03Z", "message": "refactor: Implement PR feedback."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f2862d4eb8db316fc1f6af039870cb340092aca", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7f2862d4eb8db316fc1f6af039870cb340092aca", "committedDate": "2020-04-30T13:59:16Z", "message": "refactor: Rename alertdb charts to postgres."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNTUxMzEw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403551310", "createdAt": "2020-04-30T14:03:01Z", "commit": {"oid": "7f2862d4eb8db316fc1f6af039870cb340092aca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowMzowMVrOGOqyEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowMzowMVrOGOqyEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODAzNDE5NQ==", "bodyText": "Can you pls add a checksum for Alert DB creds secrets?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r418034195", "createdAt": "2020-04-30T14:03:01Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alert.yaml", "diffHunk": "@@ -32,94 +32,101 @@ spec:\n       name: {{ .Release.Name }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2862d4eb8db316fc1f6af039870cb340092aca"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNTU1Njgy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403555682", "createdAt": "2020-04-30T14:07:37Z", "commit": {"oid": "7f2862d4eb8db316fc1f6af039870cb340092aca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowNzozN1rOGOq-8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowNzozN1rOGOq-8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODAzNzQ4OA==", "bodyText": "Whether it needs to be empty?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r418037488", "createdAt": "2020-04-30T14:07:37Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/values.yaml", "diffHunk": "@@ -41,6 +41,29 @@ cfssl:\n   securityContext: {}\n   podSecurityContext: {}\n \n+# postgres - configurations for the postgres Pod\n+postgres:\n+  registry: \"docker.io/centos\" # override the docker registry at container level\n+  isExternal: true # false for running Postgres as a container and true for using External Postgres database\n+  host: \"localhost\" # required only for external postgres, for postgres as a container, it will point to <name>-postgres", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2862d4eb8db316fc1f6af039870cb340092aca"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fba83d0226f2a48da88a28995f9c498e129fd95", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2fba83d0226f2a48da88a28995f9c498e129fd95", "committedDate": "2020-04-30T14:32:02Z", "message": "refactor: Fix the indentation in the files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "caf4b24b1c428806ed3bd7dc1146b9544b84dd98", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/caf4b24b1c428806ed3bd7dc1146b9544b84dd98", "committedDate": "2020-04-30T14:41:41Z", "message": "refactor: Add the checksum for the database configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20df917ea7d06e45edfba37b71580027b3a81a12", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/20df917ea7d06e45edfba37b71580027b3a81a12", "committedDate": "2020-04-30T15:04:05Z", "message": "refactor: Fix remaining indentation issues."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNjI2MDY3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403626067", "createdAt": "2020-04-30T15:21:29Z", "commit": {"oid": "20df917ea7d06e45edfba37b71580027b3a81a12"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNToyMToyOVrOGOuRkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNToyMToyOVrOGOuRkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA5MTQxMQ==", "bodyText": "Is there a missing value here for the postgresql initialization script?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#discussion_r418091411", "createdAt": "2020-04-30T15:21:29Z", "author": {"login": "mphammer"}, "path": "deployment/helm/synopsys-alert/values.yaml", "diffHunk": "@@ -41,6 +41,29 @@ cfssl:\n   securityContext: {}\n   podSecurityContext: {}\n \n+# postgres - configurations for the postgres Pod\n+postgres:\n+  registry: \"docker.io/centos\" # override the docker registry at container level\n+  isExternal: true # false for running Postgres as a container and true for using External Postgres database\n+  host: \"localhost\" # required only for external postgres, for postgres as a container, it will point to <name>-postgres\n+  port: 5432\n+  # NOTE: do not change usernames when using postgres as a container; only configure if using external database\n+  userUserName: sa\n+  userPassword: blackduck\n+  databaseName: alertdb\n+  # pvc related parameters for postgres container\n+  persistentVolumeClaimName: \"\" # set if you want to create your own PVC (used for migration)\n+  claimSize: \"5Gi\" # PVC claim size\n+  storageClass: \"\" # PVC storage class name\n+  volumeName: \"\" # existing persistent volume name backing the PVC\n+  # path to postgresql initialization script", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20df917ea7d06e45edfba37b71580027b3a81a12"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30756f6c679c86c733e9316c9f33c435eda4beeb", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/30756f6c679c86c733e9316c9f33c435eda4beeb", "committedDate": "2020-04-30T16:17:14Z", "message": "refactor: Set postgres.host parameter to empty string."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65c43b50c4072652ae269cf254223817f756db1b", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/65c43b50c4072652ae269cf254223817f756db1b", "committedDate": "2020-04-30T16:34:22Z", "message": "refactor: Update defaults in values file and require host if external"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODQwMzYy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403840362", "createdAt": "2020-04-30T20:07:48Z", "commit": {"oid": "65c43b50c4072652ae269cf254223817f756db1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODQ2MzU4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/966#pullrequestreview-403846358", "createdAt": "2020-04-30T20:17:16Z", "commit": {"oid": "65c43b50c4072652ae269cf254223817f756db1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2708, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}