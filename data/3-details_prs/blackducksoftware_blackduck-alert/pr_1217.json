{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNTk0NDI0", "number": 1217, "title": "Update headers to use Headers object", "bodyText": "", "createdAt": "2020-10-12T13:54:26Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217", "merged": true, "mergeCommit": {"oid": "b36bec016d2229c7f6f160e06d300fed06a2965d"}, "closed": true, "closedAt": "2020-10-12T20:18:21Z", "author": {"login": "ChomickiM"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR0JHVAH2gAyNTAxNTk0NDI0OmMxMTI4ZTIzNDEwZWU5NWE2ODY5ODgyY2RjY2Q0ZThiYWUwZWNlZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdR5cHngFqTUwNjg3NDUyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c1128e23410ee95a6869882cdccd4e8bae0ecef4", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c1128e23410ee95a6869882cdccd4e8bae0ecef4", "committedDate": "2020-10-12T13:38:58Z", "message": "refactor: Updating fetches to use a Headers object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a7ff57093ea5a43bf88ef64be2ec211ddf98010e", "committedDate": "2020-10-12T13:39:22Z", "message": "Merge branch 'master' into mc_accept_headers_object"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjQ3OTg5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506647989", "createdAt": "2020-10-12T14:02:33Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjUzMTEw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506653110", "createdAt": "2020-10-12T14:08:35Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDowODozNVrOHgAT8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDowODozNVrOHgAT8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMyMTU4Ng==", "bodyText": "Since headers is now an object, let's add functions to the object that does this for us. Such as\n\nheaders.addXCrsfToken(csrfToken)", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#discussion_r503321586", "createdAt": "2020-10-12T14:08:35Z", "author": {"login": "bamandel"}, "path": "web/src/main/js/store/actions/audit.js", "diffHunk": "@@ -87,11 +87,11 @@ export function getAuditData(pageNumber, pageSize, searchTerm, sortField, sortOr\n         const errorHandlers = [];\n         errorHandlers.push(HTTPErrorUtils.createUnauthorizedHandler(unauthorized));\n         errorHandlers.push(HTTPErrorUtils.createForbiddenHandler(() => auditDataFetchError(HTTPErrorUtils.MESSAGES.FORBIDDEN_READ)));\n+        const headers = new Headers();\n+        headers.append('X-CSRF-TOKEN', csrfToken);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjUzODMy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506653832", "createdAt": "2020-10-12T14:09:25Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjYxNjA0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506661604", "createdAt": "2020-10-12T14:18:40Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoxODo0MFrOHgAstg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoxODo0MFrOHgAstg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMyNzkyNg==", "bodyText": "We should add functions for each of these 3 headers as they are the most commonly used.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#discussion_r503327926", "createdAt": "2020-10-12T14:18:40Z", "author": {"login": "bamandel"}, "path": "web/src/main/js/util/RequestUtilities.js", "diffHunk": "@@ -1,47 +1,47 @@\n export function createReadRequest(url, csrfToken) {\n+    const headers = new Headers();\n+    headers.append('Accept', 'application/json');\n+    headers.append('X-CSRF-TOKEN', csrfToken);\n     return fetch(url, {\n         credentials: 'same-origin',\n         method: 'GET',\n-        headers: {\n-            accept: 'application/json',\n-            'X-CSRF-TOKEN': csrfToken\n-        }\n+        headers\n     });\n }\n \n export function createUpdateRequest(url, csrfToken, body) {\n+    const headers = new Headers();\n+    headers.append('Accept', 'application/json');\n+    headers.append('Content-Type', 'application/json');\n+    headers.append('X-CSRF-TOKEN', csrfToken);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjYyNzAz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506662703", "createdAt": "2020-10-12T14:20:01Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoyMDowMlrOHgAwMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDoyMDowMlrOHgAwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMyODgxNw==", "bodyText": "You could also create constant header objects in the header class that will return this grouping of headers so you don't have to repeat it every time.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#discussion_r503328817", "createdAt": "2020-10-12T14:20:02Z", "author": {"login": "bamandel"}, "path": "web/src/main/js/util/configurationRequestBuilder.js", "diffHunk": "@@ -37,52 +37,52 @@ export function createReadRequest(apiUrl, csrfToken, configurationId = null) {\n     if (configurationId) {\n         url = url.concat(`/${configurationId}`);\n     }\n+    const headers = new Headers();\n+    headers.append('X-CSRF-TOKEN', csrfToken);\n     return fetch(url, {\n         credentials: 'same-origin',\n-        headers: {\n-            'X-CSRF-TOKEN': csrfToken\n-        }\n+        headers\n     });\n }\n \n export function createNewConfigurationRequest(apiUrl, csrfToken, fieldModel) {\n+    const headers = new Headers();\n+    headers.append('Accept', 'application/json');\n+    headers.append('Content-Type', 'application/json');\n+    headers.append('X-CSRF-TOKEN', csrfToken);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjYzNjQ2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506663646", "createdAt": "2020-10-12T14:21:06Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2ODE5MTIy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506819122", "createdAt": "2020-10-12T18:03:04Z", "commit": {"oid": "a7ff57093ea5a43bf88ef64be2ec211ddf98010e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2c118d34a9dd667108bfaac061b4fcbc7fd02ab", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f2c118d34a9dd667108bfaac061b4fcbc7fd02ab", "committedDate": "2020-10-12T19:30:01Z", "message": "refactor: Update headers to use HeaderUtilities wrapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e997468b24025e5dda9bfba176b814718189567", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8e997468b24025e5dda9bfba176b814718189567", "committedDate": "2020-10-12T19:42:54Z", "message": "refactor: Adding descriptive method name to addApplicationJsonContentType and fixing missing csrf tokens"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2ODc0NTIy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1217#pullrequestreview-506874522", "createdAt": "2020-10-12T19:49:15Z", "commit": {"oid": "8e997468b24025e5dda9bfba176b814718189567"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2998, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}