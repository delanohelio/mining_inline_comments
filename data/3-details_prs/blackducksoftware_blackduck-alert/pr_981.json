{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NjMzNzIw", "number": 981, "title": "Fix Time Columns", "bodyText": "The bulk of this change is just type migration from java.util.Date to java.time.OffsetDateTime", "createdAt": "2020-05-18T17:15:59Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981", "merged": true, "mergeCommit": {"oid": "fccd0db84f89fd4fedb40c551c6d621d6e9a8b6e"}, "closed": true, "closedAt": "2020-05-19T16:46:15Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchTT8nAH2gAyNDE5NjMzNzIwOmRmMWQyNmRjOTUzZTdlYzZkNDcwM2MzNmI2MTBiNjU0OTdiZTNmZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci1yPSgH2gAyNDE5NjMzNzIwOjIwYmJhYmMzZWIxOWE2YTcxOWM2OWY2YTI3YmE2MWZmODg4ODYwMzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df1d26dc953e7ec6d4703c36b610b65497be3ff1", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/df1d26dc953e7ec6d4703c36b610b65497be3ff1", "committedDate": "2020-05-14T20:15:34Z", "message": "Use OffsetDateTime rather than Date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6606a5a90127a4dc99909f0e5f23e6d1f2328bc6", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/6606a5a90127a4dc99909f0e5f23e6d1f2328bc6", "committedDate": "2020-05-15T14:35:20Z", "message": "Resolve date issues discovered in testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc010fca7bd6c5d478c81426520963e959dedcf0", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/cc010fca7bd6c5d478c81426520963e959dedcf0", "committedDate": "2020-05-15T15:12:53Z", "message": "Fix mock entity date-time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0381525834d38ea33248ee7354c47fce01036b0c", "committedDate": "2020-05-15T17:07:58Z", "message": "Fix remaining date-time tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk1NjQy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413795642", "createdAt": "2020-05-18T17:24:54Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNDo1NFrOGXAxqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNDo1NFrOGXAxqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4MzE0Nw==", "bodyText": "Shouldn't this be\n return OffsetDateTime.now(ZoneOffset.UTC);", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426783147", "createdAt": "2020-05-18T17:24:54Z", "author": {"login": "jamesrichard91"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/util/DateUtils.java", "diffHunk": "@@ -24,38 +24,46 @@\n \n import java.text.ParseException;\n import java.text.SimpleDateFormat;\n+import java.time.OffsetDateTime;\n import java.time.ZoneOffset;\n-import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.time.format.DateTimeParseException;\n import java.util.Date;\n-import java.util.TimeZone;\n \n public final class DateUtils {\n     public static final String DOCKER_DATE_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'\";\n     public static final String AUDIT_DATE_FORMAT = \"yyyy-MM-dd HH:mm:ss.SSS\";\n     public static final String UTC_DATE_FORMAT_TO_MINUTE = \"yyyy-MM-dd HH:mm '(UTC)'\";\n \n-    public static Date createCurrentDateTimestamp() {\n-        final ZonedDateTime zonedDateTime = ZonedDateTime.now().withZoneSameInstant(ZoneOffset.UTC);\n-        return Date.from(zonedDateTime.toInstant());\n+    public static OffsetDateTime createCurrentDateTimestamp() {\n+        return OffsetDateTime.now();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk2MDA1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413796005", "createdAt": "2020-05-18T17:25:27Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNToyN1rOGXAy-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNToyN1rOGXAy-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4MzQ4Mw==", "bodyText": "Shouldn't this still call createCurrentDateTimestamp?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426783483", "createdAt": "2020-05-18T17:25:27Z", "author": {"login": "jamesrichard91"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/util/DateUtils.java", "diffHunk": "@@ -24,38 +24,46 @@\n \n import java.text.ParseException;\n import java.text.SimpleDateFormat;\n+import java.time.OffsetDateTime;\n import java.time.ZoneOffset;\n-import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.time.format.DateTimeParseException;\n import java.util.Date;\n-import java.util.TimeZone;\n \n public final class DateUtils {\n     public static final String DOCKER_DATE_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'\";\n     public static final String AUDIT_DATE_FORMAT = \"yyyy-MM-dd HH:mm:ss.SSS\";\n     public static final String UTC_DATE_FORMAT_TO_MINUTE = \"yyyy-MM-dd HH:mm '(UTC)'\";\n \n-    public static Date createCurrentDateTimestamp() {\n-        final ZonedDateTime zonedDateTime = ZonedDateTime.now().withZoneSameInstant(ZoneOffset.UTC);\n-        return Date.from(zonedDateTime.toInstant());\n+    public static OffsetDateTime createCurrentDateTimestamp() {\n+        return OffsetDateTime.now();\n     }\n \n     public static String createCurrentDateString(String format) {\n-        Date currentDate = createCurrentDateTimestamp();\n+        OffsetDateTime currentDate = OffsetDateTime.now();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk2NjI5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413796629", "createdAt": "2020-05-18T17:26:22Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNjoyMlrOGXA07A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNjoyMlrOGXA07A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4Mzk4MA==", "bodyText": "Are we sure this is alright without setting the timezone?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426783980", "createdAt": "2020-05-18T17:26:22Z", "author": {"login": "jamesrichard91"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/util/DateUtils.java", "diffHunk": "@@ -24,38 +24,46 @@\n \n import java.text.ParseException;\n import java.text.SimpleDateFormat;\n+import java.time.OffsetDateTime;\n import java.time.ZoneOffset;\n-import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.time.format.DateTimeParseException;\n import java.util.Date;\n-import java.util.TimeZone;\n \n public final class DateUtils {\n     public static final String DOCKER_DATE_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'\";\n     public static final String AUDIT_DATE_FORMAT = \"yyyy-MM-dd HH:mm:ss.SSS\";\n     public static final String UTC_DATE_FORMAT_TO_MINUTE = \"yyyy-MM-dd HH:mm '(UTC)'\";\n \n-    public static Date createCurrentDateTimestamp() {\n-        final ZonedDateTime zonedDateTime = ZonedDateTime.now().withZoneSameInstant(ZoneOffset.UTC);\n-        return Date.from(zonedDateTime.toInstant());\n+    public static OffsetDateTime createCurrentDateTimestamp() {\n+        return OffsetDateTime.now();\n     }\n \n     public static String createCurrentDateString(String format) {\n-        Date currentDate = createCurrentDateTimestamp();\n+        OffsetDateTime currentDate = OffsetDateTime.now();\n         return formatDate(currentDate, format);\n     }\n \n-    public static String formatDate(Date date, String format) {\n-        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format);\n-        simpleDateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n-        return simpleDateFormat.format(date);\n+    public static String formatDate(OffsetDateTime date, String format) {\n+        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(format);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk3NjAx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413797601", "createdAt": "2020-05-18T17:27:47Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNzo0N1rOGXA3-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyNzo0N1rOGXA3-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NDc2MA==", "bodyText": "I think we should be using DateUtils.createCurrentDateTimestamp() across Alert when we are getting the current time.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426784760", "createdAt": "2020-05-18T17:27:47Z", "author": {"login": "jamesrichard91"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultAuditUtility.java", "diffHunk": "@@ -134,7 +134,7 @@ public DefaultAuditUtility(AuditEntryRepository auditEntryRepository, AuditNotif\n                                                   .concat(componentNotificationIds.stream(), topLevelActionNotificationIds.stream())\n                                                   .collect(Collectors.toSet());\n         for (Long notificationId : allMessageNotificationIds) {\n-            AuditEntryEntity auditEntryEntity = new AuditEntryEntity(jobId, new Date(System.currentTimeMillis()), null, null, null, null);\n+            AuditEntryEntity auditEntryEntity = new AuditEntryEntity(jobId, OffsetDateTime.now(), null, null, null, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk4MDA1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413798005", "createdAt": "2020-05-18T17:28:19Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyODoxOVrOGXA5LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyODoxOVrOGXA5LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTA2OQ==", "bodyText": "I think we should be using DateUtils.createCurrentDateTimestamp()", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426785069", "createdAt": "2020-05-18T17:28:19Z", "author": {"login": "jamesrichard91"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultAuditUtility.java", "diffHunk": "@@ -166,7 +166,7 @@ public void setAuditEntrySuccess(Collection<Long> auditEntryIds) {\n                 auditEntryEntity.setStatus(AuditEntryStatus.SUCCESS.toString());\n                 auditEntryEntity.setErrorMessage(null);\n                 auditEntryEntity.setErrorStackTrace(null);\n-                auditEntryEntity.setTimeLastSent(new Date(System.currentTimeMillis()));\n+                auditEntryEntity.setTimeLastSent(OffsetDateTime.now());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk4MDg0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413798084", "createdAt": "2020-05-18T17:28:24Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyODoyNFrOGXA5Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyODoyNFrOGXA5Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTEyMw==", "bodyText": "I think we should be using DateUtils.createCurrentDateTimestamp()", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426785123", "createdAt": "2020-05-18T17:28:24Z", "author": {"login": "jamesrichard91"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultAuditUtility.java", "diffHunk": "@@ -197,7 +197,7 @@ public void setAuditEntryFailure(Collection<Long> auditEntryIds, String errorMes\n                     }\n                 }\n                 auditEntryEntity.setErrorStackTrace(exceptionStackTrace);\n-                auditEntryEntity.setTimeLastSent(new Date(System.currentTimeMillis()));\n+                auditEntryEntity.setTimeLastSent(OffsetDateTime.now());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzk4Nzcx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413798771", "createdAt": "2020-05-18T17:29:25Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyOToyNVrOGXA7VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyOToyNVrOGXA7VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTYyMQ==", "bodyText": "Shouldn't we get the offset date time for UTC?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426785621", "createdAt": "2020-05-18T17:29:25Z", "author": {"login": "jamesrichard91"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationManager.java", "diffHunk": "@@ -136,26 +134,24 @@ public DefaultNotificationManager(NotificationContentRepository notificationCont\n \n     @Override\n     @Transactional(readOnly = true, isolation = Isolation.READ_COMMITTED)\n-    public List<AlertNotificationModel> findByCreatedAtBetween(Date startDate, Date endDate) {\n+    public List<AlertNotificationModel> findByCreatedAtBetween(OffsetDateTime startDate, OffsetDateTime endDate) {\n         List<NotificationEntity> byCreatedAtBetween = notificationContentRepository.findByCreatedAtBetween(startDate, endDate);\n         return toModels(byCreatedAtBetween);\n     }\n \n     @Override\n     @Transactional(readOnly = true, isolation = Isolation.READ_COMMITTED)\n-    public List<AlertNotificationModel> findByCreatedAtBefore(Date date) {\n+    public List<AlertNotificationModel> findByCreatedAtBefore(OffsetDateTime date) {\n         List<NotificationEntity> byCreatedAtBefore = notificationContentRepository.findByCreatedAtBefore(date);\n         return toModels(byCreatedAtBefore);\n     }\n \n     @Override\n     public List<AlertNotificationModel> findByCreatedAtBeforeDayOffset(int dayOffset) {\n-        ZonedDateTime zonedDate = ZonedDateTime.now();\n-        zonedDate = zonedDate.minusDays(dayOffset);\n-        zonedDate = zonedDate.withZoneSameInstant(ZoneOffset.UTC);\n-        zonedDate = zonedDate.withHour(0).withMinute(0).withSecond(0).withNano(0);\n-        Date date = Date.from(zonedDate.toInstant());\n-        return findByCreatedAtBefore(date);\n+        OffsetDateTime searchTime = OffsetDateTime.now()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODA4NzM0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413808734", "createdAt": "2020-05-18T17:44:41Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0NDo0MlrOGXBatQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0NDo0MlrOGXBatQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzY1Mw==", "bodyText": "There are a few places we create a Date and substract an offset. Shouldn't we have a method in DateUtils to do this?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426793653", "createdAt": "2020-05-18T17:44:42Z", "author": {"login": "jamesrichard91"}, "path": "src/main/java/com/synopsys/integration/alert/workflow/scheduled/PurgeTask.java", "diffHunk": "@@ -130,20 +128,19 @@ private void purgeNotifications() {\n \n     private void purgeSystemMessages() {\n         try {\n-            Date date = createDate();\n+            OffsetDateTime date = createDate();\n             List<SystemMessageModel> messages = systemMessageUtility.getSystemMessagesBefore(date);\n             systemMessageUtility.deleteSystemMessages(messages);\n         } catch (Exception ex) {\n             logger.error(\"Error purging system messages\", ex);\n         }\n     }\n \n-    public Date createDate() {\n-        ZonedDateTime zonedDate = ZonedDateTime.now();\n-        zonedDate = zonedDate.minusDays(dayOffset);\n-        zonedDate = zonedDate.withZoneSameInstant(ZoneOffset.UTC);\n-        zonedDate = zonedDate.withHour(0).withMinute(0).withSecond(0).withNano(0);\n-        return Date.from(zonedDate.toInstant());\n+    // TODO give this method a more descriptive name\n+    public OffsetDateTime createDate() {\n+        return OffsetDateTime.now()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODE0Njk0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413814694", "createdAt": "2020-05-18T17:53:33Z", "commit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo1MzozM1rOGXBtuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo1MzozM1rOGXBtuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5ODUyMw==", "bodyText": "Does this work? I don't see any methods that accept a date object in OffsetDateTime, would this need to be rewritten to something like OffsetDateTime.now()?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426798523", "createdAt": "2020-05-18T17:53:33Z", "author": {"login": "ChomickiM"}, "path": "alert-database/src/test/java/com/synopsys/integration/alert/database/api/DefaultNotificationManagerTest.java", "diffHunk": "@@ -47,8 +48,8 @@\n \n     @Test\n     public void saveAllNotificationsTest() throws Exception {\n-        Date createdAt = new Date();\n-        Date providerCreationTime = new Date(System.currentTimeMillis() - 10000);\n+        OffsetDateTime createdAt = new Date();\n+        OffsetDateTime providerCreationTime = new Date(System.currentTimeMillis() - 10000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0381525834d38ea33248ee7354c47fce01036b0c"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d347399443bcd975c5e38276a55e124fb1082e7", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8d347399443bcd975c5e38276a55e124fb1082e7", "committedDate": "2020-05-18T19:38:10Z", "message": "Update references of OffsetDateTime.now() to use DateUtils and fix test issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d15314bc607e03815cb8592e5ad0113b89618f0", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7d15314bc607e03815cb8592e5ad0113b89618f0", "committedDate": "2020-05-18T19:51:14Z", "message": "Update references of OffsetDateTime.now() to use DateUtils in alert-database"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODkwODUx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413890851", "createdAt": "2020-05-18T19:46:39Z", "commit": {"oid": "8d347399443bcd975c5e38276a55e124fb1082e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOTo0Njo0MFrOGXFNwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOTo0Njo0MFrOGXFNwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg1NTg3Mg==", "bodyText": "In a separate conversation you mentioned that DateUtils.AUDIT_DATE_FORMAT was used in a test only, but this class was using the format. The method that uses the parseDateString is converting to paged models.  I believe it is being used. Is this correct to replace this format with the less precise minute format?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#discussion_r426855872", "createdAt": "2020-05-18T19:46:40Z", "author": {"login": "psantos1113"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultAuditUtility.java", "diffHunk": "@@ -346,10 +345,10 @@ private NotificationConfig populateConfigFromEntity(AlertNotificationModel notif\n         return new NotificationConfig(id, createdAt, notificationEntity.getProvider(), providerConfigId, providerConfigName, providerCreationTime, notificationEntity.getNotificationType(), notificationEntity.getContent());\n     }\n \n-    private Date parseDateString(String dateString) {\n-        Date date = null;\n+    private OffsetDateTime parseDateString(String dateString) {\n+        OffsetDateTime date = null;\n         try {\n-            date = DateUtils.parseDate(dateString, DateUtils.AUDIT_DATE_FORMAT);\n+            date = DateUtils.parseDate(dateString, DateUtils.UTC_DATE_FORMAT_TO_MINUTE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d347399443bcd975c5e38276a55e124fb1082e7"}, "originalPosition": 95}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9506eaf0c233a95e357f6960f40603e7a4878f6b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9506eaf0c233a95e357f6960f40603e7a4878f6b", "committedDate": "2020-05-18T20:03:32Z", "message": "Re-add AUDIT_DATE_FORMAT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTA1MDA1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-413905005", "createdAt": "2020-05-18T20:09:28Z", "commit": {"oid": "9506eaf0c233a95e357f6960f40603e7a4878f6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4821d193aace8188a54da45dcd2b56c73b22366", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b4821d193aace8188a54da45dcd2b56c73b22366", "committedDate": "2020-05-18T20:19:48Z", "message": "Fix time typo in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5da43784c866b8ef2fc8c2eef0c1c8c6f615b99", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f5da43784c866b8ef2fc8c2eef0c1c8c6f615b99", "committedDate": "2020-05-19T12:19:53Z", "message": "Fix test imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDcyMjAy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-414472202", "createdAt": "2020-05-19T13:58:23Z", "commit": {"oid": "f5da43784c866b8ef2fc8c2eef0c1c8c6f615b99"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e425b3e4db02f7357496372725b9717c8673deac", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e425b3e4db02f7357496372725b9717c8673deac", "committedDate": "2020-05-19T14:24:21Z", "message": "Update audit date format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTA5OTIw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/981#pullrequestreview-414509920", "createdAt": "2020-05-19T14:33:59Z", "commit": {"oid": "e425b3e4db02f7357496372725b9717c8673deac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20bbabc3eb19a6a719c69f6a27ba61ff88886035", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/20bbabc3eb19a6a719c69f6a27ba61ff88886035", "committedDate": "2020-05-19T14:59:21Z", "message": "Merge branch '6.0.0' into gk_fix_time_columns"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2729, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}