{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MjYwNzc2", "number": 1151, "title": "Removing incorrect logging from BlackDuckAccumulator", "bodyText": "While investigating the error message returning next accumulator run time as either 0 or a negative time we discovered that the logging does not reflect the correct results. This feature appears to not have been working as intended or correctly since before 5.3.0. Because future is currently referring to the running instance of the accumulator we are getting a negative run time as the time is actually reflecting the time since it last ran the accumulator. In the cases of it reporting 0 or -1 this is due to a rounding error as the message would be generated in about 500-900ms or occasionally just over 1000ms. When debugging, this time would reflect the amount of time since the accumulator first ran and would therefore be several seconds or minutes depending on how long you stop the execution for.\nThe next run time is still working successfully in the task view but since it does not operate the way its intended in the BlackDuckAccumulator we have removed that logging as well as the test. The only change we made here was setting future to null when unscheduling the task as there was nothing previously setting it to null.", "createdAt": "2020-09-01T18:37:13Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151", "merged": true, "mergeCommit": {"oid": "d09a4dd5f85a9cc0b581aa13fab4daf6242a1ed3"}, "closed": true, "closedAt": "2020-09-02T16:33:42Z", "author": {"login": "ChomickiM"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdErissgH2gAyNDc3MjYwNzc2OmRlNzIzZjA0ZGQ3YWNiMjBjM2MzM2E1ODEyOTc5MWQ4MjE1NzkwZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE-i3qAFqTQ4MDk5Mjc0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/de723f04dd7acb20c3c33a58129791d8215790f6", "committedDate": "2020-09-01T18:16:45Z", "message": "refactor: Removing incorrect logging from BlackDuckAccumulator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDIwOTA5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151#pullrequestreview-480020909", "createdAt": "2020-09-01T18:45:43Z", "commit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODo0NTo0M1rOHLDniQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODo0NTo0M1rOHLDniQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM1NTY1Nw==", "bodyText": "Wouldn't it be better to fix the getMillisecondsToNextRun() method?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151#discussion_r481355657", "createdAt": "2020-09-01T18:45:43Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/provider/blackduck/tasks/BlackDuckAccumulator.java", "diffHunk": "@@ -99,12 +98,6 @@ public void accumulate() {\n             saveNextSearchStart(nextSearchStartString);\n         } catch (AlertDatabaseConstraintException e) {\n             logger.error(\"Error occurred accumulating data! \", e);\n-        } finally {\n-            Optional<Long> nextRun = getMillisecondsToNextRun();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDU0Nzcx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151#pullrequestreview-480054771", "createdAt": "2020-09-01T19:32:14Z", "commit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDgwMDky", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151#pullrequestreview-480080092", "createdAt": "2020-09-01T20:11:46Z", "commit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTkyNzQx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1151#pullrequestreview-480992741", "createdAt": "2020-09-02T16:25:08Z", "commit": {"oid": "de723f04dd7acb20c3c33a58129791d8215790f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3444, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}