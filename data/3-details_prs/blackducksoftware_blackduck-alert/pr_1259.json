{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNzc0MjU5", "number": 1259, "title": "BlackDuck Project Paging", "bodyText": "Serve paged responses to the UI for projects in table-select.", "createdAt": "2020-11-13T18:39:57Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259", "merged": true, "mergeCommit": {"oid": "83f475e3260332e4d3d8a14a8348a7352212f7d5"}, "closed": true, "closedAt": "2020-11-16T13:21:46Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb1nGaAH2gAyNTIwNzc0MjU5OjE0MDI4OWRhNGRkOTEzZGM5YzBiODRlYTg5NmJiOTE0YzI4ZmU1NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddD8e2gFqTUzMTI2NzAzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "140289da4dd913dc9c0b84ea896bb914c28fe562", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/140289da4dd913dc9c0b84ea896bb914c28fe562", "committedDate": "2020-11-12T17:00:52Z", "message": "Feat(Provider): Begin adding paging support to provider projects custom endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d72db282912953ab7d403d840f155e152af82ec5", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d72db282912953ab7d403d840f155e152af82ec5", "committedDate": "2020-11-12T20:19:51Z", "message": "Feat(Provider): Add paging support to provider-projects in the UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f93253088312390d3fe4720e3b3fb5744214fcd", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8f93253088312390d3fe4720e3b3fb5744214fcd", "committedDate": "2020-11-12T21:15:34Z", "message": "Feat(Provider): Add paging logic in blackduck provider data accessor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3f6c4b171b4dd5ba6153b559bc7ae913a38f72f", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b3f6c4b171b4dd5ba6153b559bc7ae913a38f72f", "committedDate": "2020-11-13T14:18:26Z", "message": "Fix(BlackDuck): Compute page count total from elements total and validate paging params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c8be3723429ee2547bd5162f0f7f8728abdf68d", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9c8be3723429ee2547bd5162f0f7f8728abdf68d", "committedDate": "2020-11-13T14:47:20Z", "message": "Test(BlackDuck): Add mock for new data accessor method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a85d10a861b57b78c0d1f8560fd41c9a99296f07", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a85d10a861b57b78c0d1f8560fd41c9a99296f07", "committedDate": "2020-11-13T17:18:08Z", "message": "Fix(BlackDuck): Update back-end paged request to BlackDuck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de4d3ee4a93123334a99533a45958add510a26d5", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/de4d3ee4a93123334a99533a45958add510a26d5", "committedDate": "2020-11-13T18:36:05Z", "message": "Fix(UI): Update table select input to be concious of paged input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c837883952ac7fcc760bf58e86851bc63a0e560", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7c837883952ac7fcc760bf58e86851bc63a0e560", "committedDate": "2020-11-13T18:38:53Z", "message": "Fix(UI): Remove commented code for table select input"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzIyNzA4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#pullrequestreview-530322708", "createdAt": "2020-11-13T18:50:41Z", "commit": {"oid": "7c837883952ac7fcc760bf58e86851bc63a0e560"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxODo1MDo0MVrOHy7DSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxODo1MDo0MVrOHy7DSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE1ODM0NQ==", "bodyText": "We don't have to change this in this version of Alert but I think this is a good argument for getting rid of the dynamic endpoints and just create controllers/endpoints as we need. Having to extract the parameters this way is not appealing.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#discussion_r523158345", "createdAt": "2020-11-13T18:50:41Z", "author": {"login": "jamesrichard91"}, "path": "web/src/main/java/com/synopsys/integration/alert/web/api/provider/project/ProviderProjectCustomFunctionAction.java", "diffHunk": "@@ -60,23 +67,48 @@ public ProviderProjectCustomFunctionAction(AuthorizationManager authorizationMan\n \n     @Override\n     public ActionResponse<ProviderProjectOptions> createActionResponse(FieldModel fieldModel, HttpServletContentWrapper servletContentWrapper) {\n+        HttpServletRequest httpRequest = servletContentWrapper.getHttpRequest();\n+        Map<String, String[]> parameterMap = httpRequest.getParameterMap();\n+\n+        int pageNumber = extractPagingParam(parameterMap, \"pageNumber\", 0);\n+        int pageSize = extractPagingParam(parameterMap, \"pageSize\", 10);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c837883952ac7fcc760bf58e86851bc63a0e560"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzg1MTgw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#pullrequestreview-530385180", "createdAt": "2020-11-13T20:28:51Z", "commit": {"oid": "7c837883952ac7fcc760bf58e86851bc63a0e560"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMDoyODo1MVrOHy99iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMDoyODo1MVrOHy99iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIwNjAyNA==", "bodyText": "We cannot support \"missing\" data with paging because the data could be in a different page that has yet to be retrieved.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#discussion_r523206024", "createdAt": "2020-11-13T20:28:51Z", "author": {"login": "gkillough"}, "path": "ui/src/main/js/field/input/TableSelectInput.js", "diffHunk": "@@ -72,51 +75,30 @@ class TableSelectInput extends Component {\n         this.state = {\n             progress: false,\n             showTable: false,\n+            currentPage: 1,\n+            currentPageSize: 10,\n+            totalPageCount: 0,\n+            currentSearchTerm: '',\n             data: [],\n             selectedData: [],\n             displayedData: [],\n             showClearConfirm: false\n         };\n     }\n \n-    // FIXME componentWillMount is deprecated, use the constructor or componentDidMount to initialize this\n-    componentWillMount() {\n-        const { value } = this.props;\n-        if (value && value.length > 0) {\n-            this.retrieveTableData().then(() => {\n-                this.updateSelectedValues();\n-            });\n-        }\n-    }\n-\n-    componentDidUpdate(prevProps) {\n-        const { value } = this.props;\n-        const prevSize = prevProps.value && prevProps.value.length === 0;\n-        const currentSize = value && value.length > 0;\n-        const emptySelected = this.state.selectedData.length === 0;\n-        if (prevSize && currentSize && emptySelected) {\n-            if (this.state.data.length == 0) {\n-                this.retrieveTableData().then(() => {\n-                    this.updateSelectedValues();\n-                });\n-            } else {\n-                this.updateSelectedValues();\n-            }\n-        }\n+    componentDidMount() {\n+        this.updateSelectedValues();\n     }\n \n     updateSelectedValues() {\n         const { value } = this.props;\n-        const { selectedData, data } = this.state;\n+        const { selectedData } = this.state;\n         selectedData.push(...value);\n-        const keyColumnHeader = this.props.columns.find((column) => column.isKey).header;\n         const convertedValues = selectedData.map((selected) => {\n-            const columnContainsValue = data.map((dataValue) => dataValue[keyColumnHeader])\n-                .includes(selected);\n             return {\n                 label: selected,\n                 value: selected,\n-                missing: !columnContainsValue\n+                missing: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c837883952ac7fcc760bf58e86851bc63a0e560"}, "originalPosition": 67}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a19fe56997bfcff84336a68160c51d947653eb57", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a19fe56997bfcff84336a68160c51d947653eb57", "committedDate": "2020-11-13T20:34:12Z", "message": "Fix(Test): Update mock provider data accessor test to use sub-list for page mocking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0c502932c696554d7ee4c851f65024bdc674aa5", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f0c502932c696554d7ee4c851f65024bdc674aa5", "committedDate": "2020-11-13T21:09:33Z", "message": "Feat(UI): Support searching if allowed by endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e95acdd396dfd96f6be42d7324a6fbd17fb9232b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e95acdd396dfd96f6be42d7324a6fbd17fb9232b", "committedDate": "2020-11-13T21:40:15Z", "message": "Feat(BlackDuck): Add search to provider projects endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNDM2ODE3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#pullrequestreview-530436817", "createdAt": "2020-11-13T21:47:57Z", "commit": {"oid": "e95acdd396dfd96f6be42d7324a6fbd17fb9232b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjY3MDM5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1259#pullrequestreview-531267039", "createdAt": "2020-11-16T12:16:49Z", "commit": {"oid": "e95acdd396dfd96f6be42d7324a6fbd17fb9232b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2906, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}