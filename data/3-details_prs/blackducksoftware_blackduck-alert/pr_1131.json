{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNzA1MDgz", "number": 1131, "title": "Fix Certificate Controller", "bodyText": "Fix response statuses\nFix return types\nSeparate field validation from write operations", "createdAt": "2020-08-24T18:58:15Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131", "merged": true, "mergeCommit": {"oid": "0e1240a2808ee00711c79e7fb2f51df46a0663f0"}, "closed": true, "closedAt": "2020-08-26T19:22:50Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBJfUlgH2gAyNDcyNzA1MDgzOmZlYjIzMWYxNjAyZTY5ZjY0YmMzZjNlZjcyZTM5YmYzMzgzYjNkYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCw4oZgH2gAyNDcyNzA1MDgzOmJkYzMzOTI2MWI0MDhkZTViNTJiNDlmNWFmZDFkM2FjZTVlMDA5Mzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "feb231f1602e69f64bc3f3ef72e39bf3383b3dbd", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/feb231f1602e69f64bc3f3ef72e39bf3383b3dbd", "committedDate": "2020-08-21T18:54:31Z", "message": "Fix(Certificate API): Make GET endpoints return correct response type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "414e02283c78b44dc5cf188ec2bd5c428ef1d778", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/414e02283c78b44dc5cf188ec2bd5c428ef1d778", "committedDate": "2020-08-21T19:52:12Z", "message": "Fix(Controllers): Update response status for audit, auth, and certificate controllers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "451c5cccefae3dc07acaaf36ce2b6ffc9280fee8", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/451c5cccefae3dc07acaaf36ce2b6ffc9280fee8", "committedDate": "2020-08-24T12:34:42Z", "message": "Feat(Certificate API): Add validation endpoint for certificates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c53bdd23cd1144695daa82588f23e285b687a266", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c53bdd23cd1144695daa82588f23e285b687a266", "committedDate": "2020-08-24T17:07:00Z", "message": "Fix(Certificate API): Enhance certificate error messages and add permissions to validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bbc1d9e07e5b3f5cdfd96f2504f7d1c87f64fcc", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9bbc1d9e07e5b3f5cdfd96f2504f7d1c87f64fcc", "committedDate": "2020-08-24T18:46:40Z", "message": "Fix(Certificate UI): Call validate endpoint before saving"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca282c35e177e210add199b85913a2d8c0d2d3c", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4ca282c35e177e210add199b85913a2d8c0d2d3c", "committedDate": "2020-08-24T18:58:42Z", "message": "Merge branch 'master' into gk_fix_cert_controller"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzg1MzEx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-473785311", "createdAt": "2020-08-24T19:15:02Z", "commit": {"oid": "4ca282c35e177e210add199b85913a2d8c0d2d3c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOToxNTowMlrOHFy0Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOToxNTowMlrOHFy0Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTgzNzUwNw==", "bodyText": "The class names are confusing to me here. We have a CertificateModel that we run convertToDatabaseModel which changes it to a CustomCertificateModel. I feel like the name CustomCertificateModel is misleading? Or perhaps the convertToDatabaseModel Should be changed?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#discussion_r475837507", "createdAt": "2020-08-24T19:15:02Z", "author": {"login": "bamandel"}, "path": "src/main/java/com/synopsys/integration/alert/web/api/certificate/CertificateActions.java", "diffHunk": "@@ -69,6 +70,43 @@ public CertificateActions(CustomCertificateAccessor certificateAccessor, Certifi\n                    .map(this::convertFromDatabaseModel);\n     }\n \n+    public MessageResult validateCertificate(CertificateModel certificateModel) {\n+        CustomCertificateModel convertedModel = convertToDatabaseModel(certificateModel);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca282c35e177e210add199b85913a2d8c0d2d3c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de19b3c32b864ce65642dcfd484e38e5a8c3e480", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/de19b3c32b864ce65642dcfd484e38e5a8c3e480", "committedDate": "2020-08-24T19:17:40Z", "message": "Refactor(Certificate UI): Rename validate and save function in CertificatesPage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzk4MTQ3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-473798147", "createdAt": "2020-08-24T19:35:07Z", "commit": {"oid": "de19b3c32b864ce65642dcfd484e38e5a8c3e480"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTozNTowN1rOHFzb5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTozNTowN1rOHFzb5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg0NzY1Mw==", "bodyText": "It doesn't look like this else statement is necessary.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#discussion_r475847653", "createdAt": "2020-08-24T19:35:07Z", "author": {"login": "bamandel"}, "path": "src/main/js/dynamic/loaded/certificates/CertificatesPage.js", "diffHunk": "@@ -91,6 +91,16 @@ class CertificatesPage extends Component {\n     createModalFields() {\n         const { certificate } = this.state;\n         const { fieldErrors } = this.props;\n+\n+        const fieldStatuses = fieldErrors.fieldErrors;\n+        let fieldErrorMap = {};\n+        if (fieldStatuses) {\n+            fieldStatuses.forEach((fieldStatus) => {\n+                fieldErrorMap[fieldStatus.fieldName] = fieldStatus;\n+            });\n+        } else {\n+            fieldErrorMap = {};\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de19b3c32b864ce65642dcfd484e38e5a8c3e480"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczODAwNDgz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-473800483", "createdAt": "2020-08-24T19:38:54Z", "commit": {"oid": "de19b3c32b864ce65642dcfd484e38e5a8c3e480"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cae19e30b490f09c19f0ba267c28fe1ef1805a3", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8cae19e30b490f09c19f0ba267c28fe1ef1805a3", "committedDate": "2020-08-24T19:48:36Z", "message": "Fix(Certificate UI): Remove unnecessary else-statement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczODA5Njc0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-473809674", "createdAt": "2020-08-24T19:53:21Z", "commit": {"oid": "8cae19e30b490f09c19f0ba267c28fe1ef1805a3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc72aab285b91382a4ad60059a7651d476c7efd2", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/fc72aab285b91382a4ad60059a7651d476c7efd2", "committedDate": "2020-08-25T19:08:44Z", "message": "Merge branch 'master' into gk_fix_cert_controller"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDMxODcy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-475431872", "createdAt": "2020-08-26T12:21:47Z", "commit": {"oid": "fc72aab285b91382a4ad60059a7651d476c7efd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMjoyMTo0OFrOHHJeCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMjoyMTo0OFrOHHJeCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzI1NzIyNg==", "bodyText": "This code could most likely be moved into the httpErrorUtilities.js file to be used elsewhere until we convert to using the validation rest endpoint with a better object.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#discussion_r477257226", "createdAt": "2020-08-26T12:21:48Z", "author": {"login": "psantos1113"}, "path": "src/main/js/dynamic/loaded/certificates/CertificatesPage.js", "diffHunk": "@@ -91,6 +91,14 @@ class CertificatesPage extends Component {\n     createModalFields() {\n         const { certificate } = this.state;\n         const { fieldErrors } = this.props;\n+\n+        const fieldStatuses = fieldErrors.fieldErrors;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc72aab285b91382a4ad60059a7651d476c7efd2"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDMzMzk3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-475433397", "createdAt": "2020-08-26T12:23:58Z", "commit": {"oid": "fc72aab285b91382a4ad60059a7651d476c7efd2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e22813ecd30c35b96eafffa420a930d0653a610", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0e22813ecd30c35b96eafffa420a930d0653a610", "committedDate": "2020-08-26T15:10:08Z", "message": "FIx(Certificate API): Create a validation response object consistent with current UI error handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1Nzc1OTAy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1131#pullrequestreview-475775902", "createdAt": "2020-08-26T19:01:00Z", "commit": {"oid": "0e22813ecd30c35b96eafffa420a930d0653a610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdc339261b408de5b52b49f5afd1d3ace5e00939", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/bdc339261b408de5b52b49f5afd1d3ace5e00939", "committedDate": "2020-08-26T19:22:23Z", "message": "Merge branch 'master' into gk_fix_cert_controller"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3419, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}