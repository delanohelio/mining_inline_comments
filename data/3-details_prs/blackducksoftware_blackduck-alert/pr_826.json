{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NTg5MzA1", "number": 826, "title": "Ps certificate tests", "bodyText": "Added some tests for the CertificateActions class.  Also includes fixes from manually testing.", "createdAt": "2020-01-23T22:04:02Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/826", "merged": true, "mergeCommit": {"oid": "21a1c7e242d235a4b4ced50e2e0612df9966272a"}, "closed": true, "closedAt": "2020-01-24T14:53:23Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9O065gH2gAyMzY2NTg5MzA1OmNhOWFmYTZmYjU1ODY0YWJhOWFiMDEwZDEwZGU1NDEyMTU0MWViY2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9f_xEgH2gAyMzY2NTg5MzA1OjI5Y2ZjYWMwYzg2ODRiZmFjZmVhNmY2ZmE5MjRiYjkyYTE5YWE5NTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca9afa6fb55864aba9ab010d10de54121541ebcf", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ca9afa6fb55864aba9ab010d10de54121541ebcf", "committedDate": "2020-01-23T18:40:47Z", "message": "Fix(tests): Add tests for CertificateActions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e38df913d3601c874139b93196d1d12c51db33f", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5e38df913d3601c874139b93196d1d12c51db33f", "committedDate": "2020-01-23T22:01:15Z", "message": "Fix(test): Implement tests for the CertificateActions class."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTQ5MTk5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/826#pullrequestreview-347949199", "createdAt": "2020-01-24T13:24:21Z", "commit": {"oid": "5e38df913d3601c874139b93196d1d12c51db33f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMzoyNDoyMVrOFhdgZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMzoyNDoyMVrOFhdgZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDYzMDc1Nw==", "bodyText": "This line may also throw an exception and I'm not sure how we want to handle it.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/826#discussion_r370630757", "createdAt": "2020-01-24T13:24:21Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/web/certificates/CertificateActions.java", "diffHunk": "@@ -76,9 +76,15 @@ public CertificateModel createCertificate(CertificateModel certificateModel) thr\n \n     private CertificateModel importCertificate(CertificateModel certificateModel) throws AlertException {\n         CustomCertificateModel certificateToStore = convertToDatabaseModel(certificateModel);\n-        CustomCertificateModel storedCertificate = certificateAccessor.storeCertificate(certificateToStore);\n-        certificateUtility.importCertificate(storedCertificate);\n-        return convertFromDatabaseModel(storedCertificate);\n+        try {\n+            CustomCertificateModel storedCertificate = certificateAccessor.storeCertificate(certificateToStore);\n+            certificateUtility.importCertificate(storedCertificate);\n+            return convertFromDatabaseModel(storedCertificate);\n+        } catch (AlertException ex) {\n+            certificateAccessor.deleteCertificate(certificateToStore.getAlias());\n+            certificateUtility.removeCertificate(certificateToStore.getAlias());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e38df913d3601c874139b93196d1d12c51db33f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTQ5ODg1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/826#pullrequestreview-347949885", "createdAt": "2020-01-24T13:25:46Z", "commit": {"oid": "5e38df913d3601c874139b93196d1d12c51db33f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTkwOTc0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/826#pullrequestreview-347990974", "createdAt": "2020-01-24T14:32:36Z", "commit": {"oid": "5e38df913d3601c874139b93196d1d12c51db33f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29cfcac0c8684bfacfea6f6fa924bb92a19aa950", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/29cfcac0c8684bfacfea6f6fa924bb92a19aa950", "committedDate": "2020-01-24T14:41:01Z", "message": "Refactor(certs): Add logging for the certificate actions."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2769, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}