{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MjY5MDQ5", "number": 1295, "title": "Notification reciever improvements", "bodyText": "We are reworking the NotificationReceiver to now process the and send notifications after they are saved by the BlackDuckAccumulator. It will now receive a wakeup call every time a new notification comes in rather than a list of notifications. There exists a current issue where notifications that come in may not be sent out until the NotificationReceiver finishes processing all of the messages. It is possible that if a constant stream of notifications is being sent to Alert that this loop will continue until we stop at 100 loops (10,000 Notifications). Once we find a solution to the threading problem we can remove this upper limit as it will no longer impact or cause issues to this.", "createdAt": "2020-12-10T21:28:08Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295", "merged": true, "mergeCommit": {"oid": "0d4fb0e87b6ea440496cc302014eb70d8c95f875"}, "closed": true, "closedAt": "2020-12-17T15:04:26Z", "author": {"login": "ChomickiM"}, "timelineItems": {"totalCount": 42, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABded2vUAH2gAyNTM2MjY5MDQ5OjAxY2FjMmE5Mzk0ZmM0MjUxOTExNGJkYTdhZjNmNjEzYWQ4ZjZmODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnExqmgH2gAyNTM2MjY5MDQ5Ojc2MDViMWZjMTJhNGFhN2QzYTE5ZWY2ZTNiMjNiOTI0ZTg2YWY3NjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01cac2a9394fc42519114bda7af3f613ad8f6f82", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/01cac2a9394fc42519114bda7af3f613ad8f6f82", "committedDate": "2020-11-20T21:02:00Z", "message": "refactor: Initial commit to refactor notifications to pass a processed value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd460b6b61dcf79551f4aafbfbf5ebef00c2479e", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/fd460b6b61dcf79551f4aafbfbf5ebef00c2479e", "committedDate": "2020-11-20T21:30:18Z", "message": "build: Add proposed changes to workflow build.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf81594265c17a670c234f63a23cb0b706c87d83", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/bf81594265c17a670c234f63a23cb0b706c87d83", "committedDate": "2020-12-01T18:30:09Z", "message": "refactor: Implemented methods to update notifications as processed and update NotificationReceiver to use new Paginated methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0161d9e7baeb1cbb89ac1d8a8947b77d149b7c78", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0161d9e7baeb1cbb89ac1d8a8947b77d149b7c78", "committedDate": "2020-12-01T18:49:15Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements\n\n# Conflicts:\n#\talert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessor.java\n#\talert-database/src/test/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessorTest.java\n#\tprovider/src/main/java/com/synopsys/integration/alert/provider/blackduck/factory/BlackDuckTaskFactory.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80e2bf077ced66b1a50b151f0e5640e1dfa6a422", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/80e2bf077ced66b1a50b151f0e5640e1dfa6a422", "committedDate": "2020-12-02T14:21:03Z", "message": "feat(liquibase): Add new processed column to \"raw_notification_content\" table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9ea9073d1d4cf04ecb2c48c06cf2977202e365e", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b9ea9073d1d4cf04ecb2c48c06cf2977202e365e", "committedDate": "2020-12-02T14:21:47Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d8955b513c41bcf934f87f540caa6addfd9c2f9", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7d8955b513c41bcf934f87f540caa6addfd9c2f9", "committedDate": "2020-12-03T15:46:11Z", "message": "refactor: Fix incorrect sorting order in NotificationAccessor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f047137f38943367e4f2c91c25be43acf7874f4d", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f047137f38943367e4f2c91c25be43acf7874f4d", "committedDate": "2020-12-03T15:56:32Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements\n\n# Conflicts:\n#\talert-database/src/main/resources/liquibase/6.4.0/changelog.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b52602f9f4fa15b2c782d518809e60e2eda6fd", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f9b52602f9f4fa15b2c782d518809e60e2eda6fd", "committedDate": "2020-12-03T21:05:44Z", "message": "refactor: add additional logging for debugging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8430ed2c66e12f81d6e16ba584573a579a40a729", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8430ed2c66e12f81d6e16ba584573a579a40a729", "committedDate": "2020-12-04T20:23:52Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ab1f498b6fa7b762c3d5aec6813875e6445c98a", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/6ab1f498b6fa7b762c3d5aec6813875e6445c98a", "committedDate": "2020-12-08T19:48:28Z", "message": "feature(logging): Adding more logging for testing NotificationReceiver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "809668c36e47b3c78580474339a958b175e80ab8", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/809668c36e47b3c78580474339a958b175e80ab8", "committedDate": "2020-12-08T19:59:37Z", "message": "Merge branch 'mc_notification_reciever_improvements' of https://github.com/blackducksoftware/blackduck-alert into mc_notification_reciever_improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0aab07e0dfc799eab0570c992d21f83544f5665", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b0aab07e0dfc799eab0570c992d21f83544f5665", "committedDate": "2020-12-10T21:04:59Z", "message": "test: Added test coverage for NotificationReceiver and cleaned up comments/logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMzgzMTYw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-551383160", "createdAt": "2020-12-14T13:50:43Z", "commit": {"oid": "b0aab07e0dfc799eab0570c992d21f83544f5665"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzo1MDo0M1rOIFRVqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzo1MDo0M1rOIFRVqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM5Nzg2NA==", "bodyText": "The id's should have a unique text describing the change now.  Try something like add_processed_column_to_notification_table", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r542397864", "createdAt": "2020-12-14T13:50:43Z", "author": {"login": "psantos1113"}, "path": "alert-database/src/main/resources/liquibase/6.4.0/notification-content-processing-column.xml", "diffHunk": "@@ -0,0 +1,16 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<databaseChangeLog xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd\">\n+\n+    <changeSet author=\"martinch\" id=\"2020-12-01-14-04-07-258\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0aab07e0dfc799eab0570c992d21f83544f5665"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc15ebc47129106ae93fdfaed689539910c2605a", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/cc15ebc47129106ae93fdfaed689539910c2605a", "committedDate": "2020-12-14T20:46:30Z", "message": "test: Add integration tests for NotificationReceiver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNDk3MDEw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-552497010", "createdAt": "2020-12-15T14:10:59Z", "commit": {"oid": "cc15ebc47129106ae93fdfaed689539910c2605a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoxMDo1OVrOIGM2sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoxMDo1OVrOIGM2sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM3Mjk3OQ==", "bodyText": "It might be more appropriate to call this \"NotificationsReceivedEvent\" now.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r543372979", "createdAt": "2020-12-15T14:10:59Z", "author": {"login": "gkillough"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/event/NotificationEvent.java", "diffHunk": "@@ -22,18 +22,10 @@\n  */\n package com.synopsys.integration.alert.common.event;\n \n-import java.util.List;\n-\n public class NotificationEvent extends AlertEvent {\n     public static final String NOTIFICATION_EVENT_TYPE = \"notification_event\";\n-    private final List<Long> notificationIds;\n \n-    public NotificationEvent(final List<Long> notificationIds) {\n+    public NotificationEvent() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc15ebc47129106ae93fdfaed689539910c2605a"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTA2MDky", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-552506092", "createdAt": "2020-12-15T14:20:04Z", "commit": {"oid": "cc15ebc47129106ae93fdfaed689539910c2605a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyMDowNFrOIGNkVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyMDowNFrOIGNkVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM4NDY2MA==", "bodyText": "The sort and page size should be reflected in the method name. Also, I believe we don't want to expose Page (use AlertPagedModel instead?) outside of the DB API, but we may not have done the best job of that up until this point.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r543384660", "createdAt": "2020-12-15T14:20:04Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessor.java", "diffHunk": "@@ -185,6 +193,25 @@ public PageRequest getPageRequestForNotifications(Integer pageNumber, Integer pa\n         return PageRequest.of(pageNumber, pageSize, Sort.by(sortingOrder));\n     }\n \n+    //TODO this needs unit tests\n+    @Override\n+    public Page<AlertNotificationModel> findNotificationsNotProcessed() {\n+        Sort.Order sortingOrder = Sort.Order.asc(\"providerCreationTime\");\n+        PageRequest pageRequest = PageRequest.of(0, 100, Sort.by(sortingOrder));\n+        return notificationContentRepository.findNotProcessedNotifications(pageRequest)\n+                   .map(this::toModel);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc15ebc47129106ae93fdfaed689539910c2605a"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "636a7608604d87b7df0eb0526494dbae6fded7a6", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/636a7608604d87b7df0eb0526494dbae6fded7a6", "committedDate": "2020-12-15T18:32:58Z", "message": "refactor: Clean up logs fix tests using unused EventManager from DefaultNotificationAccessor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba7d7d5e11e130c3912e7d759186778307c2599", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9ba7d7d5e11e130c3912e7d759186778307c2599", "committedDate": "2020-12-16T15:11:27Z", "message": "refactor: Update NotificationAccessor to use AlertPagedModel rather than Page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODIzNzc4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553823778", "createdAt": "2020-12-16T15:49:56Z", "commit": {"oid": "9ba7d7d5e11e130c3912e7d759186778307c2599"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNTo0OTo1NlrOIHMF-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNTo0OTo1NlrOIHMF-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQwOTA4Mg==", "bodyText": "Make sure this does not get merged into master.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544409082", "createdAt": "2020-12-16T15:49:56Z", "author": {"login": "jamesrichard91"}, "path": "src/test/java/com/synopsys/integration/alert/performance/ScalingPerformanceTest.java", "diffHunk": "@@ -69,7 +68,7 @@ public static void initTest() {\n \n     @Test\n     @Ignore\n-    @Disabled\n+    //@Disabled //TODO remove this when testing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba7d7d5e11e130c3912e7d759186778307c2599"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "089f700ad86bccfa94b69352ca68aaad37aa0fd0", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/089f700ad86bccfa94b69352ca68aaad37aa0fd0", "committedDate": "2020-12-16T16:05:27Z", "message": "refactor: Clean up logging and comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f76a83e808a2344641e7f18c6d831802b3653bf9", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f76a83e808a2344641e7f18c6d831802b3653bf9", "committedDate": "2020-12-16T16:46:41Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements\n\n# Conflicts:\n#\talert-database/src/main/resources/liquibase/6.4.0/changelog.xml\n#\tsrc/test/java/com/synopsys/integration/alert/component/audit/web/AuditEntryActionsTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b268ddf485b4d8fc8577a9b759c063bba49da3e", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5b268ddf485b4d8fc8577a9b759c063bba49da3e", "committedDate": "2020-12-16T16:52:38Z", "message": "style: Removed some comments and logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTI1NzY3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553925767", "createdAt": "2020-12-16T17:35:09Z", "commit": {"oid": "5b268ddf485b4d8fc8577a9b759c063bba49da3e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5d4a66de782530ec919bb8840d01fba70acad7f0", "committedDate": "2020-12-16T18:12:08Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements\n\n# Conflicts:\n#\talert-common/src/main/java/com/synopsys/integration/alert/common/workflow/processor/notification/NotificationProcessor.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTg5OTMy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553989932", "createdAt": "2020-12-16T18:55:50Z", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODo1NTo1MFrOIHUWJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODo1NTo1MFrOIHUWJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU0NDI5Mg==", "bodyText": "It seems like we should be passing the pageSize as a parameter. This class shouldn't be the one that decides on that size.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544544292", "createdAt": "2020-12-16T18:55:50Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessor.java", "diffHunk": "@@ -185,6 +174,27 @@ public PageRequest getPageRequestForNotifications(Integer pageNumber, Integer pa\n         return PageRequest.of(pageNumber, pageSize, Sort.by(sortingOrder));\n     }\n \n+    @Override\n+    public AlertPagedModel<AlertNotificationModel> getFirstPageOfNotificationsNotProcessed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTkwNjgw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553990680", "createdAt": "2020-12-16T18:56:46Z", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODo1Njo0NlrOIHUYvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODo1Njo0NlrOIHUYvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU0NDk1OA==", "bodyText": "Can we clean up this line-wrapping?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544544958", "createdAt": "2020-12-16T18:56:46Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessor.java", "diffHunk": "@@ -215,7 +225,8 @@ private AlertNotificationModel toModel(NotificationEntity entity) {\n                                      .flatMap(ConfigurationFieldModel::getFieldValue)\n                                      .orElse(providerConfigName);\n         }\n-        return new AlertNotificationModel(entity.getId(), providerConfigId, entity.getProvider(), providerConfigName, entity.getNotificationType(), entity.getContent(), entity.getCreatedAt(), entity.getProviderCreationTime());\n+        return new AlertNotificationModel(entity.getId(), providerConfigId, entity.getProvider(), providerConfigName, entity.getNotificationType(), entity.getContent(), entity.getCreatedAt(), entity.getProviderCreationTime(),\n+            entity.getProcessed());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "originalPosition": 90}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTk0MDQ2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553994046", "createdAt": "2020-12-16T19:00:55Z", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowMDo1NlrOIHUkGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowMDo1NlrOIHUkGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU0Nzg2Nw==", "bodyText": "We might be able to do this without a custom query:\nhttps://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Query(value = \"SELECT entity FROM NotificationEntity entity WHERE entity.processed = false\")\n          \n          \n            \n                Page<NotificationEntity> findNotProcessedNotifications(Pageable pageable);\n          \n          \n            \n                Page<NotificationEntity> findByProcessedFalse(Pageable pageable);", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544547867", "createdAt": "2020-12-16T19:00:56Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/notification/NotificationContentRepository.java", "diffHunk": "@@ -84,4 +82,6 @@\n                        + \")\")\n     Page<NotificationEntity> findMatchingSentNotification(@Param(\"searchTerm\") String searchTerm, Pageable pageable);\n \n+    @Query(value = \"SELECT entity FROM NotificationEntity entity WHERE entity.processed = false\")\n+    Page<NotificationEntity> findNotProcessedNotifications(Pageable pageable);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTk3NjAx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553997601", "createdAt": "2020-12-16T19:05:48Z", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowNTo0OFrOIHUvaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowNTo0OFrOIHUvaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MDc2MA==", "bodyText": "Rather than nesting all of the logic inside of this if-statement, can we negate this condition and use the code from the else here? Then return to short-circuit.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544550760", "createdAt": "2020-12-16T19:05:48Z", "author": {"login": "gkillough"}, "path": "workflow/src/main/java/com/synopsys/integration/alert/workflow/message/NotificationReceiver.java", "diffHunk": "@@ -51,32 +54,44 @@\n \n     @Autowired\n     public NotificationReceiver(Gson gson, NotificationAccessor notificationAccessor, NotificationProcessor notificationProcessor, ChannelEventManager eventManager) {\n-        super(gson, NotificationEvent.class);\n+        super(gson, NotificationReceivedEvent.class);\n         this.notificationAccessor = notificationAccessor;\n         this.notificationProcessor = notificationProcessor;\n         this.eventManager = eventManager;\n     }\n \n     @Override\n-    public void handleEvent(NotificationEvent event) {\n-        if (NotificationEvent.NOTIFICATION_EVENT_TYPE.equals(event.getDestination())) {\n-            if (null == event.getNotificationIds() || event.getNotificationIds().isEmpty()) {\n-                logger.warn(\"Can not process a notification event without notification Id's.\");\n-                return;\n-            }\n+    public void handleEvent(NotificationReceivedEvent event) {\n+        if (NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE.equals(event.getDestination())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTk5NTQ1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-553999545", "createdAt": "2020-12-16T19:08:29Z", "commit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowODoyOVrOIHU1_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowODoyOVrOIHU1_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MjQ0NA==", "bodyText": "Can we clean up this line-wrapping?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544552444", "createdAt": "2020-12-16T19:08:29Z", "author": {"login": "gkillough"}, "path": "workflow/src/main/java/com/synopsys/integration/alert/workflow/message/NotificationReceiver.java", "diffHunk": "@@ -51,32 +54,44 @@\n \n     @Autowired\n     public NotificationReceiver(Gson gson, NotificationAccessor notificationAccessor, NotificationProcessor notificationProcessor, ChannelEventManager eventManager) {\n-        super(gson, NotificationEvent.class);\n+        super(gson, NotificationReceivedEvent.class);\n         this.notificationAccessor = notificationAccessor;\n         this.notificationProcessor = notificationProcessor;\n         this.eventManager = eventManager;\n     }\n \n     @Override\n-    public void handleEvent(NotificationEvent event) {\n-        if (NotificationEvent.NOTIFICATION_EVENT_TYPE.equals(event.getDestination())) {\n-            if (null == event.getNotificationIds() || event.getNotificationIds().isEmpty()) {\n-                logger.warn(\"Can not process a notification event without notification Id's.\");\n-                return;\n-            }\n+    public void handleEvent(NotificationReceivedEvent event) {\n+        if (NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE.equals(event.getDestination())) {\n             logger.debug(\"Event {}\", event);\n-            logger.info(\"Processing event for {} notifications.\", event.getNotificationIds().size());\n-            List<AlertNotificationModel> notifications = notificationAccessor.findByIds(event.getNotificationIds());\n-            List<DistributionEvent> distributionEvents = notificationProcessor.processNotifications(FrequencyType.REAL_TIME, notifications);\n-            logger.info(\"Sending {} events for notifications.\", distributionEvents.size());\n-            eventManager.sendEvents(distributionEvents);\n+            logger.info(\"Processing event for notifications.\");\n+\n+            int numPagesProcessed = 0;\n+\n+            AlertPagedModel<AlertNotificationModel> pageOfAlertNotificationModels = notificationAccessor.getFirstPageOfNotificationsNotProcessed();\n+            //TODO: Once we create a way of handling channel events in parallel, we can remove the MAX_NUMBER_PAGES_PROCESSED.\n+            while (!CollectionUtils.isEmpty(pageOfAlertNotificationModels.getModels()) && numPagesProcessed < MAX_NUMBER_PAGES_PROCESSED) {\n+                List<AlertNotificationModel> notifications = pageOfAlertNotificationModels.getModels();\n+                logger.info(\"Sending {} notifications.\", notifications.size());\n+                List<DistributionEvent> distributionEvents = notificationProcessor.processNotifications(FrequencyType.REAL_TIME, notifications);\n+                logger.info(\"Sending {} events for notifications.\", distributionEvents.size());\n+                eventManager.sendEvents(distributionEvents);\n+                notificationAccessor.setNotificationsProcessed(notifications);\n+                numPagesProcessed++;\n+                pageOfAlertNotificationModels = notificationAccessor.getFirstPageOfNotificationsNotProcessed();\n+                logger.trace(\"Processing Page: {}. New pages found: {}\", numPagesProcessed,\n+                    pageOfAlertNotificationModels.getTotalPages());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4a66de782530ec919bb8840d01fba70acad7f0"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38", "committedDate": "2020-12-16T19:38:07Z", "message": "refactor: Make pageSzie configurable in NotificationAccessor and clean up code based on feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MDMxMzYy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554031362", "createdAt": "2020-12-16T19:50:50Z", "commit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTo1MDo1MVrOIHWchg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTo1MDo1MVrOIHWchg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU3ODY5NA==", "bodyText": "Why are we getting a paged result and verifying that we process a specific separate number? Wouldn't we want to get the paged result and simply process all of them?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544578694", "createdAt": "2020-12-16T19:50:51Z", "author": {"login": "bamandel"}, "path": "workflow/src/main/java/com/synopsys/integration/alert/workflow/message/NotificationReceiver.java", "diffHunk": "@@ -51,32 +54,46 @@\n \n     @Autowired\n     public NotificationReceiver(Gson gson, NotificationAccessor notificationAccessor, NotificationProcessor notificationProcessor, ChannelEventManager eventManager) {\n-        super(gson, NotificationEvent.class);\n+        super(gson, NotificationReceivedEvent.class);\n         this.notificationAccessor = notificationAccessor;\n         this.notificationProcessor = notificationProcessor;\n         this.eventManager = eventManager;\n     }\n \n     @Override\n-    public void handleEvent(NotificationEvent event) {\n-        if (NotificationEvent.NOTIFICATION_EVENT_TYPE.equals(event.getDestination())) {\n-            if (null == event.getNotificationIds() || event.getNotificationIds().isEmpty()) {\n-                logger.warn(\"Can not process a notification event without notification Id's.\");\n-                return;\n-            }\n-            logger.debug(\"Event {}\", event);\n-            logger.info(\"Processing event for {} notifications.\", event.getNotificationIds().size());\n-            List<AlertNotificationModel> notifications = notificationAccessor.findByIds(event.getNotificationIds());\n+    public void handleEvent(NotificationReceivedEvent event) {\n+        if (!NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE.equals(event.getDestination())) {\n+            logger.warn(\"Received an event of type '{}', but this listener is for type '{}'.\", event.getDestination(), NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE);\n+            return;\n+        }\n+        logger.debug(\"Event {}\", event);\n+        logger.info(\"Processing event for notifications.\");\n+\n+        int numPagesProcessed = 0;\n+        int pageSize = 100;\n+\n+        AlertPagedModel<AlertNotificationModel> pageOfAlertNotificationModels = notificationAccessor.getFirstPageOfNotificationsNotProcessed(pageSize);\n+        //TODO: Once we create a way of handling channel events in parallel, we can remove the MAX_NUMBER_PAGES_PROCESSED.\n+        while (!CollectionUtils.isEmpty(pageOfAlertNotificationModels.getModels()) && numPagesProcessed < MAX_NUMBER_PAGES_PROCESSED) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MDM1MzY3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554035367", "createdAt": "2020-12-16T19:56:21Z", "commit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTo1NjoyMVrOIHWpww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTo1NjoyMVrOIHWpww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU4MjA4Mw==", "bodyText": "Is this a valid concern? Shouldn't this receiver be setup to only run when this event type is being processed?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544582083", "createdAt": "2020-12-16T19:56:21Z", "author": {"login": "bamandel"}, "path": "workflow/src/main/java/com/synopsys/integration/alert/workflow/message/NotificationReceiver.java", "diffHunk": "@@ -51,32 +54,46 @@\n \n     @Autowired\n     public NotificationReceiver(Gson gson, NotificationAccessor notificationAccessor, NotificationProcessor notificationProcessor, ChannelEventManager eventManager) {\n-        super(gson, NotificationEvent.class);\n+        super(gson, NotificationReceivedEvent.class);\n         this.notificationAccessor = notificationAccessor;\n         this.notificationProcessor = notificationProcessor;\n         this.eventManager = eventManager;\n     }\n \n     @Override\n-    public void handleEvent(NotificationEvent event) {\n-        if (NotificationEvent.NOTIFICATION_EVENT_TYPE.equals(event.getDestination())) {\n-            if (null == event.getNotificationIds() || event.getNotificationIds().isEmpty()) {\n-                logger.warn(\"Can not process a notification event without notification Id's.\");\n-                return;\n-            }\n-            logger.debug(\"Event {}\", event);\n-            logger.info(\"Processing event for {} notifications.\", event.getNotificationIds().size());\n-            List<AlertNotificationModel> notifications = notificationAccessor.findByIds(event.getNotificationIds());\n+    public void handleEvent(NotificationReceivedEvent event) {\n+        if (!NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE.equals(event.getDestination())) {\n+            logger.warn(\"Received an event of type '{}', but this listener is for type '{}'.\", event.getDestination(), NotificationReceivedEvent.NOTIFICATION_RECEIVED_EVENT_TYPE);\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MDM4MTQ2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554038146", "createdAt": "2020-12-16T20:00:04Z", "commit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMDowMDowNVrOIHWy4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMDowMDowNVrOIHWy4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU4NDQxOQ==", "bodyText": "This method name confused me in another file, we should change the name as setProcessed implies a simple setter where as we are explicitly setting this to true. Something as simple as setProcessedToTrue() would be easier to understand when reading the method elsewhere.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r544584419", "createdAt": "2020-12-16T20:00:05Z", "author": {"login": "bamandel"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/notification/NotificationEntity.java", "diffHunk": "@@ -121,6 +125,14 @@ public OffsetDateTime getProviderCreationTime() {\n         return providerCreationTime;\n     }\n \n+    public boolean getProcessed() {\n+        return processed;\n+    }\n+\n+    public void setProcessed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MDcwNDky", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554070492", "createdAt": "2020-12-16T20:46:56Z", "commit": {"oid": "f2a0b6b6450f6182cf85dd15ed1612c8cd85ec38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e8bd059b8fa888257f35efef88654e20baa76e", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/37e8bd059b8fa888257f35efef88654e20baa76e", "committedDate": "2020-12-16T20:47:05Z", "message": "refactor: Rename setProcessed to setProcessedToTrue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692fc00bb039cf2ecfe9acfcbf76808dd7ae436f", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/692fc00bb039cf2ecfe9acfcbf76808dd7ae436f", "committedDate": "2020-12-16T20:59:30Z", "message": "refactor: Removing unnecessary event check from NotificationReceiver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MDg0Mjcx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554084271", "createdAt": "2020-12-16T21:06:48Z", "commit": {"oid": "692fc00bb039cf2ecfe9acfcbf76808dd7ae436f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0NTk0MTg2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554594186", "createdAt": "2020-12-17T13:18:39Z", "commit": {"oid": "692fc00bb039cf2ecfe9acfcbf76808dd7ae436f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxMzoxODozOVrOIH1OZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxMzoxODozOVrOIH1OZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA4Mjk4Mg==", "bodyText": "This wrapping is also a little funky.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#discussion_r545082982", "createdAt": "2020-12-17T13:18:39Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultNotificationAccessor.java", "diffHunk": "@@ -65,16 +64,14 @@\n     private final AuditEntryRepository auditEntryRepository;\n     private final AuditNotificationRepository auditNotificationRepository;\n     private final ConfigurationAccessor configurationAccessor;\n-    private final EventManager eventManager;\n \n     @Autowired\n     public DefaultNotificationAccessor(NotificationContentRepository notificationContentRepository, AuditEntryRepository auditEntryRepository, AuditNotificationRepository auditNotificationRepository,\n-        ConfigurationAccessor configurationAccessor, EventManager eventManager) {\n+        ConfigurationAccessor configurationAccessor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "692fc00bb039cf2ecfe9acfcbf76808dd7ae436f"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0NTk3MDQ0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1295#pullrequestreview-554597044", "createdAt": "2020-12-17T13:22:20Z", "commit": {"oid": "692fc00bb039cf2ecfe9acfcbf76808dd7ae436f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26ee444ed94b22b8f251e6080d5f049ac7241e1d", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/26ee444ed94b22b8f251e6080d5f049ac7241e1d", "committedDate": "2020-12-17T14:43:01Z", "message": "style: Wrapping fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7605b1fc12a4aa7d3a19ef6e3b23b924e86af764", "author": {"user": {"login": "ChomickiM", "name": "Martin"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7605b1fc12a4aa7d3a19ef6e3b23b924e86af764", "committedDate": "2020-12-17T14:54:09Z", "message": "Merge branch 'master' into mc_notification_reciever_improvements\n\n# Conflicts:\n#\tsrc/test/java/com/synopsys/integration/alert/component/audit/web/AuditEntryActionsTest.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2953, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}