{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMzk5MTg5", "number": 952, "title": "deployment fixes", "bodyText": "Create a new volume for the database container.\nRemove the alert specific user.\nCreate a separate service for the alert database in Kubernetes.\nFixes 5.3.0 to 6.0.0 upgrades in docker swarm.", "createdAt": "2020-04-14T20:31:37Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952", "merged": true, "mergeCommit": {"oid": "4095f0d4d815b723b9cc98982b2e6f31d64e5c85"}, "closed": true, "closedAt": "2020-04-16T20:54:46Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXOo6fAH2gAyNDAzMzk5MTg5OjQwMzZjMzBlNzhlNmY2NWVhMzM1Yjk4YWQwMjk1NzUyZTgyYmUyMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX5y8BAH2gAyNDAzMzk5MTg5OjQwZWVmMjIzZDkxYzJlMGJhNTE4ZjlhOTc3MTQ4ZTE5ZGRmM2ZkN2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4036c30e78e6f65ea335b98ad0295752e82be22c", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4036c30e78e6f65ea335b98ad0295752e82be22c", "committedDate": "2020-04-13T13:09:42Z", "message": "feat: Remove the user to run Alert in deployment files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4930c25412fdab3096b0eb7e6d52fd3e1a13dc2e", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4930c25412fdab3096b0eb7e6d52fd3e1a13dc2e", "committedDate": "2020-04-13T13:33:53Z", "message": "build: Update the version for testing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5a1867016d91f3dc79aa287195bad427545c23", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8e5a1867016d91f3dc79aa287195bad427545c23", "committedDate": "2020-04-13T14:17:17Z", "message": "feat: Create datbase directory in database container."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e453df79b6916f818a31c5c74680f8d57d31d4f1", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e453df79b6916f818a31c5c74680f8d57d31d4f1", "committedDate": "2020-04-13T17:40:21Z", "message": "refactor: Update the volume created by the container."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d10036857be65737b38a822bdb2e4b4be1d28bfb", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d10036857be65737b38a822bdb2e4b4be1d28bfb", "committedDate": "2020-04-13T18:21:50Z", "message": "refactor: Change permissions on volume directory."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31ee006fe4fca82c2cb932361611b10b90ad1353", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/31ee006fe4fca82c2cb932361611b10b90ad1353", "committedDate": "2020-04-13T19:39:25Z", "message": "refactor: Add a separate volume for the postgres db."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f65f2eaa64e696661d5fd654d363b527c8311640", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f65f2eaa64e696661d5fd654d363b527c8311640", "committedDate": "2020-04-14T20:10:12Z", "message": "feat: Fix kubernetes deployment to include alert DB."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d5dc01a65a90167f7d802d164d86e845c6334c60", "committedDate": "2020-04-14T20:30:37Z", "message": "Merge remote-tracking branch 'origin/master' into ps_deployment_fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzIwMDMy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#pullrequestreview-393720032", "createdAt": "2020-04-15T12:21:17Z", "commit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjoyMToxN1rOGF3HBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjoyMToxN1rOGF3HBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc5ODk4Mw==", "bodyText": "Let's make sure we upgrade our gradle dependencies as well.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#discussion_r408798983", "createdAt": "2020-04-15T12:21:17Z", "author": {"login": "gkillough"}, "path": "alert-database/Dockerfile", "diffHunk": "@@ -1,4 +1,4 @@\n-FROM postgres:11.6-alpine\n+FROM postgres:11.7-alpine", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzIyMjYz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#pullrequestreview-393722263", "createdAt": "2020-04-15T12:24:28Z", "commit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjoyNDoyOFrOGF3OIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjoyNDoyOFrOGF3OIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwMDgwMQ==", "bodyText": "Should we document and/or parameterize these since they are shared?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#discussion_r408800801", "createdAt": "2020-04-15T12:24:28Z", "author": {"login": "gkillough"}, "path": "deployment/kubernetes/hub/3-alertdb.yml", "diffHunk": "@@ -0,0 +1,68 @@\n+kind: List\n+apiVersion: v1\n+items:\n+  - apiVersion: apps/v1\n+    kind: Deployment\n+    metadata:\n+      name: alertdb\n+    spec:\n+      selector:\n+        matchLabels:\n+          app: alertdb\n+          tier: alertdb\n+      replicas: 1\n+      template:\n+        metadata:\n+          name: alertdb\n+          labels:\n+            app: alertdb\n+            tier: alertdb\n+        spec:\n+          volumes:\n+            # NOTE: replace the emptyDir volume with a persistent volume or all the data will be lost when the pod is destroyed.\n+            - emptyDir: {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzIzNjY3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#pullrequestreview-393723667", "createdAt": "2020-04-15T12:26:27Z", "commit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzODc4NzUw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#pullrequestreview-393878750", "createdAt": "2020-04-15T15:18:48Z", "commit": {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40eef223d91c2e0ba518f9a977148e19ddf3fd7a", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/40eef223d91c2e0ba518f9a977148e19ddf3fd7a", "committedDate": "2020-04-15T15:26:34Z", "message": "refactor: Implement PR changes."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2690, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}