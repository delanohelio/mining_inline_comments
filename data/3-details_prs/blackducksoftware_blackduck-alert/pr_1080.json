{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzM0MjM3", "number": 1080, "title": " helm hostname", "bodyText": "add the ability to configure the hostname for the  alert service.  Also made the port configurable.", "createdAt": "2020-07-23T14:08:33Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080", "merged": true, "mergeCommit": {"oid": "0ae6e7924b4d79c2c46dfb0cc96d430707d0a5a3"}, "closed": true, "closedAt": "2020-07-23T17:50:41Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyngmWAH2gAyNDU1NzM0MjM3OjFkODBlZGExZGZiYzdlMGEwYTE4YWY2ZDU4YmUwZGU0Y2ZjNTcxODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3y5blAFqTQ1NDM0OTM2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d80eda1dfbc7e0a0a18af6d58be0de4cfc57186", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1d80eda1dfbc7e0a0a18af6d58be0de4cfc57186", "committedDate": "2020-07-07T15:24:12Z", "message": "feat: Implment a variable for the alert hostname."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "committedDate": "2020-07-23T12:25:15Z", "message": "Merge remote-tracking branch 'origin/master' into ps_helm_hostname"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTgwNzkx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454180791", "createdAt": "2020-07-23T14:20:26Z", "commit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMDoyNlrOG2M0Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMDoyNlrOG2M0Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4NjI2Nw==", "bodyText": "I don't think we need to put \"-alert\"\nThis PR removed the \"-alert\" from other areas of the Chart: #941", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459486267", "createdAt": "2020-07-23T14:20:26Z", "author": {"login": "mphammer"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTgzMzE3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454183317", "createdAt": "2020-07-23T14:23:03Z", "commit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMzowM1rOG2M7wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMzowM1rOG2M7wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw==", "bodyText": "I don't think \"ALERT_SERVER_PORT\" needs to be configurable. But this is okay if you want it :)\nWhat do you think @msenmurugan ?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459488193", "createdAt": "2020-07-23T14:23:03Z", "author": {"login": "mphammer"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5553a88ec036bc00181c9b8d1f3babab3c3e454b", "committedDate": "2020-07-23T14:25:05Z", "message": "refactor: Remove the -alert from the default hostname value."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTg2MDQ1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454186045", "createdAt": "2020-07-23T14:25:50Z", "commit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjQyMjgw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454242280", "createdAt": "2020-07-23T15:18:39Z", "commit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MzE5NDc1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454319475", "createdAt": "2020-07-23T16:50:12Z", "commit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MDoxMlrOG2TGtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MDoxMlrOG2TGtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4OTMwMw==", "bodyText": "@psantos1113 can you pls remove if and else for ALERT_SERVER_PORT and set them to values.alert.port always? Since the default is 8443, we don't need if-else", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459589303", "createdAt": "2020-07-23T16:50:12Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}\n+  {{- else }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MzIwODQ3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454320847", "createdAt": "2020-07-23T16:52:01Z", "commit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MjowMlrOG2TLCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MjowMlrOG2TLCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5MDQxMQ==", "bodyText": "Since the default value is provided as localhost, it will always go to if condition. And also, if someone want to set a different hostname, then they can set them in the flag. So ideally, we can remove the if-else condition and always read it from .Values.alert.hostname", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459590411", "createdAt": "2020-07-23T16:52:02Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c7dd06f457ee4d64a76e6198b5fc35d8e30bfd5", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8c7dd06f457ee4d64a76e6198b5fc35d8e30bfd5", "committedDate": "2020-07-23T17:24:34Z", "message": "refactor: Remove the if/else statments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MzQ5MzYz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#pullrequestreview-454349363", "createdAt": "2020-07-23T17:29:54Z", "commit": {"oid": "8c7dd06f457ee4d64a76e6198b5fc35d8e30bfd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2610, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}