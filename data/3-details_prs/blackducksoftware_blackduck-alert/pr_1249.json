{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MDE0Mjc3", "number": 1249, "title": "Remove default value handling from DefaultNotificationAccessor", "bodyText": "Remove default value handling from DefaultNotificationAccessor\nLink to github issue (if applicable):\nFixes IALERT-2008\nIf nothing above, what is your reason for this pull request:\nIn the method DefaultNotificationAccessor::getPageRequestForNotifications the paging parameters are @Nullable, this should not be the case and default value handling should happen at a higher level.\nChanges proposed in this pull request:\n\nMove default value handling higher into the API\nChange default page size from Integer.MAX_VALUE to 10. Uses the constant defined in AuditEntryPageModel.", "createdAt": "2020-11-09T20:15:55Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249", "merged": true, "mergeCommit": {"oid": "be9e68965b30f24af31fbf4433a864432afbea00"}, "closed": true, "closedAt": "2020-11-11T16:33:57Z", "author": {"login": "JakeMathews"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda6gJCAH2gAyNTE4MDE0Mjc3Ojk0ZTExYmM3NDc1YmRlMzFmMzY0N2RhZmFkMGY1ZTQyZDYxNTRhMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbPsGSAH2gAyNTE4MDE0Mjc3OjIzZGM3MTI5MzBiMjY0ZDI1MTA3ZGFkNWRjMTdmM2MzNDZlNWM2MWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94e11bc7475bde31f3647dafad0f5e42d6154a20", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/94e11bc7475bde31f3647dafad0f5e42d6154a20", "committedDate": "2020-11-09T20:08:52Z", "message": "refactor(notifications): DefaultNotificationAccessor::getPageRequestForNotifications no longer accepts Nullable page number or page size."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c57b997ad49a87d12e5e1ce4b1f472fe844f1903", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c57b997ad49a87d12e5e1ce4b1f472fe844f1903", "committedDate": "2020-11-09T20:09:25Z", "message": "feat(notifications): Default page size is now 100 instead of Integer.MaxValue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4", "committedDate": "2020-11-09T20:15:14Z", "message": "refactor: Moved page and size checking below permissions check."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjI2NjI3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-526626627", "createdAt": "2020-11-09T20:26:16Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDoyNjoxNlrOHwATug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDoyNjoxNlrOHwATug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA5ODc0Ng==", "bodyText": "I think the class that AuditEntryPageModel extends might have constants that could be used for the default values.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#discussion_r520098746", "createdAt": "2020-11-09T20:26:16Z", "author": {"login": "gkillough"}, "path": "component/src/main/java/com/synopsys/integration/alert/component/audit/web/AuditEntryActions.java", "diffHunk": "@@ -91,7 +92,9 @@ public AuditEntryActions(\n         if (!authorizationManager.hasReadPermission(ConfigContextEnum.GLOBAL, descriptorKey)) {\n             return new ActionResponse<>(HttpStatus.FORBIDDEN, ActionResponse.FORBIDDEN_MESSAGE);\n         }\n-        AuditEntryPageModel pagedRestModel = auditAccessor.getPageOfAuditEntries(pageNumber, pageSize, searchTerm, sortField, sortOrder, onlyShowSentNotifications, auditAccessor::convertToAuditEntryModelFromNotification);\n+        Integer page = ObjectUtils.defaultIfNull(pageNumber, 0);\n+        Integer size = ObjectUtils.defaultIfNull(pageSize, 100);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjI2Njg2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-526626686", "createdAt": "2020-11-09T20:26:23Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjMwNzQ5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-526630749", "createdAt": "2020-11-09T20:32:12Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzA1NzM1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-526705735", "createdAt": "2020-11-09T22:27:19Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzM1MTM2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-526735136", "createdAt": "2020-11-09T23:25:13Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MTA5MTM4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-527109138", "createdAt": "2020-11-10T11:29:16Z", "commit": {"oid": "c6cf2b5dcc4bb3bf1332ae7aab7db107eeb3cab4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06cd0adbbcb212d2ab042abd30593a4e08084d52", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/06cd0adbbcb212d2ab042abd30593a4e08084d52", "committedDate": "2020-11-10T17:27:03Z", "message": "Merge branch 'master' into jm-paged-notifications"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3893436e71b2defe054fd8b66b28fa014a5b170d", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/3893436e71b2defe054fd8b66b28fa014a5b170d", "committedDate": "2020-11-10T19:05:14Z", "message": "feat(paging): Changed default page size to use the constants in AlertPagedModel."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc0f34de45229396f61de6604086cd9f7ec5dfe5", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/dc0f34de45229396f61de6604086cd9f7ec5dfe5", "committedDate": "2020-11-10T19:05:26Z", "message": "Merge branch 'master' into jm-paged-notifications"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTQ5MjEw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#pullrequestreview-527549210", "createdAt": "2020-11-10T19:43:34Z", "commit": {"oid": "dc0f34de45229396f61de6604086cd9f7ec5dfe5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0MzozNFrOHws41g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0MzozNFrOHws41g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgyOTE0Mg==", "bodyText": "Spring requires a String constant in ReadPageController. We want to use the same defaults, but as an Integer. Should we convert the String to an Integer at runtime? Do what I've done here? Something else?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1249#discussion_r520829142", "createdAt": "2020-11-10T19:43:34Z", "author": {"login": "JakeMathews"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/rest/model/AlertPagedModel.java", "diffHunk": "@@ -27,8 +27,10 @@\n import net.minidev.json.annotate.JsonIgnore;\n \n public class AlertPagedModel<M extends AlertSerializableModel> extends AlertSerializableModel {\n-    public static final String DEFAULT_PAGE_NUMBER = \"0\";\n-    public static final String DEFAULT_PAGE_SIZE = \"10\";\n+    public static final Integer DEFAULT_PAGE_NUMBER = 0;\n+    public static final Integer DEFAULT_PAGE_SIZE = 10;\n+    public static final String DEFAULT_PAGE_NUMBER_STRING = \"0\";\n+    public static final String DEFAULT_PAGE_SIZE_STRING = \"10\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc0f34de45229396f61de6604086cd9f7ec5dfe5"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2ba5dbb53d93a4b77930bab95052ebf46cb16da", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b2ba5dbb53d93a4b77930bab95052ebf46cb16da", "committedDate": "2020-11-10T20:35:37Z", "message": "refactor(paging): Separated paging constants."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffbdc6c15ad6e0baf829c9ff701ff7709befe46a", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ffbdc6c15ad6e0baf829c9ff701ff7709befe46a", "committedDate": "2020-11-10T20:49:43Z", "message": "refactor(paging): Based Integer constant off of String."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23dc712930b264d25107dad5dc17f3c346e5c61b", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/23dc712930b264d25107dad5dc17f3c346e5c61b", "committedDate": "2020-11-10T20:49:56Z", "message": "Merge branch 'master' into jm-paged-notifications"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2888, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}