{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDM3Njkx", "number": 852, "title": "refactor: Convert custom endpoints to use FieldModel.", "bodyText": "Change to create the BlackduckProperties in custom endpoints via FieldModel", "createdAt": "2020-02-12T17:36:21Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/852", "merged": true, "mergeCommit": {"oid": "a5afc88ba1d3bf757e8dc6ee0ef1fc66a4d6fedb"}, "closed": true, "closedAt": "2020-02-12T19:03:32Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDpxPmgH2gAyMzc0NDM3NjkxOjBlMmY3OWIyNjA2NWJhYmJkMDE2YmYzMjNmNzBmMTUwNzcwNTcwYWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDrH2kgH2gAyMzc0NDM3NjkxOmU2MzUwOTMwNjgzYTI3YjczOWUzZmQ4OTU3ZTlmNjVjYTE3NGI0YmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e2f79b26065babbd016bf323f70f150770570ac", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0e2f79b26065babbd016bf323f70f150770570ac", "committedDate": "2020-02-12T17:27:45Z", "message": "refactor: Convert custom endpoints to use FieldModel."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NjU5NDMz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/852#pullrequestreview-357659433", "createdAt": "2020-02-12T17:48:18Z", "commit": {"oid": "0e2f79b26065babbd016bf323f70f150770570ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3Njc3NTI1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/852#pullrequestreview-357677525", "createdAt": "2020-02-12T18:16:10Z", "commit": {"oid": "0e2f79b26065babbd016bf323f70f150770570ac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoxNjoxMFrOFo5VdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoxNjoxMFrOFo5VdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQyNjc0MA==", "bodyText": "Username and password are reversed here.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/852#discussion_r378426740", "createdAt": "2020-02-12T18:16:10Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/channel/jira/server/web/JiraServerCustomEndpoint.java", "diffHunk": "@@ -100,19 +100,16 @@ public JiraServerCustomEndpoint(JiraServerChannelKey jiraChannelKey, CustomEndpo\n     }\n \n     @Override\n-    protected String createData(Map<String, FieldValueModel> fieldValueModels) throws AlertException {\n+    protected String createData(FieldModel fieldModel) throws AlertException {\n         return \"Successfully created Alert plugin on Jira server.\";\n     }\n \n-    private JiraServerProperties createJiraProperties(Map<String, FieldValueModel> fieldValueModels) {\n-        FieldValueModel fieldUrl = fieldValueModels.get(JiraServerDescriptor.KEY_SERVER_URL);\n-        FieldValueModel fieldPassword = fieldValueModels.get(JiraServerDescriptor.KEY_SERVER_PASSWORD);\n-        FieldValueModel fieldUsername = fieldValueModels.get(JiraServerDescriptor.KEY_SERVER_USERNAME);\n-\n-        // for jira server the url should be\n-        String url = fieldUrl.getValue().orElse(\"\");\n-        String username = fieldUsername.getValue().orElse(\"\");\n-        String password = getAppropriateAccessToken(fieldPassword);\n+    private JiraServerProperties createJiraProperties(FieldModel fieldModel) {\n+        String url = fieldModel.getFieldValue(JiraServerDescriptor.KEY_SERVER_URL).orElse(\"\");\n+        String username = fieldModel.getFieldValue(JiraServerDescriptor.KEY_SERVER_PASSWORD).orElse(\"\");\n+        String password = fieldModel.getFieldValueModel(JiraServerDescriptor.KEY_SERVER_USERNAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e2f79b26065babbd016bf323f70f150770570ac"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26c051fafe3f1515deafaa4d5c84eea74c237cf1", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/26c051fafe3f1515deafaa4d5c84eea74c237cf1", "committedDate": "2020-02-12T18:32:11Z", "message": "fix(jira): Fix the key used to get the username and password."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3Njk0NjE3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/852#pullrequestreview-357694617", "createdAt": "2020-02-12T18:41:54Z", "commit": {"oid": "0e2f79b26065babbd016bf323f70f150770570ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6979222483fb174eb45af8bfca925248e6c91729", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/6979222483fb174eb45af8bfca925248e6c91729", "committedDate": "2020-02-12T18:44:50Z", "message": "Merge remote-tracking branch 'origin/feat_provider_lifecycle_management' into ps_field_model_conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6350930683a27b739e3fd8957e9f65ca174b4ba", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e6350930683a27b739e3fd8957e9f65ca174b4ba", "committedDate": "2020-02-12T19:02:21Z", "message": "test: fix the compile error with the test."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2808, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}