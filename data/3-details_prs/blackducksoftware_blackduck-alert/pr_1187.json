{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNDYzMDIy", "number": 1187, "title": "home controller", "bodyText": "Convert the HomeController to use an action class and process ActionResponse objects", "createdAt": "2020-09-24T13:50:48Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187", "merged": true, "mergeCommit": {"oid": "85f7e6cb027292645353833553eb78bd8e2f42ad"}, "closed": true, "closedAt": "2020-09-24T15:38:29Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMBPQrAH2gAyNDkyNDYzMDIyOjEyMzNmMGViMDk0NDAxZGZkZGRjZDI1ZWZkZTBkNmFmZmY0NTIwY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMDDUaAH2gAyNDkyNDYzMDIyOjAzOTQwODU1NDgyODcxYjAzY2Y0MDllNjI4MjNmM2MyOTY3NGNiMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1233f0eb094401dfdddcd25efde0d6afff4520cb", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1233f0eb094401dfdddcd25efde0d6afff4520cb", "committedDate": "2020-09-24T13:30:54Z", "message": "refactor: Create an actions class for the home controller."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b24ebb0cc019aca47e8a6484b685fefd5e8b5081", "committedDate": "2020-09-24T13:44:28Z", "message": "test: Add missing tests to increase code coverage."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjQ1OTA4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#pullrequestreview-495645908", "createdAt": "2020-09-24T14:40:01Z", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjcxNzA4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#pullrequestreview-495671708", "createdAt": "2020-09-24T15:05:04Z", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTowNTowNFrOHXfa2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNTowNTowNFrOHXfa2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5NDA3NA==", "bodyText": "Small thing, but a multiline comment would probably be better here.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#discussion_r494394074", "createdAt": "2020-09-24T15:05:04Z", "author": {"login": "bamandel"}, "path": "src/main/java/com/synopsys/integration/alert/web/api/home/HomeController.java", "diffHunk": "@@ -28,58 +28,39 @@\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.http.MediaType;\n-import org.springframework.security.core.Authentication;\n-import org.springframework.security.core.GrantedAuthority;\n-import org.springframework.security.core.context.SecurityContextHolder;\n-import org.springframework.security.web.csrf.CsrfToken;\n-import org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository;\n import org.springframework.stereotype.Controller;\n import org.springframework.web.bind.annotation.GetMapping;\n import org.springframework.web.bind.annotation.ResponseBody;\n import org.springframework.web.bind.annotation.ResponseStatus;\n \n import com.synopsys.integration.alert.common.rest.ResponseFactory;\n-import com.synopsys.integration.alert.web.security.authentication.saml.SAMLContext;\n \n @Controller\n public class HomeController {\n-    private static final String ROLE_ANONYMOUS = \"ROLE_ANONYMOUS\";\n-    private final HttpSessionCsrfTokenRepository csrfTokenRespository;\n-    private final SAMLContext samlContext;\n+    private final HomeActions actions;\n \n     @Autowired\n-    public HomeController(HttpSessionCsrfTokenRepository csrfTokenRepository, SAMLContext samlContext) {\n-        this.csrfTokenRespository = csrfTokenRepository;\n-        this.samlContext = samlContext;\n+    public HomeController(HomeActions actions) {\n+        this.actions = actions;\n     }\n \n     @GetMapping(value = { \"/\", \"/error\", \"/channels/**\", \"/providers/**\", \"/general/**\" }, produces = MediaType.TEXT_HTML_VALUE)\n     public String index() {\n+        // This is using Thymeleaf templating therefore we cannot return just a string from an ActionResponse otherwise the templating will not be\n+        // setup correctly and Alert will return a 404 on the main page because index.html will not be served up by this method.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1Njc2OTMy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#pullrequestreview-495676932", "createdAt": "2020-09-24T15:10:18Z", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1Njk2OTM0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#pullrequestreview-495696934", "createdAt": "2020-09-24T15:30:45Z", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1Njk5Nzg3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#pullrequestreview-495699787", "createdAt": "2020-09-24T15:33:40Z", "commit": {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03940855482871b03cf409e62823f3c29674cb31", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/03940855482871b03cf409e62823f3c29674cb31", "committedDate": "2020-09-24T15:37:40Z", "message": "chore: Update to a multi-line comment."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3513, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}