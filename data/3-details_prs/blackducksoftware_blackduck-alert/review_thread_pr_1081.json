{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1ODU0MTE1", "number": 1081, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo1ODowMFrOERk4fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToyOToyOFrOERlhcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODY1NTMyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/AzureBoardsChannel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo1ODowMFrOG2XkxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxMToyNlrOG2X_-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2MjUzMw==", "bodyText": "should azureProjectName be here twice? Are projectName and projectKey the same?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459662533", "createdAt": "2020-07-23T18:58:00Z", "author": {"login": "ChomickiM"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/AzureBoardsChannel.java", "diffHunk": "@@ -74,8 +79,22 @@ public IssueTrackerResponse sendRequests(IssueTrackerContext context, List<Issue\n     }\n \n     private IssueConfig createIssueConfig(FieldAccessor fieldAccessor) {\n-        // FIXME implement\n-        return null;\n+        String azureProjectName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_AZURE_PROJECT);\n+        String workItemCreatorEmail = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_CREATOR_EMAIL);\n+        String workItemTypeName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_TYPE);\n+        boolean commentOnWorkItems = fieldAccessor.getBooleanOrFalse(AzureBoardsDescriptor.KEY_WORK_ITEM_COMMENT);\n+        String completedStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_COMPLETED_STATE);\n+        String reopenStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_REOPEN_STATE);\n+        return new IssueConfig(\n+            azureProjectName,\n+            azureProjectName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2OTQ5Ng==", "bodyText": "The intention of this class was not clear. The three fields are:\n\nprojectKey\nprojectName\nprojectId\n\nThere is no distinction between projectKey and projectName in Azure. There is a projectId (UUID type), but it would have to be requested through the API.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459669496", "createdAt": "2020-07-23T19:11:26Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/AzureBoardsChannel.java", "diffHunk": "@@ -74,8 +79,22 @@ public IssueTrackerResponse sendRequests(IssueTrackerContext context, List<Issue\n     }\n \n     private IssueConfig createIssueConfig(FieldAccessor fieldAccessor) {\n-        // FIXME implement\n-        return null;\n+        String azureProjectName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_AZURE_PROJECT);\n+        String workItemCreatorEmail = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_CREATOR_EMAIL);\n+        String workItemTypeName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_TYPE);\n+        boolean commentOnWorkItems = fieldAccessor.getBooleanOrFalse(AzureBoardsDescriptor.KEY_WORK_ITEM_COMMENT);\n+        String completedStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_COMPLETED_STATE);\n+        String reopenStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_REOPEN_STATE);\n+        return new IssueConfig(\n+            azureProjectName,\n+            azureProjectName,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2MjUzMw=="}, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODcxODUyOnYy", "diffSide": "RIGHT", "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxNzowNVrOG2YLlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxNzowNVrOG2YLlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MjQ3MA==", "bodyText": "We could add another variable with the Authorization and Token URL hostnames, cut down on duplication.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459672470", "createdAt": "2020-07-23T19:17:05Z", "author": {"login": "bamandel"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODcyMjEzOnYy", "diffSide": "RIGHT", "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxODoxMVrOG2YN7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToyMjozN1rOG2YXig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ==", "bodyText": "Are these URLs always going to be the same?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459673071", "createdAt": "2020-07-23T19:18:11Z", "author": {"login": "psantos1113"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3NTM0NQ==", "bodyText": "These are the two URLs will never change for OAuth?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459675345", "createdAt": "2020-07-23T19:22:18Z", "author": {"login": "psantos1113"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ=="}, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3NTUzMA==", "bodyText": "As far as I can tell, yes. The base url might be different if they aren't hosted, but it's unclear how OAuth works in that case.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459675530", "createdAt": "2020-07-23T19:22:37Z", "author": {"login": "gkillough"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ=="}, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODc2MDE4OnYy", "diffSide": "LEFT", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToyOToyOFrOG2Ylfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo0Mzo0OVrOG2ZBmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3OTEwMw==", "bodyText": "If we're doing OAuth, shouldn't Consumer and private keys always be needed in the handshake?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459679103", "createdAt": "2020-07-23T19:29:28Z", "author": {"login": "bamandel"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -39,20 +37,15 @@\n public class AzureBoardsGlobalUIConfig extends UIConfig {\n     public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n     public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n-    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n-    public static final String LABEL_PRIVATE_KEY = \"Private Key\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY4NjI5OQ==", "bodyText": "Not for OAuth 2.0.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459686299", "createdAt": "2020-07-23T19:43:49Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -39,20 +37,15 @@\n public class AzureBoardsGlobalUIConfig extends UIConfig {\n     public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n     public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n-    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n-    public static final String LABEL_PRIVATE_KEY = \"Private Key\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3OTEwMw=="}, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1902, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}