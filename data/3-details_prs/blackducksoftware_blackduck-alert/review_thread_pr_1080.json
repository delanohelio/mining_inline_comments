{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzM0MjM3", "number": 1080, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMDoyNlrOEReM1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MjowMlrOERiJBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NzU2MDUzOnYy", "diffSide": "RIGHT", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMDoyNlrOG2M0Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMDoyNlrOG2M0Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4NjI2Nw==", "bodyText": "I don't think we need to put \"-alert\"\nThis PR removed the \"-alert\" from other areas of the Chart: #941", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459486267", "createdAt": "2020-07-23T14:20:26Z", "author": {"login": "mphammer"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NzU3MjExOnYy", "diffSide": "RIGHT", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoyMzowM1rOG2M7wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNTowNTo1NFrOG2O46g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw==", "bodyText": "I don't think \"ALERT_SERVER_PORT\" needs to be configurable. But this is okay if you want it :)\nWhat do you think @msenmurugan ?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459488193", "createdAt": "2020-07-23T14:23:03Z", "author": {"login": "mphammer"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5MDYzMQ==", "bodyText": "I have removed '-alert' from the hostname.  If it should be added back then I can add it back.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459490631", "createdAt": "2020-07-23T14:26:24Z", "author": {"login": "psantos1113"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5Nzg5OA==", "bodyText": "Will that impact existing customers using the helm charts? Would changing the host name impact the volumes or any of the data?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459497898", "createdAt": "2020-07-23T14:36:08Z", "author": {"login": "jamesrichard91"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUyMDIzNA==", "bodyText": "the original host name was always localhost and that is the default so this should not affect existing customers.  The -alert was a way to provide a different default host name unique to alert if the hostname was missing from values.yml", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459520234", "createdAt": "2020-07-23T15:05:54Z", "author": {"login": "psantos1113"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}, "originalCommit": {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODE5OTAxOnYy", "diffSide": "RIGHT", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MDoxMlrOG2TGtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MDoxMlrOG2TGtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4OTMwMw==", "bodyText": "@psantos1113 can you pls remove if and else for ALERT_SERVER_PORT and set them to values.alert.port always? Since the default is 8443, we don't need if-else", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459589303", "createdAt": "2020-07-23T16:50:12Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}\n+  {{- else }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODIwNjE0OnYy", "diffSide": "RIGHT", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MjowMlrOG2TLCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1MjowMlrOG2TLCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5MDQxMQ==", "bodyText": "Since the default value is provided as localhost, it will always go to if condition. And also, if someone want to set a different hostname, then they can set them in the flag. So ideally, we can remove the if-else condition and always read it from .Values.alert.hostname", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459590411", "createdAt": "2020-07-23T16:52:02Z", "author": {"login": "msenmurugan"}, "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1900, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}