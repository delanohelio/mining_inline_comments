{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDEzNzcz", "number": 977, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo1OTozMVrOD8fdlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozMjo0NVrOD8gZjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzU2NjMxOnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/BaseEntity.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo1OTozMVrOGVdpyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDowMTo1MFrOGVdwog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1OTExMg==", "bodyText": "If I recall correctly, we don't want to declare this because we are not maintaining multiple versions of the same java objects. You should be able to turn off the warning and generation of this from your Intellij settings.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425159112", "createdAt": "2020-05-14T13:59:31Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/BaseEntity.java", "diffHunk": "@@ -30,6 +30,9 @@\n \n @MappedSuperclass\n public abstract class BaseEntity extends Stringable implements Serializable {\n+    public static final int DEFAULT_ALLOCATION_SIZE = 50;\n+    private static final long serialVersionUID = 5939107067779376362L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE2MDg2Ng==", "bodyText": "I will disable it and fix the files I changed that added it.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425160866", "createdAt": "2020-05-14T14:01:50Z", "author": {"login": "psantos1113"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/BaseEntity.java", "diffHunk": "@@ -30,6 +30,9 @@\n \n @MappedSuperclass\n public abstract class BaseEntity extends Stringable implements Serializable {\n+    public static final int DEFAULT_ALLOCATION_SIZE = 50;\n+    private static final long serialVersionUID = 5939107067779376362L;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1OTExMg=="}, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzU4ODA2OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/audit/AuditEntryEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDowNDoyOVrOGVd4Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDowNDoyOVrOGVd4Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE2Mjc2Nw==", "bodyText": "I think the generator and sequence name should be different to minimize confusion because the generator represents a Hibernate object and the sequence represents a Postgres object. Adding a suffix should suffice.\nExample:\n@GeneratedValue(generator = \"alert.audit_entries_id_seq_generator\", ...)\n@SequenceGenerator(name = \"alert.audit_entries_id_seq_generator\", sequenceName = \"alert.audit_entries_id_seq\", ...)", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425162767", "createdAt": "2020-05-14T14:04:29Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/audit/AuditEntryEntity.java", "diffHunk": "@@ -28,21 +28,31 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n import javax.persistence.Lob;\n import javax.persistence.OneToMany;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n import javax.persistence.Temporal;\n import javax.persistence.TemporalType;\n \n import org.hibernate.annotations.Type;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"audit_entries\")\n-public class AuditEntryEntity extends DatabaseEntity {\n+public class AuditEntryEntity extends BaseEntity implements DatabaseEntity {\n     public static final int STACK_TRACE_CHAR_LIMIT = 10000;\n-\n+    private static final long serialVersionUID = 33941320371984275L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.audit_entries_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.audit_entries_id_seq\", sequenceName = \"alert.audit_entries_id_seq\", allocationSize = BaseEntity.DEFAULT_ALLOCATION_SIZE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzU5NDE0OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/certificates/CustomCertificateEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDowNTo1MFrOGVd71g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDowNTo1MFrOGVd71g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE2MzczNA==", "bodyText": "Another sequence generator.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425163734", "createdAt": "2020-05-14T14:05:50Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/certificates/CustomCertificateEntity.java", "diffHunk": "@@ -26,14 +26,24 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"custom_certificates\")\n-public class CustomCertificateEntity extends DatabaseEntity {\n+public class CustomCertificateEntity extends BaseEntity implements DatabaseEntity {\n     private static final long serialVersionUID = -4913195698406375327L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.custom_certificates_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.custom_certificates_id_seq\", sequenceName = \"alert.custom_certificates_id_seq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzYzODYyOnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/configuration/FieldValueEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNTozN1rOGVeYmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNTozN1rOGVeYmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MTA5Ng==", "bodyText": "Another sequence generator.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425171096", "createdAt": "2020-05-14T14:15:37Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/configuration/FieldValueEntity.java", "diffHunk": "@@ -24,28 +24,39 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n import javax.persistence.JoinColumn;\n import javax.persistence.ManyToOne;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n-@Table(schema = \"ALERT\", name = \"FIELD_VALUES\")\n-public class FieldValueEntity extends DatabaseEntity {\n-    @Column(name = \"CONFIG_ID\")\n+@Table(schema = \"alert\", name = \"field_values\")\n+public class FieldValueEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = -7397653009915302223L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.field_values_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.field_values_id_seq\", sequenceName = \"alert.field_values_id_seq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY0MTk4OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/notification/NotificationEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNjoyMlrOGVeatg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNjoyMlrOGVeatg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MTYzOA==", "bodyText": "Another sequence generator.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425171638", "createdAt": "2020-05-14T14:16:22Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/notification/NotificationEntity.java", "diffHunk": "@@ -28,17 +28,28 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n import javax.persistence.OneToMany;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n import javax.persistence.Temporal;\n import javax.persistence.TemporalType;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n import com.synopsys.integration.alert.database.audit.AuditNotificationRelation;\n \n @Entity\n @Table(schema = \"alert\", name = \"raw_notification_content\")\n-public class NotificationEntity extends DatabaseEntity {\n+public class NotificationEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = -3311174366504578531L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.raw_notification_content_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.raw_notification_content_id_seq\", sequenceName = \"alert.raw_notification_content_id_seq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY0NTMxOnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/provider/project/ProviderProjectEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNzowNlrOGVec9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNzowNlrOGVec9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MjIxNA==", "bodyText": "Another sequence.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425172214", "createdAt": "2020-05-14T14:17:06Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/provider/project/ProviderProjectEntity.java", "diffHunk": "@@ -24,13 +24,24 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"provider_projects\")\n-public class ProviderProjectEntity extends DatabaseEntity {\n+public class ProviderProjectEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = -4531479306446899960L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.provider_projects_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.provider_projects_id_seq\", sequenceName = \"alert.provider_projects_id_seq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY0NjczOnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/provider/user/ProviderUserEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNzoyN1rOGVed9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxNzoyN1rOGVed9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MjQ2OA==", "bodyText": "Another sequence.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425172468", "createdAt": "2020-05-14T14:17:27Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/provider/user/ProviderUserEntity.java", "diffHunk": "@@ -24,13 +24,24 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"provider_users\")\n-public class ProviderUserEntity extends DatabaseEntity {\n+public class ProviderUserEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = 8474532281909078883L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.provider_users_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.provider_users_id_seq\", sequenceName = \"alert.provider_users_id_seq\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY1NTg5OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/settings/SettingsKeyEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxOToyM1rOGVejyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoxOToyM1rOGVejyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3Mzk2MQ==", "bodyText": "Do we perform bulk inserts on this table? We might be able to get away with IDENTITY here.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425173961", "createdAt": "2020-05-14T14:19:23Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/settings/SettingsKeyEntity.java", "diffHunk": "@@ -24,17 +24,28 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"settings_key\")\n-public class SettingsKeyEntity extends DatabaseEntity {\n-    @Column\n+public class SettingsKeyEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = 7078325297864692468L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.settings_key_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.settings_key_id_seq\", sequenceName = \"alert.settings_key_id_seq\")\n+    @Column(name = \"id\")\n+    private Long id;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY5MDg1OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/user/UserEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoyNjo0NFrOGVe6Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoyNjo0NFrOGVe6Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3OTcyMw==", "bodyText": "Do we perform bulk inserts here? I would assume we do for provider_users, but I'm surprised about this one.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425179723", "createdAt": "2020-05-14T14:26:44Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/user/UserEntity.java", "diffHunk": "@@ -24,13 +24,24 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"users\")\n-public class UserEntity extends DatabaseEntity {\n+public class UserEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = -5139140762636521918L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.users_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.users_id_seq\", sequenceName = \"alert.users_id_seq\")\n+    @Column(name = \"id\")\n+    private Long id;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzY5ODM4OnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/user/RoleEntity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoyODoyN1rOGVe_QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoyODoyN1rOGVe_QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4MDk5Mg==", "bodyText": "This is another table that I'm surprised we perform bulk inserts on.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425180992", "createdAt": "2020-05-14T14:28:27Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/user/RoleEntity.java", "diffHunk": "@@ -24,13 +24,24 @@\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.SequenceGenerator;\n import javax.persistence.Table;\n \n+import com.synopsys.integration.alert.database.BaseEntity;\n import com.synopsys.integration.alert.database.DatabaseEntity;\n \n @Entity\n @Table(schema = \"alert\", name = \"roles\")\n-public class RoleEntity extends DatabaseEntity {\n+public class RoleEntity extends BaseEntity implements DatabaseEntity {\n+    private static final long serialVersionUID = 7928926209935268556L;\n+    @Id\n+    @GeneratedValue(generator = \"alert.roles_id_seq\", strategy = GenerationType.SEQUENCE)\n+    @SequenceGenerator(name = \"alert.roles_id_seq\", sequenceName = \"alert.roles_id_seq\")\n+    @Column(name = \"id\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzcwNzEwOnYy", "diffSide": "RIGHT", "path": "alert-database/src/main/resources/scripts/init_alert_db.sql", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozMDoxN1rOGVfE2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozMDoxN1rOGVfE2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4MjQyNg==", "bodyText": "Nice. I'm glad you recognized the need for this. It took me forever to figure out how to synchronize with hibernate's generation strategy.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425182426", "createdAt": "2020-05-14T14:30:17Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/resources/scripts/init_alert_db.sql", "diffHunk": "@@ -313,3 +313,16 @@ create table if not exists PUBLIC.DATABASECHANGELOG\n     LABELS        VARCHAR(255),\n     DEPLOYMENT_ID VARCHAR(10)\n );\n+\n+-- In order for the sequences to match up correctly in hibernate with postgres set the increment to hibernates default allocation size of 50.\n+ALTER SEQUENCE alert.audit_entries_id_seq INCREMENT 50;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NzcxOTgwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/audit/controller/AuditEntryControllerTestIT.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozMjo0NVrOGVfMuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNTozNzoxMlrOGViL-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4NDQ0Mw==", "bodyText": "I wonder if there's a way to just get the transaction manager or persistence manager and flush at the top level.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425184443", "createdAt": "2020-05-14T14:32:45Z", "author": {"login": "gkillough"}, "path": "src/test/java/com/synopsys/integration/alert/audit/controller/AuditEntryControllerTestIT.java", "diffHunk": "@@ -94,6 +94,12 @@ public void setup() throws AlertDatabaseConstraintException {\n \n     @AfterEach\n     public void cleanup() throws AlertDatabaseConstraintException {\n+        auditEntryRepository.flush();\n+        descriptorConfigRepository.flush();\n+        fieldValueRepository.flush();\n+        auditNotificationRepository.flush();\n+        notificationRepository.flush();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTIxMzY0Mw==", "bodyText": "I think there is a different way to define and setup testcontainers with the tests that need a database to provide a clean instance with each test.  I would like to revisit this because I think we can do better.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425213643", "createdAt": "2020-05-14T15:11:16Z", "author": {"login": "psantos1113"}, "path": "src/test/java/com/synopsys/integration/alert/audit/controller/AuditEntryControllerTestIT.java", "diffHunk": "@@ -94,6 +94,12 @@ public void setup() throws AlertDatabaseConstraintException {\n \n     @AfterEach\n     public void cleanup() throws AlertDatabaseConstraintException {\n+        auditEntryRepository.flush();\n+        descriptorConfigRepository.flush();\n+        fieldValueRepository.flush();\n+        auditNotificationRepository.flush();\n+        notificationRepository.flush();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4NDQ0Mw=="}, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTIzMzQwMw==", "bodyText": "There is, but the performance hit is extremely costly. We do it in jira-service integration tests and it adds significant overhead.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/977#discussion_r425233403", "createdAt": "2020-05-14T15:37:12Z", "author": {"login": "gkillough"}, "path": "src/test/java/com/synopsys/integration/alert/audit/controller/AuditEntryControllerTestIT.java", "diffHunk": "@@ -94,6 +94,12 @@ public void setup() throws AlertDatabaseConstraintException {\n \n     @AfterEach\n     public void cleanup() throws AlertDatabaseConstraintException {\n+        auditEntryRepository.flush();\n+        descriptorConfigRepository.flush();\n+        fieldValueRepository.flush();\n+        auditNotificationRepository.flush();\n+        notificationRepository.flush();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4NDQ0Mw=="}, "originalCommit": {"oid": "4c1cbad3336f6a30cd91e8327b207395e49e9568"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2012, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}