{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1ODU0MTE1", "number": 1081, "title": "Azure Boards Context", "bodyText": "", "createdAt": "2020-07-23T17:26:49Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081", "merged": true, "mergeCommit": {"oid": "2681c87d37976265ade01129041710f373600108"}, "closed": true, "closedAt": "2020-07-24T12:25:39Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3wNAbAH2gAyNDU1ODU0MTE1OmM3ZTJiMTUzNjYyODA1ZTdjYWY1NDA5OGYyNTAyOWM1NTkxNTMzN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4DIgjgH2gAyNDU1ODU0MTE1OjI5NWY2MzBlYTMxODRjNDM4YmIyNzY3Yzc5YWQ3MjNiMjNmZjNhMWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7e2b153662805e7caf54098f25029c55915337b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c7e2b153662805e7caf54098f25029c55915337b", "committedDate": "2020-07-23T14:21:34Z", "message": "Feat(Azure Channel): Begin implementing azure context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15661316c1106606e4509f2f54c3e700af0ce119", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/15661316c1106606e4509f2f54c3e700af0ce119", "committedDate": "2020-07-23T17:16:32Z", "message": "Feat(Azure Boards Channel): Implement OAuth DataStore and add required fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aefb1a75979a7b70d0be2363b268ecae954485ba", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/aefb1a75979a7b70d0be2363b268ecae954485ba", "committedDate": "2020-07-23T17:25:51Z", "message": "Fix(Azure Boards Channel): Update required fields for AzureBoardsProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a715645a728b4f087286ea6435ae26b833edd02f", "committedDate": "2020-07-23T18:06:56Z", "message": "Fix(Azure Boards Channel): Fix missing database field entry and clean up commented code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a715645a728b4f087286ea6435ae26b833edd02f", "committedDate": "2020-07-23T18:06:56Z", "message": "Fix(Azure Boards Channel): Fix missing database field entry and clean up commented code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDEyNDcz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#pullrequestreview-454412473", "createdAt": "2020-07-23T18:58:00Z", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo1ODowMFrOG2XkxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo1ODowMFrOG2XkxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2MjUzMw==", "bodyText": "should azureProjectName be here twice? Are projectName and projectKey the same?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459662533", "createdAt": "2020-07-23T18:58:00Z", "author": {"login": "ChomickiM"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/AzureBoardsChannel.java", "diffHunk": "@@ -74,8 +79,22 @@ public IssueTrackerResponse sendRequests(IssueTrackerContext context, List<Issue\n     }\n \n     private IssueConfig createIssueConfig(FieldAccessor fieldAccessor) {\n-        // FIXME implement\n-        return null;\n+        String azureProjectName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_AZURE_PROJECT);\n+        String workItemCreatorEmail = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_CREATOR_EMAIL);\n+        String workItemTypeName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_TYPE);\n+        boolean commentOnWorkItems = fieldAccessor.getBooleanOrFalse(AzureBoardsDescriptor.KEY_WORK_ITEM_COMMENT);\n+        String completedStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_COMPLETED_STATE);\n+        String reopenStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_REOPEN_STATE);\n+        return new IssueConfig(\n+            azureProjectName,\n+            azureProjectName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDI1MjMz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#pullrequestreview-454425233", "createdAt": "2020-07-23T19:17:04Z", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxNzowNVrOG2YLlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxNzowNVrOG2YLlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MjQ3MA==", "bodyText": "We could add another variable with the Authorization and Token URL hostnames, cut down on duplication.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459672470", "createdAt": "2020-07-23T19:17:05Z", "author": {"login": "bamandel"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDI2MDA3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#pullrequestreview-454426007", "createdAt": "2020-07-23T19:18:11Z", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxODoxMVrOG2YN7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToxODoxMVrOG2YN7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ==", "bodyText": "Are these URLs always going to be the same?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459673071", "createdAt": "2020-07-23T19:18:11Z", "author": {"login": "psantos1113"}, "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDMzNTM5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#pullrequestreview-454433539", "createdAt": "2020-07-23T19:29:28Z", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToyOToyOFrOG2Ylfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOToyOToyOFrOG2Ylfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3OTEwMw==", "bodyText": "If we're doing OAuth, shouldn't Consumer and private keys always be needed in the handshake?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459679103", "createdAt": "2020-07-23T19:29:28Z", "author": {"login": "bamandel"}, "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -39,20 +37,15 @@\n public class AzureBoardsGlobalUIConfig extends UIConfig {\n     public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n     public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n-    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n-    public static final String LABEL_PRIVATE_KEY = \"Private Key\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f38249ee868d8cb43fdb485aa996fdd5a18400b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9f38249ee868d8cb43fdb485aa996fdd5a18400b", "committedDate": "2020-07-23T20:24:46Z", "message": "Chore(Azure Boards Library): Add TODO for OAuth url constants"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDY5NjUz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#pullrequestreview-454469653", "createdAt": "2020-07-23T20:25:54Z", "commit": {"oid": "a715645a728b4f087286ea6435ae26b833edd02f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0979f200f515365d06eb40c8eae6142ff3a3d978", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0979f200f515365d06eb40c8eae6142ff3a3d978", "committedDate": "2020-07-24T12:24:19Z", "message": "Chore(Alert Common): Add TODO for issue config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "295f630ea3184c438bb2767c79ad723b23ff3a1a", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/295f630ea3184c438bb2767c79ad723b23ff3a1a", "committedDate": "2020-07-24T12:24:51Z", "message": "Merge branch 'master' into gk_create_azure_context"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2613, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}