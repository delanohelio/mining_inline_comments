{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMTk4ODI2", "number": 1280, "title": "Store href as part of a Job's configured project data", "bodyText": "Added the fields href and projectOwnerEmail, the latter will be null for now. Previously all of this data was synced from BlackDuck to the Alert DB. Now that we are departing from syncing the data, we need to store the relevant information when the Job is saved.", "createdAt": "2020-12-02T18:13:34Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280", "merged": true, "mergeCommit": {"oid": "8e6fb4311e654ef9a3782d35b9def7b4ff6b2632"}, "closed": true, "closedAt": "2020-12-02T20:51:36Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeD4P5gH2gAyNTMxMTk4ODI2OjU1ZmU5ZmY5MWQ0ODM0YzZkZGZiYzVkNTZhN2UyNDc0ZTc1OTFiYTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiUt06gFqTU0MzIxNzkyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55fe9ff91d4834c6ddfbc5d56a7e2474e7591ba9", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/55fe9ff91d4834c6ddfbc5d56a7e2474e7591ba9", "committedDate": "2020-11-19T14:46:07Z", "message": "Feat(BlackDuck): Store href and project owner email in blackduck_job_projects and migrate from old versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87df1c7409ff80b39d1b229de070f2b2bfc28fde", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/87df1c7409ff80b39d1b229de070f2b2bfc28fde", "committedDate": "2020-11-19T15:49:29Z", "message": "Feat(BlackDuck): Update job java models to include href and project owner email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f609aecfdfad08eadccf8d4e3f5f7d3fd98869ad", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f609aecfdfad08eadccf8d4e3f5f7d3fd98869ad", "committedDate": "2020-11-19T16:13:14Z", "message": "Chore: Add FIXME comments for changes required to fully support href and project owner email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15531cf84cf3f6032bc6db6537f1055e7f2feacf", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/15531cf84cf3f6032bc6db6537f1055e7f2feacf", "committedDate": "2020-11-19T19:43:35Z", "message": "Feat(Liquibase): Use BlackDuck project href in primary key rather than project name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8661a22904df382f865a0f853d652a00d2aaf76", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b8661a22904df382f865a0f853d652a00d2aaf76", "committedDate": "2020-11-19T20:08:23Z", "message": "Feat(Job): Add list of projects as top-level field on JobFieldModel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03fbe7d279498ad1dba5ef3f1933b14316c123c4", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/03fbe7d279498ad1dba5ef3f1933b14316c123c4", "committedDate": "2020-11-20T13:47:28Z", "message": "Feat(Job UI): Begin tracking configuredProviderProjects in UI state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b3397d9165a27b7b88b160c95b995bc1d0b0dc3", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/6b3397d9165a27b7b88b160c95b995bc1d0b0dc3", "committedDate": "2020-11-23T15:40:46Z", "message": "Merge branch 'master' into gk_migrate_href"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b8d1f2228f96d2485d9997175d03566ba673c7b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1b8d1f2228f96d2485d9997175d03566ba673c7b", "committedDate": "2020-11-23T19:35:07Z", "message": "Feat(UI): Begin implementing table select value basic object support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "095930c874277e6523433ad6ca4440ba41d7c25e", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/095930c874277e6523433ad6ca4440ba41d7c25e", "committedDate": "2020-11-24T14:28:18Z", "message": "Feat(BlackDuck): Prepare DB API layer for storing more project fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7f81b48b2aab2658d6c3be28a8efe03d2cc584", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/fc7f81b48b2aab2658d6c3be28a8efe03d2cc584", "committedDate": "2020-11-24T19:55:32Z", "message": "Fixing header, fixing object copy, fixing data selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b3d34c6ca050eec6a566289633e81d1e0324292", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8b3d34c6ca050eec6a566289633e81d1e0324292", "committedDate": "2020-11-25T13:33:48Z", "message": "Merge branch 'gk_migrate_href_object_field_values' into gk_migrate_href"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c710525a8de084473362f8b20cb24432f9e987c8", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c710525a8de084473362f8b20cb24432f9e987c8", "committedDate": "2020-11-30T15:57:37Z", "message": "Merge branch 'master' into gk_migrate_href and resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81bb066fddf8090a596e98f5053aea4325473967", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/81bb066fddf8090a596e98f5053aea4325473967", "committedDate": "2020-12-01T19:21:02Z", "message": "Merge branch 'master' into gk_migrate_href and resolve conflicts/compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b262ae7b868f3e91f1704c38cb90d41f2087f190", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b262ae7b868f3e91f1704c38cb90d41f2087f190", "committedDate": "2020-12-01T20:59:11Z", "message": "Fix(Job): Set missing timestamp fields where appropriate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19e46b6964599ba9ac8242b03fa5a6b722ae2240", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/19e46b6964599ba9ac8242b03fa5a6b722ae2240", "committedDate": "2020-12-02T14:37:44Z", "message": "Feat(Job): Update JobConfigActions to properly persist projects from JobFieldModel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1f02a5a3d9b1f13132b4f498abab74d608802112", "committedDate": "2020-12-02T17:38:43Z", "message": "Fix(UI): Set initial values for edit/copy in jobs to be JSON when appropriate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTExMjky", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#pullrequestreview-543111292", "createdAt": "2020-12-02T18:14:31Z", "commit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODoxNDozMlrOH9n-eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODoxNDozMlrOH9n-eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM4MDE1NA==", "bodyText": "Required as long as we are dynamically generating the Job modal.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#discussion_r534380154", "createdAt": "2020-12-02T18:14:32Z", "author": {"login": "gkillough"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/descriptor/config/field/endpoint/table/EndpointTableSelectField.java", "diffHunk": "@@ -32,13 +32,15 @@\n public class EndpointTableSelectField extends EndpointField {\n     private boolean paged;\n     private boolean searchable;\n+    private boolean useRowAsValue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTEzOTE2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#pullrequestreview-543113916", "createdAt": "2020-12-02T18:17:49Z", "commit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODoxNzo0OVrOH9oHHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODoxNzo0OVrOH9oHHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM4MjM2NA==", "bodyText": "As an AlertSerializableModel the .toString() method will be in JSON format.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#discussion_r534382364", "createdAt": "2020-12-02T18:17:49Z", "author": {"login": "gkillough"}, "path": "web/src/main/java/com/synopsys/integration/alert/web/api/job/JobFieldModelPopulationUtils.java", "diffHunk": "@@ -85,9 +95,13 @@ public static void populateProviderFields(FieldModel providerFieldModel, Distrib\n                 .filter(StringUtils::isNotBlank)\n                 .ifPresent(pattern -> putField(providerFieldModel, ProviderDistributionUIConfig.KEY_PROJECT_NAME_PATTERN, pattern));\n \n-            List<String> blackDuckProjectNames = jobModel.getProjectFilterProjectNames();\n-            if (!blackDuckProjectNames.isEmpty()) {\n-                putField(providerFieldModel, ProviderDistributionUIConfig.KEY_CONFIGURED_PROJECT, blackDuckProjectNames);\n+            // Convert to JSON for 6.4.0 while the dynamic ui still uses these as initial values on edit/copy\n+            List<String> blackDuckProjectJson = jobModel.getProjectFilterDetails()\n+                                                    .stream()\n+                                                    .map(BlackDuckProjectDetailsModel::toString)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTYzMzc3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#pullrequestreview-543163377", "createdAt": "2020-12-02T19:22:05Z", "commit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxOToyMjowNlrOH9qjpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxOToyMjowNlrOH9qjpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDQyMjQzNw==", "bodyText": "Should be lower case P, projectFiltersToSave", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#discussion_r534422437", "createdAt": "2020-12-02T19:22:06Z", "author": {"login": "jamesrichard91"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/job/blackduck/BlackDuckJobDetailsAccessor.java", "diffHunk": "@@ -78,27 +79,32 @@ public BlackDuckJobDetailsEntity saveBlackDuckJobDetails(UUID jobId, Distributio\n                                                                                .stream()\n                                                                                .map(notificationType -> new BlackDuckJobNotificationTypeEntity(jobId, notificationType))\n                                                                                .collect(Collectors.toList());\n+        blackDuckJobNotificationTypeRepository.deleteAllByJobId(jobId);\n         List<BlackDuckJobNotificationTypeEntity> savedNotificationTypes = blackDuckJobNotificationTypeRepository.saveAll(notificationTypesToSave);\n         savedBlackDuckJobDetails.setBlackDuckJobNotificationTypes(savedNotificationTypes);\n \n-        List<BlackDuckJobProjectEntity> ProjectFiltersToSave = requestModel.getProjectFilterProjectNames()\n+        List<BlackDuckJobProjectEntity> ProjectFiltersToSave = requestModel.getProjectFilterDetails()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTY3NTM3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#pullrequestreview-543167537", "createdAt": "2020-12-02T19:27:40Z", "commit": {"oid": "1f02a5a3d9b1f13132b4f498abab74d608802112"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e151c904e5e4015fcb102a8589fa2e17334e740b", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e151c904e5e4015fcb102a8589fa2e17334e740b", "committedDate": "2020-12-02T19:34:55Z", "message": "Fix: Typo in camelCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fb2ca393730b86942d005155da5bc50e8e112cd", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2fb2ca393730b86942d005155da5bc50e8e112cd", "committedDate": "2020-12-02T20:05:28Z", "message": "Fix(UI): Make provider project rows deselectable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMjE3OTIx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1280#pullrequestreview-543217921", "createdAt": "2020-12-02T20:38:49Z", "commit": {"oid": "2fb2ca393730b86942d005155da5bc50e8e112cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2929, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}