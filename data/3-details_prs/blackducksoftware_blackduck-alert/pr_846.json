{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNTU0MjQ0", "number": 846, "title": "fix: Update SAML settings after database save and log exceptions.", "bodyText": "This allows the SAML to be disabled because the database settings are saved first before the runtime changes to the SAML.  If there's an exception log it which will catch PKIX exceptions that prevent SAML from being disabled because it isn't a caught exception and it bubbles up.", "createdAt": "2020-02-07T19:00:49Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846", "merged": true, "mergeCommit": {"oid": "5764ff5d120bdbe729303667cb337a74d71f66e9"}, "closed": true, "closedAt": "2020-02-07T19:10:24Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCEEVSgH2gAyMzcyNTU0MjQ0OmExNzJiOTNlZDBkNzdmYTc1NDlmNTFiNDI1NzczNmIxNTU5Mzg5N2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCENxyAFqTM1NTM3MzcyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a172b93ed0d77fa7549f51b4257736b15593897b", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a172b93ed0d77fa7549f51b4257736b15593897b", "committedDate": "2020-02-07T18:58:17Z", "message": "fix: Update SAML settings after database save and log exceptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MzczMzUw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846#pullrequestreview-355373350", "createdAt": "2020-02-07T19:07:55Z", "commit": {"oid": "a172b93ed0d77fa7549f51b4257736b15593897b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxOTowNzo1NVrOFnHPxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxOTowNzo1NVrOFnHPxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU1NzUwOA==", "bodyText": "Do we need to call addSAMLMetadata(fieldModel); in both the afterSaveAction and in the afterUpdateAction?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846#discussion_r376557508", "createdAt": "2020-02-07T19:07:55Z", "author": {"login": "jamesrichard91"}, "path": "src/main/java/com/synopsys/integration/alert/component/settings/actions/SettingsGlobalApiAction.java", "diffHunk": "@@ -75,96 +76,111 @@ public FieldModel afterGetAction(final FieldModel fieldModel) {\n     }\n \n     @Override\n-    public FieldModel beforeSaveAction(final FieldModel fieldModel) {\n+    public FieldModel beforeSaveAction(FieldModel fieldModel) {\n         return handleNewAndUpdatedConfig(fieldModel);\n     }\n \n     @Override\n-    public FieldModel beforeUpdateAction(final FieldModel fieldModel) {\n+    public FieldModel beforeUpdateAction(FieldModel fieldModel) {\n         return handleNewAndUpdatedConfig(fieldModel);\n     }\n \n-    private FieldModel createFieldModelCopy(final FieldModel fieldModel) {\n-        final HashMap<String, FieldValueModel> fields = new HashMap<>();\n+    private FieldModel createFieldModelCopy(FieldModel fieldModel) {\n+        HashMap<String, FieldValueModel> fields = new HashMap<>();\n         fields.putAll(fieldModel.getKeyToValues());\n \n-        final FieldModel modelToSave = new FieldModel(fieldModel.getDescriptorName(), fieldModel.getContext(), fields);\n+        FieldModel modelToSave = new FieldModel(fieldModel.getDescriptorName(), fieldModel.getContext(), fields);\n         modelToSave.setId(fieldModel.getId());\n         return modelToSave;\n     }\n \n-    private FieldModel handleNewAndUpdatedConfig(final FieldModel fieldModel) {\n+    @Override\n+    public FieldModel afterSaveAction(FieldModel fieldModel) throws AlertException {\n+        addSAMLMetadata(fieldModel);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a172b93ed0d77fa7549f51b4257736b15593897b"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MzczNzI5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846#pullrequestreview-355373729", "createdAt": "2020-02-07T19:08:36Z", "commit": {"oid": "a172b93ed0d77fa7549f51b4257736b15593897b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2797, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}