{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTc4MDQ0", "number": 1168, "title": "distribution validation", "bodyText": "Update the distribution jobs to display validation errors when saving or testing configurations.", "createdAt": "2020-09-16T13:09:50Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168", "merged": true, "mergeCommit": {"oid": "114ed463fd6599b6cb7ba1bfbd10f2d191e25bf3"}, "closed": true, "closedAt": "2020-09-16T16:04:19Z", "author": {"login": "psantos1113"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJLRxJgH2gAyNDg3OTc4MDQ0OjI2NDY3ZDkyNGY1OTg2NmI1ZDQ1NjdhNmUzMDkyZDVmMWUyYTI4NzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJd8dHAFqTQ4OTczMzY1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26467d924f59866b5d4567a6e3092d5f1e2a2872", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/26467d924f59866b5d4567a6e3092d5f1e2a2872", "committedDate": "2020-09-15T17:30:55Z", "message": "feat: Implement actions and reducers for validating jobs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df7b3ea98904e6553b1387d77803601d35e506c6", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/df7b3ea98904e6553b1387d77803601d35e506c6", "committedDate": "2020-09-15T20:31:56Z", "message": "refactor: Validate before saving."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c404b87d5e29a6c13d51b9355d56ed48e376e7b", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4c404b87d5e29a6c13d51b9355d56ed48e376e7b", "committedDate": "2020-09-16T13:04:39Z", "message": "fix: Update the distribution jobs to show validation errors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d423bc1d9f327d96e1d69a11bce5023c932c115d", "committedDate": "2020-09-16T13:08:23Z", "message": "chore: Update comment for the getValue/setValue methods."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjA4MDUy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489608052", "createdAt": "2020-09-16T13:11:13Z", "commit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMToxM1rOHSwGXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMToxM1rOHSwGXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQyNDQ3Ng==", "bodyText": "This ensures validation happens before saving the job.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489424476", "createdAt": "2020-09-16T13:11:13Z", "author": {"login": "psantos1113"}, "path": "src/main/js/dynamic/DistributionConfiguration.js", "diffHunk": "@@ -107,66 +106,73 @@ class DistributionConfiguration extends Component {\n             const keepFrequency = Object.assign(keepName, FieldModelUtilities.updateFieldModelSingleValue(updatedChannelConfig, KEY_FREQUENCY, frequency));\n             const keepProvider = Object.assign(keepFrequency, FieldModelUtilities.updateFieldModelSingleValue(updatedChannelConfig, KEY_PROVIDER_NAME, provider));\n \n-            this.props.checkDescriptorForGlobalConfig(KEY_CHANNEL_NAME, newChannel.name);\n+            validateDescriptorForGlobalConfig(KEY_CHANNEL_NAME, newChannel.name);\n             this.setState({\n                 channelConfig: keepProvider,\n                 currentChannel: newChannel\n             });\n         }\n-        const selectedProviderOption = FieldModelUtilities.getFieldModelSingleValue(this.state.channelConfig, KEY_PROVIDER_NAME);\n+        const selectedProviderOption = FieldModelUtilities.getFieldModelSingleValue(channelConfig, KEY_PROVIDER_NAME);\n         const prevProviderName = currentProvider ? currentProvider.name : '';\n \n         if (selectedProviderOption && prevProviderName !== selectedProviderOption) {\n-            const newProvider = this.props.descriptors.find((descriptor) => descriptor.name === selectedProviderOption && descriptor.context === DescriptorUtilities.CONTEXT_TYPE.DISTRIBUTION);\n+            const newProvider = descriptors.find((descriptor) => descriptor.name === selectedProviderOption && descriptor.context === DescriptorUtilities.CONTEXT_TYPE.DISTRIBUTION);\n             const emptyProviderConfig = FieldModelUtilities.createFieldModelWithDefaults(newProvider.fields, newProvider.context, newProvider.name);\n-            this.props.checkDescriptorForGlobalConfig(KEY_PROVIDER_NAME, newProvider.name);\n+            validateDescriptorForGlobalConfig(KEY_PROVIDER_NAME, newProvider.name);\n             this.setState({\n                 providerConfig: emptyProviderConfig,\n                 currentProvider: newProvider\n             });\n         }\n+\n+        if (prevProps.status === 'VALIDATING' && status === 'VALIDATED') {\n+            const jsonBody = this.buildJsonBody();\n+            if (isUpdatingJob) {\n+                updateDistribution(jsonBody);\n+            } else {\n+                saveDistribution(jsonBody);\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "originalPosition": 117}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjA5MjI5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489609229", "createdAt": "2020-09-16T13:12:29Z", "commit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMjoyOVrOHSwJpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMjoyOVrOHSwJpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQyNTMxOQ==", "bodyText": "Moved the code that checked the job id into this function instead of having the check in multiple places.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489425319", "createdAt": "2020-09-16T13:12:29Z", "author": {"login": "psantos1113"}, "path": "src/main/js/dynamic/DistributionConfiguration.js", "diffHunk": "@@ -107,66 +106,73 @@ class DistributionConfiguration extends Component {\n             const keepFrequency = Object.assign(keepName, FieldModelUtilities.updateFieldModelSingleValue(updatedChannelConfig, KEY_FREQUENCY, frequency));\n             const keepProvider = Object.assign(keepFrequency, FieldModelUtilities.updateFieldModelSingleValue(updatedChannelConfig, KEY_PROVIDER_NAME, provider));\n \n-            this.props.checkDescriptorForGlobalConfig(KEY_CHANNEL_NAME, newChannel.name);\n+            validateDescriptorForGlobalConfig(KEY_CHANNEL_NAME, newChannel.name);\n             this.setState({\n                 channelConfig: keepProvider,\n                 currentChannel: newChannel\n             });\n         }\n-        const selectedProviderOption = FieldModelUtilities.getFieldModelSingleValue(this.state.channelConfig, KEY_PROVIDER_NAME);\n+        const selectedProviderOption = FieldModelUtilities.getFieldModelSingleValue(channelConfig, KEY_PROVIDER_NAME);\n         const prevProviderName = currentProvider ? currentProvider.name : '';\n \n         if (selectedProviderOption && prevProviderName !== selectedProviderOption) {\n-            const newProvider = this.props.descriptors.find((descriptor) => descriptor.name === selectedProviderOption && descriptor.context === DescriptorUtilities.CONTEXT_TYPE.DISTRIBUTION);\n+            const newProvider = descriptors.find((descriptor) => descriptor.name === selectedProviderOption && descriptor.context === DescriptorUtilities.CONTEXT_TYPE.DISTRIBUTION);\n             const emptyProviderConfig = FieldModelUtilities.createFieldModelWithDefaults(newProvider.fields, newProvider.context, newProvider.name);\n-            this.props.checkDescriptorForGlobalConfig(KEY_PROVIDER_NAME, newProvider.name);\n+            validateDescriptorForGlobalConfig(KEY_PROVIDER_NAME, newProvider.name);\n             this.setState({\n                 providerConfig: emptyProviderConfig,\n                 currentProvider: newProvider\n             });\n         }\n+\n+        if (prevProps.status === 'VALIDATING' && status === 'VALIDATED') {\n+            const jsonBody = this.buildJsonBody();\n+            if (isUpdatingJob) {\n+                updateDistribution(jsonBody);\n+            } else {\n+                saveDistribution(jsonBody);\n+            }\n+        }\n     }\n \n-    handleClose() {\n-        this.setState({ show: false });\n-        this.props.onModalClose();\n-        this.props.handleCancel();\n+    setSendMessageVisible(visible) {\n+        this.setState({\n+            showSendMessage: visible\n+        });\n+    }\n+\n+    handleTestSubmit(event) {\n+        event.preventDefault();\n+        const { testDistribution } = this.props;\n+        const jsonBody = this.buildJsonBody();\n+        testDistribution(jsonBody);\n     }\n \n     buildJsonBody() {\n         const { channelConfig, providerConfig } = this.state;\n+        const { jobId } = this.props;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "originalPosition": 139}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjEwMjI2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489610226", "createdAt": "2020-09-16T13:13:33Z", "commit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMzozM1rOHSwMeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzoxMzozM1rOHSwMeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQyNjA0MQ==", "bodyText": "Most of the changes in this class are for linting issues.  I have commented on the changes that actually were made to get distribution job validation to work.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489426041", "createdAt": "2020-09-16T13:13:33Z", "author": {"login": "psantos1113"}, "path": "src/main/js/dynamic/DistributionConfiguration.js", "diffHunk": "@@ -6,11 +6,7 @@ import * as DescriptorUtilities from 'util/descriptorUtilities';\n import { OPERATIONS } from 'util/descriptorUtilities';\n import FieldsPanel from 'field/FieldsPanel';\n import {\n-    checkDescriptorForGlobalConfig,\n-    getDistributionJob,\n-    saveDistributionJob,\n-    testDistributionJob,\n-    updateDistributionJob\n+    checkDescriptorForGlobalConfig, getDistributionJob, saveDistributionJob, testDistributionJob, updateDistributionJob, validateDistributionJob", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d423bc1d9f327d96e1d69a11bce5023c932c115d"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7b5c39cf513474e45148c300821acc58cb30aa16", "committedDate": "2020-09-16T13:15:56Z", "message": "fix: Update the status for distribution test success."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjI2NDgx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489626481", "createdAt": "2020-09-16T13:30:16Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozMDoxNlrOHSw8VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozMDoxNlrOHSw8VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQzODI5Mg==", "bodyText": "What's the difference among these three calls? It seems like we should be able to drop the else-if and else to just call dispatch(handler(response.status));", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489438292", "createdAt": "2020-09-16T13:30:16Z", "author": {"login": "gkillough"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -206,11 +238,19 @@ export function testDistributionJob(config) {\n         request.then((response) => {\n             response.json()\n                 .then((responseData) => {\n-                    if (response.ok) {\n+                    const defaultHandler = () => jobError({\n+                        type: DISTRIBUTION_JOB_TEST_FAILURE,\n+                        ...responseData\n+                    });\n+                    const handler = createErrorHandler(DISTRIBUTION_JOB_TEST_FAILURE, defaultHandler);\n+                    if (responseData.errors && !Object.keys(responseData.errors).length) {\n                         dispatch(testJobSuccess(responseData.message));\n+                    } else if (!response.ok) {\n+                        dispatch(handler(response.status));\n                     } else {\n-                        handleFailureResponse(DISTRIBUTION_JOB_TEST_FAILURE, dispatch, responseData, response.status);\n+                        dispatch(handler(400));\n                     }\n+                    dispatch(handler(response.status));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "originalPosition": 130}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjI3NTYw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489627560", "createdAt": "2020-09-16T13:31:22Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozMToyMlrOHSw_Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozMToyMlrOHSw_Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQzOTA3NQ==", "bodyText": "When will the else be called, but not the else-if?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489439075", "createdAt": "2020-09-16T13:31:22Z", "author": {"login": "gkillough"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -241,3 +281,24 @@ export function checkDescriptorForGlobalConfig(errorFieldName, descriptorName) {\n         }).catch(console.error);\n     };\n }\n+\n+export function validateDistributionJob(config) {\n+    return (dispatch, getState) => {\n+        dispatch(validatingJob());\n+        const { csrfToken } = getState().session;\n+        const request = ConfigRequestBuilder.createValidateRequest(ConfigRequestBuilder.JOB_API_URL, csrfToken, config);\n+        request.then((response) => {\n+            response.json()\n+                .then((responseData) => {\n+                    const handler = createErrorHandler(DISTRIBUTION_JOB_VALIDATE_ERROR, () => validateJobError(responseData));\n+                    if (responseData.errors && !Object.keys(responseData.errors).length) {\n+                        dispatch(validatedJob());\n+                    } else if (!response.ok) {\n+                        dispatch(handler(response.status));\n+                    } else {\n+                        dispatch(handler(400));\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "originalPosition": 154}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjI5Mzgz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489629383", "createdAt": "2020-09-16T13:33:17Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjMwNDcy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489630472", "createdAt": "2020-09-16T13:34:24Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozNDoyNFrOHSxHyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzozNDoyNFrOHSxHyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ0MTIyNA==", "bodyText": "This should be moved above the promise for responseData", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489441224", "createdAt": "2020-09-16T13:34:24Z", "author": {"login": "ChomickiM"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -173,7 +195,12 @@ export function saveDistributionJob(config) {\n                     if (response.ok) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjQxNTMy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489641532", "createdAt": "2020-09-16T13:45:31Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzo0NTozMVrOHSxoaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzo0NTozMVrOHSxoaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ0OTU3Ng==", "bodyText": "It seems like we are checking does the field \"errors\" have any values and if it does then do the dispatch but we are not passing the errors along. Is this expected? Are the errors that we checked for being ignored/lost?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489449576", "createdAt": "2020-09-16T13:45:31Z", "author": {"login": "jamesrichard91"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -241,3 +281,24 @@ export function checkDescriptorForGlobalConfig(errorFieldName, descriptorName) {\n         }).catch(console.error);\n     };\n }\n+\n+export function validateDistributionJob(config) {\n+    return (dispatch, getState) => {\n+        dispatch(validatingJob());\n+        const { csrfToken } = getState().session;\n+        const request = ConfigRequestBuilder.createValidateRequest(ConfigRequestBuilder.JOB_API_URL, csrfToken, config);\n+        request.then((response) => {\n+            response.json()\n+                .then((responseData) => {\n+                    const handler = createErrorHandler(DISTRIBUTION_JOB_VALIDATE_ERROR, () => validateJobError(responseData));\n+                    if (responseData.errors && !Object.keys(responseData.errors).length) {\n+                        dispatch(validatedJob());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "originalPosition": 149}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NjQzODY2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489643866", "createdAt": "2020-09-16T13:47:53Z", "commit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzo0Nzo1M1rOHSxvWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMzo0Nzo1M1rOHSxvWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ1MTM1NA==", "bodyText": "It seems odd to me that we are checking for values in the \"errors\" field and then passing along the \"message\" field.  Is this check  looking for errors? or is it looking for the absence of errors?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489451354", "createdAt": "2020-09-16T13:47:53Z", "author": {"login": "jamesrichard91"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -206,11 +238,19 @@ export function testDistributionJob(config) {\n         request.then((response) => {\n             response.json()\n                 .then((responseData) => {\n-                    if (response.ok) {\n+                    const defaultHandler = () => jobError({\n+                        type: DISTRIBUTION_JOB_TEST_FAILURE,\n+                        ...responseData\n+                    });\n+                    const handler = createErrorHandler(DISTRIBUTION_JOB_TEST_FAILURE, defaultHandler);\n+                    if (responseData.errors && !Object.keys(responseData.errors).length) {\n                         dispatch(testJobSuccess(responseData.message));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5c39cf513474e45148c300821acc58cb30aa16"}, "originalPosition": 123}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f", "author": {"user": {"login": "psantos1113", "name": null}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f", "committedDate": "2020-09-16T13:57:13Z", "message": "fix: Remove unused dispatch call."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzEwMzI4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489710328", "createdAt": "2020-09-16T14:52:51Z", "commit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNDo1Mjo1MlrOHS0x4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNDo1Mjo1MlrOHS0x4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUwMTE1Mw==", "bodyText": "If we're ok returning null, then why do we work with an optional as Content?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489501153", "createdAt": "2020-09-16T14:52:52Z", "author": {"login": "bamandel"}, "path": "src/main/java/com/synopsys/integration/alert/web/api/job/JobConfigController.java", "diffHunk": "@@ -100,6 +100,7 @@ public ValidationResponseModel validate(JobFieldModel requestBody) {\n \n     @Override\n     public ValidationResponseModel test(JobFieldModel resource) {\n-        return ResponseFactory.createContentResponseFromAction(jobConfigActions.test(resource));\n+        ValidationActionResponse response = jobConfigActions.test(resource);\n+        return ResponseFactory.createContentResponseFromAction(new ValidationActionResponse(HttpStatus.OK, response.getContent().orElse(null)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzI4NzY0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489728764", "createdAt": "2020-09-16T15:10:46Z", "commit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxMDo0NlrOHS1n7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxMDo0NlrOHS1n7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxNDk4OQ==", "bodyText": "is handler a function here? We're passing a status to handler but it doesn't look like handler expects anything passed to it.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#discussion_r489514989", "createdAt": "2020-09-16T15:10:46Z", "author": {"login": "bamandel"}, "path": "src/main/js/store/actions/distributionConfigs.js", "diffHunk": "@@ -173,7 +195,12 @@ export function saveDistributionJob(config) {\n                     if (response.ok) {\n                         dispatch(saveJobSuccess(responseData.message));\n                     } else {\n-                        handleFailureResponse(DISTRIBUTION_JOB_SAVE_ERROR, dispatch, responseData, response.status);\n+                        const defaultHandler = () => jobError({\n+                            type: DISTRIBUTION_JOB_SAVE_ERROR,\n+                            ...responseData\n+                        });\n+                        const handler = createErrorHandler(DISTRIBUTION_JOB_SAVE_ERROR, defaultHandler);\n+                        dispatch(handler(response.status));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzMzNjUw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1168#pullrequestreview-489733650", "createdAt": "2020-09-16T15:15:50Z", "commit": {"oid": "8db117a41bc6b0cf1d9f29e0709de9aa5a5b592f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3478, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}