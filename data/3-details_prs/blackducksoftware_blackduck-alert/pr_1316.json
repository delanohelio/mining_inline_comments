{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNzkwMjgy", "number": 1316, "title": "New Field-Mapping component", "bodyText": "This PR is not finished at the moment, all FIXMEs  and TODOs in the changed files should be resolved before merging\nThis is a UI based PR and thus doesn't change much on the backend. Features that have not yet been added to this PR:\n\nRecommended options for the right hand side of the mapping\nSaving data to the server in an acceptable format\nStyling to make the field look like the others\nValidation on new rows (Should they be able to set two rows with the same jira field?)\nThe field mapping field has only been added to Jira cloud at the moment\n\nOnce these are complete, the field should be usable with the dynamic code and ready for immediate deletion in the next release when we redo the UI", "createdAt": "2020-12-18T21:51:36Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316", "merged": true, "mergeCommit": {"oid": "15db5e6b44b70b22c29ef8d1375464ccff695123"}, "closed": true, "closedAt": "2020-12-22T17:34:20Z", "author": {"login": "bamandel"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnK8tzgH2gAyNTQyNzkwMjgyOmEyNzA4MjIzYzJhYjUyMGRmNWZlZTFlNjA5YzRiNmVkYzg0YjE1ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdot8CvgH2gAyNTQyNzkwMjgyOmUyNjBhMmVkMGE2NGQ1MzhhNjUxMjBmOTY4NTM1YzQ4OGFlN2YxZTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2708223c2ab520df5fee1e609c4b6edc84b15ee", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a2708223c2ab520df5fee1e609c4b6edc84b15ee", "committedDate": "2020-12-17T22:05:39Z", "message": "feat(FieldMappingField): Added a new component for mapping between two select fields. Added this feature to the dynamic fieldMapping util."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6928e88bb137ed62e495dffb97b2d5bd121b0eb8", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/6928e88bb137ed62e495dffb97b2d5bd121b0eb8", "committedDate": "2020-12-18T14:58:04Z", "message": "feat(JiraCloudDistributionUIConfig): Added the new FieldMappingField to the java files to show working field generation in UI."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0789e87a24bad402dce1180c33dbf7295475ed35", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0789e87a24bad402dce1180c33dbf7295475ed35", "committedDate": "2020-12-18T19:36:01Z", "message": "feat(FieldMappingEndpointField): The field will now be displayed dynamically when set in the java descriptor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63f3908c7661213831650da5e6ac485d34f76608", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/63f3908c7661213831650da5e6ac485d34f76608", "committedDate": "2020-12-18T19:36:34Z", "message": "Merge branch 'master' into bm-field-mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d89f3ff0d53a83445882a614783b696cab52dba", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7d89f3ff0d53a83445882a614783b696cab52dba", "committedDate": "2020-12-18T21:38:59Z", "message": "feat(FieldMappingField.js): Converted the select fields in the modal to be text fields so that users have greater flexibility. Also fixed some smaller issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09d5be1c20eeb9c14c643674f5e1c2200e414bde", "author": {"user": {"login": "bamandel", "name": "Brian"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/09d5be1c20eeb9c14c643674f5e1c2200e414bde", "committedDate": "2020-12-18T21:49:05Z", "message": "deleted a number of classes that were used to set up custom options from the backend, use text fields now and no longer need options."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDcyMzE0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-556472314", "createdAt": "2020-12-21T15:42:31Z", "commit": {"oid": "09d5be1c20eeb9c14c643674f5e1c2200e414bde"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNTo0MjozMVrOIJcnmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNTo0MjozMVrOIJcnmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc3Njk4NA==", "bodyText": "We'll need to eventually add this to Jira Server as well.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r546776984", "createdAt": "2020-12-21T15:42:31Z", "author": {"login": "gkillough"}, "path": "channel/src/main/java/com/synopsys/integration/alert/channel/jira/cloud/descriptor/JiraCloudDistributionUIConfig.java", "diffHunk": "@@ -67,8 +70,10 @@ public JiraCloudDistributionUIConfig() {\n         ConfigField resolveWorkflow = new TextInputConfigField(JiraCloudDescriptor.KEY_RESOLVE_WORKFLOW_TRANSITION, LABEL_RESOLVE_WORKFLOW_TRANSITION, DESCRIPTION_RESOLVE_WORKFLOW_TRANSITION);\n         ConfigField openWorkflow = new TextInputConfigField(JiraCloudDescriptor.KEY_OPEN_WORKFLOW_TRANSITION, LABEL_OPEN_WORKFLOW_TRANSITION, DESCRIPTION_OPEN_WORKFLOW_TRANSITION)\n                                        .applyRequiredRelatedField(resolveWorkflow.getKey());\n+        ConfigField fieldMapping = new FieldMappingEndpointField(JiraCloudDescriptor.KEY_FIELD_MAPPING, LABEL_FIELD_MAPPING, DESCRIPTION_FIELD_MAPPING, \"Jira Field\", \"Notification content\")\n+                                       .applyNewMappingTitle(\"Create Jira Field Mapping\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09d5be1c20eeb9c14c643674f5e1c2200e414bde"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "948ab86acf3184067a11be93d3c8daccc93fc85a", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/948ab86acf3184067a11be93d3c8daccc93fc85a", "committedDate": "2020-12-21T16:26:54Z", "message": "Working on the custom field mapping, adding the predefined replacement values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7217686dfebe5f454a8148655978ca1b527f2124", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7217686dfebe5f454a8148655978ca1b527f2124", "committedDate": "2020-12-21T18:45:26Z", "message": "Merge branch 'master' into bm-field-mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2860afd25bdedcb4a7cb423e61bd17efac40ee35", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2860afd25bdedcb4a7cb423e61bd17efac40ee35", "committedDate": "2020-12-21T23:19:12Z", "message": "Refactor: working on saving and editing the Jira custom field mappings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f02751834e364edea430cd44c17cadd2628c0c1c", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f02751834e364edea430cd44c17cadd2628c0c1c", "committedDate": "2020-12-22T16:27:37Z", "message": "Refactor: Fixing the field mapping deletion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c", "committedDate": "2020-12-22T16:31:37Z", "message": "Fixing the Jira Server validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjA5MzQz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557209343", "createdAt": "2020-12-22T16:33:57Z", "commit": {"oid": "f02751834e364edea430cd44c17cadd2628c0c1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjozMzo1N1rOIKBRGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjozMzo1N1rOIKBRGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM3NzQzNA==", "bodyText": "Added this to address browser errors with columns not having unique keys.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547377434", "createdAt": "2020-12-22T16:33:57Z", "author": {"login": "jamesrichard91"}, "path": "ui/src/main/js/field/TableDisplay.js", "diffHunk": "@@ -408,6 +408,7 @@ class TableDisplay extends Component {\n     createIconTableHeader(dataFormat, text) {\n         return (\n             <TableHeaderColumn\n+                key={`${text}Key`}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02751834e364edea430cd44c17cadd2628c0c1c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjA5NDYx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557209461", "createdAt": "2020-12-22T16:34:08Z", "commit": {"oid": "f02751834e364edea430cd44c17cadd2628c0c1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjozNDowOFrOIKBReA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjozNDowOFrOIKBReA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM3NzUyOA==", "bodyText": "Added this to address browser errors with columns not having unique keys.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547377528", "createdAt": "2020-12-22T16:34:08Z", "author": {"login": "jamesrichard91"}, "path": "ui/src/main/js/field/input/TableSelectInput.js", "diffHunk": "@@ -383,7 +383,7 @@ class TableSelectInput extends Component {\n         ));\n \n         // Need to add this column to the array as you can't display tableColumns dynamically and statically https://github.com/AllenFang/react-bootstrap-table/issues/1814\n-        tableColumns.push(<TableHeaderColumn dataField=\"missing\" dataFormat={assignDataFormat} hidden>Missing Data</TableHeaderColumn>);\n+        tableColumns.push(<TableHeaderColumn key=\"missingHeaderKey\" dataField=\"missing\" dataFormat={assignDataFormat} hidden>Missing Data</TableHeaderColumn>);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f02751834e364edea430cd44c17cadd2628c0c1c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjE3MTE1", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557217115", "createdAt": "2020-12-22T16:45:39Z", "commit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0NTozOVrOIKBpFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0NTozOVrOIKBpFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MzU3NA==", "bodyText": "Oh wow. This is probably a bug in a few other places as well. I'll create a ticket against 6.4.0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547383574", "createdAt": "2020-12-22T16:45:39Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/job/jira/cloud/JiraCloudJobDetailsAccessor.java", "diffHunk": "@@ -68,6 +67,8 @@ public JiraCloudJobDetailsEntity saveJiraCloudJobDetails(UUID jobId, JiraCloudJo\n         if (!customFieldsToSave.isEmpty()) {\n             List<JiraCloudJobCustomFieldEntity> savedCustomFields = jiraCloudJobCustomFieldRepository.saveAll(customFieldsToSave);\n             savedJobDetails.setJobCustomFields(savedCustomFields);\n+        } else {\n+            savedJobDetails.setJobCustomFields(List.of());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjIwMzk5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557220399", "createdAt": "2020-12-22T16:50:35Z", "commit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1MDozNVrOIKBzWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1MDozNVrOIKBzWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NjIwMg==", "bodyText": "Do we still need these fields in the DB if we aren't storing them with these tables? Does the UI config adequately handle the current dynamic field generation without these being stored?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547386202", "createdAt": "2020-12-22T16:50:35Z", "author": {"login": "gkillough"}, "path": "alert-database/src/main/resources/liquibase/6.4.0/jira-custom-fields.xml", "diffHunk": "@@ -76,4 +76,33 @@\n         />\n     </changeSet>\n \n+    <changeSet author=\"jrichard\" id=\"add-defined-field-field-mapping\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c84e4eefd05fde81a002422203f1a647daf8184", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1c84e4eefd05fde81a002422203f1a647daf8184", "committedDate": "2020-12-22T16:53:04Z", "message": "Fix: prevent new row being added when editing a row."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjI1NjI0", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557225624", "createdAt": "2020-12-22T16:58:40Z", "commit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1ODo0MFrOIKCDgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1ODo0MFrOIKCDgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM5MDMzOQ==", "bodyText": "We should put this in its own field group. \"Advanced\" or something. I think you can apply it to ConfigField.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547390339", "createdAt": "2020-12-22T16:58:40Z", "author": {"login": "gkillough"}, "path": "channel/src/main/java/com/synopsys/integration/alert/channel/jira/cloud/descriptor/JiraCloudDistributionUIConfig.java", "diffHunk": "@@ -67,8 +86,33 @@ public JiraCloudDistributionUIConfig() {\n         ConfigField resolveWorkflow = new TextInputConfigField(JiraCloudDescriptor.KEY_RESOLVE_WORKFLOW_TRANSITION, LABEL_RESOLVE_WORKFLOW_TRANSITION, DESCRIPTION_RESOLVE_WORKFLOW_TRANSITION);\n         ConfigField openWorkflow = new TextInputConfigField(JiraCloudDescriptor.KEY_OPEN_WORKFLOW_TRANSITION, LABEL_OPEN_WORKFLOW_TRANSITION, DESCRIPTION_OPEN_WORKFLOW_TRANSITION)\n                                        .applyRequiredRelatedField(resolveWorkflow.getKey());\n+        ConfigField fieldMapping = new FieldMappingEndpointField(JiraCloudDescriptor.KEY_FIELD_MAPPING, LABEL_FIELD_MAPPING, DESCRIPTION_FIELD_MAPPING, \"Jira Field\", \"Value\")\n+                                       .applyNewMappingTitle(\"Create Jira Field Mapping\")\n+                                       .applyValidationFunctions(this::validateFieldMapping);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjI2MDA5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#pullrequestreview-557226009", "createdAt": "2020-12-22T16:59:16Z", "commit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1OToxNlrOIKCE4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1OToxNlrOIKCE4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM5MDY5MQ==", "bodyText": "Same group comment here.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1316#discussion_r547390691", "createdAt": "2020-12-22T16:59:16Z", "author": {"login": "gkillough"}, "path": "channel/src/main/java/com/synopsys/integration/alert/channel/jira/server/descriptor/JiraServerDistributionUIConfig.java", "diffHunk": "@@ -64,8 +85,33 @@ public JiraServerDistributionUIConfig() {\n         ConfigField resolveWorkflow = new TextInputConfigField(JiraServerDescriptor.KEY_RESOLVE_WORKFLOW_TRANSITION, LABEL_RESOLVE_WORKFLOW_TRANSITION, DESCRIPTION_RESOLVE_WORKFLOW_TRANSITION);\n         ConfigField openWorkflow = new TextInputConfigField(JiraServerDescriptor.KEY_OPEN_WORKFLOW_TRANSITION, LABEL_OPEN_WORKFLOW_TRANSITION, DESCRIPTION_OPEN_WORKFLOW_TRANSITION)\n                                        .applyRequiredRelatedField(resolveWorkflow.getKey());\n+        ConfigField fieldMapping = new FieldMappingEndpointField(JiraCloudDescriptor.KEY_FIELD_MAPPING, LABEL_FIELD_MAPPING, DESCRIPTION_FIELD_MAPPING, \"Jira Field\", \"Value\")\n+                                       .applyNewMappingTitle(\"Create Jira Field Mapping\")\n+                                       .applyValidationFunctions(this::validateFieldMapping);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3dcd163b2e0782d1919e15cefe4ecaf558dd8c"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5649b0e0c25a9edb90fcbacc715469fb2bd130ac", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5649b0e0c25a9edb90fcbacc715469fb2bd130ac", "committedDate": "2020-12-22T17:19:22Z", "message": "Refactor: moving field mapping to a panel, and updating the field descriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e260a2ed0a64d538a65120f968535c488ae7f1e5", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e260a2ed0a64d538a65120f968535c488ae7f1e5", "committedDate": "2020-12-22T17:25:31Z", "message": "Fixing potential NPE with the JiraServerJobDetailsAccessor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2969, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}