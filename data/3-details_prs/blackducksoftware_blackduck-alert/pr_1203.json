{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NTA3NDM1", "number": 1203, "title": "Validate required related fields in custom actions", "bodyText": "Currently the UI only displays errors related to EndpointButton fields; however, the request was to fix those specific fields. A future enhancement would be to display errors on all types of Endpoint fields.", "createdAt": "2020-10-01T19:48:51Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203", "merged": true, "mergeCommit": {"oid": "218880e40bbd3817661fd2fe30cc4f39c3bb3306"}, "closed": true, "closedAt": "2020-10-02T17:11:12Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOSjO6gH2gAyNDk2NTA3NDM1OjNjZmM2YzE1MzU0OTZiNWRhYTFlZjFkYzVkNmQ0MWUxYjY4ZDhlNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOpK5TgH2gAyNDk2NTA3NDM1Ojk1NDhlZTU0YjdiNGE5N2FiM2ZhMDNiODI4MTgwMzZmNjU1YTcyNzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3cfc6c1535496b5daa1ef1dc5d6d41e1b68d8e6d", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/3cfc6c1535496b5daa1ef1dc5d6d41e1b68d8e6d", "committedDate": "2020-10-01T14:48:57Z", "message": "Fix(Field Processing): Commonize field processing components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d159ed62b4b8d236f3e3335eea5e1e2eda6116b3", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d159ed62b4b8d236f3e3335eea5e1e2eda6116b3", "committedDate": "2020-10-01T16:35:14Z", "message": "Fix(Custom Function Actions): Add related field validation to custom function actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e3c335a42ef36df1f7d6769e984345db1e875f0", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4e3c335a42ef36df1f7d6769e984345db1e875f0", "committedDate": "2020-10-01T19:10:58Z", "message": "Merge branch 'master' into gk_validate_related_fields_custom_endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c06327b936ec7c1b9d8eb37c2d4a49564575fdfa", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c06327b936ec7c1b9d8eb37c2d4a49564575fdfa", "committedDate": "2020-10-01T19:46:07Z", "message": "Fix(CustomActions): Include required related field validation in custom actions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNjY4MTM2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-500668136", "createdAt": "2020-10-01T19:49:36Z", "commit": {"oid": "4e3c335a42ef36df1f7d6769e984345db1e875f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTo0OTozNlrOHbYrNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTo0OTozNlrOHbYrNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3Nzg3Nw==", "bodyText": "This function is the primary change, most of the other changes are related to updating autowired constructor params.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#discussion_r498477877", "createdAt": "2020-10-01T19:49:36Z", "author": {"login": "gkillough"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/action/CustomFunctionAction.java", "diffHunk": "@@ -22,28 +22,53 @@\n  */\n package com.synopsys.integration.alert.common.action;\n \n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n import org.springframework.http.HttpStatus;\n import org.springframework.web.server.ResponseStatusException;\n \n+import com.github.jsonldjava.shaded.com.google.common.base.Predicate;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.FieldStatusSeverity;\n+import com.synopsys.integration.alert.common.descriptor.config.field.validation.FieldValidationUtility;\n import com.synopsys.integration.alert.common.rest.HttpServletContentWrapper;\n import com.synopsys.integration.alert.common.rest.ResponseFactory;\n import com.synopsys.integration.alert.common.rest.model.FieldModel;\n import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.common.util.DataStructureUtils;\n import com.synopsys.integration.exception.IntegrationException;\n \n public abstract class CustomFunctionAction<T> {\n     public static final String API_FUNCTION_URL = \"/api/function\";\n-    private AuthorizationManager authorizationManager;\n \n-    public CustomFunctionAction(AuthorizationManager authorizationManager) {\n+    private final String fieldKey;\n+    private final AuthorizationManager authorizationManager;\n+    private final DescriptorProcessor descriptorProcessor;\n+    private final FieldValidationUtility fieldValidationUtility;\n+\n+    public CustomFunctionAction(String fieldKey, AuthorizationManager authorizationManager, DescriptorProcessor descriptorProcessor, FieldValidationUtility fieldValidationUtility) {\n+        this.fieldKey = fieldKey;\n         this.authorizationManager = authorizationManager;\n+        this.descriptorProcessor = descriptorProcessor;\n+        this.fieldValidationUtility = fieldValidationUtility;\n     }\n \n     public ActionResponse<T> createResponse(FieldModel fieldModel, HttpServletContentWrapper servletContentWrapper) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e3c335a42ef36df1f7d6769e984345db1e875f0"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNjY5MTI4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-500669128", "createdAt": "2020-10-01T19:51:09Z", "commit": {"oid": "4e3c335a42ef36df1f7d6769e984345db1e875f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTo1MTowOVrOHbYt6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTo1MTowOVrOHbYt6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3ODU3MQ==", "bodyText": "This file contains some secondary changes. It is primarily making more methods public and updating the return types instead of modifying input parameters.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#discussion_r498478571", "createdAt": "2020-10-01T19:51:09Z", "author": {"login": "gkillough"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/descriptor/config/field/validation/FieldValidationUtility.java", "diffHunk": "@@ -33,14 +33,13 @@\n \n import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n-import com.synopsys.integration.alert.common.descriptor.config.field.validators.ValidationResult;\n import com.synopsys.integration.alert.common.enumeration.FieldType;\n import com.synopsys.integration.alert.common.rest.model.FieldModel;\n import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n \n @Component\n-public class FieldValidationAction {\n-    private final Logger logger = LoggerFactory.getLogger(FieldValidationAction.class);\n+public class FieldValidationUtility {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e3c335a42ef36df1f7d6769e984345db1e875f0"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/68eb83f1d704181194d8eb655bd0784929d57fb2", "committedDate": "2020-10-01T20:16:36Z", "message": "Fix(ConfigField): Replace applyRequiredRelatedField in endpoint select"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzAzMDYx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-500703061", "createdAt": "2020-10-01T20:42:32Z", "commit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDQ4MTk2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-501048196", "createdAt": "2020-10-02T11:11:52Z", "commit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMToxMTo1MlrOHbp1jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMToxMTo1MlrOHbp1jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc1OTA1NQ==", "bodyText": "I think you want to use Java's Predicate and not this Predicate object.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#discussion_r498759055", "createdAt": "2020-10-02T11:11:52Z", "author": {"login": "psantos1113"}, "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/action/CustomFunctionAction.java", "diffHunk": "@@ -22,28 +22,53 @@\n  */\n package com.synopsys.integration.alert.common.action;\n \n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n import org.springframework.http.HttpStatus;\n import org.springframework.web.server.ResponseStatusException;\n \n+import com.github.jsonldjava.shaded.com.google.common.base.Predicate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDU0NzI3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-501054727", "createdAt": "2020-10-02T11:25:00Z", "commit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMTIyOTI2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1203#pullrequestreview-501122926", "createdAt": "2020-10-02T13:13:54Z", "commit": {"oid": "68eb83f1d704181194d8eb655bd0784929d57fb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfb754c442228e676641f58324526ffbed1e5e82", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/bfb754c442228e676641f58324526ffbed1e5e82", "committedDate": "2020-10-02T14:31:00Z", "message": "Fix(CustomFunctionAction): Get all possible config fields for field model context to account for distribution jobs having multiple descriptors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02e7947813f123e839595fd0884c3b4c82aac180", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/02e7947813f123e839595fd0884c3b4c82aac180", "committedDate": "2020-10-02T15:39:28Z", "message": "Fix(Config Fields): Add logic to prevent collisions of ConfigFields in validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9548ee54b7b4a97ab3fa03b82818036f655a7272", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9548ee54b7b4a97ab3fa03b82818036f655a7272", "committedDate": "2020-10-02T17:10:11Z", "message": "Fix(Field Validation): Ensure all job models are available for extracting related fields during validation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2975, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}