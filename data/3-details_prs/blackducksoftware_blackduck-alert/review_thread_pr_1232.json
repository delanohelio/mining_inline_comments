{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTIyMzc3", "number": 1232, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyMjoxN1rOEydwHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozMjoyMVrOEyeFcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzUxNzEwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigControllerTestIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyMjoxN1rOHpH0gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyMjoxN1rOHpH0gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4MTc5Mw==", "bodyText": "This should index from zero for the back-end.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512881793", "createdAt": "2020-10-27T17:22:17Z", "author": {"login": "gkillough"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigControllerTestIT.java", "diffHunk": "@@ -84,27 +71,16 @@ public void setup() {\n \n     @Test\n     @WithMockUser(roles = AlertIntegrationTest.ROLE_ALERT_ADMIN)\n-    // FIXME replace with paged request equivalent\n-    @Ignore\n-    public void testGetConfig() throws Exception {\n-        ConfigurationJobModel emptyConfigurationModel = addJob(slackChannelKey.getUniversalKey(), blackDuckProviderKey.getUniversalKey(), Map.of());\n-        String configId = String.valueOf(emptyConfigurationModel.getJobId());\n+    public void testGetPage() throws Exception {\n+        int pageNumber = 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzU0NTIzOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyNzoxOFrOHpIFdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozMDoxN1rOHpIPNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4NjEzMg==", "bodyText": "Looks like some strange formatting here. We should keep them all one line or put them all on separate lines", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512886132", "createdAt": "2020-10-27T17:27:18Z", "author": {"login": "bamandel"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+\n+        Mockito.when(authorizationManager.hasCreatePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.anyReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasWritePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasDeletePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasExecutePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+    }\n+\n+    @Test\n+    public void createTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+        ConfigurationFieldModel configurationFieldModel = ConfigurationFieldModel.create(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME);\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+\n+        Mockito.when(fieldModelProcessor.performBeforeSaveAction(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(configurationFieldModelConverter.convertToConfigurationFieldModelMap(Mockito.any())).thenReturn(Map.of(\"Key\", configurationFieldModel));\n+        Mockito.when(jobAccessor.createJob(Mockito.anyCollection(), Mockito.anyCollection())).thenReturn(configurationJobModel);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(fieldModelProcessor.performAfterSaveAction(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4ODYyOA==", "bodyText": "save actions for some reason broke them up, I changed it manually and it seems to remain. I will update it for all of the cases its used in.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512888628", "createdAt": "2020-10-27T17:30:17Z", "author": {"login": "ChomickiM"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+\n+        Mockito.when(authorizationManager.hasCreatePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.anyReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasWritePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasDeletePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasExecutePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+    }\n+\n+    @Test\n+    public void createTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+        ConfigurationFieldModel configurationFieldModel = ConfigurationFieldModel.create(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME);\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+\n+        Mockito.when(fieldModelProcessor.performBeforeSaveAction(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(configurationFieldModelConverter.convertToConfigurationFieldModelMap(Mockito.any())).thenReturn(Map.of(\"Key\", configurationFieldModel));\n+        Mockito.when(jobAccessor.createJob(Mockito.anyCollection(), Mockito.anyCollection())).thenReturn(configurationJobModel);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(fieldModelProcessor.performAfterSaveAction(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4NjEzMg=="}, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 111}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzU1MDY2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyODoyMFrOHpII9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyODoyMFrOHpII9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4NzAyOA==", "bodyText": "Weird formatting here too.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512887028", "createdAt": "2020-10-27T17:28:20Z", "author": {"login": "bamandel"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+\n+        Mockito.when(authorizationManager.hasCreatePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.anyReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasWritePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasDeletePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasExecutePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+    }\n+\n+    @Test\n+    public void createTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+        ConfigurationFieldModel configurationFieldModel = ConfigurationFieldModel.create(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME);\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+\n+        Mockito.when(fieldModelProcessor.performBeforeSaveAction(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(configurationFieldModelConverter.convertToConfigurationFieldModelMap(Mockito.any())).thenReturn(Map.of(\"Key\", configurationFieldModel));\n+        Mockito.when(jobAccessor.createJob(Mockito.anyCollection(), Mockito.anyCollection())).thenReturn(configurationJobModel);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(fieldModelProcessor.performAfterSaveAction(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);\n+\n+        ActionResponse<JobFieldModel> jobFieldModelActionResponse = jobConfigActions.create(jobFieldModel);\n+\n+        assertTrue(jobFieldModelActionResponse.isSuccessful());\n+        assertTrue(jobFieldModelActionResponse.hasContent());\n+        assertEquals(HttpStatus.OK, jobFieldModelActionResponse.getHttpStatus());\n+    }\n+\n+    @Test\n+    public void createServerErrorTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+\n+        Mockito.doThrow(new AlertException(\"Exception for test\")).when(fieldModelProcessor).performBeforeSaveAction(Mockito.any());\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzU1MzQ2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyODo1NlrOHpIKtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzoyOToxNlrOHpIL3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4NzQ3Ng==", "bodyText": "formatting", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512887476", "createdAt": "2020-10-27T17:28:56Z", "author": {"login": "bamandel"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+\n+        Mockito.when(authorizationManager.hasCreatePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.anyReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasWritePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasDeletePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasExecutePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+    }\n+\n+    @Test\n+    public void createTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+        ConfigurationFieldModel configurationFieldModel = ConfigurationFieldModel.create(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME);\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+\n+        Mockito.when(fieldModelProcessor.performBeforeSaveAction(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(configurationFieldModelConverter.convertToConfigurationFieldModelMap(Mockito.any())).thenReturn(Map.of(\"Key\", configurationFieldModel));\n+        Mockito.when(jobAccessor.createJob(Mockito.anyCollection(), Mockito.anyCollection())).thenReturn(configurationJobModel);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(fieldModelProcessor.performAfterSaveAction(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);\n+\n+        ActionResponse<JobFieldModel> jobFieldModelActionResponse = jobConfigActions.create(jobFieldModel);\n+\n+        assertTrue(jobFieldModelActionResponse.isSuccessful());\n+        assertTrue(jobFieldModelActionResponse.hasContent());\n+        assertEquals(HttpStatus.OK, jobFieldModelActionResponse.getHttpStatus());\n+    }\n+\n+    @Test\n+    public void createServerErrorTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+\n+        Mockito.doThrow(new AlertException(\"Exception for test\")).when(fieldModelProcessor).performBeforeSaveAction(Mockito.any());\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);\n+\n+        ActionResponse<JobFieldModel> jobFieldModelActionResponse = jobConfigActions.create(jobFieldModel);\n+\n+        assertTrue(jobFieldModelActionResponse.isError());\n+        assertFalse(jobFieldModelActionResponse.hasContent());\n+        assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, jobFieldModelActionResponse.getHttpStatus());\n+    }\n+\n+    @Test\n+    public void getPageTest() throws Exception {\n+        int totalPages = 1;\n+        int pageNumber = 0;\n+        int pageSize = 10;\n+        DescriptorType descriptorType = DescriptorType.CHANNEL;\n+        RegisteredDescriptorModel registeredDescriptorModel = new RegisteredDescriptorModel(1L, \"descriptorName\", descriptorType.name());\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+        AlertPagedModel<ConfigurationJobModel> pageOfJobs = new AlertPagedModel(totalPages, pageNumber, pageSize, List.of(configurationJobModel));\n+\n+        Mockito.when(descriptorAccessor.getRegisteredDescriptors()).thenReturn(List.of(registeredDescriptorModel));\n+        Mockito.when(jobAccessor.getPageOfJobs(Mockito.anyInt(), Mockito.anyInt(), Mockito.anyCollection())).thenReturn(pageOfJobs);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 157}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4Nzc3Mw==", "bodyText": "Looks like it's for all instances of jobConfigActions", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512887773", "createdAt": "2020-10-27T17:29:16Z", "author": {"login": "bamandel"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+\n+        Mockito.when(authorizationManager.hasCreatePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.anyReadPermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasWritePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasDeletePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+        Mockito.when(authorizationManager.hasExecutePermission(Mockito.any(), Mockito.any())).thenReturn(true);\n+    }\n+\n+    @Test\n+    public void createTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+        ConfigurationFieldModel configurationFieldModel = ConfigurationFieldModel.create(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME);\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+\n+        Mockito.when(fieldModelProcessor.performBeforeSaveAction(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(configurationFieldModelConverter.convertToConfigurationFieldModelMap(Mockito.any())).thenReturn(Map.of(\"Key\", configurationFieldModel));\n+        Mockito.when(jobAccessor.createJob(Mockito.anyCollection(), Mockito.anyCollection())).thenReturn(configurationJobModel);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+        Mockito.when(fieldModelProcessor.performAfterSaveAction(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);\n+\n+        ActionResponse<JobFieldModel> jobFieldModelActionResponse = jobConfigActions.create(jobFieldModel);\n+\n+        assertTrue(jobFieldModelActionResponse.isSuccessful());\n+        assertTrue(jobFieldModelActionResponse.hasContent());\n+        assertEquals(HttpStatus.OK, jobFieldModelActionResponse.getHttpStatus());\n+    }\n+\n+    @Test\n+    public void createServerErrorTest() throws Exception {\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        JobFieldModel jobFieldModel = new JobFieldModel(jobId.toString(), Set.of(fieldModel));\n+\n+        Mockito.doThrow(new AlertException(\"Exception for test\")).when(fieldModelProcessor).performBeforeSaveAction(Mockito.any());\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);\n+\n+        ActionResponse<JobFieldModel> jobFieldModelActionResponse = jobConfigActions.create(jobFieldModel);\n+\n+        assertTrue(jobFieldModelActionResponse.isError());\n+        assertFalse(jobFieldModelActionResponse.hasContent());\n+        assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, jobFieldModelActionResponse.getHttpStatus());\n+    }\n+\n+    @Test\n+    public void getPageTest() throws Exception {\n+        int totalPages = 1;\n+        int pageNumber = 0;\n+        int pageSize = 10;\n+        DescriptorType descriptorType = DescriptorType.CHANNEL;\n+        RegisteredDescriptorModel registeredDescriptorModel = new RegisteredDescriptorModel(1L, \"descriptorName\", descriptorType.name());\n+        UUID jobId = UUID.randomUUID();\n+        FieldModel fieldModel = createFieldModel();\n+        ConfigurationJobModel configurationJobModel = new ConfigurationJobModel(jobId, Set.of(createConfigurationModel()));\n+        AlertPagedModel<ConfigurationJobModel> pageOfJobs = new AlertPagedModel(totalPages, pageNumber, pageSize, List.of(configurationJobModel));\n+\n+        Mockito.when(descriptorAccessor.getRegisteredDescriptors()).thenReturn(List.of(registeredDescriptorModel));\n+        Mockito.when(jobAccessor.getPageOfJobs(Mockito.anyInt(), Mockito.anyInt(), Mockito.anyCollection())).thenReturn(pageOfJobs);\n+        Mockito.when(configurationFieldModelConverter.convertToFieldModel(Mockito.any())).thenReturn(fieldModel);\n+\n+        JobConfigActions jobConfigActions = new JobConfigActions(authorizationManager, descriptorAccessor, configurationAccessor, jobAccessor, fieldModelProcessor, descriptorProcessor, configurationFieldModelConverter,\n+            globalConfigExistsValidator,\n+            pkixErrorResponseFactory, descriptorMap);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg4NzQ3Ng=="}, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 157}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzU3MTY5OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozMjoyMVrOHpIWDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozMjoyMVrOHpIWDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg5MDM4Mg==", "bodyText": "It might be better to add a JobConfigAction member to this class then initialize the object here. Cut down on some duplicate code.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1232#discussion_r512890382", "createdAt": "2020-10-27T17:32:21Z", "author": {"login": "bamandel"}, "path": "src/test/java/com/synopsys/integration/alert/web/api/job/JobConfigActionsTest.java", "diffHunk": "@@ -0,0 +1,856 @@\n+package com.synopsys.integration.alert.web.api.job;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+import org.springframework.http.HttpStatus;\n+\n+import com.synopsys.integration.alert.common.action.ActionResponse;\n+import com.synopsys.integration.alert.common.action.TestAction;\n+import com.synopsys.integration.alert.common.action.ValidationActionResponse;\n+import com.synopsys.integration.alert.common.descriptor.Descriptor;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorKey;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorMap;\n+import com.synopsys.integration.alert.common.descriptor.DescriptorProcessor;\n+import com.synopsys.integration.alert.common.descriptor.ProviderDescriptor;\n+import com.synopsys.integration.alert.common.descriptor.config.GlobalConfigExistsValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.errors.AlertFieldStatus;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ConfigContextEnum;\n+import com.synopsys.integration.alert.common.enumeration.DescriptorType;\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.exception.AlertFieldException;\n+import com.synopsys.integration.alert.common.exception.AlertMethodNotAllowedException;\n+import com.synopsys.integration.alert.common.message.model.MessageResult;\n+import com.synopsys.integration.alert.common.persistence.accessor.ConfigurationAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.DescriptorAccessor;\n+import com.synopsys.integration.alert.common.persistence.accessor.FieldUtility;\n+import com.synopsys.integration.alert.common.persistence.accessor.JobAccessor;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationFieldModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationJobModel;\n+import com.synopsys.integration.alert.common.persistence.model.ConfigurationModel;\n+import com.synopsys.integration.alert.common.persistence.model.RegisteredDescriptorModel;\n+import com.synopsys.integration.alert.common.persistence.util.ConfigurationFieldModelConverter;\n+import com.synopsys.integration.alert.common.rest.FieldModelProcessor;\n+import com.synopsys.integration.alert.common.rest.model.AlertPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+import com.synopsys.integration.alert.common.rest.model.FieldValueModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldModel;\n+import com.synopsys.integration.alert.common.rest.model.JobFieldStatuses;\n+import com.synopsys.integration.alert.common.rest.model.JobIdsValidationRequestModel;\n+import com.synopsys.integration.alert.common.rest.model.JobPagedModel;\n+import com.synopsys.integration.alert.common.rest.model.ValidationResponseModel;\n+import com.synopsys.integration.alert.common.security.authorization.AuthorizationManager;\n+import com.synopsys.integration.alert.component.certificates.web.PKIXErrorResponseFactory;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.rest.exception.IntegrationRestException;\n+\n+public class JobConfigActionsTest {\n+    private AuthorizationManager authorizationManager;\n+    private DescriptorAccessor descriptorAccessor;\n+    private ConfigurationAccessor configurationAccessor;\n+    private JobAccessor jobAccessor;\n+    private FieldModelProcessor fieldModelProcessor;\n+    private DescriptorProcessor descriptorProcessor;\n+    private ConfigurationFieldModelConverter configurationFieldModelConverter;\n+    private GlobalConfigExistsValidator globalConfigExistsValidator;\n+    private PKIXErrorResponseFactory pkixErrorResponseFactory;\n+    private DescriptorMap descriptorMap;\n+\n+    @BeforeEach\n+    public void init() {\n+        authorizationManager = Mockito.mock(AuthorizationManager.class);\n+        descriptorAccessor = Mockito.mock(DescriptorAccessor.class);\n+        configurationAccessor = Mockito.mock(ConfigurationAccessor.class);\n+        jobAccessor = Mockito.mock(JobAccessor.class);\n+        fieldModelProcessor = Mockito.mock(FieldModelProcessor.class);\n+        descriptorProcessor = Mockito.mock(DescriptorProcessor.class);\n+        configurationFieldModelConverter = Mockito.mock(ConfigurationFieldModelConverter.class);\n+        globalConfigExistsValidator = Mockito.mock(GlobalConfigExistsValidator.class);\n+        pkixErrorResponseFactory = Mockito.mock(PKIXErrorResponseFactory.class);\n+        descriptorMap = Mockito.mock(DescriptorMap.class);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26120398141d6d629c383682c9d2d7713b970d2d"}, "originalPosition": 86}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2324, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}