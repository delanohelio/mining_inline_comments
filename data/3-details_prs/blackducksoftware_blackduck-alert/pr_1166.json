{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2ODQ4MzA4", "number": 1166, "title": "Hide Summary processing type when issue tracker channel is selected", "bodyText": "", "createdAt": "2020-09-14T19:56:17Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1166", "merged": true, "mergeCommit": {"oid": "386d2fe63b5b7ccbfa38b5b724abb889474e11c5"}, "closed": true, "closedAt": "2020-09-15T17:05:13Z", "author": {"login": "jamesrichard91"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI4vC9AH2gAyNDg2ODQ4MzA4OjI2MTVjNTUwYzdmNTNlM2E3ODBhZTllZTVkNjgxMjI2Yzk2MTIzODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJK24cgH2gAyNDg2ODQ4MzA4OmIwOTM2YzZkMGM4ZjIzNzdkMzYxYjZhYzFhNjUxZWFmM2Y5MTAyODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2615c550c7f53e3a780ae9ee5d681226c9612388", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2615c550c7f53e3a780ae9ee5d681226c9612388", "committedDate": "2020-09-14T19:54:42Z", "message": "Refactor (Java): Updating the processing type so it is not shown as an option in the UI when an issue tracker channel is selected."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bc1e004261425b738f66a520ec89ab1ccf903ea", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0bc1e004261425b738f66a520ec89ab1ccf903ea", "committedDate": "2020-09-14T19:54:59Z", "message": "Merge branch '6.2.0' into jr_processing_type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bdcb1ae473e14651b9c4733bbfca62c133a0bad", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8bdcb1ae473e14651b9c4733bbfca62c133a0bad", "committedDate": "2020-09-14T19:57:20Z", "message": "adjusting comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b37eacf8ea3bd14df30f004b4317b4a464618ad7", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b37eacf8ea3bd14df30f004b4317b4a464618ad7", "committedDate": "2020-09-14T19:58:30Z", "message": "Updating field access"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTAwNjUx", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1166#pullrequestreview-488100651", "createdAt": "2020-09-14T20:04:18Z", "commit": {"oid": "b37eacf8ea3bd14df30f004b4317b4a464618ad7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDowNDoxOFrOHRkqmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMDowNDoxOFrOHRkqmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE4ODU3MA==", "bodyText": "Why not just make this condition the return statement?\nDIGEST doesn't really belong either IMO.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1166#discussion_r488188570", "createdAt": "2020-09-14T20:04:18Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/web/custom/ProcessingSelectCustomEndpoint.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.web.custom;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.google.gson.Gson;\n+import com.synopsys.integration.alert.common.action.CustomEndpointManager;\n+import com.synopsys.integration.alert.common.channel.issuetracker.IssueTrackerChannelKey;\n+import com.synopsys.integration.alert.common.descriptor.config.field.LabelValueSelectOption;\n+import com.synopsys.integration.alert.common.descriptor.config.field.endpoint.SelectCustomEndpoint;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ChannelDistributionUIConfig;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.ProviderDistributionUIConfig;\n+import com.synopsys.integration.alert.common.enumeration.ProcessingType;\n+import com.synopsys.integration.alert.common.exception.AlertException;\n+import com.synopsys.integration.alert.common.rest.ResponseFactory;\n+import com.synopsys.integration.alert.common.rest.model.FieldModel;\n+\n+@Component\n+public class ProcessingSelectCustomEndpoint extends SelectCustomEndpoint {\n+    private final List<String> issueTrackerChannelKeys;\n+\n+    @Autowired\n+    public ProcessingSelectCustomEndpoint(CustomEndpointManager customEndpointManager, ResponseFactory responseFactory, Gson gson, List<IssueTrackerChannelKey> issueTrackerChannelKeys) throws AlertException {\n+        super(ProviderDistributionUIConfig.KEY_PROCESSING_TYPE, customEndpointManager, responseFactory, gson);\n+        this.issueTrackerChannelKeys = issueTrackerChannelKeys.stream()\n+                                           .map(IssueTrackerChannelKey::getUniversalKey)\n+                                           .collect(Collectors.toList());\n+    }\n+\n+    @Override\n+    protected List<LabelValueSelectOption> createData(FieldModel fieldModel) throws AlertException {\n+        String channelName = fieldModel.getFieldValue(ChannelDistributionUIConfig.KEY_CHANNEL_NAME).orElse(\"\");\n+        return Arrays.stream(ProcessingType.values())\n+                   .filter(processingType -> this.shouldInclude(processingType, channelName))\n+                   .map(processingType -> new LabelValueSelectOption(processingType.getLabel(), processingType.name()))\n+                   .collect(Collectors.toList());\n+    }\n+\n+    private boolean shouldInclude(ProcessingType processingType, String channelName) {\n+        if (issueTrackerChannelKeys.contains(channelName) && processingType == ProcessingType.SUMMARY) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b37eacf8ea3bd14df30f004b4317b4a464618ad7"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Nzc4NTY2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1166#pullrequestreview-488778566", "createdAt": "2020-09-15T15:00:55Z", "commit": {"oid": "b37eacf8ea3bd14df30f004b4317b4a464618ad7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0936c6d0c8f2377d361b6ac1a651eaf3f910288", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b0936c6d0c8f2377d361b6ac1a651eaf3f910288", "committedDate": "2020-09-15T17:01:33Z", "message": "Updating the processing type inclusion method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3472, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}