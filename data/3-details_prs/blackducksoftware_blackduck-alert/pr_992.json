{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzg0ODQw", "number": 992, "title": "Separating gradle tasks into their own files", "bodyText": "", "createdAt": "2020-05-26T18:41:28Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992", "merged": true, "mergeCommit": {"oid": "710b7f512ce9715ec278ffedea997138d80ef10d"}, "closed": true, "closedAt": "2020-06-02T13:54:04Z", "author": {"login": "jamesrichard91"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj4L7wgH2gAyNDIzMzg0ODQwOjQ4MjBjZWM3MjFlM2FlYzE3ZmI2YTk2YmZjN2QzNDNhN2Q5YjNiYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnCY3fAH2gAyNDIzMzg0ODQwOmEyZWQ4YTRmZDg3NDVhZDg1OWE0OWQ4YzlmZmM5ZWJiYmE2MTUwNmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4820cec721e3aec17fb6a96bfc7d343a7d9b3bb5", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4820cec721e3aec17fb6a96bfc7d343a7d9b3bb5", "committedDate": "2020-05-22T20:21:09Z", "message": "Build: moving some of the tasks into a separate file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80d030073eeb8a7de5de9879ab256b1d06a42f4e", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/80d030073eeb8a7de5de9879ab256b1d06a42f4e", "committedDate": "2020-05-26T18:30:17Z", "message": "Refactor: Updating the docker task handling. Moving the new .gradle files into the buildSrc directory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa14cfe3334697496c838eba7055c8bd110eec7", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7fa14cfe3334697496c838eba7055c8bd110eec7", "committedDate": "2020-05-26T18:32:50Z", "message": "Merge branch 'jr_docker_build_update' into jr_build_cleanup\n\n# Conflicts:\n#\tbuild.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12c25ddccd14463823fa8fa0e4647d149ea5d81a", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/12c25ddccd14463823fa8fa0e4647d149ea5d81a", "committedDate": "2020-05-26T18:34:49Z", "message": "Merge branch 'jr_docker_build_update' into jr_build_cleanup\n\n# Conflicts:\n#\tbuild.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4bd31e396bf9fc14ac333d5c0908a84ecd485a2", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a4bd31e396bf9fc14ac333d5c0908a84ecd485a2", "committedDate": "2020-05-26T18:46:07Z", "message": "Fix: Updating the version tokens"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae02a58c1f6b97db7b9fd955045be97c29ba2dbf", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ae02a58c1f6b97db7b9fd955045be97c29ba2dbf", "committedDate": "2020-05-26T18:54:19Z", "message": "Merge branch 'master' into jr_build_cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTg1NTc3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-418585577", "createdAt": "2020-05-26T18:54:57Z", "commit": {"oid": "a4bd31e396bf9fc14ac333d5c0908a84ecd485a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTkzNjYz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-418593663", "createdAt": "2020-05-26T19:06:24Z", "commit": {"oid": "ae02a58c1f6b97db7b9fd955045be97c29ba2dbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjAxODc5", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-418601879", "createdAt": "2020-05-26T19:18:25Z", "commit": {"oid": "ae02a58c1f6b97db7b9fd955045be97c29ba2dbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4812a621797b3d36bcd8937ba458e2c8a269332", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a4812a621797b3d36bcd8937ba458e2c8a269332", "committedDate": "2020-05-28T21:10:39Z", "message": "Merge branch 'master' into jr_build_cleanup\n\n# Conflicts:\n#\tbuild.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f4acae58247de8c7982ad05f198c2f0975fd9c1", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/3f4acae58247de8c7982ad05f198c2f0975fd9c1", "committedDate": "2020-05-29T14:12:26Z", "message": "Build: updating the build files to set the postgres container version in the main build.gradle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMTIwMjYw", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-421120260", "createdAt": "2020-05-29T16:48:52Z", "commit": {"oid": "3f4acae58247de8c7982ad05f198c2f0975fd9c1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjo0ODo1MlrOGckaNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjo0ODo1MlrOGckaNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwOTg0Nw==", "bodyText": "Should this task be in the main gradle file since it is calling tasks from other gradle files?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#discussion_r432609847", "createdAt": "2020-05-29T16:48:52Z", "author": {"login": "psantos1113"}, "path": "buildSrc/docker.gradle", "diffHunk": "@@ -0,0 +1,55 @@\n+buildscript {\n+    repositories {\n+        mavenCentral()\n+    }\n+\n+    dependencies {\n+        classpath 'com.bmuschko:gradle-docker-plugin:6.4.0'\n+    }\n+}\n+\n+apply plugin: com.bmuschko.gradle.docker.DockerRemoteApiPlugin\n+\n+apply from: 'buildSrc/deploymentTasks.gradle'\n+\n+import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage\n+\n+task untarArchiveForDocker(type: Copy, dependsOn: [build]) {\n+    from tarTree(\"${project.buildDir}/distributions/blackduck-alert-boot-${project.version}.tar\")\n+    into \"${project.buildDir}/docker\"\n+}\n+\n+task stageDocker(type: Copy, dependsOn: [untarArchiveForDocker]) {\n+    into \"${project.buildDir}/docker\"\n+    from(\"${project.projectDir}\") {\n+        include 'Dockerfile'\n+        include 'docker-entrypoint.sh'\n+    }\n+    from(\"${project.buildDir}/distributions\") {\n+        include \"blackduck-alert-boot-${project.version}.tar\"\n+    }\n+}\n+\n+task buildDockerImage(type: DockerBuildImage, dependsOn: [stageDocker]) {\n+    inputDir = file(\"${project.buildDir}/docker\")\n+    buildArgs = ['VERSION': \"${project.version}\"]\n+    images.add(\"blackducksoftware/${project.name}:${project.version}\")\n+}\n+\n+task dockerLogin(type: Exec) {\n+    commandLine \"docker\", \"login\", \"--username\", \"$System.env.DOCKER_INT_BLACKDUCK_USER\", \"--password\", \"$System.env.DOCKER_INT_BLACKDUCK_PASSWORD\"\n+}\n+\n+task pushImage(type: Exec, dependsOn: [buildDockerImage]) {\n+    commandLine \"docker\", \"push\", \"blackducksoftware/${project.name}:${project.version}\"\n+}\n+\n+task all(dependsOn: [build, helmValidation, createDeploymentZip, dockerLogin, buildDockerImage, pushImage]) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4acae58247de8c7982ad05f198c2f0975fd9c1"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "929a11b7e395c5c7752d1dc11aac0d5945ea0139", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/929a11b7e395c5c7752d1dc11aac0d5945ea0139", "committedDate": "2020-06-01T15:50:40Z", "message": "Build: refactoring based on PR comments. Moving the 'all' task to the main build.gradle file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTY4NTcy", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-421968572", "createdAt": "2020-06-01T15:53:09Z", "commit": {"oid": "929a11b7e395c5c7752d1dc11aac0d5945ea0139"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTo1MzowOVrOGdQLhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTo1MzowOVrOGdQLhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzMyNjk4MA==", "bodyText": "Let's move this comment down to the line declaring the tags.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#discussion_r433326980", "createdAt": "2020-06-01T15:53:09Z", "author": {"login": "gkillough"}, "path": "build.gradle", "diffHunk": "@@ -22,21 +22,28 @@ plugins {\n }\n \n // Copied from src/test/java - com.synopsys.integration.alert.TestTags", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "929a11b7e395c5c7752d1dc11aac0d5945ea0139"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTY5NzA3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/992#pullrequestreview-421969707", "createdAt": "2020-06-01T15:54:36Z", "commit": {"oid": "929a11b7e395c5c7752d1dc11aac0d5945ea0139"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a459707ce1ac9a0d05b57ffb01af1d081d47165", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1a459707ce1ac9a0d05b57ffb01af1d081d47165", "committedDate": "2020-06-01T15:55:23Z", "message": "Build: Moving the test tag comment to the line defining the test tags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2ed8a4fd8745ad859a49d8c9ffc9ebbba61506b", "author": {"user": {"login": "jamesrichard91", "name": "James Richard"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a2ed8a4fd8745ad859a49d8c9ffc9ebbba61506b", "committedDate": "2020-06-01T15:56:06Z", "message": "Merge branch 'master' into jr_build_cleanup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2742, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}