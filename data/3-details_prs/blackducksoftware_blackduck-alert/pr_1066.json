{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4OTQ4MjE2", "number": 1066, "title": "Fix Jira Server Plugin Installation Validation", "bodyText": "", "createdAt": "2020-07-14T15:19:06Z", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066", "merged": true, "mergeCommit": {"oid": "945e7e2b1d6630b255bb81f19897bb1153876cd6"}, "closed": true, "closedAt": "2020-07-14T15:34:20Z", "author": {"login": "gkillough"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc03nj4AH2gAyNDQ4OTQ4MjE2Ojc0OWZjNzgxNjNkNzFhYWMwZTg1MTI4YTVlMzkzZjMyNjVjNDljODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc03qG9gFqTQ0ODIxMTAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83", "author": {"user": {"login": "gkillough", "name": "Gavin Killough"}}, "url": "https://github.com/blackducksoftware/blackduck-alert/commit/749fc78163d71aac0e85128a5e393f3265c49c83", "committedDate": "2020-07-14T15:18:08Z", "message": "Fix(Jira): Fix plugin installation validation by returning the error that was created but not returned"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjEwMTUz", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#pullrequestreview-448210153", "createdAt": "2020-07-14T15:19:57Z", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToxOTo1N1rOGxYpyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToxOTo1N1rOGxYpyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzMyMA==", "bodyText": "Having the return Optional.empty() after the try-catch makes it easy to forget to return/throw errors.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437320", "createdAt": "2020-07-14T15:19:57Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/channel/jira/cloud/web/JiraCustomEndpoint.java", "diffHunk": "@@ -95,8 +96,6 @@ public JiraCustomEndpoint(JiraChannelKey jiraChannelKey, CustomEndpointManager c\n             Thread.currentThread().interrupt();\n             return Optional.of(responseFactory.createInternalServerErrorResponse(\"\", \"Thread was interrupted while validating Jira plugin installation: \" + e.getMessage()));\n         }\n-\n-        return Optional.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjEwNjU4", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#pullrequestreview-448210658", "createdAt": "2020-07-14T15:20:29Z", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDoyOVrOGxYrYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDoyOVrOGxYrYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzcyOA==", "bodyText": "The actual fix.", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437728", "createdAt": "2020-07-14T15:20:29Z", "author": {"login": "gkillough"}, "path": "src/main/java/com/synopsys/integration/alert/channel/jira/server/web/JiraServerCustomEndpoint.java", "diffHunk": "@@ -92,15 +92,14 @@ public JiraServerCustomEndpoint(JiraServerChannelKey jiraChannelKey, CustomEndpo\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira server successfully installed the Jira Server plugin. Please verify the installation on you Jira server.\"));\n             }\n+            return Optional.empty();\n         } catch (IntegrationException e) {\n-            createBadRequestIntegrationException(e);\n+            return createBadRequestIntegrationException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjEwNzU3", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#pullrequestreview-448210757", "createdAt": "2020-07-14T15:20:37Z", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDozN1rOGxYrtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDozN1rOGxYrtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzgxMw==", "bodyText": "Is this change so we are consistent with the jira server change?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437813", "createdAt": "2020-07-14T15:20:37Z", "author": {"login": "jamesrichard91"}, "path": "src/main/java/com/synopsys/integration/alert/channel/jira/cloud/web/JiraCustomEndpoint.java", "diffHunk": "@@ -87,6 +87,7 @@ public JiraCustomEndpoint(JiraChannelKey jiraChannelKey, CustomEndpointManager c\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira Cloud successfully installed the Jira Cloud plugin. Please verify the installation on you Jira Cloud server.\"));\n             }\n+            return Optional.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjEwOTQ2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#pullrequestreview-448210946", "createdAt": "2020-07-14T15:20:49Z", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjExMDE2", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#pullrequestreview-448211016", "createdAt": "2020-07-14T15:20:55Z", "commit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDo1NVrOGxYsew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToyMDo1NVrOGxYsew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzODAxMQ==", "bodyText": "Was this the cause of the issue?", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454438011", "createdAt": "2020-07-14T15:20:55Z", "author": {"login": "jamesrichard91"}, "path": "src/main/java/com/synopsys/integration/alert/channel/jira/server/web/JiraServerCustomEndpoint.java", "diffHunk": "@@ -92,15 +92,14 @@ public JiraServerCustomEndpoint(JiraServerChannelKey jiraChannelKey, CustomEndpo\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira server successfully installed the Jira Server plugin. Please verify the installation on you Jira server.\"));\n             }\n+            return Optional.empty();\n         } catch (IntegrationException e) {\n-            createBadRequestIntegrationException(e);\n+            return createBadRequestIntegrationException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "749fc78163d71aac0e85128a5e393f3265c49c83"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2588, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}