{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MzY0Mzgx", "number": 1541, "title": "[HUDI-843] Add ability to specify time unit for  TimestampBasedKeyGenerator", "bodyText": "What is the purpose of the pull request\nAdding a way to specify any source time unit for TimestampBasedKeyGenerator.\nProperties probably need some refactoring, kept unix timestamp for backward compatibility\nBrief change log\n(for example:)\n\nupdated TimestampBasedKeyGenerator\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-04-21T00:01:11Z", "url": "https://github.com/apache/hudi/pull/1541", "merged": true, "mergeCommit": {"oid": "f094f4285782e1253b52fef788fa7461c67d95a7"}, "closed": true, "closedAt": "2020-05-14T20:37:59Z", "author": {"login": "afilipchik"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaBvaGAFqTM5Nzg1ODIyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchSkuJgFqTQxMjExNjAxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3ODU4MjI1", "url": "https://github.com/apache/hudi/pull/1541#pullrequestreview-397858225", "createdAt": "2020-04-22T05:42:21Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNTo0MjoyMlrOGJkUOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNTo0OToxMVrOGJkeMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NTM3MA==", "bodyText": "this is converting to ms, rather?", "url": "https://github.com/apache/hudi/pull/1541#discussion_r412685370", "createdAt": "2020-04-22T05:42:22Z", "author": {"login": "vinothchandar"}, "path": "hudi-utilities/src/main/java/org/apache/hudi/utilities/keygen/TimestampBasedKeyGenerator.java", "diffHunk": "@@ -123,4 +132,8 @@ public HoodieKey getKey(GenericRecord record) {\n       throw new HoodieDeltaStreamerException(\"Unable to parse input partition field :\" + partitionVal, pe);\n     }\n   }\n+\n+  private long convertLongTimeToSeconds(Long partitionVal) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NzM1Mg==", "bodyText": "this will break users setting EPOCHMILLISECONDS today.. Could we avoid this pain  and transparently handle this", "url": "https://github.com/apache/hudi/pull/1541#discussion_r412687352", "createdAt": "2020-04-22T05:47:44Z", "author": {"login": "vinothchandar"}, "path": "hudi-utilities/src/main/java/org/apache/hudi/utilities/keygen/TimestampBasedKeyGenerator.java", "diffHunk": "@@ -35,16 +35,21 @@\n import java.util.Collections;\n import java.util.Date;\n import java.util.TimeZone;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n \n /**\n  * Key generator, that relies on timestamps for partitioning field. Still picks record key by name.\n  */\n public class TimestampBasedKeyGenerator extends SimpleKeyGenerator {\n \n   enum TimestampType implements Serializable {\n-    UNIX_TIMESTAMP, DATE_STRING, MIXED, EPOCHMILLISECONDS", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NzkyMw==", "bodyText": "If this is set, we can make the timeunit be MILLISECONDS..", "url": "https://github.com/apache/hudi/pull/1541#discussion_r412687923", "createdAt": "2020-04-22T05:49:11Z", "author": {"login": "vinothchandar"}, "path": "hudi-utilities/src/main/java/org/apache/hudi/utilities/keygen/TimestampBasedKeyGenerator.java", "diffHunk": "@@ -35,16 +35,21 @@\n import java.util.Collections;\n import java.util.Date;\n import java.util.TimeZone;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n \n /**\n  * Key generator, that relies on timestamps for partitioning field. Still picks record key by name.\n  */\n public class TimestampBasedKeyGenerator extends SimpleKeyGenerator {\n \n   enum TimestampType implements Serializable {\n-    UNIX_TIMESTAMP, DATE_STRING, MIXED, EPOCHMILLISECONDS", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NzM1Mg=="}, "originalCommit": null, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "940cc6a7eb69f171831f8ccca17c6fd18da26109", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/940cc6a7eb69f171831f8ccca17c6fd18da26109", "committedDate": "2020-05-14T19:15:26Z", "message": "Add ability to specify time unit for  TimestampBasedKeyGenerator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01789f5d8f0be15c7c9ac410d831ef2640a27f37", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/01789f5d8f0be15c7c9ac410d831ef2640a27f37", "committedDate": "2020-05-14T19:15:26Z", "message": "updated inputDateFormat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8762940b3585404cafa044427d747a7bc8143d6e", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/8762940b3585404cafa044427d747a7bc8143d6e", "committedDate": "2020-05-14T19:15:26Z", "message": "Restoring EPOCHMILLISECONDS and making it more generic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c67ea61589bdb3c09f73709e326d5a067b8866b", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/8c67ea61589bdb3c09f73709e326d5a067b8866b", "committedDate": "2020-05-14T19:16:13Z", "message": "Added test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "4356e308d432808c5218f772f3f5ea48cb46a99d", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/4356e308d432808c5218f772f3f5ea48cb46a99d", "committedDate": "2020-05-14T19:23:43Z", "message": "Rename property without _"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "4356e308d432808c5218f772f3f5ea48cb46a99d", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/4356e308d432808c5218f772f3f5ea48cb46a99d", "committedDate": "2020-05-14T19:23:43Z", "message": "Rename property without _"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMTE2MDE1", "url": "https://github.com/apache/hudi/pull/1541#pullrequestreview-412116015", "createdAt": "2020-05-14T19:23:59Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3485, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}