{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MDQxMjU3", "number": 2324, "title": "[HUDI-1448] hudi dla sync support skip rt create", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\nhudi dla sync support skip rt create\nBrief change log\n(for example:)\n\nModify AnnotationLocation checkstyle rule in checkstyle.xml\n\nVerify this pull request\n(Please pick either of the following options)\nThis pull request is a trivial rework / code cleanup without any test coverage.\n(or)\nThis pull request is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end.\nAdded HoodieClientWriteTest to verify the change.\nManually verified the change by running a job locally.\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-12-10T16:00:54Z", "url": "https://github.com/apache/hudi/pull/2324", "merged": true, "mergeCommit": {"oid": "facde4c16f9a61e1c62ed268c869493696aa6a06"}, "closed": true, "closedAt": "2020-12-14T15:25:11Z", "author": {"login": "lw309637554"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlIdqCAFqTU1MDEyMzkwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmHab1AFqTU1MTQ3NjMyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTIzOTA4", "url": "https://github.com/apache/hudi/pull/2324#pullrequestreview-550123908", "createdAt": "2020-12-11T14:04:04Z", "commit": {"oid": "a340dcf877fc88c1200bb469a2bd919d531c632d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDowNDowNFrOID6ITg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDowNDowNFrOID6ITg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk2OTAzOA==", "bodyText": "should be Skip the _rt table syncing", "url": "https://github.com/apache/hudi/pull/2324#discussion_r540969038", "createdAt": "2020-12-11T14:04:04Z", "author": {"login": "leesf"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "diffHunk": "@@ -62,6 +62,9 @@\n   @Parameter(names = {\"--skip-ro-suffix\"}, description = \"Skip the `_ro` suffix for Read optimized table, when registering\")\n   public Boolean skipROSuffix = false;\n \n+  @Parameter(names = {\"--skip-rt-sync\"}, description = \"Skip the `_rt` suffix for Read optimized table, when registering\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a340dcf877fc88c1200bb469a2bd919d531c632d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTI4OTA2", "url": "https://github.com/apache/hudi/pull/2324#pullrequestreview-550128906", "createdAt": "2020-12-11T14:10:05Z", "commit": {"oid": "a340dcf877fc88c1200bb469a2bd919d531c632d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDoxMDowNlrOID6XUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDoxMDowNlrOID6XUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk3Mjg4Mg==", "bodyText": "MORsyncHoodieTable -> MOR table", "url": "https://github.com/apache/hudi/pull/2324#discussion_r540972882", "createdAt": "2020-12-11T14:10:06Z", "author": {"login": "leesf"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncTool.java", "diffHunk": "@@ -90,10 +90,12 @@ public void syncHoodieTable() {\n           syncHoodieTable(snapshotTableName, false);\n           break;\n         case MERGE_ON_READ:\n-          // sync a RO table for MOR\n+          // sync a RO table for MORsyncHoodieTable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a340dcf877fc88c1200bb469a2bd919d531c632d"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a340dcf877fc88c1200bb469a2bd919d531c632d", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/a340dcf877fc88c1200bb469a2bd919d531c632d", "committedDate": "2020-12-10T15:59:54Z", "message": "[HUDI-1448] hudi dla sync skip rt create"}, "afterCommit": {"oid": "6734e66d053883e2eeb2cb2f2843af43be4b07b8", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/6734e66d053883e2eeb2cb2f2843af43be4b07b8", "committedDate": "2020-12-12T14:44:03Z", "message": "[HUDI-1448] hudi dla sync skip rt create"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6734e66d053883e2eeb2cb2f2843af43be4b07b8", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/6734e66d053883e2eeb2cb2f2843af43be4b07b8", "committedDate": "2020-12-12T14:44:03Z", "message": "[HUDI-1448] hudi dla sync skip rt create"}, "afterCommit": {"oid": "3f26219053482162b44c57d1dae038ef16579968", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/3f26219053482162b44c57d1dae038ef16579968", "committedDate": "2020-12-12T14:46:26Z", "message": "[HUDI-1448] hudi dla sync skip rt create"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f26219053482162b44c57d1dae038ef16579968", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/3f26219053482162b44c57d1dae038ef16579968", "committedDate": "2020-12-12T14:46:26Z", "message": "[HUDI-1448] hudi dla sync skip rt create"}, "afterCommit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/c94a2f240993cae545390319c9c6906a2399291e", "committedDate": "2020-12-12T16:57:22Z", "message": "[HUDI-1448]  hudi dla sync skip rt create"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODc4NjU1", "url": "https://github.com/apache/hudi/pull/2324#pullrequestreview-550878655", "createdAt": "2020-12-13T02:36:47Z", "commit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMjozNjo0N1rOIEueyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMjozNjo0N1rOIEueyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgyNjc2MQ==", "bodyText": "just one more comment, here the default value set to false would be better, since some users have synced both ro and rt tables to dla as before and default.", "url": "https://github.com/apache/hudi/pull/2324#discussion_r541826761", "createdAt": "2020-12-13T02:36:47Z", "author": {"login": "leesf"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "diffHunk": "@@ -62,6 +62,9 @@\n   @Parameter(names = {\"--skip-ro-suffix\"}, description = \"Skip the `_ro` suffix for Read optimized table, when registering\")\n   public Boolean skipROSuffix = false;\n \n+  @Parameter(names = {\"--skip-rt-sync\"}, description = \"Skip the RT table syncing\")\n+  public Boolean skipRTSync = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODc4Njcy", "url": "https://github.com/apache/hudi/pull/2324#pullrequestreview-550878672", "createdAt": "2020-12-13T02:37:05Z", "commit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMjozNzowNVrOIEue8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMjozNzowNVrOIEue8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgyNjgwMQ==", "bodyText": "to false", "url": "https://github.com/apache/hudi/pull/2324#discussion_r541826801", "createdAt": "2020-12-13T02:37:05Z", "author": {"login": "leesf"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/util/Utils.java", "diffHunk": "@@ -69,6 +70,7 @@ public static DLASyncConfig propertiesToConfig(Properties properties) {\n     config.partitionValueExtractorClass = properties.getProperty(DLA_PARTITION_EXTRACTOR_CLASS_OPT_KEY);\n     config.assumeDatePartitioning = Boolean.parseBoolean(properties.getProperty(DLA_ASSUME_DATE_PARTITIONING, \"false\"));\n     config.skipROSuffix = Boolean.parseBoolean(properties.getProperty(DLA_SKIP_RO_SUFFIX, \"false\"));\n+    config.skipRTSync = Boolean.parseBoolean(properties.getProperty(DLA_SKIP_RT_SYNC, \"true\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d105c8c11333b3ba421f9a7a3ae1dbdb8bfdae6", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/1d105c8c11333b3ba421f9a7a3ae1dbdb8bfdae6", "committedDate": "2020-12-13T14:49:44Z", "message": "[HUDI-1448]  hudi dla sync skip rt create"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c94a2f240993cae545390319c9c6906a2399291e", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/c94a2f240993cae545390319c9c6906a2399291e", "committedDate": "2020-12-12T16:57:22Z", "message": "[HUDI-1448]  hudi dla sync skip rt create"}, "afterCommit": {"oid": "1d105c8c11333b3ba421f9a7a3ae1dbdb8bfdae6", "author": {"user": {"login": "lw309637554", "name": "lw0090"}}, "url": "https://github.com/apache/hudi/commit/1d105c8c11333b3ba421f9a7a3ae1dbdb8bfdae6", "committedDate": "2020-12-13T14:49:44Z", "message": "[HUDI-1448]  hudi dla sync skip rt create"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDc2MzI2", "url": "https://github.com/apache/hudi/pull/2324#pullrequestreview-551476326", "createdAt": "2020-12-14T15:24:34Z", "commit": {"oid": "1d105c8c11333b3ba421f9a7a3ae1dbdb8bfdae6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3981, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}