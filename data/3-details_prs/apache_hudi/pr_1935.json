{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0OTU4OTMy", "number": 1935, "title": "[HUDI-1121][DOC]Provide a document describing how to use callback", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\nAdd description of the config of write commit callback to describe how to use callback\nBrief change log\n(for example:)\n\nModify AnnotationLocation checkstyle rule in checkstyle.xml\n\nVerify this pull request\nThis pull request is a trivial rework / code cleanup without any test coverage.\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-08-08T05:40:29Z", "url": "https://github.com/apache/hudi/pull/1935", "merged": true, "mergeCommit": {"oid": "a6f991c4c2d72166fe8c898b6f63bb1d16ccd7a0"}, "closed": true, "closedAt": "2020-08-11T01:59:27Z", "author": {"login": "wangxianghu"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc82Ha5gFqTQ2Mzc5MzI4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9s9PzgFqTQ2NDY5ODI2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzkzMjgy", "url": "https://github.com/apache/hudi/pull/1935#pullrequestreview-463793282", "createdAt": "2020-08-08T10:04:31Z", "commit": {"oid": "3d29748e515b02db5c60b941b37fee877533553e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDowNDozMVrOG9yERA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDowNDozMVrOG9yERA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQzNjYxMg==", "bodyText": "would add #### HoodieWriteCommitHttpCallback before the following configs since the configs belong to HoodieWriteCommitHttpCallback", "url": "https://github.com/apache/hudi/pull/1935#discussion_r467436612", "createdAt": "2020-08-08T10:04:31Z", "author": {"login": "leesf"}, "path": "docs/_docs/2_4_configurations.md", "diffHunk": "@@ -510,3 +510,28 @@ Property: `hoodie.memory.compaction.fraction` <br/>\n #### withWriteStatusFailureFraction(failureFraction = 0.1) {#withWriteStatusFailureFraction}\n Property: `hoodie.memory.writestatus.failure.fraction` <br/>\n <span style=\"color:grey\">This property controls what fraction of the failed record, exceptions we report back to driver</span>\n+\n+#### Write commit callback configs\n+Controls callback behavior on write commit\n+[withCallbackConfig](#withCallbackConfig) (HoodieWriteCommitCallbackConfig) <br/>\n+<span style=\"color:grey\">Callback related configs</span>\n+\n+##### writeCommitCallbackOn(callbackOn = false) {#writeCommitCallbackOn} \n+Property: `hoodie.write.commit.callback.on` <br/>\n+<span style=\"color:grey\">Turn callback on/off. off by default.</span>\n+\n+##### withCallbackClass(callbackClass) {#withCallbackClass} \n+Property: `hoodie.write.commit.callback.class` <br/>\n+<span style=\"color:grey\">Full path of user-defined callback class and must be a subclass of HoodieWriteCommitCallback class, org.apache.hudi.callback.impl.HoodieWriteCommitHttpCallback by default</span>\n+\n+##### withCallbackHttpUrl(url) {#withCallbackHttpUrl} ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d29748e515b02db5c60b941b37fee877533553e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzkzMzYy", "url": "https://github.com/apache/hudi/pull/1935#pullrequestreview-463793362", "createdAt": "2020-08-08T10:05:50Z", "commit": {"oid": "3d29748e515b02db5c60b941b37fee877533553e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDowNTo1MFrOG9yGxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDowNTo1MFrOG9yGxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQzNzI1NQ==", "bodyText": "would describe in details, such as if enables the callback but failed to callback.", "url": "https://github.com/apache/hudi/pull/1935#discussion_r467437255", "createdAt": "2020-08-08T10:05:50Z", "author": {"login": "leesf"}, "path": "docs/_docs/2_4_configurations.md", "diffHunk": "@@ -510,3 +510,28 @@ Property: `hoodie.memory.compaction.fraction` <br/>\n #### withWriteStatusFailureFraction(failureFraction = 0.1) {#withWriteStatusFailureFraction}\n Property: `hoodie.memory.writestatus.failure.fraction` <br/>\n <span style=\"color:grey\">This property controls what fraction of the failed record, exceptions we report back to driver</span>\n+\n+#### Write commit callback configs\n+Controls callback behavior on write commit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d29748e515b02db5c60b941b37fee877533553e"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d29748e515b02db5c60b941b37fee877533553e", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/3d29748e515b02db5c60b941b37fee877533553e", "committedDate": "2020-08-08T05:38:31Z", "message": "[HUDI-1121]Provide a document describing how to use callback"}, "afterCommit": {"oid": "c72f1616720bc9277ce30dccd92dfa8a52a31be8", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/c72f1616720bc9277ce30dccd92dfa8a52a31be8", "committedDate": "2020-08-08T11:09:35Z", "message": "[HUDI-1121]Provide a document describing how to use callback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzk4MDM2", "url": "https://github.com/apache/hudi/pull/1935#pullrequestreview-463798036", "createdAt": "2020-08-08T11:41:51Z", "commit": {"oid": "c72f1616720bc9277ce30dccd92dfa8a52a31be8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMTo0MTo1MVrOG9zTyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMTo0MTo1MVrOG9zTyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ1Njk3MA==", "bodyText": "move into Write commit callback configs section would be better?", "url": "https://github.com/apache/hudi/pull/1935#discussion_r467456970", "createdAt": "2020-08-08T11:41:51Z", "author": {"login": "leesf"}, "path": "docs/_docs/2_4_configurations.md", "diffHunk": "@@ -510,3 +510,30 @@ Property: `hoodie.memory.compaction.fraction` <br/>\n #### withWriteStatusFailureFraction(failureFraction = 0.1) {#withWriteStatusFailureFraction}\n Property: `hoodie.memory.writestatus.failure.fraction` <br/>\n <span style=\"color:grey\">This property controls what fraction of the failed record, exceptions we report back to driver</span>\n+\n+### Write commit callback configs\n+Controls callback behavior on write commit. Exception will be thrown if user enabled the callback service and errors occurred during the process of callback. Currently support http callback only, kafka implementation will be supported in the near future. \n+[withCallbackConfig](#withCallbackConfig) (HoodieWriteCommitCallbackConfig) <br/>\n+<span style=\"color:grey\">Callback related configs</span>\n+\n+#### HoodieWriteCommitHttpCallback\n+\n+##### writeCommitCallbackOn(callbackOn = false) {#writeCommitCallbackOn} \n+Property: `hoodie.write.commit.callback.on` <br/>\n+<span style=\"color:grey\">Turn callback on/off. off by default.</span>\n+\n+##### withCallbackClass(callbackClass) {#withCallbackClass} \n+Property: `hoodie.write.commit.callback.class` <br/>\n+<span style=\"color:grey\">Full path of user-defined callback class and must be a subclass of HoodieWriteCommitCallback class, org.apache.hudi.callback.impl.HoodieWriteCommitHttpCallback by default</span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c72f1616720bc9277ce30dccd92dfa8a52a31be8"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c09300e8885d0b36a0de853a11dbab4cba818721", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/c09300e8885d0b36a0de853a11dbab4cba818721", "committedDate": "2020-08-08T12:12:59Z", "message": "[HUDI-1121]Provide a document describing how to use callback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c72f1616720bc9277ce30dccd92dfa8a52a31be8", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/c72f1616720bc9277ce30dccd92dfa8a52a31be8", "committedDate": "2020-08-08T11:09:35Z", "message": "[HUDI-1121]Provide a document describing how to use callback"}, "afterCommit": {"oid": "c09300e8885d0b36a0de853a11dbab4cba818721", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/c09300e8885d0b36a0de853a11dbab4cba818721", "committedDate": "2020-08-08T12:12:59Z", "message": "[HUDI-1121]Provide a document describing how to use callback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODAzODc4", "url": "https://github.com/apache/hudi/pull/1935#pullrequestreview-463803878", "createdAt": "2020-08-08T13:42:23Z", "commit": {"oid": "c09300e8885d0b36a0de853a11dbab4cba818721"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Njk4MjY1", "url": "https://github.com/apache/hudi/pull/1935#pullrequestreview-464698265", "createdAt": "2020-08-11T01:58:11Z", "commit": {"oid": "c09300e8885d0b36a0de853a11dbab4cba818721"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4804, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}