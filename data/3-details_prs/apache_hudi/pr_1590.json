{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNzA5ODk4", "number": 1590, "title": "[HUDI-812] Migrate hudi common tests to JUnit 5", "bodyText": "Migrate the test cases in hudi-common to JUnit 5.\nFollows #1589\nMigration status (after merging)\n\n\n\nPackage\nJUnit 5 lib\nAPI migration\nRestructure packages\n\n\n\n\nhudi-cli\n\u2705\n\u2705\n-\n\n\nhudi-client\n\u2705\n\u2705\n-\n\n\nhudi-common\n\u2705\n\u2705\n\ud83d\udea7\n\n\nhudi-hadoop-mr\n\u2705\n\u2705\n-\n\n\nhudi-hive-sync\n\u2705\n\u2705\n-\n\n\nhudi-integ-test\n\u2705\n\u2705\nN.A.\n\n\nhudi-spark\n\u2705\n\u2705\n-\n\n\nhudi-timeline-service\n\u2705\n\u2705\n-\n\n\nhudi-utilities\n\u2705\n\u2705\n-\n\n\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-05-04T02:27:06Z", "url": "https://github.com/apache/hudi/pull/1590", "merged": true, "mergeCommit": {"oid": "366bb10d8c4fe98424f09a6cf6f4aee7716451a4"}, "closed": true, "closedAt": "2020-05-06T11:15:21Z", "author": {"login": "xushiyan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd5ExMgBqjMyOTgzODY1MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcemyD8gFqTQwNjUxMzY0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c5e15818117688ab8425eeee7c56cdccb919bf8", "author": {"user": {"login": "xushiyan", "name": "Raymond Xu"}}, "url": "https://github.com/apache/hudi/commit/8c5e15818117688ab8425eeee7c56cdccb919bf8", "committedDate": "2020-05-04T15:52:25Z", "message": "[HUDI-812] Migrate hudi-common tests to JUnit 5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37fcab9c967d27c9e422440c2ff971bcc6a87273", "author": {"user": {"login": "xushiyan", "name": "Raymond Xu"}}, "url": "https://github.com/apache/hudi/commit/37fcab9c967d27c9e422440c2ff971bcc6a87273", "committedDate": "2020-05-04T15:52:25Z", "message": "update checkstyle rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "37fcab9c967d27c9e422440c2ff971bcc6a87273", "author": {"user": {"login": "xushiyan", "name": "Raymond Xu"}}, "url": "https://github.com/apache/hudi/commit/37fcab9c967d27c9e422440c2ff971bcc6a87273", "committedDate": "2020-05-04T15:52:25Z", "message": "update checkstyle rules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzI1NTEx", "url": "https://github.com/apache/hudi/pull/1590#pullrequestreview-404725511", "createdAt": "2020-05-04T06:09:52Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNjowOTo1MlrOGPzocA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNjoyNTowMlrOGPz3_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIyNzc2MA==", "bodyText": "\"system-rules\" is the only Junit 4 extension needed for setting env vars to run a test case in this class. It works fine with Junit 5. Hence these 2 imports ( org.junit.Rule and org.junit.contrib.*) are still here. Also exclude this in checkstyle.xml", "url": "https://github.com/apache/hudi/pull/1590#discussion_r419227760", "createdAt": "2020-05-04T06:09:52Z", "author": {"login": "xushiyan"}, "path": "hudi-common/src/test/java/org/apache/hudi/common/fs/TestFSUtils.java", "diffHunk": "@@ -18,25 +18,25 @@\n \n package org.apache.hudi.common.fs;\n \n-import org.apache.hudi.common.HoodieCommonTestHarness;\n import org.apache.hudi.common.model.HoodieLogFile;\n import org.apache.hudi.common.model.HoodieTestUtils;\n import org.apache.hudi.common.table.HoodieTableMetaClient;\n import org.apache.hudi.common.table.timeline.HoodieInstant;\n import org.apache.hudi.common.table.timeline.HoodieTimeline;\n+import org.apache.hudi.common.testutils.HoodieCommonTestHarness;\n import org.apache.hudi.exception.HoodieException;\n \n import org.apache.hadoop.conf.Configuration;\n import org.apache.hadoop.fs.Path;\n-import org.junit.Assert;\n-import org.junit.Before;\n import org.junit.Rule;\n-import org.junit.Test;\n import org.junit.contrib.java.lang.system.EnvironmentVariables;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIzMTc0Mg==", "bodyText": "Change to a RuntimeException in Junit 5", "url": "https://github.com/apache/hudi/pull/1590#discussion_r419231742", "createdAt": "2020-05-04T06:25:02Z", "author": {"login": "xushiyan"}, "path": "hudi-hive-sync/src/test/java/org/apache/hudi/hive/TestUtil.java", "diffHunk": "@@ -59,7 +59,7 @@\n import org.joda.time.DateTime;\n import org.joda.time.format.DateTimeFormat;\n import org.joda.time.format.DateTimeFormatter;\n-import org.junit.runners.model.InitializationError;\n+import org.junit.platform.commons.JUnitException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NTEzNjQ0", "url": "https://github.com/apache/hudi/pull/1590#pullrequestreview-406513644", "createdAt": "2020-05-06T11:14:53Z", "commit": {"oid": "37fcab9c967d27c9e422440c2ff971bcc6a87273"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3075, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}