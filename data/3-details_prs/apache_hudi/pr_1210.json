{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNzEzMTYy", "number": 1210, "title": "[HUDI-458] Redo hudi-hadoop-mr log statements using SLF4J", "bodyText": "What is the purpose of the pull request\nRedo hudi-hadoop-mr log statements using SLF4J\nBrief change log\nRedo hudi-hadoop-mr log statements using SLF4J\nVerify this pull request\nThis pull request should be covered by existing tests.\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-01-11T09:31:58Z", "url": "https://github.com/apache/hudi/pull/1210", "merged": true, "mergeCommit": {"oid": "8f8cd42e9792e0a9648b68f933929ad87cd503c5"}, "closed": true, "closedAt": "2020-01-13T03:18:09Z", "author": {"login": "wangxianghu"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5Pp5WgH2gAyMzYxNzEzMTYyOjAyMjE5Nzg4MzFhMzc4MTAwMzRlNzgxZWVmZjBjYjFiZGVmNjEzOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5zoWxgFqTM0MTYyNzI2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/0221978831a37810034e781eeff0cb1bdef6138b", "committedDate": "2020-01-11T09:22:57Z", "message": "[HUDI-458] Redo hudi-hadoop-mr log statements using SLF4J"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNTY2MzIz", "url": "https://github.com/apache/hudi/pull/1210#pullrequestreview-341566323", "createdAt": "2020-01-12T10:29:40Z", "commit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDoyOTo0MVrOFcoydQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDoyOTo0MVrOFcoydQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU3MjcyNQ==", "bodyText": "Hi @wangxianghu, may is [ ] is better, example:\nLOG.debug(\"The projection Ids: [{}] start with ','. First comma is removed\", columnIds);", "url": "https://github.com/apache/hudi/pull/1210#discussion_r365572725", "createdAt": "2020-01-12T10:29:41Z", "author": {"login": "lamberken"}, "path": "hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/realtime/HoodieParquetRealtimeInputFormat.java", "diffHunk": "@@ -210,7 +210,7 @@ private static Configuration cleanProjectionColumnIds(Configuration conf) {\n     if (!columnIds.isEmpty() && columnIds.charAt(0) == ',') {\n       conf.set(ColumnProjectionUtils.READ_COLUMN_IDS_CONF_STR, columnIds.substring(1));\n       if (LOG.isDebugEnabled()) {\n-        LOG.debug(\"The projection Ids: {\" + columnIds + \"} start with ','. First comma is removed\");\n+        LOG.debug(\"The projection Ids: {{}} start with ','. First comma is removed\", columnIds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNTY2Njg5", "url": "https://github.com/apache/hudi/pull/1210#pullrequestreview-341566689", "createdAt": "2020-01-12T10:37:55Z", "commit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDozNzo1NlrOFco0Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDozNzo1NlrOFco0Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU3MzE5OA==", "bodyText": "\ud83d\ude03 May be bellow is better:\nLOG.info(\"Hoodie consume mode pattern is : {}, mode is : {}\", modePropertyName, mode);", "url": "https://github.com/apache/hudi/pull/1210#discussion_r365573198", "createdAt": "2020-01-12T10:37:56Z", "author": {"login": "lamberken"}, "path": "hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieHiveUtil.java", "diffHunk": "@@ -43,20 +43,20 @@ public static Integer readMaxCommits(JobContext job, String tableName) {\n     if (maxCommits == MAX_COMMIT_ALL) {\n       maxCommits = Integer.MAX_VALUE;\n     }\n-    LOG.info(\"Read max commits - \" + maxCommits);\n+    LOG.info(\"Read max commits - {}\", maxCommits);\n     return maxCommits;\n   }\n \n   public static String readStartCommitTime(JobContext job, String tableName) {\n     String startCommitTimestampName = String.format(HOODIE_START_COMMIT_PATTERN, tableName);\n-    LOG.info(\"Read start commit time - \" + job.getConfiguration().get(startCommitTimestampName));\n+    LOG.info(\"Read start commit time - {}\", job.getConfiguration().get(startCommitTimestampName));\n     return job.getConfiguration().get(startCommitTimestampName);\n   }\n \n   public static String readMode(JobContext job, String tableName) {\n     String modePropertyName = String.format(HOODIE_CONSUME_MODE_PATTERN, tableName);\n     String mode = job.getConfiguration().get(modePropertyName, DEFAULT_SCAN_MODE);\n-    LOG.info(modePropertyName + \": \" + mode);\n+    LOG.info(\"{} : {}\", modePropertyName, mode);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/0221978831a37810034e781eeff0cb1bdef6138b", "committedDate": "2020-01-11T09:22:57Z", "message": "[HUDI-458] Redo hudi-hadoop-mr log statements using SLF4J"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0221978831a37810034e781eeff0cb1bdef6138b", "author": {"user": {"login": "wangxianghu", "name": "wangxianghu"}}, "url": "https://github.com/apache/hudi/commit/0221978831a37810034e781eeff0cb1bdef6138b", "committedDate": "2020-01-11T09:22:57Z", "message": "[HUDI-458] Redo hudi-hadoop-mr log statements using SLF4J"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22bd6b95a3559b31e1f194e0caf597f03e98ff8b", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/22bd6b95a3559b31e1f194e0caf597f03e98ff8b", "committedDate": "2020-01-13T02:15:00Z", "message": "minor fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNjIwNzMx", "url": "https://github.com/apache/hudi/pull/1210#pullrequestreview-341620731", "createdAt": "2020-01-13T02:21:27Z", "commit": {"oid": "22bd6b95a3559b31e1f194e0caf597f03e98ff8b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyMToyOFrOFcsZrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMjoyMTo0N1rOFcsZ0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMTkxOA==", "bodyText": "I think the auto indent was brought by idea. drop it.", "url": "https://github.com/apache/hudi/pull/1210#discussion_r365631918", "createdAt": "2020-01-13T02:21:28Z", "author": {"login": "sev7e0"}, "path": "hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/realtime/HoodieParquetRealtimeInputFormat.java", "diffHunk": "@@ -226,9 +226,9 @@ private static Configuration cleanProjectionColumnIds(Configuration conf) {\n     // actual heavy lifting of reading the parquet files happen.\n     if (job.get(HOODIE_READ_COLUMNS_PROP) == null) {\n       synchronized (job) {\n-        LOG.info(\n-            \"Before adding Hoodie columns, Projections :\" + job.get(ColumnProjectionUtils.READ_COLUMN_NAMES_CONF_STR)\n-                + \", Ids :\" + job.get(ColumnProjectionUtils.READ_COLUMN_IDS_CONF_STR));\n+        LOG.info(\"Before adding Hoodie columns, Projections : {}, Ids : {}\",\n+                job.get(ColumnProjectionUtils.READ_COLUMN_NAMES_CONF_STR),\n+                job.get(ColumnProjectionUtils.READ_COLUMN_IDS_CONF_STR));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22bd6b95a3559b31e1f194e0caf597f03e98ff8b"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMTk1NQ==", "bodyText": "\ud83c\udf1f Two lines is better, attention to auto indent.", "url": "https://github.com/apache/hudi/pull/1210#discussion_r365631955", "createdAt": "2020-01-13T02:21:47Z", "author": {"login": "sev7e0"}, "path": "hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieROTablePathFilter.java", "diffHunk": "@@ -144,30 +144,32 @@ public boolean accept(Path path) {\n           if (!hoodiePathCache.containsKey(folder.toString())) {\n             hoodiePathCache.put(folder.toString(), new HashSet<>());\n           }\n-          LOG.info(\"Based on hoodie metadata from base path: \" + baseDir.toString() + \", caching \" + latestFiles.size()\n-              + \" files under \" + folder);\n+          LOG.info(\"Based on hoodie metadata from base path: {}, caching {} files under {}\",\n+                  baseDir,\n+                  latestFiles.size(),\n+                  folder);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22bd6b95a3559b31e1f194e0caf597f03e98ff8b"}, "originalPosition": 66}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcad6c4e0068e5272fb347d9efccc8f05fe537ff", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/dcad6c4e0068e5272fb347d9efccc8f05fe537ff", "committedDate": "2020-01-13T02:31:32Z", "message": "fix auto indent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNjI3MjYw", "url": "https://github.com/apache/hudi/pull/1210#pullrequestreview-341627260", "createdAt": "2020-01-13T03:17:51Z", "commit": {"oid": "dcad6c4e0068e5272fb347d9efccc8f05fe537ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4037, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}