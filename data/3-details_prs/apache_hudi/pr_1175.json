{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MTE4MTc5", "number": 1175, "title": "[HUDI-495] Update deprecated HBase API", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\nJira: https://jira.apache.org/jira/browse/HUDI-495\nInternally we are using HBase 2.x, and HBase 2.x no longer supports Htable.flushCommits() and it is replaced by BufferedMutator.flush().\nThus for put operation and delete operation, we can use BufferedMutator instead.\nBrief change log\n\nReplace HTable with BufferedMutator\n\nVerify this pull request\nThis pull request is already covered by existing tests, such as (please describe tests).\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-01-03T20:47:30Z", "url": "https://github.com/apache/hudi/pull/1175", "merged": true, "mergeCommit": {"oid": "aba83876e7c20e8c2402c74c2465ef3ebc93ef85"}, "closed": true, "closedAt": "2020-01-08T18:26:48Z", "author": {"login": "zhedoubushishi"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb23PcMgFqTMzODMxODQxNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4ZootAFqTM0MDA1NjMzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzE4NDE2", "url": "https://github.com/apache/hudi/pull/1175#pullrequestreview-338318416", "createdAt": "2020-01-03T23:48:28Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QyMzo0ODoyOVrOFaLi1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QyMzo0ODoyOVrOFaLi1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5NjQzNg==", "bodyText": "Could you comment with a small snippet of the doc mentioning this is the new API ?", "url": "https://github.com/apache/hudi/pull/1175#discussion_r362996436", "createdAt": "2020-01-03T23:48:29Z", "author": {"login": "n3nash"}, "path": "hudi-client/src/main/java/org/apache/hudi/index/hbase/HBaseIndex.java", "diffHunk": "@@ -287,13 +289,10 @@ private boolean checkIfValidCommit(HoodieTableMetaClient metaClient, String comm\n           hbaseConnection = getHBaseConnection();\n         }\n       }\n-      HTable hTable = null;\n-      try {\n-        hTable = (HTable) hbaseConnection.getTable(TableName.valueOf(tableName));\n+      try (BufferedMutator mutator = hbaseConnection.getBufferedMutator(TableName.valueOf(tableName))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3029ade578f717ba337db4316f1686ca0a2c02d", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/e3029ade578f717ba337db4316f1686ca0a2c02d", "committedDate": "2020-01-06T23:40:43Z", "message": "Update deprecated HBase API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDIyMTIz", "url": "https://github.com/apache/hudi/pull/1175#pullrequestreview-339022123", "createdAt": "2020-01-07T04:08:41Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "e3029ade578f717ba337db4316f1686ca0a2c02d", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/e3029ade578f717ba337db4316f1686ca0a2c02d", "committedDate": "2020-01-06T23:40:43Z", "message": "Update deprecated HBase API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDU2MzMw", "url": "https://github.com/apache/hudi/pull/1175#pullrequestreview-340056330", "createdAt": "2020-01-08T18:26:42Z", "commit": {"oid": "e3029ade578f717ba337db4316f1686ca0a2c02d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4235, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}