{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NjM2NDY4", "number": 1290, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxOToxMzozN1rODbsE1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDoxMzoxMlrODkI96Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzYwMjc4OnYy", "diffSide": "LEFT", "path": "hudi-cli/src/main/java/org/apache/hudi/cli/commands/HoodieLogFileCommand.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxOToxMzozN1rOFjUWhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwODo0NzoxMVrOFjjKlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NzkyNQ==", "bodyText": "just leave it as instantTime ? (also this change is different from what the PR says so lets not have it in this PR)", "url": "https://github.com/apache/hudi/pull/1290#discussion_r372577925", "createdAt": "2020-01-29T19:13:37Z", "author": {"login": "n3nash"}, "path": "hudi-cli/src/main/java/org/apache/hudi/cli/commands/HoodieLogFileCommand.java", "diffHunk": "@@ -104,7 +104,7 @@ public String showLogFileCommits(\n           try {\n             instantTime = n.getLogBlockHeader().get(HeaderMetadataType.INSTANT_TIME);\n             if (instantTime == null) {\n-              throw new Exception(\"Invalid instant time \" + instantTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjYwNTc2Ng==", "bodyText": "@n3nash thanks for your comment, IMO, it's a minor change (which has no function impact) may be no need separate PR.\nFor the minor change: The instantTime variable is known to be null.\n\"Invalid instant time \" + null", "url": "https://github.com/apache/hudi/pull/1290#discussion_r372605766", "createdAt": "2020-01-29T20:11:03Z", "author": {"login": "lamberken"}, "path": "hudi-cli/src/main/java/org/apache/hudi/cli/commands/HoodieLogFileCommand.java", "diffHunk": "@@ -104,7 +104,7 @@ public String showLogFileCommits(\n           try {\n             instantTime = n.getLogBlockHeader().get(HeaderMetadataType.INSTANT_TIME);\n             if (instantTime == null) {\n-              throw new Exception(\"Invalid instant time \" + instantTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NzkyNQ=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcwNzQzMA==", "bodyText": "Right, I agree it's a minor change and doesn't need a new PR. But I don't think we need this change", "url": "https://github.com/apache/hudi/pull/1290#discussion_r372707430", "createdAt": "2020-01-30T00:38:57Z", "author": {"login": "n3nash"}, "path": "hudi-cli/src/main/java/org/apache/hudi/cli/commands/HoodieLogFileCommand.java", "diffHunk": "@@ -104,7 +104,7 @@ public String showLogFileCommits(\n           try {\n             instantTime = n.getLogBlockHeader().get(HeaderMetadataType.INSTANT_TIME);\n             if (instantTime == null) {\n-              throw new Exception(\"Invalid instant time \" + instantTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NzkyNQ=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgyMDYyOA==", "bodyText": "@n3nash follow you, reverted.", "url": "https://github.com/apache/hudi/pull/1290#discussion_r372820628", "createdAt": "2020-01-30T08:47:11Z", "author": {"login": "lamberken"}, "path": "hudi-cli/src/main/java/org/apache/hudi/cli/commands/HoodieLogFileCommand.java", "diffHunk": "@@ -104,7 +104,7 @@ public String showLogFileCommits(\n           try {\n             instantTime = n.getLogBlockHeader().get(HeaderMetadataType.INSTANT_TIME);\n             if (instantTime == null) {\n-              throw new Exception(\"Invalid instant time \" + instantTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NzkyNQ=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MjIxOTM2OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDoxMDoxOVrOFwTK2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDoxMDoxOVrOFwTK2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MDA0MQ==", "bodyText": "can we also add the --package  instruction here to explicitly say how to add spark-avro if building without it.", "url": "https://github.com/apache/hudi/pull/1290#discussion_r386190041", "createdAt": "2020-03-02T04:10:19Z", "author": {"login": "bhasudha"}, "path": "README.md", "diffHunk": "@@ -71,6 +71,14 @@ The default Scala version supported is 2.11. To build for Scala 2.12 version, bu\n mvn clean package -DskipTests -DskipITs -Dscala-2.12\n ```\n \n+### Build without spark-avro module\n+\n+The default hudi-jar bundles spark-avro module. To build without spark-avro module, build using `spark-shade-unbundle-avro` profile", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MjIyMjQ5OnYy", "diffSide": "RIGHT", "path": "packaging/hudi-spark-bundle/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDoxMzoxMlrOFwTMoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNjoxMDozMFrOFwUeWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MDQ5Ng==", "bodyText": "@lamber-ken I see a '/' here for the property \"spark.bundle.spark.shade.prefix\" if the profile is activated. Is this intended? Does this mean shade with empty prefix (same as not shading)? I dont know much about profiling either so wanted to clarify with you.", "url": "https://github.com/apache/hudi/pull/1290#discussion_r386190496", "createdAt": "2020-03-02T04:13:12Z", "author": {"login": "bhasudha"}, "path": "packaging/hudi-spark-bundle/pom.xml", "diffHunk": "@@ -248,6 +260,13 @@\n         <spark.bundle.hive.shade.prefix>org.apache.hudi.</spark.bundle.hive.shade.prefix>\n       </properties>\n     </profile>\n+    <profile>\n+      <id>spark-shade-unbundle-avro</id>\n+      <properties>\n+        <spark.bundle.avro.scope>provided</spark.bundle.avro.scope>\n+        <spark.bundle.spark.shade.prefix>/</spark.bundle.spark.shade.prefix>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIxMTQxOQ==", "bodyText": "Good catch", "url": "https://github.com/apache/hudi/pull/1290#discussion_r386211419", "createdAt": "2020-03-02T06:10:30Z", "author": {"login": "lamberken"}, "path": "packaging/hudi-spark-bundle/pom.xml", "diffHunk": "@@ -248,6 +260,13 @@\n         <spark.bundle.hive.shade.prefix>org.apache.hudi.</spark.bundle.hive.shade.prefix>\n       </properties>\n     </profile>\n+    <profile>\n+      <id>spark-shade-unbundle-avro</id>\n+      <properties>\n+        <spark.bundle.avro.scope>provided</spark.bundle.avro.scope>\n+        <spark.bundle.spark.shade.prefix>/</spark.bundle.spark.shade.prefix>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MDQ5Ng=="}, "originalCommit": null, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 24, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}