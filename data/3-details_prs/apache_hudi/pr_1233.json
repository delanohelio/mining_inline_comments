{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMzk2Mjk1", "number": 1233, "title": "[HUDI-335] Improvements to DiskBasedMap used by ExternalSpillableMap,\u2026", "bodyText": "[HUDI-335] Improvements to DiskBasedMap used by ExternalSpillableMap, for write and random/sequential read paths, by introducing bufferedRandmomAccessFile\nWhat is the purpose of the pull request\nDiskBasedMap is used by ExternalSpillableMap for writing (K,V) pair to a file,\nkeeping the (K, fileMetadata) in memory, to reduce the foot print of the record on disk.\nThis change improves the performance of the record get/read (random read/sequential read) and put/write operations from/to disk, by introducing a data buffer/cache.\nBrief change log\nUsing BufferedRandomAccessFile instead of RandomAccessFile, in read path.\nUsing BufferedOutputStream in the write path.\nVerify this pull request\nThis pull request is covered by existing tests, such as TestDiskBasedMap:testSimpleInsert\nCommitter checklist\n\n\n[ x] Has a corresponding JIRA in PR title & commit\n\n\n[x ] Commit message is descriptive of the change\n\n\n[ x] CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-01-16T00:15:03Z", "url": "https://github.com/apache/hudi/pull/1233", "merged": true, "mergeCommit": {"oid": "dd09abb56d9e4074f5c2558fcfd001a33570e98c"}, "closed": true, "closedAt": "2020-01-16T00:45:46Z", "author": {"login": "nbalajee"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6CikHAH2gAyMzYzMzk2Mjk1OmJiOGIxNzViOWVjYjJkMGFmNjdhZTAzZDIwMzJhOGNhMGU5M2RmMjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7nCW4AFqTM0NDk1NDI0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb8b175b9ecb2d0af67ae03d2032a8ca0e93df22", "author": {"user": {"login": "nbalajee", "name": "Balajee Nagasubramaniam"}}, "url": "https://github.com/apache/hudi/commit/bb8b175b9ecb2d0af67ae03d2032a8ca0e93df22", "committedDate": "2020-01-13T20:40:06Z", "message": "[HUDI-335] Improvements to DiskBasedMap used by ExternalSpillableMap, for write and random/sequential read paths, by introducing bufferedRandmomAccessFile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNjE0NTc3", "url": "https://github.com/apache/hudi/pull/1233#pullrequestreview-343614577", "createdAt": "2020-01-16T00:45:34Z", "commit": {"oid": "bb8b175b9ecb2d0af67ae03d2032a8ca0e93df22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTU0MjQz", "url": "https://github.com/apache/hudi/pull/1233#pullrequestreview-344954243", "createdAt": "2020-01-18T17:45:19Z", "commit": {"oid": "bb8b175b9ecb2d0af67ae03d2032a8ca0e93df22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNzo0NToxOVrOFfLhfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNzo0NToxOVrOFfLhfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzODk3NQ==", "bodyText": "@n3nash @nbalajee is this our own implementation?", "url": "https://github.com/apache/hudi/pull/1233#discussion_r368238975", "createdAt": "2020-01-18T17:45:19Z", "author": {"login": "vinothchandar"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/util/BufferedRandomAccessFile.java", "diffHunk": "@@ -0,0 +1,411 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hudi.common.util;\n+\n+import org.apache.log4j.Logger;\n+\n+import java.io.File;\n+import java.io.FileNotFoundException;\n+import java.io.IOException;\n+import java.io.RandomAccessFile;\n+import java.nio.ByteBuffer;\n+\n+/**\n+ * Use a private buffer for the read/write/seek operations of the RandomAccessFile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb8b175b9ecb2d0af67ae03d2032a8ca0e93df22"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4084, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}