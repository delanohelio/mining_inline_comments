{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NzYyMDkw", "number": 1822, "title": "[HUDI-766]: added section for HoodieMultiTableDeltaStreamer", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\n(For example: This pull request adds quick-start document.)\nBrief change log\n(for example:)\n\nModify AnnotationLocation checkstyle rule in checkstyle.xml\n\nVerify this pull request\n(Please pick either of the following options)\nThis pull request is a trivial rework / code cleanup without any test coverage.\n(or)\nThis pull request is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end.\nAdded HoodieClientWriteTest to verify the change.\nManually verified the change by running a job locally.\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-07-11T12:27:07Z", "url": "https://github.com/apache/hudi/pull/1822", "merged": true, "mergeCommit": {"oid": "bdad1bf38190d8f21efde30e549c173b5b9bf115"}, "closed": true, "closedAt": "2020-08-13T06:29:39Z", "author": {"login": "pratyakshsharma"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcz3W48AH2gAyNDQ3NzYyMDkwOjBjZjQ3YWM3OTZmNWY3NWQ0NTE3ODA4NzVkOWZlMjJlNGIxZWY3YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-aAVYgFqTQ2NjQ3NjEwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0cf47ac796f5f75d451780875d9fe22e4b1ef7b6", "author": {"user": {"login": "pratyakshsharma", "name": "Pratyaksh Sharma"}}, "url": "https://github.com/apache/hudi/commit/0cf47ac796f5f75d451780875d9fe22e4b1ef7b6", "committedDate": "2020-07-11T12:26:00Z", "message": "[HUDI-766]: added section for HoodieMultiTableDeltaStreamer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2ODA5NDM3", "url": "https://github.com/apache/hudi/pull/1822#pullrequestreview-446809437", "createdAt": "2020-07-11T15:22:38Z", "commit": {"oid": "0cf47ac796f5f75d451780875d9fe22e4b1ef7b6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2ODA5NDkz", "url": "https://github.com/apache/hudi/pull/1822#pullrequestreview-446809493", "createdAt": "2020-07-11T15:23:32Z", "commit": {"oid": "0cf47ac796f5f75d451780875d9fe22e4b1ef7b6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ff8abe5bdcd6e0ac807603388d3cf74c7d5c09a", "author": {"user": {"login": "pratyakshsharma", "name": "Pratyaksh Sharma"}}, "url": "https://github.com/apache/hudi/commit/4ff8abe5bdcd6e0ac807603388d3cf74c7d5c09a", "committedDate": "2020-07-11T15:48:12Z", "message": "[HUDI-766]: small changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzU5MDgw", "url": "https://github.com/apache/hudi/pull/1822#pullrequestreview-447759080", "createdAt": "2020-07-14T03:27:49Z", "commit": {"oid": "4ff8abe5bdcd6e0ac807603388d3cf74c7d5c09a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMzoyNzo0OVrOGxCpEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMzoyOTo1MlrOGxCrGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA3NjY5MA==", "bodyText": "ingest multiple topics at a single go ... ?", "url": "https://github.com/apache/hudi/pull/1822#discussion_r454076690", "createdAt": "2020-07-14T03:27:49Z", "author": {"login": "vinothchandar"}, "path": "docs/_docs/2_2_writing_data.md", "diffHunk": "@@ -174,6 +174,42 @@ and then ingest it as follows.\n \n In some cases, you may want to migrate your existing table into Hudi beforehand. Please refer to [migration guide](/docs/migration_guide.html). \n \n+## MultiTableDeltaStreamer\n+\n+`HoodieMultiTableDeltaStreamer`, a wrapper on top of `HoodieDeltaStreamer`, enables one to ingest multiple tables at a go into hudi datasets. Currently it only supports sequential processing of tables to be ingested and COPY_ON_WRITE storage type. The command line options for `HoodieMultiTableDeltaStreamer` are pretty much similar to `HoodieDeltaStreamer` with the only exception that you are required to provide table wise configs in separate files in a dedicated config folder. The following command line options are introduced", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ff8abe5bdcd6e0ac807603388d3cf74c7d5c09a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA3NzIxMQ==", "bodyText": "do we specify a --target-table ?", "url": "https://github.com/apache/hudi/pull/1822#discussion_r454077211", "createdAt": "2020-07-14T03:29:52Z", "author": {"login": "vinothchandar"}, "path": "docs/_docs/2_2_writing_data.md", "diffHunk": "@@ -174,6 +174,42 @@ and then ingest it as follows.\n \n In some cases, you may want to migrate your existing table into Hudi beforehand. Please refer to [migration guide](/docs/migration_guide.html). \n \n+## MultiTableDeltaStreamer\n+\n+`HoodieMultiTableDeltaStreamer`, a wrapper on top of `HoodieDeltaStreamer`, enables one to ingest multiple tables at a go into hudi datasets. Currently it only supports sequential processing of tables to be ingested and COPY_ON_WRITE storage type. The command line options for `HoodieMultiTableDeltaStreamer` are pretty much similar to `HoodieDeltaStreamer` with the only exception that you are required to provide table wise configs in separate files in a dedicated config folder. The following command line options are introduced\n+\n+```java\n+  * --config-folder\n+    the path to the folder which contains all the table wise config files\n+    --base-path-prefix\n+    this is added to enable users to create all the hudi datasets for related tables under one path in FS. The datasets are then created under the path - <base_path_prefix>/<database>/<table_to_be_ingested>. However you can override the paths for every table by setting the property hoodie.deltastreamer.ingestion.targetBasePath\n+```\n+\n+The following properties are needed to be set properly to ingest data using `HoodieMultiTableDeltaStreamer`. \n+\n+```java\n+hoodie.deltastreamer.ingestion.tablesToBeIngested\n+  comma separated names of tables to be ingested in the format <database>.<table>, for example db1.table1,db1.table2\n+hoodie.deltastreamer.ingestion.targetBasePath\n+  if you wish to ingest a particular table in a separate path, you can mention that path here\n+hoodie.deltastreamer.ingestion.<database>.<table>.configFile\n+  path to the config file in dedicated config folder which contains table overridden properties for the particular table to be ingested.\n+```\n+\n+Sample config files for table wise overridden properties can be found under `hudi-utilities/src/test/resources/delta-streamer-config`. The command to run `HoodieMultiTableDeltaStreamer` is also similar to how you run `HoodieDeltaStreamer`.\n+\n+```java\n+[hoodie]$ spark-submit --class org.apache.hudi.utilities.deltastreamer.HoodieMultiTableDeltaStreamer `ls packaging/hudi-utilities-bundle/target/hudi-utilities-bundle-*.jar` \\\n+  --props file://${PWD}/hudi-utilities/src/test/resources/delta-streamer-config/kafka-source.properties \\\n+  --config-folder file://tmp/hudi-ingestion-config \\\n+  --schemaprovider-class org.apache.hudi.utilities.schema.SchemaRegistryProvider \\\n+  --source-class org.apache.hudi.utilities.sources.AvroKafkaSource \\\n+  --source-ordering-field impresssiontime \\\n+  --base-path-prefix file:\\/\\/\\/tmp/hudi-deltastreamer-op \\ \n+  --target-table uber.impressions \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ff8abe5bdcd6e0ac807603388d3cf74c7d5c09a"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c878124ac6f7610b0e374691ac7800bfee21548e", "author": {"user": {"login": "pratyakshsharma", "name": "Pratyaksh Sharma"}}, "url": "https://github.com/apache/hudi/commit/c878124ac6f7610b0e374691ac7800bfee21548e", "committedDate": "2020-07-23T11:39:50Z", "message": "[HUDI-766]: addressed code review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDc2MTAz", "url": "https://github.com/apache/hudi/pull/1822#pullrequestreview-466476103", "createdAt": "2020-08-13T06:27:17Z", "commit": {"oid": "c878124ac6f7610b0e374691ac7800bfee21548e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2949, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}