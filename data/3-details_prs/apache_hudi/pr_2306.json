{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTUxODYz", "number": 2306, "title": "HUDI-1439 Remove scala dependency from hudi-client-common", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\n(For example: This pull request adds quick-start document.)\nBrief change log\n(for example:)\n\nModify AnnotationLocation checkstyle rule in checkstyle.xml\n\nVerify this pull request\n(Please pick either of the following options)\nThis pull request is a trivial rework / code cleanup without any test coverage.\n(or)\nThis pull request is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end.\nAdded HoodieClientWriteTest to verify the change.\nManually verified the change by running a job locally.\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-12-08T06:13:51Z", "url": "https://github.com/apache/hudi/pull/2306", "merged": true, "mergeCommit": {"oid": "236d1b0dec409efb9c7a9febd260b1060da6a9c1"}, "closed": true, "closedAt": "2020-12-11T08:36:38Z", "author": {"login": "shenh062326"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkFTZKgBqjQwODMzODQ2NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkfHQ5ABqjQwOTAwNDA4MjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1dfba587424428a4970a5a4b89d0388d271892be", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/1dfba587424428a4970a5a4b89d0388d271892be", "committedDate": "2020-12-08T06:11:03Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "6cdb46dfa7708ae410afa3cd97bc204be80af502", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/6cdb46dfa7708ae410afa3cd97bc204be80af502", "committedDate": "2020-12-08T07:49:01Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MDc0Mjcz", "url": "https://github.com/apache/hudi/pull/2306#pullrequestreview-547074273", "createdAt": "2020-12-08T10:48:43Z", "commit": {"oid": "6cdb46dfa7708ae410afa3cd97bc204be80af502"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDo0ODo0M1rOIBTTHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDo0ODo0M1rOIBTTHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNTY3OQ==", "bodyText": "is there a way to do this lazily? convert to a stream and map to tuple and get the underlying iterator?", "url": "https://github.com/apache/hudi/pull/2306#discussion_r538235679", "createdAt": "2020-12-08T10:48:43Z", "author": {"login": "vinothchandar"}, "path": "hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/index/simple/SparkHoodieSimpleIndex.java", "diffHunk": "@@ -147,6 +150,12 @@ public boolean isImplicitWithStorage() {\n     JavaSparkContext jsc = HoodieSparkEngineContext.getSparkContext(context);\n     int fetchParallelism = Math.max(1, Math.max(baseFiles.size(), parallelism));\n     return jsc.parallelize(baseFiles, fetchParallelism)\n-        .flatMapToPair(partitionPathBaseFile -> new HoodieKeyLocationFetchHandle(config, hoodieTable, partitionPathBaseFile).locations());\n+        .flatMapToPair( partitionPathBaseFile -> {\n+          Iterator<ImmutablePair<HoodieKey, HoodieRecordLocation>> iter =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cdb46dfa7708ae410afa3cd97bc204be80af502"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cdb46dfa7708ae410afa3cd97bc204be80af502", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/6cdb46dfa7708ae410afa3cd97bc204be80af502", "committedDate": "2020-12-08T07:49:01Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "ffdfcc4e6fdf84fd4b8ee4deed625b361a4b1efd", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/ffdfcc4e6fdf84fd4b8ee4deed625b361a4b1efd", "committedDate": "2020-12-08T14:08:10Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ffdfcc4e6fdf84fd4b8ee4deed625b361a4b1efd", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/ffdfcc4e6fdf84fd4b8ee4deed625b361a4b1efd", "committedDate": "2020-12-08T14:08:10Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "5a33f34edc95df0690107e6bacc179ab1f66050d", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/5a33f34edc95df0690107e6bacc179ab1f66050d", "committedDate": "2020-12-08T14:15:49Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a33f34edc95df0690107e6bacc179ab1f66050d", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/5a33f34edc95df0690107e6bacc179ab1f66050d", "committedDate": "2020-12-08T14:15:49Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "d4edce0066d97ef15769e9e6d2fc2ff9e4dd99ad", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/d4edce0066d97ef15769e9e6d2fc2ff9e4dd99ad", "committedDate": "2020-12-08T14:26:07Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4edce0066d97ef15769e9e6d2fc2ff9e4dd99ad", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/d4edce0066d97ef15769e9e6d2fc2ff9e4dd99ad", "committedDate": "2020-12-08T14:26:07Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "9d9887c21f2b7d06e134c5957175cc5d26a478e0", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/9d9887c21f2b7d06e134c5957175cc5d26a478e0", "committedDate": "2020-12-08T14:32:35Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTA2MTQ5", "url": "https://github.com/apache/hudi/pull/2306#pullrequestreview-547506149", "createdAt": "2020-12-08T18:21:24Z", "commit": {"oid": "9d9887c21f2b7d06e134c5957175cc5d26a478e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "712ac6d142ffb1cf96c2eda9e56096b12b15e9a8", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/712ac6d142ffb1cf96c2eda9e56096b12b15e9a8", "committedDate": "2020-12-09T13:52:30Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d9887c21f2b7d06e134c5957175cc5d26a478e0", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/9d9887c21f2b7d06e134c5957175cc5d26a478e0", "committedDate": "2020-12-08T14:32:35Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}, "afterCommit": {"oid": "712ac6d142ffb1cf96c2eda9e56096b12b15e9a8", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/712ac6d142ffb1cf96c2eda9e56096b12b15e9a8", "committedDate": "2020-12-09T13:52:30Z", "message": "HUDI-1439 Remove scala dependency from hudi-client-common"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4400, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}