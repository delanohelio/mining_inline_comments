{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTk1Njk3", "number": 1346, "title": "[HUDI-554] Cleanup package structure in hudi-client", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\nBefore we embark on moving spark specific code to hudi-spark and making a hudi-writer-common, lets fix some current inconsistencies in the class organization.\nBrief change log\n\nJust package, class moves and renames with the following intent\nclient now has all the various client classes, that do the transaction management\nfunc renamed to execution and some helpers moved to client/utils\nAll compaction code under io now under table/compact\nRollback code under table/rollback and in general all code for individual operations under table\nexception config, metrics left untouched\nMoved the tests also accordingly\n\nVerify this pull request\nThis pull request is a trivial rework / code cleanup without any test coverage.\nThis pull request is already covered by existing tests, such as (please describe tests).\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-02-21T09:51:41Z", "url": "https://github.com/apache/hudi/pull/1346", "merged": true, "mergeCommit": {"oid": "71170fafe77e11ea1a458a38e3395a471d94a047"}, "closed": true, "closedAt": "2020-02-27T16:05:59Z", "author": {"login": "vinothchandar"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGc2o5gFqTM2MjUyMTA1NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIVFR7gBqjMwNzY1MjgxOTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNTIxMDU1", "url": "https://github.com/apache/hudi/pull/1346#pullrequestreview-362521055", "createdAt": "2020-02-21T10:06:39Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMjA0Mzc0", "url": "https://github.com/apache/hudi/pull/1346#pullrequestreview-363204374", "createdAt": "2020-02-24T07:41:05Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNzo0MTowNVrOFtXftw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNzo0OTo0MFrOFtXokQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNTE5MQ==", "bodyText": "Is the original indent the right one?", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383115191", "createdAt": "2020-02-24T07:41:05Z", "author": {"login": "yanghua"}, "path": "hudi-client/src/main/java/org/apache/hudi/table/rollback/RollbackExecutor.java", "diffHunk": "@@ -69,7 +69,7 @@ public RollbackExecutor(HoodieTableMetaClient metaClient, HoodieWriteConfig conf\n    * Performs all rollback actions that we have collected in parallel.\n    */\n   public List<HoodieRollbackStat> performRollback(JavaSparkContext jsc, HoodieInstant instantToRollback,\n-      List<RollbackRequest> rollbackRequests) {\n+                                           List<RollbackRequest> rollbackRequests) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNjk4NA==", "bodyText": "IMO, org.apache.hudi is a very common( or say generic) level. It would be better to make the specific classes host in a detailed package that can represent his location. WDYT?", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383116984", "createdAt": "2020-02-24T07:48:06Z", "author": {"login": "yanghua"}, "path": "hudi-client/src/test/java/org/apache/hudi/TestUpdateSchemaEvolution.java", "diffHunk": "@@ -16,10 +16,9 @@\n  * limitations under the License.\n  */\n \n-package org.apache.hudi.func;\n+package org.apache.hudi;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNzQ1Nw==", "bodyText": "ditto, can we place it into e.g. org.apache.hudi.write.common.WriteStatus?", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383117457", "createdAt": "2020-02-24T07:49:40Z", "author": {"login": "yanghua"}, "path": "hudi-client/src/test/java/org/apache/hudi/client/TestHoodieClientBase.java", "diffHunk": "@@ -16,8 +16,10 @@\n  * limitations under the License.\n  */\n \n-package org.apache.hudi;\n+package org.apache.hudi.client;\n \n+import org.apache.hudi.common.HoodieClientTestHarness;\n+import org.apache.hudi.WriteStatus;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNjM1MjYx", "url": "https://github.com/apache/hudi/pull/1346#pullrequestreview-363635261", "createdAt": "2020-02-24T19:17:41Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOToxNzo0MVrOFtso-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOToxNzo0MVrOFtso-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2MTYyNA==", "bodyText": "This looks like there should be an Executor<> interface if we are going to move to *executor style of naming ? Do you have plans to introduce one later ?", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383461624", "createdAt": "2020-02-24T19:17:41Z", "author": {"login": "n3nash"}, "path": "hudi-client/src/main/java/org/apache/hudi/table/CleanExecutor.java", "diffHunk": "@@ -60,17 +59,17 @@\n  * <p>\n  * TODO: Should all cleaning be done based on {@link HoodieCommitMetadata}\n  */\n-public class HoodieCleanHelper<T extends HoodieRecordPayload<T>> implements Serializable {\n+public class CleanExecutor<T extends HoodieRecordPayload<T>> implements Serializable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNjM2Njk5", "url": "https://github.com/apache/hudi/pull/1346#pullrequestreview-363636699", "createdAt": "2020-02-24T19:20:02Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzOTEzMzIw", "url": "https://github.com/apache/hudi/pull/1346#pullrequestreview-363913320", "createdAt": "2020-02-25T07:17:41Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNzoxNzo0MVrOFt65iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNzoxNzo0MVrOFt65iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY5NTI0Mw==", "bodyText": "My personal feeling, XXXHelper usually means a utility class that contains some static helper methods. I would prefer the old one.", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383695243", "createdAt": "2020-02-25T07:17:41Z", "author": {"login": "yanghua"}, "path": "hudi-client/src/main/java/org/apache/hudi/table/CleanHelper.java", "diffHunk": "@@ -59,17 +59,17 @@\n  * <p>\n  * TODO: Should all cleaning be done based on {@link HoodieCommitMetadata}\n  */\n-public class CleanExecutor<T extends HoodieRecordPayload<T>> implements Serializable {\n+public class CleanHelper<T extends HoodieRecordPayload<T>> implements Serializable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8053e908ebf0db6883c2f755d998d35c40bfc6ff", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/8053e908ebf0db6883c2f755d998d35c40bfc6ff", "committedDate": "2020-02-26T00:51:44Z", "message": "[HUDI-554] Cleanup package structure in hudi-client\n\n - Just package, class moves and renames with the following intent\n - `client` now has all the various client classes, that do the transaction management\n - `func` renamed to `execution` and some helpers moved to `client/utils`\n - All compaction code under `io` now under `table/compact`\n - Rollback code under `table/rollback` and in general all code for individual operations under `table`\n - `exception` `config`, `metrics` left untouched\n - Moved the tests also accordingly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9de4988c8c434e1158af07a752210931904648a", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/a9de4988c8c434e1158af07a752210931904648a", "committedDate": "2020-02-26T00:51:45Z", "message": "Code review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bea34dd686d8b6a92a6d8914abac07aad75dc3a5", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/bea34dd686d8b6a92a6d8914abac07aad75dc3a5", "committedDate": "2020-02-26T00:51:45Z", "message": "Fix flaky tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b20891619380a66e2a62c9e57fb28c4f5ed948b", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/5b20891619380a66e2a62c9e57fb28c4f5ed948b", "committedDate": "2020-02-27T06:10:53Z", "message": "Fix checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "5b20891619380a66e2a62c9e57fb28c4f5ed948b", "author": {"user": {"login": "vinothchandar", "name": "vinoth chandar"}}, "url": "https://github.com/apache/hudi/commit/5b20891619380a66e2a62c9e57fb28c4f5ed948b", "committedDate": "2020-02-27T06:10:53Z", "message": "Fix checkstyle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3610, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}