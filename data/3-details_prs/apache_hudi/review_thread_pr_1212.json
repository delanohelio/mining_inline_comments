{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxODEyNjk4", "number": 1212, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwOTo1NzozNVrODXXhmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjoxOToxOFrODYqOew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODI5Mjc1OnYy", "diffSide": "LEFT", "path": "hudi-common/src/main/java/org/apache/hudi/common/model/HoodieBaseFile.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwOTo1NzozNVrOFcorEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwOTo1NzozNVrOFcorEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU3MDgzNQ==", "bodyText": "IMO, this means ORC support is coming \ud83d\udc4d", "url": "https://github.com/apache/hudi/pull/1212#discussion_r365570835", "createdAt": "2020-01-12T09:57:35Z", "author": {"login": "lamberken"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/model/HoodieBaseFile.java", "diffHunk": "@@ -27,21 +27,21 @@\n import java.util.Objects;\n \n /**\n- * Hoodie data file.\n+ * Hoodie base file.\n  */\n-public class HoodieDataFile implements Serializable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjQ4NjA2OnYy", "diffSide": "RIGHT", "path": "hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/HoodieDeltaStreamer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODozODozNFrOFdPjwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODozODozNFrOFdPjwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIwNzkzNg==", "bodyText": "I tried retaining --storage-type as well. but have to choose betwen this and the new --table-typeto mark as required.. Whichever we pick, it wont be ideal. So choose to simply rename, requiring the users to make a small change in the command, when upgrading.", "url": "https://github.com/apache/hudi/pull/1212#discussion_r366207936", "createdAt": "2020-01-14T08:38:34Z", "author": {"login": "vinothchandar"}, "path": "hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/HoodieDeltaStreamer.java", "diffHunk": "@@ -160,9 +160,9 @@ public Operation convert(String value) throws ParameterException {\n     @Parameter(names = {\"--target-table\"}, description = \"name of the target table in Hive\", required = true)\n     public String targetTableName;\n \n-    @Parameter(names = {\"--storage-type\"}, description = \"Type of Storage. COPY_ON_WRITE (or) MERGE_ON_READ\",\n+    @Parameter(names = {\"--table-type\"}, description = \"Type of table. COPY_ON_WRITE (or) MERGE_ON_READ\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjUyNTczOnYy", "diffSide": "RIGHT", "path": "hudi-spark/src/main/scala/org/apache/hudi/DefaultSource.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODo1NDowMVrOFdP8Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODo1NDowMVrOFdP8Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIxNDIzNA==", "bodyText": "this is a behavior change... previously MOR realtime view errored out here.. now we just return the same RO query results with a warning..", "url": "https://github.com/apache/hudi/pull/1212#discussion_r366214234", "createdAt": "2020-01-14T08:54:01Z", "author": {"login": "vinothchandar"}, "path": "hudi-spark/src/main/scala/org/apache/hudi/DefaultSource.scala", "diffHunk": "@@ -50,20 +50,14 @@ class DefaultSource extends RelationProvider\n                               optParams: Map[String, String],\n                               schema: StructType): BaseRelation = {\n     // Add default options for unspecified read options keys.\n-    val parameters = Map(VIEW_TYPE_OPT_KEY -> DEFAULT_VIEW_TYPE_OPT_VAL) ++ optParams\n+    val parameters = Map(QUERY_TYPE_OPT_KEY -> DEFAULT_QUERY_TYPE_OPT_VAL) ++ optParams\n \n     val path = parameters.get(\"path\")\n     if (path.isEmpty) {\n       throw new HoodieException(\"'path' must be specified.\")\n     }\n \n-    if (parameters(VIEW_TYPE_OPT_KEY).equals(VIEW_TYPE_REALTIME_OPT_VAL)) {\n-      throw new HoodieException(\"Realtime view not supported yet via data source. Please use HiveContext route.\")\n-    }\n-\n-    if (parameters(VIEW_TYPE_OPT_KEY).equals(VIEW_TYPE_INCREMENTAL_OPT_VAL)) {\n-      new IncrementalRelation(sqlContext, path.get, optParams, schema)\n-    } else {\n+    if (parameters(QUERY_TYPE_OPT_KEY).equals(QUERY_TYPE_SNAPSHOT_OPT_VAL)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODY1MzUzOnYy", "diffSide": "RIGHT", "path": "hudi-common/src/main/java/org/apache/hudi/common/table/SyncableFileSystemView.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDozOToxNFrOFeK2Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNToxMToyN1rOFecvwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3OTM2Ng==", "bodyText": "s/full/complete?", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367179366", "createdAt": "2020-01-16T00:39:14Z", "author": {"login": "n3nash"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/SyncableFileSystemView.java", "diffHunk": "@@ -18,12 +18,15 @@\n \n package org.apache.hudi.common.table;\n \n+import org.apache.hudi.common.table.TableFileSystemView.BaseFileOnlyView;\n+import org.apache.hudi.common.table.TableFileSystemView.SliceView;\n+\n /**\n- * A consolidated file-system view interface exposing both realtime and read-optimized views along with\n+ * A consolidated file-system view interface exposing both full and basefile only views along with", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ3MjU3OA==", "bodyText": "okay .. complete sounds better", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367472578", "createdAt": "2020-01-16T15:11:27Z", "author": {"login": "vinothchandar"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/SyncableFileSystemView.java", "diffHunk": "@@ -18,12 +18,15 @@\n \n package org.apache.hudi.common.table;\n \n+import org.apache.hudi.common.table.TableFileSystemView.BaseFileOnlyView;\n+import org.apache.hudi.common.table.TableFileSystemView.SliceView;\n+\n /**\n- * A consolidated file-system view interface exposing both realtime and read-optimized views along with\n+ * A consolidated file-system view interface exposing both full and basefile only views along with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3OTM2Ng=="}, "originalCommit": null, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODY1NTE2OnYy", "diffSide": "RIGHT", "path": "hudi-hive/src/main/java/org/apache/hudi/hive/HiveSyncTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDo0MDowNVrOFeK3Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMToyNDoyNlrOFeLg9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3OTYwNw==", "bodyText": "Not sure if it's the best user-experience to augment the table name with a postfix for all tables..", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367179607", "createdAt": "2020-01-16T00:40:05Z", "author": {"login": "n3nash"}, "path": "hudi-hive/src/main/java/org/apache/hudi/hive/HiveSyncTool.java", "diffHunk": "@@ -53,30 +53,44 @@\n public class HiveSyncTool {\n \n   private static final Logger LOG = LogManager.getLogger(HiveSyncTool.class);\n-  private final HoodieHiveClient hoodieHiveClient;\n-  public static final String SUFFIX_REALTIME_TABLE = \"_rt\";\n+  public static final String SUFFIX_SNAPSHOT_TABLE = \"_rt\";\n+  public static final String SUFFIX_READ_OPTIMIZED_TABLE = \"_ro\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE5MDI2Mg==", "bodyText": "@n3nash the reason was.. without this, it gets kind of confusing that the snapshot query on COW hits the table with no prefix and on MOR, its not the snapshot table.. So wanted to clearly call out _ro ...", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367190262", "createdAt": "2020-01-16T01:24:26Z", "author": {"login": "vinothchandar"}, "path": "hudi-hive/src/main/java/org/apache/hudi/hive/HiveSyncTool.java", "diffHunk": "@@ -53,30 +53,44 @@\n public class HiveSyncTool {\n \n   private static final Logger LOG = LogManager.getLogger(HiveSyncTool.class);\n-  private final HoodieHiveClient hoodieHiveClient;\n-  public static final String SUFFIX_REALTIME_TABLE = \"_rt\";\n+  public static final String SUFFIX_SNAPSHOT_TABLE = \"_rt\";\n+  public static final String SUFFIX_READ_OPTIMIZED_TABLE = \"_ro\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3OTYwNw=="}, "originalCommit": null, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MTgzMTEyOnYy", "diffSide": "RIGHT", "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjoxNDoyMFrOFepSdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjozOTozNlrOFep1lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3ODA2OA==", "bodyText": "@vinothchandar Do we want to rename the method as well to 'toHoodieBaseFile' ?", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367678068", "createdAt": "2020-01-16T22:14:20Z", "author": {"login": "bhasudha"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "diffHunk": "@@ -36,22 +36,22 @@\n   @JsonProperty(\"fileLen\")\n   private long fileLen;\n \n-  public static HoodieDataFile toHoodieDataFile(DataFileDTO dto) {\n+  public static HoodieBaseFile toHoodieDataFile(DataFileDTO dto) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY4NzA2MA==", "bodyText": "+1", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367687060", "createdAt": "2020-01-16T22:39:36Z", "author": {"login": "n3nash"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "diffHunk": "@@ -36,22 +36,22 @@\n   @JsonProperty(\"fileLen\")\n   private long fileLen;\n \n-  public static HoodieDataFile toHoodieDataFile(DataFileDTO dto) {\n+  public static HoodieBaseFile toHoodieDataFile(DataFileDTO dto) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3ODA2OA=="}, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MTgzMjIxOnYy", "diffSide": "RIGHT", "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjoxNDo0OVrOFepTJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjozOTo0MVrOFep1tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3ODI0NQ==", "bodyText": "'fromHoodieBaseFile' instead ?", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367678245", "createdAt": "2020-01-16T22:14:49Z", "author": {"login": "bhasudha"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "diffHunk": "@@ -36,22 +36,22 @@\n   @JsonProperty(\"fileLen\")\n   private long fileLen;\n \n-  public static HoodieDataFile toHoodieDataFile(DataFileDTO dto) {\n+  public static HoodieBaseFile toHoodieDataFile(DataFileDTO dto) {\n     if (null == dto) {\n       return null;\n     }\n \n-    HoodieDataFile dataFile = null;\n+    HoodieBaseFile dataFile = null;\n     if (null != dto.fileStatus) {\n-      dataFile = new HoodieDataFile(FileStatusDTO.toFileStatus(dto.fileStatus));\n+      dataFile = new HoodieBaseFile(FileStatusDTO.toFileStatus(dto.fileStatus));\n     } else {\n-      dataFile = new HoodieDataFile(dto.fullPath);\n+      dataFile = new HoodieBaseFile(dto.fullPath);\n       dataFile.setFileLen(dto.fileLen);\n     }\n     return dataFile;\n   }\n \n-  public static DataFileDTO fromHoodieDataFile(HoodieDataFile dataFile) {\n+  public static DataFileDTO fromHoodieDataFile(HoodieBaseFile dataFile) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY4NzA5NA==", "bodyText": "+1", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367687094", "createdAt": "2020-01-16T22:39:41Z", "author": {"login": "n3nash"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/timeline/dto/DataFileDTO.java", "diffHunk": "@@ -36,22 +36,22 @@\n   @JsonProperty(\"fileLen\")\n   private long fileLen;\n \n-  public static HoodieDataFile toHoodieDataFile(DataFileDTO dto) {\n+  public static HoodieBaseFile toHoodieDataFile(DataFileDTO dto) {\n     if (null == dto) {\n       return null;\n     }\n \n-    HoodieDataFile dataFile = null;\n+    HoodieBaseFile dataFile = null;\n     if (null != dto.fileStatus) {\n-      dataFile = new HoodieDataFile(FileStatusDTO.toFileStatus(dto.fileStatus));\n+      dataFile = new HoodieBaseFile(FileStatusDTO.toFileStatus(dto.fileStatus));\n     } else {\n-      dataFile = new HoodieDataFile(dto.fullPath);\n+      dataFile = new HoodieBaseFile(dto.fullPath);\n       dataFile.setFileLen(dto.fileLen);\n     }\n     return dataFile;\n   }\n \n-  public static DataFileDTO fromHoodieDataFile(HoodieDataFile dataFile) {\n+  public static DataFileDTO fromHoodieDataFile(HoodieBaseFile dataFile) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3ODI0NQ=="}, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MTg0MjUxOnYy", "diffSide": "RIGHT", "path": "hudi-common/src/main/java/org/apache/hudi/common/table/view/AbstractTableFileSystemView.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjoxOToxOFrOFepZhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjozOTo1MlrOFep2BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3OTg3Nw==", "bodyText": "convertFileStatusesToBaseFiles instead ? No strong opinion on these. I think it should be okay to leave it as is since the return type is indicative already.", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367679877", "createdAt": "2020-01-16T22:19:18Z", "author": {"login": "bhasudha"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/view/AbstractTableFileSystemView.java", "diffHunk": "@@ -249,10 +249,10 @@ private void ensurePartitionLoadedCorrectly(String partition) {\n    *\n    * @param statuses List of File-Status\n    */\n-  private Stream<HoodieDataFile> convertFileStatusesToDataFiles(FileStatus[] statuses) {\n+  private Stream<HoodieBaseFile> convertFileStatusesToDataFiles(FileStatus[] statuses) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY4NzE3Mg==", "bodyText": "+1", "url": "https://github.com/apache/hudi/pull/1212#discussion_r367687172", "createdAt": "2020-01-16T22:39:52Z", "author": {"login": "n3nash"}, "path": "hudi-common/src/main/java/org/apache/hudi/common/table/view/AbstractTableFileSystemView.java", "diffHunk": "@@ -249,10 +249,10 @@ private void ensurePartitionLoadedCorrectly(String partition) {\n    *\n    * @param statuses List of File-Status\n    */\n-  private Stream<HoodieDataFile> convertFileStatusesToDataFiles(FileStatus[] statuses) {\n+  private Stream<HoodieBaseFile> convertFileStatusesToDataFiles(FileStatus[] statuses) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY3OTg3Nw=="}, "originalCommit": {"oid": "97d21b1bf3e301357ad35ced94f16bf075f25c22"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4962, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}