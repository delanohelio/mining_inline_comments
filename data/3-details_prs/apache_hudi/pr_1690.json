{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NTUyNzU4", "number": 1690, "title": "[HUDI-908] Add some data types to HoodieTestDataGenerator and fix some bugs", "bodyText": "What is the purpose of the pull request\n\nHUDI-908,  add miss spark types and avro types to HoodieTestDataGenerator, also fix some bugs.\nThe missing the avro types:\n\n FIXED,\n BYTES,\n INT,\n LONG,\n FLOAT\n\n\nThe missing spark types:\n\nBinaryType          relate to avro type: BYTES\nIntegerType         relate to avro type: INT\nLongType            relate to avro type: LONG\nFloatType           relate to avro type: FLOAT\nByteType            relate to avro type: INT\nShortType           relate to avro type: INT\nDecimalType         relate to avro type: FIXED\nTimestampType       relate to avro type: LONG with logicaltype timestamp-micros\nDateType            relate to avro type: INT with logicaltype date\n\nBrief change log\n(for example:)\n\nModify AnnotationLocation checkstyle rule in checkstyle.xml\n\nVerify this pull request\n(Please pick either of the following options)\nThis pull request is a trivial rework / code cleanup without any test coverage.\n(or)\nThis pull request is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end.\nAdded HoodieClientWriteTest to verify the change.\nManually verified the change by running a job locally.\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-05-31T03:02:05Z", "url": "https://github.com/apache/hudi/pull/1690", "merged": true, "mergeCommit": {"oid": "89e37d5273ea1c6bf2fe3a8f7053e7a3cc44011d"}, "closed": true, "closedAt": "2020-06-22T15:13:29Z", "author": {"login": "shenh062326"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmluNhABqjMzOTAzMzkyMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctsNiYgFqTQzNDY4OTc0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjEzNjI3", "url": "https://github.com/apache/hudi/pull/1690#pullrequestreview-424213627", "createdAt": "2020-06-04T08:24:56Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODoyNDo1NlrOGe7INQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODoyNDo1NlrOGe7INQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3OTIyMQ==", "bodyText": "Is this guaranteed to be list for a fixed decimal value ? Shouldn't this be scalar ?", "url": "https://github.com/apache/hudi/pull/1690#discussion_r435079221", "createdAt": "2020-06-04T08:24:56Z", "author": {"login": "bvaradar"}, "path": "hudi-common/src/main/java/org/apache/hudi/avro/MercifulJsonConverter.java", "diffHunk": "@@ -245,10 +245,14 @@ private static JsonToAvroFieldProcessor generateFixedTypeHandler() {\n     return new JsonToAvroFieldProcessor() {\n       @Override\n       public Pair<Boolean, Object> convert(Object value, String name, Schema schema) {\n-        byte[] src = value.toString().getBytes();\n+        ArrayList<Integer> converval = (ArrayList<Integer>) value;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzMwNDUw", "url": "https://github.com/apache/hudi/pull/1690#pullrequestreview-425730450", "createdAt": "2020-06-06T10:27:28Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxMDoyNzoyOFrOGgDCrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxMDoyOTowMVrOGgDC6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI1NzQ1Mw==", "bodyText": "Thanks for the explanation. Makes sense. ObjectMapper uses List to represent FixedType.  So, each entry in the list is within the range of [-128, 127]. right ?", "url": "https://github.com/apache/hudi/pull/1690#discussion_r436257453", "createdAt": "2020-06-06T10:27:28Z", "author": {"login": "bvaradar"}, "path": "hudi-common/src/main/java/org/apache/hudi/avro/MercifulJsonConverter.java", "diffHunk": "@@ -245,10 +245,14 @@ private static JsonToAvroFieldProcessor generateFixedTypeHandler() {\n     return new JsonToAvroFieldProcessor() {\n       @Override\n       public Pair<Boolean, Object> convert(Object value, String name, Schema schema) {\n-        byte[] src = value.toString().getBytes();\n+        ArrayList<Integer> converval = (ArrayList<Integer>) value;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3OTIyMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI1NzUxMw==", "bodyText": "Minor Comment: Can you use List instead of ArrayList", "url": "https://github.com/apache/hudi/pull/1690#discussion_r436257513", "createdAt": "2020-06-06T10:29:01Z", "author": {"login": "bvaradar"}, "path": "hudi-common/src/main/java/org/apache/hudi/avro/MercifulJsonConverter.java", "diffHunk": "@@ -245,10 +245,14 @@ private static JsonToAvroFieldProcessor generateFixedTypeHandler() {\n     return new JsonToAvroFieldProcessor() {\n       @Override\n       public Pair<Boolean, Object> convert(Object value, String name, Schema schema) {\n-        byte[] src = value.toString().getBytes();\n+        ArrayList<Integer> converval = (ArrayList<Integer>) value;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDU3NjMy", "url": "https://github.com/apache/hudi/pull/1690#pullrequestreview-434457632", "createdAt": "2020-06-20T22:36:33Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQyMjozNjozM1rOGmopDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQyMjozNjozM1rOGmopDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE2NDk0Mg==", "bodyText": "Minor: Instead of naming based on types, can we give relevant names like :distance_in_meters (int_type), seconds_since_epoch(long_val), payment_in_dollars,...", "url": "https://github.com/apache/hudi/pull/1690#discussion_r443164942", "createdAt": "2020-06-20T22:36:33Z", "author": {"login": "bvaradar"}, "path": "hudi-utilities/src/test/resources/delta-streamer-config/source.avsc", "diffHunk": "@@ -43,8 +43,41 @@\n   }, {\n     \"name\" : \"end_lon\",\n     \"type\" : \"double\"\n-  },\n-  {\n+  }, {\n+    \"name\" : \"int_val\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "024ad1a637353d90f200bed81284f39e4380447d", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/024ad1a637353d90f200bed81284f39e4380447d", "committedDate": "2020-06-21T13:55:08Z", "message": "[HUDI-908] Add some data types to HoodieTestDataGenerator and fix some some bugs."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "024ad1a637353d90f200bed81284f39e4380447d", "author": {"user": {"login": "shenh062326", "name": "Shen Hong"}}, "url": "https://github.com/apache/hudi/commit/024ad1a637353d90f200bed81284f39e4380447d", "committedDate": "2020-06-21T13:55:08Z", "message": "[HUDI-908] Add some data types to HoodieTestDataGenerator and fix some some bugs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Njg5NzQ1", "url": "https://github.com/apache/hudi/pull/1690#pullrequestreview-434689745", "createdAt": "2020-06-22T08:03:17Z", "commit": {"oid": "024ad1a637353d90f200bed81284f39e4380447d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4904, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}