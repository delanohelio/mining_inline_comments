{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NDc0NTUz", "number": 2129, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDoyMTowNVrOEpqkvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNzoxMToxMVrOEqL5TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMTI0NjA2OnYy", "diffSide": "RIGHT", "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDoyMTowNVrOHbeZSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QwMTowMTo1NlrOHb-tdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MTU5Mg==", "bodyText": "I think we need to add this option into DataSourceOptions, DataSourceUtils, and HoodieSparkSqlWriter\nsomething like?\n\"hoodie.datasource.hive_sync.support_timestamp\"", "url": "https://github.com/apache/hudi/pull/2129#discussion_r498571592", "createdAt": "2020-10-02T00:21:05Z", "author": {"login": "bschell"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "diffHunk": "@@ -68,6 +68,9 @@\n   @Parameter(names = {\"--help\", \"-h\"}, help = true)\n   public Boolean help = false;\n \n+  @Parameter(names = {\"--support-timestamp\"}, description = \"If true, converts int64(timestamp_micros) to timestamp type\")\n+  public Boolean supportTimestamp = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86965e6031a38cf85be3a056be3c58521cd38eba"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEwMTA0Ng==", "bodyText": "@bschell  thank you for pointing this out. We only use standalone mode, so I missed this DataSourceOptions. Fixed now. PTAL.", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499101046", "createdAt": "2020-10-03T01:01:56Z", "author": {"login": "satishkotha"}, "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "diffHunk": "@@ -68,6 +68,9 @@\n   @Parameter(names = {\"--help\", \"-h\"}, help = true)\n   public Boolean help = false;\n \n+  @Parameter(names = {\"--support-timestamp\"}, description = \"If true, converts int64(timestamp_micros) to timestamp type\")\n+  public Boolean supportTimestamp = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MTU5Mg=="}, "originalCommit": {"oid": "86965e6031a38cf85be3a056be3c58521cd38eba"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyNjcwNTQwOnYy", "diffSide": "RIGHT", "path": "hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/util/HiveSchemaUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNzoxMToxMVrOHcP-RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzowODoxOVrOHcmLGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM4Mzg3Ng==", "bodyText": "Could you please explain what happens now if the originalType  == OriginalType.TIMESTAMP_MICROS ?", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499383876", "createdAt": "2020-10-05T07:11:11Z", "author": {"login": "n3nash"}, "path": "hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/util/HiveSchemaUtil.java", "diffHunk": "@@ -167,7 +173,10 @@ private static String convertField(final Type parquetType) {\n             .append(decimalMetadata.getScale()).append(\")\").toString();\n       } else if (originalType == OriginalType.DATE) {\n         return field.append(\"DATE\").toString();\n+      } else if (supportTimestamp && originalType == OriginalType.TIMESTAMP_MICROS) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0e1ae8757f0ba5968088d9b392f675173c61f44"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0NzYxMA==", "bodyText": "@n3nash without this change, we get 'bigint' for hive type (goes into parquetPrimitiveTypeName.convert -> convertINT64 method)", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499747610", "createdAt": "2020-10-05T17:08:19Z", "author": {"login": "satishkotha"}, "path": "hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/util/HiveSchemaUtil.java", "diffHunk": "@@ -167,7 +173,10 @@ private static String convertField(final Type parquetType) {\n             .append(decimalMetadata.getScale()).append(\")\").toString();\n       } else if (originalType == OriginalType.DATE) {\n         return field.append(\"DATE\").toString();\n+      } else if (supportTimestamp && originalType == OriginalType.TIMESTAMP_MICROS) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM4Mzg3Ng=="}, "originalCommit": {"oid": "e0e1ae8757f0ba5968088d9b392f675173c61f44"}, "originalPosition": 59}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4313, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}