{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNDgxMzc5", "number": 1226, "title": "[HUDI-238] Make Hudi support Scala 2.12", "bodyText": "Tips\n\nThank you very much for contributing to Apache Hudi.\nPlease review https://hudi.apache.org/contributing.html before opening a pull request.\n\nWhat is the purpose of the pull request\n(For example: This pull request adds quick-start document.)\nBrief change log\nMost ideas of this PR is pretty similar to #1109.\nThis PR is also compatible with Scala 2.12. You can build it with:\nmvn clean install -Dscala.version=2.12.10 -Dscala.binary.version=2.12\nHere are some major differences between #1109:\n\nThis PR does not change Scala version in pom.xml, so by default, the Scala version is still 2.11. But you can build Scala 2.12 through setting parameters.\nupdated kafka-source.properties & kafka-source.properties .\nThis parameter: ConsumerConfig.GROUP_ID_CONFIG is defined in TestKafkaSource.java rather than in KafkaOffsetGen.java. Because this config should be decided by the client side but not the Hudi side.\nFor AvroKafkaSource.java , KafkaAvroDeserializer.class need to be set.\n\n    props.put(\"key.deserializer\", StringDeserializer.class);\n    props.put(\"value.deserializer\", KafkaAvroDeserializer.class);\n\nVerify this pull request\nThis pull request is already covered by existing tests.\nTest with Scala 2.12 (I skipped integ testing because it doesn't make sense without changing docker images):\nmvn clean install -Dscala.version=2.12.10 -Dscala.binary.version=2.12 -DskipITs\n[INFO] Reactor Summary for Hudi 0.5.1-SNAPSHOT:\n[INFO] \n[INFO] Hudi ............................................... SUCCESS [  3.670 s]\n[INFO] hudi-common ........................................ SUCCESS [04:24 min]\n[INFO] hudi-timeline-service .............................. SUCCESS [ 14.374 s]\n[INFO] hudi-hadoop-mr ..................................... SUCCESS [ 21.457 s]\n[INFO] hudi-client ........................................ SUCCESS [15:16 min]\n[INFO] hudi-hive .......................................... SUCCESS [02:46 min]\n[INFO] hudi-spark ......................................... SUCCESS [01:37 min]\n[INFO] hudi-utilities ..................................... SUCCESS [05:41 min]\n[INFO] hudi-cli ........................................... SUCCESS [ 10.714 s]\n[INFO] hudi-hadoop-mr-bundle .............................. SUCCESS [  4.622 s]\n[INFO] hudi-hive-bundle ................................... SUCCESS [  4.042 s]\n[INFO] hudi-spark-bundle .................................. SUCCESS [ 14.797 s]\n[INFO] hudi-presto-bundle ................................. SUCCESS [  1.721 s]\n[INFO] hudi-utilities-bundle .............................. SUCCESS [ 12.291 s]\n[INFO] hudi-timeline-server-bundle ........................ SUCCESS [  4.286 s]\n[INFO] hudi-hadoop-docker ................................. SUCCESS [  1.154 s]\n[INFO] hudi-hadoop-base-docker ............................ SUCCESS [  0.801 s]\n[INFO] hudi-hadoop-namenode-docker ........................ SUCCESS [  0.076 s]\n[INFO] hudi-hadoop-datanode-docker ........................ SUCCESS [  0.133 s]\n[INFO] hudi-hadoop-history-docker ......................... SUCCESS [  0.102 s]\n[INFO] hudi-hadoop-hive-docker ............................ SUCCESS [  0.504 s]\n[INFO] hudi-hadoop-sparkbase-docker ....................... SUCCESS [  0.165 s]\n[INFO] hudi-hadoop-sparkmaster-docker ..................... SUCCESS [  0.121 s]\n[INFO] hudi-hadoop-sparkworker-docker ..................... SUCCESS [  0.088 s]\n[INFO] hudi-hadoop-sparkadhoc-docker ...................... SUCCESS [  0.084 s]\n[INFO] hudi-hadoop-presto-docker .......................... SUCCESS [  0.152 s]\n[INFO] hudi-integ-test .................................... SUCCESS [  6.475 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  31:29 min\n[INFO] Finished at: 2020-01-14T10:52:25-08:00\n[INFO] ------------------------------------------------------------------------\n\nCommitter checklist\n\n\n Has a corresponding JIRA in PR title & commit\n\n\n Commit message is descriptive of the change\n\n\n CI is green\n\n\n Necessary doc changes done or have another open PR\n\n\n For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.", "createdAt": "2020-01-14T07:13:38Z", "url": "https://github.com/apache/hudi/pull/1226", "merged": true, "mergeCommit": {"oid": "292c1e2ff436a711cbbb53ad9b1f6232121d53ec"}, "closed": true, "closedAt": "2020-01-17T22:02:22Z", "author": {"login": "zhedoubushishi"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6LZ7ogH2gAyMzYyNDgxMzc5OjJmZjAwYWZhYzZjZWY0ODA1Njk1ZDMzYTliZmY3ZGRjZTliYTVmZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7WGcwgFqTM0NDg2NTE5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ff00afac6cef4805695d33a9bff7ddce9ba5ff4", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/2ff00afac6cef4805695d33a9bff7ddce9ba5ff4", "committedDate": "2020-01-14T06:59:49Z", "message": "[HUDI-238] Make Hudi support Scala 2.12"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNjc1ODY4", "url": "https://github.com/apache/hudi/pull/1226#pullrequestreview-343675868", "createdAt": "2020-01-16T05:08:27Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwNTowODoyN1rOFeOHmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwNTowODoyN1rOFeOHmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIzMjkyMA==", "bodyText": "@zhedoubushishi : You are on right track. Don't add scala version to the target jars inside docker. The docker setup has hard-wired this configuration. Removing the version from \"tofile\" entry should hopefully have the tests pass.", "url": "https://github.com/apache/hudi/pull/1226#discussion_r367232920", "createdAt": "2020-01-16T05:08:27Z", "author": {"login": "bvaradar"}, "path": "docker/hoodie/hadoop/hive_base/pom.xml", "diffHunk": "@@ -57,10 +57,10 @@\n               <tasks>\n                 <copy file=\"${project.basedir}/../../../../packaging/hudi-hadoop-mr-bundle/target/hudi-hadoop-mr-bundle-${project.version}.jar\" tofile=\"target/hoodie-hadoop-mr-bundle.jar\" />\n                 <copy file=\"${project.basedir}/../../../../packaging/hudi-hive-bundle/target/hudi-hive-bundle-${project.version}.jar\" tofile=\"target/hoodie-hive-bundle.jar\" />\n-                <copy file=\"${project.basedir}/../../../../packaging/hudi-spark-bundle/target/hudi-spark-bundle-${project.version}.jar\" tofile=\"target/hoodie-spark-bundle.jar\" />\n+                <copy file=\"${project.basedir}/../../../../packaging/hudi-spark-bundle/target/hudi-spark-bundle_${scala.binary.version}-${project.version}.jar\" tofile=\"target/hoodie-spark-bundle_${scala.binary.version}.jar\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "6787496712f2ba16e65ddd94c702a71135c356e2", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/6787496712f2ba16e65ddd94c702a71135c356e2", "committedDate": "2020-01-16T08:05:04Z", "message": "Rename scala related artifactId & add maven profile to support Scala 2.12"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "6787496712f2ba16e65ddd94c702a71135c356e2", "author": {"user": null}, "url": "https://github.com/apache/hudi/commit/6787496712f2ba16e65ddd94c702a71135c356e2", "committedDate": "2020-01-16T08:05:04Z", "message": "Rename scala related artifactId & add maven profile to support Scala 2.12"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODY1MTk4", "url": "https://github.com/apache/hudi/pull/1226#pullrequestreview-344865198", "createdAt": "2020-01-17T22:01:25Z", "commit": {"oid": "6787496712f2ba16e65ddd94c702a71135c356e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4075, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}