{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNTYxMTQz", "number": 993, "title": "[8.0.0.beta1] Add dependencies repository before mvn install", "bodyText": "Backports the #992.\n\nJIRA\n\n\nReferenced pull requests\n\n\nChecklist\n\n Documentation updated if applicable.\n Upgrade recipe provided if applicable.\n\n\n\nHow to retest this PR or trigger a specific build:\n\n\nfor a pull request build please add comment: Jenkins retest this\nfor a full downstream build please add comment: Jenkins run fdb\nfor a compile downstream build please add comment: Jenkins run cdb\nfor a full production downstream build please add comment: Jenkins execute product fdb\nfor an upstream build please add comment: Jenkins run upstream", "createdAt": "2020-10-27T08:11:52Z", "url": "https://github.com/kiegroup/optaplanner/pull/993", "merged": true, "mergeCommit": {"oid": "996fbaa23e462476156e27f2480b2ca1fa3dfc21"}, "closed": true, "closedAt": "2020-10-28T07:16:39Z", "author": {"login": "rsynek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWkUN3AH2gAyNTEwNTYxMTQzOmNmMmQ1ZjE1M2E4N2Q4NWM1ZjNiYmY5NWQxNWExODUyMzQ0NTU1NGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWlprlgFqTUxNzUwNDQ0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cf2d5f153a87d85c5f3bbf95d15a18523445554f", "author": {"user": {"login": "rsynek", "name": "Radovan Synek"}}, "url": "https://github.com/kiegroup/optaplanner/commit/cf2d5f153a87d85c5f3bbf95d15a18523445554f", "committedDate": "2020-10-27T08:02:14Z", "message": "Add dependencies repository before mvn install"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDQwMDUw", "url": "https://github.com/kiegroup/optaplanner/pull/993#pullrequestreview-517440050", "createdAt": "2020-10-27T08:17:00Z", "commit": {"oid": "cf2d5f153a87d85c5f3bbf95d15a18523445554f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoxNzowMFrOHov5TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoxNzowMFrOHov5TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ4OTgwNQ==", "bodyText": "We could just store in the env under another name the path to this Settings file (env.GLOBAL_MAVEN_SETTINGS for example), so we don't need to do it again in the Build[...] part and just use the env we just stored.\nThe file is anyway created and stored for the rest of the pipeline run", "url": "https://github.com/kiegroup/optaplanner/pull/993#discussion_r512489805", "createdAt": "2020-10-27T08:17:00Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -98,10 +98,7 @@ pipeline {\n                         sh \"echo '\\n-B -s ${MAVEN_SETTINGS_FILE}' | tee -a optaplanner/.mvn/maven.config\"\n                         if (params.MAVEN_DEPENDENCIES_REPOSITORY != '') {\n                             sh \"echo '\\n-Denforcer.skip=true' | tee -a optaplanner/.mvn/maven.config\"\n-                            sh \"sed -i 's|<repositories>|<repositories><repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|<pluginRepositories>|<pluginRepositories><pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|external:\\\\*|external:*,!staging|g' ${MAVEN_SETTINGS_FILE}\"\n-                            // Done to allow Maven to download release artifacts from MAVEN_DEPENDENCIES_REPOSITORY\n+                            addRepositoryToSettings(params.MAVEN_DEPENDENCIES_REPOSITORY, env.MAVEN_SETTINGS_FILE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf2d5f153a87d85c5f3bbf95d15a18523445554f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ea959f29ad16f3910d9ea0dbb58d7d8ac8654fa", "author": {"user": {"login": "rsynek", "name": "Radovan Synek"}}, "url": "https://github.com/kiegroup/optaplanner/commit/3ea959f29ad16f3910d9ea0dbb58d7d8ac8654fa", "committedDate": "2020-10-27T09:03:15Z", "message": "Store settings in env variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTA0NDQy", "url": "https://github.com/kiegroup/optaplanner/pull/993#pullrequestreview-517504442", "createdAt": "2020-10-27T09:35:35Z", "commit": {"oid": "3ea959f29ad16f3910d9ea0dbb58d7d8ac8654fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3275, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}