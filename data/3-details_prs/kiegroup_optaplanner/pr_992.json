{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNTYwNjEx", "number": 992, "title": "Add dependencies repository before mvn install", "bodyText": "Adds the staging repository to a mvn install run directly. The quarkus bootstrap maven resolver does not respect settings passed via .mvn/maven.config.\n\nJIRA\n\n\nReferenced pull requests\n\n\nChecklist\n\n Documentation updated if applicable.\n Upgrade recipe provided if applicable.\n\n\n\nHow to retest this PR or trigger a specific build:\n\n\nfor a pull request build please add comment: Jenkins retest this\nfor a full downstream build please add comment: Jenkins run fdb\nfor a compile downstream build please add comment: Jenkins run cdb\nfor a full production downstream build please add comment: Jenkins execute product fdb\nfor an upstream build please add comment: Jenkins run upstream", "createdAt": "2020-10-27T08:10:45Z", "url": "https://github.com/kiegroup/optaplanner/pull/992", "merged": true, "mergeCommit": {"oid": "9971481ed982e241255145bf0d400f0449aa8b55"}, "closed": true, "closedAt": "2020-10-28T07:17:18Z", "author": {"login": "rsynek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWkWI6AH2gAyNTEwNTYwNjExOmNiYjU1NzhmMTFlMDU2ZjI4ZWRjZDNkNjMwNWQ4ZmZiNTEyZjI4N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWlpaAgFqTUxNzUwNDIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cbb5578f11e056f28edcd3d6305d8ffb512f287f", "author": {"user": {"login": "rsynek", "name": "Radovan Synek"}}, "url": "https://github.com/kiegroup/optaplanner/commit/cbb5578f11e056f28edcd3d6305d8ffb512f287f", "committedDate": "2020-10-27T08:04:20Z", "message": "Add dependencies repository before mvn install"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDQwNTAw", "url": "https://github.com/kiegroup/optaplanner/pull/992#pullrequestreview-517440500", "createdAt": "2020-10-27T08:17:33Z", "commit": {"oid": "cbb5578f11e056f28edcd3d6305d8ffb512f287f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoxNzozM1rOHov6kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoxNzozM1rOHov6kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5MDEzMA==", "bodyText": "Same comment => https://github.com/kiegroup/optaplanner/pull/993/files#r512489805", "url": "https://github.com/kiegroup/optaplanner/pull/992#discussion_r512490130", "createdAt": "2020-10-27T08:17:33Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -98,10 +98,7 @@ pipeline {\n                         sh \"echo '\\n-B -s ${MAVEN_SETTINGS_FILE}' | tee -a optaplanner/.mvn/maven.config\"\n                         if (params.MAVEN_DEPENDENCIES_REPOSITORY != '') {\n                             sh \"echo '\\n-Denforcer.skip=true' | tee -a optaplanner/.mvn/maven.config\"\n-                            sh \"sed -i 's|<repositories>|<repositories><repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|<pluginRepositories>|<pluginRepositories><pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|external:\\\\*|external:*,!staging|g' ${MAVEN_SETTINGS_FILE}\"\n-                            // Done to allow Maven to download release artifacts from MAVEN_DEPENDENCIES_REPOSITORY\n+                            addRepositoryToSettings(params.MAVEN_DEPENDENCIES_REPOSITORY, env.MAVEN_SETTINGS_FILE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbb5578f11e056f28edcd3d6305d8ffb512f287f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f9efb5fa49bebe63b888ccdc2aa9da51433a5a0", "author": {"user": {"login": "rsynek", "name": "Radovan Synek"}}, "url": "https://github.com/kiegroup/optaplanner/commit/3f9efb5fa49bebe63b888ccdc2aa9da51433a5a0", "committedDate": "2020-10-27T09:02:40Z", "message": "Store settings in env variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTA0MjAz", "url": "https://github.com/kiegroup/optaplanner/pull/992#pullrequestreview-517504203", "createdAt": "2020-10-27T09:35:17Z", "commit": {"oid": "3f9efb5fa49bebe63b888ccdc2aa9da51433a5a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3272, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}