{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMjkwMTI2", "number": 869, "title": "BXMSPROD-912 openjdk11 build execution added to pull_request.yml", "bodyText": "https://issues.redhat.com/browse/BXMSPROD-912", "createdAt": "2020-08-05T10:21:14Z", "url": "https://github.com/kiegroup/optaplanner/pull/869", "merged": true, "mergeCommit": {"oid": "b21ed4051806fb1e818aeaf29a1afb2e840d5e03"}, "closed": true, "closedAt": "2020-08-06T08:37:21Z", "author": {"login": "Ginxo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc74dQNgH2gAyNDYzMjkwMTI2Ojg5ZTQ0MTdkMzlkYjFlYmQ1Y2FmMzI0M2Q1NjliODYyMGFlYzFhNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8LhFjAFqTQ2MjI5NDcyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "89e4417d39db1ebd5caf3243d569b8620aec1a45", "author": {"user": {"login": "Ginxo", "name": "Enrique Mingorance Cano"}}, "url": "https://github.com/kiegroup/optaplanner/commit/89e4417d39db1ebd5caf3243d569b8620aec1a45", "committedDate": "2020-08-05T10:14:15Z", "message": "BXMSPROD-912 openjdk11 build execution added to pull_request.yml\n\nhttps://issues.redhat.com/browse/BXMSPROD-912"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd", "author": {"user": {"login": "Ginxo", "name": "Enrique Mingorance Cano"}}, "url": "https://github.com/kiegroup/optaplanner/commit/ef5589c45c97d90fe42e790df7ef11e78bcb6afd", "committedDate": "2020-08-05T12:58:12Z", "message": "BXMSPROD-912 workflow-file-name input added to pull_request.yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMjI1MjYx", "url": "https://github.com/kiegroup/optaplanner/pull/869#pullrequestreview-462225261", "createdAt": "2020-08-06T06:39:45Z", "commit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNjozOTo0NlrOG8lPKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNjo0MDozNVrOG8lQkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3NzgzMg==", "bodyText": "It is unfortunate that you need to specify JDK like this. If you could use the standard way (see https://github.com/kiegroup/optaplanner/blob/master/.github/workflows/os_java_ci.yml#L29), you'd be able to use a standard matrix build, avoiding this large config duplication.", "url": "https://github.com/kiegroup/optaplanner/pull/869#discussion_r466177832", "createdAt": "2020-08-06T06:39:46Z", "author": {"login": "triceo"}, "path": ".github/workflows/pull_request.yml", "diffHunk": "@@ -1,18 +1,39 @@\n+name: Build Chain\n+\n on: [ workflow_dispatch ]\n \n jobs:\n-  build-chain:\n+  build-chain-openjdk8:\n+    runs-on: ubuntu-latest\n+    name: Pull Request openjdk8\n+    steps:\n+    - uses: actions/checkout@v2\n+    - name: Build Chain\n+      id: build-chain\n+      uses: kiegroup/github-action-build-chain@openjdk8\n+      with:\n+        parent-dependencies: 'drools@7.x:master'\n+        child-dependencies: 'jbpm@7.x:master'\n+        build-command: 'mvn -e clean install -nsu -Prun-code-coverage,wildfly -Dfull  -Dintegration-tests=true -Dmaven.test.failure.ignore=true -DjvmArgs=\"-Xms1g -Xmx4g\" | mvn -nsu generate-resources -Psonarcloud-analysis -DjvmArgs=\"-Xms1g -Xmx4g\"'\n+        build-command-upstream: \"mvn -e clean install -DskipTests -Dgwt.compiler.skip=true -Dgwt.skipCompilation=true -Denforcer.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true\"\n+        workflow-file-name: \"pull_request.yml\"\n+      env:\n+          GITHUB_TOKEN: \"${{ secrets.GITHUB_TOKEN }}\"\n+  build-chain-openjdk11:\n     runs-on: ubuntu-latest\n-    name: Build Pull Request\n+    name: Pull Request openjdk11\n     steps:\n     - uses: actions/checkout@v2\n     - name: Build Chain\n       id: build-chain\n-      uses: kiegroup/github-action-build-chain@master\n+      uses: kiegroup/github-action-build-chain@openjdk11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3ODE5NQ==", "bodyText": "Is there any doc I could read on how this particular config works? I'm confused by both \"7.x\" and \"master\" being there.", "url": "https://github.com/kiegroup/optaplanner/pull/869#discussion_r466178195", "createdAt": "2020-08-06T06:40:35Z", "author": {"login": "triceo"}, "path": ".github/workflows/pull_request.yml", "diffHunk": "@@ -1,18 +1,39 @@\n+name: Build Chain\n+\n on: [ workflow_dispatch ]\n \n jobs:\n-  build-chain:\n+  build-chain-openjdk8:\n+    runs-on: ubuntu-latest\n+    name: Pull Request openjdk8\n+    steps:\n+    - uses: actions/checkout@v2\n+    - name: Build Chain\n+      id: build-chain\n+      uses: kiegroup/github-action-build-chain@openjdk8\n+      with:\n+        parent-dependencies: 'drools@7.x:master'\n+        child-dependencies: 'jbpm@7.x:master'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMjM2MzU1", "url": "https://github.com/kiegroup/optaplanner/pull/869#pullrequestreview-462236355", "createdAt": "2020-08-06T07:00:27Z", "commit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNzowMDoyN1rOG8lykg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwNzowOTo0NVrOG8mC6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE4Njg5OA==", "bodyText": "The profiles run-code-coverage and sonarcloud-analysis should be never in the same maven execution:\nmvn -e clean install -nsu -Prun-code-coverage runs tests with measuring the coverage\nmvn validate -Psonarcloud-analysis merges the coverage information into a single XML coverage file and triggers the sonarcloud", "url": "https://github.com/kiegroup/optaplanner/pull/869#discussion_r466186898", "createdAt": "2020-08-06T07:00:27Z", "author": {"login": "rsynek"}, "path": ".github/workflows/pull_request.yml", "diffHunk": "@@ -1,18 +1,39 @@\n+name: Build Chain\n+\n on: [ workflow_dispatch ]\n \n jobs:\n-  build-chain:\n+  build-chain-openjdk8:\n+    runs-on: ubuntu-latest\n+    name: Pull Request openjdk8\n+    steps:\n+    - uses: actions/checkout@v2\n+    - name: Build Chain\n+      id: build-chain\n+      uses: kiegroup/github-action-build-chain@openjdk8\n+      with:\n+        parent-dependencies: 'drools@7.x:master'\n+        child-dependencies: 'jbpm@7.x:master'\n+        build-command: 'mvn -e clean install -nsu -Prun-code-coverage,wildfly -Dfull  -Dintegration-tests=true -Dmaven.test.failure.ignore=true -DjvmArgs=\"-Xms1g -Xmx4g\" | mvn -nsu generate-resources -Psonarcloud-analysis -DjvmArgs=\"-Xms1g -Xmx4g\"'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE4ODI3Ng==", "bodyText": "Also, as I see the same command in the build-chain-openjdk11, SonarCloud should be triggered only once per any change on the PR. There is no point in running it inside multiple checks.", "url": "https://github.com/kiegroup/optaplanner/pull/869#discussion_r466188276", "createdAt": "2020-08-06T07:03:43Z", "author": {"login": "rsynek"}, "path": ".github/workflows/pull_request.yml", "diffHunk": "@@ -1,18 +1,39 @@\n+name: Build Chain\n+\n on: [ workflow_dispatch ]\n \n jobs:\n-  build-chain:\n+  build-chain-openjdk8:\n+    runs-on: ubuntu-latest\n+    name: Pull Request openjdk8\n+    steps:\n+    - uses: actions/checkout@v2\n+    - name: Build Chain\n+      id: build-chain\n+      uses: kiegroup/github-action-build-chain@openjdk8\n+      with:\n+        parent-dependencies: 'drools@7.x:master'\n+        child-dependencies: 'jbpm@7.x:master'\n+        build-command: 'mvn -e clean install -nsu -Prun-code-coverage,wildfly -Dfull  -Dintegration-tests=true -Dmaven.test.failure.ignore=true -DjvmArgs=\"-Xms1g -Xmx4g\" | mvn -nsu generate-resources -Psonarcloud-analysis -DjvmArgs=\"-Xms1g -Xmx4g\"'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE4Njg5OA=="}, "originalCommit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE5MTA4Mw==", "bodyText": "Question: do the GitHub Actions inject SonarCloud auth token into the build? Last time I experimented with GA and SonarCloud, it didn't work because GA deliberately avoid injecting secrets into builds of PRs opened from a forked repo. The motivation was to protect the secret from being read by a malicious PR.", "url": "https://github.com/kiegroup/optaplanner/pull/869#discussion_r466191083", "createdAt": "2020-08-06T07:09:45Z", "author": {"login": "rsynek"}, "path": ".github/workflows/pull_request.yml", "diffHunk": "@@ -1,18 +1,39 @@\n+name: Build Chain\n+\n on: [ workflow_dispatch ]\n \n jobs:\n-  build-chain:\n+  build-chain-openjdk8:\n+    runs-on: ubuntu-latest\n+    name: Pull Request openjdk8\n+    steps:\n+    - uses: actions/checkout@v2\n+    - name: Build Chain\n+      id: build-chain\n+      uses: kiegroup/github-action-build-chain@openjdk8\n+      with:\n+        parent-dependencies: 'drools@7.x:master'\n+        child-dependencies: 'jbpm@7.x:master'\n+        build-command: 'mvn -e clean install -nsu -Prun-code-coverage,wildfly -Dfull  -Dintegration-tests=true -Dmaven.test.failure.ignore=true -DjvmArgs=\"-Xms1g -Xmx4g\" | mvn -nsu generate-resources -Psonarcloud-analysis -DjvmArgs=\"-Xms1g -Xmx4g\"'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE4Njg5OA=="}, "originalCommit": {"oid": "ef5589c45c97d90fe42e790df7ef11e78bcb6afd"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88787dbd8d95c8dc3e0fee8e557eb6a60678c568", "author": {"user": {"login": "Ginxo", "name": "Enrique Mingorance Cano"}}, "url": "https://github.com/kiegroup/optaplanner/commit/88787dbd8d95c8dc3e0fee8e557eb6a60678c568", "committedDate": "2020-08-06T08:03:56Z", "message": "BXMSPROD-912 sonar execution removed from pull_request.yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMjgwNzU5", "url": "https://github.com/kiegroup/optaplanner/pull/869#pullrequestreview-462280759", "createdAt": "2020-08-06T08:07:40Z", "commit": {"oid": "88787dbd8d95c8dc3e0fee8e557eb6a60678c568"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMjk0NzIy", "url": "https://github.com/kiegroup/optaplanner/pull/869#pullrequestreview-462294722", "createdAt": "2020-08-06T08:26:38Z", "commit": {"oid": "88787dbd8d95c8dc3e0fee8e557eb6a60678c568"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3373, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}