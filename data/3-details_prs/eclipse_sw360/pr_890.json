{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2ODUxNDQ1", "number": 890, "title": "feat(ExternalIds):Support multi-externalId Values of same externalId key in Project, Component, and Release page", "bodyText": "Please provide a summary of your changes here.\n\nWhich issue is this pull request belonging to and how is it solving it? (#865)\nNo dependencies updated\n\n\nIssue:\nSuggest Reviewer\n\n@mcjaeger\n\nHow To Test?\n\nHow should these changes be tested by the reviewer?\nProject\n\nUI: Edit Project\n\nUI: Display Project\n\nAPI: Search by external id\n\n\n\nComponent\n\n\nUI: Edit Component\n\n\n\n\n\nUI: Display Component\n\n\n\n\n\nAPI: Search by external id\n\n\n\nRelease\n\n\nUI: Edit Release\n\n\n\n\n\nUI: Display Release\n\n\n\n\n\nAPI: Search by external id\n\n\n\n\n\nNo additional test\n\nChecklist\nMust:\n\n All related issues are referenced in commit messages and in PR", "createdAt": "2020-06-19T02:24:01Z", "url": "https://github.com/eclipse/sw360/pull/890", "merged": true, "mergeCommit": {"oid": "88466ae596df7d8bc1a5392cf60994f000d43d04"}, "closed": true, "closedAt": "2020-07-21T22:31:33Z", "author": {"login": "AlbertHjy"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrdRGYgH2gAyNDM2ODUxNDQ1OjBhZWZjZjZkNDBhN2U2OTIzOGRhNWRjZGM3NmUzM2UwYTA5NWVkN2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3OAaHAFqTQ1Mjg3NDk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0aefcf6d40a7e69238da5dcdc76e33e0a095ed7a", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/0aefcf6d40a7e69238da5dcdc76e33e0a095ed7a", "committedDate": "2020-06-15T09:30:45Z", "message": "feat(ExternalIds):Support multi-externalId Values of same externalId key in Project, Component, and Release page\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDQ0MjAz", "url": "https://github.com/eclipse/sw360/pull/890#pullrequestreview-444444203", "createdAt": "2020-07-08T06:24:37Z", "commit": {"oid": "0aefcf6d40a7e69238da5dcdc76e33e0a095ed7a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNjoyNDozN1rOGuZwoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNjoyNDozN1rOGuZwoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTMwOTcyOA==", "bodyText": "Creating an object mapper is a rather expensive operation; so this should not be done for each element in the map. The object creation should at least be moved to the beginning of the method.\nAs the ObjectMapper class is thread-safe, in this case it would also be an option to have a static ObjectMapper field in PortletUtils that is always reused.", "url": "https://github.com/eclipse/sw360/pull/890#discussion_r451309728", "createdAt": "2020-07-08T06:24:37Z", "author": {"login": "oheger-bosch"}, "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/common/PortletUtils.java", "diffHunk": "@@ -369,6 +371,27 @@ public static VerificationState getVerificationState(VulnerabilityDTO vul){\n         return customMap;\n     }\n \n+    public static Map<String,String> getMapWithJoinedValueFromRequest(PortletRequest request, String key, String value) {\n+        Map<String, Set<String>> customMap = getCustomMapFromRequest(request, key, value);\n+        return customMap.entrySet().stream()\n+                .collect(Collectors.toMap(Map.Entry::getKey,\n+                        e -> {\n+                            try {\n+                                if(!isNotEmpty(e.getValue()) && e.getValue().size() == 1) {\n+                                    return e.getValue().stream()\n+                                            .findFirst()\n+                                            .orElse(\"\");\n+                                }\n+                                ObjectMapper mapper = new ObjectMapper();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0aefcf6d40a7e69238da5dcdc76e33e0a095ed7a"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a59c0db9d4207318e3b4986f565c340979fc83d", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/9a59c0db9d4207318e3b4986f565c340979fc83d", "committedDate": "2020-07-08T06:43:36Z", "message": "feat(ExternalIds): Code refactoring\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa7b890c32f3d4fc409631447ca4d70b137d0060", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/aa7b890c32f3d4fc409631447ca4d70b137d0060", "committedDate": "2020-07-09T09:43:30Z", "message": "feat(ExternalIds): Make the PortletUtils.objectMapper field final to make it thread-safe\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDM4Nzg5", "url": "https://github.com/eclipse/sw360/pull/890#pullrequestreview-449038789", "createdAt": "2020-07-15T14:50:54Z", "commit": {"oid": "aa7b890c32f3d4fc409631447ca4d70b137d0060"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb2f29501e7044d9af297d5a93768cce979f2989", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/bb2f29501e7044d9af297d5a93768cce979f2989", "committedDate": "2020-07-17T12:51:04Z", "message": "feat(ExternalIds): 1. Handle EscapeXml for external id value, 2. Fix \"Upon update of existing project or Component or Release without any change in External IDs\"\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9cd81a9be122ae6a8616c50de4cf01bd68a9057", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/a9cd81a9be122ae6a8616c50de4cf01bd68a9057", "committedDate": "2020-07-20T00:06:45Z", "message": "Rebase from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0049dd3b6e46cf051594a4020f277713f305ed42", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/0049dd3b6e46cf051594a4020f277713f305ed42", "committedDate": "2020-07-20T01:06:04Z", "message": "feat(ExternalIds): Add byExternalIds views migration scripts, and upgrade to new version 11.0.0-SNAPSHOT\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "753d3889a24e0d9e0e2f6dc92853d0ec3673f1c2", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/753d3889a24e0d9e0e2f6dc92853d0ec3673f1c2", "committedDate": "2020-07-20T06:15:56Z", "message": "feat(ExternalIds): Add comments to Component, Release and Project rest APIs\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDgxOTAw", "url": "https://github.com/eclipse/sw360/pull/890#pullrequestreview-451481900", "createdAt": "2020-07-20T10:23:38Z", "commit": {"oid": "753d3889a24e0d9e0e2f6dc92853d0ec3673f1c2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoyMzozOFrOG0ExNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoyMzozOFrOG0ExNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI1NzI2OQ==", "bodyText": "Getting error while executing this script\nFile \"020_update_byExternalIds_release_view.py\", line 21\nSyntaxError: Non-ASCII character '\\xc3' in file 020_update_byExternalIds_release_view.py on line 21, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details", "url": "https://github.com/eclipse/sw360/pull/890#discussion_r457257269", "createdAt": "2020-07-20T10:23:38Z", "author": {"login": "JaideepPalit"}, "path": "scripts/migrations/020_update_byExternalIds_release_view.py", "diffHunk": "@@ -0,0 +1,97 @@\n+#!/usr/bin/python\n+# -----------------------------------------------------------------------------\n+# Copyright Siemens AG, 2019. Part of the SW360 Portal Project.\n+#\n+# This program and the accompanying materials are made\n+# available under the terms of the Eclipse Public License 2.0\n+# which is available at https://www.eclipse.org/legal/epl-2.0/\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# This is a manual database migration script. It is assumed that a\n+# dedicated framework for automatic migration will be written in the\n+# future. When that happens, this script should be refactored to conform\n+# to the framework's prerequisites to be run by the framework. For\n+# example, server address and db name should be parameterized, the code\n+# reorganized into a single class or function, etc.\n+# -----------------------------------------------------------------------------\n+\n+import time\n+import couchdb\n+import json\u00df", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "753d3889a24e0d9e0e2f6dc92853d0ec3673f1c2"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2442e1f221b93f37016b22374cff4d64bdf43276", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/2442e1f221b93f37016b22374cff4d64bdf43276", "committedDate": "2020-07-20T13:07:05Z", "message": "feat(ExternalIds): Change file permission and fix typo of special character\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30ce4db178c93c10dcf415cd0c0f9b6f9f60ddd7", "author": {"user": {"login": "AlbertHjy", "name": "He, Albert"}}, "url": "https://github.com/eclipse/sw360/commit/30ce4db178c93c10dcf415cd0c0f9b6f9f60ddd7", "committedDate": "2020-07-20T13:23:11Z", "message": "feat(ExternalIds): Change file permission.\n\nSigned-off-by: He, Albert <albert.he@sap.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODc0OTk2", "url": "https://github.com/eclipse/sw360/pull/890#pullrequestreview-452874996", "createdAt": "2020-07-21T22:31:02Z", "commit": {"oid": "30ce4db178c93c10dcf415cd0c0f9b6f9f60ddd7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4930, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}