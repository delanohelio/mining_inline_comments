{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDIxNDc0", "number": 819, "title": "feat(logout): Added post logout hook to add custom logic", "bodyText": "Summarry\n\nAdded a post logout hook which can be used to write any custom logic post logout such as redirecting to a custom logout page, integrating or invalidating third party auth cookies viz. mod-mellon, invalidating session etc.\nFixed dynamically activation of components via components.activate of sw360.properties.\nAdded Clear-Site-Data response header upon logout to clear cookies, storage and cache\n\nHow To Test?\nEnable the LogoutAction hook/component in sw360.properties.\nVerify the browser cookies, cache, and storage deletion from browser upon logout.\nSigned-off-by: Smruti Sahoo smruti.sahoo@siemens.com", "createdAt": "2020-04-03T08:00:56Z", "url": "https://github.com/eclipse/sw360/pull/819", "merged": true, "mergeCommit": {"oid": "ee6befa43d80ae162431284b59dd4095d6e427c9"}, "closed": true, "closedAt": "2020-04-22T22:16:36Z", "author": {"login": "smrutis1"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV8wNNgBqjMyMTgzNjgzNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaDzB7AFqTM5Nzk0NzcxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24a9809ba46cf1653d533821a864a205e5e00840", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/24a9809ba46cf1653d533821a864a205e5e00840", "committedDate": "2020-04-03T07:48:45Z", "message": "feat(logout): Added post logout hook to add custom logic\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}, "afterCommit": {"oid": "3be06d09dec9185fddf7e8407530169937910d14", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/3be06d09dec9185fddf7e8407530169937910d14", "committedDate": "2020-04-09T13:44:17Z", "message": "feat(logout): Added post logout hook to add custom logic\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3be06d09dec9185fddf7e8407530169937910d14", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/3be06d09dec9185fddf7e8407530169937910d14", "committedDate": "2020-04-09T13:44:17Z", "message": "feat(logout): Added post logout hook to add custom logic\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}, "afterCommit": {"oid": "01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "committedDate": "2020-04-20T07:52:44Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "committedDate": "2020-04-20T07:52:44Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}, "afterCommit": {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/e14509879339d6f97e573ba9bacfbd9d75b3ba62", "committedDate": "2020-04-20T10:15:40Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MzU5NjI2", "url": "https://github.com/eclipse/sw360/pull/819#pullrequestreview-396359626", "createdAt": "2020-04-20T11:15:14Z", "commit": {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxNToxNFrOGIPcAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxOToxNlrOGIPk2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5NDcyMQ==", "bodyText": "Please check indentation", "url": "https://github.com/eclipse/sw360/pull/819#discussion_r411294721", "createdAt": "2020-04-20T11:15:14Z", "author": {"login": "JaideepPalit"}, "path": "frontend/sw360-portlet/pom.xml", "diffHunk": "@@ -154,7 +154,7 @@\n         <dependency>\n             <groupId>com.liferay.portal</groupId>\n             <artifactId>com.liferay.util.java</artifactId>\n-\t\t\t<version>${liferay.util.java.version}</version>\n+\t    <version>${liferay.util.java.version}</version>\n             <scope>provided</scope>\n         </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5Njk4Ng==", "bodyText": "Maybe redirecting to custom logout page can also be added here,\nwhich gets executed based on condition\nthat property logout.redirect.url is not null and not empty.", "url": "https://github.com/eclipse/sw360/pull/819#discussion_r411296986", "createdAt": "2020-04-20T11:19:16Z", "author": {"login": "JaideepPalit"}, "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/users/LogoutAction.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright Siemens AG, 2020. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.portal.users;\n+\n+import javax.servlet.http.*;\n+\n+import org.eclipse.sw360.portal.components.LoggingComponent;\n+import org.osgi.service.component.annotations.*;\n+\n+import com.liferay.portal.kernel.events.*;\n+\n+/**\n+ * This class can be used to write any custom logic post logout such as\n+ * redirecting to a custom logout page, integrating and invalidating third party\n+ * auth cookies viz mod-mellon etc.\n+ *\n+ * @author smruti.sahoo@siemens.com\n+ *\n+ */\n+@Component(\n+    immediate = true,\n+    property = {\"key=logout.events.post\" },\n+    service = LifecycleAction.class,\n+    configurationPolicy = ConfigurationPolicy.REQUIRE,\n+    enabled = false\n+)\n+public class LogoutAction extends LoggingComponent implements LifecycleAction {\n+\n+    @Override\n+    public void processLifecycleEvent(LifecycleEvent lifecycleEvent) throws ActionException {\n+        HttpServletResponse response = lifecycleEvent.getResponse();\n+        response.setHeader(\"Clear-Site-Data\", \"\\\"cache\\\", \\\"storage\\\", \\\"cookies\\\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c01322e3e195f830bf5094755877e81cda706876", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/c01322e3e195f830bf5094755877e81cda706876", "committedDate": "2020-04-21T12:46:33Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/e14509879339d6f97e573ba9bacfbd9d75b3ba62", "committedDate": "2020-04-20T10:15:40Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}, "afterCommit": {"oid": "c01322e3e195f830bf5094755877e81cda706876", "author": {"user": {"login": "smrutis1", "name": "Smruti Prakash Sahoo"}}, "url": "https://github.com/eclipse/sw360/commit/c01322e3e195f830bf5094755877e81cda706876", "committedDate": "2020-04-21T12:46:33Z", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTQ3NzE2", "url": "https://github.com/eclipse/sw360/pull/819#pullrequestreview-397947716", "createdAt": "2020-04-22T08:13:34Z", "commit": {"oid": "c01322e3e195f830bf5094755877e81cda706876"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4899, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}