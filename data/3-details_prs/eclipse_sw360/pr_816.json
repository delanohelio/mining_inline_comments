{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyODg1ODcz", "number": 816, "title": "SW360 support multi-language", "bodyText": "This PR supports multiple languages.\nIn the current version, I added language extension with Vietnamese.", "createdAt": "2020-03-24T09:50:50Z", "url": "https://github.com/eclipse/sw360/pull/816", "merged": true, "mergeCommit": {"oid": "116491974d28ada5e1ab934ab3af2d91bcd54554"}, "closed": true, "closedAt": "2020-04-06T13:56:26Z", "author": {"login": "nam-np"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSqGXUgFqTM4MzYyNTk2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcU9_h1AFqTM4ODIwNjg1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNjI1OTY2", "url": "https://github.com/eclipse/sw360/pull/816#pullrequestreview-383625966", "createdAt": "2020-03-30T08:19:41Z", "commit": {"oid": "b83b7fd18c17ef244009132d0fba5b8b11d6bae8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoxOTo0MVrOF9egWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoxOTo0MVrOF9egWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNzI1Ng==", "bodyText": "maybe consider the general (no existing installation in place) page fot it: https://github.com/eclipse/sw360/wiki/Deploy-Natively", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r400007256", "createdAt": "2020-03-30T08:19:41Z", "author": {"login": "mcjaeger"}, "path": "README_LANG.md", "diffHunk": "@@ -0,0 +1,126 @@\n+\n+## SW360 Multi-Language System\n+\n+### Introduction\n+\n+SW360 multi-language can support multiple languages. In this way, SW360 can internationalize. With each localization, user can select the appropriate language and contribute more local translations.\n+\n+### Language Extension \n+\n+By the default SW360 language is English, language extensions are added and based on English.\n+\n+With each language, it will have a special language extension that is language for local.\n+\n+Language extension contains a pair: key and value\n+* Key: used to get value of key and replace text to key in source code.\n+* Value: the local language translation.\n+\n+### How to deploy\n+\n+Refer to the document:\n+\n+https://github.com/eclipse/sw360/wiki/Deploy-Upgrade-to-Liferay-7.2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b83b7fd18c17ef244009132d0fba5b8b11d6bae8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "author": {"user": {"login": "nam-np", "name": "Nguyen Phuong Nam"}}, "url": "https://github.com/eclipse/sw360/commit/994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "committedDate": "2020-04-01T13:46:55Z", "message": "feat: SW360 support multi-language\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b83b7fd18c17ef244009132d0fba5b8b11d6bae8", "author": {"user": {"login": "nam-np", "name": "Nguyen Phuong Nam"}}, "url": "https://github.com/eclipse/sw360/commit/b83b7fd18c17ef244009132d0fba5b8b11d6bae8", "committedDate": "2020-03-25T02:58:43Z", "message": "Fix: check license header in language property files\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>"}, "afterCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "author": {"user": {"login": "nam-np", "name": "Nguyen Phuong Nam"}}, "url": "https://github.com/eclipse/sw360/commit/994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "committedDate": "2020-04-01T13:46:55Z", "message": "feat: SW360 support multi-language\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODcyODQy", "url": "https://github.com/eclipse/sw360/pull/816#pullrequestreview-387872842", "createdAt": "2020-04-05T23:17:35Z", "commit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMzoxNzozNVrOGBEPkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMzo0MToxOFrOGBEang==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA==", "bodyText": "this made me suspicous and it looks like moderations do not work. Accepting a moderation request returns an empty moderation portlet and the following exeption:\n2020-04-05 23:16:08.149 ERROR [http-nio-8080-exec-122][ModerationPortlet:187] Error in Moderation \norg.apache.thrift.transport.TTransportException: HTTP Response code: 500", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771280", "createdAt": "2020-04-05T23:17:35Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/tags/DisplayProjectChanges.java", "diffHunk": "@@ -114,14 +119,16 @@ public int doStartTag() throws JspException {\n             }\n \n             String renderString = display.toString();\n+            HttpServletRequest request = (HttpServletRequest) pageContext.getRequest();\n+            ResourceBundle resourceBundle = ResourceBundleUtil.getBundle(\"content.Language\", request.getLocale(), getClass());\n \n             if (Strings.isNullOrEmpty(renderString)) {\n-                renderString = \"<div class=\\\"alert alert-info\\\">No changes in basic fields.</div>\";\n+                renderString = \"<div class=\\\"alert alert-info\\\">\"+LanguageUtil.get(resourceBundle,\"no.changes.in.basic.fields\")+\"</div>\";\n             } else {\n                 renderString = String.format(\"<table class=\\\"%s\\\" id=\\\"%schanges\\\" >\", tableClasses, idPrefix)\n                         + \"<thead>\"\n                         + String.format(\"<tr><th>%s</th><th>%s</th><th>%s</th><th>%s</th></tr></thead><tbody>\",\n-                        FIELD_NAME, CURRENT_VAL, DELETED_VAL, SUGGESTED_VAL)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTcwMw==", "bodyText": "It seems like the moderation requests for components is broken, not projects. Projects moderation reqeusts seem to work but not component. BTW. screenshot is:\n\n(after accepting a moderation request, screen should return to moderation request list)", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771703", "createdAt": "2020-04-05T23:21:06Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/tags/DisplayProjectChanges.java", "diffHunk": "@@ -114,14 +119,16 @@ public int doStartTag() throws JspException {\n             }\n \n             String renderString = display.toString();\n+            HttpServletRequest request = (HttpServletRequest) pageContext.getRequest();\n+            ResourceBundle resourceBundle = ResourceBundleUtil.getBundle(\"content.Language\", request.getLocale(), getClass());\n \n             if (Strings.isNullOrEmpty(renderString)) {\n-                renderString = \"<div class=\\\"alert alert-info\\\">No changes in basic fields.</div>\";\n+                renderString = \"<div class=\\\"alert alert-info\\\">\"+LanguageUtil.get(resourceBundle,\"no.changes.in.basic.fields\")+\"</div>\";\n             } else {\n                 renderString = String.format(\"<table class=\\\"%s\\\" id=\\\"%schanges\\\" >\", tableClasses, idPrefix)\n                         + \"<thead>\"\n                         + String.format(\"<tr><th>%s</th><th>%s</th><th>%s</th><th>%s</th></tr></thead><tbody>\",\n-                        FIELD_NAME, CURRENT_VAL, DELETED_VAL, SUGGESTED_VAL)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTkwMw==", "bodyText": "moderation request for releases seem to work as well ..", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771903", "createdAt": "2020-04-05T23:22:57Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/tags/DisplayProjectChanges.java", "diffHunk": "@@ -114,14 +119,16 @@ public int doStartTag() throws JspException {\n             }\n \n             String renderString = display.toString();\n+            HttpServletRequest request = (HttpServletRequest) pageContext.getRequest();\n+            ResourceBundle resourceBundle = ResourceBundleUtil.getBundle(\"content.Language\", request.getLocale(), getClass());\n \n             if (Strings.isNullOrEmpty(renderString)) {\n-                renderString = \"<div class=\\\"alert alert-info\\\">No changes in basic fields.</div>\";\n+                renderString = \"<div class=\\\"alert alert-info\\\">\"+LanguageUtil.get(resourceBundle,\"no.changes.in.basic.fields\")+\"</div>\";\n             } else {\n                 renderString = String.format(\"<table class=\\\"%s\\\" id=\\\"%schanges\\\" >\", tableClasses, idPrefix)\n                         + \"<thead>\"\n                         + String.format(\"<tr><th>%s</th><th>%s</th><th>%s</th><th>%s</th></tr></thead><tbody>\",\n-                        FIELD_NAME, CURRENT_VAL, DELETED_VAL, SUGGESTED_VAL)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzAwOA==", "bodyText": "that looks oddly formatted, but not really a big issue.", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403773008", "createdAt": "2020-04-05T23:31:57Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/view.jsp", "diffHunk": "@@ -189,35 +189,35 @@\n                 <div class=\"modal-header\">\n                     <h5 class=\"modal-title\">\n                         <clay:icon symbol=\"question-circle\" />\n-                        Delete Project?\n+                        <liferay-ui:message key=\"delete.project\" />?\n                     </h5>\n                     <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                         <span aria-hidden=\"true\">&times;</span>\n                     </button>\n                 </div>\n-                <div class=\"modal-body\">\n-                    <p>Do you really want to delete the project <b data-name=\"name\"></b>?</p>\n+                <div class=\"modal-body\">\t\t \n+\t\t\t\t\t<p><liferay-ui:message key=\"do.you.really.want.to.delete.the.project.x\" /></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzMyOQ==", "bodyText": "that seems to be at every data table occurrence. I was wondering if that could be put at some single place", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403773329", "createdAt": "2020-04-05T23:34:26Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/includes/projects/clearingStatus.jspf", "diffHunk": "@@ -50,20 +51,40 @@ require(['jquery', 'bridges/datatables', 'utils/render'], function ($, datatable\n         table = datatables.create('#releasesTable', {\n             data: result,\n             columns: [\n-                {title: \"Name\"},\n-                {title: \"Project Origin\"},\n-                {title: \"Clearing State\"},\n-                {title: \"Release Mainline State\"},\n-                {title: \"Project Mainline State\"},\n-                {title: \"Type\"},\n-                {title: \"Actions\", render: {display: renderActions}, className: \"two actions\" }\n+                {title: \"<liferay-ui:message key=\"name\" />\"},\n+                {title: \"<liferay-ui:message key=\"project.origin\" />\"},\n+                {title: \"<liferay-ui:message key=\"clearing.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"release.mainline.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"project.mainline.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"type\" />\"},\n+                {title: \"<liferay-ui:message key=\"actions\" />\", render: {display: renderActions}, className: \"two actions\" }\n             ],\n             columnDefs: [\n                 {\n                     targets: [ 6 ],\n                     visible: $('#releasesTable').data() ? $('#releasesTable').data().detailsContext : false\n                 }\n-            ]\n+            ],\n+            language: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NDExMA==", "bodyText": "I would have included the question mark, but maybe it is also OK like this.", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403774110", "createdAt": "2020-04-05T23:41:18Z", "author": {"login": "mcjaeger"}, "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/licenses/edit.jsp", "diffHunk": "@@ -109,18 +109,18 @@\n                     <div class=\"modal-header\">\n                         <h5 class=\"modal-title\">\n                             <clay:icon symbol=\"question-circle\" />\n-                            Delete License?\n+                            <liferay-ui:message key=\"delete.license\" />?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd91be9cb5ab04d3af725ec5815017a07e38cf6", "author": {"user": {"login": "nam-np", "name": "Nguyen Phuong Nam"}}, "url": "https://github.com/eclipse/sw360/commit/8bd91be9cb5ab04d3af725ec5815017a07e38cf6", "committedDate": "2020-04-06T11:06:11Z", "message": "feat: SW360 support multi-language update after review\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MjA2ODU2", "url": "https://github.com/eclipse/sw360/pull/816#pullrequestreview-388206856", "createdAt": "2020-04-06T12:38:10Z", "commit": {"oid": "8bd91be9cb5ab04d3af725ec5815017a07e38cf6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4894, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}