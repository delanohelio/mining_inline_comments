{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMjMwMzY1", "number": 1045, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMTo0NjoyOVrOE6h3MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMTo1OTozMFrOE6iKfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5ODA3NjY0OnYy", "diffSide": "RIGHT", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/includes/projects/administrationEdit.jspf", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMTo0NjoyOVrOH1p_pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwODozNDoyN1rOH2R6xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNDYxNQ==", "bodyText": "rename variable clearingStateClosedNUserNotAdmin to clearingStateClosedAndUserNotAdmin", "url": "https://github.com/eclipse/sw360/pull/1045#discussion_r526024615", "createdAt": "2020-11-18T11:46:29Z", "author": {"login": "akapti"}, "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/includes/projects/administrationEdit.jspf", "diffHunk": "@@ -12,6 +12,7 @@\n <%@page import=\"org.eclipse.sw360.datahandler.thrift.projects.ProjectState\"%>\n <%@page import=\"org.eclipse.sw360.datahandler.thrift.projects.Project\" %>\n <core_rt:set var=\"isUnknownCTeamEnabled\" value='<%=PortalConstants.IS_CLEARING_TEAM_UNKNOWN_ENABLED%>'/>\n+<core_rt:set var=\"clearingStateClosedNUserNotAdmin\" value=\"${(project.clearingState eq 'CLOSED') && (isUserAdmin != 'Yes')}\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d6a9298bcf4f8eb3db793816e8945620b16e767"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY3ODcyNw==", "bodyText": "Done", "url": "https://github.com/eclipse/sw360/pull/1045#discussion_r526678727", "createdAt": "2020-11-19T08:34:27Z", "author": {"login": "smrutis1"}, "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/includes/projects/administrationEdit.jspf", "diffHunk": "@@ -12,6 +12,7 @@\n <%@page import=\"org.eclipse.sw360.datahandler.thrift.projects.ProjectState\"%>\n <%@page import=\"org.eclipse.sw360.datahandler.thrift.projects.Project\" %>\n <core_rt:set var=\"isUnknownCTeamEnabled\" value='<%=PortalConstants.IS_CLEARING_TEAM_UNKNOWN_ENABLED%>'/>\n+<core_rt:set var=\"clearingStateClosedNUserNotAdmin\" value=\"${(project.clearingState eq 'CLOSED') && (isUserAdmin != 'Yes')}\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNDYxNQ=="}, "originalCommit": {"oid": "3d6a9298bcf4f8eb3db793816e8945620b16e767"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5ODEyNjA0OnYy", "diffSide": "RIGHT", "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ProjectDatabaseHandler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMTo1OTozMFrOH1qdGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwODozNDoxOFrOH2R6aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAzMjE1NA==", "bodyText": "Can we re-use this method by moving to some commonly accessible class?", "url": "https://github.com/eclipse/sw360/pull/1045#discussion_r526032154", "createdAt": "2020-11-18T11:59:30Z", "author": {"login": "akapti"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ProjectDatabaseHandler.java", "diffHunk": "@@ -616,12 +616,19 @@ private boolean duplicateAttachmentExist(Project project) {\n \n     private boolean updateProjectAllowed(Project project, User user) {\n         if (project.clearingState != null && project.clearingState.equals(ProjectClearingState.CLOSED)\n-                && !PermissionUtils.isUserAtLeast(UserGroup.SW360_ADMIN, user)) {\n+                && !PermissionUtils.isUserAtLeast(UserGroup.SW360_ADMIN, user) && !isModeratorOrCreator(project, user)) {\n             return false;\n         }\n         return true;\n     }\n \n+    private boolean isModeratorOrCreator(Project project, User user) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d6a9298bcf4f8eb3db793816e8945620b16e767"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY3ODYzMg==", "bodyText": "Moved it to SW360Utils", "url": "https://github.com/eclipse/sw360/pull/1045#discussion_r526678632", "createdAt": "2020-11-19T08:34:18Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ProjectDatabaseHandler.java", "diffHunk": "@@ -616,12 +616,19 @@ private boolean duplicateAttachmentExist(Project project) {\n \n     private boolean updateProjectAllowed(Project project, User user) {\n         if (project.clearingState != null && project.clearingState.equals(ProjectClearingState.CLOSED)\n-                && !PermissionUtils.isUserAtLeast(UserGroup.SW360_ADMIN, user)) {\n+                && !PermissionUtils.isUserAtLeast(UserGroup.SW360_ADMIN, user) && !isModeratorOrCreator(project, user)) {\n             return false;\n         }\n         return true;\n     }\n \n+    private boolean isModeratorOrCreator(Project project, User user) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAzMjE1NA=="}, "originalCommit": {"oid": "3d6a9298bcf4f8eb3db793816e8945620b16e767"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1203, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}