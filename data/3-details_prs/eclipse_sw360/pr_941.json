{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDMxNTgx", "number": 941, "title": "Feature(rest)(thrift): introduction of healthcheck", "bodyText": "Please provide a summary of your changes here.\n\nWhich issue is this pull request belonging to and how is it solving it? (Refer to issue here)\nDid you add or update any new dependencies that are required for your change?\n\n\nThis PR introduces a basic health check to SW360 rest-api and backend.\nWith the introduction of the spring boot actuator a health endpoint was created.\nWith a health indicator the health check specifically checks the db connection to the attachment database and the connection to a new thrift client that is specific for health.\nThat thrift client has a getHealth() method that checks the connection of the thrift client to the other databases.\nShould that check throw a TException, it is known, that the thrift client is not reachable.\nIssue: #896\nNew dependencies:\n\norg.springframework.boot:spring-boot-starter-actuator:${spring-boot.version}\n\nSuggest Reviewer\n\nYou can suggest reviewers here with an @mention.\n\nHow To Test?\n\nHow should these changes be tested by the reviewer?\nHave you implemented any additional tests?\nIntegration and Unit tests were added.\n\nChecklist\nMust:\n\n All related issues are referenced in commit messages and in PR", "createdAt": "2020-08-07T07:00:35Z", "url": "https://github.com/eclipse/sw360/pull/941", "merged": true, "mergeCommit": {"oid": "74ad32ce4934b7b11e409e96819a54c56a634bd9"}, "closed": true, "closedAt": "2020-09-04T11:15:58Z", "author": {"login": "neubs-bsi"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAVBxxgFqTQ2OTM0MTQ3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFOlFZAFqTQ4MTczMTA2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MzQxNDcw", "url": "https://github.com/eclipse/sw360/pull/941#pullrequestreview-469341470", "createdAt": "2020-08-18T12:02:20Z", "commit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMjowMjoyMFrOHCQPjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMjozNDo1NFrOHCRV1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEyNTMyNw==", "bodyText": "Since here it is creating a child class of HashSet, adding DB ,finally creating unmodifiable set.\nIt can be achieved by ImmutableSet\n    public static final Set<String> DATABASES_TO_CHECK = ImmutableSet.of(DatabaseSettings.COUCH_DB_ATTACHMENTS,\n    \t\tDatabaseSettings.COUCH_DB_DATABASE,\n    \t\tDatabaseSettings.COUCH_DB_USERS);", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472125327", "createdAt": "2020-08-18T12:02:20Z", "author": {"login": "JaideepPalit"}, "path": "backend/src/src-health/src/main/java/org/eclipse/sw360/health/db/HealthDatabaseHandler.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Copyright Bosch.IO 2020.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.health.db;\n+\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseInstance;\n+import org.eclipse.sw360.datahandler.thrift.health.Health;\n+import org.eclipse.sw360.datahandler.thrift.health.Status;\n+import org.ektorp.http.HttpClient;\n+\n+import java.net.MalformedURLException;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.function.Supplier;\n+\n+public class HealthDatabaseHandler {\n+\n+    private final DatabaseInstance db;\n+\n+    public static final Set<String> DATABASES_TO_CHECK = Collections.unmodifiableSet(new HashSet<String>() {\n+        {\n+            add(DatabaseSettings.COUCH_DB_ATTACHMENTS);\n+            add(DatabaseSettings.COUCH_DB_DATABASE);\n+            add(DatabaseSettings.COUCH_DB_USERS);\n+        }\n+    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEyNzI3OQ==", "bodyText": "Would it be possible to have narrower level of Exception.\nBecause Exception is very broad and include NullPointerException ... as well.", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472127279", "createdAt": "2020-08-18T12:06:07Z", "author": {"login": "JaideepPalit"}, "path": "backend/src/src-health/src/main/java/org/eclipse/sw360/health/db/HealthDatabaseHandler.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Copyright Bosch.IO 2020.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.health.db;\n+\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseInstance;\n+import org.eclipse.sw360.datahandler.thrift.health.Health;\n+import org.eclipse.sw360.datahandler.thrift.health.Status;\n+import org.ektorp.http.HttpClient;\n+\n+import java.net.MalformedURLException;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.function.Supplier;\n+\n+public class HealthDatabaseHandler {\n+\n+    private final DatabaseInstance db;\n+\n+    public static final Set<String> DATABASES_TO_CHECK = Collections.unmodifiableSet(new HashSet<String>() {\n+        {\n+            add(DatabaseSettings.COUCH_DB_ATTACHMENTS);\n+            add(DatabaseSettings.COUCH_DB_DATABASE);\n+            add(DatabaseSettings.COUCH_DB_USERS);\n+        }\n+    });\n+\n+    public HealthDatabaseHandler(Supplier<HttpClient> httpClient) throws MalformedURLException {\n+        db = new DatabaseInstance(httpClient.get());\n+    }\n+\n+    public Health getHealth() {\n+        final Health health = new Health().setDetails(new HashMap<>());\n+\n+        for (String database : DATABASES_TO_CHECK) {\n+            try {\n+                if (!db.checkIfDbExists(database)) {\n+                    health.getDetails().put(database, String.format(\"The database '%s' does not exist.\", database));\n+                }\n+            } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEyODc5Ng==", "bodyText": "Kindly add indentation here and in thrift file", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472128796", "createdAt": "2020-08-18T12:09:13Z", "author": {"login": "JaideepPalit"}, "path": "backend/svc/svc-health/src/main/webapp/index.jsp", "diffHunk": "@@ -0,0 +1,21 @@\n+<!--\n+Copyright Siemens AG, 2013-2014. Part of the SW360 Portal Project.\n+With modifications by Bosch.IO GmbH, 2020.\n+\n+This program and the accompanying materials are made\n+available under the terms of the Eclipse Public License 2.0\n+which is available at https://www.eclipse.org/legal/epl-2.0/\n+\n+SPDX-License-Identifier: EPL-2.0\n+\n+Description: Welcome file for Health Service\n+-->\n+<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n+<html>\n+<head>\n+  <title>Welcome to the SW360 Health Service</title>\n+</head>\n+<body>\n+<h2>Welcome to the SW360 Health Service!</h2>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEzMjUwMA==", "bodyText": "scope can be removed since compile is default scope", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472132500", "createdAt": "2020-08-18T12:16:13Z", "author": {"login": "JaideepPalit"}, "path": "rest/resource-server/pom.xml", "diffHunk": "@@ -28,6 +29,12 @@\n     </properties>\n \n     <dependencies>\n+        <dependency>\n+            <groupId>org.springframework.boot</groupId>\n+            <artifactId>spring-boot-starter-actuator</artifactId>\n+            <scope>compile</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEzNDI5Mg==", "bodyText": "It would be good to have aSingleton here.\nSame for other places like in testcases.", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472134292", "createdAt": "2020-08-18T12:19:31Z", "author": {"login": "JaideepPalit"}, "path": "rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/SW360RestHealthIndicator.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright Bosch.IO GmbH 2020\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.eclipse.sw360.rest.resourceserver;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import org.apache.thrift.TException;\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseInstance;\n+import org.eclipse.sw360.datahandler.thrift.ThriftClients;\n+import org.eclipse.sw360.datahandler.thrift.health.HealthService;\n+import org.eclipse.sw360.datahandler.thrift.health.Status;\n+import org.springframework.boot.actuate.health.Health;\n+import org.springframework.boot.actuate.health.HealthIndicator;\n+import org.springframework.stereotype.Component;\n+\n+import java.net.MalformedURLException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+@Component\n+public class SW360RestHealthIndicator implements HealthIndicator {\n+    @Override\n+    public Health health() {\n+        List<Exception> exceptions = new ArrayList<>();\n+        RestState restState = check(exceptions);\n+        final String rest_state_detail = \"Rest State\";\n+        if (!restState.isUp()) {\n+            Health.Builder builderWithDetails = Health.down()\n+                    .withDetail(rest_state_detail, restState);\n+            for (Exception exception : exceptions) {\n+                builderWithDetails = builderWithDetails.withException(exception);\n+            }\n+            return builderWithDetails\n+                    .build();\n+        }\n+        return Health.up()\n+                .withDetail(rest_state_detail, restState)\n+                .build();\n+    }\n+\n+    private RestState check(List<Exception> exception) {\n+        RestState restState = new RestState();\n+        try {\n+            restState.isDbReachable = isDbReachable(exception);\n+        } catch (MalformedURLException e) {\n+            restState.isDbReachable = false;\n+            exception.add(e);\n+        }\n+        restState.isThriftReachable = isThriftReachable(exception);\n+        return restState;\n+    }\n+\n+    private boolean isDbReachable(List<Exception> exception) throws MalformedURLException {\n+        DatabaseInstance databaseInstance = makeDatabaseInstance();\n+        try {\n+            return databaseInstance.checkIfDbExists(DatabaseSettings.COUCH_DB_ATTACHMENTS);\n+        } catch (Exception e) {\n+            exception.add(e);\n+            return false;\n+        }\n+    }\n+\n+    private boolean isThriftReachable(List<Exception> exception) {\n+        HealthService.Iface healthClient = makeHealthClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjE0MDkzNA==", "bodyText": "There are some commented code left", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472140934", "createdAt": "2020-08-18T12:31:11Z", "author": {"login": "JaideepPalit"}, "path": "rest/resource-server/src/main/resources/application.yml", "diffHunk": "@@ -11,6 +12,20 @@\n server:\n   port: 8091\n \n+#management:\n+#  security:\n+#    enabled: false\n+  # context-path: /<alternative-path-actuator-endpoints-get-mapped-to>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjE0MzMxOQ==", "bodyText": "It would be good to use CustomException class like Sw360Exception", "url": "https://github.com/eclipse/sw360/pull/941#discussion_r472143319", "createdAt": "2020-08-18T12:34:54Z", "author": {"login": "JaideepPalit"}, "path": "rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/SW360RestHealthIndicator.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright Bosch.IO GmbH 2020\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.eclipse.sw360.rest.resourceserver;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import org.apache.thrift.TException;\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseInstance;\n+import org.eclipse.sw360.datahandler.thrift.ThriftClients;\n+import org.eclipse.sw360.datahandler.thrift.health.HealthService;\n+import org.eclipse.sw360.datahandler.thrift.health.Status;\n+import org.springframework.boot.actuate.health.Health;\n+import org.springframework.boot.actuate.health.HealthIndicator;\n+import org.springframework.stereotype.Component;\n+\n+import java.net.MalformedURLException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+@Component\n+public class SW360RestHealthIndicator implements HealthIndicator {\n+    @Override\n+    public Health health() {\n+        List<Exception> exceptions = new ArrayList<>();\n+        RestState restState = check(exceptions);\n+        final String rest_state_detail = \"Rest State\";\n+        if (!restState.isUp()) {\n+            Health.Builder builderWithDetails = Health.down()\n+                    .withDetail(rest_state_detail, restState);\n+            for (Exception exception : exceptions) {\n+                builderWithDetails = builderWithDetails.withException(exception);\n+            }\n+            return builderWithDetails\n+                    .build();\n+        }\n+        return Health.up()\n+                .withDetail(rest_state_detail, restState)\n+                .build();\n+    }\n+\n+    private RestState check(List<Exception> exception) {\n+        RestState restState = new RestState();\n+        try {\n+            restState.isDbReachable = isDbReachable(exception);\n+        } catch (MalformedURLException e) {\n+            restState.isDbReachable = false;\n+            exception.add(e);\n+        }\n+        restState.isThriftReachable = isThriftReachable(exception);\n+        return restState;\n+    }\n+\n+    private boolean isDbReachable(List<Exception> exception) throws MalformedURLException {\n+        DatabaseInstance databaseInstance = makeDatabaseInstance();\n+        try {\n+            return databaseInstance.checkIfDbExists(DatabaseSettings.COUCH_DB_ATTACHMENTS);\n+        } catch (Exception e) {\n+            exception.add(e);\n+            return false;\n+        }\n+    }\n+\n+    private boolean isThriftReachable(List<Exception> exception) {\n+        HealthService.Iface healthClient = makeHealthClient();\n+        try {\n+            final org.eclipse.sw360.datahandler.thrift.health.Health health = healthClient.getHealth();\n+            if (health.getStatus().equals(Status.UP)) {\n+                return true;\n+            } else {\n+                exception.add(\n+                        new Exception(health.getStatus().toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1937616a7426e9ad4e84dcaecb25977deca0725e", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/1937616a7426e9ad4e84dcaecb25977deca0725e", "committedDate": "2020-08-24T06:56:14Z", "message": "feat(rest): introduce health endpoint\n\nIssue: #896\n\nInclude spring-boot-starter-actuator for a health endpoint\n\nThis introduces a possibility to get simple health\ninformation by calling <rest-api-url>/health.\n\nThe configurations to application.yml to ensure all\nhealth information is displayed.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44a31e8a6091875961f8d9d0f66f3e781d035359", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/44a31e8a6091875961f8d9d0f66f3e781d035359", "committedDate": "2020-08-24T06:56:14Z", "message": "feat(rest): introduce db check as a health indicator.\n\nIssue: #896\n\nWith a health indicator a rest state is introduced that has two\nstates that need to be checked.\nThe DB check ensures that a connection to the attachment database is\nsuccessfull. The Thrift Check is still in progress.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eae42525ac1b0ce90faa4e3b24a8c8fadf4bf21", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/7eae42525ac1b0ce90faa4e3b24a8c8fadf4bf21", "committedDate": "2020-08-24T06:56:14Z", "message": "Feat(thrift): Add health to thrift type definitions\n\nIssue: #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e1cbf084481c1b1f3fcc364abd5e9c5dd435fe3", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/9e1cbf084481c1b1f3fcc364abd5e9c5dd435fe3", "committedDate": "2020-08-24T06:56:14Z", "message": "feat(thrift):Add handler and servlet of health to backend src\n\nIssue: #896\n\nThis includes the database handler, which checks if all\nnecessary db's exist.\n\nTests for the handler are included\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac64bf8b2634f222f5e01ec0ebaa4cc9f3804ed9", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/ac64bf8b2634f222f5e01ec0ebaa4cc9f3804ed9", "committedDate": "2020-08-24T06:59:50Z", "message": "feat(rest): add new thrift client to health indicator\n\nIssue: #896\n\nThis includes adding a make method to the thrift clients.\nNow the rest health indicator can check the state of the\nthrift health client.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "182944a9697f0031bcb0c4cacc07b376e7281b1c", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/182944a9697f0031bcb0c4cacc07b376e7281b1c", "committedDate": "2020-08-24T06:59:50Z", "message": "feat(thirft): Include html content for thrift.\n\nIssue: #896\n\nFor the start return a basic welcome page.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15ed38117e31a2b2d4d07f14ca52fcd5d14cbc71", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/15ed38117e31a2b2d4d07f14ca52fcd5d14cbc71", "committedDate": "2020-08-24T06:59:50Z", "message": "test(rest): Add tests for SW360RestHealthIndicator\n\nIssue: #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "351728115f5645e29fd9e9cc15c176cbb51d62a4", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/351728115f5645e29fd9e9cc15c176cbb51d62a4", "committedDate": "2020-08-24T06:59:50Z", "message": "refactor(rest): resthealthindicator\n\nIssue: #896\n\nSuperflous code was removed and simplified.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83983defbdedc54dd79ac5b2769ecea73057de58", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/83983defbdedc54dd79ac5b2769ecea73057de58", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(rest): Working rest health call\n\nIssue: #896\n\nThe state in this commit represent a state in which a successful\nup call can be made to the rest api and both the database and\nthe thrift are checked for health.\n\nTests are extended to test thrift health.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6433ffdb5338642a42f82b1d372649feb58bc783", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/6433ffdb5338642a42f82b1d372649feb58bc783", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(rest): Add dirty context to resource health indicator test\n\nIssue: #896\n\nSince per SpringBootTest class the context gets loaded only\nonce, the result of previous test somehow seem to modify the\napplication context. This solution was used:\nhttps://stackoverflow.com/a/13288671/6466630\n\nIt is not a problem of the cache. Introducing a\nNoOpCacheManager which should simply take cache items\nwithout storing them, did not solve the problem.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d336e07affd2fdb0c702a7c0299bc8e45979d54", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/4d336e07affd2fdb0c702a7c0299bc8e45979d54", "committedDate": "2020-08-24T06:59:50Z", "message": "refactor(rest): Clean up application context.\n\nIssue: #896\n\nAdded description for the context-path as a help for people\nusing the application yaml as a template for their own\nSW360 instance.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b5aab0e1d934233eed1623861cd52e755ac838", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/27b5aab0e1d934233eed1623861cd52e755ac838", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(thrift): make set unmodifiable\n\nIssue: #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24f8fac50d9d80b0c3e94cbb1bf293a492d72098", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/24f8fac50d9d80b0c3e94cbb1bf293a492d72098", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(rest): make throwable local variable\n\nIssue: #896\n\nThis avoids a potential memory leak, since field was\nnot emptied after a loop.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a29194f997d6ab7398fe0d20a409b2379f40b3", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/36a29194f997d6ab7398fe0d20a409b2379f40b3", "committedDate": "2020-08-24T06:59:50Z", "message": "refactor(rest): refactor check variables to be final static\n\nIssue: #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62b6c43648b5c131963f624428b488a20f5580f1", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/62b6c43648b5c131963f624428b488a20f5580f1", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(rest): variables in health indicator now thread safe\n\nIssue: #896\n\nthis also removes the lazy initialization.\nBefore the variables had a setter method which made them\nnon-thread-safe.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "592774bd17efe0eb58be6513ed0ba50205ff267f", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/592774bd17efe0eb58be6513ed0ba50205ff267f", "committedDate": "2020-08-24T06:59:50Z", "message": "refactor(rest): move management flag to test properties\n\nIssue: #896\n\nWith this the tests can still be done to check if all the\ninformation would be delivered if so desired, but they are\nnot in the main application.yaml where they might expose\nadditional security risks.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "435495691602e113b7313f7e571447e0f704cade", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/435495691602e113b7313f7e571447e0f704cade", "committedDate": "2020-08-24T06:59:50Z", "message": "refactor(rest): change throwable list to list of exceptions\n\nIssue: #896\n\nThis way, there is no need to create a new exception containing\nthe throwable.\n\nIn a newer spring boot version it would be possible to directly\ngive throwables.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a47f5d668a1290ca7d91b376a09cb115a2b57a95", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/a47f5d668a1290ca7d91b376a09cb115a2b57a95", "committedDate": "2020-08-24T06:59:50Z", "message": "fix(test): add missing db mock to failing rest health test\n\nIssue: closes #896\n\ndue to existing test db, without a mock this test does not\nreturn a status 503 since it finds a db.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a0c8ecc75b717831352090e163b2263bffff6cf", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/3a0c8ecc75b717831352090e163b2263bffff6cf", "committedDate": "2020-08-26T14:35:07Z", "message": "Refactor(health): changes to include review comments\n\nrefactor(health): add proper indentation\n\nrefactor(rest): remove compile from actuator scope\n\nrefactor(health): change to immutableset\n\nRefactor(health): exception was specified for db exists check\n\nrefactor(rest): delete left comments\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e33f6c47bdd41c968b04e0cf24206b5e07c5126", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/0e33f6c47bdd41c968b04e0cf24206b5e07c5126", "committedDate": "2020-08-07T13:48:52Z", "message": "fix(test): add missing db mock to failing rest health test\n\nIssue: closes #896\n\ndue to existing test db, without a mock this test does not\nreturn a status 503 since it finds a db.\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}, "afterCommit": {"oid": "3a0c8ecc75b717831352090e163b2263bffff6cf", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/3a0c8ecc75b717831352090e163b2263bffff6cf", "committedDate": "2020-08-26T14:35:07Z", "message": "Refactor(health): changes to include review comments\n\nrefactor(health): add proper indentation\n\nrefactor(rest): remove compile from actuator scope\n\nrefactor(health): change to immutableset\n\nRefactor(health): exception was specified for db exists check\n\nrefactor(rest): delete left comments\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4daaf265ba4adbbba5244553b2d5f9fafa211372", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/4daaf265ba4adbbba5244553b2d5f9fafa211372", "committedDate": "2020-09-03T08:22:22Z", "message": "doc(health): added documentation for health\n\nRelates to #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb5cca7e3762ce6b98955345d333753025ac8587", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/cb5cca7e3762ce6b98955345d333753025ac8587", "committedDate": "2020-09-03T07:12:53Z", "message": "doc(health): added documentation for health\n\nRelates to #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}, "afterCommit": {"oid": "4daaf265ba4adbbba5244553b2d5f9fafa211372", "author": {"user": {"login": "neubs-bsi", "name": "Stephanie Neubauer"}}, "url": "https://github.com/eclipse/sw360/commit/4daaf265ba4adbbba5244553b2d5f9fafa211372", "committedDate": "2020-09-03T08:22:22Z", "message": "doc(health): added documentation for health\n\nRelates to #896\n\nSigned-off-by: Stephanie Neubauer <Stephanie.Neubauer@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzMxMDY2", "url": "https://github.com/eclipse/sw360/pull/941#pullrequestreview-481731066", "createdAt": "2020-09-03T11:06:02Z", "commit": {"oid": "4daaf265ba4adbbba5244553b2d5f9fafa211372"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4833, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}