{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2OTA1MDAx", "number": 818, "title": "feat(ChangeLogs): Revision history of Document", "bodyText": "Changes in a Document needs to be registered, In order to maintain revision history of the document.\n\nWhich issue is this pull request belonging to and how is it solving it? (#138)\nDid you add or update any new dependencies that are required for your change? - No\n\n\nIssue: Maintain Revision History of Document\nHow To Test?\n\nPerform changes to Project, Component or Release Document, Changes should be registered and available under Change Log Tab\nNo additional tests was implemented\n\nChecklist\nMust:\n\n All related issues are referenced in commit messages and in PR\n\nSigned-off-by: Jaideep Palit jaideep.palit@siemens.com", "createdAt": "2020-04-01T10:28:59Z", "url": "https://github.com/eclipse/sw360/pull/818", "merged": true, "mergeCommit": {"oid": "1b40e25ece8bc834d839cbe25b59522c3bab5ead"}, "closed": true, "closedAt": "2020-05-07T09:23:32Z", "author": {"login": "JaideepPalit"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVNGpVgBqjMyMDgzNDA2MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABce2QawgFqTQwNzE1NDMwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb200e2efcafebae3c7ab852bd3d7e12da50dd80", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/cb200e2efcafebae3c7ab852bd3d7e12da50dd80", "committedDate": "2020-04-01T10:15:36Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}, "afterCommit": {"oid": "ee0e134ca6f0d0620db6742a9d75b7ee52b2efa7", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/ee0e134ca6f0d0620db6742a9d75b7ee52b2efa7", "committedDate": "2020-04-07T06:12:20Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee0e134ca6f0d0620db6742a9d75b7ee52b2efa7", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/ee0e134ca6f0d0620db6742a9d75b7ee52b2efa7", "committedDate": "2020-04-07T06:12:20Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}, "afterCommit": {"oid": "83f8454939dbcc9978a6c12b5afad475c5e658c2", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/83f8454939dbcc9978a6c12b5afad475c5e658c2", "committedDate": "2020-04-14T07:28:18Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83f8454939dbcc9978a6c12b5afad475c5e658c2", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/83f8454939dbcc9978a6c12b5afad475c5e658c2", "committedDate": "2020-04-14T07:28:18Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}, "afterCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e", "committedDate": "2020-04-23T10:18:35Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTk2MTE4", "url": "https://github.com/eclipse/sw360/pull/818#pullrequestreview-401996118", "createdAt": "2020-04-28T16:13:15Z", "commit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNjoxMzoxNVrOGNb9vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMzo0NToyOVrOGNuw1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc0Mjg0NQ==", "bodyText": "unused import", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r416742845", "createdAt": "2020-04-28T16:13:15Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsDatabaseHandler.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import static org.eclipse.sw360.datahandler.common.SW360Assert.assertNotNull;\n+\n+import java.net.MalformedURLException;\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.function.Supplier;\n+\n+import org.apache.log4j.Logger;\n+import org.apache.thrift.TException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjgwNTkzNQ==", "bodyText": "May be, this can be improved a bit.\nCollections.sort(changeLogsByDocId, Comparator.comparing(ChangeLogs::getChangeTimestamp).reversed());\nchangeLogsByDocId = changeLogsByDocId.stream().map(cl -> cl.setChangeTimestamp(cl.getChangeTimestamp().split(\" \")[0])).collect(Collectors.toList());", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r416805935", "createdAt": "2020-04-28T17:46:41Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsDatabaseHandler.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import static org.eclipse.sw360.datahandler.common.SW360Assert.assertNotNull;\n+\n+import java.net.MalformedURLException;\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.function.Supplier;\n+\n+import org.apache.log4j.Logger;\n+import org.apache.thrift.TException;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseConnector;\n+import org.eclipse.sw360.datahandler.thrift.SW360Exception;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.ChangeLogs;\n+import org.eclipse.sw360.datahandler.thrift.users.User;\n+import org.ektorp.http.HttpClient;\n+\n+/**\n+ * Class for accessing the CouchDB database for Change logs objects\n+ *\n+ * @author: jaideep.palit@siemens.com\n+ */\n+public class ChangeLogsDatabaseHandler {\n+    private final DatabaseConnector db;\n+    private final ChangeLogsRepository changeLogsRepository;\n+\n+    private static final Logger log = Logger.getLogger(ChangeLogsDatabaseHandler.class);\n+\n+    public ChangeLogsDatabaseHandler(Supplier<HttpClient> httpClient, String dbName) throws MalformedURLException {\n+        db = new DatabaseConnector(httpClient, dbName);\n+        changeLogsRepository = new ChangeLogsRepository(db);\n+    }\n+\n+    public List<ChangeLogs> getChangeLogsByDocumentId(User user, String docId) {\n+        List<ChangeLogs> changeLogsByDocId = changeLogsRepository.getChangeLogsByDocId(docId);\n+        changeLogsByDocId.addAll(changeLogsRepository.getChangeLogsByParentDocId(docId));\n+\n+        Comparator<ChangeLogs> comparatorByTimeStamp = (cl1, cl2) -> cl2.getChangeTimestamp()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjgwODI3NQ==", "bodyText": "Kindly add brief comment at method level mentioning the changes, please try to move this method to database handlers or DatabseHandlerUtil.", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r416808275", "createdAt": "2020-04-28T17:50:33Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsRepository.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.thrift.TBase;\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.AttachmentConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseRepository;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.ChangeLogs;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.Operation;\n+import org.ektorp.support.View;\n+\n+/**\n+ * CRUD access for the ChangeLogs class\n+ *\n+ * @author jaideep.palit@siemens.com\n+ */\n+@View(name = \"all\", map = \"function(doc) { if (doc.type == 'changeLogs') emit(doc._id, doc) }\")\n+public class ChangeLogsRepository extends DatabaseRepository<ChangeLogs> {\n+\n+    private static final String BY_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.documentId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_PARENT_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.parentDocId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_USER_EDITED =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.userEdited, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_TIMESTAMP =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.changeTimestamp, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+\n+    public ChangeLogsRepository(DatabaseConnector db) {\n+        super(ChangeLogs.class, db);\n+        initStandardDesignDocument();\n+    }\n+\n+    @View(name = \"byDocumentId\", map = BY_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByDocId(String docId) {\n+        return queryView(\"byDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byParentDocumentId\", map = BY_PARENT_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByParentDocId(String docId) {\n+        return queryView(\"byParentDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byUserEdited\", map = BY_USER_EDITED)\n+    public List<ChangeLogs> getChangeLogsByUserEdited(String userEdited) {\n+        return queryView(\"byUserEdited\", userEdited).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byTimestamp\", map = BY_TIMESTAMP)\n+    public List<ChangeLogs> getChangeLogsByTimestamp(String timestamp) {\n+        return queryView(\"byTimestamp\", timestamp).stream().collect(Collectors.toList());\n+    }\n+\n+    public <T extends TBase> void addChangeLogs(T newDocVersion, T oldDocVersion, String userEdited,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0OTgyNg==", "bodyText": "Please consider extracting it into a method.", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r417049826", "createdAt": "2020-04-29T03:40:22Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsRepository.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.thrift.TBase;\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.AttachmentConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseRepository;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.ChangeLogs;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.Operation;\n+import org.ektorp.support.View;\n+\n+/**\n+ * CRUD access for the ChangeLogs class\n+ *\n+ * @author jaideep.palit@siemens.com\n+ */\n+@View(name = \"all\", map = \"function(doc) { if (doc.type == 'changeLogs') emit(doc._id, doc) }\")\n+public class ChangeLogsRepository extends DatabaseRepository<ChangeLogs> {\n+\n+    private static final String BY_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.documentId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_PARENT_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.parentDocId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_USER_EDITED =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.userEdited, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_TIMESTAMP =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.changeTimestamp, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+\n+    public ChangeLogsRepository(DatabaseConnector db) {\n+        super(ChangeLogs.class, db);\n+        initStandardDesignDocument();\n+    }\n+\n+    @View(name = \"byDocumentId\", map = BY_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByDocId(String docId) {\n+        return queryView(\"byDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byParentDocumentId\", map = BY_PARENT_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByParentDocId(String docId) {\n+        return queryView(\"byParentDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byUserEdited\", map = BY_USER_EDITED)\n+    public List<ChangeLogs> getChangeLogsByUserEdited(String userEdited) {\n+        return queryView(\"byUserEdited\", userEdited).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byTimestamp\", map = BY_TIMESTAMP)\n+    public List<ChangeLogs> getChangeLogsByTimestamp(String timestamp) {\n+        return queryView(\"byTimestamp\", timestamp).stream().collect(Collectors.toList());\n+    }\n+\n+    public <T extends TBase> void addChangeLogs(T newDocVersion, T oldDocVersion, String userEdited,\n+            Operation operation, AttachmentConnector attachmentConnector, List<ChangeLogs> referenceDocLogList,\n+            String parentDocId, Operation parentOperation) {\n+        if (DatabaseSettings.COUCH_DB_DATABASE.contains(\"test\")\n+                || DatabaseSettings.COUCH_DB_ATTACHMENTS.contains(\"test\")) {\n+            return;\n+        }\n+\n+        Runnable changeLogRunnable = () -> {\n+            try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA1MDE1OQ==", "bodyText": "May be this can be written as.\nCollections.sort(changeLogsByDocId, Comparator.comparing(ChangeLogs::getChangeTimestamp()).reversed());\nchangeLogsByDocId = changeLogsByDocId.stream().map(cl -> cl.setChangeTimestamp(cl.getChangeTimestamp().split(\" \")[0])).collect(Collectors.toList());", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r417050159", "createdAt": "2020-04-29T03:41:51Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsDatabaseHandler.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import static org.eclipse.sw360.datahandler.common.SW360Assert.assertNotNull;\n+\n+import java.net.MalformedURLException;\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.function.Supplier;\n+\n+import org.apache.log4j.Logger;\n+import org.apache.thrift.TException;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseConnector;\n+import org.eclipse.sw360.datahandler.thrift.SW360Exception;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.ChangeLogs;\n+import org.eclipse.sw360.datahandler.thrift.users.User;\n+import org.ektorp.http.HttpClient;\n+\n+/**\n+ * Class for accessing the CouchDB database for Change logs objects\n+ *\n+ * @author: jaideep.palit@siemens.com\n+ */\n+public class ChangeLogsDatabaseHandler {\n+    private final DatabaseConnector db;\n+    private final ChangeLogsRepository changeLogsRepository;\n+\n+    private static final Logger log = Logger.getLogger(ChangeLogsDatabaseHandler.class);\n+\n+    public ChangeLogsDatabaseHandler(Supplier<HttpClient> httpClient, String dbName) throws MalformedURLException {\n+        db = new DatabaseConnector(httpClient, dbName);\n+        changeLogsRepository = new ChangeLogsRepository(db);\n+    }\n+\n+    public List<ChangeLogs> getChangeLogsByDocumentId(User user, String docId) {\n+        List<ChangeLogs> changeLogsByDocId = changeLogsRepository.getChangeLogsByDocId(docId);\n+        changeLogsByDocId.addAll(changeLogsRepository.getChangeLogsByParentDocId(docId));\n+\n+        Comparator<ChangeLogs> comparatorByTimeStamp = (cl1, cl2) -> cl2.getChangeTimestamp()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA1MDgzOA==", "bodyText": "Kindly consider adding some method level comments. And if it can be moved to database handlers or DatabaseHandlerUtil instead of repository.", "url": "https://github.com/eclipse/sw360/pull/818#discussion_r417050838", "createdAt": "2020-04-29T03:45:29Z", "author": {"login": "smrutis1"}, "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ChangeLogsRepository.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright Siemens AG, 2017. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.datahandler.db;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.apache.thrift.TBase;\n+import org.eclipse.sw360.datahandler.common.DatabaseSettings;\n+import org.eclipse.sw360.datahandler.couchdb.AttachmentConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseConnector;\n+import org.eclipse.sw360.datahandler.couchdb.DatabaseRepository;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.ChangeLogs;\n+import org.eclipse.sw360.datahandler.thrift.changelogs.Operation;\n+import org.ektorp.support.View;\n+\n+/**\n+ * CRUD access for the ChangeLogs class\n+ *\n+ * @author jaideep.palit@siemens.com\n+ */\n+@View(name = \"all\", map = \"function(doc) { if (doc.type == 'changeLogs') emit(doc._id, doc) }\")\n+public class ChangeLogsRepository extends DatabaseRepository<ChangeLogs> {\n+\n+    private static final String BY_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.documentId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_PARENT_DOCUMENT_ID =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.parentDocId, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_USER_EDITED =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.userEdited, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+    private static final String BY_TIMESTAMP =\n+            \"function(doc) {\" +\n+                    \"  if (doc.type == 'changeLogs') {\" +\n+                    \"    emit(doc.changeTimestamp, doc);\" +\n+                    \"  }\" +\n+                    \"}\";\n+\n+    public ChangeLogsRepository(DatabaseConnector db) {\n+        super(ChangeLogs.class, db);\n+        initStandardDesignDocument();\n+    }\n+\n+    @View(name = \"byDocumentId\", map = BY_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByDocId(String docId) {\n+        return queryView(\"byDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byParentDocumentId\", map = BY_PARENT_DOCUMENT_ID)\n+    public List<ChangeLogs> getChangeLogsByParentDocId(String docId) {\n+        return queryView(\"byParentDocumentId\", docId).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byUserEdited\", map = BY_USER_EDITED)\n+    public List<ChangeLogs> getChangeLogsByUserEdited(String userEdited) {\n+        return queryView(\"byUserEdited\", userEdited).stream().collect(Collectors.toList());\n+    }\n+\n+    @View(name = \"byTimestamp\", map = BY_TIMESTAMP)\n+    public List<ChangeLogs> getChangeLogsByTimestamp(String timestamp) {\n+        return queryView(\"byTimestamp\", timestamp).stream().collect(Collectors.toList());\n+    }\n+\n+    public <T extends TBase> void addChangeLogs(T newDocVersion, T oldDocVersion, String userEdited,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e"}, "originalPosition": 82}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/2266c7ac694f2b9dc3489d3689e1a4a20f6fa31e", "committedDate": "2020-04-23T10:18:35Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}, "afterCommit": {"oid": "93a43f98c8826b50e0b1e458721022d2df14e55d", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/93a43f98c8826b50e0b1e458721022d2df14e55d", "committedDate": "2020-04-29T10:50:24Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04b57fd1951df5f1d41ceb42a341e8e166c812a7", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/04b57fd1951df5f1d41ceb42a341e8e166c812a7", "committedDate": "2020-05-06T12:12:55Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93a43f98c8826b50e0b1e458721022d2df14e55d", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/93a43f98c8826b50e0b1e458721022d2df14e55d", "committedDate": "2020-04-29T10:50:24Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}, "afterCommit": {"oid": "04b57fd1951df5f1d41ceb42a341e8e166c812a7", "author": {"user": {"login": "JaideepPalit", "name": "Jaideep Palit"}}, "url": "https://github.com/eclipse/sw360/commit/04b57fd1951df5f1d41ceb42a341e8e166c812a7", "committedDate": "2020-05-06T12:12:55Z", "message": "feat(ChangeLogs): Revision history of Document\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MTU0MzA2", "url": "https://github.com/eclipse/sw360/pull/818#pullrequestreview-407154306", "createdAt": "2020-05-07T05:16:37Z", "commit": {"oid": "04b57fd1951df5f1d41ceb42a341e8e166c812a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4896, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}