{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NTM5MzU4", "number": 72, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxODo0ODozMFrOEJeQtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxODo0ODozMFrOEJeQtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzY4NDM3OnYy", "diffSide": "RIGHT", "path": "tools/sql_extraction/src/main/kotlin/DataFlowEngine.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxODo0ODozMFrOGp_dVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxODo0ODozMFrOGp_dVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY4NDUwMA==", "bodyText": "Pls add comment.\nI prefer to use name \"addUsage\". Also, it feels more natural to me to put the parameter \"query\" before \"usage\".", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/72#discussion_r446684500", "createdAt": "2020-06-28T18:48:30Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/src/main/kotlin/DataFlowEngine.kt", "diffHunk": "@@ -1,7 +1,26 @@\n package com.google.cloud.sqlecosystem.sqlextraction\n \n+import com.google.cloud.sqlecosystem.sqlextraction.output.Location\n+import com.google.cloud.sqlecosystem.sqlextraction.output.QueryFragment\n+import com.google.cloud.sqlecosystem.sqlextraction.output.QueryUsages\n+\n /**\n  * Backend engine for running data-flow analysis\n  * @see FrontEnd\n  */\n-class DataFlowEngine\n\\ No newline at end of file\n+class DataFlowEngine {\n+    private val queryUsages: HashMap<QueryFragment, HashSet<Location>> = HashMap()\n+\n+    /**\n+     * Returns all query fragments and usages found by the engine thus far\n+     */\n+    fun getAllQueries(): Sequence<QueryUsages> {\n+        return queryUsages.asSequence()\n+            .filter { it.value.isNotEmpty() }\n+            .map { QueryUsages(it.key, it.value.sorted()) }\n+    }\n+\n+    private fun registerUsage(usage: Location, query: QueryFragment) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d76278e9bbc3fdfe06dfc053a89ff3c8d031ba7"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2960, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}