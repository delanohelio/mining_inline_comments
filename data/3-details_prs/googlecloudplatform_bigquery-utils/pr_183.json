{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwODUyNjQw", "number": 183, "title": "Adding statslib to bigquery-utils", "bodyText": "Statslib will allow more comples statistical tests to be run using BQ UDFs.", "createdAt": "2020-10-27T15:41:40Z", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183", "merged": true, "mergeCommit": {"oid": "13a4dc5c1d438e511a7e1c814338411425120427"}, "closed": true, "closedAt": "2021-02-26T19:59:23Z", "author": {"login": "jrossthomson"}, "timelineItems": {"totalCount": 67, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7qqgHgH2gAyNTEwODUyNjQwOjI4ODg5N2ZlZjkwOGUwNWQzZTcwMzY2ZjNhM2Q5NDgzMTkzODI3MjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd9_pvzAFqTU5OTg5Njk4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "288897fef908e05d3e70366f3a3d948319382723", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/288897fef908e05d3e70366f3a3d948319382723", "committedDate": "2020-08-04T18:10:03Z", "message": "First pass at adding Statslib"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2b6348b8cb36ebbb52ca9fe58460f891e4445b0", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/a2b6348b8cb36ebbb52ca9fe58460f891e4445b0", "committedDate": "2020-08-04T18:12:01Z", "message": "Merge branch 'master' of https://github.com/jrossthomson/bigquery-utils into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2705f30efc89d84673d845aa2f5f909176707374", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/2705f30efc89d84673d845aa2f5f909176707374", "committedDate": "2020-08-05T20:41:04Z", "message": "Interim update."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3321b42dbf7b431941b7fe44a4a26c43818ef165", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/3321b42dbf7b431941b7fe44a4a26c43818ef165", "committedDate": "2020-08-06T15:58:04Z", "message": "Fixed KW test cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23c84912603754d5a5badc24d4499dee346cfdbe", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/23c84912603754d5a5badc24d4499dee346cfdbe", "committedDate": "2020-08-06T15:58:38Z", "message": "Merge branch 'statslib'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "757d08bce888afe57369de54d615a0f8d8f2c3f2", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/757d08bce888afe57369de54d615a0f8d8f2c3f2", "committedDate": "2020-09-01T16:38:14Z", "message": "Fixed kw."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2625f1546d4c1f48b854e1bfdc6cbd1f79353742", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/2625f1546d4c1f48b854e1bfdc6cbd1f79353742", "committedDate": "2020-09-16T19:06:09Z", "message": "Added Linear Regression"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "727081021999d5dcfb43b8f1b9388be83c305218", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/727081021999d5dcfb43b8f1b9388be83c305218", "committedDate": "2020-09-16T19:19:19Z", "message": "Merge branch 'statslib'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9b33a85e390c9ad4071c5a97c19907410702dbc", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d9b33a85e390c9ad4071c5a97c19907410702dbc", "committedDate": "2020-09-16T19:38:56Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4be0d71a09c224208eac267ee01611ab5e79c578", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/4be0d71a09c224208eac267ee01611ab5e79c578", "committedDate": "2020-10-27T15:51:55Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6ad383b05b7b352a5bbca7c03c61dc756e1c1fe", "author": {"user": {"login": "imathews", "name": "Ian Mathews"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/c6ad383b05b7b352a5bbca7c03c61dc756e1c1fe", "committedDate": "2021-02-02T22:52:28Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa18c1375083cddb44230c368a504e8eba93c0dc", "author": {"user": {"login": "imathews", "name": "Ian Mathews"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/aa18c1375083cddb44230c368a504e8eba93c0dc", "committedDate": "2021-02-02T22:58:26Z", "message": "Use jstat from bq_js_libs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408", "author": {"user": {"login": "imathews", "name": "Ian Mathews"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/9a63ff29bb4aa9d88dd950a0eacc40c1ee570408", "committedDate": "2021-02-02T23:52:05Z", "message": "fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDU0NTIz", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582454523", "createdAt": "2021-02-03T14:57:44Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNDo1Nzo0NFrOIfGcgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNDo1Nzo0NFrOIfGcgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4MjM2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                library=[\"gs://bqutil-lib/bq_js_libs/jstat-v1.9.4.min.js\"]\n          \n          \n            \n                library=[\"${JS_BUCKET}/jstat-v1.9.4.min.js\"]", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569482368", "createdAt": "2021-02-03T14:57:44Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/pvalue.sql", "diffHunk": "@@ -0,0 +1,10 @@\n+#standardSQL\n+\n+CREATE OR REPLACE FUNCTION st.pvalue(H FLOAT64, dof INT64) \n+RETURNS FLOAT64 \n+LANGUAGE js AS \"\"\"\n+  return 1.0 - jStat['chisquare'].cdf(H, dof)\n+\"\"\"\n+OPTIONS ( \n+    library=[\"gs://bqutil-lib/bq_js_libs/jstat-v1.9.4.min.js\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDU5NjM0", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582459634", "createdAt": "2021-02-03T15:02:15Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowMjoxNVrOIfGrNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowMjoxNVrOIfGrNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4NjEzNQ==", "bodyText": "Please remove this change. Will keep PR focused on addition of UDF", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569486135", "createdAt": "2021-02-03T15:02:15Z", "author": {"login": "danieldeleo"}, "path": "udfs/tests/udf_test_utils.py", "diffHunk": "@@ -25,7 +25,6 @@\n \n from google.cloud import bigquery\n \n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDYwNTIy", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582460522", "createdAt": "2021-02-03T15:03:03Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowMzowM1rOIfGtsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowMzowM1rOIfGtsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4Njc2OQ==", "bodyText": "Remove this file from PR", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569486769", "createdAt": "2021-02-03T15:03:03Z", "author": {"login": "danieldeleo"}, "path": ".init", "diffHunk": "@@ -0,0 +1,15 @@\n+\n+# if lsst virutalenv exists, use it.\n+\n+if [ -f ~/.bigquery/bin/activate ]; then\n+   . ~/.bigquery/bin/activate\n+fi\n+\n+if [ -f key.json ]; then\n+   export GOOGLE_APPLICATION_CREDENTIALS=\"key.json\"\n+fi\n+\n+gcloud config set project nih-bq\n+gcloud config set compute/zone us-central1-f\n+gcloud config set compute/region us-central1\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDYyNjM1", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582462635", "createdAt": "2021-02-03T15:04:57Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNDo1N1rOIfGzqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNDo1N1rOIfGzqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4ODI5OQ==", "bodyText": "please remove all changes to this file from PR", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569488299", "createdAt": "2021-02-03T15:04:57Z", "author": {"login": "danieldeleo"}, "path": ".gitignore", "diffHunk": "@@ -1,5 +1,6 @@\n # Compiled class file\n *.class\n+*.pyc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDY0NDUx", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582464451", "createdAt": "2021-02-03T15:06:37Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNjozN1rOIfG44Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNjozN1rOIfG44Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4OTYzMw==", "bodyText": "Upper case all SQL key words (WITH, SELECT, FROM, etc)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569489633", "createdAt": "2021-02-03T15:06:37Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/kruskal_wallis.sql", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION st.kruskal_wallis(data ARRAY<STRUCT<factor STRING, val FLOAT64>>) AS ((\n+    with H_raw AS(\n+        with sums AS \n+        (\n+            with rank_data AS \n+            (\n+                select d.factor AS f, d.val AS v, rank() over(order by d.val) AS r\n+                from unnest(data) AS d \n+            ) #rank_data\n+            select     \n+                SUM(r) * (SUM(r) / COUNT(*)) AS sumranks, COUNT(*) AS n\n+            from rank_data\n+            GROUP BY f\n+        ) # sums\n+        SELECT 12.00 /(SUM(n) *(SUM(n) + 1)) * SUM(sumranks) -(3.00 *(SUM(n) + 1)) AS H, \n+                      count(n) -1 AS DoF\n+        FROM sums\n+    ) # H_raw\n+    SELECT struct(H AS H, st.pvalue(H, DoF) AS p, DoF AS DoF) from H_raw\n+));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgyNDY0ODAy", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-582464802", "createdAt": "2021-02-03T15:06:57Z", "commit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNjo1OFrOIfG5-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wM1QxNTowNjo1OFrOIfG5-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ4OTkxMw==", "bodyText": "Upper case all SQL key words (WITH, SELECT, FROM, etc)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r569489913", "createdAt": "2021-02-03T15:06:58Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/linear_regression.sql", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+\n+\n+CREATE OR REPLACE FUNCTION st.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>) \n+AS ((\n+     WITH results AS (\n+       WITH sums AS (\n+         with d as (\n+              select * from unnest(data)\n+         )\n+         select \n+            SUM(d.X) as Sx,\n+            SUM(d.Y) as Sy,\n+            SUM(d.X * d.Y) as Sxy,\n+            SUM(d.X * d.X) as Sxx,\n+            SUM(d.Y * d.Y) as Syy,\n+            COUNT(*) as N\n+         from d\n+       )\n+       SELECT \n+        ((Sy * Sxx) - (Sx * Sxy)) / ((N * (Sxx)) - (Sx * Sx)) AS a,\n+        ((N * Sxy) - (Sx * Sy))  / ((N * Sxx) - (Sx * Sx)) AS b,\n+        ((N * Sxy) - (Sx * Sy))/ SQRT(\n+            (((N * Sxx) - (Sx * Sx))* ((N * Syy - (Sy * Sy))))) AS r \n+        from sums\n+      )\n+      select STRUCT(a, b, r) from results\n+));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a63ff29bb4aa9d88dd950a0eacc40c1ee570408"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65279b57454d7fd3ebf880d8b85f7e3734cce86d", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/65279b57454d7fd3ebf880d8b85f7e3734cce86d", "committedDate": "2021-02-08T13:59:55Z", "message": "Update kruskal_wallis.sql"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc1879680216000b9c22a7d1d4203c984b66bbb", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/8cc1879680216000b9c22a7d1d4203c984b66bbb", "committedDate": "2021-02-08T14:01:24Z", "message": "Update linear_regression.sql"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddd43ad4a85c8e9d47bc89392f0d0993daec3ba5", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/ddd43ad4a85c8e9d47bc89392f0d0993daec3ba5", "committedDate": "2021-02-08T14:03:04Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ced845aeea14a59ca1770bde51fc0c5f3d610f", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/21ced845aeea14a59ca1770bde51fc0c5f3d610f", "committedDate": "2021-02-08T21:21:32Z", "message": "Update udfs/statslib/pvalue.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04acaa40108987f685b0e642d68de4cf78cdf8a2", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/04acaa40108987f685b0e642d68de4cf78cdf8a2", "committedDate": "2021-02-08T21:24:15Z", "message": "Delete .init"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6", "committedDate": "2021-02-08T21:25:09Z", "message": "Update .gitignore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d18cd99e7b414f14ba1701f4a4366056369c7d6c", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d18cd99e7b414f14ba1701f4a4366056369c7d6c", "committedDate": "2021-02-08T21:49:12Z", "message": "Merge branch 'master' of https://github.com/jrossthomson/bigquery-utils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1OTc3MjMy", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-585977232", "createdAt": "2021-02-08T22:19:42Z", "commit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoxOTo0MlrOIh5mJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoxOTo0MlrOIh5mJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjQxNzU3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            CREATE OR REPLACE FUNCTION st.kruskal_wallis(data ARRAY<STRUCT<factor STRING, val FLOAT64>>) AS ((\n          \n          \n            \n            CREATE OR REPLACE FUNCTION fn.kruskal_wallis(data ARRAY<STRUCT<factor STRING, val FLOAT64>>) AS ((", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r572417574", "createdAt": "2021-02-08T22:19:42Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/kruskal_wallis.sql", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION st.kruskal_wallis(data ARRAY<STRUCT<factor STRING, val FLOAT64>>) AS ((", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1OTc3Mzgz", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-585977383", "createdAt": "2021-02-08T22:19:53Z", "commit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoxOTo1M1rOIh5mog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoxOTo1M1rOIh5mog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjQxNzY5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            CREATE OR REPLACE FUNCTION st.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>) \n          \n          \n            \n            CREATE OR REPLACE FUNCTION fn.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r572417698", "createdAt": "2021-02-08T22:19:53Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/linear_regression.sql", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+\n+\n+CREATE OR REPLACE FUNCTION st.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1OTc3NDk2", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-585977496", "createdAt": "2021-02-08T22:20:03Z", "commit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoyMDowM1rOIh5nCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQyMjoyMDowM1rOIh5nCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjQxNzgwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            CREATE OR REPLACE FUNCTION st.pvalue(H FLOAT64, dof INT64) \n          \n          \n            \n            CREATE OR REPLACE FUNCTION fn.pvalue(H FLOAT64, dof INT64)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r572417803", "createdAt": "2021-02-08T22:20:03Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/pvalue.sql", "diffHunk": "@@ -0,0 +1,10 @@\n+#standardSQL\n+\n+CREATE OR REPLACE FUNCTION st.pvalue(H FLOAT64, dof INT64) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "568cb96d84cf0e323e9dab18e9bbe6d8e013eaa6"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9570dcbec9a46fac30fa83426a807115b4318f1b", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/9570dcbec9a46fac30fa83426a807115b4318f1b", "committedDate": "2021-02-09T14:40:26Z", "message": "Update udfs/statslib/kruskal_wallis.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14cad124ca885c5419866958b758d9ea96eec608", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/14cad124ca885c5419866958b758d9ea96eec608", "committedDate": "2021-02-09T14:40:33Z", "message": "Update udfs/statslib/pvalue.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2470574dca4ccd2d2d59e11818a6fde5330b652a", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/2470574dca4ccd2d2d59e11818a6fde5330b652a", "committedDate": "2021-02-09T14:40:43Z", "message": "Update udfs/statslib/linear_regression.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg2NzM4NjY2", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-586738666", "createdAt": "2021-02-09T16:26:28Z", "commit": {"oid": "2470574dca4ccd2d2d59e11818a6fde5330b652a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOVQxNjoyNjoyOVrOIifIIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOVQxNjoyNjoyOVrOIifIIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzAzMjQ4Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                SELECT struct(H AS H, st.pvalue(H, DoF) AS p, DoF AS DoF) FROM H_raw\n          \n          \n            \n                SELECT struct(H AS H, fn.pvalue(H, DoF) AS p, DoF AS DoF) FROM H_raw", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r573032483", "createdAt": "2021-02-09T16:26:29Z", "author": {"login": "danieldeleo"}, "path": "udfs/statslib/kruskal_wallis.sql", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION fn.kruskal_wallis(data ARRAY<STRUCT<factor STRING, val FLOAT64>>) AS ((\n+    WITH H_raw AS(\n+        WITH sums AS \n+        (\n+            WITH rank_data AS \n+            (\n+                SELECT d.factor AS f, d.val AS v, RANK() OVER(ORDER BY d.val) AS r\n+                FROM UNNEST(data) AS d \n+            ) #rank_data\n+            SELECT     \n+                SUM(r) * (SUM(r) / COUNT(*)) AS sumranks, COUNT(*) AS n\n+            FROM rank_data\n+            GROUP BY f\n+        ) # sums\n+        SELECT 12.00 /(SUM(n) *(SUM(n) + 1)) * SUM(sumranks) -(3.00 *(SUM(n) + 1)) AS H, \n+                      COUNT(n) -1 AS DoF\n+        FROM sums\n+    ) # H_raw\n+    SELECT struct(H AS H, st.pvalue(H, DoF) AS p, DoF AS DoF) FROM H_raw", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2470574dca4ccd2d2d59e11818a6fde5330b652a"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "076d9a3c77f6407658cfac7facf07b235ab65ac3", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/076d9a3c77f6407658cfac7facf07b235ab65ac3", "committedDate": "2021-02-09T19:49:51Z", "message": "Update udfs/statslib/kruskal_wallis.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43f066d6a0a6c726628e614424daef9ca568e7a0", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/43f066d6a0a6c726628e614424daef9ca568e7a0", "committedDate": "2021-02-09T20:18:30Z", "message": "Update udf_test_utils.py"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c73814529793b0788284a5b131ba281bbbba4fc7", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/c73814529793b0788284a5b131ba281bbbba4fc7", "committedDate": "2021-02-09T20:23:41Z", "message": "reverted file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0229cf089e0364c1688dfd9c22a648f453495ad1", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/0229cf089e0364c1688dfd9c22a648f453495ad1", "committedDate": "2021-02-09T20:34:21Z", "message": "Merge branch 'master' of https://github.com/jrossthomson/bigquery-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8457323c9411caab3b6a2f82f1a10bdf8eaf5933", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/8457323c9411caab3b6a2f82f1a10bdf8eaf5933", "committedDate": "2021-02-09T21:12:11Z", "message": "Delete key.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc53a8c7f858565ac1d3ba8bbb711229a8e3d5a", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/bbc53a8c7f858565ac1d3ba8bbb711229a8e3d5a", "committedDate": "2021-02-09T21:31:54Z", "message": "Moved statslib to community"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d337dc77ed78351e5887b4fa22b61b6c0ac740", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b6d337dc77ed78351e5887b4fa22b61b6c0ac740", "committedDate": "2021-02-09T21:32:11Z", "message": "Merge branch 'master' of https://github.com/jrossthomson/bigquery-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c6d773205909255171cceca0855984be8e4331", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/f7c6d773205909255171cceca0855984be8e4331", "committedDate": "2021-02-12T21:11:55Z", "message": "trying to revert again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb", "author": {"user": {"login": "drj-ross", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d4cc03912c5bf0607a6a26b15b408cb8f7d36efb", "committedDate": "2021-02-12T21:13:26Z", "message": "fixed newline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6705fc55974dc26c42d1d3c51a910adb6d07f02f", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/6705fc55974dc26c42d1d3c51a910adb6d07f02f", "committedDate": "2021-02-22T14:59:13Z", "message": "Delete BigQueryUtils.code-workspace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQyNzA4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595442708", "createdAt": "2021-02-22T15:04:25Z", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowNDoyNVrOIpb-Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowNDoyNVrOIpb-Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMyMDgzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              return 1.0 - jStat['chisquare'].cdf(H, dof)\n          \n          \n            \n              return 1.0 - jstat.jStat['chisquare'].cdf(H, dof)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580320838", "createdAt": "2021-02-22T15:04:25Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/pvalue.sql", "diffHunk": "@@ -0,0 +1,10 @@\n+#standardSQL\n+\n+CREATE OR REPLACE FUNCTION fn.pvalue(H FLOAT64, dof INT64) \n+RETURNS FLOAT64 \n+LANGUAGE js AS \"\"\"\n+  return 1.0 - jStat['chisquare'].cdf(H, dof)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c668b7fa13cf5eaffea1788eb94aca75551fa20b", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/c668b7fa13cf5eaffea1788eb94aca75551fa20b", "committedDate": "2021-02-22T15:05:46Z", "message": "Update udfs/community/pvalue.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQ2ODA3", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595446807", "createdAt": "2021-02-22T15:08:14Z", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowODoxNFrOIpcKrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowODoxNFrOIpcKrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMyNDAxMw==", "bodyText": "remove this file from PR", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580324013", "createdAt": "2021-02-22T15:08:14Z", "author": {"login": "danieldeleo"}, "path": "BigQueryUtils.code-workspace", "diffHunk": "@@ -0,0 +1,7 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQ3OTgw", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595447980", "createdAt": "2021-02-22T15:09:04Z", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowOTowNFrOIpcOoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowOTowNFrOIpcOoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMyNTAyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2019 Google LLC\n          \n          \n            \n             * Copyright 2021 Google LLC", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580325025", "createdAt": "2021-02-22T15:09:04Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/kruskal_wallis.sql", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2019 Google LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQ4MTc0", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595448174", "createdAt": "2021-02-22T15:09:16Z", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowOToxNlrOIpcPPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNTowOToxNlrOIpcPPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMyNTE4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2019 Google LLC\n          \n          \n            \n             * Copyright 2021 Google LLC", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580325182", "createdAt": "2021-02-22T15:09:16Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/linear_regression.sql", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2019 Google LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQ5MzE2", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595449316", "createdAt": "2021-02-22T15:10:19Z", "commit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToxMDoxOVrOIpcSsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToxMDoxOVrOIpcSsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMyNjA2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             */\n          \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            CREATE OR REPLACE FUNCTION fn.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>) \n          \n          \n            \n             */\n          \n          \n            \n            \n          \n          \n            \n            CREATE OR REPLACE FUNCTION fn.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580326067", "createdAt": "2021-02-22T15:10:19Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/linear_regression.sql", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+\n+\n+CREATE OR REPLACE FUNCTION fn.linear_regression(data ARRAY<STRUCT<X FLOAT64, Y FLOAT64>>) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4cc03912c5bf0607a6a26b15b408cb8f7d36efb"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/befd86432b982d363b6e3c9690c35fe412a50388", "committedDate": "2021-02-22T15:11:07Z", "message": "Update udfs/community/linear_regression.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad2accc99e7d08d34ce6f12fad64cf3c82d6bc76", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/ad2accc99e7d08d34ce6f12fad64cf3c82d6bc76", "committedDate": "2021-02-22T15:22:15Z", "message": "Update udfs/community/linear_regression.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00690a984718dd6771142fac258571c32c733a3f", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/00690a984718dd6771142fac258571c32c733a3f", "committedDate": "2021-02-22T15:22:25Z", "message": "Update udfs/community/kruskal_wallis.sql\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDYzMTY2", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595463166", "createdAt": "2021-02-22T15:22:32Z", "commit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMjozMlrOIpc6mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMjozMlrOIpc6mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMzNjI4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This directory contains community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) for Statistical Analysis\n          \n          \n            \n            to extend BigQuery for more specialized usage patterns. Each UDF within this\n          \n          \n            \n            directory will be automatically synchronized to the `bqutil` project within the\n          \n          \n            \n            `fn` dataset for reference in queries.\n          \n          \n            \n            This section details the subset of community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) \n          \n          \n            \n            that extend BigQuery and enable more specialized Statistical Analysis usage patterns. \n          \n          \n            \n            Each UDF detailed below will be automatically synchronized to the `fn` dataset\n          \n          \n            \n            within the `bqutil` project for reference in your queries.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580336280", "createdAt": "2021-02-22T15:22:32Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/README.md", "diffHunk": "@@ -586,3 +586,61 @@ returns:\n | 4\t| 40 | 6.324555320336759 |\n | 5\t| 50 | 12.649110640673518 |\n \n+\n+<br/>\n+<br/>\n+<br/>\n+\n+# StatsLib: Statistical UDFs\n+\n+This directory contains community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) for Statistical Analysis\n+to extend BigQuery for more specialized usage patterns. Each UDF within this\n+directory will be automatically synchronized to the `bqutil` project within the\n+`fn` dataset for reference in queries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b54467cad03b93a33b9dfe882a9cddcdf2b003d", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/4b54467cad03b93a33b9dfe882a9cddcdf2b003d", "committedDate": "2021-02-22T15:23:05Z", "message": "Update udfs/community/README.md\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDY0MzI2", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595464326", "createdAt": "2021-02-22T15:23:33Z", "commit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMzozM1rOIpc9zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMzozM1rOIpc9zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMzNzEwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### [kruskal_wallis(arr(struct(factor STRING, val FLOAT64))](kruskal_wallis.sql)\n          \n          \n            \n            ### [kruskal_wallis(ARRAY(STRUCT(factor STRING, val FLOAT64))](kruskal_wallis.sql)", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580337102", "createdAt": "2021-02-22T15:23:33Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/README.md", "diffHunk": "@@ -586,3 +586,61 @@ returns:\n | 4\t| 40 | 6.324555320336759 |\n | 5\t| 50 | 12.649110640673518 |\n \n+\n+<br/>\n+<br/>\n+<br/>\n+\n+# StatsLib: Statistical UDFs\n+\n+This directory contains community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) for Statistical Analysis\n+to extend BigQuery for more specialized usage patterns. Each UDF within this\n+directory will be automatically synchronized to the `bqutil` project within the\n+`fn` dataset for reference in queries.\n+\n+For example, if you'd like to reference the `int` function within your query,\n+you can reference it like the following:\n+```sql\n+SELECT bqutil.fn.int(1.684)\n+```\n+\n+## UDFs\n+\n+* [kruskal_wallis](#kruskal_wallisarrstructfactor-string-val-float64)\n+\n+## Documentation\n+\n+### [kruskal_wallis(arr(struct(factor STRING, val FLOAT64))](kruskal_wallis.sql)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDY0NzYx", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595464761", "createdAt": "2021-02-22T15:23:53Z", "commit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMzo1NFrOIpc-9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyMzo1NFrOIpc-9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMzNzM5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            set data = [\n          \n          \n            \n            SET data = [", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580337396", "createdAt": "2021-02-22T15:23:54Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/README.md", "diffHunk": "@@ -586,3 +586,61 @@ returns:\n | 4\t| 40 | 6.324555320336759 |\n | 5\t| 50 | 12.649110640673518 |\n \n+\n+<br/>\n+<br/>\n+<br/>\n+\n+# StatsLib: Statistical UDFs\n+\n+This directory contains community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) for Statistical Analysis\n+to extend BigQuery for more specialized usage patterns. Each UDF within this\n+directory will be automatically synchronized to the `bqutil` project within the\n+`fn` dataset for reference in queries.\n+\n+For example, if you'd like to reference the `int` function within your query,\n+you can reference it like the following:\n+```sql\n+SELECT bqutil.fn.int(1.684)\n+```\n+\n+## UDFs\n+\n+* [kruskal_wallis](#kruskal_wallisarrstructfactor-string-val-float64)\n+\n+## Documentation\n+\n+### [kruskal_wallis(arr(struct(factor STRING, val FLOAT64))](kruskal_wallis.sql)\n+Takes an array of struct where each struct (point) represents a measurement, with a group label and a measurement value\n+\n+The [Kruskal\u2013Wallis test by ranks](https://en.wikipedia.org/wiki/Kruskal%E2%80%93Wallis_one-way_analysis_of_variance), Kruskal\u2013Wallis H test (named after William Kruskal and W. Allen Wallis), or one-way ANOVA on ranks is a non-parametric method for testing whether samples originate from the same distribution. It is used for comparing two or more independent samples of equal or different sample sizes. It extends the Mann\u2013Whitney U test, which is used for comparing only two groups. The parametric equivalent of the Kruskal\u2013Wallis test is the one-way analysis of variance (ANOVA).\n+\n+* Input: array: struct <factor STRING, val FLOAT64>\n+* Output: struct<H FLOAT64, p-value FLOAT64, DOF FLOAT64>\n+```sql\n+DECLARE data ARRAY<STRUCT<factor STRING, val FLOAT64>>;\n+\n+set data = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b22b52e5ac28b3f4db3041f8455f115663068fd6", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b22b52e5ac28b3f4db3041f8455f115663068fd6", "committedDate": "2021-02-22T15:23:57Z", "message": "Update udfs/community/README.md\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDY1MDQy", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595465042", "createdAt": "2021-02-22T15:24:08Z", "commit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyNDowOFrOIpc_uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyNDowOFrOIpc_uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMzNzU5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            SELECT `lib_stats.kruskal_wallis`(data) as results;\n          \n          \n            \n            SELECT `lib_stats.kruskal_wallis`(data) AS results;", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580337595", "createdAt": "2021-02-22T15:24:08Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/README.md", "diffHunk": "@@ -586,3 +586,61 @@ returns:\n | 4\t| 40 | 6.324555320336759 |\n | 5\t| 50 | 12.649110640673518 |\n \n+\n+<br/>\n+<br/>\n+<br/>\n+\n+# StatsLib: Statistical UDFs\n+\n+This directory contains community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) for Statistical Analysis\n+to extend BigQuery for more specialized usage patterns. Each UDF within this\n+directory will be automatically synchronized to the `bqutil` project within the\n+`fn` dataset for reference in queries.\n+\n+For example, if you'd like to reference the `int` function within your query,\n+you can reference it like the following:\n+```sql\n+SELECT bqutil.fn.int(1.684)\n+```\n+\n+## UDFs\n+\n+* [kruskal_wallis](#kruskal_wallisarrstructfactor-string-val-float64)\n+\n+## Documentation\n+\n+### [kruskal_wallis(arr(struct(factor STRING, val FLOAT64))](kruskal_wallis.sql)\n+Takes an array of struct where each struct (point) represents a measurement, with a group label and a measurement value\n+\n+The [Kruskal\u2013Wallis test by ranks](https://en.wikipedia.org/wiki/Kruskal%E2%80%93Wallis_one-way_analysis_of_variance), Kruskal\u2013Wallis H test (named after William Kruskal and W. Allen Wallis), or one-way ANOVA on ranks is a non-parametric method for testing whether samples originate from the same distribution. It is used for comparing two or more independent samples of equal or different sample sizes. It extends the Mann\u2013Whitney U test, which is used for comparing only two groups. The parametric equivalent of the Kruskal\u2013Wallis test is the one-way analysis of variance (ANOVA).\n+\n+* Input: array: struct <factor STRING, val FLOAT64>\n+* Output: struct<H FLOAT64, p-value FLOAT64, DOF FLOAT64>\n+```sql\n+DECLARE data ARRAY<STRUCT<factor STRING, val FLOAT64>>;\n+\n+set data = [\n+('a',1.0),\n+('b',2.0),\n+('c',2.3),\n+('a',1.4),\n+('b',2.2),\n+('c',5.5),\n+('a',1.0),\n+('b',2.3),\n+('c',2.3),\n+('a',1.1),\n+('b',7.2),\n+('c',2.8)\n+];\n+\n+\n+SELECT `lib_stats.kruskal_wallis`(data) as results;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "befd86432b982d363b6e3c9690c35fe412a50388"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094", "committedDate": "2021-02-22T15:24:22Z", "message": "Update udfs/community/README.md\n\nCo-authored-by: Daniel De Leo <danieldeleo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDcxMDY5", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-595471069", "createdAt": "2021-02-22T15:29:23Z", "commit": {"oid": "bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyOToyM1rOIpdRlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQxNToyOToyM1rOIpdRlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDM0MjE2Nw==", "bodyText": "linear_regression and pvalue UDFs must also be added to README.\nPlease add all new UDFs to the top UDFs list as well, but have them link down to their descriptions in the new statslib section you created.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r580342167", "createdAt": "2021-02-22T15:29:23Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/README.md", "diffHunk": "@@ -586,3 +586,61 @@ returns:\n | 4\t| 40 | 6.324555320336759 |\n | 5\t| 50 | 12.649110640673518 |\n \n+\n+<br/>\n+<br/>\n+<br/>\n+\n+# StatsLib: Statistical UDFs\n+\n+This section details the subset of community contributed [user-defined functions](https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions) \n+that extend BigQuery and enable more specialized Statistical Analysis usage patterns. \n+Each UDF detailed below will be automatically synchronized to the `fn` dataset\n+within the `bqutil` project for reference in your queries.\n+\n+For example, if you'd like to reference the `int` function within your query,\n+you can reference it like the following:\n+```sql\n+SELECT bqutil.fn.int(1.684)\n+```\n+\n+## UDFs\n+\n+* [kruskal_wallis](#kruskal_wallisarrstructfactor-string-val-float64)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk3NTE5NDkw", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-597519490", "createdAt": "2021-02-24T14:12:24Z", "commit": {"oid": "bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yNFQxNDoxMjoyNFrOIrB5fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yNFQxNDoxMjoyNFrOIrB5fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTk5MDc4Mg==", "bodyText": "Add trailing newline", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#discussion_r581990782", "createdAt": "2021-02-24T14:12:24Z", "author": {"login": "danieldeleo"}, "path": "udfs/community/test_cases.yaml", "diffHunk": "@@ -389,3 +389,18 @@ nlp_compromise_people:\n   - test:\n     input: CAST(\"Randal Kieth Orton and Dwayne 'the rock' Johnson had a really funny fight.\" AS STRING)\n     expected_output: CAST(['randal kieth orton', 'dwayne the rock johnson'] AS ARRAY<STRING>)\n+#\n+# Below targets StatsLib work\n+#\n+pvalue:\n+  - test:\n+    input: CAST(0.3 AS FLOAT64), CAST(2 AS INT64)\n+    expected_output: CAST(0.8607079764250578 AS FLOAT64)\n+kruskal_wallis:\n+  - test:\n+    input: (SELECT [('a',1.0), ('b',2.0), ('c',2.3), ('a',1.4), ('b',2.2), ('c',5.5), ('a',1.0), ('b',2.3), ('c',2.3), ('a',1.1), ('b',7.2), ('c',2.8)])\n+    expected_output: STRUCT(CAST(3.423076923076927 AS FLOAT64) AS H, CAST( 0.1805877514841956 AS FLOAT64) AS p, CAST(2 AS INT64) AS DoF)\n+linear_regression:\n+  - test:\n+    input: (SELECT [ (5.1,2.5), (5.0,2.0), (5.7,2.6), (6.0,2.2), (5.8,2.6), (5.5,2.3), (6.1,2.8), (5.5,2.5), (6.4,3.2), (5.6,3.0)])\n+    expected_output: STRUCT(CAST(-0.4353361094588436 AS FLOAT64) AS a, CAST( 0.5300416418798544 AS FLOAT64) AS b, CAST(0.632366563565354 AS FLOAT64) AS r)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0c6dd1d9442b1cd73b8fb3300ac2cd8b74a094"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6095ed26943eb9c7a9e7fa838cf0ac3a45025914", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/6095ed26943eb9c7a9e7fa838cf0ac3a45025914", "committedDate": "2021-02-25T15:08:43Z", "message": "Update README.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d21f13ce5040aca8a2f721f2ea3efb29aa29b5", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/67d21f13ce5040aca8a2f721f2ea3efb29aa29b5", "committedDate": "2021-02-25T15:16:29Z", "message": "Update README.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d294925da39cc092b4dd6a5e9b59a6860e546967", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d294925da39cc092b4dd6a5e9b59a6860e546967", "committedDate": "2021-02-25T15:34:24Z", "message": "Update README.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbac294e8b7b0c8c0ad15823b4bf1bd6136c5abd", "author": {"user": {"login": "jrossthomson", "name": "J Ross Thomson"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/dbac294e8b7b0c8c0ad15823b4bf1bd6136c5abd", "committedDate": "2021-02-25T16:08:49Z", "message": "Update test_cases.yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4f90edc9a730f3e1c44cc6e3370aa802534040b", "author": {"user": {"login": "danieldeleo", "name": "Daniel De Leo"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/c4f90edc9a730f3e1c44cc6e3370aa802534040b", "committedDate": "2021-02-26T19:50:24Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk5ODk2OTg0", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/183#pullrequestreview-599896984", "createdAt": "2021-02-26T19:56:14Z", "commit": {"oid": "c4f90edc9a730f3e1c44cc6e3370aa802534040b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 535, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}