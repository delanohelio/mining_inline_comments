{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NjAyNDYz", "number": 150, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowNzo0MlrOEY5xOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowODo0N1rOEY5yPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTQ3NzcwOnYy", "diffSide": "RIGHT", "path": "tools/zetasql_helper/zetasql_helper/local_service/run_server.cc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowNzo0MlrOHBazHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowNzo0MlrOHBazHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0OTY5Mg==", "bodyText": "can we run on localhost?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471249692", "createdAt": "2020-08-17T06:07:42Z", "author": {"login": "kikkyo"}, "path": "tools/zetasql_helper/zetasql_helper/local_service/run_server.cc", "diffHunk": "@@ -0,0 +1,37 @@\n+#include <iostream>\n+\n+#include <grpcpp/grpcpp.h>\n+#include <grpcpp/health_check_service_interface.h>\n+#include <grpcpp/ext/proto_server_reflection_plugin.h>\n+\n+#include \"zetasql_helper/local_service/local_service_grpc.h\"\n+\n+\n+using bigquery::utils::zetasql_helper::local_service::ZetaSqlHelperLocalServiceGrpcImpl;\n+\n+\n+void RunServer(const std::string &server_address) {\n+    ZetaSqlHelperLocalServiceGrpcImpl service;\n+\n+    grpc::EnableDefaultHealthCheckService(true);\n+    grpc::reflection::InitProtoReflectionServerBuilderPlugin();\n+    grpc::ServerBuilder builder;\n+    // Listen on the given address without any authentication mechanism.\n+    builder.AddListeningPort(server_address, grpc::InsecureServerCredentials());\n+    // Register \"service\" as the instance through which we'll communicate with\n+    // clients. In this case it corresponds to an *synchronous* service.\n+    builder.RegisterService(&service);\n+    // Finally assemble the server.\n+    std::unique_ptr<grpc::Server> server(builder.BuildAndStart());\n+    std::cout << \"Server listening on \" << server_address << std::endl;\n+\n+    // Wait for the server to shutdown. Note that some other thread must be\n+    // responsible for shutting down the server for this call to ever return.\n+    server->Wait();\n+}\n+\n+\n+int main() {\n+    RunServer(\"0.0.0.0:50051\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "773fb33b21d3051f62de3315fb2232c2532fd395"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTQ4MDMxOnYy", "diffSide": "RIGHT", "path": "tools/zetasql_helper/zetasql_helper/local_service/local_service_grpc.h", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowODo0N1rOHBa0lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMDowMjo1N1rOHB4_2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI1MDA3MA==", "bodyText": "These are just dummy methods right?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471250070", "createdAt": "2020-08-17T06:08:47Z", "author": {"login": "kikkyo"}, "path": "tools/zetasql_helper/zetasql_helper/local_service/local_service_grpc.h", "diffHunk": "@@ -0,0 +1,19 @@\n+#ifndef ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+#define ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+\n+#include \"zetasql_helper/local_service/local_service.grpc.pb.h\"\n+#include \"zetasql_helper/local_service/local_service.pb.h\"\n+\n+namespace bigquery::utils::zetasql_helper::local_service {\n+\n+    // Implementation of ZetaSql Helper LocalService Grpc service.\n+    class ZetaSqlHelperLocalServiceGrpcImpl : public ZetaSqlHelperLocalService::Service {\n+    public:\n+\n+        grpc::Status Hello(grpc::ServerContext *context, const HelloRequest *request, HelloResponse *response) override;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "773fb33b21d3051f62de3315fb2232c2532fd395"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc0NDQ3NQ==", "bodyText": "Right! They will be removed or changed to a health check in future.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471744475", "createdAt": "2020-08-17T20:02:57Z", "author": {"login": "mingen-pan"}, "path": "tools/zetasql_helper/zetasql_helper/local_service/local_service_grpc.h", "diffHunk": "@@ -0,0 +1,19 @@\n+#ifndef ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+#define ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+\n+#include \"zetasql_helper/local_service/local_service.grpc.pb.h\"\n+#include \"zetasql_helper/local_service/local_service.pb.h\"\n+\n+namespace bigquery::utils::zetasql_helper::local_service {\n+\n+    // Implementation of ZetaSql Helper LocalService Grpc service.\n+    class ZetaSqlHelperLocalServiceGrpcImpl : public ZetaSqlHelperLocalService::Service {\n+    public:\n+\n+        grpc::Status Hello(grpc::ServerContext *context, const HelloRequest *request, HelloResponse *response) override;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI1MDA3MA=="}, "originalCommit": {"oid": "773fb33b21d3051f62de3315fb2232c2532fd395"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3113, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}