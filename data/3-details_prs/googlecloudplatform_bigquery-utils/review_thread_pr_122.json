{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MTAyMjY3", "number": 122, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNjozODozNlrOETwiOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNjo0MToxMFrOETwl8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTUzNTk1OnYy", "diffSide": "RIGHT", "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNjozODozNlrOG5rEAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODoyMTowM1rOG5up0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyNzU1Mg==", "bodyText": "Seems easier to handle multiple '\\n' by something like this:\nif (index >= 0) {\n  var lines = errMsg.split('\\n');\n\n  // assign last line to errMsg\n  errMsg = lines[lines.length - 1];\n\n  // display other lines\n  for (var i = 0; i < line.length - 1; ++i)  {\n    progress.report({\n              message: line[i],\n              increment: isNaN(percent) ? undefined : percent,\n     });\n  }\n}", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463127552", "createdAt": "2020-07-30T16:38:36Z", "author": {"login": "feiling"}, "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -54,7 +55,26 @@ export class SqlExtractionRunner {\n       process.stdout!.on('data', data => {\n         json += data;\n       });\n-      // todo: track progress\n+      process.stderr!.on('data', data => {\n+        errMsg += data;\n+        let index = errMsg.indexOf('\\n');\n+        while (index >= 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NjM4Ng==", "bodyText": "Great suggestion, thanks!", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463186386", "createdAt": "2020-07-30T18:21:03Z", "author": {"login": "creativitRy"}, "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -54,7 +55,26 @@ export class SqlExtractionRunner {\n       process.stdout!.on('data', data => {\n         json += data;\n       });\n-      // todo: track progress\n+      process.stderr!.on('data', data => {\n+        errMsg += data;\n+        let index = errMsg.indexOf('\\n');\n+        while (index >= 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyNzU1Mg=="}, "originalCommit": {"oid": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTU0NTQ0OnYy", "diffSide": "RIGHT", "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNjo0MToxMFrOG5rKBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODoyMjozMlrOG5us5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyOTA5NA==", "bodyText": "There might be a way to disable buffering of stderr when you start a process. If so, implement that in another pull request.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463129094", "createdAt": "2020-07-30T16:41:10Z", "author": {"login": "feiling"}, "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -41,6 +41,7 @@ export class SqlExtractionRunner {\n \n     return new Promise<Query[]>((resolve, reject) => {\n       let json = '';\n+      let errMsg = '';\n       const process = execFile(this.execPath, args)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NzE3NQ==", "bodyText": "Hmm yeah I'll look into it.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463187175", "createdAt": "2020-07-30T18:22:32Z", "author": {"login": "creativitRy"}, "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -41,6 +41,7 @@ export class SqlExtractionRunner {\n \n     return new Promise<Query[]>((resolve, reject) => {\n       let json = '';\n+      let errMsg = '';\n       const process = execFile(this.execPath, args)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyOTA5NA=="}, "originalCommit": {"oid": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3066, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}