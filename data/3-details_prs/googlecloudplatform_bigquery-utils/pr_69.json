{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMzIzMDU3", "number": 69, "title": "SQL Extractor: java examples, cli, file list expander and unit tests", "bodyText": "added examples directory with java files to use as example inputs\nadded a command line arguments library, with current options following:\n\nUsage: sql_extraction [OPTIONS] [FILEPATHS]...\n\nOptions:\n  -r, --recursive  scan files in subdirectories recursively\n  -h, --help       Show this message and exit\n\nArguments:\n  FILEPATHS  file and directory paths to code\n\n\nadded basic file list expander (converts directories to list of files) and unit tests\n\nSupport for features such as globs/file extension support will be added in a future commit", "createdAt": "2020-06-11T20:44:59Z", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69", "merged": true, "mergeCommit": {"oid": "df66cfe77728b5305a472804f1e1663c6b18824f"}, "closed": true, "closedAt": "2020-06-16T22:10:32Z", "author": {"login": "creativitRy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrsDsagFqTQzMTEyMTkxNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr7uKngFqTQzMTg4NzIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMTIxOTE3", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#pullrequestreview-431121917", "createdAt": "2020-06-16T02:44:40Z", "commit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0NDo0MFrOGkJThA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0NDo0MFrOGkJThA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDM3Mg==", "bodyText": "Please print out the usage when -h is specified. In the usage, please also include several sample usages.\nIt seems right now the program doesn't support file patterns like \"*.cs\" and it's hard-coded to look for java files?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r440554372", "createdAt": "2020-06-16T02:44:40Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/src/main/kotlin/Cli.kt", "diffHunk": "@@ -0,0 +1,30 @@\n+package com.google.cloud.sqlecosystem.sqlextraction\n+\n+import com.github.ajalt.clikt.core.CliktCommand\n+import com.github.ajalt.clikt.parameters.arguments.argument\n+import com.github.ajalt.clikt.parameters.arguments.multiple\n+import com.github.ajalt.clikt.parameters.options.flag\n+import com.github.ajalt.clikt.parameters.options.option\n+import com.github.ajalt.clikt.parameters.types.path\n+import mu.KotlinLogging\n+import java.nio.file.Path\n+\n+private val logger = KotlinLogging.logger { }\n+\n+fun main(args: Array<String>) = Cli().main(args)\n+\n+class Cli : CliktCommand(name = \"sql_extraction\") {\n+    val recursive: Boolean by option(\"-r\", \"--recursive\", help = \"scan files in subdirectories recursively\").flag()\n+    val filePaths: List<Path> by argument(help = \"file and directory paths to code\").path(\n+        mustExist = true,\n+        canBeDir = true,\n+        canBeFile = true\n+    ).multiple()\n+\n+    override fun run() {\n+        logger.debug(\"Starting SQL Extraction from command line\")\n+\n+        val files = FileListExpander().expandAndFilter(filePaths, recursive)\n+        logger.debug { \"Files to analyze: $files\" }\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMTIyNjE5", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#pullrequestreview-431122619", "createdAt": "2020-06-16T02:46:47Z", "commit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0Njo0N1rOGkJV3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0Njo0N1rOGkJV3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDk3NQ==", "bodyText": "Please add some comments to list the commands to\n\nbuild your program\nrun unit tests", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r440554975", "createdAt": "2020-06-16T02:46:47Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/build.gradle.kts", "diffHunk": "@@ -31,6 +38,7 @@ task<de.undercouch.gradle.tasks.download.Download>(\"downloadGrammars\") {\n     }\n     src(listOf(\"https://raw.githubusercontent.com/antlr/grammars-v4/master/java/java9/Java9.g4\"))\n     dest(\"gen/main/antlr/\")\n+    overwrite(false)\n     println(System.getProperty(\"user.dir\"))\n }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5", "author": {"user": {"login": "creativitRy", "name": "Gahwon Lee"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/4b74bf10ca47fe570b63ffce3506d201e28084f5", "committedDate": "2020-06-11T20:40:10Z", "message": "SQL Extractor: java examples, cli, file list expander and unit tests"}, "afterCommit": {"oid": "f6ccdb81d548c7881563760a996e52f63eb458ab", "author": {"user": {"login": "creativitRy", "name": "Gahwon Lee"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/f6ccdb81d548c7881563760a996e52f63eb458ab", "committedDate": "2020-06-16T19:19:45Z", "message": "SQL Extractor: java examples, cli, file list expander and unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfeb1255ef63dc1a153af3974accc41439a1cb7d", "author": {"user": {"login": "creativitRy", "name": "Gahwon Lee"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/bfeb1255ef63dc1a153af3974accc41439a1cb7d", "committedDate": "2020-06-16T19:26:31Z", "message": "SQL Extractor: java examples, cli, file list expander and unit tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6ccdb81d548c7881563760a996e52f63eb458ab", "author": {"user": {"login": "creativitRy", "name": "Gahwon Lee"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/f6ccdb81d548c7881563760a996e52f63eb458ab", "committedDate": "2020-06-16T19:19:45Z", "message": "SQL Extractor: java examples, cli, file list expander and unit tests"}, "afterCommit": {"oid": "bfeb1255ef63dc1a153af3974accc41439a1cb7d", "author": {"user": {"login": "creativitRy", "name": "Gahwon Lee"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/bfeb1255ef63dc1a153af3974accc41439a1cb7d", "committedDate": "2020-06-16T19:26:31Z", "message": "SQL Extractor: java examples, cli, file list expander and unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODg3MjAz", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#pullrequestreview-431887203", "createdAt": "2020-06-16T20:59:39Z", "commit": {"oid": "bfeb1255ef63dc1a153af3974accc41439a1cb7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 576, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}