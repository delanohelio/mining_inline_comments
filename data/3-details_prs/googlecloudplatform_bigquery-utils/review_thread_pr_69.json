{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMzIzMDU3", "number": 69, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0NDo0MFrOEFww7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0Njo0N1rOEFwySg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDc3Mjk1OnYy", "diffSide": "RIGHT", "path": "tools/sql_extraction/src/main/kotlin/Cli.kt", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0NDo0MFrOGkJThA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDo1NTozMFrOGks1dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDM3Mg==", "bodyText": "Please print out the usage when -h is specified. In the usage, please also include several sample usages.\nIt seems right now the program doesn't support file patterns like \"*.cs\" and it's hard-coded to look for java files?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r440554372", "createdAt": "2020-06-16T02:44:40Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/src/main/kotlin/Cli.kt", "diffHunk": "@@ -0,0 +1,30 @@\n+package com.google.cloud.sqlecosystem.sqlextraction\n+\n+import com.github.ajalt.clikt.core.CliktCommand\n+import com.github.ajalt.clikt.parameters.arguments.argument\n+import com.github.ajalt.clikt.parameters.arguments.multiple\n+import com.github.ajalt.clikt.parameters.options.flag\n+import com.github.ajalt.clikt.parameters.options.option\n+import com.github.ajalt.clikt.parameters.types.path\n+import mu.KotlinLogging\n+import java.nio.file.Path\n+\n+private val logger = KotlinLogging.logger { }\n+\n+fun main(args: Array<String>) = Cli().main(args)\n+\n+class Cli : CliktCommand(name = \"sql_extraction\") {\n+    val recursive: Boolean by option(\"-r\", \"--recursive\", help = \"scan files in subdirectories recursively\").flag()\n+    val filePaths: List<Path> by argument(help = \"file and directory paths to code\").path(\n+        mustExist = true,\n+        canBeDir = true,\n+        canBeFile = true\n+    ).multiple()\n+\n+    override fun run() {\n+        logger.debug(\"Starting SQL Extraction from command line\")\n+\n+        val files = FileListExpander().expandAndFilter(filePaths, recursive)\n+        logger.debug { \"Files to analyze: $files\" }\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkzNzExNQ==", "bodyText": "Good idea for printing sample usages!\nCurrently, only java files are included since I wanted to focus on it first. But maybe it's a better idea to accept all file types here and filter them later based on which language frontends are implemented. This should also bring back the reason to support the --filetype flag that you mentioned.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r440937115", "createdAt": "2020-06-16T15:21:28Z", "author": {"login": "creativitRy"}, "path": "tools/sql_extraction/src/main/kotlin/Cli.kt", "diffHunk": "@@ -0,0 +1,30 @@\n+package com.google.cloud.sqlecosystem.sqlextraction\n+\n+import com.github.ajalt.clikt.core.CliktCommand\n+import com.github.ajalt.clikt.parameters.arguments.argument\n+import com.github.ajalt.clikt.parameters.arguments.multiple\n+import com.github.ajalt.clikt.parameters.options.flag\n+import com.github.ajalt.clikt.parameters.options.option\n+import com.github.ajalt.clikt.parameters.types.path\n+import mu.KotlinLogging\n+import java.nio.file.Path\n+\n+private val logger = KotlinLogging.logger { }\n+\n+fun main(args: Array<String>) = Cli().main(args)\n+\n+class Cli : CliktCommand(name = \"sql_extraction\") {\n+    val recursive: Boolean by option(\"-r\", \"--recursive\", help = \"scan files in subdirectories recursively\").flag()\n+    val filePaths: List<Path> by argument(help = \"file and directory paths to code\").path(\n+        mustExist = true,\n+        canBeDir = true,\n+        canBeFile = true\n+    ).multiple()\n+\n+    override fun run() {\n+        logger.debug(\"Starting SQL Extraction from command line\")\n+\n+        val files = FileListExpander().expandAndFilter(filePaths, recursive)\n+        logger.debug { \"Files to analyze: $files\" }\n+    }\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDM3Mg=="}, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEzNjUwMw==", "bodyText": "Looks good now.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r441136503", "createdAt": "2020-06-16T20:55:30Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/src/main/kotlin/Cli.kt", "diffHunk": "@@ -0,0 +1,30 @@\n+package com.google.cloud.sqlecosystem.sqlextraction\n+\n+import com.github.ajalt.clikt.core.CliktCommand\n+import com.github.ajalt.clikt.parameters.arguments.argument\n+import com.github.ajalt.clikt.parameters.arguments.multiple\n+import com.github.ajalt.clikt.parameters.options.flag\n+import com.github.ajalt.clikt.parameters.options.option\n+import com.github.ajalt.clikt.parameters.types.path\n+import mu.KotlinLogging\n+import java.nio.file.Path\n+\n+private val logger = KotlinLogging.logger { }\n+\n+fun main(args: Array<String>) = Cli().main(args)\n+\n+class Cli : CliktCommand(name = \"sql_extraction\") {\n+    val recursive: Boolean by option(\"-r\", \"--recursive\", help = \"scan files in subdirectories recursively\").flag()\n+    val filePaths: List<Path> by argument(help = \"file and directory paths to code\").path(\n+        mustExist = true,\n+        canBeDir = true,\n+        canBeFile = true\n+    ).multiple()\n+\n+    override fun run() {\n+        logger.debug(\"Starting SQL Extraction from command line\")\n+\n+        val files = FileListExpander().expandAndFilter(filePaths, recursive)\n+        logger.debug { \"Files to analyze: $files\" }\n+    }\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDM3Mg=="}, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDc3NjQyOnYy", "diffSide": "RIGHT", "path": "tools/sql_extraction/build.gradle.kts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0Njo0N1rOGkJV3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0Njo0N1rOGkJV3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDk3NQ==", "bodyText": "Please add some comments to list the commands to\n\nbuild your program\nrun unit tests", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/69#discussion_r440554975", "createdAt": "2020-06-16T02:46:47Z", "author": {"login": "feiling"}, "path": "tools/sql_extraction/build.gradle.kts", "diffHunk": "@@ -31,6 +38,7 @@ task<de.undercouch.gradle.tasks.download.Download>(\"downloadGrammars\") {\n     }\n     src(listOf(\"https://raw.githubusercontent.com/antlr/grammars-v4/master/java/java9/Java9.g4\"))\n     dest(\"gen/main/antlr/\")\n+    overwrite(false)\n     println(System.getProperty(\"user.dir\"))\n }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b74bf10ca47fe570b63ffce3506d201e28084f5"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2951, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}