{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwODAwNDIz", "number": 75, "title": "Query Verification: Setup project and input handling", "bodyText": "Project setup using Maven and initial input handling for data free query verification.", "createdAt": "2020-06-26T21:47:41Z", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75", "merged": true, "mergeCommit": {"oid": "3021bd2cde0a3aeb9d762d2937b24a750f5197d0"}, "closed": true, "closedAt": "2020-07-06T19:25:10Z", "author": {"login": "krishsuchdev"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvJVmuAH2gAyNDQwODAwNDIzOmQ5YmZjODRkYzQ2YjQ3Y2Q3N2MyOWMzMzZkMjQwYWQ2OTRkMmM3ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwuTC8gFqTQ0MTA5MzI5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784", "author": {"user": {"login": "krishsuchdev", "name": "Krish Suchdev"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d9bfc84dc46b47cd77c29c336d240ad694d2c784", "committedDate": "2020-06-26T20:33:16Z", "message": "Setup project and input handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjM5Mzky", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#pullrequestreview-438639392", "createdAt": "2020-06-26T23:07:45Z", "commit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMzowNzo0NlrOGpw7Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMzoxNToyNlrOGpxCDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0NjQxMA==", "bodyText": "It may be interesting to consider Autovalue: https://www.baeldung.com/introduction-to-autovalue", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446446410", "createdAt": "2020-06-26T23:07:46Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/BigQueryInstance.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.google.bigquery;\n+\n+public class BigQueryInstance {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0NjU5MQ==", "bodyText": "Why this is \"instance\"?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446446591", "createdAt": "2020-06-26T23:08:23Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/BigQueryInstance.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.google.bigquery;\n+\n+public class BigQueryInstance {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0NzA0MQ==", "bodyText": "I don't think you need this.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446447041", "createdAt": "2020-06-26T23:10:17Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/Main.java", "diffHunk": "@@ -0,0 +1,175 @@\n+package com.google.bigquery;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.Comparator;\n+\n+import org.apache.commons.cli.*;\n+\n+public class Main {\n+\n+    /**\n+     * usage: query_verification -q <PATH> <PATH> [-d <PATH>] [-s <PATH> <PATH>]\n+     *        [-h]\n+     *  -q,--query <PATH> <PATH>    First argument is the path to the migrated\n+     *                              query file. Second argument is the path to\n+     *                              the original query file and only required\n+     *                              when data is provided.\n+     *  -d,--data <PATH>            Path for table data in CSV format.\n+     *  -s,--schema <PATH> <PATH>   First argument is the path to the migrated\n+     *                              schema path. Second argument is the path to\n+     *                              the original schema query and is optional.\n+     *                              Referenced files should be in a JSON format.\n+     *  -h,--help                   Print this help screen.\n+     *\n+     * @param args Command line arguments\n+     */\n+    public static void main(String[] args) {\n+        Main main = new Main();\n+        main.run(args);\n+\n+        System.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0NzI0MQ==", "bodyText": "Just put the full name, QV may be confusing for people, similar for other places. This can also consider Autovalue.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446447241", "createdAt": "2020-06-26T23:11:14Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QVQuery.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package com.google.bigquery;\n+\n+public class QVQuery {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0Nzg4Ng==", "bodyText": "Should them be final and only set in constructor?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446447886", "createdAt": "2020-06-26T23:14:07Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0Nzk3Mw==", "bodyText": "Will it be better to have a single constructor and mark the input params as @Nuallable", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446447973", "createdAt": "2020-06-26T23:14:33Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;\n+    private QVSchema migratedSchema;\n+\n+    private QVQuery originalQuery;\n+    private QVSchema originalSchema;\n+\n+    public QueryVerification() {\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema, QVQuery originalQuery, QVSchema originalSchema) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODE0Mg==", "bodyText": "I can image these methods can be big, consider moving to their own class?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448142", "createdAt": "2020-06-26T23:15:26Z", "author": {"login": "yzhvictor"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;\n+    private QVSchema migratedSchema;\n+\n+    private QVQuery originalQuery;\n+    private QVSchema originalSchema;\n+\n+    public QueryVerification() {\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema, QVQuery originalQuery, QVSchema originalSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+\n+        this.originalQuery = originalQuery;\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    public QVQuery getMigratedQuery() {\n+        return migratedQuery;\n+    }\n+\n+    public void setMigratedQuery(QVQuery migratedQuery) {\n+        this.migratedQuery = migratedQuery;\n+    }\n+\n+    public QVSchema getMigratedSchema() {\n+        return migratedSchema;\n+    }\n+\n+    public void setMigratedSchema(QVSchema migratedSchema) {\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QVQuery getOriginalQuery() {\n+        return originalQuery;\n+    }\n+\n+    public void setOriginalQuery(QVQuery originalQuery) {\n+        this.originalQuery = originalQuery;\n+    }\n+\n+    public QVSchema getOriginalSchema() {\n+        return originalSchema;\n+    }\n+\n+    public void setOriginalSchema(QVSchema originalSchema) {\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    /**\n+     * Determines which verification method to use based on provided inputs and prints the result of the query verification.\n+     */\n+    public void verify() {\n+        boolean useDataAwareVerification = originalQuery != null && originalSchema != null;\n+        boolean verificationResult;\n+\n+        if (useDataAwareVerification) {\n+            verificationResult = dataAwareVerification();\n+        } else {\n+            verificationResult = dataFreeVerification();\n+        }\n+\n+        System.out.printf(\"Data-%s Verification %s\\n\", useDataAwareVerification ? \"Aware\" : \"Free\", verificationResult ? \"Succeeded\" : \"Failed\");\n+    }\n+\n+    public boolean dataFreeVerification() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjQwODg1", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#pullrequestreview-438640885", "createdAt": "2020-06-26T23:14:02Z", "commit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "state": "COMMENTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMzoxNDowMlrOGpxBBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMzozMzo1OFrOGpxP2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0Nzg3OA==", "bodyText": "Please add some JavaDoc describing the class and its functionality", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446447878", "createdAt": "2020-06-26T23:14:02Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/BigQueryInstance.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.google.bigquery;\n+\n+public class BigQueryInstance {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODI3Mw==", "bodyText": "Rather than give these a QV prefix can we change this to be a custom package called verification or query.verification?", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448273", "createdAt": "2020-06-26T23:16:00Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QVQuery.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package com.google.bigquery;\n+\n+public class QVQuery {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODM0OA==", "bodyText": "Please add JavaDoc", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448348", "createdAt": "2020-06-26T23:16:16Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QVQuery.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package com.google.bigquery;\n+\n+public class QVQuery {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODM5MQ==", "bodyText": "Same comments here as QVQuery", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448391", "createdAt": "2020-06-26T23:16:29Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QVSchema.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.google.bigquery;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODc1MA==", "bodyText": "Please add some JavaDoc", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448750", "createdAt": "2020-06-26T23:18:20Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0ODk4Ng==", "bodyText": "Given you're using two ternaries here I think you could just add this line into the verification methods and have them return void", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446448986", "createdAt": "2020-06-26T23:19:36Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;\n+    private QVSchema migratedSchema;\n+\n+    private QVQuery originalQuery;\n+    private QVSchema originalSchema;\n+\n+    public QueryVerification() {\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema, QVQuery originalQuery, QVSchema originalSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+\n+        this.originalQuery = originalQuery;\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    public QVQuery getMigratedQuery() {\n+        return migratedQuery;\n+    }\n+\n+    public void setMigratedQuery(QVQuery migratedQuery) {\n+        this.migratedQuery = migratedQuery;\n+    }\n+\n+    public QVSchema getMigratedSchema() {\n+        return migratedSchema;\n+    }\n+\n+    public void setMigratedSchema(QVSchema migratedSchema) {\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QVQuery getOriginalQuery() {\n+        return originalQuery;\n+    }\n+\n+    public void setOriginalQuery(QVQuery originalQuery) {\n+        this.originalQuery = originalQuery;\n+    }\n+\n+    public QVSchema getOriginalSchema() {\n+        return originalSchema;\n+    }\n+\n+    public void setOriginalSchema(QVSchema originalSchema) {\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    /**\n+     * Determines which verification method to use based on provided inputs and prints the result of the query verification.\n+     */\n+    public void verify() {\n+        boolean useDataAwareVerification = originalQuery != null && originalSchema != null;\n+        boolean verificationResult;\n+\n+        if (useDataAwareVerification) {\n+            verificationResult = dataAwareVerification();\n+        } else {\n+            verificationResult = dataFreeVerification();\n+        }\n+\n+        System.out.printf(\"Data-%s Verification %s\\n\", useDataAwareVerification ? \"Aware\" : \"Free\", verificationResult ? \"Succeeded\" : \"Failed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0OTAyMQ==", "bodyText": "This is named like a getter, please change", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446449021", "createdAt": "2020-06-26T23:19:49Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;\n+    private QVSchema migratedSchema;\n+\n+    private QVQuery originalQuery;\n+    private QVSchema originalSchema;\n+\n+    public QueryVerification() {\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema, QVQuery originalQuery, QVSchema originalSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+\n+        this.originalQuery = originalQuery;\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    public QVQuery getMigratedQuery() {\n+        return migratedQuery;\n+    }\n+\n+    public void setMigratedQuery(QVQuery migratedQuery) {\n+        this.migratedQuery = migratedQuery;\n+    }\n+\n+    public QVSchema getMigratedSchema() {\n+        return migratedSchema;\n+    }\n+\n+    public void setMigratedSchema(QVSchema migratedSchema) {\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QVQuery getOriginalQuery() {\n+        return originalQuery;\n+    }\n+\n+    public void setOriginalQuery(QVQuery originalQuery) {\n+        this.originalQuery = originalQuery;\n+    }\n+\n+    public QVSchema getOriginalSchema() {\n+        return originalSchema;\n+    }\n+\n+    public void setOriginalSchema(QVSchema originalSchema) {\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    /**\n+     * Determines which verification method to use based on provided inputs and prints the result of the query verification.\n+     */\n+    public void verify() {\n+        boolean useDataAwareVerification = originalQuery != null && originalSchema != null;\n+        boolean verificationResult;\n+\n+        if (useDataAwareVerification) {\n+            verificationResult = dataAwareVerification();\n+        } else {\n+            verificationResult = dataFreeVerification();\n+        }\n+\n+        System.out.printf(\"Data-%s Verification %s\\n\", useDataAwareVerification ? \"Aware\" : \"Free\", verificationResult ? \"Succeeded\" : \"Failed\");\n+    }\n+\n+    public boolean dataFreeVerification() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ0OTA0NQ==", "bodyText": "Same here", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446449045", "createdAt": "2020-06-26T23:19:55Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {\n+\n+    private QVQuery migratedQuery;\n+    private QVSchema migratedSchema;\n+\n+    private QVQuery originalQuery;\n+    private QVSchema originalSchema;\n+\n+    public QueryVerification() {\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QueryVerification(QVQuery migratedQuery, QVSchema migratedSchema, QVQuery originalQuery, QVSchema originalSchema) {\n+        this.migratedQuery = migratedQuery;\n+        this.migratedSchema = migratedSchema;\n+\n+        this.originalQuery = originalQuery;\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    public QVQuery getMigratedQuery() {\n+        return migratedQuery;\n+    }\n+\n+    public void setMigratedQuery(QVQuery migratedQuery) {\n+        this.migratedQuery = migratedQuery;\n+    }\n+\n+    public QVSchema getMigratedSchema() {\n+        return migratedSchema;\n+    }\n+\n+    public void setMigratedSchema(QVSchema migratedSchema) {\n+        this.migratedSchema = migratedSchema;\n+    }\n+\n+    public QVQuery getOriginalQuery() {\n+        return originalQuery;\n+    }\n+\n+    public void setOriginalQuery(QVQuery originalQuery) {\n+        this.originalQuery = originalQuery;\n+    }\n+\n+    public QVSchema getOriginalSchema() {\n+        return originalSchema;\n+    }\n+\n+    public void setOriginalSchema(QVSchema originalSchema) {\n+        this.originalSchema = originalSchema;\n+    }\n+\n+    /**\n+     * Determines which verification method to use based on provided inputs and prints the result of the query verification.\n+     */\n+    public void verify() {\n+        boolean useDataAwareVerification = originalQuery != null && originalSchema != null;\n+        boolean verificationResult;\n+\n+        if (useDataAwareVerification) {\n+            verificationResult = dataAwareVerification();\n+        } else {\n+            verificationResult = dataFreeVerification();\n+        }\n+\n+        System.out.printf(\"Data-%s Verification %s\\n\", useDataAwareVerification ? \"Aware\" : \"Free\", verificationResult ? \"Succeeded\" : \"Failed\");\n+    }\n+\n+    public boolean dataFreeVerification() {\n+        // TODO Implement data free verification\n+        return false;\n+    }\n+\n+    public boolean dataAwareVerification() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ1MDg1NA==", "bodyText": "I think it might look cleaner if you restructure things so that original/migratedQuery and schema get assigned to some variables at this scope, then create the QueryVerification object using the complete constructor. Then you can remove the setters as well.", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446450854", "createdAt": "2020-06-26T23:29:11Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/Main.java", "diffHunk": "@@ -0,0 +1,175 @@\n+package com.google.bigquery;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.Comparator;\n+\n+import org.apache.commons.cli.*;\n+\n+public class Main {\n+\n+    /**\n+     * usage: query_verification -q <PATH> <PATH> [-d <PATH>] [-s <PATH> <PATH>]\n+     *        [-h]\n+     *  -q,--query <PATH> <PATH>    First argument is the path to the migrated\n+     *                              query file. Second argument is the path to\n+     *                              the original query file and only required\n+     *                              when data is provided.\n+     *  -d,--data <PATH>            Path for table data in CSV format.\n+     *  -s,--schema <PATH> <PATH>   First argument is the path to the migrated\n+     *                              schema path. Second argument is the path to\n+     *                              the original schema query and is optional.\n+     *                              Referenced files should be in a JSON format.\n+     *  -h,--help                   Print this help screen.\n+     *\n+     * @param args Command line arguments\n+     */\n+    public static void main(String[] args) {\n+        Main main = new Main();\n+        main.run(args);\n+\n+        System.exit(0);\n+    }\n+\n+    public void run(String[] args) {\n+        CommandLine command = buildCommand(args);\n+        if (command == null) {\n+            return;\n+        }\n+\n+        QueryVerification queryVerification = new QueryVerification();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ1MDkyNg==", "bodyText": "I think we should prefer to call this QueryVerifier", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446450926", "createdAt": "2020-06-26T23:29:34Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/QueryVerification.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.google.bigquery;\n+\n+public class QueryVerification {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ1MTY3NA==", "bodyText": "We can make this a static method", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#discussion_r446451674", "createdAt": "2020-06-26T23:33:58Z", "author": {"login": "Luminarys"}, "path": "tools/query_verification/src/main/java/com/google/bigquery/Main.java", "diffHunk": "@@ -0,0 +1,175 @@\n+package com.google.bigquery;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.Comparator;\n+\n+import org.apache.commons.cli.*;\n+\n+public class Main {\n+\n+    /**\n+     * usage: query_verification -q <PATH> <PATH> [-d <PATH>] [-s <PATH> <PATH>]\n+     *        [-h]\n+     *  -q,--query <PATH> <PATH>    First argument is the path to the migrated\n+     *                              query file. Second argument is the path to\n+     *                              the original query file and only required\n+     *                              when data is provided.\n+     *  -d,--data <PATH>            Path for table data in CSV format.\n+     *  -s,--schema <PATH> <PATH>   First argument is the path to the migrated\n+     *                              schema path. Second argument is the path to\n+     *                              the original schema query and is optional.\n+     *                              Referenced files should be in a JSON format.\n+     *  -h,--help                   Print this help screen.\n+     *\n+     * @param args Command line arguments\n+     */\n+    public static void main(String[] args) {\n+        Main main = new Main();\n+        main.run(args);\n+\n+        System.exit(0);\n+    }\n+\n+    public void run(String[] args) {\n+        CommandLine command = buildCommand(args);\n+        if (command == null) {\n+            return;\n+        }\n+\n+        QueryVerification queryVerification = new QueryVerification();\n+\n+        // Query\n+        if (command.hasOption(\"q\")) {\n+            String[] queryOptionValues = command.getOptionValues(\"q\");\n+\n+            if (queryOptionValues.length >= 1) {\n+                String migratedQueryPath = queryOptionValues[0];\n+                QVQuery migratedQuery = new QVQuery(getContentsOfFile(migratedQueryPath), migratedQueryPath);\n+                queryVerification.setMigratedQuery(migratedQuery);\n+            }\n+\n+            if (queryOptionValues.length >= 2) {\n+                String originalQueryPath = queryOptionValues[1];\n+                QVQuery originalQuery = new QVQuery(getContentsOfFile(originalQueryPath), originalQueryPath);\n+                queryVerification.setMigratedQuery(originalQuery);\n+            }\n+        }\n+\n+        // Schema\n+        if (command.hasOption(\"s\")) {\n+            String[] schemaOptionValues = command.getOptionValues(\"s\");\n+\n+            if (schemaOptionValues.length >= 1) {\n+                String migratedSchemaPath = schemaOptionValues[0];\n+                QVSchema migratedSchema = new QVSchema(getContentsOfFile(migratedSchemaPath), migratedSchemaPath);\n+                queryVerification.setMigratedSchema(migratedSchema);\n+            }\n+\n+            if (schemaOptionValues.length >= 2) {\n+                String originalSchemaPath = schemaOptionValues[1];\n+                QVSchema originalSchema = new QVSchema(getContentsOfFile(originalSchemaPath), originalSchemaPath);\n+                queryVerification.setOriginalSchema(originalSchema);\n+            }\n+        }\n+\n+        // Data\n+        if (command.hasOption(\"d\")) {\n+            // TODO Data input for data aware verification\n+        }\n+\n+        queryVerification.verify();\n+    }\n+\n+    /**\n+     * @param args Command Line Arguments\n+     * @return Command parsed from arguments\n+     */\n+    public CommandLine buildCommand(String[] args) {\n+        CommandLineParser parser = new DefaultParser();\n+        Options options = buildOptions();\n+\n+        HelpFormatter formatter = new HelpFormatter();\n+        formatter.setOptionComparator(new Comparator<Option>() {\n+            public int compare(Option o1, Option o2) {\n+                if (o1.isRequired() != o2.isRequired())\n+                    return o1.isRequired() ? -1 : 1;\n+                else if (o1.hasArg() != o2.hasArg())\n+                    return o1.hasArg() ? -1 : 1;\n+                else\n+                    return o1.getLongOpt().compareTo(o2.getLongOpt());\n+            }\n+        });\n+\n+        CommandLine command;\n+        try {\n+            command = parser.parse(options, args);\n+        } catch (ParseException e) {\n+            System.out.println(e.getMessage());\n+            formatter.printHelp(\"query_verification\", options, true);\n+            return null;\n+        }\n+\n+        // Help\n+        if (command.hasOption(\"h\")) {\n+            formatter.printHelp(\"query_verification\", options, true);\n+        }\n+\n+        return command;\n+    }\n+\n+    /**\n+     * @return CLI options\n+     */\n+    public Options buildOptions() {\n+        Options options = new Options();\n+\n+        options.addOption(Option.builder(\"q\")\n+                .required(true)\n+                .longOpt(\"query\")\n+                .numberOfArgs(Option.UNLIMITED_VALUES) // Allows for 2 arguments without both being required\n+                .valueSeparator(' ')\n+                .argName(\"PATH> <PATH\") // Appears as \"<PATH> <PATH>\"\n+                .desc(\"First argument is the path to the migrated query file. Second argument is the path to the original query file and only required when data is provided.\")\n+                .build());\n+        options.addOption(Option.builder(\"s\")\n+                .longOpt(\"schema\")\n+                .numberOfArgs(Option.UNLIMITED_VALUES) // Allows for 2 arguments without both being required\n+                .valueSeparator(' ')\n+                .argName(\"PATH> <PATH\") // Appears as \"<PATH> <PATH>\"\n+                .desc(\"First argument is the path to the migrated schema path. Second argument is the path to the original schema query and is optional. Referenced files should be in a JSON format.\")\n+                .build());\n+        options.addOption(Option.builder(\"d\")\n+                .longOpt(\"data\")\n+                .hasArg(true)\n+                .argName(\"PATH\")\n+                .desc(\"Path for table data in CSV format.\")\n+                .build());\n+        options.addOption(Option.builder(\"h\")\n+                .longOpt(\"help\")\n+                .desc(\"Print this help screen.\")\n+                .build());\n+\n+        return options;\n+    }\n+\n+    /**\n+     * Retrieves the text contents from file\n+     *\n+     * @param path The path to the file to be read\n+     * @return Text contents in file\n+     */\n+    public String getContentsOfFile(String path) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bfc84dc46b47cd77c29c336d240ad694d2c784"}, "originalPosition": 163}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1a9d740d2839f8e70a3d6ee64cd4f994e45b57c", "author": {"user": {"login": "krishsuchdev", "name": "Krish Suchdev"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b1a9d740d2839f8e70a3d6ee64cd4f994e45b57c", "committedDate": "2020-06-30T20:07:20Z", "message": "Restructuring and added autovalue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDY2OTcw", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#pullrequestreview-441066970", "createdAt": "2020-07-01T17:30:19Z", "commit": {"oid": "b1a9d740d2839f8e70a3d6ee64cd4f994e45b57c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dfc15c4b706e089206befca05e4eeb6bd9da513", "author": {"user": {"login": "krishsuchdev", "name": "Krish Suchdev"}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/1dfc15c4b706e089206befca05e4eeb6bd9da513", "committedDate": "2020-07-01T17:48:48Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDkzMjk4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/75#pullrequestreview-441093298", "createdAt": "2020-07-01T18:10:53Z", "commit": {"oid": "1dfc15c4b706e089206befca05e4eeb6bd9da513"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 592, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}