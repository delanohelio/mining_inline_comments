{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NTA3NTAw", "number": 35, "title": "Implementation of frequency table UDF", "bodyText": "Construct a frequency table (histogram) of an array of elements.\nFrequency table is represented as an array of STRUCT(value, freq)", "createdAt": "2020-01-23T18:41:07Z", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35", "merged": true, "mergeCommit": {"oid": "009b92e3218af5c3a285adeb00591b214b90bedb"}, "closed": true, "closedAt": "2020-01-27T23:11:00Z", "author": {"login": "kcibul"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9Oz1kAH2gAyMzY2NTA3NTAwOmQwMjJhNGZhYzdhYTg0NDFmYjQyOWZhYmE2MzNiYjQ3NWZiYTQ0NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-lFpEgFqTM0OTAzOTk1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d022a4fac7aa8441fb429faba633bb475fba4442", "author": {"user": {"login": "kcibul", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d022a4fac7aa8441fb429faba633bb475fba4442", "committedDate": "2020-01-23T18:39:36Z", "message": "initial implementation of frequency table UDF"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDI4NDI5", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35#pullrequestreview-349028429", "createdAt": "2020-01-27T22:44:48Z", "commit": {"oid": "d022a4fac7aa8441fb429faba633bb475fba4442"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0NDo0OFrOFiUFuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0ODoxMVrOFiULEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNTA0OA==", "bodyText": "Add terminating new-line", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35#discussion_r371525048", "createdAt": "2020-01-27T22:44:48Z", "author": {"login": "ryanmcdowell"}, "path": "udfs/community/freq_table.sql", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION fn.freq_table(arr ANY TYPE) AS ((\n+  SELECT \n+    STRUCT(x as value, COUNT(1) as freq) as entry\n+  FROM UNNEST( arr ) AS x\n+  GROUP BY x\n+  ORDER BY x\n+));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d022a4fac7aa8441fb429faba633bb475fba4442"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNTE3Mg==", "bodyText": "Remove additional spaces around arr", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35#discussion_r371525172", "createdAt": "2020-01-27T22:45:04Z", "author": {"login": "ryanmcdowell"}, "path": "udfs/community/freq_table.sql", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION fn.freq_table(arr ANY TYPE) AS ((\n+  SELECT \n+    STRUCT(x as value, COUNT(1) as freq) as entry\n+  FROM UNNEST( arr ) AS x", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d022a4fac7aa8441fb429faba633bb475fba4442"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNjQxOA==", "bodyText": "2020", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35#discussion_r371526418", "createdAt": "2020-01-27T22:48:11Z", "author": {"login": "ryanmcdowell"}, "path": "udfs/community/freq_table.sql", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright 2019 Google LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d022a4fac7aa8441fb429faba633bb475fba4442"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ef473d18b7e78851cd92a9e38d62e75defb98f4", "author": {"user": {"login": "kcibul", "name": null}}, "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/0ef473d18b7e78851cd92a9e38d62e75defb98f4", "committedDate": "2020-01-27T22:55:06Z", "message": "addressed PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDM5OTU4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/35#pullrequestreview-349039958", "createdAt": "2020-01-27T23:10:53Z", "commit": {"oid": "0ef473d18b7e78851cd92a9e38d62e75defb98f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 757, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}