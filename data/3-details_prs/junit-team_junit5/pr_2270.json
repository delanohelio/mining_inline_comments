{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MTA0ODQz", "number": 2270, "title": "Execute explicitly selected classes regardless of class name filters", "bodyText": "Overview\nAdd explicitly selected classes from --select-class and --select-method to the include patterns passed when constructing the ClassNameFilter so that these are always executed regardless of the implicit or explicit class name filter.\nResolves #2259.\n\nI hereby agree to the terms of the JUnit Contributor License Agreement.\n\nDefinition of Done\n\n There are no TODOs left in the code\n Method preconditions are checked and documented in the method's Javadoc\n Coding conventions (e.g. for logging) have been followed\n Change is covered by automated tests including corner cases, errors, and exception handling\n Public API has Javadoc and @API annotations\n Change is documented in the User Guide and Release Notes\n All continuous integration builds pass", "createdAt": "2020-04-23T18:31:42Z", "url": "https://github.com/junit-team/junit5/pull/2270", "merged": true, "mergeCommit": {"oid": "a9eba2dda7b551459f21dbc91e4614c508c920db"}, "closed": true, "closedAt": "2020-05-02T15:53:27Z", "author": {"login": "juliette-derancourt"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcahJglAH2gAyNDA4MTA0ODQzOjY4NzMwNmQ0YmYwMzI0NjhjZTNkNGJmNGNlYjhlNDA4ODA5MDE1YTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcc9t9LAFqTQwNDA3NDM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "687306d4bf032468ce3d4bf4ceb8e408809015a2", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/687306d4bf032468ce3d4bf4ceb8e408809015a2", "committedDate": "2020-04-23T18:25:22Z", "message": "Add explicitly selected classes from --select-class and --select-method to the include patterns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e351b32e64fdd449491d3e4c110cca526b3c7b13", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/e351b32e64fdd449491d3e4c110cca526b3c7b13", "committedDate": "2020-04-23T18:35:10Z", "message": "Use `ReflectionUtils.parseFullyQualifiedMethodName()` for readability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea95ec2ba8b27c42052613315d9177520631cd94", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/ea95ec2ba8b27c42052613315d9177520631cd94", "committedDate": "2020-04-23T18:35:10Z", "message": "Extract recurring filter assertion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/eb41e46206a1447b0e0f0e3db21ff128b1862d01", "committedDate": "2020-04-23T18:35:10Z", "message": "Update release notes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b8522325a2bd5060f1614a4aced4c09430c5b56", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/3b8522325a2bd5060f1614a4aced4c09430c5b56", "committedDate": "2020-04-23T18:28:57Z", "message": "Update release notes"}, "afterCommit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/eb41e46206a1447b0e0f0e3db21ff128b1862d01", "committedDate": "2020-04-23T18:35:10Z", "message": "Update release notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzcyODQ3", "url": "https://github.com/junit-team/junit5/pull/2270#pullrequestreview-399372847", "createdAt": "2020-04-23T18:36:36Z", "commit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxODozNjozNlrOGK2iMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxODozNjozNlrOGK2iMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAzMjQzNQ==", "bodyText": "Not sure if this is a good idea... Might need a better name \ud83e\udd14", "url": "https://github.com/junit-team/junit5/pull/2270#discussion_r414032435", "createdAt": "2020-04-23T18:36:36Z", "author": {"login": "juliette-derancourt"}, "path": "platform-tests/src/test/java/org/junit/platform/console/tasks/DiscoveryRequestCreatorTests.java", "diffHunk": "@@ -282,6 +298,10 @@ private LauncherDiscoveryRequest convert() {\n \t\treturn creator.toDiscoveryRequest(options);\n \t}\n \n+\tprivate void assertFilters(Filter<?> filter, String filteredElement) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "originalPosition": 96}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzgwODAy", "url": "https://github.com/junit-team/junit5/pull/2270#pullrequestreview-400380802", "createdAt": "2020-04-25T10:31:33Z", "commit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxMDozMTozM1rOGLzqtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxMDo0OTowMVrOGLz1_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTAzNDAzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              provided with `--include-classname`.\n          \n          \n            \n              provided with `--include-classname` or the default class name pattern.", "url": "https://github.com/junit-team/junit5/pull/2270#discussion_r415034037", "createdAt": "2020-04-25T10:31:33Z", "author": {"login": "marcphilipp"}, "path": "documentation/src/docs/asciidoc/release-notes/release-notes-5.7.0-M2.adoc", "diffHunk": "@@ -23,7 +23,9 @@ on GitHub.\n \n ==== New Features and Improvements\n \n-* \u2753\n+* When using `ConsoleLauncher`, explicitly selected classes from `--select-class`\n+  and `--select-method` are now always executed regardless of class name patterns\n+  provided with `--include-classname`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTAzNjUzOA==", "bodyText": "We should quote the literal class names using Pattern.quote, e.g. like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate ClassNameFilter includedClassNamePatterns(CommandLineOptions patterns) {\n          \n          \n            \n            \t\tList<String> classNamePatterns = new ArrayList<>();\n          \n          \n            \n            \t\tclassNamePatterns.addAll(patterns.getIncludedClassNamePatterns());\n          \n          \n            \n            \t\tclassNamePatterns.addAll(patterns.getSelectedClasses());\n          \n          \n            \n            \t\tclassNamePatterns.addAll(patterns.getSelectedMethods().stream() //\n          \n          \n            \n            \t\t\t\t.map(name -> ReflectionUtils.parseFullyQualifiedMethodName(name)[0]) //\n          \n          \n            \n            \t\t\t\t.collect(Collectors.toList()));\n          \n          \n            \n            \t\treturn includeClassNamePatterns(classNamePatterns.toArray(new String[0]));\n          \n          \n            \n            \t}\n          \n          \n            \n            \tprivate ClassNameFilter includedClassNamePatterns(CommandLineOptions options) {\n          \n          \n            \n            \t\tStream<Stream<String>> patternStreams = Stream.of( //\n          \n          \n            \n            \t\t\toptions.getIncludedClassNamePatterns().stream(), //\n          \n          \n            \n            \t\t\toptions.getSelectedClasses().stream() //\n          \n          \n            \n            \t\t\t\t\t.map(Pattern::quote), //\n          \n          \n            \n            \t\t\toptions.getSelectedMethods().stream() //\n          \n          \n            \n            \t\t\t\t\t.map(name -> ReflectionUtils.parseFullyQualifiedMethodName(name)[0]) //\n          \n          \n            \n            \t\t\t\t\t.map(Pattern::quote));\n          \n          \n            \n            \t\treturn includeClassNamePatterns(patternStreams //\n          \n          \n            \n            \t\t\t\t.flatMap(Function.identity()) //\n          \n          \n            \n            \t\t\t\t.toArray(String[]::new));\n          \n          \n            \n            \t}", "url": "https://github.com/junit-team/junit5/pull/2270#discussion_r415036538", "createdAt": "2020-04-25T10:46:33Z", "author": {"login": "marcphilipp"}, "path": "junit-platform-console/src/main/java/org/junit/platform/console/tasks/DiscoveryRequestCreator.java", "diffHunk": "@@ -127,4 +129,14 @@ private void addFilters(LauncherDiscoveryRequestBuilder requestBuilder, CommandL\n \t\t}\n \t}\n \n+\tprivate ClassNameFilter includedClassNamePatterns(CommandLineOptions patterns) {\n+\t\tList<String> classNamePatterns = new ArrayList<>();\n+\t\tclassNamePatterns.addAll(patterns.getIncludedClassNamePatterns());\n+\t\tclassNamePatterns.addAll(patterns.getSelectedClasses());\n+\t\tclassNamePatterns.addAll(patterns.getSelectedMethods().stream() //\n+\t\t\t\t.map(name -> ReflectionUtils.parseFullyQualifiedMethodName(name)[0]) //\n+\t\t\t\t.collect(Collectors.toList()));\n+\t\treturn includeClassNamePatterns(classNamePatterns.toArray(new String[0]));\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTAzNjkyNQ==", "bodyText": "assertFilterDescriptionContains?\nShould we rather call the filter and check it includes/excludes the expected names?", "url": "https://github.com/junit-team/junit5/pull/2270#discussion_r415036925", "createdAt": "2020-04-25T10:49:01Z", "author": {"login": "marcphilipp"}, "path": "platform-tests/src/test/java/org/junit/platform/console/tasks/DiscoveryRequestCreatorTests.java", "diffHunk": "@@ -282,6 +298,10 @@ private LauncherDiscoveryRequest convert() {\n \t\treturn creator.toDiscoveryRequest(options);\n \t}\n \n+\tprivate void assertFilters(Filter<?> filter, String filteredElement) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAzMjQzNQ=="}, "originalCommit": {"oid": "eb41e46206a1447b0e0f0e3db21ff128b1862d01"}, "originalPosition": 96}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41aa3a2b07e45ec083407e2aa267d75777f0a74c", "author": {"user": {"login": "juliette-derancourt", "name": "Juliette de Rancourt"}}, "url": "https://github.com/junit-team/junit5/commit/41aa3a2b07e45ec083407e2aa267d75777f0a74c", "committedDate": "2020-04-26T15:49:08Z", "message": "Improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDc0MzUy", "url": "https://github.com/junit-team/junit5/pull/2270#pullrequestreview-404074352", "createdAt": "2020-05-01T08:50:22Z", "commit": {"oid": "41aa3a2b07e45ec083407e2aa267d75777f0a74c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3525, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}