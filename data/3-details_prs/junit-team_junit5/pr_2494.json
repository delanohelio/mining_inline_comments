{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwNzEwNzEw", "number": 2494, "title": "Fix compiler warnings", "bodyText": "Overview\nFixes existing Java/Kotlin compiler warnings and makes all compile tasks fail on warnings from now on.\n\nI hereby agree to the terms of the JUnit Contributor License Agreement.\n\nDefinition of Done\n\n There are no TODOs left in the code\n Method preconditions are checked and documented in the method's Javadoc\n Coding conventions (e.g. for logging) have been followed\n Change is covered by automated tests including corner cases, errors, and exception handling\n Public API has Javadoc and @API annotations\n Change is documented in the User Guide and Release Notes\n All continuous integration builds pass", "createdAt": "2020-12-15T20:53:47Z", "url": "https://github.com/junit-team/junit5/pull/2494", "merged": true, "mergeCommit": {"oid": "637a78393194737e77d6f9681ad93e9ddac1f399"}, "closed": true, "closedAt": "2020-12-16T07:40:21Z", "author": {"login": "marcphilipp"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmgp9YgH2gAyNTQwNzEwNzEwOjMxMWE1MzY0MzE4Y2JiYzBkNmU5NTFkMDc2ZDBkNjY3M2JkNWRiYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmh4OLAFqTU1Mjk1ODg3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "311a5364318cbbc0d6e951d076d0d6673bd5dbc5", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/311a5364318cbbc0d6e951d076d0d6673bd5dbc5", "committedDate": "2020-12-15T20:49:09Z", "message": "Fix Kotlin compiler warnings in buildSrc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9db010eddf26feefcde98c183f29a8082517cb37", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/9db010eddf26feefcde98c183f29a8082517cb37", "committedDate": "2020-12-15T20:49:59Z", "message": "Add default constructors explicitly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/f150e5e4ad0270de8077302b5e19091c9533dbda", "committedDate": "2020-12-15T20:50:17Z", "message": "Fix Kotlin compiler warning in test code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyODU5Njk3", "url": "https://github.com/junit-team/junit5/pull/2494#pullrequestreview-552859697", "createdAt": "2020-12-15T20:54:12Z", "commit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMDo1NDoxM1rOIGfhzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMDo1NDoxM1rOIGfhzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY3ODkyNQ==", "bodyText": "We didn't mean for the default constructor to be public, did we?", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543678925", "createdAt": "2020-12-15T20:54:13Z", "author": {"login": "marcphilipp"}, "path": "junit-platform-engine/src/main/java/org/junit/platform/engine/reporting/ReportEntry.java", "diffHunk": "@@ -35,6 +36,14 @@\n \tprivate final LocalDateTime timestamp = LocalDateTime.now();\n \tprivate final Map<String, String> keyValuePairs = new LinkedHashMap<>();\n \n+\t/**\n+\t * @deprecated Use {@link #from(String, String)} or {@link #from(Map)}\n+\t */\n+\t@API(status = DEPRECATED, since = \"5.8\")\n+\t@Deprecated\n+\tpublic ReportEntry() {\n+\t}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyOTEzNzc2", "url": "https://github.com/junit-team/junit5/pull/2494#pullrequestreview-552913776", "createdAt": "2020-12-15T21:32:45Z", "commit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMTozMjo0NVrOIGg6Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMTozMjo0NVrOIGg6Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcwMTU1OQ==", "bodyText": "I do not recall properly, whether this was intentional.\nIn hindsight, it seems to be an accident rather than explicitly designed this way.", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543701559", "createdAt": "2020-12-15T21:32:45Z", "author": {"login": "mmerdes"}, "path": "junit-platform-engine/src/main/java/org/junit/platform/engine/reporting/ReportEntry.java", "diffHunk": "@@ -35,6 +36,14 @@\n \tprivate final LocalDateTime timestamp = LocalDateTime.now();\n \tprivate final Map<String, String> keyValuePairs = new LinkedHashMap<>();\n \n+\t/**\n+\t * @deprecated Use {@link #from(String, String)} or {@link #from(Map)}\n+\t */\n+\t@API(status = DEPRECATED, since = \"5.8\")\n+\t@Deprecated\n+\tpublic ReportEntry() {\n+\t}\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY3ODkyNQ=="}, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyOTU4ODc3", "url": "https://github.com/junit-team/junit5/pull/2494#pullrequestreview-552958877", "createdAt": "2020-12-15T22:02:29Z", "commit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjowMjoyOVrOIGh_IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxNDowN1rOIGiX2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcxOTIwMQ==", "bodyText": "Any particular reason why this option is turned on? I understand it's to silence warnings about using experimental features of the Kotlin compiler, but it's not clear to me what warnings need to be silenced here.", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543719201", "createdAt": "2020-12-15T22:02:29Z", "author": {"login": "jbduncan"}, "path": "buildSrc/build.gradle.kts", "diffHunk": "@@ -14,3 +16,13 @@ dependencies {\n \timplementation(\"com.github.jengelman.gradle.plugins:shadow:6.1.0\")\n \timplementation(\"org.gradle:test-retry-gradle-plugin:1.2.0\")\n }\n+\n+kotlinDslPluginOptions {\n+\texperimentalWarning.set(false)\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcxOTM0Nw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543719347", "createdAt": "2020-12-15T22:02:44Z", "author": {"login": "jbduncan"}, "path": "buildSrc/src/main/kotlin/java-library-conventions.gradle.kts", "diffHunk": "@@ -155,9 +155,9 @@ val compileModule by tasks.registering(JavaCompile::class) {\n \tclasspath = files()\n \toptions.release.set(9)\n \toptions.compilerArgs.addAll(listOf(\n-\t\t\t// \"-verbose\",\n \t\t\t// Suppress warnings for automatic modules: org.apiguardian.api, org.opentest4j\n \t\t\t\"-Xlint:all,-requires-automatic,-requires-transitive-automatic\",\n+\t\t\t\"-Werror\", // Terminates compilation when warnings occur.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcxOTk2MA==", "bodyText": "I'm curious, what warning does it report if this change isn't made?", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543719960", "createdAt": "2020-12-15T22:03:56Z", "author": {"login": "jbduncan"}, "path": "buildSrc/src/main/kotlin/java-repackage-jars.gradle.kts", "diffHunk": "@@ -2,15 +2,16 @@ import java.util.jar.JarEntry\n import java.util.jar.JarFile\n import java.util.jar.JarOutputStream\n import org.gradle.api.internal.file.archive.ZipCopyAction\n+import java.nio.file.Files\n \n // This registers a `doLast` action to rewrite the timestamps of the project's output JAR\n afterEvaluate {\n \tval jarTask = (tasks.findByName(\"shadowJar\") ?: tasks[\"jar\"]) as Jar\n \n \tjarTask.doLast {\n \n-\t\tval newFile = createTempFile(\"rewrite-timestamp\")\n-\t\tval originalOutput = jarTask.archiveFile.get().getAsFile()\n+\t\tval newFile = Files.createTempFile(\"rewrite-timestamp\", null).toFile()\n+\t\tval originalOutput = jarTask.archiveFile.get().asFile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMjQ4Mw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543722483", "createdAt": "2020-12-15T22:08:37Z", "author": {"login": "jbduncan"}, "path": "buildSrc/src/main/kotlin/kotlin-library-conventions.gradle.kts", "diffHunk": "@@ -10,5 +10,6 @@ tasks.withType<KotlinCompile>().configureEach {\n \t\tjvmTarget = Versions.jvmTarget.toString()\n \t\tapiVersion = \"1.3\"\n \t\tlanguageVersion = \"1.3\"\n+\t\tallWarningsAsErrors = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMjgyOA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543722828", "createdAt": "2020-12-15T22:09:13Z", "author": {"login": "jbduncan"}, "path": "buildSrc/build.gradle.kts", "diffHunk": "@@ -14,3 +16,13 @@ dependencies {\n \timplementation(\"com.github.jengelman.gradle.plugins:shadow:6.1.0\")\n \timplementation(\"org.gradle:test-retry-gradle-plugin:1.2.0\")\n }\n+\n+kotlinDslPluginOptions {\n+\texperimentalWarning.set(false)\n+}\n+\n+tasks.withType<KotlinCompile>().configureEach {\n+\tkotlinOptions {\n+\t\tallWarningsAsErrors = true\n+\t}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyNTUzMQ==", "bodyText": "I assume that this constructor is needed by -Werror, right?", "url": "https://github.com/junit-team/junit5/pull/2494#discussion_r543725531", "createdAt": "2020-12-15T22:14:07Z", "author": {"login": "jbduncan"}, "path": "junit-jupiter-api/src/main/java/org/junit/jupiter/api/DisplayNameGenerator.java", "diffHunk": "@@ -92,6 +92,9 @@ static String parameterTypesAsString(Method method) {\n \n \t\tstatic final DisplayNameGenerator INSTANCE = new Standard();\n \n+\t\tpublic Standard() {\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f150e5e4ad0270de8077302b5e19091c9533dbda"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3492, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}