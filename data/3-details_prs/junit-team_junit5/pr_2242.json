{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MTIyNzYw", "number": 2242, "title": "Reuse Launcher orchestration in EngineTestKit", "bodyText": "Resolves #2109.\n\nDefinition of Done\n\n There are no TODOs left in the code\n Method preconditions are checked and documented in the method's Javadoc\n Coding conventions (e.g. for logging) have been followed\n Change is covered by automated tests including corner cases, errors, and exception handling\n Public API has Javadoc and @API annotations\n Change is documented in the User Guide and Release Notes\n All continuous integration builds pass", "createdAt": "2020-04-05T15:06:32Z", "url": "https://github.com/junit-team/junit5/pull/2242", "merged": true, "mergeCommit": {"oid": "07c678d92e1ba49e0fcf8584df9ffea7fe7c46c7"}, "closed": true, "closedAt": "2020-04-19T15:00:24Z", "author": {"login": "marcphilipp"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcU-oQRgFqTM4ODI0MjQ3OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZLz4ogH2gAyMzk5MTIyNzYwOjI5N2Y3YzgyM2FjMmQ4NDYwOGE5MjVjMTM1Yjg5MGU2YmViZDQ2YTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MjQyNDc5", "url": "https://github.com/junit-team/junit5/pull/2242#pullrequestreview-388242479", "createdAt": "2020-04-06T13:22:38Z", "commit": {"oid": "d2d28430bacdfdcd4536f7f838d608b79617a3ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMzoyMjozOFrOGBXb-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMzoyMjozOFrOGBXb-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg==", "bodyText": "@marcphilipp Oops, looks like the code was not formatted properly.", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404085752", "createdAt": "2020-04-06T13:22:38Z", "author": {"login": "jbduncan"}, "path": "junit-platform-launcher/src/main/java/org/junit/platform/launcher/core/EngineDiscoveryOrchestrator.java", "diffHunk": "@@ -0,0 +1,155 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junit.platform.launcher.core;\n+\n+import static java.util.stream.Collectors.joining;\n+import static org.apiguardian.api.API.Status.INTERNAL;\n+import static org.junit.platform.engine.Filter.composeFilters;\n+\n+import java.util.LinkedHashMap;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import org.apiguardian.api.API;\n+import org.junit.platform.commons.JUnitException;\n+import org.junit.platform.commons.logging.Logger;\n+import org.junit.platform.commons.logging.LoggerFactory;\n+import org.junit.platform.commons.util.BlacklistedExceptions;\n+import org.junit.platform.engine.Filter;\n+import org.junit.platform.engine.FilterResult;\n+import org.junit.platform.engine.TestDescriptor;\n+import org.junit.platform.engine.TestEngine;\n+import org.junit.platform.engine.UniqueId;\n+import org.junit.platform.launcher.EngineDiscoveryResult;\n+import org.junit.platform.launcher.LauncherDiscoveryListener;\n+import org.junit.platform.launcher.LauncherDiscoveryRequest;\n+import org.junit.platform.launcher.PostDiscoveryFilter;\n+\n+/**\n+ * @since 1.7\n+ */\n+@API(status = INTERNAL, since = \"1.7\", consumers = \"testkit\")\n+public class EngineDiscoveryOrchestrator {\n+\n+\tprivate static final Logger logger = LoggerFactory.getLogger(EngineDiscoveryOrchestrator.class);\n+\n+\tprivate final EngineDiscoveryResultValidator discoveryResultValidator = new EngineDiscoveryResultValidator();\n+\tprivate final Iterable<TestEngine> testEngines;\n+\n+\tpublic EngineDiscoveryOrchestrator(Iterable<TestEngine> testEngines) {\n+\t\tthis.testEngines = testEngines;\n+\t}\n+\n+\tpublic LauncherDiscoveryResult discover(LauncherDiscoveryRequest request, String phase) {\n+\t\tMap<TestEngine, TestDescriptor> testEngineDescriptors = new LinkedHashMap<>();\n+\n+\t\tfor (TestEngine testEngine : this.testEngines) {\n+\t\t\t// @formatter:off\n+            boolean engineIsExcluded = request.getEngineFilters().stream()\n+                    .map(engineFilter -> engineFilter.apply(testEngine))\n+                    .anyMatch(FilterResult::excluded);\n+            // @formatter:on", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2d28430bacdfdcd4536f7f838d608b79617a3ef"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4d67351873ad73eae4e4b54e5773c779de1958d", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/a4d67351873ad73eae4e4b54e5773c779de1958d", "committedDate": "2020-04-19T11:57:09Z", "message": "Reuse Launcher orchestration in EngineTestKit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac6248c3bbf9edcb15c349390fbdf8c930480c2b", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/ac6248c3bbf9edcb15c349390fbdf8c930480c2b", "committedDate": "2020-04-19T11:57:10Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8856a6e91eb3f70259d7bee02c05ed46a9fb546", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/e8856a6e91eb3f70259d7bee02c05ed46a9fb546", "committedDate": "2020-04-19T11:57:10Z", "message": "Deprecate existing methods and introduce new ones"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10326806f956dae4f27486f948c8535dca589b1f", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/10326806f956dae4f27486f948c8535dca589b1f", "committedDate": "2020-04-19T11:57:47Z", "message": "Document changes in release notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "259d6c1f6c0e423f1193b847180315438ac53c18", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/259d6c1f6c0e423f1193b847180315438ac53c18", "committedDate": "2020-04-19T11:57:47Z", "message": "Adjust docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd4359a7299b046b6a69f44e9227eba8b53b4bf0", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/fd4359a7299b046b6a69f44e9227eba8b53b4bf0", "committedDate": "2020-04-19T11:57:47Z", "message": "Polishing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20b87bb3563572edab49de302f0068bbdf4fe46a", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/20b87bb3563572edab49de302f0068bbdf4fe46a", "committedDate": "2020-04-19T11:57:47Z", "message": "Revert rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd2c203a6e57cd2bbaed36f4897a270009b630a7", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/dd2c203a6e57cd2bbaed36f4897a270009b630a7", "committedDate": "2020-04-19T11:57:47Z", "message": "Polishing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "989f891951536b0a6ecdbc95856dade291bcf5cb", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/989f891951536b0a6ecdbc95856dade291bcf5cb", "committedDate": "2020-04-19T11:57:48Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91d11b50bfa9ff1288894d5493459433ec5c26b7", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/91d11b50bfa9ff1288894d5493459433ec5c26b7", "committedDate": "2020-04-19T11:57:48Z", "message": "Spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f147078e804d1b09b6a0a1cf4de93449f11a29ab", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/f147078e804d1b09b6a0a1cf4de93449f11a29ab", "committedDate": "2020-04-19T11:57:48Z", "message": "Fix test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b7eb8013cc7dd9fea8fb774454cdae22c00b628", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/7b7eb8013cc7dd9fea8fb774454cdae22c00b628", "committedDate": "2020-04-19T11:50:37Z", "message": "Merge branch 'master' into issues/2109-launcher-orchestration-testkit"}, "afterCommit": {"oid": "f147078e804d1b09b6a0a1cf4de93449f11a29ab", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/f147078e804d1b09b6a0a1cf4de93449f11a29ab", "committedDate": "2020-04-19T11:57:48Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "297f7c823ac2d84608a925c135b890e6bebd46a7", "author": {"user": {"login": "marcphilipp", "name": "Marc Philipp"}}, "url": "https://github.com/junit-team/junit5/commit/297f7c823ac2d84608a925c135b890e6bebd46a7", "committedDate": "2020-04-19T14:59:49Z", "message": "Merge branch 'master' into issues/2109-launcher-orchestration-testkit"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3510, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}