{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MjkxMTgz", "number": 6970, "title": "Fix could not connect to LO on Mac OSX", "bodyText": "Tested with LO 7.  Apparently it's necessary to add the \"real\" soffice dir  as well to the UrlClassLoader classpath\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-10-03T15:12:32Z", "url": "https://github.com/JabRef/jabref/pull/6970", "merged": true, "mergeCommit": {"oid": "e13fa8b5d016a406639e677cd278718f30ef2171"}, "closed": true, "closedAt": "2020-10-03T21:03:40Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdO8D1YAH2gAyNDk3MjkxMTgzOjliZWI0M2NmMDU0ZjkxZGIwMzZhMTcyMDIwYjE0ZjY0NTcyY2Q2MTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPBAj4gH2gAyNDk3MjkxMTgzOjM4NTY0MDViNDhmODlkODU5ZjIyM2NiZjViM2MzMDM1NjdlMTlmNzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9beb43cf054f91db036a172020b14f64572cd611", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/9beb43cf054f91db036a172020b14f64572cd611", "committedDate": "2020-10-03T15:10:40Z", "message": "Fix could not connect to LO on Mac OSX\n\nRefactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/539b827eda7dcc6b228929ad81e2762e02d79624", "committedDate": "2020-10-03T15:18:21Z", "message": "add link to pr"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTcyNDc3", "url": "https://github.com/JabRef/jabref/pull/6970#pullrequestreview-501572477", "createdAt": "2020-10-03T20:31:09Z", "commit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QyMDozMTowOVrOHcDgjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QyMDozMjo0NVrOHcDg8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3OTY2MA==", "bodyText": "see one line above - we put the dot before the number of the issue.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934).\n          \n          \n            \n            - We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog. [#6934](https://github.com/JabRef/jabref/issues/6934)", "url": "https://github.com/JabRef/jabref/pull/6970#discussion_r499179660", "createdAt": "2020-10-03T20:31:09Z", "author": {"login": "koppor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -42,8 +42,9 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed the failure to Copy citation key and link. [#5835](https://github.com/JabRef/jabref/issues/5835)\n - We fixed an issue where the sort order of the entry table was reset after a restart of JabRef. [#6898](https://github.com/JabRef/jabref/pull/6898)\n - We fixed an issue where no longer a warning was displayed when inserting references into LibreOffice with an invalid \"ReferenceParagraphFormat\". [#6907](https://github.com/JabRef/jabref/pull/60907).\n-- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934)\n-- We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906)\n+- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3OTY4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906).\n          \n          \n            \n            - We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog. [6906](https://github.com/JabRef/jabref/issues/6906)", "url": "https://github.com/JabRef/jabref/pull/6970#discussion_r499179687", "createdAt": "2020-10-03T20:31:40Z", "author": {"login": "koppor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -42,8 +42,9 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed the failure to Copy citation key and link. [#5835](https://github.com/JabRef/jabref/issues/5835)\n - We fixed an issue where the sort order of the entry table was reset after a restart of JabRef. [#6898](https://github.com/JabRef/jabref/pull/6898)\n - We fixed an issue where no longer a warning was displayed when inserting references into LibreOffice with an invalid \"ReferenceParagraphFormat\". [#6907](https://github.com/JabRef/jabref/pull/60907).\n-- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934)\n-- We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906)\n+- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934).\n+- We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3OTY5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We fixed an issue where it was impossible to connect to OpenOffice/LibreOffice on Mac OSX [#6970](https://github.com/JabRef/jabref/pull/6970).\n          \n          \n            \n            - We fixed an issue where it was impossible to connect to OpenOffice/LibreOffice on Mac OSX. [#6970](https://github.com/JabRef/jabref/pull/6970)", "url": "https://github.com/JabRef/jabref/pull/6970#discussion_r499179695", "createdAt": "2020-10-03T20:31:50Z", "author": {"login": "koppor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -42,8 +42,9 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed the failure to Copy citation key and link. [#5835](https://github.com/JabRef/jabref/issues/5835)\n - We fixed an issue where the sort order of the entry table was reset after a restart of JabRef. [#6898](https://github.com/JabRef/jabref/pull/6898)\n - We fixed an issue where no longer a warning was displayed when inserting references into LibreOffice with an invalid \"ReferenceParagraphFormat\". [#6907](https://github.com/JabRef/jabref/pull/60907).\n-- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934)\n-- We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906)\n+- We fixed an issue where a selected field was not removed after the first click in the custom entry types dialog [#6934](https://github.com/JabRef/jabref/issues/6934).\n+- We fixed an issue where a remove icon was shown for standard entry types in the custom entry types dialog [6906](https://github.com/JabRef/jabref/issues/6906).\n+- We fixed an issue where it was impossible to connect to OpenOffice/LibreOffice on Mac OSX [#6970](https://github.com/JabRef/jabref/pull/6970).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3OTc2Mg==", "bodyText": "Please add a Logger statement here so that strange cases can be debugged.", "url": "https://github.com/JabRef/jabref/pull/6970#discussion_r499179762", "createdAt": "2020-10-03T20:32:45Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/openoffice/OpenOfficeFileSearch.java", "diffHunk": "@@ -33,19 +37,17 @@\n     }\n \n     private static List<Path> findOpenOfficeDirectories(List<Path> programDirectories) {\n-        List<Path> result = new ArrayList<>();\n \n-        for (Path programDir : programDirectories) {\n-            File[] subDirs = programDir.toFile().listFiles(File::isDirectory);\n-            if (subDirs != null) {\n-                for (File dir : subDirs) {\n-                    if (dir.getPath().toLowerCase(Locale.ROOT).contains(\"openoffice\") || dir.getPath().toLowerCase(Locale.ROOT).contains(\"libreoffice\")) {\n-                        result.add(dir.toPath());\n-                    }\n-                }\n+        BiPredicate<Path, BasicFileAttributes> filePredicate = (path, attr) -> attr.isDirectory() && (path.toString().toLowerCase(Locale.ROOT).contains(\"openoffice\")\n+                                                                               || path.toString().toLowerCase(Locale.ROOT).contains(\"libreoffice\"));\n+\n+        return programDirectories.stream().flatMap(dirs -> {\n+            try {\n+                return Files.find(dirs, 1, filePredicate);\n+            } catch (IOException e) {\n+                return Stream.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b997075024e6839ecc96613bfcdcc73033487537", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/b997075024e6839ecc96613bfcdcc73033487537", "committedDate": "2020-10-03T20:46:06Z", "message": "Update CHANGELOG.md\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5e4f747f64012fc6eb569b9600bb39777b69533", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/d5e4f747f64012fc6eb569b9600bb39777b69533", "committedDate": "2020-10-03T20:46:14Z", "message": "Update CHANGELOG.md\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a8ddf54638cada9efa69a582dd8d869e7a1653", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/a5a8ddf54638cada9efa69a582dd8d869e7a1653", "committedDate": "2020-10-03T20:49:08Z", "message": "Merge branch 'master' into fixLOMac"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "237cff7b16c22490f4cb4ae310ff7decf6200fc0", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/237cff7b16c22490f4cb4ae310ff7decf6200fc0", "committedDate": "2020-10-03T20:52:00Z", "message": "add Logger for exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3856405b48f89d859f223cbf5b3c303567e19f72", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/3856405b48f89d859f223cbf5b3c303567e19f72", "committedDate": "2020-10-03T20:56:37Z", "message": "fix changelog dot"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 13, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}