{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjg3NTg1", "number": 6788, "title": "Fix cleanup Field formatters not working when enabled", "bodyText": "Fixes #6787\nThe problem orginally comes from here:\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/commonfxcontrols/FieldFormatterCleanupsPanel.java\n    \n    \n         Line 109\n      in\n      4e220f6\n    \n    \n    \n    \n\n        \n          \n           cleanupsEnabled.selectedProperty().bindBidirectional(cleanupsDisableProperty()); \n        \n    \n  \n\n\nUnfortuantely it's not possible to add a not() there directly\nThe method bindBidirectional(Property) in the type BooleanProperty is not applicable for the arguments (BooleanBinding)\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-08-24T18:20:34Z", "url": "https://github.com/JabRef/jabref/pull/6788", "merged": true, "mergeCommit": {"oid": "92161afe61ae2513fb9bafb3816bde979172b0b5"}, "closed": true, "closedAt": "2020-08-26T20:02:58Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCGyO_gH2gAyNDcyNjg3NTg1OjRhYzE4ZGQ3NDkwNzI3NGI0NDBhMjAwNGQxN2YwOGNkM2U3NjM4MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCyj1ugFqTQ3NTg2NjIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ac18dd74907274b440a2004d17f08cd3e763836", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/4ac18dd74907274b440a2004d17f08cd3e763836", "committedDate": "2020-08-24T18:19:23Z", "message": "Fix cleanup Field formatters not working when enabled\n\nFixes #6787"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d300612074102bc0108d466f6e6097ed6c843bd4", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/d300612074102bc0108d466f6e6097ed6c843bd4", "committedDate": "2020-08-24T18:57:56Z", "message": "Add not to cleanupsDisableProperty instead of removing the negation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af79732c01953e288b8a082ffcd628885c8e7a16", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/af79732c01953e288b8a082ffcd628885c8e7a16", "committedDate": "2020-08-25T06:02:19Z", "message": "Update CleanupPresetPanel.java\n\ncheckstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b93388d4e36bfa8a1557d4061fe580adfdf7bbec", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/b93388d4e36bfa8a1557d4061fe580adfdf7bbec", "committedDate": "2020-08-26T19:32:51Z", "message": "Refactored to clean solution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152", "committedDate": "2020-08-26T19:34:11Z", "message": "Removed unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODY2MjMz", "url": "https://github.com/JabRef/jabref/pull/6788#pullrequestreview-475866233", "createdAt": "2020-08-26T21:17:49Z", "commit": {"oid": "433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMToxNzo1MFrOHHeFaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMToxNzo1MFrOHHeFaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU5NDk4NA==", "bodyText": "Please replace this custom binding with https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/BindingsHelper.java#L62\nThe manual listeners may result in a race condition, where the update of cleanupsDisableProperty results in an update of cleanupsEnabled which then again updates cleanupsDisableProperty  etc. To prevent this, a locked update mechanism is used in the above bindBidirection: https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/BindingsHelper.java#L227", "url": "https://github.com/JabRef/jabref/pull/6788#discussion_r477594984", "createdAt": "2020-08-26T21:17:50Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/commonfxcontrols/FieldFormatterCleanupsPanel.java", "diffHunk": "@@ -106,7 +106,13 @@ private void setupCombos() {\n     }\n \n     private void setupBindings() {\n-        cleanupsEnabled.selectedProperty().bindBidirectional(cleanupsDisableProperty());\n+        // cannot bindBidirectional, because viewModel.cleanupsDisableProperty().not() provides a read only\n+        // BooleanBinding, but bindBidirectional requires a simple BooleanProperty\n+        cleanupsEnabled.selectedProperty().addListener((observableValue, oldValue, newValue) ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 114, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}