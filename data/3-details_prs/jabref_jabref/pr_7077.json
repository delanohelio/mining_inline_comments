{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MjUxMTYy", "number": 7077, "title": "Fix preview settings not saved due to l10n", "bodyText": "Introduce internal name for finding layout\nFixes #6447\nThe problem was that the getName method returned a l10n name for Custom Preview layout.....\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-11-05T18:16:03Z", "url": "https://github.com/JabRef/jabref/pull/7077", "merged": true, "mergeCommit": {"oid": "2f27dd3c68cce231aef9125e213d06a5641132e0"}, "closed": true, "closedAt": "2020-11-06T08:36:09Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZmeEvgH2gAyNTE2MjUxMTYyOjFiYjJkNzI4NzhlZWM4MDA4OGQ2NGM5NTNkY2EwZWVmYmQ0MmI0OTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZyWgtgH2gAyNTE2MjUxMTYyOjQ1YWM3M2ZlNjE0NTcyYzcyMzhlZjgwYzAzNDg2ZWMyY2IyZmEzYmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1bb2d72878eec80088d64c953dca0eefbd42b490", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/1bb2d72878eec80088d64c953dca0eefbd42b490", "committedDate": "2020-11-05T18:14:35Z", "message": "Fix preview settings not saved due to l10n\n\nIntroduce internal name for finding layout\nFixes #6447"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzAxNTY1", "url": "https://github.com/JabRef/jabref/pull/7077#pullrequestreview-524701565", "createdAt": "2020-11-05T21:52:47Z", "commit": {"oid": "1bb2d72878eec80088d64c953dca0eefbd42b490"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTo1Mjo0N1rOHuYIYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTo1NTozMFrOHuYNYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM5MTkwNg==", "bodyText": "Does patternmatching with instanceof already work?\n            if (getCurrentLayout() instanceof TextBasedPreviewLayout currentLayout) {", "url": "https://github.com/JabRef/jabref/pull/7077#discussion_r518391906", "createdAt": "2020-11-05T21:52:47Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/preferences/PreviewTabViewModel.java", "diffHunk": "@@ -91,8 +91,9 @@ public PreviewTabViewModel(DialogService dialogService, PreferencesService prefe\n         initialPreviewPreferences = preferences.getPreviewPreferences();\n \n         sourceTextProperty.addListener((observable, oldValue, newValue) -> {\n-            if (getCurrentLayout() instanceof TextBasedPreviewLayout) {\n-                ((TextBasedPreviewLayout) getCurrentLayout()).setText(sourceTextProperty.getValue().replace(\"\\n\", \"__NEWLINE__\"));\n+            var currentLayout = getCurrentLayout();\n+            if (currentLayout instanceof TextBasedPreviewLayout) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bb2d72878eec80088d64c953dca0eefbd42b490"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM5MzE4NQ==", "bodyText": "I would suggest you use getDisplayName() instead of getName() and getName() instead of getInternalName()", "url": "https://github.com/JabRef/jabref/pull/7077#discussion_r518393185", "createdAt": "2020-11-05T21:55:30Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/logic/layout/TextBasedPreviewLayout.java", "diffHunk": "@@ -54,6 +55,11 @@ public String getText() {\n         return text;\n     }\n \n+    @Override\n+    public String getInternalName() {\n+        return NAME;\n+    }\n+\n     @Override\n     public String getName() {\n         return Localization.lang(\"Customized preview style\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bb2d72878eec80088d64c953dca0eefbd42b490"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ac73fe614572c7238ef80c03486ec2cb2fa3bc", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/45ac73fe614572c7238ef80c03486ec2cb2fa3bc", "committedDate": "2020-11-06T08:05:11Z", "message": "rename getInternalName"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4958, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}