{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODQzMDg3", "number": 6746, "title": "Fix entry gets deleted after aux import", "bodyText": "Set changed flag on clone also for Misc entry type, because otherwise it equals the default entry type and no change is triggered which results in the entry not beeing written to the database on save\nFixes  #6405\nSimplify gui code\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-08-07T21:34:13Z", "url": "https://github.com/JabRef/jabref/pull/6746", "merged": true, "mergeCommit": {"oid": "ec5371281cd4d53f6c0bea9c84ebf20073f618ca"}, "closed": true, "closedAt": "2020-08-18T06:22:04Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8rYHmAH2gAyNDY0ODQzMDg3Ojc4ODU1ZDM0YmYxNzg4ZDMyYTVlZDY1N2I2MGE3MmJiN2RmMjExNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_5KHegH2gAyNDY0ODQzMDg3OjQ4YzU3NDYzM2ZkY2E1MDVkZGYwYjQyNjZmZGUxMDE3NDIyMDg5ZDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "78855d34bf1788d32a5ed657b60a72bb7df21176", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/78855d34bf1788d32a5ed657b60a72bb7df21176", "committedDate": "2020-08-07T21:33:48Z", "message": "Fix entry gets deleted after aux import\n\nSet changed flag on clone also for Misc entry type, because otherwise it equals the default entry type and no change is triggered which results in the entry not beeing written to the database on save\nFixes  #6405\n\nSimplify gui code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57822179bb5a8e6d1273eb42b4c0bf5f0143551c", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/57822179bb5a8e6d1273eb42b4c0bf5f0143551c", "committedDate": "2020-08-07T21:36:59Z", "message": "add changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7f21ff636614d5391de24314273341d5d2f1800", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/e7f21ff636614d5391de24314273341d5d2f1800", "committedDate": "2020-08-07T21:39:16Z", "message": "fix checkstyle shit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjU4NDAw", "url": "https://github.com/JabRef/jabref/pull/6746#pullrequestreview-463658400", "createdAt": "2020-08-07T21:50:37Z", "commit": {"oid": "78855d34bf1788d32a5ed657b60a72bb7df21176"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTo1MDozN1rOG9pe2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTo1MDo1OFrOG9pf4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI5NTk2MQ==", "bodyText": "I would doubt that this fixed the issue for the other types. -- When the entry type is Article, the clone is unchanged, too. Thus, no serialization written", "url": "https://github.com/JabRef/jabref/pull/6746#discussion_r467295961", "createdAt": "2020-08-07T21:50:37Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/model/entry/BibEntry.java", "diffHunk": "@@ -603,10 +604,15 @@ public boolean allFieldsPresent(Collection<OrFields> fields, BibDatabase databas\n     /**\n      * Returns a clone of this entry. Useful for copying.\n      * This will set a new ID for the cloned entry to be able to distinguish both copies.\n+     * Ensures that the changed flag is set when the entry type equals the default entry type Misc\n      */\n     @Override\n     public Object clone() {\n         BibEntry clone = new BibEntry(type.getValue());\n+        if (StandardEntryType.Misc.equals(type.getValue())) {\n+            clone.changed = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78855d34bf1788d32a5ed657b60a72bb7df21176"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI5NjIyNw==", "bodyText": "Isn't it possible to clone the serializatio, too. Then, the issue should be fixed?", "url": "https://github.com/JabRef/jabref/pull/6746#discussion_r467296227", "createdAt": "2020-08-07T21:50:58Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/model/entry/BibEntry.java", "diffHunk": "@@ -603,10 +604,15 @@ public boolean allFieldsPresent(Collection<OrFields> fields, BibDatabase databas\n     /**\n      * Returns a clone of this entry. Useful for copying.\n      * This will set a new ID for the cloned entry to be able to distinguish both copies.\n+     * Ensures that the changed flag is set when the entry type equals the default entry type Misc\n      */\n     @Override\n     public Object clone() {\n         BibEntry clone = new BibEntry(type.getValue());\n+        if (StandardEntryType.Misc.equals(type.getValue())) {\n+            clone.changed = true;\n+        }\n+\n         clone.fields = FXCollections.observableMap(new ConcurrentHashMap<>(fields));\n         return clone;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78855d34bf1788d32a5ed657b60a72bb7df21176"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd4bd171eb2ef5d3001ac7aa4418bce3158798b3", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/dd4bd171eb2ef5d3001ac7aa4418bce3158798b3", "committedDate": "2020-08-07T22:42:33Z", "message": "copy serialization on clone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzg4MTAz", "url": "https://github.com/JabRef/jabref/pull/6746#pullrequestreview-463788103", "createdAt": "2020-08-08T08:17:00Z", "commit": {"oid": "dd4bd171eb2ef5d3001ac7aa4418bce3158798b3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwODoxNzowMVrOG9u9vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwODoyMDo1N1rOG9vFDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM4NTc4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We fixed an entry where entries with the entry type Misc from an imported aux file would not be saved correctly to the bib file on disk [#6405](https://github.com/JabRef/jabref/issues/6405)\n          \n          \n            \n            - We fixed an issue where entries with the entry type Misc from an imported aux file would not be saved correctly to the bib file on disk [#6405](https://github.com/JabRef/jabref/issues/6405)", "url": "https://github.com/JabRef/jabref/pull/6746#discussion_r467385789", "createdAt": "2020-08-08T08:17:01Z", "author": {"login": "tobiasdiez"}, "path": "CHANGELOG.md", "diffHunk": "@@ -97,6 +97,7 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed an issue with the creation of a group of cited entries. Now the file path to an aux file gets validated. [#6585](https://github.com/JabRef/jabref/issues/6585)\n - We fixed an issue on Linux systems where the application would crash upon inotify failure. Now, the user is prompted with a warning, and given the choice to continue the session. [#6073](https://github.com/JabRef/jabref/issues/6073)\n - We moved the search modifier buttons into the search bar, as they were not accessible, if autocompletion was disabled. [#6625](https://github.com/JabRef/jabref/issues/6625)\n+- We fixed an entry where entries with the entry type Misc from an imported aux file would not be saved correctly to the bib file on disk [#6405](https://github.com/JabRef/jabref/issues/6405)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4bd171eb2ef5d3001ac7aa4418bce3158798b3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM4NzY2MQ==", "bodyText": "I wouldn't update the changed flag. The clone method should really clone the original entry, without any modifications (otherwise its not a clone).\nHowever, the aux importer should set the changed flag of all entries (regardless of type), so that they get properly reformatted when writing them to disc (i.e. not using the parsed serialization of the original bib file).", "url": "https://github.com/JabRef/jabref/pull/6746#discussion_r467387661", "createdAt": "2020-08-08T08:20:57Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/model/entry/BibEntry.java", "diffHunk": "@@ -603,10 +604,15 @@ public boolean allFieldsPresent(Collection<OrFields> fields, BibDatabase databas\n     /**\n      * Returns a clone of this entry. Useful for copying.\n      * This will set a new ID for the cloned entry to be able to distinguish both copies.\n+     * Ensures that the changed flag is set when the entry type equals the default entry type Misc\n      */\n     @Override\n     public Object clone() {\n         BibEntry clone = new BibEntry(type.getValue());\n+        if (StandardEntryType.Misc.equals(type.getValue())) {\n+            clone.changed = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI5NTk2MQ=="}, "originalCommit": {"oid": "78855d34bf1788d32a5ed657b60a72bb7df21176"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "576274863396224d5678ae1067ad9d320b0fc4a7", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/576274863396224d5678ae1067ad9d320b0fc4a7", "committedDate": "2020-08-08T16:25:48Z", "message": "Update CHANGELOG.md\n\nCo-authored-by: Tobias Diez <tobiasdiez@gmx.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cddea1e96b58efb87f4dc97da11b0c258383a08f", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/cddea1e96b58efb87f4dc97da11b0c258383a08f", "committedDate": "2020-08-17T19:53:00Z", "message": "Merge branch 'master' into auximport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43eb864af6acfec79ae0c6002c389cceaee49461", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/43eb864af6acfec79ae0c6002c389cceaee49461", "committedDate": "2020-08-17T20:01:06Z", "message": "Cosmetic change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5def342b22ecc2777b4cc162b18b4bc0509041e7", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/5def342b22ecc2777b4cc162b18b4bc0509041e7", "committedDate": "2020-08-17T20:56:44Z", "message": "Fix clone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48c574633fdca505ddf0b4266fde1017422089d4", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/48c574633fdca505ddf0b4266fde1017422089d4", "committedDate": "2020-08-17T21:18:57Z", "message": "Mark each entry changed to trigger a \"proper\" write by JabRef"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 80, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}