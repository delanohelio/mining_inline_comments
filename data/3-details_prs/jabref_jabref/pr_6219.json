{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1NTMxMTk5", "number": 6219, "title": "Fix edition test", "bodyText": "Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for bigger UI changes)\n Checked documentation: Is the information available and up to date? If not: Issue created at https://github.com/JabRef/user-documentation/issues.", "createdAt": "2020-03-30T09:43:26Z", "url": "https://github.com/JabRef/jabref/pull/6219", "merged": true, "mergeCommit": {"oid": "1fb45c657acc6c3fda66ca9076ae793bda58781e"}, "closed": true, "closedAt": "2020-03-30T20:16:13Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSrSv_gH2gAyMzk1NTMxMTk5OjczZjM0OWRjMzM5NWEyMjBkODcwYzM3NjhlYmMxYTJlNTBlYjI5NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSzznFgH2gAyMzk1NTMxMTk5OjFmOTQwOGNiOTc3N2E5YTg0YzhhMzI3ODFhZDgyYWQ3ODk1MTc2YjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73f349dc3395a220d870c3768ebc1a2e50eb2957", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/73f349dc3395a220d870c3768ebc1a2e50eb2957", "committedDate": "2020-03-30T09:43:07Z", "message": "Fix edition test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eef9cd9078fcbb3c8da36e23f5192e4e2b411d5", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/7eef9cd9078fcbb3c8da36e23f5192e4e2b411d5", "committedDate": "2020-03-30T09:46:06Z", "message": "Fix some formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cc71c0a8476a3b4ab5beb02b3c7b52b681d85f6", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/5cc71c0a8476a3b4ab5beb02b3c7b52b681d85f6", "committedDate": "2020-03-30T10:16:51Z", "message": "Merge remote-tracking branch 'upstream/master' into fixEditionTest\n\n* upstream/master:\n  Bump jython-standalone from 2.7.1 to 2.7.2 (#6209)\n  Bump org.beryx.jlink from 2.17.3 to 2.17.4 (#6214)\n  Bump checkstyle from 8.30 to 8.31 (#6215)\n  Fix typos and grammar mistakes in teaching.md (#6216)\n  Delete tests-oracle.yml (#6217)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNzMyMjg4", "url": "https://github.com/JabRef/jabref/pull/6219#pullrequestreview-383732288", "createdAt": "2020-03-30T10:42:32Z", "commit": {"oid": "5cc71c0a8476a3b4ab5beb02b3c7b52b681d85f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDo0MjozMlrOF9jy8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDo0MjozMlrOF9jy8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzkzOQ==", "bodyText": "The error message says that the first LETTER should be capitalized.\nONLY_NUMBERALS tests for numbers. Numbers are not letters.\nThus, I think, testing for numbers is wrong here.\nThe old condidion in plain English (which is IMHO right):\nIn case the edition contains some letters, check that the first letter is capitalized.\nThe new condidion reads:\nIn case the text consists of numbers only, then check if nubmers are DISALLOWED.\n(In other words: If there are numbers and they are disabled)\nThen check whether the first letter is capitalized (side comment: A number is never capitalized (according to the regex at FIRST_LETTER_CAPITALIZED))\nI think, the new condidion does not make sense at it mixes numbers and letters.", "url": "https://github.com/JabRef/jabref/pull/6219#discussion_r400093939", "createdAt": "2020-03-30T10:42:32Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/integrity/EditionChecker.java", "diffHunk": "@@ -54,7 +52,7 @@ public EditionChecker(BibDatabaseContext bibDatabaseContext, boolean allowIntege\n             if (!isFirstCharDigit(value) && (!allowIntegerEdition) && !FIRST_LETTER_CAPITALIZED.test(value.trim())) {\n                 return Optional.of(Localization.lang(\"should have the first letter capitalized\"));\n             } else {\n-                if (!ONLY_NUMERALS.test(value.trim()) && !FIRST_LETTER_CAPITALIZED.test(value.trim())) {\n+                if (ONLY_NUMERALS.test(value.trim()) && (!allowIntegerEdition) && !FIRST_LETTER_CAPITALIZED.test(value.trim())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cc71c0a8476a3b4ab5beb02b3c7b52b681d85f6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8329cb93b2f79e1e94272de2ea802fa3ca59eb98", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/8329cb93b2f79e1e94272de2ea802fa3ca59eb98", "committedDate": "2020-03-30T11:03:38Z", "message": "remove superlous check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f9408cb9777a9a84c8a32781ad82ad7895176b5", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/1f9408cb9777a9a84c8a32781ad82ad7895176b5", "committedDate": "2020-03-30T19:38:15Z", "message": "Rewrite EditionChecker to use return not followed by else"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 299, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}