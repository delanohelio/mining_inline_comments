{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NTkxMzg3", "number": 6871, "title": "fixed 'copy key and link'", "bodyText": "'copy key and link' from right-click menu creates a string that is not a url. it includes the url, but it also includes the key.\nsetHtmlContent() was not appropriate.\nFixes  #5835\n#5835\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-09-04T11:19:36Z", "url": "https://github.com/JabRef/jabref/pull/6871", "merged": true, "mergeCommit": {"oid": "2d92025db43082434d9fe45693420fcd4808b959"}, "closed": true, "closedAt": "2020-09-29T06:54:23Z", "author": {"login": "PremKolar"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFjRj_gH2gAyNDc5NTkxMzg3Ojg2NWM4ZjI4ZDZkMzQ2N2U5OGY1ZjQwMzRmNDExOTc3NmQzNjYzYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNiegwgH2gAyNDc5NTkxMzg3OmNlNTA1MzY0ZTQ0YjllOTdiYjg5NDc3M2M5OGNjMTAwYWY4NjIwMTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "865c8f28d6d3467e98f5f4034f4119776d3663b3", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/865c8f28d6d3467e98f5f4034f4119776d3663b3", "committedDate": "2020-09-04T11:12:43Z", "message": "'copy key and link' from right-click menu creates a string that is not a url. it includes the url, but it also includes the key... it works now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04843f02cb3eedbcd08f1e283806c42a56903c4d", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/04843f02cb3eedbcd08f1e283806c42a56903c4d", "committedDate": "2020-09-04T15:16:23Z", "message": "updated authorlist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7e3a172694c75de918b95c50cbec59480d264c7", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/e7e3a172694c75de918b95c50cbec59480d264c7", "committedDate": "2020-09-04T15:26:03Z", "message": "added entry to change log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTM0NzQ0", "url": "https://github.com/JabRef/jabref/pull/6871#pullrequestreview-482934744", "createdAt": "2020-09-04T20:55:44Z", "commit": {"oid": "e7e3a172694c75de918b95c50cbec59480d264c7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDo1NTo0NVrOHNbRjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDo1NTo0NVrOHNbRjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0MDM5OQ==", "bodyText": "This really puts the html string into the clipboard, so if you paste it into say notepad you get <a href=\"url\">key</a>. Instead, its better to add the html, and in addition also a fallback string of the format key - url. In this way, you get the desired behavior also when you paste in applications that do understand html (e.g onenote).\nIn order for this to work, you probably need to add a second fallback argument to\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/ClipBoardManager.java\n    \n    \n        Lines 140 to 145\n      in\n      3db4313\n    \n    \n    \n    \n\n        \n          \n           public void setHtmlContent(String html) { \n        \n\n        \n          \n               final ClipboardContent content = new ClipboardContent(); \n        \n\n        \n          \n               content.putHtml(html); \n        \n\n        \n          \n               clipboard.setContent(content); \n        \n\n        \n          \n               setPrimaryClipboardContent(content); \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nwhich is then added to the ClipboardContent via putString.", "url": "https://github.com/JabRef/jabref/pull/6871#discussion_r483840399", "createdAt": "2020-09-04T20:55:45Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/edit/CopyMoreAction.java", "diffHunk": "@@ -224,7 +224,7 @@ private void copyKeyAndLink() {\n             keyAndLink.append(OS.NEWLINE);\n         }\n \n-        clipBoardManager.setHtmlContent(keyAndLink.toString());\n+        clipBoardManager.setContent(keyAndLink.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7e3a172694c75de918b95c50cbec59480d264c7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77fed3145e408143ab76930aba5173ba46897436", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/77fed3145e408143ab76930aba5173ba46897436", "committedDate": "2020-09-05T20:55:44Z", "message": "'copy key and link' now sets html content again and also sets a fallback string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MzY5MTgy", "url": "https://github.com/JabRef/jabref/pull/6871#pullrequestreview-488369182", "createdAt": "2020-09-15T06:43:18Z", "commit": {"oid": "77fed3145e408143ab76930aba5173ba46897436"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo0MzoxOVrOHRy-fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo0NDoxOFrOHRzAOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQyMzAzOQ==", "bodyText": "Please remove the comment", "url": "https://github.com/JabRef/jabref/pull/6871#discussion_r488423039", "createdAt": "2020-09-15T06:43:19Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/ClipBoardManager.java", "diffHunk": "@@ -144,6 +144,15 @@ public void setHtmlContent(String html) {\n         setPrimaryClipboardContent(content);\n     }\n \n+    //@overload", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77fed3145e408143ab76930aba5173ba46897436"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQyMzQ4Mw==", "bodyText": "Please fix checkstyle\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    clipBoardManager.setHtmlContent(keyAndLink.toString(),fallbackString.toString());\n          \n          \n            \n                    clipBoardManager.setHtmlContent(keyAndLink.toString(), fallbackString.toString());", "url": "https://github.com/JabRef/jabref/pull/6871#discussion_r488423483", "createdAt": "2020-09-15T06:44:18Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/edit/CopyMoreAction.java", "diffHunk": "@@ -222,9 +223,11 @@ private void copyKeyAndLink() {\n             String url = entry.getField(StandardField.URL).orElse(\"\");\n             keyAndLink.append(url.isEmpty() ? key : String.format(\"<a href=\\\"%s\\\">%s</a>\", url, key));\n             keyAndLink.append(OS.NEWLINE);\n+            fallbackString.append(url.isEmpty() ? key : String.format(\"%s - %s\", key, url));\n+            fallbackString.append(OS.NEWLINE);\n         }\n \n-        clipBoardManager.setHtmlContent(keyAndLink.toString());\n+        clipBoardManager.setHtmlContent(keyAndLink.toString(),fallbackString.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77fed3145e408143ab76930aba5173ba46897436"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "409a4162c7189165d92886fc8d9b8e2c29fc0946", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/409a4162c7189165d92886fc8d9b8e2c29fc0946", "committedDate": "2020-09-15T07:43:23Z", "message": "Update src/main/java/org/jabref/gui/edit/CopyMoreAction.java\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d022875ba0e9e02e16722b73897126c8fd79946b", "author": {"user": {"login": "PremKolar", "name": "Nikolaus Koopmann"}}, "url": "https://github.com/JabRef/jabref/commit/d022875ba0e9e02e16722b73897126c8fd79946b", "committedDate": "2020-09-17T19:25:29Z", "message": "Merge branch 'master' into #5835_copyKeyAndLink"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMTQ4MDIw", "url": "https://github.com/JabRef/jabref/pull/6871#pullrequestreview-491148020", "createdAt": "2020-09-18T04:46:58Z", "commit": {"oid": "d022875ba0e9e02e16722b73897126c8fd79946b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNDo0Njo1OFrOHT97Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNDo0Njo1OFrOHT97Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY5OTU2Mw==", "bodyText": "Please do not delete CHANGELOG headers", "url": "https://github.com/JabRef/jabref/pull/6871#discussion_r490699563", "createdAt": "2020-09-18T04:46:58Z", "author": {"login": "koppor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -34,12 +34,12 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed an issue where the `.sav` file was not deleted upon exiting JabRef. [#6109](https://github.com/JabRef/jabref/issues/6109)\n - We fixed a linked identifier icon inconsistency. [#6705](https://github.com/JabRef/jabref/issues/6705)\n - We fixed the wrong behavior that font size changes are not reflected in dialogs. [#6039](https://github.com/JabRef/jabref/issues/6039)\n+- We fixed the failure to Copy citation key and link. [#5835](https://github.com/JabRef/jabref/issues/5835)\n - We fixed an issue where the sort order of the entry table was reset after a restart of JabRef. [#6898](https://github.com/JabRef/jabref/pull/6898)\n - We fixed an issue where no longer a warning was displayed when inserting references into LibreOffice with an invalid \"ReferenceParagraphFormat\". [#6907](https://github.com/JabRef/jabref/pull/60907).\n \n ### Removed\n \n-## [5.1] \u2013 2020-08-30", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d022875ba0e9e02e16722b73897126c8fd79946b"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2449d2a56e73290a6465177f679301888b768315", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/2449d2a56e73290a6465177f679301888b768315", "committedDate": "2020-09-29T06:32:47Z", "message": "CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce505364e44b9e97bb894773c98cc100af862013", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/ce505364e44b9e97bb894773c98cc100af862013", "committedDate": "2020-09-29T06:48:21Z", "message": "Remove obsolete method\n\nRemove obsolete method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 155, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}