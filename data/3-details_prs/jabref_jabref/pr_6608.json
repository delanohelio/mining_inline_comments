{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MDI1MTkw", "number": 6608, "title": "Fix downloaded files moved to citation key dir", "bodyText": "Fixes #6589\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-06-13T16:14:22Z", "url": "https://github.com/JabRef/jabref/pull/6608", "merged": true, "mergeCommit": {"oid": "ed96faa350ebb32c504aede1440879bd9c781557"}, "closed": true, "closedAt": "2020-06-15T05:41:18Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcq51oOAH2gAyNDM0MDI1MTkwOmVjNDkxMWI0MDVhNzM5ZWMwYjg3ZDllNjJhOGRhMDE4ZWZiMDU0MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrZ7K-gFqTQzMDMzMzIwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ec4911b405a739ec0b87d9e62a8da018efb05410", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/ec4911b405a739ec0b87d9e62a8da018efb05410", "committedDate": "2020-06-13T16:14:04Z", "message": "Fix dowmloaded files moved to citaiton key dir"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2d7b16f437ce21df6730c5c5666e2d98af13668", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/f2d7b16f437ce21df6730c5c5666e2d98af13668", "committedDate": "2020-06-13T16:22:49Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjAyMzE1", "url": "https://github.com/JabRef/jabref/pull/6608#pullrequestreview-430202315", "createdAt": "2020-06-14T09:26:54Z", "commit": {"oid": "f2d7b16f437ce21df6730c5c5666e2d98af13668"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQwOToyNjo1NFrOGjb2kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQwOToyNjo1NFrOGjb2kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwOTY4Mw==", "bodyText": "Are there some typos? (doesNotMoveFile)", "url": "https://github.com/JabRef/jabref/pull/6608#discussion_r439809683", "createdAt": "2020-06-14T09:26:54Z", "author": {"login": "systemoperator"}, "path": "src/test/java/org/jabref/logic/cleanup/MoveFilesCleanupTest.java", "diffHunk": "@@ -111,6 +111,19 @@ void movesFileWithFileDirPattern() throws Exception {\n         assertTrue(Files.exists(fileAfter));\n     }\n \n+    @Test\n+    void doesNotmMovesFileWithEmptyFileDirPattern() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2d7b16f437ce21df6730c5c5666e2d98af13668"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9570255f72d5d0e8d0bdd836c54c01b860ff419", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/e9570255f72d5d0e8d0bdd836c54c01b860ff419", "committedDate": "2020-06-14T14:44:10Z", "message": "Update MoveFilesCleanupTest.java\n\nFix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8449243c39eb4e2b6ce7a580c67b70dd496dac33", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/8449243c39eb4e2b6ce7a580c67b70dd496dac33", "committedDate": "2020-06-14T14:44:51Z", "message": "Update FileUtilTest.java\n\nFix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjQ4Mjc2", "url": "https://github.com/JabRef/jabref/pull/6608#pullrequestreview-430248276", "createdAt": "2020-06-14T20:22:32Z", "commit": {"oid": "8449243c39eb4e2b6ce7a580c67b70dd496dac33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjUxNjg4", "url": "https://github.com/JabRef/jabref/pull/6608#pullrequestreview-430251688", "createdAt": "2020-06-14T21:16:07Z", "commit": {"oid": "8449243c39eb4e2b6ce7a580c67b70dd496dac33"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMToxNjowN1rOGjfbXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMToxNjo0N1rOGjfbjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg2ODI1NQ==", "bodyText": "Can this line be removed? Seems to be a copy and paste issue.", "url": "https://github.com/JabRef/jabref/pull/6608#discussion_r439868255", "createdAt": "2020-06-14T21:16:07Z", "author": {"login": "koppor"}, "path": "src/test/java/org/jabref/logic/util/io/FileUtilTest.java", "diffHunk": "@@ -357,15 +357,26 @@ void invalidFilenameWithoutExtension() {\n     @Test\n     void testGetLinkedDirNameDefaultFullTitle() {\n         // bibkey - title\n-        String fileNamePattern = \"PDF/[year]/[auth]/[bibtexkey] - [fulltitle]\";\n+        String fileDirPattern = \"PDF/[year]/[auth]/[bibtexkey] - [fulltitle]\";\n         BibEntry entry = new BibEntry();\n         entry.setCiteKey(\"1234\");\n         entry.setField(StandardField.TITLE, \"mytitle\");\n         entry.setField(StandardField.YEAR, \"1998\");\n         entry.setField(StandardField.AUTHOR, \"A. \u00c5uth\u00f6r and Author, Bete\");\n \n-        assertEquals(\"PDF/1998/\u00c5uth\u00f6r/1234 - mytitle\",\n-                FileUtil.createDirNameFromPattern(null, entry, fileNamePattern));\n+        assertEquals(\"PDF/1998/\u00c5uth\u00f6r/1234 - mytitle\", FileUtil.createDirNameFromPattern(null, entry, fileDirPattern));\n+    }\n+\n+    @Test\n+    void testGetLinkedDirNamePatternEmpty() {\n+        // bibkey - title", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8449243c39eb4e2b6ce7a580c67b70dd496dac33"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg2ODMwMA==", "bodyText": "Wow, what a mistake in the code. I checked the method names and comment. The change seems to be valid.", "url": "https://github.com/JabRef/jabref/pull/6608#discussion_r439868300", "createdAt": "2020-06-14T21:16:47Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/util/io/FileUtil.java", "diffHunk": "@@ -284,7 +284,7 @@ public static String createDirNameFromPattern(BibDatabase database, BibEntry ent\n         String targetName = BracketedPattern.expandBrackets(directoryNamePattern, ';', entry, database);\n \n         if (targetName.isEmpty()) {\n-            targetName = entry.getCiteKeyOptional().orElse(\"default\");\n+            return targetName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8449243c39eb4e2b6ce7a580c67b70dd496dac33"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fff66d2234bfabff388fd967148cf1f37af2b6db", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/fff66d2234bfabff388fd967148cf1f37af2b6db", "committedDate": "2020-06-15T05:33:44Z", "message": "Update FileUtilTest.java\n\nRemove obsolete comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17cb5d43dfa5f916ea010a5547f74ef02a03657", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/f17cb5d43dfa5f916ea010a5547f74ef02a03657", "committedDate": "2020-06-15T05:36:02Z", "message": "Update FileUtilTest.java\n\nRevert previous change., remove right comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMzMzMjA0", "url": "https://github.com/JabRef/jabref/pull/6608#pullrequestreview-430333204", "createdAt": "2020-06-15T05:37:05Z", "commit": {"oid": "f17cb5d43dfa5f916ea010a5547f74ef02a03657"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 189, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}