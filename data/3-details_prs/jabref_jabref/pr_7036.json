{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4Mjc0MDQ0", "number": 7036, "title": "Added error msg when isbn entry was not found", "bodyText": "Fixes #7000\nAdded an error message that gets shown when the entered ISBN leads to no results on ebook.de and ottobib.\nScreenshot of change:\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-10-22T13:01:49Z", "url": "https://github.com/JabRef/jabref/pull/7036", "merged": true, "mergeCommit": {"oid": "590e2c3727ea3d6b6b872875c77ee0d16ae2b154"}, "closed": true, "closedAt": "2020-10-22T23:05:43Z", "author": {"login": "tmrd993"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVBhkcgH2gAyNTA4Mjc0MDQ0OmYzMWEyZDNhYmIxNDY5NzQyNzQzOGU2YjI1OTQ0ZmQ4NDI4ODRlZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVKOpxAFqTUxNTE3NzkwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f31a2d3abb14697427438e6b25944fd842884efd", "author": {"user": {"login": "tmrd993", "name": "Timucin Merdin"}}, "url": "https://github.com/JabRef/jabref/commit/f31a2d3abb14697427438e6b25944fd842884efd", "committedDate": "2020-10-22T12:56:13Z", "message": "add error msg when isbn entry not found"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODYyMTQ5", "url": "https://github.com/JabRef/jabref/pull/7036#pullrequestreview-514862149", "createdAt": "2020-10-22T15:36:28Z", "commit": {"oid": "f31a2d3abb14697427438e6b25944fd842884efd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTozNjoyOFrOHmn3XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo0MjoxNFrOHmoICw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI2MTA4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        LOGGER.error(\"ISBN \" + identifier + \" not found at ottobib\");\n          \n          \n            \n                        LOGGER.error(\"ISBN { } not found at ottobib\", identifier);\n          \n      \n    \n    \n  \n\nThis is the recommended way", "url": "https://github.com/JabRef/jabref/pull/7036#discussion_r510261084", "createdAt": "2020-10-22T15:36:28Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/importer/fetcher/IsbnViaOttoBibFetcher.java", "diffHunk": "@@ -58,6 +58,13 @@ public URL getUrlForIdentifier(String identifier) throws URISyntaxException, Mal\n             throw new FetcherException(\"Could not \", e);\n         }\n         Element textArea = html.select(\"textarea\").first();\n+\n+        // inspect the \"no results\" error message (if there is one)\n+        Element potentialErrorMessageDiv = html.select(\"div#flash-notice.notice.add-bottom\").first();\n+        if (potentialErrorMessageDiv.hasText() && potentialErrorMessageDiv.text().contains(\"No Results\")) {\n+            LOGGER.error(\"ISBN \" + identifier + \" not found at ottobib\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f31a2d3abb14697427438e6b25944fd842884efd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI2NTM1NQ==", "bodyText": "This is not the right place. You cannot put GUI code into logic/model classes.\nSee https://devdocs.jabref.org/getting-into-the-code/high-level-documentation\nThe right place to check if the results are empty would be here: Than you have it generic as well for all kind of fetchers\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/EntryTypeViewModel.java\n    \n    \n         Line 147\n      in\n      7f4c36c\n    \n    \n    \n    \n\n        \n          \n           Optional<BibEntry> result = fetcherWorker.getValue();", "url": "https://github.com/JabRef/jabref/pull/7036#discussion_r510265355", "createdAt": "2020-10-22T15:42:14Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/importer/fetcher/IsbnFetcher.java", "diffHunk": "@@ -59,6 +62,13 @@ public String getName() {\n             bibEntry = isbnViaOttoBibFetcher.performSearchById(identifier);\n         }\n \n+        // nothing found at ebook.de and ottobib\n+        if (!bibEntry.isPresent()) {\n+            FXDialog noEntryFoundDialog = new FXDialog(AlertType.ERROR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f31a2d3abb14697427438e6b25944fd842884efd"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1", "author": {"user": {"login": "tmrd993", "name": "Timucin Merdin"}}, "url": "https://github.com/JabRef/jabref/commit/06ff6968d94eea78f6f406be657effe103c275b1", "committedDate": "2020-10-22T19:50:05Z", "message": "move error dialog to EntryTypeViewModel, add changelog entry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDY5MzMy", "url": "https://github.com/JabRef/jabref/pull/7036#pullrequestreview-515069332", "createdAt": "2020-10-22T19:53:27Z", "commit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxOTo1MzoyN1rOHmxdwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxOTo1MzoyN1rOHmxdwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQxODM2OQ==", "bodyText": "Can I leave this error message or should it be unique?", "url": "https://github.com/JabRef/jabref/pull/7036#discussion_r510418369", "createdAt": "2020-10-22T19:53:27Z", "author": {"login": "tmrd993"}, "path": "src/main/java/org/jabref/gui/EntryTypeViewModel.java", "diffHunk": "@@ -176,6 +176,10 @@ public void runFetcherWorker() {\n                 searchSuccesfulProperty.set(true);\n             } else if (StringUtil.isBlank(idText.getValue())) {\n                 dialogService.showWarningDialogAndWait(Localization.lang(\"Empty search ID\"), Localization.lang(\"The given search ID was empty.\"));\n+            } else if (result.isEmpty()) {\n+                String fetcher = selectedItemProperty().getValue().getName();\n+                String searchId = idText.getValue();\n+                dialogService.showErrorDialogAndWait(Localization.lang(\"Fetcher '%0' did not find an entry for id '%1'.\", fetcher, searchId));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTIxNTQ0", "url": "https://github.com/JabRef/jabref/pull/7036#pullrequestreview-515121544", "createdAt": "2020-10-22T21:10:20Z", "commit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMToxMDoyMFrOHmz9dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMToxNTozMVrOHm0IEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ1OTI1NQ==", "bodyText": "Yes, looks good so far", "url": "https://github.com/JabRef/jabref/pull/7036#discussion_r510459255", "createdAt": "2020-10-22T21:10:20Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/EntryTypeViewModel.java", "diffHunk": "@@ -176,6 +176,10 @@ public void runFetcherWorker() {\n                 searchSuccesfulProperty.set(true);\n             } else if (StringUtil.isBlank(idText.getValue())) {\n                 dialogService.showWarningDialogAndWait(Localization.lang(\"Empty search ID\"), Localization.lang(\"The given search ID was empty.\"));\n+            } else if (result.isEmpty()) {\n+                String fetcher = selectedItemProperty().getValue().getName();\n+                String searchId = idText.getValue();\n+                dialogService.showErrorDialogAndWait(Localization.lang(\"Fetcher '%0' did not find an entry for id '%1'.\", fetcher, searchId));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQxODM2OQ=="}, "originalCommit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ2MTk3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We added an error message in the EntryTypeViewModel that gets displayed to the user if a fetched entry is empty. [#7000](https://github.com/JabRef/jabref/issues/7000)\n          \n          \n            \n            - We added an error message in the New Entry dialog that is shown in case the fetcher did not find anything . [#7000](https://github.com/JabRef/jabref/issues/7000)\n          \n      \n    \n    \n  \n\nThe changelog is more intended towards the normal end users of JabRef, so it should not be too technical.", "url": "https://github.com/JabRef/jabref/pull/7036#discussion_r510461970", "createdAt": "2020-10-22T21:15:31Z", "author": {"login": "Siedlerchr"}, "path": "CHANGELOG.md", "diffHunk": "@@ -19,6 +19,7 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We added a DOI format and organization check to detect [American Physical Society](https://journals.aps.org/) journals to copy the article ID\n to the page field for cases where the page numbers are missing. [#7019](https://github.com/JabRef/jabref/issues/7019)\n - We added a new fetcher to enable users to search jstor.org [#6627](https://github.com/JabRef/jabref/issues/6627)\n+- We added an error message in the EntryTypeViewModel that gets displayed to the user if a fetched entry is empty. [#7000](https://github.com/JabRef/jabref/issues/7000)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06ff6968d94eea78f6f406be657effe103c275b1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a951fa012ff1096df1c75dba2848ed870e09f59a", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/a951fa012ff1096df1c75dba2848ed870e09f59a", "committedDate": "2020-10-22T23:02:47Z", "message": "Update CHANGELOG.md\n\nCo-authored-by: Christoph <siedlerkiller@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTc3OTAx", "url": "https://github.com/JabRef/jabref/pull/7036#pullrequestreview-515177901", "createdAt": "2020-10-22T23:04:42Z", "commit": {"oid": "a951fa012ff1096df1c75dba2848ed870e09f59a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4939, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}