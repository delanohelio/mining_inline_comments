{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NTg1NzMx", "number": 7145, "title": "Add IdBasedSearchFetcher to jstor", "bodyText": "As discussed in #6627 (comment)\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-11-30T14:27:16Z", "url": "https://github.com/JabRef/jabref/pull/7145", "merged": true, "mergeCommit": {"oid": "706865f93ed536a6f6ec60cb637cdb1ee3e896be"}, "closed": true, "closedAt": "2020-12-01T07:23:32Z", "author": {"login": "joethei"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTUyLFAH2gAyNTI5NTg1NzMxOjYyMGMzNjFmNDZjNTRmNzE3OTFkYmJhYzM0MjY1YTAzZjFjZjc5NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh0uP_gFqTU0MTU0NDg4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "620c361f46c54f71791dbbac34265a03f1cf7956", "author": {"user": {"login": "joethei", "name": "Johannes Theiner"}}, "url": "https://github.com/JabRef/jabref/commit/620c361f46c54f71791dbbac34265a03f1cf7956", "committedDate": "2020-10-17T06:14:42Z", "message": "Merge pull request #2 from JabRef/master\n\nupdate fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b31b51eed56f08c4809aa4b3b78c76589982a8dc", "author": {"user": {"login": "joethei", "name": "Johannes Theiner"}}, "url": "https://github.com/JabRef/jabref/commit/b31b51eed56f08c4809aa4b3b78c76589982a8dc", "committedDate": "2020-11-25T07:49:14Z", "message": "Merge pull request #3 from JabRef/master\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39b1ce4685d026256296ea01ba361df0106fd941", "author": {"user": {"login": "joethei", "name": "Johannes Theiner"}}, "url": "https://github.com/JabRef/jabref/commit/39b1ce4685d026256296ea01ba361df0106fd941", "committedDate": "2020-11-30T14:24:22Z", "message": "add IdBasedParserFetcher to Jstor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "288c2aa8d5eafcb3233ee24641061cd796a28dfc", "author": {"user": {"login": "joethei", "name": "Johannes Theiner"}}, "url": "https://github.com/JabRef/jabref/commit/288c2aa8d5eafcb3233ee24641061cd796a28dfc", "committedDate": "2020-11-30T14:33:24Z", "message": "~fixing checkstyle erros"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTk1NjY2", "url": "https://github.com/JabRef/jabref/pull/7145#pullrequestreview-540995666", "createdAt": "2020-11-30T15:06:04Z", "commit": {"oid": "288c2aa8d5eafcb3233ee24641061cd796a28dfc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNTowNjowNVrOH7_RNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNTowNjowNVrOH7_RNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY2NDYyOQ==", "bodyText": "What did you had to change relative to the standard implementation?", "url": "https://github.com/JabRef/jabref/pull/7145#discussion_r532664629", "createdAt": "2020-11-30T15:06:05Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/logic/importer/fetcher/JstorFetcher.java", "diffHunk": "@@ -82,6 +84,46 @@ public URL getURLForQuery(ComplexSearchQuery query) throws URISyntaxException, M\n         return uriBuilder.build().toURL();\n     }\n \n+    @Override\n+    public URL getUrlForIdentifier(String identifier) throws FetcherException {\n+        String start = \"https://www.jstor.org/citation/text/\";\n+        if (identifier.startsWith(\"http\")) {\n+            identifier = identifier.replace(\"https://www.jstor.org/stable\", \"\");\n+            identifier = identifier.replace(\"http://www.jstor.org/stable\", \"\");\n+        }\n+        identifier = identifier.replaceAll(URL_QUERY_REGEX, \"\");\n+\n+        try {\n+            if (identifier.contains(\"/\")) {\n+                // if identifier links to a entry with a valid doi\n+                return new URL(start + identifier);\n+            }\n+            // else use default doi start.\n+            return new URL(start + \"10.2307/\" + identifier);\n+        } catch (IOException e) {\n+            throw new FetcherException(\"could not construct url for jstor\", e);\n+        }\n+    }\n+\n+    // overwriting default behaviour as that seems to always results in a 403", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "288c2aa8d5eafcb3233ee24641061cd796a28dfc"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e248249b6d4880849ccf59920c905551269ee8d", "author": {"user": {"login": "joethei", "name": "Johannes Theiner"}}, "url": "https://github.com/JabRef/jabref/commit/1e248249b6d4880849ccf59920c905551269ee8d", "committedDate": "2020-11-30T16:41:56Z", "message": "changing code to not override performSearchById"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMzMwODU0", "url": "https://github.com/JabRef/jabref/pull/7145#pullrequestreview-541330854", "createdAt": "2020-11-30T22:02:23Z", "commit": {"oid": "1e248249b6d4880849ccf59920c905551269ee8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNTI2NDgy", "url": "https://github.com/JabRef/jabref/pull/7145#pullrequestreview-541526482", "createdAt": "2020-12-01T06:42:31Z", "commit": {"oid": "1e248249b6d4880849ccf59920c905551269ee8d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNjo0MjozMVrOH8aIJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNjo0MjozMVrOH8aIJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzEwNDY3OA==", "bodyText": "Why did you overwrite this?", "url": "https://github.com/JabRef/jabref/pull/7145#discussion_r533104678", "createdAt": "2020-12-01T06:42:31Z", "author": {"login": "DominikVoigt"}, "path": "src/main/java/org/jabref/logic/importer/fetcher/JstorFetcher.java", "diffHunk": "@@ -133,4 +169,9 @@ public String getName() {\n     public TrustLevel getTrustLevel() {\n         return TrustLevel.META_SEARCH;\n     }\n+\n+    @Override\n+    public void doPostCleanup(BibEntry entry) {\n+        // do nothing\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e248249b6d4880849ccf59920c905551269ee8d"}, "originalPosition": 107}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNTQ0ODg2", "url": "https://github.com/JabRef/jabref/pull/7145#pullrequestreview-541544886", "createdAt": "2020-12-01T07:22:19Z", "commit": {"oid": "1e248249b6d4880849ccf59920c905551269ee8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4871, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}