{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwOTgzNDQx", "number": 6037, "title": "Implement Emacs key bindings", "bodyText": "Implement Emacs key bindings (fixes #6017)\nEmacs style key bindings are re-added to JabRef through the preferences\nmenu. The supported key bindings have feature parity with the previous\nimplementation in JabRef v<4, and additionally support any class that\nextends TextInputControl. In practice, this means that the new\nimplementation supports both TextFields and TextAreas by default. Some\nfunctionality may still be missing.\nCo-authored-by: Felix Luthman 34520175+felixlut@users.noreply.github.com\nCo-authored-by: Tommy Samuelsson Zodbigt@users.noreply.github.com\nCo-authored-by: muachilin 32566798+muachilin@users.noreply.github.com\nCo-authored-by: Kristoffer Gunnarsson kristoffergunnarsson47@gmail.com\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Checked documentation: Is the information available and up to date? If not: Issue created at https://github.com/JabRef/user-documentation/issues.", "createdAt": "2020-02-27T17:38:50Z", "url": "https://github.com/JabRef/jabref/pull/6037", "merged": true, "mergeCommit": {"oid": "82e555d931ef42aa45273de6723b6887a7c17b06"}, "closed": true, "closedAt": "2020-11-06T22:24:46Z", "author": {"login": "muachilin"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIeyuZAH2gAyMzgwOTgzNDQxOjFkNjhjNmUxNjFiMjdjOTgyZWJjYzJlNGEzNDZlYjhiMzgzYWMwNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZ-obigFqTUyNTUzMTg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071", "author": {"user": {"login": "stevensdavid", "name": "David Stevens"}}, "url": "https://github.com/JabRef/jabref/commit/1d68c6e161b27c982ebcc2e4a346eb8b383ac071", "committedDate": "2020-02-27T17:30:02Z", "message": "[feat] Implement Emacs key bindings\n\nEmacs style key bindings are re-added to JabRef through the preferences\nmenu. The supported key bindings have feature parity with the previous\nimplementation in JabRef v<4, and additionally support any class that\nextends TextInputControl. In practice, this means that the new\nimplementation supports both TextFields and TextAreas by default. Some\nfunctionality may still be missing\n\nCo-authored-by: Felix Luthman <34520175+felixlut@users.noreply.github.com>\nCo-authored-by: Tommy Samuelsson <Zodbigt@users.noreply.github.com>\nCo-authored-by: muachilin <32566798+muachilin@users.noreply.github.com>\nCo-authored-by: Kristoffer Gunnarsson <kristoffergunnarsson47@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f12069dc5483afb7e1b441280ca550fd5dd4a49", "author": {"user": {"login": "stevensdavid", "name": "David Stevens"}}, "url": "https://github.com/JabRef/jabref/commit/6f12069dc5483afb7e1b441280ca550fd5dd4a49", "committedDate": "2020-02-27T17:40:39Z", "message": "Merge branch 'master' into emacs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1ODY5OTcz", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-365869973", "createdAt": "2020-02-27T17:48:47Z", "commit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNzo0ODo0N1rOFvbDzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNzo1NjoyNVrOFvbUBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3MDczMw==", "bodyText": "Either you use the lamdba with keyBindinding.ifPresent(keybinding->...) or you extract the keyBinding.get() to a variable in the first if and reuse that. Less code duplication.\nAnd second, you are comparing enum values, they can be compared with == no need for equals\nAnd here is an explanation why: https://stackoverflow.com/a/2937561", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385270733", "createdAt": "2020-02-27T17:48:47Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/keyboard/EmacsKeyBindings.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.Globals;\n+import org.jabref.logic.util.strings.EmacsStringManipulator;\n+import org.jabref.model.util.ResultingEmacsState;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+public class EmacsKeyBindings {\n+\n+    public static void executeEmacs(Scene scene, KeyEvent event) {\n+        boolean EmacsFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS);\n+        if (EmacsFlag && scene.focusOwnerProperty().get() instanceof TextInputControl) {\n+            boolean CAFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CA);\n+            boolean CFFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CF);\n+            boolean CNFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CN);\n+            boolean AUFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_AU);\n+\n+            KeyBindingRepository keyBindingRepository = Globals.getKeyPrefs();\n+            TextInputControl focusedTextField = (TextInputControl) scene.focusOwnerProperty().get();\n+            Optional<KeyBinding> keyBinding = keyBindingRepository.mapToKeyBinding(event);\n+            if (keyBinding.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3MTkyOA==", "bodyText": "As you are using the \\\\w regex here multiple times it makes sense to compile it and use Pattern.compile(...) with a matcher then.", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385271928", "createdAt": "2020-02-27T17:50:54Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {\n+        UPPER,\n+        LOWER,\n+        CAPITALIZED\n+    }\n+\n+    private enum Direction {\n+        NEXT, PREVIOUS\n+    }\n+\n+    private static ResultingEmacsState setNextWordsCase(String text, int pos, LetterCase targetCase) {\n+        StringBuilder res = new StringBuilder();\n+\n+        boolean firstLetter = true;\n+        int i = pos;\n+        boolean firstLoop = true;\n+        StringBuilder newWordBuilder = new StringBuilder();\n+        for (; i < text.length(); i++) {\n+            // Swallow whitespace\n+            while (firstLoop && i < text.length() && !String.valueOf(text.charAt(i)).matches(\"\\\\w\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3MjYzNw==", "bodyText": "Is there a good reason why you made all those methods static?\nStatic methods are usually hard to test", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385272637", "createdAt": "2020-02-27T17:52:13Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {\n+        UPPER,\n+        LOWER,\n+        CAPITALIZED\n+    }\n+\n+    private enum Direction {\n+        NEXT, PREVIOUS\n+    }\n+\n+    private static ResultingEmacsState setNextWordsCase(String text, int pos, LetterCase targetCase) {\n+        StringBuilder res = new StringBuilder();\n+\n+        boolean firstLetter = true;\n+        int i = pos;\n+        boolean firstLoop = true;\n+        StringBuilder newWordBuilder = new StringBuilder();\n+        for (; i < text.length(); i++) {\n+            // Swallow whitespace\n+            while (firstLoop && i < text.length() && !String.valueOf(text.charAt(i)).matches(\"\\\\w\")) {\n+                newWordBuilder.append(text.charAt(i));\n+                i++;\n+            }\n+            if (i >= text.length()) {\n+                break;\n+            }\n+            if (firstLoop) {\n+                firstLoop = false;\n+            }\n+            char currentChar = text.charAt(i);\n+            if (String.valueOf(currentChar).matches(\"\\\\w\")) {\n+                switch (targetCase) {\n+                    case UPPER:\n+                        newWordBuilder.append(Character.toUpperCase(currentChar));\n+                        break;\n+                    case LOWER:\n+                        newWordBuilder.append(Character.toLowerCase(currentChar));\n+                        break;\n+                    case CAPITALIZED:\n+                        if (firstLetter) {\n+                            newWordBuilder.append(Character.toUpperCase(currentChar));\n+                            firstLetter = false;\n+                        } else {\n+                            newWordBuilder.append(Character.toLowerCase(currentChar));\n+                        }\n+                        break;\n+                }\n+            } else {\n+                // We have reached the word boundary.\n+                break;\n+            }\n+        }\n+        res.append(text, 0, pos);\n+        res.append(newWordBuilder);\n+        res.append(text, i, text.length());\n+\n+        return new ResultingEmacsState(i, res.toString());\n+    }\n+\n+    /**\n+     * Delete all characters in a string from the given position to the next word boundary.\n+     *\n+     * @param pos The index to start from.\n+     * @param text The text to manipulate.\n+     * @param dir The direction to search.\n+     * @return The resulting text.\n+     */\n+    public static ResultingEmacsState deleteUntilWordBoundary(int pos, String text, Direction dir) {\n+        StringBuilder res = new StringBuilder();\n+        int offset;\n+        int wordBreak;\n+        switch (dir) {\n+            case NEXT:\n+                res.append(text, 0, pos);\n+                offset = 1;\n+                wordBreak = text.length();\n+                break;\n+            case PREVIOUS:\n+                res.append(text, pos, text.length());\n+                offset = -1;\n+                wordBreak = 0;\n+                break;\n+            default:\n+                throw new AssertionError(\"Missing case in switch deleteUntilWordBoundary\");\n+        }\n+\n+        for (int i = pos; i < text.length() && i >= 0; i += offset) {\n+            if (i == pos) {\n+                // Swallow whitespace until we hit a word character or newline.\n+                while (i < text.length()\n+                        && i >= 0\n+                        && !String.valueOf(text.charAt(i)).matches(\"\\\\w|[\\\\r\\\\n]\")) {\n+                    i += offset;\n+                }\n+            }\n+            if (!(i < text.length() && i >= 0) || !String.valueOf(text.charAt(i)).matches(\"\\\\w\")) {\n+                wordBreak = i;\n+                break;\n+            }\n+        }\n+        int caretPosition;\n+        if (dir == Direction.NEXT) {\n+            res.append(text, wordBreak, text.length());\n+            // Since we deleted forward, we're in the right place already.\n+            caretPosition = pos;\n+\n+        } else {\n+            // Since we deleted backwards, we need to move the caret appropriately.\n+            // We need to protect against having stepped beyond the string during the while-loop.\n+            if (wordBreak != -1) {\n+                res.append(text, 0, wordBreak);\n+                caretPosition = wordBreak;\n+            } else {\n+                caretPosition = 0;\n+            }\n+        }\n+        return new ResultingEmacsState(caretPosition, res.toString());\n+    }\n+\n+    /**\n+     * Capitalize the next word on the right side of the cursor.\n+     *\n+     * @param pos the position of the cursor\n+     * @param text String to analyze\n+     * @return String the result text\n+     */\n+    public static ResultingEmacsState capitalize(int pos, String text) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3MzAwMQ==", "bodyText": "Too many empty lines here. Checkstyle will complain. No more than one empty line", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385273001", "createdAt": "2020-02-27T17:52:51Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/model/util/ResultingEmacsState.java", "diffHunk": "@@ -0,0 +1,12 @@\n+package org.jabref.model.util;\n+\n+public class ResultingEmacsState {\n+    public final int caretPos;\n+    public final String text;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3NDQ5NQ==", "bodyText": "I am not an Emacs user, is this the correct terminology? Does an Emacs user understand what is meant with that?", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385274495", "createdAt": "2020-02-27T17:55:42Z", "author": {"login": "Siedlerchr"}, "path": "src/main/resources/l10n/JabRef_en.properties", "diffHunk": "@@ -673,6 +673,14 @@ Quit\\ JabRef=Quit JabRef\n \n Read\\ only=Read only\n \n+Rebind\\ C-a,\\ too=Rebind C-a, too", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI3NDg4NQ==", "bodyText": "As mentionend earlier, I see no reason why this methods are static", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385274885", "createdAt": "2020-02-27T17:56:25Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {\n+        UPPER,\n+        LOWER,\n+        CAPITALIZED\n+    }\n+\n+    private enum Direction {\n+        NEXT, PREVIOUS\n+    }\n+\n+    private static ResultingEmacsState setNextWordsCase(String text, int pos, LetterCase targetCase) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88c16b61e7baf5d40ea9163eec6677c02b71f6cc", "author": {"user": {"login": "stevensdavid", "name": "David Stevens"}}, "url": "https://github.com/JabRef/jabref/commit/88c16b61e7baf5d40ea9163eec6677c02b71f6cc", "committedDate": "2020-02-27T20:01:25Z", "message": "Rename localized strings and fix checkstyle error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e", "author": {"user": {"login": "stevensdavid", "name": "David Stevens"}}, "url": "https://github.com/JabRef/jabref/commit/0c2f4b23fc9d42f3228923c330378e106da3462e", "committedDate": "2020-02-27T20:02:41Z", "message": "Merge branch 'emacs' of github.com:stevensdavid/jabref into emacs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTc1NDUx", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-365975451", "createdAt": "2020-02-27T20:29:07Z", "commit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMDoyOTowN1rOFvgJDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMDo1ODoyMVrOFvg9hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1Mzk5OQ==", "bodyText": "Please add a space after //", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385353999", "createdAt": "2020-02-27T20:29:07Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/JabRefGUI.java", "diffHunk": "@@ -87,6 +89,12 @@ private void openWindow(Stage mainStage) {\n         root.getChildren().add(JabRefGUI.mainFrame);\n \n         Scene scene = new Scene(root, 800, 800);\n+\n+        //Handle Emacs key bindings", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1NDE2MQ==", "bodyText": "Please start all variables with lower case names. Also applies to CAFlag -- maybe rename it to flagCA.", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385354161", "createdAt": "2020-02-27T20:29:31Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/EmacsKeyBindings.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.Globals;\n+import org.jabref.logic.util.strings.EmacsStringManipulator;\n+import org.jabref.model.util.ResultingEmacsState;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+public class EmacsKeyBindings {\n+\n+    public static void executeEmacs(Scene scene, KeyEvent event) {\n+        boolean EmacsFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1NjA0Mg==", "bodyText": "What is the reason for asking for Alt+U? Is that a special JabRef functionality?\nThe reason for the Rebind check boxes is for users with mixed Emacs and Windows shortcuts. And I never remember me typing Alt+U as shortcut (but Ctrl+A for seledct-all very often - also Ctrl+F for \"Find\")", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385356042", "createdAt": "2020-02-27T20:33:34Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/EmacsKeyBindings.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.Globals;\n+import org.jabref.logic.util.strings.EmacsStringManipulator;\n+import org.jabref.model.util.ResultingEmacsState;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+public class EmacsKeyBindings {\n+\n+    public static void executeEmacs(Scene scene, KeyEvent event) {\n+        boolean EmacsFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS);\n+        if (EmacsFlag && scene.focusOwnerProperty().get() instanceof TextInputControl) {\n+            boolean CAFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CA);\n+            boolean CFFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CF);\n+            boolean CNFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CN);\n+            boolean AUFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_AU);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1NjU3Nw==", "bodyText": "Please do\n} else  if ...", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385356577", "createdAt": "2020-02-27T20:34:49Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/EmacsKeyBindings.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.Globals;\n+import org.jabref.logic.util.strings.EmacsStringManipulator;\n+import org.jabref.model.util.ResultingEmacsState;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+public class EmacsKeyBindings {\n+\n+    public static void executeEmacs(Scene scene, KeyEvent event) {\n+        boolean EmacsFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS);\n+        if (EmacsFlag && scene.focusOwnerProperty().get() instanceof TextInputControl) {\n+            boolean CAFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CA);\n+            boolean CFFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CF);\n+            boolean CNFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CN);\n+            boolean AUFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_AU);\n+\n+            KeyBindingRepository keyBindingRepository = Globals.getKeyPrefs();\n+            TextInputControl focusedTextField = (TextInputControl) scene.focusOwnerProperty().get();\n+            Optional<KeyBinding> keyBinding = keyBindingRepository.mapToKeyBinding(event);\n+            if (keyBinding.isPresent()) {\n+                if (keyBinding.get().equals(KeyBinding.EMACS_DELETE)) {\n+                    focusedTextField.deletePreviousChar();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_BACKWARD)) {\n+                    focusedTextField.backward();\n+                    event.consume();\n+                } else if (CFFlag && keyBinding.get().equals(KeyBinding.EMACS_FORWARD)) {\n+                    focusedTextField.forward();\n+                    event.consume();\n+                } else if (CAFlag && keyBinding.get().equals(KeyBinding.EMACS_BEGINNING)) {\n+                    focusedTextField.home();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_END)) {\n+                    focusedTextField.end();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_BEGINNING_DOC)) {\n+                    focusedTextField.home();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_END_DOC)) {\n+                    focusedTextField.end();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_UP)) {\n+                    focusedTextField.home();\n+                    event.consume();\n+                } else if (CNFlag && keyBinding.get().equals(KeyBinding.EMACS_DOWN)) {\n+                    focusedTextField.end();\n+                    event.consume();\n+                } else if (keyBinding.get().equals(KeyBinding.EMACS_CAPITALIZE)) {\n+                    int pos = focusedTextField.getCaretPosition();\n+                    String text = focusedTextField.getText(0, focusedTextField.getText().length());\n+                    ResultingEmacsState res = EmacsStringManipulator.capitalize(pos, text);\n+                    focusedTextField.setText(res.text);\n+                    focusedTextField.positionCaret(res.caretPos);\n+                    event.consume();\n+                }\n+                else if (keyBinding.get().equals(KeyBinding.EMACS_LOWERCASE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1NzEzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                EMACS_KILLLINE(\"Emacs remove line\", Localization.lang(\"Remove line after caret\"), \"ctrl+K\", KeyBindingCategory.EDIT),\n          \n          \n            \n                EMACS_KILLLINE(\"Emacs remove all characters caret to end of line\", Localization.lang(\"Remove line after caret\"), \"ctrl+K\", KeyBindingCategory.EDIT),", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385357135", "createdAt": "2020-02-27T20:36:14Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -3,6 +3,21 @@\n import org.jabref.logic.l10n.Localization;\n \n public enum KeyBinding {\n+    EMACS_DELETE(\"Emacs delete\", Localization.lang(\"Delete text\"), \"ctrl+D\", KeyBindingCategory.EDIT),\n+    EMACS_BACKWARD(\"Emacs move caret left\", Localization.lang(\"Move caret left\"), \"ctrl+B\", KeyBindingCategory.EDIT),\n+    EMACS_FORWARD(\"Emacs move caret right\", Localization.lang(\"Move caret right\"), \"ctrl+F\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING(\"Emacs move caret to beginning of line\", Localization.lang(\"Move caret to beginning of line\"), \"ctrl+A\", KeyBindingCategory.EDIT),\n+    EMACS_END(\"Emacs move caret to  of line\", Localization.lang(\"Move caret to end of line\"), \"ctrl+E\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING_DOC(\"Emacs move caret to beginning of text\", Localization.lang(\"Move the caret to the beginning of text\"), \"alt+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_END_DOC(\"Emacs move caret to end of text\", Localization.lang(\"Move the caret to the end of text\"), \"alt+shift+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_UP(\"Emacs move caret up\", Localization.lang(\"Move the caret up\"), \"ctrl+P\", KeyBindingCategory.EDIT),\n+    EMACS_DOWN(\"Emacs move caret down\", Localization.lang(\"Move the caret down\"), \"ctrl+N\", KeyBindingCategory.EDIT),\n+    EMACS_CAPITALIZE(\"Emacs capitalize word\", Localization.lang(\"Capitalize current word\"), \"alt+C\", KeyBindingCategory.EDIT),\n+    EMACS_LOWERCASE(\"Emacs lowercase word\", Localization.lang(\"Make current word lowercase\"), \"alt+L\", KeyBindingCategory.EDIT),\n+    EMACS_UPPERCASE(\"Emacs uppercase word\", Localization.lang(\"Make current word uppercase\"), \"alt+U\", KeyBindingCategory.EDIT),\n+    EMACS_KILLLINE(\"Emacs remove line\", Localization.lang(\"Remove line after caret\"), \"ctrl+K\", KeyBindingCategory.EDIT),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1Nzc0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                EMACS_KILLWORD(\"Emacs remove word forwards\", Localization.lang(\"Remove current word forwards\"), \"alt+D\", KeyBindingCategory.EDIT),\n          \n          \n            \n                EMACS_KILLWORD(\"Emacs remove characters until next word\", Localization.lang(\"Remove characters until next word\"), \"alt+D\", KeyBindingCategory.EDIT),", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385357746", "createdAt": "2020-02-27T20:37:41Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -3,6 +3,21 @@\n import org.jabref.logic.l10n.Localization;\n \n public enum KeyBinding {\n+    EMACS_DELETE(\"Emacs delete\", Localization.lang(\"Delete text\"), \"ctrl+D\", KeyBindingCategory.EDIT),\n+    EMACS_BACKWARD(\"Emacs move caret left\", Localization.lang(\"Move caret left\"), \"ctrl+B\", KeyBindingCategory.EDIT),\n+    EMACS_FORWARD(\"Emacs move caret right\", Localization.lang(\"Move caret right\"), \"ctrl+F\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING(\"Emacs move caret to beginning of line\", Localization.lang(\"Move caret to beginning of line\"), \"ctrl+A\", KeyBindingCategory.EDIT),\n+    EMACS_END(\"Emacs move caret to  of line\", Localization.lang(\"Move caret to end of line\"), \"ctrl+E\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING_DOC(\"Emacs move caret to beginning of text\", Localization.lang(\"Move the caret to the beginning of text\"), \"alt+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_END_DOC(\"Emacs move caret to end of text\", Localization.lang(\"Move the caret to the end of text\"), \"alt+shift+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_UP(\"Emacs move caret up\", Localization.lang(\"Move the caret up\"), \"ctrl+P\", KeyBindingCategory.EDIT),\n+    EMACS_DOWN(\"Emacs move caret down\", Localization.lang(\"Move the caret down\"), \"ctrl+N\", KeyBindingCategory.EDIT),\n+    EMACS_CAPITALIZE(\"Emacs capitalize word\", Localization.lang(\"Capitalize current word\"), \"alt+C\", KeyBindingCategory.EDIT),\n+    EMACS_LOWERCASE(\"Emacs lowercase word\", Localization.lang(\"Make current word lowercase\"), \"alt+L\", KeyBindingCategory.EDIT),\n+    EMACS_UPPERCASE(\"Emacs uppercase word\", Localization.lang(\"Make current word uppercase\"), \"alt+U\", KeyBindingCategory.EDIT),\n+    EMACS_KILLLINE(\"Emacs remove line\", Localization.lang(\"Remove line after caret\"), \"ctrl+K\", KeyBindingCategory.EDIT),\n+    EMACS_KILLWORD(\"Emacs remove word forwards\", Localization.lang(\"Remove current word forwards\"), \"alt+D\", KeyBindingCategory.EDIT),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1ODAyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                EMACS_BACKWARDKILLWORD(\"Emacs remove word backwards\", Localization.lang(\"Remove the current word backwards\"), \"alt+DELETE\", KeyBindingCategory.EDIT),\n          \n          \n            \n                EMACS_BACKWARDKILLWORD(\"Emacs remove characters until previous word\", Localization.lang(\"Remove characters until previous word\"), \"alt+DELETE\", KeyBindingCategory.EDIT),", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385358020", "createdAt": "2020-02-27T20:38:16Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -3,6 +3,21 @@\n import org.jabref.logic.l10n.Localization;\n \n public enum KeyBinding {\n+    EMACS_DELETE(\"Emacs delete\", Localization.lang(\"Delete text\"), \"ctrl+D\", KeyBindingCategory.EDIT),\n+    EMACS_BACKWARD(\"Emacs move caret left\", Localization.lang(\"Move caret left\"), \"ctrl+B\", KeyBindingCategory.EDIT),\n+    EMACS_FORWARD(\"Emacs move caret right\", Localization.lang(\"Move caret right\"), \"ctrl+F\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING(\"Emacs move caret to beginning of line\", Localization.lang(\"Move caret to beginning of line\"), \"ctrl+A\", KeyBindingCategory.EDIT),\n+    EMACS_END(\"Emacs move caret to  of line\", Localization.lang(\"Move caret to end of line\"), \"ctrl+E\", KeyBindingCategory.EDIT),\n+    EMACS_BEGINNING_DOC(\"Emacs move caret to beginning of text\", Localization.lang(\"Move the caret to the beginning of text\"), \"alt+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_END_DOC(\"Emacs move caret to end of text\", Localization.lang(\"Move the caret to the end of text\"), \"alt+shift+LESS\", KeyBindingCategory.EDIT),\n+    EMACS_UP(\"Emacs move caret up\", Localization.lang(\"Move the caret up\"), \"ctrl+P\", KeyBindingCategory.EDIT),\n+    EMACS_DOWN(\"Emacs move caret down\", Localization.lang(\"Move the caret down\"), \"ctrl+N\", KeyBindingCategory.EDIT),\n+    EMACS_CAPITALIZE(\"Emacs capitalize word\", Localization.lang(\"Capitalize current word\"), \"alt+C\", KeyBindingCategory.EDIT),\n+    EMACS_LOWERCASE(\"Emacs lowercase word\", Localization.lang(\"Make current word lowercase\"), \"alt+L\", KeyBindingCategory.EDIT),\n+    EMACS_UPPERCASE(\"Emacs uppercase word\", Localization.lang(\"Make current word uppercase\"), \"alt+U\", KeyBindingCategory.EDIT),\n+    EMACS_KILLLINE(\"Emacs remove line\", Localization.lang(\"Remove line after caret\"), \"ctrl+K\", KeyBindingCategory.EDIT),\n+    EMACS_KILLWORD(\"Emacs remove word forwards\", Localization.lang(\"Remove current word forwards\"), \"alt+D\", KeyBindingCategory.EDIT),\n+    EMACS_BACKWARDKILLWORD(\"Emacs remove word backwards\", Localization.lang(\"Remove the current word backwards\"), \"alt+DELETE\", KeyBindingCategory.EDIT),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM1OTEyNA==", "bodyText": "You can just set firstLoop to false here", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385359124", "createdAt": "2020-02-27T20:40:50Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {\n+        UPPER,\n+        LOWER,\n+        CAPITALIZED\n+    }\n+\n+    private enum Direction {\n+        NEXT, PREVIOUS\n+    }\n+\n+    private static ResultingEmacsState setNextWordsCase(String text, int pos, LetterCase targetCase) {\n+        StringBuilder res = new StringBuilder();\n+\n+        boolean firstLetter = true;\n+        int i = pos;\n+        boolean firstLoop = true;\n+        StringBuilder newWordBuilder = new StringBuilder();\n+        for (; i < text.length(); i++) {\n+            // Swallow whitespace\n+            while (firstLoop && i < text.length() && !String.valueOf(text.charAt(i)).matches(\"\\\\w\")) {\n+                newWordBuilder.append(text.charAt(i));\n+                i++;\n+            }\n+            if (i >= text.length()) {\n+                break;\n+            }\n+            if (firstLoop) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2MTM3MA==", "bodyText": "I searched the code for LOCALE for toUpperCase, because of https://haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx/. I know that JabRef isn't doing it quite right.\nCould you please rewrite your code to\n\nExtract the string where the case needs to be changed\nUse org.jabref.logic.bst.BibtexCaseChanger#changeCase.\n\nReason: code-reuse and we are in a BibTeX setting which needs special treatment.", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385361370", "createdAt": "2020-02-27T20:45:41Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {\n+        UPPER,\n+        LOWER,\n+        CAPITALIZED\n+    }\n+\n+    private enum Direction {\n+        NEXT, PREVIOUS\n+    }\n+\n+    private static ResultingEmacsState setNextWordsCase(String text, int pos, LetterCase targetCase) {\n+        StringBuilder res = new StringBuilder();\n+\n+        boolean firstLetter = true;\n+        int i = pos;\n+        boolean firstLoop = true;\n+        StringBuilder newWordBuilder = new StringBuilder();\n+        for (; i < text.length(); i++) {\n+            // Swallow whitespace\n+            while (firstLoop && i < text.length() && !String.valueOf(text.charAt(i)).matches(\"\\\\w\")) {\n+                newWordBuilder.append(text.charAt(i));\n+                i++;\n+            }\n+            if (i >= text.length()) {\n+                break;\n+            }\n+            if (firstLoop) {\n+                firstLoop = false;\n+            }\n+            char currentChar = text.charAt(i);\n+            if (String.valueOf(currentChar).matches(\"\\\\w\")) {\n+                switch (targetCase) {\n+                    case UPPER:\n+                        newWordBuilder.append(Character.toUpperCase(currentChar));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2MTY3OA==", "bodyText": "I think, this is obsolete and org.jabref.logic.bst.BibtexCaseChanger.FORMAT_MODE can be used. See below for a longer explanation.", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385361678", "createdAt": "2020-02-27T20:46:20Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/logic/util/strings/EmacsStringManipulator.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package org.jabref.logic.util.strings;\n+import org.jabref.model.util.ResultingEmacsState;\n+\n+public class EmacsStringManipulator {\n+    private enum LetterCase {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2NzQzMQ==", "bodyText": "Please add a new category KeyBindingCategory.EMACS. Otherwise, it will confuse users, because the keybindings in the normal menu make the impression that they are always enabled (which they are not)", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385367431", "createdAt": "2020-02-27T20:58:21Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -3,6 +3,21 @@\n import org.jabref.logic.l10n.Localization;\n \n public enum KeyBinding {\n+    EMACS_DELETE(\"Emacs delete\", Localization.lang(\"Delete text\"), \"ctrl+D\", KeyBindingCategory.EDIT),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI0ODA1", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-366224805", "createdAt": "2020-02-28T08:23:20Z", "commit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyMzoyMFrOFvs1NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyMzoyMFrOFvs1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2MTkwOQ==", "bodyText": "Can event.consume() be extracted below the if construct?", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r385561909", "createdAt": "2020-02-28T08:23:20Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/keyboard/EmacsKeyBindings.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.Globals;\n+import org.jabref.logic.util.strings.EmacsStringManipulator;\n+import org.jabref.model.util.ResultingEmacsState;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+public class EmacsKeyBindings {\n+\n+    public static void executeEmacs(Scene scene, KeyEvent event) {\n+        boolean EmacsFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS);\n+        if (EmacsFlag && scene.focusOwnerProperty().get() instanceof TextInputControl) {\n+            boolean CAFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CA);\n+            boolean CFFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CF);\n+            boolean CNFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_CN);\n+            boolean AUFlag = Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS_REBIND_AU);\n+\n+            KeyBindingRepository keyBindingRepository = Globals.getKeyPrefs();\n+            TextInputControl focusedTextField = (TextInputControl) scene.focusOwnerProperty().get();\n+            Optional<KeyBinding> keyBinding = keyBindingRepository.mapToKeyBinding(event);\n+            if (keyBinding.isPresent()) {\n+                if (keyBinding.get().equals(KeyBinding.EMACS_DELETE)) {\n+                    focusedTextField.deletePreviousChar();\n+                    event.consume();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODcxMzY2", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-366871366", "createdAt": "2020-03-01T16:43:50Z", "commit": {"oid": "0c2f4b23fc9d42f3228923c330378e106da3462e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b7ce3284db98df2f116040711d8b13203b2e511", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/6b7ce3284db98df2f116040711d8b13203b2e511", "committedDate": "2020-10-20T22:33:37Z", "message": "Merge conflicts solved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aad47bf1429b2ca274504bd79c3fe1c227b78dce", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/aad47bf1429b2ca274504bd79c3fe1c227b78dce", "committedDate": "2020-10-20T23:13:23Z", "message": "Integrated some suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b9498c1ad8349d34f804cb23be652fcb0749502", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/5b9498c1ad8349d34f804cb23be652fcb0749502", "committedDate": "2020-10-21T18:59:29Z", "message": "Introduced KeyBindingCategory Emacs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b9498c1ad8349d34f804cb23be652fcb0749502", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/5b9498c1ad8349d34f804cb23be652fcb0749502", "committedDate": "2020-10-21T18:59:29Z", "message": "Introduced KeyBindingCategory Emacs"}, "afterCommit": {"oid": "1d68c6e161b27c982ebcc2e4a346eb8b383ac071", "author": {"user": {"login": "stevensdavid", "name": "David Stevens"}}, "url": "https://github.com/JabRef/jabref/commit/1d68c6e161b27c982ebcc2e4a346eb8b383ac071", "committedDate": "2020-02-27T17:30:02Z", "message": "[feat] Implement Emacs key bindings\n\nEmacs style key bindings are re-added to JabRef through the preferences\nmenu. The supported key bindings have feature parity with the previous\nimplementation in JabRef v<4, and additionally support any class that\nextends TextInputControl. In practice, this means that the new\nimplementation supports both TextFields and TextAreas by default. Some\nfunctionality may still be missing\n\nCo-authored-by: Felix Luthman <34520175+felixlut@users.noreply.github.com>\nCo-authored-by: Tommy Samuelsson <Zodbigt@users.noreply.github.com>\nCo-authored-by: muachilin <32566798+muachilin@users.noreply.github.com>\nCo-authored-by: Kristoffer Gunnarsson <kristoffergunnarsson47@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NDYyODky", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-514462892", "createdAt": "2020-10-22T08:07:55Z", "commit": {"oid": "5b9498c1ad8349d34f804cb23be652fcb0749502"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwODowNzo1NlrOHmVlKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwODowNzo1NlrOHmVlKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTk2MTUxMg==", "bodyText": "I thought about this again, and still think it would make sense to add these keybindings as normal keybindings, setting them to \"normal\" defaults: e.g. WORD_FORWARD to Ctrl + right, others like CAPITALIZE to empty. Then people can customize to whatever they want, e.g. emacs or vi or ...\nThis would also hugely simplify the code as these keybindings would be treated as normal bindings.", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r509961512", "createdAt": "2020-10-22T08:07:56Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -3,6 +3,23 @@\n import org.jabref.logic.l10n.Localization;\n \n public enum KeyBinding {\n+    EMACS_DELETE(\"Emacs delete\", Localization.lang(\"Delete text\"), \"ctrl+D\", KeyBindingCategory.EMACS),\n+    EMACS_BACKWARD(\"Emacs move caret left\", Localization.lang(\"Move caret left\"), \"ctrl+B\", KeyBindingCategory.EMACS),\n+    EMACS_FORWARD(\"Emacs move caret right\", Localization.lang(\"Move caret right\"), \"ctrl+F\", KeyBindingCategory.EMACS),\n+    EMACS_WORD_BACKWARD(\"Emacs move caret to previous word\", Localization.lang(\"Move caret to previous word\"), \"alt+B\", KeyBindingCategory.EMACS),\n+    EMACS_WORD_FORWARD(\"Emacs move caret to next word\", Localization.lang(\"Move caret to next word\"), \"alt+B\", KeyBindingCategory.EMACS),\n+    EMACS_BEGINNING(\"Emacs move caret to beginning of line\", Localization.lang(\"Move caret to beginning of line\"), \"ctrl+A\", KeyBindingCategory.EMACS),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b9498c1ad8349d34f804cb23be652fcb0749502"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3fbfe951da8fe1d6c791c68d8622712a2e14c7f", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/b3fbfe951da8fe1d6c791c68d8622712a2e14c7f", "committedDate": "2020-10-22T16:55:40Z", "message": "Integrated some more remarks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0468b23986044525251938be58ce63e557fc60b", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/f0468b23986044525251938be58ce63e557fc60b", "committedDate": "2020-10-22T22:51:03Z", "message": "Integrated again some more remarks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b0a3eb98cfb4d76f9a41f32ba471ce688360aa7", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/4b0a3eb98cfb4d76f9a41f32ba471ce688360aa7", "committedDate": "2020-10-22T22:57:29Z", "message": "Removed some artifacts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdfb2e414a0668b3e4018dff96f15ecfd6364cc2", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/cdfb2e414a0668b3e4018dff96f15ecfd6364cc2", "committedDate": "2020-11-02T21:45:25Z", "message": "Merge remote-tracking branch 'upstream/master' into emacs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df1889e893354d78afdc553c9dc031698d658f8b", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/df1889e893354d78afdc553c9dc031698d658f8b", "committedDate": "2020-11-04T20:33:14Z", "message": "First attempt to fix backwardKillWord"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf20143d479a483d87b24ed3ded333e5e43d33c9", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/bf20143d479a483d87b24ed3ded333e5e43d33c9", "committedDate": "2020-11-04T21:19:49Z", "message": "Fixed all StringManipulatorTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83a384837dc0b311fe263c550419ac0c9b486814", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/83a384837dc0b311fe263c550419ac0c9b486814", "committedDate": "2020-11-04T21:36:19Z", "message": "Added ParameterizedTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09338561e5a54ee241f4526881f9a02fbd7322be", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/09338561e5a54ee241f4526881f9a02fbd7322be", "committedDate": "2020-11-04T22:52:16Z", "message": "Refactor setWordCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffcaeb6ceb48d772137b1263a53e8542a71f0984", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/ffcaeb6ceb48d772137b1263a53e8542a71f0984", "committedDate": "2020-11-05T15:01:59Z", "message": "Removed artifacts and made cleanups"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MzUzMzcy", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-524353372", "createdAt": "2020-11-05T15:04:49Z", "commit": {"oid": "ffcaeb6ceb48d772137b1263a53e8542a71f0984"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNTowNDo0OVrOHuHizw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNTowNDo0OVrOHuHizw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODEyMDE0Mw==", "bodyText": "In all other cases you use ==.\nWhy not refactor to a switch case?", "url": "https://github.com/JabRef/jabref/pull/6037#discussion_r518120143", "createdAt": "2020-11-05T15:04:49Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/keyboard/EditorKeyBindings.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package org.jabref.gui.keyboard;\n+\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+import javafx.scene.control.TextInputControl;\n+import javafx.scene.input.KeyEvent;\n+\n+import org.jabref.gui.Globals;\n+import org.jabref.logic.util.strings.StringManipulator;\n+import org.jabref.model.util.ResultingStringState;\n+import org.jabref.preferences.PreferencesService;\n+\n+public class EditorKeyBindings {\n+\n+    public static void call(Scene scene, KeyEvent event, PreferencesService preferencesService) {\n+        if (scene.focusOwnerProperty().get() instanceof TextInputControl) {\n+\n+            KeyBindingRepository keyBindingRepository = Globals.getKeyPrefs();\n+            TextInputControl focusedTextField = (TextInputControl) scene.focusOwnerProperty().get();\n+            Optional<KeyBinding> keyBinding = keyBindingRepository.mapToKeyBinding(event);\n+            keyBinding.ifPresent(binding -> {\n+                if (binding.equals(KeyBinding.EDITOR_DELETE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffcaeb6ceb48d772137b1263a53e8542a71f0984"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb6fc8ce2766721fccb28aba4e6301c75fe34648", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/eb6fc8ce2766721fccb28aba4e6301c75fe34648", "committedDate": "2020-11-05T19:27:09Z", "message": "Added CodeAreaKeyBindings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9384e02be6dbf86c314205b63ac28f42482d9b6", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/a9384e02be6dbf86c314205b63ac28f42482d9b6", "committedDate": "2020-11-05T21:38:53Z", "message": "Added KeyBindingPreset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d3a9d091f4763620d76d21642efb7c76aa884f3", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/0d3a9d091f4763620d76d21642efb7c76aa884f3", "committedDate": "2020-11-06T14:05:18Z", "message": "Changed preset combobox to menubutton"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c59a82f35fec85408ac85450424e7ef42d8e7b1", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/0c59a82f35fec85408ac85450424e7ef42d8e7b1", "committedDate": "2020-11-06T19:33:50Z", "message": "l10n and CHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTMxODYw", "url": "https://github.com/JabRef/jabref/pull/6037#pullrequestreview-525531860", "createdAt": "2020-11-06T22:23:37Z", "commit": {"oid": "0c59a82f35fec85408ac85450424e7ef42d8e7b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 378, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}