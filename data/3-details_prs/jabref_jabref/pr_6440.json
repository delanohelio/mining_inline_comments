{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NjA2NDI5", "number": 6440, "title": "Add support for jumping in ordered author list by typing letters", "bodyText": "Fixes #6146\nI think I have added the support for jumping to the entry when typing letters.\nShould I add some comments to the method I added?\nThanks :D\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-05-07T10:47:43Z", "url": "https://github.com/JabRef/jabref/pull/6440", "merged": true, "mergeCommit": {"oid": "100f7319fb26f0d411d0eb81b80c720c68bb554d"}, "closed": true, "closedAt": "2020-05-11T14:13:30Z", "author": {"login": "leitianjian"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVpB-AgH2gAyNDE0NjA2NDI5OmFhMzEzMmI4MTAwOGNiNjFiYWEzMzk0NzkxMTYwZGQ3NzljNmM1YzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfpwwlAFqTQwODY2ODM5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aa3132b81008cb61baa3394791160dd779c6c5c3", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/aa3132b81008cb61baa3394791160dd779c6c5c3", "committedDate": "2020-04-08T14:46:45Z", "message": "Showing correct icon on main table linked files column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c9b7c1fcf5b7a90f71254df3c6a4ef59967c861", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/9c9b7c1fcf5b7a90f71254df3c6a4ef59967c861", "committedDate": "2020-04-15T09:43:36Z", "message": "Showing correct icon on both main table and linked files column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2302b8ac5588fafa8f631e5be54a0807edbe4efd", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/2302b8ac5588fafa8f631e5be54a0807edbe4efd", "committedDate": "2020-04-15T09:46:14Z", "message": "Merge remote-tracking branch 'origin/pdf-icon-in-linked-files-column' into pdf-icon-in-linked-files-column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8090ea51ced82fa2ea514ff4258ab23f59ff92a2", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/8090ea51ced82fa2ea514ff4258ab23f59ff92a2", "committedDate": "2020-04-15T09:51:24Z", "message": "Showing correct icon on both main table and linked file editor list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72fc91c114dc57dd1e41f189cb0bc4b1b7341102", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/72fc91c114dc57dd1e41f189cb0bc4b1b7341102", "committedDate": "2020-04-15T11:32:50Z", "message": "delete the TODO comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9796642b245badbd100cf83289cfa61ca0f4609", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/e9796642b245badbd100cf83289cfa61ca0f4609", "committedDate": "2020-04-15T11:46:24Z", "message": "add record in CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95072cd56af45e1e7468f050039d970395b91196", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/95072cd56af45e1e7468f050039d970395b91196", "committedDate": "2020-05-03T09:16:40Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62264aea1665a7904a4abb04137355178df253f7", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/62264aea1665a7904a4abb04137355178df253f7", "committedDate": "2020-05-04T12:51:58Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87c8b411c77d3559477156fb974d9bcaf8dab698", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/87c8b411c77d3559477156fb974d9bcaf8dab698", "committedDate": "2020-05-07T10:31:28Z", "message": "Add jump in ordered author list by typing letter function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f2de68a8225932a2bb76c71ce3d9a4e72411cb2", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/0f2de68a8225932a2bb76c71ce3d9a4e72411cb2", "committedDate": "2020-05-07T10:31:49Z", "message": "Merge remote-tracking branch 'upstream/master' into jump-in-ordered-author-list-by-typing-letters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a364e6287ae1b45fd6586a7e48b88834d44cc1c", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/2a364e6287ae1b45fd6586a7e48b88834d44cc1c", "committedDate": "2020-05-07T10:41:34Z", "message": "modify changelog.md supporting for jumping to target entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "047f0424b22c8d712c7b5717054d1b7d83dc9763", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/047f0424b22c8d712c7b5717054d1b7d83dc9763", "committedDate": "2020-05-07T10:50:37Z", "message": "Merge branch 'master' into jump-in-ordered-author-list-by-typing-letters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3ODYxOTc1", "url": "https://github.com/JabRef/jabref/pull/6440#pullrequestreview-407861975", "createdAt": "2020-05-07T21:49:05Z", "commit": {"oid": "047f0424b22c8d712c7b5717054d1b7d83dc9763"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTo0OTowNVrOGSRizg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTo0OTowNVrOGSRizg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxNDk5MA==", "bodyText": "How does this scale on large libraries? Can you please test this to be sure?", "url": "https://github.com/JabRef/jabref/pull/6440#discussion_r421814990", "createdAt": "2020-05-07T21:49:05Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/maintable/MainTable.java", "diffHunk": "@@ -123,6 +137,19 @@ public MainTable(MainTableDataModel model, JabRefFrame frame,\n         database.getDatabase().registerListener(this);\n     }\n \n+    private int getEntryIndexByInput(TableColumn<BibEntryTableViewModel, ?> column, char target_char) {\n+        for (int i = 0; i < this.getItems().size(); ++i) {\n+            Object temp = column.getCellObservableValue(i).getValue();\n+            if (temp == null) {\n+                continue;\n+            }\n+            if (temp.toString().toLowerCase().charAt(0) == target_char) {\n+                return i;\n+            }\n+        }\n+        return -1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "047f0424b22c8d712c7b5717054d1b7d83dc9763"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8368aff8caf9b1ec5a65c9244ee0c23a1c91034c", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/8368aff8caf9b1ec5a65c9244ee0c23a1c91034c", "committedDate": "2020-05-08T04:33:05Z", "message": "Using java stream rewrite the method and enable multiple key input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b427a39a923b2880dacb21b47bb5e6123b8aa38", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/1b427a39a923b2880dacb21b47bb5e6123b8aa38", "committedDate": "2020-05-08T13:51:06Z", "message": "Update javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MjgyNjIw", "url": "https://github.com/JabRef/jabref/pull/6440#pullrequestreview-408282620", "createdAt": "2020-05-08T14:33:32Z", "commit": {"oid": "1b427a39a923b2880dacb21b47bb5e6123b8aa38"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNDozMzozMlrOGSnuJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNDozMzozMlrOGSnuJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3ODM0MA==", "bodyText": "You can put these statements inside the lambda expression in multiple lines.\nSorry, I think my previous comment was a bit misunderstandable.\nBesides that, it looks good to me. let's see what a second developer says.", "url": "https://github.com/JabRef/jabref/pull/6440#discussion_r422178340", "createdAt": "2020-05-08T14:33:32Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/maintable/MainTable.java", "diffHunk": "@@ -123,6 +134,35 @@ public MainTable(MainTableDataModel model, JabRefFrame frame,\n         database.getDatabase().registerListener(this);\n     }\n \n+    /**\n+     * This is called, if a user starts typing some characters into the keyboard with focus on main table.\n+     * The tableview will scroll to the cell with the same starting column value and typed string\n+     * @param sortedColumn The ListView currently focused\n+     * @param keyEvent The pressed character\n+     */\n+\n+    private void jumpToSearchKey(TableColumn<BibEntryTableViewModel, ?> sortedColumn, KeyEvent keyEvent) {\n+        if (keyEvent.getCharacter() == null || sortedColumn == null) {\n+            return;\n+        }\n+\n+        if (System.currentTimeMillis() - lastKeyPressTime < 700) {\n+            columnSearchTerm += keyEvent.getCharacter().toLowerCase();\n+        } else {\n+            columnSearchTerm = keyEvent.getCharacter().toLowerCase();\n+        }\n+\n+        lastKeyPressTime = System.currentTimeMillis();\n+\n+        this.getItems().stream()\n+            .filter(item -> Optional.ofNullable(sortedColumn.getCellObservableValue(item).getValue())\n+                                    .map(Object::toString)\n+                                    .orElse(\"\")\n+                                    .toLowerCase().startsWith(columnSearchTerm))\n+            .findFirst()\n+            .ifPresent(item -> { this.scrollTo(item); this.clearAndSelect(item.getEntry()); });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b427a39a923b2880dacb21b47bb5e6123b8aa38"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a37b8a3b5fef62f25b00c525344260209c2bef09", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/a37b8a3b5fef62f25b00c525344260209c2bef09", "committedDate": "2020-05-08T16:01:31Z", "message": "Adjust code format in @calixtus suggestions.\n\nCo-authored-by: Carl Christian Snethlage <50491877+calixtus@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTY5MzE3", "url": "https://github.com/JabRef/jabref/pull/6440#pullrequestreview-408569317", "createdAt": "2020-05-08T22:53:48Z", "commit": {"oid": "a37b8a3b5fef62f25b00c525344260209c2bef09"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMjo1Mzo0OFrOGS15tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMjo1NTowMFrOGS161Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxMDY3OQ==", "bodyText": "Please check for emptyness using .isEmpty().", "url": "https://github.com/JabRef/jabref/pull/6440#discussion_r422410679", "createdAt": "2020-05-08T22:53:48Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/maintable/MainTable.java", "diffHunk": "@@ -57,11 +58,21 @@\n     private final ImportHandler importHandler;\n     private final CustomLocalDragboard localDragboard;\n \n+    private long lastKeyPressTime;\n+    private String columnSearchTerm;\n+\n     public MainTable(MainTableDataModel model, JabRefFrame frame,\n                      BasePanel panel, BibDatabaseContext database,\n                      MainTablePreferences preferences, ExternalFileTypes externalFileTypes, KeyBindingRepository keyBindingRepository) {\n         super();\n \n+        this.setOnKeyTyped(key -> {\n+            if (this.getSortOrder().size() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a37b8a3b5fef62f25b00c525344260209c2bef09"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxMDc5Mg==", "bodyText": "@param and the text should be separated by one empty line.\nI think, this is done by the intelliJ auto formatter", "url": "https://github.com/JabRef/jabref/pull/6440#discussion_r422410792", "createdAt": "2020-05-08T22:54:15Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/maintable/MainTable.java", "diffHunk": "@@ -123,6 +134,38 @@ public MainTable(MainTableDataModel model, JabRefFrame frame,\n         database.getDatabase().registerListener(this);\n     }\n \n+    /**\n+     * This is called, if a user starts typing some characters into the keyboard with focus on main table.\n+     * The tableview will scroll to the cell with the same starting column value and typed string\n+     * @param sortedColumn The ListView currently focused", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a37b8a3b5fef62f25b00c525344260209c2bef09"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxMDk2NQ==", "bodyText": "Please put .startsWith in the next line to have all . calls in a separate line.", "url": "https://github.com/JabRef/jabref/pull/6440#discussion_r422410965", "createdAt": "2020-05-08T22:55:00Z", "author": {"login": "koppor"}, "path": "src/main/java/org/jabref/gui/maintable/MainTable.java", "diffHunk": "@@ -123,6 +134,38 @@ public MainTable(MainTableDataModel model, JabRefFrame frame,\n         database.getDatabase().registerListener(this);\n     }\n \n+    /**\n+     * This is called, if a user starts typing some characters into the keyboard with focus on main table.\n+     * The tableview will scroll to the cell with the same starting column value and typed string\n+     * @param sortedColumn The ListView currently focused\n+     * @param keyEvent The pressed character\n+     */\n+\n+    private void jumpToSearchKey(TableColumn<BibEntryTableViewModel, ?> sortedColumn, KeyEvent keyEvent) {\n+        if (keyEvent.getCharacter() == null || sortedColumn == null) {\n+            return;\n+        }\n+\n+        if (System.currentTimeMillis() - lastKeyPressTime < 700) {\n+            columnSearchTerm += keyEvent.getCharacter().toLowerCase();\n+        } else {\n+            columnSearchTerm = keyEvent.getCharacter().toLowerCase();\n+        }\n+\n+        lastKeyPressTime = System.currentTimeMillis();\n+\n+        this.getItems().stream()\n+            .filter(item -> Optional.ofNullable(sortedColumn.getCellObservableValue(item).getValue())\n+                                    .map(Object::toString)\n+                                    .orElse(\"\")\n+                                    .toLowerCase().startsWith(columnSearchTerm))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a37b8a3b5fef62f25b00c525344260209c2bef09"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1073b5a14bc5fdd447a535faabcbada269711c1", "author": {"user": {"login": "leitianjian", "name": "Tianjian lei"}}, "url": "https://github.com/JabRef/jabref/commit/c1073b5a14bc5fdd447a535faabcbada269711c1", "committedDate": "2020-05-09T01:49:40Z", "message": "Update code format in @koppor suggestions and update javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjY4Mzk4", "url": "https://github.com/JabRef/jabref/pull/6440#pullrequestreview-408668398", "createdAt": "2020-05-09T17:17:06Z", "commit": {"oid": "c1073b5a14bc5fdd447a535faabcbada269711c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 250, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}