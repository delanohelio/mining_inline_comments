{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxODUwNDI2", "number": 5826, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxODo0NTo1MVrODZD6tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQxNjo0NToxNVrODarXUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjA1MTczOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxODo0NTo1MVrOFfQESw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxOTo0NToyMFrOFfQR7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxMzQxOQ==", "bodyText": "I'm not entirely sure if this helps, but maybe worth a try:  In the shared database dialog I initialized this Composite Validator in the ctor and immediately added all validators and that worked without any NPE\n   formValidator = new CompositeValidator();\n    formValidator.addValidators(databaseValidator, hostValidator, portValidator, userValidator);", "url": "https://github.com/JabRef/jabref/pull/5826#discussion_r368313419", "createdAt": "2020-01-19T18:45:51Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "diffHunk": "@@ -0,0 +1,469 @@\n+package org.jabref.gui.groups;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.regex.Pattern;\n+import java.util.regex.PatternSyntaxException;\n+\n+import javafx.beans.property.BooleanProperty;\n+import javafx.beans.property.ListProperty;\n+import javafx.beans.property.ObjectProperty;\n+import javafx.beans.property.SimpleBooleanProperty;\n+import javafx.beans.property.SimpleListProperty;\n+import javafx.beans.property.SimpleObjectProperty;\n+import javafx.beans.property.SimpleStringProperty;\n+import javafx.beans.property.StringProperty;\n+import javafx.collections.FXCollections;\n+import javafx.scene.control.ButtonType;\n+import javafx.scene.paint.Color;\n+\n+import org.jabref.Globals;\n+import org.jabref.gui.BasePanel;\n+import org.jabref.gui.DialogService;\n+import org.jabref.gui.help.HelpAction;\n+import org.jabref.gui.icon.IconTheme;\n+import org.jabref.gui.util.FileDialogConfiguration;\n+import org.jabref.logic.auxparser.DefaultAuxParser;\n+import org.jabref.logic.help.HelpFile;\n+import org.jabref.logic.l10n.Localization;\n+import org.jabref.logic.util.StandardFileType;\n+import org.jabref.logic.util.io.FileUtil;\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.entry.field.FieldFactory;\n+import org.jabref.model.groups.AbstractGroup;\n+import org.jabref.model.groups.AutomaticGroup;\n+import org.jabref.model.groups.AutomaticKeywordGroup;\n+import org.jabref.model.groups.AutomaticPersonsGroup;\n+import org.jabref.model.groups.ExplicitGroup;\n+import org.jabref.model.groups.GroupHierarchyType;\n+import org.jabref.model.groups.GroupTreeNode;\n+import org.jabref.model.groups.RegexKeywordGroup;\n+import org.jabref.model.groups.SearchGroup;\n+import org.jabref.model.groups.TexGroup;\n+import org.jabref.model.groups.WordKeywordGroup;\n+import org.jabref.model.metadata.MetaData;\n+import org.jabref.model.strings.StringUtil;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+import de.saxsys.mvvmfx.utils.validation.CompositeValidator;\n+import de.saxsys.mvvmfx.utils.validation.FunctionBasedValidator;\n+import de.saxsys.mvvmfx.utils.validation.ValidationMessage;\n+import de.saxsys.mvvmfx.utils.validation.ValidationStatus;\n+import de.saxsys.mvvmfx.utils.validation.Validator;\n+\n+public class GroupDialogViewModel {\n+\n+    // Basic Settings\n+    private final StringProperty nameProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty descriptionProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty iconProperty = new SimpleStringProperty(\"\");\n+    private final ObjectProperty<Color> colorProperty = new SimpleObjectProperty<>();\n+    private final ListProperty<GroupHierarchyType> groupHierarchyListProperty = new SimpleListProperty<>();\n+    private final ObjectProperty<GroupHierarchyType> groupHierarchySelectedProperty = new SimpleObjectProperty<>();\n+\n+    // Type\n+    private final BooleanProperty typeExplicitProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeKeywordsProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeSearchProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeAutoProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeTexProperty = new SimpleBooleanProperty();\n+\n+    // Option Groups\n+    private final StringProperty keywordGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty keywordGroupSearchFieldProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty keywordGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty keywordGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final StringProperty searchGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty searchGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty searchGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final BooleanProperty autoGroupKeywordsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupKeywordsFieldProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsHierarchicalDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty autoGroupPersonsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupPersonsFieldProperty = new SimpleStringProperty(\"\");\n+\n+    private final StringProperty texGroupFilePathProperty = new SimpleStringProperty(\"\");\n+\n+    private Validator nameValidator;\n+    private Validator nameContainsDelimiterValidator;\n+    private Validator sameNameValidator;\n+    private Validator keywordRegexValidator;\n+    private Validator keywordSearchTermEmptyValidator;\n+    private Validator searchRegexValidator;\n+    private Validator searchSearchTermEmptyValidator;\n+    private CompositeValidator validator = new CompositeValidator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3579f6e71acd757b12acb691c30fa29b2528e136"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxNjkwOQ==", "bodyText": "Tried that.\nThe validator works fine, it's the lookupbutton method which doesn't work. The buttons seem to be initialized after the rest of the dialog. Nevertheless, it works now. By adding a listener, the lookupbutton method is now called every time something changes. So... Whatever. ;)", "url": "https://github.com/JabRef/jabref/pull/5826#discussion_r368316909", "createdAt": "2020-01-19T19:45:20Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "diffHunk": "@@ -0,0 +1,469 @@\n+package org.jabref.gui.groups;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.regex.Pattern;\n+import java.util.regex.PatternSyntaxException;\n+\n+import javafx.beans.property.BooleanProperty;\n+import javafx.beans.property.ListProperty;\n+import javafx.beans.property.ObjectProperty;\n+import javafx.beans.property.SimpleBooleanProperty;\n+import javafx.beans.property.SimpleListProperty;\n+import javafx.beans.property.SimpleObjectProperty;\n+import javafx.beans.property.SimpleStringProperty;\n+import javafx.beans.property.StringProperty;\n+import javafx.collections.FXCollections;\n+import javafx.scene.control.ButtonType;\n+import javafx.scene.paint.Color;\n+\n+import org.jabref.Globals;\n+import org.jabref.gui.BasePanel;\n+import org.jabref.gui.DialogService;\n+import org.jabref.gui.help.HelpAction;\n+import org.jabref.gui.icon.IconTheme;\n+import org.jabref.gui.util.FileDialogConfiguration;\n+import org.jabref.logic.auxparser.DefaultAuxParser;\n+import org.jabref.logic.help.HelpFile;\n+import org.jabref.logic.l10n.Localization;\n+import org.jabref.logic.util.StandardFileType;\n+import org.jabref.logic.util.io.FileUtil;\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.entry.field.FieldFactory;\n+import org.jabref.model.groups.AbstractGroup;\n+import org.jabref.model.groups.AutomaticGroup;\n+import org.jabref.model.groups.AutomaticKeywordGroup;\n+import org.jabref.model.groups.AutomaticPersonsGroup;\n+import org.jabref.model.groups.ExplicitGroup;\n+import org.jabref.model.groups.GroupHierarchyType;\n+import org.jabref.model.groups.GroupTreeNode;\n+import org.jabref.model.groups.RegexKeywordGroup;\n+import org.jabref.model.groups.SearchGroup;\n+import org.jabref.model.groups.TexGroup;\n+import org.jabref.model.groups.WordKeywordGroup;\n+import org.jabref.model.metadata.MetaData;\n+import org.jabref.model.strings.StringUtil;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+import de.saxsys.mvvmfx.utils.validation.CompositeValidator;\n+import de.saxsys.mvvmfx.utils.validation.FunctionBasedValidator;\n+import de.saxsys.mvvmfx.utils.validation.ValidationMessage;\n+import de.saxsys.mvvmfx.utils.validation.ValidationStatus;\n+import de.saxsys.mvvmfx.utils.validation.Validator;\n+\n+public class GroupDialogViewModel {\n+\n+    // Basic Settings\n+    private final StringProperty nameProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty descriptionProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty iconProperty = new SimpleStringProperty(\"\");\n+    private final ObjectProperty<Color> colorProperty = new SimpleObjectProperty<>();\n+    private final ListProperty<GroupHierarchyType> groupHierarchyListProperty = new SimpleListProperty<>();\n+    private final ObjectProperty<GroupHierarchyType> groupHierarchySelectedProperty = new SimpleObjectProperty<>();\n+\n+    // Type\n+    private final BooleanProperty typeExplicitProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeKeywordsProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeSearchProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeAutoProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeTexProperty = new SimpleBooleanProperty();\n+\n+    // Option Groups\n+    private final StringProperty keywordGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty keywordGroupSearchFieldProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty keywordGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty keywordGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final StringProperty searchGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty searchGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty searchGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final BooleanProperty autoGroupKeywordsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupKeywordsFieldProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsHierarchicalDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty autoGroupPersonsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupPersonsFieldProperty = new SimpleStringProperty(\"\");\n+\n+    private final StringProperty texGroupFilePathProperty = new SimpleStringProperty(\"\");\n+\n+    private Validator nameValidator;\n+    private Validator nameContainsDelimiterValidator;\n+    private Validator sameNameValidator;\n+    private Validator keywordRegexValidator;\n+    private Validator keywordSearchTermEmptyValidator;\n+    private Validator searchRegexValidator;\n+    private Validator searchSearchTermEmptyValidator;\n+    private CompositeValidator validator = new CompositeValidator();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxMzQxOQ=="}, "originalCommit": {"oid": "3579f6e71acd757b12acb691c30fa29b2528e136"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjA4NTc5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQyMDowMDoxN1rOFfQVmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQyMDoyNToyN1rOFfQdDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxNzg1MA==", "bodyText": "You already pass the JabRefPreferences as parameter", "url": "https://github.com/JabRef/jabref/pull/5826#discussion_r368317850", "createdAt": "2020-01-19T20:00:17Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "diffHunk": "@@ -0,0 +1,469 @@\n+package org.jabref.gui.groups;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.regex.Pattern;\n+import java.util.regex.PatternSyntaxException;\n+\n+import javafx.beans.property.BooleanProperty;\n+import javafx.beans.property.ListProperty;\n+import javafx.beans.property.ObjectProperty;\n+import javafx.beans.property.SimpleBooleanProperty;\n+import javafx.beans.property.SimpleListProperty;\n+import javafx.beans.property.SimpleObjectProperty;\n+import javafx.beans.property.SimpleStringProperty;\n+import javafx.beans.property.StringProperty;\n+import javafx.collections.FXCollections;\n+import javafx.scene.control.ButtonType;\n+import javafx.scene.paint.Color;\n+\n+import org.jabref.Globals;\n+import org.jabref.gui.BasePanel;\n+import org.jabref.gui.DialogService;\n+import org.jabref.gui.help.HelpAction;\n+import org.jabref.gui.icon.IconTheme;\n+import org.jabref.gui.util.FileDialogConfiguration;\n+import org.jabref.logic.auxparser.DefaultAuxParser;\n+import org.jabref.logic.help.HelpFile;\n+import org.jabref.logic.l10n.Localization;\n+import org.jabref.logic.util.StandardFileType;\n+import org.jabref.logic.util.io.FileUtil;\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.entry.field.FieldFactory;\n+import org.jabref.model.groups.AbstractGroup;\n+import org.jabref.model.groups.AutomaticGroup;\n+import org.jabref.model.groups.AutomaticKeywordGroup;\n+import org.jabref.model.groups.AutomaticPersonsGroup;\n+import org.jabref.model.groups.ExplicitGroup;\n+import org.jabref.model.groups.GroupHierarchyType;\n+import org.jabref.model.groups.GroupTreeNode;\n+import org.jabref.model.groups.RegexKeywordGroup;\n+import org.jabref.model.groups.SearchGroup;\n+import org.jabref.model.groups.TexGroup;\n+import org.jabref.model.groups.WordKeywordGroup;\n+import org.jabref.model.metadata.MetaData;\n+import org.jabref.model.strings.StringUtil;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+import de.saxsys.mvvmfx.utils.validation.CompositeValidator;\n+import de.saxsys.mvvmfx.utils.validation.FunctionBasedValidator;\n+import de.saxsys.mvvmfx.utils.validation.ValidationMessage;\n+import de.saxsys.mvvmfx.utils.validation.ValidationStatus;\n+import de.saxsys.mvvmfx.utils.validation.Validator;\n+\n+public class GroupDialogViewModel {\n+\n+    // Basic Settings\n+    private final StringProperty nameProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty descriptionProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty iconProperty = new SimpleStringProperty(\"\");\n+    private final ObjectProperty<Color> colorProperty = new SimpleObjectProperty<>();\n+    private final ListProperty<GroupHierarchyType> groupHierarchyListProperty = new SimpleListProperty<>();\n+    private final ObjectProperty<GroupHierarchyType> groupHierarchySelectedProperty = new SimpleObjectProperty<>();\n+\n+    // Type\n+    private final BooleanProperty typeExplicitProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeKeywordsProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeSearchProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeAutoProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeTexProperty = new SimpleBooleanProperty();\n+\n+    // Option Groups\n+    private final StringProperty keywordGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty keywordGroupSearchFieldProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty keywordGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty keywordGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final StringProperty searchGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty searchGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty searchGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final BooleanProperty autoGroupKeywordsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupKeywordsFieldProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsHierarchicalDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty autoGroupPersonsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupPersonsFieldProperty = new SimpleStringProperty(\"\");\n+\n+    private final StringProperty texGroupFilePathProperty = new SimpleStringProperty(\"\");\n+\n+    private Validator nameValidator;\n+    private Validator nameContainsDelimiterValidator;\n+    private Validator sameNameValidator;\n+    private Validator keywordRegexValidator;\n+    private Validator keywordSearchTermEmptyValidator;\n+    private Validator searchRegexValidator;\n+    private Validator searchSearchTermEmptyValidator;\n+    private CompositeValidator validator = new CompositeValidator();\n+\n+    private final DialogService dialogService;\n+    private final JabRefPreferences preferences;\n+    private final BasePanel basePanel;\n+    private final AbstractGroup editedGroup;\n+\n+    private final Character keywordDelimiter;\n+\n+    public GroupDialogViewModel(DialogService dialogService, BasePanel basePanel, JabRefPreferences preferences, AbstractGroup editedGroup) {\n+        this.dialogService = dialogService;\n+        this.preferences = preferences;\n+        this.basePanel = basePanel;\n+        this.editedGroup = editedGroup;\n+\n+        this.keywordDelimiter = Globals.prefs.getKeywordDelimiter();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3579f6e71acd757b12acb691c30fa29b2528e136"}, "originalPosition": 116}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxOTc1OA==", "bodyText": "Thanks. Forgot that in refactoring.", "url": "https://github.com/JabRef/jabref/pull/5826#discussion_r368319758", "createdAt": "2020-01-19T20:25:27Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/groups/GroupDialogViewModel.java", "diffHunk": "@@ -0,0 +1,469 @@\n+package org.jabref.gui.groups;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.regex.Pattern;\n+import java.util.regex.PatternSyntaxException;\n+\n+import javafx.beans.property.BooleanProperty;\n+import javafx.beans.property.ListProperty;\n+import javafx.beans.property.ObjectProperty;\n+import javafx.beans.property.SimpleBooleanProperty;\n+import javafx.beans.property.SimpleListProperty;\n+import javafx.beans.property.SimpleObjectProperty;\n+import javafx.beans.property.SimpleStringProperty;\n+import javafx.beans.property.StringProperty;\n+import javafx.collections.FXCollections;\n+import javafx.scene.control.ButtonType;\n+import javafx.scene.paint.Color;\n+\n+import org.jabref.Globals;\n+import org.jabref.gui.BasePanel;\n+import org.jabref.gui.DialogService;\n+import org.jabref.gui.help.HelpAction;\n+import org.jabref.gui.icon.IconTheme;\n+import org.jabref.gui.util.FileDialogConfiguration;\n+import org.jabref.logic.auxparser.DefaultAuxParser;\n+import org.jabref.logic.help.HelpFile;\n+import org.jabref.logic.l10n.Localization;\n+import org.jabref.logic.util.StandardFileType;\n+import org.jabref.logic.util.io.FileUtil;\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.entry.field.FieldFactory;\n+import org.jabref.model.groups.AbstractGroup;\n+import org.jabref.model.groups.AutomaticGroup;\n+import org.jabref.model.groups.AutomaticKeywordGroup;\n+import org.jabref.model.groups.AutomaticPersonsGroup;\n+import org.jabref.model.groups.ExplicitGroup;\n+import org.jabref.model.groups.GroupHierarchyType;\n+import org.jabref.model.groups.GroupTreeNode;\n+import org.jabref.model.groups.RegexKeywordGroup;\n+import org.jabref.model.groups.SearchGroup;\n+import org.jabref.model.groups.TexGroup;\n+import org.jabref.model.groups.WordKeywordGroup;\n+import org.jabref.model.metadata.MetaData;\n+import org.jabref.model.strings.StringUtil;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+import de.saxsys.mvvmfx.utils.validation.CompositeValidator;\n+import de.saxsys.mvvmfx.utils.validation.FunctionBasedValidator;\n+import de.saxsys.mvvmfx.utils.validation.ValidationMessage;\n+import de.saxsys.mvvmfx.utils.validation.ValidationStatus;\n+import de.saxsys.mvvmfx.utils.validation.Validator;\n+\n+public class GroupDialogViewModel {\n+\n+    // Basic Settings\n+    private final StringProperty nameProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty descriptionProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty iconProperty = new SimpleStringProperty(\"\");\n+    private final ObjectProperty<Color> colorProperty = new SimpleObjectProperty<>();\n+    private final ListProperty<GroupHierarchyType> groupHierarchyListProperty = new SimpleListProperty<>();\n+    private final ObjectProperty<GroupHierarchyType> groupHierarchySelectedProperty = new SimpleObjectProperty<>();\n+\n+    // Type\n+    private final BooleanProperty typeExplicitProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeKeywordsProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeSearchProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeAutoProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty typeTexProperty = new SimpleBooleanProperty();\n+\n+    // Option Groups\n+    private final StringProperty keywordGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty keywordGroupSearchFieldProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty keywordGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty keywordGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final StringProperty searchGroupSearchTermProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty searchGroupCaseSensitiveProperty = new SimpleBooleanProperty();\n+    private final BooleanProperty searchGroupRegexProperty = new SimpleBooleanProperty();\n+\n+    private final BooleanProperty autoGroupKeywordsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupKeywordsFieldProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final StringProperty autoGroupKeywordsHierarchicalDelimiterProperty = new SimpleStringProperty(\"\");\n+    private final BooleanProperty autoGroupPersonsOptionProperty = new SimpleBooleanProperty();\n+    private final StringProperty autoGroupPersonsFieldProperty = new SimpleStringProperty(\"\");\n+\n+    private final StringProperty texGroupFilePathProperty = new SimpleStringProperty(\"\");\n+\n+    private Validator nameValidator;\n+    private Validator nameContainsDelimiterValidator;\n+    private Validator sameNameValidator;\n+    private Validator keywordRegexValidator;\n+    private Validator keywordSearchTermEmptyValidator;\n+    private Validator searchRegexValidator;\n+    private Validator searchSearchTermEmptyValidator;\n+    private CompositeValidator validator = new CompositeValidator();\n+\n+    private final DialogService dialogService;\n+    private final JabRefPreferences preferences;\n+    private final BasePanel basePanel;\n+    private final AbstractGroup editedGroup;\n+\n+    private final Character keywordDelimiter;\n+\n+    public GroupDialogViewModel(DialogService dialogService, BasePanel basePanel, JabRefPreferences preferences, AbstractGroup editedGroup) {\n+        this.dialogService = dialogService;\n+        this.preferences = preferences;\n+        this.basePanel = basePanel;\n+        this.editedGroup = editedGroup;\n+\n+        this.keywordDelimiter = Globals.prefs.getKeywordDelimiter();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxNzg1MA=="}, "originalCommit": {"oid": "3579f6e71acd757b12acb691c30fa29b2528e136"}, "originalPosition": 116}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MzAwMDQ5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/jabref/gui/groups/GroupDialogView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQxNjo0NToxNVrOFhwkmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQxNjo0NToxNVrOFhwkmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0MzEzMQ==", "bodyText": "Can you please inline these constructors that use global variables (let the caller care where to get them).", "url": "https://github.com/JabRef/jabref/pull/5826#discussion_r370943131", "createdAt": "2020-01-25T16:45:15Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/groups/GroupDialogView.java", "diffHunk": "@@ -0,0 +1,184 @@\n+package org.jabref.gui.groups;\n+\n+import javafx.application.Platform;\n+import javafx.fxml.FXML;\n+import javafx.scene.control.ButtonType;\n+import javafx.scene.control.CheckBox;\n+import javafx.scene.control.ColorPicker;\n+import javafx.scene.control.ComboBox;\n+import javafx.scene.control.RadioButton;\n+import javafx.scene.control.TextField;\n+\n+import org.jabref.Globals;\n+import org.jabref.JabRefGUI;\n+import org.jabref.gui.BasePanel;\n+import org.jabref.gui.DialogService;\n+import org.jabref.gui.util.BaseDialog;\n+import org.jabref.gui.util.IconValidationDecorator;\n+import org.jabref.gui.util.ViewModelListCellFactory;\n+import org.jabref.logic.l10n.Localization;\n+import org.jabref.model.groups.AbstractGroup;\n+import org.jabref.model.groups.GroupHierarchyType;\n+import org.jabref.preferences.JabRefPreferences;\n+\n+import com.airhacks.afterburner.views.ViewLoader;\n+import de.saxsys.mvvmfx.utils.validation.visualization.ControlsFxVisualizer;\n+\n+public class GroupDialogView extends BaseDialog<AbstractGroup> {\n+\n+    // Basic Settings\n+    @FXML private TextField nameField;\n+    @FXML private TextField descriptionField;\n+    @FXML private TextField iconField;\n+    @FXML private ColorPicker colorField;\n+    @FXML private ComboBox<GroupHierarchyType> hierarchicalContextCombo;\n+\n+    // Type\n+    @FXML private RadioButton explicitRadioButton;\n+    @FXML private RadioButton keywordsRadioButton;\n+    @FXML private RadioButton searchRadioButton;\n+    @FXML private RadioButton autoRadioButton;\n+    @FXML private RadioButton texRadioButton;\n+\n+    // Option Groups\n+    @FXML private TextField keywordGroupSearchTerm;\n+    @FXML private TextField keywordGroupSearchField;\n+    @FXML private CheckBox keywordGroupCaseSensitive;\n+    @FXML private CheckBox keywordGroupRegex;\n+\n+    @FXML private TextField searchGroupSearchTerm;\n+    @FXML private CheckBox searchGroupCaseSensitive;\n+    @FXML private CheckBox searchGroupRegex;\n+\n+    @FXML private RadioButton autoGroupKeywordsOption;\n+    @FXML private TextField autoGroupKeywordsField;\n+    @FXML private TextField autoGroupKeywordsDeliminator;\n+    @FXML private TextField autoGroupKeywordsHierarchicalDeliminator;\n+    @FXML private RadioButton autoGroupPersonsOption;\n+    @FXML private TextField autoGroupPersonsField;\n+\n+    @FXML private TextField texGroupFilePath;\n+\n+    private final ControlsFxVisualizer validationVisualizer = new ControlsFxVisualizer();\n+    private final GroupDialogViewModel viewModel;\n+\n+    public GroupDialogView(DialogService dialogService, BasePanel basePanel, JabRefPreferences prefs, AbstractGroup editedGroup) {\n+        viewModel = new GroupDialogViewModel(dialogService, basePanel, prefs, editedGroup);\n+\n+        ViewLoader.view(this)\n+                  .load()\n+                  .setAsDialogPane(this);\n+\n+        if (editedGroup == null) {\n+            this.setTitle(Localization.lang(\"Add subgroup\"));\n+        } else {\n+            this.setTitle(Localization.lang(\"Edit group\") + \" \" + editedGroup.getName());\n+        }\n+\n+        setResultConverter(viewModel::resultConverter);\n+\n+        getDialogPane().getButtonTypes().setAll(ButtonType.OK, ButtonType.CANCEL);\n+\n+        getDialogPane().getScene().getWindow().sizeToScene();\n+    }\n+\n+    public GroupDialogView(DialogService dialogService, AbstractGroup editedGroup) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c3c6e9a91713fd7198a12376bc98bbafa080a0"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2088, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}