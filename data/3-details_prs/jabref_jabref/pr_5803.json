{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTIzOTQ5", "number": 5803, "title": "Add select all buttons to change dialog", "bodyText": "when merging entries\nFixes koppor#385\n\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for bigger UI changes)\n Checked documentation: Is the information available and up to date? If not: Issue created at https://github.com/JabRef/user-documentation/issues.", "createdAt": "2020-01-01T22:51:24Z", "url": "https://github.com/JabRef/jabref/pull/5803", "merged": true, "mergeCommit": {"oid": "f11949f87d9cffc8cd30d1f08fce5cc6153bbf21"}, "closed": true, "closedAt": "2020-01-03T14:29:16Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2NOALAH2gAyMzU4NTIzOTQ5OjVlNDNkYjdlZTFiODhlZTIxZDcwYzExYWVmNjdkNTQ0YzlhNjhlODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb2vGdbAH2gAyMzU4NTIzOTQ5Ojg2ODIzYzBiM2VmM2QwNjFjNjY4YTJlNzIwZWRhYmVhNTBjMGNlNjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e43db7ee1b88ee21d70c11aef67d544c9a68e85", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/5e43db7ee1b88ee21d70c11aef67d544c9a68e85", "committedDate": "2020-01-01T22:50:54Z", "message": "Add select all buttons to change dialog\n\nwhen merging entries\nFixes https://github.com/koppor/jabref/issues/385"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3fa46e87a57f0dd73e69f0d05f4808aefd2c897", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/b3fa46e87a57f0dd73e69f0d05f4808aefd2c897", "committedDate": "2020-01-01T22:57:21Z", "message": "fix l10n"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9618e971eefda8acc1f5e15e18abd3b21efb99a8", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/9618e971eefda8acc1f5e15e18abd3b21efb99a8", "committedDate": "2020-01-02T00:31:50Z", "message": "add buttons for selecting all changes from jabref or disk\n\nTODO: Hide checkbox when switching between entry modified and added/deleted"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "committedDate": "2020-01-02T23:19:12Z", "message": "make merge entries column left right arrows clickable for select all\nadd mark/uunmark all to the left side"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDQ4Mjg2", "url": "https://github.com/JabRef/jabref/pull/5803#pullrequestreview-338048286", "createdAt": "2020-01-03T11:50:33Z", "commit": {"oid": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMTo1MDozM1rOFZ-mFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMTo1Mzo0MFrOFZ-onQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc4NDI3OA==", "bodyText": "I think there is a selectFirst method.", "url": "https://github.com/JabRef/jabref/pull/5803#discussion_r362784278", "createdAt": "2020-01-03T11:50:33Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/collab/ChangeDisplayDialog.java", "diffHunk": "@@ -21,47 +25,68 @@\n \n class ChangeDisplayDialog extends BaseDialog<Boolean> {\n \n-    private final ListView<DatabaseChangeViewModel> tree;\n+    private final ListView<DatabaseChangeViewModel> changesList;\n     private final BorderPane infoPanel = new BorderPane();\n     private final CheckBox cb = new CheckBox(Localization.lang(\"Accept change\"));\n \n     public ChangeDisplayDialog(BibDatabaseContext database, List<DatabaseChangeViewModel> changes) {\n         this.setTitle(Localization.lang(\"External changes\"));\n         this.getDialogPane().setPrefSize(800, 600);\n \n-        tree = new ListView<>(FXCollections.observableArrayList(changes));\n-        tree.setPrefWidth(160);\n-        EasyBind.subscribe(tree.getSelectionModel().selectedItemProperty(), this::selectedChangeChanged);\n+        changesList = new ListView<>(FXCollections.observableArrayList(changes));\n+        changesList.setPrefWidth(200);\n+        EasyBind.subscribe(changesList.getSelectionModel().selectedItemProperty(), this::selectedChangeChanged);\n \n         SplitPane pane = new SplitPane();\n         pane.setDividerPositions(0.2);\n-        ScrollPane scroll = new ScrollPane(tree);\n-        scroll.setFitToHeight(true);\n-        scroll.setFitToWidth(true);\n-        pane.getItems().addAll(scroll, infoPanel);\n-        pane.setResizableWithParent(scroll, false);\n \n-        getDialogPane().setContent(pane);\n+        Button selectAllChangesFromDisk = new Button(Localization.lang(\"Mark all changes as accepted\"));\n+        selectAllChangesFromDisk.setMinWidth(Region.USE_PREF_SIZE);\n+        selectAllChangesFromDisk.setOnAction(evt -> {\n+            for (DatabaseChangeViewModel change : changes) {\n+                change.setAccepted(true);\n+            }\n+        });\n+        Button unselectAllAcceptChanges = new Button(Localization.lang(\"Unmark all changes\"));\n+        unselectAllAcceptChanges.setOnAction(evt -> {\n+            for (DatabaseChangeViewModel change : changes) {\n+                change.setAccepted(false);\n+            }\n+        });\n \n+        VBox leftContent = new VBox(changesList,\n+                                    selectAllChangesFromDisk,\n+                                    unselectAllAcceptChanges);\n+\n+        ScrollPane leftScroll = new ScrollPane(leftContent);\n+        leftScroll.setFitToHeight(true);\n+        leftScroll.setFitToWidth(true);\n+\n+        pane.getItems().addAll(leftScroll, infoPanel);\n+        pane.setResizableWithParent(leftScroll, false);\n+\n+        getDialogPane().setContent(pane);\n \n         Label rootInfo = new Label(Localization.lang(\"Select the tree nodes to view and accept or reject changes\") + '.');\n         infoPanel.setCenter(rootInfo);\n-        tree.getSelectionModel().select(0);\n+        changesList.getSelectionModel().select(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc4NDkyNQ==", "bodyText": "This is no longer needed now, right?", "url": "https://github.com/JabRef/jabref/pull/5803#discussion_r362784925", "createdAt": "2020-01-03T11:53:40Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/collab/EntryChangeViewModel.java", "diffHunk": "@@ -39,6 +41,19 @@ public EntryChangeViewModel(BibEntry entry, BibEntry newEntry, BibDatabaseContex\n \n     }\n \n+    /**\n+     *   We override this here to select the radio buttons accordingly\n+     */\n+    @Override\n+    public void setAccepted(boolean accepted) {\n+        super.setAccepted(accepted);\n+        if (accepted) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86823c0b3ef3d061c668a2e720edabea50c0ce69", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/86823c0b3ef3d061c668a2e720edabea50c0ce69", "committedDate": "2020-01-03T14:19:26Z", "message": "fix test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 506, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}