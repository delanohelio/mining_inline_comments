{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMzcxODU5", "number": 7151, "title": "Fix for issue 6959", "bodyText": "Fixes #6959 implementing the method needsSharedDatabase in the ActionHelper and then binding it in the class PullChangesFromSharedDatabase. This solution prevents the user from clicking \"Pull changes from database\" if a shared database is not present.\nWhen the DatabaseLocation is local:\n\nWhen the DatabaseLocation is shared:\n\nWhen there is no library open:\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-12-03T00:22:01Z", "url": "https://github.com/JabRef/jabref/pull/7151", "merged": true, "mergeCommit": {"oid": "eb5c8ca33a608a4a20b614d8e3bdc4bc17413b3e"}, "closed": true, "closedAt": "2020-12-04T08:51:28Z", "author": {"login": "luis-valdez"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiVc0ugH2gAyNTMxMzcxODU5OjEyOTBhNDBkZmY1MDI5MDlhMzhjN2MyYjZiOGRmNDU0MGZkOTRjOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdip1OLAH2gAyNTMxMzcxODU5OmJkZTlkNTU3Yzc1ZWNiODViYzJkZjczOWEzNmIxZWRmMDI3OTJiYzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1290a40dff502909a38c7c2b6b8df4540fd94c92", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/1290a40dff502909a38c7c2b6b8df4540fd94c92", "committedDate": "2020-12-02T21:30:09Z", "message": "Add needsSharedDatabase to validate if DatabaseLocation is shared"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139115ba788eddf36a36fed1064be8b4337dc166", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/139115ba788eddf36a36fed1064be8b4337dc166", "committedDate": "2020-12-03T00:05:31Z", "message": "Update CHANGELOG.md with fix for pullingChangesFromSharedDb exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzOTA1MDU2", "url": "https://github.com/JabRef/jabref/pull/7151#pullrequestreview-543905056", "createdAt": "2020-12-03T12:30:06Z", "commit": {"oid": "139115ba788eddf36a36fed1064be8b4337dc166"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozMDowNlrOH-ZTmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozNTozN1rOH-Zg5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE4ODM3OA==", "bodyText": "The changlog should be understandable for normal users, so please remove the \"boolean expression\" part.", "url": "https://github.com/JabRef/jabref/pull/7151#discussion_r535188378", "createdAt": "2020-12-03T12:30:06Z", "author": {"login": "tobiasdiez"}, "path": "CHANGELOG.md", "diffHunk": "@@ -11,7 +11,7 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n ## [Unreleased]\n \n ### Added\n-\n+- We added a Boolean Expression to validate if the current database location is shared, preventing an exception when Pulling Changes From Shared Database. [#6959](https://github.com/JabRef/jabref/issues/6959)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139115ba788eddf36a36fed1064be8b4337dc166"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MTc4MA==", "bodyText": "Please use Easybind.map(stateManager.activeDatabaseProperty(), ...) instead of createBooleanBinding. It's a bit more readable and shorter.", "url": "https://github.com/JabRef/jabref/pull/7151#discussion_r535191780", "createdAt": "2020-12-03T12:35:37Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/actions/ActionHelper.java", "diffHunk": "@@ -26,6 +27,13 @@ public static BooleanExpression needsDatabase(StateManager stateManager) {\n         return stateManager.activeDatabaseProperty().isPresent();\n     }\n \n+    public static BooleanExpression needsSharedDatabase(StateManager stateManager){\n+        var binding = Bindings.createBooleanBinding(() ->\n+                        stateManager.activeDatabaseProperty().getValue().filter(context -> context.getLocation() == DatabaseLocation.SHARED).isPresent(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139115ba788eddf36a36fed1064be8b4337dc166"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6f88e045b533bcb81159656f0afa4bf952d3851", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/b6f88e045b533bcb81159656f0afa4bf952d3851", "committedDate": "2020-12-03T19:10:12Z", "message": "Refactor needsSharedDatabase to use EasyBind.map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394762ee1c7cb47d026d5db6dde8b966ce31bd6c", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/394762ee1c7cb47d026d5db6dde8b966ce31bd6c", "committedDate": "2020-12-03T19:13:04Z", "message": "Change Boolean Expression for validation to simplify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab", "committedDate": "2020-12-03T20:01:04Z", "message": "Remove whitespace to meet checkstyle criteria"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Mzg3MjAx", "url": "https://github.com/JabRef/jabref/pull/7151#pullrequestreview-544387201", "createdAt": "2020-12-03T20:23:35Z", "commit": {"oid": "452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Mzg4NDYy", "url": "https://github.com/JabRef/jabref/pull/7151#pullrequestreview-544388462", "createdAt": "2020-12-03T20:24:18Z", "commit": {"oid": "452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dfa820e29ed62e949beeada7532b23f0508f43b", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/5dfa820e29ed62e949beeada7532b23f0508f43b", "committedDate": "2020-12-03T21:07:30Z", "message": "Refactor import order to meet checkstyle criteria"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bde9d557c75ecb85bc2df739a36b1edf02792bc4", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/bde9d557c75ecb85bc2df739a36b1edf02792bc4", "committedDate": "2020-12-03T21:14:54Z", "message": "Add blankline after heading to meet checkstyle criteria"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4874, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}