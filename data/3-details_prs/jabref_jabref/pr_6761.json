{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MzMyMTE4", "number": 6761, "title": "Remember last choice of download files in import dialog", "bodyText": "The choice to download linked files in the import dialog is now remembered, and automatically restored. So if you downloaded the files the last time, the option is selected on the next import. This made the corresponding option in the preference dialog obsolete.\nRest is a bit of code cleanup.\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-08-13T11:44:39Z", "url": "https://github.com/JabRef/jabref/pull/6761", "merged": true, "mergeCommit": {"oid": "40d2834d801df2d778d8d978da28615d39bedf0b"}, "closed": true, "closedAt": "2020-08-18T06:25:30Z", "author": {"login": "tobiasdiez"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-egAhAH2gAyNDY3MzMyMTE4OjA4ZjhlYWIzMzdkMmMwOGUzYzY2NTU4Njk5ZmUxNjA3NWFlZGNlMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-n9EJgFqTQ2NzE3MzkwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08f8eab337d2c08e3c66558699fe16075aedce27", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/08f8eab337d2c08e3c66558699fe16075aedce27", "committedDate": "2020-08-13T11:41:30Z", "message": "Remember last choice of download files in import dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "committedDate": "2020-08-13T11:50:39Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2ODMwNzUx", "url": "https://github.com/JabRef/jabref/pull/6761#pullrequestreview-466830751", "createdAt": "2020-08-13T14:42:49Z", "commit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNDo0Mjo0OVrOHAO0YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNDo0Mjo0OVrOHAO0YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDAwNDgzMw==", "bodyText": "Is there a reason you removed the \"Download linked online files\"`?", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470004833", "createdAt": "2020-08-13T14:42:49Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/gui/preferences/ImportTab.fxml", "diffHunk": "@@ -28,8 +27,7 @@\n                   prefWidth=\"300\" minWidth=\"300\" maxWidth=\"300\"/>\n \n         <Label text=\"%File directory pattern\" GridPane.rowIndex=\"1\"/>\n-        <TextField fx:id=\"fileDirPattern\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"1\"\n+        <TextField fx:id=\"fileDirectoryPattern\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"1\"\n                    prefWidth=\"300\" minWidth=\"300\" maxWidth=\"300\"/>\n-        <CheckBox fx:id=\"downloadLinkedFiles\" text=\"%Download linked online files\" GridPane.rowIndex=\"2\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MDM1MDMz", "url": "https://github.com/JabRef/jabref/pull/6761#pullrequestreview-467035033", "createdAt": "2020-08-13T18:41:22Z", "commit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MTczOTA3", "url": "https://github.com/JabRef/jabref/pull/6761#pullrequestreview-467173907", "createdAt": "2020-08-13T22:30:20Z", "commit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMjozMDoyMFrOHAf33Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMjo0MToxMlrOHAgGeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI4NDI1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n          \n          \n            \n                    this.shouldDownloadLinkedFiles = shouldDownloadLinkedFiles;\n          \n          \n            \n                }\n          \n          \n            \n                public FilePreferences withShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n          \n          \n            \n                    return new FilePreferences(this.user,\n          \n          \n            \n                                       this.mainFileDirectory,\n          \n          \n            \n                                       this.bibLocationAsPrimary,\n          \n          \n            \n                                       this.fileNamePattern,\n          \n          \n            \n                                       this.fileDirPattern,\n          \n          \n            \n                                       shouldDownloadLinkedFiles);\n          \n          \n            \n                }", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470284253", "createdAt": "2020-08-13T22:30:20Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/model/metadata/FilePreferences.java", "diffHunk": "@@ -52,7 +52,11 @@ public String getFileDirPattern() {\n         return fileDirPattern;\n     }\n \n-    public boolean getDownloadLinkedFiles() {\n-        return downloadLinkedFiles;\n+    public boolean shouldDownloadLinkedFiles() {\n+        return shouldDownloadLinkedFiles;\n+    }\n+\n+    public void setShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n+        this.shouldDownloadLinkedFiles = shouldDownloadLinkedFiles;\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI4Nzk5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    filePreferences.setShouldDownloadLinkedFiles(shouldDownloadFiles);\n          \n          \n            \n                    preferences.storeFilePreferences(filePreferences);\n          \n          \n            \n                    storeFilePreferences(filePreferences.withShouldDownloadLinkedFiles(shouldDownloadFiles));", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470287994", "createdAt": "2020-08-13T22:41:12Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/importer/ImportEntriesViewModel.java", "diffHunk": "@@ -130,10 +131,15 @@ public void importEntries(List<BibEntry> entriesToImport, boolean downloadFiles)\n             buildImportHandlerThenImportEntries(entriesToImport);\n         }\n \n-        if (downloadFiles) {\n+        // Remember the selection in the dialog\n+        FilePreferences filePreferences = preferences.getFilePreferences();\n+        filePreferences.setShouldDownloadLinkedFiles(shouldDownloadFiles);\n+        preferences.storeFilePreferences(filePreferences);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 97, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}