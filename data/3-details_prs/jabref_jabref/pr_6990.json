{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NTAzOTc1", "number": 6990, "title": "Fix DOI fetcher and add documentation on fetcher trust levels", "bodyText": "Follow-up to This reverts #6937 in order to add documentation on our decisions taken in 2018.. That PR added a workaround to thing introduced in 15c7981.\nIn this PR,\n\nA bug in DoiResultion is fixed: String similarity was used (where it should not have been)\nDocumentation on fetcher trust levels is added\n\nSmall, unlreated changes:\n\nFix reading of keys from build.properties. Gradle wrote literally null in the generated build.properties. It was changed to contain \"\" instead of \"null\" for an unknown key\nFix typo \"chache\"\n\nSide note: It seems that 15c7981 accidently committed to the master branch and not using a PR.\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-10-07T20:39:02Z", "url": "https://github.com/JabRef/jabref/pull/6990", "merged": true, "mergeCommit": {"oid": "8a66328e115dee4b0c0ed9c74800822cb07b4dc1"}, "closed": true, "closedAt": "2021-01-16T17:08:17Z", "author": {"login": "koppor"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQTIUDAH2gAyNDk5NTAzOTc1OjljODM3MTQ5MjhhOTY2NGQwYWYyNThhNTI1Mzc1NDRkMmUyNWUyYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvaMjRgFqTU2NjIxNjQxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/9c83714928a9664d0af258a52537544d2e25e2bc", "committedDate": "2020-10-07T20:37:18Z", "message": "Add documentation on fetcher trust levels"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NDYwNDQx", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-504460441", "createdAt": "2020-10-08T06:24:54Z", "commit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNjoyNDo1NFrOHePmTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNjoyNDo1NFrOHePmTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQ3NDg5NQ==", "bodyText": "This is not entirely correct AFAICT. The problem with getting proceedings instead of the individual paper exists only for Springer.\nOther publishers (such as IEEE) can be added here if a tailored fetcher for them exists that also fetches a PDF for a DOI. Such a tailored fetcher will run in parallel with this class here and get at least the same result, if not a better one, but with a lower TrustLevel (like for Springer DOIs). Therefore, if the DOI at hand leads to one of those publishers, we can skip the DOI search via this class here.", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501474895", "createdAt": "2020-10-08T06:24:54Z", "author": {"login": "Toromtomtom"}, "path": "src/main/java/org/jabref/logic/importer/fetcher/DoiResolution.java", "diffHunk": "@@ -33,7 +33,10 @@\n     private static final Logger LOGGER = LoggerFactory.getLogger(DoiResolution.class);\n \n     /**\n-     * Hosts for which tailored fetchers exist, so this fetcher is not needed.\n+     * A DOI leads to the page of the paper. We assume that there is the PDF of the paper.\n+     * Thus, the DOI fetcher is ranked highest (see {@link TrustLevel}).\n+     * Some publishers do not publish the PDF of the paper, but the full proceedings on the page\n+     * of the paper. For these publishers, we need to skip the DOI search.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NDk3ODE3", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-504497817", "createdAt": "2020-10-08T07:29:30Z", "commit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzoyOTozMFrOHeRZgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzozMTozOVrOHeRdsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUwNDM4NA==", "bodyText": "It would be good if these trust levels are described in more detail, i.e. what are the criteria.", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501504384", "createdAt": "2020-10-08T07:29:30Z", "author": {"login": "tobiasdiez"}, "path": "docs/advanced-reading/fetchers.md", "diffHunk": "@@ -14,6 +14,42 @@ Fetchers are the implementation of the [search using online services](https://do\n \n On Windows, you have to log-off and log-on to let IntelliJ know about the environment variable change. Execute the gradle task \"processResources\" in the group \"others\" within IntelliJ to ensure the values have been correctly written. Now, the fetcher tests should run without issues.\n \n+## Fetcher prioritization\n+\n+- all fetchers run in parallel\n+- the result with the highest priority wins\n+- `InterruptedException` | `ExecutionException` | `CancellationException` are ignored\n+\n+### Trust Levels\n+\n+- SOURCE (highest)\n+- PUBLISHER", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUwNDYyNw==", "bodyText": "That may change in the future, and I wouldn't add the current levels here (one source of trust: code).", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501504627", "createdAt": "2020-10-08T07:29:59Z", "author": {"login": "tobiasdiez"}, "path": "docs/advanced-reading/fetchers.md", "diffHunk": "@@ -14,6 +14,42 @@ Fetchers are the implementation of the [search using online services](https://do\n \n On Windows, you have to log-off and log-on to let IntelliJ know about the environment variable change. Execute the gradle task \"processResources\" in the group \"others\" within IntelliJ to ensure the values have been correctly written. Now, the fetcher tests should run without issues.\n \n+## Fetcher prioritization\n+\n+- all fetchers run in parallel\n+- the result with the highest priority wins\n+- `InterruptedException` | `ExecutionException` | `CancellationException` are ignored\n+\n+### Trust Levels\n+\n+- SOURCE (highest)\n+- PUBLISHER\n+- PREPRINT\n+- META_SEARCH\n+- UNKNOWN (lowest)\n+\n+### Current trust levels\n+\n+All fetchers are contained in the package `org.jabref.logic.importer.fetcher`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUwNTQ1OQ==", "bodyText": "This only applies to download fetcher, right?", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501505459", "createdAt": "2020-10-08T07:31:39Z", "author": {"login": "tobiasdiez"}, "path": "docs/advanced-reading/fetchers.md", "diffHunk": "@@ -14,6 +14,42 @@ Fetchers are the implementation of the [search using online services](https://do\n \n On Windows, you have to log-off and log-on to let IntelliJ know about the environment variable change. Execute the gradle task \"processResources\" in the group \"others\" within IntelliJ to ensure the values have been correctly written. Now, the fetcher tests should run without issues.\n \n+## Fetcher prioritization\n+\n+- all fetchers run in parallel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTQwODIy", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-504540822", "createdAt": "2020-10-08T08:25:42Z", "commit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwODoyNTo0MlrOHeTZCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwODoyNTo0MlrOHeTZCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUzNzAzNQ==", "bodyText": "Source as the DOI is always forwarded to the correct publisher page for the paper", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501537035", "createdAt": "2020-10-08T08:25:42Z", "author": {"login": "stefan-kolb"}, "path": "docs/advanced-reading/fetchers.md", "diffHunk": "@@ -14,6 +14,42 @@ Fetchers are the implementation of the [search using online services](https://do\n \n On Windows, you have to log-off and log-on to let IntelliJ know about the environment variable change. Execute the gradle task \"processResources\" in the group \"others\" within IntelliJ to ensure the values have been correctly written. Now, the fetcher tests should run without issues.\n \n+## Fetcher prioritization\n+\n+- all fetchers run in parallel\n+- the result with the highest priority wins\n+- `InterruptedException` | `ExecutionException` | `CancellationException` are ignored\n+\n+### Trust Levels\n+\n+- SOURCE (highest)\n+- PUBLISHER\n+- PREPRINT\n+- META_SEARCH\n+- UNKNOWN (lowest)\n+\n+### Current trust levels\n+\n+All fetchers are contained in the package `org.jabref.logic.importer.fetcher`.\n+Here we list the trust levels of some of them:\n+\n+- DOI: SOURCE, because it is the ultimate source", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTQxNjk5", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-504541699", "createdAt": "2020-10-08T08:26:40Z", "commit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwODoyNjo0MFrOHeTbXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwODoyNjo0MFrOHeTbXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUzNzYyOQ==", "bodyText": "Might be wrong publisher or might search based on string similarity not always on DOI", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r501537629", "createdAt": "2020-10-08T08:26:40Z", "author": {"login": "stefan-kolb"}, "path": "docs/advanced-reading/fetchers.md", "diffHunk": "@@ -14,6 +14,42 @@ Fetchers are the implementation of the [search using online services](https://do\n \n On Windows, you have to log-off and log-on to let IntelliJ know about the environment variable change. Execute the gradle task \"processResources\" in the group \"others\" within IntelliJ to ensure the values have been correctly written. Now, the fetcher tests should run without issues.\n \n+## Fetcher prioritization\n+\n+- all fetchers run in parallel\n+- the result with the highest priority wins\n+- `InterruptedException` | `ExecutionException` | `CancellationException` are ignored\n+\n+### Trust Levels\n+\n+- SOURCE (highest)\n+- PUBLISHER\n+- PREPRINT\n+- META_SEARCH\n+- UNKNOWN (lowest)\n+\n+### Current trust levels\n+\n+All fetchers are contained in the package `org.jabref.logic.importer.fetcher`.\n+Here we list the trust levels of some of them:\n+\n+- DOI: SOURCE, because it is the ultimate source\n+- ScienceDirect: Publisher\n+- Springer: Publisher", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c83714928a9664d0af258a52537544d2e25e2bc"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bab0d27d92cec326bd6c0f510b7a1c885aa736c", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/0bab0d27d92cec326bd6c0f510b7a1c885aa736c", "committedDate": "2021-01-09T22:02:04Z", "message": "Merge remote-tracking branch 'origin/master' into add-fetcher-doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e8417534e1a679b9108f8c88e1d6fca14d218c4", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/9e8417534e1a679b9108f8c88e1d6fca14d218c4", "committedDate": "2021-01-09T22:58:08Z", "message": "Avoid 'null' as evaluation result if env variable is not defined"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca98634410d9069c25d0e835f7786e70ca68f0dc", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/ca98634410d9069c25d0e835f7786e70ca68f0dc", "committedDate": "2021-01-09T22:58:34Z", "message": "Refine documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a39f3dcfc58a1d9a66397f3f70ae8e14ce30abfc", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/a39f3dcfc58a1d9a66397f3f70ae8e14ce30abfc", "committedDate": "2021-01-10T00:25:09Z", "message": "Improve DOIResolution\n\n- remove similarity of links\n- add citation meta tag <meta name=\"citation_pdf_url\">"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9682a6e98bb8edc8ec8c138df5b6c429a48f38e4", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/9682a6e98bb8edc8ec8c138df5b6c429a48f38e4", "committedDate": "2021-01-10T00:18:23Z", "message": "Improve DOIResolution\n\n- remove similarity of links\n- add citation meta tag <meta name=\"citation_pdf_url\">"}, "afterCommit": {"oid": "a39f3dcfc58a1d9a66397f3f70ae8e14ce30abfc", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/a39f3dcfc58a1d9a66397f3f70ae8e14ce30abfc", "committedDate": "2021-01-10T00:25:09Z", "message": "Improve DOIResolution\n\n- remove similarity of links\n- add citation meta tag <meta name=\"citation_pdf_url\">"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5746a2fb94edbd2cf0c0f6011e8fc55615e25de", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/b5746a2fb94edbd2cf0c0f6011e8fc55615e25de", "committedDate": "2021-01-10T00:42:19Z", "message": "Fix test\n\nDefault value is \"\" and not \"null\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6e0d68a2606791a639977e5d136567ea3912d2e", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/e6e0d68a2606791a639977e5d136567ea3912d2e", "committedDate": "2021-01-10T00:47:15Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a14a4721ea5388bd448eb000d4a5b6940def7f1", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/1a14a4721ea5388bd448eb000d4a5b6940def7f1", "committedDate": "2021-01-10T00:47:22Z", "message": "Unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0ODcxOTMw", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-564871930", "createdAt": "2021-01-10T15:02:48Z", "commit": {"oid": "1a14a4721ea5388bd448eb000d4a5b6940def7f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQxNTowMjo0OVrOIQ43Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQxNTowMjo0OVrOIQ43Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU3OTc3OQ==", "bodyText": "Why was this test removed?", "url": "https://github.com/JabRef/jabref/pull/6990#discussion_r554579779", "createdAt": "2021-01-10T15:02:49Z", "author": {"login": "tobiasdiez"}, "path": "src/test/java/org/jabref/logic/importer/fetcher/DoiResolutionTest.java", "diffHunk": "@@ -38,13 +38,13 @@ void linkWithPdfInTitleTag() throws IOException {\n     @Test\n     void linkWithPdfStringLeadsToFulltext() throws IOException {\n         entry.setField(StandardField.DOI, \"10.1002/acr2.11101\");\n-        assertEquals(Optional.of(new URL(\"https://onlinelibrary.wiley.com/doi/epdf/10.1002/acr2.11101\")), finder.findFullText(entry));\n+        assertEquals(Optional.of(new URL(\"https://onlinelibrary.wiley.com/doi/pdf/10.1002/acr2.11101\")), finder.findFullText(entry));\n     }\n \n     @Test\n-    void multipleLinksWithSmallEditDistanceLeadToFulltext() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a14a4721ea5388bd448eb000d4a5b6940def7f1"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NzEwNjUw", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-565710650", "createdAt": "2021-01-11T20:26:35Z", "commit": {"oid": "1a14a4721ea5388bd448eb000d4a5b6940def7f1"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b6a6d330b65d330389dc8dfbec995c36ebe0c9", "author": {"user": {"login": "stefan-kolb", "name": "Stefan Kolb"}}, "url": "https://github.com/JabRef/jabref/commit/23b6a6d330b65d330389dc8dfbec995c36ebe0c9", "committedDate": "2021-01-11T20:44:18Z", "message": "Merge branch 'master' into add-fetcher-doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2MjE2NDE1", "url": "https://github.com/JabRef/jabref/pull/6990#pullrequestreview-566216415", "createdAt": "2021-01-12T12:22:55Z", "commit": {"oid": "23b6a6d330b65d330389dc8dfbec995c36ebe0c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 34, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}