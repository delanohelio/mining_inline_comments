{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1ODY5NDc5", "number": 6809, "title": "Fixes #6705 , added icon for multiple identifiers", "bodyText": "Added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\nIssue 1 :  Icon for linked identifiers does not change when more than one entry is linked\nThe WEB Material design glyphicon did not have a \"plural\" variant so thought will change to this for singular variant\n\nAnd for the plural variant used this \ud83d\ude04  Can change this to something else too\n\nIssue 2 :\nMade changes so that when only one entry is available the link is opened immediately without the menu\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-08-30T06:12:14Z", "url": "https://github.com/JabRef/jabref/pull/6809", "merged": true, "mergeCommit": {"oid": "4ade0000c887712be37969bc0ebdc0187114fe59"}, "closed": true, "closedAt": "2020-09-01T10:54:08Z", "author": {"login": "hemantgs"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdD5LjcgBqjM3MDcwOTMxODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdElG2TAH2gAyNDc1ODY5NDc5OjcyNzM2NTk2OGNmYzgyMGUwNDMzZDI4MTMyY2JjYjllMjJlYWJjNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fda4f7b222475855093f954ec3d68a6e3cfd5e3", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/8fda4f7b222475855093f954ec3d68a6e3cfd5e3", "committedDate": "2020-08-30T06:11:02Z", "message": "Fixes #6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum"}, "afterCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/f8e2ed809c8b4faca6e0a2a66b13b719df823661", "committedDate": "2020-08-30T07:35:44Z", "message": "Fixes 6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum\n\nFixed checkstyle errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzE2MjIw", "url": "https://github.com/JabRef/jabref/pull/6809#pullrequestreview-478716220", "createdAt": "2020-08-31T15:29:27Z", "commit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNToyOToyN1rOHJ9i6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTozNzo1MlrOHJ922g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwNzU5Mg==", "bodyText": "please remove this newline", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480207592", "createdAt": "2020-08-31T15:29:27Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/maintable/CellFactory.java", "diffHunk": "@@ -94,6 +98,7 @@ public CellFactory(ExternalFileTypes externalFileTypes, UndoManager undoManager)\n         icon = printedViewModel.getIcon();\n         // icon.setToolTipText(printedViewModel.getLocalization());\n         TABLE_ICONS.put(SpecialField.PRINTED, icon);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIxMjY5OA==", "bodyText": "The old code .withGraphic(this::createIdentifierGraphic) should still work.", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480212698", "createdAt": "2020-08-31T15:37:52Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/maintable/columns/LinkedIdentifierColumn.java", "diffHunk": "@@ -49,17 +50,31 @@ public LinkedIdentifierColumn(MainTableColumnModel model,\n         this.setResizable(false);\n         this.setCellValueFactory(cellData -> cellData.getValue().getLinkedIdentifiers());\n         new ValueTableCellFactory<BibEntryTableViewModel, Map<Field, String>>()\n-                .withGraphic(this::createIdentifierGraphic)\n+                .withGraphic(values -> createIdentifierGraphic(values))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4OTYzMzAw", "url": "https://github.com/JabRef/jabref/pull/6809#pullrequestreview-478963300", "createdAt": "2020-08-31T21:20:32Z", "commit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMToyMDozMlrOHKJoWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMToyODowNlrOHKJ1HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTU5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (values.size() > 1) {\n          \n          \n            \n                        return cellFactory.getTableIcon(StandardField.URLS);\n          \n          \n            \n                    } else if (values.size() == 1) {\n          \n          \n            \n                        return cellFactory.getTableIcon(StandardField.URL);\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return null;\n          \n          \n            \n                    }\n          \n          \n            \n                    if (values.size() > 1) {\n          \n          \n            \n                        return IconTheme.JabRefIcons.MULTIPLE_LINKS.getGraphicNode();\n          \n          \n            \n                    } else if (values.size() == 1) {\n          \n          \n            \n                        return IconTheme.JabRefIcons.LINK.getGraphicNode();\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return null;\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nWe talked in JabCon2020 a bit about this and we think that it would be better to directly load the icons here instead of introducing a new field URLS in StandardFields in the model package for a ui feature.", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480405593", "createdAt": "2020-08-31T21:20:32Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/maintable/columns/LinkedIdentifierColumn.java", "diffHunk": "@@ -49,17 +50,31 @@ public LinkedIdentifierColumn(MainTableColumnModel model,\n         this.setResizable(false);\n         this.setCellValueFactory(cellData -> cellData.getValue().getLinkedIdentifiers());\n         new ValueTableCellFactory<BibEntryTableViewModel, Map<Field, String>>()\n-                .withGraphic(this::createIdentifierGraphic)\n+                .withGraphic(values -> createIdentifierGraphic(values))\n                 .withTooltip(this::createIdentifierTooltip)\n                 .withMenu(this::createIdentifierMenu)\n+                .withOnMouseClickedEvent((entry, linkedFiles) -> event -> {\n+                    if ((event.getButton() == MouseButton.PRIMARY) && (linkedFiles.size() == 1)) {\n+                        // Open linked identifier directly only if 1 entry is preset\n+                        try {\n+                            for (Field field : linkedFiles.keySet()) {\n+                                JabRefDesktop.openExternalViewer(database, linkedFiles.get(field), field);\n+                            }\n+                        } catch (IOException e) {\n+                            dialogService.showErrorDialogAndWait(Localization.lang(\"Unable to open link.\"), e);\n+                        }\n+                    }\n+                })\n                 .install(this);\n     }\n \n     private Node createIdentifierGraphic(Map<Field, String> values) {\n-        if (values.isEmpty()) {\n-            return null;\n-        } else {\n+        if (values.size() > 1) {\n+            return cellFactory.getTableIcon(StandardField.URLS);\n+        } else if (values.size() == 1) {\n             return cellFactory.getTableIcon(StandardField.URL);\n+        } else {\n+            return null;\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTY4OQ==", "bodyText": "See above.", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480405689", "createdAt": "2020-08-31T21:20:47Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/model/entry/field/StandardField.java", "diffHunk": "@@ -123,6 +123,7 @@\n     TYPE(\"type\", FieldProperty.TYPE),\n     URI(\"uri\", \"URI\"),\n     URL(\"url\", \"URL\", FieldProperty.EXTERNAL, FieldProperty.VERBATIM),\n+    URLS(\"urls\", \"URLS\", FieldProperty.VERBATIM),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwODg2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - We fixed linked identifier icon inconsistency[#6705](https://github.com/JabRef/jabref/issues/6705)\n          \n          \n            \n            - We fixed the linked identifier icon inconsistency[#6705](https://github.com/JabRef/jabref/issues/6705)", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480408861", "createdAt": "2020-08-31T21:28:06Z", "author": {"login": "calixtus"}, "path": "CHANGELOG.md", "diffHunk": "@@ -108,7 +109,7 @@ Note that this project **does not** adhere to [Semantic Versioning](http://semve\n - We fixed an issue with the Science Direct fetcher where PDFs could not be downloaded. Fixes [#5860](https://github.com/JabRef/jabref/issues/5860)\n - We fixed an issue with the Library of Congress importer.\n - We fixed the [link to the external libraries listing](https://github.com/JabRef/jabref/blob/master/external-libraries.md) in the about dialog\n-\n+- We fixed linked identifier icon inconsistency[#6705](https://github.com/JabRef/jabref/issues/6705)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673b9f55fb5d4d5416e5d5ac81a759b5fa96a95a", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/673b9f55fb5d4d5416e5d5ac81a759b5fa96a95a", "committedDate": "2020-09-01T09:09:06Z", "message": "Fixes 6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum\n\nFixed checkstyle errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/f8e2ed809c8b4faca6e0a2a66b13b719df823661", "committedDate": "2020-08-30T07:35:44Z", "message": "Fixes 6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum\n\nFixed checkstyle errors"}, "afterCommit": {"oid": "4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "committedDate": "2020-09-01T09:09:07Z", "message": "Fixed checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b373ea912f823965c600caac5fad481e5225336", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/1b373ea912f823965c600caac5fad481e5225336", "committedDate": "2020-09-01T09:28:21Z", "message": "Fixed checkstyle errors\n\nFixed checkstyle errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "committedDate": "2020-09-01T09:09:07Z", "message": "Fixed checkstyle errors"}, "afterCommit": {"oid": "1b373ea912f823965c600caac5fad481e5225336", "author": {"user": {"login": "hemantgs", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/1b373ea912f823965c600caac5fad481e5225336", "committedDate": "2020-09-01T09:28:21Z", "message": "Fixed checkstyle errors\n\nFixed checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16ee90226abbe425aed972c87f33df799e1f3937", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/16ee90226abbe425aed972c87f33df799e1f3937", "committedDate": "2020-09-01T10:43:10Z", "message": "Remove unused icons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e94e4976f9b8fa71e1b40099bf9742e63a1cbd16", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/e94e4976f9b8fa71e1b40099bf9742e63a1cbd16", "committedDate": "2020-09-01T10:44:00Z", "message": "Fixed merge error in CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "727365968cfc820e0433d28132cbcb9e22eabc51", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/727365968cfc820e0433d28132cbcb9e22eabc51", "committedDate": "2020-09-01T10:46:54Z", "message": "Merge branch 'master' into ui-inconsistensies"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 130, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}