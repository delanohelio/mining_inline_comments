{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMzIwODQx", "number": 6771, "title": "Shared database synchronized by FocusChangedEvent", "bodyText": "This PR is related to #6663 and partly #4461.\nShared database synchronization event in DBMSSynchronizer is triggered by a FocusChangedEvent. This is added similar to FieldChangedEvent but has to be initiated from EntryEditor (?).\nI have manually tested the new code - and it does not work. Maybe we can discuss changes through this pull request.\nThank you for your help.", "createdAt": "2020-08-19T17:49:54Z", "url": "https://github.com/JabRef/jabref/pull/6771", "merged": true, "mergeCommit": {"oid": "c74c557ec78638b5a6db057c3fc94b2ef7f1a851"}, "closed": true, "closedAt": "2020-09-01T17:50:16Z", "author": {"login": "m-mauersberger"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAan2xAH2gAyNDcwMzIwODQxOjg3YWRlYzNiMDlhOWY2NWYzN2RhZTEzYjg0MjA2OWUzYzdhZjI5Y2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEpzS0AH2gAyNDcwMzIwODQxOmI3NmU3ZjIxYmQxYTljNDg4ZDBjNGE5OThkNDMyNDk1ZTVjODM0ZWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87adec3b09a9f65f37dae13b842069e3c7af29cd", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/87adec3b09a9f65f37dae13b842069e3c7af29cd", "committedDate": "2020-08-19T12:18:18Z", "message": "Added FocusChangedEvent, fired in BibEntry when setFocusedField is called. Focus is changed in EntryEditor.\nCoarseChangeFilter with no special function -> does not work with shared databases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03", "author": {"user": null}, "url": "https://github.com/JabRef/jabref/commit/0c895c166bfaa19d0f3ef00fc459eb6728523f03", "committedDate": "2020-08-19T14:05:41Z", "message": "Uncomment FieldChangedEvent listener."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQ1ODEy", "url": "https://github.com/JabRef/jabref/pull/6771#pullrequestreview-472945812", "createdAt": "2020-08-22T19:08:24Z", "commit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxOTowODoyNFrOHFHFqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxOTowODoyNFrOHFHFqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMTA2NQ==", "bodyText": "I think the problem is that you are listening to an Event from the EventBus which is nowhere fired", "url": "https://github.com/JabRef/jabref/pull/6771#discussion_r475121065", "createdAt": "2020-08-22T19:08:24Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/logic/shared/DBMSSynchronizer.java", "diffHunk": "@@ -136,6 +137,23 @@ public void listen(MetaDataChangedEvent event) {\n         }\n     }\n \n+    /**\n+     * Listening method. Updates an existing shared {@link BibEntry} by focus request.\n+     *\n+     * @param event {@link FocusChangedEvent} object\n+     */\n+    @Subscribe\n+    public void listen(FocusChangedEvent event) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQ1ODU4", "url": "https://github.com/JabRef/jabref/pull/6771#pullrequestreview-472945858", "createdAt": "2020-08-22T19:09:10Z", "commit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxOTowOToxMFrOHFHF6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxOTowOToxMFrOHFHF6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMTEyOA==", "bodyText": "See the eventBus.post method, the eventBus post method is reposinsible for firing the event.", "url": "https://github.com/JabRef/jabref/pull/6771#discussion_r475121128", "createdAt": "2020-08-22T19:09:10Z", "author": {"login": "Siedlerchr"}, "path": "src/main/java/org/jabref/model/database/event/CoarseChangeFilter.java", "diffHunk": "@@ -31,8 +31,10 @@ public synchronized void listen(@SuppressWarnings(\"unused\") BibDatabaseContextCh\n             // Only relay event if the field changes are more than one character or a new field is edited\n             FieldChangedEvent fieldChange = (FieldChangedEvent) event;\n             boolean isEditOnNewField = lastFieldChanged == null || !lastFieldChanged.equals(fieldChange.getField());\n+            // Only deltas of 1 registered by fieldChange\n+            boolean isMajorChange = fieldChange.getDelta() >= 1;\n \n-            if (fieldChange.getDelta() > 1 || isEditOnNewField) {\n+            if (isEditOnNewField) {\n                 lastFieldChanged = fieldChange.getField();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTkzMjc2", "url": "https://github.com/JabRef/jabref/pull/6771#pullrequestreview-472993276", "createdAt": "2020-08-23T08:53:21Z", "commit": {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c53ed5675c6da19aff7934a8b651153ea12b0a2f", "author": {"user": {"login": "m-mauersberger", "name": "Michael Mauersberger"}}, "url": "https://github.com/JabRef/jabref/commit/c53ed5675c6da19aff7934a8b651153ea12b0a2f", "committedDate": "2020-08-25T07:23:23Z", "message": "Removed FocusChangedEvent.java due to improper dependencies.\nIntroduced DelayTaskThrottler on CoarseChangeFilter."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "079f913eb1dbbd8bd9533f67a63f2e05125f2fb1", "author": {"user": {"login": "m-mauersberger", "name": "Michael Mauersberger"}}, "url": "https://github.com/JabRef/jabref/commit/079f913eb1dbbd8bd9533f67a63f2e05125f2fb1", "committedDate": "2020-08-27T07:14:07Z", "message": "Delete FocusChangedEvent.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a680ecb1a328b68007ff704dd2481ded9143d8dc", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/a680ecb1a328b68007ff704dd2481ded9143d8dc", "committedDate": "2020-09-01T16:02:45Z", "message": "Update EntryEditor.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "346d85a3a2f4ab60b024cd0a1623fc733e9a904a", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/346d85a3a2f4ab60b024cd0a1623fc733e9a904a", "committedDate": "2020-09-01T16:07:02Z", "message": "Update CoarseChangeFilter.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fb31f7fe830fc1dd224e28156a58bf388cd496c", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/2fb31f7fe830fc1dd224e28156a58bf388cd496c", "committedDate": "2020-09-01T16:10:35Z", "message": "Update CoarseChangeFilter.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b76e7f21bd1a9c488d0c4a998d432495e5c834ed", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/b76e7f21bd1a9c488d0c4a998d432495e5c834ed", "committedDate": "2020-09-01T16:15:04Z", "message": "Update CoarseChangeFilter.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 106, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}