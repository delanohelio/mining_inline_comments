{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NjcxNzgy", "number": 7043, "title": "Add online-link detection to FileFieldParser", "bodyText": "Fixes #7032. The FileFieldParser did not detect an URL and created a LinkedFile object with the URL as a local file path, which caused an error when running \"Check integrity\".\nI'm not sure if the unit test is in the right class.\nIf this change requires a changelog entry, I'm happy to add one.\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-10-25T22:12:37Z", "url": "https://github.com/JabRef/jabref/pull/7043", "merged": true, "mergeCommit": {"oid": "47fd56298537607e6a6647b52b6d990751dab04e"}, "closed": true, "closedAt": "2020-10-28T09:34:15Z", "author": {"login": "Niffler"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWHBfcAH2gAyNTA5NjcxNzgyOjA4ODY5Njk3YmFhYTBlMjEzMTI2NDIxYTQ3OGUxNzk3NTUzMGNhNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW6N8zAFqTUxODQ3MTE1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08869697baaa0e213126421a478e17975530ca5d", "author": {"user": {"login": "Niffler", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/08869697baaa0e213126421a478e17975530ca5d", "committedDate": "2020-10-25T21:54:32Z", "message": "Add online-link detection to FileFieldParser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "913c3843eddde88a29958a25c7c3bb50e4bce5b2", "author": {"user": {"login": "Niffler", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/913c3843eddde88a29958a25c7c3bb50e4bce5b2", "committedDate": "2020-10-25T22:26:27Z", "message": "Remove double space"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDY0MDI2", "url": "https://github.com/JabRef/jabref/pull/7043#pullrequestreview-517064026", "createdAt": "2020-10-26T18:28:36Z", "commit": {"oid": "913c3843eddde88a29958a25c7c3bb50e4bce5b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDY1NjYw", "url": "https://github.com/JabRef/jabref/pull/7043#pullrequestreview-517465660", "createdAt": "2020-10-27T08:50:11Z", "commit": {"oid": "913c3843eddde88a29958a25c7c3bb50e4bce5b2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODo1MDoxMVrOHoxIaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODo1MDoxMVrOHoxIaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxMDA1Nw==", "bodyText": "Please don't use a try catch block as a normal control structure in the code.\nhttps://github.com/HugoMatilla/Effective-JAVA-Summary#57-use-exceptions-only-for-exceptional-conditions", "url": "https://github.com/JabRef/jabref/pull/7043#discussion_r512510057", "createdAt": "2020-10-27T08:50:11Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/logic/importer/util/FileFieldParser.java", "diffHunk": "@@ -65,7 +67,17 @@ private static LinkedFile convert(List<String> entry) {\n         while (entry.size() < 3) {\n             entry.add(\"\");\n         }\n-        LinkedFile field = new LinkedFile(entry.get(0), Path.of(entry.get(1)), entry.get(2));\n+        LinkedFile field;\n+        if (LinkedFile.isOnlineLink(entry.get(1))) {\n+            try {\n+                field = new LinkedFile(new URL(entry.get(1)), entry.get(2));\n+            } catch (MalformedURLException e) {\n+                field = new LinkedFile(entry.get(0), Path.of(entry.get(1)), entry.get(2));\n+            }\n+        } else {\n+            field = new LinkedFile(entry.get(0), Path.of(entry.get(1)), entry.get(2));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "913c3843eddde88a29958a25c7c3bb50e4bce5b2"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c4fbd9706c886f89fa9f0c3fb81fe7ccded724e", "author": {"user": {"login": "Niffler", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/3c4fbd9706c886f89fa9f0c3fb81fe7ccded724e", "committedDate": "2020-10-27T16:47:57Z", "message": "Remove try-catch block from control structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cc165dfe5bd3bbeebd1dc406055f422ed5b984", "author": {"user": {"login": "Niffler", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/57cc165dfe5bd3bbeebd1dc406055f422ed5b984", "committedDate": "2020-10-27T17:00:32Z", "message": "Add missing space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd6565b6260777a1634d6b0f7999e7d9dd64fa4f", "author": {"user": {"login": "Niffler", "name": null}}, "url": "https://github.com/JabRef/jabref/commit/dd6565b6260777a1634d6b0f7999e7d9dd64fa4f", "committedDate": "2020-10-27T17:08:43Z", "message": "Fix checkstyle violations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NDcxMTUy", "url": "https://github.com/JabRef/jabref/pull/7043#pullrequestreview-518471152", "createdAt": "2020-10-28T09:33:18Z", "commit": {"oid": "dd6565b6260777a1634d6b0f7999e7d9dd64fa4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4949, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}