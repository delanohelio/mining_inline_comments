{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5NjI5NTMx", "number": 6725, "title": "Add CSS Customisation", "bodyText": "This PR continues the abandoned PR #6036\nAs discussed in the DevCall, we are now aggressivly finishing those PRs we would like to include in JabRef.\nWorks so far, yet I still want to make some changes with the optics...\nIntroduces also AppearancePreferences\n(Screenshots are out of date, see below)\nfixes #5790\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-07-30T22:01:37Z", "url": "https://github.com/JabRef/jabref/pull/6725", "merged": true, "mergeCommit": {"oid": "43c8ba2ea27264f42fed4a96c9f4d24a54a97f47"}, "closed": true, "closedAt": "2020-08-31T14:56:34Z", "author": {"login": "calixtus"}, "timelineItems": {"totalCount": 40, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIEZl5gH2gAyNDU5NjI5NTMxOmY0MDJmZDJhZWQ5N2MzNmQ2ZWY1NmY2ZmFjNGUyZTA4MGFlNWYyYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEUETYAH2gAyNDU5NjI5NTMxOjI3OGIzZTlmNGM3YTRkZTMzNzhiZTJiN2U2MzA1YmMxMzdlNDNkNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f402fd2aed97c36d6ef56f6fac4e2e080ae5f2a8", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/f402fd2aed97c36d6ef56f6fac4e2e080ae5f2a8", "committedDate": "2020-02-26T10:45:03Z", "message": "feat/#1 Add CSS file type, add button in preferences to import custom CSS file, started on import functionality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bf2fede2ba484ba81a28f8b20c3c06f27498b0d", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/7bf2fede2ba484ba81a28f8b20c3c06f27498b0d", "committedDate": "2020-02-26T10:51:32Z", "message": "feat/#1 Change so that the log messages uses format specifiers instead of string concatenation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b27f26da12b86e3656bf2bb7440457c37b0c1177", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/b27f26da12b86e3656bf2bb7440457c37b0c1177", "committedDate": "2020-02-26T14:57:30Z", "message": "feat/#1 Add RadioButton for toggling custom theme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cb3a50292ab7f175568437c2aff8d4d3f18e6a5", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/8cb3a50292ab7f175568437c2aff8d4d3f18e6a5", "committedDate": "2020-02-26T15:17:24Z", "message": "feat/#1 Add preference for setting path to custom CSS theme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd6c561609bdddbe5e848a3a1b1f4312dbb9b8f9", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/bd6c561609bdddbe5e848a3a1b1f4312dbb9b8f9", "committedDate": "2020-02-26T16:32:22Z", "message": "feat/#1 Load custom CSS if toggled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a5f73ceeb42471856fea32fb3cff29a827752aa", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/6a5f73ceeb42471856fea32fb3cff29a827752aa", "committedDate": "2020-02-26T16:34:15Z", "message": "feat/#1 Add missing language keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5b56bf6b1e8693f580f188e27cb673750bc3b6d", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/b5b56bf6b1e8693f580f188e27cb673750bc3b6d", "committedDate": "2020-02-26T17:00:31Z", "message": "feat/#1 Remove check if current theme is applied again, check is remove since we don't need it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99d9768c0d1b24c2e2545da31cc78bd81aa4b6aa", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/99d9768c0d1b24c2e2545da31cc78bd81aa4b6aa", "committedDate": "2020-02-26T17:01:23Z", "message": "feat/#1 Save path to custom CSS file in program preferences"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcf800412f76f4e3e200af51e25bed6271bb5a9e", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/bcf800412f76f4e3e200af51e25bed6271bb5a9e", "committedDate": "2020-02-26T17:30:20Z", "message": "Add functionality to let the user import custom CSS file #5790\n\n* Add CSS file type, add button in preferences to import a custom CSS file, started on import functionality\r\n\r\n* Change so that the log uses format specifiers instead of string concatenation\r\n\r\n* Add RadioButton for toggling custom theme\r\n\r\n* Add preference for setting the path to custom CSS theme\r\n\r\n* Load custom CSS if toggled\r\n\r\n* Add missing language keys\r\n\r\n* Remove check if the current theme is applied again, the check is removed since we don't need it\r\n\r\n* Save path to the custom CSS file in program preferences"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2fc2ab53b1a600d08c7fbf9a3863b0496fab199", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/f2fc2ab53b1a600d08c7fbf9a3863b0496fab199", "committedDate": "2020-02-27T10:09:59Z", "message": "fix/#5 Add checks so that the theme change notification is only shown once, disable custom theme radio button i no custom theme has been imported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "582c9d50b9eefb7d971272081681e6fd968f9cc5", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/582c9d50b9eefb7d971272081681e6fd968f9cc5", "committedDate": "2020-02-27T10:35:07Z", "message": "Fix merge conflict, fixes #5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "198be4747cb6a9c60ba60a6af98f5ecfa1444814", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/198be4747cb6a9c60ba60a6af98f5ecfa1444814", "committedDate": "2020-02-27T10:39:51Z", "message": "Remove added stuff from merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00eac4e2b860cc8252c0b49f13749c73223093ee", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/00eac4e2b860cc8252c0b49f13749c73223093ee", "committedDate": "2020-02-27T14:33:42Z", "message": "Add export current theme #5790\n\n* Add method for saving theme to file\r\n\r\n* Add modal for selection witch theme to export as CSS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fc33820ec39827d1e77ce7c23847dc8e7019ac1", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/9fc33820ec39827d1e77ce7c23847dc8e7019ac1", "committedDate": "2020-02-27T15:26:56Z", "message": "Add missing language lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90fc8054d5efb78f4c8d7d94090afe40bdd80da5", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/90fc8054d5efb78f4c8d7d94090afe40bdd80da5", "committedDate": "2020-02-27T15:35:12Z", "message": "Merge branch 'master' into addCSSCustomisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f0db2426624b01ee7f29acc8fed302e25a01d25", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/4f0db2426624b01ee7f29acc8fed302e25a01d25", "committedDate": "2020-02-27T16:55:31Z", "message": "Add information about import/export of themes, #5790"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8feb948d67d85fe365b79803687ebe169f8e01c", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/a8feb948d67d85fe365b79803687ebe169f8e01c", "committedDate": "2020-02-27T17:36:01Z", "message": "Fix CodaCy and checkstyle issues, #5790"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c1e2c28ef99c599e026341f5aa10b0040e0503c", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/8c1e2c28ef99c599e026341f5aa10b0040e0503c", "committedDate": "2020-02-27T20:14:29Z", "message": "Add fixes from code review, #5790"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4a4f68190b224a24456d8876bdedbb69125dab3", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/e4a4f68190b224a24456d8876bdedbb69125dab3", "committedDate": "2020-02-27T20:18:15Z", "message": "Remove unused import #5790"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00d8ef60dba901eb569db81cabb1a294f8da8f32", "author": {"user": {"login": "nilsstre", "name": "Nils Streijffert"}}, "url": "https://github.com/JabRef/jabref/commit/00d8ef60dba901eb569db81cabb1a294f8da8f32", "committedDate": "2020-02-27T21:25:26Z", "message": "Move the import/export buttons to the Appearance tab #5790"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be13090750053b2aebff85e185eec89b261110b", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/0be13090750053b2aebff85e185eec89b261110b", "committedDate": "2020-07-22T22:26:22Z", "message": "Merge branch 'addCSSCustomisation' of git://github.com/DD2480-Group-22/jabref into DD2480-Group-22-addCSSCustomisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04f905c085518e1cff11ec3174758076315406ce", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/04f905c085518e1cff11ec3174758076315406ce", "committedDate": "2020-07-23T18:55:32Z", "message": "Fixed merge errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcb355af003562c6847144be3f6aff999c89a5ff", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/dcb355af003562c6847144be3f6aff999c89a5ff", "committedDate": "2020-07-23T19:31:27Z", "message": "Fixed easy remarks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9a8a9587ad4606dea170e1a693e61e46a2c125a", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/c9a8a9587ad4606dea170e1a693e61e46a2c125a", "committedDate": "2020-07-30T20:56:41Z", "message": "Introduced AppereancePreferences and changed some visual elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c700bc37cfc2f62cd14bf45d1691fdb5d6a9283e", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/c700bc37cfc2f62cd14bf45d1691fdb5d6a9283e", "committedDate": "2020-07-30T21:40:55Z", "message": "Refactored ExportThemeDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1503dbfc55dc97c948512c59d6ae9dff3ea0527f", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/1503dbfc55dc97c948512c59d6ae9dff3ea0527f", "committedDate": "2020-07-30T21:48:45Z", "message": "Fixed merge error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b2f2cabd5b0a7c062ffca259c4a4df5fe134c0c", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/0b2f2cabd5b0a7c062ffca259c4a4df5fe134c0c", "committedDate": "2020-08-04T21:26:37Z", "message": "Removed export theme logic and added validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2011aaa58ecb4b75fa3ae22bc80dee857072b4", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/2d2011aaa58ecb4b75fa3ae22bc80dee857072b4", "committedDate": "2020-08-12T14:57:10Z", "message": "CHANGELOG.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/487e24c6cefd45ca1df496cd326459b526e108dd", "committedDate": "2020-08-12T15:02:15Z", "message": "Removed obsolete viewmodel class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MjQ0MzQ1", "url": "https://github.com/JabRef/jabref/pull/6725#pullrequestreview-466244345", "createdAt": "2020-08-12T20:22:32Z", "commit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMDoyMjozMlrOG_xE2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMDoyNzo0NlrOG_xPaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUxNzUzMQ==", "bodyText": "I'm not sure if this makes things clearer, but just wanted to throw the idea in: What about having an enum for the different kinds of themes (light / dark / custom), and then an additional Path getPathToCustomTheme in case the \"custom\" enum option is chosen. Right now it feels like getPathToTheme is mixing these two aspects.", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r469517531", "createdAt": "2020-08-12T20:22:32Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/preferences/AppearanceTabViewModel.java", "diffHunk": "@@ -53,55 +63,95 @@ public AppearanceTabViewModel(DialogService dialogService, JabRefPreferences pre\n                         Localization.lang(\"Appearance\"),\n                         Localization.lang(\"Font settings\"),\n                         Localization.lang(\"You must enter an integer value higher than 8.\"))));\n+\n+        customPathToThemeValidator = new FunctionBasedValidator<>(\n+                customPathToThemeProperty,\n+                input -> !StringUtil.isNullOrEmpty(input),\n+                ValidationMessage.error(String.format(\"%s > %s %n %n %s\",\n+                        Localization.lang(\"Appearance\"),\n+                        Localization.lang(\"Visual theme\"),\n+                        Localization.lang(\"Please specify a css theme file.\"))));\n     }\n \n     @Override\n     public void setValues() {\n-        fontOverrideProperty.setValue(preferences.getBoolean(JabRefPreferences.OVERRIDE_DEFAULT_FONT_SIZE));\n-        fontSizeProperty.setValue(String.valueOf(preferences.getInt(JabRefPreferences.MAIN_FONT_SIZE)));\n-\n-        switch (preferences.get(JabRefPreferences.FX_THEME)) {\n-            case ThemeLoader.DARK_CSS:\n-                themeLightProperty.setValue(false);\n-                themeDarkProperty.setValue(true);\n-                break;\n-            case ThemeLoader.MAIN_CSS:\n-            default:\n-                themeLightProperty.setValue(true);\n-                themeDarkProperty.setValue(false);\n+        fontOverrideProperty.setValue(initialAppearancePreferences.shouldOverrideDefaultFontSize());\n+        fontSizeProperty.setValue(String.valueOf(initialAppearancePreferences.getMainFontSize()));\n+\n+        String currentTheme = initialAppearancePreferences.getPathToTheme();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUxODQwMQ==", "bodyText": "Use Path instead of File here", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r469518401", "createdAt": "2020-08-12T20:24:20Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/util/ThemeLoader.java", "diffHunk": "@@ -59,13 +61,23 @@ public ThemeLoader(FileUpdateMonitor fileUpdateMonitor, JabRefPreferences jabRef\n             additionalCssToLoad = Optional.ofNullable(cssVmUrl);\n         } else if (StringUtil.isNotBlank(cssPreferences) && !MAIN_CSS.equalsIgnoreCase(cssPreferences)) {\n             // Otherwise load css from preference\n-            URL cssResource = JabRefFrame.class.getResource(cssPreferences);\n-            if (cssResource != null) {\n-                LOGGER.debug(\"Using css \" + cssResource);\n-                additionalCssToLoad = Optional.of(cssResource);\n+            Optional<URL> cssResource = Optional.empty();\n+            if (DARK_CSS.equals(cssPreferences)) {\n+                cssResource = Optional.ofNullable(JabRefFrame.class.getResource(cssPreferences));\n+            } else {\n+                try {\n+                    cssResource = Optional.of(new File(cssPreferences).toURI().toURL());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUxOTYwNg==", "bodyText": "Do you think we still need the VM option? It was meant to ease development, but it should be easy enough now to switch themes / load custom css.", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r469519606", "createdAt": "2020-08-12T20:26:30Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/util/ThemeLoader.java", "diffHunk": "@@ -47,9 +48,10 @@ public ThemeLoader(FileUpdateMonitor fileUpdateMonitor, JabRefPreferences jabRef\n \n         String cssVmArgument = System.getProperty(\"jabref.theme.css\");\n         String cssPreferences = jabRefPreferences.get(JabRefPreferences.FX_THEME);\n+\n         if (StringUtil.isNotBlank(cssVmArgument)) {\n             // First priority: VM argument\n-            LOGGER.info(\"Using css from VM option: \" + cssVmArgument);\n+            LOGGER.info(\"Using css from VM option: {}\", cssVmArgument);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUyMDA1Mw==", "bodyText": "reuse preferences.getTheme() ?", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r469520053", "createdAt": "2020-08-12T20:27:23Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/util/ThemeLoader.java", "diffHunk": "@@ -47,9 +48,10 @@ public ThemeLoader(FileUpdateMonitor fileUpdateMonitor, JabRefPreferences jabRef\n \n         String cssVmArgument = System.getProperty(\"jabref.theme.css\");\n         String cssPreferences = jabRefPreferences.get(JabRefPreferences.FX_THEME);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUyMDIzMg==", "bodyText": "Is this still needed?", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r469520232", "createdAt": "2020-08-12T20:27:46Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/preferences/PreferencesService.java", "diffHunk": "@@ -70,6 +70,8 @@\n \n     void setWorkingDir(Path dir);\n \n+    String setLastPreferencesExportPath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487e24c6cefd45ca1df496cd326459b526e108dd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a955d8409576ce7f5a26eb388fc0f3675a653e1", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/1a955d8409576ce7f5a26eb388fc0f3675a653e1", "committedDate": "2020-08-13T14:40:40Z", "message": "Refactored io.File to nio.Path, use of JabRefPreferences and removed vmOption"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac3eb8113f272be0a6ebb8535d755d21d45601bc", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/ac3eb8113f272be0a6ebb8535d755d21d45601bc", "committedDate": "2020-08-13T19:57:45Z", "message": "Refactored ThemeLoader object class to enum with static util methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89ef86fe380882dd32aa5df725fc238e692d82a3", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/89ef86fe380882dd32aa5df725fc238e692d82a3", "committedDate": "2020-08-13T20:05:28Z", "message": "Fixed overlooked merge error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MzIyNzI3", "url": "https://github.com/JabRef/jabref/pull/6725#pullrequestreview-467322727", "createdAt": "2020-08-14T05:52:55Z", "commit": {"oid": "89ef86fe380882dd32aa5df725fc238e692d82a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNTo1Mjo1NVrOHAoZyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNTo1Mjo1NVrOHAoZyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQyNDAwOA==", "bodyText": "To be honest, I'm not a big fan of these static methods. Static methods should only be used when there is no internal state to manage. So for example its ok that the methods in StringUtil are static, as they mostly follow the pattern that they take an input, process it and return something.\nHowever, here, there is a state that is managed: the fileUpdateMonitor and the additionalCssToLoad private fields. This leads to the hidden convention, that it's only allowed to call the installCss method after initalize is called. It's better to make this requirement explicit by making initalize a constructor of a normal class. This also has the advantage that you can mock/replace the themeloader in tests or for whatever reason. (I agree that it's somewhat academic in this particular case for the themeloader, as its not widely used. But it's good to follow the practice that dependencies are explicitly stated and not hidden in untestable static classes).", "url": "https://github.com/JabRef/jabref/pull/6725#discussion_r470424008", "createdAt": "2020-08-14T05:52:55Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/util/Theme.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package org.jabref.gui.util;\n+\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.file.Path;\n+import java.util.Objects;\n+import java.util.Optional;\n+\n+import javafx.scene.Scene;\n+\n+import org.jabref.gui.JabRefFrame;\n+import org.jabref.model.util.FileUpdateMonitor;\n+import org.jabref.preferences.AppearancePreferences;\n+import org.jabref.preferences.PreferencesService;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Installs the style file and provides live reloading.\n+ * JabRef provides two inbuilt themes and a user customizable one: Light, Dark and Custom. The Light theme is basically\n+ * the base.css theme. Every other theme is loaded as an addition to base.css.\n+ */\n+public enum Theme {\n+    LIGHT(\"Light\", \"\"),\n+    DARK(\"Dark\", \"Dark.css\"),\n+    CUSTOM(\"Custom\", \"\");\n+\n+    public static final String BASE_CSS = \"Base.css\";\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(Theme.class);\n+\n+    private static Optional<URL> additionalCssToLoad = Optional.empty(); // default: Light theme\n+    private static FileUpdateMonitor fileUpdateMonitor;\n+\n+    private String name;\n+    private Path additionalCssPath;\n+\n+    Theme(String name, String path) {\n+        this.name = name;\n+        this.additionalCssPath = Path.of(path);\n+    }\n+\n+    public static void initialize(FileUpdateMonitor fileUpdateMonitor, PreferencesService preferences) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89ef86fe380882dd32aa5df725fc238e692d82a3"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "411ee11edba0eb877f159b000e83df94b1c76465", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/411ee11edba0eb877f159b000e83df94b1c76465", "committedDate": "2020-08-15T13:08:21Z", "message": "Refactored static methods to object methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f0e98d7cf34e2b7a0d5f31a517fb2a0a4dd041d", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/3f0e98d7cf34e2b7a0d5f31a517fb2a0a4dd041d", "committedDate": "2020-08-15T13:24:35Z", "message": "Checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd55cda68b8c2b43e6bb0f2d74e0a97c2d9dfaca", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/fd55cda68b8c2b43e6bb0f2d74e0a97c2d9dfaca", "committedDate": "2020-08-19T16:30:22Z", "message": "Merge remote-tracking branch 'upstream/master' into DD2480-Group-22-addCSSCustomisation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "189579db25f120b72472223dd56dff25c27096b4", "author": {"user": {"login": "calixtus", "name": "Carl Christian Snethlage"}}, "url": "https://github.com/JabRef/jabref/commit/189579db25f120b72472223dd56dff25c27096b4", "committedDate": "2020-08-19T17:08:09Z", "message": "Merge remote-tracking branch 'upstream/master' into DD2480-Group-22-addCSSCustomisation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4Njg3NTUx", "url": "https://github.com/JabRef/jabref/pull/6725#pullrequestreview-478687551", "createdAt": "2020-08-31T14:54:43Z", "commit": {"oid": "189579db25f120b72472223dd56dff25c27096b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "278b3e9f4c7a4de3378be2b7e6305bc137e43d68", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/278b3e9f4c7a4de3378be2b7e6305bc137e43d68", "committedDate": "2020-08-31T14:55:44Z", "message": "Merge branch 'master' into CSSCustomisation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 73, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}