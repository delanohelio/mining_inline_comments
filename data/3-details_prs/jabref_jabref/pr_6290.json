{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMjc1NDQ5", "number": 6290, "title": "Fix selecting custom export for copy to clipboard with uppercase file ext", "bodyText": "Fixes #6285\n\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for UI changes)\n Checked documentation: Is the information available and up to date? If not created an issue at https://github.com/JabRef/user-documentation/issues or, even better, submitted a pull request to the documentation repository.", "createdAt": "2020-04-14T16:02:35Z", "url": "https://github.com/JabRef/jabref/pull/6290", "merged": true, "mergeCommit": {"oid": "5758f8be468caa98dec9c7e6c9ca9d967a038826"}, "closed": true, "closedAt": "2020-05-01T10:13:45Z", "author": {"login": "Siedlerchr"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXlp-2gH2gAyNDAzMjc1NDQ5OmE5NmUwNTY1NzFhMDg4NGIxNTY0YjViMTM5MDc0NTI4NTE5M2M5MTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcc-bPnAH2gAyNDAzMjc1NDQ5OjFkY2NmNWQ1MzM1YzJjMDEzYmExOWQ1OWY3OWFkOWQwYjM4NTY4MmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a96e056571a0884b1564b5b1390745285193c913", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/a96e056571a0884b1564b5b1390745285193c913", "committedDate": "2020-04-14T15:58:41Z", "message": "Fix selecting custom export for copy to clpboard with uppercase file ext\n\nFixes #6285"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dd7266b1b63c217241b050d3a40d15f27219e03", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/7dd7266b1b63c217241b050d3a40d15f27219e03", "committedDate": "2020-04-14T16:08:18Z", "message": "fix annoying checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjE2ODc0", "url": "https://github.com/JabRef/jabref/pull/6290#pullrequestreview-393616874", "createdAt": "2020-04-15T09:42:53Z", "commit": {"oid": "7dd7266b1b63c217241b050d3a40d15f27219e03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTo0Mjo1M1rOGFx8WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTo0NDo0N1rOGFyBBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcxNDMyOA==", "bodyText": "Suggestion: convert this field to Set<FileType> then you don't need to compare extensions and it's a bit more readable as well.", "url": "https://github.com/JabRef/jabref/pull/6290#discussion_r408714328", "createdAt": "2020-04-15T09:42:53Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/exporter/ExportToClipboardAction.java", "diffHunk": "@@ -34,21 +35,24 @@\n     private static final Logger LOGGER = LoggerFactory.getLogger(ExportToClipboardAction.class);\n \n     // Only text based exporters can be used\n-    private static final List<String> SUPPORTED_FILETYPES = Arrays.asList(\"txt\", \"rtf\", \"rdf\", \"xml\", \"html\", \"htm\", \"csv\", \"ris\");\n+    private static final Set<String> SUPPORTED_FILETYPES = Set.of(\"txt\", \"rtf\", \"rdf\", \"xml\", \"html\", \"htm\", \"csv\", \"ris\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dd7266b1b63c217241b050d3a40d15f27219e03"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcxNTUyNw==", "bodyText": "Instead of rethrowing the exception below, I would add logging + displaying to the user here.", "url": "https://github.com/JabRef/jabref/pull/6290#discussion_r408715527", "createdAt": "2020-04-15T09:44:47Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/exporter/ExportToClipboardAction.java", "diffHunk": "@@ -74,12 +78,13 @@ public void execute() {\n                                           .orElse(null);\n \n         Optional<Exporter> selectedExporter = dialogService.showChoiceDialogAndWait(Localization.lang(\"Export\"), Localization.lang(\"Select export format\"),\n-                Localization.lang(\"Export\"), defaultChoice, exporters);\n+                                                                                    Localization.lang(\"Export\"), defaultChoice, exporters);\n \n         selectedExporter.ifPresent(exporter -> BackgroundTask.wrap(() -> exportToClipboard(exporter))\n-                                                                .onSuccess(this::setContentToClipboard)\n-                                                                .onFailure(ex -> { /* swallow as already logged */ })\n-                                                                .executeWith(Globals.TASK_EXECUTOR));\n+                                                             .onSuccess(this::setContentToClipboard)\n+                                                             .onFailure(ex -> {\n+                                                                 /* swallow as already logged */ })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dd7266b1b63c217241b050d3a40d15f27219e03"}, "originalPosition": 76}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ef5f4273fed4fdccbf3b1bd06657997d2ae2213", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/2ef5f4273fed4fdccbf3b1bd06657997d2ae2213", "committedDate": "2020-04-17T18:37:17Z", "message": "Merge remote-tracking branch 'upstream/master' into fixExporterSelectionCaseInsensitive\n\n* upstream/master: (25 commits)\n  ActionHelper to test for present file (#6151)\n  Reduce memory footprint (#6298)\n  Add missing abbreviated journal names (#6292)\n  fix l10n again\n  fix checkstyle\n  fix l10n\n  Try to minimize CodeCov \"wrong metrics\"\n  Showing correct icon on main table linked files column (#6264)\n  Fix labels for outdated dependency issue\n  Change one more line\n  Squashed 'src/main/resources/csl-styles/' changes from c31d9ca05a..c1793d2fe0\n  Resolve unit test from failing\n  Add one more change\n  Fix errors\n  RIS import takes the wrong date and duplicates abstract (#6272)\n  Update EntryTypeView.java\n  Change to the old school format\n  Fix XmpExporterTest (#6289)\n  Add checkstyle screenshot (and lint guidelines-...md)\n  Squashed 'src/main/resources/csl-styles/' changes from db54e5655d..c31d9ca05a\n  ..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "768eac0b4dee1357c3e283c6ff2cf2521dfa1599", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/768eac0b4dee1357c3e283c6ff2cf2521dfa1599", "committedDate": "2020-04-17T19:16:36Z", "message": "Pass some more globals\nshow error dialog on ex instead of rethrowing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f57c8418a1cd96a6787a9447ae9d85ae91f08fb8", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/f57c8418a1cd96a6787a9447ae9d85ae91f08fb8", "committedDate": "2020-04-17T19:26:41Z", "message": "make checkstyle happy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c2415d19e765d40a576dc7b11eb51e96948d2e", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/e3c2415d19e765d40a576dc7b11eb51e96948d2e", "committedDate": "2020-04-25T17:21:47Z", "message": "Merge remote-tracking branch 'upstream/master' into fixExporterSelectionCaseInsensitive\n\n* upstream/master: (32 commits)\n  Fix Export to clipboard Dialog icon (#6345)\n  Refactor EntryEditorPreferences (#6245)\n  Update label names\n  Squashed 'src/main/resources/csl-locales/' changes from d0ee4d13c9..79845b087b\n  Squashed 'src/main/resources/csl-styles/' changes from c1793d2fe0..143464eff6\n  Cite work by @ayaankazerouni\n  Improve performance for loading files (#6332)\n  Add ADR von JUnit vs. AssertJ (#6335)\n  'Name' textfield on focus instead of 'OK' button when user clicks on 'Add subgroup' option (#6330)\n  Bump jurt from 6.3.2 to 6.4.3 (#6325)\n  Bump unoil from 6.3.2 to 6.4.3 (#6320)\n  Bump ridl from 6.3.2 to 6.4.3 (#6326)\n  Bump classgraph from 4.8.69 to 4.8.71 (#6322)\n  Bump flexmark from 0.61.6 to 0.61.16 (#6318)\n  Bump richtextfx from 0.10.4 to 0.10.5 (#6319)\n  Bump guava from 28.2-jre to 29.0-jre (#6323)\n  Bump flexmark-ext-gfm-tasklist from 0.61.6 to 0.61.16 (#6327)\n  Bump org.beryx.jlink from 2.17.5 to 2.17.7 (#6324)\n  Improve performance massively by fixing a stupid binding mistake (#6316)\n  Fixed missing paste command (#6313)\n  ..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dea49e2ebec1083c61637401323f6c8b37d3fc8", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/6dea49e2ebec1083c61637401323f6c8b37d3fc8", "committedDate": "2020-04-30T17:37:58Z", "message": "Merge remote-tracking branch 'upstream/master' into fixExporterSelectionCaseInsensitive\n\n* upstream/master:\n  New Crowdin translations (#6375)\n  Squashed 'src/main/resources/csl-styles/' changes from 143464eff6..906cd6d43d\n  Fixes #6357: File directory (#6377)\n  Disable the generate button if the ID field is empty (#6371)\n  Fix Preferences style value too long (#6372)\n  Fix various Dark theme issues (#6368)\n  Correct label name in dependabot\n  Bump java-diff-utils from 4.5 to 4.7 (#6365)\n  Try with info.plist.template also (#6366)\n  Fix wrong button order (Apply and Cancel) in ManageProtectedTermsDialog. (#6358)\n  Bump flexmark-ext-gfm-strikethrough from 0.61.6 to 0.61.20 (#6361)\n  Bump checkstyle from 8.31 to 8.32 (#6360)\n  Bump flexmark-ext-gfm-tasklist from 0.61.16 to 0.61.20 (#6364)\n  Bump flexmark from 0.61.16 to 0.61.20 (#6359)\n  Bump org.beryx.jlink from 2.17.7 to 2.17.8 (#6362)\n  Bump classgraph from 4.8.71 to 4.8.77 (#6363)\n  Change blue and red colors in Merge entries dialog in Dark theme (#6356)\n  Add Info plist to mac resources (#5986)\n  Backward compatibility for 4.3.1 (#6296)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b8139e929382f4ab726c02302d2aa715fe03c97", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/8b8139e929382f4ab726c02302d2aa715fe03c97", "committedDate": "2020-04-30T19:12:05Z", "message": "implement enum analogous to InternalField logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDY4OTU3", "url": "https://github.com/JabRef/jabref/pull/6290#pullrequestreview-404068957", "createdAt": "2020-05-01T08:33:26Z", "commit": {"oid": "8b8139e929382f4ab726c02302d2aa715fe03c97"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwODozMzoyNlrOGPE41g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwODozMzoyNlrOGPE41g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ2MTkxMA==", "bodyText": "I think OptionalUtil.orElse is no longer needed, as Java has now its own orElse method.", "url": "https://github.com/JabRef/jabref/pull/6290#discussion_r418461910", "createdAt": "2020-05-01T08:33:26Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/logic/util/StandardFileType.java", "diffHunk": "@@ -51,12 +54,13 @@\n         return extensions;\n     }\n \n-    public static FileType newFileType(String... extensions) {\n-        for (int i = 0; i < extensions.length; i++) {\n-            if (extensions[i].contains(\".\")) {\n-                extensions[i] = extensions[i].substring(extensions[i].indexOf('.') + 1);\n-            }\n-        }\n-        return () -> Arrays.asList(extensions);\n+    public static FileType fromExtensions(String... extensions) {\n+        var exts = Arrays.asList(extensions);\n+\n+        return OptionalUtil.orElse(Arrays.stream(StandardFileType.values())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b8139e929382f4ab726c02302d2aa715fe03c97"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dccf5d5335c2c013ba19d59f79ad9d0b385682d", "author": {"user": {"login": "Siedlerchr", "name": "Christoph"}}, "url": "https://github.com/JabRef/jabref/commit/1dccf5d5335c2c013ba19d59f79ad9d0b385682d", "committedDate": "2020-05-01T09:39:50Z", "message": "make new extensions lowercase"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 329, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}