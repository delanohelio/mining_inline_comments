{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MzI0ODMz", "number": 5838, "title": "Improve serialization to fix #4877", "bodyText": "Hopefully, fixes #4877 for good. Reason for the remaining issue is described in #4877 (comment).\nThis is fixed in this PR by:\n\nConsistently remember in the metadata which encoding was used when saving\nThe library mode is already determined (if not set explicitly by the user - which should be the normal case) upon import/loading instead of at an arbitrary point when the mode is first used.\nNo longer format field values upon writing, instead the written field values coincide exactly with the field values contained in the entry. The little pre-save processing (newlines, trim values) is now implemented as a mandatory save action.\n\nAlong the way, I refactored a bit of code (biggest change: remove Defaults class) and fixed very small code issues.\n\n\n Change in CHANGELOG.md described (if applicable)\n Tests created for changes (if applicable)\n Manually tested changed features in running JabRef (always required)\n Screenshots added in PR description (for bigger UI changes)\n Checked documentation: Is the information available and up to date? If not: Issue created at https://github.com/JabRef/user-documentation/issues.", "createdAt": "2020-01-17T21:24:00Z", "url": "https://github.com/JabRef/jabref/pull/5838", "merged": true, "mergeCommit": {"oid": "e9851d89dce6b39ce7dc99df1d5eca81840487e1"}, "closed": true, "closedAt": "2020-01-17T23:15:28Z", "author": {"login": "tobiasdiez"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7TxWxAH2gAyMzY0MzI0ODMzOmQ3YjM4YmQ4YTZmMmVhYTY1ZGY1MmIxY2U4MjdhODQxOTUwMmNlMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7WRd1gFqTM0NDg2NzkyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7b38bd8a6f2eaa65df52b1ce827a8419502ce1c", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/d7b38bd8a6f2eaa65df52b1ce827a8419502ce1c", "committedDate": "2020-01-17T19:18:34Z", "message": "Always remember which encoding was used for saving"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "785187350c5c45851651e1892dab956e8b14ccfa", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/785187350c5c45851651e1892dab956e8b14ccfa", "committedDate": "2020-01-17T19:46:07Z", "message": "Already infer mode upon loading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfad7c8fc26da5f27b7560707670c1be7f7ccf5", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/fdfad7c8fc26da5f27b7560707670c1be7f7ccf5", "committedDate": "2020-01-17T21:07:51Z", "message": "Don't format field values upon writing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79f62b7ed326bb7b8205246c4b74d48928762635", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/79f62b7ed326bb7b8205246c4b74d48928762635", "committedDate": "2020-01-17T21:17:08Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cc259a2437af98ee06b5092b9275651cb3dc484", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/3cc259a2437af98ee06b5092b9275651cb3dc484", "committedDate": "2020-01-17T21:35:09Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODU2ODEw", "url": "https://github.com/JabRef/jabref/pull/5838#pullrequestreview-344856810", "createdAt": "2020-01-17T21:41:37Z", "commit": {"oid": "79f62b7ed326bb7b8205246c4b74d48928762635"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06edaa74f61f2de7dbd53a59390cd1cedf01f133", "author": {"user": {"login": "tobiasdiez", "name": "Tobias Diez"}}, "url": "https://github.com/JabRef/jabref/commit/06edaa74f61f2de7dbd53a59390cd1cedf01f133", "committedDate": "2020-01-17T21:46:41Z", "message": "Fix localization and add changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab4f0db12eda9809697f2eda899c5665554e20df", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/ab4f0db12eda9809697f2eda899c5665554e20df", "committedDate": "2020-01-17T21:56:40Z", "message": "Add missing space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c301d27317a803db3e80356a651937ca8a334dd7", "author": {"user": {"login": "koppor", "name": "Oliver Kopp"}}, "url": "https://github.com/JabRef/jabref/commit/c301d27317a803db3e80356a651937ca8a334dd7", "committedDate": "2020-01-17T22:01:37Z", "message": "Fix test method name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODY3OTI0", "url": "https://github.com/JabRef/jabref/pull/5838#pullrequestreview-344867924", "createdAt": "2020-01-17T22:08:31Z", "commit": {"oid": "c301d27317a803db3e80356a651937ca8a334dd7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMjowODozMlrOFfGfZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMjowODozMlrOFfGfZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE1NjUxNg==", "bodyText": "Can we keep this test --> maybe for the whitespace removal thing?", "url": "https://github.com/JabRef/jabref/pull/5838#discussion_r368156516", "createdAt": "2020-01-17T22:08:32Z", "author": {"login": "koppor"}, "path": "src/test/java/org/jabref/logic/bibtex/BibEntryWriterTest.java", "diffHunk": "@@ -515,24 +515,6 @@ void doNotWriteEmptyFields() throws IOException {\n         assertEquals(expected, actual);\n     }\n \n-    @Test\n-    void trimFieldContents() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c301d27317a803db3e80356a651937ca8a334dd7"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 523, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}