{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0OTkyOTM2", "number": 6551, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDoyODo0OFrOEA1t2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMjo0MDoxNFrOEA37gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzE1NTQ0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDoyODo0OFrOGcXZLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDozMzo1N1rOGcy1Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5NjU5MQ==", "bodyText": "Maybe you can add a utility method in ActionHelper to check if there are multiple databases present? In that case the entry for this could be disabled if not.", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432396591", "createdAt": "2020-05-29T10:28:48Z", "author": {"login": "calixtus"}, "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1316,6 +1323,31 @@ public void execute() {\n         }\n     }\n \n+    private class CloseOthersDatabaseAction extends SimpleCommand {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d407607729effb81dede2efcc72f721b80cbac71"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NjExOA==", "bodyText": "Do you mean that I only need to disable the menu items when there is only one databese opened but no need to hide these items?\nJust like the following is OK?", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432846118", "createdAt": "2020-05-30T14:33:57Z", "author": {"login": "Hollyqqqqq"}, "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1316,6 +1323,31 @@ public void execute() {\n         }\n     }\n \n+    private class CloseOthersDatabaseAction extends SimpleCommand {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5NjU5MQ=="}, "originalCommit": {"oid": "d407607729effb81dede2efcc72f721b80cbac71"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzUxODExOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMjo0MDoxNFrOGca-wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDozNToxM1rOGcy1bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTM2Mg==", "bodyText": "I wouldn't add the \"Manage cite key pattern\". It's not that important and also not directly concerned with the library.", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432455362", "createdAt": "2020-05-29T12:40:14Z", "author": {"login": "tobiasdiez"}, "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1079,11 +1079,18 @@ public void updateAllTabTitles() {\n         }\n     }\n \n-    private static ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository, BasePanel panel, StateManager stateManager) {\n+    private ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository) {\n         ContextMenu contextMenu = new ContextMenu();\n         ActionFactory factory = new ActionFactory(keyBindingRepository);\n \n-        contextMenu.getItems().add(factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(panel.frame(), stateManager)));\n+        contextMenu.getItems().addAll(\n+                factory.createMenuItem(StandardActions.CLOSE_LIBRARY, new CloseDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_OTHER_LIBRARIES, new CloseOthersDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_ALL_LIBRARIES, new CloseAllDatabaseAction()),\n+                new SeparatorMenuItem(),\n+                factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(this, stateManager)),\n+                factory.createMenuItem(StandardActions.MANAGE_CITE_KEY_PATTERNS, new BibtexKeyPatternAction(this, stateManager))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d407607729effb81dede2efcc72f721b80cbac71"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NjE4OQ==", "bodyText": "Yeah, I think what you said is very reasonable. I will try to do it.", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432846189", "createdAt": "2020-05-30T14:35:13Z", "author": {"login": "Hollyqqqqq"}, "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1079,11 +1079,18 @@ public void updateAllTabTitles() {\n         }\n     }\n \n-    private static ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository, BasePanel panel, StateManager stateManager) {\n+    private ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository) {\n         ContextMenu contextMenu = new ContextMenu();\n         ActionFactory factory = new ActionFactory(keyBindingRepository);\n \n-        contextMenu.getItems().add(factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(panel.frame(), stateManager)));\n+        contextMenu.getItems().addAll(\n+                factory.createMenuItem(StandardActions.CLOSE_LIBRARY, new CloseDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_OTHER_LIBRARIES, new CloseOthersDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_ALL_LIBRARIES, new CloseAllDatabaseAction()),\n+                new SeparatorMenuItem(),\n+                factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(this, stateManager)),\n+                factory.createMenuItem(StandardActions.MANAGE_CITE_KEY_PATTERNS, new BibtexKeyPatternAction(this, stateManager))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTM2Mg=="}, "originalCommit": {"oid": "d407607729effb81dede2efcc72f721b80cbac71"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1862, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}