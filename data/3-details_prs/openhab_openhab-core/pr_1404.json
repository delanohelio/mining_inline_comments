{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NzU5Mzcz", "number": 1404, "title": "Replace unit placeholder in patterns if updated by DecimalType states", "bodyText": "Replace unit placeholder in patterns if updated by DecimalType states\n\nFixes #986\nSigned-off-by: Christoph Weitkamp github@christophweitkamp.de", "createdAt": "2020-04-04T21:05:48Z", "url": "https://github.com/openhab/openhab-core/pull/1404", "merged": true, "mergeCommit": {"oid": "86dc92b6c81f5823a9a633d25c7e169cd3df2ed0"}, "closed": true, "closedAt": "2020-04-05T15:52:31Z", "author": {"login": "cweitkamp"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUcB1ngH2gAyMzk4NzU5MzczOjE4MjYxNmE0ZmUzNGJlNmUzYTM1OWZlYWRlNWM1YTUzMmE4YmNiOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcUsK9vAFqTM4NzgzMjg2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "182616a4fe34be6e3a359feade5c5a532a8bcb91", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/182616a4fe34be6e3a359feade5c5a532a8bcb91", "committedDate": "2020-04-04T21:03:55Z", "message": "Replace unit placeholder in patterns if updated by DecimalType states\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3Nzk0NzEy", "url": "https://github.com/openhab/openhab-core/pull/1404#pullrequestreview-387794712", "createdAt": "2020-04-05T08:39:35Z", "commit": {"oid": "182616a4fe34be6e3a359feade5c5a532a8bcb91"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQwODozOTozNlrOGA-Aig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQwODozOTozNlrOGA-Aig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY2OTEzMA==", "bodyText": "Should we maybe also trim it, so that the pattern does not have a trailing space?", "url": "https://github.com/openhab/openhab-core/pull/1404#discussion_r403669130", "createdAt": "2020-04-05T08:39:36Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.ui/src/main/java/org/openhab/core/ui/internal/items/ItemUIRegistryImpl.java", "diffHunk": "@@ -396,7 +396,13 @@ private Switch createPlayerButtons() {\n                         }\n                     }\n \n-                    if (state instanceof QuantityType) {\n+                    if (state instanceof DecimalType) {\n+                        // for DecimalTypes we don't want to risk format exceptions, if pattern contains unit\n+                        // placeholder\n+                        if (formatPattern.contains(UnitUtils.UNIT_PLACEHOLDER)) {\n+                            formatPattern = formatPattern.replaceAll(UnitUtils.UNIT_PLACEHOLDER, \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "182616a4fe34be6e3a359feade5c5a532a8bcb91"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e9b23ab0bdbb59213391916ebf155b46ddb4144", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/4e9b23ab0bdbb59213391916ebf155b46ddb4144", "committedDate": "2020-04-05T10:09:39Z", "message": "Trim trailing whitespaces\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODMyODY3", "url": "https://github.com/openhab/openhab-core/pull/1404#pullrequestreview-387832867", "createdAt": "2020-04-05T15:52:22Z", "commit": {"oid": "4e9b23ab0bdbb59213391916ebf155b46ddb4144"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4568, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}