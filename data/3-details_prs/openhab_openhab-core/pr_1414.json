{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMzY5OTE5", "number": 1414, "title": "Removed deprecated constructors and methods from Thing API", "bodyText": "Removed deprecated constructors and methods from Thing API\nReplaced deprecated constructors by related builder where possible\n\nRelates to #1408\nSigned-off-by: Christoph Weitkamp github@christophweitkamp.de\n\nDepends on openhab/openhab-addons#7352\nDepends on openhab/openhab-addons#7354\nDepends on openhab/openhab-addons#7402\nDepends on openhab/org.openhab.binding.zwave#1339", "createdAt": "2020-04-09T11:29:04Z", "url": "https://github.com/openhab/openhab-core/pull/1414", "merged": true, "mergeCommit": {"oid": "eab9be1410c05c728d183d8b58d7f2634bdbcfe1"}, "closed": true, "closedAt": "2020-09-13T11:53:12Z", "author": {"login": "cweitkamp"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV63V3AFqTM5MDcxMDU2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdIdPsUgFqTQ4NzMwMDIyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzEwNTY3", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-390710567", "createdAt": "2020-04-09T11:30:04Z", "commit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMTozMDowNFrOGDUyZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMTozMTozNFrOGDU0-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEzOTQ5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            throw new IllegalArgumentException(\"Kind must not be null or aempty!\");\n          \n          \n            \n                            throw new IllegalArgumentException(\"Kind must not be null or empty!\");", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r406139494", "createdAt": "2020-04-09T11:30:04Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/i18n/ChannelTypeI18nLocalizationService.java", "diffHunk": "@@ -160,11 +160,7 @@ public ChannelType createLocalizedChannelType(Bundle bundle, ChannelType channel\n                 }\n                 return triggerBuilder.build();\n             default:\n-                return new ChannelType(channelTypeUID, channelType.isAdvanced(), channelType.getItemType(),\n-                        channelType.getKind(), label == null ? defaultLabel : label, description,\n-                        channelType.getCategory(), channelType.getTags(), channelType.getState(),\n-                        channelType.getEvent(), channelType.getConfigDescriptionURI(),\n-                        channelType.getAutoUpdatePolicy());\n+                throw new IllegalArgumentException(\"Kind must not be null or aempty!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEzOTczNQ==", "bodyText": "Is this if really necessary?", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r406139735", "createdAt": "2020-04-09T11:30:35Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/internal/type/StateChannelTypeBuilderImpl.java", "diffHunk": "@@ -65,15 +64,15 @@ public StateChannelTypeBuilder withCommandDescription(@Nullable CommandDescripti\n         return this;\n     }\n \n+    @SuppressWarnings(\"deprecation\")\n     @Override\n     public ChannelType build() {\n         if (stateDescription != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE0MDE1NA==", "bodyText": "FTR: I am working on nullness annotations for this class.", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r406140154", "createdAt": "2020-04-09T11:31:34Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/type/ChannelType.java", "diffHunk": "@@ -18,6 +18,7 @@\n import java.util.Set;\n \n import org.apache.commons.lang.StringUtils;\n+import org.eclipse.jdt.annotation.Nullable;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODkwMTU5", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-391890159", "createdAt": "2020-04-12T19:53:34Z", "commit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxOTo1MzozNFrOGEYQBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxOTo1MzozNFrOGEYQBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0NDgwNQ==", "bodyText": "Looks like there are still add-ons using these deprecated constructors. I made a local add-ons port build and it failed on the Homematic add-on:\nHomematicTypeGeneratorImpl.java:[306,14266] The constructor ChannelType(ChannelTypeUID, boolean, String, ChannelKind, String, String, String, null, StateDescription, EventDescription, URI) is undefined\nSo if we'd merge this PR it would break the add-ons port. Unless the deprecations are fixed on the 2.5.x branch.", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r407244805", "createdAt": "2020-04-12T19:53:34Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/type/ChannelType.java", "diffHunk": "@@ -41,59 +42,35 @@\n     private final ChannelKind kind;\n     private final Set<String> tags;\n     private final String category;\n-    private final StateDescription state;\n-    private final CommandDescription commandDescription;\n+    private final @Nullable StateDescription state;\n+    private final @Nullable CommandDescription commandDescription;\n     private final EventDescription event;\n     private final URI configDescriptionURI;\n     private final AutoUpdatePolicy autoUpdatePolicy;\n \n     /**\n+     * Creates a new instance of this class with the specified parameters.\n+     *\n      * @deprecated Use the {@link ChannelTypeBuilder} instead.\n      */\n     @Deprecated\n     public ChannelType(ChannelTypeUID uid, boolean advanced, String itemType, String label, String description,\n-            String category, Set<String> tags, StateDescription state, URI configDescriptionURI) {\n-        this(uid, advanced, itemType, ChannelKind.STATE, label, description, category, tags, state, null,\n-                configDescriptionURI);\n+            String category, Set<String> tags, EventDescription event, URI configDescriptionURI)\n+            throws IllegalArgumentException {\n+        this(uid, advanced, itemType, ChannelKind.TRIGGER, label, description, category, tags, null, null, event,\n+                configDescriptionURI, null);\n     }\n \n     /**\n+     * Creates a new instance of this class with the specified parameters.\n+     *\n      * @deprecated Use the {@link ChannelTypeBuilder} instead.\n      */\n     @Deprecated\n-    public ChannelType(ChannelTypeUID uid, boolean advanced, String itemType, ChannelKind kind, String label,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c12cdab833dc9c68f4c427b16d424e087ca4b9b7", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/c12cdab833dc9c68f4c427b16d424e087ca4b9b7", "committedDate": "2020-04-09T11:27:14Z", "message": "Removed deprecated constructors and methods from Thing API\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "6f3bdd0ebe121dea70c099ecf8c7edb98082655b", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/6f3bdd0ebe121dea70c099ecf8c7edb98082655b", "committedDate": "2020-04-13T10:11:43Z", "message": "Minor changes\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da85d5f8bc39dd85a10ba65a8fd9f95fef2ef5a5", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/da85d5f8bc39dd85a10ba65a8fd9f95fef2ef5a5", "committedDate": "2020-04-13T13:11:31Z", "message": "Minor changes\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "9538da6d235e2c9204a2c390acf12b5d4aab4259", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/9538da6d235e2c9204a2c390acf12b5d4aab4259", "committedDate": "2020-04-15T08:01:32Z", "message": "Clean-up after rebase\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjcyODA3", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-393672807", "createdAt": "2020-04-15T11:06:42Z", "commit": {"oid": "9538da6d235e2c9204a2c390acf12b5d4aab4259"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTowNjo0MlrOGF0vvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTowNjo0MlrOGF0vvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc2MDI1NA==", "bodyText": "Why was it commented?\nCan it be uncommented, fixed or removed instead?", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r408760254", "createdAt": "2020-04-15T11:06:42Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.core.thing/src/test/java/org/openhab/core/thing/ThingUIDTest.java", "diffHunk": "@@ -26,19 +26,19 @@ public void testThreeSegments() {\n         ThingTypeUID thingType = new ThingTypeUID(\"fake\", \"type\");\n         ThingUID t = new ThingUID(thingType, \"gaga\");\n \n-        assertEquals(\"type\", t.getThingTypeId());\n+        assertEquals(\"type\", t.getThingTypeUID().getId());\n         assertEquals(\"gaga\", t.getId());\n         assertEquals(\"fake:type:gaga\", t.getAsString());\n     }\n \n-    @Test\n-    public void testTwoSegments() {\n-        ThingUID t = new ThingUID(\"fake\", \"gaga\");\n-\n-        assertNull(t.getThingTypeId());\n-        assertEquals(\"gaga\", t.getId());\n-        assertEquals(\"fake::gaga\", t.getAsString());\n-    }\n+    // @Test\n+    // public void testTwoSegments() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9538da6d235e2c9204a2c390acf12b5d4aab4259"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzODc1OTEz", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-393875913", "createdAt": "2020-04-15T15:15:46Z", "commit": {"oid": "9538da6d235e2c9204a2c390acf12b5d4aab4259"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNToxNTo0NlrOGF-riQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNToxNTo0NlrOGF-riQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODkyMzAxNw==", "bodyText": "It's probably deprecated because this method always creates a new ThingTypeUID, whereas Thing.getThingTypeUID() returns an existing object. In a binding ThingHandler you typically already have a Thing object reference, so it will save CPU cycles and garbage (+ collection) by calling Thing.getThingTypeUID() and reusing the existing objects where possible.", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r408923017", "createdAt": "2020-04-15T15:15:46Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/ThingUID.java", "diffHunk": "@@ -135,29 +135,11 @@ public ThingUID(String... segments) {\n         super(segments);\n     }\n \n-    /**\n-     * Returns the thing type id.\n-     *\n-     * @return thing type id\n-     * @deprecated use {@link Thing#getThingTypeUID()} instead.\n-     */\n-    @Deprecated\n-    public String getThingTypeId() {\n-        String thingType = getSegment(1);\n-        if (NO_THING_TYPE.equals(thingType)) {\n-            return null;\n-        } else {\n-            return thingType;\n-        }\n-    }\n-\n     /**\n      * Returns the thing type uid.\n      *\n      * @return thing type uid\n-     * @deprecated use {@link Thing#getThingTypeUID()} instead.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9538da6d235e2c9204a2c390acf12b5d4aab4259"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1Nzk2MDA2", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-395796006", "createdAt": "2020-04-17T21:56:49Z", "commit": {"oid": "a84dd66214076a85378942fa7f03b482ecf61f5b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMTo1Njo0OVrOGHeR0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMTo1Njo0OVrOGHeR0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ4OTI5Ng==", "bodyText": "Moved into separate PR (#1424) but kind of required for this PR.", "url": "https://github.com/openhab/openhab-core/pull/1414#discussion_r410489296", "createdAt": "2020-04-17T21:56:49Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.config.discovery/src/main/java/org/openhab/core/config/discovery/internal/DiscoveryResultImpl.java", "diffHunk": "@@ -45,31 +48,6 @@\n     DiscoveryResultImpl() {\n     }\n \n-    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a84dd66214076a85378942fa7f03b482ecf61f5b"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b158eadbaf03d2f92d664e71ba86eaea33552b99", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/b158eadbaf03d2f92d664e71ba86eaea33552b99", "committedDate": "2020-04-19T10:59:08Z", "message": "Added nullness annotations to types\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "674465944098923d857b6c67c150b858f3578f95", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/674465944098923d857b6c67c150b858f3578f95", "committedDate": "2020-04-20T08:30:53Z", "message": "Clean-up after rebase\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "674465944098923d857b6c67c150b858f3578f95", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/674465944098923d857b6c67c150b858f3578f95", "committedDate": "2020-04-20T08:30:53Z", "message": "Clean-up after rebase\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "d9716ee868d1e55e5ce42bc034fcaa1620cc34cc", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/d9716ee868d1e55e5ce42bc034fcaa1620cc34cc", "committedDate": "2020-04-26T10:32:52Z", "message": "Rebase and Spotless\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9716ee868d1e55e5ce42bc034fcaa1620cc34cc", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/d9716ee868d1e55e5ce42bc034fcaa1620cc34cc", "committedDate": "2020-04-26T10:32:52Z", "message": "Rebase and Spotless\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "8622f5e2b1811c77d452f0a08b04424685678577", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/8622f5e2b1811c77d452f0a08b04424685678577", "committedDate": "2020-06-24T10:07:57Z", "message": "Rebase and Spotless\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "258e6ffe1162994a8acba2e88474b190352e7373", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/258e6ffe1162994a8acba2e88474b190352e7373", "committedDate": "2020-09-13T10:17:45Z", "message": "Removed deprecated constructors and methods from Thing API\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8622f5e2b1811c77d452f0a08b04424685678577", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/8622f5e2b1811c77d452f0a08b04424685678577", "committedDate": "2020-06-24T10:07:57Z", "message": "Rebase and Spotless\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}, "afterCommit": {"oid": "258e6ffe1162994a8acba2e88474b190352e7373", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-core/commit/258e6ffe1162994a8acba2e88474b190352e7373", "committedDate": "2020-09-13T10:17:45Z", "message": "Removed deprecated constructors and methods from Thing API\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzAwMjI3", "url": "https://github.com/openhab/openhab-core/pull/1414#pullrequestreview-487300227", "createdAt": "2020-09-13T11:53:01Z", "commit": {"oid": "258e6ffe1162994a8acba2e88474b190352e7373"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4589, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}