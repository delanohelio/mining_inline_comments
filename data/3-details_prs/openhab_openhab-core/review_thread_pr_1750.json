{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NDk3Njkw", "number": 1750, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQwOTozNjozMVrOExpCdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODozNTozMlrOExr_cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNDg4MDUyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQwOTozNjozMVrOHn33zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxMzoxODowN1rOHn5WvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTU3MTkxNw==", "bodyText": "We can store contextString.lastIndexOf('-') in a local variable and reuse it:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (contextString.contains(\"-\")) {\n          \n          \n            \n                                modelName = contextString.substring(0, contextString.lastIndexOf('-'));\n          \n          \n            \n                                String ruleIndex = contextString.substring(contextString.lastIndexOf('-') + 1);\n          \n          \n            \n                            int index = contextString.lastIndexOf('-');\n          \n          \n            \n                            if (index != -1) {\n          \n          \n            \n                                modelName = contextString.substring(0, index);\n          \n          \n            \n                                String ruleIndex = contextString.substring(index + 1);", "url": "https://github.com/openhab/openhab-core/pull/1750#discussion_r511571917", "createdAt": "2020-10-25T09:36:31Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "diffHunk": "@@ -87,10 +87,9 @@ public Object eval(String script) throws ScriptException {\n             if (script.stripLeading().startsWith(DSLScriptContextProvider.CONTEXT_IDENTIFIER)) {\n                 String contextString = script.stripLeading().substring(\n                         DSLScriptContextProvider.CONTEXT_IDENTIFIER.length(), script.stripLeading().indexOf('\\n'));\n-                String[] segments = contextString.split(\"-\");\n-                if (segments.length == 2) {\n-                    modelName = segments[0];\n-                    String ruleIndex = segments[1];\n+                if (contextString.contains(\"-\")) {\n+                    modelName = contextString.substring(0, contextString.lastIndexOf('-'));\n+                    String ruleIndex = contextString.substring(contextString.lastIndexOf('-') + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f49d1f6e127d6fcf3bd7ef244ff1a5ccbb05ee9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTU5NjIyMA==", "bodyText": "addressed", "url": "https://github.com/openhab/openhab-core/pull/1750#discussion_r511596220", "createdAt": "2020-10-25T13:18:07Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "diffHunk": "@@ -87,10 +87,9 @@ public Object eval(String script) throws ScriptException {\n             if (script.stripLeading().startsWith(DSLScriptContextProvider.CONTEXT_IDENTIFIER)) {\n                 String contextString = script.stripLeading().substring(\n                         DSLScriptContextProvider.CONTEXT_IDENTIFIER.length(), script.stripLeading().indexOf('\\n'));\n-                String[] segments = contextString.split(\"-\");\n-                if (segments.length == 2) {\n-                    modelName = segments[0];\n-                    String ruleIndex = segments[1];\n+                if (contextString.contains(\"-\")) {\n+                    modelName = contextString.substring(0, contextString.lastIndexOf('-'));\n+                    String ruleIndex = contextString.substring(contextString.lastIndexOf('-') + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTU3MTkxNw=="}, "originalCommit": {"oid": "1f49d1f6e127d6fcf3bd7ef244ff1a5ccbb05ee9"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNTM2NDMzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODozNTozMlrOHn7ktA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1NjoyMVrOHn7tfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzMjU2NA==", "bodyText": "Thanks. But I could be improved a little bit more. It is possible to skip the contains(\"-\") check when calculation the indexLastDash = lastIndexOf(\"-\") first and check for -1 on it.", "url": "https://github.com/openhab/openhab-core/pull/1750#discussion_r511632564", "createdAt": "2020-10-25T18:35:32Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "diffHunk": "@@ -87,10 +87,10 @@ public Object eval(String script) throws ScriptException {\n             if (script.stripLeading().startsWith(DSLScriptContextProvider.CONTEXT_IDENTIFIER)) {\n                 String contextString = script.stripLeading().substring(\n                         DSLScriptContextProvider.CONTEXT_IDENTIFIER.length(), script.stripLeading().indexOf('\\n'));\n-                String[] segments = contextString.split(\"-\");\n-                if (segments.length == 2) {\n-                    modelName = segments[0];\n-                    String ruleIndex = segments[1];\n+                if (contextString.contains(\"-\")) {\n+                    int indexLastDash = contextString.lastIndexOf('-');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dec28445444f0a314ee7105d780543d26e269f41"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzMjc1OQ==", "bodyText": "I preferred it this way as it is imho better readable and the few cpu cycles should not really matter :-)", "url": "https://github.com/openhab/openhab-core/pull/1750#discussion_r511632759", "createdAt": "2020-10-25T18:36:55Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "diffHunk": "@@ -87,10 +87,10 @@ public Object eval(String script) throws ScriptException {\n             if (script.stripLeading().startsWith(DSLScriptContextProvider.CONTEXT_IDENTIFIER)) {\n                 String contextString = script.stripLeading().substring(\n                         DSLScriptContextProvider.CONTEXT_IDENTIFIER.length(), script.stripLeading().indexOf('\\n'));\n-                String[] segments = contextString.split(\"-\");\n-                if (segments.length == 2) {\n-                    modelName = segments[0];\n-                    String ruleIndex = segments[1];\n+                if (contextString.contains(\"-\")) {\n+                    int indexLastDash = contextString.lastIndexOf('-');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzMjU2NA=="}, "originalCommit": {"oid": "dec28445444f0a314ee7105d780543d26e269f41"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzNDgxNQ==", "bodyText": "Okay. Then I will agree on it too.", "url": "https://github.com/openhab/openhab-core/pull/1750#discussion_r511634815", "createdAt": "2020-10-25T18:56:21Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.model.script.runtime/src/org/openhab/core/model/script/runtime/internal/engine/DSLScriptEngine.java", "diffHunk": "@@ -87,10 +87,10 @@ public Object eval(String script) throws ScriptException {\n             if (script.stripLeading().startsWith(DSLScriptContextProvider.CONTEXT_IDENTIFIER)) {\n                 String contextString = script.stripLeading().substring(\n                         DSLScriptContextProvider.CONTEXT_IDENTIFIER.length(), script.stripLeading().indexOf('\\n'));\n-                String[] segments = contextString.split(\"-\");\n-                if (segments.length == 2) {\n-                    modelName = segments[0];\n-                    String ruleIndex = segments[1];\n+                if (contextString.contains(\"-\")) {\n+                    int indexLastDash = contextString.lastIndexOf('-');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzMjU2NA=="}, "originalCommit": {"oid": "dec28445444f0a314ee7105d780543d26e269f41"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3258, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}