{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MzY2MzUw", "number": 1443, "title": "Migrate to JAX-RS Whiteboard", "bodyText": "These changes are based on the commits referenced by @maggu2810 in #726 (comment).\nTasks:\n\n Migrate SSE item states update logic (added in #1364)\n Fix other compilation issues and tests\n Validate that REST/SSE/Swagger all work\n Fix authentication (added in #1389)\n Remove Jersey dependency if possible from add-ons on 2.5.x branch:\n\n lametrictime (openhab/openhab-addons#7536) and fix bug (openhab/openhab-addons#7566)\n neeo (openhab/openhab-addons#7532)\n sleepiq (openhab/openhab-addons#7562)\n tesla (openhab/openhab-addons#7530)\n\n\n Remove add-ons from add-ons port build that cannot be easily made compatible (hueemulation, nest). To apply this, uncomment the applicable lines in the Jenkins shell script.\n Fix compilation issues due to Jackson changes on 2.5.x branch (jinja) (openhab/openhab-addons#7553)\n Migrate webui add-ons for Whiteboard changes (openhab/openhab-webui#242)\n\n Update REST Docs features dependency\n Add Whiteboard annotations to HABot\n Add Whiteboard annotations to CometVisu\n\n\n Update Demo App bndrun configuration (openhab/openhab-distro#1108)\n\nFixes #726", "createdAt": "2020-04-24T06:55:12Z", "url": "https://github.com/openhab/openhab-core/pull/1443", "merged": true, "mergeCommit": {"oid": "859da2e1c7ab5ce21f345782e54f593146de4240"}, "closed": true, "closedAt": "2020-05-14T20:32:36Z", "author": {"login": "wborn"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbaAfHABqjMyNzI5MDMzODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchTg6sAFqTQxMjE2MDYzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "752c91c79df7d489336f6382f387af4c18b0a154", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/752c91c79df7d489336f6382f387af4c18b0a154", "committedDate": "2020-04-24T06:41:05Z", "message": "Migrate to JAX-RS Whiteboard\n\nThe upstream JAX-RS Whiteboard feature is not used because the version ranges currently do not work with Karaf on Windows.\nSee: https://issues.apache.org/jira/browse/KARAF-6536\n\nAlso-by: Markus Rathgeb <maggu2810@gmail.com>\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "884b5ac0905cb2977a8ba009d40b36d6f6bf7fa1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/884b5ac0905cb2977a8ba009d40b36d6f6bf7fa1", "committedDate": "2020-04-26T12:39:57Z", "message": "Migrate to JAX-RS Whiteboard\n\nThe upstream JAX-RS Whiteboard feature is not used because the version ranges currently do not work with Karaf on Windows.\nSee: https://issues.apache.org/jira/browse/KARAF-6536\n\nAlso-by: Markus Rathgeb <maggu2810@gmail.com>\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63e08d0ae7c577f52c8cdbfea147f5cc5ab8aa7d", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/63e08d0ae7c577f52c8cdbfea147f5cc5ab8aa7d", "committedDate": "2020-04-28T23:07:28Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "59dfcaacfc0871a3e4ff222cac7c15f1f8352ceb", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/59dfcaacfc0871a3e4ff222cac7c15f1f8352ceb", "committedDate": "2020-04-28T23:22:18Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59dfcaacfc0871a3e4ff222cac7c15f1f8352ceb", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/59dfcaacfc0871a3e4ff222cac7c15f1f8352ceb", "committedDate": "2020-04-28T23:22:18Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "2fc9725bfd5b70dff989388eb85d2130716cf960", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/2fc9725bfd5b70dff989388eb85d2130716cf960", "committedDate": "2020-04-28T23:32:58Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fc9725bfd5b70dff989388eb85d2130716cf960", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/2fc9725bfd5b70dff989388eb85d2130716cf960", "committedDate": "2020-04-28T23:32:58Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "e63499dc52b64f216219317c49113756d26e4c60", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/e63499dc52b64f216219317c49113756d26e4c60", "committedDate": "2020-04-29T07:16:10Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e63499dc52b64f216219317c49113756d26e4c60", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/e63499dc52b64f216219317c49113756d26e4c60", "committedDate": "2020-04-29T07:16:10Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "d1972ebbc82b62a371cc502380c8902008ae99a1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/d1972ebbc82b62a371cc502380c8902008ae99a1", "committedDate": "2020-04-29T07:49:19Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1972ebbc82b62a371cc502380c8902008ae99a1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/d1972ebbc82b62a371cc502380c8902008ae99a1", "committedDate": "2020-04-29T07:49:19Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "4a3f5aa85dc8bb610ae8859131448401c1f346d6", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/4a3f5aa85dc8bb610ae8859131448401c1f346d6", "committedDate": "2020-04-29T21:48:48Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a3f5aa85dc8bb610ae8859131448401c1f346d6", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/4a3f5aa85dc8bb610ae8859131448401c1f346d6", "committedDate": "2020-04-29T21:48:48Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "committedDate": "2020-04-29T22:21:37Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "305387b3022c8fbe7c364fe056e93aba6c5c5284", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/305387b3022c8fbe7c364fe056e93aba6c5c5284", "committedDate": "2020-04-30T09:46:00Z", "message": "Disable Spotless check\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "committedDate": "2020-04-29T22:21:37Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/0a0941e91a5637786cd154a90ea1bd8aa17cdcd1", "committedDate": "2020-04-29T22:21:37Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "a67524479fb4e0ec6436f51ad9a394d60fdb2c65", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/a67524479fb4e0ec6436f51ad9a394d60fdb2c65", "committedDate": "2020-04-30T11:01:23Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a67524479fb4e0ec6436f51ad9a394d60fdb2c65", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/a67524479fb4e0ec6436f51ad9a394d60fdb2c65", "committedDate": "2020-04-30T11:01:23Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "c1f54ab8975d7588de0dd365c876afae1e7d16d0", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/c1f54ab8975d7588de0dd365c876afae1e7d16d0", "committedDate": "2020-04-30T13:18:12Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ee887d0bdcb9df588102c0a282ec1acf1f21b41", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/5ee887d0bdcb9df588102c0a282ec1acf1f21b41", "committedDate": "2020-05-02T18:54:01Z", "message": "Upgrade Jackson and Swagger TP feature dependencies\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "77e617b5d4daa3e744e9721b0f9690d82c8c371a", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/77e617b5d4daa3e744e9721b0f9690d82c8c371a", "committedDate": "2020-05-03T07:47:50Z", "message": "Simplify Path annotations\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "009db5438c5df9d604932126f4429904af907028", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/009db5438c5df9d604932126f4429904af907028", "committedDate": "2020-05-04T20:01:14Z", "message": "Migrate to JAX-RS Whiteboard\n\nThe upstream JAX-RS Whiteboard feature is not used because the version ranges currently do not work with Karaf on Windows.\nSee: https://issues.apache.org/jira/browse/KARAF-6536\n\nAlso-by: Markus Rathgeb <maggu2810@gmail.com>\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4be3cb99fa0979996a817cba03f2a219681dbe", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/5e4be3cb99fa0979996a817cba03f2a219681dbe", "committedDate": "2020-05-04T20:01:15Z", "message": "Migrate SSE item states update logic\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd9a624405c51874cd75ec76dc9ece7a4c786912", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/bd9a624405c51874cd75ec76dc9ece7a4c786912", "committedDate": "2020-05-04T20:01:15Z", "message": "Fix feature verification\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "166363e371a8101392e73cf6d1a982ff59a987d8", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/166363e371a8101392e73cf6d1a982ff59a987d8", "committedDate": "2020-05-04T20:01:15Z", "message": "Resolve itest runbundles\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b0d22e8204d95283729203063dc6ba4d18bb4fa", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/2b0d22e8204d95283729203063dc6ba4d18bb4fa", "committedDate": "2020-05-04T20:01:16Z", "message": "Upgrade Jackson and Swagger TP feature dependencies\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13e8940b00b471dcad286e2d2c48b19e7c21b836", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/13e8940b00b471dcad286e2d2c48b19e7c21b836", "committedDate": "2020-05-04T20:01:16Z", "message": "Add missing Swagger annotations\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c1cdacb6772e0e14d59b7a061bfc7d6d1701805", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/8c1cdacb6772e0e14d59b7a061bfc7d6d1701805", "committedDate": "2020-05-04T20:01:17Z", "message": "Simplify Path annotations\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c637ea3bd66900f4e42ec577c4ef3662ac24108", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/0c637ea3bd66900f4e42ec577c4ef3662ac24108", "committedDate": "2020-05-04T20:01:17Z", "message": "Add Jackson and Swagger dependencies to runtime BOM\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "215ddf6fd8d9a511494a081a1e5cf01cc9c0cd93", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/215ddf6fd8d9a511494a081a1e5cf01cc9c0cd93", "committedDate": "2020-05-04T20:01:17Z", "message": "Don't add root resource to links\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61682e0aef167d17032c8191f47a0229d5267b63", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/61682e0aef167d17032c8191f47a0229d5267b63", "committedDate": "2020-05-04T19:41:37Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "4b80c0f4ee452a2df9053b62831bcfffd5dccfef", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/4b80c0f4ee452a2df9053b62831bcfffd5dccfef", "committedDate": "2020-05-04T20:07:29Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b80c0f4ee452a2df9053b62831bcfffd5dccfef", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/4b80c0f4ee452a2df9053b62831bcfffd5dccfef", "committedDate": "2020-05-04T20:07:29Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "d916de0c3468455cb88020d26ebb9d52c870c21d", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/d916de0c3468455cb88020d26ebb9d52c870c21d", "committedDate": "2020-05-04T20:09:08Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d916de0c3468455cb88020d26ebb9d52c870c21d", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/d916de0c3468455cb88020d26ebb9d52c870c21d", "committedDate": "2020-05-04T20:09:08Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "3e4d31cf0388784be9bb294a8b6e15d4e67dd4f4", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/3e4d31cf0388784be9bb294a8b6e15d4e67dd4f4", "committedDate": "2020-05-04T20:10:24Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea2162acccb2a1b46a543cb0a0c7f9250382591f", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/ea2162acccb2a1b46a543cb0a0c7f9250382591f", "committedDate": "2020-05-04T20:15:21Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e4d31cf0388784be9bb294a8b6e15d4e67dd4f4", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/3e4d31cf0388784be9bb294a8b6e15d4e67dd4f4", "committedDate": "2020-05-04T20:10:24Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates each endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}, "afterCommit": {"oid": "ea2162acccb2a1b46a543cb0a0c7f9250382591f", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/ea2162acccb2a1b46a543cb0a0c7f9250382591f", "committedDate": "2020-05-04T20:15:21Z", "message": "Update Felix logback to 1.0.2\n\nThis version adds the jul-to-slf4j bridge (FELIX-6027).\nJUL is used by CXF and using the bridge we can use logback to reduce the verbosity of the info logging whenever org.apache.cxf.endpoint.ServerImpl creates endpoints.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9ea9b6d690f7973977440dcdfc8f74e8b32ca3d", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/c9ea9b6d690f7973977440dcdfc8f74e8b32ca3d", "committedDate": "2020-05-04T20:57:53Z", "message": "Update Aries Whiteboard to 1.0.8\n\n* Removes the hated default web application (ARIES-1931)\n* Improves performance\n* Uses CXF 3.2.12\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b287ef39a31548c65108961ea51c16d995fabbcd", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/b287ef39a31548c65108961ea51c16d995fabbcd", "committedDate": "2020-05-05T09:37:30Z", "message": "Tune PlainMessageBodyReader logging\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0165c69e07772dfccbbcc8739d97ee0beb9db6b3", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/0165c69e07772dfccbbcc8739d97ee0beb9db6b3", "committedDate": "2020-05-05T10:49:52Z", "message": "Fix authentication\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f660757f1872945f163a84d0da165f4efb9c410", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/7f660757f1872945f163a84d0da165f4efb9c410", "committedDate": "2020-05-05T12:11:39Z", "message": "Cleanup code\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b", "committedDate": "2020-05-05T13:49:42Z", "message": "Don't reuse SSE event builders\n\nSSE event builders are not thread-safe.\nIt also causes the wrong default values being used.\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjMyMDYw", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-408632060", "createdAt": "2020-05-09T09:19:49Z", "commit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwOToxOTo0OVrOGS5wrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwOTozOToxMFrOGS537g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3MzkwMA==", "bodyText": "Rename const to PATH_PERSISTENCE?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422473900", "createdAt": "2020-05-09T09:19:49Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/persistence/PersistenceResource.java", "diffHunk": "@@ -79,10 +85,15 @@\n  * @author Franck Dechavanne - Added DTOs to ApiResponses\n  * @author Erdoan Hadzhiyusein - Adapted the convertTime() method to work with the new DateTimeType\n  * @author Lyubomir Papazov - Change java.util.Date references to be of type java.time.ZonedDateTime\n+ * @author Markus Rathgeb - Migrated to JAX-RS Whiteboard Specification\n  */\n-@Path(PersistenceResource.PATH)\n-@Api(value = PersistenceResource.PATH)\n @Component\n+@JaxrsResource\n+@JaxrsName(PersistenceResource.PATH)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3Mzk5NQ==", "bodyText": "Rename to PATH_THING_TYPES", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422473995", "createdAt": "2020-05-09T09:20:50Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/thing/ThingTypeResource.java", "diffHunk": "@@ -79,10 +85,15 @@\n  * @author Miki Jankov - Introducing StrippedThingTypeDTO\n  * @author Franck Dechavanne - Added DTOs to ApiResponses\n  * @author Yannick Schaus - Added filter to getAll\n+ * @author Markus Rathgeb - Migrated to JAX-RS Whiteboard Specification\n  */\n-@Path(ThingTypeResource.PATH_THINGS_TYPES)\n-@Api(value = ThingTypeResource.PATH_THINGS_TYPES)\n @Component\n+@JaxrsResource\n+@JaxrsName(ThingTypeResource.PATH_THINGS_TYPES)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDMxNw==", "bodyText": "Why remove this? Shouldn't we use it for annotations?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422474317", "createdAt": "2020-05-09T09:24:17Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.sse/src/main/java/org/openhab/core/io/rest/sse/SseResource.java", "diffHunk": "@@ -63,75 +74,66 @@\n  * @author Ivan Iliev - Initial contribution\n  * @author Yordan Zhelev - Added Swagger annotations\n  * @author Yannick Schaus - Add endpoints to track item state updates\n+ * @author Markus Rathgeb - Drop Glassfish dependency and use API only\n+ * @author Wouter Born - Rework SSE item state sinks for dropping Glassfish\n  */\n-@Component(immediate = true, service = SseResource.class)\n-@Path(SseResource.PATH_EVENTS)\n+@Component(service = SsePublisher.class/* , scope = ServiceScope.PROTOTYPE */)\n+@JaxrsResource\n+@JaxrsName(\"events\")\n+@JaxrsApplicationSelect(\"(\" + JaxrsWhiteboardConstants.JAX_RS_NAME + \"=\" + RESTConstants.JAX_RS_NAME + \")\")\n+@JSONRequired\n+@Path(\"/events\")\n @RolesAllowed({ Role.USER })\n @Singleton\n-@Api(value = SseResource.PATH_EVENTS, hidden = true)\n-public class SseResource {\n-\n-    public static final String PATH_EVENTS = \"events\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDUyNw==", "bodyText": "NonNullByDefault", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422474527", "createdAt": "2020-05-09T09:26:24Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest/src/main/java/org/openhab/core/io/rest/JSONInputStream.java", "diffHunk": "@@ -0,0 +1,22 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest;\n+\n+/**\n+ * Marker interface for an input stream that provides a JSON string.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+public interface JSONInputStream {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDgxMQ==", "bodyText": "NonNullByDefault", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422474811", "createdAt": "2020-05-09T09:29:29Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/GsonMessageBodyReader.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.core.internal;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.nio.charset.StandardCharsets;\n+\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n+import javax.ws.rs.ext.MessageBodyReader;\n+\n+import com.google.gson.Gson;\n+\n+/**\n+ * A message body reader for JSON using GSON.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+public class GsonMessageBodyReader<T> implements MessageBodyReader<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDg0MQ==", "bodyText": "NonNullByDefault", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422474841", "createdAt": "2020-05-09T09:29:51Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/GsonMessageBodyWriter.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.core.internal;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.nio.charset.StandardCharsets;\n+\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n+import javax.ws.rs.core.Response.ResponseBuilder;\n+import javax.ws.rs.ext.MessageBodyWriter;\n+\n+import org.apache.commons.io.IOUtils;\n+import org.openhab.core.io.rest.JSONInputStream;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+\n+/**\n+ * A message body writer for JSON using GSON.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+public class GsonMessageBodyWriter<T> implements MessageBodyWriter<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDg4NQ==", "bodyText": "NonNullByDefault\nThere are more new classes / interfaces where the annotation is missing. Can we add them on every new one?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422474885", "createdAt": "2020-05-09T09:30:20Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/JSONResponseExceptionMapper.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.core.internal;\n+\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+import org.openhab.core.io.rest.JSONResponse;\n+import org.openhab.core.io.rest.RESTConstants;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.jaxrs.whiteboard.JaxrsWhiteboardConstants;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsApplicationSelect;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsExtension;\n+\n+/**\n+ * Trap exceptions.\n+ *\n+ * @author Markus Rathgeb - Migrated to JAX-RS Whiteboard Specification\n+ */\n+@Component\n+@JaxrsExtension\n+@JaxrsApplicationSelect(\"(\" + JaxrsWhiteboardConstants.JAX_RS_NAME + \"=\" + RESTConstants.JAX_RS_NAME + \")\")\n+public class JSONResponseExceptionMapper implements ExceptionMapper<Exception> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NTU5NQ==", "bodyText": "Can we use variable ${jackson.version}?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422475595", "createdAt": "2020-05-09T09:37:30Z", "author": {"login": "cweitkamp"}, "path": "features/karaf/openhab-tp/src/main/feature/feature.xml", "diffHunk": "@@ -78,31 +78,37 @@\n \t</feature>\n \n \t<feature name=\"openhab.tp-jackson\" description=\"FasterXML Jackson bundles\" version=\"${project.version}\">\n-\t\t<capability>openhab.tp;feature=jackson;version=2.9.10</capability>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-annotations/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-core/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-databind/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.datatype/jackson-datatype-joda/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:org.yaml/snakeyaml/1.23</bundle>\n+\t\t<capability>openhab.tp;feature=jackson;version=2.10.3</capability>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NTc1OA==", "bodyText": "Can we use variable ${swagger.version}?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r422475758", "createdAt": "2020-05-09T09:39:10Z", "author": {"login": "cweitkamp"}, "path": "features/karaf/openhab-tp/src/main/feature/feature.xml", "diffHunk": "@@ -267,37 +249,25 @@\n \t\t<bundle dependency=\"true\">mvn:org.eclipse.xtext/org.eclipse.xtext.xbase.ide/2.19.0</bundle>\n \t</feature>\n \n-\t<!-- <feature name=\"openhab.tp-swagger-annotations\" description=\"Swagger Annotations\" version=\"${project.version}\"> <bundle dependency=\"true\">mvn:io.swagger/swagger-annotations/1.5.5</bundle> </feature> -->\n-\n-\t<feature name=\"openhab.tp-swagger-jax-rs-provider\" description=\"JAX-RS provider for Swagger integration\" version=\"${project.version}\">\n+\t<feature name=\"openhab.tp-jaxrswb-swagger1-gen\" description=\"JAX-RS Whiteboard Swagger 1 generator\" version=\"${project.version}\">\n \t\t<details>\n \t\t\tThis feature is currently only for external usage by products and not used by openHAB Core itself.\n \t\t</details>\n-\t\t<capability>openhab.tp;feature=jax-rs-provider-swagger;version=1.1.1</capability>\n-\t\t<feature dependency=\"true\">openhab.tp-jax-rs-min</feature>\n+\t\t<capability>openhab.tp;feature=jaxrswb-swagger1-gen;version=0.0.4</capability>\n+\t\t<bundle>mvn:de.maggu2810.jaxrswb.bundles/jaxrswb-swagger1-gen/0.0.4</bundle>\n+\t\t<feature dependency=\"true\">openhab.tp-jax-rs-whiteboard</feature>\n \t\t<feature dependency=\"true\">openhab.tp-jackson</feature>\n-\t\t<!-- BEG: swagger-jersey2-1.5.8 -->\n-\t\t<feature dependency=\"true\">openhab.tp-kat.cpy-jersey-min-2.22.2</feature>\n-\t\t<bundle>mvn:de.maggu2810.thirdparty.modified.io.swagger/swagger-jersey2-jaxrs/1.5.8.v20160511-1038</bundle>\n-\t\t<bundle dependency=\"true\">mvn:io.swagger/swagger-annotations/1.5.8</bundle>\n-\t\t<bundle dependency=\"true\">mvn:io.swagger/swagger-core/1.5.8</bundle>\n-\t\t<bundle dependency=\"true\">mvn:io.swagger/swagger-jaxrs/1.5.8</bundle>\n-\t\t<bundle dependency=\"true\">mvn:io.swagger/swagger-models/1.5.8</bundle>\n-\t\t<bundle dependency=\"true\">mvn:de.maggu2810.thirdparty.modified.org.reflections/reflections/0.9.10.v20160429-1435</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.google.code.findbugs/annotations/2.0.1</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.google.guava/guava/18.0</bundle>\n+\t\t<bundle dependency=\"true\">mvn:io.swagger/swagger-jaxrs/1.6.1</bundle>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26b5f2bc1b1833ae68d4fc7eeb5fef3c15f2494b"}, "originalPosition": 119}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df", "committedDate": "2020-05-09T21:24:23Z", "message": "Address review comments\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NTE1NDIy", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-409515422", "createdAt": "2020-05-11T20:43:21Z", "commit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDo0MzoyMVrOGTsozA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDo1Njo0OFrOGTtFpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwNzQ2OA==", "bodyText": "I think it might be good idea to retain openhab.tp-jax-rs just to ship javax.ws.rs package to resolver. After all some of elements might require only annotations or jax-rs client api to be resolved.", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r423307468", "createdAt": "2020-05-11T20:43:21Z", "author": {"login": "splatch"}, "path": "features/karaf/openhab-tp/src/main/feature/feature.xml", "diffHunk": "@@ -78,31 +78,37 @@\n \t</feature>\n \n \t<feature name=\"openhab.tp-jackson\" description=\"FasterXML Jackson bundles\" version=\"${project.version}\">\n-\t\t<capability>openhab.tp;feature=jackson;version=2.9.10</capability>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-annotations/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-core/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-databind/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.datatype/jackson-datatype-joda/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/2.9.10</bundle>\n-\t\t<bundle dependency=\"true\">mvn:org.yaml/snakeyaml/1.23</bundle>\n+\t\t<capability>openhab.tp;feature=jackson;version=2.10.3</capability>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-annotations/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-core/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.core/jackson-databind/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.datatype/jackson-datatype-joda/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/2.10.3</bundle>\n+\t\t<bundle dependency=\"true\">mvn:org.yaml/snakeyaml/1.26</bundle>\n \t</feature>\n \n-\t<feature name=\"openhab.tp-jax-rs\" version=\"${project.version}\">\n-\t\t<capability>openhab.tp;feature=jax-rs;version=5.3.1</capability>\n-\t\t<feature>openhab.tp-jax-rs-min</feature>\n-\t</feature>\n-\n-\t<feature name=\"openhab.tp-jax-rs-min\" version=\"${project.version}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxNDg1Mw==", "bodyText": "Maven central dependency which serves this API is javax.ws.rs:javax.ws.rs-api. Is there any reason for not using it for compilation?", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r423314853", "createdAt": "2020-05-11T20:56:48Z", "author": {"login": "splatch"}, "path": "bom/compile/pom.xml", "diffHunk": "@@ -238,11 +230,17 @@\n       <scope>compile</scope>\n     </dependency>\n \n-    <!-- Servlet API -->\n+    <!-- Servlet and JAX-RS API -->\n+    <dependency>\n+      <groupId>org.apache.felix</groupId>\n+      <artifactId>org.apache.felix.http.servlet-api</artifactId>\n+      <version>1.1.2</version>\n+      <scope>compile</scope>\n+    </dependency>\n     <dependency>\n-      <groupId>javax.servlet</groupId>\n-      <artifactId>javax.servlet-api</artifactId>\n-      <version>3.1.0</version>\n+      <groupId>org.apache.aries.spec</groupId>\n+      <artifactId>org.apache.aries.javax.jax.rs-api</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExOTY0MzY3", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-411964367", "createdAt": "2020-05-14T16:13:26Z", "commit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNjoxMzoyN1rOGVjycw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNjoyNzoxOFrOGVkebQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1OTYzNQ==", "bodyText": "Will we also have ever a swagger2 in parallel? If not, I'd prefer to simply call the bundle \"swagger\" here.", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425259635", "createdAt": "2020-05-14T16:13:27Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.io.rest.swagger1/.project", "diffHunk": "@@ -1,6 +1,6 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <projectDescription>\n-\t<name>org.openhab.core.io.rest.optimize</name>\n+\t<name>org.openhab.core.io.rest.swagger1</name>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2MDEyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * An endpoint to generate and provide an Swagger 1 description.\n          \n          \n            \n             * An endpoint to generate and provide a Swagger 1 description.", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425260124", "createdAt": "2020-05-14T16:14:05Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.io.rest.swagger1/src/main/java/org/openhab/core/io/rest/swagger1/impl/RESTResource.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.swagger1.impl;\n+\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.io.rest.RESTConstants;\n+import org.osgi.service.component.annotations.Activate;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.Reference;\n+import org.osgi.service.component.annotations.ServiceScope;\n+import org.osgi.service.jaxrs.whiteboard.JaxrsWhiteboardConstants;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JSONRequired;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsApplicationSelect;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsResource;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import de.maggu2810.jaxrswb.swagger1.gen.JaxRsWhiteboardSwaggerGenerator;\n+\n+/**\n+ * An endpoint to generate and provide an Swagger 1 description.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2MDUyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return an Swagger 1 description of the endpoints\n          \n          \n            \n                 * @return a Swagger 1 description of the endpoints", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425260525", "createdAt": "2020-05-14T16:14:36Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.io.rest.swagger1/src/main/java/org/openhab/core/io/rest/swagger1/impl/RESTResource.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.swagger1.impl;\n+\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.io.rest.RESTConstants;\n+import org.osgi.service.component.annotations.Activate;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.Reference;\n+import org.osgi.service.component.annotations.ServiceScope;\n+import org.osgi.service.jaxrs.whiteboard.JaxrsWhiteboardConstants;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JSONRequired;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsApplicationSelect;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsResource;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import de.maggu2810.jaxrswb.swagger1.gen.JaxRsWhiteboardSwaggerGenerator;\n+\n+/**\n+ * An endpoint to generate and provide an Swagger 1 description.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+@Component(service = { RESTResource.class }, scope = ServiceScope.PROTOTYPE)\n+@JaxrsResource\n+@JaxrsApplicationSelect(\"(\" + JaxrsWhiteboardConstants.JAX_RS_NAME + \"=\" + RESTConstants.JAX_RS_NAME + \")\")\n+@JSONRequired\n+@Path(\"/swagger.json\")\n+@NonNullByDefault\n+public class RESTResource {\n+\n+    private final Logger logger = LoggerFactory.getLogger(RESTResource.class);\n+    private final JaxRsWhiteboardSwaggerGenerator generator;\n+\n+    /**\n+     * Creates a new instance.\n+     *\n+     * @param generator the generator\n+     */\n+    @Activate\n+    public RESTResource(final @Reference JaxRsWhiteboardSwaggerGenerator generator) {\n+        this.generator = generator;\n+    }\n+\n+    /**\n+     * Gets the current JAX-RS Whiteboard provided endpoint information by Swagger 1.\n+     *\n+     * @return an Swagger 1 description of the endpoints", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2ODA1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"servlet.init.hide-service-list-page=true\" //\n          \n          \n            \n                    \"servlet.init.hide-service-list-page=true\"", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425268058", "createdAt": "2020-05-14T16:24:24Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.io.rest/src/main/java/org/openhab/core/io/rest/internal/RESTApplicationImpl.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.internal;\n+\n+import javax.ws.rs.core.Application;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.io.rest.RESTConstants;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsApplicationBase;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsName;\n+\n+/**\n+ * The JAX-RS application for the openHAB JAX-RS resources.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+@Component(service = Application.class, property = {\n+        // https://lists.apache.org/thread.html/\n+        // r1379789bd90c6b7e3971d5ffeedb2e0d1e1c9103fd2392cb95458596%40%3Cuser.aries.apache.org%3E\n+        \"servlet.init.hide-service-list-page=true\" //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2OTIzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @Component(service = RootResource.class, configurationPid = \"org.openhab.restroot\" // , scope = ServiceScope.PROTOTYPE\n          \n          \n            \n            @Component(service = RootResource.class, configurationPid = \"org.openhab.restroot\"", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425269236", "createdAt": "2020-05-14T16:25:29Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.io.rest/src/main/java/org/openhab/core/io/rest/internal/resources/RootResource.java", "diffHunk": "@@ -52,82 +58,62 @@\n  * The result is returned as JSON\n  *\n  * @author Kai Kreuzer - Initial contribution\n+ * @author Markus Rathgeb - Migrated to JAX-RS Whiteboard Specification\n  */\n+@Component(service = RootResource.class, configurationPid = \"org.openhab.restroot\" // , scope = ServiceScope.PROTOTYPE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI3MDg5Mw==", "bodyText": "dito: \"swagger\" should be enough", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425270893", "createdAt": "2020-05-14T16:27:18Z", "author": {"login": "kaikreuzer"}, "path": "features/karaf/openhab-tp/src/main/feature/feature.xml", "diffHunk": "@@ -267,37 +249,25 @@\n \t\t<bundle dependency=\"true\">mvn:org.eclipse.xtext/org.eclipse.xtext.xbase.ide/2.19.0</bundle>\n \t</feature>\n \n-\t<!-- <feature name=\"openhab.tp-swagger-annotations\" description=\"Swagger Annotations\" version=\"${project.version}\"> <bundle dependency=\"true\">mvn:io.swagger/swagger-annotations/1.5.5</bundle> </feature> -->\n-\n-\t<feature name=\"openhab.tp-swagger-jax-rs-provider\" description=\"JAX-RS provider for Swagger integration\" version=\"${project.version}\">\n+\t<feature name=\"openhab.tp-jaxrswb-swagger1-gen\" description=\"JAX-RS Whiteboard Swagger 1 generator\" version=\"${project.version}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf8166e3ac0eb5ab4ccedd3cb0e8d4d5a3c7df"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/b092113fd3dda43f8d46c729021da88c050221ee", "committedDate": "2020-05-14T17:51:38Z", "message": "Address review comments\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDgzNzYx", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-412083761", "createdAt": "2020-05-14T18:38:21Z", "commit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDkzMzk0", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-412093394", "createdAt": "2020-05-14T18:51:33Z", "commit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1MTozNFrOGVp4zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTowODowOFrOGVqdHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1OTU2Nw==", "bodyText": "Remove org.apache.commons.io.IOUtilsfrom imports:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        IOUtils.copy((InputStream) object, entityStream);\n          \n          \n            \n                        ((InputStream) object).transferTo(entityStream);", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425359567", "createdAt": "2020-05-14T18:51:34Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.core/src/main/java/org/openhab/core/io/rest/core/internal/GsonMessageBodyWriter.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.core.internal;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.nio.charset.StandardCharsets;\n+\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n+import javax.ws.rs.core.Response.ResponseBuilder;\n+import javax.ws.rs.ext.MessageBodyWriter;\n+\n+import org.apache.commons.io.IOUtils;\n+import org.openhab.core.io.rest.JSONInputStream;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+\n+/**\n+ * A message body writer for JSON using GSON.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+public class GsonMessageBodyWriter<T> implements MessageBodyWriter<T> {\n+\n+    private final Logger logger = LoggerFactory.getLogger(GsonMessageBodyWriter.class);\n+\n+    private final Gson gson;\n+\n+    /**\n+     * Constructor.\n+     *\n+     * @param gson the GSON object to use\n+     */\n+    public GsonMessageBodyWriter(final Gson gson) {\n+        this.gson = gson;\n+    }\n+\n+    @Override\n+    public long getSize(final T object, final Class<?> type, final Type genericType, final Annotation[] annotations,\n+            final MediaType mediaType) {\n+        return -1;\n+    }\n+\n+    @Override\n+    public boolean isWriteable(final Class<?> type, final Type genericType, final Annotation[] annotations,\n+            final MediaType mediaType) {\n+        return true;\n+    }\n+\n+    @Override\n+    public void writeTo(final T object, final Class<?> type, final Type genericType, final Annotation[] annotations,\n+            final MediaType mediaType, final MultivaluedMap<String, Object> httpHeaders,\n+            final OutputStream entityStream) throws IOException, WebApplicationException {\n+        if (object == null) {\n+            return;\n+        }\n+\n+        // Log a message if a response builder is received.\n+        if (object instanceof ResponseBuilder) {\n+            logger.error(\n+                    \"A REST endpoint returns a ResponseBuilder object. This is mostly wrong and the call to \\\"build()\\\" is missing. Please report or fix it. Got: {}\",\n+                    object);\n+        }\n+\n+        if (object instanceof InputStream && object instanceof JSONInputStream) {\n+            IOUtils.copy((InputStream) object, entityStream);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM2NDIyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @Component(service = SsePublisher.class/* , scope = ServiceScope.PROTOTYPE */)\n          \n          \n            \n            @Component(service = SsePublisher.class)", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425364228", "createdAt": "2020-05-14T18:59:42Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.sse/src/main/java/org/openhab/core/io/rest/sse/SseResource.java", "diffHunk": "@@ -63,75 +74,69 @@\n  * @author Ivan Iliev - Initial contribution\n  * @author Yordan Zhelev - Added Swagger annotations\n  * @author Yannick Schaus - Add endpoints to track item state updates\n+ * @author Markus Rathgeb - Drop Glassfish dependency and use API only\n+ * @author Wouter Born - Rework SSE item state sinks for dropping Glassfish\n  */\n-@Component(immediate = true, service = SseResource.class)\n+@Component(service = SsePublisher.class/* , scope = ServiceScope.PROTOTYPE */)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM2ODg2MA==", "bodyText": "Do we need the ServiceScope here? You removed it everywhere else.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @Component(service = { RESTResource.class }, scope = ServiceScope.PROTOTYPE)\n          \n          \n            \n            @Component(service = RESTResource.class)", "url": "https://github.com/openhab/openhab-core/pull/1443#discussion_r425368860", "createdAt": "2020-05-14T19:08:08Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.io.rest.swagger/src/main/java/org/openhab/core/io/rest/swagger/impl/RESTResource.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.rest.swagger.impl;\n+\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.io.rest.RESTConstants;\n+import org.osgi.service.component.annotations.Activate;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.Reference;\n+import org.osgi.service.component.annotations.ServiceScope;\n+import org.osgi.service.jaxrs.whiteboard.JaxrsWhiteboardConstants;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JSONRequired;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsApplicationSelect;\n+import org.osgi.service.jaxrs.whiteboard.propertytypes.JaxrsResource;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import de.maggu2810.jaxrswb.swagger1.gen.JaxRsWhiteboardSwaggerGenerator;\n+\n+/**\n+ * An endpoint to generate and provide a Swagger 1 description.\n+ *\n+ * @author Markus Rathgeb - Initial contribution\n+ */\n+@Component(service = { RESTResource.class }, scope = ServiceScope.PROTOTYPE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b092113fd3dda43f8d46c729021da88c050221ee"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6bb605e09b990372537afdb227af93e4477f6aa", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-core/commit/b6bb605e09b990372537afdb227af93e4477f6aa", "committedDate": "2020-05-14T19:59:03Z", "message": "Address final remarks\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMTYwNjMy", "url": "https://github.com/openhab/openhab-core/pull/1443#pullrequestreview-412160632", "createdAt": "2020-05-14T20:29:44Z", "commit": {"oid": "b6bb605e09b990372537afdb227af93e4477f6aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4775, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}