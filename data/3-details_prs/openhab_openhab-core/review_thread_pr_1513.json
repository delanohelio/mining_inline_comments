{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwMTU4NjAx", "number": 1513, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MToxOVrOEDQLmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1NzoxM1rOEDQNHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2Mjk2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MToxOVrOGgK6pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxOTo0Mjo1NlrOGgLdPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjQ3MQ==", "bodyText": "I think you can simplify this to:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (ruleStatus != null && ruleStatus != RuleStatus.IDLE) {\n          \n          \n            \n                        if (RuleStatus.IDLE.equals(ruleStatus)) {", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386471", "createdAt": "2020-06-07T17:51:19Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "diffHunk": "@@ -974,7 +972,7 @@ protected void runRule(String ruleUID, TriggerHandlerCallbackImpl.TriggerData td\n         }\n         synchronized (this) {\n             final RuleStatus ruleStatus = getRuleStatus(ruleUID);\n-            if (ruleStatus != RuleStatus.IDLE) {\n+            if (ruleStatus != null && ruleStatus != RuleStatus.IDLE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4OTUyMA==", "bodyText": "No, the check is whether it is NOT IDLE (and also must not be null)", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436389520", "createdAt": "2020-06-07T18:29:45Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "diffHunk": "@@ -974,7 +972,7 @@ protected void runRule(String ruleUID, TriggerHandlerCallbackImpl.TriggerData td\n         }\n         synchronized (this) {\n             final RuleStatus ruleStatus = getRuleStatus(ruleUID);\n-            if (ruleStatus != RuleStatus.IDLE) {\n+            if (ruleStatus != null && ruleStatus != RuleStatus.IDLE) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjQ3MQ=="}, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM5NTMyNw==", "bodyText": "Ah, I see. I read it too quickly.", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436395327", "createdAt": "2020-06-07T19:42:56Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "diffHunk": "@@ -974,7 +972,7 @@ protected void runRule(String ruleUID, TriggerHandlerCallbackImpl.TriggerData td\n         }\n         synchronized (this) {\n             final RuleStatus ruleStatus = getRuleStatus(ruleUID);\n-            if (ruleStatus != RuleStatus.IDLE) {\n+            if (ruleStatus != null && ruleStatus != RuleStatus.IDLE) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjQ3MQ=="}, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 123}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2MzE0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MTozMFrOGgK6wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MTozMFrOGgK6wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjQ5OA==", "bodyText": "See above.", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386498", "createdAt": "2020-06-07T17:51:30Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "diffHunk": "@@ -1016,7 +1014,7 @@ public void runNow(String ruleUID, boolean considerConditions, @Nullable Map<Str\n         }\n         synchronized (this) {\n             final RuleStatus ruleStatus = getRuleStatus(ruleUID);\n-            if (ruleStatus != RuleStatus.IDLE) {\n+            if (ruleStatus != null && ruleStatus != RuleStatus.IDLE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 132}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2Mzg2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/GenericEventTriggerHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MjozNFrOGgK7Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MjozNFrOGgK7Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjU5MA==", "bodyText": "One more minor improvement: Omit the @SuppressWarnings.", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386590", "createdAt": "2020-06-07T17:52:34Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/GenericEventTriggerHandler.java", "diffHunk": "@@ -46,19 +46,19 @@\n  */\n public class GenericEventTriggerHandler extends BaseTriggerModuleHandler implements EventSubscriber, EventFilter {\n \n+    public static final String MODULE_TYPE_ID = \"core.GenericEventTrigger\";\n+\n+    private static final String CFG_EVENT_TOPIC = \"eventTopic\";\n+    private static final String CFG_EVENT_SOURCE = \"eventSource\";\n+    private static final String CFG_EVENT_TYPES = \"eventTypes\";\n+\n     private final Logger logger = LoggerFactory.getLogger(GenericEventTriggerHandler.class);\n \n     private final String source;\n     private String topic;\n     private final Set<String> types;\n     private final BundleContext bundleContext;\n \n-    public static final String MODULE_TYPE_ID = \"core.GenericEventTrigger\";\n-\n-    private static final String CFG_EVENT_TOPIC = \"eventTopic\";\n-    private static final String CFG_EVENT_SOURCE = \"eventSource\";\n-    private static final String CFG_EVENT_TYPES = \"eventTypes\";\n-\n     @SuppressWarnings(\"rawtypes\")\n     private ServiceRegistration eventSubscriberRegistration;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2NDA2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/ItemCommandTriggerHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1Mjo1MlrOGgK7Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1Mjo1MlrOGgK7Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjYxOQ==", "bodyText": "Omit.", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386619", "createdAt": "2020-06-07T17:52:52Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/ItemCommandTriggerHandler.java", "diffHunk": "@@ -50,11 +55,6 @@\n     private final Set<String> types;\n     private final BundleContext bundleContext;\n \n-    public static final String MODULE_TYPE_ID = \"core.ItemCommandTrigger\";\n-\n-    private static final String CFG_ITEMNAME = \"itemName\";\n-    private static final String CFG_COMMAND = \"command\";\n-\n     @SuppressWarnings(\"rawtypes\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2NDI4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/ItemStateTriggerHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MzoxM1rOGgK7Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1MzoxM1rOGgK7Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4NjY0Ng==", "bodyText": "Omit.", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386646", "createdAt": "2020-06-07T17:53:13Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/module/handler/ItemStateTriggerHandler.java", "diffHunk": "@@ -52,13 +60,6 @@\n     private Set<String> types;\n     private final BundleContext bundleContext;\n \n-    public static final String UPDATE_MODULE_TYPE_ID = \"core.ItemStateUpdateTrigger\";\n-    public static final String CHANGE_MODULE_TYPE_ID = \"core.ItemStateChangeTrigger\";\n-\n-    private static final String CFG_ITEMNAME = \"itemName\";\n-    private static final String CFG_STATE = \"state\";\n-    private static final String CFG_PREVIOUS_STATE = \"previousState\";\n-\n     @SuppressWarnings(\"rawtypes\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODQ2Njg2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1NzoxM1rOGgK8rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxNzo1NzoxM1rOGgK8rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM4Njk4OQ==", "bodyText": "Why is this necessary? Because the method returns a Boolean? If so should we change it to\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (isEnabled(rUID) == true) {\n          \n          \n            \n                    if (isEnabled(rUID) == Boolean.TRUE) {", "url": "https://github.com/openhab/openhab-core/pull/1513#discussion_r436386989", "createdAt": "2020-06-07T17:57:13Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation/src/main/java/org/openhab/core/automation/internal/RuleEngineImpl.java", "diffHunk": "@@ -459,7 +460,7 @@ protected void addRule(Rule newRule) {\n             unregister(oldRule);\n         }\n \n-        if (isEnabled(rUID)) {\n+        if (isEnabled(rUID) == true) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031a0f527eed6f1f94c98720eccd041b4a9ad179"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3420, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}