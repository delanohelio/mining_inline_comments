{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1Nzg1MjY0", "number": 1367, "title": "[automation] Corrected issue where scripts were not starting when OH restarted", "bodyText": "Fixes #841. I also added a few file extensions to the list that are not loaded as scripts.I've tested on Windows 10 and Fedora 31.\nSigned-off-by: Scott Rushworth openhab@5iver.com", "createdAt": "2020-02-16T04:15:57Z", "url": "https://github.com/openhab/openhab-core/pull/1367", "merged": true, "mergeCommit": {"oid": "1cb17e1a7d37bc2db24f17c36920444b61bc73f9"}, "closed": true, "closedAt": "2020-02-17T12:43:28Z", "author": {"login": "5iver"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEw1IDgH2gAyMzc1Nzg1MjY0OmI0OWI0OTNmZmQxMThiOTA1NzI1NzQ5MmFkNzgxYjg2ZmFjYWU1YTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFMWrUAFqTM1OTY5NDY3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b49b493ffd118b9057257492ad781b86facae5a1", "author": {"user": null}, "url": "https://github.com/openhab/openhab-core/commit/b49b493ffd118b9057257492ad781b86facae5a1", "committedDate": "2020-02-16T04:15:15Z", "message": "Corrected issue where scripts were not starting when OH restarted\n\nFixes #841. I also added a few file extensions to the list that are not loaded as scripts.I've tested on Windows 10 and Fedora 31.\r\n\r\nSigned-off-by: Scott Rushworth <openhab@5iver.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mzk0MzU3", "url": "https://github.com/openhab/openhab-core/pull/1367#pullrequestreview-359394357", "createdAt": "2020-02-16T10:36:45Z", "commit": {"oid": "b49b493ffd118b9057257492ad781b86facae5a1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMDozNjo0NlrOFqS0Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMDozNjo0NlrOFqS0Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MjgwMw==", "bodyText": "Instead of blacklisting wouldn't it be safer to define a whitelist of allowed file extensions?\nOtherwise you should put string litterals first in comparisons or may introduce a Set of Strings and check if the set contains your blacklisted extension.", "url": "https://github.com/openhab/openhab-core/pull/1367#discussion_r379892803", "createdAt": "2020-02-16T10:36:46Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation.module.script.rulesupport/src/main/java/org/openhab/core/automation/module/script/rulesupport/internal/loader/ScriptFileWatcher.java", "diffHunk": "@@ -238,7 +229,9 @@ private String getScriptType(URL url) {\n         String fileExtension = fileName.substring(idx + 1);\n \n         // ignore known file extensions for \"temp\" files\n-        if (fileExtension.equals(\"txt\") || fileExtension.endsWith(\"~\") || fileExtension.endsWith(\"swp\")) {\n+        if (fileExtension.equals(\"txt\") || fileExtension.equals(\"old\") || fileExtension.equals(\"example\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b49b493ffd118b9057257492ad781b86facae5a1"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7653185a230901f26c14339d64b1308310ebee7", "author": {"user": null}, "url": "https://github.com/openhab/openhab-core/commit/a7653185a230901f26c14339d64b1308310ebee7", "committedDate": "2020-02-16T19:21:59Z", "message": "Revert blacklist\n\nSigned-off-by: Scott Rushworth <openhab@5iver.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NTM4NzQz", "url": "https://github.com/openhab/openhab-core/pull/1367#pullrequestreview-359538743", "createdAt": "2020-02-17T07:51:15Z", "commit": {"oid": "a7653185a230901f26c14339d64b1308310ebee7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNzo1MToxNVrOFqa6hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNzo1MToxNVrOFqa6hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAyNTQ3Nw==", "bodyText": "Can you remove the whitespace?", "url": "https://github.com/openhab/openhab-core/pull/1367#discussion_r380025477", "createdAt": "2020-02-17T07:51:15Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.automation.module.script.rulesupport/src/main/java/org/openhab/core/automation/module/script/rulesupport/internal/loader/ScriptFileWatcher.java", "diffHunk": "@@ -238,7 +229,7 @@ private String getScriptType(URL url) {\n         String fileExtension = fileName.substring(idx + 1);\n \n         // ignore known file extensions for \"temp\" files\n-        if (fileExtension.equals(\"txt\") || fileExtension.endsWith(\"~\") || fileExtension.endsWith(\"swp\")) {\n+         if (fileExtension.equals(\"txt\") || fileExtension.endsWith(\"~\") || fileExtension.endsWith(\"swp\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7653185a230901f26c14339d64b1308310ebee7"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "011ab83026250c3ad5f732ec9bf20d411ce8d39f", "author": {"user": null}, "url": "https://github.com/openhab/openhab-core/commit/011ab83026250c3ad5f732ec9bf20d411ce8d39f", "committedDate": "2020-02-17T11:50:23Z", "message": "Removed whitespace\n\nSigned-off-by: Scott Rushworth <openhab@5iver.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Njk0Njc5", "url": "https://github.com/openhab/openhab-core/pull/1367#pullrequestreview-359694679", "createdAt": "2020-02-17T12:19:20Z", "commit": {"oid": "011ab83026250c3ad5f732ec9bf20d411ce8d39f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4552, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}