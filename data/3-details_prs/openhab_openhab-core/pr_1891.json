{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDE2MTY0", "number": 1891, "title": "[oauth] User-defined scope in AccessTokenResponse", "bodyText": "Would this be acceptable as a solution to my problem faced with Netatmo presented in #1888 ?\nSigned-off-by: clinique gael@lhopital.org", "createdAt": "2020-12-05T13:16:40Z", "url": "https://github.com/openhab/openhab-core/pull/1891", "merged": true, "mergeCommit": {"oid": "f7e03397fb73214016fcc716eae84081b2bb6f27"}, "closed": true, "closedAt": "2020-12-23T14:40:54Z", "author": {"login": "clinique"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjMJfsgH2gAyNTMzMDE2MTY0OjQyOTZiMDU5NGI0YTM3NDkwMWQ1YTIzZmIyMDM4Mjc0ZjQ0ZDkyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpAKKlAFqTU1NzkwNzM5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4296b0594b4a374901d5a23fb2038274f44d9215", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/4296b0594b4a374901d5a23fb2038274f44d9215", "committedDate": "2020-12-05T13:13:49Z", "message": "Adressing issue #1888\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1346dcfccb9464534e632a2baf61e4c9af5d3cb4", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/1346dcfccb9464534e632a2baf61e4c9af5d3cb4", "committedDate": "2020-12-05T17:33:46Z", "message": "Removing incompatible NonNull annotation\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e83d8f01223eaabcf6487e92440696f5bf6a6c1", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/6e83d8f01223eaabcf6487e92440696f5bf6a6c1", "committedDate": "2020-12-06T08:57:26Z", "message": "Spotless correction\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "986cdd46a723f12336685f1947753f69af418319", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/986cdd46a723f12336685f1947753f69af418319", "committedDate": "2020-12-06T14:15:04Z", "message": "Providing customizable deserializer\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6374305bd9fd801bba85889fe0ab7413ccd29909", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/6374305bd9fd801bba85889fe0ab7413ccd29909", "committedDate": "2020-12-06T14:29:26Z", "message": "Removing test\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19e9053b924ef35d546f26518e3ad7e74deb87bf", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/19e9053b924ef35d546f26518e3ad7e74deb87bf", "committedDate": "2020-12-06T14:32:29Z", "message": "Forgot to save changes\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODQ2OTMx", "url": "https://github.com/openhab/openhab-core/pull/1891#pullrequestreview-551846931", "createdAt": "2020-12-14T20:00:24Z", "commit": {"oid": "19e9053b924ef35d546f26518e3ad7e74deb87bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMDowMDoyNFrOIFkzXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMDowMDoyNFrOIFkzXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcxNjc2NA==", "bodyText": "A minor reminder for later refactoring: This looks like a potential candidate to be used as singleton.", "url": "https://github.com/openhab/openhab-core/pull/1891#discussion_r542716764", "createdAt": "2020-12-14T20:00:24Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.auth.oauth2client/src/main/java/org/openhab/core/auth/oauth2client/internal/OAuthClientServiceImpl.java", "diffHunk": "@@ -150,7 +150,7 @@ public String getAuthorizationUrl(@Nullable String redirectURI, @Nullable String\n             throw new OAuthException(\"Missing client ID\");\n         }\n \n-        OAuthConnector connector = new OAuthConnector(httpClientFactory);\n+        OAuthConnector connector = new OAuthConnector(httpClientFactory, persistedParams.deserializerClassName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19e9053b924ef35d546f26518e3ad7e74deb87bf"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/8e76d3a86ee70a00b402044e81590c1c222880ca", "committedDate": "2020-12-22T08:40:11Z", "message": "Implementing suggestion from cweitkamp\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTMyMzU5", "url": "https://github.com/openhab/openhab-core/pull/1891#pullrequestreview-556932359", "createdAt": "2020-12-22T09:19:55Z", "commit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwOToxOTo1NVrOIJ0HXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwOToxOTo1NVrOIJ0HXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE2MTk0OQ==", "bodyText": "Yes, this looks nice. Do we have to create a new instance here or can we use this?", "url": "https://github.com/openhab/openhab-core/pull/1891#discussion_r547161949", "createdAt": "2020-12-22T09:19:55Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.auth.oauth2client/src/main/java/org/openhab/core/auth/oauth2client/internal/OAuthClientServiceImpl.java", "diffHunk": "@@ -395,4 +397,17 @@ public boolean removeAccessTokenRefreshListener(AccessTokenRefreshListener liste\n     private String createNewState() {\n         return UUID.randomUUID().toString();\n     }\n+\n+    @Override\n+    public <T extends JsonDeserializer<?>> OAuthClientService withDeserializer(Class<T> deserializerClass) {\n+        OAuthClientServiceImpl clientService = new OAuthClientServiceImpl(handle, persistedParams.tokenExpiresInSeconds,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDE4NjYw", "url": "https://github.com/openhab/openhab-core/pull/1891#pullrequestreview-557018660", "createdAt": "2020-12-22T11:42:00Z", "commit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMTo0MjowMVrOIJ4TWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMTo0NDo0OVrOIJ4YCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIzMDU1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                String deserializerClassName;\n          \n          \n            \n                @Nullable String deserializerClassName;", "url": "https://github.com/openhab/openhab-core/pull/1891#discussion_r547230555", "createdAt": "2020-12-22T11:42:01Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.auth.oauth2client/src/main/java/org/openhab/core/auth/oauth2client/internal/PersistedParams.java", "diffHunk": "@@ -32,6 +32,7 @@\n     String state;\n     String redirectUri;\n     int tokenExpiresInSeconds = 60;\n+    String deserializerClassName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIzMTc1Mg==", "bodyText": "Understood. Sounds reasonable.", "url": "https://github.com/openhab/openhab-core/pull/1891#discussion_r547231752", "createdAt": "2020-12-22T11:44:49Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.core.auth.oauth2client/src/main/java/org/openhab/core/auth/oauth2client/internal/OAuthClientServiceImpl.java", "diffHunk": "@@ -395,4 +397,17 @@ public boolean removeAccessTokenRefreshListener(AccessTokenRefreshListener liste\n     private String createNewState() {\n         return UUID.randomUUID().toString();\n     }\n+\n+    @Override\n+    public <T extends JsonDeserializer<?>> OAuthClientService withDeserializer(Class<T> deserializerClass) {\n+        OAuthClientServiceImpl clientService = new OAuthClientServiceImpl(handle, persistedParams.tokenExpiresInSeconds,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE2MTk0OQ=="}, "originalCommit": {"oid": "8e76d3a86ee70a00b402044e81590c1c222880ca"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ff61ee7f1fb890d424d1f57f2ebada6b4199f7", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/88ff61ee7f1fb890d424d1f57f2ebada6b4199f7", "committedDate": "2020-12-22T12:25:45Z", "message": "Integrating cweitkamp comments\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MTI5NzM2", "url": "https://github.com/openhab/openhab-core/pull/1891#pullrequestreview-557129736", "createdAt": "2020-12-22T14:45:06Z", "commit": {"oid": "88ff61ee7f1fb890d424d1f57f2ebada6b4199f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "535fd64a6965703b88460542942fd62714c4d57d", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/535fd64a6965703b88460542942fd62714c4d57d", "committedDate": "2020-12-23T07:37:59Z", "message": "Applying spotless\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "497b8cf418de110e00850154db7c72c355dff392", "author": {"user": {"login": "clinique", "name": "Ga\u00ebl L'hopital"}}, "url": "https://github.com/openhab/openhab-core/commit/497b8cf418de110e00850154db7c72c355dff392", "committedDate": "2020-12-23T13:22:44Z", "message": "spotless apply\n\nSigned-off-by: clinique <gael@lhopital.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3OTA3Mzkw", "url": "https://github.com/openhab/openhab-core/pull/1891#pullrequestreview-557907390", "createdAt": "2020-12-23T14:39:14Z", "commit": {"oid": "497b8cf418de110e00850154db7c72c355dff392"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4697, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}