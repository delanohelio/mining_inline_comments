{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDE4NzM1", "number": 6044, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNjozM1rOD7Txcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoyMzoxOFrOD7T7_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE2NTMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNjozM1rOGTjcnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxODo0NDoyN1rOGUUJKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1Njg5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    private Boolean isGridView = false;\n          \n          \n            \n                    private Boolean gridView = false;", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423156893", "createdAt": "2020-05-11T16:16:33Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -427,24 +427,14 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n-        private boolean roundedCorners = false;\n         private Listener mListener;\n+        private Boolean isGridView = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU1ODExNA==", "bodyText": "@AndyScherzinger why?\nWe think it's gridview and not a boolean. There's confusion\ngridViewEnabled, hasGridView or isGridView is better", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423558114", "createdAt": "2020-05-12T08:33:08Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -427,24 +427,14 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n-        private boolean roundedCorners = false;\n         private Listener mListener;\n+        private Boolean isGridView = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1Njg5Mw=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU2NzkwNw==", "bodyText": "gridViewEnabled sounds good, hasGridView or isGridView is rather bad regarding naming conventions for accessor methods e.g. getHasGridView or isHasGridView? ;)", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423567907", "createdAt": "2020-05-12T08:47:55Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -427,24 +427,14 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n-        private boolean roundedCorners = false;\n         private Listener mListener;\n+        private Boolean isGridView = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1Njg5Mw=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYxMjQ4NQ==", "bodyText": "field should be gridViewEnabled and getter: isGridViewEnabled().", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423612485", "createdAt": "2020-05-12T09:58:29Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -427,24 +427,14 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n-        private boolean roundedCorners = false;\n         private Listener mListener;\n+        private Boolean isGridView = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1Njg5Mw=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NDczMA==", "bodyText": "I fixed it with gridViewEnabled", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423954730", "createdAt": "2020-05-12T18:44:27Z", "author": {"login": "sirambd"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -427,24 +427,14 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n-        private boolean roundedCorners = false;\n         private Listener mListener;\n+        private Boolean isGridView = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1Njg5Mw=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE2NjQwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNjo1M1rOGTjdTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNjo1M1rOGTjdTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1NzA3MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        this.isGridView = isGridView;\n          \n          \n            \n                        this.gridView = gridView;", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423157070", "createdAt": "2020-05-11T16:16:53Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -458,6 +448,13 @@ public ThumbnailGenerationTask(ImageView imageView, FileDataStorageManager stora\n             mAsyncTasks = asyncTasks;\n         }\n \n+        public ThumbnailGenerationTask(ImageView imageView, FileDataStorageManager storageManager,\n+                                       Account account, List<ThumbnailGenerationTask> asyncTasks, Boolean isGridView)\n+            throws IllegalArgumentException {\n+            this(imageView, storageManager, account, asyncTasks);\n+            this.isGridView = isGridView;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE2NzA5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNzowMlrOGTjdwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNzowMlrOGTjdwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1NzE4Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                   Account account, List<ThumbnailGenerationTask> asyncTasks, Boolean isGridView)\n          \n          \n            \n                                                   Account account, List<ThumbnailGenerationTask> asyncTasks, Boolean gridView)", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423157186", "createdAt": "2020-05-11T16:17:02Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -458,6 +448,13 @@ public ThumbnailGenerationTask(ImageView imageView, FileDataStorageManager stora\n             mAsyncTasks = asyncTasks;\n         }\n \n+        public ThumbnailGenerationTask(ImageView imageView, FileDataStorageManager storageManager,\n+                                       Account account, List<ThumbnailGenerationTask> asyncTasks, Boolean isGridView)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE2NzkwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNzoxNVrOGTjeUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoxNzoxNVrOGTjeUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1NzMzMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    if (isGridView){\n          \n          \n            \n                                    if (gridView) {", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423157330", "createdAt": "2020-05-11T16:17:15Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -543,10 +540,10 @@ protected void onPostExecute(Bitmap bitmap) {\n                         tagId = String.valueOf(((TrashbinFile) mFile).getRemoteId());\n                     }\n                     if (String.valueOf(imageView.getTag()).equals(tagId)) {\n-                        if (roundedCorners) {\n-                            BitmapUtils.setRoundedBitmap(bitmap, imageView);\n+                        if (isGridView){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE4Mjc1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoyMDo0OVrOGTjneg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxODozMToyN1rOGUTsOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1OTY3NA==", "bodyText": "is the size also in the then called API a pixel or a DP value? If it is a Pixel value then the magic number \"8\" used some lines below might be read as Pixel, so to be sure it is pixel-perfect it would have to be read from a dimsvalue why Android would convert to the correct pixel value at runtime.", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423159674", "createdAt": "2020-05-11T16:20:49Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "diffHunk": "@@ -721,6 +721,16 @@ public void onViewAttachedToWindow(@NonNull RecyclerView.ViewHolder holder) {\n         }\n     }\n \n+    private static void configShimmerGridImageSize(LoaderImageView thumbnailShimmer, int size){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk0NzMyMg==", "bodyText": "I replaced it with dynamically calculated values for each scale. Watch the next commit", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423947322", "createdAt": "2020-05-12T18:31:27Z", "author": {"login": "sirambd"}, "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "diffHunk": "@@ -721,6 +721,16 @@ public void onViewAttachedToWindow(@NonNull RecyclerView.ViewHolder holder) {\n         }\n     }\n \n+    private static void configShimmerGridImageSize(LoaderImageView thumbnailShimmer, int size){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1OTY3NA=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE4NzE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoyMjowMlrOGTjqWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoyMjowMlrOGTjqWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE2MDQxMQ==", "bodyText": "This is what I meant in the dims comment above", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423160411", "createdAt": "2020-05-11T16:22:02Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "diffHunk": "@@ -430,11 +430,20 @@ public static Bitmap drawableToBitmap(Drawable drawable) {\n     }\n \n     public static void setRoundedBitmap(Bitmap thumbnail, ImageView imageView) {\n-        Resources resources = MainApp.getAppContext().getResources();\n+        BitmapUtils.setRoundedBitmap(getResources(),\n+                                     thumbnail,\n+                                     getResources().getDimension(R.dimen.file_icon_rounded_corner_radius),\n+                                     imageView);\n+    }\n \n-        BitmapUtils.setRoundedBitmap(resources,\n+    public static void setRoundedBitmapForGridMode(Bitmap thumbnail, ImageView imageView){\n+        BitmapUtils.setRoundedBitmap(getResources(),\n                                      thumbnail,\n-                                     resources.getDimension(R.dimen.file_icon_rounded_corner_radius),\n+                                     getResources().getDimension(R.dimen.file_icon_rounded_corner_radius_for_grid_mode),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTE5MjI5OnYy", "diffSide": "RIGHT", "path": "src/main/res/layout/grid_image.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNjoyMzoxOFrOGTjtlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxODoyNDo0N1rOGUTc8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE2MTIzNw==", "bodyText": "please duplicate for padding or rename to a more generic name if used for margin and padding", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423161237", "createdAt": "2020-05-11T16:23:18Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/res/layout/grid_image.xml", "diffHunk": "@@ -40,19 +40,19 @@\n                 android:id=\"@+id/thumbnail_shimmer\"\n                 android:layout_width=\"match_parent\"\n                 android:layout_height=\"match_parent\"\n-                android:layout_margin=\"@dimen/standard_eigth_padding\"\n+                android:layout_margin=\"@dimen/grid_image_icon_margin\"\n                 android:contentDescription=\"@null\"\n-                android:scaleType=\"centerCrop\"\n                 android:visibility=\"gone\"\n-                app:width_weight=\"0.4\"\n-                app:height_weight=\"0.6\" />\n+                app:corners=\"6\"\n+                app:height_weight=\"0.6\"\n+                app:width_weight=\"0.4\" />\n \n             <com.owncloud.android.ui.SquareImageView\n                 android:id=\"@+id/thumbnail\"\n                 android:layout_width=\"match_parent\"\n                 android:layout_height=\"match_parent\"\n                 android:contentDescription=\"@null\"\n-                android:padding=\"@dimen/standard_eigth_padding\"\n+                android:padding=\"@dimen/grid_image_icon_margin\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk0MzQxMA==", "bodyText": "It's fixed", "url": "https://github.com/nextcloud/android/pull/6044#discussion_r423943410", "createdAt": "2020-05-12T18:24:47Z", "author": {"login": "sirambd"}, "path": "src/main/res/layout/grid_image.xml", "diffHunk": "@@ -40,19 +40,19 @@\n                 android:id=\"@+id/thumbnail_shimmer\"\n                 android:layout_width=\"match_parent\"\n                 android:layout_height=\"match_parent\"\n-                android:layout_margin=\"@dimen/standard_eigth_padding\"\n+                android:layout_margin=\"@dimen/grid_image_icon_margin\"\n                 android:contentDescription=\"@null\"\n-                android:scaleType=\"centerCrop\"\n                 android:visibility=\"gone\"\n-                app:width_weight=\"0.4\"\n-                app:height_weight=\"0.6\" />\n+                app:corners=\"6\"\n+                app:height_weight=\"0.6\"\n+                app:width_weight=\"0.4\" />\n \n             <com.owncloud.android.ui.SquareImageView\n                 android:id=\"@+id/thumbnail\"\n                 android:layout_width=\"match_parent\"\n                 android:layout_height=\"match_parent\"\n                 android:contentDescription=\"@null\"\n-                android:padding=\"@dimen/standard_eigth_padding\"\n+                android:padding=\"@dimen/grid_image_icon_margin\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE2MTIzNw=="}, "originalCommit": {"oid": "4157a120fe1e43367f59ded60e69eebe6b9ae1ce"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3012, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}