{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMDE5Mzgz", "number": 6479, "title": "Fixed create folder due to new system (write on server is only performed upon unlock)", "bodyText": "added test case for remove file\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-07-16T08:50:06Z", "url": "https://github.com/nextcloud/android/pull/6479", "merged": true, "mergeCommit": {"oid": "ed94dfb139256c51edc320f0cceff5c007e122b7"}, "closed": true, "closedAt": "2020-07-23T05:06:25Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2vKn2ABqjM1NjUxMjQ4MjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3cDjCAFqTQ1MzM5ODA1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9022be25905d05b6ac13a72578caadad3622f37b", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/9022be25905d05b6ac13a72578caadad3622f37b", "committedDate": "2020-07-16T08:49:26Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "2a8adcaf3dba2677363d7d34b385bc06e2d8c6c7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/2a8adcaf3dba2677363d7d34b385bc06e2d8c6c7", "committedDate": "2020-07-20T10:34:47Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNjQyNzk3", "url": "https://github.com/nextcloud/android/pull/6479#pullrequestreview-451642797", "createdAt": "2020-07-20T14:10:35Z", "commit": {"oid": "2a8adcaf3dba2677363d7d34b385bc06e2d8c6c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a8adcaf3dba2677363d7d34b385bc06e2d8c6c7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/2a8adcaf3dba2677363d7d34b385bc06e2d8c6c7", "committedDate": "2020-07-20T10:34:47Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "156553839c799c3406b77cfd33dc34a6c8821bff", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/156553839c799c3406b77cfd33dc34a6c8821bff", "committedDate": "2020-07-21T06:28:11Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "121c6c1f231717575d61acf5581e756e135fad2d", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/121c6c1f231717575d61acf5581e756e135fad2d", "committedDate": "2020-07-21T12:58:28Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "156553839c799c3406b77cfd33dc34a6c8821bff", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/156553839c799c3406b77cfd33dc34a6c8821bff", "committedDate": "2020-07-21T06:28:11Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "121c6c1f231717575d61acf5581e756e135fad2d", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/121c6c1f231717575d61acf5581e756e135fad2d", "committedDate": "2020-07-21T12:58:28Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "933c61d0c981341301606d15b7ed22aff0530068", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/933c61d0c981341301606d15b7ed22aff0530068", "committedDate": "2020-07-22T14:28:48Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "907e9f0b264f9b40f9b1e24d6176dd4b901a07af", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/907e9f0b264f9b40f9b1e24d6176dd4b901a07af", "committedDate": "2020-07-22T14:47:53Z", "message": "Fixed create folder due to new system (write on server is only performed upon unlock)\nadded test case for remove file\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMzk4MDMw", "url": "https://github.com/nextcloud/android/pull/6479#pullrequestreview-453398030", "createdAt": "2020-07-22T14:53:07Z", "commit": {"oid": "907e9f0b264f9b40f9b1e24d6176dd4b901a07af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDo1MzowN1rOG1mOYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDo1MzowN1rOG1mOYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg1Mzk4Nw==", "bodyText": "Codacy found an issue: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/6479#discussion_r458853987", "createdAt": "2020-07-22T14:53:07Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/operations/UploadFileOperation.java", "diffHunk": "@@ -613,6 +613,13 @@ private RemoteOperationResult encryptedUpload(OwnCloudClient client, OCFile pare\n                                                token,\n                                                client,\n                                                metadataExists);\n+\n+                // unlock\n+                result = EncryptionUtils.unlockFolder(parentFile, client, token);\n+\n+                if (result.isSuccess()) {\n+                    token = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "907e9f0b264f9b40f9b1e24d6176dd4b901a07af"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMzk4MDUx", "url": "https://github.com/nextcloud/android/pull/6479#pullrequestreview-453398051", "createdAt": "2020-07-22T14:53:08Z", "commit": {"oid": "907e9f0b264f9b40f9b1e24d6176dd4b901a07af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDo1MzowOFrOG1mObw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDo1MzowOFrOG1mObw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg1Mzk5OQ==", "bodyText": "Codacy found an issue: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/6479#discussion_r458853999", "createdAt": "2020-07-22T14:53:08Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/operations/CreateFolderOperation.java", "diffHunk": "@@ -212,6 +186,43 @@ private RemoteOperationResult encryptedCreate(OCFile parent, String remoteParent\n                                                token,\n                                                client,\n                                                metadataExists);\n+\n+                // unlock folder\n+                if (token != null) {\n+                    RemoteOperationResult unlockFolderResult = EncryptionUtils.unlockFolder(parent, client, token);\n+\n+                    if (unlockFolderResult.isSuccess()) {\n+                        token = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "907e9f0b264f9b40f9b1e24d6176dd4b901a07af"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4536, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}