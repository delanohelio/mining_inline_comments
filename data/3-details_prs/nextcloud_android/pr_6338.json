{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MzM0ODg0", "number": 6338, "title": "Removed legacy login", "bodyText": "cleaned up a bit AuthenticatorActivity\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-06-23T05:48:47Z", "url": "https://github.com/nextcloud/android/pull/6338", "merged": true, "mergeCommit": {"oid": "5288548e700908ee53dce7f6c1075aa523baa89c"}, "closed": true, "closedAt": "2020-06-25T21:33:57Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuBwAEABqjM0NzE5NDEwMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu1YuBAH2gAyNDM4MzM0ODg0OmUwZDU2NzYxNTE4ZmE3MDQxY2UwMGM4MjAzYjg2YmFjNWYwZDFjNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "626312db06166e85630fc3d7a4f628cf3dacf5d0", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/626312db06166e85630fc3d7a4f628cf3dacf5d0", "committedDate": "2020-06-23T06:16:00Z", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "df92c54f288451449c0aad1c067a83eb417b575a", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/df92c54f288451449c0aad1c067a83eb417b575a", "committedDate": "2020-06-23T09:08:47Z", "message": "Removed legacy login\ncleaned up a bit AuthenticatorActivity\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1Njk5MTIw", "url": "https://github.com/nextcloud/android/pull/6338#pullrequestreview-435699120", "createdAt": "2020-06-23T11:44:01Z", "commit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTo0NDowMlrOGnlZyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTo0NDowMlrOGnlZyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE2MDQ1Ng==", "bodyText": "should be extracted to strings.xml", "url": "https://github.com/nextcloud/android/pull/6338#discussion_r444160456", "createdAt": "2020-06-23T11:44:02Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/authentication/AuthenticatorActivity.java", "diffHunk": "@@ -529,39 +449,19 @@ private void parseAndLoginFromWebView(String dataString) {\n         String prefix = getString(R.string.login_data_own_scheme) + PROTOCOL_SUFFIX + \"login/\";\n         LoginUrlInfo loginUrlInfo = parseLoginDataUrl(prefix, dataString);\n \n-        if (loginUrlInfo != null) {\n-            try {\n-                if (mHostUrlInput != null) {\n-                    mHostUrlInput.setText(\"\");\n-                }\n-                mServerInfo.mBaseUrl = AuthenticatorUrlUtils.normalizeUrlSuffix(loginUrlInfo.serverAddress);\n-                webViewUser = loginUrlInfo.username;\n-                webViewPassword = loginUrlInfo.password;\n-            } catch (Exception e) {\n-                mServerStatusIcon = R.drawable.ic_alert;\n-                mServerStatusText = \"QR Code could not be read!\";\n-                showServerStatus();\n-            }\n-            checkOcServer();\n-        }\n-    }\n-\n-    private void populateLoginFields(String dataString) throws IllegalArgumentException {\n-        // check if it is cloud://login/\n-        if (dataString.startsWith(getString(R.string.login_data_own_scheme) + PROTOCOL_SUFFIX + \"login/\")) {\n-            String prefix = getString(R.string.login_data_own_scheme) + PROTOCOL_SUFFIX + \"login/\";\n-            LoginUrlInfo loginUrlInfo = parseLoginDataUrl(prefix, dataString);\n-\n-            if (loginUrlInfo != null) {\n-                mHostUrlInput.setText(loginUrlInfo.serverAddress);\n-                mUsernameInput.setText(loginUrlInfo.username);\n-                mPasswordInput.setText(loginUrlInfo.password);\n-\n-                if (loginUrlInfo.serverAddress != null && !mServerIsChecked) {\n-                    onUrlInputFocusLost();\n-                }\n+        try {\n+            if (mHostUrlInput != null) {\n+                mHostUrlInput.setText(\"\");\n             }\n+            mServerInfo.mBaseUrl = AuthenticatorUrlUtils.normalizeUrlSuffix(loginUrlInfo.serverAddress);\n+            webViewUser = loginUrlInfo.username;\n+            webViewPassword = loginUrlInfo.password;\n+        } catch (Exception e) {\n+            mServerStatusIcon = R.drawable.ic_alert;\n+            mServerStatusText = \"QR Code could not be read!\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476"}, "originalPosition": 303}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NzAwODM3", "url": "https://github.com/nextcloud/android/pull/6338#pullrequestreview-435700837", "createdAt": "2020-06-23T11:46:39Z", "commit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTo0NjozOVrOGnlfIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTo0NjozOVrOGnlfIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE2MTgyNw==", "bodyText": "like mentioned above, should be extracted to strings.xml", "url": "https://github.com/nextcloud/android/pull/6338#discussion_r444161827", "createdAt": "2020-06-23T11:46:39Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/authentication/AuthenticatorActivity.java", "diffHunk": "@@ -2017,17 +1393,15 @@ public void onServiceConnected(ComponentName component, IBinder service) {\n                     String prefix = getString(R.string.login_data_own_scheme) + PROTOCOL_SUFFIX + \"login/\";\n                     LoginUrlInfo loginUrlInfo = parseLoginDataUrl(prefix, data.toString());\n \n-                    if (loginUrlInfo != null) {\n-                        try {\n-                            mServerInfo.mBaseUrl = AuthenticatorUrlUtils.normalizeUrlSuffix(loginUrlInfo.serverAddress);\n-                            webViewUser = loginUrlInfo.username;\n-                            webViewPassword = loginUrlInfo.password;\n-                            doOnResumeAndBound();\n-                        } catch (Exception e) {\n-                            mServerStatusIcon = R.drawable.ic_alert;\n-                            mServerStatusText = \"QR Code could not be read!\";\n-                            showServerStatus();\n-                        }\n+                    try {\n+                        mServerInfo.mBaseUrl = AuthenticatorUrlUtils.normalizeUrlSuffix(loginUrlInfo.serverAddress);\n+                        webViewUser = loginUrlInfo.username;\n+                        webViewPassword = loginUrlInfo.password;\n+                        doOnResumeAndBound();\n+                    } catch (Exception e) {\n+                        mServerStatusIcon = R.drawable.ic_alert;\n+                        mServerStatusText = \"QR Code could not be read!\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476"}, "originalPosition": 1375}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NzAyMjE3", "url": "https://github.com/nextcloud/android/pull/6338#pullrequestreview-435702217", "createdAt": "2020-06-23T11:48:52Z", "commit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef9876c0f75bc96d620f1b01dae9a8afec3af476", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/ef9876c0f75bc96d620f1b01dae9a8afec3af476", "committedDate": "2020-06-23T09:37:01Z", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "4d5136424b3f34306484d53f9e7ddd8ce7517d19", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/4d5136424b3f34306484d53f9e7ddd8ce7517d19", "committedDate": "2020-06-25T13:41:52Z", "message": "changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58ba15ac95ebf367033033bc83ca5419f9efd0a9", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/58ba15ac95ebf367033033bc83ca5419f9efd0a9", "committedDate": "2020-06-25T20:57:22Z", "message": "Removed legacy login\ncleaned up a bit AuthenticatorActivity\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ed4e2b24e2113d4c8eb695f34abcd69d0440bc7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/7ed4e2b24e2113d4c8eb695f34abcd69d0440bc7", "committedDate": "2020-06-25T20:57:48Z", "message": "changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c7bf5e31c6119063655d26030d1c63e3df7a674", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/6c7bf5e31c6119063655d26030d1c63e3df7a674", "committedDate": "2020-06-25T13:50:33Z", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "7ed4e2b24e2113d4c8eb695f34abcd69d0440bc7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/7ed4e2b24e2113d4c8eb695f34abcd69d0440bc7", "committedDate": "2020-06-25T20:57:48Z", "message": "changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d56761518fa7041ce00c8203b86bac5f0d1c40", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/e0d56761518fa7041ce00c8203b86bac5f0d1c40", "committedDate": "2020-06-25T21:18:34Z", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4585, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}