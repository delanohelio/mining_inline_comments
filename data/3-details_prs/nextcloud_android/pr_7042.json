{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NzY2NDk5", "number": 7042, "title": "Auto Upload: Ignore folders that have no-images or seem to be music albums", "bodyText": "(->just a single cover art image)\nblock detection notification and hide in lists\nrelated to #3239\nResolves #7085\nResolves #4350\nSigned-off-by: Andy Scherzinger info@andy-scherzinger.de\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-10-02T08:35:22Z", "url": "https://github.com/nextcloud/android/pull/7042", "merged": true, "mergeCommit": {"oid": "ee01ed385e687fd7afabd7280928ea6fa95df7dd"}, "closed": true, "closedAt": "2020-10-15T13:26:46Z", "author": {"login": "AndyScherzinger"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOiDucgBqjM4MzMwMDcyMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSxFfWgFqTUwOTMzMTk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a98fecda451a27d2cf12a8782a362c3da9a6af0d", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/a98fecda451a27d2cf12a8782a362c3da9a6af0d", "committedDate": "2020-10-02T08:28:26Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "70c96b3993b5d12946e2ddfd57d86856c5b06793", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/70c96b3993b5d12946e2ddfd57d86856c5b06793", "committedDate": "2020-10-02T08:51:55Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70c96b3993b5d12946e2ddfd57d86856c5b06793", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/70c96b3993b5d12946e2ddfd57d86856c5b06793", "committedDate": "2020-10-02T08:51:55Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "4db62933d5d2813c4a87fb15409cb251246b784e", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/4db62933d5d2813c4a87fb15409cb251246b784e", "committedDate": "2020-10-02T08:54:33Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4db62933d5d2813c4a87fb15409cb251246b784e", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/4db62933d5d2813c4a87fb15409cb251246b784e", "committedDate": "2020-10-02T08:54:33Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "d4bcba2c0c005dff8a318690020bd5769e862e6b", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d4bcba2c0c005dff8a318690020bd5769e862e6b", "committedDate": "2020-10-02T09:25:17Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4bcba2c0c005dff8a318690020bd5769e862e6b", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d4bcba2c0c005dff8a318690020bd5769e862e6b", "committedDate": "2020-10-02T09:25:17Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "413477e03c3d48bed84bce8ab3f235130f5e667c", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/413477e03c3d48bed84bce8ab3f235130f5e667c", "committedDate": "2020-10-02T10:07:29Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDM1NTA0", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-501035504", "createdAt": "2020-10-02T10:49:04Z", "commit": {"oid": "413477e03c3d48bed84bce8ab3f235130f5e667c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMDo0OTowNFrOHbpTJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMDo0OTowNFrOHbpTJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc1MDI0NQ==", "bodyText": "I am unsure if this handles all special cases correctly.\nnew File(path).getName() will work, though I have no idea if needed or if there is a performance drawback", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r498750245", "createdAt": "2020-10-02T10:49:04Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/FileUtil.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Andy Scherzinger\n+ * Copyright (C) 2020 Andy Scherzinger\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.owncloud.android.utils;\n+\n+import com.owncloud.android.lib.resources.files.FileUtils;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+public final class FileUtil {\n+\n+    private FileUtil() {\n+        // utility class -> private constructor\n+    }\n+\n+    public static @NonNull String getFilenameFromPathString(@Nullable String filePath) {\n+        if (filePath != null) {\n+            return filePath.substring(filePath.lastIndexOf(FileUtils.PATH_SEPARATOR) + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "413477e03c3d48bed84bce8ab3f235130f5e667c"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "413477e03c3d48bed84bce8ab3f235130f5e667c", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/413477e03c3d48bed84bce8ab3f235130f5e667c", "committedDate": "2020-10-02T10:07:29Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "f2505b9253267ba8a51422f1a5e82a6b48aae491", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/f2505b9253267ba8a51422f1a5e82a6b48aae491", "committedDate": "2020-10-02T11:18:21Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMjM1OTU0", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-501235954", "createdAt": "2020-10-02T15:29:10Z", "commit": {"oid": "9e9d16f627d6c2b356d3939b9eaf19867efe0d74"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyOToxMFrOHbyC-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNTozMDoyMFrOHbyFjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MzU2Mw==", "bodyText": "The string printed in case of assertion error is a bit misleading, or?\nI think you can just remove it, as in all these cases it is direct understandable what should be tested", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r498893563", "createdAt": "2020-10-02T15:29:10Z", "author": {"login": "tobiasKaminsky"}, "path": "src/androidTest/java/com/owncloud/android/utils/FileUtilTest.kt", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Andy Scherzinger\n+ * Copyright (C) 2020 Andy Scherzinger\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <https://www.gnu.org/licenses/>.\n+ */\n+package com.owncloud.android.utils\n+\n+import com.owncloud.android.AbstractIT\n+import org.junit.Assert\n+import org.junit.Test\n+import java.io.File\n+\n+class FileUtilTest : AbstractIT() {\n+    @Test\n+    fun assertNullInput() {\n+        Assert.assertEquals(\"text returned when searchText was not empty\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e9d16f627d6c2b356d3939b9eaf19867efe0d74"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDIyMg==", "bodyText": "Can you add \"in case of null or path is a a folder it returns \"\" \"", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r498894222", "createdAt": "2020-10-02T15:30:20Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/FileUtil.java", "diffHunk": "@@ -34,7 +34,12 @@ private FileUtil() {\n \n     public static @NonNull String getFilenameFromPathString(@Nullable String filePath) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e9d16f627d6c2b356d3939b9eaf19867efe0d74"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ab0851d2aaf23ccdd5506d58a81db382b98befe", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/0ab0851d2aaf23ccdd5506d58a81db382b98befe", "committedDate": "2020-10-02T16:05:03Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "dfc82fef63c56591332cadeb36dd3b3842cb6b64", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/dfc82fef63c56591332cadeb36dd3b3842cb6b64", "committedDate": "2020-10-02T16:19:27Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfc82fef63c56591332cadeb36dd3b3842cb6b64", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/dfc82fef63c56591332cadeb36dd3b3842cb6b64", "committedDate": "2020-10-02T16:19:27Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "c9fded2b17cd5c09954753edb98b33311a444ce9", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/c9fded2b17cd5c09954753edb98b33311a444ce9", "committedDate": "2020-10-02T17:42:48Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9fded2b17cd5c09954753edb98b33311a444ce9", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/c9fded2b17cd5c09954753edb98b33311a444ce9", "committedDate": "2020-10-02T17:42:48Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "d8b3509e3d6f36f07e7551949bb08bdfbefeba63", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d8b3509e3d6f36f07e7551949bb08bdfbefeba63", "committedDate": "2020-10-02T20:49:37Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8b3509e3d6f36f07e7551949bb08bdfbefeba63", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d8b3509e3d6f36f07e7551949bb08bdfbefeba63", "committedDate": "2020-10-02T20:49:37Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "875aa1caa5c4e9ab5661e3fcba74539f489208b1", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/875aa1caa5c4e9ab5661e3fcba74539f489208b1", "committedDate": "2020-10-02T20:54:20Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "875aa1caa5c4e9ab5661e3fcba74539f489208b1", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/875aa1caa5c4e9ab5661e3fcba74539f489208b1", "committedDate": "2020-10-02T20:54:20Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "b27a2e37624a87f397dd6094f4f2639deb56f609", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/b27a2e37624a87f397dd6094f4f2639deb56f609", "committedDate": "2020-10-06T09:35:06Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyOTc3NzU4", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-502977758", "createdAt": "2020-10-06T13:44:06Z", "commit": {"oid": "b27a2e37624a87f397dd6094f4f2639deb56f609"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyOTc4ODgy", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-502978882", "createdAt": "2020-10-06T13:45:08Z", "commit": {"oid": "b27a2e37624a87f397dd6094f4f2639deb56f609"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMzo0NTowOFrOHdHVtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMzo0NTowOFrOHdHVtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI5MDk5Nw==", "bodyText": "Can we have also tests for this class? \ud83d\udc99\ud83d\udc99\ud83d\udc99", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r500290997", "createdAt": "2020-10-06T13:45:08Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/SyncedFolderUtils.java", "diffHunk": "@@ -0,0 +1,202 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Andy Scherzinger\n+ * Copyright (C) 2020 Andy Scherzinger\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.owncloud.android.utils;\n+\n+import com.owncloud.android.datamodel.MediaFolder;\n+import com.owncloud.android.datamodel.MediaFolderType;\n+import com.owncloud.android.datamodel.SyncedFolder;\n+\n+import java.io.File;\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Set;\n+\n+import androidx.annotation.Nullable;\n+\n+/**\n+ * Utility class with methods for processing synced folders.\n+ */\n+public final class SyncedFolderUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27a2e37624a87f397dd6094f4f2639deb56f609"}, "originalPosition": 38}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b27a2e37624a87f397dd6094f4f2639deb56f609", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/b27a2e37624a87f397dd6094f4f2639deb56f609", "committedDate": "2020-10-06T09:35:06Z", "message": "shorten tests and adding javadoc for public method\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "8a5504bcb0032088bd0a74d1170962a73df92b41", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/8a5504bcb0032088bd0a74d1170962a73df92b41", "committedDate": "2020-10-07T12:26:32Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a5504bcb0032088bd0a74d1170962a73df92b41", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/8a5504bcb0032088bd0a74d1170962a73df92b41", "committedDate": "2020-10-07T12:26:32Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "d0f4445c7915d63deab17962d0838a2e10d8cd3e", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d0f4445c7915d63deab17962d0838a2e10d8cd3e", "committedDate": "2020-10-07T12:29:40Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0f4445c7915d63deab17962d0838a2e10d8cd3e", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d0f4445c7915d63deab17962d0838a2e10d8cd3e", "committedDate": "2020-10-07T12:29:40Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "00ec8ed8793ff25a7e53c6d4e025b16ba7066956", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/00ec8ed8793ff25a7e53c6d4e025b16ba7066956", "committedDate": "2020-10-13T16:00:56Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00ec8ed8793ff25a7e53c6d4e025b16ba7066956", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/00ec8ed8793ff25a7e53c6d4e025b16ba7066956", "committedDate": "2020-10-13T16:00:56Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "2466367a8728e954780435dec85f35b3a46a350f", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/2466367a8728e954780435dec85f35b3a46a350f", "committedDate": "2020-10-14T13:15:56Z", "message": "ignore thumbnauil folders for detection/display - related to #7085\nignore thumbdata files for detection - related to #3177\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84d8a7262fe9e851f41ca125868f254c5a438d91", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/84d8a7262fe9e851f41ca125868f254c5a438d91", "committedDate": "2020-10-14T13:40:47Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "e10c68395d0358fc470cbfa5c1c08ee04635f452", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/e10c68395d0358fc470cbfa5c1c08ee04635f452", "committedDate": "2020-10-14T13:48:31Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e10c68395d0358fc470cbfa5c1c08ee04635f452", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/e10c68395d0358fc470cbfa5c1c08ee04635f452", "committedDate": "2020-10-14T13:48:31Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "75997d74b7dce648e91b5b48d1cc9406994e3e8a", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/75997d74b7dce648e91b5b48d1cc9406994e3e8a", "committedDate": "2020-10-14T13:51:13Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75997d74b7dce648e91b5b48d1cc9406994e3e8a", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/75997d74b7dce648e91b5b48d1cc9406994e3e8a", "committedDate": "2020-10-14T13:51:13Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "24b7b5e18f3191613f07ce759b6cd98ea1f59c2d", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/24b7b5e18f3191613f07ce759b6cd98ea1f59c2d", "committedDate": "2020-10-14T13:57:18Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24b7b5e18f3191613f07ce759b6cd98ea1f59c2d", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/24b7b5e18f3191613f07ce759b6cd98ea1f59c2d", "committedDate": "2020-10-14T13:57:18Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "f5f1b5d28d43c0515ca5f82602be0434635dbc7c", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/f5f1b5d28d43c0515ca5f82602be0434635dbc7c", "committedDate": "2020-10-14T14:05:08Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1bb8e258342d502b313608cd8dec76cbcb44592", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/e1bb8e258342d502b313608cd8dec76cbcb44592", "committedDate": "2020-10-14T18:18:31Z", "message": "Drone: update Lint results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "b665bc6aad5354ca4c0513aa136c0723a9ba48ff", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/b665bc6aad5354ca4c0513aa136c0723a9ba48ff", "committedDate": "2020-10-15T06:24:26Z", "message": "invert folder name filter check, move to standard Android view binding\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MDk2NzE1", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-509096715", "createdAt": "2020-10-15T07:36:36Z", "commit": {"oid": "ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozNjozNlrOHh3dHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozNjozNlrOHh3dHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI3MzYyOA==", "bodyText": "What is this?", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r505273628", "createdAt": "2020-10-15T07:36:36Z", "author": {"login": "tobiasKaminsky"}, "path": "src/androidTest/java/com/owncloud/android/utils/SyncedFolderUtilsTest.kt", "diffHunk": "@@ -0,0 +1,242 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Andy Scherzinger\n+ * Copyright (C) 2020 Andy Scherzinger\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program. If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+package com.owncloud.android.utils\n+\n+import com.owncloud.android.AbstractIT\n+import com.owncloud.android.datamodel.MediaFolder\n+import com.owncloud.android.datamodel.MediaFolderType\n+import com.owncloud.android.datamodel.SyncedFolder\n+import org.apache.commons.io.FileUtils\n+import org.junit.AfterClass\n+import org.junit.Assert\n+import org.junit.BeforeClass\n+import org.junit.Test\n+import java.io.File\n+import java.util.Arrays\n+\n+class SyncedFolderUtilsTest : AbstractIT() {\n+    @Test\n+    fun assertCoverFilenameUnqualified() {\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(COVER))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"cover.JPG\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"cover.jpeg\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"cover.JPEG\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"COVER.jpg\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(FOLDER))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"Folder.jpeg\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(\"FOLDER.jpg\"))\n+        Assert.assertFalse(SyncedFolderUtils.isFileNameQualifiedForAutoUpload(THUMBDATA_FILE))\n+        THUMBDATA_FILE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MDk4NjQ0", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-509098644", "createdAt": "2020-10-15T07:39:13Z", "commit": {"oid": "ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozOToxM1rOHh3pzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozOToxM1rOHh3pzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI3Njg3Ng==", "bodyText": "You can use TextUtils.isEmpty(), which checks for null and empty\n(it requires then tests to be run in androidTest )", "url": "https://github.com/nextcloud/android/pull/7042#discussion_r505276876", "createdAt": "2020-10-15T07:39:13Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/FileUtil.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Andy Scherzinger\n+ * Copyright (C) 2020 Andy Scherzinger\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.owncloud.android.utils;\n+\n+import java.io.File;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+public final class FileUtil {\n+    private static final int EMPTY_LENGTH = 0;\n+\n+    private FileUtil() {\n+        // utility class -> private constructor\n+    }\n+\n+    /**\n+     * returns the file name of a given path.\n+     *\n+     * @param filePath (absolute) file path\n+     * @return the filename including its file extension, <code>empty String</code> for invalid input values\n+     */\n+    public static @NonNull\n+    String getFilenameFromPathString(@Nullable String filePath) {\n+        if (filePath != null && filePath.length() > EMPTY_LENGTH) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/ba7d61a0d83d18edf15274ab7dfdb3c7d0898d71", "committedDate": "2020-10-15T06:36:48Z", "message": "Drone: update Lint results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "cbf63b9c2bd7765ea7b1487a24aa206e1d36b0e4", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/cbf63b9c2bd7765ea7b1487a24aa206e1d36b0e4", "committedDate": "2020-10-15T08:17:00Z", "message": "utilze TextUtils, remove unused code\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c5f5e43a7d86472c61e7c9f02bcb0cc1720e1c7", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/2c5f5e43a7d86472c61e7c9f02bcb0cc1720e1c7", "committedDate": "2020-10-15T09:35:51Z", "message": "ignore image-media folders that have no-images _or_ seem to be music albums (just a single cover art image)\nblock detection notification and hide in lists\n\nrelated to #3239\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fe33692107146e21baddfae39aa2c8eba831084", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/2fe33692107146e21baddfae39aa2c8eba831084", "committedDate": "2020-10-15T09:35:55Z", "message": "add tests\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "608dbd998fa47711e8e8c072d5ffacff9952ac60", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/608dbd998fa47711e8e8c072d5ffacff9952ac60", "committedDate": "2020-10-15T09:35:56Z", "message": "ignore thumbnauil folders for detection/display - related to #7085\nignore thumbdata files for detection - related to #3177\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2113ea26f27cc2f9f83d2181b8427f987f1f56a4", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/2113ea26f27cc2f9f83d2181b8427f987f1f56a4", "committedDate": "2020-10-15T09:35:56Z", "message": "ignore thumbnail-related data on auto upload\n\nResolves #7085\nResolves #4350\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57c3f3cf2f9bfeb44b01fdff66beb743713d5e29", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/57c3f3cf2f9bfeb44b01fdff66beb743713d5e29", "committedDate": "2020-10-15T09:35:57Z", "message": "remove unused import\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "219ca5fb93d930dc3dc83c78121cacfc94ef2009", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/219ca5fb93d930dc3dc83c78121cacfc94ef2009", "committedDate": "2020-10-15T09:35:58Z", "message": "invert folder name filter check, move to standard Android view binding\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e20e0dbf927926be8024b208b28edf3e2e30596a", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/e20e0dbf927926be8024b208b28edf3e2e30596a", "committedDate": "2020-10-15T09:35:58Z", "message": "utilze TextUtils, remove unused code\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f94eefe33ae97afbebbdf5b442adf9ac4056a42", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/0f94eefe33ae97afbebbdf5b442adf9ac4056a42", "committedDate": "2020-10-15T09:35:59Z", "message": "codacy: remove unused variable\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "551f2af4495803dc24abec95e3b775bb24ed7e92", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/551f2af4495803dc24abec95e3b775bb24ed7e92", "committedDate": "2020-10-15T08:35:18Z", "message": "codacy: remove unused variable\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "0f94eefe33ae97afbebbdf5b442adf9ac4056a42", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/0f94eefe33ae97afbebbdf5b442adf9ac4056a42", "committedDate": "2020-10-15T09:35:59Z", "message": "codacy: remove unused variable\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bba77ded8b5bba9022483c7493c16120a444bfa", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/0bba77ded8b5bba9022483c7493c16120a444bfa", "committedDate": "2020-10-15T10:03:28Z", "message": "Drone: update Lint results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MzMxOTg5", "url": "https://github.com/nextcloud/android/pull/7042#pullrequestreview-509331989", "createdAt": "2020-10-15T12:39:13Z", "commit": {"oid": "0bba77ded8b5bba9022483c7493c16120a444bfa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4421, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}