{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NzAxNjQ2", "number": 5593, "title": "Synced folder dialog: fix summary click event intercepting parent", "bodyText": "From #5512\nWhen clicking on the remote or local folder selection row, it works except if you click on the summary.\nThis is because the summary has a click listener to expand on click (i.e. it contains a very long path that was cut out).\nWhat this PR does\nBehavior change: to expand the summary, long click on the row (anywhere). Simple clicking on the summary now correctly opens the folder selection dialog.\nimage\nUpdate:\n\nRemove the expand on click on the path summaries\nRemove the folder icon on the right of the local and remote folder settings\nDisplay the local folder path (under \"Local folder\") with a user friendly nickname\n\nExamples for the new local folder display name :\n\n/storage/emulated/0/DCIM -> Internal Storage / Camera\n/storage/emulated/0/non/standard/folder -> Internal Storage /non/standard/folder\n/storage/SD_CARD/Movies -> SD_CARD / Movies\n\n\nTesting\n\n FileStorageUtils#pathToUserFriendlyDisplay\n FileStorageUtils.StandardDirectory#fromPath", "createdAt": "2020-03-06T08:47:14Z", "url": "https://github.com/nextcloud/android/pull/5593", "merged": true, "mergeCommit": {"oid": "969c0d39160544bea7812e5d83e205da7470bbf7"}, "closed": true, "closedAt": "2020-06-30T09:46:06Z", "author": {"login": "ashpieboop"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRcKetgBqjMxNjgyNjA2NTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwRwXuAFqTQzOTgwOTg0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c7329bd98c11f244aa25578eb6d4a09d3a6cb3f", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/8c7329bd98c11f244aa25578eb6d4a09d3a6cb3f", "committedDate": "2020-03-06T08:31:31Z", "message": "Synced folder dialog: fix summary click event intercepting parent\n\nFrom #5512\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}, "afterCommit": {"oid": "0c1384d24d1bdff89fa392d1f5656491453f89fc", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/0c1384d24d1bdff89fa392d1f5656491453f89fc", "committedDate": "2020-03-26T13:31:07Z", "message": "Synced folder dialog: remove folder path expand action\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "182f9a18f2f91fd1a5f9d985f8b84282d226f945", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/182f9a18f2f91fd1a5f9d985f8b84282d226f945", "committedDate": "2020-03-26T16:17:48Z", "message": "Synced folder dialog: remove local and remote folder icons\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}, "afterCommit": {"oid": "596a350d3ea8b5502abf49f0ac4d6f9006e473b6", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/596a350d3ea8b5502abf49f0ac4d6f9006e473b6", "committedDate": "2020-03-26T16:33:04Z", "message": "Synced folder dialog: remove local and remote folder icons\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a4ad20e66cfc2795033f01bd96363b34d1f3403", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/4a4ad20e66cfc2795033f01bd96363b34d1f3403", "committedDate": "2020-06-30T05:53:13Z", "message": "Synced folder dialog: remove folder path expand action\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5f56152b06b9b15389367d787adccce677b43e0", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/e5f56152b06b9b15389367d787adccce677b43e0", "committedDate": "2020-06-30T05:53:13Z", "message": "Synced folder dialog: use display name instead of full path for local folder\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7af28a1c36f2e9e23b039cf194b2ff1a994142db", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/7af28a1c36f2e9e23b039cf194b2ff1a994142db", "committedDate": "2020-06-30T05:53:13Z", "message": "Synced folder dialog: remove local and remote folder icons\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NjkxNzQ3", "url": "https://github.com/nextcloud/android/pull/5593#pullrequestreview-439691747", "createdAt": "2020-06-30T05:59:35Z", "commit": {"oid": "596a350d3ea8b5502abf49f0ac4d6f9006e473b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "596a350d3ea8b5502abf49f0ac4d6f9006e473b6", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/596a350d3ea8b5502abf49f0ac4d6f9006e473b6", "committedDate": "2020-03-26T16:33:04Z", "message": "Synced folder dialog: remove local and remote folder icons\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}, "afterCommit": {"oid": "7af28a1c36f2e9e23b039cf194b2ff1a994142db", "author": {"user": {"login": "ashpieboop", "name": "Alice Gaudon"}}, "url": "https://github.com/nextcloud/android/commit/7af28a1c36f2e9e23b039cf194b2ff1a994142db", "committedDate": "2020-06-30T05:53:13Z", "message": "Synced folder dialog: remove local and remote folder icons\n\nSigned-off-by: Alice Gaudon <alice@gaudon.pro>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726e4ca7b43b45407250f9250aea5eab388004ec", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/726e4ca7b43b45407250f9250aea5eab388004ec", "committedDate": "2020-06-30T08:52:46Z", "message": "remove unused ressources\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODA5ODQx", "url": "https://github.com/nextcloud/android/pull/5593#pullrequestreview-439809841", "createdAt": "2020-06-30T08:55:40Z", "commit": {"oid": "726e4ca7b43b45407250f9250aea5eab388004ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo1NTo0MFrOGqysuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo1NTo0MFrOGqysuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUyNDAyNA==", "bodyText": "Codacy found an issue: Avoid instantiating new objects inside loops", "url": "https://github.com/nextcloud/android/pull/5593#discussion_r447524024", "createdAt": "2020-06-30T08:55:40Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/LocalStoragePathPickerDialogFragment.java", "diffHunk": "@@ -139,48 +138,27 @@ public void onClick(DialogInterface dialog, int which) {\n     private List<StoragePathItem> getPathList() {\n         List<StoragePathItem> storagePathItems = new ArrayList<>();\n \n-        addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_image_grey600,\n-                                                          getString(R.string.storage_pictures),\n-                                                          Environment.getExternalStoragePublicDirectory(\n-                                                              Environment.DIRECTORY_PICTURES).getAbsolutePath()));\n-        addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_camera, getString(R.string.storage_camera),\n-                                                          Environment.getExternalStoragePublicDirectory(\n-                                                              Environment.DIRECTORY_DCIM).getAbsolutePath()));\n-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {\n-            addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_document_grey600,\n-                                                              getString(R.string.storage_documents),\n-                                                              Environment.getExternalStoragePublicDirectory(\n-                                                                  Environment.DIRECTORY_DOCUMENTS).getAbsolutePath()));\n+        for (FileStorageUtils.StandardDirectory standardDirectory : FileStorageUtils.StandardDirectory.getStandardDirectories()) {\n+            addIfExists(storagePathItems, standardDirectory.getIcon(), getString(standardDirectory.getDisplayName()),\n+                Environment.getExternalStoragePublicDirectory(standardDirectory.getName()).getAbsolutePath());\n         }\n-        addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_download_grey600,\n-                                                          getString(R.string.storage_downloads),\n-                                                          Environment.getExternalStoragePublicDirectory(\n-                                                              Environment.DIRECTORY_DOWNLOADS).getAbsolutePath()));\n-        addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_movie_grey600,\n-                                                          getString(R.string.storage_movies),\n-                                                          Environment.getExternalStoragePublicDirectory(\n-                                                              Environment.DIRECTORY_MOVIES).getAbsolutePath()));\n-        addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_music_grey600,\n-                                                          getString(R.string.storage_music),\n-                                                          Environment.getExternalStoragePublicDirectory(\n-                                                              Environment.DIRECTORY_MUSIC).getAbsolutePath()));\n \n         String sdCard = getString(R.string.storage_internal_storage);\n         for (String dir : FileStorageUtils.getStorageDirectories(requireActivity())) {\n             if (internalStoragePaths.contains(dir)) {\n-                addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_sd_grey600, sdCard, dir));\n+                addIfExists(storagePathItems, R.drawable.ic_sd_grey600, sdCard, dir);\n             } else {\n-                addIfExists(storagePathItems, new StoragePathItem(R.drawable.ic_sd_grey600, new File(dir).getName(), dir));\n+                addIfExists(storagePathItems, R.drawable.ic_sd_grey600, new File(dir).getName(), dir);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "726e4ca7b43b45407250f9250aea5eab388004ec"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4732, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}