{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzODk0MDY0", "number": 6165, "title": "Fix UploadFilesActivity toolbar color in light mode", "bodyText": "Hello,\nI did two commits. One to refactor the activity. And one to fix color.\nI didn't touch logic. Just UI. Even though I find it has inconsistencies with the back button...\nBefore it's use Actionbar NavigationList but it's decrepated since level 21\nI replace this by Spinner :)\n\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-05-27T14:30:13Z", "url": "https://github.com/nextcloud/android/pull/6165", "merged": true, "mergeCommit": {"oid": "9c7bd2b3e57c74daa50d4927bb8c77d5644a9975"}, "closed": true, "closedAt": "2020-05-28T08:59:18Z", "author": {"login": "JorisBodin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclZ_8YgH2gAyNDIzODk0MDY0OjQ3ZWJlZjE1YzE0YjRjOWVlYzIxY2UwODA5MzlkYmRhODdhZjlmNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclqBaRAFqTQxOTkxMTQ0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47ebef15c14b4c9eec21ce080939dbda87af9f55", "author": {"user": {"login": "JorisBodin", "name": "Joris Bodin"}}, "url": "https://github.com/nextcloud/android/commit/47ebef15c14b4c9eec21ce080939dbda87af9f55", "committedDate": "2020-05-27T14:18:45Z", "message": "Refactor UploadFilesActivity\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204", "author": {"user": {"login": "JorisBodin", "name": "Joris Bodin"}}, "url": "https://github.com/nextcloud/android/commit/67ea4c872ef46e11797403eb9cb24e0ac03b3204", "committedDate": "2020-05-27T14:21:55Z", "message": "Remove deprecated method and fix color in light\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Mjc5MjYz", "url": "https://github.com/nextcloud/android/pull/6165#pullrequestreview-419279263", "createdAt": "2020-05-27T14:34:35Z", "commit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDozNDozNVrOGbNabw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDozNDozNVrOGbNabw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE4NDQ5NQ==", "bodyText": "Issue found: Possible God Class (WMC=82, ATFD=172, TCC=20.968%)", "url": "https://github.com/nextcloud/android/pull/6165#discussion_r431184495", "createdAt": "2020-05-27T14:34:35Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/activity/UploadFilesActivity.java", "diffHunk": "@@ -77,52 +71,55 @@\n import static com.owncloud.android.utils.DisplayUtils.openSortingOrderDialogFragment;\n \n /**\n- * Displays local files and let the user choose what of them wants to upload\n- * to the current ownCloud account.\n+ * Displays local files and let the user choose what of them wants to upload to the current ownCloud account.\n  */\n-public class UploadFilesActivity extends FileActivity implements\n-    LocalFileListFragment.ContainerActivity, ActionBar.OnNavigationListener,\n+public class UploadFilesActivity extends FileActivity implements LocalFileListFragment.ContainerActivity,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Mjc5Mjc4", "url": "https://github.com/nextcloud/android/pull/6165#pullrequestreview-419279278", "createdAt": "2020-05-27T14:34:36Z", "commit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDozNDozNlrOGbNaig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDozNDozNlrOGbNaig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE4NDUyMg==", "bodyText": "Issue found: Document empty method body", "url": "https://github.com/nextcloud/android/pull/6165#discussion_r431184522", "createdAt": "2020-05-27T14:34:36Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/activity/UploadFilesActivity.java", "diffHunk": "@@ -208,14 +205,34 @@ public void onCreate(Bundle savedInstanceState) {\n \n         if (actionBar != null) {\n             actionBar.setHomeButtonEnabled(true);   // mandatory since Android ICS, according to the official documentation\n-            actionBar.setDisplayHomeAsUpEnabled(mCurrentDir != null && mCurrentDir.getName() != null);\n+            actionBar.setDisplayHomeAsUpEnabled(mCurrentDir != null);\n             actionBar.setDisplayShowTitleEnabled(false);\n-            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);\n-            actionBar.setListNavigationCallbacks(mDirectories, this);\n \n             ThemeUtils.tintBackButton(actionBar, this);\n         }\n \n+        showToolbarSpinner();\n+        mToolbarSpinner.setAdapter(mDirectories);\n+        mToolbarSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n+            @Override\n+            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\n+                int i = position;\n+                while (i-- != 0) {\n+                    onBackPressed();\n+                }\n+                // the next operation triggers a new call to this method, but it's necessary to\n+                // ensure that the name exposed in the action bar is the current directory when the\n+                // user selected it in the navigation list\n+                if (position != 0) {\n+                    mToolbarSpinner.setSelection(0);\n+                }\n+            }\n+\n+            @Override\n+            public void onNothingSelected(AdapterView<?> parent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "originalPosition": 194}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjMwMzA5", "url": "https://github.com/nextcloud/android/pull/6165#pullrequestreview-419630309", "createdAt": "2020-05-27T21:43:08Z", "commit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTExNDQ5", "url": "https://github.com/nextcloud/android/pull/6165#pullrequestreview-419911449", "createdAt": "2020-05-28T08:58:50Z", "commit": {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4646, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}