{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzMwMDc2", "number": 6156, "title": "New design (UI) - Revamp drawer", "bodyText": "Hi,\nThis PR changes the Drawer header.\n\n\n\nDevice\nLightmode\nDarkmode\n\n\n\n\nPhone\n\n\n\n\nTablet\n\n\n\n\n\nThe general behaviour is the following :\n\nNotes\n\nIf the server color is white, the icons/texts/logo will be GREY (like everywhere)\nI changed the tints and colors management for Drawer, the HTML was... inappropriate and unclear in my opinion\nThe code has been formatted, to avoid some lint errors/warnings in future :)\nThe nextcloud logo is vectorial, and the color changes with the server color\n\nLike always :D , relative to : #5207 (comment)\nThank you.\nBased on : #5207\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-05-26T16:54:27Z", "url": "https://github.com/nextcloud/android/pull/6156", "merged": true, "mergeCommit": {"oid": "01ef66a13d24d2fd74c0922f46636cf09cf1aadb"}, "closed": true, "closedAt": "2020-05-28T09:02:02Z", "author": {"login": "Kilian-Perisset"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclHvNjgBqjMzNzQ1MDgwMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclpZS4gFqTQxOTg3NzQ0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6af0df94d1f71ecbe54661415df6491d403f5103", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/6af0df94d1f71ecbe54661415df6491d403f5103", "committedDate": "2020-05-26T16:42:52Z", "message": "Fixed Android Studio lint\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}, "afterCommit": {"oid": "0f4581fdaacccd753b6f4d869833ba9d7c223873", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/0f4581fdaacccd753b6f4d869833ba9d7c223873", "committedDate": "2020-05-26T17:02:00Z", "message": "Fixed Android Studio lint\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTEyNjY2", "url": "https://github.com/nextcloud/android/pull/6156#pullrequestreview-418512666", "createdAt": "2020-05-26T17:17:37Z", "commit": {"oid": "0f4581fdaacccd753b6f4d869833ba9d7c223873"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MjU5MTI5", "url": "https://github.com/nextcloud/android/pull/6156#pullrequestreview-419259129", "createdAt": "2020-05-27T14:21:03Z", "commit": {"oid": "2d23cbaa1d71658686e9ab60140f80de8c672264"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "138aec885501aa9f038f499d6a64bbd86900e169", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/138aec885501aa9f038f499d6a64bbd86900e169", "committedDate": "2020-05-27T15:00:10Z", "message": "Removed the Drawer profiles part + removed unused code\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d862d257fb9f68df29619d87ea7db54bbc69a01", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/2d862d257fb9f68df29619d87ea7db54bbc69a01", "committedDate": "2020-05-27T15:00:10Z", "message": "Added Drawer logo description\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85b68f4482ac6fa5b31572fc1f088cc3d442a508", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/85b68f4482ac6fa5b31572fc1f088cc3d442a508", "committedDate": "2020-05-27T15:00:10Z", "message": "Fixed some Drawer errors due to clean\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00df84674463accbb6d5fe70370b5ee0636f843b", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/00df84674463accbb6d5fe70370b5ee0636f843b", "committedDate": "2020-05-27T15:00:10Z", "message": "Replaced Drawer logo color by Primary one (with white-replace)\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fc1fce488b5600df4f75e2d02ed31080dec7da6", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/0fc1fce488b5600df4f75e2d02ed31080dec7da6", "committedDate": "2020-05-27T15:00:10Z", "message": "Increased the Drawer Quota progressbar height\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb88e0f7e9a29b2c23d4522521a98f84654ca182", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/eb88e0f7e9a29b2c23d4522521a98f84654ca182", "committedDate": "2020-05-27T15:00:10Z", "message": "Adjusted drawer menu item tint management\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d47c07fa08cc66ecbbb03fbd276fb8f4963a92d", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/9d47c07fa08cc66ecbbb03fbd276fb8f4963a92d", "committedDate": "2020-05-27T15:00:10Z", "message": "Fixed Android Studio lint\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58a92cbebc33533f263f2f9341bc9fcd0a682267", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/58a92cbebc33533f263f2f9341bc9fcd0a682267", "committedDate": "2020-05-27T15:00:11Z", "message": "Fixed spotbugs useless issue\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af166ba8cefa0052abc7c0eb9e33fb3988cd6e13", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/af166ba8cefa0052abc7c0eb9e33fb3988cd6e13", "committedDate": "2020-05-27T15:00:11Z", "message": "Adjusted drawer quota font-size + Formated Drawer XML code\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd94196ede59feff9362ed9dbb8a071503a16b01", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/bd94196ede59feff9362ed9dbb8a071503a16b01", "committedDate": "2020-05-27T15:00:11Z", "message": "Replaced the logo and header drawer background/color\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "252b0dac195583e20e8943e22c5286b983f3b3a8", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/252b0dac195583e20e8943e22c5286b983f3b3a8", "committedDate": "2020-05-27T15:00:11Z", "message": "Fixed the color for Drawer Quota + fixed a global bug about color\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9673cbf30563d3b0db13fb2c69621365dbee564", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/f9673cbf30563d3b0db13fb2c69621365dbee564", "committedDate": "2020-05-27T14:59:12Z", "message": "Fixed the color for Drawer Quota + fixed a global bug about color\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}, "afterCommit": {"oid": "252b0dac195583e20e8943e22c5286b983f3b3a8", "author": {"user": {"login": "Kilian-Perisset", "name": "Kilian P\u00e9risset"}}, "url": "https://github.com/nextcloud/android/commit/252b0dac195583e20e8943e22c5286b983f3b3a8", "committedDate": "2020-05-27T15:00:11Z", "message": "Fixed the color for Drawer Quota + fixed a global bug about color\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5ODc2MjMw", "url": "https://github.com/nextcloud/android/pull/6156#pullrequestreview-419876230", "createdAt": "2020-05-28T08:13:24Z", "commit": {"oid": "252b0dac195583e20e8943e22c5286b983f3b3a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODoxMzoyNVrOGbqW7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODoxMzoyNVrOGbqW7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY1ODczMw==", "bodyText": "Just a small nitpick: we agreed that if such parameters do not fit in on line, we line wrap after each parameter:\nsetSpan(new ForegroundColorSpan(color),\n0,\nnewItemTitle.length(),\nSpannable.SPAN_EXCLUSIVE_EXCLUSIVE);\naligned by opening bracket.\nReason is that git diff is then more easier to read if a parameter changes.\nThis can be kept this way, but for future :)", "url": "https://github.com/nextcloud/android/pull/6156#discussion_r431658733", "createdAt": "2020-05-28T08:13:25Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -634,6 +635,18 @@ public static Drawable tintDrawable(Drawable drawable, int color) {\n         return null;\n     }\n \n+    /**\n+     * Will change a menu item text tint\n+     * @param item the menu item object\n+     * @param color the wanted color (as resource or color)\n+     */\n+    public static void tintMenuItemText(MenuItem item, int color) {\n+        SpannableString newItemTitle = new SpannableString(item.getTitle());\n+        newItemTitle.setSpan(new ForegroundColorSpan(color), 0, newItemTitle.length(),\n+                             Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "252b0dac195583e20e8943e22c5286b983f3b3a8"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5ODc3NDQy", "url": "https://github.com/nextcloud/android/pull/6156#pullrequestreview-419877442", "createdAt": "2020-05-28T08:15:01Z", "commit": {"oid": "252b0dac195583e20e8943e22c5286b983f3b3a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4642, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}