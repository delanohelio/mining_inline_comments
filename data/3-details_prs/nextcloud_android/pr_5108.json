{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODk0NzQw", "number": 5108, "title": "Fix text in option menu within image preview", "bodyText": "Fix #4976\nI failed to find the reason, so we are doing this now programmatically\u2026\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me", "createdAt": "2020-01-07T09:13:46Z", "url": "https://github.com/nextcloud/android/pull/5108", "merged": true, "mergeCommit": {"oid": "de46f83ddd3803e41f2ab0570e663ee5ba237735"}, "closed": true, "closedAt": "2020-01-07T21:15:20Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb39G89AH2gAyMzU5ODk0NzQwOjU3YjBkNDI1YjZlZmU2OGU4NDQzMGYyMDUyMWM3MWYxNTBkNTRlMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4HcZ9gFqTMzOTUxMTQyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/57b0d425b6efe68e84430f20521c71f150d54e25", "committedDate": "2020-01-07T09:12:34Z", "message": "Fix text in option menu within image preview\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MTEyNjgz", "url": "https://github.com/nextcloud/android/pull/5108#pullrequestreview-339112683", "createdAt": "2020-01-07T09:17:00Z", "commit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOToxNzowMFrOFazsKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOToxNzowMFrOFazsKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY1NDE4Nw==", "bodyText": "Issue found: Avoid instantiating new objects inside loops", "url": "https://github.com/nextcloud/android/pull/5108#discussion_r363654187", "createdAt": "2020-01-07T09:17:00Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java", "diffHunk": "@@ -313,16 +318,28 @@ public void onStop() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n+    public void onCreateOptionsMenu(@NotNull Menu menu, @NotNull MenuInflater inflater) {\n         super.onCreateOptionsMenu(menu, inflater);\n         inflater.inflate(R.menu.item_file, menu);\n+\n+        int nightModeFlag = getResources().getConfiguration().uiMode & Configuration.UI_MODE_NIGHT_MASK;\n+\n+        if (Configuration.UI_MODE_NIGHT_NO == nightModeFlag) {\n+            for (int i = 0; i < menu.size(); i++) {\n+                MenuItem menuItem = menu.getItem(i);\n+\n+                SpannableString spanString = new SpannableString(menuItem.getTitle().toString());\n+                spanString.setSpan(new ForegroundColorSpan(Color.BLACK), 0, spanString.length(), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MTEyNjk0", "url": "https://github.com/nextcloud/android/pull/5108#pullrequestreview-339112694", "createdAt": "2020-01-07T09:17:01Z", "commit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOToxNzowMVrOFazsNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOToxNzowMVrOFazsNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY1NDE5Nw==", "bodyText": "Issue found: Avoid instantiating new objects inside loops", "url": "https://github.com/nextcloud/android/pull/5108#discussion_r363654197", "createdAt": "2020-01-07T09:17:01Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java", "diffHunk": "@@ -313,16 +318,28 @@ public void onStop() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n+    public void onCreateOptionsMenu(@NotNull Menu menu, @NotNull MenuInflater inflater) {\n         super.onCreateOptionsMenu(menu, inflater);\n         inflater.inflate(R.menu.item_file, menu);\n+\n+        int nightModeFlag = getResources().getConfiguration().uiMode & Configuration.UI_MODE_NIGHT_MASK;\n+\n+        if (Configuration.UI_MODE_NIGHT_NO == nightModeFlag) {\n+            for (int i = 0; i < menu.size(); i++) {\n+                MenuItem menuItem = menu.getItem(i);\n+\n+                SpannableString spanString = new SpannableString(menuItem.getTitle().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NTExNDIy", "url": "https://github.com/nextcloud/android/pull/5108#pullrequestreview-339511422", "createdAt": "2020-01-07T21:15:04Z", "commit": {"oid": "57b0d425b6efe68e84430f20521c71f150d54e25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4817, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}