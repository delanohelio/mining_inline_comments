{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMDM2MjMz", "number": 6748, "title": "no sticky broadcast", "bodyText": "Fix #6654\n\nuse local broadcast system instead\nno need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-08-19T09:24:31Z", "url": "https://github.com/nextcloud/android/pull/6748", "merged": true, "mergeCommit": {"oid": "47d66d63563f0b8e0eb0512074a2738c69004ebd"}, "closed": true, "closedAt": "2020-09-02T07:33:43Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAsG_xABqjM2NzQyMTUzMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDSiGqgBqjM3MDMzNjMxMDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2f0b1348c2d5e9029d9500c8cbd5b604c08ba0e", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/a2f0b1348c2d5e9029d9500c8cbd5b604c08ba0e", "committedDate": "2020-08-19T09:23:09Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "f85a2d7164bf19ad8078fc66084ef601e78c0b06", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/f85a2d7164bf19ad8078fc66084ef601e78c0b06", "committedDate": "2020-08-20T08:40:32Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTMyNjI3", "url": "https://github.com/nextcloud/android/pull/6748#pullrequestreview-471532627", "createdAt": "2020-08-20T12:13:25Z", "commit": {"oid": "f85a2d7164bf19ad8078fc66084ef601e78c0b06"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f85a2d7164bf19ad8078fc66084ef601e78c0b06", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/f85a2d7164bf19ad8078fc66084ef601e78c0b06", "committedDate": "2020-08-20T08:40:32Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/780c4434c60e27e70d0df4d3592d6433182d05e7", "committedDate": "2020-08-21T07:56:35Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTU5MjA3", "url": "https://github.com/nextcloud/android/pull/6748#pullrequestreview-472959207", "createdAt": "2020-08-22T20:05:04Z", "commit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNTowNFrOHFHtGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowOTowNFrOHFH3gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMTE2Mg==", "bodyText": "I'd inject it from Dagger.", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475131162", "createdAt": "2020-08-22T20:05:04Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/files/services/FileDownloader.java", "diffHunk": "@@ -691,7 +692,7 @@ private void sendBroadcastDownloadFinished(\n             end.putExtra(EXTRA_LINKED_TO_PATH, unlinkedFromRemotePath);\n         }\n         end.setPackage(getPackageName());\n-        sendStickyBroadcast(end);\n+        LocalBroadcastManager.getInstance(this).sendBroadcast(end);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMjM3OQ==", "bodyText": "This is nitpicking, but Broadcast instead of BroadCast. Sorry. :)", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475132379", "createdAt": "2020-08-22T20:06:23Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java", "diffHunk": "@@ -1111,6 +1113,8 @@ protected void onResume() {\n             updateActionBarTitleAndHomeButton(startFile);\n         }\n \n+        localBroadCastManager = LocalBroadcastManager.getInstance(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMzgyNA==", "bodyText": "I think this is coming from one of my previous PRs that is already merged? Not sure how it ended up here.", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475133824", "createdAt": "2020-08-22T20:09:04Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/fragment/contactsbackup/ContactListFragment.java", "diffHunk": "@@ -58,10 +58,10 @@\n import com.nextcloud.client.account.UserAccountManager;\n import com.nextcloud.client.di.Injectable;\n import com.nextcloud.client.files.downloader.Direction;\n+import com.nextcloud.client.files.downloader.Request;\n import com.nextcloud.client.files.downloader.Transfer;\n-import com.nextcloud.client.files.downloader.TransferState;\n import com.nextcloud.client.files.downloader.TransferManagerConnection;\n-import com.nextcloud.client.files.downloader.Request;\n+import com.nextcloud.client.files.downloader.TransferState;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/780c4434c60e27e70d0df4d3592d6433182d05e7", "committedDate": "2020-08-21T07:56:35Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/4bc5bb452404d06a9692b72aa844339327fbb6a9", "committedDate": "2020-08-24T07:18:05Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTc3MDg0", "url": "https://github.com/nextcloud/android/pull/6748#pullrequestreview-473177084", "createdAt": "2020-08-24T07:20:51Z", "commit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzoyMDo1MVrOHFXgTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzoyMDo1MVrOHFXgTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDAyOQ==", "bodyText": "@ezaquarii how could I use Dagger here?\nOnly via constructor, or?", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475390029", "createdAt": "2020-08-24T07:20:51Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "diffHunk": "@@ -691,6 +692,6 @@ private void sendLocalBroadcast(String event, String dirRemotePath, RemoteOperat\n         intent.putExtra(FileSyncAdapter.EXTRA_RESULT, dataHolderItemId);\n \n         intent.setPackage(mContext.getPackageName());\n-        mContext.sendStickyBroadcast(intent);\n+        LocalBroadcastManager.getInstance(mContext.getApplicationContext()).sendBroadcast(intent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/4bc5bb452404d06a9692b72aa844339327fbb6a9", "committedDate": "2020-08-24T07:18:05Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "1edf2a44d67fa18b8070678182be09eb32e7d546", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/1edf2a44d67fa18b8070678182be09eb32e7d546", "committedDate": "2020-08-24T07:26:53Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15dcad229c2894ce1ef11e3ecf39b4791692d0c4", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/15dcad229c2894ce1ef11e3ecf39b4791692d0c4", "committedDate": "2020-08-28T10:34:20Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1edf2a44d67fa18b8070678182be09eb32e7d546", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/1edf2a44d67fa18b8070678182be09eb32e7d546", "committedDate": "2020-08-24T07:26:53Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "15dcad229c2894ce1ef11e3ecf39b4791692d0c4", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/15dcad229c2894ce1ef11e3ecf39b4791692d0c4", "committedDate": "2020-08-28T10:34:20Z", "message": "no sticky broadcast:\n- use local broadcast system instead\n- no need to remove sticky broadcasts then\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4510, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}