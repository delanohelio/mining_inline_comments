{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwODA1ODE4", "number": 6372, "title": "Migate file details and share details to User model", "bodyText": "Migate file details and share details to User model\nUserAccountManager:\n\nadded userOwnsFile API that replaces accountOwnsFile\ndeprecated accountOwnsFile\n\nFileDisplayActivity:\n\nsimplified initFragmentWithFile by passing non-null instanecs\nof user and file and thus avoiding numerous redundant null-checks\nfragments are initialized using User model instead of Account\ntransfer and\tdownload callbacks use getUser() instead of getAccount()\nand pass user instance to framents\n\nShareActivity:\n\ninitlize fragment using User model instead of Account\nclose acivity immediately if\tcurrent\tuser is\tnot available\n(cannot reach such state not, but historically account was nullable)\n\nFileDetailTabAdapter\n\nframents are\tinitialized using User model instead of\tAccount\n\nFileDetailActivitiesFragment\n\nmigrated to User\nremoved dependency on constants from FileActivity\n\nFileDetailFragment:\n\nmigrated to User\nremoved dependency on constants from FileActivity\n\nFileDetailsSharingFragment:\n\nmigrated to User\nremoved dependency on constants from FileActivity\n\nSigned-off-by: Chris Narkiewicz hello@ezaquarii.com\n\n Manual tests only as the code has no unit tests", "createdAt": "2020-06-26T22:06:22Z", "url": "https://github.com/nextcloud/android/pull/6372", "merged": true, "mergeCommit": {"oid": "ff4a0a7030dabb0f61655e282bba36adda712d9c"}, "closed": true, "closedAt": "2020-06-30T05:29:49Z", "author": {"login": "ezaquarii"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvKsB-AH2gAyNDQwODA1ODE4OmUxM2EzY2E3Y2I5Nzk2MTI5NzU4YTY2OTI3NmE2OTc2NDhlZDAxNGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwBMY2gFqTQzOTE1MTIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/e13a3ca7cb9796129758a669276a697648ed014b", "committedDate": "2020-06-26T22:07:40Z", "message": "Migate file details and share details to User model\n\nUserAccountManager:\n - added userOwnsFile API that replaces accountOwnsFile\n - deprecated accountOwnsFile\n\nFileDisplayActivity:\n - simplified initFragmentWithFile by passing non-null instanecs\n   of user and file and thus avoiding numerous redundant null-checks\n - fragments are initialized using User model instead of Account\n - transfer and download callbacks use getUser() instead of getAccount()\n   and pass user instance to framents\n\nShareActivity\n - initlize fragment using user model instead of account\n - close acivity immediately if current user is not available\n   (cannot reach such state not, but historically account was nullable)\n\nFileDetailTabAdapter\n - framents are initialized using User model instead of Account\n\nFileDetailActivitiesFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nFileDetailFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nFileDetailsSharingFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "879a81334cb9c4d37c96773275f932a654709c1a", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/879a81334cb9c4d37c96773275f932a654709c1a", "committedDate": "2020-06-26T22:05:31Z", "message": "Migate file details and share details to User model\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}, "afterCommit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/e13a3ca7cb9796129758a669276a697648ed014b", "committedDate": "2020-06-26T22:07:40Z", "message": "Migate file details and share details to User model\n\nUserAccountManager:\n - added userOwnsFile API that replaces accountOwnsFile\n - deprecated accountOwnsFile\n\nFileDisplayActivity:\n - simplified initFragmentWithFile by passing non-null instanecs\n   of user and file and thus avoiding numerous redundant null-checks\n - fragments are initialized using User model instead of Account\n - transfer and download callbacks use getUser() instead of getAccount()\n   and pass user instance to framents\n\nShareActivity\n - initlize fragment using user model instead of account\n - close acivity immediately if current user is not available\n   (cannot reach such state not, but historically account was nullable)\n\nFileDetailTabAdapter\n - framents are initialized using User model instead of Account\n\nFileDetailActivitiesFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nFileDetailFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nFileDetailsSharingFragment\n - migrated to User\n - removed dependency on constants from FileActivity\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjI2NzE2", "url": "https://github.com/nextcloud/android/pull/6372#pullrequestreview-438626716", "createdAt": "2020-06-26T22:22:03Z", "commit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMjoyMjowM1rOGpwP-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMjoyMjowM1rOGpwP-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQzNTMyMw==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/nextcloud/android/pull/6372#discussion_r446435323", "createdAt": "2020-06-26T22:22:03Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/fragment/FileDetailFragment.java", "diffHunk": "@@ -564,8 +564,8 @@ public void updateFileDetails(boolean transferring, boolean refresh) {\n             FileDownloaderBinder downloaderBinder = containerActivity.getFileDownloaderBinder();\n             FileUploaderBinder uploaderBinder = containerActivity.getFileUploaderBinder();\n             if (transferring\n-                    || (downloaderBinder != null && downloaderBinder.isDownloading(account, file))\n-                    || (uploaderBinder != null && uploaderBinder.isUploading(account, file))) {\n+                    || (downloaderBinder != null && downloaderBinder.isDownloading(user.toPlatformAccount(), file))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b"}, "originalPosition": 159}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjI2NzI1", "url": "https://github.com/nextcloud/android/pull/6372#pullrequestreview-438626725", "createdAt": "2020-06-26T22:22:05Z", "commit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMjoyMjowNVrOGpwQAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMjoyMjowNVrOGpwQAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQzNTMzMA==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/nextcloud/android/pull/6372#discussion_r446435330", "createdAt": "2020-06-26T22:22:05Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/fragment/FileDetailFragment.java", "diffHunk": "@@ -564,8 +564,8 @@ public void updateFileDetails(boolean transferring, boolean refresh) {\n             FileDownloaderBinder downloaderBinder = containerActivity.getFileDownloaderBinder();\n             FileUploaderBinder uploaderBinder = containerActivity.getFileUploaderBinder();\n             if (transferring\n-                    || (downloaderBinder != null && downloaderBinder.isDownloading(account, file))\n-                    || (uploaderBinder != null && uploaderBinder.isUploading(account, file))) {\n+                    || (downloaderBinder != null && downloaderBinder.isDownloading(user.toPlatformAccount(), file))\n+                    || (uploaderBinder != null && uploaderBinder.isUploading(user.toPlatformAccount(), file))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b"}, "originalPosition": 160}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTUxMjA5", "url": "https://github.com/nextcloud/android/pull/6372#pullrequestreview-439151209", "createdAt": "2020-06-29T13:37:53Z", "commit": {"oid": "e13a3ca7cb9796129758a669276a697648ed014b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4519, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}