{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyODE5MTI1", "number": 5436, "title": "Make user model parcelable", "bodyText": "Most of the implementation has been salvaged from #5006", "createdAt": "2020-02-09T11:39:18Z", "url": "https://github.com/nextcloud/android/pull/5436", "merged": true, "mergeCommit": {"oid": "f520f2f9a261ceca205bd6f32191cf388e6e9a65"}, "closed": true, "closedAt": "2020-02-11T08:26:27Z", "author": {"login": "ezaquarii"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCnLGQgBqjMwMjA1MzgwODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDNbBQAFqTM1NjQ3NDIxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "855c1325c74b00530acccf0a308434413117a420", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/855c1325c74b00530acccf0a308434413117a420", "committedDate": "2020-02-09T11:38:33Z", "message": "Make user model parcelable"}, "afterCommit": {"oid": "a20454522d275d4daab7d50f9ae3d0bc103a9915", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/a20454522d275d4daab7d50f9ae3d0bc103a9915", "committedDate": "2020-02-09T11:51:37Z", "message": "Make user model parcelable"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a20454522d275d4daab7d50f9ae3d0bc103a9915", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/a20454522d275d4daab7d50f9ae3d0bc103a9915", "committedDate": "2020-02-09T11:51:37Z", "message": "Make user model parcelable"}, "afterCommit": {"oid": "6378f3b7c8910032ebf5d490dcd8d0f5e1aad506", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/6378f3b7c8910032ebf5d490dcd8d0f5e1aad506", "committedDate": "2020-02-09T22:57:58Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6378f3b7c8910032ebf5d490dcd8d0f5e1aad506", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/6378f3b7c8910032ebf5d490dcd8d0f5e1aad506", "committedDate": "2020-02-09T22:57:58Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}, "afterCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/ef35c38d09cdec29481034704b555a7a6be12e83", "committedDate": "2020-02-09T23:34:10Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODgzNDM4", "url": "https://github.com/nextcloud/android/pull/5436#pullrequestreview-355883438", "createdAt": "2020-02-10T12:01:23Z", "commit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMToyM1rOFnjjcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMToyM1rOFnjjcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyMTI5OA==", "bodyText": "That is not a valid accountName, it should be test@nextloud.localhost.localdomain.", "url": "https://github.com/nextcloud/android/pull/5436#discussion_r377021298", "createdAt": "2020-02-10T12:01:23Z", "author": {"login": "tobiasKaminsky"}, "path": "src/androidTest/java/com/nextcloud/client/account/RegisteredUserTest.kt", "diffHunk": "@@ -0,0 +1,99 @@\n+package com.nextcloud.client.account\n+\n+import android.accounts.Account\n+import android.net.Uri\n+import android.os.Parcel\n+import com.owncloud.android.lib.common.OwnCloudAccount\n+import com.owncloud.android.lib.common.OwnCloudBasicCredentials\n+import com.owncloud.android.lib.resources.status.OwnCloudVersion\n+import org.junit.Assert.assertEquals\n+import org.junit.Assert.assertFalse\n+import org.junit.Assert.assertNotSame\n+import org.junit.Assert.assertTrue\n+import org.junit.Before\n+import org.junit.Test\n+import java.net.URI\n+\n+class RegisteredUserTest {\n+\n+    private companion object {\n+        fun buildTestUser(accountName: String): RegisteredUser {\n+            val uri = Uri.parse(\"https://nextcloud.localhost.localdomain\")\n+            val credentials = OwnCloudBasicCredentials(\"user\", \"pass\")\n+            val account = Account(accountName, \"test-type\")\n+            val ownCloudAccount = OwnCloudAccount(uri, credentials)\n+            val server = Server(\n+                uri = URI(uri.toString()),\n+                version = OwnCloudVersion.nextcloud_17\n+            )\n+            return RegisteredUser(\n+                account = account,\n+                ownCloudAccount = ownCloudAccount,\n+                server = server\n+            )\n+        }\n+    }\n+\n+    private lateinit var user: RegisteredUser\n+\n+    @Before\n+    fun setUp() {\n+        user = buildTestUser(\"test.nextcloud.localhost.localdomain\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODg0NDQw", "url": "https://github.com/nextcloud/android/pull/5436#pullrequestreview-355884440", "createdAt": "2020-02-10T12:03:14Z", "commit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMzoxNVrOFnjmfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMzoxNVrOFnjmfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyMjA3OQ==", "bodyText": "License", "url": "https://github.com/nextcloud/android/pull/5436#discussion_r377022079", "createdAt": "2020-02-10T12:03:15Z", "author": {"login": "tobiasKaminsky"}, "path": "src/androidTest/java/com/nextcloud/client/account/AnonymousUserTest.kt", "diffHunk": "@@ -0,0 +1,33 @@\n+package com.nextcloud.client.account", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODg0NTAz", "url": "https://github.com/nextcloud/android/pull/5436#pullrequestreview-355884503", "createdAt": "2020-02-10T12:03:22Z", "commit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMzoyMlrOFnjmtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowMzoyMlrOFnjmtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyMjEzMg==", "bodyText": "License", "url": "https://github.com/nextcloud/android/pull/5436#discussion_r377022132", "createdAt": "2020-02-10T12:03:22Z", "author": {"login": "tobiasKaminsky"}, "path": "src/androidTest/java/com/nextcloud/client/account/RegisteredUserTest.kt", "diffHunk": "@@ -0,0 +1,99 @@\n+package com.nextcloud.client.account", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODg3MTk2", "url": "https://github.com/nextcloud/android/pull/5436#pullrequestreview-355887196", "createdAt": "2020-02-10T12:08:41Z", "commit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowODo0MVrOFnju-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMjowODo0MVrOFnju-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyNDI0OA==", "bodyText": "Can we there then have also a screenshot test?\nIf you do not have time for this, just ping me, and I'll do it.", "url": "https://github.com/nextcloud/android/pull/5436#discussion_r377024248", "createdAt": "2020-02-10T12:08:41Z", "author": {"login": "tobiasKaminsky"}, "path": "src/test/java/com/nextcloud/client/etm/TestEtmViewModel.kt", "diffHunk": "@@ -54,13 +55,15 @@ class TestEtmViewModel {\n         @get:Rule\n         val rule = InstantTaskExecutorRule()\n \n+        protected lateinit var platformAccountManager: AccountManager\n         protected lateinit var sharedPreferences: SharedPreferences\n         protected lateinit var vm: EtmViewModel\n \n         @Before\n         fun setUpBase() {\n             sharedPreferences = mock()\n-            vm = EtmViewModel(sharedPreferences)\n+            platformAccountManager = mock()\n+            vm = EtmViewModel(sharedPreferences, platformAccountManager)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ce54bc21ed9c8a1add24d2565a476c0f5530c49", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/4ce54bc21ed9c8a1add24d2565a476c0f5530c49", "committedDate": "2020-02-10T15:49:12Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef35c38d09cdec29481034704b555a7a6be12e83", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/ef35c38d09cdec29481034704b555a7a6be12e83", "committedDate": "2020-02-09T23:34:10Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}, "afterCommit": {"oid": "4ce54bc21ed9c8a1add24d2565a476c0f5530c49", "author": {"user": {"login": "ezaquarii", "name": "Chris Narkiewicz"}}, "url": "https://github.com/nextcloud/android/commit/4ce54bc21ed9c8a1add24d2565a476c0f5530c49", "committedDate": "2020-02-10T15:49:12Z", "message": "Make user model parcelable\n\nSigned-off-by: Chris Narkiewicz <hello@ezaquarii.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDc0MjEw", "url": "https://github.com/nextcloud/android/pull/5436#pullrequestreview-356474210", "createdAt": "2020-02-11T08:26:08Z", "commit": {"oid": "4ce54bc21ed9c8a1add24d2565a476c0f5530c49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4787, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}