{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MDk4OTAy", "number": 5491, "title": "Enhance conflict dialog", "bodyText": "Closes #5280\n\nfix bug\nadd ui tests\nadd instrumented tests\n\n\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\n\n unit tests\n instrumented tests\n UI tests", "createdAt": "2020-02-19T10:54:00Z", "url": "https://github.com/nextcloud/android/pull/5491", "merged": true, "mergeCommit": {"oid": "c00b13df12d6251b2356cf9dd064afda47e63d1c"}, "closed": true, "closedAt": "2020-03-05T07:40:08Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF1E_BgFqTM2MTA0NjA3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKmTl3gBqjMwOTk5NTMxNzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MDc2", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046076", "createdAt": "2020-02-19T11:46:07Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjowN1rOFrlJIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjowN1rOFrlJIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTYzMg==", "bodyText": "Issue found: Avoid declaring a variable if it is unreferenced before a possible exit point.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241632", "createdAt": "2020-02-19T11:46:07Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;\n+        listener = null;\n+        user = null;\n+    }\n \n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        int color = ThemeUtils.primaryAccentColor(getContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MDg5", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046089", "createdAt": "2020-02-19T11:46:08Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjowOFrOFrlJLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjowOFrOFrlJLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY0NA==", "bodyText": "Issue found: Useless parentheses.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241644", "createdAt": "2020-02-19T11:46:08Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;\n+        listener = null;\n+        user = null;\n+    }\n \n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        int color = ThemeUtils.primaryAccentColor(getContext());\n+\n+        AlertDialog alertDialog = (AlertDialog) getDialog();\n+\n+        if (alertDialog == null || user == null) {\n+            Toast.makeText(getContext(), \"Failed to create conflict dialog\", Toast.LENGTH_LONG).show();\n+            return;\n+        }\n+\n+        alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextColor(color);\n+        alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE).setTextColor(color);\n+    }\n+\n+    @Override\n+    public void onCreate(@Nullable Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+\n+        if (savedInstanceState != null) {\n+            newFile = (File) savedInstanceState.getSerializable(\"file\");\n+            existingFile = savedInstanceState.getParcelable(\"ocfile\");\n+            user = savedInstanceState.getParcelable(\"user\");\n+            listener = (OnConflictDecisionMadeListener) getActivity();\n+        }\n+    }\n+\n+    @Override\n+    public void onSaveInstanceState(@NonNull Bundle outState) {\n+        super.onSaveInstanceState(outState);\n+\n+        outState.putSerializable(\"file\", newFile);\n+        outState.putParcelable(\"ocfile\", existingFile);\n+        outState.putParcelable(\"user\", user);\n     }\n \n     @NonNull\n     @Override\n     public Dialog onCreateDialog(Bundle savedInstanceState) {\n-        AlertDialog.Builder builder = new AlertDialog.Builder(requireActivity(), R.style.Theme_ownCloud_Dialog)\n-            .setIcon(R.drawable.ic_warning)\n-            .setTitle(R.string.conflict_title)\n-            .setMessage(getString(R.string.conflict_message))\n-            .setPositiveButton(R.string.conflict_use_local_version,\n-                               (dialog, which) -> {\n-                                   if (listener != null) {\n-                                       listener.conflictDecisionMade(Decision.KEEP_LOCAL);\n-                                   }\n-                               })\n-            .setNeutralButton(R.string.conflict_keep_both,\n-                              (dialog, which) -> {\n-                                  if (listener != null) {\n-                                      listener.conflictDecisionMade(Decision.KEEP_BOTH);\n-                                  }\n-                              });\n-\n-        if (this.canKeepServer) {\n-            builder.setNegativeButton(R.string.conflict_use_server_version,\n-                                      (dialog, which) -> {\n-                                          if (listener != null) {\n-                                              listener.conflictDecisionMade(Decision.KEEP_SERVER);\n-                                          }\n-                                      });\n-        }\n+        // Inflate the layout for the dialog\n+        LayoutInflater inflater = getActivity().getLayoutInflater();\n+        View view = inflater.inflate(R.layout.conflict_resolve_dialog, null);\n+        int accentColor = ThemeUtils.primaryAccentColor(getContext());\n+\n+        // Build the dialog\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setView(view)\n+            .setPositiveButton(R.string.common_ok, ((dialog, which) -> {\n+                if (listener != null) {\n+                    CheckBox newFile = view.findViewById(R.id.new_checkbox);\n+                    CheckBox existingFile = view.findViewById(R.id.existing_checkbox);\n+\n+                    if (newFile.isSelected() && existingFile.isSelected()) {\n+                        listener.conflictDecisionMade(Decision.KEEP_BOTH);\n+                    } else if (newFile.isSelected()) {\n+                        listener.conflictDecisionMade(Decision.KEEP_LOCAL);\n+                    } else {\n+                        listener.conflictDecisionMade(Decision.KEEP_SERVER);\n+                    }\n+                }\n+            }))\n+            .setNegativeButton(R.string.common_cancel, ((dialog, which) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 163}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MDk5", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046099", "createdAt": "2020-02-19T11:46:10Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMFrOFrlJMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMFrOFrlJMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY1MA==", "bodyText": "Issue found: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241650", "createdAt": "2020-02-19T11:46:10Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MTEx", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046111", "createdAt": "2020-02-19T11:46:11Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMVrOFrlJPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMVrOFrlJPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY2Mg==", "bodyText": "Issue found: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241662", "createdAt": "2020-02-19T11:46:11Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MTI5", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046129", "createdAt": "2020-02-19T11:46:12Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMlrOFrlJTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxMlrOFrlJTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY3Ng==", "bodyText": "Issue found: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241676", "createdAt": "2020-02-19T11:46:12Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;\n+        listener = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MTQx", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046141", "createdAt": "2020-02-19T11:46:13Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxM1rOFrlJVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxM1rOFrlJVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY4Nw==", "bodyText": "Issue found: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241687", "createdAt": "2020-02-19T11:46:13Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;\n+        listener = null;\n+        user = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDQ2MTUz", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361046153", "createdAt": "2020-02-19T11:46:14Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxNVrOFrlJXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMTo0NjoxNVrOFrlJXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI0MTY5NQ==", "bodyText": "Issue found: Useless parentheses.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381241695", "createdAt": "2020-02-19T11:46:15Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,129 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n+    public ConflictsResolveDialog() {\n+        // needed by Android\n+        existingFile = null;\n+        newFile = null;\n+        listener = null;\n+        user = null;\n+    }\n \n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        int color = ThemeUtils.primaryAccentColor(getContext());\n+\n+        AlertDialog alertDialog = (AlertDialog) getDialog();\n+\n+        if (alertDialog == null || user == null) {\n+            Toast.makeText(getContext(), \"Failed to create conflict dialog\", Toast.LENGTH_LONG).show();\n+            return;\n+        }\n+\n+        alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextColor(color);\n+        alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE).setTextColor(color);\n+    }\n+\n+    @Override\n+    public void onCreate(@Nullable Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+\n+        if (savedInstanceState != null) {\n+            newFile = (File) savedInstanceState.getSerializable(\"file\");\n+            existingFile = savedInstanceState.getParcelable(\"ocfile\");\n+            user = savedInstanceState.getParcelable(\"user\");\n+            listener = (OnConflictDecisionMadeListener) getActivity();\n+        }\n+    }\n+\n+    @Override\n+    public void onSaveInstanceState(@NonNull Bundle outState) {\n+        super.onSaveInstanceState(outState);\n+\n+        outState.putSerializable(\"file\", newFile);\n+        outState.putParcelable(\"ocfile\", existingFile);\n+        outState.putParcelable(\"user\", user);\n     }\n \n     @NonNull\n     @Override\n     public Dialog onCreateDialog(Bundle savedInstanceState) {\n-        AlertDialog.Builder builder = new AlertDialog.Builder(requireActivity(), R.style.Theme_ownCloud_Dialog)\n-            .setIcon(R.drawable.ic_warning)\n-            .setTitle(R.string.conflict_title)\n-            .setMessage(getString(R.string.conflict_message))\n-            .setPositiveButton(R.string.conflict_use_local_version,\n-                               (dialog, which) -> {\n-                                   if (listener != null) {\n-                                       listener.conflictDecisionMade(Decision.KEEP_LOCAL);\n-                                   }\n-                               })\n-            .setNeutralButton(R.string.conflict_keep_both,\n-                              (dialog, which) -> {\n-                                  if (listener != null) {\n-                                      listener.conflictDecisionMade(Decision.KEEP_BOTH);\n-                                  }\n-                              });\n-\n-        if (this.canKeepServer) {\n-            builder.setNegativeButton(R.string.conflict_use_server_version,\n-                                      (dialog, which) -> {\n-                                          if (listener != null) {\n-                                              listener.conflictDecisionMade(Decision.KEEP_SERVER);\n-                                          }\n-                                      });\n-        }\n+        // Inflate the layout for the dialog\n+        LayoutInflater inflater = getActivity().getLayoutInflater();\n+        View view = inflater.inflate(R.layout.conflict_resolve_dialog, null);\n+        int accentColor = ThemeUtils.primaryAccentColor(getContext());\n+\n+        // Build the dialog\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setView(view)\n+            .setPositiveButton(R.string.common_ok, ((dialog, which) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 149}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTEwOTM5", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361110939", "createdAt": "2020-02-19T13:33:35Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzozMzozNVrOFroKVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzozMzozNVrOFroKVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI5MTA5Mg==", "bodyText": "empty string? (for backwards compatibility?)", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381291092", "createdAt": "2020-02-19T13:33:35Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/res/values/strings.xml", "diffHunk": "@@ -328,7 +328,7 @@\n     <string name=\"instant_upload_path\">/InstantUpload</string>\n     <string name=\"auto_upload_path\">/AutoUpload</string>\n     <string name=\"conflict_title\">File conflict</string>\n-    <string name=\"conflict_message\">Which files do you want to keep? If you select both versions, the local file will have a number appended to its name.</string>\n+    <string name=\"conflict_message\"></string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTEzMDc2", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361113076", "createdAt": "2020-02-19T13:36:27Z", "commit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzozNjoyN1rOFroQgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMzozNjoyN1rOFroQgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI5MjY3NQ==", "bodyText": "strings are unused resources according to lint?", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381292675", "createdAt": "2020-02-19T13:36:27Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/res/values/strings.xml", "diffHunk": "@@ -925,4 +925,10 @@\n     <string name=\"sync_not_enough_space_dialog_action_free_space\">Free up space</string>\n     <string name=\"sync_not_enough_space_dialog_placeholder\">%1$s is %2$s, but there is only %3$s available on device.</string>\n     <string name=\"sync_not_enough_space_dialog_title\">Not enough space</string>\n+    <string name=\"conflict_message_headline\">Which files do you want to keep?</string>\n+    <string name=\"conflict_message_description\">If you select both versions, the local file will have a number appended to its name.</string>\n+    <string name=\"conflict_new_file\">New file</string>\n+    <string name=\"conflict_already_existing_file\">Already existing file</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8152786d833f0619fd847526768004fea0882e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjkwNDA2", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361690406", "createdAt": "2020-02-20T07:53:03Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzMyMzk4", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361732398", "createdAt": "2020-02-20T09:07:02Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTowNzowMlrOFsLQ0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTowNzowMlrOFsLQ0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg2NjE5Mw==", "bodyText": "static final String KEY_FILE?", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381866193", "createdAt": "2020-02-20T09:07:02Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,120 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n-\n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        AlertDialog alertDialog = (AlertDialog) getDialog();\n+\n+        if (alertDialog == null || user == null) {\n+            Toast.makeText(getContext(), \"Failed to create conflict dialog\", Toast.LENGTH_LONG).show();\n+            return;\n+        }\n+\n+        int color = ThemeUtils.primaryAccentColor(getContext());\n+        alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextColor(color);\n+        alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE).setTextColor(color);\n+    }\n+\n+    @Override\n+    public void onCreate(@Nullable Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+\n+        if (savedInstanceState != null) {\n+            newFile = (File) savedInstanceState.getSerializable(\"file\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzM0MDAy", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361734002", "createdAt": "2020-02-20T09:09:27Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTowOToyOFrOFsLWBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTowOToyOFrOFsLWBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg2NzUyNQ==", "bodyText": "NotNull -> NonNull.\nWe are using a proprietary org.jetbrains.annotations.NotNull annotation. We should use the one from androidx package, called NonNull.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381867525", "createdAt": "2020-02-20T09:09:28Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -99,7 +195,7 @@ public void showDialog(AppCompatActivity activity) {\n     }\n \n     @Override\n-    public void onCancel(DialogInterface dialog) {\n+    public void onCancel(@NotNull DialogInterface dialog) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 193}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzQwNTI2", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361740526", "createdAt": "2020-02-20T09:19:15Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxOToxNVrOFsLqmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxOToxNVrOFsLqmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3Mjc5NQ==", "bodyText": "Do we have a good reason to do it this way?\nWe are using a non-default constructor, whoch makes default constructor unavailable; default constructor is used by FragmentManager. I expect it can crash if FragmentManager tries to restore the dialog.\nHow it is normally done would be:\n\npass arguments via arguments Bundle\nimplement listener in parent activity and use type cast to obtain reference to it", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381872795", "createdAt": "2020-02-20T09:19:15Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,120 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n-\n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzQ2MjMy", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361746232", "createdAt": "2020-02-20T09:27:19Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToyNzoxOVrOFsL8sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToyNzoxOVrOFsL8sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3NzQyNg==", "bodyText": "This Optional<T>.get() can throw NPE.\nIf we really, really, really know it won't be null, let's use getOrElse(IllegalStateException::new).\nThe main reason we introduced Optional<User> was to replace nullable getAccount() call. The trouble with getAccount() was that callers were liberally assuming valid return value. Since the code was then full of if (account == null) { some ad-hoc remediation } workarounds, this assumption was not really holding up. My suspicion was that we were experiencing many edge cases of NPEs and were trying to patch them in some simple way.\nHence the Optional<T> which provides more explicit and harder to ignore API.\nHaving said all of the above, I think that the best idea would be to pass User instead of Optional<User> and just make sure that if the user dependency is not available, we never get here in the first place. This way we don't need to handle special case.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381877426", "createdAt": "2020-02-20T09:27:19Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,120 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n-\n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzQ3ODYw", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361747860", "createdAt": "2020-02-20T09:29:27Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToyOToyN1rOFsMBtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToyOToyN1rOFsMBtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3ODcwOA==", "bodyText": "This will never be called - if user is null, it would blow up with NPE in the constructor.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381878708", "createdAt": "2020-02-20T09:29:27Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -40,49 +65,120 @@\n  */\n public class ConflictsResolveDialog extends DialogFragment {\n \n+    private OCFile existingFile;\n+    private File newFile;\n+    private OnConflictDecisionMadeListener listener;\n+    private User user;\n+    private List<ThumbnailsCacheManager.ThumbnailGenerationTask> asyncTasks = new ArrayList<>();\n+\n     public enum Decision {\n         CANCEL,\n         KEEP_BOTH,\n         KEEP_LOCAL,\n         KEEP_SERVER,\n     }\n \n-    private final OnConflictDecisionMadeListener listener;\n-    private final boolean canKeepServer;\n-\n-    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener, boolean canKeepServer) {\n+    public ConflictsResolveDialog(OnConflictDecisionMadeListener listener,\n+                                  OCFile file,\n+                                  OCUpload conflictUpload, Optional<User> user) {\n         this.listener = listener;\n-        this.canKeepServer = canKeepServer;\n+        this.existingFile = file;\n+        this.newFile = new File(conflictUpload.getLocalPath());\n+        this.user = user.get();\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        AlertDialog alertDialog = (AlertDialog) getDialog();\n+\n+        if (alertDialog == null || user == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzUwMDgx", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361750081", "createdAt": "2020-02-20T09:32:34Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTozMjozNVrOFsMIrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTozMjozNVrOFsMIrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4MDQ5NQ==", "bodyText": "Cyclomatic complexity of thos method is high. I'm not sure if this is a new code or moved from somewhere else.\nIf we have bandwidth, we could split those if's into methods.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381880495", "createdAt": "2020-02-20T09:32:35Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/dialog/ConflictsResolveDialog.java", "diffHunk": "@@ -108,4 +204,137 @@ public void onCancel(DialogInterface dialog) {\n     public interface OnConflictDecisionMadeListener {\n         void conflictDecisionMade(Decision decision);\n     }\n+\n+    private void setThumbnail(OCFile file, ImageView thumbnailView) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 202}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzUzNTYy", "url": "https://github.com/nextcloud/android/pull/5491#pullrequestreview-361753562", "createdAt": "2020-02-20T09:37:27Z", "commit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTozNzoyN1rOFsMT3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTozNzoyN1rOFsMT3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4MzM1OQ==", "bodyText": "Enclosing if(getAcount != null) could be updated:\n   @Override\n    protected void onStart() {\n        super.onStart();\n        User optionalUser = getUser();\n        if (!user.isPresent()) {\n            finish(); // or launch first run activity, or do something else\n            return;\n        }\n        OCFile file = getFile();\n        ...\n        final User user = optionalUser.get(); // now it's safe\n        ConflictsResolveDialog dialog = new ConflictsResolveDialog(this,\n                getFile(),\n                conflictUpload,\n                user); // guaranteed to be non-null\n        ...\nThis way we can eliminate 1 level of ifology and decrease cyclomatic complexity a bit.", "url": "https://github.com/nextcloud/android/pull/5491#discussion_r381883359", "createdAt": "2020-02-20T09:37:27Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/activity/ConflictsResolveActivity.java", "diffHunk": "@@ -137,12 +151,21 @@ protected void onStart() {\n                 finish();\n             } else {\n                 // Check whether the file is contained in the current Account\n-                if (getStorageManager().fileExists(file.getRemotePath())) {\n-                    ConflictsResolveDialog dialog = new ConflictsResolveDialog(this, !this.shouldDeleteLocal());\n-                    dialog.showDialog(this);\n-                } else {\n-                    // Account was changed to a different one - just finish\n-                    finish();\n+                Fragment prev = getSupportFragmentManager().findFragmentByTag(\"conflictDialog\");\n+\n+                FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();\n+                if (prev == null) {\n+                    if (getStorageManager().fileExists(file.getRemotePath())) {\n+                        ConflictsResolveDialog dialog = new ConflictsResolveDialog(this,\n+                                                                                   getFile(),\n+                                                                                   conflictUpload,\n+                                                                                   getUser()\n+                        );\n+                        dialog.show(fragmentTransaction, \"conflictDialog\");\n+                    } else {\n+                        // Account was changed to a different one - just finish", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87c85b6dc44aa82700d23d3bf93c856485d3e012"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae08a42f8a5ebfa5c7ef6936ec0a294b0134534b", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/ae08a42f8a5ebfa5c7ef6936ec0a294b0134534b", "committedDate": "2020-03-03T09:31:03Z", "message": "Enhance conflict dialog\n- fix bug\n- add ui tests\n- add instrumented tests\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628e58e65ececab597020ce38d58b6f4b668a2df", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/628e58e65ececab597020ce38d58b6f4b668a2df", "committedDate": "2020-03-03T09:31:03Z", "message": "Fixe during CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836e51fa79191e4756618d3f11f85de8e40ded98", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/836e51fa79191e4756618d3f11f85de8e40ded98", "committedDate": "2020-03-03T09:31:03Z", "message": "Remove unneeded strings\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8c4c68275ac962d83c9e75d98662c80c87eb126", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/b8c4c68275ac962d83c9e75d98662c80c87eb126", "committedDate": "2020-03-03T09:31:03Z", "message": "Fixes during CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ca6f304ed1b1dfb2b40d2878453e869345c43db", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/7ca6f304ed1b1dfb2b40d2878453e869345c43db", "committedDate": "2020-03-03T09:31:04Z", "message": "Use proper dialog instantiation\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63c1de604dadad71ba9da821eac4d2a94c386900", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/63c1de604dadad71ba9da821eac4d2a94c386900", "committedDate": "2020-03-03T08:35:09Z", "message": "Use proper dialog instantiation\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "7ca6f304ed1b1dfb2b40d2878453e869345c43db", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/7ca6f304ed1b1dfb2b40d2878453e869345c43db", "committedDate": "2020-03-03T09:31:04Z", "message": "Use proper dialog instantiation\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2def4b9ad35e93d18a9aff9a5d50292517452e8a", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/2def4b9ad35e93d18a9aff9a5d50292517452e8a", "committedDate": "2020-03-03T13:22:50Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "3485f5b09f29c2178182d7a8303543c96c80d37b", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/3485f5b09f29c2178182d7a8303543c96c80d37b", "committedDate": "2020-03-03T15:05:05Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3485f5b09f29c2178182d7a8303543c96c80d37b", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/3485f5b09f29c2178182d7a8303543c96c80d37b", "committedDate": "2020-03-03T15:05:05Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "dbf81ddf1109bf38f480dcbd1c5f6ecfac6fe770", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/dbf81ddf1109bf38f480dcbd1c5f6ecfac6fe770", "committedDate": "2020-03-05T06:15:08Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30ac72652e7005d306d134e3656b8b75cc0dbee0", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/30ac72652e7005d306d134e3656b8b75cc0dbee0", "committedDate": "2020-03-05T07:22:58Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbf81ddf1109bf38f480dcbd1c5f6ecfac6fe770", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/dbf81ddf1109bf38f480dcbd1c5f6ecfac6fe770", "committedDate": "2020-03-05T06:15:08Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "30ac72652e7005d306d134e3656b8b75cc0dbee0", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/30ac72652e7005d306d134e3656b8b75cc0dbee0", "committedDate": "2020-03-05T07:22:58Z", "message": "Fix test\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4804, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}