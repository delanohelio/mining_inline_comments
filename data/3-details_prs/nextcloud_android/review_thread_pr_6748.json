{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMDM2MjMz", "number": 6748, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNTowNFrOEbP2cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzoyMDo1MVrOEbb8zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MDA2NzA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/files/services/FileDownloader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNTowNFrOHFHtGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNTowNFrOHFHtGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMTE2Mg==", "bodyText": "I'd inject it from Dagger.", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475131162", "createdAt": "2020-08-22T20:05:04Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/files/services/FileDownloader.java", "diffHunk": "@@ -691,7 +692,7 @@ private void sendBroadcastDownloadFinished(\n             end.putExtra(EXTRA_LINKED_TO_PATH, unlinkedFromRemotePath);\n         }\n         end.setPackage(getPackageName());\n-        sendStickyBroadcast(end);\n+        LocalBroadcastManager.getInstance(this).sendBroadcast(end);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MDA3NDg0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNjoyM1rOHFHx2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowNjoyM1rOHFHx2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMjM3OQ==", "bodyText": "This is nitpicking, but Broadcast instead of BroadCast. Sorry. :)", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475132379", "createdAt": "2020-08-22T20:06:23Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java", "diffHunk": "@@ -1111,6 +1113,8 @@ protected void onResume() {\n             updateActionBarTitleAndHomeButton(startFile);\n         }\n \n+        localBroadCastManager = LocalBroadcastManager.getInstance(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MDA4NDI1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/ui/fragment/contactsbackup/ContactListFragment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowOTowNFrOHFH3gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQyMDowOTowNFrOHFH3gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEzMzgyNA==", "bodyText": "I think this is coming from one of my previous PRs that is already merged? Not sure how it ended up here.", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475133824", "createdAt": "2020-08-22T20:09:04Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/ui/fragment/contactsbackup/ContactListFragment.java", "diffHunk": "@@ -58,10 +58,10 @@\n import com.nextcloud.client.account.UserAccountManager;\n import com.nextcloud.client.di.Injectable;\n import com.nextcloud.client.files.downloader.Direction;\n+import com.nextcloud.client.files.downloader.Request;\n import com.nextcloud.client.files.downloader.Transfer;\n-import com.nextcloud.client.files.downloader.TransferState;\n import com.nextcloud.client.files.downloader.TransferManagerConnection;\n-import com.nextcloud.client.files.downloader.Request;\n+import com.nextcloud.client.files.downloader.TransferState;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780c4434c60e27e70d0df4d3592d6433182d05e7"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjA0OTQxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzoyMDo1MVrOHFXgTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjoyNjoyN1rOHJr8KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDAyOQ==", "bodyText": "@ezaquarii how could I use Dagger here?\nOnly via constructor, or?", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475390029", "createdAt": "2020-08-24T07:20:51Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "diffHunk": "@@ -691,6 +692,6 @@ private void sendLocalBroadcast(String event, String dirRemotePath, RemoteOperat\n         intent.putExtra(FileSyncAdapter.EXTRA_RESULT, dataHolderItemId);\n \n         intent.setPackage(mContext.getPackageName());\n-        mContext.sendStickyBroadcast(intent);\n+        LocalBroadcastManager.getInstance(mContext.getApplicationContext()).sendBroadcast(intent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MTA3Nw==", "bodyText": "Yeah, dagger works only in main components. Everything else is constructor based injection or setter if 2 stage init is required (I think we have 1 case of the latter).", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r475391077", "createdAt": "2020-08-24T07:22:56Z", "author": {"login": "ezaquarii"}, "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "diffHunk": "@@ -691,6 +692,6 @@ private void sendLocalBroadcast(String event, String dirRemotePath, RemoteOperat\n         intent.putExtra(FileSyncAdapter.EXTRA_RESULT, dataHolderItemId);\n \n         intent.setPackage(mContext.getPackageName());\n-        mContext.sendStickyBroadcast(intent);\n+        LocalBroadcastManager.getInstance(mContext.getApplicationContext()).sendBroadcast(intent);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDAyOQ=="}, "originalCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIxMzk4NA==", "bodyText": "Do you think it is worth the effort, or can we keep it this way?\nAfter all it is a singleton, so use of Dagger is not that much needed, but mainly only for centralizing the initiation?", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r476213984", "createdAt": "2020-08-25T06:46:29Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "diffHunk": "@@ -691,6 +692,6 @@ private void sendLocalBroadcast(String event, String dirRemotePath, RemoteOperat\n         intent.putExtra(FileSyncAdapter.EXTRA_RESULT, dataHolderItemId);\n \n         intent.setPackage(mContext.getPackageName());\n-        mContext.sendStickyBroadcast(intent);\n+        LocalBroadcastManager.getInstance(mContext.getApplicationContext()).sendBroadcast(intent);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDAyOQ=="}, "originalCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxOTE0NQ==", "bodyText": "Let us keep it now this way to get it in faster.\nIf we need DI for testing, we can change it anyways.", "url": "https://github.com/nextcloud/android/pull/6748#discussion_r479919145", "createdAt": "2020-08-31T06:26:27Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/operations/RefreshFolderOperation.java", "diffHunk": "@@ -691,6 +692,6 @@ private void sendLocalBroadcast(String event, String dirRemotePath, RemoteOperat\n         intent.putExtra(FileSyncAdapter.EXTRA_RESULT, dataHolderItemId);\n \n         intent.setPackage(mContext.getPackageName());\n-        mContext.sendStickyBroadcast(intent);\n+        LocalBroadcastManager.getInstance(mContext.getApplicationContext()).sendBroadcast(intent);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDAyOQ=="}, "originalCommit": {"oid": "4bc5bb452404d06a9692b72aa844339327fbb6a9"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3289, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}