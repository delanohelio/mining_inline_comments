{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNDg3ODA2", "number": 6396, "title": "Edit label for public share", "bodyText": "split up between public share and user shares\nThis is just an intermediate step, as otherwise PR will getting too big.\nAs sharing is very complex, I will split up OCShare and derice PublicShare, EmailShare etc. from it.\nThis will then make it very clean how to react on it UI wise, e.g. currently we have a PublicShare and EmailShare which both can hide download, but EmailShare is bound to ShareeAdapter and PublicShare has its own Adapter.\ntl;dr: only code review is ok, as things will change soon\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-07-01T07:01:24Z", "url": "https://github.com/nextcloud/android/pull/6396", "merged": true, "mergeCommit": {"oid": "2192bdcf39028a3c8ea1b0ede47e5a92951fa930"}, "closed": true, "closedAt": "2020-07-01T11:49:44Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwlZ1QgFqTQ0MDYyNjcyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwo1hzgFqTQ0MDc5NjQ5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjI2NzIy", "url": "https://github.com/nextcloud/android/pull/6396#pullrequestreview-440626722", "createdAt": "2020-07-01T07:49:08Z", "commit": {"oid": "e2b0adb7da74110376690841b8a112093a1991ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo0OTowOFrOGraw1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzo0OTowOFrOGraw1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4MDQzNw==", "bodyText": "should be done via a view binding :)", "url": "https://github.com/nextcloud/android/pull/6396#discussion_r448180437", "createdAt": "2020-07-01T07:49:08Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/ui/dialog/RenamePublicShareDialogFragment.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*\n+ * Nextcloud Android client application\n+ *\n+ * @author Tobias Kaminsky\n+ * Copyright (C) 2020 Tobias Kaminsky\n+ * Copyright (C) 2020 Nextcloud GmbH.\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program. If not, see <https://www.gnu.org/licenses/>.\n+ */\n+\n+package com.owncloud.android.ui.dialog;\n+\n+import android.app.Dialog;\n+import android.content.DialogInterface;\n+import android.graphics.PorterDuff;\n+import android.os.Bundle;\n+import android.text.TextUtils;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.Window;\n+import android.view.WindowManager.LayoutParams;\n+import android.widget.EditText;\n+import android.widget.TextView;\n+\n+import com.owncloud.android.R;\n+import com.owncloud.android.lib.resources.shares.OCShare;\n+import com.owncloud.android.ui.activity.ComponentsGetter;\n+import com.owncloud.android.utils.DisplayUtils;\n+import com.owncloud.android.utils.ThemeUtils;\n+\n+import androidx.annotation.NonNull;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+\n+/**\n+ * Dialog to rename a public share\n+ */\n+public class RenamePublicShareDialogFragment\n+    extends DialogFragment implements DialogInterface.OnClickListener {\n+\n+    private static final String ARG_PUBLIC_SHARE = \"PUBLIC_SHARE\";\n+\n+    public static final String RENAME_PUBLIC_SHARE_FRAGMENT = \"RENAME_PUBLIC_SHARE_FRAGMENT\";\n+\n+    private OCShare publicShare;\n+\n+    public static RenamePublicShareDialogFragment newInstance(OCShare share) {\n+        RenamePublicShareDialogFragment frag = new RenamePublicShareDialogFragment();\n+        Bundle args = new Bundle();\n+        args.putParcelable(ARG_PUBLIC_SHARE, share);\n+        frag.setArguments(args);\n+        return frag;\n+\n+    }\n+\n+    @Override\n+    public void onStart() {\n+        super.onStart();\n+\n+        int color = ThemeUtils.primaryAccentColor(getContext());\n+\n+        AlertDialog alertDialog = (AlertDialog) getDialog();\n+\n+        if (alertDialog != null) {\n+            alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextColor(color);\n+            alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE).setTextColor(color);\n+        }\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(Bundle savedInstanceState) {\n+        int accentColor = ThemeUtils.primaryAccentColor(getContext());\n+        publicShare = requireArguments().getParcelable(ARG_PUBLIC_SHARE);\n+\n+        // Inflate the layout for the dialog\n+        LayoutInflater inflater = requireActivity().getLayoutInflater();\n+        View v = inflater.inflate(R.layout.edit_box_dialog, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b0adb7da74110376690841b8a112093a1991ec"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjY0MzA1", "url": "https://github.com/nextcloud/android/pull/6396#pullrequestreview-440664305", "createdAt": "2020-07-01T08:39:53Z", "commit": {"oid": "e2b0adb7da74110376690841b8a112093a1991ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2b0adb7da74110376690841b8a112093a1991ec", "author": {"user": null}, "url": "https://github.com/nextcloud/android/commit/e2b0adb7da74110376690841b8a112093a1991ec", "committedDate": "2020-07-01T07:12:03Z", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>"}, "afterCommit": {"oid": "e92649343e8285a46817bd6c2477e8732df9de00", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/e92649343e8285a46817bd6c2477e8732df9de00", "committedDate": "2020-07-01T10:06:38Z", "message": "Edit label for public share\nsplit up between public share and user shares\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bb0a3c1764672ab9e321815d82fe2803070c6f9", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/4bb0a3c1764672ab9e321815d82fe2803070c6f9", "committedDate": "2020-07-01T10:07:26Z", "message": "Edit label for public share\nsplit up between public share and user shares\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e92649343e8285a46817bd6c2477e8732df9de00", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/e92649343e8285a46817bd6c2477e8732df9de00", "committedDate": "2020-07-01T10:06:38Z", "message": "Edit label for public share\nsplit up between public share and user shares\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "4bb0a3c1764672ab9e321815d82fe2803070c6f9", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/4bb0a3c1764672ab9e321815d82fe2803070c6f9", "committedDate": "2020-07-01T10:07:26Z", "message": "Edit label for public share\nsplit up between public share and user shares\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNzk2NDkw", "url": "https://github.com/nextcloud/android/pull/6396#pullrequestreview-440796490", "createdAt": "2020-07-01T11:49:07Z", "commit": {"oid": "4bb0a3c1764672ab9e321815d82fe2803070c6f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4524, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}