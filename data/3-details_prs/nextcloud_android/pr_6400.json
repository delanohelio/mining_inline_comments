{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNjY0NjE3", "number": 6400, "title": "Add theming logic for share link icons", "bodyText": "Resolve #6399\nAs a follow-up for #6332 and #6358 the link icon/background should be themed like the fab/primary-action-buttons now available via the #6332 theming logic.", "createdAt": "2020-07-01T12:24:02Z", "url": "https://github.com/nextcloud/android/pull/6400", "merged": true, "mergeCommit": {"oid": "1126823db94a9e63f72988febf8d3161346fbca5"}, "closed": true, "closedAt": "2020-07-02T11:55:15Z", "author": {"login": "AndyScherzinger"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwqfqxgFqTQ0MDg4MzAzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw9gdxgFqTQ0MTYwNTU1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODgzMDM0", "url": "https://github.com/nextcloud/android/pull/6400#pullrequestreview-440883034", "createdAt": "2020-07-01T13:45:03Z", "commit": {"oid": "b09bd98be267a7f8c30fb0b985174467c3f6019c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzo0NTowM1rOGrmjYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzo0NTowM1rOGrmjYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM3MzYwMQ==", "bodyText": "Is this obeying dark mode?", "url": "https://github.com/nextcloud/android/pull/6400#discussion_r448373601", "createdAt": "2020-07-01T13:45:03Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -712,6 +706,28 @@ public static void colorFloatingActionButton(FloatingActionButton button, int ba\n         button.setRippleColor(rippleColor);\n     }\n \n+    public static void colorIconImageViewWithBackground(ImageView imageView, Context context) {\n+        int primaryColor = ThemeUtils.primaryColor(null, true, false, context);\n+\n+        imageView.getBackground().setColorFilter(primaryColor, PorterDuff.Mode.SRC_IN);\n+        imageView.getDrawable().mutate().setColorFilter(getColorForPrimary(primaryColor), PorterDuff.Mode.SRC_IN);\n+    }\n+\n+    /**\n+     * returns a primary color matching color for texts/icons on top of a primary-colored element (like buttons).\n+     *\n+     * @param primaryColor the primary color\n+     */\n+    private getColorForPrimary(int primaryColor) {\n+        if (Color.BLACK == primaryColor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b09bd98be267a7f8c30fb0b985174467c3f6019c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODgzODMx", "url": "https://github.com/nextcloud/android/pull/6400#pullrequestreview-440883831", "createdAt": "2020-07-01T13:45:57Z", "commit": {"oid": "b09bd98be267a7f8c30fb0b985174467c3f6019c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzo0NTo1N1rOGrml8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzo0NTo1N1rOGrml8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM3NDI1OA==", "bodyText": "Isn't this also a good idea to have this computed on server? font-color-light and font-color dark?", "url": "https://github.com/nextcloud/android/pull/6400#discussion_r448374258", "createdAt": "2020-07-01T13:45:57Z", "author": {"login": "tobiasKaminsky"}, "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -712,6 +706,28 @@ public static void colorFloatingActionButton(FloatingActionButton button, int ba\n         button.setRippleColor(rippleColor);\n     }\n \n+    public static void colorIconImageViewWithBackground(ImageView imageView, Context context) {\n+        int primaryColor = ThemeUtils.primaryColor(null, true, false, context);\n+\n+        imageView.getBackground().setColorFilter(primaryColor, PorterDuff.Mode.SRC_IN);\n+        imageView.getDrawable().mutate().setColorFilter(getColorForPrimary(primaryColor), PorterDuff.Mode.SRC_IN);\n+    }\n+\n+    /**\n+     * returns a primary color matching color for texts/icons on top of a primary-colored element (like buttons).\n+     *\n+     * @param primaryColor the primary color\n+     */\n+    private getColorForPrimary(int primaryColor) {\n+        if (Color.BLACK == primaryColor) {\n+            return Color.WHITE;\n+        } else if (Color.WHITE == primaryColor) {\n+            return Color.BLACK;\n+        } else {\n+            return ThemeUtils.fontColor(context, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b09bd98be267a7f8c30fb0b985174467c3f6019c"}, "originalPosition": 40}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b09bd98be267a7f8c30fb0b985174467c3f6019c", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/b09bd98be267a7f8c30fb0b985174467c3f6019c", "committedDate": "2020-07-01T12:22:37Z", "message": "Resolve #6399 adding theming logic for share link icons"}, "afterCommit": {"oid": "d1d29bb5ff14bb8da9004cb6e82196c4cf0777b0", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d1d29bb5ff14bb8da9004cb6e82196c4cf0777b0", "committedDate": "2020-07-01T19:47:04Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1d29bb5ff14bb8da9004cb6e82196c4cf0777b0", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/d1d29bb5ff14bb8da9004cb6e82196c4cf0777b0", "committedDate": "2020-07-01T19:47:04Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "0a41867ea6bbccc2c609d70e175c2da7c77f1903", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/0a41867ea6bbccc2c609d70e175c2da7c77f1903", "committedDate": "2020-07-01T19:50:22Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd47348f1bcde7e24ddde1ed45bbd734c72b7f17", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/fd47348f1bcde7e24ddde1ed45bbd734c72b7f17", "committedDate": "2020-07-02T07:18:32Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a41867ea6bbccc2c609d70e175c2da7c77f1903", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/0a41867ea6bbccc2c609d70e175c2da7c77f1903", "committedDate": "2020-07-01T19:50:22Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}, "afterCommit": {"oid": "fd47348f1bcde7e24ddde1ed45bbd734c72b7f17", "author": {"user": {"login": "AndyScherzinger", "name": "Andy Scherzinger"}}, "url": "https://github.com/nextcloud/android/commit/fd47348f1bcde7e24ddde1ed45bbd734c72b7f17", "committedDate": "2020-07-02T07:18:32Z", "message": "Resolve #6399 adding theming logic for share link icons\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjA1NTUx", "url": "https://github.com/nextcloud/android/pull/6400#pullrequestreview-441605551", "createdAt": "2020-07-02T11:54:07Z", "commit": {"oid": "fd47348f1bcde7e24ddde1ed45bbd734c72b7f17"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4528, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}