{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NDM2MTk0", "number": 5231, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDoyOToyMVrODZ90Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDo1Njo0NlrODcl7GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NTUzNzM5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDoyOToyMlrOFgp95A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDoyOToyMlrOFgp95A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjM0MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        Resources resources = MainApp.getAppContext().getResources();\n          \n          \n            \n                                        Resources resources = activity.getResources();", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369786340", "createdAt": "2020-01-22T20:29:22Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "diffHunk": "@@ -602,7 +603,17 @@ private void setThumbnail(OCFile file, ImageView thumbnailView) {\n                         Bitmap withOverlay = ThumbnailsCacheManager.addVideoOverlay(thumbnail);\n                         thumbnailView.setImageBitmap(withOverlay);\n                     } else {\n-                        thumbnailView.setImageBitmap(thumbnail);\n+                        if (gridView) {\n+                            thumbnailView.setImageBitmap(thumbnail);\n+                        } else {\n+                            Resources resources = MainApp.getAppContext().getResources();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fb140d275061e028d70b3a24fa3af36713daba0"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NTU0OTczOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDozNDoyN1rOFgqF0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDozNjowNFrOFgqIgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA==", "bodyText": "shouldn't this rather be\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        roundedBitmap.setCornerRadius(20);\n          \n          \n            \n                        roundedBitmap.setCornerRadius(radius);", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369788368", "createdAt": "2020-01-22T20:34:27Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "diffHunk": "@@ -376,16 +377,34 @@ public static String md5(String string) throws NoSuchAlgorithmException {\n      * @param bitmap the original bitmap\n      * @return the circular bitmap\n      */\n-    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources, Bitmap bitmap) {\n+    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources,\n+                                                                       Bitmap bitmap,\n+                                                                       float radius) {\n         if (bitmap == null) {\n             return null;\n         }\n \n         RoundedBitmapDrawable roundedBitmap = RoundedBitmapDrawableFactory.create(resources, bitmap);\n         roundedBitmap.setCircular(true);\n+\n+        if (radius != -1) {\n+            roundedBitmap.setCornerRadius(20);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fb140d275061e028d70b3a24fa3af36713daba0"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4OTA1Ng==", "bodyText": "due to the dp value coming in the corner radius probably rather 2 or 4 dp. The 20 is a fixed number and not a density pixel so it doesn't care about display density, while the original dp value so sent in does!", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369789056", "createdAt": "2020-01-22T20:36:04Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "diffHunk": "@@ -376,16 +377,34 @@ public static String md5(String string) throws NoSuchAlgorithmException {\n      * @param bitmap the original bitmap\n      * @return the circular bitmap\n      */\n-    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources, Bitmap bitmap) {\n+    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources,\n+                                                                       Bitmap bitmap,\n+                                                                       float radius) {\n         if (bitmap == null) {\n             return null;\n         }\n \n         RoundedBitmapDrawable roundedBitmap = RoundedBitmapDrawableFactory.create(resources, bitmap);\n         roundedBitmap.setCircular(true);\n+\n+        if (radius != -1) {\n+            roundedBitmap.setCornerRadius(20);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA=="}, "originalCommit": {"oid": "4fb140d275061e028d70b3a24fa3af36713daba0"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzA4MDU2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDo1Njo0NlrOFktftA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDo1Njo0NlrOFktftA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAzODQ1Mg==", "bodyText": "Issue found: Avoid using redundant field initializer for 'roundedCorners'", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r374038452", "createdAt": "2020-02-03T10:56:46Z", "author": {"login": "nextcloud-android-bot"}, "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -410,12 +410,23 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n+        private boolean roundedCorners = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b787284ab6c0a389d0d57e71877d1d4cd301ed8c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3206, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}