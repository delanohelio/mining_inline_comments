{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2OTg1MjQw", "number": 6203, "title": "Upload list activity: new sort / switch button", "bodyText": "Fix #6202\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-06-03T06:13:38Z", "url": "https://github.com/nextcloud/android/pull/6203", "merged": true, "mergeCommit": {"oid": "16794043fe9593ea5d91dc26ccc4137daba1cf21"}, "closed": true, "closedAt": "2020-06-04T08:59:02Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnlcmHgFqTQyMzM0NDUyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn5ftQgFqTQyNDIwMDM2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzQ0NTIy", "url": "https://github.com/nextcloud/android/pull/6203#pullrequestreview-423344522", "createdAt": "2020-06-03T08:46:51Z", "commit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNDE2OTky", "url": "https://github.com/nextcloud/android/pull/6203#pullrequestreview-423416992", "createdAt": "2020-06-03T10:21:41Z", "commit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoyMTo0MVrOGeVlbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDozMzo1MFrOGeV-ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2NDEwOQ==", "bodyText": "Why you remove search ?", "url": "https://github.com/nextcloud/android/pull/6203#discussion_r434464109", "createdAt": "2020-06-03T10:21:41Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java", "diffHunk": "@@ -796,26 +784,20 @@ public void onPrepareOptionsMenu(@NonNull Menu menu) {\n                 break;\n \n             case REMOVE_SEARCH:\n-                menu.removeItem(R.id.action_search);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2NzE3NQ==", "bodyText": "I prefere use \"requireContext()\" :)\nrequireContext() will throw an exception if fragment isn\u2019t attached to its host", "url": "https://github.com/nextcloud/android/pull/6203#discussion_r434467175", "createdAt": "2020-06-03T10:27:36Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java", "diffHunk": "@@ -1287,7 +1269,7 @@ private void updateLayout() {\n             switchToListView();\n         }\n \n-        setSortButton(preferences.getSortOrderByFolder(mFile));\n+        DisplayUtils.setSortButton(mSortButton, preferences.getSortOrderByFolder(mFile), getContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2Nzk1OA==", "bodyText": "\"action_sort\" is not removed?", "url": "https://github.com/nextcloud/android/pull/6203#discussion_r434467958", "createdAt": "2020-06-03T10:29:03Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java", "diffHunk": "@@ -287,12 +287,10 @@ public void onPrepareOptionsMenu(@NotNull Menu menu) {\n             menu.findItem(R.id.action_unset_favorite)\n         );\n \n-        Boolean dualPane = getResources().getBoolean(R.bool.large_land_layout);\n+        boolean dualPane = getResources().getBoolean(R.bool.large_land_layout);\n \n         if (!dualPane) {\n-            FileMenuFilter.hideMenuItems(menu.findItem(R.id.action_switch_view),\n-                                         menu.findItem(R.id.action_sort)\n-            );\n+            FileMenuFilter.hideMenuItems(menu.findItem(R.id.action_sort));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2ODAzMA==", "bodyText": "\"action_sort\" is not removed?", "url": "https://github.com/nextcloud/android/pull/6203#discussion_r434468030", "createdAt": "2020-06-03T10:29:10Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/ui/preview/PreviewTextStringFragment.java", "diffHunk": "@@ -145,7 +145,6 @@ public void onPrepareOptionsMenu(@NonNull Menu menu) {\n         super.onPrepareOptionsMenu(menu);\n \n         menu.findItem(R.id.action_sort).setVisible(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ3MDUwMA==", "bodyText": "We can not extract this in DisplayUtils? OCFileListFragment use setGridSwitchButton :)", "url": "https://github.com/nextcloud/android/pull/6203#discussion_r434470500", "createdAt": "2020-06-03T10:33:50Z", "author": {"login": "JorisBodin"}, "path": "src/main/java/com/owncloud/android/ui/activity/UploadFilesActivity.java", "diffHunk": "@@ -170,15 +172,32 @@ public void onCreate(Bundle savedInstanceState) {\n         mFileListFragment = (LocalFileListFragment) getSupportFragmentManager().findFragmentById(R.id.local_files_list);\n \n         // Set input controllers\n-        MaterialButton mCancelButton = findViewById(R.id.upload_files_btn_cancel);\n-        mCancelButton.setTextColor(ThemeUtils.primaryColor(this, true));\n-        mCancelButton.setOnClickListener(this);\n+        MaterialButton cancelButton = findViewById(R.id.upload_files_btn_cancel);\n+        cancelButton.setTextColor(ThemeUtils.primaryColor(this, true));\n+        cancelButton.setOnClickListener(this);\n+\n+        MaterialButton uploadButton = findViewById(R.id.upload_files_btn_upload);\n+        uploadButton.setBackgroundTintMode(PorterDuff.Mode.SRC_ATOP);\n+        uploadButton.setBackgroundTintList(ColorStateList.valueOf(ThemeUtils.primaryColor(this, true)));\n+        uploadButton.setTextColor(ThemeUtils.fontColor(this, false));\n+        uploadButton.setOnClickListener(this);\n+\n+        sortButton = findViewById(R.id.sort_button);\n+        FileSortOrder fileSortOrder = preferences.getSortOrderByType(FileSortOrder.Type.uploadFilesView);\n+        DisplayUtils.setSortButton(sortButton, fileSortOrder, this);\n+        sortButton.setOnClickListener(l -> openSortingOrderDialogFragment(getSupportFragmentManager(), fileSortOrder));\n+\n+        MaterialButton switchButton = findViewById(R.id.switch_grid_view_button);\n+        switchButton.setOnClickListener(l -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f77098bbae810f4190ec015879535ed70cbb29", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/f0f77098bbae810f4190ec015879535ed70cbb29", "committedDate": "2020-06-04T06:15:06Z", "message": "Upload list activity: new sort / switch button\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "319da713e5beb2610679d25b818eca1f6a9810b1", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/319da713e5beb2610679d25b818eca1f6a9810b1", "committedDate": "2020-06-03T06:13:17Z", "message": "Upload list activity: new sort / switch button\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "f0f77098bbae810f4190ec015879535ed70cbb29", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/f0f77098bbae810f4190ec015879535ed70cbb29", "committedDate": "2020-06-04T06:15:06Z", "message": "Upload list activity: new sort / switch button\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjAwMzY4", "url": "https://github.com/nextcloud/android/pull/6203#pullrequestreview-424200368", "createdAt": "2020-06-04T08:08:21Z", "commit": {"oid": "f0f77098bbae810f4190ec015879535ed70cbb29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4553, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}