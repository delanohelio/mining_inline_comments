{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2Nzg0NjM4", "number": 7246, "title": "Reset eTag so that capability get parsed again, so status is set", "bodyText": "have old 3.13 without status capility, but with valid eTag\nupdate to 3.14 rc1\neTag on server did not change, so no refresh\nthus no status capability on 3.14, even though server is capable of it\n-> so we reset eTag and client will refresh capability\n\nAs we only delete eTag all other settings stay valid and app remains usable.\nSigned-off-by: tobiasKaminsky tobias@kaminsky.me\nTesting\nWriting tests is very important. Please try to write some tests for your PR.\nIf you need help, please do not hesitate to ask in this PR for help.\nunit tests\ninstrumented tests\nUI tests\n\n Tests written, or not not needed", "createdAt": "2020-11-06T14:36:08Z", "url": "https://github.com/nextcloud/android/pull/7246", "merged": true, "mergeCommit": {"oid": "b3aa5a9ff6ad6500976db70e48395d11be111cce"}, "closed": true, "closedAt": "2020-11-09T09:24:46Z", "author": {"login": "tobiasKaminsky"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ4oF4gFqTUyNTI1MzE1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdawRDQAFqTUyNjAwOTEyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjUzMTUw", "url": "https://github.com/nextcloud/android/pull/7246#pullrequestreview-525253150", "createdAt": "2020-11-06T15:23:48Z", "commit": {"oid": "c340598da5cac34fa2a8283099caa28f2d0cd1c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNToyMzo0OVrOHuyaEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNToyMzo0OVrOHuyaEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyMjQxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            Log_OC.i(SQL, \"Entering in the #60 reset eTag to force capability refresh\");\n          \n          \n            \n                            Log_OC.i(SQL, \"Entering in the #61 reset eTag to force capability refresh\");", "url": "https://github.com/nextcloud/android/pull/7246#discussion_r518822417", "createdAt": "2020-11-06T15:23:49Z", "author": {"login": "AndyScherzinger"}, "path": "src/main/java/com/owncloud/android/providers/FileContentProvider.java", "diffHunk": "@@ -2288,6 +2288,23 @@ public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n             if (!upgraded) {\n                 Log_OC.i(SQL, String.format(Locale.ENGLISH, UPGRADE_VERSION_MSG, oldVersion, newVersion));\n             }\n+\n+            if (oldVersion < 61 && newVersion >= 61) {\n+                Log_OC.i(SQL, \"Entering in the #60 reset eTag to force capability refresh\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c340598da5cac34fa2a8283099caa28f2d0cd1c0"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjUzNTcx", "url": "https://github.com/nextcloud/android/pull/7246#pullrequestreview-525253571", "createdAt": "2020-11-06T15:24:16Z", "commit": {"oid": "c340598da5cac34fa2a8283099caa28f2d0cd1c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baa0de428f17e7aacc6db05cea775baceb5c5168", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/baa0de428f17e7aacc6db05cea775baceb5c5168", "committedDate": "2020-11-09T07:50:45Z", "message": "Reset eTag so that capability get parsed again, so status is set\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c340598da5cac34fa2a8283099caa28f2d0cd1c0", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/c340598da5cac34fa2a8283099caa28f2d0cd1c0", "committedDate": "2020-11-06T14:33:59Z", "message": "Reset eTag so that capability get parsed again, so status is set\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}, "afterCommit": {"oid": "baa0de428f17e7aacc6db05cea775baceb5c5168", "author": {"user": {"login": "tobiasKaminsky", "name": "Tobias Kaminsky"}}, "url": "https://github.com/nextcloud/android/commit/baa0de428f17e7aacc6db05cea775baceb5c5168", "committedDate": "2020-11-09T07:50:45Z", "message": "Reset eTag so that capability get parsed again, so status is set\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MDA5MTI0", "url": "https://github.com/nextcloud/android/pull/7246#pullrequestreview-526009124", "createdAt": "2020-11-09T08:13:20Z", "commit": {"oid": "baa0de428f17e7aacc6db05cea775baceb5c5168"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4392, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}