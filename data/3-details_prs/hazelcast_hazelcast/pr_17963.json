{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1OTAyMDMw", "number": 17963, "title": "Improve ClientFailoverConfig documentation", "bodyText": "Adds missing javadoc and slightly improves the existing one for ClientFailoverConfig", "createdAt": "2020-12-10T12:29:47Z", "url": "https://github.com/hazelcast/hazelcast/pull/17963", "merged": true, "mergeCommit": {"oid": "f2f88ab5de552f4c702d04477f1992c0aac0ada7"}, "closed": true, "closedAt": "2020-12-11T12:00:26Z", "author": {"login": "puzpuzpuz"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkyf4TgH2gAyNTM1OTAyMDMwOmE3MTk1MWYyN2JiY2MxMDJmZGM4N2NlN2NkOTE5ZjJiZWRlNmI3MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlF00XgFqTU0OTk5ODg5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a71951f27bbcc102fdc87ce7cd919f2bede6b725", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a71951f27bbcc102fdc87ce7cd919f2bede6b725", "committedDate": "2020-12-10T12:28:35Z", "message": "Improve ClientFailoverConfig documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODUyODUw", "url": "https://github.com/hazelcast/hazelcast/pull/17963#pullrequestreview-549852850", "createdAt": "2020-12-11T07:22:46Z", "commit": {"oid": "a71951f27bbcc102fdc87ce7cd919f2bede6b725"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNzoyMjo0N1rOIDsLvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNzoyMjo0N1rOIDsLvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc0MDU0Mw==", "bodyText": "@puzpuzpuz First of all, thanks for the pr. Not sure how did I miss Javadoc on a public API.\nIt did not understand what you mean by client element.\nAnd I think we explain much more here. The term connection retries can easily confuse users. Similarly I would replace the same term in the javadoc of getTryCount.\nA suggestion from me:\nSets the count of attempts to connect to a cluster. For each alternative cluster, a client will try to connect to the cluster respecting related ConnectionRetryConfig. When the client can not connect a cluster, it will try to connect tryCount times going over the alternative client configs in a round-robin session.\nThis is triggered at the start and also when the client disconnects from the cluster and can not connect back to it by exhausting attempts described in ConnectionRetryConfig. In that case, the client will continue from where it is left off in ClientConfig lists, and try the next one again in round-robin tryCount times.", "url": "https://github.com/hazelcast/hazelcast/pull/17963#discussion_r540740543", "createdAt": "2020-12-11T07:22:47Z", "author": {"login": "sancar"}, "path": "hazelcast/src/main/java/com/hazelcast/client/config/ClientFailoverConfig.java", "diffHunk": "@@ -79,27 +93,62 @@ public static ClientFailoverConfig load() {\n         }\n     }\n \n+    /**\n+     * Adds the client config to the end of the alternative client configurations list.\n+     *\n+     * @param clientConfig the ClientConfig to add\n+     * @return this for chaining\n+     */\n     public ClientFailoverConfig addClientConfig(ClientConfig clientConfig) {\n         validateClientConfig(clientConfig);\n         clientConfigs.add(clientConfig);\n         return this;\n     }\n \n+    /**\n+     * Sets the count of connection retries by the client to the alternative clusters.\n+     * <p>\n+     * When this value is reached and the client still could not connect to a cluster,\n+     * the client shuts down. Note that this value applies to the alternative clusters\n+     * whose configurations are provided with the client element.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a71951f27bbcc102fdc87ce7cd919f2bede6b725"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/cf58f0389c8c153e560c5932366c5efcdc354fb4", "committedDate": "2020-12-11T07:52:33Z", "message": "Address review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98cb759c1275a7e8c5a9f12a32b11bda12cb38cf", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/98cb759c1275a7e8c5a9f12a32b11bda12cb38cf", "committedDate": "2020-12-11T07:30:52Z", "message": "Address review comments"}, "afterCommit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/cf58f0389c8c153e560c5932366c5efcdc354fb4", "committedDate": "2020-12-11T07:52:33Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODY5MjA1", "url": "https://github.com/hazelcast/hazelcast/pull/17963#pullrequestreview-549869205", "createdAt": "2020-12-11T07:54:17Z", "commit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTI2Mzg3", "url": "https://github.com/hazelcast/hazelcast/pull/17963#pullrequestreview-549926387", "createdAt": "2020-12-11T09:20:56Z", "commit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwOToyMDo1NlrOIDwBWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwOToyNDoyNlrOIDwKFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgwMzQxOQ==", "bodyText": "Looking at the implementation, it seems that clusterName also does not have to match", "url": "https://github.com/hazelcast/hazelcast/pull/17963#discussion_r540803419", "createdAt": "2020-12-11T09:20:56Z", "author": {"login": "mdumandag"}, "path": "hazelcast/src/main/java/com/hazelcast/client/config/ClientFailoverConfig.java", "diffHunk": "@@ -31,18 +31,32 @@\n import static com.hazelcast.client.config.ClientConnectionStrategyConfig.ReconnectMode.OFF;\n \n /**\n- * Config class to configure multiple client configs to be used by single client instance\n- * The client will try to connect them in given order.\n- * When the connected cluster fails or the client blacklisted from the cluster via the management center, the client will\n+ * Config class to configure multiple client configs to be used by single client instance.\n+ * The client will try to connect them in given order. When the connected cluster fails\n+ * or the client blacklisted from the cluster via the Management Center, the client will\n  * search for alternative clusters with given configs.\n+ * <p>\n+ * The client configurations must be exactly the same except the following configuration options:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgwNTY1NA==", "bodyText": "Not related to these changes, but while you are on it, could you also fix the line here https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/client/impl/clientside/FailoverClientConfigSupport.java#L228\nIt should be something like network:outboundPorts instead of network:smartRouting", "url": "https://github.com/hazelcast/hazelcast/pull/17963#discussion_r540805654", "createdAt": "2020-12-11T09:24:26Z", "author": {"login": "mdumandag"}, "path": "hazelcast/src/main/java/com/hazelcast/client/config/ClientFailoverConfig.java", "diffHunk": "@@ -31,18 +31,32 @@\n import static com.hazelcast.client.config.ClientConnectionStrategyConfig.ReconnectMode.OFF;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf58f0389c8c153e560c5932366c5efcdc354fb4"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce976c31e4e9bd3a6920d42540a62fcdd12b1f83", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/ce976c31e4e9bd3a6920d42540a62fcdd12b1f83", "committedDate": "2020-12-11T10:57:09Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTk4ODk1", "url": "https://github.com/hazelcast/hazelcast/pull/17963#pullrequestreview-549998895", "createdAt": "2020-12-11T10:59:39Z", "commit": {"oid": "ce976c31e4e9bd3a6920d42540a62fcdd12b1f83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3030, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}