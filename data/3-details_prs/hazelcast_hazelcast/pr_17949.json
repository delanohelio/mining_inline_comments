{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDA2MjU0", "number": 17949, "title": "Fix broken sources produced by the \"shade\" plugin", "bodyText": "This PR fixes the broken sources produced by the \"shade\" module.\nBefore the fix, we used the following relocation patterns:\ncom. -> com.hazelcast.com.\norg. -> com.hazelcast.org.\n\nThey worked well for the bytecode, but broken the generated source code. For example, the com.google.common package was processed as [com].google.[com]mon, resulting in com.hazelcast.com.google.com.hazelast.mon.\nWith the fix, we use more specific relocation patterns, which fixes the problem.", "createdAt": "2020-12-09T08:30:57Z", "url": "https://github.com/hazelcast/hazelcast/pull/17949", "merged": true, "mergeCommit": {"oid": "87596e1694507e41587af65c17c4ff2b6a1ea82c"}, "closed": true, "closedAt": "2020-12-09T14:17:33Z", "author": {"login": "devozerov"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkaYVMgH2gAyNTM1MDA2MjU0OjY0MWM5ZjkzNjIyNjRiMTRjNjA4MmQ1ZWU0ZmRlOWQ2ODJiNTYwNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkc_15gFqTU0ODA3OTUyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "641c9f9362264b14c6082d5ee4fde9d682b5606c", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/641c9f9362264b14c6082d5ee4fde9d682b5606c", "committedDate": "2020-12-09T08:22:37Z", "message": "Fix broken sources produced by the \"shade\" plugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3OTYzNzY5", "url": "https://github.com/hazelcast/hazelcast/pull/17949#pullrequestreview-547963769", "createdAt": "2020-12-09T08:57:12Z", "commit": {"oid": "641c9f9362264b14c6082d5ee4fde9d682b5606c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDc5NTI4", "url": "https://github.com/hazelcast/hazelcast/pull/17949#pullrequestreview-548079528", "createdAt": "2020-12-09T11:15:18Z", "commit": {"oid": "641c9f9362264b14c6082d5ee4fde9d682b5606c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMToxNToxOFrOICPW7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMToxNToxOFrOICPW7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIxOTY5Mg==", "bodyText": "IIUC, this relocation now solves them all for https://mvnrepository.com/artifact/com.hazelcast/hazelcast-all/4.1\n\nDefect DetectionLGPL | \u00a0 | com.google.code.findbugs\u00a0\u00bb\u00a0annotations\u00a0(optional) | 3.0.1u2 | 3.0.1\n-- | -- | -- | -- | --\nCache ClientApache 2.0 | \u00a0 | javax.cache\u00a0\u00bb\u00a0cache-api\u00a0(optional) | 1.1.1 | \u2714\nLoggingApache 2.0 | \u00a0 | log4j\u00a0\u00bb\u00a0log4j\u00a0(optional) | 1.2.17 | 2.14.0\nApache 2.0 | \u00a0 | net.openhft\u00a0\u00bb\u00a0affinity\u00a0(optional) | 3.2.3 | 3.20.0\nLoggingApache 2.0 | \u00a0 | org.apache.logging.log4j\u00a0\u00bb\u00a0log4j-api\u00a0(optional) | 2.13.3 | 2.14.0\nLoggingApache 2.0 | \u00a0 | org.apache.logging.log4j\u00a0\u00bb\u00a0log4j-core\u00a0(optional) | 2.13.3 | 2.14.0\nJVM LanguagesApache 2.0 | \u00a0 | org.codehaus.groovy\u00a0\u00bb\u00a0groovy-all\u00a0(optional) | 2.1.8 | 3.0.7\nJVM LanguagesEPL 2.0GPL 2.0LGPL 2.1 | \u00a0 | org.jruby\u00a0\u00bb\u00a0jruby-complete\u00a0(optional) | 1.7.22 | 9.2.13.0\nOSGIApache 2.0 | \u00a0 | org.osgi\u00a0\u00bb\u00a0org.osgi.core\u00a0(optional) | 4.2.0 | 6.0.0\nLoggingMIT | \u00a0 | org.slf4j\u00a0\u00bb\u00a0slf4j-api\u00a0(optional) | 1.7.30 | \u2714\n\n\n\nis it correct?", "url": "https://github.com/hazelcast/hazelcast/pull/17949#discussion_r539219692", "createdAt": "2020-12-09T11:15:18Z", "author": {"login": "lazerion"}, "path": "hazelcast-sql/pom.xml", "diffHunk": "@@ -91,16 +91,39 @@\n                                 </excludes>\n                             </artifactSet>\n                             <relocations>\n+                                <!--\n+                                    List relocations for every product explicitly, instead of definining \"com\" and \"org\"\n+                                    wildcards. Otherwise, the \"shade\" plugin breaks the generated source code. For example,\n+                                    for the wildcard \"com.\" the package \"com.google.common\" is replaced with the shaded\n+                                    pattern twice: \"[com].google.[com]mon\".\n+                                 -->\n                                 <relocation>\n-                                    <pattern>com.</pattern>\n-                                    <shadedPattern>${relocation.root}.com.</shadedPattern>\n-                                    <excludes>\n-                                        <exclude>com.hazelcast.**</exclude>\n-                                    </excludes>\n+                                    <pattern>com.fasterxml</pattern>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "641c9f9362264b14c6082d5ee4fde9d682b5606c"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3018, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}