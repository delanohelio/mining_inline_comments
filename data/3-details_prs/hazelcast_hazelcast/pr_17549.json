{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MzIwMjUw", "number": 17549, "title": "Do not create an exception object when closing the SQL result", "bodyText": "This PR introduces a minor performance improvement to the SqlResult.close routine. Previously we closed the SQL result by creating a specific QueryException upfront, even if the result set is fully consumed, and the result is already closed. After the fix, this exception is created only if the user calls close on the result set that is not closed yet. This brings marginal, but visible improvement to the SQL engine performance.", "createdAt": "2020-09-15T14:02:39Z", "url": "https://github.com/hazelcast/hazelcast/pull/17549", "merged": true, "mergeCommit": {"oid": "a2d4f4f33463f9b1f77c3cea2cce453aae00617d"}, "closed": true, "closedAt": "2020-09-15T16:12:26Z", "author": {"login": "devozerov"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJIQSVgH2gAyNDg3MzIwMjUwOjUxNTBkOTc2ZjM0MGJlMjkwMzk3NzdjMThkMjA2NTc1N2I1ZGQzMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJJVqxAH2gAyNDg3MzIwMjUwOjhkMTYyYmVmM2I1NGI0NTEzNmMxZGU3ZDY2NWMwOWI2ZTdkMmE5Mjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5150d976f340be29039777c18d2065757b5dd319", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5150d976f340be29039777c18d2065757b5dd319", "committedDate": "2020-09-15T13:59:35Z", "message": "Do not create an exception object when closing the SQL result"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzI4Njk1", "url": "https://github.com/hazelcast/hazelcast/pull/17549#pullrequestreview-488728695", "createdAt": "2020-09-15T14:13:25Z", "commit": {"oid": "5150d976f340be29039777c18d2065757b5dd319"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNDoxMzoyNVrOHSD94Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNDoxMzoyNVrOHSD94Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODcwMTQwOQ==", "bodyText": "Minor: exception that caused?", "url": "https://github.com/hazelcast/hazelcast/pull/17549#discussion_r488701409", "createdAt": "2020-09-15T14:13:25Z", "author": {"login": "petrpleshachkov"}, "path": "hazelcast/src/main/java/com/hazelcast/sql/impl/AbstractSqlResult.java", "diffHunk": "@@ -20,18 +20,24 @@\n import com.hazelcast.sql.SqlRow;\n \n import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n \n public abstract class AbstractSqlResult implements SqlResult {\n \n     public abstract QueryId getQueryId();\n \n-    public abstract void closeOnError(QueryException exception);\n+    /**\n+     * Closes the result, releasing all the resources.\n+     *\n+     * @param exception exception that cause the close operation or {@code null} if the query is closed due to user request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5150d976f340be29039777c18d2065757b5dd319"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzMzNzcy", "url": "https://github.com/hazelcast/hazelcast/pull/17549#pullrequestreview-488733772", "createdAt": "2020-09-15T14:18:13Z", "commit": {"oid": "5150d976f340be29039777c18d2065757b5dd319"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d162bef3b54b45136c1de7d665c09b6e7d2a927", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/8d162bef3b54b45136c1de7d665c09b6e7d2a927", "committedDate": "2020-09-15T15:15:22Z", "message": "Typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3305, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}