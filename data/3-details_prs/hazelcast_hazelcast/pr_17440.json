{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NDAzNTc4", "number": 17440, "title": "Rewrite anti-entropy task sending in unblocking fashion", "bodyText": "This is an enhancement over #17142\nModifications:\n\nPreviously, we were blocking executor thread while waiting end of anti-entropy-task-sending. Now, i rewrote the process to unblock executor thread. A related issue: #17324\nApplied fix from: #17456 which fixes #17442", "createdAt": "2020-08-31T16:30:50Z", "url": "https://github.com/hazelcast/hazelcast/pull/17440", "merged": true, "mergeCommit": {"oid": "e67f30b1c7a2a4bad94ea25b812ad6acee23a171"}, "closed": true, "closedAt": "2020-09-03T11:12:41Z", "author": {"login": "ahmetmircik"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEaL0_gBqjM3MTE4NTM4ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFOnpdAFqTQ4MTczMjgxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e9465bc72f01f3356c66f6415518c3fe1fdfd66", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/8e9465bc72f01f3356c66f6415518c3fe1fdfd66", "committedDate": "2020-08-31T16:29:57Z", "message": "Rewrite anti entrophy task sending in unblocking fashion"}, "afterCommit": {"oid": "6d4a6f41491f66d1154b8fe97a936cf28e6e0bff", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/6d4a6f41491f66d1154b8fe97a936cf28e6e0bff", "committedDate": "2020-08-31T22:03:00Z", "message": "Rewrite anti-entropy task sending in unblocking fashion"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d4a6f41491f66d1154b8fe97a936cf28e6e0bff", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/6d4a6f41491f66d1154b8fe97a936cf28e6e0bff", "committedDate": "2020-08-31T22:03:00Z", "message": "Rewrite anti-entropy task sending in unblocking fashion"}, "afterCommit": {"oid": "3c7a48484cea07a57357a818289978fd370d35f7", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3c7a48484cea07a57357a818289978fd370d35f7", "committedDate": "2020-09-02T11:37:27Z", "message": "Add Mehmet's fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c7a48484cea07a57357a818289978fd370d35f7", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3c7a48484cea07a57357a818289978fd370d35f7", "committedDate": "2020-09-02T11:37:27Z", "message": "Add Mehmet's fix"}, "afterCommit": {"oid": "b46f480c0fccab6f6f615fe75fb63c8709ade070", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/b46f480c0fccab6f6f615fe75fb63c8709ade070", "committedDate": "2020-09-02T11:39:51Z", "message": "Add Mehmet's fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b46f480c0fccab6f6f615fe75fb63c8709ade070", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/b46f480c0fccab6f6f615fe75fb63c8709ade070", "committedDate": "2020-09-02T11:39:51Z", "message": "Add Mehmet's fix"}, "afterCommit": {"oid": "2df7f277d18fcf6ac3fd44113722f4c7a6f61b94", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/2df7f277d18fcf6ac3fd44113722f4c7a6f61b94", "committedDate": "2020-09-02T11:40:39Z", "message": "Add Mehmet's fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNzcxODE2", "url": "https://github.com/hazelcast/hazelcast/pull/17440#pullrequestreview-480771816", "createdAt": "2020-09-02T12:34:12Z", "commit": {"oid": "2df7f277d18fcf6ac3fd44113722f4c7a6f61b94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMjozNDoxMlrOHLs6RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMjozNDoxMlrOHLs6RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAzMjE5Ng==", "bodyText": "Shouldn't afterRun.run() be called inside a finally block? What if this method returns before executing afterRun?", "url": "https://github.com/hazelcast/hazelcast/pull/17440#discussion_r482032196", "createdAt": "2020-09-02T12:34:12Z", "author": {"login": "mdogan"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/PartitionPrimaryReplicaAntiEntropyTask.java", "diffHunk": "@@ -46,6 +49,10 @@ public void run() {\n                 invokePartitionBackupReplicaAntiEntropyOp(index, replica, namespaces, null);\n             }\n         }\n+\n+        if (afterRun != null) {\n+            afterRun.run();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2df7f277d18fcf6ac3fd44113722f4c7a6f61b94"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwODQ2MzYx", "url": "https://github.com/hazelcast/hazelcast/pull/17440#pullrequestreview-480846361", "createdAt": "2020-09-02T13:57:02Z", "commit": {"oid": "86a409bc4b0f168abd63b31e36279e1c76605b36"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86a409bc4b0f168abd63b31e36279e1c76605b36", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/86a409bc4b0f168abd63b31e36279e1c76605b36", "committedDate": "2020-09-02T12:55:46Z", "message": "Address Mehmets commnets"}, "afterCommit": {"oid": "5631b847cf8593dca7ac16f3c4a6959875f27ef1", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5631b847cf8593dca7ac16f3c4a6959875f27ef1", "committedDate": "2020-09-02T14:03:01Z", "message": "Address Mehmets commnets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd64dd5aaea31aca3e5419a9f429953c53a5ec1c", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/dd64dd5aaea31aca3e5419a9f429953c53a5ec1c", "committedDate": "2020-09-02T16:12:38Z", "message": "Rewrite anti-entropy task sending in unblocking fashion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d20b26a12764b31557c6e093fef4057557dc199b", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/d20b26a12764b31557c6e093fef4057557dc199b", "committedDate": "2020-09-02T16:12:38Z", "message": "Add Mehmet's fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bbbacb4f45556449c431aef5a415a9d32d7b44c", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/2bbbacb4f45556449c431aef5a415a9d32d7b44c", "committedDate": "2020-09-02T16:12:38Z", "message": "Address Mehmets commnets"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5631b847cf8593dca7ac16f3c4a6959875f27ef1", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5631b847cf8593dca7ac16f3c4a6959875f27ef1", "committedDate": "2020-09-02T14:03:01Z", "message": "Address Mehmets commnets"}, "afterCommit": {"oid": "2bbbacb4f45556449c431aef5a415a9d32d7b44c", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/2bbbacb4f45556449c431aef5a415a9d32d7b44c", "committedDate": "2020-09-02T16:12:38Z", "message": "Address Mehmets commnets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzMyODE1", "url": "https://github.com/hazelcast/hazelcast/pull/17440#pullrequestreview-481732815", "createdAt": "2020-09-03T11:08:50Z", "commit": {"oid": "2bbbacb4f45556449c431aef5a415a9d32d7b44c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3453, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}