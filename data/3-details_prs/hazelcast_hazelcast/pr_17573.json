{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4Nzk2Mzc3", "number": 17573, "title": "Allow simplified Kerberos authentication configuration in basic scenarios", "bodyText": "This PR allows a shortcut in Kerberos configurations (authentication and identity).\nFor simple scenarios it's not necessary to define 2 additional security realms with Krb5LoginModule configuration. Instead the security realms are generated on the fly based on new configuration attributes:\n\nprincipal - Kerberos principal name\nkeytabFile - path to a keytab file with user credentials\n\nThe \"shortcut\" is only used when the securityRealm attribute is not configured.\nExample of original configuration:\n<realm name=\"kerberosRealm\">\n    <authentication>\n        <kerberos>\n            <security-realm>krb5Acceptor</security-realm>\n        </kerberos>\n    </authentication>\n    <identity>\n        <kerberos>\n            <realm>HAZELCAST.COM</realm>\n            <security-realm>krb5Initiator</security-realm>\n        </kerberos>\n    </identity>\n</realm>\n<realm name=\"krb5Acceptor\">\n    <authentication>\n        <jaas>\n            <login-module class-name=\"com.sun.security.auth.module.Krb5LoginModule\" usage=\"REQUIRED\">\n                <properties>\n                    <property name=\"isInitiator\">false</property>\n                    <property name=\"doNotPrompt\">true</property>\n                    <property name=\"useKeyTab\">true</property>\n                    <property name=\"storeKey\">true</property>\n                    <property name=\"principal\">hz/127.0.0.1@HAZELCAST.COM</property>\n                    <property name=\"keyTab\">/opt/localhost.keytab</property>\n                </properties>\n            </login-module>\n        </jaas>\n    </authentication>\n</realm>\n<realm name=\"krb5Initiator\">\n    <authentication>\n        <jaas>\n            <login-module class-name=\"com.sun.security.auth.module.Krb5LoginModule\" usage=\"REQUIRED\">\n                <properties>\n                    <property name=\"isInitiator\">true</property>\n                    <property name=\"doNotPrompt\">true</property>\n                    <property name=\"useKeyTab\">true</property>\n                    <property name=\"storeKey\">true</property>\n                    <property name=\"principal\">hz/127.0.0.1@HAZELCAST.COM</property>\n                    <property name=\"keyTab\">/opt/localhost.keytab</property>\n                </properties>\n            </login-module>\n        </jaas>\n    </authentication>\n</realm>\nHas its simplified form:\n<realm name=\"kerberosRealm\">\n    <authentication>\n        <kerberos>\n            <principal>hz/127.0.0.1@HAZELCAST.COM</principal>\n            <keytab-file>/opt/localhost.keytab</keytab-file>\n        </kerberos>\n    </authentication>\n    <identity>\n        <kerberos>\n            <realm>HAZELCAST.COM</realm>\n            <principal>hz/127.0.0.1@HAZELCAST.COM</principal>\n            <keytab-file>/opt/localhost.keytab</keytab-file>\n        </kerberos>\n    </identity>\n</realm>\nNote\nUsing keytabFile and principal attributes within the kerberos authentication and identity configuration is intended for a quick Kerberos startup. It's not recommended for production use - users should explicitly configure the Krb5LoginModule to fit their environment in the best possible way.\nLDAP note\nThe GSSAPI authentication in LDAP login modules still requires the security realm with the Krb5LoginModule initiator.", "createdAt": "2020-09-17T16:37:46Z", "url": "https://github.com/hazelcast/hazelcast/pull/17573", "merged": true, "mergeCommit": {"oid": "3d168fe56f91b477fa36ac168f3a6b79950eebd9"}, "closed": true, "closedAt": "2020-09-30T08:28:58Z", "author": {"login": "kwart"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJcnsTgH2gAyNDg4Nzk2Mzc3OmM2MzdiZDI4ODA1OGNjZDYxMzc3MWExMzE2MjkzZDI0MDhjYmUwMGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN4dLIAFqTQ5OTE5NDk1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c637bd288058ccd613771a1316293d2408cbe00b", "author": {"user": {"login": "kwart", "name": "Josef Cacek"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c637bd288058ccd613771a1316293d2408cbe00b", "committedDate": "2020-09-16T13:43:15Z", "message": "Allow simplified Kerberos authentication configuration in basic scenarios."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMjQzMjc1", "url": "https://github.com/hazelcast/hazelcast/pull/17573#pullrequestreview-491243275", "createdAt": "2020-09-18T08:11:02Z", "commit": {"oid": "c637bd288058ccd613771a1316293d2408cbe00b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NzU0Nzk1", "url": "https://github.com/hazelcast/hazelcast/pull/17573#pullrequestreview-495754795", "createdAt": "2020-09-24T16:35:46Z", "commit": {"oid": "c637bd288058ccd613771a1316293d2408cbe00b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNjozNTo0NlrOHXjUNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNjozNTo0NlrOHXjUNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NzkwOA==", "bodyText": "This behaviour (null value removing property mapping) should be documented in method's javadoc and tested in LoginModuleConfigTest. I guess the behaviour change is not a problem, since it was previously throwing NullPointerException.", "url": "https://github.com/hazelcast/hazelcast/pull/17573#discussion_r494457908", "createdAt": "2020-09-24T16:35:46Z", "author": {"login": "vbekiaris"}, "path": "hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java", "diffHunk": "@@ -99,7 +99,11 @@ public LoginModuleConfig setProperties(Properties properties) {\n     }\n \n     public LoginModuleConfig setProperty(String key, String value) {\n-        properties.setProperty(key, value);\n+        if (value != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c637bd288058ccd613771a1316293d2408cbe00b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4eba1e09af168a5240b4886fb24181687a09195", "author": {"user": {"login": "kwart", "name": "Josef Cacek"}}, "url": "https://github.com/hazelcast/hazelcast/commit/d4eba1e09af168a5240b4886fb24181687a09195", "committedDate": "2020-09-25T14:35:17Z", "message": "Impl review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDk5MjEw", "url": "https://github.com/hazelcast/hazelcast/pull/17573#pullrequestreview-496499210", "createdAt": "2020-09-25T14:55:45Z", "commit": {"oid": "d4eba1e09af168a5240b4886fb24181687a09195"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MTk0OTUx", "url": "https://github.com/hazelcast/hazelcast/pull/17573#pullrequestreview-499194951", "createdAt": "2020-09-30T08:24:48Z", "commit": {"oid": "d4eba1e09af168a5240b4886fb24181687a09195"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3330, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}