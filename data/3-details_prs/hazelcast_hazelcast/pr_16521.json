{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MzgzOTc0", "number": 16521, "title": "Make member metrics JMX exposure to respect JMX sysprop", "bodyText": "This change makes metrics and other MBean exposures consistent. Before, metrics MBeans did not respect the hazelcast.jmx property, and those MBeans were exposed even if JMX was not enabled. Now, both the JMX config and the hazelcast.jmx property needs to be set to expose the metrics.\nOn the client side there is no such property, therefore, enabling JMX exposure for metrics in the config is still enough.", "createdAt": "2020-01-21T16:04:48Z", "url": "https://github.com/hazelcast/hazelcast/pull/16521", "merged": true, "mergeCommit": {"oid": "8bfd96b2a9e45eaf5675e6f0c1bf4f805f9ec816"}, "closed": true, "closedAt": "2020-01-22T13:43:29Z", "author": {"login": "blazember"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8jXD1gH2gAyMzY1MzgzOTc0OmYwODg2ZGM3NWVjZWM4N2QzOTNlY2FkYTU3YzMxYjc1YWFkNDM5NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb816psgFqTM0NjU5MTY5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f0886dc75ecec87d393ecada57c31b75aad43965", "author": {"user": {"login": "blazember", "name": "Zolt\u00e1n Baranyi"}}, "url": "https://github.com/hazelcast/hazelcast/commit/f0886dc75ecec87d393ecada57c31b75aad43965", "committedDate": "2020-01-21T16:02:15Z", "message": "Make member metrics JMX exposure to respect JMX sysprop\n\nThis change makes metrics and other MBean exposures consistent. Before,\nMetrics MBeans did not respect the \"hazelcast.jmx\" property, and those\nMBeans were exposed even if JMX was not enabled. Now, both the JMX\nconfig and the \"hazelcast.jmx\" property needs to be set to expose the\nMetrics.\n\nOn the client side there is no such property, therefore, enabling JMX\nexposure for metrics in the config is enough."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2Mzc0MjYw", "url": "https://github.com/hazelcast/hazelcast/pull/16521#pullrequestreview-346374260", "createdAt": "2020-01-22T06:50:36Z", "commit": {"oid": "f0886dc75ecec87d393ecada57c31b75aad43965"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NDEzMDU1", "url": "https://github.com/hazelcast/hazelcast/pull/16521#pullrequestreview-346413055", "createdAt": "2020-01-22T08:32:54Z", "commit": {"oid": "f0886dc75ecec87d393ecada57c31b75aad43965"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwODozMjo1NFrOFgT48Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwODozMjo1NFrOFgT48Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQyNDYyNQ==", "bodyText": "Since the JMX system property is not cleared in the other test methods, I think this test can see it as true?", "url": "https://github.com/hazelcast/hazelcast/pull/16521#discussion_r369424625", "createdAt": "2020-01-22T08:32:54Z", "author": {"login": "vojtechtoman"}, "path": "hazelcast/src/test/java/com/hazelcast/internal/metrics/jmx/MemberJmxMetricsTest.java", "diffHunk": "@@ -63,4 +89,50 @@ public void testNoMBeanLeak() {\n         member.shutdown();\n         helper.assertNoMBeans();\n     }\n+\n+    @Test\n+    public void testMetricsNotExposedOverJmxIfSysPropIsNotSet() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0886dc75ecec87d393ecada57c31b75aad43965"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1566754487c463a23db943e7d451dc0349944c74", "author": {"user": {"login": "blazember", "name": "Zolt\u00e1n Baranyi"}}, "url": "https://github.com/hazelcast/hazelcast/commit/1566754487c463a23db943e7d451dc0349944c74", "committedDate": "2020-01-22T12:43:40Z", "message": "Address review comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NTkxNjky", "url": "https://github.com/hazelcast/hazelcast/pull/16521#pullrequestreview-346591692", "createdAt": "2020-01-22T13:39:25Z", "commit": {"oid": "1566754487c463a23db943e7d451dc0349944c74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4047, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}