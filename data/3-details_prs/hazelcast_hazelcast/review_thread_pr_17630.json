{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MDE1NTE1", "number": 17630, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTozNzo1OVrOEoABmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDowMjoyN1rOEpC7sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMzc4OTA2OnYy", "diffSide": "RIGHT", "path": "hazelcast-sql/pom.xml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTozNzo1OVrOHY190g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMjo1MzoyN1rOHbI88g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxMjA1MA==", "bodyText": "@devozerov can we apply this for all artifacts? When I apply it to all artifacts I cannot see MANIFEST.MF though.", "url": "https://github.com/hazelcast/hazelcast/pull/17630#discussion_r495812050", "createdAt": "2020-09-28T09:37:59Z", "author": {"login": "lazerion"}, "path": "hazelcast-sql/pom.xml", "diffHunk": "@@ -121,13 +126,16 @@\n                                     <excludes>\n                                         <!-- Avoid automatic discovery of Calcite JDBC. -->\n                                         <exclude>META-INF/services/java.sql.Driver</exclude>\n+                                        <exclude>META-INF/MANIFEST.MF</exclude>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dc07a1b602f01cdfd4ff8ea8d0bcba655f3b378"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI5MDU0Mg==", "bodyText": "Currently, there are still warnings about it MANIFEST.MF overlap when building the sql module. Another thing is that packages from the sql module are not included in the resulting MANIFEST.MF. I am not sure how it should work in the end, but I would try to do the following for both fat-shaded-jar and fat-jar goals:\n\nExclude MANIFEST.MF from all packages (<artifact>*:*</artifact>)\nInclude MANIFEST.MF for the hazelcast-sql artifact\nMake sure that sql manifest is merged into the final manifest using ManifestResourceTransformer [1]. I do not know where exactly this transformer should be defined, unfortunately\n\nThis way we will not have warnings and at the same time the final MANIFEST.ML will include packages from the sql module.\nBut I would also ask someone with more experience with Maven on how it should work in the end.\n[1] https://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html#ManifestResourceTransformer", "url": "https://github.com/hazelcast/hazelcast/pull/17630#discussion_r497290542", "createdAt": "2020-09-30T07:15:11Z", "author": {"login": "devozerov"}, "path": "hazelcast-sql/pom.xml", "diffHunk": "@@ -121,13 +126,16 @@\n                                     <excludes>\n                                         <!-- Avoid automatic discovery of Calcite JDBC. -->\n                                         <exclude>META-INF/services/java.sql.Driver</exclude>\n+                                        <exclude>META-INF/MANIFEST.MF</exclude>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxMjA1MA=="}, "originalCommit": {"oid": "2dc07a1b602f01cdfd4ff8ea8d0bcba655f3b378"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODIyMDI3NA==", "bodyText": "@devozerov updated with targeted filters, I could not make it possible with ManifestResourceTransformer FYI. PTAL.", "url": "https://github.com/hazelcast/hazelcast/pull/17630#discussion_r498220274", "createdAt": "2020-10-01T12:53:27Z", "author": {"login": "lazerion"}, "path": "hazelcast-sql/pom.xml", "diffHunk": "@@ -121,13 +126,16 @@\n                                     <excludes>\n                                         <!-- Avoid automatic discovery of Calcite JDBC. -->\n                                         <exclude>META-INF/services/java.sql.Driver</exclude>\n+                                        <exclude>META-INF/MANIFEST.MF</exclude>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxMjA1MA=="}, "originalCommit": {"oid": "2dc07a1b602f01cdfd4ff8ea8d0bcba655f3b378"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNDc1MTIwOnYy", "diffSide": "RIGHT", "path": "hazelcast-all/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDowMjoyN1rOHafIdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDowMjoyN1rOHafIdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUzNTA5NA==", "bodyText": "@jerrinot @Holmistr We do not include hazelcast-community-license.txt in hazelcast-all.jar at all. It is regarding below warning\n[WARNING] hazelcast-aws-3.3.jar, hazelcast-wm-4.0.jar define 1 overlapping resource: \n[WARNING]   - hazelcast-community-license.txt\n\nI think we do not need to include it inside the jar. kindly advise.", "url": "https://github.com/hazelcast/hazelcast/pull/17630#discussion_r497535094", "createdAt": "2020-09-30T14:02:27Z", "author": {"login": "lazerion"}, "path": "hazelcast-all/pom.xml", "diffHunk": "@@ -111,11 +111,19 @@\n                                 </transformer>\n                                 <transformer\n                                         implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/>\n+                                <transformer\n+                                        implementation=\"org.apache.maven.plugins.shade.resource.ApacheNoticeResourceTransformer\"/>\n+                                <transformer\n+                                        implementation=\"org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer\">\n+                                    <resource>com.hazelcast.org.codehaus.commons.compiler.properties</resource>\n+                                    <resource>hazelcast-community-license.txt</resource>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dc07a1b602f01cdfd4ff8ea8d0bcba655f3b378"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 124, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}