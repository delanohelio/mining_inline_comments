{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNjg0ODM3", "number": 16941, "title": "Send all the Diagnostics logs to the stdout, instead of local files", "bodyText": "This PR implements #16844. Now we can send all the diagnostics logs to the stdout by using the following:\njava -jar -Dhazelcast.diagnostics.enabled=true -Dhazelcast.diagnostics.stdout=true hazelcast/target/hazelcast-4.1-SNAPSHOT.jar\n\nCould you please review my PR?", "createdAt": "2020-04-29T12:35:04Z", "url": "https://github.com/hazelcast/hazelcast/pull/16941", "merged": true, "mergeCommit": {"oid": "0dfbb59a2ac056e1552bea663693e39586ec2afc"}, "closed": true, "closedAt": "2020-07-02T12:22:43Z", "author": {"login": "buraksezer"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccXswkAH2gAyNDEwNjg0ODM3OmVkNWNhYmNjZjUzZmZmOWExYTNlYTE5MGQ5NWMzYWE3YTE1YWVlN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw93N1AFqTQ0MTYyMjU3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed5cabccf53fff9a1a3ea190d95c3aa7a15aee7b", "author": {"user": {"login": "buraksezer", "name": "Burak Sezer"}}, "url": "https://github.com/hazelcast/hazelcast/commit/ed5cabccf53fff9a1a3ea190d95c3aa7a15aee7b", "committedDate": "2020-04-29T12:32:40Z", "message": "Send all the Diagnostics logs to the stdout, instead of storing on the file system."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMzIzNjI0", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-403323624", "createdAt": "2020-04-30T08:49:44Z", "commit": {"oid": "ed5cabccf53fff9a1a3ea190d95c3aa7a15aee7b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo0OTo0NVrOGOf2Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo0OTo0NVrOGOf2Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1NTA0Nw==", "bodyText": "Why don't we rename this to DiagnosticsLog? I like simple names.\nAnd then we have 2 classes:\nDiagnosticsStdout\nDiagnosticsLogFile", "url": "https://github.com/hazelcast/hazelcast/pull/16941#discussion_r417855047", "createdAt": "2020-04-30T08:49:45Z", "author": {"login": "pveentjer"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/diagnostics/DiagnosticsLogOutput.java", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.internal.diagnostics;\n+\n+public interface DiagnosticsLogOutput {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed5cabccf53fff9a1a3ea190d95c3aa7a15aee7b"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5dac0eed49ee92f254097b5cc7aeda8494c0a0a", "author": {"user": {"login": "buraksezer", "name": "Burak Sezer"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a5dac0eed49ee92f254097b5cc7aeda8494c0a0a", "committedDate": "2020-05-01T10:14:32Z", "message": "Use simple names for Diagnostics log classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc", "author": {"user": {"login": "buraksezer", "name": "Burak Sezer"}}, "url": "https://github.com/hazelcast/hazelcast/commit/1719d6298e973ceb7153ad6c576e02cb5d9832dc", "committedDate": "2020-05-01T11:19:08Z", "message": "Add more logging about diagnostics log output"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0Nzg0NDk2", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-404784496", "createdAt": "2020-05-04T08:15:34Z", "commit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODoxNTozNVrOGP2jOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODoxNTozNVrOGP2jOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI3NTU3OQ==", "bodyText": "I would print the directory.\nDiagnostics log directory is [....]", "url": "https://github.com/hazelcast/hazelcast/pull/16941#discussion_r419275579", "createdAt": "2020-05-04T08:15:35Z", "author": {"login": "pveentjer"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/diagnostics/DiagnosticsLogFile.java", "diffHunk": "@@ -98,7 +98,9 @@ public void write(DiagnosticsPlugin plugin) {\n \n     private File newFile(int index) {\n         createDirectoryIfDoesNotExist();\n-        return new File(diagnostics.directory, format(fileName, index));\n+        File fresh = new File(diagnostics.directory, format(fileName, index));\n+        logger.info(\"Current diagnostics log file is \" + fresh.getAbsolutePath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0Nzg1MDgw", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-404785080", "createdAt": "2020-05-04T08:16:30Z", "commit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NTcyMDYx", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-405572061", "createdAt": "2020-05-05T08:06:57Z", "commit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwODowNjo1OFrOGQepRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwODowNjo1OFrOGQepRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkzMjQ4NQ==", "bodyText": "Can you convert this into using a ternary operator?\nthis.diagnosticsLogs = stdOut ? new DiagnosticsStdout(this) :  new DiagnosticsLogFile(this);\n\nIt makes the code less verbose.", "url": "https://github.com/hazelcast/hazelcast/pull/16941#discussion_r419932485", "createdAt": "2020-05-05T08:06:58Z", "author": {"login": "pveentjer"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/diagnostics/Diagnostics.java", "diffHunk": "@@ -207,7 +219,12 @@ public void start() {\n             return;\n         }\n \n-        this.diagnosticsLogFile = new DiagnosticsLogFile(this);\n+        if (stdout) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1Njg5NzU4", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-405689758", "createdAt": "2020-05-05T11:10:26Z", "commit": {"oid": "1719d6298e973ceb7153ad6c576e02cb5d9832dc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2026f45e77582ce88f807b7ffa64bb5a487237f7", "author": {"user": {"login": "buraksezer", "name": "Burak Sezer"}}, "url": "https://github.com/hazelcast/hazelcast/commit/2026f45e77582ce88f807b7ffa64bb5a487237f7", "committedDate": "2020-05-06T13:12:06Z", "message": "Print log directory instead of files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bafe1524c27514263f6230ef04d5fd7c0ace70b", "author": {"user": {"login": "buraksezer", "name": "Burak Sezer"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5bafe1524c27514263f6230ef04d5fd7c0ace70b", "committedDate": "2020-05-06T13:20:16Z", "message": "Use a ternary operator for stdout condition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTg5ODI5", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-409989829", "createdAt": "2020-05-12T12:29:33Z", "commit": {"oid": "5bafe1524c27514263f6230ef04d5fd7c0ace70b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjIyNTc4", "url": "https://github.com/hazelcast/hazelcast/pull/16941#pullrequestreview-441622578", "createdAt": "2020-07-02T12:18:58Z", "commit": {"oid": "5bafe1524c27514263f6230ef04d5fd7c0ace70b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3809, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}