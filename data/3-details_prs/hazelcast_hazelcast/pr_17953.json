{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MTA3MTMx", "number": 17953, "title": "Schema support for the SQL public API [IMDG-142]", "bodyText": "This PR introduces support for schemas to the SQL public API. This is needed for users and the JDBC driver.\nWe already had all the necessary infrastructure and tests for schemas. However, we never exposed it to the public API. This PR fixes that deficiency. The new message execute2 is added to the protocol, with the new schema field. The schema is then propagated to the optimizer where that actual object name resolution happens.\nThe client protocol is adjusted accordingly, see hazelcast/hazelcast-client-protocol#360", "createdAt": "2020-12-09T11:21:19Z", "url": "https://github.com/hazelcast/hazelcast/pull/17953", "merged": true, "mergeCommit": {"oid": "40d39011e43df4b19b20f47761c45050bd4a2ac0"}, "closed": true, "closedAt": "2020-12-23T08:01:39Z", "author": {"login": "devozerov"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkc4IvAH2gAyNTM1MTA3MTMxOjI2MWU4MDJmNjY4NzkyYTRkNWM1OWFmNjBiZTc3OTZhZmEyOTgxOGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdo6D6BAFqTU1NzY4OTQ1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "261e802f668792a4d5c59af60be7796afa29818a", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/261e802f668792a4d5c59af60be7796afa29818a", "committedDate": "2020-12-09T11:17:10Z", "message": "Schema support for the SQL public API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c8ff7a428d30a4339dc981571bf483d8925bfc2", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/8c8ff7a428d30a4339dc981571bf483d8925bfc2", "committedDate": "2020-12-09T11:27:02Z", "message": "Fix compilation issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c56d6b2645d5de6ef34471b90bb9fa85da2d343d", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c56d6b2645d5de6ef34471b90bb9fa85da2d343d", "committedDate": "2020-12-10T11:07:00Z", "message": "Merge branch 'master' into sql-client-schema-and-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17d1e3f79cf9665dd1e6d51373048902cf5c305f", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/17d1e3f79cf9665dd1e6d51373048902cf5c305f", "committedDate": "2020-12-21T10:20:26Z", "message": "Merge branch 'master' into sql-client-schema-and-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23e37b9da61e04f8d7da467d534bfc93debe2f1e", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/23e37b9da61e04f8d7da467d534bfc93debe2f1e", "committedDate": "2020-12-21T10:34:48Z", "message": "Added the new message for the upadted \"executre\" command."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fc94ba5725332a84348e647464f2a8ce1e73862", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/6fc94ba5725332a84348e647464f2a8ce1e73862", "committedDate": "2020-12-21T10:44:32Z", "message": "Checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a3225e888494ce9532dd47cdaca1f6e36ea017a", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3a3225e888494ce9532dd47cdaca1f6e36ea017a", "committedDate": "2020-12-22T11:25:13Z", "message": "Fix typos"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTk0NDQ0", "url": "https://github.com/hazelcast/hazelcast/pull/17953#pullrequestreview-556994444", "createdAt": "2020-12-22T10:58:50Z", "commit": {"oid": "6fc94ba5725332a84348e647464f2a8ce1e73862"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMDo1ODo1MFrOIJ3Iiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMDo1ODo1MFrOIJ3Iiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIxMTQwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * Gets the current schema name.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @return the current schema name or {@code null} if there is none\n          \n          \n            \n                 */\n          \n          \n            \n                public String getSchema() {\n          \n          \n            \n                    return schema;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                /**\n          \n          \n            \n                 * Sets the current schema name.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param schema the current schema name\n          \n          \n            \n                 * @return this instance for chaining\n          \n          \n            \n                 */\n          \n          \n            \n                public SqlStatement setSchema(String schema) {\n          \n          \n            \n                /**\n          \n          \n            \n                 * Gets the schema name.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @return the schema name or {@code null} if there is none\n          \n          \n            \n                 * @since 4.2\n          \n          \n            \n                 */\n          \n          \n            \n                @Nullable\n          \n          \n            \n                public String getSchema() {\n          \n          \n            \n                    return schema;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                /**\n          \n          \n            \n                 * Sets the schema name. The engine will try to resolve the identifiers\n          \n          \n            \n                 * from the statement first in the given schema, if not found, the default\n          \n          \n            \n                 * search path will be used.\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * The default value is {@code null} meaning only the default search path\n          \n          \n            \n                 * is used.\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * A period ({@code .}) is interpreted literally, you can't specify a path\n          \n          \n            \n                 * here.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param schema the schema name for the statement or {@code null}\n          \n          \n            \n                 * @return this instance for chaining\n          \n          \n            \n                 * @since 4.2\n          \n          \n            \n                 */\n          \n          \n            \n                @Nonnull\n          \n          \n            \n                public SqlStatement setSchema(@Nullable String schema) {", "url": "https://github.com/hazelcast/hazelcast/pull/17953#discussion_r547211403", "createdAt": "2020-12-22T10:58:50Z", "author": {"login": "viliam-durina"}, "path": "hazelcast/src/main/java/com/hazelcast/sql/SqlStatement.java", "diffHunk": "@@ -95,6 +97,27 @@ public SqlStatement setSql(@Nonnull String sql) {\n         return this;\n     }\n \n+    /**\n+     * Gets the current schema name.\n+     *\n+     * @return the current schema name or {@code null} if there is none\n+     */\n+    public String getSchema() {\n+        return schema;\n+    }\n+\n+    /**\n+     * Sets the current schema name.\n+     *\n+     * @param schema the current schema name\n+     * @return this instance for chaining\n+     */\n+    public SqlStatement setSchema(String schema) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6fc94ba5725332a84348e647464f2a8ce1e73862"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd120f6acebeeaa1f900218fedcf0efbe6254e49", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/dd120f6acebeeaa1f900218fedcf0efbe6254e49", "committedDate": "2020-12-22T12:30:22Z", "message": "Improve JavaDoc and signatures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18060ec79da68db4bb22b8e1bdaf7a89776ef059", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/18060ec79da68db4bb22b8e1bdaf7a89776ef059", "committedDate": "2020-12-22T12:30:49Z", "message": "Merge remote-tracking branch 'devozerov/sql-client-schema-and-type' into sql-client-schema-and-type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MDY1ODk5", "url": "https://github.com/hazelcast/hazelcast/pull/17953#pullrequestreview-557065899", "createdAt": "2020-12-22T13:07:31Z", "commit": {"oid": "18060ec79da68db4bb22b8e1bdaf7a89776ef059"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9caa45a326841de5ebf7d4503d2b711a3d62f6c9", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/9caa45a326841de5ebf7d4503d2b711a3d62f6c9", "committedDate": "2020-12-22T13:22:24Z", "message": "Merge branch 'master' into sql-client-schema-and-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ffd11ccfb87476a4c8521c520a95a0f8e3f5635", "author": {"user": {"login": "devozerov", "name": "Vladimir Ozerov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5ffd11ccfb87476a4c8521c520a95a0f8e3f5635", "committedDate": "2020-12-22T13:23:14Z", "message": "Minors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3Njg5NDUy", "url": "https://github.com/hazelcast/hazelcast/pull/17953#pullrequestreview-557689452", "createdAt": "2020-12-23T07:32:58Z", "commit": {"oid": "5ffd11ccfb87476a4c8521c520a95a0f8e3f5635"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3022, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}