{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MTI4ODgz", "number": 17528, "title": "Add local checks for count argument of CountDownLatch#trySetCount", "bodyText": "CountDownLatch#trySetCount implementations were doing a remote call even when called with a non-positive count. This PR adds local checks to mitigate the problem\nAlso improves javadoc consistency for some CP data structures", "createdAt": "2020-09-11T14:23:31Z", "url": "https://github.com/hazelcast/hazelcast/pull/17528", "merged": true, "mergeCommit": {"oid": "778f8dc1ed875bba899ecd17e0b1001806cf9067"}, "closed": true, "closedAt": "2020-09-14T09:36:05Z", "author": {"login": "puzpuzpuz"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH2M3hAH2gAyNDg1MTI4ODgzOjg5YThlODhjYzMxZDlkMGQ1NWM4MDIzNWY3YmUxODk1NjAxYWQ3YjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdIvDvNgFqTQ4NzUzNzM2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "89a8e88cc31d9d0d55c80235f7be1895601ad7b5", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/89a8e88cc31d9d0d55c80235f7be1895601ad7b5", "committedDate": "2020-09-11T14:23:38Z", "message": "Add local checks for count argument of CountDownLatch#trySetCount\n\nAlso improves javadoc consistency for some CP data structures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0a4e9560776dd47915a3334779a61a5eef20992", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/f0a4e9560776dd47915a3334779a61a5eef20992", "committedDate": "2020-09-11T14:19:22Z", "message": "Add local checks for count argument of CountDownLatch#trySetCount\n\nAlso improves javadoc consistency for some CP data structures"}, "afterCommit": {"oid": "89a8e88cc31d9d0d55c80235f7be1895601ad7b5", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/89a8e88cc31d9d0d55c80235f7be1895601ad7b5", "committedDate": "2020-09-11T14:23:38Z", "message": "Add local checks for count argument of CountDownLatch#trySetCount\n\nAlso improves javadoc consistency for some CP data structures"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODc2MDY4", "url": "https://github.com/hazelcast/hazelcast/pull/17528#pullrequestreview-486876068", "createdAt": "2020-09-11T14:49:20Z", "commit": {"oid": "89a8e88cc31d9d0d55c80235f7be1895601ad7b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDo0OToyMFrOHQiESg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDo0OToyMFrOHQiESg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA5NzQxOA==", "bodyText": "positive or non-negative?", "url": "https://github.com/hazelcast/hazelcast/pull/17528#discussion_r487097418", "createdAt": "2020-09-11T14:49:20Z", "author": {"login": "ihsandemir"}, "path": "hazelcast/src/main/java/com/hazelcast/cp/internal/datastructures/countdownlatch/proxy/CountDownLatchProxy.java", "diffHunk": "@@ -76,6 +77,8 @@ public int getCount() {\n \n     @Override\n     public boolean trySetCount(int count) {\n+        checkPositive(count, \"Count must be positive!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89a8e88cc31d9d0d55c80235f7be1895601ad7b5"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTIxNDUz", "url": "https://github.com/hazelcast/hazelcast/pull/17528#pullrequestreview-486921453", "createdAt": "2020-09-11T15:45:37Z", "commit": {"oid": "89a8e88cc31d9d0d55c80235f7be1895601ad7b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17f703e843c08d5bd0a5bc4c749a785798b464d8", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/17f703e843c08d5bd0a5bc4c749a785798b464d8", "committedDate": "2020-09-11T16:47:17Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c43507e44ca97ac140cca9e4ca3442e49c9e368", "author": {"user": {"login": "puzpuzpuz", "name": "Andrey Pechkurov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3c43507e44ca97ac140cca9e4ca3442e49c9e368", "committedDate": "2020-09-14T08:29:15Z", "message": "Change validation order in CountDownLatch#trySetCount"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTM3MzY0", "url": "https://github.com/hazelcast/hazelcast/pull/17528#pullrequestreview-487537364", "createdAt": "2020-09-14T08:38:15Z", "commit": {"oid": "3c43507e44ca97ac140cca9e4ca3442e49c9e368"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3288, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}