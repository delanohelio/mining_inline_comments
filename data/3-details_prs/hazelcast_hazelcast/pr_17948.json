{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTY3Njk3", "number": 17948, "title": "Cleanup rolling-upgrade support code", "bodyText": "Cleanup 4.0 -> 4.1 rolling upgrade support code.\nFirst commit addresses various instances of RU related code. Changes in the second commit address removal of deprecated methods in partitioning & migration packages.\nEE-side counterpart: hazelcast/hazelcast-enterprise#3875", "createdAt": "2020-12-08T16:26:31Z", "url": "https://github.com/hazelcast/hazelcast/pull/17948", "merged": true, "mergeCommit": {"oid": "058ba5d8768d2de06154c587f65db05c60d0bde6"}, "closed": true, "closedAt": "2020-12-15T16:16:59Z", "author": {"login": "vbekiaris"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkMhCFgH2gAyNTM0NTY3Njk3OmVlZDIyYTFhNzZhYWUwYjFhMzIzOTJhZDUwM2ViMzU0ZDY1Njg0MGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmbwWGAFqTU1MjU1NTM1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eed22a1a76aae0b1a32392ad503eb354d656840c", "author": {"user": {"login": "vbekiaris", "name": "Vassilis Bekiaris"}}, "url": "https://github.com/hazelcast/hazelcast/commit/eed22a1a76aae0b1a32392ad503eb354d656840c", "committedDate": "2020-12-08T16:13:27Z", "message": "Removes stale RU compat code for 4.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15", "author": {"user": {"login": "vbekiaris", "name": "Vassilis Bekiaris"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a922faa304be9fa847d0e49b579973fccaa56b15", "committedDate": "2020-12-08T16:13:27Z", "message": "Removes stale RU compat code for 4.0\n\nRemoves partition & migration related\ncode for RU from 4.0 -> 4.1."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTIwNDQz", "url": "https://github.com/hazelcast/hazelcast/pull/17948#pullrequestreview-548120443", "createdAt": "2020-12-09T12:12:10Z", "commit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxMjoxMFrOICRg1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxMjoxMFrOICRg1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI1NDk5OQ==", "bodyText": "could this version comparison be removed  also?--> newVersion.isEqualTo(Versions.V4_1)", "url": "https://github.com/hazelcast/hazelcast/pull/17948#discussion_r539254999", "createdAt": "2020-12-09T12:12:10Z", "author": {"login": "ahmetmircik"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/PartitionStateManager.java", "diffHunk": "@@ -464,18 +428,13 @@ int replaceMember(Member oldMember, Member newMember) {\n     }\n \n     PartitionTableView getPartitionTable() {\n-        int version = 0;\n-        if (node.getClusterService().getClusterVersion().isUnknownOrLessOrEqual(Versions.V4_0)) {\n-            //RU_COMPAT_4_0\n-            version = getVersion();\n-        }\n-        return new PartitionTableView(getPartitionsCopy(true), version);\n+        return new PartitionTableView(getPartitionsCopy(true));\n     }\n \n     @Override\n     public void onClusterVersionChange(Version newVersion) {\n         if (newVersion.isEqualTo(Versions.V4_1) && initialized) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15"}, "originalPosition": 93}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTIxMTAy", "url": "https://github.com/hazelcast/hazelcast/pull/17948#pullrequestreview-548121102", "createdAt": "2020-12-09T12:13:08Z", "commit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a", "author": {"user": {"login": "vbekiaris", "name": "Vassilis Bekiaris"}}, "url": "https://github.com/hazelcast/hazelcast/commit/08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a", "committedDate": "2020-12-09T15:05:21Z", "message": "PartitionStateManager no longer needs to listen for cluster version changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3013e95314fcfa373bce9c28aba3262889fcf620", "author": {"user": {"login": "vbekiaris", "name": "Vassilis Bekiaris"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3013e95314fcfa373bce9c28aba3262889fcf620", "committedDate": "2020-12-09T14:57:09Z", "message": "PartitionStateManager no longer needs to listen for cluster version changes"}, "afterCommit": {"oid": "08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a", "author": {"user": {"login": "vbekiaris", "name": "Vassilis Bekiaris"}}, "url": "https://github.com/hazelcast/hazelcast/commit/08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a", "committedDate": "2020-12-09T15:05:21Z", "message": "PartitionStateManager no longer needs to listen for cluster version changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTg2OTAx", "url": "https://github.com/hazelcast/hazelcast/pull/17948#pullrequestreview-549986901", "createdAt": "2020-12-11T10:42:30Z", "commit": {"oid": "08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTU1MzUx", "url": "https://github.com/hazelcast/hazelcast/pull/17948#pullrequestreview-552555351", "createdAt": "2020-12-15T15:06:37Z", "commit": {"oid": "08c4bba7bb9cfd41c2707bb3db96c8f063f48c9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3015, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}