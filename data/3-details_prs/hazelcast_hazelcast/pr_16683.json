{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NDkyMDQ5", "number": 16683, "title": "Create less objects during metrics scan ", "bodyText": "Encountered this during profiling for a different purpose. This PR tries to decrease temporary object creation.", "createdAt": "2020-02-25T10:24:38Z", "url": "https://github.com/hazelcast/hazelcast/pull/16683", "merged": true, "mergeCommit": {"oid": "4c935609938512e3fe0375c269df45679171203d"}, "closed": true, "closedAt": "2020-03-02T13:40:34Z", "author": {"login": "ahmetmircik"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHwYgpABqjMwNjkwNTEyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJtpDPAFqTM2NzE5MjA4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9a06eba33ca79b6164d83c1957b979afce7b203", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c9a06eba33ca79b6164d83c1957b979afce7b203", "committedDate": "2020-02-25T09:59:20Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "fc072b56fbe4eb6040dd6d9131b14ab6baf6288d", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/fc072b56fbe4eb6040dd6d9131b14ab6baf6288d", "committedDate": "2020-02-25T11:25:35Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc072b56fbe4eb6040dd6d9131b14ab6baf6288d", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/fc072b56fbe4eb6040dd6d9131b14ab6baf6288d", "committedDate": "2020-02-25T11:25:35Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "fc13cb1efcb4da6ce17943b31eb913a311d9e292", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/fc13cb1efcb4da6ce17943b31eb913a311d9e292", "committedDate": "2020-02-25T12:51:47Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc13cb1efcb4da6ce17943b31eb913a311d9e292", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/fc13cb1efcb4da6ce17943b31eb913a311d9e292", "committedDate": "2020-02-25T12:51:47Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "a5a1bf3674aa810f5646ddbdcb37f6629c9237e8", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a5a1bf3674aa810f5646ddbdcb37f6629c9237e8", "committedDate": "2020-02-25T14:41:33Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5a1bf3674aa810f5646ddbdcb37f6629c9237e8", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a5a1bf3674aa810f5646ddbdcb37f6629c9237e8", "committedDate": "2020-02-25T14:41:33Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "c012beabf3a6f049cf1404f3a2a011bba3f80fe4", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c012beabf3a6f049cf1404f3a2a011bba3f80fe4", "committedDate": "2020-02-26T11:58:03Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c012beabf3a6f049cf1404f3a2a011bba3f80fe4", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c012beabf3a6f049cf1404f3a2a011bba3f80fe4", "committedDate": "2020-02-26T11:58:03Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "6691fc6c6ec30f9dcad94d1b93622fb6385c3474", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/6691fc6c6ec30f9dcad94d1b93622fb6385c3474", "committedDate": "2020-02-26T12:06:23Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7361dde18a0989fb7605cd8253e4bc75fe1dc9de", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/7361dde18a0989fb7605cd8253e4bc75fe1dc9de", "committedDate": "2020-02-26T12:41:40Z", "message": "checkstyle"}, "afterCommit": {"oid": "7cf44f3822ee606a4219b4d727e0d8ed9ad39f37", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/7cf44f3822ee606a4219b4d727e0d8ed9ad39f37", "committedDate": "2020-02-26T12:56:13Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01239d7c8f9abe53c96c4fd5be7cd8e83c6ff2d1", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/01239d7c8f9abe53c96c4fd5be7cd8e83c6ff2d1", "committedDate": "2020-02-26T13:11:01Z", "message": "spotbugs"}, "afterCommit": {"oid": "91d371e46002d7f9a323b13b89bd4d4631929735", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/91d371e46002d7f9a323b13b89bd4d4631929735", "committedDate": "2020-02-26T15:31:28Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91d371e46002d7f9a323b13b89bd4d4631929735", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/91d371e46002d7f9a323b13b89bd4d4631929735", "committedDate": "2020-02-26T15:31:28Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "3f0e47a3ef632bc9112634136750dfd617dd504e", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/3f0e47a3ef632bc9112634136750dfd617dd504e", "committedDate": "2020-02-26T22:10:27Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d7c493c50ed6f8b77f1b536bab24c15d40ecc48", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/6d7c493c50ed6f8b77f1b536bab24c15d40ecc48", "committedDate": "2020-02-26T22:14:29Z", "message": "Create less objects during metrics scan 2"}, "afterCommit": {"oid": "13e46d647020f2920275325599bf7f5d274bc525", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/13e46d647020f2920275325599bf7f5d274bc525", "committedDate": "2020-02-27T13:12:04Z", "message": "Create less objects during metrics scan"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13e46d647020f2920275325599bf7f5d274bc525", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/13e46d647020f2920275325599bf7f5d274bc525", "committedDate": "2020-02-27T13:12:04Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "76e3b9d6e1167c98fd1ce73fcc4decd032e541aa", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/76e3b9d6e1167c98fd1ce73fcc4decd032e541aa", "committedDate": "2020-02-27T13:35:39Z", "message": "Create less objects during metrics scan"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MDMzNDcy", "url": "https://github.com/hazelcast/hazelcast/pull/16683#pullrequestreview-367033472", "createdAt": "2020-03-02T08:59:28Z", "commit": {"oid": "76e3b9d6e1167c98fd1ce73fcc4decd032e541aa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwODo1OToyOFrOFwXs6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwODo1OToyOFrOFwXs6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI2NDI5Nw==", "bodyText": "Can't we create many arrays with this change if there are high partition counts? Maybe we should calculate the size upfront.", "url": "https://github.com/hazelcast/hazelcast/pull/16683#discussion_r386264297", "createdAt": "2020-03-02T08:59:28Z", "author": {"login": "blazember"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/InternalPartitionServiceImpl.java", "diffHunk": "@@ -982,7 +981,7 @@ public PartitionReplicaVersionManager getPartitionReplicaVersionManager() {\n \n     @Override\n     public List<Integer> getMemberPartitions(Address target) {\n-        List<Integer> ownedPartitions = new LinkedList<>();\n+        List<Integer> ownedPartitions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76e3b9d6e1167c98fd1ce73fcc4decd032e541aa"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9641a7d197ae2ddd2f6d744714749fab22301fc", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/a9641a7d197ae2ddd2f6d744714749fab22301fc", "committedDate": "2020-03-02T11:27:11Z", "message": "Create less objects during metrics scan"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12dfd6c986f462bbfdee3a9396c5b6eaefd61702", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/12dfd6c986f462bbfdee3a9396c5b6eaefd61702", "committedDate": "2020-03-02T11:28:37Z", "message": "address reviews"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76e3b9d6e1167c98fd1ce73fcc4decd032e541aa", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/76e3b9d6e1167c98fd1ce73fcc4decd032e541aa", "committedDate": "2020-02-27T13:35:39Z", "message": "Create less objects during metrics scan"}, "afterCommit": {"oid": "12dfd6c986f462bbfdee3a9396c5b6eaefd61702", "author": {"user": {"login": "ahmetmircik", "name": "Ahmet Mircik"}}, "url": "https://github.com/hazelcast/hazelcast/commit/12dfd6c986f462bbfdee3a9396c5b6eaefd61702", "committedDate": "2020-03-02T11:28:37Z", "message": "address reviews"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTkyMDg5", "url": "https://github.com/hazelcast/hazelcast/pull/16683#pullrequestreview-367192089", "createdAt": "2020-03-02T13:21:58Z", "commit": {"oid": "12dfd6c986f462bbfdee3a9396c5b6eaefd61702"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3832, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}