{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5Mjg5NTM4", "number": 16759, "title": "Allow to protect management operations on client protocol", "bodyText": "PRD: https://hazelcast.atlassian.net/wiki/spaces/PM/pages/2027029096\nThis PR introduces trusted interfaces concept to Management center connections. The approach extends the existing logic available in the Multicast join method configuration. Restrictions are based on the connection source IP address.\nThe feature can be enabled declaratively by specifying Cluster property or System property with the same name. This configuration method is only valid in the 4.0.z patch stream!!!\nhazelcast.xml\n<hazelcast>\n    <properties>\n        <property name=\"hazelcast.mc.trusted.interfaces\">192.168.1.*</property>\n    </properties>\n</hazelcast>\nSystem property\n-Dhazelcast.mc.trusted.interfaces=192.168.1.*\n\nUsers can also enable the feature programmatically in the ManagementCenterConfig class:\nCode\nconfig.getManagementCenterConfig().addTrustedInterface(\"192.168.1.*\");", "createdAt": "2020-03-16T14:50:38Z", "url": "https://github.com/hazelcast/hazelcast/pull/16759", "merged": true, "mergeCommit": {"oid": "efdc2e86ae0c57ea2513a29f3ebd1badaef1e32f"}, "closed": true, "closedAt": "2020-03-20T15:20:30Z", "author": {"login": "kwart"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOPRH1AH2gAyMzg5Mjg5NTM4OmY5ZTU5YjYxNmMwMDkwYjY0NDI3YjViZjRmNjQxMTQ5OThkZDRhNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPhXA2gFqTM3ODUyOTU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e", "author": {"user": {"login": "kwart", "name": "Josef Cacek"}}, "url": "https://github.com/hazelcast/hazelcast/commit/f9e59b616c0090b64427b5bf4f64114998dd4a4e", "committedDate": "2020-03-16T14:48:18Z", "message": "Allow to protect management operations on client protocol. The protection is based on client connection source IP address."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1ODY3Nzc5", "url": "https://github.com/hazelcast/hazelcast/pull/16759#pullrequestreview-375867779", "createdAt": "2020-03-17T09:32:34Z", "commit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOTozMjozNFrOF3UNNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMDoxNTo1MlrOF3VvGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0NzA2MQ==", "bodyText": "nit: typo - Child classes which implements should be Child classes which implement", "url": "https://github.com/hazelcast/hazelcast/pull/16759#discussion_r393547061", "createdAt": "2020-03-17T09:32:34Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/client/impl/protocol/task/AbstractMessageTask.java", "diffHunk": "@@ -336,4 +343,15 @@ protected Throwable peelIfNeeded(Throwable t) {\n \n         return peel(t);\n     }\n+\n+\n+    /**\n+     * The default implementation returns false. Child classes which implements a logic related to a management operation should", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU2NjgxMA==", "bodyText": "I'm not sure if we need to mark \"read metrics\" task as an MC operation and restrict the access to it when trusted interfaces config option is in use. Potentially, we may use it elsewhere, say, build a Jet source that reads IMDG metrics.\n@emre-aydin @blazember WDYT?", "url": "https://github.com/hazelcast/hazelcast/pull/16759#discussion_r393566810", "createdAt": "2020-03-17T10:06:05Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/client/impl/protocol/task/metrics/ReadMetricsMessageTask.java", "diffHunk": "@@ -97,5 +97,11 @@ public String getMethodName() {\n     public Object[] getParameters() {\n         return new Object[] {parameters.uuid, parameters.fromSequence};\n     }\n+\n+    @Override\n+    public boolean isManagementTask() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU2NzM2NQ==", "bodyText": "nit: write a javadoc instead of this empty stub.", "url": "https://github.com/hazelcast/hazelcast/pull/16759#discussion_r393567365", "createdAt": "2020-03-17T10:07:11Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/cluster/AddressChecker.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.internal.cluster;\n+\n+import com.hazelcast.cluster.Address;\n+\n+/**\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU3MjEyMw==", "bodyText": "Is this change related with the purpose of the PR? Probably, it's used somewhere, but I'd like to double check.", "url": "https://github.com/hazelcast/hazelcast/pull/16759#discussion_r393572123", "createdAt": "2020-03-17T10:15:52Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/security/ICredentialsFactory.java", "diffHunk": "@@ -50,6 +51,16 @@ default void init(Properties properties) {\n      */\n     Credentials newCredentials();\n \n+    /**\n+     * Creates new {@link Credentials} object for given target {@link Address}.\n+     *\n+     * @param address Target {@link Address} (may be {@code null})\n+     * @return\n+     */\n+    default Credentials newCredentials(Address address) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9e59b616c0090b64427b5bf4f64114998dd4a4e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c08f24480e0aa15617b33997ca5d35bf2ad2e26e", "author": {"user": {"login": "kwart", "name": "Josef Cacek"}}, "url": "https://github.com/hazelcast/hazelcast/commit/c08f24480e0aa15617b33997ca5d35bf2ad2e26e", "committedDate": "2020-03-19T14:09:31Z", "message": "cover comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79036a96da9e558386db339ecb280e7a0d2b3fe3", "author": {"user": {"login": "kwart", "name": "Josef Cacek"}}, "url": "https://github.com/hazelcast/hazelcast/commit/79036a96da9e558386db339ecb280e7a0d2b3fe3", "committedDate": "2020-03-20T07:36:26Z", "message": "AuthenticationException->AccessControlException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTI5NTY5", "url": "https://github.com/hazelcast/hazelcast/pull/16759#pullrequestreview-378529569", "createdAt": "2020-03-20T14:26:57Z", "commit": {"oid": "79036a96da9e558386db339ecb280e7a0d2b3fe3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3883, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}