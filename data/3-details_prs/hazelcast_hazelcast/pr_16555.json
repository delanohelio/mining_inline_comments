{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2ODE5NTg3", "number": 16555, "title": "Support bitmap indexes in client protocol", "bodyText": "Client protocol: hazelcast/hazelcast-client-protocol#304", "createdAt": "2020-01-24T12:43:21Z", "url": "https://github.com/hazelcast/hazelcast/pull/16555", "merged": true, "mergeCommit": {"oid": "69dc21a100cae5953a24271c81e8daca098b557d"}, "closed": true, "closedAt": "2020-01-27T10:19:36Z", "author": {"login": "taburet"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9e5wmgFqTM0Nzk0OTI4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-ZTvEgFqTM0ODUyNDkyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTQ5Mjg4", "url": "https://github.com/hazelcast/hazelcast/pull/16555#pullrequestreview-347949288", "createdAt": "2020-01-24T13:24:33Z", "commit": {"oid": "0baaf4f577e22f1028e2e9d90773c17355142b89"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTU2Mzk0", "url": "https://github.com/hazelcast/hazelcast/pull/16555#pullrequestreview-347956394", "createdAt": "2020-01-24T13:37:32Z", "commit": {"oid": "0baaf4f577e22f1028e2e9d90773c17355142b89"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMzozNzozMlrOFhd21g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMzozNzozMlrOFhd21g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDYzNjUwMg==", "bodyText": "this should have default parameters set. aString for uniqueKey and anEnum equivalent for uniqueKeyTransformation fields", "url": "https://github.com/hazelcast/hazelcast/pull/16555#discussion_r370636502", "createdAt": "2020-01-24T13:37:32Z", "author": {"login": "mdumandag"}, "path": "hazelcast/src/test/java/com/hazelcast/client/protocol/compatibility/ReferenceObjects.java", "diffHunk": "@@ -716,7 +717,8 @@ private static boolean isEqualStackTrace(StackTraceElement stackTraceElement1, S\n \n     public static ListenerConfigHolder aListenerConfigHolder = new ListenerConfigHolder(anInt, aData, aString, aBoolean, aBoolean);\n     public static AttributeConfig anAttributeConfig = new AttributeConfig(aString, aString);\n-    public static IndexConfig anIndexConfig = CustomTypeFactory.createIndexConfig(aString, anEnum, aListOfStrings);\n+    public static BitmapIndexOptions aBitmapIndexOptions = new BitmapIndexOptions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0baaf4f577e22f1028e2e9d90773c17355142b89"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MTkyMDMx", "url": "https://github.com/hazelcast/hazelcast/pull/16555#pullrequestreview-348192031", "createdAt": "2020-01-24T20:00:00Z", "commit": {"oid": "47549ff3bd4e95725048393dc8fb111c586c51d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NDg1MDg3", "url": "https://github.com/hazelcast/hazelcast/pull/16555#pullrequestreview-348485087", "createdAt": "2020-01-27T08:03:21Z", "commit": {"oid": "47549ff3bd4e95725048393dc8fb111c586c51d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwODowMzoyMlrOFh6MfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwODowMzoyMlrOFh6MfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMDc5Ng==", "bodyText": "These two lines look dangerous to me because we mutate an object which was set earlier. Consider the following code:\nIndexConfig config = new IndexConfig();\nBitmapIndexOptions options = config1.getBitmapIndexOptions();\n// ...\nconfig.setBitmapIndexOptions(<new options>);\n// \"options\" object changed unexpectedly\n\nI would rather overwrite an object in the setter and perform a lazy initialization in getter as we do in other config classes (e.g. IndexConfig.getAttributes() copies this approach).", "url": "https://github.com/hazelcast/hazelcast/pull/16555#discussion_r371100796", "createdAt": "2020-01-27T08:03:22Z", "author": {"login": "devozerov"}, "path": "hazelcast/src/main/java/com/hazelcast/config/IndexConfig.java", "diffHunk": "@@ -204,6 +204,18 @@ public BitmapIndexOptions getBitmapIndexOptions() {\n         return bitmapIndexOptions;\n     }\n \n+    /**\n+     * Sets bitmap index options of this index config to the given ones.\n+     *\n+     * @param bitmapIndexOptions the bitmap index options to set.\n+     * @return this index config instance.\n+     */\n+    public IndexConfig setBitmapIndexOptions(BitmapIndexOptions bitmapIndexOptions) {\n+        this.bitmapIndexOptions.setUniqueKey(bitmapIndexOptions.getUniqueKey());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47549ff3bd4e95725048393dc8fb111c586c51d7"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71fcb80046bfbe2322de61fc0f6cd1ea4abfc69f", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/71fcb80046bfbe2322de61fc0f6cd1ea4abfc69f", "committedDate": "2020-01-27T09:16:27Z", "message": "Support bitmap indexes in client protocol"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e9ff3bd509f36203289cd130201cc32b6ea9ba9", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5e9ff3bd509f36203289cd130201cc32b6ea9ba9", "committedDate": "2020-01-27T09:16:27Z", "message": "fix ReferenceObjects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "705e3bd5aeb89dab96ed74044d3b8954aae03011", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/705e3bd5aeb89dab96ed74044d3b8954aae03011", "committedDate": "2020-01-27T09:16:27Z", "message": "update compatibility binaries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8a8ba58dc8689bb5fa150aff2229d076413c84d", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/b8a8ba58dc8689bb5fa150aff2229d076413c84d", "committedDate": "2020-01-27T09:16:27Z", "message": "make options nullable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b5fc648547f902b03f88917670be731e69fa78", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/d5b5fc648547f902b03f88917670be731e69fa78", "committedDate": "2020-01-27T09:16:27Z", "message": "regenerate client protocol"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "656e85640ced1de138c37f08fde92b6fd624d8cf", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/656e85640ced1de138c37f08fde92b6fd624d8cf", "committedDate": "2020-01-27T09:01:48Z", "message": "make options nullable"}, "afterCommit": {"oid": "d5b5fc648547f902b03f88917670be731e69fa78", "author": {"user": {"login": "taburet", "name": "Sergey Sitnikov"}}, "url": "https://github.com/hazelcast/hazelcast/commit/d5b5fc648547f902b03f88917670be731e69fa78", "committedDate": "2020-01-27T09:16:27Z", "message": "regenerate client protocol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTI0OTI2", "url": "https://github.com/hazelcast/hazelcast/pull/16555#pullrequestreview-348524926", "createdAt": "2020-01-27T09:27:25Z", "commit": {"oid": "d5b5fc648547f902b03f88917670be731e69fa78"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3933, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}