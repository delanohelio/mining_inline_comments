{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5Mzc1NjY3", "number": 16993, "title": "Introduce major version packet flags", "bodyText": "Adds a packet flag on all outgoing packets. This is to support running a\ncluster where a member can be connected to other members of the same\nmajor version as well as have a connection to members of different major\nversions. To distinguish between the two on a Packet level, we need to\nintroduce a Packet flag. This flag should be introduced on all versions\nwhich will support migrating between 3.x and 4.x, which at this point\nmeans 3.12.8+, 4.0.2+ and 4.1.x. The flags can be removed in 4.2 which\nwill not support data migration anymore.\nBackport: #16992", "createdAt": "2020-05-18T09:30:24Z", "url": "https://github.com/hazelcast/hazelcast/pull/16993", "merged": true, "mergeCommit": {"oid": "d3b9ef7446ed7e8d0930b1408535e379ea75b212"}, "closed": true, "closedAt": "2020-05-21T09:35:25Z", "author": {"login": "mmedenjak"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcicclKAH2gAyNDE5Mzc1NjY3OjA2ZDk0MjllZGVlMzA3ZjFhYmMyZGM2NDM5MzhmMWMwYzQ0OTU1ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjHgbLgFqTQxNTI0NTE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa", "author": {"user": {"login": "mmedenjak", "name": "Matko Medenjak"}}, "url": "https://github.com/hazelcast/hazelcast/commit/06d9429edee307f1abc2dc643938f1c0c44955fa", "committedDate": "2020-05-18T09:28:04Z", "message": "Introduce major version packet flags\n\nAdds a packet flag on all outgoing packets. This is to support running a\ncluster where a member can be connected to other members of the same\nmajor version as well as have a connection to members of different major\nversions. To distinguish between the two on a Packet level, we need to\nintroduce a Packet flag. This flag should be introduced on all versions\nwhich will support migrating between 3.x and 4.x, which at this point\nmeans 3.12.8+, 4.0.2+ and 4.1.x. The flags can be removed in 4.2 which\nwill not support data migration anymore."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzcxNTU3", "url": "https://github.com/hazelcast/hazelcast/pull/16993#pullrequestreview-414371557", "createdAt": "2020-05-19T11:58:35Z", "commit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0Mzk2NTIw", "url": "https://github.com/hazelcast/hazelcast/pull/16993#pullrequestreview-414396520", "createdAt": "2020-05-19T12:32:39Z", "commit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MDIyMTg1", "url": "https://github.com/hazelcast/hazelcast/pull/16993#pullrequestreview-415022185", "createdAt": "2020-05-20T06:20:04Z", "commit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNjoyMDowNFrOGX8xBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNjoyMDowNFrOGX8xBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc2NjAyMw==", "bodyText": "All packets in a stream will be of the same version. Why is this not part of the MemberHandshake?", "url": "https://github.com/hazelcast/hazelcast/pull/16993#discussion_r427766023", "createdAt": "2020-05-20T06:20:04Z", "author": {"login": "pveentjer"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/nio/Packet.java", "diffHunk": "@@ -43,6 +43,8 @@\n     // 1. URGENT (bit 4)\n     // 2. Packet type (bits 0, 2, 5)\n     // 3. Flags specific to a given packet type (bits 1, 6)\n+    // 4. 4.x flag (bit 7)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MDIyNjIz", "url": "https://github.com/hazelcast/hazelcast/pull/16993#pullrequestreview-415022623", "createdAt": "2020-05-20T06:20:58Z", "commit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNjoyMDo1OFrOGX8ydQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNjoyMDo1OFrOGX8ydQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc2NjM4OQ==", "bodyText": "Why do we need 2 bits? One bit would be sufficient. Either it is 3.x or it is 4.0. Now you have the option to be none or both.", "url": "https://github.com/hazelcast/hazelcast/pull/16993#discussion_r427766389", "createdAt": "2020-05-20T06:20:58Z", "author": {"login": "pveentjer"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/nio/Packet.java", "diffHunk": "@@ -96,6 +98,16 @@\n      */\n     public static final int FLAG_JET_FLOW_CONTROL = 1 << 1;\n \n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06d9429edee307f1abc2dc643938f1c0c44955fa"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61b98131ff17a2a9c7d09adef7bffaaa575d64f4", "author": {"user": {"login": "mmedenjak", "name": "Matko Medenjak"}}, "url": "https://github.com/hazelcast/hazelcast/commit/61b98131ff17a2a9c7d09adef7bffaaa575d64f4", "committedDate": "2020-05-20T11:28:05Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MjQ1MTQ5", "url": "https://github.com/hazelcast/hazelcast/pull/16993#pullrequestreview-415245149", "createdAt": "2020-05-20T11:38:11Z", "commit": {"oid": "61b98131ff17a2a9c7d09adef7bffaaa575d64f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3630, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}