{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2Nzc1OTQx", "number": 17892, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMVQxMTozOToyOVrOFRYdZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQxNjo1OTo0MlrOFStAaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUzNzcwODU0OnYy", "diffSide": "RIGHT", "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMVQxMTozOToyOVrOIXyQ1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQxMDoxMDozNVrOIaP4cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTY3MQ==", "bodyText": "Can we switch to HTTPS please?", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r561811671", "createdAt": "2021-01-21T11:39:29Z", "author": {"login": "kwart"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.impl.Node;\n+import com.hazelcast.logging.ILogger;\n+import com.hazelcast.spi.properties.ClusterProperty;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.lang.System.getenv;\n+\n+/**\n+ * Pings phone home server with cluster info daily.\n+ */\n+public class PhoneHome {\n+\n+    private static final String FALSE = \"false\";\n+    private static final String DEFAULT_BASE_PHONE_HOME_URL = \"http://phonehome.hazelcast.com/ping\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7d0cc0e35d54bd4ef08d1d6376be71ae1bcda77"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzc5MjQyMA==", "bodyText": "Do we have https for the service? cc @erosb", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r563792420", "createdAt": "2021-01-25T15:04:35Z", "author": {"login": "mmedenjak"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.impl.Node;\n+import com.hazelcast.logging.ILogger;\n+import com.hazelcast.spi.properties.ClusterProperty;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.lang.System.getenv;\n+\n+/**\n+ * Pings phone home server with cluster info daily.\n+ */\n+public class PhoneHome {\n+\n+    private static final String FALSE = \"false\";\n+    private static final String DEFAULT_BASE_PHONE_HOME_URL = \"http://phonehome.hazelcast.com/ping\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTY3MQ=="}, "originalCommit": {"oid": "c7d0cc0e35d54bd4ef08d1d6376be71ae1bcda77"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDMxNzg3Nw==", "bodyText": "AFAIK we currently don't have it. We can handle it separately. We can force redirect to https once that's done for older IMDG versions.", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r564317877", "createdAt": "2021-01-26T08:13:01Z", "author": {"login": "emre-aydin"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.impl.Node;\n+import com.hazelcast.logging.ILogger;\n+import com.hazelcast.spi.properties.ClusterProperty;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.lang.System.getenv;\n+\n+/**\n+ * Pings phone home server with cluster info daily.\n+ */\n+public class PhoneHome {\n+\n+    private static final String FALSE = \"false\";\n+    private static final String DEFAULT_BASE_PHONE_HOME_URL = \"http://phonehome.hazelcast.com/ping\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTY3MQ=="}, "originalCommit": {"oid": "c7d0cc0e35d54bd4ef08d1d6376be71ae1bcda77"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDMyNDM0MA==", "bodyText": "I would like to see it resolved before merging this PR. We shouldn't leak even more info about users environment.\nWe can start with both endpoints available (http, https) - i.e. no redirect is needed, but new Hazelcast releases should go to the encrypted one.", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r564324340", "createdAt": "2021-01-26T08:24:25Z", "author": {"login": "kwart"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.impl.Node;\n+import com.hazelcast.logging.ILogger;\n+import com.hazelcast.spi.properties.ClusterProperty;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.lang.System.getenv;\n+\n+/**\n+ * Pings phone home server with cluster info daily.\n+ */\n+public class PhoneHome {\n+\n+    private static final String FALSE = \"false\";\n+    private static final String DEFAULT_BASE_PHONE_HOME_URL = \"http://phonehome.hazelcast.com/ping\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTY3MQ=="}, "originalCommit": {"oid": "c7d0cc0e35d54bd4ef08d1d6376be71ae1bcda77"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDM5NDA5Ng==", "bodyText": "I created a callhome issue to track this: hazelcast/callhome#35", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r564394096", "createdAt": "2021-01-26T10:10:35Z", "author": {"login": "erosb"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/PhoneHome.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.impl.Node;\n+import com.hazelcast.logging.ILogger;\n+import com.hazelcast.spi.properties.ClusterProperty;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import static java.lang.System.getenv;\n+\n+/**\n+ * Pings phone home server with cluster info daily.\n+ */\n+public class PhoneHome {\n+\n+    private static final String FALSE = \"false\";\n+    private static final String DEFAULT_BASE_PHONE_HOME_URL = \"http://phonehome.hazelcast.com/ping\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTY3MQ=="}, "originalCommit": {"oid": "c7d0cc0e35d54bd4ef08d1d6376be71ae1bcda77"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU1MTU2MDczOnYy", "diffSide": "RIGHT", "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/BuildInfoCollector.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQxNjo1OTo0MlrOIZwt6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQxMDoyMzo0MVrOIaQZZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg4MzQ5OA==", "bodyText": "Why doesn't CLIENT_ENDPOINT_COUNT go to the ClientInfoCollector?", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r563883498", "createdAt": "2021-01-25T16:59:42Z", "author": {"login": "mmedenjak"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/BuildInfoCollector.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.BuildInfo;\n+import com.hazelcast.instance.BuildInfoProvider;\n+import com.hazelcast.instance.JetBuildInfo;\n+import com.hazelcast.instance.impl.Node;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import static com.hazelcast.internal.nio.IOUtil.closeResource;\n+import static com.hazelcast.internal.util.EmptyStatement.ignore;\n+\n+class BuildInfoCollector implements MetricsCollector {\n+\n+    @Override\n+    public Map<PhoneHomeMetrics, String> computeMetrics(Node hazelcastNode) {\n+        BuildInfo build = BuildInfoProvider.getBuildInfo();\n+        Map<PhoneHomeMetrics, String> buildInfo = new HashMap<>();\n+        JetBuildInfo jetBuildInfo = hazelcastNode.getBuildInfo().getJetBuildInfo();\n+        buildInfo.put(PhoneHomeMetrics.HAZELCAST_DOWNLOAD_ID, getDownloadId());\n+        buildInfo.put(PhoneHomeMetrics.CLIENT_ENDPOINT_COUNT,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ee9ea21fcb2c6bf33aca79687827bbad94ac686"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDQwMjUzNQ==", "bodyText": "Good point, I moved it to ClientInfoCollector in fce44b3", "url": "https://github.com/hazelcast/hazelcast/pull/17892#discussion_r564402535", "createdAt": "2021-01-26T10:23:41Z", "author": {"login": "erosb"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/BuildInfoCollector.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.hazelcast.internal.util.phonehome;\n+\n+import com.hazelcast.instance.BuildInfo;\n+import com.hazelcast.instance.BuildInfoProvider;\n+import com.hazelcast.instance.JetBuildInfo;\n+import com.hazelcast.instance.impl.Node;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import static com.hazelcast.internal.nio.IOUtil.closeResource;\n+import static com.hazelcast.internal.util.EmptyStatement.ignore;\n+\n+class BuildInfoCollector implements MetricsCollector {\n+\n+    @Override\n+    public Map<PhoneHomeMetrics, String> computeMetrics(Node hazelcastNode) {\n+        BuildInfo build = BuildInfoProvider.getBuildInfo();\n+        Map<PhoneHomeMetrics, String> buildInfo = new HashMap<>();\n+        JetBuildInfo jetBuildInfo = hazelcastNode.getBuildInfo().getJetBuildInfo();\n+        buildInfo.put(PhoneHomeMetrics.HAZELCAST_DOWNLOAD_ID, getDownloadId());\n+        buildInfo.put(PhoneHomeMetrics.CLIENT_ENDPOINT_COUNT,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg4MzQ5OA=="}, "originalCommit": {"oid": "7ee9ea21fcb2c6bf33aca79687827bbad94ac686"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 107, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}