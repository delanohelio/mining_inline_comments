{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTY3Njk3", "number": 17948, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxMjoxMFrOFC5E8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxMjoxMFrOFC5E8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NTc2NjI2OnYy", "diffSide": "RIGHT", "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/PartitionStateManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxMjoxMFrOICRg1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNToxODoxNFrOICZ_mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI1NDk5OQ==", "bodyText": "could this version comparison be removed  also?--> newVersion.isEqualTo(Versions.V4_1)", "url": "https://github.com/hazelcast/hazelcast/pull/17948#discussion_r539254999", "createdAt": "2020-12-09T12:12:10Z", "author": {"login": "ahmetmircik"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/PartitionStateManager.java", "diffHunk": "@@ -464,18 +428,13 @@ int replaceMember(Member oldMember, Member newMember) {\n     }\n \n     PartitionTableView getPartitionTable() {\n-        int version = 0;\n-        if (node.getClusterService().getClusterVersion().isUnknownOrLessOrEqual(Versions.V4_0)) {\n-            //RU_COMPAT_4_0\n-            version = getVersion();\n-        }\n-        return new PartitionTableView(getPartitionsCopy(true), version);\n+        return new PartitionTableView(getPartitionsCopy(true));\n     }\n \n     @Override\n     public void onClusterVersionChange(Version newVersion) {\n         if (newVersion.isEqualTo(Versions.V4_1) && initialized) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTM5Mzk0Ng==", "bodyText": "good catch, PartitionStateManager and InternalPartitionServiceImpl listened for cluster version changes in order to initialize partition versions on transition from 4.0 to 4.1 cluster version. This is no longer necessary as 4.2 members can only partitipate in 4.1 / 4.2 clusters -> partition version is already initialized before a 4.2 member can join the cluster.", "url": "https://github.com/hazelcast/hazelcast/pull/17948#discussion_r539393946", "createdAt": "2020-12-09T15:18:14Z", "author": {"login": "vbekiaris"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/partition/impl/PartitionStateManager.java", "diffHunk": "@@ -464,18 +428,13 @@ int replaceMember(Member oldMember, Member newMember) {\n     }\n \n     PartitionTableView getPartitionTable() {\n-        int version = 0;\n-        if (node.getClusterService().getClusterVersion().isUnknownOrLessOrEqual(Versions.V4_0)) {\n-            //RU_COMPAT_4_0\n-            version = getVersion();\n-        }\n-        return new PartitionTableView(getPartitionsCopy(true), version);\n+        return new PartitionTableView(getPartitionsCopy(true));\n     }\n \n     @Override\n     public void onClusterVersionChange(Version newVersion) {\n         if (newVersion.isEqualTo(Versions.V4_1) && initialized) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI1NDk5OQ=="}, "originalCommit": {"oid": "a922faa304be9fa847d0e49b579973fccaa56b15"}, "originalPosition": 93}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4998, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}