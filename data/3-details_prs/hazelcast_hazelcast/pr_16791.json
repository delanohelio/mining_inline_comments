{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDY1NzI2", "number": 16791, "title": "Create separate buffer pool for each SerializationService", "bodyText": "Creating separate buffer pool for each SerializationService so buffers retain reference to proper service.", "createdAt": "2020-03-23T15:44:16Z", "url": "https://github.com/hazelcast/hazelcast/pull/16791", "merged": true, "mergeCommit": {"oid": "f6dd1321ab5f1f95c9dab5b8f27528016e6bb0d2"}, "closed": true, "closedAt": "2020-03-25T12:22:19Z", "author": {"login": "gierlachg"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQgPA_AH2gAyMzkyNDY1NzI2OmJhYjRhYmZiODhmMjZkYzhlY2JhNzQyYjBhMmM2OTk3NjcyYWQwZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRGDjDAFqTM4MTA3MzI1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bab4abfb88f26dc8ecba742b0a2c6997672ad0e1", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast/commit/bab4abfb88f26dc8ecba742b0a2c6997672ad0e1", "committedDate": "2020-03-23T15:42:14Z", "message": "Create separate buffer pool for each SerializationService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NTY3ODMx", "url": "https://github.com/hazelcast/hazelcast/pull/16791#pullrequestreview-379567831", "createdAt": "2020-03-23T15:54:56Z", "commit": {"oid": "bab4abfb88f26dc8ecba742b0a2c6997672ad0e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNTo1NDo1NlrOF6MBHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNTo1NDo1NlrOF6MBHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU1ODYyMg==", "bodyText": "If you expect to use this constructor only from member side, then HazelcastInstanceNotActiveException::new is fine. However if this constructor is to be used also by Jet client-side, then you should rather use whichever notActiveExceptionSupplier was used to construct the prototype service.", "url": "https://github.com/hazelcast/hazelcast/pull/16791#discussion_r396558622", "createdAt": "2020-03-23T15:54:56Z", "author": {"login": "vbekiaris"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/AbstractSerializationService.java", "diffHunk": "@@ -100,15 +101,17 @@\n         this.nullSerializerAdapter = createSerializerAdapter(new ConstantSerializers.NullSerializer());\n     }\n \n+    // used by jet\n     protected AbstractSerializationService(AbstractSerializationService prototype) {\n         this.version = prototype.version;\n         this.inputOutputFactory = prototype.inputOutputFactory;\n         this.classLoader = prototype.classLoader;\n         this.managedContext = prototype.managedContext;\n         this.globalPartitioningStrategy = prototype.globalPartitioningStrategy;\n         this.outputBufferSize = prototype.outputBufferSize;\n-        this.bufferPoolThreadLocal = prototype.bufferPoolThreadLocal;\n         this.nullSerializerAdapter = prototype.nullSerializerAdapter;\n+        this.bufferPoolThreadLocal = new BufferPoolThreadLocal(this, new BufferPoolFactoryImpl(),\n+                HazelcastInstanceNotActiveException::new);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab4abfb88f26dc8ecba742b0a2c6997672ad0e1"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc44d7f9292824e6d9fe654910706be5c85c1d79", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast/commit/dc44d7f9292824e6d9fe654910706be5c85c1d79", "committedDate": "2020-03-24T08:58:04Z", "message": "Merge branch 'master' into ass_buffer_pool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9674a954c66906bffcf442afe075e49c8fd096a2", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast/commit/9674a954c66906bffcf442afe075e49c8fd096a2", "committedDate": "2020-03-25T11:24:50Z", "message": "Use NotActiveExceptionSupplier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMDYyODY1", "url": "https://github.com/hazelcast/hazelcast/pull/16791#pullrequestreview-381062865", "createdAt": "2020-03-25T11:29:59Z", "commit": {"oid": "9674a954c66906bffcf442afe075e49c8fd096a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMDczMjUw", "url": "https://github.com/hazelcast/hazelcast/pull/16791#pullrequestreview-381073250", "createdAt": "2020-03-25T11:46:06Z", "commit": {"oid": "9674a954c66906bffcf442afe075e49c8fd096a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3909, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}