{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDc2NTg3", "number": 16774, "title": "exposed executor creation time metric", "bodyText": "added creation time to executor jmx bean\nannotated creationTime field with Probe\n\nenhancement that allow MC correctly handle situation when user requests executor metrics since its creation.\nsee https://github.com/hazelcast/management-center/issues/2920 for more details", "createdAt": "2020-03-18T14:40:52Z", "url": "https://github.com/hazelcast/hazelcast/pull/16774", "merged": true, "mergeCommit": {"oid": "98bdabbf69c293eb6488a866ca4f5162010aefb1"}, "closed": true, "closedAt": "2020-03-19T09:29:56Z", "author": {"login": "alex-dukhno"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO4RNPAH2gAyMzkwNDc2NTg3OmFhYWZiMDI1MzlmMTJhYjU2NDdmNmQ5OTI4YmRmNDJlYzlmODUzNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPHHoYgFqTM3NzQ4Njk2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372", "author": {"user": {"login": "alex-dukhno", "name": "Alex Dukhno"}}, "url": "https://github.com/hazelcast/hazelcast/commit/aaafb02539f12ab5647f6d9928bdf42ec9f85372", "committedDate": "2020-03-18T14:34:30Z", "message": "exposed executor creation time metric\n\n* added creation time to executor jmx bean\n* annotated creationTime field with Probe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2OTgxMjcz", "url": "https://github.com/hazelcast/hazelcast/pull/16774#pullrequestreview-376981273", "createdAt": "2020-03-18T15:33:14Z", "commit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDIwMTY0", "url": "https://github.com/hazelcast/hazelcast/pull/16774#pullrequestreview-377420164", "createdAt": "2020-03-19T04:42:29Z", "commit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDo0MjoyOVrOF4f6xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDo1MTo0N1rOF4gD-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4NzUyNg==", "bodyText": "It's better to rename this method to #getLocalCreationTime for the sake of consistency with other methods from this bean.", "url": "https://github.com/hazelcast/hazelcast/pull/16774#discussion_r394787526", "createdAt": "2020-03-19T04:42:29Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/jmx/ExecutorServiceMBean.java", "diffHunk": "@@ -29,6 +29,12 @@ protected ExecutorServiceMBean(IExecutorService managedObject, ManagementService\n         this.objectName = service.createObjectName(\"IExecutorService\", managedObject.getName());\n     }\n \n+    @ManagedAnnotation(\"localCreationTime\")\n+    @ManagedDescription(\"the creation time of this executor on this member.\")\n+    public long getCreationTime() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4NzczMw==", "bodyText": "nit: remove the trailing dot (it's not used in descriptions for other fields here)", "url": "https://github.com/hazelcast/hazelcast/pull/16774#discussion_r394787733", "createdAt": "2020-03-19T04:43:13Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/jmx/ExecutorServiceMBean.java", "diffHunk": "@@ -29,6 +29,12 @@ protected ExecutorServiceMBean(IExecutorService managedObject, ManagementService\n         this.objectName = service.createObjectName(\"IExecutorService\", managedObject.getName());\n     }\n \n+    @ManagedAnnotation(\"localCreationTime\")\n+    @ManagedDescription(\"the creation time of this executor on this member.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4OTg4Mg==", "bodyText": "This field has to be marked as volatile or final in order to guarantee safe publication.\n@blazember I can see that we use volatile for the same field in LocalMapStatsImpl, but not in LocalQueueStatsImpl, or LocalTopicStatsImpl, or LocalPNCounterStatsImpl, or many other stats classes. It looks like incorrect concurrent code to me. Maybe I'm missing something. Do you happen to know the reason for this?", "url": "https://github.com/hazelcast/hazelcast/pull/16774#discussion_r394789882", "createdAt": "2020-03-19T04:51:47Z", "author": {"login": "puzpuzpuz"}, "path": "hazelcast/src/main/java/com/hazelcast/internal/monitor/impl/LocalExecutorStatsImpl.java", "diffHunk": "@@ -47,6 +48,8 @@\n             .newUpdater(LocalExecutorStatsImpl.class, \"totalStartLatency\");\n     private static final AtomicLongFieldUpdater<LocalExecutorStatsImpl> TOTAL_EXECUTION_TIME = AtomicLongFieldUpdater\n             .newUpdater(LocalExecutorStatsImpl.class, \"totalExecutionTime\");\n+\n+    @Probe(name = EXECUTOR_METRIC_CREATION_TIME, unit = MS)\n     private long creationTime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaafb02539f12ab5647f6d9928bdf42ec9f85372"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b23e8ed005d395e60151d3ce3154a69a7356779", "author": {"user": {"login": "alex-dukhno", "name": "Alex Dukhno"}}, "url": "https://github.com/hazelcast/hazelcast/commit/5b23e8ed005d395e60151d3ce3154a69a7356779", "committedDate": "2020-03-19T07:48:03Z", "message": "address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDg2OTYz", "url": "https://github.com/hazelcast/hazelcast/pull/16774#pullrequestreview-377486963", "createdAt": "2020-03-19T07:52:37Z", "commit": {"oid": "5b23e8ed005d395e60151d3ce3154a69a7356779"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3892, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}