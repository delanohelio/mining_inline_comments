{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMzg4MTc0", "number": 2678, "title": "1812110: Expose artemis port with SELinux boolean; ENT-2190", "bodyText": "", "createdAt": "2020-04-09T12:12:24Z", "url": "https://github.com/candlepin/candlepin/pull/2678", "merged": true, "mergeCommit": {"oid": "92ba2b7ff62e426f21024ab21be76f5d58b7340b"}, "closed": true, "closedAt": "2020-04-15T13:05:17Z", "author": {"login": "nikosmoum"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV74JUgFqTM5MDc1NzA4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXlPR3gFqTM5MzA0NDE0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzU3MDg1", "url": "https://github.com/candlepin/candlepin/pull/2678#pullrequestreview-390757085", "createdAt": "2020-04-09T12:44:13Z", "commit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NDoxM1rOGDXEpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NDoxM1rOGDXEpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NjkzMg==", "bodyText": "Do we want to define the port as a variable somewhere so it's not hard coded? Is that even a thing we can do?", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406176932", "createdAt": "2020-04-09T12:44:13Z", "author": {"login": "Ceiu"}, "path": "server/candlepin.spec.tmpl", "diffHunk": "@@ -170,6 +172,7 @@ for selinuxvariant in %{selinux_variants}\n do\n   /usr/sbin/semodule -s $selinuxvariant -i %{_datadir}/selinux/$selinuxvariant/%{modulename}.pp &> /dev/null || :\n done\n+/usr/sbin/semanage port -a -t candlepin_activemq_port_t -p tcp 61613 &> /dev/null || :", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzU4MDM5", "url": "https://github.com/candlepin/candlepin/pull/2678#pullrequestreview-390758039", "createdAt": "2020-04-09T12:45:37Z", "commit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NTozN1rOGDXHfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Njo1MFrOGDXKBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NzY2Mg==", "bodyText": "Indentation is a bit wonky here", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406177662", "createdAt": "2020-04-09T12:45:37Z", "author": {"login": "Ceiu"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -1,10 +1,19 @@\n-policy_module(candlepin, 1.0.0)\n+policy_module(candlepin, 1.1.0)\n \n ########################################\n #\n # Declarations\n #\n \n+## <desc>\n+##      <p>\n+##\t    Allow tomcat to bind to the port used\n+##\t    by candlepin's embedded activemq artemis,\n+##\t    labeled candlepin_activemq_port_t\n+##\t    </p>\n+## </desc>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3ODMxMQ==", "bodyText": "Indentation again. Looks like a tab instead of spaces?", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406178311", "createdAt": "2020-04-09T12:46:50Z", "author": {"login": "Ceiu"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -103,3 +115,7 @@ allow tomcat_t candlepin_var_lib_t:file { manage_file_perms };\n allow tomcat_t candlepin_var_log_t:dir { manage_dir_perms };\n allow tomcat_t candlepin_var_log_t:file { manage_file_perms };\n allow tomcat_t postgresql_port_t:tcp_socket name_connect;\n+\n+tunable_policy(`candlepin_can_bind_activemq_port',`\n+\tallow tomcat_t candlepin_activemq_port_t:tcp_socket name_bind;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/fa1ddb879d350ada833c7005ec5f7fe184b4af57", "committedDate": "2020-04-09T12:10:13Z", "message": "1812110: Expose artemis port with SELinux boolean\n\n- Declare SELinux boolean 'candlepin_can_bind_activemq_port'\n  (that is by default off), which allows tomcat to bind to\n  port 61613 (declared as 'candlepin_activemq_port_t') when\n  turned on."}, "afterCommit": {"oid": "a820b16e8249f15fe39379c0a6aa4808df37b167", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/a820b16e8249f15fe39379c0a6aa4808df37b167", "committedDate": "2020-04-09T14:31:43Z", "message": "1812110: Expose artemis port with SELinux boolean\n\n- Declare SELinux boolean 'candlepin_can_bind_activemq_port'\n  (that is by default off), which allows tomcat to bind to\n  port 61613 (declared as 'candlepin_activemq_port_t') when\n  turned on."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "440c5ac49c08d8c574c81552ea2b8e7367cb3cdc", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/440c5ac49c08d8c574c81552ea2b8e7367cb3cdc", "committedDate": "2020-04-09T14:45:24Z", "message": "1812110: Expose artemis port with SELinux boolean\n\n- Declare SELinux boolean 'candlepin_can_bind_activemq_port'\n  (that is by default off), which allows tomcat to bind to\n  port 61613 (declared as 'candlepin_activemq_port_t') when\n  turned on."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a820b16e8249f15fe39379c0a6aa4808df37b167", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/a820b16e8249f15fe39379c0a6aa4808df37b167", "committedDate": "2020-04-09T14:31:43Z", "message": "1812110: Expose artemis port with SELinux boolean\n\n- Declare SELinux boolean 'candlepin_can_bind_activemq_port'\n  (that is by default off), which allows tomcat to bind to\n  port 61613 (declared as 'candlepin_activemq_port_t') when\n  turned on."}, "afterCommit": {"oid": "440c5ac49c08d8c574c81552ea2b8e7367cb3cdc", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/440c5ac49c08d8c574c81552ea2b8e7367cb3cdc", "committedDate": "2020-04-09T14:45:24Z", "message": "1812110: Expose artemis port with SELinux boolean\n\n- Declare SELinux boolean 'candlepin_can_bind_activemq_port'\n  (that is by default off), which allows tomcat to bind to\n  port 61613 (declared as 'candlepin_activemq_port_t') when\n  turned on."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMDQ0MTQz", "url": "https://github.com/candlepin/candlepin/pull/2678#pullrequestreview-393044143", "createdAt": "2020-04-14T15:29:31Z", "commit": {"oid": "440c5ac49c08d8c574c81552ea2b8e7367cb3cdc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2369, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}