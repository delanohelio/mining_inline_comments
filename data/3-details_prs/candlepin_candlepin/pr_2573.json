{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzODYzOTY5", "number": 2573, "title": "[M] Converted ConsumerTypeResource to the OpenAPI specification (ENT-1868)", "bodyText": "Created new specifications for the consumer type resource and\nAPI DTO\nUpdated ConsumerTypeResource to adhere to the generated API\nspecification\nRemoved the existing API ConsumerTypeDTO", "createdAt": "2020-01-16T21:50:23Z", "url": "https://github.com/candlepin/candlepin/pull/2573", "merged": true, "mergeCommit": {"oid": "9fd062e7097f504dc897137082f97a9312ebb628"}, "closed": true, "closedAt": "2020-01-28T16:03:14Z", "author": {"login": "Ceiu"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8Q5OJABqjI5NjM4NjkzNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-yYp6gFqTM0OTQyNTQzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b120dee4dd5adacd8fe04f1540948fae50465b03", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/b120dee4dd5adacd8fe04f1540948fae50465b03", "committedDate": "2020-01-16T21:47:43Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification"}, "afterCommit": {"oid": "6535eb8c1bf3f8b08fb4853347b01420eac21ba5", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/6535eb8c1bf3f8b08fb4853347b01420eac21ba5", "committedDate": "2020-01-20T18:28:44Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6535eb8c1bf3f8b08fb4853347b01420eac21ba5", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/6535eb8c1bf3f8b08fb4853347b01420eac21ba5", "committedDate": "2020-01-20T18:28:44Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}, "afterCommit": {"oid": "7c7ea308b5e63ba88d876afaaf9465a0abfd64f2", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/7c7ea308b5e63ba88d876afaaf9465a0abfd64f2", "committedDate": "2020-01-20T19:12:43Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDEyMTg2", "url": "https://github.com/candlepin/candlepin/pull/2573#pullrequestreview-347412186", "createdAt": "2020-01-23T15:59:01Z", "commit": {"oid": "7c7ea308b5e63ba88d876afaaf9465a0abfd64f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNTo1OTowMVrOFhDiGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNTo1OTowMVrOFhDiGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNTIxMA==", "bodyText": "So, we don't get a clone method??? This looks tedious.", "url": "https://github.com/candlepin/candlepin/pull/2573#discussion_r370205210", "createdAt": "2020-01-23T15:59:01Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/ImportUpstreamConsumerDTO.java", "diffHunk": "@@ -205,7 +205,17 @@ public ImportUpstreamConsumerDTO clone() {\n         ImportUpstreamConsumerDTO copy = super.clone();\n \n         ConsumerTypeDTO type = this.getConsumerType();\n-        copy.setConsumerType(type != null ? (ConsumerTypeDTO) type.clone() : null);\n+        if (type != null) {\n+            copy.setConsumerType(new ConsumerTypeDTO()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c7ea308b5e63ba88d876afaaf9465a0abfd64f2"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c7ea308b5e63ba88d876afaaf9465a0abfd64f2", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/7c7ea308b5e63ba88d876afaaf9465a0abfd64f2", "committedDate": "2020-01-20T19:12:43Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}, "afterCommit": {"oid": "6771a5b49715530112014997dc6f8b24bcf66059", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/6771a5b49715530112014997dc6f8b24bcf66059", "committedDate": "2020-01-24T18:54:54Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6771a5b49715530112014997dc6f8b24bcf66059", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/6771a5b49715530112014997dc6f8b24bcf66059", "committedDate": "2020-01-24T18:54:54Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}, "afterCommit": {"oid": "bf9790c43e64e7d2c7d4109dc32c15782c16cfae", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/bf9790c43e64e7d2c7d4109dc32c15782c16cfae", "committedDate": "2020-01-24T21:35:56Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf9790c43e64e7d2c7d4109dc32c15782c16cfae", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/bf9790c43e64e7d2c7d4109dc32c15782c16cfae", "committedDate": "2020-01-24T21:35:56Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO"}, "afterCommit": {"oid": "0140e66908011dd48b0b82c26234f40a1d4deeea", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/0140e66908011dd48b0b82c26234f40a1d4deeea", "committedDate": "2020-01-27T21:31:59Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0140e66908011dd48b0b82c26234f40a1d4deeea", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/0140e66908011dd48b0b82c26234f40a1d4deeea", "committedDate": "2020-01-27T21:31:59Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}, "afterCommit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7", "committedDate": "2020-01-27T21:53:55Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzYzMDU4", "url": "https://github.com/candlepin/candlepin/pull/2573#pullrequestreview-349363058", "createdAt": "2020-01-28T13:15:50Z", "commit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMzoxNTo1MVrOFikg9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMzoyMjoyNVrOFikujw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc5NDE2Ng==", "bodyText": "What happens when ConsumerDTO.java gets deleted and gets defined in the yaml file? Is there a way to specify custom field se/deserializers for openapi-defined entities?", "url": "https://github.com/candlepin/candlepin/pull/2573#discussion_r371794166", "createdAt": "2020-01-28T13:15:51Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/ConsumerDTO.java", "diffHunk": "@@ -788,6 +789,7 @@ public ConsumerTypeDTO getType() {\n      *\n      * @return a reference to this DTO object.\n      */\n+    @JsonDeserialize(using = ConsumerTypeDeserializer.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc5NTIyMg==", "bodyText": "The comment should get updated to reflect the new class", "url": "https://github.com/candlepin/candlepin/pull/2573#discussion_r371795222", "createdAt": "2020-01-28T13:17:54Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/jackson/ConsumerTypeDeserializer.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package org.candlepin.jackson;\n+\n+import org.candlepin.common.exceptions.CandlepinJsonProcessingException;\n+import org.candlepin.dto.api.v1.ConsumerTypeDTO;\n+import org.candlepin.model.ConsumerType.ConsumerTypeEnum;\n+\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+\n+\n+\n+/**\n+ * The CandlepinAttributeDeserializer handles the deserialization of attributes, processing both", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc5NzY0Nw==", "bodyText": "These should be removed probably", "url": "https://github.com/candlepin/candlepin/pull/2573#discussion_r371797647", "createdAt": "2020-01-28T13:22:25Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/jackson/ConsumerTypeDeserializer.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package org.candlepin.jackson;\n+\n+import org.candlepin.common.exceptions.CandlepinJsonProcessingException;\n+import org.candlepin.dto.api.v1.ConsumerTypeDTO;\n+import org.candlepin.model.ConsumerType.ConsumerTypeEnum;\n+\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+\n+\n+\n+/**\n+ * The CandlepinAttributeDeserializer handles the deserialization of attributes, processing both\n+ * the current attribute mapping style and obsoleted formats.\n+ */\n+public class ConsumerTypeDeserializer extends StdDeserializer<ConsumerTypeDTO> {\n+    private static Logger log = LoggerFactory.getLogger(ConsumerTypeDeserializer.class);\n+\n+    public ConsumerTypeDeserializer() {\n+        this(null);\n+    }\n+\n+    public ConsumerTypeDeserializer(Class<?> valueClass) {\n+        super(valueClass);\n+    }\n+\n+    @Override\n+    public ConsumerTypeDTO deserialize(JsonParser parser, DeserializationContext context)\n+        throws IOException, JsonProcessingException {\n+\n+        // TreeNode node = parser.readValueAsTree();\n+\n+        // log.debug(\"DESERIALIZING CONSUMER TYPE. TREENODE: {}\", node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01da3fc08f168f444bf58c5d5456d5ec09280afb", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/01da3fc08f168f444bf58c5d5456d5ec09280afb", "committedDate": "2020-01-28T13:30:52Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/740a4021fc51ac5b5cdb5b3eec7e9eca4b6f4cb7", "committedDate": "2020-01-27T21:53:55Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}, "afterCommit": {"oid": "01da3fc08f168f444bf58c5d5456d5ec09280afb", "author": {"user": {"login": "Ceiu", "name": "Chris \"Ceiu\" Rog"}}, "url": "https://github.com/candlepin/candlepin/commit/01da3fc08f168f444bf58c5d5456d5ec09280afb", "committedDate": "2020-01-28T13:30:52Z", "message": "Converted ConsumerTypeResource to the OpenAPI specification\n\n- Created new specifications for the consumer type resource and\n  API DTO\n- Updated ConsumerTypeResource to adhere to the generated API\n  specification\n- Removed the existing API ConsumerTypeDTO\n- Added a custom deserializer for ConsumerType"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NDI1NDMw", "url": "https://github.com/candlepin/candlepin/pull/2573#pullrequestreview-349425430", "createdAt": "2020-01-28T14:40:25Z", "commit": {"oid": "01da3fc08f168f444bf58c5d5456d5ec09280afb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2455, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}