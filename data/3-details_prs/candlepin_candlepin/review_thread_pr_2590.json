{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NTkwODE2", "number": 2590, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxMjo0NzowNlrODb5s4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxMjo0NzowNlrODb5s4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNTgzNTIwOnYy", "diffSide": "RIGHT", "path": "server/spec/hypervisor_check_in_spec.rb", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxMjo0NzowNlrOFjpsMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTo0MTo1MVrOFjvrnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkyNzUzNg==", "bodyText": "Replacing the first assertion with this is ok, but we should probably not remove the other 2 assertions (with report {} and {hypervisors:[]}.", "url": "https://github.com/candlepin/candlepin/pull/2590#discussion_r372927536", "createdAt": "2020-01-30T12:47:06Z", "author": {"login": "nikosmoum"}, "path": "server/spec/hypervisor_check_in_spec.rb", "diffHunk": "@@ -1201,18 +1208,10 @@ def create_virtwho_client(user)\n         ],\n         \"facts\" => {\"test_fact\" => \"fact_value\" }\n     }\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FAILED\"\n-\n-    # empty json\n-    report = {}\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FAILED\"\n-\n-    # this is the correct version of an empy list of hypervisors\n-    report = {hypervisors:[]}\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FINISHED\"\n+    virtwho = create_virtwho_client(@user)\n+    lambda do\n+      virtwho.hypervisor_update(@owner['key'], report.to_json())\n+    end.should raise_exception(RestClient::BadRequest)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e83236c46720738cdbd4268422a3350fc9e224b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyNTY5Mg==", "bodyText": "Done.", "url": "https://github.com/candlepin/candlepin/pull/2590#discussion_r373025692", "createdAt": "2020-01-30T15:41:51Z", "author": {"login": "abhiskum"}, "path": "server/spec/hypervisor_check_in_spec.rb", "diffHunk": "@@ -1201,18 +1208,10 @@ def create_virtwho_client(user)\n         ],\n         \"facts\" => {\"test_fact\" => \"fact_value\" }\n     }\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FAILED\"\n-\n-    # empty json\n-    report = {}\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FAILED\"\n-\n-    # this is the correct version of an empy list of hypervisors\n-    report = {hypervisors:[]}\n-    job_detail = send_host_guest_mapping(owner, user, report.to_json())\n-    job_detail[\"state\"].should == \"FINISHED\"\n+    virtwho = create_virtwho_client(@user)\n+    lambda do\n+      virtwho.hypervisor_update(@owner['key'], report.to_json())\n+    end.should raise_exception(RestClient::BadRequest)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkyNzUzNg=="}, "originalCommit": {"oid": "6e83236c46720738cdbd4268422a3350fc9e224b"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4271, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}