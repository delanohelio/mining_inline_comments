{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2OTIwMzM4", "number": 2584, "title": "[F] ENT-1855: Port CertificateSerialDTO to openapi spec", "bodyText": "Add custom deserializer for OffsetDateTime that\nsupports ISO 8601 dates with optional offset, millis, or time.\nAdd custom serializer for OffsetDateTime that cuts off millis and\nconverts to UTC using the offset.", "createdAt": "2020-01-24T16:37:38Z", "url": "https://github.com/candlepin/candlepin/pull/2584", "merged": true, "mergeCommit": {"oid": "6fbd009b49119bcd12d7f1ca8c5ac64f442797eb"}, "closed": true, "closedAt": "2020-02-03T03:34:15Z", "author": {"login": "nikosmoum"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9kmbeAFqTM0ODE5MzUzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_vINoABqjI5OTcwNjgyNTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MTkzNTMx", "url": "https://github.com/candlepin/candlepin/pull/2584#pullrequestreview-348193531", "createdAt": "2020-01-24T20:02:52Z", "commit": {"oid": "f68ec46c4857a5b4672339669a67b41655a45ad9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMDowMjo1MlrOFho-Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMDowMjo1MlrOFho-Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDgxODY2Mg==", "bodyText": "I wonder if it'd be worth the effort (and if it's even possible) to update the entities to use LocalDate as well. While this translation works, I don't know how keen I am to be doing that everywhere.", "url": "https://github.com/candlepin/candlepin/pull/2584#discussion_r370818662", "createdAt": "2020-01-24T20:02:52Z", "author": {"login": "Ceiu"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/CertificateSerialTranslator.java", "diffHunk": "@@ -56,14 +61,26 @@ public CertificateSerialDTO populate(CertificateSerial source, CertificateSerial\n     @Override\n     public CertificateSerialDTO populate(ModelTranslator translator, CertificateSerial source,\n         CertificateSerialDTO dest) {\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n \n-        dest = super.populate(translator, source, dest);\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"dest is null\");\n+        }\n \n-        dest.setId(source.getId() == null ? null : source.getId().toString());\n-        dest.setSerial(source.getSerial() == null ? null : source.getSerial().toString());\n-        dest.setExpiration(source.getExpiration());\n-        dest.setCollected(source.isCollected());\n-        dest.setRevoked(source.isRevoked());\n+        Date created = source.getCreated();\n+        dest.setCreated(created != null ?  Instant.ofEpochMilli(created.getTime()).atZone(ZoneId.systemDefault()).toLocalDate(): null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f68ec46c4857a5b4672339669a67b41655a45ad9"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NDM2MzYz", "url": "https://github.com/candlepin/candlepin/pull/2584#pullrequestreview-348436363", "createdAt": "2020-01-27T04:18:12Z", "commit": {"oid": "f68ec46c4857a5b4672339669a67b41655a45ad9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNDoxODoxMlrOFh3u_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNDoxODoxMlrOFh3u_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA2MDQ3OA==", "bodyText": "@kahowell @nikosmoum\nIf I remember correctly @kahowell mentioned that dateLibrary value set at openApiGenerate section in build.gradle.\nDo we need this here also?", "url": "https://github.com/candlepin/candlepin/pull/2584#discussion_r371060478", "createdAt": "2020-01-27T04:18:12Z", "author": {"login": "abhiskum"}, "path": "api/candlepin-api-config.json", "diffHunk": "@@ -4,5 +4,6 @@\n   \"invokerPackage\": \"org.candlepin\",\n   \"groupId\": \"org.candlepin\",\n   \"artifactId\": \"candlepin-api\",\n-  \"java8\": true\n+  \"java8\": true,\n+  \"dateLibrary\": \"java8\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f68ec46c4857a5b4672339669a67b41655a45ad9"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f68ec46c4857a5b4672339669a67b41655a45ad9", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/f68ec46c4857a5b4672339669a67b41655a45ad9", "committedDate": "2020-01-24T16:33:58Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Added jackson support for java8 date api\n- Changed openapi config to use java8 dates so that 'date'\n  is translated to 'java.time.LocalDate'"}, "afterCommit": {"oid": "27c6912e7d8d6ee216a57d37cf6141549dffdb39", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/27c6912e7d8d6ee216a57d37cf6141549dffdb39", "committedDate": "2020-01-28T12:23:16Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27c6912e7d8d6ee216a57d37cf6141549dffdb39", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/27c6912e7d8d6ee216a57d37cf6141549dffdb39", "committedDate": "2020-01-28T12:23:16Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}, "afterCommit": {"oid": "a5cd052e540b2257493705338e977a8c04cdb0da", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/a5cd052e540b2257493705338e977a8c04cdb0da", "committedDate": "2020-01-28T16:10:58Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTc3MTMz", "url": "https://github.com/candlepin/candlepin/pull/2584#pullrequestreview-350177133", "createdAt": "2020-01-29T15:06:21Z", "commit": {"oid": "a5cd052e540b2257493705338e977a8c04cdb0da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5cd052e540b2257493705338e977a8c04cdb0da", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/a5cd052e540b2257493705338e977a8c04cdb0da", "committedDate": "2020-01-28T16:10:58Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}, "afterCommit": {"oid": "e40c07b333291296b39a5c98da1b6a33e7084722", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/e40c07b333291296b39a5c98da1b6a33e7084722", "committedDate": "2020-01-30T16:01:27Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e40c07b333291296b39a5c98da1b6a33e7084722", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/e40c07b333291296b39a5c98da1b6a33e7084722", "committedDate": "2020-01-30T16:01:27Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}, "afterCommit": {"oid": "683195da525eb120c6c03efa71fbdab1f65ab710", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/683195da525eb120c6c03efa71fbdab1f65ab710", "committedDate": "2020-01-31T08:18:37Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "578f1ee480cee89639ae75cfd5ce5819a027b012", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/578f1ee480cee89639ae75cfd5ce5819a027b012", "committedDate": "2020-01-31T13:25:54Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "683195da525eb120c6c03efa71fbdab1f65ab710", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/683195da525eb120c6c03efa71fbdab1f65ab710", "committedDate": "2020-01-31T08:18:37Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}, "afterCommit": {"oid": "578f1ee480cee89639ae75cfd5ce5819a027b012", "author": {"user": {"login": "nikosmoum", "name": "Nikos Moumoulidis"}}, "url": "https://github.com/candlepin/candlepin/commit/578f1ee480cee89639ae75cfd5ce5819a027b012", "committedDate": "2020-01-31T13:25:54Z", "message": "ENT-1855: Port CertificateSerialDTO to openapi spec\n\n- Add custom deserializer for OffsetDateTime that\n  supports ISO 8601 dates with optional offset, millis, or time.\n- Add custom serializer for OffsetDateTime that cuts off millis and\n  converts to UTC using the offset."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2470, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}