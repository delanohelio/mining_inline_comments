{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MjM0OTkz", "number": 2774, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMjo1MzoyM1rOEXnPpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMjo1MzoyM1rOEXnPpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMTk1Njg0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/candlepin/controller/ContentAccessManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMjo1MzoyM1rOG_f6Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoyMDozOFrOG_g93g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIzNjIzMA==", "bodyText": "Just curious why having a dummy value prevents existing clients from breaking?", "url": "https://github.com/candlepin/candlepin/pull/2774#discussion_r469236230", "createdAt": "2020-08-12T12:53:23Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/controller/ContentAccessManager.java", "diffHunk": "@@ -406,27 +419,72 @@ else if (type.isType(ConsumerTypeEnum.HYPERVISOR)) {\n         return promotedContent;\n     }\n \n+    /**\n+     * Fetches the path to use for content used to generate the ENTITLEMENT_DATA certificate\n+     * extension\n+     *\n+     * @param owner\n+     *  the owner of the entitlement for which the content path is being generated\n+     *\n+     * @param environment\n+     *  the environment to which the consumer receiving the entitlement belongs\n+     *\n+     * @return\n+     *  the container content path for the given owner and environment\n+     */\n+    private String getContainerContentPath(Owner owner, Environment environment) throws IOException {\n+        // Fix for BZ 1866525:\n+        // - In hosted, SCA entitlement content path needs to use a dummy value to prevent existing\n+        //   clients from breaking, while still being clear the path is present for SCA", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09289ac46d33451fbc1be4aa7f115703c3c70faa"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1MzU5OA==", "bodyText": "The big one is subman/rhsmlib's certificate2.py doesn't check that the extension properly exists before attempting to use the value, so the result you get is an exception rather than a false from check_paths, or empty array of paths in provided_paths.", "url": "https://github.com/candlepin/candlepin/pull/2774#discussion_r469253598", "createdAt": "2020-08-12T13:20:38Z", "author": {"login": "Ceiu"}, "path": "server/src/main/java/org/candlepin/controller/ContentAccessManager.java", "diffHunk": "@@ -406,27 +419,72 @@ else if (type.isType(ConsumerTypeEnum.HYPERVISOR)) {\n         return promotedContent;\n     }\n \n+    /**\n+     * Fetches the path to use for content used to generate the ENTITLEMENT_DATA certificate\n+     * extension\n+     *\n+     * @param owner\n+     *  the owner of the entitlement for which the content path is being generated\n+     *\n+     * @param environment\n+     *  the environment to which the consumer receiving the entitlement belongs\n+     *\n+     * @return\n+     *  the container content path for the given owner and environment\n+     */\n+    private String getContainerContentPath(Owner owner, Environment environment) throws IOException {\n+        // Fix for BZ 1866525:\n+        // - In hosted, SCA entitlement content path needs to use a dummy value to prevent existing\n+        //   clients from breaking, while still being clear the path is present for SCA", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIzNjIzMA=="}, "originalCommit": {"oid": "09289ac46d33451fbc1be4aa7f115703c3c70faa"}, "originalPosition": 105}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4060, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}