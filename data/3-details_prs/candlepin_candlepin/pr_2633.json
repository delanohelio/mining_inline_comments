{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MjAyMTcy", "number": 2633, "title": "ENT-1865:\u00a0Port RoleDTO to openapi spec", "bodyText": "Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\nand\u00a0UserDTO\u00a0in yaml file.\nAdded Translator to convert DTOs into Model Entities\nbecause\u00a0newly generated DTOs do not implement Info interfaces.\n1.\u00a0NestedOwnerDTOTranslator\n2.\u00a0PermissionBlueprintDTOTranslator\n3.\u00a0RoleDTOTranslator\n4. UserDTOTranslator\nAdded test suites for above translators\nUpdated the default constructor of\u00a0PermissionBlueprint to the public\nbecause\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator.", "createdAt": "2020-03-05T10:48:51Z", "url": "https://github.com/candlepin/candlepin/pull/2633", "merged": true, "mergeCommit": {"oid": "71b9f666b3d2cdcde2f1b6f666daed44f5110389"}, "closed": true, "closedAt": "2020-03-13T11:43:36Z", "author": {"login": "sonalidhome"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKpXEnABqjMxMDA2ODQ2Njk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNOiGggFqTM3NDIyNDkzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "090a33a275e8b916383d4895534dd7249642b5f9", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/090a33a275e8b916383d4895534dd7249642b5f9", "committedDate": "2020-03-05T10:46:49Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}, "afterCommit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/988cf578597b7b11636cc926ff2da6c9f4e88a7b", "committedDate": "2020-03-05T10:56:20Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMTY4MjQ1", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-370168245", "createdAt": "2020-03-06T09:00:30Z", "commit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwOTowMDozMFrOFyxaBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwOToxMjoxM1rOFyxuJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc4MjU5OQ==", "bodyText": "You can use ArrayList constructor instead of going through stream.\nnew ArrayList<UserDTO>(users)\nSecond point. I know it was already there, but peek is intended mainly for debugging. Map would be much clearer.\n.map(e -> e.users(new ArrayList<>(users)));", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r388782599", "createdAt": "2020-03-06T09:00:30Z", "author": {"login": "Januson"}, "path": "server/src/main/java/org/candlepin/resource/UserResource.java", "diffHunk": "@@ -155,7 +156,7 @@ public UserDTO getUserInfo(@PathParam(\"username\") @Verify(User.class) String use\n             // to avoid leaking role details about other users.\n             return roles.stream()\n                 .map(this.modelTranslator.getStreamMapper(RoleInfo.class, RoleDTO.class))\n-                .peek(e -> e.setUsers(users));\n+                .peek(e -> e.setUsers(users.stream().collect(Collectors.toList())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc4NDUwNQ==", "bodyText": "There might be a typo. Comment says that password should be allways null on the DTO but we are testing for not null.", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r388784505", "createdAt": "2020-03-06T09:04:45Z", "author": {"login": "Januson"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/UserDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.User;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+\n+/**\n+ * Test suite for the UserDTOTranslator class.\n+ */\n+public class UserDTOTranslatorTest extends AbstractTranslatorTest<UserDTO, User, UserDTOTranslator> {\n+\n+    protected UserDTOTranslator translator = new UserDTOTranslator();\n+\n+    @Override\n+    protected void initModelTranslator(ModelTranslator modelTranslator) {\n+        modelTranslator.registerTranslator(this.translator, UserDTO.class, User.class);\n+    }\n+\n+    @Override\n+    protected UserDTOTranslator initObjectTranslator() {\n+        return this.translator;\n+    }\n+\n+    @Override\n+    protected UserDTO initSourceObject() {\n+        UserDTO userDTO = new UserDTO()\n+            .id(\"user_id\")\n+            .username(\"user_username\")\n+            .password(\"user_password\")\n+            .superAdmin(true);\n+\n+        return userDTO;\n+    }\n+\n+    @Override\n+    protected User initDestinationObject() {\n+        return new User();\n+    }\n+\n+    @Override\n+    protected void verifyOutput(UserDTO source, User dest, boolean childrenGenerated) {\n+        if (source != null) {\n+            // This DTO does not have any nested objects, so we don't need to worry about the\n+            // childrenGenerated flag\n+\n+            assertEquals(source.getId(), dest.getId());\n+            assertEquals(source.getUsername(), dest.getUsername());\n+            assertEquals(source.getSuperAdmin(), dest.isSuperAdmin());\n+\n+            // Under no circumstance should we be copying over the password field on translation.\n+            // This should always be null on the DTO.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc4Nzc1MA==", "bodyText": "There is no need to be explicit with these type arguments. JVM can infer them so they can be omited.\nCollections.emptySet()", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r388787750", "createdAt": "2020-03-06T09:12:13Z", "author": {"login": "Januson"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/RoleDTOTranslator.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.PermissionBlueprint;\n+import org.candlepin.model.Role;\n+import org.candlepin.model.User;\n+\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * The RoleDTOTranslator provides translation from RoleDTO to Role model objects.\n+ */\n+public class RoleDTOTranslator implements ObjectTranslator<RoleDTO, Role> {\n+    @Override\n+    public Role translate(RoleDTO source) {\n+        return this.translate(null, source);\n+    }\n+\n+    @Override\n+    public Role translate(ModelTranslator modelTranslator, RoleDTO source) {\n+        return source != null ? this.populate(modelTranslator, source, new Role()) : null;\n+    }\n+\n+    @Override\n+    public Role populate(RoleDTO source, Role destination) {\n+        return this.populate(null, source, destination);\n+    }\n+\n+    @Override\n+    public Role populate(ModelTranslator modelTranslator, RoleDTO source, Role destination) {\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (destination == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }\n+\n+        destination.setCreated(source.getCreated() != null ?\n+            new Date(source.getCreated().toInstant().toEpochMilli()) : null);\n+        destination.setUpdated(source.getUpdated() != null ?\n+            new Date(source.getUpdated().toInstant().toEpochMilli()) : null);\n+        destination.setId(source.getId());\n+        destination.setName(source.getName());\n+\n+        if (modelTranslator != null) {\n+            // Users\n+            List<UserDTO> users = source.getUsers();\n+\n+            if (users != null) {\n+                destination.setUsers(users.stream()\n+                    .map(modelTranslator.getStreamMapper(UserDTO.class, User.class))\n+                    .collect(Collectors.toSet()));\n+            }\n+            else {\n+                destination.setUsers(Collections.<User>emptySet());\n+            }\n+\n+            // Permissions\n+            List<PermissionBlueprintDTO> permissions = source.getPermissions();\n+\n+            if (permissions != null) {\n+                destination.setPermissions(permissions.stream()\n+                    .map(modelTranslator.getStreamMapper(PermissionBlueprintDTO.class,\n+                    PermissionBlueprint.class))\n+                    .collect(Collectors.toSet()));\n+            }\n+            else {\n+                destination.setPermissions(Collections.<PermissionBlueprint>emptySet());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b"}, "originalPosition": 88}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "988cf578597b7b11636cc926ff2da6c9f4e88a7b", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/988cf578597b7b11636cc926ff2da6c9f4e88a7b", "committedDate": "2020-03-05T10:56:20Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}, "afterCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/9b3f898733bc301c6490b6e452a3eb823eb7ccd4", "committedDate": "2020-03-06T10:37:06Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDE0MDE4", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-371014018", "createdAt": "2020-03-09T09:25:44Z", "commit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToyNTo0NVrOFzfxYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMzoyMjo0NVrOFzmxcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0MjI0Mg==", "bodyText": "Double quotes are only required in JSON format of the spec. We use yaml, which does not require the use of quotes (even though it still is parsed properly, we should be consistent with how the OpenAPI specification examples do it) at all around $ref, and single quotes around the reference url. Also, the #/definitions/... url is used in OpenAPI version 2.0. We use OpenAPI 3.0, which uses the #/components/schemas/... url.\nSo with that, this line (and other references in the changes further down) would be $ref: '#/components/schemas/NestedOwnerDTO'\nI use the latest OpenApi documentation (v 3.0.3) for reference: https://swagger.io/specification/", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389542242", "createdAt": "2020-03-09T09:25:45Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+              example: \"ff808081554a3e4101554a3e9033005d\"\n+            owner:\n+              \"$ref\": \"#/definitions/NestedOwnerDTO\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0MzM4MA==", "bodyText": "Same for descriptions: no need for double quotes in yaml", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389543380", "createdAt": "2020-03-09T09:27:52Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0OTM4MA==", "bodyText": "Instead of explicitly adding created/updated, you can simply make RoleDTO extend the TimestampedEntity like most other DTOs do:\n      allOf:\n        - $ref: '#/components/schemas/TimestampedEntity'\n        - type: object\n          properties:\n...", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389549380", "createdAt": "2020-03-09T09:39:24Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+              example: \"ff808081554a3e4101554a3e9033005d\"\n+            owner:\n+              \"$ref\": \"#/definitions/NestedOwnerDTO\"\n+            type:\n+              type: string\n+              example: \"OWNER\"\n+            access:\n+              type: string\n+              example: \"NONE\"\n+\n+    RoleDTO:\n+      description: \"Represent the relationship between users and the permissions they have\"\n+      type: object\n+      required:\n+        - id\n+        - name\n+      properties:\n+        created:\n+          type: string\n+          format: \"date-time\"\n+        updated:\n+          type: string\n+          format: \"date-time\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2MDI5MA==", "bodyText": "We could add uniqueItems: true on this array to make it generate a Set instead of a List, since I don't think having identical Users here is ever valid. (not something very important, but its good to be defensive like this on the API, instead of someone sneaking in some input like that which would cause trouble later on somewhere, like a query, in a hard-to-find way).", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389560290", "createdAt": "2020-03-09T10:00:18Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+              example: \"ff808081554a3e4101554a3e9033005d\"\n+            owner:\n+              \"$ref\": \"#/definitions/NestedOwnerDTO\"\n+            type:\n+              type: string\n+              example: \"OWNER\"\n+            access:\n+              type: string\n+              example: \"NONE\"\n+\n+    RoleDTO:\n+      description: \"Represent the relationship between users and the permissions they have\"\n+      type: object\n+      required:\n+        - id\n+        - name\n+      properties:\n+        created:\n+          type: string\n+          format: \"date-time\"\n+        updated:\n+          type: string\n+          format: \"date-time\"\n+        id:\n+          type: string\n+          example: \"ff808081554a3e4101554a3e9033005d\"\n+        name:\n+          type: string\n+          example: \"admin-all\"\n+        users:\n+          type: array\n+          items:\n+            \"$ref\": \"#/definitions/UserDTO\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2MzI2OQ==", "bodyText": "You've already extended TimestampedEntity on this object, so there's no reason to add the created/updated fields. They're already on the TimestampedEntity", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389563269", "createdAt": "2020-03-09T10:06:03Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -555,6 +601,38 @@ components:\n         keycloakResource:\n           type: string\n \n+    UserDTO:\n+      description: \"Represents user information for a given user\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          required:\n+            - id\n+            - username\n+            - password\n+            - superAdmin\n+          properties:\n+            created:\n+              type: string\n+              format: date-time\n+            updated:\n+              type: string\n+              format: date-time", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2NzUwOQ==", "bodyText": "The superAdmin field isn't required (it will default to false if it is left null)", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389567509", "createdAt": "2020-03-09T10:14:13Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -555,6 +601,38 @@ components:\n         keycloakResource:\n           type: string\n \n+    UserDTO:\n+      description: \"Represents user information for a given user\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          required:\n+            - id\n+            - username\n+            - password\n+            - superAdmin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2OTM1NA==", "bodyText": "The id field is a database id, so it must not be required. When you do a POST request to create a new user for example, you don't need to specify the id because it doesn't have one yet", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389569354", "createdAt": "2020-03-09T10:17:55Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -555,6 +601,38 @@ components:\n         keycloakResource:\n           type: string\n \n+    UserDTO:\n+      description: \"Represents user information for a given user\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          required:\n+            - id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU3MDMxNA==", "bodyText": "The id field is a database id, so it must not be required. When you do a POST request to create a new role for example, you don't need to specify the id because it doesn't have one yet", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389570314", "createdAt": "2020-03-09T10:19:52Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+              example: \"ff808081554a3e4101554a3e9033005d\"\n+            owner:\n+              \"$ref\": \"#/definitions/NestedOwnerDTO\"\n+            type:\n+              type: string\n+              example: \"OWNER\"\n+            access:\n+              type: string\n+              example: \"NONE\"\n+\n+    RoleDTO:\n+      description: \"Represent the relationship between users and the permissions they have\"\n+      type: object\n+      required:\n+        - id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4MTA2Nw==", "bodyText": "The name field is only really required when creating a role (but that is already handled by a custom check on the resource, with a user-friendly response message). It is not strictly required when updating a role, so we should probably not add it to the required list here.", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389581067", "createdAt": "2020-03-09T10:41:05Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -515,6 +515,52 @@ components:\n               additionalProperties:\n                 type: string\n \n+    PermissionBlueprintDTO:\n+      description: \"Represents the permission blueprints exposed to the API layer\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+              example: \"ff808081554a3e4101554a3e9033005d\"\n+            owner:\n+              \"$ref\": \"#/definitions/NestedOwnerDTO\"\n+            type:\n+              type: string\n+              example: \"OWNER\"\n+            access:\n+              type: string\n+              example: \"NONE\"\n+\n+    RoleDTO:\n+      description: \"Represent the relationship between users and the permissions they have\"\n+      type: object\n+      required:\n+        - id\n+        - name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4OTQ2Mw==", "bodyText": "username and password are also not required. For example, in a PUT request (looking to update a user) you might only specify the superAdmin field (because that is the only field you might want to update). We only add fields to the required list if they must not be null under any circumstances (e.g. in both PUT/POST requests, or other requests where they are used as nested fields).\nGenerally, most fields on DTOs are not strictly required. The ones that usually are required are things like ids of nested entities (example: ActivationKeyDTO has a nested field called ActivationKeyPoolDTO, which refers to a Pool object. In this case, if we're specifying the ActivationKeyPoolDTO field, specifying it's pool id is never optional).\nA quick way to see if a field needs to be in the required list, is to check the current DTO (that is, ONLY the DTO which it is owned by, in this case UserDTO). If any setters or constructors check for null and throw exceptions (usually IllegalArgumentException), then that means that that field is always required, and should be added in the required list.", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389589463", "createdAt": "2020-03-09T10:58:21Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -555,6 +601,38 @@ components:\n         keycloakResource:\n           type: string\n \n+    UserDTO:\n+      description: \"Represents user information for a given user\"\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          required:\n+            - id\n+            - username\n+            - password", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxMTA4NQ==", "bodyText": "In addition to checking these for null, now that TimestampedEntityTranslator is not extended, we need to manually also translate the created/updated fields.", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389611085", "createdAt": "2020-03-09T11:48:29Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/PermissionBlueprintTranslator.java", "diffHunk": "@@ -60,17 +60,23 @@ public PermissionBlueprintDTO populate(PermissionBlueprint source, PermissionBlu\n     public PermissionBlueprintDTO populate(ModelTranslator translator, PermissionBlueprint source,\n         PermissionBlueprintDTO dest) {\n \n-        dest = super.populate(translator, source, dest);\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxMjI3Nw==", "bodyText": "The created/updated fields also need to be translated here", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389612277", "createdAt": "2020-03-09T11:51:22Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/PermissionBlueprintDTOTranslator.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.auth.Access;\n+import org.candlepin.auth.permissions.PermissionFactory;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.Owner;\n+import org.candlepin.model.PermissionBlueprint;\n+\n+/**\n+ * The PermissionBlueprintDTOTranslator provides translation\n+ * from PermissionBlueprintDTO to PermissionBlueprint model objects.\n+ */\n+public class PermissionBlueprintDTOTranslator implements\n+    ObjectTranslator<PermissionBlueprintDTO, PermissionBlueprint> {\n+    @Override\n+    public PermissionBlueprint translate(PermissionBlueprintDTO source) {\n+        return this.translate(null, source);\n+    }\n+\n+    @Override\n+    public PermissionBlueprint translate(ModelTranslator modelTranslator, PermissionBlueprintDTO source) {\n+        return source != null ?\n+            this.populate(modelTranslator, source, new PermissionBlueprint()) : null;\n+    }\n+\n+    @Override\n+    public PermissionBlueprint populate(PermissionBlueprintDTO source, PermissionBlueprint destination) {\n+        return this.populate(null, source, destination);\n+    }\n+\n+    @Override\n+    public PermissionBlueprint populate(ModelTranslator modelTranslator,\n+        PermissionBlueprintDTO source, PermissionBlueprint destination) {\n+\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (destination == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxNTQxNA==", "bodyText": "A newline above this would be good for readability", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389615414", "createdAt": "2020-03-09T11:58:31Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/PermissionBlueprintDTOTranslator.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.auth.Access;\n+import org.candlepin.auth.permissions.PermissionFactory;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.Owner;\n+import org.candlepin.model.PermissionBlueprint;\n+\n+/**\n+ * The PermissionBlueprintDTOTranslator provides translation\n+ * from PermissionBlueprintDTO to PermissionBlueprint model objects.\n+ */\n+public class PermissionBlueprintDTOTranslator implements\n+    ObjectTranslator<PermissionBlueprintDTO, PermissionBlueprint> {\n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxNTg4OQ==", "bodyText": "If we're no longer using a translator to translate the owner, then the owner translation should move outside of the if(translator != null) block. And since there are no other entities being translated by a translator, then that block can be removed completely.", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389615889", "createdAt": "2020-03-09T11:59:32Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/PermissionBlueprintInfoTranslator.java", "diffHunk": "@@ -72,7 +70,18 @@ public PermissionBlueprintDTO populate(ModelTranslator translator, PermissionBlu\n         dest.setAccess(source.getAccessLevel());\n \n         if (translator != null) {\n-            dest.setOwner(translator.translate(source.getOwner(), OwnerDTO.class));\n+\n+            if (source.getOwner() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxNjM5Mw==", "bodyText": "Same here; Newline for readabiity", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389616393", "createdAt": "2020-03-09T12:00:45Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/RoleDTOTranslator.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.PermissionBlueprint;\n+import org.candlepin.model.Role;\n+import org.candlepin.model.User;\n+\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * The RoleDTOTranslator provides translation from RoleDTO to Role model objects.\n+ */\n+public class RoleDTOTranslator implements ObjectTranslator<RoleDTO, Role> {\n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxNzIwNA==", "bodyText": "Same here: newline above this for readability", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389617204", "createdAt": "2020-03-09T12:02:43Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/UserDTOTranslator.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.User;\n+import org.candlepin.util.Util;\n+\n+import java.util.Date;\n+\n+/**\n+ * The UserDTOTranslator provides translation from UserDTO to User model objects.\n+ */\n+public class UserDTOTranslator implements ObjectTranslator<UserDTO, User> {\n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMDA4Mg==", "bodyText": "The User.setPassword method is already hashing the password, so here you're hashing it first before putting it as an argument, which means it will re-hash the hashed password. If you check the User class, both setPassword and setHashedPassword are setting the same field (one by hashing it first, the other without), so there is no need to call both setters. I'd remove the setPassword here, and leave the next call as is (setHashedPassword)", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389620082", "createdAt": "2020-03-09T12:09:20Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/UserDTOTranslator.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.User;\n+import org.candlepin.util.Util;\n+\n+import java.util.Date;\n+\n+/**\n+ * The UserDTOTranslator provides translation from UserDTO to User model objects.\n+ */\n+public class UserDTOTranslator implements ObjectTranslator<UserDTO, User> {\n+    @Override\n+    public User translate(UserDTO source) {\n+        return this.translate(null, source);\n+    }\n+\n+    @Override\n+    public User translate(ModelTranslator modelTranslator, UserDTO source) {\n+        return source != null ? this.populate(modelTranslator, source, new User()) : null;\n+    }\n+\n+    @Override\n+    public User populate(UserDTO source, User destination) {\n+        return this.populate(null, source, destination);\n+    }\n+\n+    @Override\n+    public User populate(ModelTranslator modelTranslator, UserDTO source, User destination) {\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (destination == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }\n+\n+        destination.setCreated(source.getCreated() != null ?\n+            new Date(source.getCreated().toInstant().toEpochMilli()) : null);\n+        destination.setUpdated(source.getUpdated() != null ?\n+            new Date(source.getUpdated().toInstant().toEpochMilli()) : null);\n+        destination.setId(source.getId());\n+        destination.setUsername(source.getUsername());\n+        destination.setSuperAdmin(source.getSuperAdmin());\n+        destination.setPassword(source.getPassword() != null ?\n+            Util.hash(source.getPassword()) : null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMjU4Nw==", "bodyText": "The User class holds this field as a primitive boolean, while the DTO as a boxed Boolean object, so we should have a null check here, because setting the primitive boolean to null would cause an NPE. In case the source's value is null, we should default the destination value (false).", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389622587", "createdAt": "2020-03-09T12:15:12Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/UserDTOTranslator.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.User;\n+import org.candlepin.util.Util;\n+\n+import java.util.Date;\n+\n+/**\n+ * The UserDTOTranslator provides translation from UserDTO to User model objects.\n+ */\n+public class UserDTOTranslator implements ObjectTranslator<UserDTO, User> {\n+    @Override\n+    public User translate(UserDTO source) {\n+        return this.translate(null, source);\n+    }\n+\n+    @Override\n+    public User translate(ModelTranslator modelTranslator, UserDTO source) {\n+        return source != null ? this.populate(modelTranslator, source, new User()) : null;\n+    }\n+\n+    @Override\n+    public User populate(UserDTO source, User destination) {\n+        return this.populate(null, source, destination);\n+    }\n+\n+    @Override\n+    public User populate(ModelTranslator modelTranslator, UserDTO source, User destination) {\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (destination == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }\n+\n+        destination.setCreated(source.getCreated() != null ?\n+            new Date(source.getCreated().toInstant().toEpochMilli()) : null);\n+        destination.setUpdated(source.getUpdated() != null ?\n+            new Date(source.getUpdated().toInstant().toEpochMilli()) : null);\n+        destination.setId(source.getId());\n+        destination.setUsername(source.getUsername());\n+        destination.setSuperAdmin(source.getSuperAdmin());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYzMjk0OA==", "bodyText": "If you notice the current RoleDTO, it is throwing IllegalArgumentExceptions in case during setUsers or setPermissions, in case any of the elements within those collections are null. Now that we don't have control over the setters, we can't do that, so we need another way to validate the collections. This is where the DTOValidator class comes in (it was introduced in my ActivationKeyDTO PR).\nBefore translating here, you should add a call to the DTOValidator to check those two collections as such:\nvalidator.validateCollectionElementsNotNull(dto::getUsers, update::getPermissions);", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389632948", "createdAt": "2020-03-09T12:37:16Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/resource/RoleResource.java", "diffHunk": "@@ -154,7 +156,7 @@ public RoleDTO createRole(@ApiParam(name = \"role\", required = true) RoleDTO dto)\n             throw new ConflictException(this.i18n.tr(\"Role already exists: {0}\", dto.getName()));\n         }\n \n-        RoleInfo role = this.userService.createRole(dto);\n+        RoleInfo role = this.userService.createRole(this.modelTranslator.translate(dto, Role.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYzMzQ0Ng==", "bodyText": "Same here: before translating, use the DTOValidator to validate there are no null elements in the users and permissions collections", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389633446", "createdAt": "2020-03-09T12:38:25Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/resource/RoleResource.java", "diffHunk": "@@ -174,7 +176,8 @@ public RoleDTO updateRole(@PathParam(\"role_name\") String roleName,\n         // generation\n         this.fetchRoleByName(roleName);\n \n-        RoleInfo role = this.userService.updateRole(roleName, dto);\n+        RoleInfo role = this.userService.updateRole(roleName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY0MjM1Mw==", "bodyText": "these should all be assertEquals(<source value>, <destination value>)", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389642353", "createdAt": "2020-03-09T12:56:46Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/NestedOwnerDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.Owner;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * Test suite for the NestedOwnerDTOTranslator class.\n+ */\n+public class NestedOwnerDTOTranslatorTest extends\n+    AbstractTranslatorTest<NestedOwnerDTO, Owner, NestedOwnerDTOTranslator> {\n+\n+    protected NestedOwnerDTOTranslator translator = new NestedOwnerDTOTranslator();\n+\n+    @Override\n+    protected void initModelTranslator(ModelTranslator modelTranslator) {\n+        modelTranslator.registerTranslator(this.translator,\n+            NestedOwnerDTO.class, Owner.class);\n+    }\n+\n+    @Override\n+    protected NestedOwnerDTOTranslator initObjectTranslator() {\n+        return this.translator;\n+    }\n+\n+    @Override\n+    protected NestedOwnerDTO initSourceObject() {\n+        NestedOwnerDTO owner = new NestedOwnerDTO();\n+\n+        owner.setId(\"owner_id\");\n+        owner.setKey(\"owner_key\");\n+        owner.setDisplayName(\"owner_name\");\n+\n+        return owner;\n+    }\n+\n+    @Override\n+    protected Owner initDestinationObject() {\n+        return new Owner();\n+    }\n+\n+    @Override\n+    protected void verifyOutput(NestedOwnerDTO source, Owner dest,\n+        boolean childrenGenerated) {\n+\n+        if (source != null) {\n+            assertNotNull(dest.getId());\n+            assertEquals(source.getKey(), dest.getKey());\n+            assertNotNull(dest.getDisplayName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY0ODUxOQ==", "bodyText": "We shouldn'e be creating any DTOs (or entities) in a translation verification test. In fact, since we moved to a manual translation of NestedOWner in PermissionBlueprintInfoTranslator, the verification should happen outside of the if (childrenGenerated) block, by a series of assertEquals calls (one for each field), and the ownerTranslatorTest field should be removed (as it is no longer needed).", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389648519", "createdAt": "2020-03-09T13:09:35Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/PermissionBlueprintInfoTranslatorTest.java", "diffHunk": "@@ -78,7 +78,14 @@ protected void verifyOutput(PermissionBlueprintInfo source, PermissionBlueprintD\n             assertEquals(source.getAccessLevel(), dest.getAccess());\n \n             if (childrenGenerated) {\n-                this.ownerTranslatorTest.verifyOutput(source.getOwner(), dest.getOwner(), true);\n+\n+                OwnerDTO ownerDTO = new OwnerDTO();\n+                ownerDTO.setId(dest.getOwner().getId());\n+                ownerDTO.setKey(dest.getOwner().getKey());\n+                ownerDTO.setDisplayName(dest.getOwner().getDisplayName());\n+\n+                this.ownerTranslatorTest.verifyOutput(source.getOwner(),\n+                    ownerDTO, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY1MDcxOQ==", "bodyText": "No need to create a new Date object and then transform it into OffsetDateTime. You can use OffsetDateTime.now() directly", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389650719", "createdAt": "2020-03-09T13:13:54Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/RoleDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,136 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.PermissionBlueprint;\n+import org.candlepin.model.Role;\n+import org.candlepin.model.User;\n+\n+import java.time.ZoneOffset;\n+import java.util.ArrayList;\n+import java.util.Date;\n+import java.util.List;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test suite for the RoleDTOTranslator class.\n+ */\n+public class RoleDTOTranslatorTest extends\n+    AbstractTranslatorTest<RoleDTO, Role, RoleDTOTranslator> {\n+\n+    protected RoleDTOTranslator translator = new RoleDTOTranslator();\n+\n+    protected PermissionBlueprintDTOTranslatorTest permDTOTranslatorTest =\n+        new PermissionBlueprintDTOTranslatorTest();\n+\n+    protected UserDTOTranslatorTest userDTOTranslatorTest = new UserDTOTranslatorTest();\n+\n+    @Override\n+    protected void initModelTranslator(ModelTranslator modelTranslator) {\n+        this.userDTOTranslatorTest.initModelTranslator(modelTranslator);\n+        this.permDTOTranslatorTest.initModelTranslator(modelTranslator);\n+\n+        modelTranslator.registerTranslator(this.translator, RoleDTO.class, Role.class);\n+    }\n+\n+    @Override\n+    protected RoleDTOTranslator initObjectTranslator() {\n+        return this.translator;\n+    }\n+\n+    @Override\n+    protected RoleDTO initSourceObject() {\n+        RoleDTO source = new RoleDTO();\n+\n+        List<UserDTO> users = new ArrayList<>();\n+        List<PermissionBlueprintDTO> permissions = new ArrayList<>();\n+\n+        for (int i = 0; i < 5; ++i) {\n+            UserDTO user = (UserDTO) this.userDTOTranslatorTest.initSourceObject();\n+            user.setId(\"test-user-\" + i);\n+\n+            PermissionBlueprintDTO permission = (PermissionBlueprintDTO)\n+                this.permDTOTranslatorTest.initSourceObject();\n+            permission.setId(\"test-perm-\" + i);\n+\n+            users.add(user);\n+            permissions.add(permission);\n+        }\n+\n+        source.id(\"test-role-id\")\n+            .name(\"test-role-name\")\n+            .users(users)\n+            .permissions(permissions)\n+            .created(new Date().toInstant().atOffset(ZoneOffset.UTC))\n+            .updated(new Date().toInstant().atOffset(ZoneOffset.UTC));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY1MjAzMQ==", "bodyText": "should be assertEquals between source and dest value", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389652031", "createdAt": "2020-03-09T13:16:23Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/RoleDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,136 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.PermissionBlueprint;\n+import org.candlepin.model.Role;\n+import org.candlepin.model.User;\n+\n+import java.time.ZoneOffset;\n+import java.util.ArrayList;\n+import java.util.Date;\n+import java.util.List;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test suite for the RoleDTOTranslator class.\n+ */\n+public class RoleDTOTranslatorTest extends\n+    AbstractTranslatorTest<RoleDTO, Role, RoleDTOTranslator> {\n+\n+    protected RoleDTOTranslator translator = new RoleDTOTranslator();\n+\n+    protected PermissionBlueprintDTOTranslatorTest permDTOTranslatorTest =\n+        new PermissionBlueprintDTOTranslatorTest();\n+\n+    protected UserDTOTranslatorTest userDTOTranslatorTest = new UserDTOTranslatorTest();\n+\n+    @Override\n+    protected void initModelTranslator(ModelTranslator modelTranslator) {\n+        this.userDTOTranslatorTest.initModelTranslator(modelTranslator);\n+        this.permDTOTranslatorTest.initModelTranslator(modelTranslator);\n+\n+        modelTranslator.registerTranslator(this.translator, RoleDTO.class, Role.class);\n+    }\n+\n+    @Override\n+    protected RoleDTOTranslator initObjectTranslator() {\n+        return this.translator;\n+    }\n+\n+    @Override\n+    protected RoleDTO initSourceObject() {\n+        RoleDTO source = new RoleDTO();\n+\n+        List<UserDTO> users = new ArrayList<>();\n+        List<PermissionBlueprintDTO> permissions = new ArrayList<>();\n+\n+        for (int i = 0; i < 5; ++i) {\n+            UserDTO user = (UserDTO) this.userDTOTranslatorTest.initSourceObject();\n+            user.setId(\"test-user-\" + i);\n+\n+            PermissionBlueprintDTO permission = (PermissionBlueprintDTO)\n+                this.permDTOTranslatorTest.initSourceObject();\n+            permission.setId(\"test-perm-\" + i);\n+\n+            users.add(user);\n+            permissions.add(permission);\n+        }\n+\n+        source.id(\"test-role-id\")\n+            .name(\"test-role-name\")\n+            .users(users)\n+            .permissions(permissions)\n+            .created(new Date().toInstant().atOffset(ZoneOffset.UTC))\n+            .updated(new Date().toInstant().atOffset(ZoneOffset.UTC));\n+\n+        return source;\n+    }\n+\n+    @Override\n+    protected Role initDestinationObject() {\n+        return new Role();\n+    }\n+\n+    @Override\n+    protected void verifyOutput(RoleDTO source, Role dest, boolean childrenGenerated) {\n+        if (source != null) {\n+\n+            assertNotNull(dest.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY1Njk0NQ==", "bodyText": "Even though when translating from User to UserDTO we shouldn't be translating the password, when doing the opposite, the password should get translated and hashed. So I'd expect this kind of assertion here:\nassertEquals(Util.hash(source.getPassword()), dest.getHashedPassword())", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r389656945", "createdAt": "2020-03-09T13:22:45Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/UserDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.User;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+\n+/**\n+ * Test suite for the UserDTOTranslator class.\n+ */\n+public class UserDTOTranslatorTest extends AbstractTranslatorTest<UserDTO, User, UserDTOTranslator> {\n+\n+    protected UserDTOTranslator translator = new UserDTOTranslator();\n+\n+    @Override\n+    protected void initModelTranslator(ModelTranslator modelTranslator) {\n+        modelTranslator.registerTranslator(this.translator, UserDTO.class, User.class);\n+    }\n+\n+    @Override\n+    protected UserDTOTranslator initObjectTranslator() {\n+        return this.translator;\n+    }\n+\n+    @Override\n+    protected UserDTO initSourceObject() {\n+        UserDTO userDTO = new UserDTO()\n+            .id(\"user_id\")\n+            .username(\"user_username\")\n+            .password(\"user_password\")\n+            .superAdmin(true);\n+\n+        return userDTO;\n+    }\n+\n+    @Override\n+    protected User initDestinationObject() {\n+        return new User();\n+    }\n+\n+    @Override\n+    protected void verifyOutput(UserDTO source, User dest, boolean childrenGenerated) {\n+        if (source != null) {\n+            // This DTO does not have any nested objects, so we don't need to worry about the\n+            // childrenGenerated flag\n+\n+            assertEquals(source.getId(), dest.getId());\n+            assertEquals(source.getUsername(), dest.getUsername());\n+            assertEquals(source.getSuperAdmin(), dest.isSuperAdmin());\n+\n+            assertNotNull(source.getPassword());\n+            assertNotNull(dest.getPassword());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b3f898733bc301c6490b6e452a3eb823eb7ccd4", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/9b3f898733bc301c6490b6e452a3eb823eb7ccd4", "committedDate": "2020-03-06T10:37:06Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}, "afterCommit": {"oid": "1d2345c3c85a08baf31d4f1b6165d4754e768638", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/1d2345c3c85a08baf31d4f1b6165d4754e768638", "committedDate": "2020-03-11T14:01:38Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d2345c3c85a08baf31d4f1b6165d4754e768638", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/1d2345c3c85a08baf31d4f1b6165d4754e768638", "committedDate": "2020-03-11T14:01:38Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}, "afterCommit": {"oid": "c49558da7aad11bbd0019915d848738ed58417c8", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/c49558da7aad11bbd0019915d848738ed58417c8", "committedDate": "2020-03-11T14:20:13Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02209ea04bbfa96e313b3327c31d8c896e1dc878", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/02209ea04bbfa96e313b3327c31d8c896e1dc878", "committedDate": "2020-03-11T14:40:20Z", "message": "New lines"}, "afterCommit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/d0bc304f781ffaa842799949b15043302cb42a86", "committedDate": "2020-03-11T14:48:54Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzc3MjAy", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-373377202", "createdAt": "2020-03-12T09:04:19Z", "commit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOTowNDoxOVrOF1WHFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOTowNDoxOVrOF1WHFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ4MTEwOA==", "bodyText": "This is setting the Updated date by getting the Created", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r391481108", "createdAt": "2020-03-12T09:04:19Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/PermissionBlueprintDTOTranslator.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.auth.Access;\n+import org.candlepin.auth.permissions.PermissionFactory;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.dto.ObjectTranslator;\n+import org.candlepin.model.Owner;\n+import org.candlepin.model.PermissionBlueprint;\n+\n+import java.util.Date;\n+\n+/**\n+ * The PermissionBlueprintDTOTranslator provides translation\n+ * from PermissionBlueprintDTO to PermissionBlueprint model objects.\n+ */\n+\n+public class PermissionBlueprintDTOTranslator implements\n+    ObjectTranslator<PermissionBlueprintDTO, PermissionBlueprint> {\n+    @Override\n+    public PermissionBlueprint translate(PermissionBlueprintDTO source) {\n+        return this.translate(null, source);\n+    }\n+\n+    @Override\n+    public PermissionBlueprint translate(ModelTranslator modelTranslator, PermissionBlueprintDTO source) {\n+        return source != null ?\n+            this.populate(modelTranslator, source, new PermissionBlueprint()) : null;\n+    }\n+\n+    @Override\n+    public PermissionBlueprint populate(PermissionBlueprintDTO source, PermissionBlueprint destination) {\n+        return this.populate(null, source, destination);\n+    }\n+\n+    @Override\n+    public PermissionBlueprint populate(ModelTranslator modelTranslator,\n+        PermissionBlueprintDTO source, PermissionBlueprint destination) {\n+\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n+\n+        if (destination == null) {\n+            throw new IllegalArgumentException(\"destination is null\");\n+        }\n+\n+        destination.setCreated(source.getCreated() != null ?\n+            new Date(source.getCreated().toInstant().toEpochMilli()) : null);\n+        destination.setUpdated(source.getUpdated() != null ?\n+            new Date(source.getCreated().toInstant().toEpochMilli()) : null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzkxOTEz", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-373391913", "createdAt": "2020-03-12T09:26:27Z", "commit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOToyNjoyN1rOF1W0LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOToyNjoyN1rOF1W0LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MjY1Mg==", "bodyText": "There shouldn't be a space between class javadoc and class definition. What I meant in the other comments was that there should be space between class definition and the next thing (in that case the @Override annotation of the first method", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r391492652", "createdAt": "2020-03-12T09:26:27Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/NestedOwnerDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.Owner;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * Test suite for the NestedOwnerDTOTranslator class.\n+ */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzkyNzgw", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-373392780", "createdAt": "2020-03-12T09:27:43Z", "commit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOToyNzo0M1rOF1W2-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOToyNzo0M1rOF1W2-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MzM2OA==", "bodyText": "Same here (and all other classes), no space between javadoc and class definition", "url": "https://github.com/candlepin/candlepin/pull/2633#discussion_r391493368", "createdAt": "2020-03-12T09:27:43Z", "author": {"login": "nikosmoum"}, "path": "server/src/test/java/org/candlepin/dto/api/v1/PermissionBlueprintDTOTranslatorTest.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/**\n+ * Copyright (c) 2009 - 2020 Red Hat, Inc.\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package org.candlepin.dto.api.v1;\n+\n+import org.candlepin.auth.Access;\n+import org.candlepin.auth.permissions.PermissionFactory;\n+import org.candlepin.dto.AbstractTranslatorTest;\n+import org.candlepin.dto.ModelTranslator;\n+import org.candlepin.model.PermissionBlueprint;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNull;\n+\n+/**\n+ * Test suite for the PermissionBlueprintDTOTranslator class.\n+ */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b3f27ce6ca24d0edbca2b9ef419e9cb679b5fb9", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/1b3f27ce6ca24d0edbca2b9ef419e9cb679b5fb9", "committedDate": "2020-03-13T10:40:34Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0bc304f781ffaa842799949b15043302cb42a86", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/d0bc304f781ffaa842799949b15043302cb42a86", "committedDate": "2020-03-11T14:48:54Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}, "afterCommit": {"oid": "1b3f27ce6ca24d0edbca2b9ef419e9cb679b5fb9", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/1b3f27ce6ca24d0edbca2b9ef419e9cb679b5fb9", "committedDate": "2020-03-13T10:40:34Z", "message": "ENT-1865:\u00a0Port RoleDTO to openapi spec\n - Added specifications\u00a0of\u00a0PermissionBlueprintDTO,\u00a0RoleDTO\u00a0\n   and\u00a0UserDTO\u00a0in yaml file.\n - Added Translator to convert DTOs into Model Entities\n   because\u00a0newly generated DTOs do not implement Info interfaces.\n   1.\u00a0NestedOwnerDTOTranslator\n   2.\u00a0PermissionBlueprintDTOTranslator\n   3.\u00a0RoleDTOTranslator\n   4. UserDTOTranslator\n - Added test suites for above translators\n - Updated the default constructor of\u00a0PermissionBlueprint to the public\n   because\u00a0it is used to create an empty object in\u00a0PermissionBlueprintDTOTranslator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MjI0OTM3", "url": "https://github.com/candlepin/candlepin/pull/2633#pullrequestreview-374224937", "createdAt": "2020-03-13T11:23:01Z", "commit": {"oid": "1b3f27ce6ca24d0edbca2b9ef419e9cb679b5fb9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2531, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}