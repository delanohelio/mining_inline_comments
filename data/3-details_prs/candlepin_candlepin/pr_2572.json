{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNzM4MzAx", "number": 2572, "title": "Add custom openapi vendor extension to override collection type", "bodyText": "Add custom openapi vendor extension to override collection type\nThis makes it so that if for an operation you specify a line such as:\nx-java-response-container-type: java.util.stream.Stream\non an operation with a response return type of\nresponses:\n  200:\n    description: OK\n    content:\n      application/json:\n        schema:\n          type: array\n          items:\n            $ref: '#/components/schemas/Link'\nthen the generated return type becomes java.util.stream.Stream<Link>\nSpecifically, this goes at the same level as operationId, because there is not a easy way to get the vendor extension for a response incorporated into the return type.", "createdAt": "2020-01-16T16:35:25Z", "url": "https://github.com/candlepin/candlepin/pull/2572", "merged": true, "mergeCommit": {"oid": "93ff253c81fe5618eeaa823e5e0a24531f34a469"}, "closed": true, "closedAt": "2020-01-16T20:49:05Z", "author": {"login": "kahowell"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb69dVNgFqTM0NDA4MjQ5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6_p4VAFqTM0NDE3NDMyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MDgyNDkw", "url": "https://github.com/candlepin/candlepin/pull/2572#pullrequestreview-344082490", "createdAt": "2020-01-16T17:18:47Z", "commit": {"oid": "e7b834320939abd6f06adabfbca6094f2d089334"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNzoxODo0N1rOFehViA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNzoxODo0N1rOFehViA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU0Nzc4NA==", "bodyText": "We can do something like:\n{{container_type}}{{^container_type}}java.util.List{{/container_type}}\nto have a default value of List so the standard behavior is retained, while still allowing us to provide our own containers for arrays.", "url": "https://github.com/candlepin/candlepin/pull/2572#discussion_r367547784", "createdAt": "2020-01-16T17:18:47Z", "author": {"login": "Ceiu"}, "path": "buildSrc/src/main/resources/templates/returnTypeInterface.mustache", "diffHunk": "@@ -0,0 +1 @@\n+{{#vendorExtensions.x-java-response-stream-type}}java.util.stream.Stream<{{vendorExtensions.x-java-response-stream-type}}>{{/vendorExtensions.x-java-response-stream-type}}{{^vendorExtensions.x-java-response-stream-type}}{{{returnType}}}{{/vendorExtensions.x-java-response-stream-type}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7b834320939abd6f06adabfbca6094f2d089334"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abdfa061678a56190503e9bc91dc777937977519", "author": {"user": {"login": "kahowell", "name": "Kevin Howell"}}, "url": "https://github.com/candlepin/candlepin/commit/abdfa061678a56190503e9bc91dc777937977519", "committedDate": "2020-01-16T18:47:21Z", "message": "Add custom openapi vendor extension to override collection type\n\nThis makes it so that if for an operation you specify a line such as:\n\n```yaml\nx-java-response-container-type: java.util.stream.Stream\n```\n\non an operation with a response return type of\n\n```yaml\nresponses:\n  200:\n    description: OK\n    content:\n      application/json:\n        schema:\n          type: array\n          items:\n            $ref: '#/components/schemas/Link'\n```\n\nthen the generated return type becomes `java.util.stream.Stream<Link>`\n\nSpecifically, this goes at the same level as `operationId`, because\nthere is not a easy way to get the vendor extension for a response\nincorporated into the return type."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7b834320939abd6f06adabfbca6094f2d089334", "author": {"user": {"login": "kahowell", "name": "Kevin Howell"}}, "url": "https://github.com/candlepin/candlepin/commit/e7b834320939abd6f06adabfbca6094f2d089334", "committedDate": "2020-01-16T16:34:56Z", "message": "Add custom openapi vendor extension to return Stream\n\nThis makes it so that if for an operation you specify a line such as:\n\n```yaml\nx-java-response-stream-type: Customer\n```\n\nthen the generated return type becomes `java.util.stream.Stream<Customer>`\n\nSpecifically, this goes at the same level as `operationId`."}, "afterCommit": {"oid": "abdfa061678a56190503e9bc91dc777937977519", "author": {"user": {"login": "kahowell", "name": "Kevin Howell"}}, "url": "https://github.com/candlepin/candlepin/commit/abdfa061678a56190503e9bc91dc777937977519", "committedDate": "2020-01-16T18:47:21Z", "message": "Add custom openapi vendor extension to override collection type\n\nThis makes it so that if for an operation you specify a line such as:\n\n```yaml\nx-java-response-container-type: java.util.stream.Stream\n```\n\non an operation with a response return type of\n\n```yaml\nresponses:\n  200:\n    description: OK\n    content:\n      application/json:\n        schema:\n          type: array\n          items:\n            $ref: '#/components/schemas/Link'\n```\n\nthen the generated return type becomes `java.util.stream.Stream<Link>`\n\nSpecifically, this goes at the same level as `operationId`, because\nthere is not a easy way to get the vendor extension for a response\nincorporated into the return type."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24d4e3d242d514c787198701fe8220b38717ffc7", "author": {"user": {"login": "kahowell", "name": "Kevin Howell"}}, "url": "https://github.com/candlepin/candlepin/commit/24d4e3d242d514c787198701fe8220b38717ffc7", "committedDate": "2020-01-16T18:57:00Z", "message": "Specify template directory relative to $rootDir"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MTc0MjI3", "url": "https://github.com/candlepin/candlepin/pull/2572#pullrequestreview-344174227", "createdAt": "2020-01-16T19:52:09Z", "commit": {"oid": "abdfa061678a56190503e9bc91dc777937977519"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MTc0MzIw", "url": "https://github.com/candlepin/candlepin/pull/2572#pullrequestreview-344174320", "createdAt": "2020-01-16T19:52:18Z", "commit": {"oid": "24d4e3d242d514c787198701fe8220b38717ffc7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2452, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}