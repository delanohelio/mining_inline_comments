{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNTg4MTEy", "number": 2770, "title": "ENT-2703: Jenkins isn't running unit tests of common package", "bodyText": "The project directory path is set to the server package.\nThis leads to execute the test only from the server package.\nHence added the path of commons package to execute\nthe test of commons.", "createdAt": "2020-08-04T07:37:56Z", "url": "https://github.com/candlepin/candlepin/pull/2770", "merged": true, "mergeCommit": {"oid": "867bd435550daa2e439f0f34dd3143aa45fbb3fb"}, "closed": true, "closedAt": "2020-08-04T12:53:36Z", "author": {"login": "sonalidhome"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7h8NpgFqTQ2MDU4MzAyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7lVb_gFqTQ2MDc0NDM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTgzMDI1", "url": "https://github.com/candlepin/candlepin/pull/2770#pullrequestreview-460583025", "createdAt": "2020-08-04T08:00:08Z", "commit": {"oid": "9a4fa33fec347803637e7e290756fac8f0110ff0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwODowMDowOFrOG7VdwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwODowMDowOFrOG7VdwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg3MDg0OQ==", "bodyText": "Instead of doing cd everywhere, we should simplify things, and just run .gradlew test from the root directory.\nSo here this if block would become:\n    if [ -f ./gradlew ]; then\n        ./gradlew test\n\nand later on (right before we run the unit tests), we don't cd into server/ , but cd into the root dir (so cd $PROJECT_DIR turns into cd $CP_HOME. And we only do a cd $PROJECT_DIR later, once the unit tests are finished and before we setup qpid", "url": "https://github.com/candlepin/candlepin/pull/2770#discussion_r464870849", "createdAt": "2020-08-04T08:00:08Z", "author": {"login": "nikosmoum"}, "path": "docker/candlepin-base/cp-test", "diffHunk": "@@ -45,6 +45,13 @@ build_lint() {\n build_unittest() {\n     UTCMD=$1\n     if [ -f ../gradlew ]; then\n+\n+        # set project to run units from the candlepin-common project\n+        cd ../common/\n+        ../gradlew test\n+\n+        # set project back to server\n+        cd ../server/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a4fa33fec347803637e7e290756fac8f0110ff0"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a4fa33fec347803637e7e290756fac8f0110ff0", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/9a4fa33fec347803637e7e290756fac8f0110ff0", "committedDate": "2020-08-04T07:19:43Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence added the path of commons package to execute\n   the test of commons."}, "afterCommit": {"oid": "5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "committedDate": "2020-08-04T09:31:42Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence added the path of commons package to execute\n   the test of commons."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNjk3MTcx", "url": "https://github.com/candlepin/candlepin/pull/2770#pullrequestreview-460697171", "createdAt": "2020-08-04T10:40:42Z", "commit": {"oid": "5971dd67ba669fecc8ad3641d4f9c59c190a13b4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "committedDate": "2020-08-04T09:31:42Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence added the path of commons package to execute\n   the test of commons."}, "afterCommit": {"oid": "b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "committedDate": "2020-08-04T11:42:22Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c893a8463803bf2145443ee16c4e6a3ca1ee602b", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/c893a8463803bf2145443ee16c4e6a3ca1ee602b", "committedDate": "2020-08-04T11:46:35Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "committedDate": "2020-08-04T11:42:22Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects."}, "afterCommit": {"oid": "c893a8463803bf2145443ee16c4e6a3ca1ee602b", "author": {"user": {"login": "sonalidhome", "name": "Sonali Dhome"}}, "url": "https://github.com/candlepin/candlepin/commit/c893a8463803bf2145443ee16c4e6a3ca1ee602b", "committedDate": "2020-08-04T11:46:35Z", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzQ0Mzg1", "url": "https://github.com/candlepin/candlepin/pull/2770#pullrequestreview-460744385", "createdAt": "2020-08-04T11:57:31Z", "commit": {"oid": "c893a8463803bf2145443ee16c4e6a3ca1ee602b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2291, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}