{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMzg4MTc0", "number": 2678, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NDoxM1rODwY51w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Njo1MFrODwY9Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMDY2MjYzOnYy", "diffSide": "RIGHT", "path": "server/candlepin.spec.tmpl", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NDoxM1rOGDXEpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMzowMTo0N1rOGDXrAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NjkzMg==", "bodyText": "Do we want to define the port as a variable somewhere so it's not hard coded? Is that even a thing we can do?", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406176932", "createdAt": "2020-04-09T12:44:13Z", "author": {"login": "Ceiu"}, "path": "server/candlepin.spec.tmpl", "diffHunk": "@@ -170,6 +172,7 @@ for selinuxvariant in %{selinux_variants}\n do\n   /usr/sbin/semodule -s $selinuxvariant -i %{_datadir}/selinux/$selinuxvariant/%{modulename}.pp &> /dev/null || :\n done\n+/usr/sbin/semanage port -a -t candlepin_activemq_port_t -p tcp 61613 &> /dev/null || :", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE4MDIwMw==", "bodyText": "Given that this is in the spec file, I don't know where/how you would create a variable for it, except the spec file itself, but it would be only for readability/aesthetic reasons, not functional.", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406180203", "createdAt": "2020-04-09T12:50:14Z", "author": {"login": "nikosmoum"}, "path": "server/candlepin.spec.tmpl", "diffHunk": "@@ -170,6 +172,7 @@ for selinuxvariant in %{selinux_variants}\n do\n   /usr/sbin/semodule -s $selinuxvariant -i %{_datadir}/selinux/$selinuxvariant/%{modulename}.pp &> /dev/null || :\n done\n+/usr/sbin/semanage port -a -t candlepin_activemq_port_t -p tcp 61613 &> /dev/null || :", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NjkzMg=="}, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE4MTkyMw==", "bodyText": "Oh yeah... missed that. It looks like bash scripting; though I can't quite figure out exactly what that double pipe is doing at the end. Is that just to suppress any error output from the command?", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406181923", "createdAt": "2020-04-09T12:53:22Z", "author": {"login": "Ceiu"}, "path": "server/candlepin.spec.tmpl", "diffHunk": "@@ -170,6 +172,7 @@ for selinuxvariant in %{selinux_variants}\n do\n   /usr/sbin/semodule -s $selinuxvariant -i %{_datadir}/selinux/$selinuxvariant/%{modulename}.pp &> /dev/null || :\n done\n+/usr/sbin/semanage port -a -t candlepin_activemq_port_t -p tcp 61613 &> /dev/null || :", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NjkzMg=="}, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE4Njc1Mw==", "bodyText": "It is running bash commands, since this is inside a #raw block: https://stackoverflow.com/questions/16357755/meaning-of-colon-in-bash-after-a-double-pipe#comment23436601_16357803\nAlso, other commands were using it, so I added without much thought", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406186753", "createdAt": "2020-04-09T13:01:47Z", "author": {"login": "nikosmoum"}, "path": "server/candlepin.spec.tmpl", "diffHunk": "@@ -170,6 +172,7 @@ for selinuxvariant in %{selinux_variants}\n do\n   /usr/sbin/semodule -s $selinuxvariant -i %{_datadir}/selinux/$selinuxvariant/%{modulename}.pp &> /dev/null || :\n done\n+/usr/sbin/semanage port -a -t candlepin_activemq_port_t -p tcp 61613 &> /dev/null || :", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NjkzMg=="}, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMDY2NzE0OnYy", "diffSide": "RIGHT", "path": "server/selinux/candlepin.te", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NTozN1rOGDXHfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDo0Njo1NFrOGDcEzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NzY2Mg==", "bodyText": "Indentation is a bit wonky here", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406177662", "createdAt": "2020-04-09T12:45:37Z", "author": {"login": "Ceiu"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -1,10 +1,19 @@\n-policy_module(candlepin, 1.0.0)\n+policy_module(candlepin, 1.1.0)\n \n ########################################\n #\n # Declarations\n #\n \n+## <desc>\n+##      <p>\n+##\t    Allow tomcat to bind to the port used\n+##\t    by candlepin's embedded activemq artemis,\n+##\t    labeled candlepin_activemq_port_t\n+##\t    </p>\n+## </desc>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI1ODg5NA==", "bodyText": "fixed", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406258894", "createdAt": "2020-04-09T14:46:54Z", "author": {"login": "nikosmoum"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -1,10 +1,19 @@\n-policy_module(candlepin, 1.0.0)\n+policy_module(candlepin, 1.1.0)\n \n ########################################\n #\n # Declarations\n #\n \n+## <desc>\n+##      <p>\n+##\t    Allow tomcat to bind to the port used\n+##\t    by candlepin's embedded activemq artemis,\n+##\t    labeled candlepin_activemq_port_t\n+##\t    </p>\n+## </desc>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NzY2Mg=="}, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMDY3MTA3OnYy", "diffSide": "RIGHT", "path": "server/selinux/candlepin.te", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Njo1MFrOGDXKBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDo0Njo1N1rOGDcE_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3ODMxMQ==", "bodyText": "Indentation again. Looks like a tab instead of spaces?", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406178311", "createdAt": "2020-04-09T12:46:50Z", "author": {"login": "Ceiu"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -103,3 +115,7 @@ allow tomcat_t candlepin_var_lib_t:file { manage_file_perms };\n allow tomcat_t candlepin_var_log_t:dir { manage_dir_perms };\n allow tomcat_t candlepin_var_log_t:file { manage_file_perms };\n allow tomcat_t postgresql_port_t:tcp_socket name_connect;\n+\n+tunable_policy(`candlepin_can_bind_activemq_port',`\n+\tallow tomcat_t candlepin_activemq_port_t:tcp_socket name_bind;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI1ODk0Mg==", "bodyText": "fixed", "url": "https://github.com/candlepin/candlepin/pull/2678#discussion_r406258942", "createdAt": "2020-04-09T14:46:57Z", "author": {"login": "nikosmoum"}, "path": "server/selinux/candlepin.te", "diffHunk": "@@ -103,3 +115,7 @@ allow tomcat_t candlepin_var_lib_t:file { manage_file_perms };\n allow tomcat_t candlepin_var_log_t:dir { manage_dir_perms };\n allow tomcat_t candlepin_var_log_t:file { manage_file_perms };\n allow tomcat_t postgresql_port_t:tcp_socket name_connect;\n+\n+tunable_policy(`candlepin_can_bind_activemq_port',`\n+\tallow tomcat_t candlepin_activemq_port_t:tcp_socket name_bind;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3ODMxMQ=="}, "originalCommit": {"oid": "fa1ddb879d350ada833c7005ec5f7fe184b4af57"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4142, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}