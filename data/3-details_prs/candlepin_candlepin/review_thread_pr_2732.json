{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NzQwMzEw", "number": 2732, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxMTo0M1rOEIzgIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOToyNDoxNlrOEK0WQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjY3ODcyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/candlepin/resource/ConsumerResource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxMTo0M1rOGo_T-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDo0MFrOGqtGeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzMzUzMQ==", "bodyText": "There are a few more API endpoints where ConsumerDTO is being returned in a list/array:\nConsumerResource.getGuests\nOwnerResource.listConsumers\nOwnerResource.getHypervisors\nThey should all be changed to return ConsumerDTOArrayElement instead", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r445633531", "createdAt": "2020-06-25T15:11:43Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/resource/ConsumerResource.java", "diffHunk": "@@ -408,7 +409,7 @@ public void sanitizeConsumerFacts(Consumer consumer) {\n     @Produces(MediaType.APPLICATION_JSON)\n     @Wrapped(element = \"consumers\")\n     @SuppressWarnings(\"checkstyle:indentation\")\n-    public CandlepinQuery<ConsumerDTO> list(@QueryParam(\"username\") String userName,\n+    public CandlepinQuery<ConsumerDTOArrayElement> list(@QueryParam(\"username\") String userName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjMxNA==", "bodyText": "Right, Updated the methods.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432314", "createdAt": "2020-06-30T06:10:40Z", "author": {"login": "sonalidhome"}, "path": "server/src/main/java/org/candlepin/resource/ConsumerResource.java", "diffHunk": "@@ -408,7 +409,7 @@ public void sanitizeConsumerFacts(Consumer consumer) {\n     @Produces(MediaType.APPLICATION_JSON)\n     @Wrapped(element = \"consumers\")\n     @SuppressWarnings(\"checkstyle:indentation\")\n-    public CandlepinQuery<ConsumerDTO> list(@QueryParam(\"username\") String userName,\n+    public CandlepinQuery<ConsumerDTOArrayElement> list(@QueryParam(\"username\") String userName,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzMzUzMQ=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcxMDc5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/candlepin/dto/api/v1/ConsumerInstalledProductTranslator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxOTowM1rOGo_ofQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDozN1rOGqtGag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODc4MQ==", "bodyText": "Since this class no longer extends the TimestampedEntityTranslator, we should manually set the created and updated fields here.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r445638781", "createdAt": "2020-06-25T15:19:03Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/ConsumerInstalledProductTranslator.java", "diffHunk": "@@ -58,16 +59,22 @@ public ConsumerInstalledProductDTO populate(ConsumerInstalledProduct source,\n     public ConsumerInstalledProductDTO populate(ModelTranslator translator, ConsumerInstalledProduct source,\n         ConsumerInstalledProductDTO dest) {\n \n-        dest = super.populate(translator, source, dest);\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n \n-        dest.setId(source.getId());\n-        dest.setProductId(source.getProductId());\n-        dest.setProductName(source.getProductName());\n-        dest.setVersion(source.getVersion());\n-        dest.setArch(source.getArch());\n-        dest.setStatus(source.getStatus());\n-        dest.setStartDate(source.getStartDate());\n-        dest.setEndDate(source.getEndDate());\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"dest is null\");\n+        }\n+\n+        dest.id(source.getId())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjI5OA==", "bodyText": "Corrected.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432298", "createdAt": "2020-06-30T06:10:37Z", "author": {"login": "sonalidhome"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/ConsumerInstalledProductTranslator.java", "diffHunk": "@@ -58,16 +59,22 @@ public ConsumerInstalledProductDTO populate(ConsumerInstalledProduct source,\n     public ConsumerInstalledProductDTO populate(ModelTranslator translator, ConsumerInstalledProduct source,\n         ConsumerInstalledProductDTO dest) {\n \n-        dest = super.populate(translator, source, dest);\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n \n-        dest.setId(source.getId());\n-        dest.setProductId(source.getProductId());\n-        dest.setProductName(source.getProductName());\n-        dest.setVersion(source.getVersion());\n-        dest.setArch(source.getArch());\n-        dest.setStatus(source.getStatus());\n-        dest.setStartDate(source.getStartDate());\n-        dest.setEndDate(source.getEndDate());\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"dest is null\");\n+        }\n+\n+        dest.id(source.getId())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODc4MQ=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcxMzkyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/candlepin/dto/api/v1/HypervisorIdTranslator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxOTo1MlrOGo_qsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDozNVrOGqtGVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzOTM0NA==", "bodyText": "Since this class no longer extends the TimestampedEntityTranslator, we should manually set the created and updated fields here.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r445639344", "createdAt": "2020-06-25T15:19:52Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/HypervisorIdTranslator.java", "diffHunk": "@@ -55,13 +55,17 @@ public HypervisorIdDTO populate(HypervisorId source, HypervisorIdDTO dest) {\n     public HypervisorIdDTO populate(ModelTranslator translator, HypervisorId source,\n         HypervisorIdDTO dest) {\n \n-        dest = super.populate(translator, source, dest);\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n \n-        dest.setId(source.getId() != null ? source.getId().toString() : null);\n-        dest.setHypervisorId(source.getHypervisorId());\n-        dest.setReporterId(source.getReporterId());\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"dest is null\");\n+        }\n \n-        return dest;\n+        return dest.id(source.getId() != null ? source.getId().toString() : null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjI3Ng==", "bodyText": "Updated.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432276", "createdAt": "2020-06-30T06:10:35Z", "author": {"login": "sonalidhome"}, "path": "server/src/main/java/org/candlepin/dto/api/v1/HypervisorIdTranslator.java", "diffHunk": "@@ -55,13 +55,17 @@ public HypervisorIdDTO populate(HypervisorId source, HypervisorIdDTO dest) {\n     public HypervisorIdDTO populate(ModelTranslator translator, HypervisorId source,\n         HypervisorIdDTO dest) {\n \n-        dest = super.populate(translator, source, dest);\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"source is null\");\n+        }\n \n-        dest.setId(source.getId() != null ? source.getId().toString() : null);\n-        dest.setHypervisorId(source.getHypervisorId());\n-        dest.setReporterId(source.getReporterId());\n+        if (dest == null) {\n+            throw new IllegalArgumentException(\"dest is null\");\n+        }\n \n-        return dest;\n+        return dest.id(source.getId() != null ? source.getId().toString() : null)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzOTM0NA=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDI0MjU3OnYy", "diffSide": "RIGHT", "path": "buildSrc/src/main/resources/templates/pojo.mustache", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDowMjoxMFrOGpiGOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzoyNjozM1rOGrl02A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIwMzQ1MA==", "bodyText": "Since this will be recognized as a getter, will this show up as an additional field to the serialized DTOs?", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446203450", "createdAt": "2020-06-26T14:02:10Z", "author": {"login": "Ceiu"}, "path": "buildSrc/src/main/resources/templates/pojo.mustache", "diffHunk": "@@ -86,6 +86,14 @@ public class {{classname}} {{#parent}}extends {{{parent}}}{{/parent}} {{#seriali\n \n     return this;\n   }\n+\n+  public {{items.datatypeWithEnum}} get{{nameInCamelCase}}Value({{{items.datatypeWithEnum}}} {{name}}Key) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkxMjQ2Nw==", "bodyText": "This method will be generated for all auto-generated DTOs.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446912467", "createdAt": "2020-06-29T11:55:04Z", "author": {"login": "sonalidhome"}, "path": "buildSrc/src/main/resources/templates/pojo.mustache", "diffHunk": "@@ -86,6 +86,14 @@ public class {{classname}} {{#parent}}extends {{{parent}}}{{/parent}} {{#seriali\n \n     return this;\n   }\n+\n+  public {{items.datatypeWithEnum}} get{{nameInCamelCase}}Value({{{items.datatypeWithEnum}}} {{name}}Key) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIwMzQ1MA=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMxNzc5MA==", "bodyText": "I don't think it will be recognized as a getter, since it has accepts an argument", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448317790", "createdAt": "2020-07-01T12:07:50Z", "author": {"login": "nikosmoum"}, "path": "buildSrc/src/main/resources/templates/pojo.mustache", "diffHunk": "@@ -86,6 +86,14 @@ public class {{classname}} {{#parent}}extends {{{parent}}}{{/parent}} {{#seriali\n \n     return this;\n   }\n+\n+  public {{items.datatypeWithEnum}} get{{nameInCamelCase}}Value({{{items.datatypeWithEnum}}} {{name}}Key) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIwMzQ1MA=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM2MTY4OA==", "bodyText": "hmm, I'll revert the template changes rather create a new method inside ConsumerResource.java. Template changes could difficult to keep track on. We'll have to update this in OpenAPIGenerator.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448361688", "createdAt": "2020-07-01T13:26:33Z", "author": {"login": "sonalidhome"}, "path": "buildSrc/src/main/resources/templates/pojo.mustache", "diffHunk": "@@ -86,6 +86,14 @@ public class {{classname}} {{#parent}}extends {{{parent}}}{{/parent}} {{#seriali\n \n     return this;\n   }\n+\n+  public {{items.datatypeWithEnum}} get{{nameInCamelCase}}Value({{{items.datatypeWithEnum}}} {{name}}Key) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIwMzQ1MA=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDM1MDk2OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDozMzoxMFrOGpjMbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDoxN1rOGqtF4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTQyMQ==", "bodyText": "I believe, since this GuestIdDTO is within a list, we should instead use the GuestIdDTOArrayElement here.\nI am not 100% sure though, so before doing that, you could check what current master does (e.g. does a GET /consumer/{consumer_uuid} for a consumer that has guest ids that themselves have attributes return the attributes too?)", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446221421", "createdAt": "2020-06-26T14:33:10Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjE2Mg==", "bodyText": "We are setting empty guest details for every Consumer translation to ConsumerDTO. \n  \n    \n      candlepin/server/src/main/java/org/candlepin/dto/api/v1/ConsumerTranslator.java\n    \n    \n         Line 176\n      in\n      3c74b22\n    \n    \n    \n    \n\n        \n          \n           dest.setGuestIds(new ArrayList<>()); \n        \n    \n  \n\n\nHence there is no need to update the GuestIdDTOArrayElement here.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432162", "createdAt": "2020-06-30T06:10:17Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTQyMQ=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDM2MDc5OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDozNjowMlrOGpjS5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDoyMlrOGqtGBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMzA3Ng==", "bodyText": "should be something like Represents a reduced view of a consumer (excluding data like facts and identify certificate)", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446223076", "createdAt": "2020-06-26T14:36:02Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a consumer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjE5OA==", "bodyText": "Updated.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432198", "createdAt": "2020-06-30T06:10:22Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a consumer", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMzA3Ng=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 95}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDM2NjgxOnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDozNzo0MVrOGpjWoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDoyNFrOGqtGEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyNDAzMg==", "bodyText": "was allOf added here by accident?", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446224032", "createdAt": "2020-06-26T14:37:41Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjIwOQ==", "bodyText": "Yes, I was initially trying out an option writeOnly: true. Later removed but allOf remained to delete.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432209", "createdAt": "2020-06-30T06:10:24Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,196 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                allOf:\n+                  - $ref: '#/components/schemas/CertificateDTO'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyNDAzMg=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDQxMjcwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/candlepin/jackson/ConsumerTypeDeserializer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDo1MDo0NFrOGpj0zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjoxMDoyN1rOGqtGJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMTc1OA==", "bodyText": "Why are we substituting the fieldName variable in all of these strings? It's a static variable with the value 'label' that never gets reassigned as far as I can see, so there's not point. Specifically about the exception messages, we should try to keep them the same (or similar) to before, since 'Unexpected consumer type format:' is much clearer than 'The field label is missing from: '", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r446231758", "createdAt": "2020-06-26T14:50:44Z", "author": {"login": "nikosmoum"}, "path": "server/src/main/java/org/candlepin/jackson/ConsumerTypeDeserializer.java", "diffHunk": "@@ -16,77 +16,69 @@\n \n import org.candlepin.common.exceptions.CandlepinJsonProcessingException;\n import org.candlepin.dto.api.v1.ConsumerTypeDTO;\n-import org.candlepin.model.ConsumerType.ConsumerTypeEnum;\n \n import com.fasterxml.jackson.core.JsonParser;\n-import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.core.TreeNode;\n import com.fasterxml.jackson.databind.DeserializationContext;\n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n \n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n import java.io.IOException;\n \n-\n-\n /**\n- * The ConsumerTypeDeserializer handles deserialization of consumer types defined as strings or\n- * objects on existing objects.\n+ * Handles the deserialization of the \"label\" field by wrapping it in a {@link ConsumerTypeDTO} object,\n+ * by handling both of the following formats: <pre> {@code \"type\":\"value\" } </pre> and\n+ * <pre> {@code \"type\":{\"label \":\"value\", \"manifest\":\"value\"} } </pre>.\n  */\n-public class ConsumerTypeDeserializer extends StdDeserializer<ConsumerTypeDTO> {\n-    private static Logger log = LoggerFactory.getLogger(ConsumerTypeDeserializer.class);\n+public class ConsumerTypeDeserializer extends JsonDeserializer<ConsumerTypeDTO> {\n \n-    public ConsumerTypeDeserializer() {\n-        this(null);\n-    }\n+    private static Logger log = LoggerFactory.getLogger(ConsumerTypeDeserializer.class);\n \n-    public ConsumerTypeDeserializer(Class<?> valueClass) {\n-        super(valueClass);\n-    }\n+    private static String fieldName = \"label\";\n \n     @Override\n     public ConsumerTypeDTO deserialize(JsonParser parser, DeserializationContext context)\n-        throws IOException, JsonProcessingException {\n+        throws IOException {\n \n-        // We're expecting an object or a string\n-        switch (parser.currentToken()) {\n-            case START_OBJECT:\n-                return this.parseTypeFromObject(parser);\n+        TreeNode node = parser.readValueAsTree();\n \n-            case VALUE_STRING:\n-                return this.parseTypeFromString(parser);\n+        if (node.isValueNode()) {\n+            log.debug(\"Processing {} as a value node.\", fieldName);\n \n-            default:\n-                throw new CandlepinJsonProcessingException(\"Unexpected consumer type format: \" +\n-                    parser.readValueAsTree(), parser.getCurrentLocation());\n+            return parseValueNode(node);\n+        }\n+        else if (node.isObject()) {\n+            log.debug(\"Processing {} as a containing object node.\", fieldName);\n+\n+            TreeNode valueNode = node.path(fieldName);\n+            if (valueNode.isMissingNode()) {\n+                throw new CandlepinJsonProcessingException(\n+                    \"The field \" + fieldName + \" is missing from: \" + node.asToken(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQzMjIzMQ==", "bodyText": "Agreed, Updated the exception messages.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r447432231", "createdAt": "2020-06-30T06:10:27Z", "author": {"login": "sonalidhome"}, "path": "server/src/main/java/org/candlepin/jackson/ConsumerTypeDeserializer.java", "diffHunk": "@@ -16,77 +16,69 @@\n \n import org.candlepin.common.exceptions.CandlepinJsonProcessingException;\n import org.candlepin.dto.api.v1.ConsumerTypeDTO;\n-import org.candlepin.model.ConsumerType.ConsumerTypeEnum;\n \n import com.fasterxml.jackson.core.JsonParser;\n-import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.core.TreeNode;\n import com.fasterxml.jackson.databind.DeserializationContext;\n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n \n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n import java.io.IOException;\n \n-\n-\n /**\n- * The ConsumerTypeDeserializer handles deserialization of consumer types defined as strings or\n- * objects on existing objects.\n+ * Handles the deserialization of the \"label\" field by wrapping it in a {@link ConsumerTypeDTO} object,\n+ * by handling both of the following formats: <pre> {@code \"type\":\"value\" } </pre> and\n+ * <pre> {@code \"type\":{\"label \":\"value\", \"manifest\":\"value\"} } </pre>.\n  */\n-public class ConsumerTypeDeserializer extends StdDeserializer<ConsumerTypeDTO> {\n-    private static Logger log = LoggerFactory.getLogger(ConsumerTypeDeserializer.class);\n+public class ConsumerTypeDeserializer extends JsonDeserializer<ConsumerTypeDTO> {\n \n-    public ConsumerTypeDeserializer() {\n-        this(null);\n-    }\n+    private static Logger log = LoggerFactory.getLogger(ConsumerTypeDeserializer.class);\n \n-    public ConsumerTypeDeserializer(Class<?> valueClass) {\n-        super(valueClass);\n-    }\n+    private static String fieldName = \"label\";\n \n     @Override\n     public ConsumerTypeDTO deserialize(JsonParser parser, DeserializationContext context)\n-        throws IOException, JsonProcessingException {\n+        throws IOException {\n \n-        // We're expecting an object or a string\n-        switch (parser.currentToken()) {\n-            case START_OBJECT:\n-                return this.parseTypeFromObject(parser);\n+        TreeNode node = parser.readValueAsTree();\n \n-            case VALUE_STRING:\n-                return this.parseTypeFromString(parser);\n+        if (node.isValueNode()) {\n+            log.debug(\"Processing {} as a value node.\", fieldName);\n \n-            default:\n-                throw new CandlepinJsonProcessingException(\"Unexpected consumer type format: \" +\n-                    parser.readValueAsTree(), parser.getCurrentLocation());\n+            return parseValueNode(node);\n+        }\n+        else if (node.isObject()) {\n+            log.debug(\"Processing {} as a containing object node.\", fieldName);\n+\n+            TreeNode valueNode = node.path(fieldName);\n+            if (valueNode.isMissingNode()) {\n+                throw new CandlepinJsonProcessingException(\n+                    \"The field \" + fieldName + \" is missing from: \" + node.asToken(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMTc1OA=="}, "originalCommit": {"oid": "720066db86da9c0529832498453d2b8c57286288"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NDMyMzM5OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjoxOToyN1rOGrjfoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwODo0OToxOVrOGsDiLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyMzQ4OA==", "bodyText": "this field should be added in the required: list, and also have the minLength: 1 property added since ConsumerDTO is currently throwing an exception when it's null or empty", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448323488", "createdAt": "2020-07-01T12:19:27Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a reduced view of a consumer (excluding data like facts and identify certificate)\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+            uuid:\n+              type: string\n+            name:\n+              type: string\n+            username:\n+              type: string\n+            entitlementStatus:\n+              type: string\n+            serviceLevel:\n+              type: string\n+            role:\n+              type: string\n+            usage:\n+              type: string\n+            addOns:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            systemPurposeStatus:\n+              type: string\n+            releaseVer:\n+              $ref: '#/components/schemas/ReleaseVerDTO'\n+            owner:\n+              $ref: '#/components/schemas/NestedOwnerDTO'\n+            environment:\n+              $ref: '#/components/schemas/EnvironmentDTO'\n+            entitlementCount:\n+              type: integer\n+              format: int64\n+            lastCheckin:\n+              type: string\n+              format: date-time\n+            installedProducts:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+            canActivate:\n+              type: boolean\n+            capabilities:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/CapabilityDTO'\n+            hypervisorId:\n+              $ref: '#/components/schemas/HypervisorIdDTO'\n+            contentTags:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            autoheal:\n+              type: boolean\n+            annotations:\n+              type: string\n+            contentAccessMode:\n+              type: string\n+            type:\n+              $ref: '#/components/schemas/ConsumerTypeDTO'\n+            guestIds:\n+              type: array\n+              items:\n+                $ref: '#/components/schemas/GuestIdDTOArrayElement'\n+            href:\n+              type: string\n+\n+    ConsumerInstalledProductDTO:\n+      description: Represents consumer installed product details\n+      allOf:\n+          - $ref: '#/components/schemas/TimestampedEntity'\n+          - type: object\n+            properties:\n+              id:\n+                type: string\n+              productId:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 176}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg0ODQyOQ==", "bodyText": "Added.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448848429", "createdAt": "2020-07-02T08:49:19Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a reduced view of a consumer (excluding data like facts and identify certificate)\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+            uuid:\n+              type: string\n+            name:\n+              type: string\n+            username:\n+              type: string\n+            entitlementStatus:\n+              type: string\n+            serviceLevel:\n+              type: string\n+            role:\n+              type: string\n+            usage:\n+              type: string\n+            addOns:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            systemPurposeStatus:\n+              type: string\n+            releaseVer:\n+              $ref: '#/components/schemas/ReleaseVerDTO'\n+            owner:\n+              $ref: '#/components/schemas/NestedOwnerDTO'\n+            environment:\n+              $ref: '#/components/schemas/EnvironmentDTO'\n+            entitlementCount:\n+              type: integer\n+              format: int64\n+            lastCheckin:\n+              type: string\n+              format: date-time\n+            installedProducts:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+            canActivate:\n+              type: boolean\n+            capabilities:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/CapabilityDTO'\n+            hypervisorId:\n+              $ref: '#/components/schemas/HypervisorIdDTO'\n+            contentTags:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            autoheal:\n+              type: boolean\n+            annotations:\n+              type: string\n+            contentAccessMode:\n+              type: string\n+            type:\n+              $ref: '#/components/schemas/ConsumerTypeDTO'\n+            guestIds:\n+              type: array\n+              items:\n+                $ref: '#/components/schemas/GuestIdDTOArrayElement'\n+            href:\n+              type: string\n+\n+    ConsumerInstalledProductDTO:\n+      description: Represents consumer installed product details\n+      allOf:\n+          - $ref: '#/components/schemas/TimestampedEntity'\n+          - type: object\n+            properties:\n+              id:\n+                type: string\n+              productId:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyMzQ4OA=="}, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 176}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NDMyOTk3OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjoyMToyMlrOGrjjoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwODo0ODo1NlrOGsDhRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyNDUxMw==", "bodyText": "this field should be added in the required: list, and also have the minLength: 1 property added, since ConsumerDTO is currently throwing an exception when it's null or empty", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448324513", "createdAt": "2020-07-01T12:21:22Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg0ODE5Ng==", "bodyText": "Added.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448848196", "createdAt": "2020-07-02T08:48:56Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyNDUxMw=="}, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NDY5MDg3OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzo1OTowMVrOGrnHCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMToxMToyNVrOGsISBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4MjczMA==", "bodyText": "Since ConsumerDTO is currently throwing an exception when the GuestIdDTO.guestId field is null, we should add that field in the required: list in  GuestIdDTO and GuestIdDTOArrayElement specifications.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448382730", "createdAt": "2020-07-01T13:59:01Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg0OTY5Nw==", "bodyText": "Added.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448849697", "createdAt": "2020-07-02T08:51:20Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4MjczMA=="}, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2NDk4Mg==", "bodyText": "It's not the id field that needs to be in required:, but the guestId one", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448864982", "createdAt": "2020-07-02T09:16:43Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4MjczMA=="}, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODkyNjIxNA==", "bodyText": "corrected.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448926214", "createdAt": "2020-07-02T11:11:25Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,195 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4MjczMA=="}, "originalCommit": {"oid": "830c3e90d60fc2b9eecf0fb082f3e11145431463"}, "originalPosition": 89}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Nzc4NTE3OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOToyMzoxM1rOGsExng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMTowOToyOFrOGsIOjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2ODc2Ng==", "bodyText": "One more thing: the required: property is not recognized in this place, it has to be under the allOf: property (at the same level as properties:) for the annotations to be generated", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448868766", "createdAt": "2020-07-02T09:23:13Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,201 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      required:\n+        - name\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+          minLength: 1\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a reduced view of a consumer (excluding data like facts and identify certificate)\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+            uuid:\n+              type: string\n+            name:\n+              type: string\n+            username:\n+              type: string\n+            entitlementStatus:\n+              type: string\n+            serviceLevel:\n+              type: string\n+            role:\n+              type: string\n+            usage:\n+              type: string\n+            addOns:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            systemPurposeStatus:\n+              type: string\n+            releaseVer:\n+              $ref: '#/components/schemas/ReleaseVerDTO'\n+            owner:\n+              $ref: '#/components/schemas/NestedOwnerDTO'\n+            environment:\n+              $ref: '#/components/schemas/EnvironmentDTO'\n+            entitlementCount:\n+              type: integer\n+              format: int64\n+            lastCheckin:\n+              type: string\n+              format: date-time\n+            installedProducts:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+            canActivate:\n+              type: boolean\n+            capabilities:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/CapabilityDTO'\n+            hypervisorId:\n+              $ref: '#/components/schemas/HypervisorIdDTO'\n+            contentTags:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            autoheal:\n+              type: boolean\n+            annotations:\n+              type: string\n+            contentAccessMode:\n+              type: string\n+            type:\n+              $ref: '#/components/schemas/ConsumerTypeDTO'\n+            guestIds:\n+              type: array\n+              items:\n+                $ref: '#/components/schemas/GuestIdDTOArrayElement'\n+            href:\n+              type: string\n+\n+    ConsumerInstalledProductDTO:\n+      description: Represents consumer installed product details\n+      required:\n+        - productId", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODkyNTMyNA==", "bodyText": "Corrected.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448925324", "createdAt": "2020-07-02T11:09:28Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -3992,6 +3992,201 @@ components:\n             serial:\n               $ref: '#/components/schemas/CertificateSerialDTO'\n \n+    CapabilityDTO:\n+      description: Represents a consumer capability\n+      required:\n+        - name\n+      properties:\n+        id:\n+          type: string\n+        name:\n+          type: string\n+          minLength: 1\n+\n+    ConsumerDTO:\n+      description: Represents a consumer\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+              id:\n+                type: string\n+              uuid:\n+                type: string\n+              name:\n+                type: string\n+              username:\n+                type: string\n+              entitlementStatus:\n+                type: string\n+              serviceLevel:\n+                type: string\n+              role:\n+                type: string\n+              usage:\n+                type: string\n+              addOns:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              systemPurposeStatus:\n+                type: string\n+              releaseVer:\n+                $ref: '#/components/schemas/ReleaseVerDTO'\n+              owner:\n+                $ref: '#/components/schemas/NestedOwnerDTO'\n+              environment:\n+                $ref: '#/components/schemas/EnvironmentDTO'\n+              entitlementCount:\n+                type: integer\n+                format: int64\n+              facts:\n+                type: object\n+                additionalProperties:\n+                  type: string\n+              lastCheckin:\n+                type: string\n+                format: date-time\n+              installedProducts:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+              canActivate:\n+                type: boolean\n+              capabilities:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  $ref: '#/components/schemas/CapabilityDTO'\n+              hypervisorId:\n+                $ref: '#/components/schemas/HypervisorIdDTO'\n+              contentTags:\n+                type: array\n+                uniqueItems: true\n+                items:\n+                  type: string\n+              autoheal:\n+                type: boolean\n+              annotations:\n+                type: string\n+              contentAccessMode:\n+                type: string\n+              type:\n+                $ref: '#/components/schemas/ConsumerTypeDTO'\n+              idCert:\n+                $ref: '#/components/schemas/CertificateDTO'\n+              guestIds:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/GuestIdDTO'\n+              href:\n+                type: string\n+\n+    ConsumerDTOArrayElement:\n+      description: Represents a reduced view of a consumer (excluding data like facts and identify certificate)\n+      allOf:\n+        - $ref: '#/components/schemas/TimestampedEntity'\n+        - type: object\n+          properties:\n+            id:\n+              type: string\n+            uuid:\n+              type: string\n+            name:\n+              type: string\n+            username:\n+              type: string\n+            entitlementStatus:\n+              type: string\n+            serviceLevel:\n+              type: string\n+            role:\n+              type: string\n+            usage:\n+              type: string\n+            addOns:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            systemPurposeStatus:\n+              type: string\n+            releaseVer:\n+              $ref: '#/components/schemas/ReleaseVerDTO'\n+            owner:\n+              $ref: '#/components/schemas/NestedOwnerDTO'\n+            environment:\n+              $ref: '#/components/schemas/EnvironmentDTO'\n+            entitlementCount:\n+              type: integer\n+              format: int64\n+            lastCheckin:\n+              type: string\n+              format: date-time\n+            installedProducts:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/ConsumerInstalledProductDTO'\n+            canActivate:\n+              type: boolean\n+            capabilities:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                $ref: '#/components/schemas/CapabilityDTO'\n+            hypervisorId:\n+              $ref: '#/components/schemas/HypervisorIdDTO'\n+            contentTags:\n+              type: array\n+              uniqueItems: true\n+              items:\n+                type: string\n+            autoheal:\n+              type: boolean\n+            annotations:\n+              type: string\n+            contentAccessMode:\n+              type: string\n+            type:\n+              $ref: '#/components/schemas/ConsumerTypeDTO'\n+            guestIds:\n+              type: array\n+              items:\n+                $ref: '#/components/schemas/GuestIdDTOArrayElement'\n+            href:\n+              type: string\n+\n+    ConsumerInstalledProductDTO:\n+      description: Represents consumer installed product details\n+      required:\n+        - productId", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2ODc2Ng=="}, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 174}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Nzc4ODA2OnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOToyNDowN1rOGsEziA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMTowOToyMFrOGsIOVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2OTI1Ng==", "bodyText": "Same here, required: needs to be at the same level as properties: is", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448869256", "createdAt": "2020-07-02T09:24:07Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -4202,6 +4397,8 @@ components:\n \n     GuestIdDTO:\n       description: Represents a guest ID running on a virt host consumer\n+      required:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 206}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODkyNTI3MA==", "bodyText": "Corrected.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448925270", "createdAt": "2020-07-02T11:09:20Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -4202,6 +4397,8 @@ components:\n \n     GuestIdDTO:\n       description: Represents a guest ID running on a virt host consumer\n+      required:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2OTI1Ng=="}, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 206}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Nzc4ODgwOnYy", "diffSide": "RIGHT", "path": "api/candlepin-api-spec.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOToyNDoxNlrOGsEz8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMTowOToxMVrOGsIOHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2OTM2MA==", "bodyText": "Same here, required: needs to be at the same level as properties: is", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448869360", "createdAt": "2020-07-02T09:24:16Z", "author": {"login": "nikosmoum"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -4217,6 +4414,8 @@ components:\n \n     GuestIdDTOArrayElement:\n       description: Represents a guest ID running on a virt host consumer. Does not include the attributes field\n+      required:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 215}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODkyNTIxNQ==", "bodyText": "Corrected.", "url": "https://github.com/candlepin/candlepin/pull/2732#discussion_r448925215", "createdAt": "2020-07-02T11:09:11Z", "author": {"login": "sonalidhome"}, "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -4217,6 +4414,8 @@ components:\n \n     GuestIdDTOArrayElement:\n       description: Represents a guest ID running on a virt host consumer. Does not include the attributes field\n+      required:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2OTM2MA=="}, "originalCommit": {"oid": "986bfb0f6d8fc7e0ce68d34db8ead8e67cb1c2be"}, "originalPosition": 215}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4226, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}