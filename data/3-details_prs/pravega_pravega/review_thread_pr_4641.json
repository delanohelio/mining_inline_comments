{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyOTE0NTAy", "number": 4641, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjowMjozN1rODs9Udw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjowMjozN1rODs9Udw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDY4NTk5OnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/io/pravega/controller/store/stream/PravegaTablesStoreHelper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjowMjozN1rOF-GeYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNTowNToyM1rOF-aXrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY2MjExMg==", "bodyText": "This change causes a slight change in the behavior of the controller wrt to createScope().\nThis change prevents retries in the case of `ConnectionDropped` or `ConnectionFailed`. In the case of `createScope()` \nworkflow, this will prevent retries by the controller. And in this scenario the retries of the client would be used.", "url": "https://github.com/pravega/pravega/pull/4641#discussion_r400662112", "createdAt": "2020-03-31T06:02:37Z", "author": {"login": "shrids"}, "path": "controller/src/main/java/io/pravega/controller/store/stream/PravegaTablesStoreHelper.java", "diffHunk": "@@ -176,7 +178,7 @@ public void invalidateCache(String table, String key) {\n                 new TableEntryImpl<>(new TableKeyImpl<>(key.getBytes(Charsets.UTF_8), KeyVersion.NOT_EXISTS), value));\n         Supplier<String> errorMessage = () -> String.format(\"addNewEntry: key: %s table: %s\", key, tableName);\n         return withRetries(() -> segmentHelper.updateTableEntries(tableName, entries, authToken.get(), RequestTag.NON_EXISTENT_ID),\n-                errorMessage)\n+                errorMessage, true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a070d693bbe326d2fd1936909b7b9630cc99cd9"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk4ODA3OA==", "bodyText": "Yes, that is correct. But its not necessarily a behaviour change (except the bug fix). Its just fail faster rather than retry.\nMost updates happen from workflows.\nSome happen in the context of client calls.\nSo we can wrap an additional retry loop on create scope if we want. we can take it as a separate issue. i have opened the following issue: #4657", "url": "https://github.com/pravega/pravega/pull/4641#discussion_r400988078", "createdAt": "2020-03-31T15:05:23Z", "author": {"login": "shiveshr"}, "path": "controller/src/main/java/io/pravega/controller/store/stream/PravegaTablesStoreHelper.java", "diffHunk": "@@ -176,7 +178,7 @@ public void invalidateCache(String table, String key) {\n                 new TableEntryImpl<>(new TableKeyImpl<>(key.getBytes(Charsets.UTF_8), KeyVersion.NOT_EXISTS), value));\n         Supplier<String> errorMessage = () -> String.format(\"addNewEntry: key: %s table: %s\", key, tableName);\n         return withRetries(() -> segmentHelper.updateTableEntries(tableName, entries, authToken.get(), RequestTag.NON_EXISTENT_ID),\n-                errorMessage)\n+                errorMessage, true)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY2MjExMg=="}, "originalCommit": {"oid": "0a070d693bbe326d2fd1936909b7b9630cc99cd9"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4466, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}