{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MzY5Nzk5", "number": 4611, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjowMzoxNFrODm3ymw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjo0NTowMFrODm4eJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDg2NTU1OnYy", "diffSide": "RIGHT", "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/reading/StreamSegmentReadIndex.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjowMzoxNFrOF0inMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzozNjoyOVrOF0kr0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDYzNzM2Mg==", "bodyText": "It says \"gets a copy\" but then later says they are removed, so, it's not really a copy.", "url": "https://github.com/pravega/pravega/pull/4611#discussion_r390637362", "createdAt": "2020-03-10T22:03:14Z", "author": {"login": "tkaitchuck"}, "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/reading/StreamSegmentReadIndex.java", "diffHunk": "@@ -1192,24 +1192,33 @@ private ReadResultEntryBase createFutureRead(long streamSegmentOffset, int maxLe\n     }\n \n     /**\n-     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices. All returned\n-     * entries have their offsets adjusted by the given amount.\n+     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices and removes them from this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaf73a95f4b8e3d0162e220cac719cae2a09e9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3MTMxMw==", "bodyText": "Reworded.", "url": "https://github.com/pravega/pravega/pull/4611#discussion_r390671313", "createdAt": "2020-03-10T23:36:29Z", "author": {"login": "andreipaduroiu"}, "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/reading/StreamSegmentReadIndex.java", "diffHunk": "@@ -1192,24 +1192,33 @@ private ReadResultEntryBase createFutureRead(long streamSegmentOffset, int maxLe\n     }\n \n     /**\n-     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices. All returned\n-     * entries have their offsets adjusted by the given amount.\n+     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices and removes them from this", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDYzNzM2Mg=="}, "originalCommit": {"oid": "3aaaf73a95f4b8e3d0162e220cac719cae2a09e9"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDg2ODU2OnYy", "diffSide": "RIGHT", "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/reading/StreamSegmentReadIndex.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjowNDoyNVrOF0ipAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjowNDoyNVrOF0ipAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDYzNzgyNg==", "bodyText": "This should probably be called \"removeAllEntries\"", "url": "https://github.com/pravega/pravega/pull/4611#discussion_r390637826", "createdAt": "2020-03-10T22:04:25Z", "author": {"login": "tkaitchuck"}, "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/reading/StreamSegmentReadIndex.java", "diffHunk": "@@ -1192,24 +1192,33 @@ private ReadResultEntryBase createFutureRead(long streamSegmentOffset, int maxLe\n     }\n \n     /**\n-     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices. All returned\n-     * entries have their offsets adjusted by the given amount.\n+     * Gets a copy of all the ReadIndexEntries in this Index that are not RedirectReadIndices and removes them from this\n+     * index. All returned entries have their offsets adjusted by the given amount.\n      *\n      * @param offsetAdjustment The amount to adjust the offset by.\n+     * @return A List of {@link MergedIndexEntry} that represents the contents of this index. All these entries point to\n+     * live data in the {@link CacheManager}; as such it is the responsibility of the caller to manage their lifecycle\n+     * from now on.\n      */\n-    private List<MergedIndexEntry> getAllEntries(long offsetAdjustment) {\n+    private List<MergedIndexEntry> fetchAllEntries(long offsetAdjustment) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaf73a95f4b8e3d0162e220cac719cae2a09e9"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDk3NzAzOnYy", "diffSide": "RIGHT", "path": "segmentstore/server/src/test/java/io/pravega/segmentstore/server/reading/ContainerReadIndexTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjo0NTowMFrOF0jo0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzozOTo1NlrOF0kvoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY1NDE2MA==", "bodyText": "Is this change intentional?", "url": "https://github.com/pravega/pravega/pull/4611#discussion_r390654160", "createdAt": "2020-03-10T22:45:00Z", "author": {"login": "RaulGracia"}, "path": "segmentstore/server/src/test/java/io/pravega/segmentstore/server/reading/ContainerReadIndexTests.java", "diffHunk": "@@ -91,7 +91,7 @@\n             .with(ReadIndexConfig.MEMORY_READ_MIN_LENGTH, 0) // Default: Off (we have a special test for this).\n             .with(ReadIndexConfig.STORAGE_READ_ALIGNMENT, 1024)\n             .build();\n-    private static final Duration TIMEOUT = Duration.ofSeconds(20);\n+    private static final Duration TIMEOUT = Duration.ofSeconds(2000000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaf73a95f4b8e3d0162e220cac719cae2a09e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3MjI4OQ==", "bodyText": "No it is not. Fixed it.", "url": "https://github.com/pravega/pravega/pull/4611#discussion_r390672289", "createdAt": "2020-03-10T23:39:56Z", "author": {"login": "andreipaduroiu"}, "path": "segmentstore/server/src/test/java/io/pravega/segmentstore/server/reading/ContainerReadIndexTests.java", "diffHunk": "@@ -91,7 +91,7 @@\n             .with(ReadIndexConfig.MEMORY_READ_MIN_LENGTH, 0) // Default: Off (we have a special test for this).\n             .with(ReadIndexConfig.STORAGE_READ_ALIGNMENT, 1024)\n             .build();\n-    private static final Duration TIMEOUT = Duration.ofSeconds(20);\n+    private static final Duration TIMEOUT = Duration.ofSeconds(2000000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY1NDE2MA=="}, "originalCommit": {"oid": "3aaaf73a95f4b8e3d0162e220cac719cae2a09e9"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4456, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}