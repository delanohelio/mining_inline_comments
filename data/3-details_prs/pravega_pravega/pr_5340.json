{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMjkzNzcz", "number": 5340, "title": "Issue 4874: Upgrade HDFS Client from 2.x to 3.x in order to address security vulnerabilities", "bodyText": "Change log description\nUpgrade HDFS client version to the latest version, which is currently 3.3.0 as per Maven Repo.\nPurpose of the change\nFixes #4874.\nWhat the code does\n\nUpdates HDFS client dependency.\nModifies code to account for breaking changes.\nAdds additional dependencies to bindings project (since the newer version doesn't brings some of the transitive dependencies that were used by other components of the project)\n\nHow to verify it\nAll unit and integration tests must pass.\nIn addition, a distributed mode cluster running HDFS, must be able to run successfullly and services reads and writes. I use Docker-Compose based cluster for this purpose and deployed it using this YAML:\nhttps://github.com/ravisharda/pravega/blob/issue-4874-upgrade-hdfs/docker/compose/docker-compose.yml\nNote:\n\n\nNote that the YAML runs pravega/hdfs:2.7.7 as the HDFS server, which is:\n\nBuilt out of code here: https://github.com/pravega/docker-hdfs\nBased on Hadoop v2.7.7\n\nSo, the test mentioned above uses HDFS client v3.3.0 against a server v2.7.7.\nUpgrade of the server should be taken separately as part of a different PR for the https://github.com/pravega/docker-hdfs repo.\n\n\nThis PR borrows some of the work done in an older and now closed PR #4878 by @ravibeta.", "createdAt": "2020-11-17T10:13:26Z", "url": "https://github.com/pravega/pravega/pull/5340", "merged": true, "mergeCommit": {"oid": "c0378e3ace4ae819c065cfa59c1bb0926fedbf4c"}, "closed": true, "closedAt": "2020-11-20T04:53:06Z", "author": {"login": "ravisharda"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddWu83AH2gAyNTIyMjkzNzczOjVhMjc4YWU4ZTFhYzM0NDQ2ZmMyNTk1M2IwNzk1M2UxZTgwNzhkYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeHM8NAH2gAyNTIyMjkzNzczOjc0MjU4MTI5MTYwMTJlNWRhN2YyYWJlNThjNzdiZjVhOWY4YWFmMGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a278ae8e1ac34446fc25953b07953e1e8078db3", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/5a278ae8e1ac34446fc25953b07953e1e8078db3", "committedDate": "2020-11-17T10:10:14Z", "message": "Initial changes for HDFS upgrade\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNjA1MTMx", "url": "https://github.com/pravega/pravega/pull/5340#pullrequestreview-532605131", "createdAt": "2020-11-17T17:16:16Z", "commit": {"oid": "5a278ae8e1ac34446fc25953b07953e1e8078db3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNjA2ODE2", "url": "https://github.com/pravega/pravega/pull/5340#pullrequestreview-532606816", "createdAt": "2020-11-17T17:18:01Z", "commit": {"oid": "5a278ae8e1ac34446fc25953b07953e1e8078db3"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb2d72f43a0f5cce0ed48c46ec1aa93a74a09105", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/cb2d72f43a0f5cce0ed48c46ec1aa93a74a09105", "committedDate": "2020-11-18T02:50:52Z", "message": "Add additional dependencies to account for exclusion of some of the transitive dependencies in newer versions of HDFS client libraries.\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ac8e8316d4c57a33324541923774bd2e78e0d75", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/8ac8e8316d4c57a33324541923774bd2e78e0d75", "committedDate": "2020-11-18T07:09:57Z", "message": "Merge branch 'master' into issue-4874-upgrade-hdfs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49b06f6fd4ce391c63384c69bdf2142e5b5b4e92", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/49b06f6fd4ce391c63384c69bdf2142e5b5b4e92", "committedDate": "2020-11-18T10:25:46Z", "message": "Merge branch 'master' into issue-4874-upgrade-hdfs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNTgxNTg5", "url": "https://github.com/pravega/pravega/pull/5340#pullrequestreview-533581589", "createdAt": "2020-11-18T15:45:40Z", "commit": {"oid": "49b06f6fd4ce391c63384c69bdf2142e5b5b4e92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo0NTo0MVrOH10K8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNTo0NTo0MVrOH10K8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5MTM0NA==", "bodyText": "Unrelated.", "url": "https://github.com/pravega/pravega/pull/5340#discussion_r526191344", "createdAt": "2020-11-18T15:45:41Z", "author": {"login": "andreipaduroiu"}, "path": "bindings/src/test/java/io/pravega/storage/extendeds3/S3ProxyImpl.java", "diffHunk": "@@ -37,7 +37,7 @@\n import lombok.val;\n import org.apache.commons.httpclient.HttpStatus;\n import org.apache.commons.io.IOUtils;\n-import org.apache.commons.lang.ArrayUtils;\n+import org.apache.commons.lang3.ArrayUtils;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49b06f6fd4ce391c63384c69bdf2142e5b5b4e92"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ea4715135b3e5ebee064131e1ca9ad55c3f4b54", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/9ea4715135b3e5ebee064131e1ca9ad55c3f4b54", "committedDate": "2020-11-19T09:14:41Z", "message": "Merge branch 'master' into issue-4874-upgrade-hdfs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MjU2NzYz", "url": "https://github.com/pravega/pravega/pull/5340#pullrequestreview-534256763", "createdAt": "2020-11-19T10:02:12Z", "commit": {"oid": "9ea4715135b3e5ebee064131e1ca9ad55c3f4b54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzEwMTc3", "url": "https://github.com/pravega/pravega/pull/5340#pullrequestreview-534710177", "createdAt": "2020-11-19T17:59:37Z", "commit": {"oid": "9ea4715135b3e5ebee064131e1ca9ad55c3f4b54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7425812916012e5da7f2abe58c77bf5a9f8aaf0e", "author": {"user": {"login": "andreipaduroiu", "name": "Andrei Paduroiu"}}, "url": "https://github.com/pravega/pravega/commit/7425812916012e5da7f2abe58c77bf5a9f8aaf0e", "committedDate": "2020-11-19T18:38:26Z", "message": "Merge branch 'master' into issue-4874-upgrade-hdfs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3739, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}