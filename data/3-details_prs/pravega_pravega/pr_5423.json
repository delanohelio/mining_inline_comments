{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NzEwMjEz", "number": 5423, "title": "Issue 4938: Merge branch 'feature-4938-dr-tools-base-case' into 'master' ", "bodyText": "Change log description\n\nIntegration of Data recovery tool feature branch changes into the master\nFeature branch change log description:\n- Listing segments from storage - Iterator for different kind of storages.\n- Data Recovery - Introduction of DebugSegmentContainer to register segments. Recovery logic for segments.\n- Tests: Unit tests, integration tests to test data recovery & segments' listing.\n- DR CLI Commands - CLI commands execution code along with tests.\n\nPurpose of the change\nFixes #4938. Adds data recovery feature.\nWhat the code does\n\nExecutes DR CLI commands when called to execute.\nIntroduces DebugSegmentContainer to register register. ContainerRecoveryUtils holds various methods required for recovery.\nIntroduces Iterator to list the segments in storage.\n\nHow to verify it\n\nBuild shall pass.\nDR CLI Commands should be able to list segments and recover data when used.", "createdAt": "2020-12-11T09:22:47Z", "url": "https://github.com/pravega/pravega/pull/5423", "merged": true, "mergeCommit": {"oid": "6470c10cbda80b1d7d8136394867e0093eb6e550"}, "closed": true, "closedAt": "2020-12-15T08:13:34Z", "author": {"login": "ManishKumarKeshri"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlOJhJABqjQxMDIyODI5MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmK9m5AFqTU1MTgyNjY0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b81a61f3c4e66f8458d4fe1bcf79d07b01ada743", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/b81a61f3c4e66f8458d4fe1bcf79d07b01ada743", "committedDate": "2020-12-11T09:16:53Z", "message": "Merge remote-tracking branch 'upstream/master' into HEAD\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}, "afterCommit": {"oid": "3758f58d822a12d456acc9ba798d86de6e83ef7a", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/3758f58d822a12d456acc9ba798d86de6e83ef7a", "committedDate": "2020-12-11T20:39:27Z", "message": "Data recovery commands in CLI Tool (#5371)\n\nAdded durableLog-recovery <root> and list-segments <root> commands and their implementations.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3758f58d822a12d456acc9ba798d86de6e83ef7a", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/3758f58d822a12d456acc9ba798d86de6e83ef7a", "committedDate": "2020-12-11T20:39:27Z", "message": "Data recovery commands in CLI Tool (#5371)\n\nAdded durableLog-recovery <root> and list-segments <root> commands and their implementations.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}, "afterCommit": {"oid": "9d881f0fb02077a122de5bf6d63a61a215f2c112", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/9d881f0fb02077a122de5bf6d63a61a215f2c112", "committedDate": "2020-12-11T21:28:10Z", "message": "Merge remote-tracking branch 'upstream/master' into HEAD\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7169aca55a21c20713c452a5301fddea9c2a1c4b", "author": {"user": {"login": "ManishKumarKeshri", "name": "Manish Kumar Keshri"}}, "url": "https://github.com/pravega/pravega/commit/7169aca55a21c20713c452a5301fddea9c2a1c4b", "committedDate": "2020-12-11T22:46:44Z", "message": "Issue 4670: SegmentContainer in recovery mode (#4716)\n\n- A way to start segment container in recovery mode(debug segment container) to create given segment(s).\n- Wrapper class to TableStore & StreamSegmentStore to track the segments being created or deleted. This helps in integration tests to wait for segments to be flushed to storage(keep polling for segment's length in the storage to ensure that it is fully flushed).\n- Under ContainerRecoveryTestUtils: Lists all segments from storage using the already supported listSegments() API. Create all segments in the list using the debug segment container instance\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8131042c062843b338d923ebd0d7b3a796277d93", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/8131042c062843b338d923ebd0d7b3a796277d93", "committedDate": "2020-12-11T22:47:07Z", "message": "Issue 5095: DR Integration tests included for multiple containers and Transactional writers (#5099)\n\nThis tests a scenario when durable data log fails after all the segments have been flushed to the long term storage. In such a situation, debug segment container(s) are started to restore the data in a new durable data log.\r\nIncludes tests to start multiple debug segment containers and use transactions for writing events.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b19cb20f33123f866649c29516a276508a57da", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/44b19cb20f33123f866649c29516a276508a57da", "committedDate": "2020-12-11T22:47:14Z", "message": "Issue 5095: DR Integration tests included for readers stalling & watermarking (#5113)\n\nAdded a test for the scenario when durable data log fails after all the segments have been flushed to the long term storage. In such a situation, debug segment container(s) are started to restore the data in a new durable data log.\r\nIn this PR, tests have been included in the integration test\r\n-    to replicate the scenario when readers stop while reading and then failure-recovery takes place. It is validated if the readers are able to resume reading from the same position or not.\r\n-    to add watermarks to the events, and then read all the events after failover-recovery and verify that all events are have correct bounds.\r\n\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b202c251a78fe613aafd1a56c45d420796f5a51b", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/b202c251a78fe613aafd1a56c45d420796f5a51b", "committedDate": "2020-12-11T22:47:22Z", "message": "Issue 5192: Copying a segment (#5193)\n\nAPI to copy the contents of a segment to another segment.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f978d6bddd8cd391eb81cfc592b036f644e8eaf", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/0f978d6bddd8cd391eb81cfc592b036f644e8eaf", "committedDate": "2020-12-11T22:47:29Z", "message": "Issue 5169: Data Recovery - Copy the core attributes from old segment metadata to new segment metadata (#5253)\n\nInstead of directly deleting the container metadata and its attribute segments, we now keep a back up copy of them and then delete them. This back up copy is used to update the attributes of the recovered segments.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fbd3fb991110a9e78bb7e2c20f3446a385e5558", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/0fbd3fb991110a9e78bb7e2c20f3446a385e5558", "committedDate": "2020-12-11T22:47:39Z", "message": "Issue 5285: Timeouts in ContainerRecoveryUtils. (#5293)\n\nUsing timeout as a parameter to the methods in ContainerRecoveryUtils.java.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c92efedfc447e73965d0cf9e182212681ba50ab", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/5c92efedfc447e73965d0cf9e182212681ba50ab", "committedDate": "2020-12-11T22:47:47Z", "message": "Issue 5325: DR integration test does not work with FileSystem storage (#5326)\n\nUpdating config parameters of debug segment containers.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d55af328da54730d8d43018404992e3a5eaac088", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/d55af328da54730d8d43018404992e3a5eaac088", "committedDate": "2020-12-11T22:47:58Z", "message": "Reducing time in DR integration tests (#5292)\n\nReducing time.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b8461d28eba2f4969df847d2f194eb96e75af83", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/0b8461d28eba2f4969df847d2f194eb96e75af83", "committedDate": "2020-12-11T22:48:17Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega into merger-for-master\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f460b6c26e9ee6b19457734c9eda15201f3d5cfb", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/f460b6c26e9ee6b19457734c9eda15201f3d5cfb", "committedDate": "2020-12-11T22:48:27Z", "message": "Updating createStreamSegment API call.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d26ecd6579167ccfb919fc8c54760f28d4e0f0a5", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/d26ecd6579167ccfb919fc8c54760f28d4e0f0a5", "committedDate": "2020-12-11T22:48:39Z", "message": "Minor checkstyle fail.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63648b4f4171bb515a799daf33f65cb032e3cda6", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/63648b4f4171bb515a799daf33f65cb032e3cda6", "committedDate": "2020-12-11T22:48:47Z", "message": "Minor change.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff3ddbf3a5cb561ff33d801e1a80e3369cd75731", "author": {"user": {"login": "fpj", "name": "Flavio Junqueira"}}, "url": "https://github.com/pravega/pravega/commit/ff3ddbf3a5cb561ff33d801e1a80e3369cd75731", "committedDate": "2020-12-11T22:49:14Z", "message": "Issue 4938: Merge branch 'master' into feature-4938-dr-tools-base-case\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1633b945ed81c1d990b353f5acff154d0bdf3f57", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/1633b945ed81c1d990b353f5acff154d0bdf3f57", "committedDate": "2020-12-11T22:50:01Z", "message": "Data recovery commands in CLI Tool (#5371)\n\nAdded durableLog-recovery <root> and list-segments <root> commands and their implementations.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d881f0fb02077a122de5bf6d63a61a215f2c112", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/9d881f0fb02077a122de5bf6d63a61a215f2c112", "committedDate": "2020-12-11T21:28:10Z", "message": "Merge remote-tracking branch 'upstream/master' into HEAD\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}, "afterCommit": {"oid": "1633b945ed81c1d990b353f5acff154d0bdf3f57", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/1633b945ed81c1d990b353f5acff154d0bdf3f57", "committedDate": "2020-12-11T22:50:01Z", "message": "Data recovery commands in CLI Tool (#5371)\n\nAdded durableLog-recovery <root> and list-segments <root> commands and their implementations.\r\n\r\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aae8ed57ea7606ba3e1553b3d4d231c7fbb95768", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/aae8ed57ea7606ba3e1553b3d4d231c7fbb95768", "committedDate": "2020-12-11T22:52:26Z", "message": "Merge branch 'master' into feature-4938-dr-tools-base-case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ff8ddb1123483218ad2a80d5ad05e066c4a4092", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/1ff8ddb1123483218ad2a80d5ad05e066c4a4092", "committedDate": "2020-12-14T02:26:07Z", "message": "Minor changes.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1681cf4fe9e9d49b99543d247ebc68c603d0066", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/a1681cf4fe9e9d49b99543d247ebc68c603d0066", "committedDate": "2020-12-14T02:31:04Z", "message": "Merge branch 'feature-4938-dr-tools-base-case' of https://github.com/ManishKumarKeshri/pravega into HEAD"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d86da7cba093ef8fad9c1220f2511656af98a4c6", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/d86da7cba093ef8fad9c1220f2511656af98a4c6", "committedDate": "2020-12-14T04:35:42Z", "message": "Minor Checkstyle error.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0f92eee7424ff793d3ef6ec02a1b44abe334639", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/c0f92eee7424ff793d3ef6ec02a1b44abe334639", "committedDate": "2020-12-14T09:02:10Z", "message": "Reverting back access specifier at one position.\n\nSigned-off-by: ManishKumarKeshri <manish.keshri562@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787a68c93208d0984a4deed42e9a7b86f8a965a5", "author": {"user": {"login": "RaulGracia", "name": "Ra\u00fal Gracia"}}, "url": "https://github.com/pravega/pravega/commit/787a68c93208d0984a4deed42e9a7b86f8a965a5", "committedDate": "2020-12-14T09:11:58Z", "message": "Merge branch 'master' into feature-4938-dr-tools-base-case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDI5MzM2", "url": "https://github.com/pravega/pravega/pull/5423#pullrequestreview-551429336", "createdAt": "2020-12-14T14:37:55Z", "commit": {"oid": "787a68c93208d0984a4deed42e9a7b86f8a965a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozNzo1NVrOIFThHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozNzo1NVrOIFThHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzMzU2NQ==", "bodyText": "@ManishKumarKeshri please, use the existing name structure, as I think that the property name used in this PR is from the old naming structure. @ravisharda is that correct?", "url": "https://github.com/pravega/pravega/pull/5423#discussion_r542433565", "createdAt": "2020-12-14T14:37:55Z", "author": {"login": "RaulGracia"}, "path": "config/admin-cli.properties", "diffHunk": "@@ -19,11 +19,43 @@ cli.controller.grpc.uri=tcp://localhost:9090\n cli.store.metadata.backend=segmentstore\n \n # General configuration for the Pravega cluster at hand.\n-pravegaservice.cluster.name=pravega/pravega\n+pravegaservice.clusterName=pravega/pravega", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "787a68c93208d0984a4deed42e9a7b86f8a965a5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c5c7aa16577329ca5529574ef56b8ef3bb702f0", "author": {"user": {"login": "RaulGracia", "name": "Ra\u00fal Gracia"}}, "url": "https://github.com/pravega/pravega/commit/4c5c7aa16577329ca5529574ef56b8ef3bb702f0", "committedDate": "2020-12-14T15:20:23Z", "message": "Merge branch 'master' into feature-4938-dr-tools-base-case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODI2NjQx", "url": "https://github.com/pravega/pravega/pull/5423#pullrequestreview-551826641", "createdAt": "2020-12-14T19:32:42Z", "commit": {"oid": "4c5c7aa16577329ca5529574ef56b8ef3bb702f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3797, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}