{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MzI0Mzg4", "number": 5133, "title": "Issue 5132: segmentstore should use host name when TLS is enabled in standalone", "bodyText": "Change log description\nWhen TLS is enabled in standalone, endpoints fetched from client controller API should be in hostname:port form.\nPurpose of the change\nFix #5132", "createdAt": "2020-09-01T20:44:48Z", "url": "https://github.com/pravega/pravega/pull/5133", "merged": true, "mergeCommit": {"oid": "01ecbde968645c7bd4823da1a88e184df3eca4a7"}, "closed": true, "closedAt": "2020-11-17T05:20:04Z", "author": {"login": "Tristan1900"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdErflegH2gAyNDc3MzI0Mzg4OjRkMDRjMGNiMmE3ZWZiNjgzMWRkNjA0ZDJlNjgyOTRhNTQyOTIyYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddShoiAFqTUzMjAyNzU1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d04c0cb2a7efb6831dd604d2e68294a542922b4", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/4d04c0cb2a7efb6831dd604d2e68294a542922b4", "committedDate": "2020-09-01T18:13:21Z", "message": "segmentstore should publish host name when tls is enabled in standalone\n\nSigned-off-by: Wenqi M <452787782@qq.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e531e2576fbfe0a2f9ed586016cbb2df2123a19", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/7e531e2576fbfe0a2f9ed586016cbb2df2123a19", "committedDate": "2020-09-01T20:45:02Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ed30108b77584b4529e25e59214f5e3f3f88b76", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/4ed30108b77584b4529e25e59214f5e3f3f88b76", "committedDate": "2020-09-02T03:21:57Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNDU1NjQx", "url": "https://github.com/pravega/pravega/pull/5133#pullrequestreview-480455641", "createdAt": "2020-09-02T03:24:20Z", "commit": {"oid": "4ed30108b77584b4529e25e59214f5e3f3f88b76"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwMzoyNDoyMVrOHLSoTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwMzoyNDoyMVrOHLSoTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTYwMTYxNA==", "bodyText": "Curious, shouldn't this be PUBLISHED_IP_ADDRESS instead?\nI understand that you are trying to change this from IP address 127.0.1.1 that the Segment store listens on, to localhost, so that hostname verification can be turned on for client/controller-to-segment store communication. Is that correct?", "url": "https://github.com/pravega/pravega/pull/5133#discussion_r481601614", "createdAt": "2020-09-02T03:24:21Z", "author": {"login": "ravisharda"}, "path": "standalone/src/main/java/io/pravega/local/InProcPravegaCluster.java", "diffHunk": "@@ -278,6 +278,7 @@ private void startLocalSegmentStore(int segmentStoreId) throws Exception {\n                         .with(ServiceConfig.KEY_FILE, this.keyFile)\n                         .with(ServiceConfig.CERT_FILE, this.certFile)\n                         .with(ServiceConfig.ENABLE_TLS_RELOAD, this.enableTlsReload)\n+                        .with(ServiceConfig.LISTENING_IP_ADDRESS, this.enableTls ? \"localhost\" : \"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ed30108b77584b4529e25e59214f5e3f3f88b76"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51f116171baa117a661ede7e7cf2a291e5a5d941", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/51f116171baa117a661ede7e7cf2a291e5a5d941", "committedDate": "2020-10-15T02:12:07Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a9a3e0887e9841da671304bededbd07c5e4fc19", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/7a9a3e0887e9841da671304bededbd07c5e4fc19", "committedDate": "2020-10-16T18:36:34Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58799a3517f0a46ea53619e83d50d2fc17d2f647", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/58799a3517f0a46ea53619e83d50d2fc17d2f647", "committedDate": "2020-10-16T19:22:41Z", "message": "add published host\n\nSigned-off-by: wenqi <452787782@qq.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a739bc5b14e06b1061d76622d72f48a48d01c3a", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/2a739bc5b14e06b1061d76622d72f48a48d01c3a", "committedDate": "2020-10-16T19:22:54Z", "message": "Merge branch 'add-hostname-for-standalone' of https://github.com/Tristan1900/pravega into add-hostname-for-standalone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMzkzNDUz", "url": "https://github.com/pravega/pravega/pull/5133#pullrequestreview-511393453", "createdAt": "2020-10-19T03:42:26Z", "commit": {"oid": "2a739bc5b14e06b1061d76622d72f48a48d01c3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMzo0MjoyNlrOHj6UZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMzo0MjoyNlrOHj6UZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzQxNzcwMA==", "bodyText": "@Tristan1900 one more ask: could you please extract the localhost string into a constant and use that here and above, so that it can be easily changed in one place (to say loopback address 127.0.0.1 or another interface during testing).", "url": "https://github.com/pravega/pravega/pull/5133#discussion_r507417700", "createdAt": "2020-10-19T03:42:26Z", "author": {"login": "ravisharda"}, "path": "standalone/src/main/java/io/pravega/local/InProcPravegaCluster.java", "diffHunk": "@@ -278,6 +278,8 @@ private void startLocalSegmentStore(int segmentStoreId) throws Exception {\n                         .with(ServiceConfig.KEY_FILE, this.keyFile)\n                         .with(ServiceConfig.CERT_FILE, this.certFile)\n                         .with(ServiceConfig.ENABLE_TLS_RELOAD, this.enableTlsReload)\n+                        .with(ServiceConfig.LISTENING_IP_ADDRESS, this.enableTls ? \"localhost\" : \"\")\n+                        .with(ServiceConfig.PUBLISHED_IP_ADDRESS, this.enableTls ? \"localhost\" : \"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a739bc5b14e06b1061d76622d72f48a48d01c3a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7979ff18c937b915fcd9279fc9c8c33297a55d2e", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/7979ff18c937b915fcd9279fc9c8c33297a55d2e", "committedDate": "2020-10-19T04:47:39Z", "message": "add constant\n\nSigned-off-by: wenqi <452787782@qq.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd389788e2e4c80e74b0a39d48d74dd6df72d3be", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/dd389788e2e4c80e74b0a39d48d74dd6df72d3be", "committedDate": "2020-10-28T05:28:16Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDE4MzEy", "url": "https://github.com/pravega/pravega/pull/5133#pullrequestreview-520018312", "createdAt": "2020-10-29T19:48:35Z", "commit": {"oid": "dd389788e2e4c80e74b0a39d48d74dd6df72d3be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b749332012636885e6eac799ef62a562e109ca1c", "author": {"user": {"login": "andreipaduroiu", "name": "Andrei Paduroiu"}}, "url": "https://github.com/pravega/pravega/commit/b749332012636885e6eac799ef62a562e109ca1c", "committedDate": "2020-10-29T19:48:43Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4a20253b234798017ae09d647530a4445352a3b", "author": {"user": {"login": "fpj", "name": "Flavio Junqueira"}}, "url": "https://github.com/pravega/pravega/commit/e4a20253b234798017ae09d647530a4445352a3b", "committedDate": "2020-11-05T18:49:43Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36634bc40d655bbc076e17efd0387da0cdf1c55f", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/36634bc40d655bbc076e17efd0387da0cdf1c55f", "committedDate": "2020-11-11T20:43:23Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca904e329249412780b7f920197b6a5476dda50f", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/ca904e329249412780b7f920197b6a5476dda50f", "committedDate": "2020-11-12T23:32:27Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8835a47fbe0d67bb2057d504e1318d8b53690a98", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/8835a47fbe0d67bb2057d504e1318d8b53690a98", "committedDate": "2020-11-13T19:28:17Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "290b8c736902c21349fcc5a0df204df5205fae41", "author": {"user": {"login": "Tristan1900", "name": "Wenqi Mou"}}, "url": "https://github.com/pravega/pravega/commit/290b8c736902c21349fcc5a0df204df5205fae41", "committedDate": "2020-11-16T20:09:24Z", "message": "Merge branch 'master' into add-hostname-for-standalone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMDI3NTU4", "url": "https://github.com/pravega/pravega/pull/5133#pullrequestreview-532027558", "createdAt": "2020-11-17T05:16:05Z", "commit": {"oid": "290b8c736902c21349fcc5a0df204df5205fae41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3843, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}