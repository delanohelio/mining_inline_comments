{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NTYyOTA5", "number": 4921, "title": "Issue 4920: From noteTime api, throw exception rather than set the response code", "bodyText": "Signed-off-by: Shivesh Ranjan shivesh.ranjan@gmail.com\nChange log description\nThrow exception from noteTime api rather than sending WriterTimeResponse.InternalError.\nPurpose of the change\nFixes #4920\nWhat the code does\nnoteTime api currently responds with an internal error response code for any error. Which is not translated into a retryable exception on controller client.\nHow to verify it\nUnit test added.", "createdAt": "2020-07-06T06:12:43Z", "url": "https://github.com/pravega/pravega/pull/4921", "merged": true, "mergeCommit": {"oid": "7b6ce2a661a4018e9cb0bc51e06fd4c4d703748b"}, "closed": true, "closedAt": "2020-07-09T08:36:12Z", "author": {"login": "shiveshr"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyK-p_gH2gAyNDQ0NTYyOTA5OmQ1YjRhMTVmMTk0OGEzZjM5Y2I2YmE0MThlNjQyYjQ3MDZiZDc3ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczGiDrgH2gAyNDQ0NTYyOTA5OjU0MjcyZmNlM2Y1OGI5NGRiOGRmOTNjOTFlOGJjMTJhMWJlOWM4ZmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5b4a15f1948a3f39cb6ba418e642b4706bd7784", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/d5b4a15f1948a3f39cb6ba418e642b4706bd7784", "committedDate": "2020-07-06T06:09:47Z", "message": "Issue 4920\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyODA3MjAw", "url": "https://github.com/pravega/pravega/pull/4921#pullrequestreview-442807200", "createdAt": "2020-07-06T06:38:33Z", "commit": {"oid": "d5b4a15f1948a3f39cb6ba418e642b4706bd7784"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwNjozODozNFrOGtKhgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwNjozODozNFrOGtKhgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAxMTUyMg==", "bodyText": "Why can't you spy directly this controllerService variable?", "url": "https://github.com/pravega/pravega/pull/4921#discussion_r450011522", "createdAt": "2020-07-06T06:38:34Z", "author": {"login": "eolivelli"}, "path": "controller/src/test/java/io/pravega/controller/server/v1/InMemoryControllerServiceImplTest.java", "diffHunk": "@@ -85,9 +86,10 @@ public void setup() throws Exception {\n \n         Cluster mockCluster = mock(Cluster.class);\n         when(mockCluster.getClusterMembers()).thenReturn(Collections.singleton(new Host(\"localhost\", 9090, null)));\n-        controllerService = new ControllerServiceImpl(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b4a15f1948a3f39cb6ba418e642b4706bd7784"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c41044ec41de601cb3f2d6e6963e173257a62570", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/c41044ec41de601cb3f2d6e6963e173257a62570", "committedDate": "2020-07-06T09:19:53Z", "message": "coverage\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02c5457596ec0cd12117688a950bc96f6516cd49", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/02c5457596ec0cd12117688a950bc96f6516cd49", "committedDate": "2020-07-06T12:01:42Z", "message": "checkstyle\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NTQwNzcw", "url": "https://github.com/pravega/pravega/pull/4921#pullrequestreview-444540770", "createdAt": "2020-07-08T08:51:07Z", "commit": {"oid": "02c5457596ec0cd12117688a950bc96f6516cd49"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwODo1MTowN1rOGuecPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwODo1MTowN1rOGuecPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM4NjQzMQ==", "bodyText": "Override should be fine here since io.pravega.controller.server.v1.ControllerServiceImplTest#tearDown method already has @after annotation right ? \n  \n    \n      pravega/controller/src/test/java/io/pravega/controller/server/v1/ControllerServiceImplTest.java\n    \n    \n        Lines 86 to 87\n      in\n      b81cf9e\n    \n    \n    \n    \n\n        \n          \n           @After \n        \n\n        \n          \n           public abstract void tearDown() throws Exception;", "url": "https://github.com/pravega/pravega/pull/4921#discussion_r451386431", "createdAt": "2020-07-08T08:51:07Z", "author": {"login": "shrids"}, "path": "controller/src/test/java/io/pravega/controller/server/v1/InMemoryControllerServiceImplTest.java", "diffHunk": "@@ -85,12 +83,11 @@ public void setup() throws Exception {\n \n         Cluster mockCluster = mock(Cluster.class);\n         when(mockCluster.getClusterMembers()).thenReturn(Collections.singleton(new Host(\"localhost\", 9090, null)));\n-        controllerService = new ControllerServiceImpl(\n-                new ControllerService(streamStore, StreamStoreFactory.createInMemoryBucketStore(), streamMetadataTasks, streamTransactionMetadataTasks,\n-                                      SegmentHelperMock.getSegmentHelperMock(), executorService, mockCluster), GrpcAuthHelper.getDisabledAuthHelper(), requestTracker, true, 2);\n+        return new ControllerService(streamStore, StreamStoreFactory.createInMemoryBucketStore(), streamMetadataTasks, streamTransactionMetadataTasks,\n+                SegmentHelperMock.getSegmentHelperMock(), executorService, mockCluster);\n     }\n \n-    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02c5457596ec0cd12117688a950bc96f6516cd49"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "337a5b766976673eeda7238aedef2899448632e0", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/337a5b766976673eeda7238aedef2899448632e0", "committedDate": "2020-07-08T14:41:34Z", "message": "merge with master\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54272fce3f58b94db8df93c91e8bc12a1be9c8fd", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/54272fce3f58b94db8df93c91e8bc12a1be9c8fd", "committedDate": "2020-07-09T03:32:51Z", "message": "Merge branch 'master' into issue4920"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3947, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}