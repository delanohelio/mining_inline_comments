{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NzQzNzAx", "number": 5121, "title": "Issue 5082: Initial Java 11 Migration", "bodyText": "Change log description\nMakes the following minimal set of changes to accomplish a passing compilation phase and unit testing phase. It keeps the client and all its dependencies building JDK8 jars.\nPurpose of the change\nFixes #5082\nWhat the code does\n\nUpdates TravisCI to deploy using JDK11.\nDockerfile defaults to use JDK 11.\nCompile client using JDK 8 and it's dependencies.\nCompile everything else using JDK 11.\nNote: This PR makes no Java API changes.\n\nNot too many complications were encountered, but the following changes had to be made due to the bump to JDK11.\n\n\n\nChange\nReason\n\n\n\n\nBump to Gradle Version\nJDK 11 incompatible with Gradle 4.10.2, >= 5.0 required.\n\n\nBump Spotbugs Version\nJDK 11 incompatible with SpotBugs 3.2.0\n\n\nAdded @SuppressFBWarnings\nSpotbugs does not parse JDK 11 bytecode correctly. See: spotbugs/spotbugs#811\n\n\nBump Lombok Version\nIssue with versions <= 6.4. See: franzbecker/gradle-lombok#77\n\n\nAdd JVM flags\nThe system:test project deploys a pravega cluster using the operators, which use invalid JVM flags as of Java 10.\n\n\nSegregate client, sever builds\nTo improve developer experience, add a flag that will control which Java version the client is built.\n\n\n\nHow to verify it\n(Optional: steps to verify that the changes are effective)", "createdAt": "2020-08-29T08:27:02Z", "url": "https://github.com/pravega/pravega/pull/5121", "merged": true, "mergeCommit": {"oid": "6761fde762eb1ba2418f38798613101180441f92"}, "closed": true, "closedAt": "2020-09-28T22:22:25Z", "author": {"login": "co-jo"}, "timelineItems": {"totalCount": 74, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGUXgKAH2gAyNDc1NzQzNzAxOjA4NjAxYWZkMTE0NjNiZjcwMGE2ZDBhZjNmMzNkY2I1M2Y5MzVlMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNbPCpgFqTQ5Nzk0MDAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08601afd11463bf700a6d0af3f33dcb53f935e09", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/08601afd11463bf700a6d0af3f33dcb53f935e09", "committedDate": "2020-02-21T00:13:24Z", "message": "Update K8 client APIs to use their 5.0.0 counterparts.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25a165d0293c34ee8703fff764e55cf8fda413dd", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/25a165d0293c34ee8703fff764e55cf8fda413dd", "committedDate": "2020-02-21T18:42:03Z", "message": "Merge pull request #1 from co-jo/issue-4464-update-kubernetes-client-version\n\nIssue 4464 update kubernetes client version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc2dd2be26feed2953258ff055c1657aeb57019", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/8cc2dd2be26feed2953258ff055c1657aeb57019", "committedDate": "2020-02-23T04:43:09Z", "message": "Run system tests using alternative flag value.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3fcbd2e627f9fc0a0f6bad7e42667db4439e092", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/c3fcbd2e627f9fc0a0f6bad7e42667db4439e092", "committedDate": "2020-03-10T22:21:32Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f808cc42831892aeb8e7824c22d499a1f9fa03", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/f5f808cc42831892aeb8e7824c22d499a1f9fa03", "committedDate": "2020-03-18T18:44:10Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7901435dc1127bed1c46845bbaf8024477e2078f", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/7901435dc1127bed1c46845bbaf8024477e2078f", "committedDate": "2020-04-02T18:49:59Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d59b3e33f6d5bd90264753caadcea7ed7bbfe06c", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/d59b3e33f6d5bd90264753caadcea7ed7bbfe06c", "committedDate": "2020-04-16T20:22:05Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa090cad1d88812f2a88e9debacdb04df585adbf", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/aa090cad1d88812f2a88e9debacdb04df585adbf", "committedDate": "2020-04-18T20:15:50Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e328bcb38239fdc32f866980ee1103c93dff522d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/e328bcb38239fdc32f866980ee1103c93dff522d", "committedDate": "2020-05-11T22:25:21Z", "message": "Merge branch 'master' of https://github.com/co-jo/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd02180986f49a42002c7fd2ef28885d1f701af9", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/cd02180986f49a42002c7fd2ef28885d1f701af9", "committedDate": "2020-05-11T22:25:27Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1408d7527ec73f1645418df04aea4aa1120b39e7", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/1408d7527ec73f1645418df04aea4aa1120b39e7", "committedDate": "2020-05-18T20:48:16Z", "message": "Merge branch 'master' of https://github.com/co-jo/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2719517850f39bce3e5f2c92f04c8c24122a520", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/e2719517850f39bce3e5f2c92f04c8c24122a520", "committedDate": "2020-05-20T18:59:36Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d3648dd2c28a161dab520a48bf4bf657f9d14d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b1d3648dd2c28a161dab520a48bf4bf657f9d14d", "committedDate": "2020-06-15T18:43:02Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3a8b73b2904f91d0d59e27eaace82bcc1870b5c", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b3a8b73b2904f91d0d59e27eaace82bcc1870b5c", "committedDate": "2020-08-04T21:19:13Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02240ab9a8e6d7d645ffdd020f9b43854c89920", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b02240ab9a8e6d7d645ffdd020f9b43854c89920", "committedDate": "2020-08-17T18:24:07Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega into segmentstore-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "544e4900580d40e7832fff1e6ba2457c736c885d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/544e4900580d40e7832fff1e6ba2457c736c885d", "committedDate": "2020-08-17T19:23:27Z", "message": "* Initial version configuration.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58fa2ad355423360c85be49c39c88a8c6e1548bf", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/58fa2ad355423360c85be49c39c88a8c6e1548bf", "committedDate": "2020-08-18T22:34:38Z", "message": "* Update gradle and add compiler options to dependencies of 'common'.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ca394be056e05b75b9ecc075c717ef0b8afb67f", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/7ca394be056e05b75b9ecc075c717ef0b8afb67f", "committedDate": "2020-08-19T17:49:58Z", "message": "* Update Spotbugs (picked from Tom's repo).\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b71b7ac1678c7cff6485a6a8c57b4d11d72e7e11", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b71b7ac1678c7cff6485a6a8c57b4d11d72e7e11", "committedDate": "2020-08-26T23:19:48Z", "message": "* Update Lombok version.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8aa9bffce20c8ff1f7d3996e8be42dfd1d295f6", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/e8aa9bffce20c8ff1f7d3996e8be42dfd1d295f6", "committedDate": "2020-08-27T18:56:44Z", "message": "* Update TravisCI JDK.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb62760263a14823fba220a91034bc89c74cf091", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/fb62760263a14823fba220a91034bc89c74cf091", "committedDate": "2020-08-27T21:03:01Z", "message": "* Suppress SpotBugs warning.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b32ce63f62a3a96f0a09cc5d4d75db0475a89a8e", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b32ce63f62a3a96f0a09cc5d4d75db0475a89a8e", "committedDate": "2020-08-27T22:52:29Z", "message": "* Add package to suppress SpotBug warning to allowed packages file.\n\nSigned-off-by: Colin Hryniowski <co-jo@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTExMTUz", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-478111153", "createdAt": "2020-08-29T08:33:22Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwODozMzoyM1rOHJaDEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwODozMzoyM1rOHJaDEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ==", "bodyText": "The client must run well also on jdk8 how can we test it?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r479626001", "createdAt": "2020-08-29T08:33:23Z", "author": {"login": "eolivelli"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTEyOTE1", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-480112915", "createdAt": "2020-09-01T21:02:11Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMTowMjoxMlrOHLIHMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMTowMjoxMlrOHLIHMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQyOTI5Ng==", "bodyText": "can a build property be defined to control what Java version to use for Client and its dependencies? This is for the case if someone wants to checkout the code and build everything using JDK11. Currently there is a need to make edits in multiple places in biuild.gradle. It would be a much better experience if there will be a single property that controls it.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r481429296", "createdAt": "2020-09-01T21:02:12Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs.addAll(['--release', '8'])", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTc3MDk2", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-480977096", "createdAt": "2020-09-02T16:06:42Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjowNjo0MlrOHL2gpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjowNjo0MlrOHL2gpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ==", "bodyText": "Should this be latest? Shouldn't it be using a specific named version instead?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482189479", "createdAt": "2020-09-02T16:06:42Z", "author": {"login": "ravisharda"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 127}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "b699030bcb62252f95bcc3e46570c34d2d33d780", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b699030bcb62252f95bcc3e46570c34d2d33d780", "committedDate": "2020-09-02T18:03:00Z", "message": "Replace default Dockerfile with Java11 variant.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "b699030bcb62252f95bcc3e46570c34d2d33d780", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b699030bcb62252f95bcc3e46570c34d2d33d780", "committedDate": "2020-09-02T18:03:00Z", "message": "Replace default Dockerfile with Java11 variant.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc46eaf190aeae33f621ddfa4eea3eda4853a00d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/dc46eaf190aeae33f621ddfa4eea3eda4853a00d", "committedDate": "2020-09-02T18:12:29Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/ac167ff6af108e0ccdb7ee8ad7236916d997da4b", "committedDate": "2020-09-02T18:46:35Z", "message": "* Add single flag to control whether or not to build the client using JDK11.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMjQxOTg5", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-481241989", "createdAt": "2020-09-02T19:39:30Z", "commit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxOTozOTozMVrOHMAhTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxOTo0NDozMFrOHMA7Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1MzQ4NQ==", "bodyText": "I don't think we should use latest as Pravega image here. Ideally imageVersion should be pointing to an image that was built from the current source code as this is the intend in most cases - run system tests for the current commit/branch.  If no imageVersion provided then system test run should fail", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482353485", "createdAt": "2020-09-02T19:39:31Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ=="}, "originalCommit": null, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg==", "bodyText": "It's bit inconsistent to call this property this way as when default JDK is changed to the next version this property should be updated as well. Suggest to use a better name, something that will reflect the fact that Client will be build for the same release version as Server code.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482358326", "createdAt": "2020-09-02T19:43:07Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM2MDE0Mg==", "bodyText": "Also please don't forget to update repository README file to reflect the changes in default JDK", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482360142", "createdAt": "2020-09-02T19:44:30Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMjgzMjM1", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-481283235", "createdAt": "2020-09-02T20:41:20Z", "commit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo0MToyMFrOHMFjhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo0Mzo0MlrOHMFwTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzNTk3Mw==", "bodyText": "I believe we can set the -source and -target javac flags for the client which should preserve compatibility,", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482435973", "createdAt": "2020-09-02T20:41:20Z", "author": {"login": "tkaitchuck"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzOTI0Nw==", "bodyText": "Is there a way to override this for the client?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482439247", "createdAt": "2020-09-02T20:43:42Z", "author": {"login": "tkaitchuck"}, "path": "build.gradle", "diffHunk": "@@ -91,18 +90,11 @@ allprojects {\n \n     gradle.projectsEvaluated {\n         tasks.withType(JavaCompile) {\n-            sourceCompatibility = JavaVersion.VERSION_1_8\n-            targetCompatibility = JavaVersion.VERSION_1_8\n+            sourceCompatibility = JavaVersion.VERSION_11\n+            targetCompatibility = JavaVersion.VERSION_11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9261b5e2ff83f783bf0b5115123eb6d21a4cb09d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/9261b5e2ff83f783bf0b5115123eb6d21a4cb09d", "committedDate": "2020-09-03T16:44:41Z", "message": "Use one source of truth for the default Java version.\nAdd a gradle property to set the client's Java version.\nUpdate README.md.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "720eb800eff962b098530dff247854387c3b0648", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/720eb800eff962b098530dff247854387c3b0648", "committedDate": "2020-09-03T17:51:23Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dae234c4c13ce63676ecb0ab255f4da98172b39", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/6dae234c4c13ce63676ecb0ab255f4da98172b39", "committedDate": "2020-09-03T22:50:47Z", "message": "Remove '(source/target)Compatibility' references and replace them with a release flag.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbe7ef9cadd88b3258d247dcf98df140ba73bcc1", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/fbe7ef9cadd88b3258d247dcf98df140ba73bcc1", "committedDate": "2020-09-03T22:53:10Z", "message": "Remove default 'imageVersion'.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/45975ccb6bb59009c6d214431393e5238761615f", "committedDate": "2020-09-03T22:53:33Z", "message": "Merge remote-tracking branch 'origin/issue-5082-java-11-migration' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMzg5NDcw", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-482389470", "createdAt": "2020-09-04T06:27:18Z", "commit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjoyNzoxOFrOHNBMlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjozMjoyMlrOHNBTwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzE0MQ==", "bodyText": "@tkaitchuck  The best way is to set \"-release 8\" (as it is the current approach), otherwise javac will pick wrong overloaded versions in newer JDKs.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413141", "createdAt": "2020-09-04T06:27:18Z", "author": {"login": "eolivelli"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzU2NQ==", "bodyText": "\" If you have a local JDK 8 installation, the client's unit tests can be deployed by setting the JAVA_8 environment variable to point the JDK  8 home directory.\"\nI would drop this line, it does not add value.\nIt is important to state that Pravega Client and all its dependendecies is expected to work on Java 8 compatible runtimes", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413565", "createdAt": "2020-09-04T06:28:27Z", "author": {"login": "eolivelli"}, "path": "README.md", "diffHunk": "@@ -15,7 +15,9 @@ To learn more about Pravega, visit https://pravega.io\n \n ## Prerequisites\n \n-- Java 8+\n+- Java 11+\n+\n+The `client` project is expected to be built using *Java 8* bytecode. If you have a local *JDK 8* installation, the `client`'s unit tests can be deployed by setting the `JAVA_8` environment variable to point the *JDK  8* home directory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzk4Ng==", "bodyText": "why this complexity ? istn't \"11\" enough ? you are still hardcoding \"VERSION_11\" here", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413986", "createdAt": "2020-09-04T06:29:41Z", "author": {"login": "eolivelli"}, "path": "build.gradle", "diffHunk": "@@ -996,6 +1020,10 @@ def getProjectVersion() {\n     return ver\n }\n \n+def getDefaultJavaVersion() {\n+    return JavaVersion.VERSION_11.getMajorVersion()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 208}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxNDk3Nw==", "bodyText": "Are we adding this block in order to run tests of client on jdk8 ?\nI think this is not really needed.\nIf we set --release = 8 in the client and in all dependencies it should be enough.\nIt is better to have some external project / integration tests suite that uses the client.\nHaving here such support looks to me overwhelming", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483414977", "createdAt": "2020-09-04T06:32:22Z", "author": {"login": "eolivelli"}, "path": "build.gradle", "diffHunk": "@@ -259,6 +261,19 @@ project('client') {\n         testCompile group: 'io.netty', name: 'netty-transport-native-epoll', version: nettyVersion, classifier: 'linux-x86_64'\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs << \"--release\" << clientJavaVersion\n+    }\n+\n+    // If the user has the client to build with a different version and there exists an appropriate JDK,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/edf8c7f2a100099263e408d9378f76e02c4416ee", "committedDate": "2020-09-04T06:47:52Z", "message": "Remove unnecessary/verbose components.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNDAwNDM4", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-482400438", "createdAt": "2020-09-04T06:50:13Z", "commit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MDoxNFrOHNBvNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MjoyN1rOHNBy6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyMjAwNw==", "bodyText": "The version of Java to build the 'client' project and all dependencies in", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483422007", "createdAt": "2020-09-04T06:50:14Z", "author": {"login": "eolivelli"}, "path": "gradle.properties", "diffHunk": "@@ -66,3 +66,5 @@ bookkeeperBaseTag=pravega/bookkeeper\n signing.keyId=\n # This will be defaulted to ~/.gnupg/secring.gpg if not provided as a command line property\n signing.secretKeyRingFile=\n+# The version of Java to build the 'client' project in.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyMjk1Mg==", "bodyText": "I would say something like that:\nIn spite of the requirements of using JDK11+ to build this project, Pravega client artifacts are expected to be compatible with Java 8 runtime, only the server side components need JDK11+ to run.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483422952", "createdAt": "2020-09-04T06:52:27Z", "author": {"login": "eolivelli"}, "path": "README.md", "diffHunk": "@@ -15,7 +15,9 @@ To learn more about Pravega, visit https://pravega.io\n \n ## Prerequisites\n \n-- Java 8+\n+- Java 11+\n+\n+The `client` project is expected to be built into *Java 8* bytecode.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNDc4NjA2", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-482478606", "createdAt": "2020-09-04T08:53:47Z", "commit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwODo1Mzo0OFrOHNFc-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwODo1Mzo0OFrOHNFc-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQ4Mjg3NA==", "bodyText": "nit: Can we have all the compile options at a single place ? ref: \n  \n    \n      pravega/gradle/java.gradle\n    \n    \n        Lines 20 to 30\n      in\n      4f7be17\n    \n    \n    \n    \n\n        \n          \n               options.compilerArgs.addAll([ \n        \n\n        \n          \n                       \"-Xlint:deprecation\", \n        \n\n        \n          \n                       \"-Xlint:divzero\", \n        \n\n        \n          \n                       \"-Xlint:empty\", \n        \n\n        \n          \n                       \"-Xlint:fallthrough\", \n        \n\n        \n          \n                       \"-Xlint:finally\", \n        \n\n        \n          \n                       \"-Xlint:overrides\", \n        \n\n        \n          \n                       \"-Xlint:path\", \n        \n\n        \n          \n                       \"-Werror\" \n        \n\n        \n          \n               ]) \n        \n\n        \n          \n           } \n        \n    \n  \n\n\njava.gradle seems to be the place were this change can be added.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483482874", "createdAt": "2020-09-04T08:53:48Z", "author": {"login": "shrids"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +140,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "674bd779f68f35b8f63dd665c653c404c2e08be7", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/674bd779f68f35b8f63dd665c653c404c2e08be7", "committedDate": "2020-09-04T20:27:12Z", "message": "Clarify documentation.\nConsolidate Java compilerArgs.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7daca88b895a490b90c62db027c5f4a9815487d4", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/7daca88b895a490b90c62db027c5f4a9815487d4", "committedDate": "2020-09-04T23:31:00Z", "message": "Build longevity tests using the targeted client version as well (JDK 8).\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/38b306ba5816c9b62d33866d00f94d1dccba8148", "committedDate": "2020-09-05T19:52:41Z", "message": "Revert using afterEvaluate. The last instance of the flag takes precedence.\nAlso add release flag to test classes.\nReplace the --release version, instead of relying on the construction ordering to ensure the proper version is given.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjk5MjEy", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-484299212", "createdAt": "2020-09-08T16:17:21Z", "commit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxNzoyMVrOHOkpig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxOToyOVrOHOkucg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MjU3MA==", "bodyText": "nit: \"no more\" -> \"no longer\"", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485042570", "createdAt": "2020-09-08T16:17:21Z", "author": {"login": "andreipaduroiu"}, "path": "build.gradle", "diffHunk": "@@ -584,10 +595,15 @@ project('shared:controller-api') {\n         compile \"io.grpc:grpc-protobuf:\" + grpcVersion\n         compile \"io.grpc:grpc-stub:\" + grpcVersion\n         compile group: 'io.netty', name: 'netty-tcnative-boringssl-static', version: nettyBoringSSLVersion\n-         // Since Java 10 javax.annotation is no more bundled with the JRE\n+        // Since Java 10 javax.annotation is no more bundled with the JRE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 151}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzA3Mw==", "bodyText": "LOL. This is a big jump \ud83d\udc4d", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485043073", "createdAt": "2020-09-08T16:18:11Z", "author": {"login": "andreipaduroiu"}, "path": "gradle.properties", "diffHunk": "@@ -22,12 +22,12 @@ commonsioVersion=2.6\n commonsLang3Version=3.7\n dockerClientVersion=8.16.0\n ecsObjectClientVersion=3.0.6\n-spotbugsVersion=4.0.3\n-spotbugsAnnotationsVersion=4.0.3\n-spotbugsPluginVersion=1.6.9\n+spotbugsVersion=4.0.6\n+spotbugsAnnotationsVersion=4.0.6\n+spotbugsPluginVersion=4.4.4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzgyNg==", "bodyText": "I see you defined this in 2 places. Since this file is imported into main build.gradle file, does it suffice to just declare it here?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485043826", "createdAt": "2020-09-08T16:19:29Z", "author": {"login": "andreipaduroiu"}, "path": "gradle/java.gradle", "diffHunk": "@@ -98,3 +104,7 @@ plugins.withId('java') {\n         testCompile \"org.mockito:mockito-core:${mockitoVersion}\"\n     }\n }\n+\n+def getDefaultJavaVersion() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9ce48fb1fe1f67f36ed9da857c17c325c3d6c18", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/c9ce48fb1fe1f67f36ed9da857c17c325c3d6c18", "committedDate": "2020-09-08T16:56:35Z", "message": "Remove duplicate function declaration.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75b5be33d44a1fbf53105215620c1c9ff56a90c5", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/75b5be33d44a1fbf53105215620c1c9ff56a90c5", "committedDate": "2020-09-08T17:02:27Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01beb6f678d56092ed1f057bf39b7b20adbc3f0d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/01beb6f678d56092ed1f057bf39b7b20adbc3f0d", "committedDate": "2020-09-10T19:06:29Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e58a03e8bd12466afd4dd26ce24370b0c80ee81", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/6e58a03e8bd12466afd4dd26ce24370b0c80ee81", "committedDate": "2020-09-15T04:20:26Z", "message": "Add options to ensure Java 11 compatibility.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45edd7f26b6e56bce0a4ef33b52f1b7ee0f3c44d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/45edd7f26b6e56bce0a4ef33b52f1b7ee0f3c44d", "committedDate": "2020-09-15T04:22:20Z", "message": "Merge remote-tracking branch 'origin/issue-5082-java-11-migration' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3175104e6314cfe5e17b33350ec5a6a736854a7", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/b3175104e6314cfe5e17b33350ec5a6a736854a7", "committedDate": "2020-09-15T05:46:38Z", "message": "Increase pod ready timeout.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44cf28160c9a389be1e93430e2ad72b8bcf85cc4", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/44cf28160c9a389be1e93430e2ad72b8bcf85cc4", "committedDate": "2020-09-15T20:42:35Z", "message": "Remove flag.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac46515646508c46017ab86bff44083f9303d7b9", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/ac46515646508c46017ab86bff44083f9303d7b9", "committedDate": "2020-09-15T20:57:15Z", "message": "Add new flag to ignore unrecognized flags.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dbb799ef6802f31506024d1e40bf8b4ad7cb982", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/8dbb799ef6802f31506024d1e40bf8b4ad7cb982", "committedDate": "2020-09-15T21:32:53Z", "message": "Typo in JVM option.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "734d51acc2a3415b10ec4771145c2d958f60337e", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/734d51acc2a3415b10ec4771145c2d958f60337e", "committedDate": "2020-09-15T21:52:43Z", "message": "Fix typo in comment.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba9edb658e418893f0f21636285847b6d62026c9", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/ba9edb658e418893f0f21636285847b6d62026c9", "committedDate": "2020-09-15T22:02:17Z", "message": "Use proper key for `spec.pravega` property.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/e717e45f56bcdf7566102059520a0eb60b2a5a21", "committedDate": "2020-09-16T20:34:07Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyOTA4MzIy", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-492908322", "createdAt": "2020-09-21T19:16:27Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxOToxNjoyOFrOHVe-TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxOToxNjoyOFrOHVe-TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI4OTYxMg==", "bodyText": "Is this change intentional ?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492289612", "createdAt": "2020-09-21T19:16:28Z", "author": {"login": "sachin-j-joshi"}, "path": "test/system/kubernetes/setupTestPod.sh", "diffHunk": "@@ -92,7 +92,7 @@ spec:\n         - mountPath: \"/data\"\n           name: task-pv-storage\n EOF\n-kubectl wait --timeout=1m --for=condition=Ready pod/task-pv-pod\n+kubectl wait --timeout=5m --for=condition=Ready pod/task-pv-pod", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDY0NDc4", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493064478", "createdAt": "2020-09-22T00:25:51Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMDoyNTo1MVrOHVmwsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMDoyNTo1MVrOHVmwsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQxNzIwMg==", "bodyText": "@co-jo can you please file an issue for Pravega Operator to remove usage of UseCGroupMemoryLimitForHeap for Pravega 0.9+", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492417202", "createdAt": "2020-09-22T00:25:51Z", "author": {"login": "medvedevigorek"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDY4MjY1", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493068265", "createdAt": "2020-09-22T00:40:51Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDc2OTE1", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493076915", "createdAt": "2020-09-22T01:16:39Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDk1MTcx", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493095171", "createdAt": "2020-09-22T02:38:11Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTEyNzky", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493112792", "createdAt": "2020-09-22T03:56:27Z", "commit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMzo1NjoyN1rOHVpdpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMzo1NjoyN1rOHVpdpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ2MTQ3OA==", "bodyText": "Why do we need IgnoreUnrecognizedVMOptions?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492461478", "createdAt": "2020-09-22T03:56:27Z", "author": {"login": "tkaitchuck"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.\n+    private String[] getSegmentStoreJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};\n+    }\n+\n+    private String[] getControllerJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "749e12f986c8bcbf7b31c72fb094cd05b915ce35", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/749e12f986c8bcbf7b31c72fb094cd05b915ce35", "committedDate": "2020-09-22T11:24:13Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMzYyNDQ4", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493362448", "createdAt": "2020-09-22T11:28:03Z", "commit": {"oid": "749e12f986c8bcbf7b31c72fb094cd05b915ce35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d382a164f2ea0258f61184003ff068c06a9a7348", "author": {"user": {"login": "andreipaduroiu", "name": "Andrei Paduroiu"}}, "url": "https://github.com/pravega/pravega/commit/d382a164f2ea0258f61184003ff068c06a9a7348", "committedDate": "2020-09-22T16:28:41Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNjQ0NzY5", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493644769", "createdAt": "2020-09-22T16:29:52Z", "commit": {"oid": "d382a164f2ea0258f61184003ff068c06a9a7348"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNjQ3Njk5", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-493647699", "createdAt": "2020-09-22T16:33:20Z", "commit": {"oid": "d382a164f2ea0258f61184003ff068c06a9a7348"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0OTAwNjgx", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-494900681", "createdAt": "2020-09-23T17:45:04Z", "commit": {"oid": "d382a164f2ea0258f61184003ff068c06a9a7348"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69293fb0a48c9f2313a7ece31a4f6f700cd9385d", "author": {"user": {"login": "andreipaduroiu", "name": "Andrei Paduroiu"}}, "url": "https://github.com/pravega/pravega/commit/69293fb0a48c9f2313a7ece31a4f6f700cd9385d", "committedDate": "2020-09-24T19:50:00Z", "message": "Merge branch 'master' into issue-5082-java-11-migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ae1179d01f05185e24a71f35cf9ebb2c49cfc9d", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/4ae1179d01f05185e24a71f35cf9ebb2c49cfc9d", "committedDate": "2020-09-25T17:27:44Z", "message": "Merge remote-tracking branch 'upstream/master' into issue-5082-java-11-migration\n\n# Conflicts:\n#\tbuild.gradle\n#\ttest/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6841cd2815de96168f2be2e67c5d89091287e3b", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/a6841cd2815de96168f2be2e67c5d89091287e3b", "committedDate": "2020-09-28T16:25:34Z", "message": "Remove package.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTQwMDE2", "url": "https://github.com/pravega/pravega/pull/5121#pullrequestreview-497940016", "createdAt": "2020-09-28T22:22:07Z", "commit": {"oid": "a6841cd2815de96168f2be2e67c5d89091287e3b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3835, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}