{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODM2Njk2", "number": 4616, "title": "Issue 3865 unify test utils assert extensions", "bodyText": "Change log description\n\nReuse the  TestUtils.await() function to remove duplicate code.\n\nPurpose of the change\nCloses #3865\nWhat the code does\nNo functional changes.\nHow to verify it\nRun unit & system test. Completed.", "createdAt": "2020-03-11T17:53:57Z", "url": "https://github.com/pravega/pravega/pull/4616", "merged": true, "mergeCommit": {"oid": "30406cf2da7114196c6d198bf7cdb083114caea2"}, "closed": true, "closedAt": "2020-03-18T20:49:38Z", "author": {"login": "co-jo"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_KD3jAH2gAyMzg2ODM2Njk2OjQyMTQyOGQ4ZTgwZDk1ZDc4MWMwOGVkMDU0MGIwZTY1NWI3MjI0MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO9oUOAFqTM3NzIyNDI3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "421428d8e80d95d781c08ed0540b0e655b722405", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/421428d8e80d95d781c08ed0540b0e655b722405", "committedDate": "2020-01-29T18:15:26Z", "message": "Utilize TestUtils.await within assertEventuallyEquals method\n\nSigned-off-by: co-jo <Colin.Hryniowski@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae46abc4c120e1bedeb77658068179e7fc8ded2", "author": {"user": null}, "url": "https://github.com/pravega/pravega/commit/3ae46abc4c120e1bedeb77658068179e7fc8ded2", "committedDate": "2020-01-29T22:17:15Z", "message": "Do not log error to console. Remove duplicate code.\n\nSigned-off-by: co-jo <Colin.Hryniowski@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abac889d590115b8420c22470d5de87b1d9f7efc", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/abac889d590115b8420c22470d5de87b1d9f7efc", "committedDate": "2020-03-10T22:55:42Z", "message": "Merge remote-tracking branch 'upstream/master' into issue-3865-unify-test-utils-assert-extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac649c7817cf66e1b34718af054c01a45334ac39", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/ac649c7817cf66e1b34718af054c01a45334ac39", "committedDate": "2020-03-11T18:00:05Z", "message": "Merge branch 'master' into issue-3865-unify-test-utils-assert-extensions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NDI4MDU5", "url": "https://github.com/pravega/pravega/pull/4616#pullrequestreview-374428059", "createdAt": "2020-03-13T16:10:46Z", "commit": {"oid": "ac649c7817cf66e1b34718af054c01a45334ac39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjoxMDo0NlrOF2Jqvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjoxMDo0NlrOF2Jqvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjMyNTgyMw==", "bodyText": "You need to handle the case when expected is null as well. Check the condition above.", "url": "https://github.com/pravega/pravega/pull/4616#discussion_r392325823", "createdAt": "2020-03-13T16:10:46Z", "author": {"login": "andreipaduroiu"}, "path": "test/testcommon/src/main/java/io/pravega/test/common/AssertExtensions.java", "diffHunk": "@@ -56,15 +56,13 @@\n      * @throws Exception            If the is an assertion error, and exception from `eval`, or the thread is interrupted.\n      */\n     private static <T> void assertEventuallyEquals(T expected, Callable<T> eval, int checkIntervalMillis, long timeoutMillis) throws Exception {\n-        long currentTime = System.currentTimeMillis();\n-        long endTime = currentTime + timeoutMillis;\n-        while (currentTime < endTime) {\n-            if ((expected == null && eval.call() == null) || (expected != null && expected.equals(eval.call()))) {\n-                return;\n-            }\n-            Thread.sleep(checkIntervalMillis);\n-            currentTime = System.currentTimeMillis();\n-        }\n+        TestUtils.await(() -> {\n+                try {\n+                    return expected.equals(eval.call());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac649c7817cf66e1b34718af054c01a45334ac39"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8070af36a5b4addf4d61ec99a6e4b3413277ef85", "author": {"user": {"login": "RaulGracia", "name": "Ra\u00fal Gracia"}}, "url": "https://github.com/pravega/pravega/commit/8070af36a5b4addf4d61ec99a6e4b3413277ef85", "committedDate": "2020-03-13T16:13:25Z", "message": "Merge branch 'master' into issue-3865-unify-test-utils-assert-extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d71296cad77b65e64bfb13a918881445067c130f", "author": {"user": {"login": "ravisharda", "name": "Ravi Sharda"}}, "url": "https://github.com/pravega/pravega/commit/d71296cad77b65e64bfb13a918881445067c130f", "committedDate": "2020-03-18T11:58:09Z", "message": "Merge branch 'master' into issue-3865-unify-test-utils-assert-extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339e1c034edfa6cd446f9b338d720f9a722b4611", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/339e1c034edfa6cd446f9b338d720f9a722b4611", "committedDate": "2020-03-18T17:47:48Z", "message": "Merge branch 'master' into issue-3865-unify-test-utils-assert-extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a17abca735aa91ed065cb301b44fbb245150c12e", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/a17abca735aa91ed065cb301b44fbb245150c12e", "committedDate": "2020-03-18T18:37:15Z", "message": "Cover the case where expected may or may not be null.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjI0Mjc5", "url": "https://github.com/pravega/pravega/pull/4616#pullrequestreview-377224279", "createdAt": "2020-03-18T20:49:16Z", "commit": {"oid": "a17abca735aa91ed065cb301b44fbb245150c12e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3629, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}