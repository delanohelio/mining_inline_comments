{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxNjAwMzE3", "number": 5398, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODozNTo1OFrOFAEUow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMToyMzoyMVrOFALrzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NjE1MTM5OnYy", "diffSide": "RIGHT", "path": "docker/pravega/Dockerfile", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODozNTo1OFrOH-JImg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMToxOToyOVrOH-VWew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyMzQxOA==", "bodyText": "Please bring mkdir -p /usr/share/man/man1 to a line before rest of the CA certificates change so that the commands are collocated by functionality.\nAlso, it is not intuitive why this change is needed. Could you please add a comment that explains it?", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r534923418", "createdAt": "2020-12-03T08:35:58Z", "author": {"login": "ravisharda"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -9,14 +9,16 @@\n #\n FROM openjdk:11.0.8-jre-slim\n \n-RUN apt-get update && apt-get install -y -q \\\n+RUN mkdir -p /usr/share/man/man1 && apt-get update && apt-get install -y -q \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88e9d3d8348bac64730541504c4eef78e450500a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA1NTE0OQ==", "bodyText": "Done.", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535055149", "createdAt": "2020-12-03T10:16:53Z", "author": {"login": "Prabhaker24"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -9,14 +9,16 @@\n #\n FROM openjdk:11.0.8-jre-slim\n \n-RUN apt-get update && apt-get install -y -q \\\n+RUN mkdir -p /usr/share/man/man1 && apt-get update && apt-get install -y -q \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyMzQxOA=="}, "originalCommit": {"oid": "88e9d3d8348bac64730541504c4eef78e450500a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA2NjE1OQ==", "bodyText": "Agree with @ravisharda, it is unclear why we need /usr/share/man/man1.", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535066159", "createdAt": "2020-12-03T10:26:10Z", "author": {"login": "RaulGracia"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -9,14 +9,16 @@\n #\n FROM openjdk:11.0.8-jre-slim\n \n-RUN apt-get update && apt-get install -y -q \\\n+RUN mkdir -p /usr/share/man/man1 && apt-get update && apt-get install -y -q \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyMzQxOA=="}, "originalCommit": {"oid": "88e9d3d8348bac64730541504c4eef78e450500a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEyMzU3OQ==", "bodyText": "I have added comments explaining the inclusion of /usr/share/man/man1.", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535123579", "createdAt": "2020-12-03T11:19:29Z", "author": {"login": "Prabhaker24"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -9,14 +9,16 @@\n #\n FROM openjdk:11.0.8-jre-slim\n \n-RUN apt-get update && apt-get install -y -q \\\n+RUN mkdir -p /usr/share/man/man1 && apt-get update && apt-get install -y -q \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyMzQxOA=="}, "originalCommit": {"oid": "88e9d3d8348bac64730541504c4eef78e450500a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Njk1ODA4OnYy", "diffSide": "RIGHT", "path": "docker/pravega/Dockerfile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMDoyMTozM1rOH-Rhfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMDoyMTozM1rOH-Rhfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA2MDg2Mw==", "bodyText": "Nit:\n\nAddidng -> Adding.\nA more useful comment'd be one that explains why you are adding it. Such as \"Adding Java system truststore 'cacerts', as it is missing from the Java distribution installed by the base image, and one of the bindings (ECS) expects it to be there when TLS is enabled. \".\nAlso, explain why mkdir -p /usr/share/man/man1 is needed, as it's need is not intuitive.", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535060863", "createdAt": "2020-12-03T10:21:33Z", "author": {"login": "ravisharda"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -16,7 +16,11 @@ RUN apt-get update && apt-get install -y -q \\\n     jq \\\n     curl \\\n     net-tools \\\n-    iproute2  \\\n+    iproute2\n+\n+# Addidng ca-certificates to the base image", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8334f5a88ecdb0d67c005f828b7f1e75c90f58bd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NzM1NzU2OnYy", "diffSide": "RIGHT", "path": "docker/pravega/Dockerfile", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMToyMzoyMVrOH-VnHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMTo1MTowNlrOH-XTmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEyNzgzNg==", "bodyText": "I'm not sure that referring to SO is the best approach here. Could we just summarize the reason in 1 or 2 lines?", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535127836", "createdAt": "2020-12-03T11:23:21Z", "author": {"login": "RaulGracia"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -16,7 +16,16 @@ RUN apt-get update && apt-get install -y -q \\\n     jq \\\n     curl \\\n     net-tools \\\n-    iproute2  \\\n+    iproute2\n+\n+# Adding Java system truststore 'cacerts', as it is missing from the Java\n+# distribution installed by the base image and one of the storage bindings(ECS)\n+# depends on its presence.\n+#\n+# Without `mkdir -p /usr/share/man/man1` we hit the issue mentioned in:\n+# https://stackoverflow.com/questions/58160597/docker-fails-with-sub-process-usr-bin-dpkg-returned-an-error-code-1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0208d869d68b10bb9cb8389b9a20bf4ad448f4d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE1NTYwOA==", "bodyText": "Removed the SO link and added comments.", "url": "https://github.com/pravega/pravega/pull/5398#discussion_r535155608", "createdAt": "2020-12-03T11:51:06Z", "author": {"login": "Prabhaker24"}, "path": "docker/pravega/Dockerfile", "diffHunk": "@@ -16,7 +16,16 @@ RUN apt-get update && apt-get install -y -q \\\n     jq \\\n     curl \\\n     net-tools \\\n-    iproute2  \\\n+    iproute2\n+\n+# Adding Java system truststore 'cacerts', as it is missing from the Java\n+# distribution installed by the base image and one of the storage bindings(ECS)\n+# depends on its presence.\n+#\n+# Without `mkdir -p /usr/share/man/man1` we hit the issue mentioned in:\n+# https://stackoverflow.com/questions/58160597/docker-fails-with-sub-process-usr-bin-dpkg-returned-an-error-code-1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEyNzgzNg=="}, "originalCommit": {"oid": "a0208d869d68b10bb9cb8389b9a20bf4ad448f4d"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4584, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}