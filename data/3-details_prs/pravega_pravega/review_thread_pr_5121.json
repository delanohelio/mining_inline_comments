{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NzQzNzAx", "number": 5121, "reviewThreads": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwODozMzoyM1rOEd9DQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMzo1NjoyN1rOEl6f5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5ODQ0NDE3OnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwODozMzoyM1rOHJaDEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjoyNzoxOFrOHNBMlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ==", "bodyText": "The client must run well also on jdk8 how can we test it?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r479626001", "createdAt": "2020-08-29T08:33:23Z", "author": {"login": "eolivelli"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIwODI0Mw==", "bodyText": "Can you clarify a little bit? Would relying on the unit/integration tests be insufficient?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482208243", "createdAt": "2020-09-02T16:35:49Z", "author": {"login": "co-jo"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIzOTg1Mw==", "bodyText": "I can't see here where we are testing with jdk8", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482239853", "createdAt": "2020-09-02T17:21:25Z", "author": {"login": "eolivelli"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzNTk3Mw==", "bodyText": "I believe we can set the -source and -target javac flags for the client which should preserve compatibility,", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482435973", "createdAt": "2020-09-02T20:41:20Z", "author": {"login": "tkaitchuck"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEzMTUzNw==", "bodyText": "I have kept all the system test pod defaults as is, so we can still rely on running those for some level of verification. I'm not sure if there is a standard convention (for the variable name) but now if a user has a JAVA_8 env variable defined, it will attempt to run the unit tests using the executable that JAVA_8 points to.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483131537", "createdAt": "2020-09-03T17:09:36Z", "author": {"login": "co-jo"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzE0MQ==", "bodyText": "@tkaitchuck  The best way is to set \"-release 8\" (as it is the current approach), otherwise javac will pick wrong overloaded versions in newer JDKs.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413141", "createdAt": "2020-09-04T06:27:18Z", "author": {"login": "eolivelli"}, "path": ".travis.yml", "diffHunk": "@@ -12,7 +12,7 @@ git:\n language: java\n install: true\n jdk:\n- - openjdk8\n+ - openjdk11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjAwMQ=="}, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMDIzODc2OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMTowMjoxMlrOHLIHMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMjoxNDoxMlrOHLKGXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQyOTI5Ng==", "bodyText": "can a build property be defined to control what Java version to use for Client and its dependencies? This is for the case if someone wants to checkout the code and build everything using JDK11. Currently there is a need to make edits in multiple places in biuild.gradle. It would be a much better experience if there will be a single property that controls it.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r481429296", "createdAt": "2020-09-01T21:02:12Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs.addAll(['--release', '8'])", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNTYwNA==", "bodyText": "I looked into that, but couldn't find any sort of function/option that can programmatically apply some config to dependent tasks. The best we can do is have some sort of flag and a check in each of these task.withType(JavaCompile) blocks.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r481435604", "createdAt": "2020-09-01T21:14:32Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs.addAll(['--release', '8'])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQyOTI5Ng=="}, "originalCommit": null, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2MTg1Mg==", "bodyText": "That should work. As long as there is one place to turn Java11 on for Client and its dependencies - it's good enough", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r481461852", "createdAt": "2020-09-01T22:14:12Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs.addAll(['--release', '8'])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQyOTI5Ng=="}, "originalCommit": null, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNDkzNzk2OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjowNjo0MlrOHL2gpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMToyNToyMVrOHM4ATg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ==", "bodyText": "Should this be latest? Shouldn't it be using a specific named version instead?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482189479", "createdAt": "2020-09-02T16:06:42Z", "author": {"login": "ravisharda"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIwNzY2MQ==", "bodyText": "Likely -- I mostly followed suit from the zookeeperImageVersion property above. Any suggestions to a sain default?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482207661", "createdAt": "2020-09-02T16:34:51Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ=="}, "originalCommit": null, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1MzQ4NQ==", "bodyText": "I don't think we should use latest as Pravega image here. Ideally imageVersion should be pointing to an image that was built from the current source code as this is the intend in most cases - run system tests for the current commit/branch.  If no imageVersion provided then system test run should fail", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482353485", "createdAt": "2020-09-02T19:39:31Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ=="}, "originalCommit": null, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE0ODI2NQ==", "bodyText": "Should I just remove the default instead then? Obviously its not possible to determine the exact build tag ahead of time, but if you run the gradle docker task, it produces some sort of version based snapshot <version>-<hash>-SNAPSHOT but that build also gets tagged as latest, so I think it does cover the main use case.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483148265", "createdAt": "2020-09-03T17:40:08Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ=="}, "originalCommit": null, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2MjU0Mg==", "bodyText": "I think it comes to where the build is published after the gradle docker task. If it's published to the same repository as the default one to pull image from for the purpose of  the system test run then it may work. But as I understand it's not always true hence it's better to require the user to explicitly mention what image to use. With that in mind the default image version should be removed and if the user doesn't provide it the system test run will fail.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483262542", "createdAt": "2020-09-03T21:25:21Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -868,9 +884,9 @@ project('test:system') {\n         systemProperty \"bookkeeperImageName\", System.getProperty(\"bookkeeperImageName\", \"bookkeeper\") // bookkeeper image name\n         systemProperty \"zookeeperImageName\", System.getProperty(\"zookeeperImageName\", \"zookeeper\") // zookkeeper image name\n         systemProperty \"zookeeperImageVersion\", System.getProperty(\"zookeeperImageVersion\", \"latest\") // zookeeper image version\n-        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\") // pravega version.\n+        systemProperty \"imageVersion\", System.getProperty(\"imageVersion\", \"latest\") // pravega version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4OTQ3OQ=="}, "originalCommit": null, "originalPosition": 127}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNTk1NTg5OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxOTo0MzowN1rOHMA0Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMToyODoxM1rOHM4FPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg==", "bodyText": "It's bit inconsistent to call this property this way as when default JDK is changed to the next version this property should be updated as well. Suggest to use a better name, something that will reflect the fact that Client will be build for the same release version as Server code.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482358326", "createdAt": "2020-09-02T19:43:07Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM2MDE0Mg==", "bodyText": "Also please don't forget to update repository README file to reflect the changes in default JDK", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482360142", "createdAt": "2020-09-02T19:44:30Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE0MDYzMA==", "bodyText": "Instead I added a user configurable property to set the client java version accordingly: clientJavaVersion. I opted for this instead of say, a compileUsingSameJDK flag because it essentially requires the same amount of user effort, but is more informative to what versions are being targeted.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483140630", "createdAt": "2020-09-03T17:25:42Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2MzgwNA==", "bodyText": "okay, makes sense.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483263804", "createdAt": "2020-09-03T21:28:13Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +142,12 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    if (System.getProperty(\"buildJDK11Client\") == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODMyNg=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNjQwOTQwOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMDo0Mzo0MlrOHMFwTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMjo1NzozOFrOHM6DKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzOTI0Nw==", "bodyText": "Is there a way to override this for the client?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r482439247", "createdAt": "2020-09-02T20:43:42Z", "author": {"login": "tkaitchuck"}, "path": "build.gradle", "diffHunk": "@@ -91,18 +90,11 @@ allprojects {\n \n     gradle.projectsEvaluated {\n         tasks.withType(JavaCompile) {\n-            sourceCompatibility = JavaVersion.VERSION_1_8\n-            targetCompatibility = JavaVersion.VERSION_1_8\n+            sourceCompatibility = JavaVersion.VERSION_11\n+            targetCompatibility = JavaVersion.VERSION_11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEzNzg0Mg==", "bodyText": "I don't believe it is sufficient (or even possible) to supply overrides for the client (and its dependencies). For example if I supply\n    tasks.withType(JavaCompile) {\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n\nin any other project, it still builds Java 11 classes. Even if this was just a matter of ordering this configuration, I don't think it is sufficient. See: https://bugs.openjdk.java.net/browse/JDK-8058150\nThe way we currently override it is through the --release flag, which basically does the above anyway.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483137842", "createdAt": "2020-09-03T17:20:57Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -91,18 +90,11 @@ allprojects {\n \n     gradle.projectsEvaluated {\n         tasks.withType(JavaCompile) {\n-            sourceCompatibility = JavaVersion.VERSION_1_8\n-            targetCompatibility = JavaVersion.VERSION_1_8\n+            sourceCompatibility = JavaVersion.VERSION_11\n+            targetCompatibility = JavaVersion.VERSION_11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzOTI0Nw=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2NTM3MQ==", "bodyText": "My understanding is that --release is not an equivalent of --source and --target , you should always use --release starting with Java9+. With that in mind, do we really need to specify --source and --target explicitly for the components we want to build with the current JDK (e.g. JDK11)?\nFor Client and its dependencies we should use --release explicitly as we do now.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483265371", "createdAt": "2020-09-03T21:31:41Z", "author": {"login": "medvedevigorek"}, "path": "build.gradle", "diffHunk": "@@ -91,18 +90,11 @@ allprojects {\n \n     gradle.projectsEvaluated {\n         tasks.withType(JavaCompile) {\n-            sourceCompatibility = JavaVersion.VERSION_1_8\n-            targetCompatibility = JavaVersion.VERSION_1_8\n+            sourceCompatibility = JavaVersion.VERSION_11\n+            targetCompatibility = JavaVersion.VERSION_11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzOTI0Nw=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI5NjA0Mw==", "bodyText": "We don't need to explicitly include them no. I do however think it is a good idea to also include release flags for the non-client components. This should protect any users who are running some JDK version >11 from running into issues.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483296043", "createdAt": "2020-09-03T22:57:38Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -91,18 +90,11 @@ allprojects {\n \n     gradle.projectsEvaluated {\n         tasks.withType(JavaCompile) {\n-            sourceCompatibility = JavaVersion.VERSION_1_8\n-            targetCompatibility = JavaVersion.VERSION_1_8\n+            sourceCompatibility = JavaVersion.VERSION_11\n+            targetCompatibility = JavaVersion.VERSION_11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQzOTI0Nw=="}, "originalCommit": {"oid": "ac167ff6af108e0ccdb7ee8ad7236916d997da4b"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMjYwMjE0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjoyODoyN1rOHNBOPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjoyODoyN1rOHNBOPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzU2NQ==", "bodyText": "\" If you have a local JDK 8 installation, the client's unit tests can be deployed by setting the JAVA_8 environment variable to point the JDK  8 home directory.\"\nI would drop this line, it does not add value.\nIt is important to state that Pravega Client and all its dependendecies is expected to work on Java 8 compatible runtimes", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413565", "createdAt": "2020-09-04T06:28:27Z", "author": {"login": "eolivelli"}, "path": "README.md", "diffHunk": "@@ -15,7 +15,9 @@ To learn more about Pravega, visit https://pravega.io\n \n ## Prerequisites\n \n-- Java 8+\n+- Java 11+\n+\n+The `client` project is expected to be built using *Java 8* bytecode. If you have a local *JDK 8* installation, the `client`'s unit tests can be deployed by setting the `JAVA_8` environment variable to point the *JDK  8* home directory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMjYwNDg1OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjoyOTo0MVrOHNBP4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjozNjozOFrOHNBaSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzk4Ng==", "bodyText": "why this complexity ? istn't \"11\" enough ? you are still hardcoding \"VERSION_11\" here", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483413986", "createdAt": "2020-09-04T06:29:41Z", "author": {"login": "eolivelli"}, "path": "build.gradle", "diffHunk": "@@ -996,6 +1020,10 @@ def getProjectVersion() {\n     return ver\n }\n \n+def getDefaultJavaVersion() {\n+    return JavaVersion.VERSION_11.getMajorVersion()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 208}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxNjY1MA==", "bodyText": "Yeah, I debated that. Definitely unnecessary.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483416650", "createdAt": "2020-09-04T06:36:38Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -996,6 +1020,10 @@ def getProjectVersion() {\n     return ver\n }\n \n+def getDefaultJavaVersion() {\n+    return JavaVersion.VERSION_11.getMajorVersion()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxMzk4Ng=="}, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 208}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMjYxMTE4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjozMjoyMlrOHNBTwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo0MjoxMFrOHNBipQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxNDk3Nw==", "bodyText": "Are we adding this block in order to run tests of client on jdk8 ?\nI think this is not really needed.\nIf we set --release = 8 in the client and in all dependencies it should be enough.\nIt is better to have some external project / integration tests suite that uses the client.\nHaving here such support looks to me overwhelming", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483414977", "createdAt": "2020-09-04T06:32:22Z", "author": {"login": "eolivelli"}, "path": "build.gradle", "diffHunk": "@@ -259,6 +261,19 @@ project('client') {\n         testCompile group: 'io.netty', name: 'netty-transport-native-epoll', version: nettyVersion, classifier: 'linux-x86_64'\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs << \"--release\" << clientJavaVersion\n+    }\n+\n+    // If the user has the client to build with a different version and there exists an appropriate JDK,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxODI0MQ==", "bodyText": "This functionality was introduced in response to your comment here: #5121 (comment). I'm happy with removing it if you think it is overkill.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483418241", "createdAt": "2020-09-04T06:40:44Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -259,6 +261,19 @@ project('client') {\n         testCompile group: 'io.netty', name: 'netty-transport-native-epoll', version: nettyVersion, classifier: 'linux-x86_64'\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs << \"--release\" << clientJavaVersion\n+    }\n+\n+    // If the user has the client to build with a different version and there exists an appropriate JDK,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxNDk3Nw=="}, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxODc4OQ==", "bodyText": "@co-jo yes, to me is overkill. Let's remove this complexity.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483418789", "createdAt": "2020-09-04T06:42:10Z", "author": {"login": "eolivelli"}, "path": "build.gradle", "diffHunk": "@@ -259,6 +261,19 @@ project('client') {\n         testCompile group: 'io.netty', name: 'netty-transport-native-epoll', version: nettyVersion, classifier: 'linux-x86_64'\n     }\n \n+    tasks.withType(JavaCompile) {\n+        options.compilerArgs << \"--release\" << clientJavaVersion\n+    }\n+\n+    // If the user has the client to build with a different version and there exists an appropriate JDK,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQxNDk3Nw=="}, "originalCommit": {"oid": "45975ccb6bb59009c6d214431393e5238761615f"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMjY1Nzc0OnYy", "diffSide": "RIGHT", "path": "gradle.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MDoxNFrOHNBvNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MDoxNFrOHNBvNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyMjAwNw==", "bodyText": "The version of Java to build the 'client' project and all dependencies in", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483422007", "createdAt": "2020-09-04T06:50:14Z", "author": {"login": "eolivelli"}, "path": "gradle.properties", "diffHunk": "@@ -66,3 +66,5 @@ bookkeeperBaseTag=pravega/bookkeeper\n signing.keyId=\n # This will be defaulted to ~/.gnupg/secring.gpg if not provided as a command line property\n signing.secretKeyRingFile=\n+# The version of Java to build the 'client' project in.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMjY2NDE5OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MjoyN1rOHNBy6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwNjo1MjoyN1rOHNBy6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyMjk1Mg==", "bodyText": "I would say something like that:\nIn spite of the requirements of using JDK11+ to build this project, Pravega client artifacts are expected to be compatible with Java 8 runtime, only the server side components need JDK11+ to run.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483422952", "createdAt": "2020-09-04T06:52:27Z", "author": {"login": "eolivelli"}, "path": "README.md", "diffHunk": "@@ -15,7 +15,9 @@ To learn more about Pravega, visit https://pravega.io\n \n ## Prerequisites\n \n-- Java 8+\n+- Java 11+\n+\n+The `client` project is expected to be built into *Java 8* bytecode.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMzA1NTUyOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQwODo1Mzo0OFrOHNFc-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDowMzo0NlrOHNaMhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQ4Mjg3NA==", "bodyText": "nit: Can we have all the compile options at a single place ? ref: \n  \n    \n      pravega/gradle/java.gradle\n    \n    \n        Lines 20 to 30\n      in\n      4f7be17\n    \n    \n    \n    \n\n        \n          \n               options.compilerArgs.addAll([ \n        \n\n        \n          \n                       \"-Xlint:deprecation\", \n        \n\n        \n          \n                       \"-Xlint:divzero\", \n        \n\n        \n          \n                       \"-Xlint:empty\", \n        \n\n        \n          \n                       \"-Xlint:fallthrough\", \n        \n\n        \n          \n                       \"-Xlint:finally\", \n        \n\n        \n          \n                       \"-Xlint:overrides\", \n        \n\n        \n          \n                       \"-Xlint:path\", \n        \n\n        \n          \n                       \"-Werror\" \n        \n\n        \n          \n               ]) \n        \n\n        \n          \n           } \n        \n    \n  \n\n\njava.gradle seems to be the place were this change can be added.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483482874", "createdAt": "2020-09-04T08:53:48Z", "author": {"login": "shrids"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +140,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyMjcyNw==", "bodyText": "We could, but we would have to surround the compileJava closure with inside a call to afterEvaluate. That doesn't seem like a good practice to me, but its doable.\nEdit: I'll just leave a comment to explain this interaction.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r483822727", "createdAt": "2020-09-04T20:03:46Z", "author": {"login": "co-jo"}, "path": "build.gradle", "diffHunk": "@@ -150,6 +140,10 @@ project('common') {\n         //Do NOT add any additional dependencies here.\n     }\n \n+    tasks.withType(JavaCompile) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQ4Mjg3NA=="}, "originalCommit": {"oid": "edf8c7f2a100099263e408d9378f76e02c4416ee"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzc1Mzg2OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxNzoyMVrOHOkpig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxNzoyMVrOHOkpig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MjU3MA==", "bodyText": "nit: \"no more\" -> \"no longer\"", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485042570", "createdAt": "2020-09-08T16:17:21Z", "author": {"login": "andreipaduroiu"}, "path": "build.gradle", "diffHunk": "@@ -584,10 +595,15 @@ project('shared:controller-api') {\n         compile \"io.grpc:grpc-protobuf:\" + grpcVersion\n         compile \"io.grpc:grpc-stub:\" + grpcVersion\n         compile group: 'io.netty', name: 'netty-tcnative-boringssl-static', version: nettyBoringSSLVersion\n-         // Since Java 10 javax.annotation is no more bundled with the JRE\n+        // Since Java 10 javax.annotation is no more bundled with the JRE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 151}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzc1Njk0OnYy", "diffSide": "RIGHT", "path": "gradle.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxODoxMVrOHOkrgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjo0MToxNVrOHOlhXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzA3Mw==", "bodyText": "LOL. This is a big jump \ud83d\udc4d", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485043073", "createdAt": "2020-09-08T16:18:11Z", "author": {"login": "andreipaduroiu"}, "path": "gradle.properties", "diffHunk": "@@ -22,12 +22,12 @@ commonsioVersion=2.6\n commonsLang3Version=3.7\n dockerClientVersion=8.16.0\n ecsObjectClientVersion=3.0.6\n-spotbugsVersion=4.0.3\n-spotbugsAnnotationsVersion=4.0.3\n-spotbugsPluginVersion=1.6.9\n+spotbugsVersion=4.0.6\n+spotbugsAnnotationsVersion=4.0.6\n+spotbugsPluginVersion=4.4.4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA1Njg2Mg==", "bodyText": "Full disclosure, I basically referenced what Tom did in his faster-build branch for these exact versions.  @tkaitchuck Any thoughts?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485056862", "createdAt": "2020-09-08T16:41:15Z", "author": {"login": "co-jo"}, "path": "gradle.properties", "diffHunk": "@@ -22,12 +22,12 @@ commonsioVersion=2.6\n commonsLang3Version=3.7\n dockerClientVersion=8.16.0\n ecsObjectClientVersion=3.0.6\n-spotbugsVersion=4.0.3\n-spotbugsAnnotationsVersion=4.0.3\n-spotbugsPluginVersion=1.6.9\n+spotbugsVersion=4.0.6\n+spotbugsAnnotationsVersion=4.0.6\n+spotbugsPluginVersion=4.4.4", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzA3Mw=="}, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzc2MTcxOnYy", "diffSide": "RIGHT", "path": "gradle/java.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoxOToyOVrOHOkucg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjo1NTozOFrOHOmBSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzgyNg==", "bodyText": "I see you defined this in 2 places. Since this file is imported into main build.gradle file, does it suffice to just declare it here?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485043826", "createdAt": "2020-09-08T16:19:29Z", "author": {"login": "andreipaduroiu"}, "path": "gradle/java.gradle", "diffHunk": "@@ -98,3 +104,7 @@ plugins.withId('java') {\n         testCompile \"org.mockito:mockito-core:${mockitoVersion}\"\n     }\n }\n+\n+def getDefaultJavaVersion() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA2NTAzMw==", "bodyText": "We can pull it out of java.gradle but not build.gradle. Will remove this declaration.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r485065033", "createdAt": "2020-09-08T16:55:38Z", "author": {"login": "co-jo"}, "path": "gradle/java.gradle", "diffHunk": "@@ -98,3 +104,7 @@ plugins.withId('java') {\n         testCompile \"org.mockito:mockito-core:${mockitoVersion}\"\n     }\n }\n+\n+def getDefaultJavaVersion() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MzgyNg=="}, "originalCommit": {"oid": "38b306ba5816c9b62d33866d00f94d1dccba8148"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MDc2ODg0OnYy", "diffSide": "RIGHT", "path": "test/system/kubernetes/setupTestPod.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxOToxNjoyOFrOHVe-TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMToxMzo0MVrOHVncAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI4OTYxMg==", "bodyText": "Is this change intentional ?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492289612", "createdAt": "2020-09-21T19:16:28Z", "author": {"login": "sachin-j-joshi"}, "path": "test/system/kubernetes/setupTestPod.sh", "diffHunk": "@@ -92,7 +92,7 @@ spec:\n         - mountPath: \"/data\"\n           name: task-pv-storage\n EOF\n-kubectl wait --timeout=1m --for=condition=Ready pod/task-pv-pod\n+kubectl wait --timeout=5m --for=condition=Ready pod/task-pv-pod", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjMyMzkxMQ==", "bodyText": "It was. Five minutes might seem excessive but I was running into issues with the system tests from this pod timing out. I can lower if if you think its too high, but I think its a better experience to have a longer timeout than having to redeploy the tests.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492323911", "createdAt": "2020-09-21T20:22:27Z", "author": {"login": "co-jo"}, "path": "test/system/kubernetes/setupTestPod.sh", "diffHunk": "@@ -92,7 +92,7 @@ spec:\n         - mountPath: \"/data\"\n           name: task-pv-storage\n EOF\n-kubectl wait --timeout=1m --for=condition=Ready pod/task-pv-pod\n+kubectl wait --timeout=5m --for=condition=Ready pod/task-pv-pod", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI4OTYxMg=="}, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQyODI4OA==", "bodyText": "ok. makes sense.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492428288", "createdAt": "2020-09-22T01:13:41Z", "author": {"login": "sachin-j-joshi"}, "path": "test/system/kubernetes/setupTestPod.sh", "diffHunk": "@@ -92,7 +92,7 @@ spec:\n         - mountPath: \"/data\"\n           name: task-pv-storage\n EOF\n-kubectl wait --timeout=1m --for=condition=Ready pod/task-pv-pod\n+kubectl wait --timeout=5m --for=condition=Ready pod/task-pv-pod", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI4OTYxMg=="}, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MTYwMTUxOnYy", "diffSide": "RIGHT", "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMDoyNTo1MVrOHVmwsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMDo1MDowM1rOHVnG7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQxNzIwMg==", "bodyText": "@co-jo can you please file an issue for Pravega Operator to remove usage of UseCGroupMemoryLimitForHeap for Pravega 0.9+", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492417202", "createdAt": "2020-09-22T00:25:51Z", "author": {"login": "medvedevigorek"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQyMjg5NQ==", "bodyText": "@co-jo can you please file an issue for Pravega Operator to remove usage of UseCGroupMemoryLimitForHeap for Pravega 0.9+\n\nSure.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492422895", "createdAt": "2020-09-22T00:50:03Z", "author": {"login": "co-jo"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQxNzIwMg=="}, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MTkxMjA2OnYy", "diffSide": "RIGHT", "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMzo1NjoyN1rOHVpdpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNToxMzoxMFrOHVqcgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ2MTQ3OA==", "bodyText": "Why do we need IgnoreUnrecognizedVMOptions?", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492461478", "createdAt": "2020-09-22T03:56:27Z", "author": {"login": "tkaitchuck"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.\n+    private String[] getSegmentStoreJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};\n+    }\n+\n+    private String[] getControllerJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ3NzU3MQ==", "bodyText": "The Pravega Operator supplies certain default JVM options (+UseCGroupMemoryLimitForHeap), which are not recognized by later JVMs. Any kubernetes deployment wouldn't work until the Pravega Operator is adjusted accordingly.", "url": "https://github.com/pravega/pravega/pull/5121#discussion_r492477571", "createdAt": "2020-09-22T05:13:10Z", "author": {"login": "co-jo"}, "path": "test/system/src/main/java/io/pravega/test/system/framework/services/kubernetes/AbstractService.java", "diffHunk": "@@ -288,6 +290,16 @@ private static boolean isOperatorVersionAbove040() {\n         }));\n     }\n \n+    // Removal of the JVM option 'UseCGroupMemoryLimitForHeap' is required with JVM environments >= 10. This option\n+    // is supplied by default by the operators. We cannot 'deactive' it using the XX:- counterpart as it is unrecognized.\n+    private String[] getSegmentStoreJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};\n+    }\n+\n+    private String[] getControllerJVMOptions() {\n+        return new String[]{\"-XX:+UseContainerSupport\", \"-XX:+IgnoreUnrecognizedVMOptions\"};", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ2MTQ3OA=="}, "originalCommit": {"oid": "e717e45f56bcdf7566102059520a0eb60b2a5a21"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4660, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}