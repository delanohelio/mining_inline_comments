{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NTU0Nzg3", "number": 4709, "title": "Issue 4706: Fix SegmentStoreMetrics", "bodyText": "Change log description\n\nClean up redundancies in ThrottlerTests.java.\nCapture observed throttling sources in order to freeze gauge metrics.\nRandomize containerId in SegmentStoreMetricsTests.java to prevent gauge conflicts.\n\nPurpose of the change\nFixes #4706\nWhat the code does\n\nFreezes gauge values upon SegmentStoreMetrics.OperationProcessor shutdown.\n\nHow to verify it\nRun unit tests.", "createdAt": "2020-04-18T20:20:07Z", "url": "https://github.com/pravega/pravega/pull/4709", "merged": true, "mergeCommit": {"oid": "7552fa22fbc54f937522e08681124fc86baf2ea5"}, "closed": true, "closedAt": "2020-04-21T21:33:14Z", "author": {"login": "co-jo"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGUXgKAH2gAyNDA1NTU0Nzg3OjA4NjAxYWZkMTE0NjNiZjcwMGE2ZDBhZjNmMzNkY2I1M2Y5MzVlMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ6oMTgFqTM5NzY5MTc4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08601afd11463bf700a6d0af3f33dcb53f935e09", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/08601afd11463bf700a6d0af3f33dcb53f935e09", "committedDate": "2020-02-21T00:13:24Z", "message": "Update K8 client APIs to use their 5.0.0 counterparts.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25a165d0293c34ee8703fff764e55cf8fda413dd", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/25a165d0293c34ee8703fff764e55cf8fda413dd", "committedDate": "2020-02-21T18:42:03Z", "message": "Merge pull request #1 from co-jo/issue-4464-update-kubernetes-client-version\n\nIssue 4464 update kubernetes client version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc2dd2be26feed2953258ff055c1657aeb57019", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/8cc2dd2be26feed2953258ff055c1657aeb57019", "committedDate": "2020-02-23T04:43:09Z", "message": "Run system tests using alternative flag value.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3fcbd2e627f9fc0a0f6bad7e42667db4439e092", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/c3fcbd2e627f9fc0a0f6bad7e42667db4439e092", "committedDate": "2020-03-10T22:21:32Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f808cc42831892aeb8e7824c22d499a1f9fa03", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/f5f808cc42831892aeb8e7824c22d499a1f9fa03", "committedDate": "2020-03-18T18:44:10Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7901435dc1127bed1c46845bbaf8024477e2078f", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/7901435dc1127bed1c46845bbaf8024477e2078f", "committedDate": "2020-04-02T18:49:59Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa090cad1d88812f2a88e9debacdb04df585adbf", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/aa090cad1d88812f2a88e9debacdb04df585adbf", "committedDate": "2020-04-18T20:15:50Z", "message": "Merge branch 'master' of https://github.com/pravega/pravega"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2262f877e361c3a78765219f84568440edb1a0e1", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/2262f877e361c3a78765219f84568440edb1a0e1", "committedDate": "2020-04-18T20:18:23Z", "message": "Make sure to freeze newly introduced Gauges on OperationProcessor close.\n\nSigned-off-by: co-jo <colin.hryniowski@dell.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTkwMjgx", "url": "https://github.com/pravega/pravega/pull/4709#pullrequestreview-396590281", "createdAt": "2020-04-20T15:57:17Z", "commit": {"oid": "2262f877e361c3a78765219f84568440edb1a0e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48e0f35f2146d643623148670919d1b29b62ed0d", "author": {"user": {"login": "andreipaduroiu", "name": "Andrei Paduroiu"}}, "url": "https://github.com/pravega/pravega/commit/48e0f35f2146d643623148670919d1b29b62ed0d", "committedDate": "2020-04-21T16:55:00Z", "message": "Merge branch 'master' into issue-4706-fix-segment-store-metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDk0Mjky", "url": "https://github.com/pravega/pravega/pull/4709#pullrequestreview-397494292", "createdAt": "2020-04-21T16:56:11Z", "commit": {"oid": "2262f877e361c3a78765219f84568440edb1a0e1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjo1NjoyMlrOGJOdKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjo1NjoyMlrOGJOdKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMyNzIwOA==", "bodyText": "This is not thread safe. Use Collections.synchronizedSet", "url": "https://github.com/pravega/pravega/pull/4709#discussion_r412327208", "createdAt": "2020-04-21T16:56:22Z", "author": {"login": "andreipaduroiu"}, "path": "segmentstore/server/src/main/java/io/pravega/segmentstore/server/SegmentStoreMetrics.java", "diffHunk": "@@ -144,6 +146,7 @@ private void report() {\n         private final OpStatsLogger processOperationsBatchSize;\n         private final int containerId;\n         private final String[] containerTag;\n+        private Set<String> throttlers = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e0f35f2146d643623148670919d1b29b62ed0d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "084da13c178a36aa8befa93cb883be0aac7759f0", "author": {"user": {"login": "co-jo", "name": "Colin Hryniowski"}}, "url": "https://github.com/pravega/pravega/commit/084da13c178a36aa8befa93cb883be0aac7759f0", "committedDate": "2020-04-21T19:11:57Z", "message": "Use thread-safe set.\n\nSigned-off-by: co-jo <colin.hryniowski@unb.ca>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NjkxNzgy", "url": "https://github.com/pravega/pravega/pull/4709#pullrequestreview-397691782", "createdAt": "2020-04-21T21:32:35Z", "commit": {"oid": "084da13c178a36aa8befa93cb883be0aac7759f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3417, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}