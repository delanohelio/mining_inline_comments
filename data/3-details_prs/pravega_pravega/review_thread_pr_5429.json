{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwNjY5MjI0", "number": 5429, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQxOTo1ODozOVrOF7SwVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xOFQxNjo1NTozNVrOGMTL0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzk3NzE3NTkxOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQxOTo1ODozOVrOJWpReg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQxOTo1ODozOVrOJWpReg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzcyNDY2Ng==", "bodyText": "Must this really depend on the client? Usually it's the top level components that depend on shared:*", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r627724666", "createdAt": "2021-05-06T19:58:39Z", "author": {"login": "andreipaduroiu"}, "path": "build.gradle", "diffHunk": "@@ -302,6 +302,17 @@ project('shared:protocol') {\n     }\n }\n \n+project ('shared:rest') {\n+    dependencies {\n+        compile project(':common')\n+        compile project(':client')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzk3NzE4OTI4OnYy", "diffSide": "RIGHT", "path": "shared/rest/src/main/java/io/pravega/shared/rest/RESTApplication.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQyMDowMjoxMVrOJWpZwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQxNzo0MjowM1rOJglehg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzcyNjc4NA==", "bodyText": "Why does this require a Set? Can a Collection be enough?", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r627726784", "createdAt": "2021-05-06T20:02:11Z", "author": {"login": "andreipaduroiu"}, "path": "shared/rest/src/main/java/io/pravega/shared/rest/RESTApplication.java", "diffHunk": "@@ -13,18 +13,18 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package io.pravega.controller.server.rest;\n+package io.pravega.shared.rest;\n \n import javax.ws.rs.core.Application;\n import java.util.Set;\n \n /**\n  * Application to register the REST resource classes.\n  */\n-public class ControllerApplication extends Application {\n+public class RESTApplication extends Application {\n     private final Set<Object> resource;\n \n-    public ControllerApplication(final Set<Object> resources) {\n+    public RESTApplication(final Set<Object> resources) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODE0ODIzMA==", "bodyText": "The Application superclass requires a Set.", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r638148230", "createdAt": "2021-05-24T17:42:03Z", "author": {"login": "co-jo"}, "path": "shared/rest/src/main/java/io/pravega/shared/rest/RESTApplication.java", "diffHunk": "@@ -13,18 +13,18 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package io.pravega.controller.server.rest;\n+package io.pravega.shared.rest;\n \n import javax.ws.rs.core.Application;\n import java.util.Set;\n \n /**\n  * Application to register the REST resource classes.\n  */\n-public class ControllerApplication extends Application {\n+public class RESTApplication extends Application {\n     private final Set<Object> resource;\n \n-    public ControllerApplication(final Set<Object> resources) {\n+    public RESTApplication(final Set<Object> resources) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzcyNjc4NA=="}, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzk3NzE5MzEwOnYy", "diffSide": "RIGHT", "path": "shared/rest/src/main/java/io/pravega/shared/rest/impl/RESTServerConfigImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQyMDowMzoxNlrOJWpcFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQxNzo0Mzo1NFrOJglisg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzcyNzM4MQ==", "bodyText": "Does this mean we need more work here?", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r627727381", "createdAt": "2021-05-06T20:03:16Z", "author": {"login": "andreipaduroiu"}, "path": "shared/rest/src/main/java/io/pravega/shared/rest/impl/RESTServerConfigImpl.java", "diffHunk": "@@ -62,4 +64,16 @@ public String toString() {\n                 .append(\")\")\n                 .toString();\n     }\n+\n+    @Override\n+    public boolean isAuthorizationEnabled() {\n+        return this.tlsEnabled;\n+    }\n+\n+    @Override\n+    public Properties toAuthHandlerProperties() {\n+        Properties props = new Properties();\n+        // Props to include?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODE0OTI5OA==", "bodyText": "No, that reminder no longer applies.", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r638149298", "createdAt": "2021-05-24T17:43:54Z", "author": {"login": "co-jo"}, "path": "shared/rest/src/main/java/io/pravega/shared/rest/impl/RESTServerConfigImpl.java", "diffHunk": "@@ -62,4 +64,16 @@ public String toString() {\n                 .append(\")\")\n                 .toString();\n     }\n+\n+    @Override\n+    public boolean isAuthorizationEnabled() {\n+        return this.tlsEnabled;\n+    }\n+\n+    @Override\n+    public Properties toAuthHandlerProperties() {\n+        Properties props = new Properties();\n+        // Props to include?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzcyNzM4MQ=="}, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzk3NzcxNzk0OnYy", "diffSide": "RIGHT", "path": "shared/rest/src/main/java/io/pravega/shared/rest/security/AuthHandlerManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQyMjozNjowN1rOJWuXjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQyMjozNjowN1rOJWuXjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzgwODE0Mw==", "bodyText": "if (builder != null)", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r627808143", "createdAt": "2021-05-06T22:36:07Z", "author": {"login": "andreipaduroiu"}, "path": "shared/rest/src/main/java/io/pravega/shared/rest/security/AuthHandlerManager.java", "diffHunk": "@@ -170,7 +183,9 @@ public void registerInterceptors(ServerBuilder<?> builder) {\n                                 continue;\n                             }\n                         }\n-                        builder.intercept(new AuthInterceptor(handler));\n+                        if (Objects.nonNull(builder)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74beff815ebbc6aea79320c62db00f79840851dc"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDE1NTQ4NzcwOnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/io/pravega/controller/server/security/auth/GrpcAuthHelper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xOFQxNjo1MDozNFrOJwPkWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xOFQxNjo1MDozNFrOJwPkWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NDU2NjQ4OQ==", "bodyText": "Javadoc here please.", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r654566489", "createdAt": "2021-06-18T16:50:34Z", "author": {"login": "andreipaduroiu"}, "path": "controller/src/main/java/io/pravega/controller/server/security/auth/GrpcAuthHelper.java", "diffHunk": "@@ -134,4 +136,10 @@ public static String retrieveMasterToken(String tokenSigningKey) {\n         return new JsonWebToken(\"segmentstoreresource\", \"segmentstore\", tokenSigningKey.getBytes(),\n                 customClaims, null).toCompactString();\n     }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9b1f1e66896af24a41dc7ae0a80458158ed5cb"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDE1NTUwNDE2OnYy", "diffSide": "RIGHT", "path": "shared/authplugin/src/main/java/io/pravega/auth/AuthFileUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xOFQxNjo1NTozNVrOJwPuaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNi0xOFQxNjo1NTozNVrOJwPuaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NDU2OTA2NA==", "bodyText": "Let's move this to the test sub-project and use a testCompile in the controller build.gradle declaration.", "url": "https://github.com/pravega/pravega/pull/5429#discussion_r654569064", "createdAt": "2021-06-18T16:55:35Z", "author": {"login": "andreipaduroiu"}, "path": "shared/authplugin/src/main/java/io/pravega/auth/AuthFileUtils.java", "diffHunk": "@@ -24,6 +25,7 @@\n import java.util.List;\n import java.util.stream.Collectors;\n \n+@VisibleForTesting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9b1f1e66896af24a41dc7ae0a80458158ed5cb"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4613, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}