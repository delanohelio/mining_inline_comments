{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NTU3Nzgy", "number": 4599, "title": "Issue 4600: Fix Transaction related logs.", "bodyText": "Change log description\n\nSimplify debugging in case of deadline exceed exception on the controller client.\nReduce logging on the client.\nImprove transaction related logs on the controller.\nEnsure an empty response from SSS should not log a WARN message.\n\nPurpose of the change\nFixes #4600\nWhat the code does\n\nSimplify debugging in case of exceptions on the controller client. Ensure the parameters like the transaction ids are logged immediately instead of logging it along with a RetriesExhaustedException.\nReduce logging on the client in case of an empty response from SSS.\nEnsure the txn UUID is logged instead of low and high bits of the transaction.\n\nHow to verify it\nNo changes to functionality. All the existing tests should continue to pass.", "createdAt": "2020-03-09T12:35:41Z", "url": "https://github.com/pravega/pravega/pull/4599", "merged": true, "mergeCommit": {"oid": "3a94d10912af0fd714b01d79b9a216849e43c6b2"}, "closed": true, "closedAt": "2020-03-11T07:16:45Z", "author": {"login": "shrids"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL85R1gH2gAyMzg1NTU3NzgyOjNkOWIxZDE1YTM1NjEwMWYzZjg2ODQ5ZDcwMWNjOTdhNzhkODNlOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMgpfJgH2gAyMzg1NTU3NzgyOmZkOTVhNDE4M2IyYjlmMmQ1ZjdmM2ExMWMzMDFhYTMwMzQ5YzhlYTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3d9b1d15a356101f3f86849d701cc97a78d83e95", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/3d9b1d15a356101f3f86849d701cc97a78d83e95", "committedDate": "2020-03-09T12:16:07Z", "message": "first set of improvements.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8555f68b701862254df7c26f946b81f2127bf0f", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/f8555f68b701862254df7c26f946b81f2127bf0f", "committedDate": "2020-03-09T12:25:17Z", "message": "additional logs.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e304ff4be2515efcf715eb50d7630dbaaae822e", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/7e304ff4be2515efcf715eb50d7630dbaaae822e", "committedDate": "2020-03-09T14:49:41Z", "message": "Remove temp log config changes.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "149218fe6668432670dd598a66184608f95e3693", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/149218fe6668432670dd598a66184608f95e3693", "committedDate": "2020-03-09T15:28:07Z", "message": "Update tests.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjE3ODA3", "url": "https://github.com/pravega/pravega/pull/4599#pullrequestreview-371617807", "createdAt": "2020-03-10T00:50:08Z", "commit": {"oid": "149218fe6668432670dd598a66184608f95e3693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "822a7a713c236ba61deeb0dcd54c60accfa4560a", "author": {"user": {"login": "tkaitchuck", "name": "Tom Kaitchuck"}}, "url": "https://github.com/pravega/pravega/commit/822a7a713c236ba61deeb0dcd54c60accfa4560a", "committedDate": "2020-03-10T00:50:17Z", "message": "Merge branch 'master' into issue-fix-txn-logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f62fe16ebfa8cd5624c0ffb8808206fdb047e878", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/f62fe16ebfa8cd5624c0ffb8808206fdb047e878", "committedDate": "2020-03-10T03:41:14Z", "message": "Merge branch 'master' into issue-fix-txn-logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "405fbd89dcb1eadca6642d7fe9ec768a9d61aa94", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/405fbd89dcb1eadca6642d7fe9ec768a9d61aa94", "committedDate": "2020-03-10T04:20:55Z", "message": "Add test case.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea50d5224288c6646cff2236f4530cd7a5c0baf9", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/ea50d5224288c6646cff2236f4530cd7a5c0baf9", "committedDate": "2020-03-10T07:46:55Z", "message": "Add junits.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "369ff41303de93a79718037980b7af0cc713ead9", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/369ff41303de93a79718037980b7af0cc713ead9", "committedDate": "2020-03-10T09:22:43Z", "message": "Merge branch 'master' into issue-fix-txn-logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNDg2MjEw", "url": "https://github.com/pravega/pravega/pull/4599#pullrequestreview-372486210", "createdAt": "2020-03-11T05:38:21Z", "commit": {"oid": "369ff41303de93a79718037980b7af0cc713ead9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNTozODoyMVrOF0pyOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNTozODoyMVrOF0pyOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NDg3NQ==", "bodyText": "nit: can you move preconditions inside the encode method.", "url": "https://github.com/pravega/pravega/pull/4599#discussion_r390754875", "createdAt": "2020-03-11T05:38:21Z", "author": {"login": "shiveshr"}, "path": "controller/src/main/java/io/pravega/controller/server/rpc/grpc/v1/ControllerServiceImpl.java", "diffHunk": "@@ -354,56 +356,60 @@ public void createTransaction(CreateTxnRequest request, StreamObserver<Controlle\n \n     @Override\n     public void commitTransaction(TxnRequest request, StreamObserver<TxnStatus> responseObserver) {\n+        final UUID txnId = ModelHelper.encode(Preconditions.checkNotNull(request.getTxnId(), \"txnId\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "369ff41303de93a79718037980b7af0cc713ead9"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd95a4183b2b9f2d5f7f3a11c301aa30349c8ea6", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/fd95a4183b2b9f2d5f7f3a11c301aa30349c8ea6", "committedDate": "2020-03-11T05:55:27Z", "message": "Remove redundant Precondition check.\n\nSigned-off-by: Sandeep <sandeep.shridhar@emc.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3618, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}