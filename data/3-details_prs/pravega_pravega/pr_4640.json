{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyODU2NjQ2", "number": 4640, "title": "Issue 4638: Propagate retryable exception to the client instead of returning Status.Failure on all exceptions", "bodyText": "Change log description\nController apis for commit and abort transactions do not propagate error back to the client if the error is retryable. Instead they return the status.Failure which leads client to not perform any retries.\nPurpose of the change\nFixes #4638\nWhat the code does\nIn controllerservice.java we throw all retryable exceptions back to grpc layer which translates them to appropriate error codes and fails grpc calls.\nFor any other exception, the status code Failure is returned.\nHow to verify it\nUnit test added.", "createdAt": "2020-03-24T08:48:02Z", "url": "https://github.com/pravega/pravega/pull/4640", "merged": true, "mergeCommit": {"oid": "1976a4cac67c5a1db9e784dfff5a62bc61499b75"}, "closed": true, "closedAt": "2020-03-27T08:33:50Z", "author": {"login": "shiveshr"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQuJLsAH2gAyMzkyODU2NjQ2OjE2NDE5ZDU4ZDFlYTBlMGI5ZDI4MDhhYzQyMTVkYWUwNTI2YmExNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRqwKkgH2gAyMzkyODU2NjQ2OmQwMzMwMzA2ZDFlMDI4MTI1YTkzYjAxYjgyZWYxZmZhMDA0NTI5YTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "16419d58d1ea0e0b9d2808ac4215dae0526ba164", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/16419d58d1ea0e0b9d2808ac4215dae0526ba164", "committedDate": "2020-03-24T07:54:32Z", "message": "Issue 4638\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e53781f138d5083af417f7ad8940aa553a41bbe", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/6e53781f138d5083af417f7ad8940aa553a41bbe", "committedDate": "2020-03-24T09:48:43Z", "message": "merge with master\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "6e53781f138d5083af417f7ad8940aa553a41bbe", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/6e53781f138d5083af417f7ad8940aa553a41bbe", "committedDate": "2020-03-24T09:48:43Z", "message": "merge with master\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "192b4fd7cd751a2aff52e3aa242b231df840a665", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/192b4fd7cd751a2aff52e3aa242b231df840a665", "committedDate": "2020-03-24T09:54:33Z", "message": "resolve conflict\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f37416d6e7aae6475f969a6d540b3d0c9dcb3e", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/21f37416d6e7aae6475f969a6d540b3d0c9dcb3e", "committedDate": "2020-03-24T11:07:27Z", "message": "coverage\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTY3NzA1", "url": "https://github.com/pravega/pravega/pull/4640#pullrequestreview-381967705", "createdAt": "2020-03-26T12:40:19Z", "commit": {"oid": "21f37416d6e7aae6475f969a6d540b3d0c9dcb3e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMjo0MDoxOVrOF8E7sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMjo0MDoxOVrOF8E7sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUzOTY5Ng==", "bodyText": "timeout for all the tests should be added.", "url": "https://github.com/pravega/pravega/pull/4640#discussion_r398539696", "createdAt": "2020-03-26T12:40:19Z", "author": {"login": "shrids"}, "path": "controller/src/test/java/io/pravega/controller/server/v1/ControllerServiceTest.java", "diffHunk": "@@ -65,7 +73,7 @@\n     private final String stream2 = \"stream2\";\n     private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(10);\n \n-    private final StreamMetadataStore streamStore = StreamStoreFactory.createInMemoryStore(executor);\n+    private final StreamMetadataStore streamStore = spy(StreamStoreFactory.createInMemoryStore(executor));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21f37416d6e7aae6475f969a6d540b3d0c9dcb3e"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5984ddd95cd8f3d9b364a5f3b15f4c023ef477d", "author": {"user": {"login": "shiveshr", "name": "shivesh ranjan"}}, "url": "https://github.com/pravega/pravega/commit/b5984ddd95cd8f3d9b364a5f3b15f4c023ef477d", "committedDate": "2020-03-27T05:18:50Z", "message": "PR comment\n\nSigned-off-by: Shivesh Ranjan <shivesh.ranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNjA2NjUy", "url": "https://github.com/pravega/pravega/pull/4640#pullrequestreview-382606652", "createdAt": "2020-03-27T06:31:14Z", "commit": {"oid": "b5984ddd95cd8f3d9b364a5f3b15f4c023ef477d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0330306d1e028125a93b01b82ef1ffa004529a1", "author": {"user": {"login": "shrids", "name": "Sandeep"}}, "url": "https://github.com/pravega/pravega/commit/d0330306d1e028125a93b01b82ef1ffa004529a1", "committedDate": "2020-03-27T06:31:25Z", "message": "Merge branch 'master' into issue4638"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3636, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}