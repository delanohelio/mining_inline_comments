{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDU3MDQ3", "number": 1002, "title": "Implement BetaApi annotation for hub4j sdk", "bodyText": "Description\nThis PR introduces a @BetaApi annotation to help differentiate Github @Preview APIs from hub4j beta APIs. The reasoning behind this change is based on the findings outlined in #1001. With these changes, the preview media type is now a hard requirement. Architecture tests have been added to ensure beta APIs are annotated as deprecated and that usages of preview do not allow empty arrays.\nBefore submitting a PR:\nWe love getting PRs, but we hate asking people for the same basic changes every time.\n\n Push your changes to a branch other than master. Create your PR from that branch.\n Add JavaDocs and other comments\n Write tests that run and pass in CI. See CONTRIBUTING.md for details on how to capture snapshot data.\n Run mvn clean compile locally. This may reformat your code, commit those changes.\n Run mvn -D enable-ci clean install site locally. If this command doesn't succeed, your change will not pass CI.\n\nWhen creating a PR:\n\n Fill in the \"Description\" above.\n Enable \"Allow edits from maintainers\".", "createdAt": "2020-12-16T21:44:27Z", "url": "https://github.com/hub4j/github-api/pull/1002", "merged": true, "mergeCommit": {"oid": "fafb23c1a63109797ed8fabce80168a7a95b45cd"}, "closed": true, "closedAt": "2020-12-17T20:57:02Z", "author": {"login": "marcoferrer"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm1-sKAH2gAyNTQxNDU3MDQ3OjRlN2FjNzAzMGMwMDg3NGI1ZDJjMjUxNTBmNDgyNWMzNGU3ZGY2MjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnJtlWgFqTU1NDk2OTgzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/4e7ac7030c00874b5d2c25150f4825c34e7df624", "committedDate": "2020-12-16T21:39:48Z", "message": "Add beta api annotation to project"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTExNTEx", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554111511", "createdAt": "2020-12-16T21:48:03Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo0ODowNFrOIHamFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo0ODowNFrOIHamFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY0NjY3OQ==", "bodyText": "This was a miss from the preview PR caught by the new arch tests", "url": "https://github.com/hub4j/github-api/pull/1002#discussion_r544646679", "createdAt": "2020-12-16T21:48:04Z", "author": {"login": "marcoferrer"}, "path": "src/main/java/org/kohsuke/github/GHBranch.java", "diffHunk": "@@ -78,7 +78,7 @@ public String getName() {\n      *\n      * @return true if the push to this branch is restricted via branch protection.\n      */\n-    @Preview\n+    @Preview(Previews.LUKE_CAGE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTExNjMz", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554111633", "createdAt": "2020-12-16T21:48:15Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo0ODoxNVrOIHamdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo0ODoxNVrOIHamdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY0Njc3Mw==", "bodyText": "This was a miss from the preview PR caught by the new arch tests", "url": "https://github.com/hub4j/github-api/pull/1002#discussion_r544646773", "createdAt": "2020-12-16T21:48:15Z", "author": {"login": "marcoferrer"}, "path": "src/main/java/org/kohsuke/github/GHCommitComment.java", "diffHunk": "@@ -121,7 +121,7 @@ public void update(String body) throws IOException {\n         this.body = body;\n     }\n \n-    @Preview\n+    @Preview(SQUIRREL_GIRL)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTEzNTc2", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554113576", "createdAt": "2020-12-16T21:51:18Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo1MToxOFrOIHatHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo1MToxOFrOIHatHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY0ODQ3Nw==", "bodyText": "I was unable to find anything in the Github API documentation that confirms this is a preview API.\nhttps://developer.github.com/v3/repos/releases/#list-release-assets", "url": "https://github.com/hub4j/github-api/pull/1002#discussion_r544648477", "createdAt": "2020-12-16T21:51:18Z", "author": {"login": "marcoferrer"}, "path": "src/main/java/org/kohsuke/github/GHRelease.java", "diffHunk": "@@ -260,7 +260,6 @@ public GHAsset uploadAsset(String filename, InputStream stream, String contentTy\n      *             existing logic in place for backwards compatibility.\n      */\n     @Deprecated\n-    @Preview\n     public List<GHAsset> assets() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTE0MzA2", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554114306", "createdAt": "2020-12-16T21:52:26Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo1MjoyNlrOIHavqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMTo1MjoyNlrOIHavqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY0OTEzMA==", "bodyText": "This predicate ensures that no usages of the preview annotation will accept an empty array for the value param.", "url": "https://github.com/hub4j/github-api/pull/1002#discussion_r544649130", "createdAt": "2020-12-16T21:52:26Z", "author": {"login": "marcoferrer"}, "path": "src/test/java/org/kohsuke/github/ArchTests.java", "diffHunk": "@@ -19,6 +23,17 @@\n             .withImportOption(new ImportOption.DoNotIncludeJars())\n             .importPackages(\"org.kohsuke.github\");\n \n+    private static final DescribedPredicate<JavaAnnotation<?>> previewAnnotationWithNoMediaType = new DescribedPredicate<JavaAnnotation<?>>(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTQ4NzY2", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554148766", "createdAt": "2020-12-16T22:50:10Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMjo1MDoxMFrOIHcoxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMjo1MDoxMFrOIHcoxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4MDEzMg==", "bodyText": "This method was not labeled properly. The field itself is not part of a preview API. It is only optionally present depending on the source of the data. We've already indicated the potential lack of presence with the @CheckForNull annotation.", "url": "https://github.com/hub4j/github-api/pull/1002#discussion_r544680132", "createdAt": "2020-12-16T22:50:10Z", "author": {"login": "marcoferrer"}, "path": "src/main/java/org/kohsuke/github/GitUser.java", "diffHunk": "@@ -42,8 +42,6 @@ public String getEmail() {\n      *\n      * @return GitHub username\n      */\n-    @Preview\n-    @Deprecated\n     @CheckForNull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0OTY5ODM1", "url": "https://github.com/hub4j/github-api/pull/1002#pullrequestreview-554969835", "createdAt": "2020-12-17T20:39:13Z", "commit": {"oid": "4e7ac7030c00874b5d2c25150f4825c34e7df624"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1601, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}