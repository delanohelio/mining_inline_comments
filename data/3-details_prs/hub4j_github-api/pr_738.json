{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NDYxNTYx", "number": 738, "title": "Get commit or tag signature verified flag", "bodyText": "This fixes #737\nDescription\n\nA new entity GHVerification.java has been added which would be reflecting Verification flag.\nUpdating GHCommit.java and GHTagObject.java with GHVerification.\nAltering few test cases AppTest.java and GHTagTest.java to verify if the Verification entity is being picked up.\nA separate test class SignatureVerificationTest.java with the associated wiremock test resources", "createdAt": "2020-03-12T20:38:40Z", "url": "https://github.com/hub4j/github-api/pull/738", "merged": true, "mergeCommit": {"oid": "ca640b3f640c82ff939471a93e8c0bad2c0a5007"}, "closed": true, "closedAt": "2020-03-26T20:56:04Z", "author": {"login": "sourabhsparkala"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNL-nngFqTM3NDExMzgwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRfel6AH2gAyMzg3NDYxNTYxOjQxOGRmMTVmN2JjYjMwNjg2NzIzNmI0ZjgyZjJjM2Q1MDQ5NWVjZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MTEzODA3", "url": "https://github.com/hub4j/github-api/pull/738#pullrequestreview-374113807", "createdAt": "2020-03-13T08:17:25Z", "commit": {"oid": "bbb183538555bd6466538f3f95caabcd2e703bc9"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwODoxNzoyNlrOF165Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwODoyMToyN1rOF16-xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4Mzc1NA==", "bodyText": "Would it make sense to create a enum which holds all possible reasons? The following page defines possible reasons (please see the \"Signature verification object\" section):\nhttps://developer.github.com/v3/repos/commits/", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r392083754", "createdAt": "2020-03-13T08:17:26Z", "author": {"login": "artem-smotrakov"}, "path": "src/main/java/org/kohsuke/github/GHVerification.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.kohsuke.github;\n+\n+import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;\n+\n+/**\n+ * The commit/tag would be signed by user. This object would hold the verification status. Whether the Commit/Tag is\n+ * signed or not.\n+ *\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+@SuppressFBWarnings(value = { \"UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD\", \"UWF_UNWRITTEN_FIELD\", \"NP_UNWRITTEN_FIELD\" },\n+        justification = \"JSON API\")\n+public class GHVerification {\n+    private String reason, signature, payload;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbb183538555bd6466538f3f95caabcd2e703bc9"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4NDY0NQ==", "bodyText": "Minor: How about \"Indicates whether GitHub considers the signature in this commit to be verified\"? (borrowed from https://developer.github.com/v3/repos/commits/)", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r392084645", "createdAt": "2020-03-13T08:19:55Z", "author": {"login": "artem-smotrakov"}, "path": "src/main/java/org/kohsuke/github/GHVerification.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.kohsuke.github;\n+\n+import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;\n+\n+/**\n+ * The commit/tag would be signed by user. This object would hold the verification status. Whether the Commit/Tag is\n+ * signed or not.\n+ *\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+@SuppressFBWarnings(value = { \"UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD\", \"UWF_UNWRITTEN_FIELD\", \"NP_UNWRITTEN_FIELD\" },\n+        justification = \"JSON API\")\n+public class GHVerification {\n+    private String reason, signature, payload;\n+    private boolean verified;\n+\n+    /**\n+     * Gets boolean value.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbb183538555bd6466538f3f95caabcd2e703bc9"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4NTE5MQ==", "bodyText": "I would suggest \"Gets the payload that was signed.\"", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r392085191", "createdAt": "2020-03-13T08:21:27Z", "author": {"login": "artem-smotrakov"}, "path": "src/main/java/org/kohsuke/github/GHVerification.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.kohsuke.github;\n+\n+import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;\n+\n+/**\n+ * The commit/tag would be signed by user. This object would hold the verification status. Whether the Commit/Tag is\n+ * signed or not.\n+ *\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+@SuppressFBWarnings(value = { \"UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD\", \"UWF_UNWRITTEN_FIELD\", \"NP_UNWRITTEN_FIELD\" },\n+        justification = \"JSON API\")\n+public class GHVerification {\n+    private String reason, signature, payload;\n+    private boolean verified;\n+\n+    /**\n+     * Gets boolean value.\n+     *\n+     * @return true if the signature is valid else returns false.\n+     */\n+    public boolean getVerified() {\n+        return verified;\n+    }\n+\n+    /**\n+     * Gets reason for verification value.\n+     *\n+     * @return return reason, such as \"valid\" or \"unsigned\".\n+     */\n+    public String getReason() {\n+        return reason;\n+    }\n+\n+    /**\n+     * Gets signature used for the verification.\n+     *\n+     * @return null if not signed else encoded signature.\n+     */\n+    public String getSignature() {\n+        return signature;\n+    }\n+\n+    /**\n+     * Gets payload used for the verification.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbb183538555bd6466538f3f95caabcd2e703bc9"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MjMyMDU1", "url": "https://github.com/hub4j/github-api/pull/738#pullrequestreview-374232055", "createdAt": "2020-03-13T11:36:14Z", "commit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMTozNjoxNVrOF2Ah8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMTozNjoxNVrOF2Ah8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE3NjExMw==", "bodyText": "Not sure if value is necessary.", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r392176113", "createdAt": "2020-03-13T11:36:15Z", "author": {"login": "artem-smotrakov"}, "path": "src/main/java/org/kohsuke/github/GHReason.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package org.kohsuke.github;\n+\n+/**\n+ * The possible values for reason in verification object from github.\n+ * \n+ * @see <a href=\"https://developer.github.com/v3/repos/commits/#signature-verification-object\">List of possible reason\n+ *      values</a>\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+public enum GHReason {\n+    EXPIRED_KEY(\"expired_key\"),\n+    NOT_SIGNING_KEY(\"not_signing_key\"),\n+    GPGVERIFY_ERROR(\"gpgverify_error\"),\n+    GPGVERIFY_UNAVAILABLE(\"gpgverify_unavailable\"),\n+    UNSIGNED(\"unsigned\"),\n+    UNKNOW_SIGNATURE_TYPE(\"unknown_signature_type\"),\n+    NO_USER(\"no_user\"),\n+    UNVERIFIED_EMAIL(\"unverified_email\"),\n+    BAD_EMAIL(\"bad_email\"),\n+    UNKNOWN_KEY(\"unknown_key\"),\n+    MALFORMED_SIGNATURE(\"malformed_signature\"),\n+    INVALID(\"invalid\"),\n+    VALID(\"valid\");\n+\n+    private final String value;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTQzMDkx", "url": "https://github.com/hub4j/github-api/pull/738#pullrequestreview-375543091", "createdAt": "2020-03-16T20:00:34Z", "commit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMDowMDozNFrOF3D2IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMDowOTo0NlrOF3EFkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI3OTAwOQ==", "bodyText": "We need at test for each of these values. Or at least a bunch of them.  Even if you have to manually create them.", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r393279009", "createdAt": "2020-03-16T20:00:34Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHReason.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package org.kohsuke.github;\n+\n+/**\n+ * The possible values for reason in verification object from github.\n+ * \n+ * @see <a href=\"https://developer.github.com/v3/repos/commits/#signature-verification-object\">List of possible reason\n+ *      values</a>\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+public enum GHReason {\n+    EXPIRED_KEY(\"expired_key\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4MjM0MQ==", "bodyText": "@artem-smotrakov\nIn general, you'd be correct.  But I think the default mapping for enums is all-caps and convert-underscores-to-dashes. Which would result in EXPIRED_KEY converting to expired-key and vice versa.  Once tests are added, we can see whether this is needed or not.", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r393282341", "createdAt": "2020-03-16T20:08:19Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHReason.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package org.kohsuke.github;\n+\n+/**\n+ * The possible values for reason in verification object from github.\n+ * \n+ * @see <a href=\"https://developer.github.com/v3/repos/commits/#signature-verification-object\">List of possible reason\n+ *      values</a>\n+ * @author Sourabh Sarvotham Parkala\n+ */\n+public enum GHReason {\n+    EXPIRED_KEY(\"expired_key\"),\n+    NOT_SIGNING_KEY(\"not_signing_key\"),\n+    GPGVERIFY_ERROR(\"gpgverify_error\"),\n+    GPGVERIFY_UNAVAILABLE(\"gpgverify_unavailable\"),\n+    UNSIGNED(\"unsigned\"),\n+    UNKNOW_SIGNATURE_TYPE(\"unknown_signature_type\"),\n+    NO_USER(\"no_user\"),\n+    UNVERIFIED_EMAIL(\"unverified_email\"),\n+    BAD_EMAIL(\"bad_email\"),\n+    UNKNOWN_KEY(\"unknown_key\"),\n+    MALFORMED_SIGNATURE(\"malformed_signature\"),\n+    INVALID(\"invalid\"),\n+    VALID(\"valid\");\n+\n+    private final String value;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE3NjExMw=="}, "originalCommit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4Mjk2MQ==", "bodyText": "As noted above, we need tests for at least a few more GHReason values (specifically multi-word values).", "url": "https://github.com/hub4j/github-api/pull/738#discussion_r393282961", "createdAt": "2020-03-16T20:09:46Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/AppTest.java", "diffHunk": "@@ -584,6 +584,8 @@ public void testCommitShortInfo() throws Exception {\n         GHCommit commit = r.getCommit(\"86a2e245aa6d71d54923655066049d9e21a15f23\");\n         assertEquals(commit.getCommitShortInfo().getAuthor().getName(), \"Kohsuke Kawaguchi\");\n         assertEquals(commit.getCommitShortInfo().getMessage(), \"doc\");\n+        assertFalse(commit.getCommitShortInfo().getVerification().getVerified());\n+        assertEquals(commit.getCommitShortInfo().getVerification().getReason(), GHReason.UNSIGNED.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fae68d5daa639e00958dfdcfb3c87fa1b2e4276a"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "274a07a35cb58d2d069599058a07c700deab4c28", "author": {"user": {"login": "bitwiseman", "name": "Liam Newman"}}, "url": "https://github.com/hub4j/github-api/commit/274a07a35cb58d2d069599058a07c700deab4c28", "committedDate": "2020-03-17T18:43:58Z", "message": "Merge branch 'master' into sign_verification"}, "afterCommit": {"oid": "b6fe00e8c1158007f3af07fdc66fa3f017157870", "author": {"user": {"login": "sourabhsparkala", "name": "Sourabh Sarvotham Parkala"}}, "url": "https://github.com/hub4j/github-api/commit/b6fe00e8c1158007f3af07fdc66fa3f017157870", "committedDate": "2020-03-25T16:12:40Z", "message": "Get commit or tag signature verified flag\n\nThis fixes #737\n\n- A new entity GHVerification.java has been added which would be reflecting Verification flag\n- Updating GHCommit.java and GHTagObject.java with GHVerification\n- Altering few test cases AppTest.java and GHTagTest.java to verify if the Verification entity is being picked up\n- A separate test class SignatureVerificationTest.java with the associated wiremock test resources\n- Adding a new enum GHReason.java\n- Updating tests to check the GHReason implementation, GHReasonTest.java with the associated wiremock test resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a78d2f28d7f2d3dc50a71aeeba3c37b2c9e86424", "author": {"user": {"login": "sourabhsparkala", "name": "Sourabh Sarvotham Parkala"}}, "url": "https://github.com/hub4j/github-api/commit/a78d2f28d7f2d3dc50a71aeeba3c37b2c9e86424", "committedDate": "2020-03-25T16:19:56Z", "message": "Get commit or tag signature verified flag\n\nThis fixes #737\n\n- A new entity GHVerification.java has been added which would be reflecting Verification flag\n- Updating GHCommit.java and GHTagObject.java with GHVerification\n- Altering few test cases AppTest.java and GHTagTest.java to verify if the Verification entity is being picked up\n- A separate test class SignatureVerificationTest.java with the associated wiremock test resources\n- Adding a new enum GHReason.java\n- Updating tests to check the GHReason implementation, GHReasonTest.java with the associated wiremock test resources"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6fe00e8c1158007f3af07fdc66fa3f017157870", "author": {"user": {"login": "sourabhsparkala", "name": "Sourabh Sarvotham Parkala"}}, "url": "https://github.com/hub4j/github-api/commit/b6fe00e8c1158007f3af07fdc66fa3f017157870", "committedDate": "2020-03-25T16:12:40Z", "message": "Get commit or tag signature verified flag\n\nThis fixes #737\n\n- A new entity GHVerification.java has been added which would be reflecting Verification flag\n- Updating GHCommit.java and GHTagObject.java with GHVerification\n- Altering few test cases AppTest.java and GHTagTest.java to verify if the Verification entity is being picked up\n- A separate test class SignatureVerificationTest.java with the associated wiremock test resources\n- Adding a new enum GHReason.java\n- Updating tests to check the GHReason implementation, GHReasonTest.java with the associated wiremock test resources"}, "afterCommit": {"oid": "a78d2f28d7f2d3dc50a71aeeba3c37b2c9e86424", "author": {"user": {"login": "sourabhsparkala", "name": "Sourabh Sarvotham Parkala"}}, "url": "https://github.com/hub4j/github-api/commit/a78d2f28d7f2d3dc50a71aeeba3c37b2c9e86424", "committedDate": "2020-03-25T16:19:56Z", "message": "Get commit or tag signature verified flag\n\nThis fixes #737\n\n- A new entity GHVerification.java has been added which would be reflecting Verification flag\n- Updating GHCommit.java and GHTagObject.java with GHVerification\n- Altering few test cases AppTest.java and GHTagTest.java to verify if the Verification entity is being picked up\n- A separate test class SignatureVerificationTest.java with the associated wiremock test resources\n- Adding a new enum GHReason.java\n- Updating tests to check the GHReason implementation, GHReasonTest.java with the associated wiremock test resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f554ddc372ad119d00c30fb6d6ac7c76aa6d6265", "author": {"user": {"login": "bitwiseman", "name": "Liam Newman"}}, "url": "https://github.com/hub4j/github-api/commit/f554ddc372ad119d00c30fb6d6ac7c76aa6d6265", "committedDate": "2020-03-26T16:45:20Z", "message": "Capitalize and Move GHVerification.Reason enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "494318b8790b232e878149a674eff7604b91c15d", "author": {"user": {"login": "bitwiseman", "name": "Liam Newman"}}, "url": "https://github.com/hub4j/github-api/commit/494318b8790b232e878149a674eff7604b91c15d", "committedDate": "2020-03-26T16:49:03Z", "message": "Change method name to isVerified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31ed0125b85940d9049acc1deff2223f07038c4e", "author": {"user": {"login": "bitwiseman", "name": "Liam Newman"}}, "url": "https://github.com/hub4j/github-api/commit/31ed0125b85940d9049acc1deff2223f07038c4e", "committedDate": "2020-03-26T17:09:01Z", "message": "Shorten test paths for windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "418df15f7bcb306867236b4f82f2c3d50495ecee", "author": {"user": {"login": "bitwiseman", "name": "Liam Newman"}}, "url": "https://github.com/hub4j/github-api/commit/418df15f7bcb306867236b4f82f2c3d50495ecee", "committedDate": "2020-03-26T17:23:16Z", "message": "Merge branch 'master' into sign_verification"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1702, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}