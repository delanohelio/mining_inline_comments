{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MzQxOTk5", "number": 740, "title": "[CheckRuns] Add method for listing checkruns for given ref", "bodyText": "Description\n\nAdd a method for GHCommit and GHRepository for listing the check-runs for given sha\nAdd tests for getting check-run for given commit and for getting the last status of given commit\nAdded missing enum for GitHub registry_package event\n\nBefore submitting a PR:\nWe love getting PRs, but we hate asking people for the same basic changes every time.\n\n Push your changes to a branch other than master. Create your PR from that branch.\n Add JavaDocs and other comments\n Write tests that run and pass in CI. See CONTRIBUTING.md for details on how to capture snapshot data.\n Run mvn -D enable-ci clean install site locally. This may reformat your code, commit those changes. If this command doesn't succeed, your change will not pass CI.", "createdAt": "2020-03-14T15:36:02Z", "url": "https://github.com/hub4j/github-api/pull/740", "merged": true, "mergeCommit": {"oid": "3daccbd6ec4bbde374e7af4ace6171f03c909fb5"}, "closed": true, "closedAt": "2020-03-20T18:39:41Z", "author": {"login": "avano"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNo3irABqjMxMjk2NDg0OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPk9HagFqTM3ODcyNjgyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59d04e737bf73f4d3fb1be7d3b5e5efaee03bdae", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/59d04e737bf73f4d3fb1be7d3b5e5efaee03bdae", "committedDate": "2020-03-14T15:31:43Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}, "afterCommit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/2afffdd6c5abba9039c9d6418eb7457097ee2de7", "committedDate": "2020-03-14T18:03:47Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MTU3MjM2", "url": "https://github.com/hub4j/github-api/pull/740#pullrequestreview-376157236", "createdAt": "2020-03-17T15:41:55Z", "commit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0MTo1NVrOF3iGSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0MTo1NVrOF3iGSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc3NDY2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 *             the io exception\n          \n          \n            \n                 *             the io exception\n          \n          \n            \n                 * @see <a href=\"https://developer.github.com/v3/checks/runs/#list-check-runs-for-a-specific-ref\">List check runs for a specific ref</a>", "url": "https://github.com/hub4j/github-api/pull/740#discussion_r393774664", "createdAt": "2020-03-17T15:41:55Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -1773,6 +1773,24 @@ public GHCommitStatus getLastCommitStatus(String sha1) throws IOException {\n         return v.isEmpty() ? null : v.get(0);\n     }\n \n+    /**\n+     * Gets check runs for given ref.\n+     *\n+     * @param ref\n+     *            ref\n+     * @return check runs for given ref\n+     * @throws IOException\n+     *             the io exception", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e2f557f6f77e494a3711eba4bf054a001fe36ff", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/3e2f557f6f77e494a3711eba4bf054a001fe36ff", "committedDate": "2020-03-17T15:58:44Z", "message": "Update src/main/java/org/kohsuke/github/GHRepository.java\n\nCo-Authored-By: Liam Newman <bitwiseman@gmail.com>"}, "afterCommit": {"oid": "df0a3ff69e895daa9a6474eba263bfcf9f734584", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/df0a3ff69e895daa9a6474eba263bfcf9f734584", "committedDate": "2020-03-17T16:03:54Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df0a3ff69e895daa9a6474eba263bfcf9f734584", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/df0a3ff69e895daa9a6474eba263bfcf9f734584", "committedDate": "2020-03-17T16:03:54Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}, "afterCommit": {"oid": "04dca90294888a2e53c41e58c2bba5fd806147a3", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/04dca90294888a2e53c41e58c2bba5fd806147a3", "committedDate": "2020-03-17T16:07:29Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MTY0MzIz", "url": "https://github.com/hub4j/github-api/pull/740#pullrequestreview-376164323", "createdAt": "2020-03-17T15:49:18Z", "commit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0OToxOFrOF3ic0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo1NTowNlrOF3iuKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc4MDQzNA==", "bodyText": "I think you'll need to model this after the PagedSearchIterable.  The check runs use paged responses: https://developer.github.com/v3/checks/runs/#response-3\nYou'll also need to have a test that returns multiple pages (you can force this by having a paged iterable with a small pageCount.", "url": "https://github.com/hub4j/github-api/pull/740#discussion_r393780434", "createdAt": "2020-03-17T15:49:18Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHCheckRuns.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package org.kohsuke.github;\n+\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+/**\n+ * Represents the response of listing check-runs for given ref.\n+ */\n+public class GHCheckRuns {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc4NDg3Mg==", "bodyText": "Once you have GHCheckRuns using paging you can set page count to 1 and rerecord this.  Also, you could record this based on github-api/github-api which currently has a larger number of checks.", "url": "https://github.com/hub4j/github-api/pull/740#discussion_r393784872", "createdAt": "2020-03-17T15:55:06Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/GHRepositoryTest.java", "diffHunk": "@@ -496,4 +496,21 @@ public void listCollaborators() throws Exception {\n         List<GHUser> collaborators = repo.listCollaborators().toList();\n         assertThat(collaborators.size(), greaterThan(10));\n     }\n+\n+    @Test\n+    public void getCheckRuns() throws Exception {\n+        GHCheckRuns checkRuns = getRepository().getCheckRuns(\"8051615eff597f4e49f4f47625e6fc2b49f26bfc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2afffdd6c5abba9039c9d6418eb7457097ee2de7"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2Mjc5MDgw", "url": "https://github.com/hub4j/github-api/pull/740#pullrequestreview-376279080", "createdAt": "2020-03-17T18:01:36Z", "commit": {"oid": "04dca90294888a2e53c41e58c2bba5fd806147a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODowMTozNlrOF3n6Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODowMTozNlrOF3n6Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg2OTkwNw==", "bodyText": "This method has bad performance.  Opened #748.  Thanks!", "url": "https://github.com/hub4j/github-api/pull/740#discussion_r393869907", "createdAt": "2020-03-17T18:01:36Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -1773,6 +1773,26 @@ public GHCommitStatus getLastCommitStatus(String sha1) throws IOException {\n         return v.isEmpty() ? null : v.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04dca90294888a2e53c41e58c2bba5fd806147a3"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04dca90294888a2e53c41e58c2bba5fd806147a3", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/04dca90294888a2e53c41e58c2bba5fd806147a3", "committedDate": "2020-03-17T16:07:29Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}, "afterCommit": {"oid": "3b9c4a4f5898a2672b874c8e3e609c92f253e240", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/3b9c4a4f5898a2672b874c8e3e609c92f253e240", "committedDate": "2020-03-19T16:37:41Z", "message": "[GHEvent] Add new enum for registry_package event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb6bfa633ea40af49e3a148a37a4beaf0a1de06", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/5cb6bfa633ea40af49e3a148a37a4beaf0a1de06", "committedDate": "2020-03-20T10:47:04Z", "message": "[CheckRuns] Add method for listing checkruns for given ref"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "452b56c47b44ad9851c70c5f12b8cf5620fbf83d", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/452b56c47b44ad9851c70c5f12b8cf5620fbf83d", "committedDate": "2020-03-20T10:47:04Z", "message": "[GHEvent] Add new enum for registry_package event"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b9c4a4f5898a2672b874c8e3e609c92f253e240", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/3b9c4a4f5898a2672b874c8e3e609c92f253e240", "committedDate": "2020-03-19T16:37:41Z", "message": "[GHEvent] Add new enum for registry_package event"}, "afterCommit": {"oid": "452b56c47b44ad9851c70c5f12b8cf5620fbf83d", "author": {"user": {"login": "avano", "name": "Andrej Va\u0148o"}}, "url": "https://github.com/hub4j/github-api/commit/452b56c47b44ad9851c70c5f12b8cf5620fbf83d", "committedDate": "2020-03-20T10:47:04Z", "message": "[GHEvent] Add new enum for registry_package event"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzI2ODI3", "url": "https://github.com/hub4j/github-api/pull/740#pullrequestreview-378726827", "createdAt": "2020-03-20T18:38:17Z", "commit": {"oid": "452b56c47b44ad9851c70c5f12b8cf5620fbf83d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1706, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}