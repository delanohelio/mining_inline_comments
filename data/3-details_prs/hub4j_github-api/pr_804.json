{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MTY3NTcw", "number": 804, "title": "Fixed GHRepository.getFileContent() for path containing non-ASCII characters", "bodyText": "Description\nusing URI.toASCIIString() instead of URI.toString() in GitHubRequest.urlPathEncode()\nNotes:\n\nI tried but wasn't permitted to create a new branch in this repo. Therefore, I'm initiating this PR from a fork.\ntest case and test data are included\nmvn -Denable-ci clean install site passes", "createdAt": "2020-05-06T15:25:34Z", "url": "https://github.com/hub4j/github-api/pull/804", "merged": true, "mergeCommit": {"oid": "dbd20fe396e13f7f6b7de5d6dfcbd9e6d8775129"}, "closed": true, "closedAt": "2020-05-13T16:12:21Z", "author": {"login": "reisners"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcep6GrgH2gAyNDE0MTY3NTcwOjUwOTAzYjVjNGFjNTkxZWQyY2ExMDJmZDEzOTAyNmI5OWJkMjc1OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg2d4LAH2gAyNDE0MTY3NTcwOjQ4OGU1ZTUzMWYwZDJjMTE0Y2Q0NDFkODFjNjg5OTIxYjUwNDY2Yjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50903b5c4ac591ed2ca102fd139026b99bd27592", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/50903b5c4ac591ed2ca102fd139026b99bd27592", "committedDate": "2020-05-06T14:53:23Z", "message": "updated GHContentIntegrationTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6d7f7248bdbed4ef59fef3cd71feb0ea778d759", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/e6d7f7248bdbed4ef59fef3cd71feb0ea778d759", "committedDate": "2020-05-06T14:54:21Z", "message": "updated GitHubRequest.java\n\nusing URI.toASCIIString() instead of URI.toString() in urlPathEncode()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "676984b3d5f14727449044683b0d20243adba45f", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/676984b3d5f14727449044683b0d20243adba45f", "committedDate": "2020-05-06T14:58:42Z", "message": "added src/test/resources/org/kohsuke/github/GHContentIntegrationTest/wiremock/testGetFileContentWithNonAsciiPath/**"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a53301e9f1da23ac9b1d172d195e25cea392a9c", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/4a53301e9f1da23ac9b1d172d195e25cea392a9c", "committedDate": "2020-05-06T15:26:06Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa600c03e241014d4aa85db8769179ded41e8930", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/fa600c03e241014d4aa85db8769179ded41e8930", "committedDate": "2020-05-06T15:33:11Z", "message": "updated GHContentIntegrationTest.java\n\nsorting imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTIzODY5", "url": "https://github.com/hub4j/github-api/pull/804#pullrequestreview-408523869", "createdAt": "2020-05-08T20:59:56Z", "commit": {"oid": "fa600c03e241014d4aa85db8769179ded41e8930"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDo1OTo1NlrOGSzhrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMDo1OTo1NlrOGSzhrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM3MTc1OA==", "bodyText": "This is interesting.  What happens if you take this path string and call repo.getFileContent() on it?", "url": "https://github.com/hub4j/github-api/pull/804#discussion_r422371758", "createdAt": "2020-05-08T20:59:56Z", "author": {"login": "bitwiseman"}, "path": "src/test/resources/org/kohsuke/github/GHContentIntegrationTest/wiremock/testGetFileContentWithNonAsciiPath/__files/repos_github-api-test-org_ghcontentintegrationtest_contents_ghcontent-ro_a-dir-with-nonascii-entry_bornsteintxt-3.json", "diffHunk": "@@ -0,0 +1,18 @@\n+{\n+  \"name\": \"B??????rnstein.txt\",\n+  \"path\": \"ghcontent-ro/a-dir-with-nonascii-entry/B??????rnstein.txt\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa600c03e241014d4aa85db8769179ded41e8930"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTI0NTEw", "url": "https://github.com/hub4j/github-api/pull/804#pullrequestreview-408524510", "createdAt": "2020-05-08T21:01:07Z", "commit": {"oid": "fa600c03e241014d4aa85db8769179ded41e8930"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d4edfa181a1545ad75799c04e43f8494bfadf44", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/4d4edfa181a1545ad75799c04e43f8494bfadf44", "committedDate": "2020-05-11T06:01:32Z", "message": "updated GHContentIntegrationTest.java\n\nadapting testGetFileContentWithNonAsciiPath to shortened file path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81a55db644772ac29701989fa4151ce6a3f3f46e", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/81a55db644772ac29701989fa4151ce6a3f3f46e", "committedDate": "2020-05-11T13:29:02Z", "message": "updated src/test/resources/org/kohsuke/github/GHContentIntegrationTest/wiremock/testGetFileWithNoneAsciiPath/**"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbf4c4846153962e513bbdcf39be05402eb36308", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/fbf4c4846153962e513bbdcf39be05402eb36308", "committedDate": "2020-05-11T14:33:29Z", "message": "updated GHContentIntegrationTest.java, src/test/resources/org/kohsuke/github/GHContentIntegrationTest/wiremock/**\n\nadapting to new org hub4-test-org (was github-api-test-org)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Mjc1Mjc0", "url": "https://github.com/hub4j/github-api/pull/804#pullrequestreview-409275274", "createdAt": "2020-05-11T15:20:43Z", "commit": {"oid": "fbf4c4846153962e513bbdcf39be05402eb36308"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNToyMDo0M1rOGThG7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNToyMDo0M1rOGThG7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzExODU3NQ==", "bodyText": "I'm looking for a test something like this (I haven't run locally):\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    final GHContent fileContent = gitHub.getRepository(\"hub4j-test-org/GHContentIntegrationTest\")\n          \n          \n            \n                            .getFileContent(\"ghcontent-ro/a-file-with-\\u00F6\");\n          \n          \n            \n                    assertThat(IOUtils.readLines(fileContent.read(), StandardCharsets.UTF_8), hasItems(\"test\"));\n          \n          \n            \n                    final GHRepository repo = gitHub.getRepository(\"hub4j-test-org/GHContentIntegrationTest\");\n          \n          \n            \n                    final GHContent fileContent = repo.getFileContent(\"ghcontent-ro/a-file-with-\\u00F6\");\n          \n          \n            \n                    assertThat(IOUtils.readLines(fileContent.read(), StandardCharsets.UTF_8), hasItems(\"test\"));\n          \n          \n            \n                    \n          \n          \n            \n                    final GHContent fileContent2 = repo.getFileContent(fileContent.getPath());\n          \n          \n            \n                    assertThat(IOUtils.readLines(fileContent2.read(), StandardCharsets.UTF_8), hasItems(\"test\"));", "url": "https://github.com/hub4j/github-api/pull/804#discussion_r423118575", "createdAt": "2020-05-11T15:20:43Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/GHContentIntegrationTest.java", "diffHunk": "@@ -158,4 +160,11 @@ public void testMIMELonger() throws IOException {\n                 + \"123456789012345678901234567890123456789012345678901234567890\");\n         ghContentBuilder.commit();\n     }\n+\n+    @Test\n+    public void testGetFileContentWithNonAsciiPath() throws Exception {\n+        final GHContent fileContent = gitHub.getRepository(\"hub4j-test-org/GHContentIntegrationTest\")\n+                .getFileContent(\"ghcontent-ro/a-file-with-\\u00F6\");\n+        assertThat(IOUtils.readLines(fileContent.read(), StandardCharsets.UTF_8), hasItems(\"test\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf4c4846153962e513bbdcf39be05402eb36308"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63ce8e461bd090689c0b51927be6389cd564c4b2", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/63ce8e461bd090689c0b51927be6389cd564c4b2", "committedDate": "2020-05-12T07:59:53Z", "message": "Update src/test/java/org/kohsuke/github/GHContentIntegrationTest.java\n\nCo-authored-by: Liam Newman <bitwiseman@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d6fc7272a725370b1c15ed185a8d26c49b6358", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/65d6fc7272a725370b1c15ed185a8d26c49b6358", "committedDate": "2020-05-12T10:06:44Z", "message": "updated GHContentIntegrationTest.java\n\ndummy commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "488e5e531f0d2c114cd441d81c689921b50466b8", "author": {"user": {"login": "reisners", "name": "Dr. Stefan Reisner"}}, "url": "https://github.com/hub4j/github-api/commit/488e5e531f0d2c114cd441d81c689921b50466b8", "committedDate": "2020-05-13T10:39:10Z", "message": "updated GHContentIntegrationTest.java\n\ndummy commit"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1742, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}