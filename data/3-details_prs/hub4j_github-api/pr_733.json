{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NjUyNTU0", "number": 733, "title": "Make getTeambySlug faster", "bodyText": "Description\nChange method how getTeambySlug works... (direct api call instead of getting list and iterating)\nWit bigger organisations getting all teams can take a lot of times..\nBefore submitting a PR:\nWe love getting PRs, but we hate asking people for the same basic changes every time.\n\n Push your changes to a branch other than master. Create your PR from that branch.\n Add JavaDocs and other comments\n Write tests that run and pass in CI. See CONTRIBUTING.md for details on how to capture snapshot data.\n Run mvn -D enable-ci clean install site locally. This may reformat your code, commit those changes. If this command doesn't succeed, your change will not pass CI.", "createdAt": "2020-03-09T15:23:38Z", "url": "https://github.com/hub4j/github-api/pull/733", "merged": true, "mergeCommit": {"oid": "adfd09565fe8f2817360f78e9223c5e78f5d2e37"}, "closed": true, "closedAt": "2020-03-17T22:23:15Z", "author": {"login": "ingwarsw"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL_S_ugH2gAyMzg1NjUyNTU0OmZiZjZjNzMyMjYwNWY4OTlkYmJmM2E3ZTgxNjQzZjhkNjBhOGFlNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOqX4PgFqTM3NjQ0NjM0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fbf6c7322605f899dbbf3a7e81643f8d60a8ae6a", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/fbf6c7322605f899dbbf3a7e81643f8d60a8ae6a", "committedDate": "2020-03-09T15:04:01Z", "message": "Make getTeambySlug fast enought"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e25f37433e3aaa98ed2b3bb904a6dceaf86310b", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/2e25f37433e3aaa98ed2b3bb904a6dceaf86310b", "committedDate": "2020-03-09T15:39:22Z", "message": "Format code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTI0NDA0", "url": "https://github.com/hub4j/github-api/pull/733#pullrequestreview-375524404", "createdAt": "2020-03-16T19:31:32Z", "commit": {"oid": "2e25f37433e3aaa98ed2b3bb904a6dceaf86310b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOTozMTozMlrOF3C8tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOTozNTo1NlrOF3DE5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI2NDMxMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated Use {@link GHOrganization#getTeam(int)}\n          \n          \n            \n                 * @deprecated Use {@link GHOrganization#getTeam(int)} \n          \n          \n            \n                 * @see <a href= \"https://developer.github.com/v3/teams/#get-team-legacy\">deprecation notice</a>", "url": "https://github.com/hub4j/github-api/pull/733#discussion_r393264310", "createdAt": "2020-03-16T19:31:32Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GitHub.java", "diffHunk": "@@ -724,7 +724,10 @@ public GHLicense getLicense(String key) throws IOException {\n      * @return the team\n      * @throws IOException\n      *             the io exception\n+     * \n+     * @deprecated Use {@link GHOrganization#getTeam(int)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25f37433e3aaa98ed2b3bb904a6dceaf86310b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI2NTIxOQ==", "bodyText": "This is great!  But you'll need to update the test data for this test.  See CONTRIBUTING.md.", "url": "https://github.com/hub4j/github-api/pull/733#discussion_r393265219", "createdAt": "2020-03-16T19:33:23Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHOrganization.java", "diffHunk": "@@ -147,19 +165,19 @@ public GHTeam getTeamByName(String name) throws IOException {\n \n     /**\n      * Finds a team that has the given slug in its {@link GHTeam#getSlug()}\n-     *\n+     * \n      * @param slug\n      *            the slug\n      * @return the team by slug\n      * @throws IOException\n      *             the io exception\n+     * @see <a href= \"https://developer.github.com/v3/teams/#get-team-by-name\">documentation</a>\n      */\n     public GHTeam getTeamBySlug(String slug) throws IOException {\n-        for (GHTeam t : listTeams()) {\n-            if (t.getSlug().equals(slug))\n-                return t;\n-        }\n-        return null;\n+        return root.createRequest()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25f37433e3aaa98ed2b3bb904a6dceaf86310b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI2NjQwNA==", "bodyText": "The reference docs say you need org_id with when passing team_id.  Please add tests showing this working correctly.", "url": "https://github.com/hub4j/github-api/pull/733#discussion_r393266404", "createdAt": "2020-03-16T19:35:56Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHOrganization.java", "diffHunk": "@@ -128,6 +128,24 @@ public GHCreateRepositoryBuilder createRepository(String name) {\n                 .toIterable(GHTeam[].class, item -> item.wrapUp(this));\n     }\n \n+    /**\n+     * Gets a single team by ID.\n+     *\n+     * @param id\n+     *            the id\n+     * @return the team\n+     * @throws IOException\n+     *             the io exception\n+     *\n+     * @see <a href= \"https://developer.github.com/v3/teams/#get-team-by-name\">documentation</a>\n+     */\n+    public GHTeam getTeam(int id) throws IOException {\n+        return root.createRequest()\n+                .withUrlPath(String.format(\"/orgs/%s/teams/%d\", login, id))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e25f37433e3aaa98ed2b3bb904a6dceaf86310b"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9213f80435a1a9d6a0532b260895641a9cd700cf", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/9213f80435a1a9d6a0532b260895641a9cd700cf", "committedDate": "2020-03-17T08:07:37Z", "message": "Add comment to deprecation\n\nCo-Authored-By: Liam Newman <bitwiseman@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "960a13dd38c1b97f98d51ee8b54880a8832a8aa2", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/960a13dd38c1b97f98d51ee8b54880a8832a8aa2", "committedDate": "2020-03-17T08:08:34Z", "message": "Merge branch 'master' into add_get_team_by_slug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cbb1a0beea40a8a12a8471934001fc19e951901", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/6cbb1a0beea40a8a12a8471934001fc19e951901", "committedDate": "2020-03-17T09:13:43Z", "message": "Fix tests partially"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "157724bff8343956f5bd0a613fd9708bfb30fd73", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/157724bff8343956f5bd0a613fd9708bfb30fd73", "committedDate": "2020-03-17T09:20:42Z", "message": "Fix rest of tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aebe97f9f91c1624ac201a59ce547ed9946ba5d", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/2aebe97f9f91c1624ac201a59ce547ed9946ba5d", "committedDate": "2020-03-17T10:18:33Z", "message": "Add/restore test for getTeam"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c8b466e59f37368fc7adbe81ddd9ccbc6135d39", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/6c8b466e59f37368fc7adbe81ddd9ccbc6135d39", "committedDate": "2020-03-17T10:18:50Z", "message": "Add mocks for tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6210cc01477a0c5ef3ff95acf6c21d7c3caac39", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/f6210cc01477a0c5ef3ff95acf6c21d7c3caac39", "committedDate": "2020-03-17T10:21:58Z", "message": "Change variable name to something meningfull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a4238156c0bce87023f5b2d95b77e60c284061d", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/1a4238156c0bce87023f5b2d95b77e60c284061d", "committedDate": "2020-03-17T10:34:31Z", "message": "Fix javadocs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MzMxNTE1", "url": "https://github.com/hub4j/github-api/pull/733#pullrequestreview-376331515", "createdAt": "2020-03-17T19:14:32Z", "commit": {"oid": "1a4238156c0bce87023f5b2d95b77e60c284061d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxOToxNDozMlrOF3qcxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxOToxNDozMlrOF3qcxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkxMTQ5Mw==", "bodyText": "Sorry, just because it is deprecated doesn't mean we can remove the test for it.  We must ensure it continues to work until it is removed.", "url": "https://github.com/hub4j/github-api/pull/733#discussion_r393911493", "createdAt": "2020-03-17T19:14:32Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/AppTest.java", "diffHunk": "@@ -234,16 +234,16 @@ private boolean shouldBelongToTeam(String organizationName, String teamName) thr\n         return team.hasMember(gitHub.getMyself());\n     }\n \n-    @Ignore(\"Needs mocking check\")\n     @Test\n     public void testShouldFetchTeam() throws Exception {\n-        GHOrganization j = gitHub.getOrganization(GITHUB_API_TEST_ORG);\n-        GHTeam teamByName = j.getTeams().get(\"Core Developers\");\n+        GHOrganization organization = gitHub.getOrganization(GITHUB_API_TEST_ORG);\n+        GHTeam teamByName = organization.getTeams().get(\"Core Developers\");\n \n-        GHTeam teamById = gitHub.getTeam(teamByName.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a4238156c0bce87023f5b2d95b77e60c284061d"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MzQ5MzI5", "url": "https://github.com/hub4j/github-api/pull/733#pullrequestreview-376349329", "createdAt": "2020-03-17T19:41:32Z", "commit": {"oid": "1a4238156c0bce87023f5b2d95b77e60c284061d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca425d25eb2bcd88b0697019e53ba21ab56e708", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/fca425d25eb2bcd88b0697019e53ba21ab56e708", "committedDate": "2020-03-17T21:34:13Z", "message": "Add test for old getteam method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78b9ff49d47daaa158eb373c4e2e040f739df8b9", "author": {"user": {"login": "ingwarsw", "name": "Karol Lassak"}}, "url": "https://github.com/hub4j/github-api/commit/78b9ff49d47daaa158eb373c4e2e040f739df8b9", "committedDate": "2020-03-17T21:36:54Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDQ2MzQy", "url": "https://github.com/hub4j/github-api/pull/733#pullrequestreview-376446342", "createdAt": "2020-03-17T22:23:07Z", "commit": {"oid": "78b9ff49d47daaa158eb373c4e2e040f739df8b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1699, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}