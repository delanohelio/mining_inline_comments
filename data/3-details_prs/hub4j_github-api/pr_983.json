{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjIwODc5", "number": 983, "title": "Add arch test for preview API usage", "bodyText": "Description\nThis PR introduces the concept of architecture tests to the project. The first test implemented verifies that any method or class that is annotated @Preview is also annotated with @Deprecated.\nThe library used to implement the tests is ArchUnit\nThe following is an example of the output created when this test fails.\n\nBefore submitting a PR:\nWe love getting PRs, but we hate asking people for the same basic changes every time.\n\n Push your changes to a branch other than master. Create your PR from that branch.\n Add JavaDocs and other comments\n Write tests that run and pass in CI. See CONTRIBUTING.md for details on how to capture snapshot data.\n Run mvn clean compile locally. This may reformat your code, commit those changes.\n Run mvn -D enable-ci clean install site locally. If this command doesn't succeed, your change will not pass CI.\n\nWhen creating a PR:\n\n Fill in the \"Description\" above.\n Enable \"Allow edits from maintainers\".", "createdAt": "2020-11-25T18:18:17Z", "url": "https://github.com/hub4j/github-api/pull/983", "merged": true, "mergeCommit": {"oid": "1da8416ebd22548be57f0d2ad1290823eb2b63dc"}, "closed": true, "closedAt": "2020-12-15T23:20:06Z", "author": {"login": "marcoferrer"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgCenqAH2gAyNTI3NjIwODc5Ojc1ODgyNjc3NDNkNTQ0YTcyODFjZTY3N2Y0YzA5ZGVlMGY0ZGVhYTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmd-exgH2gAyNTI3NjIwODc5OjU4ODhlZmNhZWYxZGNmOTg1ZjM3ODBhNmFjMjU0Njg2Mzg5YTgxYzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7588267743d544a7281ce677f4c09dee0f4deaa3", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/7588267743d544a7281ce677f4c09dee0f4deaa3", "committedDate": "2020-11-25T18:16:04Z", "message": "Add arch test for preview API usage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4ODYxNDMy", "url": "https://github.com/hub4j/github-api/pull/983#pullrequestreview-538861432", "createdAt": "2020-11-25T21:39:37Z", "commit": {"oid": "7588267743d544a7281ce677f4c09dee0f4deaa3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQyMTozOTozN1rOH6EpBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQyMTozOTozN1rOH6EpBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDY1NTQ5NA==", "bodyText": "\"classFiles\" could be a static variable.\nThen I would add this:\n    @BeforeClass\n    public static void beforeClass() {\n        assertTrue(classFiles.size() > 0);\n    }", "url": "https://github.com/hub4j/github-api/pull/983#discussion_r530655494", "createdAt": "2020-11-25T21:39:37Z", "author": {"login": "sullis"}, "path": "src/test/java/org/kohsuke/github/ArchTests.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package org.kohsuke.github;\n+\n+import com.tngtech.archunit.core.domain.JavaClass;\n+import com.tngtech.archunit.core.domain.JavaClasses;\n+import com.tngtech.archunit.core.domain.properties.HasAnnotations;\n+import com.tngtech.archunit.core.domain.properties.HasName.AndFullName;\n+import com.tngtech.archunit.core.importer.ClassFileImporter;\n+import com.tngtech.archunit.core.importer.ImportOption;\n+import com.tngtech.archunit.lang.ArchCondition;\n+import com.tngtech.archunit.lang.ArchRule;\n+import com.tngtech.archunit.lang.ConditionEvents;\n+import com.tngtech.archunit.lang.SimpleConditionEvent;\n+import org.junit.Test;\n+\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.classes;\n+\n+public class ArchTests {\n+\n+    private final JavaClasses classFiles = new ClassFileImporter()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7588267743d544a7281ce677f4c09dee0f4deaa3"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMzYzMjk5", "url": "https://github.com/hub4j/github-api/pull/983#pullrequestreview-541363299", "createdAt": "2020-11-30T23:00:29Z", "commit": {"oid": "7588267743d544a7281ce677f4c09dee0f4deaa3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "459d1b4f5629182d54454097f96a42e5c6fd746f", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/459d1b4f5629182d54454097f96a42e5c6fd746f", "committedDate": "2020-12-15T17:41:02Z", "message": "update arch tests to add enum checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5504d1f75313b9eb21a66de3588ae4ee042e5df4", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/5504d1f75313b9eb21a66de3588ae4ee042e5df4", "committedDate": "2020-12-15T17:18:05Z", "message": "Merge branch 'master' into add-preview-arch-rules"}, "afterCommit": {"oid": "459d1b4f5629182d54454097f96a42e5c6fd746f", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/459d1b4f5629182d54454097f96a42e5c6fd746f", "committedDate": "2020-12-15T17:41:02Z", "message": "update arch tests to add enum checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5888efcaef1dcf985f3780a6ac254686389a81c5", "author": {"user": {"login": "marcoferrer", "name": "Marco Ferrer"}}, "url": "https://github.com/hub4j/github-api/commit/5888efcaef1dcf985f3780a6ac254686389a81c5", "committedDate": "2020-12-15T17:41:51Z", "message": "Merge branch 'master' into add-preview-arch-rules"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1595, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}