{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2Mzk5ODc2", "number": 922, "title": " methods for listing PRs where the commit is head & listing branches which contain the commit", "bodyText": "Description\nMethods for listing PRs where the commit is head & listing branches which contain the commit.\nBefore submitting a PR:\nWe love getting PRs, but we hate asking people for the same basic changes every time.\n\n Push your changes to a branch other than master. Create your PR from that branch.\n Add JavaDocs and other comments\n Write tests that run and pass in CI. See CONTRIBUTING.md for details on how to capture snapshot data.\n Run mvn clean compile locally. This may reformat your code, commit those changes.\n Run mvn -D enable-ci clean install site locally. If this command doesn't succeed, your change will not pass CI.\n\nWhen creating a PR:\n\n Fill in the \"Description\" above.\n Enable \"Allow edits from maintainers\".", "createdAt": "2020-08-11T23:00:45Z", "url": "https://github.com/hub4j/github-api/pull/922", "merged": true, "mergeCommit": {"oid": "bf67069768f1b9d200544dad7fe98a2a1fd47022"}, "closed": true, "closedAt": "2020-09-22T22:48:04Z", "author": {"login": "tginiotis-at-work"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9_JuLABqjM2NDUzNDc2ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLgAfZAFqTQ5Mzg5NzkwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6af624996631b3efe309739f66330a0ef07d00e", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/b6af624996631b3efe309739f66330a0ef07d00e", "committedDate": "2020-08-11T22:56:23Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}, "afterCommit": {"oid": "2b0060402113a86885aa3833b6b4dc1f9c6a2d3c", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/2b0060402113a86885aa3833b6b4dc1f9c6a2d3c", "committedDate": "2020-08-11T23:09:53Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b0060402113a86885aa3833b6b4dc1f9c6a2d3c", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/2b0060402113a86885aa3833b6b4dc1f9c6a2d3c", "committedDate": "2020-08-11T23:09:53Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}, "afterCommit": {"oid": "e71365495351afe643ddfd8cf28643133397b5e7", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/e71365495351afe643ddfd8cf28643133397b5e7", "committedDate": "2020-08-11T23:10:45Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e71365495351afe643ddfd8cf28643133397b5e7", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/e71365495351afe643ddfd8cf28643133397b5e7", "committedDate": "2020-08-11T23:10:45Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}, "afterCommit": {"oid": "3355272b0bdd9260be5376915bb159526418eff9", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/3355272b0bdd9260be5376915bb159526418eff9", "committedDate": "2020-08-11T23:14:09Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3355272b0bdd9260be5376915bb159526418eff9", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/3355272b0bdd9260be5376915bb159526418eff9", "committedDate": "2020-08-11T23:14:09Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}, "afterCommit": {"oid": "a4efc7137f671cda09f53bc9f5cc763ebb563eb0", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/a4efc7137f671cda09f53bc9f5cc763ebb563eb0", "committedDate": "2020-08-11T23:19:40Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4efc7137f671cda09f53bc9f5cc763ebb563eb0", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/a4efc7137f671cda09f53bc9f5cc763ebb563eb0", "committedDate": "2020-08-11T23:19:40Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}, "afterCommit": {"oid": "1559fc9de09dffd28a652160da74d979d9026d3e", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/1559fc9de09dffd28a652160da74d979d9026d3e", "committedDate": "2020-08-11T23:34:05Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3788ba2d81a4bb7d143623820ba96214b1125960", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/3788ba2d81a4bb7d143623820ba96214b1125960", "committedDate": "2020-08-13T08:37:37Z", "message": "add GHCommit tests"}, "afterCommit": {"oid": "6ee78e961bd7f3e1560774b39ed4876ae8540760", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/6ee78e961bd7f3e1560774b39ed4876ae8540760", "committedDate": "2020-08-13T08:39:16Z", "message": "add GHCommit tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ee78e961bd7f3e1560774b39ed4876ae8540760", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/6ee78e961bd7f3e1560774b39ed4876ae8540760", "committedDate": "2020-08-13T08:39:16Z", "message": "add GHCommit tests"}, "afterCommit": {"oid": "555fa69ae1589bc150ab1c92b17e1c0a9c7875e9", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/555fa69ae1589bc150ab1c92b17e1c0a9c7875e9", "committedDate": "2020-08-13T08:55:18Z", "message": "add GHCommit tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "555fa69ae1589bc150ab1c92b17e1c0a9c7875e9", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/555fa69ae1589bc150ab1c92b17e1c0a9c7875e9", "committedDate": "2020-08-13T08:55:18Z", "message": "add GHCommit tests"}, "afterCommit": {"oid": "70343c5eb8174a8090b347e43737704191adcecf", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/70343c5eb8174a8090b347e43737704191adcecf", "committedDate": "2020-08-13T12:33:28Z", "message": "add GHCommit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTM4ODc5", "url": "https://github.com/hub4j/github-api/pull/922#pullrequestreview-466938879", "createdAt": "2020-08-13T16:46:50Z", "commit": {"oid": "70343c5eb8174a8090b347e43737704191adcecf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNjo0Njo1MVrOHAT16w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNjo1NTozOVrOHAUKVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4NzE0Nw==", "bodyText": "Rather than querying this, choose some commits manually and pass specific string SHA1 values.  These are never going to change, so getting the list of commits just inflates the test data files.", "url": "https://github.com/hub4j/github-api/pull/922#discussion_r470087147", "createdAt": "2020-08-13T16:46:51Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/CommitTest.java", "diffHunk": "@@ -25,6 +25,44 @@ public void listFiles() throws Exception {\n         }\n     }\n \n+    @Test\n+    public void listPullRequests() throws Exception {\n+        GHRepository repo = gitHub.getRepository(\"hub4j/github-api\");\n+\n+        int[] prsToTest = { 909, 898, 893 };\n+\n+        for (Integer prNumber : prsToTest) {\n+            GHPullRequest pullRequest = repo.getPullRequest(prNumber);\n+\n+            GHCommit commit = repo\n+                    .getCommit(pullRequest.listCommits().toList().stream().findFirst().map(it -> it.sha).orElse(\"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70343c5eb8174a8090b347e43737704191adcecf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA5MjM3Mw==", "bodyText": "Use assertThat methods instead.\nVerify the size the list that should be returned.", "url": "https://github.com/hub4j/github-api/pull/922#discussion_r470092373", "createdAt": "2020-08-13T16:55:39Z", "author": {"login": "bitwiseman"}, "path": "src/test/java/org/kohsuke/github/CommitTest.java", "diffHunk": "@@ -25,6 +25,44 @@ public void listFiles() throws Exception {\n         }\n     }\n \n+    @Test\n+    public void listPullRequests() throws Exception {\n+        GHRepository repo = gitHub.getRepository(\"hub4j/github-api\");\n+\n+        int[] prsToTest = { 909, 898, 893 };\n+\n+        for (Integer prNumber : prsToTest) {\n+            GHPullRequest pullRequest = repo.getPullRequest(prNumber);\n+\n+            GHCommit commit = repo\n+                    .getCommit(pullRequest.listCommits().toList().stream().findFirst().map(it -> it.sha).orElse(\"\"));\n+\n+            assertTrue(\"Pull request \" + pullRequest.number + \" not found by searching from commit.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70343c5eb8174a8090b347e43737704191adcecf"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "def2f0b37d4ea1e33fd0e80e4675749726985b21", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/def2f0b37d4ea1e33fd0e80e4675749726985b21", "committedDate": "2020-09-03T20:16:31Z", "message": "methods for listing PRs where the commit is head & listing branches which contain the commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b2a3e1221bdd89e34d775e25b60f0d633dcfc90", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/8b2a3e1221bdd89e34d775e25b60f0d633dcfc90", "committedDate": "2020-09-03T20:17:39Z", "message": "add GHCommit tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70343c5eb8174a8090b347e43737704191adcecf", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/70343c5eb8174a8090b347e43737704191adcecf", "committedDate": "2020-08-13T12:33:28Z", "message": "add GHCommit tests"}, "afterCommit": {"oid": "8b2a3e1221bdd89e34d775e25b60f0d633dcfc90", "author": {"user": {"login": "tginiotis-at-work", "name": "Tadas Giniotis"}}, "url": "https://github.com/hub4j/github-api/commit/8b2a3e1221bdd89e34d775e25b60f0d633dcfc90", "committedDate": "2020-09-03T20:17:39Z", "message": "add GHCommit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODk3OTAz", "url": "https://github.com/hub4j/github-api/pull/922#pullrequestreview-493897903", "createdAt": "2020-09-22T22:47:54Z", "commit": {"oid": "8b2a3e1221bdd89e34d775e25b60f0d633dcfc90"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1636, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}