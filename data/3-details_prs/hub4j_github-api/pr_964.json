{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MjY0ODg4", "number": 964, "title": "GHPullRequest.getLabels should not go to the GHIssue API endpoint", "bodyText": "@jvz found that the Jenkins label filter plugin does not work with App authentication. After jenkinsci/github-branch-source-plugin#351 + jenkinsci/github-label-filter-plugin#4 I think I figured out the problem: the lookup of PR labels\u2014and only this method\u2014uses https://developer.github.com/v3/issues/#get-an-issue rather than https://developer.github.com/v3/pulls/#get-a-pull-request as you might expect. Presumably the fact that the App is configured to permit https://developer.github.com/v3/apps/permissions/#permission-on-pull-requests but not https://developer.github.com/v3/apps/permissions/#permission-on-issues makes this not work. I tracked this weird logic down to 372d5ff from 2014 which has little explanation and may have been a workaround for some transient bug in GH long since fixed; I get the expected metadata today with either endpoint (using a PAT):\n$ curl -u $AUTH -s https://api.github.com/repos/jenkinsci/mercurial-plugin/issues/150 | jq .labels\n[\n  {\n    \"id\": 1447091401,\n    \"node_id\": \"MDU6TGFiZWwxNDQ3MDkxNDAx\",\n    \"url\": \"https://api.github.com/repos/jenkinsci/mercurial-plugin/labels/test\",\n    \"name\": \"test\",\n    \"color\": \"1c6c87\",\n    \"default\": false,\n    \"description\": \"\"\n  }\n]\n$ curl -u $AUTH -s https://api.github.com/repos/jenkinsci/mercurial-plugin/pulls/150 | jq .labels\n[\n  {\n    \"id\": 1447091401,\n    \"node_id\": \"MDU6TGFiZWwxNDQ3MDkxNDAx\",\n    \"url\": \"https://api.github.com/repos/jenkinsci/mercurial-plugin/labels/test\",\n    \"name\": \"test\",\n    \"color\": \"1c6c87\",\n    \"default\": false,\n    \"description\": \"\"\n  }\n]\nPossibly fixes jenkinsci/github-label-filter-plugin#3 (not yet verified).", "createdAt": "2020-10-15T17:30:26Z", "url": "https://github.com/hub4j/github-api/pull/964", "merged": true, "mergeCommit": {"oid": "5377d0dd184910dd0923576d2a2a9eeaf3283976"}, "closed": true, "closedAt": "2020-10-22T20:35:38Z", "author": {"login": "jglick"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS1LcAAH2gAyNTA0MjY0ODg4OjgyNjcwNTBmMDZjMmZhMmQzNTM3MWFkYjBiYTdhZTMwZjU1YTNlMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZAekiAFqTUyMjkwNDU5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8267050f06c2fa2d35371adb0ba7ae30f55a3e08", "author": {"user": {"login": "jglick", "name": "Jesse Glick"}}, "url": "https://github.com/hub4j/github-api/commit/8267050f06c2fa2d35371adb0ba7ae30f55a3e08", "committedDate": "2020-10-15T17:25:20Z", "message": "GHPullRequest.getLabels should not go to the GHIssue API endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5ODMzNzI1", "url": "https://github.com/hub4j/github-api/pull/964#pullrequestreview-509833725", "createdAt": "2020-10-15T21:49:37Z", "commit": {"oid": "8267050f06c2fa2d35371adb0ba7ae30f55a3e08"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDc1MDYw", "url": "https://github.com/hub4j/github-api/pull/964#pullrequestreview-515075060", "createdAt": "2020-10-22T20:01:37Z", "commit": {"oid": "8267050f06c2fa2d35371adb0ba7ae30f55a3e08"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTA0NTk4", "url": "https://github.com/hub4j/github-api/pull/964#pullrequestreview-522904598", "createdAt": "2020-11-03T21:58:44Z", "commit": {"oid": "8267050f06c2fa2d35371adb0ba7ae30f55a3e08"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMTo1ODo0NFrOHtB7sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMTo1ODo0NFrOHtB7sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk3OTYzNQ==", "bodyText": "@jglick @timja\nThis is an API change, isn't it?", "url": "https://github.com/hub4j/github-api/pull/964#discussion_r516979635", "createdAt": "2020-11-03T21:58:44Z", "author": {"login": "bitwiseman"}, "path": "src/main/java/org/kohsuke/github/GHIssue.java", "diffHunk": "@@ -158,10 +158,8 @@ public GHIssueState getState() {\n      * Gets labels.\n      *\n      * @return the labels\n-     * @throws IOException\n-     *             the io exception\n      */\n-    public Collection<GHLabel> getLabels() throws IOException {\n+    public Collection<GHLabel> getLabels() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8267050f06c2fa2d35371adb0ba7ae30f55a3e08"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1575, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}