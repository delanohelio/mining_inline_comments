{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNjA2MTYx", "number": 10305, "title": "Qute - remove standalone lines by default", "bodyText": "resolves #8753", "createdAt": "2020-06-26T14:06:21Z", "url": "https://github.com/quarkusio/quarkus/pull/10305", "merged": true, "mergeCommit": {"oid": "e2689cc5772acd6cdf460b1c36a01cbb138f744a"}, "closed": true, "closedAt": "2020-06-30T13:17:41Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvD3EJgBqjM0ODY3NzMxNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwTgM8gFqTQzOTkwMzEwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "526d0eff43e59fc45016774714ded815c9220a1f", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/526d0eff43e59fc45016774714ded815c9220a1f", "committedDate": "2020-06-26T13:58:06Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}, "afterCommit": {"oid": "c274fbb1c4085e863b6f6b068ed0ca5264c7b7ee", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c274fbb1c4085e863b6f6b068ed0ca5264c7b7ee", "committedDate": "2020-06-26T14:10:10Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c274fbb1c4085e863b6f6b068ed0ca5264c7b7ee", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c274fbb1c4085e863b6f6b068ed0ca5264c7b7ee", "committedDate": "2020-06-26T14:10:10Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}, "afterCommit": {"oid": "b2f1949d23b5a20506c2aa19cde9f50b943f3ce9", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b2f1949d23b5a20506c2aa19cde9f50b943f3ce9", "committedDate": "2020-06-29T07:25:46Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MDEyNzc1", "url": "https://github.com/quarkusio/quarkus/pull/10305#pullrequestreview-439012775", "createdAt": "2020-06-29T09:00:31Z", "commit": {"oid": "b2f1949d23b5a20506c2aa19cde9f50b943f3ce9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwOTowMDozMlrOGqLKHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwOTowMDozMlrOGqLKHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg3NjE5MQ==", "bodyText": "I think adding a sentence mentioning, what disabling such a behaviour can result in, would be a good thing. I see that there's an example output a few lines down, which shows what happens, but explicitly stating something like  \"If this property is disabled, then each standalone line will result in a new line character, in the generated output\" might be helpful", "url": "https://github.com/quarkusio/quarkus/pull/10305#discussion_r446876191", "createdAt": "2020-06-29T09:00:32Z", "author": {"login": "jaikiran"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -124,6 +124,55 @@ A closing curly bracket (`}`) is ignored if not inside an expression/tag.\n \n TIP: It is also possible to use escape sequences `\\{` and `\\}` to insert delimiters in the text. In fact, an escape sequence is usually only needed for the start delimiter, ie. `\\\\{foo}` will be rendered as `{foo}` (no evaluation will happen).\n \n+=== Removing Standalone Lines From the Template\n+\n+By default, the parser removes standalone lines from the template output.\n+A *standalone line* is a line that contains only section tags (e.g. `{#each}` and `{/each}`), parameter declarations (e.g. `{@org.acme.Foo foo}`) and whitespace characters.\n+The default behavior can be disabled by setting the property `quarkus.qute.remove-standalone-lines` to `false`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2f1949d23b5a20506c2aa19cde9f50b943f3ce9"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2f1949d23b5a20506c2aa19cde9f50b943f3ce9", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b2f1949d23b5a20506c2aa19cde9f50b943f3ce9", "committedDate": "2020-06-29T07:25:46Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}, "afterCommit": {"oid": "c0eaba44fe0964061adea76ab26a97b5e54f728d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c0eaba44fe0964061adea76ab26a97b5e54f728d", "committedDate": "2020-06-29T13:37:40Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0eaba44fe0964061adea76ab26a97b5e54f728d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c0eaba44fe0964061adea76ab26a97b5e54f728d", "committedDate": "2020-06-29T13:37:40Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}, "afterCommit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/291a50af6bd36e7a49df4318c57e5d601f1162b4", "committedDate": "2020-06-30T08:13:57Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODI1NTI2", "url": "https://github.com/quarkusio/quarkus/pull/10305#pullrequestreview-439825526", "createdAt": "2020-06-30T09:13:55Z", "commit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOToxMzo1NVrOGqzZmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOToxNDo0NFrOGqzbbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUzNTUxNQ==", "bodyText": "So, this appears to validate that the description:\n\nA standalone line is a line that contains only section tags (e.g. {#each} and {/each}), parameter declarations (e.g. {@org.acme.Foo foo}) and whitespace characters.\n\nhas a confusing and. I initially thought this applied to empty lines as well, but this test says it does not.\nPerhaps the following is less confusing for people like me?\n\nA standalone line is a line that contains at least one of: section tags (e.g. {#each} and {/each}) or parameter declarations (e.g. {@org.acme.Foo foo}), ignoring any whitespace characters on the same line.\n\nIt's not perfect yet, though so if you find better, I'll take it :)", "url": "https://github.com/quarkusio/quarkus/pull/10305#discussion_r447535515", "createdAt": "2020-06-30T09:13:55Z", "author": {"login": "FroMage"}, "path": "independent-projects/qute/core/src/test/java/io/quarkus/qute/ParserTest.java", "diffHunk": "@@ -180,6 +180,18 @@ public void testCdata() {\n         assertEquals(\"Hello world <strong>\", engine.parse(\"Hello {name} {[<strong>]}\").data(\"name\", \"world\").render());\n     }\n \n+    @Test\n+    public void testRemoveStandaloneLines() {\n+        Engine engine = Engine.builder().addDefaults().removeStandaloneLines(true).build();\n+        String content = \"{@java.lang.String foo}\\n\" // -> standalone\n+                + \"\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUzNTk4Mw==", "bodyText": "Here I'm missing an example of a line with whitespace but no section/parameter, to show that they get kept.", "url": "https://github.com/quarkusio/quarkus/pull/10305#discussion_r447535983", "createdAt": "2020-06-30T09:14:44Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -124,6 +124,56 @@ A closing curly bracket (`}`) is ignored if not inside an expression/tag.\n \n TIP: It is also possible to use escape sequences `\\{` and `\\}` to insert delimiters in the text. In fact, an escape sequence is usually only needed for the start delimiter, ie. `\\\\{foo}` will be rendered as `{foo}` (no evaluation will happen).\n \n+=== Removing Standalone Lines From the Template\n+\n+By default, Qute parser removes standalone lines from the template output.\n+A *standalone line* is a line that contains only section tags (e.g. `{#each}` and `{/each}`), parameter declarations (e.g. `{@org.acme.Foo foo}`) and whitespace characters.\n+The default behavior can be disabled by setting the property `quarkus.qute.remove-standalone-lines` to `false`.\n+In this case, all whitespace characters from a standalone line will be printed to the output.\n+\n+.Template Example\n+[source,html]\n+----\n+<html>\n+  <body>\n+     <ul>\n+     {#for item in items} <1>\n+       <li>{item.name}</li> <2>\n+     {/for} <3>\n+     </ul>\n+   <body>\n+</html>\n+----\n+<1> This is a standalone line and will be removed.\n+<2> This is not a standalone line as it contains non-whitespace characters and an expression.\n+<3> This is a standalone line and will be removed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODI3ODYy", "url": "https://github.com/quarkusio/quarkus/pull/10305#pullrequestreview-439827862", "createdAt": "2020-06-30T09:16:46Z", "commit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9a670bf910e9e4d6383fdd32a3bbf59a1be9c05", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9a670bf910e9e4d6383fdd32a3bbf59a1be9c05", "committedDate": "2020-06-30T10:38:18Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "291a50af6bd36e7a49df4318c57e5d601f1162b4", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/291a50af6bd36e7a49df4318c57e5d601f1162b4", "committedDate": "2020-06-30T08:13:57Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}, "afterCommit": {"oid": "b9a670bf910e9e4d6383fdd32a3bbf59a1be9c05", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9a670bf910e9e4d6383fdd32a3bbf59a1be9c05", "committedDate": "2020-06-30T10:38:18Z", "message": "Qute - remove standalone lines by default\n\n- resolves #8753"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTAzMTA1", "url": "https://github.com/quarkusio/quarkus/pull/10305#pullrequestreview-439903105", "createdAt": "2020-06-30T10:57:49Z", "commit": {"oid": "b9a670bf910e9e4d6383fdd32a3bbf59a1be9c05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4158, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}