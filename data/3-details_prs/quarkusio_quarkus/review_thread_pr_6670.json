{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MDk5MjY5", "number": 6670, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMDowNzo0M1rODZb55g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozODoyOFrODaxpvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3OTk4MTgyOnYy", "diffSide": "RIGHT", "path": "extensions/netty/runtime/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMDowNzo0M1rOFf0euA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMjo0MTowNFrOFf4lew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODkxMDAwOA==", "bodyText": "Maybe leave these dependencies to be manually added in the project if the property is set? Not sure it makes sense to include the OSX and Linux dependencies in quarkus-netty", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r368910008", "createdAt": "2020-01-21T10:07:43Z", "author": {"login": "gastaldi"}, "path": "extensions/netty/runtime/pom.xml", "diffHunk": "@@ -39,6 +39,17 @@\n             <groupId>com.oracle.substratevm</groupId>\n             <artifactId>svm</artifactId>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-epoll</artifactId>\n+            <classifier>linux-x86_64</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-kqueue</artifactId>\n+            <classifier>osx-x86_64</classifier>\n+        </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b632d327f1204dabbb74b9cca0118e46e8bbee5e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODk3NzI3NQ==", "bodyText": "It's perfectly safe to include these dependencies and they are ignored in Windows. Both Spring Boot and Wildfly have them baked in (the latter in netty-all). We could do as you suggest but then we would have to add some documentation.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r368977275", "createdAt": "2020-01-21T12:41:04Z", "author": {"login": "pcasaes"}, "path": "extensions/netty/runtime/pom.xml", "diffHunk": "@@ -39,6 +39,17 @@\n             <groupId>com.oracle.substratevm</groupId>\n             <artifactId>svm</artifactId>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-epoll</artifactId>\n+            <classifier>linux-x86_64</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-kqueue</artifactId>\n+            <classifier>osx-x86_64</classifier>\n+        </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODkxMDAwOA=="}, "originalCommit": {"oid": "b632d327f1204dabbb74b9cca0118e46e8bbee5e"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MDc5OTQ0OnYy", "diffSide": "RIGHT", "path": "extensions/netty/runtime/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDozNzoyNlrOFf8PeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDozNzoyNlrOFf8PeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzNzE3Ng==", "bodyText": "The native transport dependencies are optional. You'll have to add them in manually to your project but the version will be taken care for you.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369037176", "createdAt": "2020-01-21T14:37:26Z", "author": {"login": "pcasaes"}, "path": "extensions/netty/runtime/pom.xml", "diffHunk": "@@ -39,6 +39,19 @@\n             <groupId>com.oracle.substratevm</groupId>\n             <artifactId>svm</artifactId>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-epoll</artifactId>\n+            <classifier>linux-x86_64</classifier>\n+            <optional>true</optional>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.netty</groupId>\n+            <artifactId>netty-transport-native-kqueue</artifactId>\n+            <classifier>osx-x86_64</classifier>\n+            <optional>true</optional>\n+        </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MDgxNjI1OnYy", "diffSide": "RIGHT", "path": "docs/src/main/asciidoc/vertx.adoc", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDo0MTozN1rOFf8Zlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNToxNzozMlrOFf9wLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzOTc2Ng==", "bodyText": "How to know when to include one or both? Aren't these dependencies OS specific?", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369039766", "createdAt": "2020-01-21T14:41:37Z", "author": {"login": "gastaldi"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -47,6 +47,44 @@ Otherwise, you can manually add this to the dependencies section of your `pom.xm\n </dependency>\n ----\n \n+== Native Transport\n+\n+Vert.x is capable of using https://netty.io/wiki/native-transports.html[Netty's native transports] which offers\n+performance improvements on certain platforms. To enable them you must include one or both of the following dependencies:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA0NTU3Nw==", "bodyText": "The referenced documentation https://netty.io/wiki/native-transports.html is where you get that information. But it won't break if you include both of them. Netty is smart enough to fallback to a non native transport. Usually projects include both so they'll be platform agnostic.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369045577", "createdAt": "2020-01-21T14:50:54Z", "author": {"login": "pcasaes"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -47,6 +47,44 @@ Otherwise, you can manually add this to the dependencies section of your `pom.xm\n </dependency>\n ----\n \n+== Native Transport\n+\n+Vert.x is capable of using https://netty.io/wiki/native-transports.html[Netty's native transports] which offers\n+performance improvements on certain platforms. To enable them you must include one or both of the following dependencies:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzOTc2Ng=="}, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA1MTIzMg==", "bodyText": "To be clear. If you include both netty is smart enough to know which one it should use (or non tall) depending on the platform.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369051232", "createdAt": "2020-01-21T14:59:53Z", "author": {"login": "pcasaes"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -47,6 +47,44 @@ Otherwise, you can manually add this to the dependencies section of your `pom.xm\n </dependency>\n ----\n \n+== Native Transport\n+\n+Vert.x is capable of using https://netty.io/wiki/native-transports.html[Netty's native transports] which offers\n+performance improvements on certain platforms. To enable them you must include one or both of the following dependencies:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzOTc2Ng=="}, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA1NzA1MA==", "bodyText": "Gotcha. Thanks!", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369057050", "createdAt": "2020-01-21T15:09:39Z", "author": {"login": "gastaldi"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -47,6 +47,44 @@ Otherwise, you can manually add this to the dependencies section of your `pom.xm\n </dependency>\n ----\n \n+== Native Transport\n+\n+Vert.x is capable of using https://netty.io/wiki/native-transports.html[Netty's native transports] which offers\n+performance improvements on certain platforms. To enable them you must include one or both of the following dependencies:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzOTc2Ng=="}, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA2MTkzNA==", "bodyText": "I improved the documentation to make it clearer.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369061934", "createdAt": "2020-01-21T15:17:32Z", "author": {"login": "pcasaes"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -47,6 +47,44 @@ Otherwise, you can manually add this to the dependencies section of your `pom.xm\n </dependency>\n ----\n \n+== Native Transport\n+\n+Vert.x is capable of using https://netty.io/wiki/native-transports.html[Netty's native transports] which offers\n+performance improvements on certain platforms. To enable them you must include one or both of the following dependencies:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzOTc2Ng=="}, "originalCommit": {"oid": "3972b8a8366c1f4dd312630aa97b6fb4a8dfa47a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTAwOTE4OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNTozMTowOFrOFf-Rqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo1OTozNFrOFgBmjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA3MDUwNw==", "bodyText": "No need to initialize as the default value is false anyway", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369070507", "createdAt": "2020-01-21T15:31:08Z", "author": {"login": "gastaldi"}, "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "diffHunk": "@@ -61,6 +61,7 @@ public void shouldNotFailWithDefaultConfig() {\n         configuration.workerPoolSize = 10;\n         configuration.warningExceptionTime = Duration.ofSeconds(1);\n         configuration.internalBlockingPoolSize = 5;\n+        configuration.preferNativeTransport = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a67bb06d9d4fcd301c9c22f8ca37bf32cc89438"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyNTAwNw==", "bodyText": "You're right.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369125007", "createdAt": "2020-01-21T16:59:34Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "diffHunk": "@@ -61,6 +61,7 @@ public void shouldNotFailWithDefaultConfig() {\n         configuration.workerPoolSize = 10;\n         configuration.warningExceptionTime = Duration.ofSeconds(1);\n         configuration.internalBlockingPoolSize = 5;\n+        configuration.preferNativeTransport = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA3MDUwNw=="}, "originalCommit": {"oid": "6a67bb06d9d4fcd301c9c22f8ca37bf32cc89438"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTQyMTM2OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzoyMDo1MFrOFgCSUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxNTozNToyMlrOFgglAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzNjIxMQ==", "bodyText": "No need to initialize here too, I suppose? :)", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369136211", "createdAt": "2020-01-21T17:20:50Z", "author": {"login": "gastaldi"}, "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "diffHunk": "@@ -100,6 +100,7 @@ private VertxConfiguration createDefaultConfiguration() {\n         vc.maxWorkerExecuteTime = Optional.of(Duration.ofSeconds(1));\n         vc.internalBlockingPoolSize = 20;\n         vc.useAsyncDNS = false;\n+        vc.preferNativeTransport = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a49454e4c73f886c313d24574471c0f19e8d068b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTYzMjUxMg==", "bodyText": "This method creates a default configuration and sets all values. I figured best to keep it consistent.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369632512", "createdAt": "2020-01-22T15:35:22Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-core/runtime/src/test/java/io/quarkus/vertx/core/runtime/VertxCoreProducerTest.java", "diffHunk": "@@ -100,6 +100,7 @@ private VertxConfiguration createDefaultConfiguration() {\n         vc.maxWorkerExecuteTime = Optional.of(Duration.ofSeconds(1));\n         vc.internalBlockingPoolSize = 20;\n         vc.useAsyncDNS = false;\n+        vc.preferNativeTransport = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzNjIxMQ=="}, "originalCommit": {"oid": "a49454e4c73f886c313d24574471c0f19e8d068b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NTg3ODA1OnYy", "diffSide": "LEFT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjoyOTo1MVrOFgtRyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjoyOTo1MVrOFgtRyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0MDU4Nw==", "bodyText": "These variables are redundant since their values are in httpOptions and httpsOptions.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r369840587", "createdAt": "2020-01-22T22:29:51Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -541,39 +592,85 @@ public void addRoute(RuntimeValue<Router> router, Function<Router, Route> route,\n \n     private static class WebDeploymentVerticle extends AbstractVerticle {\n \n-        private final int port;\n-        private final int httpsPort;\n-        private final String host;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d85cc71f02b26230c51674b3e35dc864bc79ec6"}, "originalPosition": 133}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTYyMTc4OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMDozNDo0OFrOFhRA_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowMjoyMlrOFhRZtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNjEwOA==", "bodyText": "Why have you changed the default to false? I thought the usual default value here would be true?", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r370426108", "createdAt": "2020-01-24T00:34:48Z", "author": {"login": "stuartwdouglas"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e24d81afc7b9e3acf5c27fe7e95dfa5e51c11177"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNzc0MA==", "bodyText": "It's a new configuration. In this case one that enables SO_REUSEPORT. At a first glance I figured it safer to leave this new configurations turned off.\nAll the new configurations here only take effect if native transport is enabled. I'll add that to the documentation.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r370427740", "createdAt": "2020-01-24T00:41:48Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNjEwOA=="}, "originalCommit": {"oid": "e24d81afc7b9e3acf5c27fe7e95dfa5e51c11177"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyODY2Mg==", "bodyText": "Sorry, I should have read it more closely, I was thinking it was SO_REUSEADDR", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r370428662", "createdAt": "2020-01-24T00:45:55Z", "author": {"login": "stuartwdouglas"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNjEwOA=="}, "originalCommit": {"oid": "e24d81afc7b9e3acf5c27fe7e95dfa5e51c11177"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMjQzNg==", "bodyText": "No worries. I added this to the docs.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r370432436", "createdAt": "2020-01-24T01:02:22Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNjEwOA=="}, "originalCommit": {"oid": "e24d81afc7b9e3acf5c27fe7e95dfa5e51c11177"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAyNjEwOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNToyOVrOFh46-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMTo0ODoxOFrOFi1xlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA==", "bodyText": "Why switching this property as optional? It has a default value, so the optional will never be empty.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371079930", "createdAt": "2020-01-27T06:35:29Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg4MzY2OQ==", "bodyText": "So if you only want to use unix domain sockets you can set\nquarkus.http.host=\nAnd it will disable listening on host:port. Do you think it would be clearer to use a different property to disable this?", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371883669", "createdAt": "2020-01-28T15:44:35Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5MTA4MA==", "bodyText": "maybe remove the Optional and add these properties with these default?\nquarkus.http.host-enabled=true\nquarkus.http.domain-socket-enabled=false", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371891080", "createdAt": "2020-01-28T15:55:16Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5NTk4NQ==", "bodyText": "quarkus.http.host.domain-socket won't have a default value so it must be optional.\nSo then we'd only need\nquarkus.http.host-enabled=true\n\nBut having domain-socket and http enabled differently is a bit strange.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371895985", "createdAt": "2020-01-28T16:02:50Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5OTIyOA==", "bodyText": "Another option is to give domain-sockets a default value /var/run/io.quarkus.app.socket. That would keep it consistent.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371899228", "createdAt": "2020-01-28T16:07:47Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA3Njk0OQ==", "bodyText": "@cescoffier  I went ahead and made these changes.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r372076949", "createdAt": "2020-01-28T21:48:18Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -35,7 +35,7 @@\n      * The HTTP host\n      */\n     @ConfigItem(defaultValue = \"0.0.0.0\")\n-    public String host;\n+    public Optional<String> host;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA3OTkzMA=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAyNjk4OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNjoxM1rOFh47dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNTo0NToxNlrOFiqAbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDA1Mg==", "bodyText": "Any reason to set the name? The name you use are the default ones.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080052", "createdAt": "2020-01-27T06:36:13Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port (linux/macOs native transport only)\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg4NDE0MA==", "bodyText": "You're right. I'll fix this.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371884140", "createdAt": "2020-01-28T15:45:16Z", "author": {"login": "pcasaes"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/HttpConfiguration.java", "diffHunk": "@@ -96,6 +96,36 @@\n     @ConfigItem(name = \"auth.session.encryption-key\")\n     public Optional<String> encryptionKey;\n \n+    /**\n+     * Enable socket reuse port (linux/macOs native transport only)\n+     */\n+    @ConfigItem(defaultValue = \"false\", name = \"so-reuse-port\")\n+    public boolean soReusePort;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDA1Mg=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAyODUyOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNzoxNFrOFh48Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNzoxNFrOFh48Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDI1NQ==", "bodyText": "no need for get if you remove the optional.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080255", "createdAt": "2020-01-27T06:37:14Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -420,9 +447,13 @@ private static HttpServerOptions createSslOptions(HttpConfiguration httpConfigur\n             }\n         }\n         serverOptions.setSsl(true);\n-        serverOptions.setHost(httpConfiguration.host);\n+        serverOptions.setHost(httpConfiguration.host.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAyODg3OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNzoyOVrOFh48cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozNzoyOVrOFh48cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDMwNA==", "bodyText": "cannot be false, it has a default value.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080304", "createdAt": "2020-01-27T06:37:29Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -345,6 +368,10 @@ public void handle(AsyncResult<Void> event) {\n      */\n     private static HttpServerOptions createSslOptions(HttpConfiguration httpConfiguration, LaunchMode launchMode)\n             throws IOException {\n+        if (!httpConfiguration.host.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAzMDMyOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozODoxNFrOFh49KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozOTozNlrOFh4-Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDQ4OQ==", "bodyText": "cannot be false. It has a default value.\nIn addition, the caller need to be aware of the possibility to get null.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080489", "createdAt": "2020-01-27T06:38:14Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -497,13 +528,33 @@ private static String findKeystoreFileType(Path storePath) {\n \n     private static HttpServerOptions createHttpServerOptions(HttpConfiguration httpConfiguration,\n             LaunchMode launchMode, String websocketSubProtocols) {\n+        if (!httpConfiguration.host.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDcxNA==", "bodyText": "It has a null-check, so it's ok, but it can still never be false.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080714", "createdAt": "2020-01-27T06:39:36Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -497,13 +528,33 @@ private static String findKeystoreFileType(Path storePath) {\n \n     private static HttpServerOptions createHttpServerOptions(HttpConfiguration httpConfiguration,\n             LaunchMode launchMode, String websocketSubProtocols) {\n+        if (!httpConfiguration.host.isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDQ4OQ=="}, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NDAzMDY4OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozODoyOFrOFh49Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwNjozODoyOFrOFh49Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDUzNQ==", "bodyText": "no need for get if you remove the optional.", "url": "https://github.com/quarkusio/quarkus/pull/6670#discussion_r371080535", "createdAt": "2020-01-27T06:38:28Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/VertxHttpRecorder.java", "diffHunk": "@@ -497,13 +528,33 @@ private static String findKeystoreFileType(Path storePath) {\n \n     private static HttpServerOptions createHttpServerOptions(HttpConfiguration httpConfiguration,\n             LaunchMode launchMode, String websocketSubProtocols) {\n+        if (!httpConfiguration.host.isPresent()) {\n+            return null;\n+        }\n         // TODO other config properties\n         HttpServerOptions options = new HttpServerOptions();\n-        options.setHost(httpConfiguration.host);\n+        options.setHost(httpConfiguration.host.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6677d349aad152c530ce8b6ac734db6469a0b56"}, "originalPosition": 102}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1242, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}