{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMzQzMDEy", "number": 12712, "title": "CI caches adjustments", "bodyText": "We use to use a hash of the BOM as the cache key and I think it's too aggressive.\nWith this PR, we only refresh the cache monthly, which should be good enough.\nI also enabled the cache for the snapshots deployment action.", "createdAt": "2020-10-14T12:38:21Z", "url": "https://github.com/quarkusio/quarkus/pull/12712", "merged": true, "mergeCommit": {"oid": "4f3230551274827d178be6bc1704d2a1ceb41e9e"}, "closed": true, "closedAt": "2020-10-14T20:23:01Z", "author": {"login": "gsmet"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdScZdEgH2gAyNTAzMzQzMDEyOmFmMTJhNjc2NDU2OWFkM2JmMjk2MjM3MjljYWVkNmZjOTUzOWQyY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSeQZYAFqTUwODQyMzcxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af12a6764569ad3bf29623729caed6fc9539d2cd", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/af12a6764569ad3bf29623729caed6fc9539d2cd", "committedDate": "2020-10-14T12:33:01Z", "message": "Only refresh the CI cache monthly\n\nWe used to hash the BOM but it's really suboptimal with Dependabot\nupgrading the BOM one dependency at a time.\n\nWe now only refresh the cache monthly. It should be good enough\nto avoid exponential growth while using the cache much more often."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db", "committedDate": "2020-10-14T12:35:57Z", "message": "Use a Maven cache for snapshots deployment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Mzc1MDEz", "url": "https://github.com/quarkusio/quarkus/pull/12712#pullrequestreview-508375013", "createdAt": "2020-10-14T13:56:53Z", "commit": {"oid": "86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzo1Njo1M1rOHhUZHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzo1Njo1M1rOHhUZHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY5OTE2Ng==", "bodyText": "I think we can move back to actions/cache@v2 since we're not using the restore-keys and restore-only keys anymore", "url": "https://github.com/quarkusio/quarkus/pull/12712#discussion_r504699166", "createdAt": "2020-10-14T13:56:53Z", "author": {"login": "gastaldi"}, "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -69,19 +69,18 @@ jobs:\n         uses: joschi/setup-jdk@68381f2c0646f942f70b69f8e81fe10e1ed5d293\n         with:\n           java-version: 11\n-      - name: Compute cache restore key\n-        # Always recompute on a push so that the maven repo doesnt grow indefinitely with old versions\n+      - name: Get Date\n+        id: get-date\n         run: |\n-          if ${{ github.event_name == 'pull_request' }}; then echo \"::set-env name=COMPUTED_RESTORE_KEY::q2maven-\"; fi\n+          echo \"::set-output name=date::$(/bin/date -u \"+%Y-%m\")\"\n+        shell: bash\n       - name: Cache Maven Repository\n         id: cache-maven\n         uses: n1hility/cache@v2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "292e9764aeb53d01f4547b4e31c76504faf0931a", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/292e9764aeb53d01f4547b4e31c76504faf0931a", "committedDate": "2020-10-14T14:10:59Z", "message": "Go back to the official actions/cache@v2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NDIzNzE2", "url": "https://github.com/quarkusio/quarkus/pull/12712#pullrequestreview-508423716", "createdAt": "2020-10-14T14:42:56Z", "commit": {"oid": "292e9764aeb53d01f4547b4e31c76504faf0931a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1791, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}