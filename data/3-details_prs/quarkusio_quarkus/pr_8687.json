{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1OTI3OTk2", "number": 8687, "title": "Resteasy: do not use Jandex's ClassInfo in a Set", "bodyText": "since it implements neither equals() nor hashCode()", "createdAt": "2020-04-20T09:05:28Z", "url": "https://github.com/quarkusio/quarkus/pull/8687", "merged": true, "mergeCommit": {"oid": "9468248e9a495c8b3712e488681ce0e03ee3e509"}, "closed": true, "closedAt": "2020-04-22T08:07:09Z", "author": {"login": "aloubyansky"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZbT46gH2gAyNDA1OTI3OTk2OmRkNGRlMjVlM2EzZmRmNDIwNzk5OTUxODgyNGQxMjk2MTViNDZmMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaDs6UgFqTM5Nzk0MjY4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dd4de25e3a3fdf4207999518824d129615b46f38", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/dd4de25e3a3fdf4207999518824d129615b46f38", "committedDate": "2020-04-20T09:03:21Z", "message": "Resteasy: do not use Jandex's ClassInfo in a Set, since it implements neither equals() nor hashCode()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MzE4ODM0", "url": "https://github.com/quarkusio/quarkus/pull/8687#pullrequestreview-396318834", "createdAt": "2020-04-20T10:11:11Z", "commit": {"oid": "dd4de25e3a3fdf4207999518824d129615b46f38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxMToxMVrOGINLnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxMToxMVrOGINLnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI1Nzc1Nw==", "bodyText": "Shouldn't these be outside of the if (!withoutDefaultCtor.containsKey(clazz.name())) check?", "url": "https://github.com/quarkusio/quarkus/pull/8687#discussion_r411257757", "createdAt": "2020-04-20T10:11:11Z", "author": {"login": "geoand"}, "path": "extensions/resteasy-server-common/deployment/src/main/java/io/quarkus/resteasy/server/common/deployment/ResteasyServerCommonProcessor.java", "diffHunk": "@@ -229,19 +229,21 @@ public void build(\n \n         Map<DotName, ClassInfo> scannedResources = new HashMap<>();\n         Set<DotName> pathInterfaces = new HashSet<>();\n-        Set<ClassInfo> withoutDefaultCtor = new HashSet<>();\n+        Map<DotName, ClassInfo> withoutDefaultCtor = new HashMap<>();\n         for (AnnotationInstance annotation : allPaths) {\n             if (annotation.target().kind() == AnnotationTarget.Kind.CLASS) {\n                 ClassInfo clazz = annotation.target().asClass();\n                 if (!Modifier.isInterface(clazz.flags())) {\n-                    String className = clazz.name().toString();\n-                    if (!additionalPaths.contains(annotation)) { // scanned resources only contains real JAX-RS resources\n-                        scannedResources.putIfAbsent(clazz.name(), clazz);\n-                    }\n-                    reflectiveClass.produce(new ReflectiveClassBuildItem(true, true, className));\n+                    if (!withoutDefaultCtor.containsKey(clazz.name())) {\n+                        String className = clazz.name().toString();\n+                        if (!additionalPaths.contains(annotation)) { // scanned resources only contains real JAX-RS resources\n+                            scannedResources.putIfAbsent(clazz.name(), clazz);\n+                        }\n+                        reflectiveClass.produce(new ReflectiveClassBuildItem(true, true, className));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4de25e3a3fdf4207999518824d129615b46f38"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTQyNjgx", "url": "https://github.com/quarkusio/quarkus/pull/8687#pullrequestreview-397942681", "createdAt": "2020-04-22T08:06:53Z", "commit": {"oid": "dd4de25e3a3fdf4207999518824d129615b46f38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4445, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}