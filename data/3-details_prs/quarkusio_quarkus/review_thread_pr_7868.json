{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NDAwNTUx", "number": 7868, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxODo1NToyMFrODoEe_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODoxNjo1OVrODoOfjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzQzMTAxOnYy", "diffSide": "RIGHT", "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxODo1NToyMFrOF2bDzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODoyMjoxM1rOF2pjpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMDc2Ng==", "bodyText": "Maybe we should also break reactive mongo panache compatibility, by returning a Uni<InsertOneResult> here?\nBut we should at least try to be consistent between reactive mongo and reactive panache mongo.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392610766", "createdAt": "2020-03-14T18:55:20Z", "author": {"login": "Postremus"}, "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "diffHunk": "@@ -217,11 +216,11 @@ public static ReactiveMongoDatabase mongoDatabase(Class<?> entityClass) {\n     }\n \n     private static Uni<Void> persist(ReactiveMongoCollection collection, Object entity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY2NjQ4Mw==", "bodyText": "@Postremus we try to avoid returning mongodb specific objects inside Panache.\nUpdate and delete didn't return UpdateResult nor DeleteResult so I prefer to keep void here.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392666483", "createdAt": "2020-03-15T11:55:15Z", "author": {"login": "loicmathieu"}, "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "diffHunk": "@@ -217,11 +216,11 @@ public static ReactiveMongoDatabase mongoDatabase(Class<?> entityClass) {\n     }\n \n     private static Uni<Void> persist(ReactiveMongoCollection collection, Object entity) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMDc2Ng=="}, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0ODI5Mg==", "bodyText": "Not sure if it's possible, but maybe we could return the updated entity?", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392848292", "createdAt": "2020-03-16T08:22:13Z", "author": {"login": "cescoffier"}, "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "diffHunk": "@@ -217,11 +216,11 @@ public static ReactiveMongoDatabase mongoDatabase(Class<?> entityClass) {\n     }\n \n     private static Uni<Void> persist(ReactiveMongoCollection collection, Object entity) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMDc2Ng=="}, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTA3MDg2OnYy", "diffSide": "RIGHT", "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/ReactiveMongoCollection.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODoxNjo1OVrOF2pa5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMDozMzo1N1rOF2t62Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0NjA1NA==", "bodyText": "I'm not sure if this should be considered as a breaking change.\nInitially, it only contained Document, now it can be any type.\nFirst I would use TDocument as in the driver to indicate that it's not any type, but must be somehow a document. The lack of constraint in the driver is a bit odd.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392846054", "createdAt": "2020-03-16T08:16:59Z", "author": {"login": "cescoffier"}, "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/ReactiveMongoCollection.java", "diffHunk": "@@ -478,7 +502,7 @@\n      * @param pipeline the aggregate pipeline\n      * @return a stream containing the result of the aggregation operation\n      */\n-    AggregatePublisher<Document> aggregateAsPublisher(List<? extends Bson> pipeline);\n+    AggregatePublisher<T> aggregateAsPublisher(List<? extends Bson> pipeline);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjkxOTc2OQ==", "bodyText": "@cescoffier TDocument means any type T that can be converted to a document. I agree this is a bit odd as it didn't convey any constraint. As we register the Pojo Codec, almost any type can be converted automatically (except for some deep generic types). So maybe T is OK.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392919769", "createdAt": "2020-03-16T10:33:57Z", "author": {"login": "loicmathieu"}, "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/ReactiveMongoCollection.java", "diffHunk": "@@ -478,7 +502,7 @@\n      * @param pipeline the aggregate pipeline\n      * @return a stream containing the result of the aggregation operation\n      */\n-    AggregatePublisher<Document> aggregateAsPublisher(List<? extends Bson> pipeline);\n+    AggregatePublisher<T> aggregateAsPublisher(List<? extends Bson> pipeline);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0NjA1NA=="}, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4657, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}