{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5OTQ3MTIz", "number": 7921, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwOTo0MDoyN1rODpCNUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwOTo0MDoyN1rODpCNUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MzU0Mzg0OnYy", "diffSide": "RIGHT", "path": "extensions/infinispan-embedded/runtime/pom.xml", "isResolved": false, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwOTo0MDoyN1rOF39AnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzoyNDozMFrOF4Pa-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA==", "bodyText": "Could you elaborate why do you call this a hack @wburns ?", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394215580", "createdAt": "2020-03-18T09:40:27Z", "author": {"login": "anistor"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI3MjE0MA==", "bodyText": "I'd rather ask why aren't we importing the quarkus-smallrye-metrics module here instead?", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394272140", "createdAt": "2020-03-18T11:17:41Z", "author": {"login": "jmartisk"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMxMjA4Nw==", "bodyText": "Could you elaborate why do you call this a hack @wburns ?\n\nIt isn't anymore, I forgot to remove the comment is all.\n\nI'd rather ask why aren't we importing the quarkus-smallrye-metrics module here instead?\n\nBut I can try this instead and see if it still works. Either way I can make a simple PR here in just a bit.", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394312087", "createdAt": "2020-03-18T12:33:54Z", "author": {"login": "wburns"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMxMjg1NA==", "bodyText": "For me, it depends if you need the API or an implementation.\nIf you just need the API, I wouldn't make the implementation mandatory.\n@jmartisk WDYT?", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394312854", "createdAt": "2020-03-18T12:35:23Z", "author": {"login": "gsmet"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMyNzc5Nw==", "bodyText": "AFAIK the SmallRye Metrics implementation is mandatory for Infinispan to be able to run (ideally it should be able to run without metrics dependency at all if metrics are disabled, but that's not the case right now)", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394327797", "createdAt": "2020-03-18T13:01:23Z", "author": {"login": "jmartisk"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNDAxMA==", "bodyText": "I created #7935 to remove the comment. Let me know if I should change the dependency though.", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394334010", "createdAt": "2020-03-18T13:11:30Z", "author": {"login": "wburns"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MTkwNQ==", "bodyText": "Other extensions that make use of Metrics declare the quarkus-smallrye-metrics dependency in their runtime module, so I'd vote for yes", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394341905", "createdAt": "2020-03-18T13:23:56Z", "author": {"login": "jmartisk"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MjY0Mg==", "bodyText": "Ah ah, I missed the smallrye-metrics dependency just above. So yes, we need the extension to be used.", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394342642", "createdAt": "2020-03-18T13:25:10Z", "author": {"login": "gsmet"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUxNzI0MQ==", "bodyText": "AFAIK the SmallRye Metrics implementation is mandatory for Infinispan to be able to run (ideally it should be able to run without metrics dependency at all if metrics are disabled, but that's not the case right now)\n\nNow (10.1.5.final) it should be able to work without Smallrye metrics being present in classpath at runtime. It's truly optional.", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394517241", "createdAt": "2020-03-18T17:24:30Z", "author": {"login": "anistor"}, "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, "originalCommit": {"oid": "40494306fad7956ee070b578303a71953306dff6"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4701, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}