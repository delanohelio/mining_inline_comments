{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5ODcxNTc0", "number": 7427, "title": "Add Gradle support in multi-stage docker build for native images", "bodyText": "quarkusio/quarkus-images#54 has added Gradle into the yaml files.  This PR is just to update the docs.\nFixes #6513", "createdAt": "2020-02-25T23:22:20Z", "url": "https://github.com/quarkusio/quarkus/pull/7427", "merged": true, "mergeCommit": {"oid": "b34b54203c98ff3dca87461fd0571320d699d721"}, "closed": true, "closedAt": "2020-10-12T09:54:25Z", "author": {"login": "fmhwong"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIbq4WgFqTM2NTY5NTI3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRw7bRAFqTUwNjQ3MDM1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1Njk1Mjcz", "url": "https://github.com/quarkusio/quarkus/pull/7427#pullrequestreview-365695273", "createdAt": "2020-02-27T13:51:44Z", "commit": {"oid": "5082d8552167adb81b23e372a481e3cad4818335"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzo1MTo0NFrOFvS8Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzo1MTo0NFrOFvS8Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEzNzcyNg==", "bodyText": "I am not sure we upgraded to GraalVM 20 already", "url": "https://github.com/quarkusio/quarkus/pull/7427#discussion_r385137726", "createdAt": "2020-02-27T13:51:44Z", "author": {"login": "gastaldi"}, "path": "build-parent/pom.xml", "diffHunk": "@@ -32,7 +32,7 @@\n         <!-- These properties are needed in order for them to be resolvable by the documentation -->\n         <!-- The Graal version we suggest using in documentation - as that's\n            what we work with by self downloading it: -->\n-        <graal-sdk.version-for-documentation>19.3.1</graal-sdk.version-for-documentation>\n+        <graal-sdk.version-for-documentation>20.0.0</graal-sdk.version-for-documentation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5082d8552167adb81b23e372a481e3cad4818335"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NDQyODQ5", "url": "https://github.com/quarkusio/quarkus/pull/7427#pullrequestreview-369442849", "createdAt": "2020-03-05T10:12:32Z", "commit": {"oid": "5082d8552167adb81b23e372a481e3cad4818335"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDoxMjozMlrOFyNlaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDoxNDoxNVrOFyNo1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NTY4OQ==", "bodyText": "We need to go back to 19.3.1 here.", "url": "https://github.com/quarkusio/quarkus/pull/7427#discussion_r388195689", "createdAt": "2020-03-05T10:12:32Z", "author": {"login": "gsmet"}, "path": "build-parent/pom.xml", "diffHunk": "@@ -32,7 +32,7 @@\n         <!-- These properties are needed in order for them to be resolvable by the documentation -->\n         <!-- The Graal version we suggest using in documentation - as that's\n            what we work with by self downloading it: -->\n-        <graal-sdk.version-for-documentation>19.3.1</graal-sdk.version-for-documentation>\n+        <graal-sdk.version-for-documentation>20.0.0</graal-sdk.version-for-documentation>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEzNzcyNg=="}, "originalCommit": {"oid": "5082d8552167adb81b23e372a481e3cad4818335"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NjU2Nw==", "bodyText": "This needs a bit of rewording IMHO because the getting started project is a Maven one. So it makes no sense putting the Gradle one there.\nI would put that sentence just after the Maven example. And then have something like \"If you are using Gradle in your project, you can use this sample Dockerfile:\"", "url": "https://github.com/quarkusio/quarkus/pull/7427#discussion_r388196567", "createdAt": "2020-03-05T10:14:15Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -364,8 +365,30 @@ EXPOSE 8080\n CMD [\"./application\", \"-Dquarkus.http.host=0.0.0.0\"]\n ----\n \n+Sample Dockerfile for building with Gradle:\n+[source,dockerfile,subs=attributes+]\n+----\n+## Stage 1 : build with maven builder image with native capabilities\n+FROM quay.io/quarkus/centos-quarkus-maven:{graalvm-version}-java8 AS build\n+COPY src /usr/src/app/src\n+COPY build.gradle /usr/src/app\n+COPY settings.gradle /usr/src/app\n+COPY gradle.properties /usr/src/app\n+USER root\n+RUN chown -R quarkus /usr/src/app\n+USER quarkus\n+RUN gradle -b /usr/src/app/build.gradle clean buildNative\n+\n+## Stage 2 : create the docker final image\n+FROM registry.access.redhat.com/ubi8/ubi-minimal\n+WORKDIR /work/\n+COPY --from=build /usr/src/app/build/*-runner /work/application\n+RUN chmod 775 /work\n+EXPOSE 8080\n+CMD [\"./application\", \"-Dquarkus.http.host=0.0.0.0\"]\n+----\n \n-Save this file in `src/main/docker/Dockerfile.multistage` as it is not included in the getting started quickstart.\n+Pick one of the above Dockerfile samples and save it in `src/main/docker/Dockerfile.multistage` as it is not included in the getting started quickstart.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5082d8552167adb81b23e372a481e3cad4818335"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64625508fe738c69d390a3244dccb2049c598273", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/quarkusio/quarkus/commit/64625508fe738c69d390a3244dccb2049c598273", "committedDate": "2020-03-07T00:29:19Z", "message": "Revise Gralde sample instruction"}, "afterCommit": {"oid": "532ed201f2972c3cc1b315393fec5aea929e5125", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/quarkusio/quarkus/commit/532ed201f2972c3cc1b315393fec5aea929e5125", "committedDate": "2020-03-07T00:32:34Z", "message": "Add Gradle support in doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b32d45ecafbbffdfae0080806f4aef967c873be", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/quarkusio/quarkus/commit/1b32d45ecafbbffdfae0080806f4aef967c873be", "committedDate": "2020-03-07T00:36:17Z", "message": "Add Gradle support in doc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "532ed201f2972c3cc1b315393fec5aea929e5125", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/quarkusio/quarkus/commit/532ed201f2972c3cc1b315393fec5aea929e5125", "committedDate": "2020-03-07T00:32:34Z", "message": "Add Gradle support in doc"}, "afterCommit": {"oid": "1b32d45ecafbbffdfae0080806f4aef967c873be", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/quarkusio/quarkus/commit/1b32d45ecafbbffdfae0080806f4aef967c873be", "committedDate": "2020-03-07T00:36:17Z", "message": "Add Gradle support in doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDcwMzU3", "url": "https://github.com/quarkusio/quarkus/pull/7427#pullrequestreview-506470357", "createdAt": "2020-10-12T09:54:18Z", "commit": {"oid": "1b32d45ecafbbffdfae0080806f4aef967c873be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4014, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}