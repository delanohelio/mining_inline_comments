{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MTIzMjg5", "number": 7666, "title": "Polish container image extensions and doc", "bodyText": "", "createdAt": "2020-03-07T09:01:24Z", "url": "https://github.com/quarkusio/quarkus/pull/7666", "merged": true, "mergeCommit": {"oid": "8addc0d705e239b86d4cd2e53b71764e023ace32"}, "closed": true, "closedAt": "2020-03-09T12:30:35Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLSdUjAFqTM3MDczNzUxNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL9GXugFqTM3MTEyMjE2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzM3NTE2", "url": "https://github.com/quarkusio/quarkus/pull/7666#pullrequestreview-370737516", "createdAt": "2020-03-07T10:49:33Z", "commit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMDo0OTozM1rOFzNreQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMDo0OTozM1rOFzNreQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NTgxNw==", "bodyText": "Should we link to each extension's section?", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389245817", "createdAt": "2020-03-07T10:49:33Z", "author": {"login": "machi1990"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -9,16 +9,16 @@ include::./attributes.adoc[]\n \n Quarkus provides extensions for building (and pushing) container images. Currently it supports:\n \n-- jib\n-- docker\n-- s2i\n+- JIB\n+- Docker\n+- S2I", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzM3Njk4", "url": "https://github.com/quarkusio/quarkus/pull/7666#pullrequestreview-370737698", "createdAt": "2020-03-07T10:54:39Z", "commit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMDo1NDozOVrOFzNsgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMDo1NzowMVrOFzNtFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjA4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            mvn clean package -Dquarkus.container-image.push=true\n          \n          \n            \n            ./mvnw clean package -Dquarkus.container-image.push=true", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389246080", "createdAt": "2020-03-07T10:54:39Z", "author": {"login": "machi1990"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -69,69 +72,46 @@ The creation of such objects is being taken care of by the Quarkus kubernetes ex\n \n == Building\n \n-To build a container image for your project, you just need to specify `quarkus.container-image.build=true` either to the `application.properties` or as a system property.\n+To build a container image for your project, `quarkus.container-image.build=true` needs to be set using any of the ways that Quarkus supports.\n \n [source, subs=attributes+]\n ----\n mvn clean package -Dquarkus.container-image.build=true\n ----\n \n-Setting the environment variable `QUARKUS_CONTAINER_IMAGE_EXECUTION` to `build` can be used instead of the system propery.\n-\n == Pushing\n \n-If the execution is set to `push` then after the build, the image will also be pushed to an image registry.\n-The registry can be specified using `quarkus.container-image.registry` and will default to `docker.io`.\n+To build a container image for your project, `quarkus.container-image.push=true` needs to be set using any of the ways that Quarkus supports.\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.push=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjEzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            log.info(\"No container image registry was set, so 'docker.io' will be used\");\n          \n          \n            \n                            log.info(\"No container image registry was set, defaulting to 'docker.io' \");", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389246134", "createdAt": "2020-03-07T10:55:36Z", "author": {"login": "machi1990"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -135,6 +135,9 @@ private Containerizer createContainerizer(ContainerImageConfig containerImageCon\n         ImageReference imageReference = getImageReference(containerImageConfig, applicationInfo);\n \n         if (pushRequested || containerImageConfig.push) {\n+            if (!containerImageConfig.registry.isPresent()) {\n+                log.info(\"No container image registry was set, so 'docker.io' will be used\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjE3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            log.info(\"No container image registry was set, so 'docker.io' will be used\");\n          \n          \n            \n                            log.info(\"No container image registry was set, defaulting to 'docker.io'\");", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389246172", "createdAt": "2020-03-07T10:55:59Z", "author": {"login": "machi1990"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -118,6 +118,9 @@ private void createContainerImage(ContainerImageConfig containerImageConfig, Doc\n         log.infof(\"Pushed container image %s (%s)\\n\", image, reader.getImageId());\n \n         if (pushRequested || containerImageConfig.push) {\n+            if (!containerImageConfig.registry.isPresent()) {\n+                log.info(\"No container image registry was set, so 'docker.io' will be used\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjIzMA==", "bodyText": "We can use the wrapper in the Pushing section too, https://github.com/quarkusio/quarkus/blob/f16f9c9e208ab7d127d8851e8ac54633cc7df857/docs/src/main/asciidoc/container-image.adoc#pushing", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389246230", "createdAt": "2020-03-07T10:57:01Z", "author": {"login": "machi1990"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -69,69 +72,46 @@ The creation of such objects is being taken care of by the Quarkus kubernetes ex\n \n == Building\n \n-To build a container image for your project, you just need to specify `quarkus.container-image.build=true` either to the `application.properties` or as a system property.\n+To build a container image for your project, `quarkus.container-image.build=true` needs to be set using any of the ways that Quarkus supports.\n \n [source, subs=attributes+]\n ----\n mvn clean package -Dquarkus.container-image.build=true\n ----\n \n-Setting the environment variable `QUARKUS_CONTAINER_IMAGE_EXECUTION` to `build` can be used instead of the system propery.\n-\n == Pushing\n \n-If the execution is set to `push` then after the build, the image will also be pushed to an image registry.\n-The registry can be specified using `quarkus.container-image.registry` and will default to `docker.io`.\n+To build a container image for your project, `quarkus.container-image.push=true` needs to be set using any of the ways that Quarkus supports.\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.push=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjA4MA=="}, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzM5NTE2", "url": "https://github.com/quarkusio/quarkus/pull/7666#pullrequestreview-370739516", "createdAt": "2020-03-07T11:35:40Z", "commit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMTozNTo0MFrOFzN2FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMTozODowM1rOFzN2iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0ODUzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The major benefit of using Jib with Quarkus, is that all dependencies (everything found under target/lib) are cached in a different layer than the actual application making rebuilds really fast and small (when it comes to pushing).\n          \n          \n            \n            The major benefit of using Jib with Quarkus is that all dependencies (everything found under target/lib) are cached in a different layer than the actual application making rebuilds really fast and small (when it comes to pushing).", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389248533", "createdAt": "2020-03-07T11:35:40Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -9,16 +9,16 @@ include::./attributes.adoc[]\n \n Quarkus provides extensions for building (and pushing) container images. Currently it supports:\n \n-- jib\n-- docker\n-- s2i\n+- JIB\n+- Docker\n+- S2I\n \n == Container Image extensions\n \n === JIB\n \n-The extension `quarkus-container-image-jib` is powered by https://github.com/GoogleContainerTools/jib[Jib] for performing container builds.\n-The major benefit of using Jib with Quarkus, is that all dependencies (everything found under target/lib) are cached in a different layer than the actual application making rebuilds extra fast and extra small (when it comes to pushing).\n+The extension `quarkus-container-image-jib` is powered by https://github.com/GoogleContainerTools/jib[Jib] for performing container image builds.\n+The major benefit of using Jib with Quarkus, is that all dependencies (everything found under target/lib) are cached in a different layer than the actual application making rebuilds really fast and small (when it comes to pushing).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0ODU4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: If no registry is set (using `quarkus.container-image.registry`) then `docker.io` will be used by as the default.\n          \n          \n            \n            NOTE: If no registry is set (using `quarkus.container-image.registry`) then `docker.io` will be used as the default.", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389248589", "createdAt": "2020-03-07T11:36:43Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -69,69 +72,46 @@ The creation of such objects is being taken care of by the Quarkus kubernetes ex\n \n == Building\n \n-To build a container image for your project, you just need to specify `quarkus.container-image.build=true` either to the `application.properties` or as a system property.\n+To build a container image for your project, `quarkus.container-image.build=true` needs to be set using any of the ways that Quarkus supports.\n \n [source, subs=attributes+]\n ----\n mvn clean package -Dquarkus.container-image.build=true\n ----\n \n-Setting the environment variable `QUARKUS_CONTAINER_IMAGE_EXECUTION` to `build` can be used instead of the system propery.\n-\n == Pushing\n \n-If the execution is set to `push` then after the build, the image will also be pushed to an image registry.\n-The registry can be specified using `quarkus.container-image.registry` and will default to `docker.io`.\n+To build a container image for your project, `quarkus.container-image.push=true` needs to be set using any of the ways that Quarkus supports.\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.push=true\n+----\n \n+NOTE: If no registry is set (using `quarkus.container-image.registry`) then `docker.io` will be used by as the default.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0ODYxMw==", "bodyText": "I dunno if it's worth having an info for that.", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389248613", "createdAt": "2020-03-07T11:37:40Z", "author": {"login": "gsmet"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -118,6 +118,9 @@ private void createContainerImage(ContainerImageConfig containerImageConfig, Doc\n         log.infof(\"Pushed container image %s (%s)\\n\", image, reader.getImageId());\n \n         if (pushRequested || containerImageConfig.push) {\n+            if (!containerImageConfig.registry.isPresent()) {\n+                log.info(\"No container image registry was set, so 'docker.io' will be used\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NjE3Mg=="}, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0ODY0OA==", "bodyText": "If we do, please use ids for the links.", "url": "https://github.com/quarkusio/quarkus/pull/7666#discussion_r389248648", "createdAt": "2020-03-07T11:38:03Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/container-image.adoc", "diffHunk": "@@ -9,16 +9,16 @@ include::./attributes.adoc[]\n \n Quarkus provides extensions for building (and pushing) container images. Currently it supports:\n \n-- jib\n-- docker\n-- s2i\n+- JIB\n+- Docker\n+- S2I", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0NTgxNw=="}, "originalCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f16f9c9e208ab7d127d8851e8ac54633cc7df857", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/f16f9c9e208ab7d127d8851e8ac54633cc7df857", "committedDate": "2020-03-07T09:00:56Z", "message": "Polish container image extensions and doc"}, "afterCommit": {"oid": "6e846110d7c3bd3a348b704908910143fcfee2b2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6e846110d7c3bd3a348b704908910143fcfee2b2", "committedDate": "2020-03-08T15:18:21Z", "message": "Polish container image extensions and doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e55ffe064c9664e64a3c04459f33ed28324a86a2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e55ffe064c9664e64a3c04459f33ed28324a86a2", "committedDate": "2020-03-08T20:56:38Z", "message": "Polish container image extensions and doc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e846110d7c3bd3a348b704908910143fcfee2b2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6e846110d7c3bd3a348b704908910143fcfee2b2", "committedDate": "2020-03-08T15:18:21Z", "message": "Polish container image extensions and doc"}, "afterCommit": {"oid": "e55ffe064c9664e64a3c04459f33ed28324a86a2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e55ffe064c9664e64a3c04459f33ed28324a86a2", "committedDate": "2020-03-08T20:56:38Z", "message": "Polish container image extensions and doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTIyMTY0", "url": "https://github.com/quarkusio/quarkus/pull/7666#pullrequestreview-371122164", "createdAt": "2020-03-09T12:30:25Z", "commit": {"oid": "e55ffe064c9664e64a3c04459f33ed28324a86a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3961, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}