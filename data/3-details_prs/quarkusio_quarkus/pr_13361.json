{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMjE3NDM0", "number": 13361, "title": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default", "bodyText": "This is what was discussed on the mailing list.\nCommits should be reviewed separately as the first one is a cleanup commit, renaming a file.\n/cc @maxandersen @loicmathieu @geoand", "createdAt": "2020-11-18T14:17:45Z", "url": "https://github.com/quarkusio/quarkus/pull/13361", "merged": true, "mergeCommit": {"oid": "cd992fb98402a56c11afd578240428e4b97eed05"}, "closed": true, "closedAt": "2020-11-23T17:18:49Z", "author": {"login": "gsmet"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddvRBPAFqTUzMzUxMzEzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfTPmBgBqjQwMjcxMDI3OTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNTEzMTMz", "url": "https://github.com/quarkusio/quarkus/pull/13361#pullrequestreview-533513133", "createdAt": "2020-11-18T14:40:48Z", "commit": {"oid": "430d9dadae542e39e2c9199efa36c913fd33cd75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNDo0MDo0OFrOH1w_JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNDo0MDo0OFrOH1w_JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEzOTE3Mg==", "bodyText": "Shoudn't this file be inside src/test/resources instead ?", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r526139172", "createdAt": "2020-11-18T14:40:48Z", "author": {"login": "loicmathieu"}, "path": "extensions/jackson/deployment/src/main/resources/application-fail-on-unknown-properties.properties", "diffHunk": "@@ -0,0 +1 @@\n+quarkus.jackson.fail-on-unknown-properties=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "430d9dadae542e39e2c9199efa36c913fd33cd75"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "430d9dadae542e39e2c9199efa36c913fd33cd75", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/430d9dadae542e39e2c9199efa36c913fd33cd75", "committedDate": "2020-11-18T14:15:33Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}, "afterCommit": {"oid": "888157a7d239f3ebf6623ca8ede4801207c59a57", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/888157a7d239f3ebf6623ca8ede4801207c59a57", "committedDate": "2020-11-18T14:58:11Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "888157a7d239f3ebf6623ca8ede4801207c59a57", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/888157a7d239f3ebf6623ca8ede4801207c59a57", "committedDate": "2020-11-18T14:58:11Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}, "afterCommit": {"oid": "1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "committedDate": "2020-11-19T18:01:10Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08fe4a55ffbce87a3aa89769c92b75b5f740b891", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/08fe4a55ffbce87a3aa89769c92b75b5f740b891", "committedDate": "2020-11-22T18:13:46Z", "message": "Move ObjectMapperProducer to runtime package as it's not API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "committedDate": "2020-11-19T18:01:10Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}, "afterCommit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "committedDate": "2020-11-22T18:13:46Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzUyNDkz", "url": "https://github.com/quarkusio/quarkus/pull/13361#pullrequestreview-536352493", "createdAt": "2020-11-23T10:43:16Z", "commit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo0MzoxNlrOH4H3oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo0MzoxNlrOH4H3oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxMTIzMw==", "bodyText": "Good idea to have this first, as it allows users to override the behavior with their own customizers if need be", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r528611233", "createdAt": "2020-11-23T10:43:16Z", "author": {"login": "geoand"}, "path": "extensions/jackson/runtime/src/main/java/io/quarkus/jackson/runtime/ObjectMapperProducer.java", "diffHunk": "@@ -9,18 +9,25 @@\n import javax.enterprise.inject.Produces;\n import javax.inject.Singleton;\n \n+import com.fasterxml.jackson.databind.DeserializationFeature;\n import com.fasterxml.jackson.databind.ObjectMapper;\n \n import io.quarkus.arc.DefaultBean;\n+import io.quarkus.jackson.ObjectMapperCustomizer;\n \n @ApplicationScoped\n public class ObjectMapperProducer {\n \n     @DefaultBean\n     @Singleton\n     @Produces\n-    public ObjectMapper objectMapper(Instance<ObjectMapperCustomizer> customizers) {\n+    public ObjectMapper objectMapper(Instance<ObjectMapperCustomizer> customizers,\n+            JacksonConfigSupport jacksonConfigSupport) {\n         ObjectMapper objectMapper = new ObjectMapper();\n+        if (!jacksonConfigSupport.isFailOnUnknownProperties()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzU0MDUw", "url": "https://github.com/quarkusio/quarkus/pull/13361#pullrequestreview-536354050", "createdAt": "2020-11-23T10:45:17Z", "commit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo0NToxN1rOH4H8UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo0NToxN1rOH4H8UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxMjQzMw==", "bodyText": "You might want to add a note that this only works for the ObjectMapper configured by Quarkus and which they obtain via CDI (or use implicitly via RESTEasy etc).\nI know it should be evident, but I am sure it might come as a surprise to some users.", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r528612433", "createdAt": "2020-11-23T10:45:17Z", "author": {"login": "geoand"}, "path": "docs/src/main/asciidoc/rest-json.adoc", "diffHunk": "@@ -186,6 +186,11 @@ It will allow to narrow down the number of JAX-RS providers (which can be seen a\n \n ==== Jackson\n \n+In Quarkus, Jackson is configured to ignore the unknown properties (by disabling the `DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES` feature).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzU0NDc0", "url": "https://github.com/quarkusio/quarkus/pull/13361#pullrequestreview-536354474", "createdAt": "2020-11-23T10:45:49Z", "commit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "542cb505b37172c9c9af233412ed748ea871d481", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/542cb505b37172c9c9af233412ed748ea871d481", "committedDate": "2020-11-23T11:13:53Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "committedDate": "2020-11-22T18:13:46Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}, "afterCommit": {"oid": "542cb505b37172c9c9af233412ed748ea871d481", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/542cb505b37172c9c9af233412ed748ea871d481", "committedDate": "2020-11-23T11:13:53Z", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1403, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}