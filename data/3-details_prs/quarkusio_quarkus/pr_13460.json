{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2Nzc0MzI3", "number": 13460, "title": "Allow Prometheus annotations to be modified/omitted", "bodyText": "Prometheus recommendations have moved away from using prometheus.io/* annotations to using labels with ServiceMonitor.\nSome examples exist for configuring prometheus with automatic relabeling rules to convert annotations into labels, but those can have knock-on effects in the system.\nThis PR:\na) provides a way to disable generation of annotations altogether. Mechanisms already exist to specify custom labels, which is what ServiceMonitor prefers to work with.\nb) allows the prefix for generated annotations to be configured, which would allow re-labeling rules to be defined with less risk to other services (following the current prometheus example).\nThe defaults are set so the OOTB behavior doesn't change.", "createdAt": "2020-11-24T20:46:40Z", "url": "https://github.com/quarkusio/quarkus/pull/13460", "merged": true, "mergeCommit": {"oid": "85a1d194d49a499f13ed37915e00eb2cc448689e"}, "closed": true, "closedAt": "2020-12-03T14:38:48Z", "author": {"login": "ebullient"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfwZqvAFqTUzNzkzMjgzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiTXUyABqjQwNjM5NDEwMDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3OTMyODM0", "url": "https://github.com/quarkusio/quarkus/pull/13460#pullrequestreview-537932834", "createdAt": "2020-11-24T21:12:22Z", "commit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMToxMjoyMlrOH5VWiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMToxMjoyMlrOH5VWiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg==", "bodyText": "I'm kinda on the fence about having such a separate configuration root.\nI think it might be weird for a used that prometheus configuration would only affect Kubernetes manifests.\n@iocanel WDYT?", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r529880712", "createdAt": "2020-11-24T21:12:22Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/f13f10c003ca73edd157f07daa8b6c4e7528e24a", "committedDate": "2020-11-24T20:41:35Z", "message": "Allow Prometheus annotations to be modified/omitted"}, "afterCommit": {"oid": "bb336d06b6bc6784c0f8bcda872e2d3b34d7c257", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/bb336d06b6bc6784c0f8bcda872e2d3b34d7c257", "committedDate": "2020-11-30T21:38:12Z", "message": "Allow Prometheus annotations to be modified/omitted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb336d06b6bc6784c0f8bcda872e2d3b34d7c257", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/bb336d06b6bc6784c0f8bcda872e2d3b34d7c257", "committedDate": "2020-11-30T21:38:12Z", "message": "Allow Prometheus annotations to be modified/omitted"}, "afterCommit": {"oid": "6d628511b21c3417e63f1174f455540d2f0312d4", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/6d628511b21c3417e63f1174f455540d2f0312d4", "committedDate": "2020-12-02T03:08:02Z", "message": "Allow Prometheus annotations to be modified/omitted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNTQxMDU5", "url": "https://github.com/quarkusio/quarkus/pull/13460#pullrequestreview-542541059", "createdAt": "2020-12-02T06:52:24Z", "commit": {"oid": "6d628511b21c3417e63f1174f455540d2f0312d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b66beabbca75abcdf89cae93f3e42969ca2a548", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/4b66beabbca75abcdf89cae93f3e42969ca2a548", "committedDate": "2020-12-02T19:04:08Z", "message": "Allow Prometheus annotations to be modified/omitted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d628511b21c3417e63f1174f455540d2f0312d4", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/6d628511b21c3417e63f1174f455540d2f0312d4", "committedDate": "2020-12-02T03:08:02Z", "message": "Allow Prometheus annotations to be modified/omitted"}, "afterCommit": {"oid": "4b66beabbca75abcdf89cae93f3e42969ca2a548", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/4b66beabbca75abcdf89cae93f3e42969ca2a548", "committedDate": "2020-12-02T19:04:08Z", "message": "Allow Prometheus annotations to be modified/omitted"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1283, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}