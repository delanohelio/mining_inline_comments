{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMjcwODQz", "number": 13929, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNDozMlrOFGwx-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNToyNVrOFGwzyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjM1MDAzOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/FastBootHibernatePersistenceProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNDozMlrOIH621A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNDozMlrOIH621A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE3NTI1Mg==", "bodyText": "We try to avoid lambdas at runtime.", "url": "https://github.com/quarkusio/quarkus/pull/13929#discussion_r545175252", "createdAt": "2020-12-17T15:24:32Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/FastBootHibernatePersistenceProvider.java", "diffHunk": "@@ -176,12 +176,9 @@ private EntityManagerFactoryBuilder getEntityManagerFactoryBuilderOrNull(String\n                 injectRuntimeConfiguration(persistenceUnitName, hibernateOrmRuntimeConfig, runtimeSettingsBuilder);\n             }\n \n-            for (HibernateOrmIntegrationRuntimeInitListener listener : integrationRuntimeInitListeners\n+            for (HibernateOrmIntegrationRuntimeDescriptor descriptor : integrationRuntimeDescriptors\n                     .getOrDefault(persistenceUnitName, Collections.emptyList())) {\n-                if (listener == null) {\n-                    continue;\n-                }\n-                listener.contributeRuntimeProperties(runtimeSettingsBuilder::put);\n+                descriptor.getInitListener().ifPresent(l -> l.contributeRuntimeProperties(runtimeSettingsBuilder::put));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a4d6e065071be1e48fb1a98735c95a37cd4a846"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNjM1NDY2OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/boot/FastBootMetadataBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNToyNVrOIH65qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNToyNToyNVrOIH65qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE3NTk3OA==", "bodyText": "Same here.", "url": "https://github.com/quarkusio/quarkus/pull/13929#discussion_r545175978", "createdAt": "2020-12-17T15:25:25Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/boot/FastBootMetadataBuilder.java", "diffHunk": "@@ -319,12 +320,10 @@ public RecordedState build() {\n \n         IntegrationSettings.Builder integrationSettingsBuilder = new IntegrationSettings.Builder();\n \n-        for (HibernateOrmIntegrationStaticInitListener listener : integrationStaticInitListeners) {\n-            if (listener == null) {\n-                continue;\n-            }\n-            listener.onMetadataInitialized(fullMeta, metamodelBuilder.getBootstrapContext(),\n-                    integrationSettingsBuilder::put);\n+        for (HibernateOrmIntegrationStaticDescriptor descriptor : integrationStaticDescriptors) {\n+            descriptor.getInitListener()\n+                    .ifPresent(listener -> listener.onMetadataInitialized(fullMeta, metamodelBuilder.getBootstrapContext(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a4d6e065071be1e48fb1a98735c95a37cd4a846"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4406, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}