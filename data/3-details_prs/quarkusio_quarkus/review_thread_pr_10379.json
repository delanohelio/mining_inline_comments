{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMTM5NzM1", "number": 10379, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOToxNjozMVrOEKbovQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOToyNDo1M1rOEKbz5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mzc0MDEzOnYy", "diffSide": "RIGHT", "path": "docs/src/main/asciidoc/reactive-routes.adoc", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOToxNjozMVrOGrd0PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjo0MjozMVrOGsLG4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ==", "bodyText": "Hm, does it make sense to always produce a JSON array? It's not very consistent with Uni<String> and String return types.", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448230461", "createdAt": "2020-07-01T09:16:31Z", "author": {"login": "mkouba"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI1NDI3OQ==", "bodyText": "It the behavior used in other frameworks.\nFor raw output, use buffer.", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448254279", "createdAt": "2020-07-01T09:58:38Z", "author": {"login": "cescoffier"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI3NTQwNQ==", "bodyText": "Well, I'm talking about use cases like io.quarkus.qute.TemplateInstance.publisher().\nWRT consistency - we don't encode the String and Uni<String> return values to JSON either...", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448275405", "createdAt": "2020-07-01T10:40:15Z", "author": {"login": "mkouba"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI3NjY0MA==", "bodyText": "It the behavior used in other frameworks.\n\nWhat frameworks BWT? ;-)", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448276640", "createdAt": "2020-07-01T10:42:42Z", "author": {"login": "mkouba"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc2NTU1NQ==", "bodyText": "Spring Routes do this, I also remember that Micronaut does something similar.\nThe ideal would be to check the \"produces\" attribute from the Route annotation. However, at the moment, we generate one method per \"method\" which can have multiple Route annotations.", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448765555", "createdAt": "2020-07-02T06:00:11Z", "author": {"login": "cescoffier"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc3OTQ3MQ==", "bodyText": "Spring Routes do this...\n\nYes, it seems that they do this based on the media type.\n\nThe ideal would be to check the \"produces\" attribute from the Route annotation. However, at the moment, we generate one method per \"method\" which can have multiple Route annotations.\n\nThat would make perfect sense. But until we implement this I don't think it makes any sense to use some default (JSON) for Multi<String> but no default for Uni<String> and String.", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448779471", "createdAt": "2020-07-02T06:38:55Z", "author": {"login": "mkouba"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MjUxMg==", "bodyText": "@mkouba and I discussed it and we are going to use the same approach we use for SSE. I'm going to update the PR soon.", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448972512", "createdAt": "2020-07-02T12:42:31Z", "author": {"login": "cescoffier"}, "path": "docs/src/main/asciidoc/reactive-routes.adoc", "diffHunk": "@@ -163,6 +163,189 @@ public class SimpleRoutes {\n ----\n <1> The `path` value is used as a prefix for any route method declared on the class where `Route#path()` is used. The `produces` value is used for content-based routing for all routes where `Route#produces()` is empty.\n \n+=== Returning Unis\n+\n+In a reactive route, you can return a `Uni` directly:\n+\n+[source,java]\n+----\n+@Route(path = \"/hello\")\n+Uni<String> hello(RoutingContext context) {\n+    return Uni.createFrom().item(\"Hello world!\");\n+}\n+\n+@Route(path = \"/person\")\n+Uni<Person> getPerson(RoutingContext context) {\n+    return Uni.createFrom().item(() -> new Person(\"neo\", 12345));\n+}\n+----\n+\n+Returning `Unis` is convenient when using a reactive client:\n+\n+[source,java]\n+----\n+@Route(path = \"/mail\")\n+Uni<Void> sendEmail(RoutingContext context) {\n+    return mailer.send(...);\n+}\n+----\n+\n+The item produced by the returned `Uni` can be:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+If the returned `Uni` produces a failure (or is `null`), an HTTP 500 response is written.\n+\n+Returning a `Uni<Void>` produces a 204 response (no content).\n+\n+=== Returning results\n+\n+You can also return a result directly:\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+String helloSync(RoutingContext context) {\n+    return \"Hello world\";\n+}\n+----\n+\n+Be aware, the processing must be **non-blocking** as reactive routes are invoked on the IO Thread.\n+Otherwise, use the `blocking` attribute of the `@Route` annotation.\n+\n+The method can return:\n+\n+* a string - written into the HTTP response directly\n+* a buffer - written into the HTTP response directly\n+* an object - written into the HTTP response after having been encoded into JSON.\n+The `content-type` header is set to `application/json` if not already set.\n+\n+=== Returning Multis\n+\n+A reactive route can return a `Multi`.\n+The items are written one by one, in the response.\n+The response `Transfer-Encoding` header is set to `chunked`.\n+\n+[source, java]\n+----\n+@Route(path = \"/hello\")\n+Multi<String> hellos(RoutingContext context) {\n+    return Multi.createFrom().items(\"hello\", \"world\", \"!\");  // <1>\n+}\n+----\n+1. Produces `[\"hello\", \"world\", \"!\"]`\n+\n+The method can return:\n+\n+* a `Multi<String>` - the items are written one by one in a JSON Array.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzMDQ2MQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mzc2ODcxOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-web/deployment/src/main/java/io/quarkus/vertx/web/deployment/VertxWebProcessor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOToyNDo1M1rOGreGvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMDo0NTo1NFrOGrgvDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzNTE5OQ==", "bodyText": "+1 if a method returns something we should make the context param optional...", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448235199", "createdAt": "2020-07-01T09:24:53Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-web/deployment/src/main/java/io/quarkus/vertx/web/deployment/VertxWebProcessor.java", "diffHunk": "@@ -496,25 +473,74 @@ void implementInvoke(BeanInfo bean, MethodInfo method, ClassCreator invokerCreat\n \n         ResultHandle paramHandle;\n         MethodDescriptor methodDescriptor;\n+        String returnType = descriptor.getReturnType().name().toString();\n+\n+        // TODO Make Routing Context optional, allow injected Response and Request individually.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 215}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI3ODI4NQ==", "bodyText": "I've created #10397", "url": "https://github.com/quarkusio/quarkus/pull/10379#discussion_r448278285", "createdAt": "2020-07-01T10:45:54Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-web/deployment/src/main/java/io/quarkus/vertx/web/deployment/VertxWebProcessor.java", "diffHunk": "@@ -496,25 +473,74 @@ void implementInvoke(BeanInfo bean, MethodInfo method, ClassCreator invokerCreat\n \n         ResultHandle paramHandle;\n         MethodDescriptor methodDescriptor;\n+        String returnType = descriptor.getReturnType().name().toString();\n+\n+        // TODO Make Routing Context optional, allow injected Response and Request individually.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzNTE5OQ=="}, "originalCommit": {"oid": "00a6480706294e28269bebc93681856e7e7d90ae"}, "originalPosition": 215}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2744, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}