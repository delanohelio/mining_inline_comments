{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MDI4MTIx", "number": 10165, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMjowNlrOEHpLjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMjowNlrOEHpLjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NDUwMTkxOnYy", "diffSide": "RIGHT", "path": "extensions/spring-web/deployment/src/main/java/io/quarkus/spring/web/deployment/SpringWebProcessor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMjowNlrOGnIA_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjozNzo1MVrOGnInDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3ODk3NA==", "bodyText": "Sounds like we should fail the build instead? Thinking how confused would I be if the app started and the endpoints would not be there.", "url": "https://github.com/quarkusio/quarkus/pull/10165#discussion_r443678974", "createdAt": "2020-06-22T16:22:06Z", "author": {"login": "gastaldi"}, "path": "extensions/spring-web/deployment/src/main/java/io/quarkus/spring/web/deployment/SpringWebProcessor.java", "diffHunk": "@@ -190,6 +195,35 @@ public void accept(ResteasyDeployment resteasyDeployment) {\n         reflectiveClass.produce(new ReflectiveClassBuildItem(true, false, false, SpringResourceBuilder.class.getName()));\n     }\n \n+    /**\n+     * Make sure the controllers have the proper annotation and warn if not\n+     */\n+    private void validateControllers(BeanArchiveIndexBuildItem beanArchiveIndexBuildItem) {\n+        Collection<AnnotationInstance> annotations = beanArchiveIndexBuildItem.getIndex().getAnnotations(REQUEST_MAPPING);\n+        Set<DotName> classesWithoutRestController = new HashSet<>();\n+        for (AnnotationInstance annotation : annotations) {\n+            ClassInfo targetClass;\n+            if (annotation.target().kind() == AnnotationTarget.Kind.CLASS) {\n+                targetClass = annotation.target().asClass();\n+            } else if (annotation.target().kind() == AnnotationTarget.Kind.METHOD) {\n+                targetClass = annotation.target().asMethod().declaringClass();\n+            } else {\n+                continue;\n+            }\n+\n+            if (targetClass.classAnnotation(REST_CONTROLLER_ANNOTATION) == null) {\n+                classesWithoutRestController.add(targetClass.name());\n+            }\n+        }\n+\n+        if (!classesWithoutRestController.isEmpty()) {\n+            for (DotName dotName : classesWithoutRestController) {\n+                LOGGER.warn(\"Class '\" + dotName\n+                        + \"' uses '@RequestMapping' but was not annotated with '@RestContoller' and will therefore be ignored.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94d857325d229612a7b6887d7ad9e2f4b02d57ba"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY4ODcxNw==", "bodyText": "Yeah, we talked about that with @kameshsampath decided that a warning is best for now", "url": "https://github.com/quarkusio/quarkus/pull/10165#discussion_r443688717", "createdAt": "2020-06-22T16:37:51Z", "author": {"login": "geoand"}, "path": "extensions/spring-web/deployment/src/main/java/io/quarkus/spring/web/deployment/SpringWebProcessor.java", "diffHunk": "@@ -190,6 +195,35 @@ public void accept(ResteasyDeployment resteasyDeployment) {\n         reflectiveClass.produce(new ReflectiveClassBuildItem(true, false, false, SpringResourceBuilder.class.getName()));\n     }\n \n+    /**\n+     * Make sure the controllers have the proper annotation and warn if not\n+     */\n+    private void validateControllers(BeanArchiveIndexBuildItem beanArchiveIndexBuildItem) {\n+        Collection<AnnotationInstance> annotations = beanArchiveIndexBuildItem.getIndex().getAnnotations(REQUEST_MAPPING);\n+        Set<DotName> classesWithoutRestController = new HashSet<>();\n+        for (AnnotationInstance annotation : annotations) {\n+            ClassInfo targetClass;\n+            if (annotation.target().kind() == AnnotationTarget.Kind.CLASS) {\n+                targetClass = annotation.target().asClass();\n+            } else if (annotation.target().kind() == AnnotationTarget.Kind.METHOD) {\n+                targetClass = annotation.target().asMethod().declaringClass();\n+            } else {\n+                continue;\n+            }\n+\n+            if (targetClass.classAnnotation(REST_CONTROLLER_ANNOTATION) == null) {\n+                classesWithoutRestController.add(targetClass.name());\n+            }\n+        }\n+\n+        if (!classesWithoutRestController.isEmpty()) {\n+            for (DotName dotName : classesWithoutRestController) {\n+                LOGGER.warn(\"Class '\" + dotName\n+                        + \"' uses '@RequestMapping' but was not annotated with '@RestContoller' and will therefore be ignored.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3ODk3NA=="}, "originalCommit": {"oid": "94d857325d229612a7b6887d7ad9e2f4b02d57ba"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2804, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}