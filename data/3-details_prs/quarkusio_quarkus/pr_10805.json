{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwOTkxMjA1", "number": 10805, "title": "Add the ability to generate Kubernetes resources in dev mode", "bodyText": "Fixes: #10744\nI was initially thinking of having this disabled, but then I saw that Kubernetes manifest generation time barely affects the reload time.\nIf you think however that dev mode regeneration of the Kubernetes manifests  should be controlled by a property, I have no problem adding it.", "createdAt": "2020-07-17T10:09:28Z", "url": "https://github.com/quarkusio/quarkus/pull/10805", "merged": true, "mergeCommit": {"oid": "29873cf14b10a3618d876da9703bf6942c2b6494"}, "closed": true, "closedAt": "2020-07-22T08:06:04Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1zMbUAH2gAyNDUwOTkxMjA1Ojc0MDE0ZjM2NDI5OTUyYzVhNzBkMGQ0YjI0NGI1MDZmYzZjMTdiYjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3WOvqAFqTQ1MzA4NzEwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/74014f36429952c5a70d0d4b244b506fc6c17bb0", "committedDate": "2020-07-17T12:42:48Z", "message": "Add the ability to generate Kubernetes resources in dev mode\n\nFixes: #10744"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe9a0d7b9359d7ec4ce8569ffc005e1b5a8116a3", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/fe9a0d7b9359d7ec4ce8569ffc005e1b5a8116a3", "committedDate": "2020-07-17T10:08:58Z", "message": "Add the ability to generate Kubernetes resources in dev mode\n\nFixes: #10744"}, "afterCommit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/74014f36429952c5a70d0d4b244b506fc6c17bb0", "committedDate": "2020-07-17T12:42:48Z", "message": "Add the ability to generate Kubernetes resources in dev mode\n\nFixes: #10744"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDIxNzc5", "url": "https://github.com/quarkusio/quarkus/pull/10805#pullrequestreview-452421779", "createdAt": "2020-07-21T12:52:18Z", "commit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTMxNzk0", "url": "https://github.com/quarkusio/quarkus/pull/10805#pullrequestreview-452931794", "createdAt": "2020-07-22T01:20:20Z", "commit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMToyMDoyMVrOG1PSxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMToyMjoxMVrOG1PUwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ3ODI3OQ==", "bodyText": "Why not just ask for GeneratedFileSystemResourceBuildItem when augmenting dev mode?", "url": "https://github.com/quarkusio/quarkus/pull/10805#discussion_r458478279", "createdAt": "2020-07-22T01:20:21Z", "author": {"login": "stuartwdouglas"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/builditem/GeneratedFileSystemResourceHandledBuildItem.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package io.quarkus.deployment.builditem;\n+\n+import io.quarkus.builder.item.SimpleBuildItem;\n+\n+/**\n+ * Marker used only to ensure that the file system resources where properly written in dev-mode\n+ */\n+public final class GeneratedFileSystemResourceHandledBuildItem extends SimpleBuildItem {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ3ODc4NA==", "bodyText": "I don't think you need these changes if you remove GeneratedFileSystemResourceHandledBuildItem", "url": "https://github.com/quarkusio/quarkus/pull/10805#discussion_r458478784", "createdAt": "2020-07-22T01:22:11Z", "author": {"login": "stuartwdouglas"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/FileSystemResourcesBuildStep.java", "diffHunk": "@@ -7,22 +7,41 @@\n import java.nio.file.Path;\n import java.util.List;\n \n+import io.quarkus.deployment.IsNormal;\n import io.quarkus.deployment.annotations.BuildProducer;\n import io.quarkus.deployment.annotations.BuildStep;\n import io.quarkus.deployment.builditem.GeneratedFileSystemResourceBuildItem;\n+import io.quarkus.deployment.builditem.GeneratedFileSystemResourceHandledBuildItem;\n+import io.quarkus.deployment.builditem.LaunchModeBuildItem;\n import io.quarkus.deployment.pkg.builditem.ArtifactResultBuildItem;\n import io.quarkus.deployment.pkg.builditem.OutputTargetBuildItem;\n+import io.quarkus.runtime.LaunchMode;\n \n public class FileSystemResourcesBuildStep {\n \n-    @BuildStep\n-    public void write(OutputTargetBuildItem outputTargetBuildItem,\n+    @BuildStep(onlyIfNot = IsNormal.class)\n+    public void notNormalMode(OutputTargetBuildItem outputTargetBuildItem,\n+            LaunchModeBuildItem launchMode,\n+            List<GeneratedFileSystemResourceBuildItem> generatedFileSystemResources,\n+            BuildProducer<GeneratedFileSystemResourceHandledBuildItem> producer) {\n+        if (launchMode.getLaunchMode() == LaunchMode.DEVELOPMENT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMDg3MTAz", "url": "https://github.com/quarkusio/quarkus/pull/10805#pullrequestreview-453087103", "createdAt": "2020-07-22T08:05:56Z", "commit": {"oid": "74014f36429952c5a70d0d4b244b506fc6c17bb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1173, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}