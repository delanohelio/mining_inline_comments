{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMzA4MTg4", "number": 7441, "title": "Gradle: prefer local deps as JARs when building runnable JARs", "bodyText": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes\nFixes #7365", "createdAt": "2020-02-26T14:28:54Z", "url": "https://github.com/quarkusio/quarkus/pull/7441", "merged": true, "mergeCommit": {"oid": "91385986ae95461c550d7601cc729f4c0b18698d"}, "closed": true, "closedAt": "2020-02-28T18:17:39Z", "author": {"login": "aloubyansky"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIHo2jAFqTM2NDk0NDUxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIy-pAgBqjMwODI3MTM2ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0OTQ0NTEx", "url": "https://github.com/quarkusio/quarkus/pull/7441#pullrequestreview-364944511", "createdAt": "2020-02-26T14:31:26Z", "commit": {"oid": "60635d00274726c6b9d98fbd6b1b8d30d22ed2b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60635d00274726c6b9d98fbd6b1b8d30d22ed2b4", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/60635d00274726c6b9d98fbd6b1b8d30d22ed2b4", "committedDate": "2020-02-26T14:26:25Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes"}, "afterCommit": {"oid": "ff351a1551a0c230ebcc287d764140732aff9af2", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/ff351a1551a0c230ebcc287d764140732aff9af2", "committedDate": "2020-02-28T14:57:20Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NDgwOTMy", "url": "https://github.com/quarkusio/quarkus/pull/7441#pullrequestreview-366480932", "createdAt": "2020-02-28T15:29:31Z", "commit": {"oid": "ff351a1551a0c230ebcc287d764140732aff9af2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNToyOTozMVrOFv44QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNToyOTozMVrOFv44QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc1OTI5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertThat(Files.exists(commonLibs)).isEqualTo(true);\n          \n          \n            \n                    assertThat(commonLibs).exists();", "url": "https://github.com/quarkusio/quarkus/pull/7441#discussion_r385759297", "createdAt": "2020-02-28T15:29:31Z", "author": {"login": "gastaldi"}, "path": "devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.gradle;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+\n+import org.gradle.testkit.runner.BuildResult;\n+import org.gradle.testkit.runner.GradleRunner;\n+import org.gradle.testkit.runner.TaskOutcome;\n+\n+import org.junit.jupiter.api.Test;\n+\n+\n+public class BasicMultiModuleTest extends QuarkusGradleTestBase {\n+\n+    @Test\n+    public void testBasicMultiModuleBuild() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"basic-multi-module-project\");\n+        \n+        BuildResult build = GradleRunner.create()\n+                .forwardOutput()\n+                .withPluginClasspath()\n+                .withArguments(arguments(\":application:quarkusBuild\"))\n+                .withProjectDir(projectDir)\n+                .build();\n+        \n+        final Path commonLibs = projectDir.toPath().resolve(\"common\").resolve(\"build\").resolve(\"libs\");\n+        assertThat(Files.exists(commonLibs)).isEqualTo(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff351a1551a0c230ebcc287d764140732aff9af2"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NDk2NjEw", "url": "https://github.com/quarkusio/quarkus/pull/7441#pullrequestreview-366496610", "createdAt": "2020-02-28T15:49:40Z", "commit": {"oid": "7fa012fb4c55c0eb0dd1ee715732c1bc1a9c2587"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNTo0OTo0MFrOFv5ouw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNTo0OTo0MFrOFv5ouw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc3MTcwNw==", "bodyText": "Same as above", "url": "https://github.com/quarkusio/quarkus/pull/7441#discussion_r385771707", "createdAt": "2020-02-28T15:49:40Z", "author": {"login": "gastaldi"}, "path": "devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.gradle;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+\n+import org.gradle.testkit.runner.BuildResult;\n+import org.gradle.testkit.runner.GradleRunner;\n+import org.gradle.testkit.runner.TaskOutcome;\n+\n+import org.junit.jupiter.api.Test;\n+\n+\n+public class BasicMultiModuleTest extends QuarkusGradleTestBase {\n+\n+    @Test\n+    public void testBasicMultiModuleBuild() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"basic-multi-module-project\");\n+        \n+        BuildResult build = GradleRunner.create()\n+                .forwardOutput()\n+                .withPluginClasspath()\n+                .withArguments(arguments(\":application:quarkusBuild\"))\n+                .withProjectDir(projectDir)\n+                .build();\n+        \n+        final Path commonLibs = projectDir.toPath().resolve(\"common\").resolve(\"build\").resolve(\"libs\");\n+        assertThat(commonLibs).exists();\n+        assertThat(Files.exists(commonLibs.resolve(\"common.jar\"))).isEqualTo(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa012fb4c55c0eb0dd1ee715732c1bc1a9c2587"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fa012fb4c55c0eb0dd1ee715732c1bc1a9c2587", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/7fa012fb4c55c0eb0dd1ee715732c1bc1a9c2587", "committedDate": "2020-02-28T15:33:12Z", "message": "Update devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}, "afterCommit": {"oid": "c03b2758b807b6769b6952126280ecc825888fda", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/c03b2758b807b6769b6952126280ecc825888fda", "committedDate": "2020-02-28T16:41:46Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c03b2758b807b6769b6952126280ecc825888fda", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/c03b2758b807b6769b6952126280ecc825888fda", "committedDate": "2020-02-28T16:41:46Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}, "afterCommit": {"oid": "2917cbf1f251f501361f356ca45ce415e929c2ee", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/2917cbf1f251f501361f356ca45ce415e929c2ee", "committedDate": "2020-02-28T16:43:04Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "committedDate": "2020-02-28T17:00:49Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2917cbf1f251f501361f356ca45ce415e929c2ee", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/2917cbf1f251f501361f356ca45ce415e929c2ee", "committedDate": "2020-02-28T16:43:04Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}, "afterCommit": {"oid": "94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "committedDate": "2020-02-28T17:00:49Z", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4028, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}