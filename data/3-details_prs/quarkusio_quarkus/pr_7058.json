{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMjg2NTIw", "number": 7058, "title": "Turn a class annotated with @Startup but no scope into a bean", "bodyText": "add @ApplicationScope automatically\nresolves #7048", "createdAt": "2020-02-07T08:12:00Z", "url": "https://github.com/quarkusio/quarkus/pull/7058", "merged": true, "mergeCommit": {"oid": "44a9e2334a7570b082434781d577f7dec3103f15"}, "closed": true, "closedAt": "2020-02-07T14:07:00Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB6wO5gH2gAyMzcyMjg2NTIwOjIwNjA0MWI4MThhM2E0NjQ4NDJmZjczNzMyY2IxNTMyOGNkNzliZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB9g7fgFqTM1NTA4OTQ1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "206041b818a3a464842ff73732cb15328cd79bd9", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/206041b818a3a464842ff73732cb15328cd79bd9", "committedDate": "2020-02-07T08:07:11Z", "message": "Turn a class annotated with @Startup but no scope into a bean\n\n- add @ApplicationScope automatically\n- resolves #7048"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0OTg3NTAy", "url": "https://github.com/quarkusio/quarkus/pull/7058#pullrequestreview-354987502", "createdAt": "2020-02-07T08:13:37Z", "commit": {"oid": "206041b818a3a464842ff73732cb15328cd79bd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDg5NDUx", "url": "https://github.com/quarkusio/quarkus/pull/7058#pullrequestreview-355089451", "createdAt": "2020-02-07T11:16:41Z", "commit": {"oid": "206041b818a3a464842ff73732cb15328cd79bd9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMToxNjo0MVrOFm5-cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMToxNjo0MVrOFm5-cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM0MDA4MA==", "bodyText": "I know it's somewhat far-fetched but should we care about non-built in scopes? Users can have custom ones, or there is Transactional one already present. Both cases will pass this check and try to add yet another scope on the bean (which should later on blow up).", "url": "https://github.com/quarkusio/quarkus/pull/7058#discussion_r376340080", "createdAt": "2020-02-07T11:16:41Z", "author": {"login": "manovotn"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/StartupBuildSteps.java", "diffHunk": "@@ -45,6 +49,31 @@\n     static final MethodDescriptor CONTEXTUAL_DESTROY = MethodDescriptor.ofMethod(Contextual.class,\n             \"destroy\", void.class, Object.class, CreationalContext.class);\n \n+    private static final Logger LOGGER = Logger.getLogger(StartupBuildSteps.class);\n+\n+    @BuildStep\n+    AnnotationsTransformerBuildItem annotationTransformer() {\n+        return new AnnotationsTransformerBuildItem(new AnnotationsTransformer() {\n+\n+            @Override\n+            public boolean appliesTo(org.jboss.jandex.AnnotationTarget.Kind kind) {\n+                return kind == org.jboss.jandex.AnnotationTarget.Kind.CLASS;\n+            }\n+\n+            @Override\n+            public void transform(TransformationContext context) {\n+                if (context.isClass() && !BuiltinScope.isDeclaredOn(context.getTarget().asClass())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "206041b818a3a464842ff73732cb15328cd79bd9"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 98, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}