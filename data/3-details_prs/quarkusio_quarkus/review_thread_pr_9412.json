{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDkzMDQ1", "number": 9412, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMjo1M1rOD9ZFjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0NTo1NFrOD9ZruA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzAwNzUxOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/test/java/io/quarkus/vertx/http/runtime/devmode/JsonTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMjo1M1rOGW272w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMjo1M1rOGW272w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMTkxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testJsonarray() {\n          \n          \n            \n                public void testJsonArray() {", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426621915", "createdAt": "2020-05-18T13:22:53Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/test/java/io/quarkus/vertx/http/runtime/devmode/JsonTest.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+\n+public class JsonTest {\n+\n+    @Test\n+    public void testJsonarray() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzAwODg1OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/test/java/io/quarkus/vertx/http/runtime/devmode/JsonTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMzoxNVrOGW28uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMzoxNVrOGW28uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMjEzNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testJsonobject() {\n          \n          \n            \n                public void testJsonObject() {", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426622137", "createdAt": "2020-05-18T13:23:15Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/test/java/io/quarkus/vertx/http/runtime/devmode/JsonTest.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+\n+public class JsonTest {\n+\n+    @Test\n+    public void testJsonarray() {\n+        assertEquals(\"[\\\"foo\\\",\\\"bar\\\",[\\\"baz\\\"]]\", Json.array().add(\"foo\").add(\"bar\").add(Json.array().add(\"baz\")).build());\n+    }\n+\n+    @Test\n+    public void testJsonobject() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzAxMzE5OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/Json.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyNDoxOFrOGW2_fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyODo0N1rOGW3LJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMjg0NQ==", "bodyText": "I'm not going to review this since you said it's just copied from Weld :)", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426622845", "createdAt": "2020-05-18T13:24:18Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/Json.java", "diffHunk": "@@ -0,0 +1,344 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.ListIterator;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Objects;\n+\n+/**\n+ * A simple JSON string generator.\n+ */\n+public final class Json {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNTIyOQ==", "bodyText": "Well, it's not 1:1 copy and the fact that it's coming from Weld does not mean that it needs no review ;-)", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426625229", "createdAt": "2020-05-18T13:27:50Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/Json.java", "diffHunk": "@@ -0,0 +1,344 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.ListIterator;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Objects;\n+\n+/**\n+ * A simple JSON string generator.\n+ */\n+public final class Json {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMjg0NQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNTgyOQ==", "bodyText": "Ah, you're killing me :P", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426625829", "createdAt": "2020-05-18T13:28:47Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/Json.java", "diffHunk": "@@ -0,0 +1,344 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.ListIterator;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Objects;\n+\n+/**\n+ * A simple JSON string generator.\n+ */\n+public final class Json {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMjg0NQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzAyMTI5OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyNjoxMVrOGW3EjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzozMDo1MVrOGW3Qyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNDE0MA==", "bodyText": "Perhaps as a follow up to this, ArcContainerImpl#getBeans can return a LinkedHashSet so it can return data in the same order", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426624140", "createdAt": "2020-05-18T13:26:11Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNjIzOA==", "bodyText": "Hm, getBeans() returns a list...", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426626238", "createdAt": "2020-05-18T13:29:23Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNDE0MA=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNzI3NQ==", "bodyText": "Ah damn it, I was looking in the IDE and was looking at getBeans(String name) \ud83e\udd26", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426627275", "createdAt": "2020-05-18T13:30:51Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNDE0MA=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzAzMDI0OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyODoyM1rOGW3KDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyODo1OVrOGW3LrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNTU0OQ==", "bodyText": "We should document this capability and the options you have in the CDI guide", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426625549", "createdAt": "2020-05-18T13:28:23Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");\n+\n+                for (Iterator<InjectableBean<?>> it = beans.iterator(); it.hasNext();) {\n+                    InjectableBean<?> injectableBean = it.next();\n+                    if (kind != null && !kind.equals(injectableBean.getKind())) {\n+                        it.remove();\n+                    }\n+                    if (scopeEndsWith != null && !injectableBean.getScope().getName().endsWith(scopeEndsWith)) {\n+                        it.remove();\n+                    }\n+                    if (beanClassStartsWith != null\n+                            && !injectableBean.getBeanClass().getName().startsWith(beanClassStartsWith)) {\n+                        it.remove();\n+                    }\n+                }\n+\n+                JsonArrayBuilder array = Json.array();\n+                for (InjectableBean<?> injectableBean : beans) {\n+                    JsonObjectBuilder bean = Json.object();\n+                    bean.put(\"id\", injectableBean.getIdentifier());\n+                    bean.put(\"kind\", injectableBean.getKind().toString());\n+                    bean.put(\"generatedClass\", injectableBean.getClass().getName());\n+                    bean.put(\"beanClass\", injectableBean.getBeanClass().getName());\n+                    JsonArrayBuilder types = Json.array();\n+                    for (Type beanType : injectableBean.getTypes()) {\n+                        types.add(beanType.getTypeName());\n+                    }\n+                    bean.put(\"types\", types);\n+                    JsonArrayBuilder qualifiers = Json.array();\n+                    for (Annotation qualifier : injectableBean.getQualifiers()) {\n+                        if (qualifier.annotationType().equals(Any.class) || qualifier.annotationType().equals(Default.class)) {\n+                            qualifiers.add(\"@\" + qualifier.annotationType().getSimpleName());\n+                        } else {\n+                            qualifiers.add(qualifier.toString());\n+                        }\n+                    }\n+                    bean.put(\"qualifiers\", qualifiers);\n+                    bean.put(\"scope\", injectableBean.getScope().getName());\n+\n+                    if (injectableBean.getDeclaringBean() != null) {\n+                        bean.put(\"declaringBean\", injectableBean.getDeclaringBean().getIdentifier());\n+                    }\n+                    if (injectableBean.getName() != null) {\n+                        bean.put(\"name\", injectableBean.getName());\n+                    }\n+                    if (injectableBean.isAlternative()) {\n+                        bean.put(\"alternativePriority\", injectableBean.getAlternativePriority());\n+                    }\n+                    if (injectableBean.isDefaultBean()) {\n+                        bean.put(\"isDefault\", true);\n+                    }\n+                    array.add(bean);\n+                }\n+                ctx.response().end(array.build());\n+            }\n+        };\n+    }\n+\n+    public Handler<RoutingContext> createObserversHandler() {\n+        return new Handler<RoutingContext>() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNTk2NQ==", "bodyText": "Yeah, good idea.", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426625965", "createdAt": "2020-05-18T13:28:59Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");\n+\n+                for (Iterator<InjectableBean<?>> it = beans.iterator(); it.hasNext();) {\n+                    InjectableBean<?> injectableBean = it.next();\n+                    if (kind != null && !kind.equals(injectableBean.getKind())) {\n+                        it.remove();\n+                    }\n+                    if (scopeEndsWith != null && !injectableBean.getScope().getName().endsWith(scopeEndsWith)) {\n+                        it.remove();\n+                    }\n+                    if (beanClassStartsWith != null\n+                            && !injectableBean.getBeanClass().getName().startsWith(beanClassStartsWith)) {\n+                        it.remove();\n+                    }\n+                }\n+\n+                JsonArrayBuilder array = Json.array();\n+                for (InjectableBean<?> injectableBean : beans) {\n+                    JsonObjectBuilder bean = Json.object();\n+                    bean.put(\"id\", injectableBean.getIdentifier());\n+                    bean.put(\"kind\", injectableBean.getKind().toString());\n+                    bean.put(\"generatedClass\", injectableBean.getClass().getName());\n+                    bean.put(\"beanClass\", injectableBean.getBeanClass().getName());\n+                    JsonArrayBuilder types = Json.array();\n+                    for (Type beanType : injectableBean.getTypes()) {\n+                        types.add(beanType.getTypeName());\n+                    }\n+                    bean.put(\"types\", types);\n+                    JsonArrayBuilder qualifiers = Json.array();\n+                    for (Annotation qualifier : injectableBean.getQualifiers()) {\n+                        if (qualifier.annotationType().equals(Any.class) || qualifier.annotationType().equals(Default.class)) {\n+                            qualifiers.add(\"@\" + qualifier.annotationType().getSimpleName());\n+                        } else {\n+                            qualifiers.add(qualifier.toString());\n+                        }\n+                    }\n+                    bean.put(\"qualifiers\", qualifiers);\n+                    bean.put(\"scope\", injectableBean.getScope().getName());\n+\n+                    if (injectableBean.getDeclaringBean() != null) {\n+                        bean.put(\"declaringBean\", injectableBean.getDeclaringBean().getIdentifier());\n+                    }\n+                    if (injectableBean.getName() != null) {\n+                        bean.put(\"name\", injectableBean.getName());\n+                    }\n+                    if (injectableBean.isAlternative()) {\n+                        bean.put(\"alternativePriority\", injectableBean.getAlternativePriority());\n+                    }\n+                    if (injectableBean.isDefaultBean()) {\n+                        bean.put(\"isDefault\", true);\n+                    }\n+                    array.add(bean);\n+                }\n+                ctx.response().end(array.build());\n+            }\n+        };\n+    }\n+\n+    public Handler<RoutingContext> createObserversHandler() {\n+        return new Handler<RoutingContext>() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyNTU0OQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzA4NjU1OnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0MToyN1rOGW3smQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0MToyN1rOGW3smQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNDM5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            ctx.response().putHeader(\"Content-type\", \"application/json\");\n          \n          \n            \n                            ctx.response().putHeader(\"Content-Type\", \"application/json\");", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426634393", "createdAt": "2020-05-18T13:41:27Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzEwNTIwOnYy", "diffSide": "RIGHT", "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo0NTo1NFrOGW34iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNDozMDo1MVrOGW51qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNzQ1MQ==", "bodyText": "What is the rationale of having scope being used with endsWith  and beanClass used startsWith?", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426637451", "createdAt": "2020-05-18T13:45:54Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY1OTA0Nw==", "bodyText": "I believe that it's practical. For scopes, users will usually pass built-in scope names. So it's more convenient to specify RequestScoped rather than javax.enterprise.context.RequestScoped. Also simple names of scopes do not usually collide. For bean classes however, it's very often useful to filter beans from a specific package, i.e. beanClass=org.acme.", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426659047", "createdAt": "2020-05-18T14:16:14Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNzQ1MQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY2MTM1NA==", "bodyText": "That's fine with me, just curious. It should however be documented", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426661354", "createdAt": "2020-05-18T14:19:32Z", "author": {"login": "geoand"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNzQ1MQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY2OTQ4MQ==", "bodyText": "Sure. Just finished the docs and a test ;-).", "url": "https://github.com/quarkusio/quarkus/pull/9412#discussion_r426669481", "createdAt": "2020-05-18T14:30:51Z", "author": {"login": "mkouba"}, "path": "extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/devmode/ArcEndpointRecorder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package io.quarkus.vertx.http.runtime.devmode;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Type;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+import javax.enterprise.inject.Any;\n+import javax.enterprise.inject.Default;\n+\n+import io.quarkus.arc.InjectableBean;\n+import io.quarkus.arc.InjectableObserverMethod;\n+import io.quarkus.arc.impl.ArcContainerImpl;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonArrayBuilder;\n+import io.quarkus.vertx.http.runtime.devmode.Json.JsonObjectBuilder;\n+import io.vertx.core.Handler;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class ArcEndpointRecorder {\n+\n+    public Handler<RoutingContext> createBeansHandler() {\n+        return new Handler<RoutingContext>() {\n+\n+            @Override\n+            public void handle(RoutingContext ctx) {\n+                ctx.response().putHeader(\"Content-type\", \"application/json\");\n+\n+                ArcContainerImpl container = ArcContainerImpl.instance();\n+                List<InjectableBean<?>> beans = container.getBeans();\n+                beans.addAll(container.getInterceptors());\n+\n+                String kindParam = ctx.request().getParam(\"kind\");\n+                InjectableBean.Kind kind = kindParam != null ? InjectableBean.Kind.valueOf(kindParam) : null;\n+                String scopeEndsWith = ctx.request().getParam(\"scope\");\n+                String beanClassStartsWith = ctx.request().getParam(\"beanClass\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYzNzQ1MQ=="}, "originalCommit": {"oid": "c1c3128e9e10b991d1faced5181717446decd3d1"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3081, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}