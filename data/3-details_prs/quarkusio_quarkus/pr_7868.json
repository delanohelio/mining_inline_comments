{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NDAwNTUx", "number": 7868, "title": "Update to MongoDB Java driver 4.0.0", "bodyText": "We definitely want a note about this change in the migration guides.\nThe interface changes for reactive mongo most likely break user applications.\nSee also the mongo java driver 4.0 upgrade guide: https://mongodb.github.io/mongo-java-driver/4.0/upgrading", "createdAt": "2020-03-14T18:53:32Z", "url": "https://github.com/quarkusio/quarkus/pull/7868", "merged": true, "mergeCommit": {"oid": "de1b210753e737507b141a2729f5a5d9b68c70d1"}, "closed": true, "closedAt": "2020-03-24T11:11:06Z", "author": {"login": "Postremus"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNjRESgH2gAyMzg4NDAwNTUxOjM2NjUwYWM3NDA5YzU3OWQ5Y2JkMDc0ZmY4NDYwYjFjOWZkNGZkNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOLtrMAFqTM3NTA5MjUyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43", "author": {"user": {"login": "Postremus", "name": "Martin Panzer"}}, "url": "https://github.com/quarkusio/quarkus/commit/36650ac7409c579d9cbd074ff8460b1c9fd4fd43", "committedDate": "2020-03-14T11:32:25Z", "message": "Update to mongo java driver 4.0.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzQ2Njc4", "url": "https://github.com/quarkusio/quarkus/pull/7868#pullrequestreview-374746678", "createdAt": "2020-03-14T18:55:20Z", "commit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxODo1NToyMFrOF2bDzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxODo1NToyMFrOF2bDzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMDc2Ng==", "bodyText": "Maybe we should also break reactive mongo panache compatibility, by returning a Uni<InsertOneResult> here?\nBut we should at least try to be consistent between reactive mongo and reactive panache mongo.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392610766", "createdAt": "2020-03-14T18:55:20Z", "author": {"login": "Postremus"}, "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "diffHunk": "@@ -217,11 +216,11 @@ public static ReactiveMongoDatabase mongoDatabase(Class<?> entityClass) {\n     }\n \n     private static Uni<Void> persist(ReactiveMongoCollection collection, Object entity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTkwNjgw", "url": "https://github.com/quarkusio/quarkus/pull/7868#pullrequestreview-374990680", "createdAt": "2020-03-16T08:16:59Z", "commit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODoxNjo1OVrOF2pa5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODoyMjoxM1rOF2pjpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0NjA1NA==", "bodyText": "I'm not sure if this should be considered as a breaking change.\nInitially, it only contained Document, now it can be any type.\nFirst I would use TDocument as in the driver to indicate that it's not any type, but must be somehow a document. The lack of constraint in the driver is a bit odd.", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392846054", "createdAt": "2020-03-16T08:16:59Z", "author": {"login": "cescoffier"}, "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/ReactiveMongoCollection.java", "diffHunk": "@@ -478,7 +502,7 @@\n      * @param pipeline the aggregate pipeline\n      * @return a stream containing the result of the aggregation operation\n      */\n-    AggregatePublisher<Document> aggregateAsPublisher(List<? extends Bson> pipeline);\n+    AggregatePublisher<T> aggregateAsPublisher(List<? extends Bson> pipeline);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0ODI5Mg==", "bodyText": "Not sure if it's possible, but maybe we could return the updated entity?", "url": "https://github.com/quarkusio/quarkus/pull/7868#discussion_r392848292", "createdAt": "2020-03-16T08:22:13Z", "author": {"login": "cescoffier"}, "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/reactive/runtime/ReactiveMongoOperations.java", "diffHunk": "@@ -217,11 +216,11 @@ public static ReactiveMongoDatabase mongoDatabase(Class<?> entityClass) {\n     }\n \n     private static Uni<Void> persist(ReactiveMongoCollection collection, Object entity) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxMDc2Ng=="}, "originalCommit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MDkyNTI5", "url": "https://github.com/quarkusio/quarkus/pull/7868#pullrequestreview-375092529", "createdAt": "2020-03-16T10:39:52Z", "commit": {"oid": "36650ac7409c579d9cbd074ff8460b1c9fd4fd43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3651, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}