{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTcxNjQ1", "number": 10068, "title": "Usability improvements around Panache annotation processors", "bodyText": "Document that the jpa-modelgen processor may cause issues\nAlways transform the application\nMake fields protected to avoid silent failures if there is a problem\n\nFixes #9961", "createdAt": "2020-06-17T02:58:42Z", "url": "https://github.com/quarkusio/quarkus/pull/10068", "merged": true, "mergeCommit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4"}, "closed": true, "closedAt": "2020-06-18T12:40:52Z", "author": {"login": "stuartwdouglas"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsCsTWgFqTQzMjA2MTIwNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsF_6UgFqTQzMjE5NTQ3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDYxMjA2", "url": "https://github.com/quarkusio/quarkus/pull/10068#pullrequestreview-432061206", "createdAt": "2020-06-17T05:06:56Z", "commit": {"oid": "655e5723edf3374eedcd84a77fc329fc75e7d1a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNTowNjo1NlrOGk1xAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNTowNjo1NlrOGk1xAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI4MjgxOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            annotation processor by default. If you do this you should either create the marker file\n          \n          \n            \n            annotation processor by default. If you do this you should either create the `META-INF/panache-archive.marker` marker file", "url": "https://github.com/quarkusio/quarkus/pull/10068#discussion_r441282818", "createdAt": "2020-06-17T05:06:56Z", "author": {"login": "gastaldi"}, "path": "docs/src/main/asciidoc/hibernate-orm-panache.adoc", "diffHunk": "@@ -950,3 +950,29 @@ by the presence of the marker file `META-INF/panache-archive.marker`. Panache in\n annotation processor that will automatically create this file in archives that depend on\n Panache (even indirectly). If you have disabled annotation processors you may need to create\n this file manually in some cases.\n+\n+WARNING: If you include the jpa-modelgen annotation processor this will exclude the Panache\n+annotation processor by default. If you do this you should either create the marker file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "655e5723edf3374eedcd84a77fc329fc75e7d1a5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4", "committedDate": "2020-06-17T06:22:40Z", "message": "Usability improvements around Panache annotation processors\n\n- Document that the jpa-modelgen processor may cause issues\n- Always transform the application\n- Make fields protected to avoid silent failures if there is a problem\n\nFixes #9961"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "655e5723edf3374eedcd84a77fc329fc75e7d1a5", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/655e5723edf3374eedcd84a77fc329fc75e7d1a5", "committedDate": "2020-06-17T02:57:03Z", "message": "Usability improvements around Panache annotation processors\n\n- Document that the jpa-modelgen processor may cause issues\n- Always transform the application\n- Make fields protected to avoid silent failures if there is a problem\n\nFixes #9961"}, "afterCommit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4", "committedDate": "2020-06-17T06:22:40Z", "message": "Usability improvements around Panache annotation processors\n\n- Document that the jpa-modelgen processor may cause issues\n- Always transform the application\n- Make fields protected to avoid silent failures if there is a problem\n\nFixes #9961"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMTk1NDc1", "url": "https://github.com/quarkusio/quarkus/pull/10068#pullrequestreview-432195475", "createdAt": "2020-06-17T08:55:06Z", "commit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwODo1NTowNlrOGk8T_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwODo1NzozMFrOGk8aDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM5MDA3Ng==", "bodyText": "s/or add the quarkus-panache-common as well/or add the quarkus-panache-common APT processor as well/", "url": "https://github.com/quarkusio/quarkus/pull/10068#discussion_r441390076", "createdAt": "2020-06-17T08:55:06Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/hibernate-orm-panache.adoc", "diffHunk": "@@ -950,3 +950,29 @@ by the presence of the marker file `META-INF/panache-archive.marker`. Panache in\n annotation processor that will automatically create this file in archives that depend on\n Panache (even indirectly). If you have disabled annotation processors you may need to create\n this file manually in some cases.\n+\n+WARNING: If you include the jpa-modelgen annotation processor this will exclude the Panache\n+annotation processor by default. If you do this you should either create the marker file\n+yourself, or add the `quarkus-panache-common` as well, as shown below:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM5MTYzMQ==", "bodyText": "Why protected and not private?\nNote that this may impact the jsonb/jackson/jaxb marshaller strategy, but probably tests would expose this.", "url": "https://github.com/quarkusio/quarkus/pull/10068#discussion_r441391631", "createdAt": "2020-06-17T08:57:30Z", "author": {"login": "FroMage"}, "path": "extensions/panache/panache-common/deployment/src/main/java/io/quarkus/panache/common/deployment/PanacheEntityEnhancer.java", "diffHunk": "@@ -91,10 +91,19 @@ public PanacheEntityClassVisitor(String className, ClassVisitor outputClassVisit\n \n         @Override\n         public FieldVisitor visitField(int access, String name, String descriptor, String signature, Object value) {\n-            FieldVisitor superVisitor = super.visitField(access, name, descriptor, signature, value);\n             EntityField ef = fields.get(name);\n             if (ef == null) {\n-                return superVisitor;\n+                return super.visitField(access, name, descriptor, signature, value);\n+            }\n+            //we make the fields protected", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89f4e9e0a14dcc711d9d3d20b86f3fce4ac71d4"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4245, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}