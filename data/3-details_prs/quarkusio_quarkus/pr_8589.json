{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNzEzMTQ5", "number": 8589, "title": "Fail the build if multiple container-image extensions are available", "bodyText": "Fixes: #8584", "createdAt": "2020-04-15T11:52:37Z", "url": "https://github.com/quarkusio/quarkus/pull/8589", "merged": true, "mergeCommit": {"oid": "8e40a1fec5d6410f62425fa1b5e1163a43e54792"}, "closed": true, "closedAt": "2020-04-16T08:44:17Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX2yaugBqjMyMzUxNDcyOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYInFqAFqTM5NDQxOTUxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1392e3ae9c49bae1a346e6aa15fa8814a49bdf5b", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/1392e3ae9c49bae1a346e6aa15fa8814a49bdf5b", "committedDate": "2020-04-15T11:49:12Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}, "afterCommit": {"oid": "346074f5c6d150ff5e4c082f9abf52fe3cd74ed5", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/346074f5c6d150ff5e4c082f9abf52fe3cd74ed5", "committedDate": "2020-04-15T11:56:09Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "346074f5c6d150ff5e4c082f9abf52fe3cd74ed5", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/346074f5c6d150ff5e4c082f9abf52fe3cd74ed5", "committedDate": "2020-04-15T11:56:09Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}, "afterCommit": {"oid": "c7b1960534de8ec131ca209d92e2d0c282e7d2a9", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/c7b1960534de8ec131ca209d92e2d0c282e7d2a9", "committedDate": "2020-04-15T11:58:27Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzI5OTM5", "url": "https://github.com/quarkusio/quarkus/pull/8589#pullrequestreview-393729939", "createdAt": "2020-04-15T12:35:24Z", "commit": {"oid": "c7b1960534de8ec131ca209d92e2d0c282e7d2a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjozNToyNFrOGF3mZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjozNToyNFrOGF3mZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwNzAxNA==", "bodyText": "I don't like standard name. Can be more descriptive name picked?", "url": "https://github.com/quarkusio/quarkus/pull/8589#discussion_r408807014", "createdAt": "2020-04-15T12:35:24Z", "author": {"login": "rsvoboda"}, "path": "integration-tests/container-image/pom.xml", "diffHunk": "@@ -7,91 +7,13 @@\n     <artifactId>quarkus-integration-tests-parent</artifactId>\n     <version>999-SNAPSHOT</version>\n   </parent>\n-  <artifactId>quarkus-integration-test-container-image</artifactId>\n-  <name>Quarkus - Integration Tests - Container Image</name>\n-  <properties>\n-    <skipTests>true</skipTests>\n-  </properties>\n-  <dependencyManagement>\n-    <dependencies>\n-      <dependency>\n-        <groupId>com.google.j2objc</groupId>\n-        <artifactId>j2objc-annotations</artifactId>\n-        <version>1.3</version>\n-      </dependency>\n-    </dependencies>\n-  </dependencyManagement>\n-  <dependencies>\n-    <dependency>\n-      <groupId>io.quarkus</groupId>\n-      <artifactId>quarkus-core-deployment</artifactId>\n-      <scope>test</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>io.quarkus</groupId>\n-      <artifactId>quarkus-test-maven</artifactId>\n-      <scope>test</scope>\n-    </dependency>\n-  </dependencies>\n-  <build>\n-    <testResources>\n-      <testResource>\n-        <directory>src/it</directory>\n-        <filtering>true</filtering>\n-      </testResource>\n-    </testResources>\n-    <plugins>\n-      <plugin>\n-        <artifactId>maven-invoker-plugin</artifactId>\n-        <version>3.1.0</version>\n-        <executions>\n-          <execution>\n-            <id>integration-tests</id>\n-            <goals>\n-              <goal>install</goal>\n-              <goal>run</goal>\n-              <goal>verify</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-        <configuration>\n-          <cloneProjectsTo>${project.build.directory}/it</cloneProjectsTo>\n-          <cloneClean>true</cloneClean>\n-          <postBuildHookScript>verify</postBuildHookScript>\n-          <addTestClassPath>true</addTestClassPath>\n-          <skipInvocation>${skipTests}</skipInvocation>\n-          <streamLogs>true</streamLogs>\n-          <invokerPropertiesFile>invoker.properties</invokerPropertiesFile>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <artifactId>maven-failsafe-plugin</artifactId>\n-        <executions>\n-          <execution>\n-            <goals>\n-              <goal>integration-test</goal>\n-              <goal>verify</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-    </plugins>\n-  </build>\n \n-  <profiles>\n-    <profile>\n-      <id>container-image-docker</id>\n-      <activation>\n-        <property>\n-          <name>docker</name>\n-        </property>\n-        <os>\n-          <family>linux</family>\n-        </os>\n-      </activation>\n-      <properties>\n-        <skipTests>false</skipTests>\n-      </properties>\n-    </profile>\n-  </profiles>\n+  <artifactId>quarkus-integration-test-container-image-parent</artifactId>\n+  <name>Quarkus - Integration Tests - Container Image - Parent</name>\n+  <packaging>pom</packaging>\n+\n+  <modules>\n+    <module>invoker</module>\n+    <module>standard</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b1960534de8ec131ca209d92e2d0c282e7d2a9"}, "originalPosition": 97}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7b1960534de8ec131ca209d92e2d0c282e7d2a9", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/c7b1960534de8ec131ca209d92e2d0c282e7d2a9", "committedDate": "2020-04-15T11:58:27Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}, "afterCommit": {"oid": "2cfa7a5605229167fc6480785023b19459f62127", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2cfa7a5605229167fc6480785023b19459f62127", "committedDate": "2020-04-15T13:09:43Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7f6d5b50e154ca7514fc3098f7a8dc1317ff4bd", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/b7f6d5b50e154ca7514fc3098f7a8dc1317ff4bd", "committedDate": "2020-04-15T21:11:26Z", "message": "Add exception assertion capability to prod mode test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "274b6f5c454c5baed6d4aa8c6c59edadb6ca181e", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/274b6f5c454c5baed6d4aa8c6c59edadb6ca181e", "committedDate": "2020-04-15T21:11:26Z", "message": "Fail the build if multiple container-image extensions are available\n\nFixes: #8584"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a2b90201ee80c21f7e48af14a5e1c4120284738", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/0a2b90201ee80c21f7e48af14a5e1c4120284738", "committedDate": "2020-04-15T21:11:26Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02", "committedDate": "2020-04-15T21:11:26Z", "message": "Rename kubernetes test modules to match naming in container-image tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cfa7a5605229167fc6480785023b19459f62127", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2cfa7a5605229167fc6480785023b19459f62127", "committedDate": "2020-04-15T13:09:43Z", "message": "Introduce QuarkusProdTest module for container-image tests and add test for multiple container-image extensions"}, "afterCommit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02", "committedDate": "2020-04-15T21:11:26Z", "message": "Rename kubernetes test modules to match naming in container-image tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0Mzk5Mjcy", "url": "https://github.com/quarkusio/quarkus/pull/8589#pullrequestreview-394399272", "createdAt": "2020-04-16T08:16:38Z", "commit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NDAwMTU4", "url": "https://github.com/quarkusio/quarkus/pull/8589#pullrequestreview-394400158", "createdAt": "2020-04-16T08:17:48Z", "commit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODoxNzo0OFrOGGZ3HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODoxNzo0OFrOGGZ3HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM2ODM0OQ==", "bodyText": "Do we need to also intercept AfterAll / AfterEach? And all the other methods :-)", "url": "https://github.com/quarkusio/quarkus/pull/8589#discussion_r409368349", "createdAt": "2020-04-16T08:17:48Z", "author": {"login": "Ladicek"}, "path": "test-framework/junit5-internal/src/main/java/io/quarkus/test/QuarkusProdModeTest.java", "diffHunk": "@@ -408,6 +454,32 @@ private void ensureApplicationStartupOrFailure() throws IOException {\n         }\n     }\n \n+    @Override\n+    public void interceptBeforeAllMethod(Invocation<Void> invocation, ReflectiveInvocationContext<Method> invocationContext,\n+            ExtensionContext extensionContext) throws Throwable {\n+        doIntercept(invocation);\n+    }\n+\n+    @Override\n+    public void interceptBeforeEachMethod(Invocation<Void> invocation, ReflectiveInvocationContext<Method> invocationContext,\n+            ExtensionContext extensionContext) throws Throwable {\n+        doIntercept(invocation);\n+    }\n+\n+    @Override\n+    public void interceptTestMethod(Invocation<Void> invocation, ReflectiveInvocationContext<Method> invocationContext,\n+            ExtensionContext extensionContext) throws Throwable {\n+        doIntercept(invocation);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02"}, "originalPosition": 124}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NDAwMjk1", "url": "https://github.com/quarkusio/quarkus/pull/8589#pullrequestreview-394400295", "createdAt": "2020-04-16T08:18:00Z", "commit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NDE5NTE1", "url": "https://github.com/quarkusio/quarkus/pull/8589#pullrequestreview-394419515", "createdAt": "2020-04-16T08:42:12Z", "commit": {"oid": "9fbfbc9cac92654dd04ccce5d4cc0842aa6faa02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4593, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}