{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMzg4MjAw", "number": 13367, "title": "Support custom package in codestarts", "bodyText": "Fixes #13362", "createdAt": "2020-11-18T18:27:36Z", "url": "https://github.com/quarkusio/quarkus/pull/13367", "merged": true, "mergeCommit": {"oid": "ddd15a99563dbc595cb5a12f203d81d6ed7a806a"}, "closed": true, "closedAt": "2020-11-19T15:28:31Z", "author": {"login": "ia3andy"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd0N4iAFqTUzMzg1MDE3MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeBt6YgBqjQwMTU1MzQ5MTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzODUwMTcx", "url": "https://github.com/quarkusio/quarkus/pull/13367#pullrequestreview-533850171", "createdAt": "2020-11-18T20:30:19Z", "commit": {"oid": "471a32dbfaada7199ef7cc0f7343a7fe1d801efb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDozMDoxOVrOH2A8zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMDozMDoxOVrOH2A8zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQwMDcxOA==", "bodyText": "minor thing but I would extract the \"org.acme\" and \"org/acme\" into a constant to make it more clear its a special \"marker\"", "url": "https://github.com/quarkusio/quarkus/pull/13367#discussion_r526400718", "createdAt": "2020-11-18T20:30:19Z", "author": {"login": "maxandersen"}, "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/core/strategy/SmartPackageFileStrategyHandler.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.devtools.codestarts.core.strategy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import io.quarkus.devtools.codestarts.CodestartStructureException;\n+import io.quarkus.devtools.codestarts.core.reader.TargetFile;\n+import io.quarkus.devtools.codestarts.utils.NestedMaps;\n+\n+final class SmartPackageFileStrategyHandler implements CodestartFileStrategyHandler {\n+\n+    @Override\n+    public String name() {\n+        return \"smart-package\";\n+    }\n+\n+    @Override\n+    public void process(Path targetDirectory, String relativePath, List<TargetFile> codestartFiles, Map<String, Object> data)\n+            throws IOException {\n+        checkNotEmptyCodestartFiles(codestartFiles);\n+\n+        final Optional<String> optPackageName = NestedMaps.getValue(data, \"project.package-name\");\n+        Path targetPath;\n+        String content = codestartFiles.get(0).getContent();\n+        if (optPackageName.isPresent()) {\n+            final String packageName = optPackageName.get();\n+            final String packageNameAsDir = packageName.replace(\".\", \"/\");\n+            targetPath = targetDirectory.resolve(relativePath.replace(\"org/acme\", packageNameAsDir));\n+            content = content\n+                .replace(\"import org.acme\", \"import \" + packageName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "471a32dbfaada7199ef7cc0f7343a7fe1d801efb"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "471a32dbfaada7199ef7cc0f7343a7fe1d801efb", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/471a32dbfaada7199ef7cc0f7343a7fe1d801efb", "committedDate": "2020-11-18T18:27:00Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "c93e08149bb0a5de356b5c7512e37e88be62a6e6", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/c93e08149bb0a5de356b5c7512e37e88be62a6e6", "committedDate": "2020-11-19T08:00:14Z", "message": "Support custom package in codestarts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c93e08149bb0a5de356b5c7512e37e88be62a6e6", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/c93e08149bb0a5de356b5c7512e37e88be62a6e6", "committedDate": "2020-11-19T08:00:14Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "16d9ba4e2a35c301876c1f7f01c34913ae895c22", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/16d9ba4e2a35c301876c1f7f01c34913ae895c22", "committedDate": "2020-11-19T08:01:48Z", "message": "Support custom package in codestarts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16d9ba4e2a35c301876c1f7f01c34913ae895c22", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/16d9ba4e2a35c301876c1f7f01c34913ae895c22", "committedDate": "2020-11-19T08:01:48Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "d2f682d528942b4024a22c8821e439cc8720e482", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/d2f682d528942b4024a22c8821e439cc8720e482", "committedDate": "2020-11-19T10:44:18Z", "message": "Support custom package in codestarts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2f682d528942b4024a22c8821e439cc8720e482", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/d2f682d528942b4024a22c8821e439cc8720e482", "committedDate": "2020-11-19T10:44:18Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "a05baa7fff27bf2874a69ce253f864edd0de97af", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/a05baa7fff27bf2874a69ce253f864edd0de97af", "committedDate": "2020-11-19T10:46:03Z", "message": "Support custom package in codestarts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MjkzOTkx", "url": "https://github.com/quarkusio/quarkus/pull/13367#pullrequestreview-534293991", "createdAt": "2020-11-19T10:48:00Z", "commit": {"oid": "d2f682d528942b4024a22c8821e439cc8720e482"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a05baa7fff27bf2874a69ce253f864edd0de97af", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/a05baa7fff27bf2874a69ce253f864edd0de97af", "committedDate": "2020-11-19T10:46:03Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "7159494c9dd65b2c423a49e3bacc265747ea1b57", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/7159494c9dd65b2c423a49e3bacc265747ea1b57", "committedDate": "2020-11-19T11:56:30Z", "message": "Support custom package in codestarts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "committedDate": "2020-11-19T12:14:51Z", "message": "Support custom package in codestarts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7159494c9dd65b2c423a49e3bacc265747ea1b57", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/7159494c9dd65b2c423a49e3bacc265747ea1b57", "committedDate": "2020-11-19T11:56:30Z", "message": "Support custom package in codestarts"}, "afterCommit": {"oid": "f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "committedDate": "2020-11-19T12:14:51Z", "message": "Support custom package in codestarts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1410, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}