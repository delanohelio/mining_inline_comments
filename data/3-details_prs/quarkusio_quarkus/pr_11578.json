{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjk4MTgx", "number": 11578, "title": "Upgrade to GraalVM 20.2.0", "bodyText": "Fixes #11576", "createdAt": "2020-08-24T18:43:48Z", "url": "https://github.com/quarkusio/quarkus/pull/11578", "merged": true, "mergeCommit": {"oid": "f585d9d8c00f235059942aa9f81b7ccea06297af"}, "closed": true, "closedAt": "2020-08-28T21:10:28Z", "author": {"login": "gastaldi"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCHKohAFqTQ3Mzc2NjIwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDYphcgBqjM3MDUwNDEzNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzY2MjA5", "url": "https://github.com/quarkusio/quarkus/pull/11578#pullrequestreview-473766209", "createdAt": "2020-08-24T18:46:02Z", "commit": {"oid": "a0e6117566c8be6c0bf0b9335b681b819afe0122"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxODo0NjowMlrOHFx40Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxODo0NjowMlrOHFx40Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTgyMjI4OQ==", "bodyText": "@galderz is there a 20.2.0-compatible Mandrel version to be released soon?", "url": "https://github.com/quarkusio/quarkus/pull/11578#discussion_r475822289", "createdAt": "2020-08-24T18:46:02Z", "author": {"login": "gastaldi"}, "path": "build-parent/pom.xml", "diffHunk": "@@ -33,7 +33,7 @@\n         <!-- These properties are needed in order for them to be resolvable by the documentation -->\n         <!-- The Graal version we suggest using in documentation - as that's\n            what we work with by self downloading it: -->\n-        <graal-sdk.version-for-documentation>20.1.0</graal-sdk.version-for-documentation>\n+        <graal-sdk.version-for-documentation>20.2.0</graal-sdk.version-for-documentation>\n         <mandrel.version-for-documentation>20.1.0.1.Final</mandrel.version-for-documentation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0e6117566c8be6c0bf0b9335b681b819afe0122"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0e6117566c8be6c0bf0b9335b681b819afe0122", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/a0e6117566c8be6c0bf0b9335b681b819afe0122", "committedDate": "2020-08-24T18:43:18Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}, "afterCommit": {"oid": "7fa2a7db3f45ad9e4603217fed3197813e111477", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/7fa2a7db3f45ad9e4603217fed3197813e111477", "committedDate": "2020-08-24T18:53:52Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjI4MzA3", "url": "https://github.com/quarkusio/quarkus/pull/11578#pullrequestreview-474228307", "createdAt": "2020-08-25T08:00:01Z", "commit": {"oid": "d91a046e948c4b1b4317c52f011303aef9d9be3a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjM2MzIw", "url": "https://github.com/quarkusio/quarkus/pull/11578#pullrequestreview-474236320", "createdAt": "2020-08-25T08:08:06Z", "commit": {"oid": "d91a046e948c4b1b4317c52f011303aef9d9be3a"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODowODowNlrOHGMiCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODowOTozNVrOHGMlWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1ODgyNA==", "bodyText": "Yeah so that's where I think we need some tweaking because doing that, we will recommend using 20.1 in the log message if people are using an older version which is not what we want to do.\nI think we need two constants: the minimal version and the current one.", "url": "https://github.com/quarkusio/quarkus/pull/11578#discussion_r476258824", "createdAt": "2020-08-25T08:08:06Z", "author": {"login": "gsmet"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -658,6 +658,7 @@ private static void objcopy(String... args) {\n             static final Version SNAPSHOT_MANDREL = new Version(\"Snapshot\", Integer.MAX_VALUE, Integer.MAX_VALUE,\n                     Distribution.MANDREL);\n             static final Version VERSION_20_1 = new Version(\"GraalVM 20.1\", 20, 1, Distribution.ORACLE);\n+            // Keeping 20.1 until Mandrel is updated\n             static final Version CURRENT = VERSION_20_1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91a046e948c4b1b4317c52f011303aef9d9be3a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1OTY3Mg==", "bodyText": "Btw, I wouldn't mind if I didn't think this would happen at each upgrade. There will always be a delay between Mandrel and GraalVM and we might release a version where both versions are not aligned.", "url": "https://github.com/quarkusio/quarkus/pull/11578#discussion_r476259672", "createdAt": "2020-08-25T08:09:35Z", "author": {"login": "gsmet"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -658,6 +658,7 @@ private static void objcopy(String... args) {\n             static final Version SNAPSHOT_MANDREL = new Version(\"Snapshot\", Integer.MAX_VALUE, Integer.MAX_VALUE,\n                     Distribution.MANDREL);\n             static final Version VERSION_20_1 = new Version(\"GraalVM 20.1\", 20, 1, Distribution.ORACLE);\n+            // Keeping 20.1 until Mandrel is updated\n             static final Version CURRENT = VERSION_20_1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1ODgyNA=="}, "originalCommit": {"oid": "d91a046e948c4b1b4317c52f011303aef9d9be3a"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d91a046e948c4b1b4317c52f011303aef9d9be3a", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/d91a046e948c4b1b4317c52f011303aef9d9be3a", "committedDate": "2020-08-24T19:21:33Z", "message": "Using Modifier.isFinal instead of org.objectweb.asm.Opcodes.ACC_FINAL"}, "afterCommit": {"oid": "02dd8014b7d16f98ea496a572d69429f3955c2a6", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/02dd8014b7d16f98ea496a572d69429f3955c2a6", "committedDate": "2020-08-25T17:15:47Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02dd8014b7d16f98ea496a572d69429f3955c2a6", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/02dd8014b7d16f98ea496a572d69429f3955c2a6", "committedDate": "2020-08-25T17:15:47Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}, "afterCommit": {"oid": "6ea3288fcd8336b6e2c399967fa115e91820f4d7", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/6ea3288fcd8336b6e2c399967fa115e91820f4d7", "committedDate": "2020-08-25T17:17:48Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ea3288fcd8336b6e2c399967fa115e91820f4d7", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/6ea3288fcd8336b6e2c399967fa115e91820f4d7", "committedDate": "2020-08-25T17:17:48Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}, "afterCommit": {"oid": "f519ea8dfbb77508cdb07d37ae0e68596642cb16", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f519ea8dfbb77508cdb07d37ae0e68596642cb16", "committedDate": "2020-08-25T17:19:18Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDE5MTUx", "url": "https://github.com/quarkusio/quarkus/pull/11578#pullrequestreview-475419151", "createdAt": "2020-08-26T12:03:24Z", "commit": {"oid": "f519ea8dfbb77508cdb07d37ae0e68596642cb16"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMjowMzoyNFrOHHI15Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMjowMzoyNFrOHHI15Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzI0Njk0OQ==", "bodyText": "I'm not really happy with the wording change. I would keep the message as is, just using CURRENT and major.minor.\nI prefer recommending only one version even if we don't force the upgrade.", "url": "https://github.com/quarkusio/quarkus/pull/11578#discussion_r477246949", "createdAt": "2020-08-26T12:03:24Z", "author": {"login": "gsmet"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -495,10 +496,16 @@ private RuntimeException imageGenerationFailed(int exitValue, List<String> comma\n     private void checkGraalVMVersion(GraalVM.Version version) {\n         log.info(\"Running Quarkus native-image plugin on \" + version.getFullVersion());\n         if (version.isObsolete()) {\n-            final int major = GraalVM.Version.CURRENT.major;\n-            final int minor = GraalVM.Version.CURRENT.minor;\n-            throw new IllegalStateException(\"Out of date version of GraalVM detected: \" + version.getFullVersion() + \".\"\n-                    + \" Quarkus currently supports \" + major + \".\" + minor + \". Please upgrade GraalVM to this version.\");\n+            String currentVersion = GraalVM.Version.CURRENT.getFullVersion();\n+            if (GraalVM.Version.CURRENT != GraalVM.Version.MINIMUM) {\n+                currentVersion += \" (minimum: \" + GraalVM.Version.MINIMUM.getFullVersion() + \")\";\n+            }\n+            String msg = String.format(\"Out of date version of GraalVM detected: %s.\"\n+                    + \" Quarkus currently supports %s. Please upgrade to %s.\",\n+                    version.getFullVersion(),\n+                    currentVersion,\n+                    GraalVM.Version.CURRENT.getFullVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f519ea8dfbb77508cdb07d37ae0e68596642cb16"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f519ea8dfbb77508cdb07d37ae0e68596642cb16", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f519ea8dfbb77508cdb07d37ae0e68596642cb16", "committedDate": "2020-08-25T17:19:18Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}, "afterCommit": {"oid": "90e2a0a2f2883cb783df444aaf8077e0620d758b", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/90e2a0a2f2883cb783df444aaf8077e0620d758b", "committedDate": "2020-08-26T14:22:56Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84499aad3db291528693ca54b41e45e6b02f24c4", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/84499aad3db291528693ca54b41e45e6b02f24c4", "committedDate": "2020-08-28T17:41:32Z", "message": "Using Modifier.isFinal instead of org.objectweb.asm.Opcodes.ACC_FINAL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e7d811e079f134fa0e85e30206618194319d0a3", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/3e7d811e079f134fa0e85e30206618194319d0a3", "committedDate": "2020-08-28T17:41:35Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90e2a0a2f2883cb783df444aaf8077e0620d758b", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/90e2a0a2f2883cb783df444aaf8077e0620d758b", "committedDate": "2020-08-26T14:22:56Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}, "afterCommit": {"oid": "3e7d811e079f134fa0e85e30206618194319d0a3", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/3e7d811e079f134fa0e85e30206618194319d0a3", "committedDate": "2020-08-28T17:41:35Z", "message": "Upgrade to GraalVM 20.2.0\n\nFixes #11576"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 704, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}