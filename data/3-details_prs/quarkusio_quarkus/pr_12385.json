{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NTM5NDg1", "number": 12385, "title": "Micrometer @Timed and @Counted", "bodyText": "Resolves #12343", "createdAt": "2020-09-29T04:06:33Z", "url": "https://github.com/quarkusio/quarkus/pull/12385", "merged": true, "mergeCommit": {"oid": "04de3041a1dc6b8b0ba9fa68c2ea7cba404e5111"}, "closed": true, "closedAt": "2020-10-01T17:31:08Z", "author": {"login": "ebullient"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNgTCAABqjM4MTczNzAwMDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOA859AFqTQ5OTY5NjI0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a577bfd414dc8a714dda9259466bb4fb115c6de", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/3a577bfd414dc8a714dda9259466bb4fb115c6de", "committedDate": "2020-09-29T04:02:37Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "ec655877bec07531f14d5b2131e25355e40dbac3", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/ec655877bec07531f14d5b2131e25355e40dbac3", "committedDate": "2020-09-29T04:15:51Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec655877bec07531f14d5b2131e25355e40dbac3", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/ec655877bec07531f14d5b2131e25355e40dbac3", "committedDate": "2020-09-29T04:15:51Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "21cf23250be4f563f2da0cbce78eac912abae487", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/21cf23250be4f563f2da0cbce78eac912abae487", "committedDate": "2020-09-29T04:18:00Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21cf23250be4f563f2da0cbce78eac912abae487", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/21cf23250be4f563f2da0cbce78eac912abae487", "committedDate": "2020-09-29T04:18:00Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "a3ed0c9af5ff50265965cac600a4e1f5eb087e35", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/a3ed0c9af5ff50265965cac600a4e1f5eb087e35", "committedDate": "2020-09-29T13:21:41Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTY5MzA5", "url": "https://github.com/quarkusio/quarkus/pull/12385#pullrequestreview-498569309", "createdAt": "2020-09-29T15:00:17Z", "commit": {"oid": "a3ed0c9af5ff50265965cac600a4e1f5eb087e35"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTowMDoxOFrOHZxrVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTowNTozNlrOHZx66g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc5MDM1Nw==", "bodyText": "[nit] Just a thought I had from a general perspective and not specific to this PR only, but can we get smarter about registering beans as being unremovable?\nFor instance, can we check for usage of @Timed in application code before marking the classes for it as unremovable?\nMaybe the cost of that search isn't worth the small amount of marking classes as unremovable, but I'm curious", "url": "https://github.com/quarkusio/quarkus/pull/12385#discussion_r496790357", "createdAt": "2020-09-29T15:00:18Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/deployment/src/main/java/io/quarkus/micrometer/deployment/MicrometerProcessor.java", "diffHunk": "@@ -84,6 +99,12 @@ UnremovableBeanBuildItem registerAdditionalBeans(CombinedIndexBuildItem indexBui\n                 .addBeanClass(CompositeRegistryCreator.class)\n                 .addBeanClass(MeterFilterConstraint.class)\n                 .addBeanClass(MeterFilterConstraints.class)\n+                .addBeanClass(TIMED_ANNOTATION.toString())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3ed0c9af5ff50265965cac600a4e1f5eb087e35"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc5NDM0Ng==", "bodyText": "Wondering if, long term, there's a better home for this kind of thing so other projects can get this OOTB?", "url": "https://github.com/quarkusio/quarkus/pull/12385#discussion_r496794346", "createdAt": "2020-09-29T15:05:36Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/runtime/src/main/java/io/quarkus/micrometer/runtime/MicrometerCountedInterceptor.java", "diffHunk": "@@ -0,0 +1,111 @@\n+package io.quarkus.micrometer.runtime;\n+\n+import java.lang.reflect.Method;\n+import java.util.concurrent.CompletionStage;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3ed0c9af5ff50265965cac600a4e1f5eb087e35"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3ed0c9af5ff50265965cac600a4e1f5eb087e35", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/a3ed0c9af5ff50265965cac600a4e1f5eb087e35", "committedDate": "2020-09-29T13:21:41Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "bbc58dfb6c9a32aa1c759b9072bc707c75af6f53", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbc58dfb6c9a32aa1c759b9072bc707c75af6f53", "committedDate": "2020-09-30T01:41:21Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbc58dfb6c9a32aa1c759b9072bc707c75af6f53", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbc58dfb6c9a32aa1c759b9072bc707c75af6f53", "committedDate": "2020-09-30T01:41:21Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "288697012dcf1e3b989e8244c5ba74c2f3b1b5cd", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/288697012dcf1e3b989e8244c5ba74c2f3b1b5cd", "committedDate": "2020-09-30T17:39:00Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63767dbc92cc260bd7f7886cfa1acab0e7ac3ae4", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/63767dbc92cc260bd7f7886cfa1acab0e7ac3ae4", "committedDate": "2020-09-30T18:12:34Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "288697012dcf1e3b989e8244c5ba74c2f3b1b5cd", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/288697012dcf1e3b989e8244c5ba74c2f3b1b5cd", "committedDate": "2020-09-30T17:39:00Z", "message": "Micrometer @Timed and @Counted"}, "afterCommit": {"oid": "63767dbc92cc260bd7f7886cfa1acab0e7ac3ae4", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/63767dbc92cc260bd7f7886cfa1acab0e7ac3ae4", "committedDate": "2020-09-30T18:12:34Z", "message": "Micrometer @Timed and @Counted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Njk2MjQ1", "url": "https://github.com/quarkusio/quarkus/pull/12385#pullrequestreview-499696245", "createdAt": "2020-09-30T18:18:42Z", "commit": {"oid": "63767dbc92cc260bd7f7886cfa1acab0e7ac3ae4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1900, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}