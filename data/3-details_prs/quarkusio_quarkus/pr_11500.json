{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwOTkxMTU5", "number": 11500, "title": "Kubernetes secret config changes", "bodyText": "Fixes #11461\nAdded functionality to improve usage of kuberentes secrets as a ConfigSource", "createdAt": "2020-08-20T15:28:24Z", "url": "https://github.com/quarkusio/quarkus/pull/11500", "merged": true, "mergeCommit": {"oid": "569721a56199cc77157e5af918661203ce6398e6"}, "closed": true, "closedAt": "2020-08-31T11:19:47Z", "author": {"login": "noelo"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAyPorAFqTQ3MTc1MzQzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEO__hABqjM3MDg5NDI0NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzUzNDMy", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-471753432", "createdAt": "2020-08-20T15:49:33Z", "commit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo0OTozNFrOHEID8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo0OTozNFrOHEID8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA4ODQzNQ==", "bodyText": "The TODO is no longer valid, we should remove it, or replace with an up-to-date text.", "url": "https://github.com/quarkusio/quarkus/pull/11500#discussion_r474088435", "createdAt": "2020-08-20T15:49:34Z", "author": {"login": "Ladicek"}, "path": "extensions/kubernetes-config/runtime/src/main/java/io/quarkus/kubernetes/client/runtime/AbstractKubernetesConfigSourceUtil.java", "diffHunk": "@@ -72,6 +72,7 @@ abstract ConfigSource createPropertiesConfigSource(String kubernetesConfigSource\n             } else {\n                 // TODO all keys named `*.{properties,yml,yaml}` are categorized as file sources,\n                 //  but here, we only look for `application.{properties,yml,yaml}`\n+                // Also see qualifier in categorize function below", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzUzOTQ2", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-471753946", "createdAt": "2020-08-20T15:49:50Z", "commit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo0OTo1MFrOHEIEoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo0OTo1MFrOHEIEoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA4ODYwOQ==", "bodyText": "I'd say startsWith, to be safe.", "url": "https://github.com/quarkusio/quarkus/pull/11500#discussion_r474088609", "createdAt": "2020-08-20T15:49:50Z", "author": {"login": "Ladicek"}, "path": "extensions/kubernetes-config/runtime/src/main/java/io/quarkus/kubernetes/client/runtime/AbstractKubernetesConfigSourceUtil.java", "diffHunk": "@@ -91,7 +92,8 @@ private static CategorizedConfigSourceData categorize(Map<String, String> data)\n         List<Map.Entry<String, String>> fileData = new ArrayList<>();\n         for (Map.Entry<String, String> entry : data.entrySet()) {\n             String key = entry.getKey();\n-            if (key.endsWith(\".yml\") || key.endsWith(\".yaml\") || key.endsWith(\".properties\")) {\n+            if ((key.contains(\"application\")) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzU1OTg3", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-471755987", "createdAt": "2020-08-20T15:52:05Z", "commit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo1MjowNVrOHEIK_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTo1MjowNVrOHEIK_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA5MDIzOA==", "bodyText": "Why not keep the existing tests? They should still pass, no? At least the one that verifies content of application.properties.", "url": "https://github.com/quarkusio/quarkus/pull/11500#discussion_r474090238", "createdAt": "2020-08-20T15:52:05Z", "author": {"login": "Ladicek"}, "path": "extensions/kubernetes-config/runtime/src/test/java/io/quarkus/kubernetes/client/runtime/SecretConfigSourceUtilTest.java", "diffHunk": "@@ -102,14 +102,18 @@ void testWithAllKindsOfData() {\n         List<ConfigSource> configSources = sut.toConfigSources(secret.getMetadata().getName(), secret.getData());\n \n         assertThat(configSources).hasSize(4);\n-        assertThat(configSources).filteredOn(c -> c.getName().toLowerCase().contains(\"literal\"))\n-                .hasOnlyOneElementSatisfying(c -> {\n-                    assertThat(c.getProperties()).containsOnly(entry(\"some.key\", \"someValue\"));\n-                });\n-        assertThat(configSources).filteredOn(c -> c.getName().toLowerCase().contains(\"application.properties\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7626f01be3f73ab5fd90e357984082791a88b431"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzk3OTA5", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-471797909", "createdAt": "2020-08-20T16:37:57Z", "commit": {"oid": "b14e906bb15fd0409aa461290166a60eeb730207"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDI0NzM4", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-472424738", "createdAt": "2020-08-21T11:49:48Z", "commit": {"oid": "7b473839a7df9641459bab7e51134708a0d8d9c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e4e92709563df12d95314129bbe19e4013d5e62", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/3e4e92709563df12d95314129bbe19e4013d5e62", "committedDate": "2020-08-21T12:38:03Z", "message": "Merge branch 'fix-11461' of github.com:noelo/quarkus into fix-11461"}, "afterCommit": {"oid": "31ef4ada879b6d1cc7d0c61b9e9eccd50b2abc69", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/31ef4ada879b6d1cc7d0c61b9e9eccd50b2abc69", "committedDate": "2020-08-21T14:58:50Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31ef4ada879b6d1cc7d0c61b9e9eccd50b2abc69", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/31ef4ada879b6d1cc7d0c61b9e9eccd50b2abc69", "committedDate": "2020-08-21T14:58:50Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}, "afterCommit": {"oid": "13eabbee538330f6025e8f574af1d06ed205d800", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/13eabbee538330f6025e8f574af1d06ed205d800", "committedDate": "2020-08-21T15:20:10Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTg2NDYy", "url": "https://github.com/quarkusio/quarkus/pull/11500#pullrequestreview-473186462", "createdAt": "2020-08-24T07:36:04Z", "commit": {"oid": "13eabbee538330f6025e8f574af1d06ed205d800"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13eabbee538330f6025e8f574af1d06ed205d800", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/13eabbee538330f6025e8f574af1d06ed205d800", "committedDate": "2020-08-21T15:20:10Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}, "afterCommit": {"oid": "5fcb06a510578f05baaffc2191dff2b619bfb266", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/5fcb06a510578f05baaffc2191dff2b619bfb266", "committedDate": "2020-08-27T12:54:22Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fcb06a510578f05baaffc2191dff2b619bfb266", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/5fcb06a510578f05baaffc2191dff2b619bfb266", "committedDate": "2020-08-27T12:54:22Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}, "afterCommit": {"oid": "79584f8caebbc96fecfb4278baac57effe3c807d", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/79584f8caebbc96fecfb4278baac57effe3c807d", "committedDate": "2020-08-27T16:28:11Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79584f8caebbc96fecfb4278baac57effe3c807d", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/79584f8caebbc96fecfb4278baac57effe3c807d", "committedDate": "2020-08-27T16:28:11Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}, "afterCommit": {"oid": "48b0c15d9c958ae3c669d03643bf99d908bb810f", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/48b0c15d9c958ae3c669d03643bf99d908bb810f", "committedDate": "2020-08-28T08:32:22Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a5cd97f23302e987de357e5a53a4a215af4d223", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/2a5cd97f23302e987de357e5a53a4a215af4d223", "committedDate": "2020-08-31T09:00:53Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48b0c15d9c958ae3c669d03643bf99d908bb810f", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/48b0c15d9c958ae3c669d03643bf99d908bb810f", "committedDate": "2020-08-28T08:32:22Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}, "afterCommit": {"oid": "2a5cd97f23302e987de357e5a53a4a215af4d223", "author": {"user": {"login": "noelo", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/2a5cd97f23302e987de357e5a53a4a215af4d223", "committedDate": "2020-08-31T09:00:53Z", "message": "Fix for #11461\n\nFixing minor updates after review\n\nRe-added missing test\n\nFixed configmap tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 851, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}