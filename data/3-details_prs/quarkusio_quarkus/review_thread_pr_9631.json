{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzg1MTc4", "number": 9631, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjowMTowNVrOEADjoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNjoyOFrOEAQ1Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NDkzNzI5OnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjowMTowNVrOGbGANA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjozNzo0OVrOGbTjhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA2MzA5Mg==", "bodyText": "I need to check that it still works..", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431063092", "createdAt": "2020-05-27T12:01:05Z", "author": {"login": "ia3andy"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "diffHunk": "@@ -236,10 +235,9 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n-    private void createGradleWrapper(QuarkusPlatformDescriptor platform,\n-            ProjectWriter writer) {\n+    private void createGradleWrapper(QuarkusPlatformDescriptor platform, Path projectFolderPath) {\n         try {\n-            writer.mkdirs(\"gradle/wrapper\");\n+            Files.createDirectories(projectFolderPath.resolve(\"gradle/wrapper\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NTEyNA==", "bodyText": "Working..", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431285124", "createdAt": "2020-05-27T16:37:49Z", "author": {"login": "ia3andy"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "diffHunk": "@@ -236,10 +235,9 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n-    private void createGradleWrapper(QuarkusPlatformDescriptor platform,\n-            ProjectWriter writer) {\n+    private void createGradleWrapper(QuarkusPlatformDescriptor platform, Path projectFolderPath) {\n         try {\n-            writer.mkdirs(\"gradle/wrapper\");\n+            Files.createDirectories(projectFolderPath.resolve(\"gradle/wrapper\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA2MzA5Mg=="}, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzExMjExOnYy", "diffSide": "RIGHT", "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProjectCommandHandler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNjoyOFrOGbb3kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzoyMjo0OVrOGbouwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQyMTMyOA==", "bodyText": "Just a note, previously a single invocation could have been passed to multiple handlers (e.g. create followed by add extensions) that would use the same project writer instance. It doesn't mean it has to stay that way.", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431421328", "createdAt": "2020-05-27T20:26:28Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProjectCommandHandler.java", "diffHunk": "@@ -20,10 +21,8 @@\n \n     @Override\n     public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws QuarkusCommandException {\n-        final ProjectWriter projectWriter = invocation.getProjectWriter();\n-        if (projectWriter == null) {\n-            throw new IllegalStateException(\"Project writer has not been provided\");\n-        }\n+        final ProjectWriter projectWriter = new FileProjectWriter(\n+                invocation.getQuarkusProject().getProjectFolderPath().toFile());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzMjA2Ng==", "bodyText": "I am not there yet, but to make it more consistent and simple, my intent is to go toward atomic operations (without having to deal with the writer close/save from outside):\n\ncreate (directly with or without extensions)\nadd extension(s)\nremove extension(s)\n\nUsing the same writer would make it more performant when doing multiple of those, but I guess there is no use case for it.\nOne good example of the risk of having this close/save handled externally is that (as I did without knowing) having multiple writer and closing the one without the modification after ending up with reseting the modification \ud83d\ude05\nWDYT?", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431632066", "createdAt": "2020-05-28T07:22:49Z", "author": {"login": "ia3andy"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProjectCommandHandler.java", "diffHunk": "@@ -20,10 +21,8 @@\n \n     @Override\n     public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws QuarkusCommandException {\n-        final ProjectWriter projectWriter = invocation.getProjectWriter();\n-        if (projectWriter == null) {\n-            throw new IllegalStateException(\"Project writer has not been provided\");\n-        }\n+        final ProjectWriter projectWriter = new FileProjectWriter(\n+                invocation.getQuarkusProject().getProjectFolderPath().toFile());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQyMTMyOA=="}, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3018, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}