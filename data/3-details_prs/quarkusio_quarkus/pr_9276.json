{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NTI4NzEy", "number": 9276, "title": "Use /version when checking Kubernetes API server", "bodyText": "This is done as an attempt to get over an issue that @maxandersen found when trying to deploy to a non-vanilla Kubernetes cluster.", "createdAt": "2020-05-13T18:12:15Z", "url": "https://github.com/quarkusio/quarkus/pull/9276", "merged": true, "mergeCommit": {"oid": "8c6c30e2271c262961945ccc8286f20d75ac47a1"}, "closed": true, "closedAt": "2020-05-13T20:25:17Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg9G-OgFqTQxMTE4NjgyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg9e4gAFqTQxMTIwNjA3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTg2ODI2", "url": "https://github.com/quarkusio/quarkus/pull/9276#pullrequestreview-411186826", "createdAt": "2020-05-13T18:23:30Z", "commit": {"oid": "ac68768c1460af4eb4f7f706572b7cfed9511107"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTg3MTIz", "url": "https://github.com/quarkusio/quarkus/pull/9276#pullrequestreview-411187123", "createdAt": "2020-05-13T18:23:50Z", "commit": {"oid": "ac68768c1460af4eb4f7f706572b7cfed9511107"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxODoyMzo1MVrOGU-IbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxODoyMzo1MVrOGU-IbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY0MjY2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        //Let's check id we can connect.\n          \n          \n            \n                        //Let's check if we can connect.\n          \n      \n    \n    \n  \n\nwhile we're at it.", "url": "https://github.com/quarkusio/quarkus/pull/9276#discussion_r424642669", "createdAt": "2020-05-13T18:23:51Z", "author": {"login": "gsmet"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesDeploy.java", "diffHunk": "@@ -69,7 +69,7 @@ private Result doCheck() {\n         try {\n             masterURL = client.getConfiguration().getMasterUrl();\n             //Let's check id we can connect.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac68768c1460af4eb4f7f706572b7cfed9511107"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac68768c1460af4eb4f7f706572b7cfed9511107", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/ac68768c1460af4eb4f7f706572b7cfed9511107", "committedDate": "2020-05-13T18:11:58Z", "message": "Use /version when checking Kubernetes API server"}, "afterCommit": {"oid": "abaf8d64bbff7c1db7326264c1aa50e20087ae88", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/abaf8d64bbff7c1db7326264c1aa50e20087ae88", "committedDate": "2020-05-13T18:25:00Z", "message": "Use /version when checking Kubernetes API server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTk1NTcz", "url": "https://github.com/quarkusio/quarkus/pull/9276#pullrequestreview-411195573", "createdAt": "2020-05-13T18:35:12Z", "commit": {"oid": "abaf8d64bbff7c1db7326264c1aa50e20087ae88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxODozNToxMlrOGU-jQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxODozNToxMlrOGU-jQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY0OTUzOQ==", "bodyText": "Show the version returned above here \ud83d\ude09", "url": "https://github.com/quarkusio/quarkus/pull/9276#discussion_r424649539", "createdAt": "2020-05-13T18:35:12Z", "author": {"login": "gastaldi"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesDeploy.java", "diffHunk": "@@ -68,8 +68,8 @@ private Result doCheck() {\n         String masterURL = client.getConfiguration().getMasterUrl();\n         try {\n             masterURL = client.getConfiguration().getMasterUrl();\n-            //Let's check id we can connect.\n-            RootPaths paths = client.rootPaths();\n+            //Let's check if we can connect.\n+            client.getVersion();\n             log.info(\"Kubernetes API Server at '\" + masterURL + \"' successfully contacted.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abaf8d64bbff7c1db7326264c1aa50e20087ae88"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdb06e3d5d24c0e20a0ac50f60aba42cad52ee83", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/cdb06e3d5d24c0e20a0ac50f60aba42cad52ee83", "committedDate": "2020-05-13T18:47:13Z", "message": "Use /version when checking Kubernetes API server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abaf8d64bbff7c1db7326264c1aa50e20087ae88", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/abaf8d64bbff7c1db7326264c1aa50e20087ae88", "committedDate": "2020-05-13T18:25:00Z", "message": "Use /version when checking Kubernetes API server"}, "afterCommit": {"oid": "cdb06e3d5d24c0e20a0ac50f60aba42cad52ee83", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/cdb06e3d5d24c0e20a0ac50f60aba42cad52ee83", "committedDate": "2020-05-13T18:47:13Z", "message": "Use /version when checking Kubernetes API server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjA2MDcw", "url": "https://github.com/quarkusio/quarkus/pull/9276#pullrequestreview-411206070", "createdAt": "2020-05-13T18:49:36Z", "commit": {"oid": "cdb06e3d5d24c0e20a0ac50f60aba42cad52ee83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3445, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}