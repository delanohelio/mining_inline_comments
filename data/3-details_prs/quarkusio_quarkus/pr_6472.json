{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwODMwMzI3", "number": 6472, "title": "Add support for kebab case in @ConfigProperties", "bodyText": "Fixes: #6457", "createdAt": "2020-01-09T08:20:30Z", "url": "https://github.com/quarkusio/quarkus/pull/6472", "merged": true, "mergeCommit": {"oid": "8c8670d1c0124575a160f7a7b1aec06cddf84609"}, "closed": true, "closedAt": "2020-01-10T16:46:09Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4lwoxABqjI5MzQwNDEwMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5BYWjgFqTM0MTI4NzcyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52e180483bd62579787f7e253ab4179615aa60e6", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/52e180483bd62579787f7e253ab4179615aa60e6", "committedDate": "2020-01-09T08:18:52Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/ca45d47cfb239215d42a98dc7f3423f3fd144507", "committedDate": "2020-01-09T08:34:09Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzU0NzQ2", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340354746", "createdAt": "2020-01-09T08:32:41Z", "commit": {"oid": "52e180483bd62579787f7e253ab4179615aa60e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODozMjo0MVrOFbuD5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODozMjo0MVrOFbuD5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxMDUzMg==", "bodyText": "Small thing, but maybe move this inline with applicationIndex, configProperties);", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364610532", "createdAt": "2020-01-09T08:32:41Z", "author": {"login": "gytis"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ClassConfigPropertiesUtil.java", "diffHunk": "@@ -167,7 +170,8 @@ static boolean addProducerMethodForClassConfigProperties(ClassLoader classLoader\n                 configObjectClassStr, produceMethodParameterTypes)) {\n             methodCreator.addAnnotation(Produces.class);\n \n-            ResultHandle configObject = populateConfigObject(classLoader, configPropertiesClassInfo, prefixStr, methodCreator,\n+            ResultHandle configObject = populateConfigObject(classLoader, configPropertiesClassInfo, prefixStr, namingStrategy,\n+                    methodCreator,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52e180483bd62579787f7e253ab4179615aa60e6"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzYxNzAw", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340361700", "createdAt": "2020-01-09T08:45:17Z", "commit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODo0NToxN1rOFbuZOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODo0NToxN1rOFbuZOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNTk5NA==", "bodyText": "How about checking for a getter in here the same as in the default case? Looking at the original issue (#6457), this seems to be the expected scenario i.e. schema-location > getSchemaLocation", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364615994", "createdAt": "2020-01-09T08:45:17Z", "author": {"login": "gytis"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/InterfaceConfigPropertiesUtil.java", "diffHunk": "@@ -196,26 +199,33 @@ private static boolean isDefault(short flags) {\n         return ((flags & (Modifier.ABSTRACT | Modifier.PUBLIC | Modifier.STATIC)) == Modifier.PUBLIC);\n     }\n \n-    private static NameAndDefaultValue determinePropertyNameAndDefaultValue(MethodInfo method) {\n+    private static NameAndDefaultValue determinePropertyNameAndDefaultValue(MethodInfo method,\n+            ConfigProperties.NamingStrategy namingStrategy) {\n         AnnotationInstance configPropertyAnnotation = method.annotation(DotNames.CONFIG_PROPERTY);\n         if (configPropertyAnnotation != null) {\n             AnnotationValue nameValue = configPropertyAnnotation.value(\"name\");\n-            String name = (nameValue == null) || nameValue.asString().isEmpty() ? getPropertyNameFromMethodName(method)\n+            String name = (nameValue == null) || nameValue.asString().isEmpty() ? getPropertyName(method, namingStrategy)\n                     : nameValue.asString();\n             AnnotationValue defaultValue = configPropertyAnnotation.value(\"defaultValue\");\n \n             return new NameAndDefaultValue(name, defaultValue != null ? defaultValue.asString() : null);\n         }\n \n-        return new NameAndDefaultValue(getPropertyNameFromMethodName(method));\n+        return new NameAndDefaultValue(getPropertyName(method, namingStrategy));\n     }\n \n-    private static String getPropertyNameFromMethodName(MethodInfo method) {\n-        try {\n-            return JavaBeanUtil.getPropertyNameFromGetter(method.name());\n-        } catch (IllegalArgumentException e) {\n-            throw new IllegalArgumentException(\"Method \" + method.name() + \" of interface \" + method.declaringClass()\n-                    + \" is not a getter method. Either rename the method to follow getter name conventions or annotate the method with @ConfigProperty\");\n+    private static String getPropertyName(MethodInfo method, ConfigProperties.NamingStrategy namingStrategy) {\n+        if (namingStrategy == ConfigProperties.NamingStrategy.DEFAULT) {\n+            try {\n+                return JavaBeanUtil.getPropertyNameFromGetter(method.name());\n+            } catch (IllegalArgumentException e) {\n+                throw new IllegalArgumentException(\"Method \" + method.name() + \" of interface \" + method.declaringClass()\n+                        + \" is not a getter method. Either rename the method to follow getter name conventions or annotate the method with @ConfigProperty\");\n+            }\n+        } else if (namingStrategy == ConfigProperties.NamingStrategy.KEBAB_CASE) {\n+            return StringUtil.hyphenate(method.name());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzYxODk5", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340361899", "createdAt": "2020-01-09T08:45:37Z", "commit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODo0NTozN1rOFbuZvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODo0NTozN1rOFbuZvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNjEyNg==", "bodyText": "Move inline with defaultConfigValues, configProperties);?", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364616126", "createdAt": "2020-01-09T08:45:37Z", "author": {"login": "gytis"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ConfigPropertiesBuildStep.java", "diffHunk": "@@ -74,6 +74,7 @@ void setup(CombinedIndexBuildItem combinedIndex,\n \n                 String generatedClassName = InterfaceConfigPropertiesUtil.generateImplementationForInterfaceConfigProperties(\n                         classInfo, nonBeansClassOutput, combinedIndex.getIndex(), configPropertiesMetadata.getPrefix(),\n+                        configPropertiesMetadata.getNamingStrategy(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca45d47cfb239215d42a98dc7f3423f3fd144507", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/ca45d47cfb239215d42a98dc7f3423f3fd144507", "committedDate": "2020-01-09T08:34:09Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "b9b293dbae090b535e07dbb98bc58420fde958f8", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9b293dbae090b535e07dbb98bc58420fde958f8", "committedDate": "2020-01-09T08:54:16Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9b293dbae090b535e07dbb98bc58420fde958f8", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9b293dbae090b535e07dbb98bc58420fde958f8", "committedDate": "2020-01-09T08:54:16Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "41571585f12f9ef525b865586656e932ff94594f", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/41571585f12f9ef525b865586656e932ff94594f", "committedDate": "2020-01-09T09:23:24Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNjk0NjM1", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340694635", "createdAt": "2020-01-09T17:34:24Z", "commit": {"oid": "41571585f12f9ef525b865586656e932ff94594f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzozNDoyNFrOFb98dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzozNDoyNFrOFb98dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg3MDc3NA==", "bodyText": "Maybe move this behavior to a method in the NamingStrategy enum? eg. String getPropertyName(String name). Then you could simply do namingStrategy.getPropertyName(field.name())", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364870774", "createdAt": "2020-01-09T17:34:24Z", "author": {"login": "gastaldi"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ClassConfigPropertiesUtil.java", "diffHunk": "@@ -316,6 +322,15 @@ private static ResultHandle populateConfigObject(ClassLoader classLoader, ClassI\n         return configObject;\n     }\n \n+    private static String getPropertyName(FieldInfo field, ConfigProperties.NamingStrategy namingStrategy) {\n+        if (namingStrategy == ConfigProperties.NamingStrategy.DEFAULT) {\n+            return field.name();\n+        } else if (namingStrategy == ConfigProperties.NamingStrategy.KEBAB_CASE) {\n+            return StringUtil.hyphenate(field.name());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41571585f12f9ef525b865586656e932ff94594f"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41571585f12f9ef525b865586656e932ff94594f", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/41571585f12f9ef525b865586656e932ff94594f", "committedDate": "2020-01-09T09:23:24Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "2e2613a84c8404d6206c7ad3f670648a32e0c3ae", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2e2613a84c8404d6206c7ad3f670648a32e0c3ae", "committedDate": "2020-01-09T18:03:14Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNzEyNDY3", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340712467", "createdAt": "2020-01-09T18:06:06Z", "commit": {"oid": "2e2613a84c8404d6206c7ad3f670648a32e0c3ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxODowNjowNlrOFb-w7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxODowNjowNlrOFb-w7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4NDIwNw==", "bodyText": "Is this method still needed? I think you can call namingStrategy.getName(field.name()) directly, no?", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364884207", "createdAt": "2020-01-09T18:06:06Z", "author": {"login": "gastaldi"}, "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ClassConfigPropertiesUtil.java", "diffHunk": "@@ -316,6 +321,10 @@ private static ResultHandle populateConfigObject(ClassLoader classLoader, ClassI\n         return configObject;\n     }\n \n+    private static String getPropertyName(FieldInfo field, ConfigProperties.NamingStrategy namingStrategy) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e2613a84c8404d6206c7ad3f670648a32e0c3ae"}, "originalPosition": 57}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e2613a84c8404d6206c7ad3f670648a32e0c3ae", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2e2613a84c8404d6206c7ad3f670648a32e0c3ae", "committedDate": "2020-01-09T18:03:14Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "a660187855e0f59d20c89234cc98580099780cc3", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/a660187855e0f59d20c89234cc98580099780cc3", "committedDate": "2020-01-09T18:08:27Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNzE2MDY0", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-340716064", "createdAt": "2020-01-09T18:12:39Z", "commit": {"oid": "a660187855e0f59d20c89234cc98580099780cc3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxODoxMjo0MFrOFb-7Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxODoxMjo0MFrOFb-7Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4NjgwMw==", "bodyText": "This method can be declared as abstract", "url": "https://github.com/quarkusio/quarkus/pull/6472#discussion_r364886803", "createdAt": "2020-01-09T18:12:40Z", "author": {"login": "gastaldi"}, "path": "extensions/arc/runtime/src/main/java/io/quarkus/arc/config/ConfigProperties.java", "diffHunk": "@@ -19,4 +21,47 @@\n      * If the default is used, the class name will be used to determine the proper prefix\n      */\n     String prefix() default UNSET_PREFIX;\n+\n+    /**\n+     * The naming strategy to use for the corresponding property. This only matters for fields or method names that contain\n+     * both lower case and upper case characters.\n+     *\n+     * {@code NamingStrategy.DEFAULT} means that whatever the name of the field / method is, that will be the name of the\n+     * property.\n+     * {@code NamingStrategy.KEBAB_CASE} means that the name of property is derived by replacing case changes with a dash.\n+     * For a example:\n+     *\n+     * /**\n+     * \n+     * <pre>\n+     * &#64;ConfigProperties(prefix=\"whatever\")\n+     * public class SomeConfig {\n+     *   public fooBar;\n+     * }\n+     * </pre>\n+     *\n+     * Then to set the {@code fooBar} field, the corresponding property would be {@code whatever.fooBar}.\n+     * If {@code namingStrategy=NamingStrategy.KEBAB_CASE} were being used, then the corresponding property would be\n+     * {@code whatever.foo-bar}\n+     */\n+    NamingStrategy namingStrategy() default NamingStrategy.DEFAULT;\n+\n+    enum NamingStrategy {\n+        DEFAULT {\n+            @Override\n+            public String getName(String name) {\n+                return name;\n+            }\n+        },\n+        KEBAB_CASE {\n+            @Override\n+            public String getName(String name) {\n+                return StringUtil.hyphenate(name);\n+            }\n+        };\n+\n+        public String getName(String name) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a660187855e0f59d20c89234cc98580099780cc3"}, "originalPosition": 52}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a660187855e0f59d20c89234cc98580099780cc3", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/a660187855e0f59d20c89234cc98580099780cc3", "committedDate": "2020-01-09T18:08:27Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}, "afterCommit": {"oid": "17c91c0a8529d6df0a617130743bddb48c3652b5", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/17c91c0a8529d6df0a617130743bddb48c3652b5", "committedDate": "2020-01-10T11:12:04Z", "message": "Make kebab case the default in @ConfigProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f82409d57a398e5ec7178617bc2a133d5aa15a4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/0f82409d57a398e5ec7178617bc2a133d5aa15a4", "committedDate": "2020-01-10T11:28:31Z", "message": "Add support for kebab case in @ConfigProperties\n\nFixes: #6457"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f95145f48d28992ce9aeee71562bec0ec0d1279", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f95145f48d28992ce9aeee71562bec0ec0d1279", "committedDate": "2020-01-10T11:28:35Z", "message": "Make kebab case the default in @ConfigProperties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17c91c0a8529d6df0a617130743bddb48c3652b5", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/17c91c0a8529d6df0a617130743bddb48c3652b5", "committedDate": "2020-01-10T11:12:04Z", "message": "Make kebab case the default in @ConfigProperties"}, "afterCommit": {"oid": "6f95145f48d28992ce9aeee71562bec0ec0d1279", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f95145f48d28992ce9aeee71562bec0ec0d1279", "committedDate": "2020-01-10T11:28:35Z", "message": "Make kebab case the default in @ConfigProperties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjg3NzIx", "url": "https://github.com/quarkusio/quarkus/pull/6472#pullrequestreview-341287721", "createdAt": "2020-01-10T16:45:07Z", "commit": {"oid": "6f95145f48d28992ce9aeee71562bec0ec0d1279"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 344, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}