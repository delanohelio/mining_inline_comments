{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MjM1NTM3", "number": 9394, "title": "Allow application to be re-augmented", "bodyText": "This adds the concept of a 'Mutable Application' that can be reaugmented.\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode.", "createdAt": "2020-05-18T03:24:49Z", "url": "https://github.com/quarkusio/quarkus/pull/9394", "merged": true, "mergeCommit": {"oid": "1e8bdda655e7cba24a4465ab6fa147d25ad2fa35"}, "closed": true, "closedAt": "2020-05-26T13:53:32Z", "author": {"login": "stuartwdouglas"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciY2wLABqjMzNDU1NjAzNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclFCUIAFqTQxODMyMDMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c7921a51c1a45cf53f2ea5efd375569924d5a77", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/1c7921a51c1a45cf53f2ea5efd375569924d5a77", "committedDate": "2020-05-18T03:03:56Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/0995bdcfe448a3b976e1b91bc4537f3d422603ff", "committedDate": "2020-05-18T05:16:44Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzAzNDMw", "url": "https://github.com/quarkusio/quarkus/pull/9394#pullrequestreview-413703430", "createdAt": "2020-05-18T15:27:38Z", "commit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNToyNzozOFrOGW8UYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozMTo1MVrOGW8f6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxMDExNA==", "bodyText": "Is it really costly? I would have imagined this to be always generated", "url": "https://github.com/quarkusio/quarkus/pull/9394#discussion_r426710114", "createdAt": "2020-05-18T15:27:38Z", "author": {"login": "emmanuelbernard"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/PackageConfig.java", "diffHunk": "@@ -27,6 +29,16 @@\n     @ConfigItem(defaultValue = JAR)\n     public String type;\n \n+    /**\n+     * Experimental property that allows for the creation of a 'mutable' application that\n+     * can be re-augmented after creation.\n+     *\n+     * TODO: should this just be a different package type: 'mutable-jar'\n+     *\n+     */\n+    @ConfigProperty(defaultValue = \"true\")\n+    public boolean mutableApplication;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxMDU3OA==", "bodyText": "What are the reason for the rebuild Boolean a. Is it just to read from the dat model? Or is there more to it ?", "url": "https://github.com/quarkusio/quarkus/pull/9394#discussion_r426710578", "createdAt": "2020-05-18T15:28:17Z", "author": {"login": "emmanuelbernard"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/builditem/BuildSystemTargetBuildItem.java", "diffHunk": "@@ -11,10 +11,12 @@\n \n     private final Path outputDirectory;\n     private final String baseName;\n+    private final boolean rebuild;\n \n-    public BuildSystemTargetBuildItem(Path outputDirectory, String baseName) {\n+    public BuildSystemTargetBuildItem(Path outputDirectory, String baseName, boolean rebuild) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxMzA2Nw==", "bodyText": "So there is a mutability main entry and a reaugment main entry? What\u2019s the difference?", "url": "https://github.com/quarkusio/quarkus/pull/9394#discussion_r426713067", "createdAt": "2020-05-18T15:31:51Z", "author": {"login": "emmanuelbernard"}, "path": "independent-projects/bootstrap/runner/src/main/java/io/quarkus/bootstrap/runner/AugmentEntryPoint.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package io.quarkus.bootstrap.runner;\n+\n+import java.io.ObjectInputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLClassLoader;\n+import java.net.URLDecoder;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Experimental class that allows Quarkus applications to be re-augmented\n+ * \n+ */\n+public class AugmentEntryPoint {\n+\n+    public static void main(String... args) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0995bdcfe448a3b976e1b91bc4537f3d422603ff", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/0995bdcfe448a3b976e1b91bc4537f3d422603ff", "committedDate": "2020-05-18T05:16:44Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "051134c6789254557cc09824bad42b72966fddbb", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/051134c6789254557cc09824bad42b72966fddbb", "committedDate": "2020-05-19T08:51:02Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "051134c6789254557cc09824bad42b72966fddbb", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/051134c6789254557cc09824bad42b72966fddbb", "committedDate": "2020-05-19T08:51:02Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "7e6d931dc4962a4011e7791c10e97cf78538af00", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/7e6d931dc4962a4011e7791c10e97cf78538af00", "committedDate": "2020-05-19T09:27:34Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e6d931dc4962a4011e7791c10e97cf78538af00", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/7e6d931dc4962a4011e7791c10e97cf78538af00", "committedDate": "2020-05-19T09:27:34Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "b609c98a299ad07c7b3bc770d22f315ff7594f19", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/b609c98a299ad07c7b3bc770d22f315ff7594f19", "committedDate": "2020-05-20T00:22:48Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b609c98a299ad07c7b3bc770d22f315ff7594f19", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/b609c98a299ad07c7b3bc770d22f315ff7594f19", "committedDate": "2020-05-20T00:22:48Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "c245f69864b3045e93376b6379b33c23e83089b0", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/c245f69864b3045e93376b6379b33c23e83089b0", "committedDate": "2020-05-20T03:49:52Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c245f69864b3045e93376b6379b33c23e83089b0", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/c245f69864b3045e93376b6379b33c23e83089b0", "committedDate": "2020-05-20T03:49:52Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "ef4c4d1a90988e3b7c7d392f9b6355ccee68201b", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/ef4c4d1a90988e3b7c7d392f9b6355ccee68201b", "committedDate": "2020-05-25T05:22:03Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef4c4d1a90988e3b7c7d392f9b6355ccee68201b", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/ef4c4d1a90988e3b7c7d392f9b6355ccee68201b", "committedDate": "2020-05-25T05:22:03Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "e16ca5361c7e8f5b8a9b811957eb149bfdef0f69", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/e16ca5361c7e8f5b8a9b811957eb149bfdef0f69", "committedDate": "2020-05-25T06:26:29Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e16ca5361c7e8f5b8a9b811957eb149bfdef0f69", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/e16ca5361c7e8f5b8a9b811957eb149bfdef0f69", "committedDate": "2020-05-25T06:26:29Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "4c9fd4f99e909e976ec48b7b86a97884fc6acaa9", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/4c9fd4f99e909e976ec48b7b86a97884fc6acaa9", "committedDate": "2020-05-25T07:10:03Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/f98e0393664788f56169d055d585335f845ab8dd", "committedDate": "2020-05-25T23:17:36Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c9fd4f99e909e976ec48b7b86a97884fc6acaa9", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/4c9fd4f99e909e976ec48b7b86a97884fc6acaa9", "committedDate": "2020-05-25T07:10:03Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}, "afterCommit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/f98e0393664788f56169d055d585335f845ab8dd", "committedDate": "2020-05-25T23:17:36Z", "message": "Allow application to be re-augmented\n\nThis adds the concept of a 'Mutable Application' that can be reaugmented.\n\nThis is an experimental capability for now, and will form the basis for\nthe new remote dev mode."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4Mjg3NzEw", "url": "https://github.com/quarkusio/quarkus/pull/9394#pullrequestreview-418287710", "createdAt": "2020-05-26T13:18:23Z", "commit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzoxODoyNFrOGad0Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzoxODoyNFrOGad0Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwNDY3NQ==", "bodyText": "+1 to make it a different package type, since IIUC you can't really use mutableApplication with the other package types", "url": "https://github.com/quarkusio/quarkus/pull/9394#discussion_r430404675", "createdAt": "2020-05-26T13:18:24Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/PackageConfig.java", "diffHunk": "@@ -27,6 +29,16 @@\n     @ConfigItem(defaultValue = JAR)\n     public String type;\n \n+    /**\n+     * Experimental property that allows for the creation of a 'mutable' application that\n+     * can be re-augmented after creation.\n+     *\n+     * TODO: should this just be a different package type: 'mutable-jar'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjkwMjI0", "url": "https://github.com/quarkusio/quarkus/pull/9394#pullrequestreview-418290224", "createdAt": "2020-05-26T13:21:08Z", "commit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzoyMTowOVrOGad7vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzoyMTowOVrOGad7vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwNjU4OA==", "bodyText": "What is the reason to not use it?", "url": "https://github.com/quarkusio/quarkus/pull/9394#discussion_r430406588", "createdAt": "2020-05-26T13:21:09Z", "author": {"login": "geoand"}, "path": "independent-projects/bootstrap/runner/src/main/java/io/quarkus/bootstrap/runner/ReAugmentEntryPoint.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package io.quarkus.bootstrap.runner;\n+\n+import java.io.File;\n+import java.io.ObjectInputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLClassLoader;\n+import java.net.URLDecoder;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.List;\n+\n+/**\n+ * Experimental class that allows Quarkus applications to be re-augmented\n+ *\n+ */\n+public class ReAugmentEntryPoint {\n+\n+    public static void main(String... args) throws Exception {\n+        System.setProperty(\"java.util.logging.manager\", org.jboss.logmanager.LogManager.class.getName());\n+        Timing.staticInitStarted();\n+\n+        String path = ReAugmentEntryPoint.class.getProtectionDomain().getCodeSource().getLocation().getPath();\n+        String decodedPath = URLDecoder.decode(path, \"UTF-8\");\n+        Path appRoot = new File(decodedPath).toPath().getParent().getParent();\n+\n+        try (ObjectInputStream in = new ObjectInputStream(\n+                Files.newInputStream(appRoot.resolve(\"deployment-quarkus/deployment-class-path.dat\")))) {\n+            List<String> paths = (List<String>) in.readObject();\n+            //yuck, should use runner class loader", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjkxNTM2", "url": "https://github.com/quarkusio/quarkus/pull/9394#pullrequestreview-418291536", "createdAt": "2020-05-26T13:22:37Z", "commit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzIwMzIz", "url": "https://github.com/quarkusio/quarkus/pull/9394#pullrequestreview-418320323", "createdAt": "2020-05-26T13:53:20Z", "commit": {"oid": "f98e0393664788f56169d055d585335f845ab8dd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3289, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}