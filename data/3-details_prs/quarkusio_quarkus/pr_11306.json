{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTg5NDYx", "number": 11306, "title": "Introduce QuarkusPlatformDescriptor.getMetadata", "bodyText": "Needed for #11256", "createdAt": "2020-08-10T15:57:50Z", "url": "https://github.com/quarkusio/quarkus/pull/11306", "merged": true, "mergeCommit": {"oid": "3eb7ff547b015d69f79c8c9093bf3ebaf21dcaaa"}, "closed": true, "closedAt": "2020-08-11T11:11:13Z", "author": {"login": "gastaldi"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9kZNlgBqjM2Mzk0MzYxMTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-cNhhAFqTQ2NjU3NTEyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2366544e5054d12e51a2951873193f60eeebdd93", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2366544e5054d12e51a2951873193f60eeebdd93", "committedDate": "2020-08-10T15:57:08Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "2a250785155e878fe5642268565f2a287543abd7", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2a250785155e878fe5642268565f2a287543abd7", "committedDate": "2020-08-10T15:59:23Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a250785155e878fe5642268565f2a287543abd7", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2a250785155e878fe5642268565f2a287543abd7", "committedDate": "2020-08-10T15:59:23Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "04c65cebb669727897b17f68b7e1fb9adc3e7ea4", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/04c65cebb669727897b17f68b7e1fb9adc3e7ea4", "committedDate": "2020-08-10T16:00:21Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mzg4OTk1", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-464388995", "createdAt": "2020-08-10T16:29:45Z", "commit": {"oid": "04c65cebb669727897b17f68b7e1fb9adc3e7ea4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjoyOTo0NVrOG-WTQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjoyOTo0NVrOG-WTQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAzMDI3Mw==", "bodyText": "master appears to be platforms.get(0)?\nThis does not look consistent with how other pieces (extensions, managed deps) are merged, i.e. in other places what appears first wins while here the last platform overrides the previous one, including the master.", "url": "https://github.com/quarkusio/quarkus/pull/11306#discussion_r468030273", "createdAt": "2020-08-10T16:29:45Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/tools/platform-descriptor-api/src/main/java/io/quarkus/platform/descriptor/CombinedQuarkusPlatformDescriptor.java", "diffHunk": "@@ -79,6 +82,16 @@ public String getQuarkusVersion() {\n         return master.getQuarkusVersion();\n     }\n \n+    @Override\n+    public Map<String, Object> getMetadata() {\n+        Map<String, Object> metadata = new LinkedHashMap<>();\n+        metadata.putAll(master.getMetadata());\n+        for (QuarkusPlatformDescriptor platform : platforms) {\n+            metadata.putAll(platform.getMetadata());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04c65cebb669727897b17f68b7e1fb9adc3e7ea4"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04c65cebb669727897b17f68b7e1fb9adc3e7ea4", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/04c65cebb669727897b17f68b7e1fb9adc3e7ea4", "committedDate": "2020-08-10T16:00:21Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "26146c05d19b4e7d68c67ac4719bbb2453c76062", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/26146c05d19b4e7d68c67ac4719bbb2453c76062", "committedDate": "2020-08-10T17:00:38Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26146c05d19b4e7d68c67ac4719bbb2453c76062", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/26146c05d19b4e7d68c67ac4719bbb2453c76062", "committedDate": "2020-08-10T17:00:38Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "f7eed7d3ab192b0eaebc605eb2f84bc137a5b704", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f7eed7d3ab192b0eaebc605eb2f84bc137a5b704", "committedDate": "2020-08-10T17:01:34Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7eed7d3ab192b0eaebc605eb2f84bc137a5b704", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f7eed7d3ab192b0eaebc605eb2f84bc137a5b704", "committedDate": "2020-08-10T17:01:34Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "8810ae930d05bd7acb4dbdeae3896ecb9e542ccd", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/8810ae930d05bd7acb4dbdeae3896ecb9e542ccd", "committedDate": "2020-08-10T17:02:47Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8810ae930d05bd7acb4dbdeae3896ecb9e542ccd", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/8810ae930d05bd7acb4dbdeae3896ecb9e542ccd", "committedDate": "2020-08-10T17:02:47Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "7dae67c381481fc6669188b540d74440509aa718", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/7dae67c381481fc6669188b540d74440509aa718", "committedDate": "2020-08-10T17:07:29Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52023fc3716b483617bd9d69ad971fe1910fab8f", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/52023fc3716b483617bd9d69ad971fe1910fab8f", "committedDate": "2020-08-10T17:09:29Z", "message": "Introduce QuarkusPlatformDescriptor.getMetadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7dae67c381481fc6669188b540d74440509aa718", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/7dae67c381481fc6669188b540d74440509aa718", "committedDate": "2020-08-10T17:07:29Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9398e6a6e997c4dce49a21ce349e832ec3cd449", "committedDate": "2020-08-10T17:09:29Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODk3NDU0", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-464897454", "createdAt": "2020-08-11T09:26:02Z", "commit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOToyNjowMlrOG-vurQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOToyNjowMlrOG-vurQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ0Njg5Mw==", "bodyText": "As the plan is to backport it, I would prefer we don't change this behavior and only do it in a follow-up PR for 1.8.", "url": "https://github.com/quarkusio/quarkus/pull/11306#discussion_r468446893", "createdAt": "2020-08-11T09:26:02Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/java/io/quarkus/platform/descriptor/loader/json/impl/QuarkusJsonPlatformDescriptorLoaderImpl.java", "diffHunk": "@@ -20,7 +21,7 @@ public QuarkusJsonPlatformDescriptor load(final QuarkusJsonPlatformDescriptorLoa\n                     try {\n                         ObjectMapper mapper = new ObjectMapper()\n                                 .enable(JsonParser.Feature.ALLOW_COMMENTS)\n-                                .enable(JsonParser.Feature.ALLOW_NUMERIC_LEADING_ZEROS)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTI0Nzk4", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-464924798", "createdAt": "2020-08-11T10:04:14Z", "commit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTI2ODAz", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-464926803", "createdAt": "2020-08-11T10:07:14Z", "commit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTQ3Njg0", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-464947684", "createdAt": "2020-08-11T10:40:00Z", "commit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac805a6f9c136de0174ea619991a3193f1f61ec", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/aac805a6f9c136de0174ea619991a3193f1f61ec", "committedDate": "2020-08-11T10:49:35Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9398e6a6e997c4dce49a21ce349e832ec3cd449", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/b9398e6a6e997c4dce49a21ce349e832ec3cd449", "committedDate": "2020-08-10T17:09:29Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}, "afterCommit": {"oid": "aac805a6f9c136de0174ea619991a3193f1f61ec", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/aac805a6f9c136de0174ea619991a3193f1f61ec", "committedDate": "2020-08-11T10:49:35Z", "message": "Make platform parsing lenient\n\nThis helps when future changes to the platform JSON are needed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NTc1MTIx", "url": "https://github.com/quarkusio/quarkus/pull/11306#pullrequestreview-466575121", "createdAt": "2020-08-13T09:01:29Z", "commit": {"oid": "aac805a6f9c136de0174ea619991a3193f1f61ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwOTowMTozMFrOHACmSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwOTowMTozMFrOHACmSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwNDYxOQ==", "bodyText": "@gastaldi @aloubyansky mind that when we actually set this data, we will need:\n\"repositories\" : {\n    \"id\": \"redhat\",\n    \"url\": \"https://maven.repository.redhat.com\",\n    \"releases-enabled\": \"true\",\n    \"snapshots-enabled\": \"false\"\n},\n\"plugin-repositories\" : {\n    \"id\": \"redhat\",\n    \"url\": \"https://maven.repository.redhat.com\",\n    \"releases-enabled\": \"true\",\n    \"snapshots-enabled\": \"false\"\n}", "url": "https://github.com/quarkusio/quarkus/pull/11306#discussion_r469804619", "createdAt": "2020-08-13T09:01:30Z", "author": {"login": "ia3andy"}, "path": "devtools/platform-descriptor-json/src/test/resources/fakeextensions.json", "diffHunk": "@@ -1,5 +1,27 @@\n \n {\n+    \"any-future-property\" : \"blah\",\n+    \"metadata\":{\n+        \"application-properties\": {\n+            \"quarkus.native.builder-image\" : \"foo-bar\"\n+        },\n+        \"maven\" :  {\n+            \"repositories\" : {\n+                \"id\": \"redhat\",\n+                \"url\": \"https://maven.repository.redhat.com\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aac805a6f9c136de0174ea619991a3193f1f61ec"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 954, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}