{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NjE3Mjgy", "number": 8312, "title": "Bug/kubernetes extension replicas fix", "bodyText": "Fixes #8273", "createdAt": "2020-03-31T21:34:07Z", "url": "https://github.com/quarkusio/quarkus/pull/8312", "merged": true, "mergeCommit": {"oid": "4ff3a1cebb575eeacf51c404fc33f77644cffbc9"}, "closed": true, "closedAt": "2020-04-07T12:31:55Z", "author": {"login": "cemnura"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTQyHkAFqTM4NTI3MjQyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVSfvRgFqTM4OTA2NzE0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MjcyNDI4", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-385272428", "createdAt": "2020-04-01T05:22:58Z", "commit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNToyMjo1OVrOF-xNIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNToyMjo1OVrOF-xNIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM2MjIwOQ==", "bodyText": "This is the \"legacy\" way of doing things and we would really like to avoid it", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r401362209", "createdAt": "2020-04-01T05:22:59Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesConfigUtil.java", "diffHunk": "@@ -63,6 +63,7 @@\n             p.getPartOf().ifPresent(g -> quarkusPrefixed.put(DEKORATE_PREFIX + p.getConfigName() + \".part-of\", g));\n             p.getName().ifPresent(n -> quarkusPrefixed.put(DEKORATE_PREFIX + p.getConfigName() + \".name\", n));\n             p.getVersion().ifPresent(v -> quarkusPrefixed.put(DEKORATE_PREFIX + p.getConfigName() + \".version\", v));\n+            p.getReplicas().ifPresent(r -> quarkusPrefixed.put(DEKORATE_PREFIX + p.getConfigName() + \".replicas\", r));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzE4OTQ3", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-385318947", "createdAt": "2020-04-01T07:14:59Z", "commit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTowMFrOF-zndg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTowMFrOF-zndg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQwMTcxOA==", "bodyText": "I think we should probably use:\n    @ConfigItem(defaultValue = \"1\")\n    Integer replicas;\n\nIt will make the default more visible.", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r401401718", "createdAt": "2020-04-01T07:15:00Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesConfig.java", "diffHunk": "@@ -95,6 +96,12 @@\n     @ConfigItem\n     Map<String, PortConfig> ports;\n \n+    /**\n+     * The number of desired pods\n+     */\n+    @ConfigItem\n+    OptionalInt replicas;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzE5Mjgz", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-385319283", "createdAt": "2020-04-01T07:15:32Z", "commit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTozMlrOF-zoZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTozMlrOF-zoZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQwMTk1Nw==", "bodyText": "I guess we need to drop this since Knative doesn't seem to have replicas.", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r401401957", "createdAt": "2020-04-01T07:15:32Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KnativeConfig.java", "diffHunk": "@@ -95,6 +96,12 @@\n     @ConfigItem\n     Map<String, PortConfig> ports;\n \n+    /**\n+     * The number of desired pods\n+     */\n+    @ConfigItem\n+    OptionalInt replicas;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzE5NDI3", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-385319427", "createdAt": "2020-04-01T07:15:48Z", "commit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTo0OFrOF-zovQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNzoxNTo0OFrOF-zovQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQwMjA0NQ==", "bodyText": "Same comment as the KubernetesConfig", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r401402045", "createdAt": "2020-04-01T07:15:48Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/OpenshiftConfig.java", "diffHunk": "@@ -96,6 +97,12 @@\n     @ConfigItem\n     Map<String, PortConfig> ports;\n \n+    /**\n+     * The number of desired pods\n+     */\n+    @ConfigItem\n+    OptionalInt replicas;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd", "committedDate": "2020-03-31T19:47:32Z", "message": "Enabled kubernetes & openshift replicas configuration to be generated in manifest files\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "6393fe6649062b5ca2f2b634b2509ec6f8b19121", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6393fe6649062b5ca2f2b634b2509ec6f8b19121", "committedDate": "2020-04-02T09:09:47Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6393fe6649062b5ca2f2b634b2509ec6f8b19121", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6393fe6649062b5ca2f2b634b2509ec6f8b19121", "committedDate": "2020-04-02T09:09:47Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "70ea4edfd58af43acaf84a8595f8b46b90a25613", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/70ea4edfd58af43acaf84a8595f8b46b90a25613", "committedDate": "2020-04-02T09:49:24Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70ea4edfd58af43acaf84a8595f8b46b90a25613", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/70ea4edfd58af43acaf84a8595f8b46b90a25613", "committedDate": "2020-04-02T09:49:24Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "98e3cbe6c3bad7780380418f3147ddfce0992c7f", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/98e3cbe6c3bad7780380418f3147ddfce0992c7f", "committedDate": "2020-04-02T10:09:01Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2Mjg3ODE4", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-386287818", "createdAt": "2020-04-02T10:14:39Z", "commit": {"oid": "98e3cbe6c3bad7780380418f3147ddfce0992c7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMDoxNDozOVrOF_kitg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMDoxNDozOVrOF_kitg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjIwMzMxOA==", "bodyText": "@iocanel what do you think about this? Would you have a different suggestion on how to override after() method", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r402203318", "createdAt": "2020-04-02T10:14:39Z", "author": {"login": "cemnura"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/OpenshiftApplyReplicasDecorator.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.dekorate.kubernetes.decorator.Decorator;\n+import io.dekorate.kubernetes.decorator.NamedResourceDecorator;\n+import io.dekorate.openshift.decorator.ApplyReplicasDecorator;\n+\n+public class OpenshiftApplyReplicasDecorator extends ApplyReplicasDecorator {\n+\n+    public OpenshiftApplyReplicasDecorator(int replicas) {\n+        super(replicas);\n+    }\n+\n+    @Override\n+    public Class<? extends Decorator>[] after() {\n+        return new Class[] { NamedResourceDecorator.class };\n+    }\n+\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98e3cbe6c3bad7780380418f3147ddfce0992c7f"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98e3cbe6c3bad7780380418f3147ddfce0992c7f", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/98e3cbe6c3bad7780380418f3147ddfce0992c7f", "committedDate": "2020-04-02T10:09:01Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/df692696ac70848902a247ba8197d1926d9ec6fd", "committedDate": "2020-04-02T11:26:48Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzM3ODEy", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-386337812", "createdAt": "2020-04-02T11:32:05Z", "commit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTozMjowNVrOF_m_2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTozMjowNVrOF_m_2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0MzU0Nw==", "bodyText": "@geoand I deleted the getReplicas() method from PlatformConfiguration and applied the decator addition for kubernetes and openshift like this. Would you have any suggestions?", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r402243547", "createdAt": "2020-04-02T11:32:05Z", "author": {"login": "cemnura"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java", "diffHunk": "@@ -403,6 +403,11 @@ private void applyBuildItems(Session session,\n         configMap.put(OPENSHIFT, openshiftConfig);\n         configMap.put(KNATIVE, knativeConfig);\n \n+        //Replicas\n+        kubernetesConfig.getReplicas()\n+                .ifPresent(i -> session.resources().decorate(new KubernetesApplyReplicasDecorator(kubernetesName, i)));\n+        openshiftConfig.getReplicas().ifPresent(i -> session.resources().decorate(new OpenshiftApplyReplicasDecorator(i)));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MzQ5Mjky", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-386349292", "createdAt": "2020-04-02T11:50:50Z", "commit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTo1MDo1MFrOF_njzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTo1MDo1MFrOF_njzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI1Mjc0OQ==", "bodyText": "Please don't use \"star\" imports in Quarkus.", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r402252749", "createdAt": "2020-04-02T11:50:50Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesApplyReplicasDecorator.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.dekorate.kubernetes.decorator.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df692696ac70848902a247ba8197d1926d9ec6fd", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/df692696ac70848902a247ba8197d1926d9ec6fd", "committedDate": "2020-04-02T11:26:48Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "f24a71d31e9182a98668b5d6c42b37151426fd20", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/f24a71d31e9182a98668b5d6c42b37151426fd20", "committedDate": "2020-04-02T11:55:49Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f24a71d31e9182a98668b5d6c42b37151426fd20", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/f24a71d31e9182a98668b5d6c42b37151426fd20", "committedDate": "2020-04-02T11:55:49Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "6a1897771a5631b0c622549848fef0c19e5aad19", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6a1897771a5631b0c622549848fef0c19e5aad19", "committedDate": "2020-04-03T09:20:29Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MDk2MDc4", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-387096078", "createdAt": "2020-04-03T09:26:23Z", "commit": {"oid": "6a1897771a5631b0c622549848fef0c19e5aad19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NzY0ODE3", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-386764817", "createdAt": "2020-04-02T20:22:18Z", "commit": {"oid": "f24a71d31e9182a98668b5d6c42b37151426fd20"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQyMDoyMjoxOFrOF_7-HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQyMDoyMjoxOFrOF_7-HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU4NzE2NQ==", "bodyText": "Sorry missed this. Not really I preferred OptionalInt to be able to check the value and create ApplyReplicasDecorator. But I am assuming that since the default value is now 1 this field is basically never empty therefore no need to check if the value exists? If so then that sounds like a good idea. Shall I update it?", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r402587165", "createdAt": "2020-04-02T20:22:18Z", "author": {"login": "cemnura"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesConfig.java", "diffHunk": "@@ -95,6 +96,12 @@\n     @ConfigItem\n     Map<String, PortConfig> ports;\n \n+    /**\n+     * The number of desired pods\n+     */\n+    @ConfigItem\n+    OptionalInt replicas;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQwMTcxOA=="}, "originalCommit": {"oid": "6f810f23d5ed0f05f48ff2fb89bb5339a39a46fd"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MDg5ODc5", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-388089879", "createdAt": "2020-04-06T09:44:21Z", "commit": {"oid": "6a1897771a5631b0c622549848fef0c19e5aad19"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo0Nzo0MlrOGBP9Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo1MjoxNlrOGBQHmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2MzE4Nw==", "bodyText": "Just to be on the safe side of things, I would explicitly express that I want to it to be called after the ApplyReplicasDecorator. Why?\n\nIt justifies the purpose of the class\nIt makes it easy to understand which dekorator is applied first. (e.g. atm I can't understand which will be applied first without checking the sources of AppliedReplicasDecorator).", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r403963187", "createdAt": "2020-04-06T09:47:42Z", "author": {"login": "iocanel"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesApplyReplicasDecorator.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.dekorate.kubernetes.decorator.ApplyReplicasDecorator;\n+import io.dekorate.kubernetes.decorator.Decorator;\n+import io.dekorate.kubernetes.decorator.NamedResourceDecorator;\n+\n+public class KubernetesApplyReplicasDecorator extends ApplyReplicasDecorator {\n+\n+    public KubernetesApplyReplicasDecorator(int replicas) {\n+        super(replicas);\n+    }\n+\n+    public KubernetesApplyReplicasDecorator(String deploymentName, int replicas) {\n+        super(deploymentName, replicas);\n+    }\n+\n+    @Override\n+    public Class<? extends Decorator>[] after() {\n+        return new Class[] { NamedResourceDecorator.class };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a1897771a5631b0c622549848fef0c19e5aad19"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2NTg1MQ==", "bodyText": "I would prefer if it also included ApplyReplicasDecorator (same reasoning as the kubernetes variant).", "url": "https://github.com/quarkusio/quarkus/pull/8312#discussion_r403965851", "createdAt": "2020-04-06T09:52:16Z", "author": {"login": "iocanel"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/OpenshiftApplyReplicasDecorator.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.dekorate.kubernetes.decorator.Decorator;\n+import io.dekorate.kubernetes.decorator.NamedResourceDecorator;\n+import io.dekorate.openshift.decorator.ApplyReplicasDecorator;\n+\n+public class OpenshiftApplyReplicasDecorator extends ApplyReplicasDecorator {\n+\n+    public OpenshiftApplyReplicasDecorator(int replicas) {\n+        super(replicas);\n+    }\n+\n+    @Override\n+    public Class<? extends Decorator>[] after() {\n+        return new Class[] { NamedResourceDecorator.class };\n+    }\n+\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjIwMzMxOA=="}, "originalCommit": {"oid": "98e3cbe6c3bad7780380418f3147ddfce0992c7f"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6106870c0fb6e4b69a92e702f4615ba15c43576b", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6106870c0fb6e4b69a92e702f4615ba15c43576b", "committedDate": "2020-04-06T15:40:18Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a1897771a5631b0c622549848fef0c19e5aad19", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6a1897771a5631b0c622549848fef0c19e5aad19", "committedDate": "2020-04-03T09:20:29Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}, "afterCommit": {"oid": "6106870c0fb6e4b69a92e702f4615ba15c43576b", "author": {"user": {"login": "cemnura", "name": "Cem Nura"}}, "url": "https://github.com/quarkusio/quarkus/commit/6106870c0fb6e4b69a92e702f4615ba15c43576b", "committedDate": "2020-04-06T15:40:18Z", "message": "Enabled replicas configuration for kubernetes and openshift to be generated\n\nSigned-off-by: Cem Nura <cem.nura@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MDY3MTQy", "url": "https://github.com/quarkusio/quarkus/pull/8312#pullrequestreview-389067142", "createdAt": "2020-04-07T12:31:27Z", "commit": {"oid": "6106870c0fb6e4b69a92e702f4615ba15c43576b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4649, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}