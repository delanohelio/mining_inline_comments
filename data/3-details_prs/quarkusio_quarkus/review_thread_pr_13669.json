{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxODUxMDg0", "number": 13669, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowOTo1M1rOFAVTzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo1MDo0NlrOFAw5zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODkzNDU0OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowOTo1M1rOH-kcKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNzoyNzowMFrOH-oZlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MDc5Mw==", "bodyText": "Consider this wording instead?\nUsing container engine %s to run the native image builder, ....", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r535370793", "createdAt": "2020-12-03T16:09:53Z", "author": {"login": "jerboaa"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -343,23 +344,25 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n     public static List<String> setupContainerBuild(NativeConfig nativeConfig,\n             Optional<ProcessInheritIODisabled> processInheritIODisabled, Path outputDir) {\n         List<String> nativeImage;\n-        String containerRuntime = nativeConfig.containerRuntime.orElse(\"docker\");\n+        final ContainerRuntime containerRuntime = nativeConfig.containerRuntime\n+                .orElseGet(NativeImageBuildStep::detectContainerRuntime);\n+        log.infof(\"Using %s to build the native image\", containerRuntime.getExecutableName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM5OTQ0MA==", "bodyText": "Thanks, I reworded a bit differently from your suggestion. I prefer to avoid using \"container engine\" since the existing parameter is named \"container runtime\"", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r535399440", "createdAt": "2020-12-03T16:45:20Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -343,23 +344,25 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n     public static List<String> setupContainerBuild(NativeConfig nativeConfig,\n             Optional<ProcessInheritIODisabled> processInheritIODisabled, Path outputDir) {\n         List<String> nativeImage;\n-        String containerRuntime = nativeConfig.containerRuntime.orElse(\"docker\");\n+        final ContainerRuntime containerRuntime = nativeConfig.containerRuntime\n+                .orElseGet(NativeImageBuildStep::detectContainerRuntime);\n+        log.infof(\"Using %s to build the native image\", containerRuntime.getExecutableName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MDc5Mw=="}, "originalCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQzNTY2OA==", "bodyText": "Fine with me.", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r535435668", "createdAt": "2020-12-03T17:27:00Z", "author": {"login": "jerboaa"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -343,23 +344,25 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n     public static List<String> setupContainerBuild(NativeConfig nativeConfig,\n             Optional<ProcessInheritIODisabled> processInheritIODisabled, Path outputDir) {\n         List<String> nativeImage;\n-        String containerRuntime = nativeConfig.containerRuntime.orElse(\"docker\");\n+        final ContainerRuntime containerRuntime = nativeConfig.containerRuntime\n+                .orElseGet(NativeImageBuildStep::detectContainerRuntime);\n+        log.infof(\"Using %s to build the native image\", containerRuntime.getExecutableName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MDc5Mw=="}, "originalCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MzQ1NTQ5OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo1MDo0NlrOH_NiMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMjoxNjo0MlrOH_OZAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0NDA4MA==", "bodyText": "The comment implies that podman is preferred over docker but the code does the opposite.", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r536044080", "createdAt": "2020-12-04T11:50:46Z", "author": {"login": "zakkak"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -394,6 +397,51 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n         return nativeImage;\n     }\n \n+    /**\n+     * @return {@link ContainerRuntime#PODMAN} if the podman executable exists in the environment or if the docker executable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA1ODA1Mw==", "bodyText": "Yeah, that was the initial behavior, but I changed later on and forgot to update the Javadoc \ud83d\ude1b", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r536058053", "createdAt": "2020-12-04T12:16:36Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -394,6 +397,51 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n         return nativeImage;\n     }\n \n+    /**\n+     * @return {@link ContainerRuntime#PODMAN} if the podman executable exists in the environment or if the docker executable", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0NDA4MA=="}, "originalCommit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA1ODExNA==", "bodyText": "#13699 fixes this", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r536058114", "createdAt": "2020-12-04T12:16:42Z", "author": {"login": "zakkak"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -394,6 +397,51 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n         return nativeImage;\n     }\n \n+    /**\n+     * @return {@link ContainerRuntime#PODMAN} if the podman executable exists in the environment or if the docker executable", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0NDA4MA=="}, "originalCommit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3766, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}