{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjc5NjA5", "number": 8159, "title": "Make list-extensions work even if it's executed in a directory that doesn't have pom.xml", "bodyText": "\u2026oesn't have pom.xml\nFixes: #8157", "createdAt": "2020-03-25T16:07:07Z", "url": "https://github.com/quarkusio/quarkus/pull/8159", "merged": true, "mergeCommit": {"oid": "bf7fdc285f8e7581bf6b159e6e6345a52802cd6c"}, "closed": true, "closedAt": "2020-03-25T20:31:33Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRKBXMAFqTM4MTMxNjcyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRNjrkAFqTM4MTUxMTkxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzE2NzI4", "url": "https://github.com/quarkusio/quarkus/pull/8159#pullrequestreview-381316728", "createdAt": "2020-03-25T16:23:19Z", "commit": {"oid": "4281f0e044defd951da9cc292c90186520e52621"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyMzoyMFrOF7jXGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyMzoyMFrOF7jXGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4OTY1OQ==", "bodyText": "Maybe log.debug just in case?", "url": "https://github.com/quarkusio/quarkus/pull/8159#discussion_r397989659", "createdAt": "2020-03-25T16:23:20Z", "author": {"login": "gastaldi"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/ListExtensionsCommandHandler.java", "diffHunk": "@@ -66,30 +66,41 @@ public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws\n                     currentFormatter = this::conciseFormatter;\n             }\n \n-            final BuildFile buildFile = invocation.getBuildFile();\n+            final BuildFile buildFile = getBuildFileSafe(invocation);\n             loadedExtensions.forEach(extension -> display(extension, installed, all, currentFormatter, buildFile));\n \n-            if (\"concise\".equalsIgnoreCase(format)) {\n+            if (buildFile != null) {\n+                if (\"concise\".equalsIgnoreCase(format)) {\n+                    if (buildFile instanceof GradleBuildFile) {\n+                        System.out.println(\"\\nTo get more information, append --format=full to your command line.\");\n+                    } else {\n+                        System.out\n+                                .println(\n+                                        \"\\nTo get more information, append -Dquarkus.extension.format=full to your command line.\");\n+                    }\n+                }\n+\n                 if (buildFile instanceof GradleBuildFile) {\n-                    System.out.println(\"\\nTo get more information, append --format=full to your command line.\");\n+                    System.out.println(\"\\nAdd an extension to your project by adding the dependency to your \" +\n+                            \"build.gradle or use `./gradlew addExtension --extensions=\\\"artifactId\\\"`\");\n                 } else {\n-                    System.out\n-                            .println(\"\\nTo get more information, append -Dquarkus.extension.format=full to your command line.\");\n+                    System.out.println(\"\\nAdd an extension to your project by adding the dependency to your \" +\n+                            \"pom.xml or use `./mvnw quarkus:add-extension -Dextensions=\\\"artifactId\\\"`\");\n                 }\n             }\n-\n-            if (buildFile instanceof GradleBuildFile) {\n-                System.out.println(\"\\nAdd an extension to your project by adding the dependency to your \" +\n-                        \"build.gradle or use `./gradlew addExtension --extensions=\\\"artifactId\\\"`\");\n-            } else {\n-                System.out.println(\"\\nAdd an extension to your project by adding the dependency to your \" +\n-                        \"pom.xml or use `./mvnw quarkus:add-extension -Dextensions=\\\"artifactId\\\"`\");\n-            }\n         }\n \n         return QuarkusCommandOutcome.success();\n     }\n \n+    private BuildFile getBuildFileSafe(QuarkusCommandInvocation invocation) {\n+        try {\n+            return invocation.getBuildFile();\n+        } catch (Exception e) {\n+            return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4281f0e044defd951da9cc292c90186520e52621"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzE1MTA1", "url": "https://github.com/quarkusio/quarkus/pull/8159#pullrequestreview-381315105", "createdAt": "2020-03-25T16:21:38Z", "commit": {"oid": "4281f0e044defd951da9cc292c90186520e52621"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyMTozOFrOF7jSFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyMTozOFrOF7jSFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4ODM3NA==", "bodyText": "Can it be on 2 lines with nicer formatting?", "url": "https://github.com/quarkusio/quarkus/pull/8159#discussion_r397988374", "createdAt": "2020-03-25T16:21:38Z", "author": {"login": "rsvoboda"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/ListExtensionsCommandHandler.java", "diffHunk": "@@ -66,30 +66,41 @@ public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws\n                     currentFormatter = this::conciseFormatter;\n             }\n \n-            final BuildFile buildFile = invocation.getBuildFile();\n+            final BuildFile buildFile = getBuildFileSafe(invocation);\n             loadedExtensions.forEach(extension -> display(extension, installed, all, currentFormatter, buildFile));\n \n-            if (\"concise\".equalsIgnoreCase(format)) {\n+            if (buildFile != null) {\n+                if (\"concise\".equalsIgnoreCase(format)) {\n+                    if (buildFile instanceof GradleBuildFile) {\n+                        System.out.println(\"\\nTo get more information, append --format=full to your command line.\");\n+                    } else {\n+                        System.out", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4281f0e044defd951da9cc292c90186520e52621"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a81b1753e34230c7f96f4f47c5616b58d922af77", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/a81b1753e34230c7f96f4f47c5616b58d922af77", "committedDate": "2020-03-25T16:38:19Z", "message": "Make list-extensions work even if it's executed in a directory that doesn't have pom.xml\n\nFixes: #8157"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4281f0e044defd951da9cc292c90186520e52621", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/4281f0e044defd951da9cc292c90186520e52621", "committedDate": "2020-03-25T16:06:48Z", "message": "Make list-extensions work even if it's executed in a directory that doesn't have pom.xml\n\nFixes: #8157"}, "afterCommit": {"oid": "a81b1753e34230c7f96f4f47c5616b58d922af77", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/a81b1753e34230c7f96f4f47c5616b58d922af77", "committedDate": "2020-03-25T16:38:19Z", "message": "Make list-extensions work even if it's executed in a directory that doesn't have pom.xml\n\nFixes: #8157"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNTExOTEw", "url": "https://github.com/quarkusio/quarkus/pull/8159#pullrequestreview-381511910", "createdAt": "2020-03-25T20:30:32Z", "commit": {"oid": "a81b1753e34230c7f96f4f47c5616b58d922af77"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3624, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}