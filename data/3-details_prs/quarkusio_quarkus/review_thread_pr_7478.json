{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMjUxNTQ5", "number": 7478, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNzo1NDozNVrODjuVrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyODozMlrODlFs-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Nzg1OTY3OnYy", "diffSide": "RIGHT", "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNzo1NDozNVrOFvsNzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNzo1NTozN1rOFvsPAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MTgyMg==", "bodyText": "question: what does that do/help ?", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385551822", "createdAt": "2020-02-28T07:54:35Z", "author": {"login": "maxandersen"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "diffHunk": "@@ -21,7 +21,7 @@\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = IsBanner.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MTkzMA==", "bodyText": "ah never mind - should read the full PR brefore commenting gaf!", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385551930", "createdAt": "2020-02-28T07:54:56Z", "author": {"login": "maxandersen"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "diffHunk": "@@ -21,7 +21,7 @@\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = IsBanner.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MTgyMg=="}, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MjEzMQ==", "bodyText": "Essentially the build step runs iff IsBanner#getAsBoolean returns true", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385552131", "createdAt": "2020-02-28T07:55:37Z", "author": {"login": "geoand"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "diffHunk": "@@ -21,7 +21,7 @@\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = IsBanner.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MTgyMg=="}, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODU5NTY2OnYy", "diffSide": "RIGHT", "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjoxODo1NVrOFvzIHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjoyNToxNFrOFvzRyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NTA1NA==", "bodyText": "I would have made it runtime so I would read the banner in any case and just condition the display at runtime.", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385665054", "createdAt": "2020-02-28T12:18:55Z", "author": {"login": "gsmet"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerConfig.java", "diffHunk": "@@ -5,6 +5,13 @@\n \n @ConfigRoot(name = \"banner\")\n public class BannerConfig {\n+\n+    /**\n+     * Whether or not the banner will be displayed\n+     */\n+    @ConfigItem(defaultValue = \"true\")\n+    public boolean enabled;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NzUzMQ==", "bodyText": "I would say let's keep it build time for now. We can always make it runtime in the future if needed", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385667531", "createdAt": "2020-02-28T12:25:14Z", "author": {"login": "geoand"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerConfig.java", "diffHunk": "@@ -5,6 +5,13 @@\n \n @ConfigRoot(name = \"banner\")\n public class BannerConfig {\n+\n+    /**\n+     * Whether or not the banner will be displayed\n+     */\n+    @ConfigItem(defaultValue = \"true\")\n+    public boolean enabled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NTA1NA=="}, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODU5NzM4OnYy", "diffSide": "RIGHT", "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjoxOTozNVrOFvzJJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjoyNDoyNlrOFvzQqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NTMxOQ==", "bodyText": "Not really a big fan of this pattern of injecting the config in the supplier. Well and it won't work if we want to make it runtime :).", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385665319", "createdAt": "2020-02-28T12:19:35Z", "author": {"login": "gsmet"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "diffHunk": "@@ -21,7 +21,7 @@\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = IsBanner.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NzI0Mw==", "bodyText": "I on the other hand love it\ud83d\ude0e. To make it makes things very clear. Plus we use it all over the place.\nIndeed if we decide to make the property a runtime one it will have to change", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r385667243", "createdAt": "2020-02-28T12:24:26Z", "author": {"login": "geoand"}, "path": "extensions/banner/deployment/src/main/java/io/quarkus/banner/deployment/BannerProcessor.java", "diffHunk": "@@ -21,7 +21,7 @@\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = IsBanner.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NTMxOQ=="}, "originalCommit": {"oid": "0798d599dc19a9b342f4fa58a0ae3a56766c1aee"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzgwODYyOnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDoyOTozMVrOFxIA1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDoyOTozMVrOFxIA1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1NTgzMA==", "bodyText": "Shouldn't it be something like:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @BuildStep(onlyIf = IsDevelopment.class)\n          \n          \n            \n                @BuildStep(onlyIf = { IsBanner.class, IsDevelopment.class })", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387055830", "createdAt": "2020-03-03T14:29:31Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -8,27 +8,30 @@\n \n import org.jboss.logging.Logger;\n \n-import io.quarkus.banner.runtime.BannerRecorder;\n+import io.quarkus.BannerConfig;\n+import io.quarkus.IsBanner;\n import io.quarkus.builder.Version;\n+import io.quarkus.deployment.IsDevelopment;\n import io.quarkus.deployment.annotations.BuildStep;\n import io.quarkus.deployment.annotations.ExecutionTime;\n import io.quarkus.deployment.annotations.Record;\n import io.quarkus.deployment.builditem.ConsoleFormatterBannerBuildItem;\n import io.quarkus.deployment.builditem.HotDeploymentWatchedFileBuildItem;\n import io.quarkus.deployment.util.FileUtil;\n+import io.quarkus.runtime.BannerRecorder;\n \n public class BannerProcessor {\n \n     private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n \n-    @BuildStep(loadsApplicationClasses = true)\n+    @BuildStep(loadsApplicationClasses = true, onlyIf = { IsBanner.class, IsDevelopment.class })\n     @Record(ExecutionTime.RUNTIME_INIT)\n     public ConsoleFormatterBannerBuildItem recordBanner(BannerRecorder recorder, BannerConfig config) {\n         String bannerText = readBannerFile(config);\n         return new ConsoleFormatterBannerBuildItem(recorder.provideBannerSupplier(bannerText));\n     }\n \n-    @BuildStep\n+    @BuildStep(onlyIf = IsDevelopment.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52f894c90bf9304c26e6a8c1c77a9a757f4be984"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzgyNDQ5OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/BannerConfig.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDozMzoyM1rOFxIKog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDo1OTo0MlrOFxJVNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1ODMzOA==", "bodyText": "Minor but could we still have an io.quarkus.banner package? I find it weird to have that one in the root package.", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387058338", "createdAt": "2020-03-03T14:33:23Z", "author": {"login": "gsmet"}, "path": "core/deployment/src/main/java/io/quarkus/BannerConfig.java", "diffHunk": "@@ -1,10 +1,17 @@\n-package io.quarkus.banner.deployment;\n+package io.quarkus;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52f894c90bf9304c26e6a8c1c77a9a757f4be984"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA3NDMzMg==", "bodyText": "Sure, no problem", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387074332", "createdAt": "2020-03-03T14:55:25Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/BannerConfig.java", "diffHunk": "@@ -1,10 +1,17 @@\n-package io.quarkus.banner.deployment;\n+package io.quarkus;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1ODMzOA=="}, "originalCommit": {"oid": "52f894c90bf9304c26e6a8c1c77a9a757f4be984"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA3NzQzMA==", "bodyText": "Fixed", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387077430", "createdAt": "2020-03-03T14:59:42Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/BannerConfig.java", "diffHunk": "@@ -1,10 +1,17 @@\n-package io.quarkus.banner.deployment;\n+package io.quarkus;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1ODMzOA=="}, "originalCommit": {"oid": "52f894c90bf9304c26e6a8c1c77a9a757f4be984"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5ODc4MjQ4OnYy", "diffSide": "RIGHT", "path": "core/runtime/src/main/java/io/quarkus/runtime/BannerRecorder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxODoyNjo0M1rOFxRZFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxMzo0NFrOFxU7zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwOTQ5NA==", "bodyText": "Any chance we could avoid the lambda? It will end up being executed at runtime, right?", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387209494", "createdAt": "2020-03-03T18:26:43Z", "author": {"login": "gsmet"}, "path": "core/runtime/src/main/java/io/quarkus/runtime/BannerRecorder.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.runtime;\n+\n+import java.util.Optional;\n+import java.util.function.Supplier;\n+\n+import io.quarkus.runtime.annotations.Recorder;\n+\n+@Recorder\n+public class BannerRecorder {\n+\n+    public RuntimeValue<Optional<Supplier<String>>> provideBannerSupplier(String bannerText,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        if (bannerRuntimeConfig.enabled) {\n+            return new RuntimeValue<>(Optional.of(() -> bannerText));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ed381b2dd75d85fb961a310036bf7468d0ce31a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjYxOQ==", "bodyText": "I was pondering doing this anyway... Now I have a motive to \ud83d\ude43.", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387212619", "createdAt": "2020-03-03T18:32:26Z", "author": {"login": "geoand"}, "path": "core/runtime/src/main/java/io/quarkus/runtime/BannerRecorder.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.runtime;\n+\n+import java.util.Optional;\n+import java.util.function.Supplier;\n+\n+import io.quarkus.runtime.annotations.Recorder;\n+\n+@Recorder\n+public class BannerRecorder {\n+\n+    public RuntimeValue<Optional<Supplier<String>>> provideBannerSupplier(String bannerText,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        if (bannerRuntimeConfig.enabled) {\n+            return new RuntimeValue<>(Optional.of(() -> bannerText));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwOTQ5NA=="}, "originalCommit": {"oid": "3ed381b2dd75d85fb961a310036bf7468d0ce31a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2NzUzMw==", "bodyText": "Done", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387267533", "createdAt": "2020-03-03T20:13:44Z", "author": {"login": "geoand"}, "path": "core/runtime/src/main/java/io/quarkus/runtime/BannerRecorder.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.runtime;\n+\n+import java.util.Optional;\n+import java.util.function.Supplier;\n+\n+import io.quarkus.runtime.annotations.Recorder;\n+\n+@Recorder\n+public class BannerRecorder {\n+\n+    public RuntimeValue<Optional<Supplier<String>>> provideBannerSupplier(String bannerText,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        if (bannerRuntimeConfig.enabled) {\n+            return new RuntimeValue<>(Optional.of(() -> bannerText));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwOTQ5NA=="}, "originalCommit": {"oid": "3ed381b2dd75d85fb961a310036bf7468d0ce31a"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDU3MDAxOnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzoyODoxMlrOFxiaRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjoxOTo0NlrOFxrEbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA==", "bodyText": "this will only trigger if users override the banner name and don't just put default_banner.txt into their classpath root ...which I would think most would do because then they don't need to add anything to application.properties\nshould we instead have it be that if default path can't be resolved then we load our internal resource ?", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387488324", "createdAt": "2020-03-04T07:28:12Z", "author": {"login": "maxandersen"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4OTU2Mg==", "bodyText": "Currently what happens is the following:\nIf the user doesn't specify anything, the default is used. If the user does specify something that is not resolvable from the classpath root, we print a warning message.\nIf it is resolvable, we show it and also show the \"Powered by...\" text", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387489562", "createdAt": "2020-03-04T07:31:42Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5NTA4Nw==", "bodyText": "that\u2019s not what I'm seeing:\nif I have a file in my project called src/main/resources/default_banner.txt it uses my custom logo but Powered by is not added as isDefaultPath() is still true.", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387495087", "createdAt": "2020-03-04T07:47:37Z", "author": {"login": "maxandersen"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5NzQxMQ==", "bodyText": "Oh, now I see what you're saying. Yeah, I didn't think of that scenario and always changed the name.\nBut if you do that, there is no way to load the internal default_banner.txt, right?", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387497411", "createdAt": "2020-03-04T07:53:52Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNDgwNg==", "bodyText": "Maybe we should just always show Powered by Quarkus and be done with it although it does look weird", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387504806", "createdAt": "2020-03-04T08:12:55Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNTY4MA==", "bodyText": "i have an idea - let me try code it up.", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387505680", "createdAt": "2020-03-04T08:14:59Z", "author": {"login": "maxandersen"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYwNDE3NA==", "bodyText": "Nevermind my question above. We definitely can load all default_banner.txt. I'll take a look", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387604174", "createdAt": "2020-03-04T11:22:27Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzMDE4OA==", "bodyText": "PR to updated to take your use case into account", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387630188", "createdAt": "2020-03-04T12:19:46Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODMyNA=="}, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDU3MTcxOnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzoyODo0MlrOFxibLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzoyODo0MlrOFxibLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODU1Ng==", "bodyText": "I got a PR on geoand#1 but for right padding but for some reason that gives me a NPE in the java compiler ;)", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387488556", "createdAt": "2020-03-04T07:28:42Z", "author": {"login": "maxandersen"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -38,8 +42,12 @@ private String readBannerFile(BannerConfig config) {\n         if (resource != null) {\n             try (InputStream is = resource.openStream()) {\n                 byte[] content = FileUtil.readFileContents(is);\n-                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n-                return bannerTitle + \"\\n:: Quarkus :: v\" + Version.getVersion() + '\\n';\n+                StringBuilder bannerTitle = new StringBuilder(new String(content, StandardCharsets.UTF_8));\n+                bannerTitle.append('\\n');\n+                if (!config.isDefaultPath()) {\n+                    bannerTitle.append(\"Powered by Quarkus v\").append(Version.getVersion()).append('\\n');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20329e2f937c54a4b3d56e7c6dd7d553c781a2e"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjE3MzM3OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNToyODozMlrOFxx2rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTo1MDowN1rOFxyy4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0MTM1Nw==", "bodyText": "The more and more I think about it i think we are better of just always print this tag line...", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387741357", "createdAt": "2020-03-04T15:28:32Z", "author": {"login": "maxandersen"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package io.quarkus.deployment.steps;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.FileSystem;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.util.AbstractMap;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.Enumeration;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Scanner;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.banner.BannerConfig;\n+import io.quarkus.builder.Version;\n+import io.quarkus.deployment.IsTest;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.ConsoleFormatterBannerBuildItem;\n+import io.quarkus.deployment.builditem.HotDeploymentWatchedFileBuildItem;\n+import io.quarkus.deployment.util.FileUtil;\n+import io.quarkus.runtime.BannerRecorder;\n+import io.quarkus.runtime.BannerRuntimeConfig;\n+\n+public class BannerProcessor {\n+\n+    private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n+\n+    @BuildStep(loadsApplicationClasses = true, onlyIfNot = { IsTest.class })\n+    @Record(ExecutionTime.RUNTIME_INIT)\n+    public ConsoleFormatterBannerBuildItem recordBanner(BannerRecorder recorder, BannerConfig config,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        String bannerText = readBannerFile(config);\n+        return new ConsoleFormatterBannerBuildItem(recorder.provideBannerSupplier(bannerText, bannerRuntimeConfig));\n+    }\n+\n+    @BuildStep\n+    HotDeploymentWatchedFileBuildItem watchBannerChanges(BannerConfig config) {\n+        return new HotDeploymentWatchedFileBuildItem(config.path);\n+    }\n+\n+    private String readBannerFile(BannerConfig config) {\n+        try {\n+            Map.Entry<URL, Boolean> entry = getBanner(config);\n+            URL bannerResourceURL = entry.getKey();\n+            if (bannerResourceURL == null) {\n+                logger.warn(\"Could not locate banner file\");\n+                return \"\";\n+            }\n+            try (InputStream is = bannerResourceURL.openStream()) {\n+                byte[] content = FileUtil.readFileContents(is);\n+                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n+\n+                int width = 0;\n+                Scanner scanner = new Scanner(bannerTitle);\n+                while (scanner.hasNextLine()) {\n+                    width = Math.max(width, scanner.nextLine().length());\n+                }\n+\n+                String tagline = \"\\n\";\n+                Boolean isDefaultBanner = entry.getValue();\n+                if (!isDefaultBanner) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df70aedd4ca74d92ff4cad0def3b575009d90c65"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0NzQyMA==", "bodyText": "I thought @emmanuelbernard wanted to always print this tag line?", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387747420", "createdAt": "2020-03-04T15:36:37Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package io.quarkus.deployment.steps;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.FileSystem;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.util.AbstractMap;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.Enumeration;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Scanner;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.banner.BannerConfig;\n+import io.quarkus.builder.Version;\n+import io.quarkus.deployment.IsTest;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.ConsoleFormatterBannerBuildItem;\n+import io.quarkus.deployment.builditem.HotDeploymentWatchedFileBuildItem;\n+import io.quarkus.deployment.util.FileUtil;\n+import io.quarkus.runtime.BannerRecorder;\n+import io.quarkus.runtime.BannerRuntimeConfig;\n+\n+public class BannerProcessor {\n+\n+    private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n+\n+    @BuildStep(loadsApplicationClasses = true, onlyIfNot = { IsTest.class })\n+    @Record(ExecutionTime.RUNTIME_INIT)\n+    public ConsoleFormatterBannerBuildItem recordBanner(BannerRecorder recorder, BannerConfig config,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        String bannerText = readBannerFile(config);\n+        return new ConsoleFormatterBannerBuildItem(recorder.provideBannerSupplier(bannerText, bannerRuntimeConfig));\n+    }\n+\n+    @BuildStep\n+    HotDeploymentWatchedFileBuildItem watchBannerChanges(BannerConfig config) {\n+        return new HotDeploymentWatchedFileBuildItem(config.path);\n+    }\n+\n+    private String readBannerFile(BannerConfig config) {\n+        try {\n+            Map.Entry<URL, Boolean> entry = getBanner(config);\n+            URL bannerResourceURL = entry.getKey();\n+            if (bannerResourceURL == null) {\n+                logger.warn(\"Could not locate banner file\");\n+                return \"\";\n+            }\n+            try (InputStream is = bannerResourceURL.openStream()) {\n+                byte[] content = FileUtil.readFileContents(is);\n+                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n+\n+                int width = 0;\n+                Scanner scanner = new Scanner(bannerTitle);\n+                while (scanner.hasNextLine()) {\n+                    width = Math.max(width, scanner.nextLine().length());\n+                }\n+\n+                String tagline = \"\\n\";\n+                Boolean isDefaultBanner = entry.getValue();\n+                if (!isDefaultBanner) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0MTM1Nw=="}, "originalCommit": {"oid": "df70aedd4ca74d92ff4cad0def3b575009d90c65"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0OTk5Ng==", "bodyText": "All I said is that it said  Quarkus in the banner and right below powered by Quarkus v123 and Quarkus powered by Quarkus felt wrong to me.\nBut since we put the version too, maybe that's fine and we just always say Powered by Quarkus v123. I certainly did not want to spend 5FTE for 5 years on this problem :D", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387749996", "createdAt": "2020-03-04T15:40:22Z", "author": {"login": "emmanuelbernard"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package io.quarkus.deployment.steps;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.FileSystem;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.util.AbstractMap;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.Enumeration;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Scanner;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.banner.BannerConfig;\n+import io.quarkus.builder.Version;\n+import io.quarkus.deployment.IsTest;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.ConsoleFormatterBannerBuildItem;\n+import io.quarkus.deployment.builditem.HotDeploymentWatchedFileBuildItem;\n+import io.quarkus.deployment.util.FileUtil;\n+import io.quarkus.runtime.BannerRecorder;\n+import io.quarkus.runtime.BannerRuntimeConfig;\n+\n+public class BannerProcessor {\n+\n+    private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n+\n+    @BuildStep(loadsApplicationClasses = true, onlyIfNot = { IsTest.class })\n+    @Record(ExecutionTime.RUNTIME_INIT)\n+    public ConsoleFormatterBannerBuildItem recordBanner(BannerRecorder recorder, BannerConfig config,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        String bannerText = readBannerFile(config);\n+        return new ConsoleFormatterBannerBuildItem(recorder.provideBannerSupplier(bannerText, bannerRuntimeConfig));\n+    }\n+\n+    @BuildStep\n+    HotDeploymentWatchedFileBuildItem watchBannerChanges(BannerConfig config) {\n+        return new HotDeploymentWatchedFileBuildItem(config.path);\n+    }\n+\n+    private String readBannerFile(BannerConfig config) {\n+        try {\n+            Map.Entry<URL, Boolean> entry = getBanner(config);\n+            URL bannerResourceURL = entry.getKey();\n+            if (bannerResourceURL == null) {\n+                logger.warn(\"Could not locate banner file\");\n+                return \"\";\n+            }\n+            try (InputStream is = bannerResourceURL.openStream()) {\n+                byte[] content = FileUtil.readFileContents(is);\n+                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n+\n+                int width = 0;\n+                Scanner scanner = new Scanner(bannerTitle);\n+                while (scanner.hasNextLine()) {\n+                    width = Math.max(width, scanner.nextLine().length());\n+                }\n+\n+                String tagline = \"\\n\";\n+                Boolean isDefaultBanner = entry.getValue();\n+                if (!isDefaultBanner) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0MTM1Nw=="}, "originalCommit": {"oid": "df70aedd4ca74d92ff4cad0def3b575009d90c65"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc1Njc2OA==", "bodyText": "In that spirit, I saw we merge it now and then people can test and improve on something that actually exists and isn't vaporware :)", "url": "https://github.com/quarkusio/quarkus/pull/7478#discussion_r387756768", "createdAt": "2020-03-04T15:50:07Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/BannerProcessor.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package io.quarkus.deployment.steps;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.FileSystem;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.util.AbstractMap;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.Enumeration;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Scanner;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.banner.BannerConfig;\n+import io.quarkus.builder.Version;\n+import io.quarkus.deployment.IsTest;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.ConsoleFormatterBannerBuildItem;\n+import io.quarkus.deployment.builditem.HotDeploymentWatchedFileBuildItem;\n+import io.quarkus.deployment.util.FileUtil;\n+import io.quarkus.runtime.BannerRecorder;\n+import io.quarkus.runtime.BannerRuntimeConfig;\n+\n+public class BannerProcessor {\n+\n+    private static final Logger logger = Logger.getLogger(BannerProcessor.class);\n+\n+    @BuildStep(loadsApplicationClasses = true, onlyIfNot = { IsTest.class })\n+    @Record(ExecutionTime.RUNTIME_INIT)\n+    public ConsoleFormatterBannerBuildItem recordBanner(BannerRecorder recorder, BannerConfig config,\n+            BannerRuntimeConfig bannerRuntimeConfig) {\n+        String bannerText = readBannerFile(config);\n+        return new ConsoleFormatterBannerBuildItem(recorder.provideBannerSupplier(bannerText, bannerRuntimeConfig));\n+    }\n+\n+    @BuildStep\n+    HotDeploymentWatchedFileBuildItem watchBannerChanges(BannerConfig config) {\n+        return new HotDeploymentWatchedFileBuildItem(config.path);\n+    }\n+\n+    private String readBannerFile(BannerConfig config) {\n+        try {\n+            Map.Entry<URL, Boolean> entry = getBanner(config);\n+            URL bannerResourceURL = entry.getKey();\n+            if (bannerResourceURL == null) {\n+                logger.warn(\"Could not locate banner file\");\n+                return \"\";\n+            }\n+            try (InputStream is = bannerResourceURL.openStream()) {\n+                byte[] content = FileUtil.readFileContents(is);\n+                String bannerTitle = new String(content, StandardCharsets.UTF_8);\n+\n+                int width = 0;\n+                Scanner scanner = new Scanner(bannerTitle);\n+                while (scanner.hasNextLine()) {\n+                    width = Math.max(width, scanner.nextLine().length());\n+                }\n+\n+                String tagline = \"\\n\";\n+                Boolean isDefaultBanner = entry.getValue();\n+                if (!isDefaultBanner) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0MTM1Nw=="}, "originalCommit": {"oid": "df70aedd4ca74d92ff4cad0def3b575009d90c65"}, "originalPosition": 71}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 19, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}