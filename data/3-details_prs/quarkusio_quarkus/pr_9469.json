{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMzgxNjY4", "number": 9469, "title": "SSL support for Reactive SQL Clients", "bodyText": "Fixes quarkusio/quarkus-quickstarts#552, Fixes #6321", "createdAt": "2020-05-19T21:44:08Z", "url": "https://github.com/quarkusio/quarkus/pull/9469", "merged": true, "mergeCommit": {"oid": "88836efbb778502f2b0b4a6fa1c6a783b4edc7eb"}, "closed": true, "closedAt": "2020-06-19T08:36:22Z", "author": {"login": "tsegismont"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci7r8JABqjMzNTM4NTQwNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsGshygBqjM0NTI3Njg5MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a6fb7e654f08b8b556200c31fce05bbd9439a64", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/6a6fb7e654f08b8b556200c31fce05bbd9439a64", "committedDate": "2020-05-19T21:43:23Z", "message": "SSL support for Reactive Pg Client\n\nFixes #552"}, "afterCommit": {"oid": "73acac4862ab92986c15d884c64a2f36a1a0e21c", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/73acac4862ab92986c15d884c64a2f36a1a0e21c", "committedDate": "2020-05-19T21:51:45Z", "message": "SSL support for Reactive Pg Client\n\nFixes #552"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDY1ODY3", "url": "https://github.com/quarkusio/quarkus/pull/9469#pullrequestreview-417465867", "createdAt": "2020-05-25T05:40:02Z", "commit": {"oid": "35b2a349219b22f6a08aad14d455f02a7a62ea7e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNTo0MDowMlrOGZ1NOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNTo0Mjo0M1rOGZ1PjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTczOTMyMA==", "bodyText": "We try to avoid import statements using *.", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r429739320", "createdAt": "2020-05-25T05:40:02Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-pg-client/runtime/src/main/java/io/quarkus/reactive/pg/client/runtime/PgPoolRecorder.java", "diffHunk": "@@ -2,6 +2,7 @@\n \n import static io.quarkus.credentials.CredentialsProvider.PASSWORD_PROPERTY_NAME;\n import static io.quarkus.credentials.CredentialsProvider.USER_PROPERTY_NAME;\n+import static io.quarkus.vertx.core.runtime.SSLConfigHelper.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35b2a349219b22f6a08aad14d455f02a7a62ea7e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTczOTU5NA==", "bodyText": "Shouldn't we break the chain if we already configured the options?\nIf you use PEM, the chances to also use JKS PFX are 0, no?", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r429739594", "createdAt": "2020-05-25T05:41:15Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-pg-client/runtime/src/main/java/io/quarkus/reactive/pg/client/runtime/PgPoolRecorder.java", "diffHunk": "@@ -121,6 +122,18 @@ private PgConnectOptions toPgConnectOptions(DataSourceRuntimeConfig dataSourceRu\n             pgConnectOptions.setPipeliningLimit(dataSourceReactivePostgreSQLConfig.pipeliningLimit.getAsInt());\n         }\n \n+        if (dataSourceReactivePostgreSQLConfig.sslMode.isPresent()) {\n+            pgConnectOptions.setSslMode(dataSourceReactivePostgreSQLConfig.sslMode.get());\n+        }\n+\n+        configurePemTrustOptions(pgConnectOptions, dataSourceReactivePostgreSQLConfig.trustCertificatePem);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35b2a349219b22f6a08aad14d455f02a7a62ea7e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTczOTkxNw==", "bodyText": "This should be done directly in the config class. List are comma-separated by default. See the last example from https://github.com/eclipse/microprofile-config/blob/master/spec/src/main/asciidoc/configexamples.asciidoc.", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r429739917", "createdAt": "2020-05-25T05:42:43Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-core/runtime/src/main/java/io/quarkus/vertx/core/runtime/SSLConfigHelper.java", "diffHunk": "@@ -0,0 +1,119 @@\n+package io.quarkus.vertx.core.runtime;\n+\n+import java.util.regex.Pattern;\n+\n+import io.quarkus.vertx.core.runtime.config.JksConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PemKeyCertConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PemTrustCertConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PfxConfiguration;\n+import io.vertx.core.net.*;\n+\n+public class SSLConfigHelper {\n+\n+    private static final Pattern COMMA_PATTERN = Pattern.compile(\",\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35b2a349219b22f6a08aad14d455f02a7a62ea7e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTg0NDEw", "url": "https://github.com/quarkusio/quarkus/pull/9469#pullrequestreview-418984410", "createdAt": "2020-05-27T08:48:41Z", "commit": {"oid": "49343655e9ee5e5666360dd4f444f13358ea5807"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTg1NjA5", "url": "https://github.com/quarkusio/quarkus/pull/9469#pullrequestreview-418985609", "createdAt": "2020-05-27T08:50:09Z", "commit": {"oid": "49343655e9ee5e5666360dd4f444f13358ea5807"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODo1MDowOVrOGa_myw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODo1MDowOVrOGa_myw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk1ODI4Mw==", "bodyText": "This javadoc is used in the configuration reference doc. Thus it's better to avoid link to properties and also use the \"dash case\" versions that are used in config (so trust-certificate-jks for instance).", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r430958283", "createdAt": "2020-05-27T08:50:09Z", "author": {"login": "gsmet"}, "path": "extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java", "diffHunk": "@@ -24,4 +28,58 @@\n      */\n     @ConfigItem\n     public OptionalInt maxSize;\n+\n+    /**\n+     * Whether all server certificates should be trusted.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    public boolean trustAll;\n+\n+    /**\n+     * Trust configuration in the PEM format.\n+     * <p>\n+     * When enabled, {@link #trustCertificateJks} and {@link #trustCertificatePfx} must be disabled.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49343655e9ee5e5666360dd4f444f13358ea5807"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNDIyNTM1", "url": "https://github.com/quarkusio/quarkus/pull/9469#pullrequestreview-422422535", "createdAt": "2020-06-02T07:46:31Z", "commit": {"oid": "5030577e61b969367624b13ba1fd6fc1164c4715"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNzo0NjozMVrOGdl7TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNzo0OTozNFrOGdmBsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY4MzI3Nw==", "bodyText": "So we are adding this dependency because of the reuse of some configuration class. I just want to be sure there is not a dragon hidden under a stone.", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r433683277", "createdAt": "2020-06-02T07:46:31Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-datasource/runtime/pom.xml", "diffHunk": "@@ -26,6 +26,10 @@\n             <groupId>io.quarkus</groupId>\n             <artifactId>quarkus-datasource</artifactId>\n         </dependency>\n+        <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5030577e61b969367624b13ba1fd6fc1164c4715"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY4NDkxMw==", "bodyText": "@michalszynkiewicz Don't we have the same type of code in gRPC? Maybe we can reuse the same classes.", "url": "https://github.com/quarkusio/quarkus/pull/9469#discussion_r433684913", "createdAt": "2020-06-02T07:49:34Z", "author": {"login": "cescoffier"}, "path": "extensions/vertx-core/runtime/src/main/java/io/quarkus/vertx/core/runtime/SSLConfigHelper.java", "diffHunk": "@@ -0,0 +1,120 @@\n+package io.quarkus.vertx.core.runtime;\n+\n+import io.quarkus.vertx.core.runtime.config.JksConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PemKeyCertConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PemTrustCertConfiguration;\n+import io.quarkus.vertx.core.runtime.config.PfxConfiguration;\n+import io.vertx.core.net.JksOptions;\n+import io.vertx.core.net.KeyCertOptions;\n+import io.vertx.core.net.PemKeyCertOptions;\n+import io.vertx.core.net.PemTrustOptions;\n+import io.vertx.core.net.PfxOptions;\n+import io.vertx.core.net.TCPSSLOptions;\n+\n+public class SSLConfigHelper {\n+\n+    public static void configurePemTrustOptions(TCPSSLOptions options, PemTrustCertConfiguration configuration) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5030577e61b969367624b13ba1fd6fc1164c4715"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5030577e61b969367624b13ba1fd6fc1164c4715", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/5030577e61b969367624b13ba1fd6fc1164c4715", "committedDate": "2020-05-27T13:58:30Z", "message": "Update Javadoc"}, "afterCommit": {"oid": "da52deabcf24c675196c802c50d292cf3db6f314", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/da52deabcf24c675196c802c50d292cf3db6f314", "committedDate": "2020-06-09T12:54:31Z", "message": "Update Javadoc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe88d8939ba852e78d850c254aa39248c69adf29", "author": {"user": {"login": "FroMage", "name": "St\u00e9phane \u00c9pardaud"}}, "url": "https://github.com/quarkusio/quarkus/commit/fe88d8939ba852e78d850c254aa39248c69adf29", "committedDate": "2020-06-11T08:36:55Z", "message": "Merge branch 'master' into reactive-pg-ssl"}, "afterCommit": {"oid": "50d2691863cc602cd08b93d2cc7b1dd30ac8abd0", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/50d2691863cc602cd08b93d2cc7b1dd30ac8abd0", "committedDate": "2020-06-11T09:20:59Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0062a3c74d290bca3fb2ee8c3890a1059d6734b1", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/0062a3c74d290bca3fb2ee8c3890a1059d6734b1", "committedDate": "2020-06-17T09:46:08Z", "message": "SSL support for Reactive Pg Client\n\nFixes #552"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31272a1fc0c7780f4f05222ea1122f2926defcae", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/31272a1fc0c7780f4f05222ea1122f2926defcae", "committedDate": "2020-06-17T09:46:08Z", "message": "DataSourceReactivePostgreSQLConfig: use same prop names as in EventBusConfiguration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9df17f89e76dc2ff56fae772e01d445c412a79a4", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/9df17f89e76dc2ff56fae772e01d445c412a79a4", "committedDate": "2020-06-17T09:46:08Z", "message": "DataSourceReactivePostgreSQLConfig: added config doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f9ea6b7f500bfd34c8202375bd8afc36801edf5", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/7f9ea6b7f500bfd34c8202375bd8afc36801edf5", "committedDate": "2020-06-17T09:46:09Z", "message": "Updated as per review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fea9f9cb1a0d1030214016b3897a0ef9261910d", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/4fea9f9cb1a0d1030214016b3897a0ef9261910d", "committedDate": "2020-06-17T09:46:09Z", "message": "SSL support for Reactive MySQL Client\n\nFixes #6321"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9eadccf2143cb8596ee1f26a49bb5d59fc1d85a", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/e9eadccf2143cb8596ee1f26a49bb5d59fc1d85a", "committedDate": "2020-06-17T09:46:09Z", "message": "Update Javadoc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50d2691863cc602cd08b93d2cc7b1dd30ac8abd0", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/50d2691863cc602cd08b93d2cc7b1dd30ac8abd0", "committedDate": "2020-06-11T09:20:59Z", "message": "Update Javadoc"}, "afterCommit": {"oid": "e9eadccf2143cb8596ee1f26a49bb5d59fc1d85a", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/quarkusio/quarkus/commit/e9eadccf2143cb8596ee1f26a49bb5d59fc1d85a", "committedDate": "2020-06-17T09:46:09Z", "message": "Update Javadoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3331, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}