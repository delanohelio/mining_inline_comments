{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMTYxNjMx", "number": 11599, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwODo0OTo0NVrOEcelgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwODo0OTo0NVrOEcelgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4Mjk2NzA0OnYy", "diffSide": "RIGHT", "path": "integration-tests/elasticsearch-rest-client/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwODo0OTo0NVrOHHCT_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOToxMDowMVrOHHDDtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEzOTk2NQ==", "bodyText": "Interesting, I just learned about this script.", "url": "https://github.com/quarkusio/quarkus/pull/11599#discussion_r477139965", "createdAt": "2020-08-26T08:49:45Z", "author": {"login": "Sanne"}, "path": "integration-tests/elasticsearch-rest-client/pom.xml", "diffHunk": "@@ -91,35 +97,94 @@\n               <skip>false</skip>\n             </configuration>\n           </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n+\n+    <profile>\n+      <id>docker-elasticsearch</id>\n+      <activation>\n+        <property>\n+          <name>docker</name>\n+        </property>\n+      </activation>\n+      <properties>\n+        <elasticsearch.hosts>localhost:9200</elasticsearch.hosts>\n+        <elasticsearch.protocol>http</elasticsearch.protocol>\n+      </properties>\n+      <build>\n+        <plugins>\n           <plugin>\n-            <groupId>com.github.alexcojocaru</groupId>\n-            <artifactId>elasticsearch-maven-plugin</artifactId>\n+            <groupId>io.fabric8</groupId>\n+            <artifactId>docker-maven-plugin</artifactId>\n             <configuration>\n-              <timeout>90</timeout>\n-              <pathConf>${project.build.directory}/test-classes/elasticsearch-maven-plugin/configuration/</pathConf>\n-              <autoCreateIndex>true</autoCreateIndex>\n+              <images>\n+                <image>\n+                  <name>${elasticsearch.image}</name>\n+                  <alias>elasticsearch</alias>\n+                  <run>\n+                    <env>\n+                      <discovery.type>single-node</discovery.type>\n+                    </env>\n+                    <ports>\n+                      <port>9200:9200</port>\n+                    </ports>\n+                    <log>\n+                      <prefix>Elasticsearch: </prefix>\n+                      <date>default</date>\n+                      <color>cyan</color>\n+                    </log>\n+                    <wait>\n+                      <http>\n+                        <url>http://localhost:9200</url>\n+                        <method>GET</method>\n+                        <status>200</status>\n+                      </http>\n+                      <time>20000</time>\n+                    </wait>\n+                  </run>\n+                </image>\n+              </images>\n+              <allContainers>true</allContainers>\n             </configuration>\n-            <!-- Different executions from 2.x: the \"start\" goal has been renamed in version 5  -->\n             <executions>\n               <execution>\n-                <id>start-elasticsearch</id>\n+                <id>docker-start</id>\n                 <phase>process-test-classes</phase>\n                 <goals>\n-                  <goal>runforked</goal>\n+                  <goal>stop</goal>\n+                  <goal>start</goal>\n                 </goals>\n               </execution>\n               <execution>\n-                <id>stop-elasticsearch</id>\n+                <id>docker-stop</id>\n                 <phase>post-integration-test</phase>\n                 <goals>\n                   <goal>stop</goal>\n                 </goals>\n               </execution>\n             </executions>\n           </plugin>\n+          <plugin>\n+            <groupId>org.codehaus.mojo</groupId>\n+            <artifactId>exec-maven-plugin</artifactId>\n+            <executions>\n+              <execution>\n+                <id>docker-prune</id>\n+                <phase>generate-resources</phase>\n+                <goals>\n+                  <goal>exec</goal>\n+                </goals>\n+                <configuration>\n+                  <executable>${basedir}/../../.github/docker-prune.sh</executable>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2089b5154dbcae14bcfdf414a702fc75aeeeec04"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MjE4Mw==", "bodyText": "I copy-pasted that from another pom file. Not sure it's useful, but well... that's how it works everywhere else \ud83e\udd37", "url": "https://github.com/quarkusio/quarkus/pull/11599#discussion_r477152183", "createdAt": "2020-08-26T09:10:01Z", "author": {"login": "yrodiere"}, "path": "integration-tests/elasticsearch-rest-client/pom.xml", "diffHunk": "@@ -91,35 +97,94 @@\n               <skip>false</skip>\n             </configuration>\n           </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n+\n+    <profile>\n+      <id>docker-elasticsearch</id>\n+      <activation>\n+        <property>\n+          <name>docker</name>\n+        </property>\n+      </activation>\n+      <properties>\n+        <elasticsearch.hosts>localhost:9200</elasticsearch.hosts>\n+        <elasticsearch.protocol>http</elasticsearch.protocol>\n+      </properties>\n+      <build>\n+        <plugins>\n           <plugin>\n-            <groupId>com.github.alexcojocaru</groupId>\n-            <artifactId>elasticsearch-maven-plugin</artifactId>\n+            <groupId>io.fabric8</groupId>\n+            <artifactId>docker-maven-plugin</artifactId>\n             <configuration>\n-              <timeout>90</timeout>\n-              <pathConf>${project.build.directory}/test-classes/elasticsearch-maven-plugin/configuration/</pathConf>\n-              <autoCreateIndex>true</autoCreateIndex>\n+              <images>\n+                <image>\n+                  <name>${elasticsearch.image}</name>\n+                  <alias>elasticsearch</alias>\n+                  <run>\n+                    <env>\n+                      <discovery.type>single-node</discovery.type>\n+                    </env>\n+                    <ports>\n+                      <port>9200:9200</port>\n+                    </ports>\n+                    <log>\n+                      <prefix>Elasticsearch: </prefix>\n+                      <date>default</date>\n+                      <color>cyan</color>\n+                    </log>\n+                    <wait>\n+                      <http>\n+                        <url>http://localhost:9200</url>\n+                        <method>GET</method>\n+                        <status>200</status>\n+                      </http>\n+                      <time>20000</time>\n+                    </wait>\n+                  </run>\n+                </image>\n+              </images>\n+              <allContainers>true</allContainers>\n             </configuration>\n-            <!-- Different executions from 2.x: the \"start\" goal has been renamed in version 5  -->\n             <executions>\n               <execution>\n-                <id>start-elasticsearch</id>\n+                <id>docker-start</id>\n                 <phase>process-test-classes</phase>\n                 <goals>\n-                  <goal>runforked</goal>\n+                  <goal>stop</goal>\n+                  <goal>start</goal>\n                 </goals>\n               </execution>\n               <execution>\n-                <id>stop-elasticsearch</id>\n+                <id>docker-stop</id>\n                 <phase>post-integration-test</phase>\n                 <goals>\n                   <goal>stop</goal>\n                 </goals>\n               </execution>\n             </executions>\n           </plugin>\n+          <plugin>\n+            <groupId>org.codehaus.mojo</groupId>\n+            <artifactId>exec-maven-plugin</artifactId>\n+            <executions>\n+              <execution>\n+                <id>docker-prune</id>\n+                <phase>generate-resources</phase>\n+                <goals>\n+                  <goal>exec</goal>\n+                </goals>\n+                <configuration>\n+                  <executable>${basedir}/../../.github/docker-prune.sh</executable>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEzOTk2NQ=="}, "originalCommit": {"oid": "2089b5154dbcae14bcfdf414a702fc75aeeeec04"}, "originalPosition": 105}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 514, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}