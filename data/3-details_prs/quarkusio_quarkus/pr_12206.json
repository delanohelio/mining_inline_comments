{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NzAyODY4", "number": 12206, "title": "Adds new property to configure \"hibernate.format_sql\" in the application.properties", "bodyText": "quarkus.hibernate-orm.log.format-sql=false\nThis allows to configure hibernate's hibernate.format_sql property in the application.properties.\nFixes: #12204", "createdAt": "2020-09-19T09:37:57Z", "url": "https://github.com/quarkusio/quarkus/pull/12206", "merged": true, "mergeCommit": {"oid": "2ba1dc64907da85640e70e7b3d27b9eff57f4d2d"}, "closed": true, "closedAt": "2020-10-01T13:44:42Z", "author": {"login": "dfbadawi"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKXMEygFqTQ5MTk4ODA0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN9reogFqTQ5OTQ5NDUxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxOTg4MDQ1", "url": "https://github.com/quarkusio/quarkus/pull/12206#pullrequestreview-491988045", "createdAt": "2020-09-19T09:55:26Z", "commit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQwOTo1NToyN1rOHUmJOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQwOTo1NzoxOFrOHUmLSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTM1ODUyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    @ConfigItem(defaultValueDocumentation = \"true\")\n          \n          \n            \n                    public Optional<Boolean> formattedSql;\n          \n          \n            \n                    @ConfigItem(defaultValue = \"true\")\n          \n          \n            \n                    public boolean formatSql;", "url": "https://github.com/quarkusio/quarkus/pull/12206#discussion_r491358520", "createdAt": "2020-09-19T09:55:27Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfigPersistenceUnit.java", "diffHunk": "@@ -361,6 +361,12 @@ public boolean isAnyPropertySet() {\n         @ConfigItem\n         public boolean sql;\n \n+        /**\n+         * Format the SQL logs if SQL log is enabled\n+         */\n+        @ConfigItem(defaultValueDocumentation = \"true\")\n+        public Optional<Boolean> formattedSql;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTM1ODc5Nw==", "bodyText": "This will need to be adjusted in respect to the other change I suggested.", "url": "https://github.com/quarkusio/quarkus/pull/12206#discussion_r491358797", "createdAt": "2020-09-19T09:56:19Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -807,7 +807,9 @@ private static void producePersistenceUnitDescriptorFromConfig(\n         // Logging\n         if (persistenceUnitConfig.log.sql) {\n             descriptor.getProperties().setProperty(AvailableSettings.SHOW_SQL, \"true\");\n-            descriptor.getProperties().setProperty(AvailableSettings.FORMAT_SQL, \"true\");\n+\n+            Boolean formattedSql = persistenceUnitConfig.log.formattedSql.orElse(true);\n+            descriptor.getProperties().setProperty(AvailableSettings.FORMAT_SQL, formattedSql.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTM1ODg1OQ==", "bodyText": "Same here.", "url": "https://github.com/quarkusio/quarkus/pull/12206#discussion_r491358859", "createdAt": "2020-09-19T09:56:35Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/test/resources/application-log-sql-formatted.properties", "diffHunk": "@@ -0,0 +1,6 @@\n+quarkus.datasource.db-kind=h2\n+quarkus.datasource.jdbc.url=jdbc:h2:mem:test\n+\n+quarkus.hibernate-orm.dialect=org.hibernate.dialect.H2Dialect\n+quarkus.hibernate-orm.log.sql=true\n+quarkus.hibernate-orm.log.formatted-sql=false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTM1ODg4OQ==", "bodyText": "Same here.", "url": "https://github.com/quarkusio/quarkus/pull/12206#discussion_r491358889", "createdAt": "2020-09-19T09:56:42Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-reactive/deployment/src/main/java/io/quarkus/hibernate/reactive/deployment/HibernateReactiveProcessor.java", "diffHunk": "@@ -243,7 +243,9 @@ private static ParsedPersistenceXmlDescriptor generateReactivePersistenceUnit(\n         // Logging\n         if (persistenceUnitConfig.log.sql) {\n             desc.getProperties().setProperty(AvailableSettings.SHOW_SQL, \"true\");\n-            desc.getProperties().setProperty(AvailableSettings.FORMAT_SQL, \"true\");\n+\n+            Boolean formattedSql = persistenceUnitConfig.log.formattedSql.orElse(true);\n+            desc.getProperties().setProperty(AvailableSettings.FORMAT_SQL, formattedSql.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTM1OTA1MA==", "bodyText": "It needs to be taked into account in isAnyPropertySet.", "url": "https://github.com/quarkusio/quarkus/pull/12206#discussion_r491359050", "createdAt": "2020-09-19T09:57:18Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfigPersistenceUnit.java", "diffHunk": "@@ -361,6 +361,12 @@ public boolean isAnyPropertySet() {\n         @ConfigItem\n         public boolean sql;\n \n+        /**\n+         * Format the SQL logs if SQL log is enabled\n+         */\n+        @ConfigItem(defaultValueDocumentation = \"true\")\n+        public Optional<Boolean> formattedSql;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90528badf88ce1761b366bdfa07cff957e0e60d7"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "636ca491344a9899bc29e31e66fb37c18d15bbc0", "author": {"user": {"login": "dfbadawi", "name": "Daniel Badawi"}}, "url": "https://github.com/quarkusio/quarkus/commit/636ca491344a9899bc29e31e66fb37c18d15bbc0", "committedDate": "2020-09-30T14:29:09Z", "message": "Add new property to configure SQL log formatting for Hibernate ORM"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66af4e5c112794491ac2706072f1adbcbb45bde7", "author": {"user": {"login": "dfbadawi", "name": "Daniel Badawi"}}, "url": "https://github.com/quarkusio/quarkus/commit/66af4e5c112794491ac2706072f1adbcbb45bde7", "committedDate": "2020-09-19T10:57:54Z", "message": "simplifies property assignment"}, "afterCommit": {"oid": "636ca491344a9899bc29e31e66fb37c18d15bbc0", "author": {"user": {"login": "dfbadawi", "name": "Daniel Badawi"}}, "url": "https://github.com/quarkusio/quarkus/commit/636ca491344a9899bc29e31e66fb37c18d15bbc0", "committedDate": "2020-09-30T14:29:09Z", "message": "Add new property to configure SQL log formatting for Hibernate ORM"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDk0NTEy", "url": "https://github.com/quarkusio/quarkus/pull/12206#pullrequestreview-499494512", "createdAt": "2020-09-30T14:29:57Z", "commit": {"oid": "636ca491344a9899bc29e31e66fb37c18d15bbc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 371, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}