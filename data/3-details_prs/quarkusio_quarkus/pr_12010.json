{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyODk2NDk5", "number": 12010, "title": "Use MetricsCapabilityBuildItem", "bodyText": "Resolves #12000", "createdAt": "2020-09-09T14:43:53Z", "url": "https://github.com/quarkusio/quarkus/pull/12010", "merged": true, "mergeCommit": {"oid": "9dff2208edf12cead5b18ee20d5291d18b61255f"}, "closed": true, "closedAt": "2020-09-10T08:08:09Z", "author": {"login": "ebullient"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHNpssgFqTQ4NTExMTMxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHcOc_AFqTQ4NTY4NDY5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MTExMzE4", "url": "https://github.com/quarkusio/quarkus/pull/12010#pullrequestreview-485111318", "createdAt": "2020-09-09T15:09:01Z", "commit": {"oid": "2734694b4deae048d2aefb7aaad28f07c37448b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2734694b4deae048d2aefb7aaad28f07c37448b6", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/2734694b4deae048d2aefb7aaad28f07c37448b6", "committedDate": "2020-09-09T14:42:23Z", "message": "Use MetricsCapabilityBuildItem. Resolves #12000"}, "afterCommit": {"oid": "4e65ae0ade9126014ef1c7877cd0261710827a8b", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/4e65ae0ade9126014ef1c7877cd0261710827a8b", "committedDate": "2020-09-09T16:26:22Z", "message": "doc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e65ae0ade9126014ef1c7877cd0261710827a8b", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/4e65ae0ade9126014ef1c7877cd0261710827a8b", "committedDate": "2020-09-09T16:26:22Z", "message": "doc"}, "afterCommit": {"oid": "12306a23050278135626a0562cde2eb04deef8e2", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/12306a23050278135626a0562cde2eb04deef8e2", "committedDate": "2020-09-09T16:27:09Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12306a23050278135626a0562cde2eb04deef8e2", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/12306a23050278135626a0562cde2eb04deef8e2", "committedDate": "2020-09-09T16:27:09Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}, "afterCommit": {"oid": "06faca91d2c393d0a9e721e5f75fede5a6a17df1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/06faca91d2c393d0a9e721e5f75fede5a6a17df1", "committedDate": "2020-09-09T16:41:13Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06faca91d2c393d0a9e721e5f75fede5a6a17df1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/06faca91d2c393d0a9e721e5f75fede5a6a17df1", "committedDate": "2020-09-09T16:41:13Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}, "afterCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/b2861c7b0f4cefa83767d3bfc56aaae24df38877", "committedDate": "2020-09-09T16:42:01Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjA3OTE3", "url": "https://github.com/quarkusio/quarkus/pull/12010#pullrequestreview-485207917", "createdAt": "2020-09-09T16:44:39Z", "commit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNjo0NDozOVrOHPQv_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNjo0NjowMVrOHPQ0jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc2NTExNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you use the MicroProfile Metrics API in your application, the micrometer extension will create an adaptive\n          \n          \n            \n            If you use the MicroProfile Metrics API in your application, the Micrometer extension will create an adaptive", "url": "https://github.com/quarkusio/quarkus/pull/12010#discussion_r485765116", "createdAt": "2020-09-09T16:44:39Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/micrometer-metrics.adoc", "diffHunk": "@@ -275,7 +275,34 @@ jvm_memory_committed_bytes{area=\"nonheap\",id=\"CodeHeap 'non-profiled nmethods'\",\n Note that metrics appear lazily, you often won't see any data for your endpoint until\n something tries to access it, etc.\n \n+== Support for the MicroProfile Metrics API\n \n+If you use the MicroProfile Metrics API in your application, the micrometer extension will create an adaptive", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc2NTQ3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            layer to map those metrics into the micrometer registry. Note that naming conventions between the two\n          \n          \n            \n            layer to map those metrics into the Micrometer registry. Note that naming conventions between the two", "url": "https://github.com/quarkusio/quarkus/pull/12010#discussion_r485765470", "createdAt": "2020-09-09T16:45:01Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/micrometer-metrics.adoc", "diffHunk": "@@ -275,7 +275,34 @@ jvm_memory_committed_bytes{area=\"nonheap\",id=\"CodeHeap 'non-profiled nmethods'\",\n Note that metrics appear lazily, you often won't see any data for your endpoint until\n something tries to access it, etc.\n \n+== Support for the MicroProfile Metrics API\n \n+If you use the MicroProfile Metrics API in your application, the micrometer extension will create an adaptive\n+layer to map those metrics into the micrometer registry. Note that naming conventions between the two", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc2NTkyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `quarkus-smallrye-metrics` extension and the `quarkus-micrometer` extension provide support for collecting metrics. As a compatibility note, the `quarkus-micrometer` extension adapts the MP Metrics API to micrometer library primitives, so the `quarkus-micrometer` extension can be enabled without breaking code that relies on the MP Metrics API. Note that the metrics emitted by micrometer are different, see the `quarkus-micrometer` extension documentation for more information.\n          \n          \n            \n            The `quarkus-smallrye-metrics` extension and the `quarkus-micrometer` extension provide support for collecting metrics. As a compatibility note, the `quarkus-micrometer` extension adapts the MP Metrics API to Micrometer library primitives, so the `quarkus-micrometer` extension can be enabled without breaking code that relies on the MP Metrics API. Note that the metrics emitted by Micrometer are different, see the `quarkus-micrometer` extension documentation for more information.", "url": "https://github.com/quarkusio/quarkus/pull/12010#discussion_r485765922", "createdAt": "2020-09-09T16:45:35Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/writing-extensions.adoc", "diffHunk": "@@ -1496,13 +1496,15 @@ HealthBuildItem addHealthCheck(AgroalBuildTimeConfig agroalBuildTimeConfig) {\n \n === Extension Metrics\n \n-The `quarkus-smallrye-metrics` extension (and other 3rd party or experimental extensions) provide support for collecting metrics. There are two broad patterns that extensions can use to interact with an optional metrics extension to add their own metrics:\n+The `quarkus-smallrye-metrics` extension and the `quarkus-micrometer` extension provide support for collecting metrics. As a compatibility note, the `quarkus-micrometer` extension adapts the MP Metrics API to micrometer library primitives, so the `quarkus-micrometer` extension can be enabled without breaking code that relies on the MP Metrics API. Note that the metrics emitted by micrometer are different, see the `quarkus-micrometer` extension documentation for more information.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc2NjI4Nw==", "bodyText": "Why?", "url": "https://github.com/quarkusio/quarkus/pull/12010#discussion_r485766287", "createdAt": "2020-09-09T16:46:01Z", "author": {"login": "gsmet"}, "path": "extensions/micrometer/deployment/src/main/java/io/quarkus/micrometer/deployment/binder/mpmetrics/AnnotationHandler.java", "diffHunk": "@@ -81,7 +81,7 @@ static boolean removeCountedWhenTimed(DotName sourceAnnotation, AnnotationTarget\n                         findAnnotation(classInfo.classAnnotations(), MetricDotNames.SIMPLY_TIMED_ANNOTATION) == null) {\n                     return false;\n                 }\n-                log.warnf(\"Bean %s is both counted and timed. The @Counted annotation \" +\n+                log.infof(\"Bean %s is both counted and timed. The @Counted annotation \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2861c7b0f4cefa83767d3bfc56aaae24df38877", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/b2861c7b0f4cefa83767d3bfc56aaae24df38877", "committedDate": "2020-09-09T16:42:01Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}, "afterCommit": {"oid": "203daaf34d8c415296a8f3b51db4bd5c2deb2b01", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/203daaf34d8c415296a8f3b51db4bd5c2deb2b01", "committedDate": "2020-09-09T17:04:29Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "203daaf34d8c415296a8f3b51db4bd5c2deb2b01", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/203daaf34d8c415296a8f3b51db4bd5c2deb2b01", "committedDate": "2020-09-09T17:04:29Z", "message": "Feature.MICROMETER constant. Capability.METRICS @deprecated"}, "afterCommit": {"oid": "9e901ee426c005c9dd28a76ca21c037b50c248bb", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/9e901ee426c005c9dd28a76ca21c037b50c248bb", "committedDate": "2020-09-09T17:07:07Z", "message": "fault-tolerance: MetricsCapabilityBuildItem\n\nResolves #12000\nFeature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "158fbb98202cc127c355512a676405b952d72c5d", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/158fbb98202cc127c355512a676405b952d72c5d", "committedDate": "2020-09-09T17:07:47Z", "message": "fault-tolerance: MetricsCapabilityBuildItem\n\nResolves #12000\nFeature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e901ee426c005c9dd28a76ca21c037b50c248bb", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/9e901ee426c005c9dd28a76ca21c037b50c248bb", "committedDate": "2020-09-09T17:07:07Z", "message": "fault-tolerance: MetricsCapabilityBuildItem\n\nResolves #12000\nFeature.MICROMETER constant. Capability.METRICS @deprecated"}, "afterCommit": {"oid": "158fbb98202cc127c355512a676405b952d72c5d", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/158fbb98202cc127c355512a676405b952d72c5d", "committedDate": "2020-09-09T17:07:47Z", "message": "fault-tolerance: MetricsCapabilityBuildItem\n\nResolves #12000\nFeature.MICROMETER constant. Capability.METRICS @deprecated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Njg0Njk3", "url": "https://github.com/quarkusio/quarkus/pull/12010#pullrequestreview-485684697", "createdAt": "2020-09-10T08:07:50Z", "commit": {"oid": "158fbb98202cc127c355512a676405b952d72c5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 608, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}