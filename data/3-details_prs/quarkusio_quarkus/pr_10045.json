{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MTcyOTc2", "number": 10045, "title": "Prevent NPE in Spring Web when no \"Accept\" header is specified", "bodyText": "Fixes: #10033", "createdAt": "2020-06-16T12:12:31Z", "url": "https://github.com/quarkusio/quarkus/pull/10045", "merged": true, "mergeCommit": {"oid": "5cee27288ed279ddfac53ea6fa3268589d9526f9"}, "closed": true, "closedAt": "2020-06-16T18:52:04Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr0cxdgFqTQzMTQ1MjgxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr2A5qgBqjM0NDkyNDYxNDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNDUyODE5", "url": "https://github.com/quarkusio/quarkus/pull/10045#pullrequestreview-431452819", "createdAt": "2020-06-16T12:31:19Z", "commit": {"oid": "aa42efab7c4aa78043f0fadfef49d087aba26336"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjozMToxOVrOGkZCbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjozMToxOVrOGkZCbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgxMjE0MQ==", "bodyText": "This is done because negotiation.setAcceptHeaders(anEmptyList); throws a NPE", "url": "https://github.com/quarkusio/quarkus/pull/10045#discussion_r440812141", "createdAt": "2020-06-16T12:31:19Z", "author": {"login": "geoand"}, "path": "extensions/spring-web/runtime/src/main/java/io/quarkus/spring/web/runtime/ResponseContentTypeResolver.java", "diffHunk": "@@ -20,7 +20,9 @@ public static MediaType resolve(HttpHeaders httpHeaders, String... supportedMedi\n         Objects.requireNonNull(httpHeaders, \"HttpHeaders cannot be null\");\n         Objects.requireNonNull(supportedMediaTypes, \"Supported media types array cannot be null\");\n \n-        Variant bestVariant = getBestVariant(httpHeaders.getRequestHeader(ACCEPT), getMediaTypeVariants(supportedMediaTypes));\n+        List<String> acceptHeaders = httpHeaders.getRequestHeader(ACCEPT);\n+        Variant bestVariant = acceptHeaders.isEmpty() ? null\n+                : getBestVariant(acceptHeaders, getMediaTypeVariants(supportedMediaTypes));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa42efab7c4aa78043f0fadfef49d087aba26336"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNDU1NjA0", "url": "https://github.com/quarkusio/quarkus/pull/10045#pullrequestreview-431455604", "createdAt": "2020-06-16T12:34:57Z", "commit": {"oid": "aa42efab7c4aa78043f0fadfef49d087aba26336"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "559ecbcda58074ebc7b4798c4287114cfeabe96f", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/559ecbcda58074ebc7b4798c4287114cfeabe96f", "committedDate": "2020-06-16T14:20:32Z", "message": "Prevent NPE in Spring Web when no \"Accept\" header is specified\n\nFixes: #10033"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa42efab7c4aa78043f0fadfef49d087aba26336", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/aa42efab7c4aa78043f0fadfef49d087aba26336", "committedDate": "2020-06-16T12:11:18Z", "message": "Prevent NPE in Spring Web when no \"Accept\" header is specified\n\nFixes: #10033"}, "afterCommit": {"oid": "559ecbcda58074ebc7b4798c4287114cfeabe96f", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/559ecbcda58074ebc7b4798c4287114cfeabe96f", "committedDate": "2020-06-16T14:20:32Z", "message": "Prevent NPE in Spring Web when no \"Accept\" header is specified\n\nFixes: #10033"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4236, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}