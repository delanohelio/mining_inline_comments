{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczODA0MTIw", "number": 11638, "title": "Added option to save the generated OpenAPI schema document on build.", "bodyText": "As discussed in Zulip a few times, this will add a new config option, quarkus.smallrye-openapi.store-schema-directory, that if\nset, allow users to store the generated openapi.json and openapi.yaml to the configured directory\nSigned-off-by:Phillip Kruger phillip.kruger@gmail.com", "createdAt": "2020-08-26T10:15:33Z", "url": "https://github.com/quarkusio/quarkus/pull/11638", "merged": true, "mergeCommit": {"oid": "516e47a1ae6cb8f47d3cab4fe07b2715e7df52eb"}, "closed": true, "closedAt": "2020-08-27T10:57:12Z", "author": {"login": "phillip-kruger"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCpwNdgFqTQ3NTM4MDMwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFM1ucAFqTQ4MTY0MTM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzgwMzA5", "url": "https://github.com/quarkusio/quarkus/pull/11638#pullrequestreview-475380309", "createdAt": "2020-08-26T11:03:46Z", "commit": {"oid": "6b87acff64d63f6259983e786241ebf2fa9d59b6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMTowMzo0N1rOHHG-WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMTowMzo0N1rOHHG-WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzIxNjM0NA==", "bodyText": "I would prefer if we used Directory rather than Dir.", "url": "https://github.com/quarkusio/quarkus/pull/11638#discussion_r477216344", "createdAt": "2020-08-26T11:03:47Z", "author": {"login": "gsmet"}, "path": "extensions/smallrye-openapi-common/deployment/src/main/java/io/quarkus/smallrye/openapi/common/deployment/SmallRyeOpenApiConfig.java", "diffHunk": "@@ -10,4 +13,11 @@\n      */\n     @ConfigItem(defaultValue = \"/openapi\")\n     public String path;\n+\n+    /**\n+     * If set, the generated OpenAPI schema documents will be stored here on build.\n+     * Both openapi.json and openapi.yaml will be stored here if this is set.\n+     */\n+    @ConfigItem\n+    public Optional<Path> storeSchemaDir;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b87acff64d63f6259983e786241ebf2fa9d59b6"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14cf55edd2ddff72b837184a7a1eca45082abc73", "author": {"user": {"login": "phillip-kruger", "name": "Phillip Kr\u00fcger"}}, "url": "https://github.com/quarkusio/quarkus/commit/14cf55edd2ddff72b837184a7a1eca45082abc73", "committedDate": "2020-08-26T11:12:32Z", "message": "Added option to save the generated OpenAPI schema document on build\n\nSigned-off-by: Phillip Kruger <phillip.kruger@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDIwMjA4", "url": "https://github.com/quarkusio/quarkus/pull/11638#pullrequestreview-475420208", "createdAt": "2020-08-26T12:05:01Z", "commit": {"oid": "14cf55edd2ddff72b837184a7a1eca45082abc73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDk4MTUz", "url": "https://github.com/quarkusio/quarkus/pull/11638#pullrequestreview-475498153", "createdAt": "2020-08-26T13:39:39Z", "commit": {"oid": "14cf55edd2ddff72b837184a7a1eca45082abc73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNjQxMzUy", "url": "https://github.com/quarkusio/quarkus/pull/11638#pullrequestreview-481641352", "createdAt": "2020-09-03T09:04:24Z", "commit": {"oid": "14cf55edd2ddff72b837184a7a1eca45082abc73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTowNDoyNFrOHMdNQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTowNDoyNFrOHMdNQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjgyMzQ4OA==", "bodyText": "When specifying a relative path this appears to be relative to the working directory of where the build is running. I would instead have expected it to be relative to the Maven project's basedir. See issue #11846.", "url": "https://github.com/quarkusio/quarkus/pull/11638#discussion_r482823488", "createdAt": "2020-09-03T09:04:24Z", "author": {"login": "knutwannheden"}, "path": "extensions/smallrye-openapi/deployment/src/main/java/io/quarkus/smallrye/openapi/deployment/SmallRyeOpenApiProcessor.java", "diffHunk": "@@ -331,6 +341,21 @@ LogCleanupFilterBuildItem logCleanup() {\n                 \"OpenAPI document initialized:\");\n     }\n \n+    private void storeGeneratedSchema(byte[] schemaDocument, Format format) throws IOException {\n+        Path directory = openApiConfig.storeSchemaDirectory.get();\n+        if (!Files.exists(directory)) {\n+            Files.createDirectories(directory);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14cf55edd2ddff72b837184a7a1eca45082abc73"}, "originalPosition": 73}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 734, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}