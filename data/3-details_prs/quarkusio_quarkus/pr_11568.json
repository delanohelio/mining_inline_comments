{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNTMwNTE5", "number": 11568, "title": "Don't create default mongo clients when not needed and fix @MongoClientName qualifier", "bodyText": "Fixes: #11491", "createdAt": "2020-08-24T13:41:36Z", "url": "https://github.com/quarkusio/quarkus/pull/11568", "merged": true, "mergeCommit": {"oid": "b87ea49b41a4a76f680249e70e92c45bea5ba5fc"}, "closed": true, "closedAt": "2020-08-27T11:30:23Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCDLlRgFqTQ3MzUyMzgwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC-ukmAFqTQ3NjYyNjk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNTIzODA0", "url": "https://github.com/quarkusio/quarkus/pull/11568#pullrequestreview-473523804", "createdAt": "2020-08-24T14:07:27Z", "commit": {"oid": "e96c4d52845a1aa0d0c3ec4a960f9ea13f09ca13"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzU3MDk3", "url": "https://github.com/quarkusio/quarkus/pull/11568#pullrequestreview-473757097", "createdAt": "2020-08-24T18:32:29Z", "commit": {"oid": "d590dfe8ac4a38f7a2c96435d7654006e0049673"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjU1OTY3", "url": "https://github.com/quarkusio/quarkus/pull/11568#pullrequestreview-474255967", "createdAt": "2020-08-25T08:32:35Z", "commit": {"oid": "e96c4d52845a1aa0d0c3ec4a960f9ea13f09ca13"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODozMjozNVrOHGNc9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODozMjozNVrOHGNc9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI3MzkwOQ==", "bodyText": "A wise man said to me, don't use dots in config item names.\nAlso I don't see why force-default-clients would be a bad name.", "url": "https://github.com/quarkusio/quarkus/pull/11568#discussion_r476273909", "createdAt": "2020-08-25T08:32:35Z", "author": {"login": "gsmet"}, "path": "extensions/mongodb-client/deployment/src/main/java/io/quarkus/mongodb/deployment/MongoClientBuildTimeConfig.java", "diffHunk": "@@ -17,4 +17,10 @@\n      */\n     @ConfigItem(name = \"metrics.enabled\")\n     public boolean metricsEnabled;\n+\n+    /**\n+     * If set to true, the default clients will always be created even if there are no injection points that use them\n+     */\n+    @ConfigItem(name = \"default-clients.force\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e96c4d52845a1aa0d0c3ec4a960f9ea13f09ca13"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d590dfe8ac4a38f7a2c96435d7654006e0049673", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/d590dfe8ac4a38f7a2c96435d7654006e0049673", "committedDate": "2020-08-24T14:42:09Z", "message": "Properly handle @MongoClientName qualifier\n\nFixes: #11491"}, "afterCommit": {"oid": "96a019d8cbc9ffb6d60c8ca0119e4e1d93321e62", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/96a019d8cbc9ffb6d60c8ca0119e4e1d93321e62", "committedDate": "2020-08-25T08:42:40Z", "message": "Properly handle @MongoClientName qualifier\n\nFixes: #11491"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "036d27fe9037f30f4d4ad004d770b6cafdd18a2c", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/036d27fe9037f30f4d4ad004d770b6cafdd18a2c", "committedDate": "2020-08-25T08:46:48Z", "message": "Don't create default mongo clients when not needed\n\nRelates to: #11491"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17d4840735915e772b94e607755e2acdfe99eea4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/17d4840735915e772b94e607755e2acdfe99eea4", "committedDate": "2020-08-25T08:46:48Z", "message": "Properly handle @MongoClientName qualifier\n\nFixes: #11491"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96a019d8cbc9ffb6d60c8ca0119e4e1d93321e62", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/96a019d8cbc9ffb6d60c8ca0119e4e1d93321e62", "committedDate": "2020-08-25T08:42:40Z", "message": "Properly handle @MongoClientName qualifier\n\nFixes: #11491"}, "afterCommit": {"oid": "17d4840735915e772b94e607755e2acdfe99eea4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/17d4840735915e772b94e607755e2acdfe99eea4", "committedDate": "2020-08-25T08:46:48Z", "message": "Properly handle @MongoClientName qualifier\n\nFixes: #11491"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjAwNjcx", "url": "https://github.com/quarkusio/quarkus/pull/11568#pullrequestreview-476600671", "createdAt": "2020-08-27T10:48:59Z", "commit": {"oid": "17d4840735915e772b94e607755e2acdfe99eea4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMDo0OTowMFrOHIKxsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMDo0OTowMFrOHIKxsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMyNzIxOQ==", "bodyText": "If it didn't work before, please let's move this annotation to the API package i.e. no runtime.. It's user API.\nAlso we will probably need to update the doc and quickstart if it's mentioned.", "url": "https://github.com/quarkusio/quarkus/pull/11568#discussion_r478327219", "createdAt": "2020-08-27T10:49:00Z", "author": {"login": "gsmet"}, "path": "extensions/mongodb-client/deployment/src/main/java/io/quarkus/mongodb/deployment/MongoClientProcessor.java", "diffHunk": "@@ -52,12 +54,9 @@\n import io.quarkus.smallrye.health.deployment.spi.HealthBuildItem;\n \n public class MongoClientProcessor {\n-    private static final DotName MONGOCLIENT_ANNOTATION = DotName.createSimple(MongoClientName.class.getName());\n-\n-    @BuildStep\n-    BeanDefiningAnnotationBuildItem registerConnectionBean() {\n-        return new BeanDefiningAnnotationBuildItem(MONGOCLIENT_ANNOTATION);\n-    }\n+    private static final DotName MONGO_CLIENT_ANNOTATION = DotName.createSimple(MongoClientName.class.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17d4840735915e772b94e607755e2acdfe99eea4"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjI2OTQ1", "url": "https://github.com/quarkusio/quarkus/pull/11568#pullrequestreview-476626945", "createdAt": "2020-08-27T11:30:04Z", "commit": {"oid": "17d4840735915e772b94e607755e2acdfe99eea4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 699, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}