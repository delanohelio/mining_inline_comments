{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MjMwOTcw", "number": 10679, "title": "Qute message bundles - add @MessageParam", "bodyText": "to bind an explicit name for a message bundle method parameter", "createdAt": "2020-07-13T12:43:10Z", "url": "https://github.com/quarkusio/quarkus/pull/10679", "merged": true, "mergeCommit": {"oid": "12168433a62c205a7a70e0662f4907ca6269d3ad"}, "closed": true, "closedAt": "2020-07-17T06:01:45Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0hthaAFqTQ0NzI2NTg0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc00uXVgBqjM1NDM4MjU3OTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MjY1ODQw", "url": "https://github.com/quarkusio/quarkus/pull/10679#pullrequestreview-447265840", "createdAt": "2020-07-13T13:46:44Z", "commit": {"oid": "d5f78c6b092b12809141e8c105d0626bb86a8755"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MzYzMzMw", "url": "https://github.com/quarkusio/quarkus/pull/10679#pullrequestreview-447363330", "createdAt": "2020-07-13T15:33:10Z", "commit": {"oid": "d5f78c6b092b12809141e8c105d0626bb86a8755"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNTozMzoxMFrOGwt8ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNTozMzo1N1rOGwt-0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzczNzYzNQ==", "bodyText": "I think there's a %s missing here or the method has one too many parameters.", "url": "https://github.com/quarkusio/quarkus/pull/10679#discussion_r453737635", "createdAt": "2020-07-13T15:33:10Z", "author": {"login": "gsmet"}, "path": "extensions/qute/deployment/src/main/java/io/quarkus/qute/deployment/MessageBundleProcessor.java", "diffHunk": "@@ -552,7 +560,8 @@ private String generateImplementation(ClassInfo defaultBundleInterface, String d\n \n             if (messageAnnotation == null) {\n                 throw new MessageBundleException(\n-                        \"A message bundle interface method must be annotated with @Message: \" + method);\n+                        String.format(\"A message bundle interface method must be annotated with @Message on %s: \",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5f78c6b092b12809141e8c105d0626bb86a8755"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzczODE5Mw==", "bodyText": "Should the -parameters recommendation come first?", "url": "https://github.com/quarkusio/quarkus/pull/10679#discussion_r453738193", "createdAt": "2020-07-13T15:33:57Z", "author": {"login": "gsmet"}, "path": "extensions/qute/deployment/src/main/java/io/quarkus/qute/deployment/MessageBundleProcessor.java", "diffHunk": "@@ -618,6 +623,27 @@ private String generateImplementation(ClassInfo defaultBundleInterface, String d\n         return generatedName.replace('/', '.');\n     }\n \n+    private String getParameterName(MethodInfo method, int position) {\n+        String name = method.parameterName(position);\n+        AnnotationInstance paramAnnotation = Annotations\n+                .find(Annotations.getParameterAnnotations(method.annotations()).stream()\n+                        .filter(a -> a.target().asMethodParameter().position() == position).collect(Collectors.toList()),\n+                        MESSAGE_PARAM);\n+        if (paramAnnotation != null) {\n+            AnnotationValue paramAnnotationValue = paramAnnotation.value();\n+            if (paramAnnotationValue != null && !paramAnnotationValue.asString().equals(Message.ELEMENT_NAME)) {\n+                name = paramAnnotationValue.asString();\n+            }\n+        }\n+        if (name == null) {\n+            throw new MessageBundleException(\"Unable to determine the name of the parameter at position \" + position\n+                    + \" in method \"\n+                    + method.declaringClass().name() + \"#\" + method.name()\n+                    + \"() - compile the class with debug info enabled (-g) or parameter names recorded (-parameters), or use @MessageParam to specify the value\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5f78c6b092b12809141e8c105d0626bb86a8755"}, "originalPosition": 88}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c57d0c09613c34f365057927cb8f3cc4fcff81b5", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c57d0c09613c34f365057927cb8f3cc4fcff81b5", "committedDate": "2020-07-14T11:55:39Z", "message": "Qute message bundles - add @MessageParam\n\n- to bind an explicit name for a message bundle method parameter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5f78c6b092b12809141e8c105d0626bb86a8755", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/d5f78c6b092b12809141e8c105d0626bb86a8755", "committedDate": "2020-07-13T12:41:55Z", "message": "Qute message bundles - add @MessageParam\n\n- to bind an explicit name for a message bundle method parameter"}, "afterCommit": {"oid": "c57d0c09613c34f365057927cb8f3cc4fcff81b5", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c57d0c09613c34f365057927cb8f3cc4fcff81b5", "committedDate": "2020-07-14T11:55:39Z", "message": "Qute message bundles - add @MessageParam\n\n- to bind an explicit name for a message bundle method parameter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3541, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}