{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMDIyOTcz", "number": 12014, "title": "Add a hint to OIDC and Hibernate Multitenancy docs about passing a tenant id", "bodyText": "Fixes #11949.\nThis PR updates OIDC and Hibernate Multitenancy docs to suggest a simple way of passing a tenant id across 2 resolvers. This can be very obvious anyway, but adding this hint won't harm as 1) some users may be copy-pasting from the docs and may not realize RoutingContext can be used as a medium to pass this id around to save on duplicating the parsing code in the Hibernate resolver 2) Highlights that both OIDC and Hibernate multitenancy can work in tandem", "createdAt": "2020-09-09T17:51:43Z", "url": "https://github.com/quarkusio/quarkus/pull/12014", "merged": true, "mergeCommit": {"oid": "765075f2429dacdffaa4682f9ce28063b78dbb92"}, "closed": true, "closedAt": "2020-09-12T12:13:39Z", "author": {"login": "sberyozkin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHm6LxgFqTQ4NjI4ODk0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdII8HeAFqTQ4NzIyNTgxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2Mjg4OTQ5", "url": "https://github.com/quarkusio/quarkus/pull/12014#pullrequestreview-486288949", "createdAt": "2020-09-10T20:33:09Z", "commit": {"oid": "3b76a1d8930bae67d14a05739c38976006957d8a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDozMzoxMFrOHQEuVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDozNDowNFrOHQEwBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYxNjY2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you also use link:security-openid-connect-multitenancy[OIDC MultiTenancy] and both OIDC and Hibernate tenant IDs are the same and must be extracted from the Vertx `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate Tenant Resolver as a `RoutingContext` attribute, for example:\n          \n          \n            \n            If you also use link:security-openid-connect-multitenancy[OIDC multitenancy] and both OIDC and Hibernate ORM tenant IDs are the same and must be extracted from the Vert.x `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate ORM Tenant Resolver as a `RoutingContext` attribute, for example:", "url": "https://github.com/quarkusio/quarkus/pull/12014#discussion_r486616663", "createdAt": "2020-09-10T20:33:10Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/hibernate-orm.adoc", "diffHunk": "@@ -846,6 +847,30 @@ public class CustomTenantResolver implements TenantResolver {\n <1> Make sure to use the `@io.quarkus.hibernate.orm.PersistenceUnit` annotation, not the JPA one.\n ====\n \n+[NOTE]\n+====\n+If you also use link:security-openid-connect-multitenancy[OIDC MultiTenancy] and both OIDC and Hibernate tenant IDs are the same and must be extracted from the Vertx `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate Tenant Resolver as a `RoutingContext` attribute, for example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b76a1d8930bae67d14a05739c38976006957d8a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYxNzA5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you also use link:hibernate-orm#multitenancy[Hibernate MultiTenancy] and both OIDC and Hibernate tenant IDs are the same and must be extracted from the Vertx `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate Tenant Resolver as a `RoutingContext` attribute, for example:\n          \n          \n            \n            If you also use link:hibernate-orm#multitenancy[Hibernate ORM multitenancy] and both OIDC and Hibernate ORM tenant IDs are the same and must be extracted from the Vert.x `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate ORM Tenant Resolver as a `RoutingContext` attribute, for example:", "url": "https://github.com/quarkusio/quarkus/pull/12014#discussion_r486617094", "createdAt": "2020-09-10T20:34:04Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/security-openid-connect-multitenancy.adoc", "diffHunk": "@@ -151,6 +151,24 @@ public class CustomTenantResolver implements TenantResolver {\n \n From the implementation above, tenants are resolved from the request path so that in case no tenant could be inferred, `null` is returned to indicate that the default tenant configuration should be used.\n \n+[NOTE]\n+===\n+If you also use link:hibernate-orm#multitenancy[Hibernate MultiTenancy] and both OIDC and Hibernate tenant IDs are the same and must be extracted from the Vertx `RoutingContext` then you can pass the tenant id from the OIDC Tenant Resolver to the Hibernate Tenant Resolver as a `RoutingContext` attribute, for example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b76a1d8930bae67d14a05739c38976006957d8a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ce7fa23e5eb610d8a4d9a87380bce0864fcfcef", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/2ce7fa23e5eb610d8a4d9a87380bce0864fcfcef", "committedDate": "2020-09-11T14:51:56Z", "message": "Add a hint to OIDC and Hibernate Multitenancy docs about passing a tenant id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a72e957649076e1cc8613d959e7f746512bf1538", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/a72e957649076e1cc8613d959e7f746512bf1538", "committedDate": "2020-09-11T09:30:05Z", "message": "Update docs/src/main/asciidoc/security-openid-connect-multitenancy.adoc\n\nCo-authored-by: Guillaume Smet <guillaume.smet@gmail.com>"}, "afterCommit": {"oid": "2ce7fa23e5eb610d8a4d9a87380bce0864fcfcef", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/2ce7fa23e5eb610d8a4d9a87380bce0864fcfcef", "committedDate": "2020-09-11T14:51:56Z", "message": "Add a hint to OIDC and Hibernate Multitenancy docs about passing a tenant id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjI1ODE5", "url": "https://github.com/quarkusio/quarkus/pull/12014#pullrequestreview-487225819", "createdAt": "2020-09-12T12:13:32Z", "commit": {"oid": "2ce7fa23e5eb610d8a4d9a87380bce0864fcfcef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 614, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}