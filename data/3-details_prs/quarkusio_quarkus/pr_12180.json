{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MDEyNjc4", "number": 12180, "title": "Micrometer Vert.x HTTP request propagation", "bodyText": "", "createdAt": "2020-09-18T01:26:10Z", "url": "https://github.com/quarkusio/quarkus/pull/12180", "merged": true, "mergeCommit": {"oid": "125a3ee3fd953ebefa76b446d57c5a3205be015a"}, "closed": true, "closedAt": "2020-09-19T11:42:48Z", "author": {"login": "ebullient"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJ7R8SgBqjM3ODA1MTgwNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKYsGTAFqTQ5MTk5MzM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2eed9095394992b56dcab3a48f317ffe431effd2", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/2eed9095394992b56dcab3a48f317ffe431effd2", "committedDate": "2020-09-18T01:24:45Z", "message": "Correct Vert.x HTTP context propagation"}, "afterCommit": {"oid": "8f7acf09e9278b3dda15c496e6fbf38859735ab1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/8f7acf09e9278b3dda15c496e6fbf38859735ab1", "committedDate": "2020-09-18T01:26:16Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f7acf09e9278b3dda15c496e6fbf38859735ab1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/8f7acf09e9278b3dda15c496e6fbf38859735ab1", "committedDate": "2020-09-18T01:26:16Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "84a811860612216c26065db89b1aa115559a9665", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/84a811860612216c26065db89b1aa115559a9665", "committedDate": "2020-09-18T01:34:20Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84a811860612216c26065db89b1aa115559a9665", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/84a811860612216c26065db89b1aa115559a9665", "committedDate": "2020-09-18T01:34:20Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "0d0943586e0ac74980c7e3f08530203f7f40e3d1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/0d0943586e0ac74980c7e3f08530203f7f40e3d1", "committedDate": "2020-09-18T01:36:40Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d0943586e0ac74980c7e3f08530203f7f40e3d1", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/0d0943586e0ac74980c7e3f08530203f7f40e3d1", "committedDate": "2020-09-18T01:36:40Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "7f175930bdd315355c5bb5f1529e615ebc453c73", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/7f175930bdd315355c5bb5f1529e615ebc453c73", "committedDate": "2020-09-18T01:37:59Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f175930bdd315355c5bb5f1529e615ebc453c73", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/7f175930bdd315355c5bb5f1529e615ebc453c73", "committedDate": "2020-09-18T01:37:59Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "114d18ead7ba2c52503f67c61b43045c1ccfa754", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/114d18ead7ba2c52503f67c61b43045c1ccfa754", "committedDate": "2020-09-18T01:45:35Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "114d18ead7ba2c52503f67c61b43045c1ccfa754", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/114d18ead7ba2c52503f67c61b43045c1ccfa754", "committedDate": "2020-09-18T01:45:35Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "d97734f9009b5d0f55c2cf9e7f440876fb93f5d5", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/d97734f9009b5d0f55c2cf9e7f440876fb93f5d5", "committedDate": "2020-09-18T01:54:41Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d97734f9009b5d0f55c2cf9e7f440876fb93f5d5", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/d97734f9009b5d0f55c2cf9e7f440876fb93f5d5", "committedDate": "2020-09-18T01:54:41Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "dfae5673629e3fea5a9525442499e4a85faa8caf", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/dfae5673629e3fea5a9525442499e4a85faa8caf", "committedDate": "2020-09-18T02:12:54Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfae5673629e3fea5a9525442499e4a85faa8caf", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/dfae5673629e3fea5a9525442499e4a85faa8caf", "committedDate": "2020-09-18T02:12:54Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "157ca79d5eaf6e09507b70048daec9942b7cd849", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/157ca79d5eaf6e09507b70048daec9942b7cd849", "committedDate": "2020-09-18T12:09:46Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "157ca79d5eaf6e09507b70048daec9942b7cd849", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/157ca79d5eaf6e09507b70048daec9942b7cd849", "committedDate": "2020-09-18T12:09:46Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/a6401584475fdaf32b0608db3df35f8b80ef0966", "committedDate": "2020-09-18T13:23:20Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNTQzMjA3", "url": "https://github.com/quarkusio/quarkus/pull/12180#pullrequestreview-491543207", "createdAt": "2020-09-18T14:57:12Z", "commit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNDo1NzoxMlrOHUQuWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNTowNTowOFrOHURBRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAwNzU3Ng==", "bodyText": "minor nit, should the variable name change from metricsContext?", "url": "https://github.com/quarkusio/quarkus/pull/12180#discussion_r491007576", "createdAt": "2020-09-18T14:57:12Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/runtime/src/main/java/io/quarkus/micrometer/runtime/binder/vertx/VertxHttpServerMetrics.java", "diffHunk": "@@ -68,97 +70,110 @@\n     /**\n      * Called when an http server response is pushed.\n      *\n-     * @param socketMetric a MetricsContext object for socket metric context\n+     * @param socketMetric a Map for socket metric context or null\n      * @param method the pushed response method\n      * @param uri the pushed response uri\n      * @param response the http server response\n-     * @return a MetricsContext object for request metric context or null\n+     * @return a RequestMetricContext\n      */\n     @Override\n-    public MetricsContext responsePushed(MetricsContext socketMetric, HttpMethod method, String uri,\n+    public RequestMetric responsePushed(Map<String, Object> socketMetric, HttpMethod method, String uri,\n             HttpServerResponse response) {\n+        RequestMetric metricContext = new RequestMetric();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAxMTgxNw==", "bodyText": "Am I correct in saying metricContext just returns a new RequestMetric that isn't hooked into anything? Could the method just return a new instance?", "url": "https://github.com/quarkusio/quarkus/pull/12180#discussion_r491011817", "createdAt": "2020-09-18T15:04:09Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/runtime/src/main/java/io/quarkus/micrometer/runtime/binder/vertx/VertxHttpServerMetrics.java", "diffHunk": "@@ -68,97 +70,110 @@\n     /**\n      * Called when an http server response is pushed.\n      *\n-     * @param socketMetric a MetricsContext object for socket metric context\n+     * @param socketMetric a Map for socket metric context or null\n      * @param method the pushed response method\n      * @param uri the pushed response uri\n      * @param response the http server response\n-     * @return a MetricsContext object for request metric context or null\n+     * @return a RequestMetricContext\n      */\n     @Override\n-    public MetricsContext responsePushed(MetricsContext socketMetric, HttpMethod method, String uri,\n+    public RequestMetric responsePushed(Map<String, Object> socketMetric, HttpMethod method, String uri,\n             HttpServerResponse response) {\n+        RequestMetric metricContext = new RequestMetric();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAwNzU3Ng=="}, "originalCommit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAxMjQyMg==", "bodyText": "Should this be using retrieveRequestMetric ?", "url": "https://github.com/quarkusio/quarkus/pull/12180#discussion_r491012422", "createdAt": "2020-09-18T15:05:08Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/runtime/src/main/java/io/quarkus/micrometer/runtime/binder/vertx/VertxHttpServerMetrics.java", "diffHunk": "@@ -68,97 +70,110 @@\n     /**\n      * Called when an http server response is pushed.\n      *\n-     * @param socketMetric a MetricsContext object for socket metric context\n+     * @param socketMetric a Map for socket metric context or null\n      * @param method the pushed response method\n      * @param uri the pushed response uri\n      * @param response the http server response\n-     * @return a MetricsContext object for request metric context or null\n+     * @return a RequestMetricContext\n      */\n     @Override\n-    public MetricsContext responsePushed(MetricsContext socketMetric, HttpMethod method, String uri,\n+    public RequestMetric responsePushed(Map<String, Object> socketMetric, HttpMethod method, String uri,\n             HttpServerResponse response) {\n+        RequestMetric metricContext = new RequestMetric();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAwNzU3Ng=="}, "originalCommit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d902b9400bf93e7ca0ff13a2b5341743e800e210", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/d902b9400bf93e7ca0ff13a2b5341743e800e210", "committedDate": "2020-09-18T15:22:34Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6401584475fdaf32b0608db3df35f8b80ef0966", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/a6401584475fdaf32b0608db3df35f8b80ef0966", "committedDate": "2020-09-18T13:23:20Z", "message": "Micrometer Vert.x HTTP request propagation"}, "afterCommit": {"oid": "d902b9400bf93e7ca0ff13a2b5341743e800e210", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/d902b9400bf93e7ca0ff13a2b5341743e800e210", "committedDate": "2020-09-18T15:22:34Z", "message": "Micrometer Vert.x HTTP request propagation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNjQzNTEz", "url": "https://github.com/quarkusio/quarkus/pull/12180#pullrequestreview-491643513", "createdAt": "2020-09-18T17:11:52Z", "commit": {"oid": "d902b9400bf93e7ca0ff13a2b5341743e800e210"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxOTkzMzg1", "url": "https://github.com/quarkusio/quarkus/pull/12180#pullrequestreview-491993385", "createdAt": "2020-09-19T11:42:22Z", "commit": {"oid": "d902b9400bf93e7ca0ff13a2b5341743e800e210"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 533, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}