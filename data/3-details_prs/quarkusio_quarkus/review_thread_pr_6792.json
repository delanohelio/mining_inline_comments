{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MTY2MTQ5", "number": 6792, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNTowNTozNlrODauV_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMDo0MDoyOFrODbhqsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MzQ4ODYyOnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNTowNTozNlrOFh0Zxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjo0MToxM1rOFi3KdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ==", "bodyText": "Just to be sure: have you tested that you don't have several identical messages when setting quarkus.jni.enable=false?", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r371005895", "createdAt": "2020-01-26T15:05:36Z", "author": {"login": "gsmet"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -176,8 +176,10 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n                 //todo: this should be specific build items\n                 if (prop.getKey().equals(\"quarkus.ssl.native\") && prop.getValue() != null) {\n                     enableSslNative = Boolean.parseBoolean(prop.getValue());\n-                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue() != null) {\n-                    nativeConfig.enableJni |= Boolean.parseBoolean(prop.getValue());\n+                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue().equals(\"false\")) {\n+                    log.warn(\"Your application is setting the deprecated 'quarkus.jni.enable' configuration key to false.\"\n+                            + \" Please consider removing this configuration key as it is ignored (JNI is always enabled) and it\"\n+                            + \" will be removed in a future Quarkus version.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05516c473feb1cbf000fa2a49790993cb7991a58"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzU5NA==", "bodyText": "I did it with #6306 but I'll restest it again with this PR just to be sure.", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r371017594", "createdAt": "2020-01-26T17:48:28Z", "author": {"login": "gwenneg"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -176,8 +176,10 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n                 //todo: this should be specific build items\n                 if (prop.getKey().equals(\"quarkus.ssl.native\") && prop.getValue() != null) {\n                     enableSslNative = Boolean.parseBoolean(prop.getValue());\n-                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue() != null) {\n-                    nativeConfig.enableJni |= Boolean.parseBoolean(prop.getValue());\n+                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue().equals(\"false\")) {\n+                    log.warn(\"Your application is setting the deprecated 'quarkus.jni.enable' configuration key to false.\"\n+                            + \" Please consider removing this configuration key as it is ignored (JNI is always enabled) and it\"\n+                            + \" will be removed in a future Quarkus version.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ=="}, "originalCommit": {"oid": "05516c473feb1cbf000fa2a49790993cb7991a58"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA5OTcwMA==", "bodyText": "Unless I missed something, this warning is never displayed with the current Quarkus codebase. I suppose this is an old property that is no longer used by the core extensions, but it can still be used by 3rd parties extensions.\nOn the other hand, the warning from JniProcessor is displayed when quarkus.jni.enable is set to false.\nI don't think we should worry about duplicate warnings here since it's very unlikely to happen.", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372099700", "createdAt": "2020-01-28T22:41:13Z", "author": {"login": "gwenneg"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -176,8 +176,10 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n                 //todo: this should be specific build items\n                 if (prop.getKey().equals(\"quarkus.ssl.native\") && prop.getValue() != null) {\n                     enableSslNative = Boolean.parseBoolean(prop.getValue());\n-                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue() != null) {\n-                    nativeConfig.enableJni |= Boolean.parseBoolean(prop.getValue());\n+                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue().equals(\"false\")) {\n+                    log.warn(\"Your application is setting the deprecated 'quarkus.jni.enable' configuration key to false.\"\n+                            + \" Please consider removing this configuration key as it is ignored (JNI is always enabled) and it\"\n+                            + \" will be removed in a future Quarkus version.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ=="}, "originalCommit": {"oid": "05516c473feb1cbf000fa2a49790993cb7991a58"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMTg5NzQ3OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMDo0MDoyOFrOFjD26g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMToyMToxNVrOFjE-mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA==", "bodyText": "Should we start using Java 11 here?", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372307690", "createdAt": "2020-01-29T10:40:28Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "diffHunk": "@@ -132,7 +133,7 @@\n     /**\n      * The docker image to use to do the image build\n      */\n-    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.2.1\")\n+    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.3.1-java8\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwOTIwMg==", "bodyText": "I don't think so since it still experimental isn't it?", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372309202", "createdAt": "2020-01-29T10:43:34Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "diffHunk": "@@ -132,7 +133,7 @@\n     /**\n      * The docker image to use to do the image build\n      */\n-    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.2.1\")\n+    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.3.1-java8\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}, "originalCommit": {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMxMDEwNw==", "bodyText": "That's fine by me, maybe flip the switch when we require JDK 11 as the minimum version in the future", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372310107", "createdAt": "2020-01-29T10:45:30Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "diffHunk": "@@ -132,7 +133,7 @@\n     /**\n      * The docker image to use to do the image build\n      */\n-    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.2.1\")\n+    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.3.1-java8\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}, "originalCommit": {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyNjA0Mw==", "bodyText": "Makes sense", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372326043", "createdAt": "2020-01-29T11:21:15Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "diffHunk": "@@ -132,7 +133,7 @@\n     /**\n      * The docker image to use to do the image build\n      */\n-    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.2.1\")\n+    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.3.1-java8\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}, "originalCommit": {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1162, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}