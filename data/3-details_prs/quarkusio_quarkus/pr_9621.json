{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNDUyODAy", "number": 9621, "title": "Add JPA static model classes to native image", "bodyText": "Add JPA Static Metamodel classes to the native image.", "createdAt": "2020-05-26T20:42:16Z", "url": "https://github.com/quarkusio/quarkus/pull/9621", "merged": true, "mergeCommit": {"oid": "0b0106cab0b45023dc2ae21e5bf40888306aaf13"}, "closed": true, "closedAt": "2020-05-27T15:31:00Z", "author": {"login": "andrejpetras"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclVazpAFqTQxODk5MTYxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclbB9-AFqTQxOTM0NDQ2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTkxNjE1", "url": "https://github.com/quarkusio/quarkus/pull/9621#pullrequestreview-418991615", "createdAt": "2020-05-27T08:57:29Z", "commit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODo1NzozMFrOGa_5Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODo1ODowNlrOGa_69Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk2MzAzOQ==", "bodyText": "Do you really need the null test? I don't think so. Javadoc of the method says @return a non-null list of annotation instances.", "url": "https://github.com/quarkusio/quarkus/pull/9621#discussion_r430963039", "createdAt": "2020-05-27T08:57:30Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -905,6 +908,22 @@ public void produceLoggingCategories(BuildProducer<LogCategoryBuildItem> categor\n         }\n     }\n \n+    @BuildStep(onlyIf = NativeBuild.class)\n+    public void test(CombinedIndexBuildItem index,\n+            BuildProducer<ReflectiveClassBuildItem> reflective) {\n+        Collection<AnnotationInstance> annotationInstance = index.getIndex().getAnnotations(STATIC_METAMODEL);\n+        if (annotationInstance != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk2MzQ0NQ==", "bodyText": "Please use name().toString() instead of the ClassInfo#toString(). In this case, it makes no difference but we had some issues with that before.", "url": "https://github.com/quarkusio/quarkus/pull/9621#discussion_r430963445", "createdAt": "2020-05-27T08:58:06Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -905,6 +908,22 @@ public void produceLoggingCategories(BuildProducer<LogCategoryBuildItem> categor\n         }\n     }\n \n+    @BuildStep(onlyIf = NativeBuild.class)\n+    public void test(CombinedIndexBuildItem index,\n+            BuildProducer<ReflectiveClassBuildItem> reflective) {\n+        Collection<AnnotationInstance> annotationInstance = index.getIndex().getAnnotations(STATIC_METAMODEL);\n+        if (annotationInstance != null) {\n+\n+            String[] metamodel = annotationInstance.stream()\n+                    .map(a -> a.target().asClass().toString())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTk5MDk0", "url": "https://github.com/quarkusio/quarkus/pull/9621#pullrequestreview-418999094", "createdAt": "2020-05-27T09:06:37Z", "commit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowNjozN1rOGbAP7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowNjozN1rOGbAP7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk2ODgxMw==", "bodyText": "Thinking about it a bit more, just test if the collection is empty above instead of null and drop that check.", "url": "https://github.com/quarkusio/quarkus/pull/9621#discussion_r430968813", "createdAt": "2020-05-27T09:06:37Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -905,6 +908,22 @@ public void produceLoggingCategories(BuildProducer<LogCategoryBuildItem> categor\n         }\n     }\n \n+    @BuildStep(onlyIf = NativeBuild.class)\n+    public void test(CombinedIndexBuildItem index,\n+            BuildProducer<ReflectiveClassBuildItem> reflective) {\n+        Collection<AnnotationInstance> annotationInstance = index.getIndex().getAnnotations(STATIC_METAMODEL);\n+        if (annotationInstance != null) {\n+\n+            String[] metamodel = annotationInstance.stream()\n+                    .map(a -> a.target().asClass().toString())\n+                    .toArray(String[]::new);\n+\n+            if (metamodel.length > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTk5Mzk2", "url": "https://github.com/quarkusio/quarkus/pull/9621#pullrequestreview-418999396", "createdAt": "2020-05-27T09:06:58Z", "commit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowNjo1OFrOGbAQ8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowNjo1OFrOGbAQ8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk2OTA3NQ==", "bodyText": "Could you make the variable plural? It would be less confusing.", "url": "https://github.com/quarkusio/quarkus/pull/9621#discussion_r430969075", "createdAt": "2020-05-27T09:06:58Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -905,6 +908,22 @@ public void produceLoggingCategories(BuildProducer<LogCategoryBuildItem> categor\n         }\n     }\n \n+    @BuildStep(onlyIf = NativeBuild.class)\n+    public void test(CombinedIndexBuildItem index,\n+            BuildProducer<ReflectiveClassBuildItem> reflective) {\n+        Collection<AnnotationInstance> annotationInstance = index.getIndex().getAnnotations(STATIC_METAMODEL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cbfc1c5c1c49ed50714249985c0f6c324d9e393", "author": {"user": {"login": "andrejpetras", "name": "Andrej Petras"}}, "url": "https://github.com/quarkusio/quarkus/commit/8cbfc1c5c1c49ed50714249985c0f6c324d9e393", "committedDate": "2020-05-26T20:39:52Z", "message": "Add JPA static model classes to native image"}, "afterCommit": {"oid": "6660d9a98431ea5a4858de5ff88bcb2c5a5d4e66", "author": {"user": {"login": "andrejpetras", "name": "Andrej Petras"}}, "url": "https://github.com/quarkusio/quarkus/commit/6660d9a98431ea5a4858de5ff88bcb2c5a5d4e66", "committedDate": "2020-05-27T10:48:03Z", "message": "Add JPA static model classes to native image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "266d80de3532202f6bcec0a7fa5f74d39fc75f9f", "author": {"user": {"login": "andrejpetras", "name": "Andrej Petras"}}, "url": "https://github.com/quarkusio/quarkus/commit/266d80de3532202f6bcec0a7fa5f74d39fc75f9f", "committedDate": "2020-05-27T10:50:06Z", "message": "Add JPA static model classes to native image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6660d9a98431ea5a4858de5ff88bcb2c5a5d4e66", "author": {"user": {"login": "andrejpetras", "name": "Andrej Petras"}}, "url": "https://github.com/quarkusio/quarkus/commit/6660d9a98431ea5a4858de5ff88bcb2c5a5d4e66", "committedDate": "2020-05-27T10:48:03Z", "message": "Add JPA static model classes to native image"}, "afterCommit": {"oid": "266d80de3532202f6bcec0a7fa5f74d39fc75f9f", "author": {"user": {"login": "andrejpetras", "name": "Andrej Petras"}}, "url": "https://github.com/quarkusio/quarkus/commit/266d80de3532202f6bcec0a7fa5f74d39fc75f9f", "committedDate": "2020-05-27T10:50:06Z", "message": "Add JPA static model classes to native image"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzQ0NDY4", "url": "https://github.com/quarkusio/quarkus/pull/9621#pullrequestreview-419344468", "createdAt": "2020-05-27T15:30:52Z", "commit": {"oid": "266d80de3532202f6bcec0a7fa5f74d39fc75f9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3216, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}