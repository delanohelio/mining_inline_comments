{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5OTgxOTY0", "number": 11459, "title": "Fix registration of GraphQL application classes for reflection", "bodyText": "Fix #11452\nSigned-off-by:Phillip Kruger phillip.kruger@gmail.com", "createdAt": "2020-08-19T07:41:54Z", "url": "https://github.com/quarkusio/quarkus/pull/11459", "merged": true, "mergeCommit": {"oid": "a9e63cc32e428929c43a6430e7f434d5a3e285cb"}, "closed": true, "closedAt": "2020-08-20T16:39:40Z", "author": {"login": "phillip-kruger"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAsFbLgFqTQ3MTM4MjEyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAy9ZYgFqTQ3MTc5OTEwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzgyMTI4", "url": "https://github.com/quarkusio/quarkus/pull/11459#pullrequestreview-471382128", "createdAt": "2020-08-20T08:38:09Z", "commit": {"oid": "88fe7aff41b6040dd429edbca0da710b60052d80"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwODozODowOVrOHD0fbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwODozODowOVrOHD0fbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzc2Nzc5MQ==", "bodyText": "I'm not sure it's the right fix.\nWhat I think would be right is:\n\nregister the owner with a class build item\nregister the return types of the GraphQL methods with a hierarchy build item\n\nIf you have a hierarchy of complex objects for the return type, I think what you did will not work.", "url": "https://github.com/quarkusio/quarkus/pull/11459#discussion_r473767791", "createdAt": "2020-08-20T08:38:09Z", "author": {"login": "gsmet"}, "path": "extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLProcessor.java", "diffHunk": "@@ -156,11 +155,7 @@ void buildExecutionService(\n         recorder.createExecutionService(beanContainer.getValue(), schema);\n \n         // Make sure the complex object from the application can work in native mode\n-        for (String c : getClassesToRegisterForReflection(schema)) {\n-            DotName name = DotName.createSimple(c);\n-            org.jboss.jandex.Type type = org.jboss.jandex.Type.create(name, org.jboss.jandex.Type.Kind.CLASS);\n-            reflectiveHierarchyProducer.produce(new ReflectiveHierarchyBuildItem(type, index));\n-        }\n+        reflectiveClassProducer.produce(new ReflectiveClassBuildItem(true, true, getSchemaJavaClasses(schema)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fe7aff41b6040dd429edbca0da710b60052d80"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c3d4dc3a5aad2ebf7f6c0d2331d8cddea9c1bed", "author": {"user": {"login": "phillip-kruger", "name": "Phillip Kr\u00fcger"}}, "url": "https://github.com/quarkusio/quarkus/commit/5c3d4dc3a5aad2ebf7f6c0d2331d8cddea9c1bed", "committedDate": "2020-08-20T12:05:18Z", "message": "Fix registration of application classes for reflection\n\nSigned-off-by: Phillip Kruger <phillip.kruger@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzk5MTAw", "url": "https://github.com/quarkusio/quarkus/pull/11459#pullrequestreview-471799100", "createdAt": "2020-08-20T16:39:33Z", "commit": {"oid": "5c3d4dc3a5aad2ebf7f6c0d2331d8cddea9c1bed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 824, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}