{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MjI3Mjkx", "number": 12744, "title": "Export Micrometer metrics to Signalfx", "bodyText": "Resolves #12686", "createdAt": "2020-10-15T16:25:03Z", "url": "https://github.com/quarkusio/quarkus/pull/12744", "merged": true, "mergeCommit": {"oid": "e3a4bf9e1402104049bbe45fe84202482632874e"}, "closed": true, "closedAt": "2020-10-16T01:23:23Z", "author": {"login": "ebullient"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS2aqUAFqTUwOTY3MzA3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS4xPCAH2gAyNTA0MjI3MjkxOjdhYWQwY2UzZjE2ZjVhMzg2Y2QzMzFkOWI3MDg3N2FmZGE5ZTVhOGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjczMDc0", "url": "https://github.com/quarkusio/quarkus/pull/12744#pullrequestreview-509673074", "createdAt": "2020-10-15T18:48:38Z", "commit": {"oid": "435fcbd17e39128b9c2ae7404c8bf3eda151f59e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODo0ODozOFrOHiVhOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODo0ODozOFrOHiVhOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2NjIwMA==", "bodyText": "Should the config be captured in a boolean or just used directly?", "url": "https://github.com/quarkusio/quarkus/pull/12744#discussion_r505766200", "createdAt": "2020-10-15T18:48:38Z", "author": {"login": "kenfinnigan"}, "path": "extensions/micrometer/deployment/src/main/java/io/quarkus/micrometer/deployment/export/SignalFxRegistryProcessor.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.micrometer.deployment.export;\n+\n+import java.util.function.BooleanSupplier;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.arc.deployment.AdditionalBeanBuildItem;\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.micrometer.deployment.MicrometerRegistryProviderBuildItem;\n+import io.quarkus.micrometer.runtime.MicrometerRecorder;\n+import io.quarkus.micrometer.runtime.config.MicrometerConfig;\n+import io.quarkus.micrometer.runtime.export.SignalFxMeterRegistryProvider;\n+\n+/**\n+ * Add support for the SignalFx Meter Registry. Note that the registry may not\n+ * be available at deployment time for some projects: Avoid direct class\n+ * references.\n+ */\n+public class SignalFxRegistryProcessor {\n+    private static final Logger log = Logger.getLogger(SignalFxRegistryProcessor.class);\n+\n+    static final String REGISTRY_CLASS_NAME = \"io.micrometer.signalfx.SignalFxMeterRegistry\";\n+    static final Class<?> REGISTRY_CLASS = MicrometerRecorder.getClassForName(REGISTRY_CLASS_NAME);\n+\n+    public static class SignalFxRegistryEnabled implements BooleanSupplier {\n+        MicrometerConfig mConfig;\n+\n+        @Override\n+        public boolean getAsBoolean() {\n+            boolean test = mConfig.checkRegistryEnabledWithDefault(mConfig.export.signalfx);\n+            return REGISTRY_CLASS != null && mConfig.checkRegistryEnabledWithDefault(mConfig.export.signalfx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "435fcbd17e39128b9c2ae7404c8bf3eda151f59e"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ab82a935999eeca96a013fc0c2f348fa882410", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/b3ab82a935999eeca96a013fc0c2f348fa882410", "committedDate": "2020-10-15T19:08:04Z", "message": "Refactor config validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "435fcbd17e39128b9c2ae7404c8bf3eda151f59e", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/435fcbd17e39128b9c2ae7404c8bf3eda151f59e", "committedDate": "2020-10-15T16:21:34Z", "message": "Add SignalFx support"}, "afterCommit": {"oid": "14187ff06dfeba6ead722a4cc305488879431260", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/14187ff06dfeba6ead722a4cc305488879431260", "committedDate": "2020-10-15T19:08:04Z", "message": "Add SignalFx support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14187ff06dfeba6ead722a4cc305488879431260", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/14187ff06dfeba6ead722a4cc305488879431260", "committedDate": "2020-10-15T19:08:04Z", "message": "Add SignalFx support"}, "afterCommit": {"oid": "3eb921dc0107eff6ee8b8bc2c2814a6505e1f5ba", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/3eb921dc0107eff6ee8b8bc2c2814a6505e1f5ba", "committedDate": "2020-10-15T19:15:10Z", "message": "Add SignalFx support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba0efb223c9beb44ce5189b020c9054cb7f033a", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/9ba0efb223c9beb44ce5189b020c9054cb7f033a", "committedDate": "2020-10-15T19:28:42Z", "message": "Add SignalFx support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3eb921dc0107eff6ee8b8bc2c2814a6505e1f5ba", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/3eb921dc0107eff6ee8b8bc2c2814a6505e1f5ba", "committedDate": "2020-10-15T19:15:10Z", "message": "Add SignalFx support"}, "afterCommit": {"oid": "9ba0efb223c9beb44ce5189b020c9054cb7f033a", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/9ba0efb223c9beb44ce5189b020c9054cb7f033a", "committedDate": "2020-10-15T19:28:42Z", "message": "Add SignalFx support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NzA5OTk5", "url": "https://github.com/quarkusio/quarkus/pull/12744#pullrequestreview-509709999", "createdAt": "2020-10-15T19:41:06Z", "commit": {"oid": "9ba0efb223c9beb44ce5189b020c9054cb7f033a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aad0ce3f16f5a386cd331d9b70877afda9e5a8c", "author": {"user": {"login": "ebullient", "name": "Erin Schnabel"}}, "url": "https://github.com/quarkusio/quarkus/commit/7aad0ce3f16f5a386cd331d9b70877afda9e5a8c", "committedDate": "2020-10-15T21:36:20Z", "message": "Verify Log messages; clean up UT"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1808, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}