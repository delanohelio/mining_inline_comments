{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MjIxNzY2", "number": 8658, "title": "Rename OIDC expiration-grace property to lifespan-grace", "bodyText": "Fixes #8627\nI'm renaming it to lifespan-grace as somehow I'm not keen on leeway :-), it sounds a bit too generic. It is a minor issue though (can rename to leeway if preferred). Note we already use jwt.lifespan property for the client_secret_jwt so lifespan-grace seems not too bad.\nPedro's logout PR uses the expiration-grace property so I'll rebase once his PR is in and there will be a test too, we already have a few timeout tests so I'd rather not add another one yet.\nIt's better to fix this property name now as it is misleading.\nI'm not sure it is worth keeping the expiration-grace as deprecated, the users are quite likely not aware that iat is affected by this property, so it feels the best action is to rename it and send a message.\n@Ladicek, hi.\nI'd rather not assign it some default value > 0, as we'll open a potential CVE, some user's app will be invoked by the stolen token few secs after the exp (which can happen with the leeway), they will start investigating and find out that it is our fault etc. I agree in many cases no one will probably care but I'd rather them set this property themselves :-)", "createdAt": "2020-04-17T16:13:19Z", "url": "https://github.com/quarkusio/quarkus/pull/8658", "merged": true, "mergeCommit": {"oid": "904d7e0161ad29a4267c54cf0a584b3db59aa354"}, "closed": true, "closedAt": "2020-04-21T08:31:31Z", "author": {"login": "sberyozkin"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYjrxQgFqTM5NTU5MDY0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZt65hgFqTM5NzAzMDEzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NTkwNjQ3", "url": "https://github.com/quarkusio/quarkus/pull/8658#pullrequestreview-395590647", "createdAt": "2020-04-17T16:14:45Z", "commit": {"oid": "bfb60f693aca6bec52f9b3f76bee808f2c6802cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNjoxNDo0NVrOGHUWzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNjoxNDo0NVrOGHUWzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjczNA==", "bodyText": "Oops, one sec", "url": "https://github.com/quarkusio/quarkus/pull/8658#discussion_r410326734", "createdAt": "2020-04-17T16:14:45Z", "author": {"login": "sberyozkin"}, "path": "extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java", "diffHunk": "@@ -557,11 +560,11 @@ public void setAudience(List<String> audience) {\n         }\n \n         public Optional<Integer> getExpirationGrace() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfb60f693aca6bec52f9b3f76bee808f2c6802cf"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfb60f693aca6bec52f9b3f76bee808f2c6802cf", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/bfb60f693aca6bec52f9b3f76bee808f2c6802cf", "committedDate": "2020-04-17T16:07:27Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}, "afterCommit": {"oid": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "committedDate": "2020-04-17T16:38:35Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjUzOTI0", "url": "https://github.com/quarkusio/quarkus/pull/8658#pullrequestreview-396253924", "createdAt": "2020-04-20T08:43:54Z", "commit": {"oid": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo0Mzo1NFrOGIJtrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo0Mzo1NFrOGIJtrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIwMDk0Mg==", "bodyText": "Call me dumb, but this is really hard to understand :-) What about:\nLife span grace period in seconds.\nWhen checking token expiry, current time is allowed to be later than token expiration time by at most the configured number of seconds.\nWhen checking token issuance, current time is allowed to be sooner than token issue time by at most the configured number of seconds.\n\n?", "url": "https://github.com/quarkusio/quarkus/pull/8658#discussion_r411200942", "createdAt": "2020-04-20T08:43:54Z", "author": {"login": "Ladicek"}, "path": "extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java", "diffHunk": "@@ -527,11 +527,14 @@ public static Token fromAudience(String... audience) {\n         public Optional<List<String>> audience = Optional.empty();\n \n         /**\n-         * Expiration grace period in seconds. A token expiration time will be reduced by\n-         * the value of this property before being compared to the current time.\n+         * Life span grace period in seconds.\n+         * Token expiration time will be expected to be in the future relative to a difference between the current time and the\n+         * value of this property\n+         * while the issued at time will be expected to be in the past relative to a sum of the current time and the value of\n+         * this property.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "committedDate": "2020-04-17T16:38:35Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}, "afterCommit": {"oid": "0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "committedDate": "2020-04-20T13:47:37Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96d11f492f774b24a183cebc67fc4abc265d4d0e", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/96d11f492f774b24a183cebc67fc4abc265d4d0e", "committedDate": "2020-04-20T17:42:42Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "committedDate": "2020-04-20T13:47:37Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}, "afterCommit": {"oid": "96d11f492f774b24a183cebc67fc4abc265d4d0e", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/96d11f492f774b24a183cebc67fc4abc265d4d0e", "committedDate": "2020-04-20T17:42:42Z", "message": "Rename OIDC expiration-grace property to lifespan-grace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDMwMTM0", "url": "https://github.com/quarkusio/quarkus/pull/8658#pullrequestreview-397030134", "createdAt": "2020-04-21T06:44:15Z", "commit": {"oid": "96d11f492f774b24a183cebc67fc4abc265d4d0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4646, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}