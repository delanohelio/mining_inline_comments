{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODIxODkz", "number": 7786, "title": "Fixes related to Maven projects using the 'revision' property as the project version", "bodyText": "Fixes #7747", "createdAt": "2020-03-11T17:22:31Z", "url": "https://github.com/quarkusio/quarkus/pull/7786", "merged": true, "mergeCommit": {"oid": "d8c8c3611707e14814ecb324c97071c3ab6de1d4"}, "closed": true, "closedAt": "2020-03-12T12:51:22Z", "author": {"login": "aloubyansky"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMudCBgFqTM3MzE1NDY0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM7MYpAFqTM3MzUyNTkwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTU0NjQ0", "url": "https://github.com/quarkusio/quarkus/pull/7786#pullrequestreview-373154644", "createdAt": "2020-03-11T22:00:31Z", "commit": {"oid": "f14d4c42f6bdfd97930ddb5867b188edffd57bfe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjowMDozMVrOF1KlsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjowMDozMVrOF1KlsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI5MjMzNw==", "bodyText": "Just a heads up: https://maven.apache.org/maven-ci-friendly.html does not only support revision but also sha1 and/or changelist.", "url": "https://github.com/quarkusio/quarkus/pull/7786#discussion_r391292337", "createdAt": "2020-03-11T22:00:31Z", "author": {"login": "famod"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/workspace/LocalProject.java", "diffHunk": "@@ -28,17 +28,24 @@\n \n     private static final String PROJECT_BASEDIR = \"${project.basedir}\";\n     private static final String POM_XML = \"pom.xml\";\n+    private static final String REVISION = \"revision\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f14d4c42f6bdfd97930ddb5867b188edffd57bfe"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTg0ODkx", "url": "https://github.com/quarkusio/quarkus/pull/7786#pullrequestreview-373184891", "createdAt": "2020-03-11T23:06:19Z", "commit": {"oid": "f14d4c42f6bdfd97930ddb5867b188edffd57bfe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMzowNjoyMFrOF1MRHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMzowNjoyMFrOF1MRHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMxOTgzNg==", "bodyText": "Does this also cover -Drevision=<something_different_than_in_pom>?\nThis is important, because that is what CI (e.g. Jenkins via Jenkinsfile) would be passing to mvn to override the default revision.\nA variation is of that would be:\n\n\n<properties>\n    <revision>0.1-${revisionSuffix}</revision>\n    <revisionSuffix>SNAPSHOT</revisionSuffix>\n</properties>\n\nCI passes -DrevisionSuffix=build-${BUILD_NUMBER}\n\nThis way local build produces 0.1-SNAPSHOT and CI produces something like 0.1-build-123.", "url": "https://github.com/quarkusio/quarkus/pull/7786#discussion_r391319836", "createdAt": "2020-03-11T23:06:20Z", "author": {"login": "famod"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/workspace/LocalProject.java", "diffHunk": "@@ -136,10 +143,30 @@ private LocalProject(Model rawModel, LocalWorkspace workspace) throws BootstrapE\n         this.workspace = workspace;\n         this.groupId = ModelUtils.getGroupId(rawModel);\n         this.artifactId = rawModel.getArtifactId();\n-        this.version = ModelUtils.getVersion(rawModel);\n+\n+        String version = ModelUtils.getVersion(rawModel);\n+        final boolean revisionVersion;\n+        if (revisionVersion = REVISION_EXPR.equals(version)) {\n+            version = rawModel.getProperties().getProperty(REVISION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f14d4c42f6bdfd97930ddb5867b188edffd57bfe"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8932af18edd8cc7e5b5243a105f63033458a119a", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/8932af18edd8cc7e5b5243a105f63033458a119a", "committedDate": "2020-03-12T10:29:21Z", "message": "Fixes related to Maven projects using the 'revision' property as the project version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f14d4c42f6bdfd97930ddb5867b188edffd57bfe", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/f14d4c42f6bdfd97930ddb5867b188edffd57bfe", "committedDate": "2020-03-11T17:20:55Z", "message": "Fixes related to Maven projects using the 'revision' property as the project version"}, "afterCommit": {"oid": "8932af18edd8cc7e5b5243a105f63033458a119a", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/8932af18edd8cc7e5b5243a105f63033458a119a", "committedDate": "2020-03-12T10:29:21Z", "message": "Fixes related to Maven projects using the 'revision' property as the project version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNTI1OTAx", "url": "https://github.com/quarkusio/quarkus/pull/7786#pullrequestreview-373525901", "createdAt": "2020-03-12T12:51:06Z", "commit": {"oid": "8932af18edd8cc7e5b5243a105f63033458a119a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3839, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}