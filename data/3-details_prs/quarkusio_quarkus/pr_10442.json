{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzODEyNzQ1", "number": 10442, "title": "Deprecate RecorderContext#classProxy method", "bodyText": "As discussed in the Quarkus dev mailing list, the RecorderContext#classProxy is no longer needed since the build steps can now safely load the application/deployment classes without the need for this proxy construct.\nThis PR has 3 commits - one which does the deprecation and a couple of others which remove the usage of classProxy from qute and smallrye-health extensions. The updates to qute and smallrye-health are here to make sure things do actually work fine if the usage of classProxy method is replaced. If this shows no regressions, then as separate PRs we can move some of the remaining extensions in this repo, away from this method.", "createdAt": "2020-07-03T02:00:33Z", "url": "https://github.com/quarkusio/quarkus/pull/10442", "merged": true, "mergeCommit": {"oid": "e118d5e14ba149d85a5fb1b7982a7088229d9366"}, "closed": true, "closedAt": "2020-07-03T15:20:24Z", "author": {"login": "jaikiran"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxJT3egH2gAyNDQzODEyNzQ1Ojc4NDZjZjI5MmY3NzhhZjdjZjI5MmNlNzZlYWQ2OTJjY2RiNTFjYWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxU_q2gFqTQ0MjQ3MzIxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7846cf292f778af7cf292ce76ead692ccdb51cae", "author": {"user": {"login": "jaikiran", "name": "Jaikiran"}}, "url": "https://github.com/quarkusio/quarkus/commit/7846cf292f778af7cf292ce76ead692ccdb51cae", "committedDate": "2020-07-03T01:39:13Z", "message": "Deprecate RecorderContext#classProxy method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTA3NDkz", "url": "https://github.com/quarkusio/quarkus/pull/10442#pullrequestreview-442107493", "createdAt": "2020-07-03T02:10:34Z", "commit": {"oid": "b6921e6693faea92d939dcabb09539f589382379"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMjoxMDozNFrOGshrQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMjoxMDozNFrOGshrQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTM0MjI3Mw==", "bodyText": "I would just throw the CNFE, I don't think wrapping it adds anything", "url": "https://github.com/quarkusio/quarkus/pull/10442#discussion_r449342273", "createdAt": "2020-07-03T02:10:34Z", "author": {"login": "stuartwdouglas"}, "path": "extensions/qute/deployment/src/main/java/io/quarkus/qute/deployment/MessageBundleProcessor.java", "diffHunk": "@@ -236,11 +237,17 @@ AdditionalBeanBuildItem beans() {\n     void initBundleContext(RecorderContext context, MessageBundleRecorder recorder,\n             List<MessageBundleMethodBuildItem> messageBundleMethods,\n             List<MessageBundleBuildItem> bundles,\n-            BuildProducer<SyntheticBeanBuildItem> syntheticBeans) {\n+            BuildProducer<SyntheticBeanBuildItem> syntheticBeans) throws BuildException {\n \n         Map<String, Map<String, Class<?>>> bundleInterfaces = new HashMap<>();\n         for (MessageBundleBuildItem bundle : bundles) {\n-            Class<?> bundleClass = context.classProxy(bundle.getDefaultBundleInterface().toString());\n+            final Class<?> bundleClass;\n+            try {\n+                bundleClass = Class.forName(bundle.getDefaultBundleInterface().toString(), true,\n+                        Thread.currentThread().getContextClassLoader());\n+            } catch (ClassNotFoundException e) {\n+                throw new BuildException(e, Collections.emptyList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6921e6693faea92d939dcabb09539f589382379"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e1f7faedd5e46eaa0763171c37428c1604eb118", "author": {"user": {"login": "jaikiran", "name": "Jaikiran"}}, "url": "https://github.com/quarkusio/quarkus/commit/4e1f7faedd5e46eaa0763171c37428c1604eb118", "committedDate": "2020-07-03T02:17:03Z", "message": "Remove usage of deprecated RecorderContext#classProxy from smallrye-health"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c12e3df56a78680a680ba8303ad5f14827c6e1ad", "author": {"user": {"login": "jaikiran", "name": "Jaikiran"}}, "url": "https://github.com/quarkusio/quarkus/commit/c12e3df56a78680a680ba8303ad5f14827c6e1ad", "committedDate": "2020-07-03T02:19:16Z", "message": "Remove deprecated RecorderContext#classProxy usage from Qute"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6921e6693faea92d939dcabb09539f589382379", "author": {"user": {"login": "jaikiran", "name": "Jaikiran"}}, "url": "https://github.com/quarkusio/quarkus/commit/b6921e6693faea92d939dcabb09539f589382379", "committedDate": "2020-07-03T01:55:06Z", "message": "Remove usage of deprecated RecorderContext#classProxy from smallrye-health"}, "afterCommit": {"oid": "c12e3df56a78680a680ba8303ad5f14827c6e1ad", "author": {"user": {"login": "jaikiran", "name": "Jaikiran"}}, "url": "https://github.com/quarkusio/quarkus/commit/c12e3df56a78680a680ba8303ad5f14827c6e1ad", "committedDate": "2020-07-03T02:19:16Z", "message": "Remove deprecated RecorderContext#classProxy usage from Qute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDczMjEw", "url": "https://github.com/quarkusio/quarkus/pull/10442#pullrequestreview-442473210", "createdAt": "2020-07-03T15:16:02Z", "commit": {"oid": "c12e3df56a78680a680ba8303ad5f14827c6e1ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3622, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}