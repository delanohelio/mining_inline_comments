{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNDM3MDAx", "number": 13696, "title": "Allow injection of SearchSession/SearchMapping", "bodyText": "Based on #13694, which should be merged first. Creating this PR as a draft until it's done.\nRelated quickstart update: quarkusio/quarkus-quickstarts#725", "createdAt": "2020-12-04T10:23:51Z", "url": "https://github.com/quarkusio/quarkus/pull/13696", "merged": true, "mergeCommit": {"oid": "606aa6c1c0c4e8e1fc8cc8de48b7308819d1fcd7"}, "closed": true, "closedAt": "2020-12-07T16:19:33Z", "author": {"login": "yrodiere"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi1epNABqjQwNzIxMjAyNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdj1ALigFqTU0NjExNDk0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a07075213af3979ee716dd6f1c427b3a6933de8a", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/a07075213af3979ee716dd6f1c427b3a6933de8a", "committedDate": "2020-12-04T10:22:25Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}, "afterCommit": {"oid": "ba58b1637f4a6ec925bbecfa5c94a104b70cf8f4", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/ba58b1637f4a6ec925bbecfa5c94a104b70cf8f4", "committedDate": "2020-12-04T10:48:59Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba58b1637f4a6ec925bbecfa5c94a104b70cf8f4", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/ba58b1637f4a6ec925bbecfa5c94a104b70cf8f4", "committedDate": "2020-12-04T10:48:59Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}, "afterCommit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/b7dd16edc6ca4e30ed51fc583118985292882cc1", "committedDate": "2020-12-04T14:46:46Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTcyNzA4", "url": "https://github.com/quarkusio/quarkus/pull/13696#pullrequestreview-545172708", "createdAt": "2020-12-04T17:50:26Z", "commit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzo1MDoyNlrOH_bexA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzo1MDoyNlrOH_bexA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI3MjU4MA==", "bodyText": "Is this intended?", "url": "https://github.com/quarkusio/quarkus/pull/13696#discussion_r536272580", "createdAt": "2020-12-04T17:50:26Z", "author": {"login": "gastaldi"}, "path": "extensions/hibernate-search-orm-elasticsearch/deployment/pom.xml", "diffHunk": "@@ -52,6 +67,118 @@\n                     </annotationProcessorPaths>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTg2NTQy", "url": "https://github.com/quarkusio/quarkus/pull/13696#pullrequestreview-545186542", "createdAt": "2020-12-04T18:09:37Z", "commit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxODowOTozOFrOH_cMUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxODowOTozOFrOH_cMUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI4NDI0Mg==", "bodyText": "Don't you expect the configuration to be potentially different depending on the PU?\nDoesn't need to be part of this PR, just asking.", "url": "https://github.com/quarkusio/quarkus/pull/13696#discussion_r536284242", "createdAt": "2020-12-04T18:09:38Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-search-orm-elasticsearch/deployment/src/test/resources/application.properties", "diffHunk": "@@ -0,0 +1,11 @@\n+quarkus.datasource.db-kind=h2\n+quarkus.datasource.jdbc.url=jdbc:h2:mem:default;DB_CLOSE_DELAY=-1\n+\n+quarkus.hibernate-orm.dialect=org.hibernate.dialect.H2Dialect\n+quarkus.hibernate-orm.database.generation=drop-and-create\n+\n+quarkus.hibernate-search-orm.elasticsearch.version=7\n+quarkus.hibernate-search-orm.elasticsearch.hosts=${elasticsearch.hosts:localhost:9200}\n+quarkus.hibernate-search-orm.elasticsearch.protocol=${elasticsearch.protocol:http}\n+quarkus.hibernate-search-orm.schema-management.strategy=drop-and-create-and-drop\n+quarkus.hibernate-search-orm.automatic-indexing.synchronization.strategy=sync", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5e6eb60cccfa8acad601662c6f855b37fd2c63e", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/b5e6eb60cccfa8acad601662c6f855b37fd2c63e", "committedDate": "2020-12-07T10:40:42Z", "message": "Do not acquire the per-request Session when unwrapping a Session to its API contracts\n\nThis is important for Hibernate Search in particular."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2362019fedec135bc6879e64f7b1d8fdd92420b", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/c2362019fedec135bc6879e64f7b1d8fdd92420b", "committedDate": "2020-12-07T10:40:42Z", "message": "Do not acquire the per-request Session when getting the SessionFactory from a TransactionScopedSession\n\nThis is important for Hibernate Search in particular.\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "757a73ac2d74dfd9af665a6d9426954214a1f2f0", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/757a73ac2d74dfd9af665a6d9426954214a1f2f0", "committedDate": "2020-12-07T10:40:43Z", "message": "Support injection of SearchMapping/SearchSession\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acbebf3eb2fd8ffaded93a79b49773752829679e", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/acbebf3eb2fd8ffaded93a79b49773752829679e", "committedDate": "2020-12-07T10:40:43Z", "message": "Move HSearch configuration tests to their own package\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1574d2a571bb320573579a4852054862842f852", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/e1574d2a571bb320573579a4852054862842f852", "committedDate": "2020-12-07T10:40:43Z", "message": "Add configuration for executing tests in extensions/hibernate-search-orm-elasticsearch/deployment\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c641e7e68fafc285ff6cb5f49401843b80531a5a", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/c641e7e68fafc285ff6cb5f49401843b80531a5a", "committedDate": "2020-12-07T10:40:43Z", "message": "Test injection of SearchMapping/SearchSession\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c740c27b64bc842b52018be3356552be6474f1f5", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/c740c27b64bc842b52018be3356552be6474f1f5", "committedDate": "2020-12-07T10:40:43Z", "message": "Use SearchSession injection in the quickstart\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abf99e75035bdbf430246206a36779323343cbc7", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/abf99e75035bdbf430246206a36779323343cbc7", "committedDate": "2020-12-07T10:40:43Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7dd16edc6ca4e30ed51fc583118985292882cc1", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/b7dd16edc6ca4e30ed51fc583118985292882cc1", "committedDate": "2020-12-04T14:46:46Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}, "afterCommit": {"oid": "abf99e75035bdbf430246206a36779323343cbc7", "author": {"user": {"login": "yrodiere", "name": "Yoann Rodi\u00e8re"}}, "url": "https://github.com/quarkusio/quarkus/commit/abf99e75035bdbf430246206a36779323343cbc7", "committedDate": "2020-12-07T10:40:43Z", "message": "Update some warnings about Hibernate Search being in Beta\n\nSigned-off-by: Yoann Rodi\u00e8re <yoann@hibernate.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTE0OTQz", "url": "https://github.com/quarkusio/quarkus/pull/13696#pullrequestreview-546114943", "createdAt": "2020-12-07T12:46:58Z", "commit": {"oid": "abf99e75035bdbf430246206a36779323343cbc7"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0Njo1OFrOIAlIiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0OTozOVrOIAlPgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ3OTMwNw==", "bodyText": "\ud83d\udcaf", "url": "https://github.com/quarkusio/quarkus/pull/13696#discussion_r537479307", "createdAt": "2020-12-07T12:46:58Z", "author": {"login": "Sanne"}, "path": "docs/src/main/asciidoc/hibernate-search-orm-elasticsearch.adoc", "diffHunk": "@@ -14,12 +14,6 @@ We will also explore how you can can query your Elasticsearch cluster using the\n \n include::./status-include.adoc[]\n \n-[WARNING]\n-====\n-This extension is based on a beta version of Hibernate Search.\n-While APIs are quite stable and the code is of production quality and thoroughly tested, some features are still missing, performance might not be optimal and some APIs or configuration properties might change as the extension matures.\n-====\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abf99e75035bdbf430246206a36779323343cbc7"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ4MTA5MA==", "bodyText": "Not a blocker, but I'd prefer such a note to be fully expressed with an example.", "url": "https://github.com/quarkusio/quarkus/pull/13696#discussion_r537481090", "createdAt": "2020-12-07T12:49:39Z", "author": {"login": "Sanne"}, "path": "docs/src/main/asciidoc/hibernate-search-orm-elasticsearch.adoc", "diffHunk": "@@ -481,16 +475,26 @@ It is definitely too aggressive for person names but it is perfect for the book\n \n == Adding full text capabilities to our REST service\n \n-In our existing `LibraryResource`, we just need to inject the following methods (and add a few ``import``s):\n+In our existing `LibraryResource`, we just need to inject the `SearchSession`:\n+\n+[source,java]\n+----\n+    @Inject\n+    SearchSession searchSession; // <1>\n+----\n+<1> Inject a Hibernate Search session, which relies on the `EntityManager` under the hood.\n+Applications with multiple persistence units can use a CDI qualifier to select the right one:\n+either `@Named` or `@io.quarkus.hibernate.orm.PersistenceUnit`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abf99e75035bdbf430246206a36779323343cbc7"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1237, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}