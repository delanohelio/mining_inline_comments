{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDQ2OTM3", "number": 10037, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODoxNDozOFrOEF1Ksg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTowODoyN1rOEF2cIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTQ5NDI2OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/mutability/ReaugmentTask.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODoxNDozOFrOGkQQVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDo1NDozMlrOGkWBDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY2ODI0Ng==", "bodyText": "We probably don't want this", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440668246", "createdAt": "2020-06-16T08:14:38Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/mutability/ReaugmentTask.java", "diffHunk": "@@ -1,7 +1,6 @@\n package io.quarkus.deployment.mutability;\n \n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.BUILD_SYSTEM_PROPERTIES;\n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.DEPLOYMENT_QUARKUS;\n+import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY5NDk4Ng==", "bodyText": "oops, I am using a different computer and the IDE was not fully setup properly.", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440694986", "createdAt": "2020-06-16T08:56:53Z", "author": {"login": "stuartwdouglas"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/mutability/ReaugmentTask.java", "diffHunk": "@@ -1,7 +1,6 @@\n package io.quarkus.deployment.mutability;\n \n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.BUILD_SYSTEM_PROPERTIES;\n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.DEPLOYMENT_QUARKUS;\n+import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY2ODI0Ng=="}, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc2MjYzOQ==", "bodyText": "Seems like your IDE is still messing with you :)", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440762639", "createdAt": "2020-06-16T10:54:32Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/mutability/ReaugmentTask.java", "diffHunk": "@@ -1,7 +1,6 @@\n package io.quarkus.deployment.mutability;\n \n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.BUILD_SYSTEM_PROPERTIES;\n-import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.DEPLOYMENT_QUARKUS;\n+import static io.quarkus.deployment.pkg.steps.JarResultBuildStep.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY2ODI0Ng=="}, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTU2NzQ4OnYy", "diffSide": "RIGHT", "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODozMzo1OFrOGkQ-_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODozMzo1OFrOGkQ-_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4MDE5MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440680190", "createdAt": "2020-06-16T08:33:58Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -210,6 +216,8 @@ private DockerfilePaths getDockerfilePaths(DockerConfig dockerConfig, boolean fo\n         } else {\n             if (dockerConfig.dockerfileJvmPath.isPresent()) {\n                 return ProvidedDockerfile.get(Paths.get(dockerConfig.dockerfileJvmPath.get()), outputDirectory);\n+            } else if (packageConfig.type.equals(PackageConfig.FAST_JAR)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTcwMjcyOnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-fast-jar.ftl", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTowODoyN1rOGkSU8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOToxMTowM1rOGkSbEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwMjE5NQ==", "bodyText": "This needs to be:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            COPY ${build_dir}/quarkus-app/lib/* /deployments/lib/\n          \n          \n            \n            COPY ${build_dir}/quarkus-app/lib/ /deployments/lib/\n          \n      \n    \n    \n  \n\nOthewise Docker doesn't preserve the directory structure and running the container doesn't work", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440702195", "createdAt": "2020-06-16T09:08:27Z", "author": {"login": "geoand"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-fast-jar.ftl", "diffHunk": "@@ -0,0 +1,56 @@\n+####\n+# This Dockerfile is used in order to build a container that runs the Quarkus application in JVM mode\n+#\n+# Before building the docker image run:\n+#\n+# mvn package\n+#\n+# Then, build the image with:\n+#\n+# docker build -f src/main/docker/Dockerfile.jvm -t quarkus/${project_artifactId}-jvm .\n+#\n+# Then run the container using:\n+#\n+# docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n+#\n+# If you want to include the debug port into your docker image\n+# you will have to expose the debug port (default 5005) like this :  EXPOSE 8080 5050\n+# \n+# Then run the container using : \n+#\n+# docker run -i --rm -p 8080:8080 -p 5005:5005 -e JAVA_ENABLE_DEBUG=\"true\" quarkus/${project_artifactId}-jvm\n+#\n+###\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-11-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.8\n+\n+ENV LANG='en_US.UTF-8' LANGUAGE='en_US:en'\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install curl ca-certificates ${JAVA_PACKAGE} \\\n+    && microdnf update \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 540 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n+\n+# Configure the JAVA_OPTIONS, you can add -XshowSettings:vm to also display the heap size.\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n+\n+COPY ${build_dir}/quarkus-app/lib/* /deployments/lib/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwMzc2MQ==", "bodyText": "Oops, I fixed this in the local project I was testing with, but forgot to update the template", "url": "https://github.com/quarkusio/quarkus/pull/10037#discussion_r440703761", "createdAt": "2020-06-16T09:11:03Z", "author": {"login": "stuartwdouglas"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-fast-jar.ftl", "diffHunk": "@@ -0,0 +1,56 @@\n+####\n+# This Dockerfile is used in order to build a container that runs the Quarkus application in JVM mode\n+#\n+# Before building the docker image run:\n+#\n+# mvn package\n+#\n+# Then, build the image with:\n+#\n+# docker build -f src/main/docker/Dockerfile.jvm -t quarkus/${project_artifactId}-jvm .\n+#\n+# Then run the container using:\n+#\n+# docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n+#\n+# If you want to include the debug port into your docker image\n+# you will have to expose the debug port (default 5005) like this :  EXPOSE 8080 5050\n+# \n+# Then run the container using : \n+#\n+# docker run -i --rm -p 8080:8080 -p 5005:5005 -e JAVA_ENABLE_DEBUG=\"true\" quarkus/${project_artifactId}-jvm\n+#\n+###\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-11-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.8\n+\n+ENV LANG='en_US.UTF-8' LANGUAGE='en_US:en'\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install curl ca-certificates ${JAVA_PACKAGE} \\\n+    && microdnf update \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 540 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n+\n+# Configure the JAVA_OPTIONS, you can add -XshowSettings:vm to also display the heap size.\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n+\n+COPY ${build_dir}/quarkus-app/lib/* /deployments/lib/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwMjE5NQ=="}, "originalCommit": {"oid": "6a446ba7a245a9b3d8618199c5998d949200c444"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2751, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}