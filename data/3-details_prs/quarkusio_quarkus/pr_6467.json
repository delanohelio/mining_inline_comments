{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNjUyMzUz", "number": 6467, "title": "Qute parser - improve error messages", "bodyText": "resolves #6164", "createdAt": "2020-01-08T21:00:59Z", "url": "https://github.com/quarkusio/quarkus/pull/6467", "merged": true, "mergeCommit": {"oid": "a16aba0177dfdc80616cf6d1ed53436926de0e4a"}, "closed": true, "closedAt": "2020-01-09T11:36:04Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4lePCAFqTM0MDM0NTc2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4mlFNgBqjI5MzQyMTk4NzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzQ1NzY3", "url": "https://github.com/quarkusio/quarkus/pull/6467#pullrequestreview-340345767", "createdAt": "2020-01-09T08:13:47Z", "commit": {"oid": "22bd4aecd8b9fa2ea61fbd2736e54c75d4e32b26"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODoxMzo0OFrOFbtpxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwODoxMzo0OFrOFbtpxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwMzg0NQ==", "bodyText": "I think you shouldn't throw the exception in this method. You should return it and throw it in the caller.\nThis way, IDEs can analyze properly the flow of the methods.", "url": "https://github.com/quarkusio/quarkus/pull/6467#discussion_r364603845", "createdAt": "2020-01-09T08:13:48Z", "author": {"login": "gsmet"}, "path": "independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java", "diffHunk": "@@ -331,13 +337,23 @@ private void flushTag() {\n             typeInfos.put(key, \"[\" + value + \"]\");\n \n         } else {\n-            sectionBlockStack.peek()\n-                    .addNode(new ExpressionNode(apply(content), engine, new OriginImpl(line, templateId, variant)));\n+            sectionBlockStack.peek().addNode(new ExpressionNode(apply(content), engine, origin()));\n         }\n         this.buffer = new StringBuilder();\n     }\n \n-    private void processParams(String label, Iterator<String> iter) {\n+    private void parserError(String message) {\n+        StringBuilder builder = new StringBuilder(\"Parser error\");\n+        if (!id.equals(generatedId)) {\n+            builder.append(\" in template [\").append(id).append(\"]\");\n+        }\n+        builder.append(\" on line \").append(line).append(\": \")\n+                .append(message);\n+        throw new TemplateException(origin(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22bd4aecd8b9fa2ea61fbd2736e54c75d4e32b26"}, "originalPosition": 204}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22bd4aecd8b9fa2ea61fbd2736e54c75d4e32b26", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/22bd4aecd8b9fa2ea61fbd2736e54c75d4e32b26", "committedDate": "2020-01-08T20:59:47Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}, "afterCommit": {"oid": "3829da58738274e066b7ff72c3e056afcfeb9a12", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/3829da58738274e066b7ff72c3e056afcfeb9a12", "committedDate": "2020-01-09T08:25:35Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzUyMzIy", "url": "https://github.com/quarkusio/quarkus/pull/6467#pullrequestreview-340352322", "createdAt": "2020-01-09T08:27:52Z", "commit": {"oid": "3829da58738274e066b7ff72c3e056afcfeb9a12"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3829da58738274e066b7ff72c3e056afcfeb9a12", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/3829da58738274e066b7ff72c3e056afcfeb9a12", "committedDate": "2020-01-09T08:25:35Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}, "afterCommit": {"oid": "339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "committedDate": "2020-01-09T08:50:32Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4024571bd40257fab37f54c769042ba581a0a01d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/4024571bd40257fab37f54c769042ba581a0a01d", "committedDate": "2020-01-09T09:31:23Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "committedDate": "2020-01-09T08:50:32Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}, "afterCommit": {"oid": "4024571bd40257fab37f54c769042ba581a0a01d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/4024571bd40257fab37f54c769042ba581a0a01d", "committedDate": "2020-01-09T09:31:23Z", "message": "Qute parser - improve error messages\n\n- resolves #6164"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 340, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}