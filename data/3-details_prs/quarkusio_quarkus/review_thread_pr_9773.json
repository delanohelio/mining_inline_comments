{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3Njc1MDM0", "number": 9773, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMDowMzoyN1rOECffQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMDowMzoyN1rOECffQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMDQ4NTE1OnYy", "diffSide": "RIGHT", "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/RestClientBase.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMDowMzoyN1rOGe-wgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMDoxNzozMlrOGe_PIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzODY5MQ==", "bodyText": "What does ImageInfo.inImageRuntimeCode() return if it's running on OpenJDK?", "url": "https://github.com/quarkusio/quarkus/pull/9773#discussion_r435138691", "createdAt": "2020-06-04T10:03:27Z", "author": {"login": "kenfinnigan"}, "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/RestClientBase.java", "diffHunk": "@@ -77,6 +80,12 @@ private void configureSsl(RestClientBuilder builder) {\n         if (maybeHostnameVerifier.isPresent()) {\n             registerHostnameVerifier(maybeHostnameVerifier.get(), builder);\n         }\n+\n+        // we need to push a disabled SSL context when SSL has been disabled\n+        // because otherwise Apache HTTP Client will try to initialize one and will fail\n+        if (ImageInfo.inImageRuntimeCode() && !SslContextConfiguration.isSslNativeEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fdb04149af38233826c595b21577de6e3ee9ddc"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE0MjgzNA==", "bodyText": "It returns false. We use that in a couple more places in Quarkus as well (for example: \n  \n    \n      quarkus/core/runtime/src/main/java/io/quarkus/runtime/ApplicationLifecycleManager.java\n    \n    \n         Line 157\n      in\n      f89650b\n    \n    \n    \n    \n\n        \n          \n           if (ImageInfo.inImageRuntimeCode() && System.getenv(DISABLE_SIGNAL_HANDLERS) == null) { \n        \n    \n  \n\n)", "url": "https://github.com/quarkusio/quarkus/pull/9773#discussion_r435142834", "createdAt": "2020-06-04T10:11:00Z", "author": {"login": "geoand"}, "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/RestClientBase.java", "diffHunk": "@@ -77,6 +80,12 @@ private void configureSsl(RestClientBuilder builder) {\n         if (maybeHostnameVerifier.isPresent()) {\n             registerHostnameVerifier(maybeHostnameVerifier.get(), builder);\n         }\n+\n+        // we need to push a disabled SSL context when SSL has been disabled\n+        // because otherwise Apache HTTP Client will try to initialize one and will fail\n+        if (ImageInfo.inImageRuntimeCode() && !SslContextConfiguration.isSslNativeEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzODY5MQ=="}, "originalCommit": {"oid": "8fdb04149af38233826c595b21577de6e3ee9ddc"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE0NTQzNA==", "bodyText": "Fair enough, I was half expecting it to majorly fail if it wasn't on GraalVM JDK", "url": "https://github.com/quarkusio/quarkus/pull/9773#discussion_r435145434", "createdAt": "2020-06-04T10:15:36Z", "author": {"login": "kenfinnigan"}, "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/RestClientBase.java", "diffHunk": "@@ -77,6 +80,12 @@ private void configureSsl(RestClientBuilder builder) {\n         if (maybeHostnameVerifier.isPresent()) {\n             registerHostnameVerifier(maybeHostnameVerifier.get(), builder);\n         }\n+\n+        // we need to push a disabled SSL context when SSL has been disabled\n+        // because otherwise Apache HTTP Client will try to initialize one and will fail\n+        if (ImageInfo.inImageRuntimeCode() && !SslContextConfiguration.isSslNativeEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzODY5MQ=="}, "originalCommit": {"oid": "8fdb04149af38233826c595b21577de6e3ee9ddc"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE0NjUyOQ==", "bodyText": "Under the hood it just checks for a system property, so it's not that smart :)", "url": "https://github.com/quarkusio/quarkus/pull/9773#discussion_r435146529", "createdAt": "2020-06-04T10:17:32Z", "author": {"login": "geoand"}, "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/RestClientBase.java", "diffHunk": "@@ -77,6 +80,12 @@ private void configureSsl(RestClientBuilder builder) {\n         if (maybeHostnameVerifier.isPresent()) {\n             registerHostnameVerifier(maybeHostnameVerifier.get(), builder);\n         }\n+\n+        // we need to push a disabled SSL context when SSL has been disabled\n+        // because otherwise Apache HTTP Client will try to initialize one and will fail\n+        if (ImageInfo.inImageRuntimeCode() && !SslContextConfiguration.isSslNativeEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzODY5MQ=="}, "originalCommit": {"oid": "8fdb04149af38233826c595b21577de6e3ee9ddc"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2929, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}