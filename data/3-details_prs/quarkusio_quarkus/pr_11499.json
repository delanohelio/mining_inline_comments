{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwOTg0MjMx", "number": 11499, "title": "Make LocaleConverter more lenient", "bodyText": "This is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\nFixes #11430", "createdAt": "2020-08-20T15:21:10Z", "url": "https://github.com/quarkusio/quarkus/pull/11499", "merged": true, "mergeCommit": {"oid": "56538eaec463bd78ff9356f130754d076cd7b6a3"}, "closed": true, "closedAt": "2020-08-20T22:42:47Z", "author": {"login": "gastaldi"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAyD00ABqjM2NzU4NjE0NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAzT6ygFqTQ3MTgxNzE3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0e2a51c45c17f1a0396b0b76f1a46ba68d96b0b", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/b0e2a51c45c17f1a0396b0b76f1a46ba68d96b0b", "committedDate": "2020-08-20T15:18:05Z", "message": "Make LocaleConverter more lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430"}, "afterCommit": {"oid": "f5195343ccb659756a0130827c074cfe46e21900", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f5195343ccb659756a0130827c074cfe46e21900", "committedDate": "2020-08-20T15:36:24Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5195343ccb659756a0130827c074cfe46e21900", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/f5195343ccb659756a0130827c074cfe46e21900", "committedDate": "2020-08-20T15:36:24Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}, "afterCommit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "committedDate": "2020-08-20T15:38:25Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzUyNzQ1", "url": "https://github.com/quarkusio/quarkus/pull/11499#pullrequestreview-471752745", "createdAt": "2020-08-20T15:48:43Z", "commit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzgyMDc3", "url": "https://github.com/quarkusio/quarkus/pull/11499#pullrequestreview-471782077", "createdAt": "2020-08-20T16:23:51Z", "commit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyMzo1MVrOHEJaog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyMzo1MVrOHEJaog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMDYyNg==", "bodyText": "I think I would prefer if we kept these tests but also check that the locale is not Locale.ROOT.", "url": "https://github.com/quarkusio/quarkus/pull/11499#discussion_r474110626", "createdAt": "2020-08-20T16:23:51Z", "author": {"login": "gsmet"}, "path": "core/runtime/src/main/java/io/quarkus/runtime/configuration/LocaleConverter.java", "diffHunk": "@@ -29,11 +29,6 @@ public Locale convert(final String value) {\n             return null;\n         }\n \n-        Locale locale = Locale.forLanguageTag(NORMALIZE_LOCALE_PATTERN.matcher(localeValue).replaceAll(\"-\"));\n-        if (locale.getLanguage() == null || locale.getLanguage().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzgyNjA2", "url": "https://github.com/quarkusio/quarkus/pull/11499#pullrequestreview-471782606", "createdAt": "2020-08-20T16:24:31Z", "commit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyNDozMVrOHEJcLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyNDozMVrOHEJcLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMTAyMQ==", "bodyText": "Good catch.", "url": "https://github.com/quarkusio/quarkus/pull/11499#discussion_r474111021", "createdAt": "2020-08-20T16:24:31Z", "author": {"login": "gsmet"}, "path": "core/runtime/src/test/java/io/quarkus/runtime/configuration/LocaleConverterTest.java", "diffHunk": "@@ -19,8 +20,16 @@ public void testStandardLocale() {\n     @Test\n     public void testUnderscoreLocale() {\n         LocaleConverter localeConverter = new LocaleConverter();\n-        Locale locale = localeConverter.convert(\"fr-FR\");\n+        Locale locale = localeConverter.convert(\"fr_FR\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "committedDate": "2020-08-20T15:38:25Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}, "afterCommit": {"oid": "2d67ef50683287ab130294ff0744e8abfab601fa", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2d67ef50683287ab130294ff0744e8abfab601fa", "committedDate": "2020-08-20T16:42:05Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4afde7622d20cce580124060239b7617be965d12", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/4afde7622d20cce580124060239b7617be965d12", "committedDate": "2020-08-20T16:46:05Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d67ef50683287ab130294ff0744e8abfab601fa", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2d67ef50683287ab130294ff0744e8abfab601fa", "committedDate": "2020-08-20T16:42:05Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}, "afterCommit": {"oid": "4afde7622d20cce580124060239b7617be965d12", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/4afde7622d20cce580124060239b7617be965d12", "committedDate": "2020-08-20T16:46:05Z", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODE3MTc2", "url": "https://github.com/quarkusio/quarkus/pull/11499#pullrequestreview-471817176", "createdAt": "2020-08-20T17:04:09Z", "commit": {"oid": "4afde7622d20cce580124060239b7617be965d12"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 848, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}