{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NzQ0MDg0", "number": 8775, "title": "Qute docs bugs", "bodyText": "", "createdAt": "2020-04-23T07:53:22Z", "url": "https://github.com/quarkusio/quarkus/pull/8775", "merged": true, "mergeCommit": {"oid": "fcbf4c9950050129f98b4c641fb961bfbe24c9ff"}, "closed": true, "closedAt": "2020-04-23T19:55:02Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaX4akgH2gAyNDA3NzQ0MDg0OmZiMzJmMzQ4ZTQ1NjgwNTNjMGY0NDdmMTE1NzU4ZTg1NjMxMGE0MGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaco-wgFqTM5OTA4MjU1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb32f348e4568053c0f447f115758e856310a40c", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/fb32f348e4568053c0f447f115758e856310a40c", "committedDate": "2020-04-23T07:37:33Z", "message": "Qute docs - fix example in user tags section\n\n- resolves #8751"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4e99a999194b17104a5dd12c24a6a024b94e594", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/c4e99a999194b17104a5dd12c24a6a024b94e594", "committedDate": "2020-04-23T07:49:48Z", "message": "Qute SetSectionHelper - add \"let\" alias, mention the section in the docs\n\n- resolves #8749"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4", "committedDate": "2020-04-23T07:52:25Z", "message": "Qute docs - fix VariantTemplate example\n\n- resolves #8752"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4ODkxMzE3", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398891317", "createdAt": "2020-04-23T08:50:25Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTAxNzg0", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398901784", "createdAt": "2020-04-23T09:03:32Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowMzozMlrOGKewUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowMzozMlrOGKewUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY0MjgzMw==", "bodyText": "We should still remove #{with expr as binding} because it does not have the semantics of with, and can be done with #{let binding = expr}.", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413642833", "createdAt": "2020-04-23T09:03:32Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -513,6 +513,28 @@ This section might also come in handy when we'd like to avoid multiple expensive\n ----\n <1> `it` is the result of `item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)`. The method is only invoked once even though the result may be used in multiple expressions.\n \n+===== Let/Set Section\n+\n+This section is an alternative to `{#with}` which allows to specify multiple named parameters:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTAyNjkw", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398902690", "createdAt": "2020-04-23T09:04:39Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNDozOVrOGKezSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNDozOVrOGKezSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY0MzU5NA==", "bodyText": "Huh, why did you rename it? Does the #item tag namespace clash with the local variable item? If that's the case it's a bug.", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413643594", "createdAt": "2020-04-23T09:04:39Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -567,30 +589,30 @@ Let's suppose we have a template called `item.html`:\n <1> `showImage` is a named parameter.\n <2> `it` is a special key that is replaced with the first unnamed param of the tag.\n \n-Now if we register this template under the name `item` and if we add a `UserTagSectionHelper` to the engine:\n+Now if we register this template under the name `itemDetail` and if we add a `UserTagSectionHelper` to the engine:\n \n [source,java]\n ----\n Engine engine = Engine.builder()\n-                   .addSectionHelper(new UserTagSectionHelper.Factory(\"item\"))\n+                   .addSectionHelper(new UserTagSectionHelper.Factory(\"myItem\",\"itemDetail.html\"))\n                    .build();\n ----\n \n-NOTE: In Quarkus, all files from the `src/main/resources/templates/tags` are registered and monitored automatically.\n+NOTE: In Quarkus, all files from the `src/main/resources/templates/tags` are registered and monitored automatically!\n \n We can include the tag like this:\n \n [source,html]\n ----\n <ul>\n-{#each items}\n+{#for item in items}\n   <li>\n-  {#item this showImage=true /} <1>\n+  {#myItem item showImage=true /} <1>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTAzMjMw", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398903230", "createdAt": "2020-04-23T09:05:20Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNToyMFrOGKe1MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNToyMFrOGKe1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY0NDA4MQ==", "bodyText": "This is the first place I realised how we can pass more than one parameter to a tag. Is this formally documented somewhere else in this file? If not, it should, I was sure I would need a comma.", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413644081", "createdAt": "2020-04-23T09:05:20Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -567,30 +589,30 @@ Let's suppose we have a template called `item.html`:\n <1> `showImage` is a named parameter.\n <2> `it` is a special key that is replaced with the first unnamed param of the tag.\n \n-Now if we register this template under the name `item` and if we add a `UserTagSectionHelper` to the engine:\n+Now if we register this template under the name `itemDetail` and if we add a `UserTagSectionHelper` to the engine:\n \n [source,java]\n ----\n Engine engine = Engine.builder()\n-                   .addSectionHelper(new UserTagSectionHelper.Factory(\"item\"))\n+                   .addSectionHelper(new UserTagSectionHelper.Factory(\"myItem\",\"itemDetail.html\"))\n                    .build();\n ----\n \n-NOTE: In Quarkus, all files from the `src/main/resources/templates/tags` are registered and monitored automatically.\n+NOTE: In Quarkus, all files from the `src/main/resources/templates/tags` are registered and monitored automatically!\n \n We can include the tag like this:\n \n [source,html]\n ----\n <ul>\n-{#each items}\n+{#for item in items}\n   <li>\n-  {#item this showImage=true /} <1>\n+  {#myItem item showImage=true /} <1>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTA0MTAz", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398904103", "createdAt": "2020-04-23T09:06:29Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNjoyOVrOGKe4iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTowNjoyOVrOGKe4iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY0NDkzNg==", "bodyText": "As I see tests mentioning this I have to ask what it refers to?", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413644936", "createdAt": "2020-04-23T09:06:29Z", "author": {"login": "FroMage"}, "path": "independent-projects/qute/core/src/test/java/io/quarkus/qute/UserTagTest.java", "diffHunk": "@@ -17,17 +17,17 @@ public void testUserTag() {\n \n         Template tag = engine.parse(\"{#if showImage}{it.name}{#else}nope{/if}\");\n         engine.putTemplate(\"my-tag-id\", tag);\n-        Template template1 = engine.parse(\"{#myTag order showImage=true /}\");\n-        Template template2 = engine.parse(\"{#myTag order /}\");\n-        Template template3 = engine.parse(\"{#myTag showImage=false /}\");\n-        Template template4 = engine.parse(\"{#each this}{#myTag showImage=false /}{/each}\");\n \n         Map<String, Object> order = new HashMap<>();\n         order.put(\"name\", \"Herbert\");\n-        assertEquals(\"Herbert\", template1.render(Collections.singletonMap(\"order\", order)));\n-        assertEquals(\"nope\", template2.render(Collections.singletonMap(\"order\", order)));\n-        assertEquals(\"nope\", template3.render(Collections.singletonMap(\"order\", order)));\n-        assertEquals(\"nope\", template4.render(Collections.singletonMap(\"order\", order)));\n+        assertEquals(\"Herbert\",\n+                engine.parse(\"{#myTag order showImage=true /}\").render(Collections.singletonMap(\"order\", order)));\n+        assertEquals(\"nope\", engine.parse(\"{#myTag order /}\").render(Collections.singletonMap(\"order\", order)));\n+        assertEquals(\"nope\", engine.parse(\"{#myTag showImage=false /}\").render(Collections.singletonMap(\"order\", order)));\n+        assertEquals(\"nope\",\n+                engine.parse(\"{#each this}{#myTag showImage=false /}{/each}\").render(Collections.singletonMap(\"order\", order)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTA0NDg1", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-398904485", "createdAt": "2020-04-23T09:06:57Z", "commit": {"oid": "4d4a27d1ffef7156ca7d6e07419a15d1bbd091a4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87ea7c1c16dc576dd9bf66dde0899d0c563ac5ae", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/87ea7c1c16dc576dd9bf66dde0899d0c563ac5ae", "committedDate": "2020-04-23T12:22:02Z", "message": "Qute - remove alias from the With section"}, "afterCommit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/feba3c9874de9457c10c2cc8c80e9c06f785552b", "committedDate": "2020-04-23T12:24:38Z", "message": "Qute - remove alias from the With section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MDU2ODY0", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-399056864", "createdAt": "2020-04-23T12:39:04Z", "commit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjozOTowNFrOGKnIFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjo0MDo1M1rOGKnM5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc3OTk5MA==", "bodyText": "No it is not: it does not change the scope: it adds new lexical bindings.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This section is an alternative to `{#with}` which allows to specify one or more named parameters:\n          \n          \n            \n            This section allows you to define named local variables:", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413779990", "createdAt": "2020-04-23T12:39:04Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -489,29 +489,40 @@ This could be useful to simplify the template structure:\n <1> The `name` will be resolved against the `item.parent`.\n <2> The `description` will be also resolved against the `item.parent`.\n \n-It's also possible to specify an alias for the context object:\n+This section might also come in handy when we'd like to avoid multiple expensive invocations:\n \n [source,html]\n ----\n-{#with item.parent as myParent} <1>\n-  <h1>{myParent.name}</h1>\n+{#with item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)}\n+  {#if this is \"fun\"} <1>\n+    <h1>Yay!</h1>\n+  {#else}\n+    <h1>{this} is not fun at all!</h1>\n+  {/if}\n {/with}\n ----\n-<1> `myParent` is the alias that can be used inside the tag.\n+<1> `this` is the result of `item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)`. The method is only invoked once even though the result may be used in multiple expressions.\n \n-This section might also come in handy when we'd like to avoid multiple expensive invocations:\n+===== Let/Set Section\n \n+This section is an alternative to `{#with}` which allows to specify one or more named parameters:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc4MDQzNA==", "bodyText": "Damnit, this is back. But at least this time it makes sense.", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413780434", "createdAt": "2020-04-23T12:39:44Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -489,29 +489,40 @@ This could be useful to simplify the template structure:\n <1> The `name` will be resolved against the `item.parent`.\n <2> The `description` will be also resolved against the `item.parent`.\n \n-It's also possible to specify an alias for the context object:\n+This section might also come in handy when we'd like to avoid multiple expensive invocations:\n \n [source,html]\n ----\n-{#with item.parent as myParent} <1>\n-  <h1>{myParent.name}</h1>\n+{#with item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc4MTIyMA==", "bodyText": "This price thing confuses me: it's not coming from order.item.parent/myParent, right?", "url": "https://github.com/quarkusio/quarkus/pull/8775#discussion_r413781220", "createdAt": "2020-04-23T12:40:53Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -489,29 +489,40 @@ This could be useful to simplify the template structure:\n <1> The `name` will be resolved against the `item.parent`.\n <2> The `description` will be also resolved against the `item.parent`.\n \n-It's also possible to specify an alias for the context object:\n+This section might also come in handy when we'd like to avoid multiple expensive invocations:\n \n [source,html]\n ----\n-{#with item.parent as myParent} <1>\n-  <h1>{myParent.name}</h1>\n+{#with item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)}\n+  {#if this is \"fun\"} <1>\n+    <h1>Yay!</h1>\n+  {#else}\n+    <h1>{this} is not fun at all!</h1>\n+  {/if}\n {/with}\n ----\n-<1> `myParent` is the alias that can be used inside the tag.\n+<1> `this` is the result of `item.callExpensiveLogicToGetTheValue(1,'foo',bazinga)`. The method is only invoked once even though the result may be used in multiple expressions.\n \n-This section might also come in handy when we'd like to avoid multiple expensive invocations:\n+===== Let/Set Section\n \n+This section is an alternative to `{#with}` which allows to specify one or more named parameters:\n [source,html]\n ----\n-{#with item.callExpensiveLogicToGetTheValue(true) as it}\n-  {#if it is \"fun\"} <1>\n-    <h1>Yay!</h1>\n-  {#else}\n-    <h1>{it} is not fun at all!</h1>\n-  {/if}\n-{/with}\n+{#let myParent=order.item.parent}\n+  <h1>{myParent.name}</h1>\n+  <p>Price: {price}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b76fce8e03a3aed7999fe4fa8a0d351cde3f042e", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b76fce8e03a3aed7999fe4fa8a0d351cde3f042e", "committedDate": "2020-04-23T13:01:30Z", "message": "Qute - remove alias from the With section"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "feba3c9874de9457c10c2cc8c80e9c06f785552b", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/feba3c9874de9457c10c2cc8c80e9c06f785552b", "committedDate": "2020-04-23T12:24:38Z", "message": "Qute - remove alias from the With section"}, "afterCommit": {"oid": "b76fce8e03a3aed7999fe4fa8a0d351cde3f042e", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/b76fce8e03a3aed7999fe4fa8a0d351cde3f042e", "committedDate": "2020-04-23T13:01:30Z", "message": "Qute - remove alias from the With section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MDgyNTUy", "url": "https://github.com/quarkusio/quarkus/pull/8775#pullrequestreview-399082552", "createdAt": "2020-04-23T13:10:13Z", "commit": {"oid": "b76fce8e03a3aed7999fe4fa8a0d351cde3f042e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4488, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}