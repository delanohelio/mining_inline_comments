{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNDAyNDky", "number": 10423, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxMTo0MlrOEK3pUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDoxNzozMlrOEK6pjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODMyOTE1OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxMTo0MlrOGsKGXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjo0MzowMVrOGsLH0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NTk5OQ==", "bodyText": "No need to have this as static. It can probably just be private.", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448955999", "createdAt": "2020-07-02T12:11:42Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1ODU4NA==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448958584", "createdAt": "2020-07-02T12:16:35Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NTk5OQ=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MjIwOA==", "bodyText": "This is static in fast jar test as well,should I change there ?", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448972208", "createdAt": "2020-07-02T12:41:57Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NTk5OQ=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3Mjc1Mw==", "bodyText": "Yup", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448972753", "createdAt": "2020-07-02T12:43:01Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NTk5OQ=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODMzMDU3OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxMjoxMFrOGsKHTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxNjo1M1rOGsKREA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjIzOQ==", "bodyText": "This method is the same as what you added in the other test. Best not duplicate it", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448956239", "createdAt": "2020-07-02T12:12:10Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1ODczNg==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448958736", "createdAt": "2020-07-02T12:16:53Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjIzOQ=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODMzMzI2OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxMjo1MlrOGsKI1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjo0MjoxM1rOGsLGLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA==", "bodyText": "The name of the method is incorrect since it has nothing to do with quarkus dev", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448956628", "createdAt": "2020-07-02T12:12:52Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1OTM1MQ==", "bodyText": "What should I use then ?", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448959351", "createdAt": "2020-07-02T12:18:04Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk2MzUxOQ==", "bodyText": "It doesn't even need to be a method - it can be \"inlined\" into the call-site ( assertThat(DevModeTestUtils....)", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448963519", "createdAt": "2020-07-02T12:25:55Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk2NzA2MQ==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448967061", "createdAt": "2020-07-02T12:32:44Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MTczNg==", "bodyText": "Should I do the same for Fast jar test too ?", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448971736", "createdAt": "2020-07-02T12:41:05Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MjMzMw==", "bodyText": "Sure", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448972333", "createdAt": "2020-07-02T12:42:13Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/UberJarFormatWorksTest.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package io.quarkus.gradle;\n+\n+import io.quarkus.test.devmode.util.DevModeTestUtils;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.log4j.Logger;\n+import org.awaitility.core.ConditionTimeoutException;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Supplier;\n+\n+import static io.quarkus.gradle.LaunchUtils.launch;\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.awaitility.Awaitility.await;\n+\n+public class UberJarFormatWorksTest extends QuarkusGradleWrapperTestBase{\n+\n+    private static Future<?> jarRun;\n+\n+    @Test\n+    public void testUberJarFormatWorks() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"test-uber-jar-format-works\");\n+        runGradleWrapper(projectDir, \"clean\", \"build\");\n+        final Path quarkusApp = projectDir.toPath().resolve(\"build\");\n+        assertThat(quarkusApp).exists();\n+        Path jar = quarkusApp.resolve(\"code-with-quarkus-1.0.0-SNAPSHOT-runner.jar\");\n+        assertThat(jar).exists();\n+\n+        File output = new File(projectDir, \"build/output.log\");\n+        output.createNewFile();\n+        Process process = launch(jar, output);\n+        try {\n+            // Wait until server up\n+            dumpFileContentOnFailure(() -> {\n+                await()\n+                        .pollDelay(1, TimeUnit.SECONDS)\n+                        .atMost(1, TimeUnit.MINUTES).until(() -> DevModeTestUtils.getHttpResponse(\"/hello\", 200));\n+                return null;\n+            }, output, ConditionTimeoutException.class);\n+\n+            String logs = FileUtils.readFileToString(output, \"UTF-8\");\n+\n+            assertThatOutputWorksCorrectly(logs);\n+\n+            // test that the application name and version are properly set\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+        } finally {\n+            process.destroy();\n+        }\n+\n+    }\n+\n+    static void assertThatOutputWorksCorrectly(String logs) {\n+        assertThat(logs.isEmpty()).isFalse();\n+        String infoLogLevel = \"INFO\";\n+        assertThat(logs.contains(infoLogLevel)).isTrue();\n+        assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n+    }\n+\n+    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                          final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);\n+        try {\n+            operation.call();\n+        } catch (Throwable t) {\n+            log.error(\"Dumping logs that were generated in \" + logFile + \" for an operation that resulted in \"\n+                    + t.getClass().getName() + \":\", t);\n+\n+            throw t;\n+        }\n+    }\n+\n+    private static Supplier<String> getQuarkusDevBrokenReason() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NjYyOA=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODMzNDYxOnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/settings.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxMzoyN1rOGsKJ4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxODoxMVrOGsKTqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1Njg5OQ==", "bodyText": "Let's give it a more descriptive name, like uber-jar-test", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448956899", "createdAt": "2020-07-02T12:13:27Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/settings.gradle", "diffHunk": "@@ -0,0 +1,11 @@\n+pluginManagement {\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        gradlePluginPortal()\n+    }\n+    plugins {\n+      id 'io.quarkus' version \"${quarkusPluginVersion}\"\n+    }\n+}\n+rootProject.name='code-with-quarkus'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1OTQwMA==", "bodyText": "Cool", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448959400", "createdAt": "2020-07-02T12:18:11Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/settings.gradle", "diffHunk": "@@ -0,0 +1,11 @@\n+pluginManagement {\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        gradlePluginPortal()\n+    }\n+    plugins {\n+      id 'io.quarkus' version \"${quarkusPluginVersion}\"\n+    }\n+}\n+rootProject.name='code-with-quarkus'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1Njg5OQ=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODMzNzY0OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/src/test/resources/application.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxNDoyNVrOGsKL8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjoxODoyMlrOGsKUBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NzQyNw==", "bodyText": "This file shouldn't be needed", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448957427", "createdAt": "2020-07-02T12:14:25Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/src/test/resources/application.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+# Configuration file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1OTQ5Mg==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r448959492", "createdAt": "2020-07-02T12:18:22Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/resources/test-uber-jar-format-works/src/test/resources/application.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+# Configuration file", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1NzQyNw=="}, "originalCommit": {"oid": "ec0a3805da1c59d5ac9d3a4ef1bcfaa81c57fc5a"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODYyNTYyOnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/FastJarFormatWorksTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzozMTowMVrOGsM-1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzozNjoxM1rOGsNL9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAwMzIyMw==", "bodyText": "This isn't a good idea since you introduce unnecessary coupling between the test classes. It would be better if you moved this method to LaunchUtils", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449003223", "createdAt": "2020-07-02T13:31:01Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/FastJarFormatWorksTest.java", "diffHunk": "@@ -50,20 +49,22 @@ public void testFastJarFormatWorks() throws Exception {\n             assertThatOutputWorksCorrectly(logs);\n \n             // test that the application name and version are properly set\n-            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", () -> {\n+                return jarRun == null ? null : jarRun.isDone() ? \"jar run mode has terminated\" : null;\n+            }).equals(\"hello\"));\n         } finally {\n             process.destroy();\n         }\n     }\n \n-    static void assertThatOutputWorksCorrectly(String logs) {\n+    private void assertThatOutputWorksCorrectly(String logs) {\n         assertThat(logs.isEmpty()).isFalse();\n         String infoLogLevel = \"INFO\";\n         assertThat(logs.contains(infoLogLevel)).isTrue();\n         assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n     }\n \n-    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+    protected static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f32403b68dd3a1c42bac3a2f3c8adad175166ae"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAwNjU4Mg==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449006582", "createdAt": "2020-07-02T13:36:13Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/FastJarFormatWorksTest.java", "diffHunk": "@@ -50,20 +49,22 @@ public void testFastJarFormatWorks() throws Exception {\n             assertThatOutputWorksCorrectly(logs);\n \n             // test that the application name and version are properly set\n-            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", getQuarkusDevBrokenReason()).equals(\"hello\"));\n+            assertThat(DevModeTestUtils.getHttpResponse(\"/hello\", () -> {\n+                return jarRun == null ? null : jarRun.isDone() ? \"jar run mode has terminated\" : null;\n+            }).equals(\"hello\"));\n         } finally {\n             process.destroy();\n         }\n     }\n \n-    static void assertThatOutputWorksCorrectly(String logs) {\n+    private void assertThatOutputWorksCorrectly(String logs) {\n         assertThat(logs.isEmpty()).isFalse();\n         String infoLogLevel = \"INFO\";\n         assertThat(logs.contains(infoLogLevel)).isTrue();\n         assertThat(logs.contains(\"cdi, resteasy\")).isTrue();\n     }\n \n-    private void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+    protected static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAwMzIyMw=="}, "originalCommit": {"oid": "9f32403b68dd3a1c42bac3a2f3c8adad175166ae"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODY4MjU4OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzo0NDo1OFrOGsNjCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzo0NzoxMVrOGsNpfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMjQ5MA==", "bodyText": "No need to have this protected, just make it public please", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449012490", "createdAt": "2020-07-02T13:44:58Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    protected static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42facc8c37ee0f6b746f2f5a0a2df1d594a10855"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxNDE0MQ==", "bodyText": "Okk", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449014141", "createdAt": "2020-07-02T13:47:11Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    protected static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMjQ5MA=="}, "originalCommit": {"oid": "42facc8c37ee0f6b746f2f5a0a2df1d594a10855"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODcyMDUzOnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzo1Mzo1MVrOGsN7rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDowNjoxNlrOGsOdSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxODc5Ng==", "bodyText": "Sorry, I missed this. You shouldn't this. A log is always per class. So just add\nprivate static final Logger log = Logger.getLogger(LaunchUtils.class);\n\nas a field of LaunchUtils and that in this method instead of creating the log in the method", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449018796", "createdAt": "2020-07-02T13:53:51Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    public static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                                   final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d5db752bc3729d6be1f09e26b0df7d060e4ce85"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxOTMwNw==", "bodyText": "After making the change and ensuring that the test passes, you can mark the PR as ready for review", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449019307", "createdAt": "2020-07-02T13:54:36Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    public static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                                   final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxODc5Ng=="}, "originalCommit": {"oid": "2d5db752bc3729d6be1f09e26b0df7d060e4ce85"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAyMjM2NA==", "bodyText": "private static final Logger log gives two errors to make Logger not static and not private", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449022364", "createdAt": "2020-07-02T13:58:53Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    public static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                                   final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxODc5Ng=="}, "originalCommit": {"oid": "2d5db752bc3729d6be1f09e26b0df7d060e4ce85"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAyNDM3Mw==", "bodyText": "Here is an example of what I mean: \n  \n    \n      quarkus/extensions/amazon-lambda/runtime/src/main/java/io/quarkus/amazon/lambda/runtime/AmazonLambdaRecorder.java\n    \n    \n         Line 30\n      in\n      259758b\n    \n    \n    \n    \n\n        \n          \n           private static final Logger log = Logger.getLogger(AmazonLambdaRecorder.class);", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449024373", "createdAt": "2020-07-02T14:01:53Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    public static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                                   final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxODc5Ng=="}, "originalCommit": {"oid": "2d5db752bc3729d6be1f09e26b0df7d060e4ce85"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAyNzQwMA==", "bodyText": "Got it, I was doing it inside the method that's why had the error", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449027400", "createdAt": "2020-07-02T14:06:16Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -21,4 +23,18 @@ protected static Process launch(Path jar, File output) throws IOException {\n         return processBuilder.start();\n     }\n \n+    public static void dumpFileContentOnFailure(final Callable<Void> operation, final File logFile,\n+                                                   final Class<? extends Throwable> failureType) throws Exception {\n+\n+        final Logger log = Logger.getLogger(FastJarFormatWorksTest.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxODc5Ng=="}, "originalCommit": {"oid": "2d5db752bc3729d6be1f09e26b0df7d060e4ce85"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5ODgyMTI3OnYy", "diffSide": "RIGHT", "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDoxNzozMlrOGsO7bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDoxOTo0MFrOGsPBHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNTExNg==", "bodyText": "Let's get rid of this comment please", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449035116", "createdAt": "2020-07-02T14:17:32Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -5,10 +5,15 @@\n import java.nio.file.Path;\n import java.util.ArrayList;\n import java.util.List;\n+import java.util.concurrent.Callable;\n+\n+// import org.apache.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd023c5417cb6f03ba8ad54603aea6d0ffe95ba2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNTQxNg==", "bodyText": "I am so sorry", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449035416", "createdAt": "2020-07-02T14:18:00Z", "author": {"login": "Garima829"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -5,10 +5,15 @@\n import java.nio.file.Path;\n import java.util.ArrayList;\n import java.util.List;\n+import java.util.concurrent.Callable;\n+\n+// import org.apache.log4j.Logger;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNTExNg=="}, "originalCommit": {"oid": "dd023c5417cb6f03ba8ad54603aea6d0ffe95ba2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNjU3NA==", "bodyText": "No worries", "url": "https://github.com/quarkusio/quarkus/pull/10423#discussion_r449036574", "createdAt": "2020-07-02T14:19:40Z", "author": {"login": "geoand"}, "path": "integration-tests/gradle/src/test/java/io/quarkus/gradle/LaunchUtils.java", "diffHunk": "@@ -5,10 +5,15 @@\n import java.nio.file.Path;\n import java.util.ArrayList;\n import java.util.List;\n+import java.util.concurrent.Callable;\n+\n+// import org.apache.log4j.Logger;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNTExNg=="}, "originalCommit": {"oid": "dd023c5417cb6f03ba8ad54603aea6d0ffe95ba2"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2536, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}