{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMDcwNzIx", "number": 9060, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNTowOToyMVrOECMneA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo0NToxM1rOECqsHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNzM5MzIwOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNTowOToyMVrOGegZYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNTowOToyMVrOGegZYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY0MTI1MA==", "bodyText": "Looks like a leftover.", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r434641250", "createdAt": "2020-06-03T15:09:21Z", "author": {"login": "FroMage"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -166,6 +166,7 @@ public SystemPropertyBuildItem enforceDisableRuntimeEnhancer() {\n     }\n \n     @BuildStep\n+    //<<<<<<< HEAD", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bce254c88fe36203a277267fc593c425ddd27f5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNzQ2MTkyOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-reactive/runtime/src/main/java/io/quarkus/hibernate/reactive/runtime/ReactiveSessionProducer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyNDozOVrOGehFNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyNDozOVrOGehFNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MjQ2OQ==", "bodyText": "I doubt the version for CompletionStage works either: this creates a new Uni/CompletionStage that must be used in order for it to be terminated. This has no side-effect.", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r434652469", "createdAt": "2020-06-03T15:24:39Z", "author": {"login": "FroMage"}, "path": "extensions/hibernate-reactive/runtime/src/main/java/io/quarkus/hibernate/reactive/runtime/ReactiveSessionProducer.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package io.quarkus.hibernate.reactive.runtime;\n+\n+import java.util.concurrent.CompletionStage;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.context.RequestScoped;\n+import javax.enterprise.inject.Disposes;\n+import javax.enterprise.inject.Produces;\n+import javax.inject.Inject;\n+\n+import org.hibernate.reactive.mutiny.Mutiny;\n+import org.hibernate.reactive.stage.Stage;\n+\n+import io.quarkus.arc.DefaultBean;\n+import io.smallrye.mutiny.Uni;\n+\n+@ApplicationScoped\n+public class ReactiveSessionProducer {\n+\n+    @Inject\n+    private Stage.SessionFactory reactiveSessionFactory;\n+\n+    @Inject\n+    private Mutiny.SessionFactory mutinySessionFactory;\n+\n+    @Produces\n+    @RequestScoped\n+    @DefaultBean\n+    public CompletionStage<Stage.Session> stageSession() {\n+        return reactiveSessionFactory.openSession();\n+    }\n+\n+    @Produces\n+    @RequestScoped\n+    @DefaultBean\n+    public Uni<Mutiny.Session> mutinySession() {\n+        return mutinySessionFactory.openSession();\n+    }\n+\n+    public void disposeStageSession(@Disposes CompletionStage<Stage.Session> reactiveSession) {\n+        reactiveSession.whenComplete((s, t) -> {\n+            if (s != null)\n+                s.close();\n+        });\n+    }\n+\n+    public void disposeMutinySession(@Disposes Uni<Mutiny.Session> reactiveSession) {\n+    \t// TODO: @AGG this is not working, need to check w/ Clement to figure out the proper way", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bce254c88fe36203a277267fc593c425ddd27f5"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjMyMDI4OnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci-actions.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo0NToxM1rOGfQ9kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo1Njo0NFrOGfRZBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQzNjk0Nw==", "bodyText": "how does this relate?\nThere's another change to keycloak version below.", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r435436947", "createdAt": "2020-06-04T17:45:13Z", "author": {"login": "Sanne"}, "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -122,7 +122,7 @@ jobs:\n \n     services:\n       keycloak:\n-        image: quay.io/keycloak/keycloak:10.0.1\n+        image: quay.io/keycloak/keycloak:10.0.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2a857280eff1b8696d1b194320029409240a82c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ0Mzk3Mw==", "bodyText": "good catch, must have been a bad auto-merge when I rebased -- will fix this", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r435443973", "createdAt": "2020-06-04T17:56:44Z", "author": {"login": "aguibert"}, "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -122,7 +122,7 @@ jobs:\n \n     services:\n       keycloak:\n-        image: quay.io/keycloak/keycloak:10.0.1\n+        image: quay.io/keycloak/keycloak:10.0.0", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQzNjk0Nw=="}, "originalCommit": {"oid": "f2a857280eff1b8696d1b194320029409240a82c"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3235, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}