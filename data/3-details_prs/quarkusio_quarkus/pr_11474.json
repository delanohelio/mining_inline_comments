{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMjg3OTk5", "number": 11474, "title": "Codestarts testing", "bodyText": "Even if I need to keep adding more tests, this should already give a good base with close to 100% coverage of the Codestarts spec and business.", "createdAt": "2020-08-19T16:41:28Z", "url": "https://github.com/quarkusio/quarkus/pull/11474", "merged": true, "mergeCommit": {"oid": "792e53b091ed3e6e85de52e4a0a356953d698ad0"}, "closed": true, "closedAt": "2020-08-21T10:40:55Z", "author": {"login": "ia3andy"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdArlKugH2gAyNDcwMjg3OTk5OmJiZTIwN2QxODNmN2JmMTRlM2EzZTMwNjg3Y2VmODU2MGM4NjZkNGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBCaWWgFqTQ3MjM4NzU3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbe207d183f7bf14e3a3e30687cef8560c866d4c", "committedDate": "2020-08-20T08:03:45Z", "message": "Codestarts tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cd6ad56107283a2f5ffd8ed8f58216d6be561db", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/1cd6ad56107283a2f5ffd8ed8f58216d6be561db", "committedDate": "2020-08-19T15:28:45Z", "message": "Codestarts tests"}, "afterCommit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbe207d183f7bf14e3a3e30687cef8560c866d4c", "committedDate": "2020-08-20T08:03:45Z", "message": "Codestarts tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzI2NjA5", "url": "https://github.com/quarkusio/quarkus/pull/11474#pullrequestreview-471726609", "createdAt": "2020-08-20T15:25:09Z", "commit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNToyNTowOVrOHEG0og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNToyNjo0NVrOHEG47A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA2ODEzMA==", "bodyText": "What's wrong with \"*\".equals(codestartFileStrategy.getFilter()) ? \ud83d\ude1b", "url": "https://github.com/quarkusio/quarkus/pull/11474#discussion_r474068130", "createdAt": "2020-08-20T15:25:09Z", "author": {"login": "gastaldi"}, "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/CodestartProcessor.java", "diffHunk": "@@ -137,12 +132,25 @@ public void writeFiles() throws IOException {\n         for (Map.Entry<String, List<CodestartFile>> e : files.entrySet()) {\n             final String relativePath = e.getKey();\n             Files.createDirectories(targetDirectory.resolve(relativePath).getParent());\n-            getStrategy(relativePath).orElse(CodestartFileStrategyHandler.DEFAULT_STRATEGY)\n+            getStrategy(relativePath).orElse(getSelectedDefaultStrategy())\n                     .process(targetDirectory, relativePath, e.getValue(), data);\n         }\n     }\n \n-    private Optional<CodestartFileStrategyHandler> getStrategy(final String key) {\n+    DefaultCodestartFileStrategyHandler getSelectedDefaultStrategy() {\n+        for (CodestartFileStrategy codestartFileStrategy : strategies) {\n+            if (Objects.equals(codestartFileStrategy.getFilter(), \"*\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA2OTIyOA==", "bodyText": "This throws FileAlreadyExistsException if targetPath.getParent() already exists", "url": "https://github.com/quarkusio/quarkus/pull/11474#discussion_r474069228", "createdAt": "2020-08-20T15:26:45Z", "author": {"login": "gastaldi"}, "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/strategy/ReplaceCodestartFileStrategyHandler.java", "diffHunk": "@@ -4,16 +4,23 @@\n import java.io.IOException;\n import java.nio.file.Files;\n import java.nio.file.Path;\n+import java.nio.file.StandardCopyOption;\n import java.util.List;\n import java.util.Map;\n \n-final class ReplaceCodestartFileStrategyHandler implements CodestartFileStrategyHandler {\n+final class ReplaceCodestartFileStrategyHandler implements DefaultCodestartFileStrategyHandler {\n \n     @Override\n     public String name() {\n         return \"replace\";\n     }\n \n+    @Override\n+    public void copyStaticFile(Path sourcePath, Path targetPath) throws IOException {\n+        Files.createDirectories(targetPath.getParent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMzg3NTcz", "url": "https://github.com/quarkusio/quarkus/pull/11474#pullrequestreview-472387573", "createdAt": "2020-08-21T10:39:45Z", "commit": {"oid": "bbe207d183f7bf14e3a3e30687cef8560c866d4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 834, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}