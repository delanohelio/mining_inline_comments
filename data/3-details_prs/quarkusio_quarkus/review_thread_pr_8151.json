{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjE3MjY5", "number": 8151, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0NzowOVrODrTZUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzo1NFrODrZ3hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzMzMTM5OnYy", "diffSide": "RIGHT", "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0NzowOVrOF7kd3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0NzowOVrOF7kd3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwNzc3Mw==", "bodyText": "The comment isn't really helpful, just saying :)", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398007773", "createdAt": "2020-03-25T16:47:09Z", "author": {"login": "geoand"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "diffHunk": "@@ -134,6 +147,15 @@ public boolean doCreateProject(final Map<String, Object> context) throws IOExcep\n     }\n \n     public QuarkusCommandOutcome execute() throws QuarkusCommandException {\n+        // Define the Java version to use determined from the one specified or the one creating the project", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2ODM4OTMzOnYy", "diffSide": "RIGHT", "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzoxMFrOF7u4Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwNzo1ODo1NVrOF76-EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODM5NQ==", "bodyText": "why not have one \"java_target\" and another \"java_underscore_target\" so the same property isn't to be treated differently ?", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398178395", "createdAt": "2020-03-25T21:23:10Z", "author": {"login": "maxandersen"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "diffHunk": "@@ -134,6 +147,15 @@ public boolean doCreateProject(final Map<String, Object> context) throws IOExcep\n     }\n \n     public QuarkusCommandOutcome execute() throws QuarkusCommandException {\n+        // Define the Java version to use determined from the one specified or the one creating the project\n+        Matcher matcher = JAVA_VERSION_PATTERN\n+                .matcher(this.javaTarget != null ? this.javaTarget : System.getProperty(\"java.version\", \"\"));\n+        if (matcher.matches() && Integer.parseInt(matcher.group(1)) < 11) {\n+            invocation.setProperty(JAVA_TARGET, invocation.getBuildTool() == BuildTool.MAVEN ? \"1.8\" : \"1_8\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM3NjQ2NA==", "bodyText": "That was the other option I pondered. I decided to go with this one.", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398376464", "createdAt": "2020-03-26T07:58:55Z", "author": {"login": "gsmet"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "diffHunk": "@@ -134,6 +147,15 @@ public boolean doCreateProject(final Map<String, Object> context) throws IOExcep\n     }\n \n     public QuarkusCommandOutcome execute() throws QuarkusCommandException {\n+        // Define the Java version to use determined from the one specified or the one creating the project\n+        Matcher matcher = JAVA_VERSION_PATTERN\n+                .matcher(this.javaTarget != null ? this.javaTarget : System.getProperty(\"java.version\", \"\"));\n+        if (matcher.matches() && Integer.parseInt(matcher.group(1)) < 11) {\n+            invocation.setProperty(JAVA_TARGET, invocation.getBuildTool() == BuildTool.MAVEN ? \"1.8\" : \"1_8\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODM5NQ=="}, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2ODM5MTc0OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/basic-rest/kotlin/pom.xml-template.ftl", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzo1NFrOF7u5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwNzo1OTozMFrOF76_Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODczOQ==", "bodyText": "so if grok this right this change is a change in the \"api\" of the code generation that means the templates now require java_target to be set which will not be the case if you are using 1.3.0 plugin (@aloubyansky correct me if i'm wrong on this here).\nSo 1.3.0 plugin will pick up latest 1.3.x platform and when generation happens it will fail.\nTo remedy this the various .ftl files should check if java_target is set.\nif my freemarker syntax memory is right its something like ${java_target!\"11\"}", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398178739", "createdAt": "2020-03-25T21:23:54Z", "author": {"login": "maxandersen"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/basic-rest/kotlin/pom.xml-template.ftl", "diffHunk": "@@ -107,7 +107,7 @@\n                 </executions>\n                 <configuration>\n                     <javaParameters>true</javaParameters>\n-                    <jvmTarget>1.8</jvmTarget>\n+                    <jvmTarget>${java_target}</jvmTarget>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE4ODE4NA==", "bodyText": "so if grok this right this change is a change in the \"api\" of the code generation that means the templates now require java_target to be set which will not be the case if you are using 1.3.0 plugin (@aloubyansky correct me if i'm wrong on this here).\n\nThat is correct.", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398188184", "createdAt": "2020-03-25T21:42:25Z", "author": {"login": "aloubyansky"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/basic-rest/kotlin/pom.xml-template.ftl", "diffHunk": "@@ -107,7 +107,7 @@\n                 </executions>\n                 <configuration>\n                     <javaParameters>true</javaParameters>\n-                    <jvmTarget>1.8</jvmTarget>\n+                    <jvmTarget>${java_target}</jvmTarget>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODczOQ=="}, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM3Njc1NA==", "bodyText": "I suppose we should choose 1.8 as the default to have a consistent behavior. I'll go do that and test.", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398376754", "createdAt": "2020-03-26T07:59:30Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/basic-rest/kotlin/pom.xml-template.ftl", "diffHunk": "@@ -107,7 +107,7 @@\n                 </executions>\n                 <configuration>\n                     <javaParameters>true</javaParameters>\n-                    <jvmTarget>1.8</jvmTarget>\n+                    <jvmTarget>${java_target}</jvmTarget>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODczOQ=="}, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4625, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}