{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNDA5MDU3", "number": 12970, "title": "Introduced io.quarkus.restclient.NoopHostnameVerifier", "bodyText": "This should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint.\nAlso tests were improved to use what's provided in the rest-client extension", "createdAt": "2020-10-27T01:50:34Z", "url": "https://github.com/quarkusio/quarkus/pull/12970", "merged": true, "mergeCommit": {"oid": "b5b061c177b86b4f308924d0eadd241a16494f60"}, "closed": true, "closedAt": "2020-11-02T06:54:52Z", "author": {"login": "gastaldi"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWi5v0gFqTUxNzM3ODAzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYT1dEAFqTUyMTI0NjQzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mzc4MDMz", "url": "https://github.com/quarkusio/quarkus/pull/12970#pullrequestreview-517378033", "createdAt": "2020-10-27T06:23:24Z", "commit": {"oid": "2b910061b1ec10f7b0a92c6abdcfc3686c28ab1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjoyMzoyNVrOHos7dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjoyMzoyNVrOHos7dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ0MTIwNA==", "bodyText": "This doesn't seem to retry as the existing code does. The reason I added the retry is because I had seen the external service the test hits, be a tad unstable", "url": "https://github.com/quarkusio/quarkus/pull/12970#discussion_r512441204", "createdAt": "2020-10-27T06:23:25Z", "author": {"login": "geoand"}, "path": "integration-tests/rest-client/src/main/java/io/quarkus/it/rest/client/selfsigned/ExternalSelfSignedResource.java", "diffHunk": "@@ -1,45 +1,29 @@\n package io.quarkus.it.rest.client.selfsigned;\n \n import java.io.IOException;\n-import java.net.URL;\n \n-import javax.net.ssl.HttpsURLConnection;\n+import javax.inject.Inject;\n import javax.ws.rs.GET;\n import javax.ws.rs.Path;\n import javax.ws.rs.Produces;\n import javax.ws.rs.core.MediaType;\n \n+import org.eclipse.microprofile.rest.client.inject.RestClient;\n+\n /**\n  * This has nothing to do with rest-client, but we add it here in order to avoid creating\n  * a new integration test that would slow down our CI\n  */\n @Path(\"/self-signed\")\n public class ExternalSelfSignedResource {\n \n+    @Inject\n+    @RestClient\n+    ExternalSelfSignedClient client;\n+\n     @GET\n     @Produces(MediaType.TEXT_PLAIN)\n     public String perform() throws IOException {\n-        try {\n-            return doGetCipher();\n-        } catch (IOException e) {\n-\n-            // if it fails it might be because the remote service is down, so sleep and try again\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException ignored) {\n-\n-            }\n-\n-            return doGetCipher();\n-        }\n-    }\n-\n-    private String doGetCipher() throws IOException {\n-        // this URL provides an always on example of an HTTPS URL utilizing self-signed certificate\n-        URL url = new URL(\"https://self-signed.badssl.com/\");\n-        HttpsURLConnection con = (HttpsURLConnection) url.openConnection();\n-        con.setRequestMethod(\"GET\");\n-        con.getResponseCode();\n-        return con.getCipherSuite();\n+        return String.valueOf(client.invoke().getStatus());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b910061b1ec10f7b0a92c6abdcfc3686c28ab1a"}, "originalPosition": 51}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b910061b1ec10f7b0a92c6abdcfc3686c28ab1a", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/2b910061b1ec10f7b0a92c6abdcfc3686c28ab1a", "committedDate": "2020-10-27T01:45:47Z", "message": "Introduced io.quarkus.restclient.runtime.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}, "afterCommit": {"oid": "a0edfde2c17b96b6ee36823ce49afbe0de564462", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/a0edfde2c17b96b6ee36823ce49afbe0de564462", "committedDate": "2020-10-27T15:30:01Z", "message": "Introduced io.quarkus.restclient.runtime.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0edfde2c17b96b6ee36823ce49afbe0de564462", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/a0edfde2c17b96b6ee36823ce49afbe0de564462", "committedDate": "2020-10-27T15:30:01Z", "message": "Introduced io.quarkus.restclient.runtime.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}, "afterCommit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/7b2e2abce89525d43834344b8cb8e9165a73d06c", "committedDate": "2020-10-27T15:49:33Z", "message": "Introduced io.quarkus.restclient.runtime.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODY1MDY4", "url": "https://github.com/quarkusio/quarkus/pull/12970#pullrequestreview-517865068", "createdAt": "2020-10-27T15:52:25Z", "commit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1MjoyNVrOHpDoIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1MjoyNVrOHpDoIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxMzA4OA==", "bodyText": "Actually, now that I think of it, I think that this block was meant to test that that the truststore is used by default. With the change it won't be doing that as the truststore is specific to the rest client", "url": "https://github.com/quarkusio/quarkus/pull/12970#discussion_r512813088", "createdAt": "2020-10-27T15:52:25Z", "author": {"login": "geoand"}, "path": "integration-tests/rest-client/src/main/java/io/quarkus/it/rest/client/selfsigned/ExternalSelfSignedResource.java", "diffHunk": "@@ -1,45 +1,29 @@\n package io.quarkus.it.rest.client.selfsigned;\n \n import java.io.IOException;\n-import java.net.URL;\n \n-import javax.net.ssl.HttpsURLConnection;\n+import javax.inject.Inject;\n import javax.ws.rs.GET;\n import javax.ws.rs.Path;\n import javax.ws.rs.Produces;\n import javax.ws.rs.core.MediaType;\n \n+import org.eclipse.microprofile.rest.client.inject.RestClient;\n+\n /**\n  * This has nothing to do with rest-client, but we add it here in order to avoid creating\n  * a new integration test that would slow down our CI\n  */\n @Path(\"/self-signed\")\n public class ExternalSelfSignedResource {\n \n+    @Inject\n+    @RestClient\n+    ExternalSelfSignedClient client;\n+\n     @GET\n     @Produces(MediaType.TEXT_PLAIN)\n     public String perform() throws IOException {\n-        try {\n-            return doGetCipher();\n-        } catch (IOException e) {\n-\n-            // if it fails it might be because the remote service is down, so sleep and try again\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException ignored) {\n-\n-            }\n-\n-            return doGetCipher();\n-        }\n-    }\n-\n-    private String doGetCipher() throws IOException {\n-        // this URL provides an always on example of an HTTPS URL utilizing self-signed certificate\n-        URL url = new URL(\"https://self-signed.badssl.com/\");\n-        HttpsURLConnection con = (HttpsURLConnection) url.openConnection();\n-        con.setRequestMethod(\"GET\");\n-        con.getResponseCode();\n-        return con.getCipherSuite();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDI0NDQ3", "url": "https://github.com/quarkusio/quarkus/pull/12970#pullrequestreview-518024447", "createdAt": "2020-10-27T18:35:04Z", "commit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozNTowNFrOHpLLjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozNTowNFrOHpLLjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkzNjg0Ng==", "bodyText": "If it's exposed to the user and not some implementation detail, it should be at the root, not in the runtime package.", "url": "https://github.com/quarkusio/quarkus/pull/12970#discussion_r512936846", "createdAt": "2020-10-27T18:35:04Z", "author": {"login": "gsmet"}, "path": "extensions/rest-client/runtime/src/main/java/io/quarkus/restclient/runtime/NoopHostnameVerifier.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package io.quarkus.restclient.runtime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b2e2abce89525d43834344b8cb8e9165a73d06c", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/7b2e2abce89525d43834344b8cb8e9165a73d06c", "committedDate": "2020-10-27T15:49:33Z", "message": "Introduced io.quarkus.restclient.runtime.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}, "afterCommit": {"oid": "e1cf4ce631ed423da857d5c2af35b68cced58e26", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/e1cf4ce631ed423da857d5c2af35b68cced58e26", "committedDate": "2020-10-27T19:57:06Z", "message": "Introduced io.quarkus.restclient.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "314fcfe238ce26b2dd9ba619b68a51bae40f4731", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/314fcfe238ce26b2dd9ba619b68a51bae40f4731", "committedDate": "2020-11-01T17:33:29Z", "message": "Fixed error message and removed deprecated warning in JDK 11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4eb66c346aca25b6fd6cb4cef1ab0a43fe1f54", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/5e4eb66c346aca25b6fd6cb4cef1ab0a43fe1f54", "committedDate": "2020-11-01T17:50:33Z", "message": "Introduced io.quarkus.restclient.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1cf4ce631ed423da857d5c2af35b68cced58e26", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/e1cf4ce631ed423da857d5c2af35b68cced58e26", "committedDate": "2020-10-27T19:57:06Z", "message": "Introduced io.quarkus.restclient.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}, "afterCommit": {"oid": "5e4eb66c346aca25b6fd6cb4cef1ab0a43fe1f54", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/5e4eb66c346aca25b6fd6cb4cef1ab0a43fe1f54", "committedDate": "2020-11-01T17:50:33Z", "message": "Introduced io.quarkus.restclient.NoopHostnameVerifier\n\nThis should be used in the rest-client when hostname verification needs to be disabled for a specific client endpoint\nAlso tests were improved to use what's provided in the rest-client extension"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMjQ2NDMx", "url": "https://github.com/quarkusio/quarkus/pull/12970#pullrequestreview-521246431", "createdAt": "2020-11-01T17:58:00Z", "commit": {"oid": "5e4eb66c346aca25b6fd6cb4cef1ab0a43fe1f54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1557, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}