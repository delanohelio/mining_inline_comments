{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNjE0NTQx", "number": 13971, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoxMjowNFrOFHyUfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoxMjowNFrOFHyUfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzA4Nzk5OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/cdi/QuarkusManagedBeanRegistry.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoxMjowNFrOIJXxWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoxMjowNFrOIJXxWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY5NzU2MQ==", "bodyText": "Ok, I'm not entirely sure this will be safe enough and if, at some point, we will have to release the beans and then reinitialize them. Let's get this in and we will see if it ends up being an issue.", "url": "https://github.com/quarkusio/quarkus/pull/13971#discussion_r546697561", "createdAt": "2020-12-21T13:12:04Z", "author": {"login": "gsmet"}, "path": "extensions/hibernate-orm/runtime/src/main/java/io/quarkus/hibernate/orm/runtime/cdi/QuarkusManagedBeanRegistry.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.quarkus.hibernate.orm.runtime.cdi;\n+\n+import org.hibernate.resource.beans.container.spi.BeanContainer;\n+import org.hibernate.resource.beans.container.spi.ContainedBean;\n+import org.hibernate.resource.beans.internal.FallbackBeanInstanceProducer;\n+import org.hibernate.resource.beans.spi.ManagedBean;\n+import org.hibernate.resource.beans.spi.ManagedBeanRegistry;\n+\n+import io.quarkus.arc.Arc;\n+\n+/**\n+ * A replacement for ManagedBeanRegistryImpl that:\n+ * <ul>\n+ * <li>forces the use of QuarkusManagedBeanRegistry,\n+ * which works with Arc and respects configured scopes when instantiating CDI beans.</li>\n+ * <li>is not stoppable and leaves the release of beans to {@link QuarkusArcBeanContainer},\n+ * so that the bean container and its beans can be reused between static init and runtime init,\n+ * even though we stop Hibernate ORM services after the end of static init.</li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d88bce956bd6df0d674266c1f6e134853ec2b8"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4435, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}