{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzUxODk1", "number": 13218, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTozNDoxOFrOE3a92w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1ODoyNFrOE5NxlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTQ4OTU1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci-actions.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTozNDoxOFrOHwweag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzoyNjoyM1rOHwzlMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg4NzkxNA==", "bodyText": "Ah nice, I wanted to experiment with that.", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r520887914", "createdAt": "2020-11-10T21:34:18Z", "author": {"login": "gsmet"}, "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -83,7 +83,7 @@ jobs:\n           key: q2maven-${{ steps.get-date.outputs.date }}\n       - name: Build\n         run: |\n-          mvn -e -B -DskipTests -DskipITs -Dno-format clean install\n+          mvn -T1C -e -B -DskipTests -DskipITs -Dinvoker.skip -Dno-format clean install", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e449e81f6126ec1b59c9bd4a78c0d0a6506ec830"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzODgwMA==", "bodyText": "Too bad GH only gives us two cores so it's still rather slow (> 10 mins).", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r520938800", "createdAt": "2020-11-10T23:26:23Z", "author": {"login": "famod"}, "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -83,7 +83,7 @@ jobs:\n           key: q2maven-${{ steps.get-date.outputs.date }}\n       - name: Build\n         run: |\n-          mvn -e -B -DskipTests -DskipITs -Dno-format clean install\n+          mvn -T1C -e -B -DskipTests -DskipITs -Dinvoker.skip -Dno-format clean install", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg4NzkxNA=="}, "originalCommit": {"oid": "e449e81f6126ec1b59c9bd4a78c0d0a6506ec830"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NDI5NTQ0OnYy", "diffSide": "RIGHT", "path": "update-extension-dependencies.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1NDowMVrOHzjYog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMjoxNzo1MVrOH37yiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTE3MA==", "bodyText": "This and the previous commands would make sure that everything relevant that goes into the descriptor is up to date.\nOn the other hand we could instead just expect everything to be up to date and remove those commands.\nPS: Building everything except integration-tests is not that easy, that's why multiple commands...", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r523819170", "createdAt": "2020-11-15T21:54:01Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQxMzMyMA==", "bodyText": "Update: I removed those lines.", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r528413320", "createdAt": "2020-11-22T22:17:51Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTE3MA=="}, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NDI5NjA4OnYy", "diffSide": "RIGHT", "path": "update-extension-dependencies.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1NDoyNlrOHzjY6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoxNToyNVrOIG91_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTI0MQ==", "bodyText": "Placement of the script in root ok? Or somewhere else?", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r523819241", "createdAt": "2020-11-15T21:54:26Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE3NTYxMg==", "bodyText": "That is fine \ud83d\udc4d\ud83c\udffb", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r544175612", "createdAt": "2020-12-16T10:15:25Z", "author": {"login": "gastaldi"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTI0MQ=="}, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NDI5NzM2OnYy", "diffSide": "RIGHT", "path": "update-extension-dependencies.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1NTozM1rOHzjZfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1NTozM1rOHzjZfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTM4OA==", "bodyText": "General idea is to avoid additional (temporary) files, so everything is stored in variables.", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r523819388", "createdAt": "2020-11-15T21:55:33Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions\n+mvn clean package -f devtools/bom-descriptor-json\n+\n+DEP_TEMPLATE='        <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NDI5ODM5OnYy", "diffSide": "RIGHT", "path": "update-extension-dependencies.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1Njo0OVrOHzjZ8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1Njo0OVrOHzjZ8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTUwNg==", "bodyText": "I think it is a good idea to have in the pom.xml a reference to the script.", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r523819506", "createdAt": "2020-11-15T21:56:49Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions\n+mvn clean package -f devtools/bom-descriptor-json\n+\n+DEP_TEMPLATE='        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>XXX</artifactId>\n+            <version>\\${project.version}</version>\n+            <type>pom</type>\n+            <scope>test</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>'\n+\n+echo ''\n+echo 'Building dependencies list from bom-descriptor-json...'\n+echo ''\n+DEPS=`grep -Po '(?<=\"artifact-id\": \")[^\"]+' devtools/bom-descriptor-json/target/*.json \\\n+  | sort \\\n+  | xargs -i sh -c \"echo \\\"${DEP_TEMPLATE}\\\" | sed 's/XXX/{}/'\" \\\n+  | sed ':a;N;$!ba;s/\\n/\\\\\\n/g'`    # replace newlines with \\n so that sed accepts ${DEPS} as input\n+\n+MARK_START='<!-- START update-extension-dependencies.sh -->'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NDI5OTcyOnYy", "diffSide": "RIGHT", "path": "update-extension-dependencies.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMTo1ODoyNFrOHzjang==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMToyNToxMFrOH2Cxsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTY3OA==", "bodyText": "More pom.xml could be added here although I'm asking myself is whether docs should really receive the very same deps as bom-descriptor-json?", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r523819678", "createdAt": "2020-11-15T21:58:24Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions\n+mvn clean package -f devtools/bom-descriptor-json\n+\n+DEP_TEMPLATE='        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>XXX</artifactId>\n+            <version>\\${project.version}</version>\n+            <type>pom</type>\n+            <scope>test</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>'\n+\n+echo ''\n+echo 'Building dependencies list from bom-descriptor-json...'\n+echo ''\n+DEPS=`grep -Po '(?<=\"artifact-id\": \")[^\"]+' devtools/bom-descriptor-json/target/*.json \\\n+  | sort \\\n+  | xargs -i sh -c \"echo \\\"${DEP_TEMPLATE}\\\" | sed 's/XXX/{}/'\" \\\n+  | sed ':a;N;$!ba;s/\\n/\\\\\\n/g'`    # replace newlines with \\n so that sed accepts ${DEPS} as input\n+\n+MARK_START='<!-- START update-extension-dependencies.sh -->'\n+MARK_END='<!-- END update-extension-dependencies.sh -->'\n+\n+echo ''\n+echo 'Updating bom-descriptor-json/pom.xml...'\n+echo ''\n+sed -i \"/${MARK_START}/,/${MARK_END}/c\\        ${MARK_START}\\n${DEPS}\\n        ${MARK_END}\" devtools/bom-descriptor-json/pom.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQzMDY0Mg==", "bodyText": "I've just pushed an update that includes docs. \ud83e\udd37\u200d\u2642\ufe0f", "url": "https://github.com/quarkusio/quarkus/pull/13218#discussion_r526430642", "createdAt": "2020-11-18T21:25:10Z", "author": {"login": "famod"}, "path": "update-extension-dependencies.sh", "diffHunk": "@@ -0,0 +1,45 @@\n+#!/bin/bash\n+\n+# Purpose: Updates pom.xml files with symbolic dependencies to extensions to enforce a consistent build order.\n+\n+set -e -u -o pipefail\n+shopt -s failglob\n+\n+echo ''\n+echo 'Building bom-descriptor-json...'\n+echo ''\n+#mvn -D quickly -T0.8C -f independent-projects/arc\n+#mvn -D quickly -T0.8C -f bom/application\n+#mvn -D quickly -T0.8C -f core\n+#mvn -D quickly -T0.8C -f extensions\n+mvn clean package -f devtools/bom-descriptor-json\n+\n+DEP_TEMPLATE='        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>XXX</artifactId>\n+            <version>\\${project.version}</version>\n+            <type>pom</type>\n+            <scope>test</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>'\n+\n+echo ''\n+echo 'Building dependencies list from bom-descriptor-json...'\n+echo ''\n+DEPS=`grep -Po '(?<=\"artifact-id\": \")[^\"]+' devtools/bom-descriptor-json/target/*.json \\\n+  | sort \\\n+  | xargs -i sh -c \"echo \\\"${DEP_TEMPLATE}\\\" | sed 's/XXX/{}/'\" \\\n+  | sed ':a;N;$!ba;s/\\n/\\\\\\n/g'`    # replace newlines with \\n so that sed accepts ${DEPS} as input\n+\n+MARK_START='<!-- START update-extension-dependencies.sh -->'\n+MARK_END='<!-- END update-extension-dependencies.sh -->'\n+\n+echo ''\n+echo 'Updating bom-descriptor-json/pom.xml...'\n+echo ''\n+sed -i \"/${MARK_START}/,/${MARK_END}/c\\        ${MARK_START}\\n${DEPS}\\n        ${MARK_END}\" devtools/bom-descriptor-json/pom.xml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgxOTY3OA=="}, "originalCommit": {"oid": "5157e121f94ce5579c24f9ea4bb8b611fe6e4935"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4050, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}