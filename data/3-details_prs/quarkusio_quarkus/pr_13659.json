{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxNzM2ODU4", "number": 13659, "title": "Update Keycloak Authorization docs and UserInfo", "bodyText": "Fixes #13652\nAlso a user reported that it was impossible to get a list of all the UserInfo properties", "createdAt": "2020-12-03T12:16:59Z", "url": "https://github.com/quarkusio/quarkus/pull/13659", "merged": true, "mergeCommit": {"oid": "cdbf49adb8a7d63510c5d46dff1b5cb769b351e3"}, "closed": true, "closedAt": "2020-12-03T17:55:43Z", "author": {"login": "sberyozkin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiiz-OAFqTU0MzkzMTA0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiyBe6AFqTU0NDY5MzcyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzOTMxMDQy", "url": "https://github.com/quarkusio/quarkus/pull/13659#pullrequestreview-543931042", "createdAt": "2020-12-03T13:04:12Z", "commit": {"oid": "fb1c70cdcce0c37d5878cbf342a3e00035e9a61a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzOTMyMDcz", "url": "https://github.com/quarkusio/quarkus/pull/13659#pullrequestreview-543932073", "createdAt": "2020-12-03T13:05:33Z", "commit": {"oid": "fb1c70cdcce0c37d5878cbf342a3e00035e9a61a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMzowNTozM1rOH-aqCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMzowNTozM1rOH-aqCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIxMDUwNg==", "bodyText": "Instead of returning the property names via a getter, isn't better to introduce a UserInfo.contains(String) instead?", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535210506", "createdAt": "2020-12-03T13:05:33Z", "author": {"login": "gastaldi"}, "path": "integration-tests/oidc-tenancy/src/main/java/io/quarkus/it/keycloak/TenantResource.java", "diffHunk": "@@ -40,7 +42,9 @@ public String userNameService(@PathParam(\"tenant\") String tenant) {\n         String name = getNameServiceType();\n         if (\"tenant-d\".equals(tenant) || \"tenant-b-no-discovery\".equals(tenant)) {\n             UserInfo userInfo = getUserInfo();\n-            name = name + \".\" + userInfo.getString(\"preferred_username\");\n+            if (userInfo.getPropertyNames().contains(PREFERRED_USERNAME)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1c70cdcce0c37d5878cbf342a3e00035e9a61a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249b22eeb3f88f4c9131da153772778412a7528f", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/249b22eeb3f88f4c9131da153772778412a7528f", "committedDate": "2020-12-03T14:23:03Z", "message": "Update Keycloak Authorization docs and UserInfo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb1c70cdcce0c37d5878cbf342a3e00035e9a61a", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/fb1c70cdcce0c37d5878cbf342a3e00035e9a61a", "committedDate": "2020-12-03T12:14:16Z", "message": "Update Keycloak Authorization docs and UserInfo"}, "afterCommit": {"oid": "249b22eeb3f88f4c9131da153772778412a7528f", "author": {"user": {"login": "sberyozkin", "name": null}}, "url": "https://github.com/quarkusio/quarkus/commit/249b22eeb3f88f4c9131da153772778412a7528f", "committedDate": "2020-12-03T14:23:03Z", "message": "Update Keycloak Authorization docs and UserInfo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NjkzNzI5", "url": "https://github.com/quarkusio/quarkus/pull/13659#pullrequestreview-544693729", "createdAt": "2020-12-04T06:47:10Z", "commit": {"oid": "249b22eeb3f88f4c9131da153772778412a7528f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo0NzoxMVrOH_DG3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo0NzoxMVrOH_DG3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg3MzI0NQ==", "bodyText": "Missing onItem() before calling .transform(.", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535873245", "createdAt": "2020-12-04T06:47:11Z", "author": {"login": "Sgitario"}, "path": "docs/src/main/asciidoc/security-keycloak-authorization.adoc", "diffHunk": "@@ -318,7 +318,7 @@ public class ProtectedResource {\n     @GET\n     public CompletionStage<List<Permission>> get() {\n         return identity.checkPermission(new AuthPermission(\"{resource_name}\"))\n-                .thenCompose(granted -> {\n+                .transform(granted -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249b22eeb3f88f4c9131da153772778412a7528f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1218, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}