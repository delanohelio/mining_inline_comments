{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0Mzc5NjEw", "number": 7614, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozNzoyN1rODlfuJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMTo1Mzo1MlrODmAueQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjQzNjIzOnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozNzoyN1rOFya_tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNzoyNToyMFrOFyvQRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxNTQxMg==", "bodyText": "Add the exception stacktrace to the debug message", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r388415412", "createdAt": "2020-03-05T16:37:27Z", "author": {"login": "gastaldi"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -137,6 +131,39 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n+    private QuarkusPlatformDescriptor loadPlatformDescriptor(final MavenArtifactResolver mvn, final MessageWriter log,\n+            Artifact descrArtifact) {\n+        return QuarkusJsonPlatformDescriptorResolver.newInstance()\n+                .setArtifactResolver(new BootstrapAppModelResolver(mvn))\n+                .setMessageWriter(log)\n+                .resolveFromJson(descrArtifact.getFile().toPath());\n+    }\n+\n+    private Artifact resolveJsonOrNull(MavenArtifactResolver mvn, String bomGroupId, String bomArtifactId, String bomVersion) {\n+        Artifact jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId, null, \"json\", bomVersion);\n+        try {\n+            jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+        } catch (Exception e) {\n+            if (getLog().isDebugEnabled()) {\n+                getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);\n+            }\n+            jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId + \"-descriptor-json\", null, \"json\",\n+                    bomVersion);\n+            try {\n+                jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+            } catch (Exception e1) {\n+                if (getLog().isDebugEnabled()) {\n+                    getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc0NzMzMg==", "bodyText": "TBH, I'd rather remove this logging altogether. Given that we are trying every imported BOM here, if it happens to be not a platform BOM is pretty much a usual situation. IMO, logging a stacktrace is going to make look scarier than it actually is.\nThe reason I'd consider removing this log message is that if you enable debug, the resolver itself is going to be pretty verbose about what's been tried and what didn't work.", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r388747332", "createdAt": "2020-03-06T07:25:20Z", "author": {"login": "aloubyansky"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -137,6 +131,39 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n+    private QuarkusPlatformDescriptor loadPlatformDescriptor(final MavenArtifactResolver mvn, final MessageWriter log,\n+            Artifact descrArtifact) {\n+        return QuarkusJsonPlatformDescriptorResolver.newInstance()\n+                .setArtifactResolver(new BootstrapAppModelResolver(mvn))\n+                .setMessageWriter(log)\n+                .resolveFromJson(descrArtifact.getFile().toPath());\n+    }\n+\n+    private Artifact resolveJsonOrNull(MavenArtifactResolver mvn, String bomGroupId, String bomArtifactId, String bomVersion) {\n+        Artifact jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId, null, \"json\", bomVersion);\n+        try {\n+            jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+        } catch (Exception e) {\n+            if (getLog().isDebugEnabled()) {\n+                getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);\n+            }\n+            jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId + \"-descriptor-json\", null, \"json\",\n+                    bomVersion);\n+            try {\n+                jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+            } catch (Exception e1) {\n+                if (getLog().isDebugEnabled()) {\n+                    getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxNTQxMg=="}, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjQzNzQxOnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozNzo0M1rOFybAbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNzoyNTo0M1rOFyvQtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxNTU5OQ==", "bodyText": "Add the exception stacktrace to the log statement", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r388415599", "createdAt": "2020-03-05T16:37:43Z", "author": {"login": "gastaldi"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -137,6 +131,39 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n+    private QuarkusPlatformDescriptor loadPlatformDescriptor(final MavenArtifactResolver mvn, final MessageWriter log,\n+            Artifact descrArtifact) {\n+        return QuarkusJsonPlatformDescriptorResolver.newInstance()\n+                .setArtifactResolver(new BootstrapAppModelResolver(mvn))\n+                .setMessageWriter(log)\n+                .resolveFromJson(descrArtifact.getFile().toPath());\n+    }\n+\n+    private Artifact resolveJsonOrNull(MavenArtifactResolver mvn, String bomGroupId, String bomArtifactId, String bomVersion) {\n+        Artifact jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId, null, \"json\", bomVersion);\n+        try {\n+            jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+        } catch (Exception e) {\n+            if (getLog().isDebugEnabled()) {\n+                getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc0NzQ0Nw==", "bodyText": "Same as above.", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r388747447", "createdAt": "2020-03-06T07:25:43Z", "author": {"login": "aloubyansky"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -137,6 +131,39 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n+    private QuarkusPlatformDescriptor loadPlatformDescriptor(final MavenArtifactResolver mvn, final MessageWriter log,\n+            Artifact descrArtifact) {\n+        return QuarkusJsonPlatformDescriptorResolver.newInstance()\n+                .setArtifactResolver(new BootstrapAppModelResolver(mvn))\n+                .setMessageWriter(log)\n+                .resolveFromJson(descrArtifact.getFile().toPath());\n+    }\n+\n+    private Artifact resolveJsonOrNull(MavenArtifactResolver mvn, String bomGroupId, String bomArtifactId, String bomVersion) {\n+        Artifact jsonArtifact = new DefaultArtifact(bomGroupId, bomArtifactId, null, \"json\", bomVersion);\n+        try {\n+            jsonArtifact = mvn.resolve(jsonArtifact).getArtifact();\n+        } catch (Exception e) {\n+            if (getLog().isDebugEnabled()) {\n+                getLog().debug(\"Failed to resolve JSON descriptor as \" + jsonArtifact);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxNTU5OQ=="}, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTg0Mzc3OnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QxMTo1Mzo1MlrOFzN6JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTo1Mjo1MVrOFzR5JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0OTU3Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                getLog().debug(\"Failed to resolve version of \" + v);\n          \n          \n            \n                                getLog().debug(\"Failed to resolve version of \" + expr);\n          \n      \n    \n    \n  \n\nBecause v == null \ud83d\ude09", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r389249572", "createdAt": "2020-03-07T11:53:52Z", "author": {"login": "gastaldi"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -147,7 +174,9 @@ private String resolveValue(String expr, BuildFile buildFile) throws IOException\n         if (expr.startsWith(\"${\") && expr.endsWith(\"}\")) {\n             final String v = buildFile.getProperty(expr.substring(2, expr.length() - 1));\n             if (v == null) {\n-                getLog().debug(\"Failed to resolve version of \" + v);\n+                if (getLog().isDebugEnabled()) {\n+                    getLog().debug(\"Failed to resolve version of \" + v);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDg1Mg==", "bodyText": "Fixed, thanks!", "url": "https://github.com/quarkusio/quarkus/pull/7614#discussion_r389314852", "createdAt": "2020-03-07T21:52:51Z", "author": {"login": "aloubyansky"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildFileMojoBase.java", "diffHunk": "@@ -147,7 +174,9 @@ private String resolveValue(String expr, BuildFile buildFile) throws IOException\n         if (expr.startsWith(\"${\") && expr.endsWith(\"}\")) {\n             final String v = buildFile.getProperty(expr.substring(2, expr.length() - 1));\n             if (v == null) {\n-                getLog().debug(\"Failed to resolve version of \" + v);\n+                if (getLog().isDebugEnabled()) {\n+                    getLog().debug(\"Failed to resolve version of \" + v);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI0OTU3Mg=="}, "originalCommit": {"oid": "dd87661a8c16808b676af696774d670e6a11e0d8"}, "originalPosition": 114}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4918, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}