{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MTk2ODUw", "number": 8652, "title": "fix: set defaults values for Page number and size", "bodyText": "Fix UnsupportedOperationException when Unpaged element is used\nWDYT @geoand ?", "createdAt": "2020-04-17T15:24:21Z", "url": "https://github.com/quarkusio/quarkus/pull/8652", "merged": true, "mergeCommit": {"oid": "74d8d16e3bce8162aef3330bbb5d7f8b1d020d8c"}, "closed": true, "closedAt": "2020-04-22T05:19:14Z", "author": {"login": "aureamunoz"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYjMNugFqTM5NTU2MzYwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ0u42AFqTM5NzM5OTIzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NTYzNjA0", "url": "https://github.com/quarkusio/quarkus/pull/8652#pullrequestreview-395563604", "createdAt": "2020-04-17T15:40:17Z", "commit": {"oid": "cc1012211f2eb7aef118b40945b28831d12cde98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc1012211f2eb7aef118b40945b28831d12cde98", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/cc1012211f2eb7aef118b40945b28831d12cde98", "committedDate": "2020-04-17T15:21:44Z", "message": "fix: set defaults values for Page number and size"}, "afterCommit": {"oid": "914aa15b2051807c68267e6a75fd519f7fbbbdfa", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/914aa15b2051807c68267e6a75fd519f7fbbbdfa", "committedDate": "2020-04-20T06:31:39Z", "message": "fix: set defaults values for Page number and size"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjQ2MTQx", "url": "https://github.com/quarkusio/quarkus/pull/8652#pullrequestreview-396246141", "createdAt": "2020-04-20T08:32:59Z", "commit": {"oid": "914aa15b2051807c68267e6a75fd519f7fbbbdfa"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODozMjo1OVrOGIJRxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODozMjo1OVrOGIJRxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE5Mzc5OA==", "bodyText": "I'm a bit worried that this will generate queries with paging all the time?\nEspecially in the context of https://github.com/quarkusio/quarkus/pull/8162/files coming.\nCan we make sure this is not the case?", "url": "https://github.com/quarkusio/quarkus/pull/8652#discussion_r411193798", "createdAt": "2020-04-20T08:32:59Z", "author": {"login": "gsmet"}, "path": "extensions/spring-data-jpa/runtime/src/main/java/io/quarkus/spring/data/runtime/TypesConverter.java", "diffHunk": "@@ -35,6 +35,12 @@ private TypesConverter() {\n     }\n \n     public static io.quarkus.panache.common.Page toPanachePage(org.springframework.data.domain.Pageable pageable) {\n-        return new io.quarkus.panache.common.Page(pageable.getPageNumber(), pageable.getPageSize());\n+        int pageNumber = 0;\n+        int pageSize = Integer.MAX_VALUE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "914aa15b2051807c68267e6a75fd519f7fbbbdfa"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "914aa15b2051807c68267e6a75fd519f7fbbbdfa", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/914aa15b2051807c68267e6a75fd519f7fbbbdfa", "committedDate": "2020-04-20T06:31:39Z", "message": "fix: set defaults values for Page number and size"}, "afterCommit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0", "committedDate": "2020-04-21T08:50:37Z", "message": "fix: avoid to generate queries with paging all the time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTMwODA0", "url": "https://github.com/quarkusio/quarkus/pull/8652#pullrequestreview-397130804", "createdAt": "2020-04-21T09:01:38Z", "commit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTowMTozOFrOGI633Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTowMTozOFrOGI633Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjAwNjM2NQ==", "bodyText": "How come this works? How is null handled?", "url": "https://github.com/quarkusio/quarkus/pull/8652#discussion_r412006365", "createdAt": "2020-04-21T09:01:38Z", "author": {"login": "geoand"}, "path": "extensions/spring-data-jpa/runtime/src/main/java/io/quarkus/spring/data/runtime/TypesConverter.java", "diffHunk": "@@ -35,6 +35,11 @@ private TypesConverter() {\n     }\n \n     public static io.quarkus.panache.common.Page toPanachePage(org.springframework.data.domain.Pageable pageable) {\n-        return new io.quarkus.panache.common.Page(pageable.getPageNumber(), pageable.getPageSize());\n+        if (pageable.isPaged()) {\n+            int pageNumber = pageable.getPageNumber();\n+            int pageSize = pageable.getPageSize();\n+            return new io.quarkus.panache.common.Page(pageNumber, pageSize);\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzE1NjY4", "url": "https://github.com/quarkusio/quarkus/pull/8652#pullrequestreview-397315668", "createdAt": "2020-04-21T13:13:22Z", "commit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMzoxMzoyMlrOGJFA2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMzoxMzoyMlrOGJFA2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE3MjUwNg==", "bodyText": "I think we need another method that return the make sure that the result  of songRepository.findAll(wholePage); is what we expect it to (that the page doesn't have a previous or next page).\nSomething like: https://github.com/quarkusio/quarkus/blob/master/integration-tests/spring-data-jpa/src/main/java/io/quarkus/it/spring/data/jpa/PersonResource.java#L135", "url": "https://github.com/quarkusio/quarkus/pull/8652#discussion_r412172506", "createdAt": "2020-04-21T13:13:22Z", "author": {"login": "geoand"}, "path": "integration-tests/spring-data-jpa/src/main/java/io/quarkus/it/spring/data/jpa/SongResource.java", "diffHunk": "@@ -22,6 +25,16 @@ public SongResource(SongRepository songRepository) {\n     @Path(\"/all\")\n     public List<Song> all() {\n         Pageable wholePage = Pageable.unpaged();\n-        return songRepository.findAll();\n+        Page<Song> all = songRepository.findAll(wholePage);\n+        return all.getContent();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/426f7026fb3a4a0fdeaa76ecfc4ae0345bb768b0", "committedDate": "2020-04-21T08:50:37Z", "message": "fix: avoid to generate queries with paging all the time"}, "afterCommit": {"oid": "65ebc3732cfc8cdae6def57ca6e8de3eeff965bb", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/65ebc3732cfc8cdae6def57ca6e8de3eeff965bb", "committedDate": "2020-04-21T14:17:22Z", "message": "refactor: add comment + refactor tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bf6efbe277b3587dc1c0928fcd57f52ece4a313", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/6bf6efbe277b3587dc1c0928fcd57f52ece4a313", "committedDate": "2020-04-21T14:36:49Z", "message": "fix: avoid to generate queries with paging all the time"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65ebc3732cfc8cdae6def57ca6e8de3eeff965bb", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/65ebc3732cfc8cdae6def57ca6e8de3eeff965bb", "committedDate": "2020-04-21T14:17:22Z", "message": "refactor: add comment + refactor tests"}, "afterCommit": {"oid": "6bf6efbe277b3587dc1c0928fcd57f52ece4a313", "author": {"user": {"login": "aureamunoz", "name": "Aurea Mu\u00f1oz Hern\u00e1ndez"}}, "url": "https://github.com/quarkusio/quarkus/commit/6bf6efbe277b3587dc1c0928fcd57f52ece4a313", "committedDate": "2020-04-21T14:36:49Z", "message": "fix: avoid to generate queries with paging all the time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3Mzk5MjMw", "url": "https://github.com/quarkusio/quarkus/pull/8652#pullrequestreview-397399230", "createdAt": "2020-04-21T14:40:28Z", "commit": {"oid": "6bf6efbe277b3587dc1c0928fcd57f52ece4a313"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4643, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}