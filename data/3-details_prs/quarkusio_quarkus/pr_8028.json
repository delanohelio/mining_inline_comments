{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNjEyNzAx", "number": 8028, "title": "Various Liquibase improvements", "bodyText": "Should hopefully fix #7956", "createdAt": "2020-03-20T16:01:06Z", "url": "https://github.com/quarkusio/quarkus/pull/8028", "merged": true, "mergeCommit": {"oid": "fba137f96a16f7625e3c49266c2a594ad663dbad"}, "closed": true, "closedAt": "2020-03-20T20:51:16Z", "author": {"login": "gsmet"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPisN-gH2gAyMzkxNjEyNzAxOmEzYmNkNWMyMmM0ZjA3NTdkNjk2YTcxMDdjYzIzN2I1NGMwOTVmNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPkXyvgFqTM3ODY5OTc2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a3bcd5c22c4f0757d696a7107cc237b54c095f4e", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/a3bcd5c22c4f0757d696a7107cc237b54c095f4e", "committedDate": "2020-03-20T16:00:01Z", "message": "Improve the javadoc of the native enableReports option."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1fdc157db0064ff89e121d3509affb5272d45ab", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/b1fdc157db0064ff89e121d3509affb5272d45ab", "committedDate": "2020-03-20T16:00:01Z", "message": "Liquibase - Debug logging improvement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3763e96e16f22f0ab42a45ffbbab753ae1622230", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/3763e96e16f22f0ab42a45ffbbab753ae1622230", "committedDate": "2020-03-20T16:00:01Z", "message": "Liquibase - Enable the reports in the native image generation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/4762140fdc8319db0bff06a96bda0047072db8ad", "committedDate": "2020-03-20T16:00:01Z", "message": "Liquibase - Only parse changelog files when generating native image\n\nPlus some additional cleanup.\n\nFixes #7956"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjEyMjg5", "url": "https://github.com/quarkusio/quarkus/pull/8028#pullrequestreview-378612289", "createdAt": "2020-03-20T16:01:41Z", "commit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjowMTo0MVrOF5ZyLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjowMTo0MVrOF5ZyLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTczNTU5OA==", "bodyText": "This is the gist of it: only analyzing the changelog in the native image case as we don't need it in other cases.", "url": "https://github.com/quarkusio/quarkus/pull/8028#discussion_r395735598", "createdAt": "2020-03-20T16:01:41Z", "author": {"login": "gsmet"}, "path": "extensions/liquibase/deployment/src/main/java/io/quarkus/liquibase/LiquibaseProcessor.java", "diffHunk": "@@ -54,26 +55,21 @@\n \n     private static final Logger LOGGER = Logger.getLogger(LiquibaseServiceLoader.class);\n \n-    /**\n-     * The change log parser factory singleton used for the liquibase service classpath scanner\n-     */\n-    private static final ChangeLogParserFactory CHANGE_LOG_PARSER_FACTORY = ChangeLogParserFactory.getInstance();\n-\n-    /**\n-     * Liquibase build time configuration\n-     */\n     LiquibaseBuildTimeConfig liquibaseBuildConfig;\n \n     @BuildStep\n     CapabilityBuildItem capability() {\n         return new CapabilityBuildItem(Capabilities.LIQUIBASE);\n     }\n \n-    @BuildStep\n-    void reflection(BuildProducer<ReflectiveClassBuildItem> reflective,\n-            BuildProducer<NativeImageResourceBuildItem> resourceProducer,\n-            BuildProducer<GeneratedResourceBuildItem> generatedResourceProducer,\n-            BuildProducer<RuntimeInitializedClassBuildItem> runtimeInitialized) {\n+    @BuildStep(onlyIf = NativeBuild.class, loadsApplicationClasses = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjEyODI3", "url": "https://github.com/quarkusio/quarkus/pull/8028#pullrequestreview-378612827", "createdAt": "2020-03-20T16:02:20Z", "commit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjowMjoyMFrOF5Z0Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjowMjoyMFrOF5Z0Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTczNjA3NA==", "bodyText": "This is where all the time is passed: it has a very flawed and slow scanning process.\nWe now only create that instance when building a native image.", "url": "https://github.com/quarkusio/quarkus/pull/8028#discussion_r395736074", "createdAt": "2020-03-20T16:02:20Z", "author": {"login": "gsmet"}, "path": "extensions/liquibase/deployment/src/main/java/io/quarkus/liquibase/LiquibaseProcessor.java", "diffHunk": "@@ -54,26 +55,21 @@\n \n     private static final Logger LOGGER = Logger.getLogger(LiquibaseServiceLoader.class);\n \n-    /**\n-     * The change log parser factory singleton used for the liquibase service classpath scanner\n-     */\n-    private static final ChangeLogParserFactory CHANGE_LOG_PARSER_FACTORY = ChangeLogParserFactory.getInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Njk5NzY2", "url": "https://github.com/quarkusio/quarkus/pull/8028#pullrequestreview-378699766", "createdAt": "2020-03-20T17:57:31Z", "commit": {"oid": "4762140fdc8319db0bff06a96bda0047072db8ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3766, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}