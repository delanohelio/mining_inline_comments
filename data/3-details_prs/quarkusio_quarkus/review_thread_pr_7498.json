{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxOTM3NzEx", "number": 7498, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQyMzoxNTo1N1rODkDGyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMjo1OToxNlrODkFPiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTI2MjE2OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQyMzoxNTo1N1rOFwLYRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMjo1ODozOFrOFwODOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2MjQwNw==", "bodyText": "Shouldn't this be defaultValue=false?", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386062407", "createdAt": "2020-02-29T23:15:57Z", "author": {"login": "machi1990"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA4NjgxNA==", "bodyText": "defaultValue=false would also work here, but would require a more in depth check in the isAnyPropertySet() method (line 303)", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386086814", "createdAt": "2020-03-01T08:13:00Z", "author": {"login": "Postremus"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2MjQwNw=="}, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNjE2OQ==", "bodyText": "I wouldn't do it this way. It would be better to create a separate parameter for this than to have properties which are boolean plus some other thing.", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386106169", "createdAt": "2020-03-01T12:58:38Z", "author": {"login": "dmlloyd"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA2MjQwNw=="}, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTQ5Mjg1OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwOToxMTozMVrOFwNGhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwOToxMTozMVrOFwNGhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5MDYyOQ==", "bodyText": "Please don't rely on the ordinal, it's prone to errors in case someone re-orders the enum constants down the road. I think simply checking for the two enum constants is good enough; or, if you'd want something more generic, add methods to the enum such as boolean logsSql() (returning true for TRUE and EXTENDED) and boolean logsParameters().", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386090629", "createdAt": "2020-03-01T09:11:31Z", "author": {"login": "gunnarmorling"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -642,9 +644,14 @@ private void handleHibernateORMWithNoPersistenceXml(\n                                 fetchSize.toString()));\n \n                 // Logging\n-                if (hibernateConfig.log.sql) {\n-                    desc.getProperties().setProperty(AvailableSettings.SHOW_SQL, \"true\");\n-                    desc.getProperties().setProperty(AvailableSettings.FORMAT_SQL, \"true\");\n+                if (hibernateConfig.log.sql.isPresent()) {\n+                    HibernateOrmConfig.HibernateOrmConfigLog.HibernateOrmConfigLogSqlValue value = hibernateConfig.log.sql\n+                            .get();\n+                    if (value.ordinal() >= HibernateOrmConfig.HibernateOrmConfigLog.HibernateOrmConfigLogSqlValue.TRUE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTQ5MzMxOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwOToxMjozMVrOFwNGxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwOToxMjozMVrOFwNGxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5MDY5NQ==", "bodyText": "Why is it optional, if there is a default value?", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386090695", "createdAt": "2020-03-01T09:12:31Z", "author": {"login": "gunnarmorling"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")\n+        public Optional<HibernateOrmConfigLogSqlValue> sql;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTYxMjI0OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMjo1OToxNlrOFwODUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDo1MzowNlrOFzHHyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNjE5NQ==", "bodyText": "Yeah definitely not.", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r386106195", "createdAt": "2020-03-01T12:59:16Z", "author": {"login": "dmlloyd"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")\n+        public Optional<HibernateOrmConfigLogSqlValue> sql;\n+\n+        public enum HibernateOrmConfigLogSqlValue {\n+            FALSE,\n+            TRUE,\n+            EXTENDED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzODM3OA==", "bodyText": "Done", "url": "https://github.com/quarkusio/quarkus/pull/7498#discussion_r389138378", "createdAt": "2020-03-06T20:53:06Z", "author": {"login": "Postremus"}, "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmConfig.java", "diffHunk": "@@ -279,10 +279,19 @@ public boolean isAnyPropertySet() {\n         /**\n          * Show SQL logs and format them nicely.\n          * <p>\n+         * true logs sql statements\n+         * extended logs sql statements and bind parameter values\n+         * <p>\n          * Setting it to true is obviously not recommended in production.\n          */\n-        @ConfigItem(defaultValue = \"false\")\n-        public boolean sql;\n+        @ConfigItem(defaultValueDocumentation = \"false\")\n+        public Optional<HibernateOrmConfigLogSqlValue> sql;\n+\n+        public enum HibernateOrmConfigLogSqlValue {\n+            FALSE,\n+            TRUE,\n+            EXTENDED;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNjE5NQ=="}, "originalCommit": {"oid": "0267ff4124b69c3dbcab4c8600d02983bd3e8edd"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 22, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}