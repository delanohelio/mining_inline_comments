{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NTYzMTUx", "number": 10886, "title": "gRPC code gen to generate health and reflection stubs", "bodyText": "fixes #10214", "createdAt": "2020-07-21T14:59:28Z", "url": "https://github.com/quarkusio/quarkus/pull/10886", "merged": true, "mergeCommit": {"oid": "05a0ec5580dc26bf96b680db004a79dc94b211a2"}, "closed": true, "closedAt": "2020-07-23T14:10:29Z", "author": {"login": "michalszynkiewicz"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3HomgAFqTQ1MjU1MzEwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3v5AJgFqTQ1NDE2MTEyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTUzMTAz", "url": "https://github.com/quarkusio/quarkus/pull/10886#pullrequestreview-452553103", "createdAt": "2020-07-21T15:05:36Z", "commit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTU1MjY2", "url": "https://github.com/quarkusio/quarkus/pull/10886#pullrequestreview-452555266", "createdAt": "2020-07-21T15:07:49Z", "commit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTowNzo0OVrOG08kYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNToxMDoxMVrOG08rMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MTQ4OQ==", "bodyText": "I would prefer if we could stick to the four spaces convention.\nIt's not consistent across all the source code but most of our pom files are this way.", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r458171489", "createdAt": "2020-07-21T15:07:49Z", "author": {"login": "gsmet"}, "path": "extensions/grpc/codegen/pom.xml", "diffHunk": "@@ -0,0 +1,131 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <artifactId>quarkus-grpc-parent</artifactId>\n+    <groupId>io.quarkus</groupId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-grpc-codegen</artifactId>\n+  <name>Quarkus - gRPC - Code Gen</name>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MjE2OQ==", "bodyText": "Shouldn't the version be in the BOM? Or there's a good reason to have them here?", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r458172169", "createdAt": "2020-07-21T15:08:47Z", "author": {"login": "gsmet"}, "path": "extensions/grpc/codegen/pom.xml", "diffHunk": "@@ -0,0 +1,131 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <artifactId>quarkus-grpc-parent</artifactId>\n+    <groupId>io.quarkus</groupId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-grpc-codegen</artifactId>\n+  <name>Quarkus - gRPC - Code Gen</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core-deployment</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-devtools-utilities</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>com.google.protobuf</groupId>\n+      <artifactId>protoc</artifactId>\n+      <classifier>linux-aarch_64</classifier>\n+      <type>exe</type>\n+      <version>${protoc.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MjYyMQ==", "bodyText": "spaces will work as is on Windows and macOS?", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r458172621", "createdAt": "2020-07-21T15:09:24Z", "author": {"login": "gsmet"}, "path": "extensions/grpc/codegen/src/main/java/io/quarkus/grpc/deployment/GrpcCodeGen.java", "diffHunk": "@@ -94,6 +95,14 @@ public boolean trigger(CodeGenContext context) throws CodeGenException {\n         return false;\n     }\n \n+    private String escapeWhitespace(String path) {\n+        if (OS.determineOS() == OS.LINUX) {\n+            return path.replaceAll(\" \", \"\\\\ \");\n+        } else {\n+            return path;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MzIzNA==", "bodyText": "Same here about the 4 spaces convention.", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r458173234", "createdAt": "2020-07-21T15:10:11Z", "author": {"login": "gsmet"}, "path": "extensions/grpc/stubs/pom.xml", "diffHunk": "@@ -0,0 +1,64 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <artifactId>quarkus-grpc-parent</artifactId>\n+    <groupId>io.quarkus</groupId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-grpc-stubs</artifactId>\n+  <name>Quarkus - gRPC - Stubs for health and reflection</name>\n+\n+  <dependencies>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/f8290666df99cdfabd17e17b62206231af71ee43", "committedDate": "2020-07-21T14:56:55Z", "message": "grpc code gen to generate health and reflection stubs\n\nfixes #10214"}, "afterCommit": {"oid": "5964ae0f7f3ad1fae54d2294c840f640b92827d8", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/5964ae0f7f3ad1fae54d2294c840f640b92827d8", "committedDate": "2020-07-22T08:11:28Z", "message": "grpc code gen to generate health and reflection stubs\n\nfixes #10214"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ecb3686f38177953d96bd29993a593407ae0a30", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/3ecb3686f38177953d96bd29993a593407ae0a30", "committedDate": "2020-07-22T08:20:05Z", "message": "grpc code gen to generate health and reflection stubs\n\nfixes #10214"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5964ae0f7f3ad1fae54d2294c840f640b92827d8", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/5964ae0f7f3ad1fae54d2294c840f640b92827d8", "committedDate": "2020-07-22T08:11:28Z", "message": "grpc code gen to generate health and reflection stubs\n\nfixes #10214"}, "afterCommit": {"oid": "3ecb3686f38177953d96bd29993a593407ae0a30", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/3ecb3686f38177953d96bd29993a593407ae0a30", "committedDate": "2020-07-22T08:20:05Z", "message": "grpc code gen to generate health and reflection stubs\n\nfixes #10214"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzOTcyNTk2", "url": "https://github.com/quarkusio/quarkus/pull/10886#pullrequestreview-453972596", "createdAt": "2020-07-23T09:34:04Z", "commit": {"oid": "3ecb3686f38177953d96bd29993a593407ae0a30"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwOTozNDowNFrOG2DFkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwOTozNTozOFrOG2DItA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMyNjg2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To do it, edit the `pom.xml` file to add the quarkus gRPC extension dependency and the JSR 305 (just under `<dependencies>`):\n          \n          \n            \n            To do it, edit the `pom.xml` file to add the Quarkus gRPC extension dependency and the JSR 305 (just under `<dependencies>`):", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r459326866", "createdAt": "2020-07-23T09:34:04Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/grpc-getting-started.adoc", "diffHunk": "@@ -308,3 +254,88 @@ Then, open http://localhost:8080/hello/quarkus in a browser, and you should get\n \n Like any other Quarkus applications, you can package it with: `mvn package`.\n You can also package the application into a native executable with: `mvn package -Pnative`.\n+\n+== Generating Java files from proto with protobuf-maven-plugin\n+\n+Alternatively to using Quarkus code generation to generate stubs for `proto` files, you can also use\n+`protobuf-maven-plugin` for this purpose.\n+To do it, edit the `pom.xml` file to add the quarkus gRPC extension dependency and the JSR 305 (just under `<dependencies>`):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ecb3686f38177953d96bd29993a593407ae0a30"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMyNzEwOA==", "bodyText": "You're talking about the JSR 305 but it's not in the extract below?", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r459327108", "createdAt": "2020-07-23T09:34:34Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/grpc-getting-started.adoc", "diffHunk": "@@ -308,3 +254,88 @@ Then, open http://localhost:8080/hello/quarkus in a browser, and you should get\n \n Like any other Quarkus applications, you can package it with: `mvn package`.\n You can also package the application into a native executable with: `mvn package -Pnative`.\n+\n+== Generating Java files from proto with protobuf-maven-plugin\n+\n+Alternatively to using Quarkus code generation to generate stubs for `proto` files, you can also use\n+`protobuf-maven-plugin` for this purpose.\n+To do it, edit the `pom.xml` file to add the quarkus gRPC extension dependency and the JSR 305 (just under `<dependencies>`):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMyNjg2Ng=="}, "originalCommit": {"oid": "3ecb3686f38177953d96bd29993a593407ae0a30"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMyNzY2OA==", "bodyText": "Maybe @cescoffier can check on macOS if you can put together a test case?", "url": "https://github.com/quarkusio/quarkus/pull/10886#discussion_r459327668", "createdAt": "2020-07-23T09:35:38Z", "author": {"login": "gsmet"}, "path": "extensions/grpc/codegen/src/main/java/io/quarkus/grpc/deployment/GrpcCodeGen.java", "diffHunk": "@@ -94,6 +95,14 @@ public boolean trigger(CodeGenContext context) throws CodeGenException {\n         return false;\n     }\n \n+    private String escapeWhitespace(String path) {\n+        if (OS.determineOS() == OS.LINUX) {\n+            return path.replaceAll(\" \", \"\\\\ \");\n+        } else {\n+            return path;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MjYyMQ=="}, "originalCommit": {"oid": "f8290666df99cdfabd17e17b62206231af71ee43"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbb79f107a3a8ac661618b9b3ba55c022d311c94", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbb79f107a3a8ac661618b9b3ba55c022d311c94", "committedDate": "2020-07-23T11:24:05Z", "message": "grpc docs fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "160c7bc0a43cdf1230d9b7612b524480c52fedba", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/160c7bc0a43cdf1230d9b7612b524480c52fedba", "committedDate": "2020-07-23T10:45:12Z", "message": "Update docs/src/main/asciidoc/grpc-getting-started.adoc\n\nCo-authored-by: Guillaume Smet <guillaume.smet@gmail.com>"}, "afterCommit": {"oid": "bbb79f107a3a8ac661618b9b3ba55c022d311c94", "author": {"user": {"login": "michalszynkiewicz", "name": "Micha\u0142 Szynkiewicz"}}, "url": "https://github.com/quarkusio/quarkus/commit/bbb79f107a3a8ac661618b9b3ba55c022d311c94", "committedDate": "2020-07-23T11:24:05Z", "message": "grpc docs fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTYxMTIx", "url": "https://github.com/quarkusio/quarkus/pull/10886#pullrequestreview-454161121", "createdAt": "2020-07-23T13:59:43Z", "commit": {"oid": "bbb79f107a3a8ac661618b9b3ba55c022d311c94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1086, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}