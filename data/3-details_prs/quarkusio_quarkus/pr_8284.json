{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1OTM1ODk1", "number": 8284, "title": "Allow AppArtifact to have more than one path", "bodyText": "Refactoring to allow AppArtifact to provide more than one path to represent its content. This is necessary, for example, to represent not yet packaged Gradle projects.\nFixes #7426\nFixes #7675\nFixes #8118\nFixes #8657\nFixes #7156\nAmong other things, I also introduced QuarkusBuildCloseablesBuildItem to easily collect Closeables that should be closed at the end of the augmentation. It looked like some app archives haven't actually been closed.", "createdAt": "2020-03-30T22:17:57Z", "url": "https://github.com/quarkusio/quarkus/pull/8284", "merged": true, "mergeCommit": {"oid": "f772aa1de07c067b44b4a52cbac3a1ab1a252515"}, "closed": true, "closedAt": "2020-04-20T00:32:24Z", "author": {"login": "aloubyansky"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS2JkvgFqTM4NDI3NDI1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZStacgFqTM5NjA3MjM4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0Mjc0MjU0", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-384274254", "createdAt": "2020-03-30T22:22:02Z", "commit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMjoyMjowM1rOF9-Zvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMjoyMjowM1rOF9-Zvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyOTg1NA==", "bodyText": "@stuartwdouglas please check this one. I am adding the root application artifact here. I think it's ok because all the deps are added here besides the root artifact. Full deployment deps above already contain the \"user deps\".", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400529854", "createdAt": "2020-03-30T22:22:03Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java", "diffHunk": "@@ -164,30 +161,23 @@ public synchronized QuarkusClassLoader getAugmentClassLoader() {\n             //we want a class loader that can load the deployment artifacts and all their dependencies, but not\n             //any of the runtime artifacts, or user classes\n             //this will load any deployment artifacts from the parent CL if they are present\n-            Set<AppArtifact> deploymentArtifacts = new HashSet<>();\n             for (AppDependency i : appModel.getFullDeploymentDeps()) {\n-                AppArtifactKey key = getKey(i);\n-                deploymentArtifacts.add(i.getArtifact());\n-                ClassPathElement element = getElement(i.getArtifact());\n-                builder.addElement(element);\n-                if (appModel.getParentFirstArtifacts().contains(key)) {\n-                    //we always load this from the parent if it is available, as this acts as a bridge between the running\n-                    //app and the dev mode code\n-                    builder.addParentFirstElement(element);\n-                }\n-            }\n-            for (AppDependency userDep : appModel.getUserDependencies()) {\n-                if (!deploymentArtifacts.contains(userDep.getArtifact())) {\n-                    AppArtifactKey key = getKey(userDep);\n-                    ClassPathElement element = getElement(userDep.getArtifact());\n-                    if (appModel.getParentFirstArtifacts().contains(key)) {\n-                        //this mostly happens when building quarkus itself\n+                processCpElement(i.getArtifact(), element -> {\n+                    builder.addElement(element);\n+                    if (appModel.getParentFirstArtifacts().contains(getKey(i))) {\n+                        //we always load this from the parent if it is available, as this acts as a bridge between the running\n+                        //app and the dev mode code\n                         builder.addParentFirstElement(element);\n                     }\n-                    builder.addElement(element);\n-                }\n+                });\n             }\n \n+            appModel.getAppArtifact().getPaths().forEach(p -> {\n+                if (Files.exists(p)) {\n+                    builder.addElement(ClassPathElement.fromPath(p));\n+                }\n+            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDExNjg0", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-384411684", "createdAt": "2020-03-31T05:28:38Z", "commit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNToyODozOFrOF-F23g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNTozODoxMVrOF-GBTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1MTk5OA==", "bodyText": "This needs to be thread safe.\nNormally we don't want mutable build items but for this use case this makes sense, as we only want these to be produced as side effects.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400651998", "createdAt": "2020-03-31T05:28:38Z", "author": {"login": "stuartwdouglas"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/builditem/QuarkusBuildCloseablesBuildItem.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package io.quarkus.deployment.builditem;\n+\n+import java.io.Closeable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.builder.item.SimpleBuildItem;\n+\n+public final class QuarkusBuildCloseablesBuildItem extends SimpleBuildItem implements Closeable {\n+\n+    private static final Logger log = Logger.getLogger(QuarkusBuildCloseablesBuildItem.class);\n+\n+    private final List<Closeable> closeables = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1MjE4Mg==", "bodyText": "This should probably catch Throwable, just to make sure everything gets closed.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400652182", "createdAt": "2020-03-31T05:29:12Z", "author": {"login": "stuartwdouglas"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/builditem/QuarkusBuildCloseablesBuildItem.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package io.quarkus.deployment.builditem;\n+\n+import java.io.Closeable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.builder.item.SimpleBuildItem;\n+\n+public final class QuarkusBuildCloseablesBuildItem extends SimpleBuildItem implements Closeable {\n+\n+    private static final Logger log = Logger.getLogger(QuarkusBuildCloseablesBuildItem.class);\n+\n+    private final List<Closeable> closeables = new ArrayList<>();\n+\n+    public <T extends Closeable> T add(T closeable) {\n+        closeables.add(closeable);\n+        return closeable;\n+    }\n+\n+    @Override\n+    public void close() {\n+        for (Closeable c : closeables) {\n+            try {\n+                c.close();\n+            } catch (IOException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1NDY3MA==", "bodyText": "This does not look right, this should be in the deployment CL instead.\nIn dev mode this CL is persistent, so if you include parts of the application then any changes will not be visible.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400654670", "createdAt": "2020-03-31T05:38:11Z", "author": {"login": "stuartwdouglas"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java", "diffHunk": "@@ -164,30 +161,23 @@ public synchronized QuarkusClassLoader getAugmentClassLoader() {\n             //we want a class loader that can load the deployment artifacts and all their dependencies, but not\n             //any of the runtime artifacts, or user classes\n             //this will load any deployment artifacts from the parent CL if they are present\n-            Set<AppArtifact> deploymentArtifacts = new HashSet<>();\n             for (AppDependency i : appModel.getFullDeploymentDeps()) {\n-                AppArtifactKey key = getKey(i);\n-                deploymentArtifacts.add(i.getArtifact());\n-                ClassPathElement element = getElement(i.getArtifact());\n-                builder.addElement(element);\n-                if (appModel.getParentFirstArtifacts().contains(key)) {\n-                    //we always load this from the parent if it is available, as this acts as a bridge between the running\n-                    //app and the dev mode code\n-                    builder.addParentFirstElement(element);\n-                }\n-            }\n-            for (AppDependency userDep : appModel.getUserDependencies()) {\n-                if (!deploymentArtifacts.contains(userDep.getArtifact())) {\n-                    AppArtifactKey key = getKey(userDep);\n-                    ClassPathElement element = getElement(userDep.getArtifact());\n-                    if (appModel.getParentFirstArtifacts().contains(key)) {\n-                        //this mostly happens when building quarkus itself\n+                processCpElement(i.getArtifact(), element -> {\n+                    builder.addElement(element);\n+                    if (appModel.getParentFirstArtifacts().contains(getKey(i))) {\n+                        //we always load this from the parent if it is available, as this acts as a bridge between the running\n+                        //app and the dev mode code\n                         builder.addParentFirstElement(element);\n                     }\n-                    builder.addElement(element);\n-                }\n+                });\n             }\n \n+            appModel.getAppArtifact().getPaths().forEach(p -> {\n+                if (Files.exists(p)) {\n+                    builder.addElement(ClassPathElement.fromPath(p));\n+                }\n+            });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyOTg1NA=="}, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDE1NjUz", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-384415653", "createdAt": "2020-03-31T05:41:09Z", "commit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNTo0MToxMFrOF-GErw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNTo0MToxMFrOF-GErw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1NTUzNQ==", "bodyText": "Do we actually want this? If we forget to update it we could have weird errors when upgrading.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400655535", "createdAt": "2020-03-31T05:41:10Z", "author": {"login": "stuartwdouglas"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/model/AppArtifact.java", "diffHunk": "@@ -12,7 +10,9 @@\n  */\n public class AppArtifact extends AppArtifactCoords implements Serializable {\n \n-    protected transient Path path;\n+    private static final long serialVersionUID = 1L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDE2MDg2", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-384416086", "createdAt": "2020-03-31T05:42:24Z", "commit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNTo0MjoyNFrOF-GGJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNTo0MjoyNFrOF-GGJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1NTkwOA==", "bodyText": "See my comments above.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400655908", "createdAt": "2020-03-31T05:42:24Z", "author": {"login": "stuartwdouglas"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/model/PathsCollection.java", "diffHunk": "@@ -0,0 +1,140 @@\n+package io.quarkus.bootstrap.model;\n+\n+import java.io.IOException;\n+import java.io.Serializable;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+public class PathsCollection implements Iterable<Path>, Serializable {\n+\n+    private static final long serialVersionUID = 1L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15fd623d459fd46b76481225d62d5f6938091c44"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDMzMzI1", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-384433325", "createdAt": "2020-03-31T06:27:36Z", "commit": {"oid": "2f1a2c95a8450801bf916552862772e819a9b4d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjoyNzozNlrOF-G_3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjoyNzozNlrOF-G_3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY3MDY4Ng==", "bodyText": "This is pretty ugly. I'm still waiting for the CI to see if it fixes it.", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r400670686", "createdAt": "2020-03-31T06:27:36Z", "author": {"login": "aloubyansky"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/JarResultBuildStep.java", "diffHunk": "@@ -234,17 +228,35 @@ private JarBuildItem buildUberJar(CurateOutcomeBuildItem curateOutcomeBuildItem,\n \n         runnerJar.toFile().setReadable(true, false);\n \n+        //for uberjars we move the original jar, so there is only a single jar in the output directory\n+        final Path standardJar = outputTargetBuildItem.getOutputDirectory()\n+                .resolve(outputTargetBuildItem.getBaseName() + \".jar\");\n+        final Path originalJar;\n+        if (standardJar.toFile().exists()) {\n+            originalJar = outputTargetBuildItem.getOutputDirectory()\n+                    .resolve(outputTargetBuildItem.getBaseName() + \".jar.original\");\n+        } else {\n+            originalJar = null;\n+        }\n+\n+        // this hack is necessary to wait for the original JAR to get closed\n+        closeablesBuildItem.add(new Closeable() {\n+            @Override\n+            public void close() throws IOException {\n+                if (standardJar.toFile().exists()) {\n+                    Files.deleteIfExists(originalJar);\n+                    Files.move(standardJar, originalJar);\n+                }\n+            }\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f1a2c95a8450801bf916552862772e819a9b4d6"}, "originalPosition": 119}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f1a2c95a8450801bf916552862772e819a9b4d6", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/2f1a2c95a8450801bf916552862772e819a9b4d6", "committedDate": "2020-03-31T06:24:50Z", "message": "When building an uber jar, rename the original jar in a Closeable to wait for the original jar to get closed"}, "afterCommit": {"oid": "6f6d34a28fcb4d7d9214eae78e124c5411c30959", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f6d34a28fcb4d7d9214eae78e124c5411c30959", "committedDate": "2020-03-31T08:16:06Z", "message": "When building an uber jar, rename the original jar in a Closeable to wait for the original jar to get closed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f6d34a28fcb4d7d9214eae78e124c5411c30959", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f6d34a28fcb4d7d9214eae78e124c5411c30959", "committedDate": "2020-03-31T08:16:06Z", "message": "When building an uber jar, rename the original jar in a Closeable to wait for the original jar to get closed"}, "afterCommit": {"oid": "640b8366835e2ca790ac52e1daebd838a2447daf", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/640b8366835e2ca790ac52e1daebd838a2447daf", "committedDate": "2020-03-31T08:44:37Z", "message": "When building an uber jar, rename the original jar in a Closeable to wait for the original jar to get closed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "640b8366835e2ca790ac52e1daebd838a2447daf", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/640b8366835e2ca790ac52e1daebd838a2447daf", "committedDate": "2020-03-31T08:44:37Z", "message": "When building an uber jar, rename the original jar in a Closeable to wait for the original jar to get closed"}, "afterCommit": {"oid": "d20784b8213938a80ef79687bf6fbe4f4fc24bc5", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/d20784b8213938a80ef79687bf6fbe4f4fc24bc5", "committedDate": "2020-03-31T11:07:55Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d20784b8213938a80ef79687bf6fbe4f4fc24bc5", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/d20784b8213938a80ef79687bf6fbe4f4fc24bc5", "committedDate": "2020-03-31T11:07:55Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects."}, "afterCommit": {"oid": "a9db93430045660098f9e5402b2889dc57e840cc", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/a9db93430045660098f9e5402b2889dc57e840cc", "committedDate": "2020-04-02T11:25:18Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9db93430045660098f9e5402b2889dc57e840cc", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/a9db93430045660098f9e5402b2889dc57e840cc", "committedDate": "2020-04-02T11:25:18Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}, "afterCommit": {"oid": "58c3d2dec4f68ac4dc1cc9ce78aabd1255cb6cdb", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/58c3d2dec4f68ac4dc1cc9ce78aabd1255cb6cdb", "committedDate": "2020-04-02T13:03:59Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58c3d2dec4f68ac4dc1cc9ce78aabd1255cb6cdb", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/58c3d2dec4f68ac4dc1cc9ce78aabd1255cb6cdb", "committedDate": "2020-04-02T13:03:59Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}, "afterCommit": {"oid": "449439b872ef37797a32d51080f95f82d7a08115", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/449439b872ef37797a32d51080f95f82d7a08115", "committedDate": "2020-04-02T15:04:25Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "449439b872ef37797a32d51080f95f82d7a08115", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/449439b872ef37797a32d51080f95f82d7a08115", "committedDate": "2020-04-02T15:04:25Z", "message": "Move the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}, "afterCommit": {"oid": "81fcc2812420ef10f6f188253664f1e082b66b41", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/81fcc2812420ef10f6f188253664f1e082b66b41", "committedDate": "2020-04-08T16:47:14Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\nMove the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81fcc2812420ef10f6f188253664f1e082b66b41", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/81fcc2812420ef10f6f188253664f1e082b66b41", "committedDate": "2020-04-08T16:47:14Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\nMove the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}, "afterCommit": {"oid": "d93b04af0b4fd5b24488bbd2156a81e2a81746a2", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/d93b04af0b4fd5b24488bbd2156a81e2a81746a2", "committedDate": "2020-04-09T09:21:50Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\nMove the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d93b04af0b4fd5b24488bbd2156a81e2a81746a2", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/d93b04af0b4fd5b24488bbd2156a81e2a81746a2", "committedDate": "2020-04-09T09:21:50Z", "message": "Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\nMove the JARs around when the Quarkus classloaders are closed to avoid locking issues on Windows"}, "afterCommit": {"oid": "b0acb8e4d0e67b92cd99523268dd586ec4ebc07e", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/b0acb8e4d0e67b92cd99523268dd586ec4ebc07e", "committedDate": "2020-03-28T20:53:25Z", "message": "more"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0acb8e4d0e67b92cd99523268dd586ec4ebc07e", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/b0acb8e4d0e67b92cd99523268dd586ec4ebc07e", "committedDate": "2020-03-28T20:53:25Z", "message": "more"}, "afterCommit": {"oid": "487220ba2a7ac0f4dd9adbbdb2943acd456aefac", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/487220ba2a7ac0f4dd9adbbdb2943acd456aefac", "committedDate": "2020-04-13T23:22:14Z", "message": "Workaround for URL.openConnection() for JARs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "487220ba2a7ac0f4dd9adbbdb2943acd456aefac", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/487220ba2a7ac0f4dd9adbbdb2943acd456aefac", "committedDate": "2020-04-13T23:22:14Z", "message": "Workaround for URL.openConnection() for JARs"}, "afterCommit": {"oid": "2b882d0dc52aabde8b909cba46ecf6339714748b", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/2b882d0dc52aabde8b909cba46ecf6339714748b", "committedDate": "2020-04-14T15:41:50Z", "message": "workaround to URL.openConnection() for JARs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b882d0dc52aabde8b909cba46ecf6339714748b", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/2b882d0dc52aabde8b909cba46ecf6339714748b", "committedDate": "2020-04-14T15:41:50Z", "message": "workaround to URL.openConnection() for JARs"}, "afterCommit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3e272b9c60f20dc59e9eabed2c7f6373401cb0e0", "committedDate": "2020-04-14T16:03:27Z", "message": "workaround to URL.openConnection() for JARs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjY2ODE0", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-393266814", "createdAt": "2020-04-14T20:22:46Z", "commit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyMjo0NlrOGFfeag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyMjo0NlrOGFfeag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMTc1NA==", "bodyText": "What's the benefit of having PathsCollection over List<Path> ?", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r408411754", "createdAt": "2020-04-14T20:22:46Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/ApplicationArchive.java", "diffHunk": "@@ -26,33 +29,72 @@\n      * jar, but rather a path to the root of the mounted {@link com.sun.nio.zipfs.ZipFileSystem}\n      *\n      * @return The archive root.\n+     * @deprecated in favor of {@link #getRootDirs()}\n      */\n+    @Deprecated\n     Path getArchiveRoot();\n \n     /**\n      *\n      * @return <code>true</code> if this archive is a jar\n+     * @deprecated does not appear to be used anywhere and now it shouldn't be\n      */\n+    @Deprecated\n     boolean isJarArchive();\n \n     /**\n      * If this archive is a jar file it will return the path to the jar file on the file system,\n      * otherwise it will return the directory that this corresponds to.\n+     *\n+     * @deprecated in favor of {@link #getPaths()}\n      */\n+    @Deprecated\n     Path getArchiveLocation();\n \n+    /**\n+     *\n+     * Returns paths representing the archive root directories. Note that every path in this collection\n+     * is guaranteed to be a directory. If the actual application archive appears to be a JAR,\n+     * this collection will include a path to the root of the mounted {@link java.nio.file.FileSystem}\n+     * created from the JAR.\n+     *\n+     * @return The archive root directories.\n+     */\n+    PathsCollection getRootDirs();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjY4Nzcz", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-393268773", "createdAt": "2020-04-14T20:25:45Z", "commit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyNTo0NlrOGFfk4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyNTo0NlrOGFfk4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMzQxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return rootDirs.iterator().next();\n          \n          \n            \n                    return rootDirs.getSinglePath();", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r408413411", "createdAt": "2020-04-14T20:25:46Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/ApplicationArchiveImpl.java", "diffHunk": "@@ -31,24 +36,30 @@ public IndexView getIndex() {\n     }\n \n     @Override\n+    @Deprecated\n     public Path getArchiveRoot() {\n-        return archiveRoot;\n+        return rootDirs.iterator().next();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjY4OTA1", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-393268905", "createdAt": "2020-04-14T20:25:58Z", "commit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyNTo1OFrOGFflRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDoyNTo1OFrOGFflRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMzUxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return paths.iterator().next();\n          \n          \n            \n                    return paths.getSinglePath();", "url": "https://github.com/quarkusio/quarkus/pull/8284#discussion_r408413511", "createdAt": "2020-04-14T20:25:58Z", "author": {"login": "gastaldi"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/ApplicationArchiveImpl.java", "diffHunk": "@@ -31,24 +36,30 @@ public IndexView getIndex() {\n     }\n \n     @Override\n+    @Deprecated\n     public Path getArchiveRoot() {\n-        return archiveRoot;\n+        return rootDirs.iterator().next();\n     }\n \n     @Override\n+    @Deprecated\n     public boolean isJarArchive() {\n         return jar;\n     }\n \n     @Override\n+    @Deprecated\n     public Path getArchiveLocation() {\n-        return archiveLocation;\n+        return paths.iterator().next();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e272b9c60f20dc59e9eabed2c7f6373401cb0e0", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3e272b9c60f20dc59e9eabed2c7f6373401cb0e0", "committedDate": "2020-04-14T16:03:27Z", "message": "workaround to URL.openConnection() for JARs"}, "afterCommit": {"oid": "1168e0c9cc2aed7867c6f0727f2bdfef829e2dd4", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/1168e0c9cc2aed7867c6f0727f2bdfef829e2dd4", "committedDate": "2020-04-14T22:14:27Z", "message": "Avoid SmallRye's PropertiesConfigSourceProvider that causes the JARs to stay locked on Windows"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85db40d6038ba230078c3ee00879b042af6d8d69", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/85db40d6038ba230078c3ee00879b042af6d8d69", "committedDate": "2020-04-15T10:06:06Z", "message": "Avoid URL.openStream() where possible"}, "afterCommit": {"oid": "7f1fa4ce6ce2eac8e8125ee18e9627d12b08fe96", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/7f1fa4ce6ce2eac8e8125ee18e9627d12b08fe96", "committedDate": "2020-04-15T14:27:02Z", "message": "Avoid URL.openStream() where possible"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f1fa4ce6ce2eac8e8125ee18e9627d12b08fe96", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/7f1fa4ce6ce2eac8e8125ee18e9627d12b08fe96", "committedDate": "2020-04-15T14:27:02Z", "message": "Avoid URL.openStream() where possible"}, "afterCommit": {"oid": "e6aa9661f520c31bc369659d6ffdf11f6fc40c00", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/e6aa9661f520c31bc369659d6ffdf11f6fc40c00", "committedDate": "2020-04-15T16:52:19Z", "message": "Avoid URL.openStream() where possible"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6aa9661f520c31bc369659d6ffdf11f6fc40c00", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/e6aa9661f520c31bc369659d6ffdf11f6fc40c00", "committedDate": "2020-04-15T16:52:19Z", "message": "Avoid URL.openStream() where possible"}, "afterCommit": {"oid": "3eb20dfbaa72fe669d2a87af277e3ff101782647", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3eb20dfbaa72fe669d2a87af277e3ff101782647", "committedDate": "2020-04-15T21:48:05Z", "message": "Avoid URL.openStream() where possible"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3eb20dfbaa72fe669d2a87af277e3ff101782647", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3eb20dfbaa72fe669d2a87af277e3ff101782647", "committedDate": "2020-04-15T21:48:05Z", "message": "Avoid URL.openStream() where possible"}, "afterCommit": {"oid": "3e69e5c58227b97a759c647445d64b2d07ee3b32", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3e69e5c58227b97a759c647445d64b2d07ee3b32", "committedDate": "2020-04-16T15:45:09Z", "message": "more"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e69e5c58227b97a759c647445d64b2d07ee3b32", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/3e69e5c58227b97a759c647445d64b2d07ee3b32", "committedDate": "2020-04-16T15:45:09Z", "message": "more"}, "afterCommit": {"oid": "cbd3279da1b68a9a161dbac2612f1ebe5df839ca", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/cbd3279da1b68a9a161dbac2612f1ebe5df839ca", "committedDate": "2020-04-16T21:10:33Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbd3279da1b68a9a161dbac2612f1ebe5df839ca", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/cbd3279da1b68a9a161dbac2612f1ebe5df839ca", "committedDate": "2020-04-16T21:10:33Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}, "afterCommit": {"oid": "a4cc04b431233b4f9afe13b0d73482646b9a690c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/a4cc04b431233b4f9afe13b0d73482646b9a690c", "committedDate": "2020-04-17T16:28:21Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NjE0NjU4", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-395614658", "createdAt": "2020-04-17T16:48:35Z", "commit": {"oid": "a4cc04b431233b4f9afe13b0d73482646b9a690c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4cc04b431233b4f9afe13b0d73482646b9a690c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/a4cc04b431233b4f9afe13b0d73482646b9a690c", "committedDate": "2020-04-17T16:28:21Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}, "afterCommit": {"oid": "64abca66110970e24dd3bc9b89c1893362a7bf6c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/64abca66110970e24dd3bc9b89c1893362a7bf6c", "committedDate": "2020-04-17T19:25:59Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64abca66110970e24dd3bc9b89c1893362a7bf6c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/64abca66110970e24dd3bc9b89c1893362a7bf6c", "committedDate": "2020-04-17T19:25:59Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}, "afterCommit": {"oid": "6f085a99b18c01eef5341abc6ab61f6411309ed1", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/6f085a99b18c01eef5341abc6ab61f6411309ed1", "committedDate": "2020-04-19T06:49:25Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f085a99b18c01eef5341abc6ab61f6411309ed1", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/6f085a99b18c01eef5341abc6ab61f6411309ed1", "committedDate": "2020-04-19T06:49:25Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}, "afterCommit": {"oid": "5f8a55ecd63e96ef3089671bb46354cdbd8a00fc", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/5f8a55ecd63e96ef3089671bb46354cdbd8a00fc", "committedDate": "2020-04-19T08:22:06Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7da2dce5b602b4c27bfda431d39a0898a95eb33c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/7da2dce5b602b4c27bfda431d39a0898a95eb33c", "committedDate": "2020-04-19T22:11:11Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f8a55ecd63e96ef3089671bb46354cdbd8a00fc", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/5f8a55ecd63e96ef3089671bb46354cdbd8a00fc", "committedDate": "2020-04-19T08:22:06Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}, "afterCommit": {"oid": "7da2dce5b602b4c27bfda431d39a0898a95eb33c", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/7da2dce5b602b4c27bfda431d39a0898a95eb33c", "committedDate": "2020-04-19T22:11:11Z", "message": "* Refactoring of AppArtifact to allow more than one path as its content. This is necessary, for example, to represent not yet packaged Gradle projects.\n\n* Introduce QuarkusBuildCloseablesBuildItem that can be used to collect various instances of Closeable that should be closed at the end of the build.\n\n* Moved the JAR renaming logic when uber-jar=true from the build step to BuildMojo to avoid running into JAR locking issue on Windows.\n\n* Introduce utility methods to read URLs as InputStreams in a way that does not lock JARs on Windows.\n\n* Avoid URL.openConnection() and URL.openStream() calls where possible to avoid JAR locking issues on Windows."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDcyMzg4", "url": "https://github.com/quarkusio/quarkus/pull/8284#pullrequestreview-396072388", "createdAt": "2020-04-19T23:02:06Z", "commit": {"oid": "7da2dce5b602b4c27bfda431d39a0898a95eb33c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4820, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}