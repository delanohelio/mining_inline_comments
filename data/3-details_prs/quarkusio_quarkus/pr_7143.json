{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNzA0Njkz", "number": 7143, "title": "Undertow: unused servlet initParams code, adds tests", "bodyText": "Two occurrences of\n- Map<String, String> params = new HashMap<>();\n- for (Map.Entry<String, String> i : params.entrySet()) {\n-     params.put(i.getKey(), i.getValue());\n- }\n\nare removed from UndertowBuildStep.\nNew tests covering init params and descriptions for Servlet and Filter were added, both for xml and annotation.\nping @stuartwdouglas", "createdAt": "2020-02-11T14:55:55Z", "url": "https://github.com/quarkusio/quarkus/pull/7143", "merged": true, "mergeCommit": {"oid": "6125dc4be567412f1e6ad94fe540b6ad4a0b9285"}, "closed": true, "closedAt": "2020-02-12T14:50:13Z", "author": {"login": "Karm"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDUQhQAFqTM1Njc5OTg1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDngulAFqTM1NzUxMjYxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2Nzk5ODU2", "url": "https://github.com/quarkusio/quarkus/pull/7143#pullrequestreview-356799856", "createdAt": "2020-02-11T16:23:59Z", "commit": {"oid": "68e77eb275934ac73fb99fed2890405a3b8f744e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyMzo1OVrOFoPvKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyMzo1OVrOFoPvKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NTE5NA==", "bodyText": "Actually I think it should be:\nif (servlet.getInitParam() != null) {\n   for (ParamValueMetaData pvm : servlet.getInitParam()) {\n      params.put(pvm.getParamName(), pvm.getParamValue());\n   }\n}\nAnd the for loop below can be removed completely", "url": "https://github.com/quarkusio/quarkus/pull/7143#discussion_r377745194", "createdAt": "2020-02-11T16:23:59Z", "author": {"login": "gastaldi"}, "path": "extensions/undertow/deployment/src/main/java/io/quarkus/undertow/deployment/UndertowBuildStep.java", "diffHunk": "@@ -329,16 +328,12 @@ public ServletDeploymentManagerBuildItem build(List<ServletBuildItem> servlets,\n         if (webMetaData.getServlets() != null) {\n             for (ServletMetaData servlet : webMetaData.getServlets()) {\n                 reflectiveClasses.accept(new ReflectiveClassBuildItem(false, false, servlet.getServletClass()));\n-                Map<String, String> params = new HashMap<>();\n-                for (Map.Entry<String, String> i : params.entrySet()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68e77eb275934ac73fb99fed2890405a3b8f744e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODAwNTYz", "url": "https://github.com/quarkusio/quarkus/pull/7143#pullrequestreview-356800563", "createdAt": "2020-02-11T16:24:48Z", "commit": {"oid": "68e77eb275934ac73fb99fed2890405a3b8f744e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyNDo0OFrOFoPxQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjoyNDo0OFrOFoPxQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NTczMA==", "bodyText": "This should be:\nif (filter.getInitParam() != null) {\n   for (ParamValueMetaData pvm : filter.getInitParam()) {\n      params.put(pvm.getParamName(), pvm.getParamValue());\n   }\n}\nAnd the for loop below can be removed", "url": "https://github.com/quarkusio/quarkus/pull/7143#discussion_r377745730", "createdAt": "2020-02-11T16:24:48Z", "author": {"login": "gastaldi"}, "path": "extensions/undertow/deployment/src/main/java/io/quarkus/undertow/deployment/UndertowBuildStep.java", "diffHunk": "@@ -402,16 +397,13 @@ public ServletDeploymentManagerBuildItem build(List<ServletBuildItem> servlets,\n         if (webMetaData.getFilters() != null) {\n             for (FilterMetaData filter : webMetaData.getFilters()) {\n                 reflectiveClasses.accept(new ReflectiveClassBuildItem(false, false, filter.getFilterClass()));\n-                Map<String, String> params = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68e77eb275934ac73fb99fed2890405a3b8f744e"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8", "author": {"user": {"login": "Karm", "name": "Michal Karm Babacek"}}, "url": "https://github.com/quarkusio/quarkus/commit/af0251cfff43b386814f5a44285dd515810996a8", "committedDate": "2020-02-12T11:10:19Z", "message": "Undertow: unused servlet initParams code, adds tests\n\nTwo occurences of\n\n```\n- Map<String, String> params = new HashMap<>();\n- for (Map.Entry<String, String> i : params.entrySet()) {\n-     params.put(i.getKey(), i.getValue());\n- }\n```\n\nare removed from UndertowBuildStep.\n\nNew tests covering init params and descriptions for Servlet and Filter were added, both for xml and annotation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68e77eb275934ac73fb99fed2890405a3b8f744e", "author": {"user": {"login": "Karm", "name": "Michal Karm Babacek"}}, "url": "https://github.com/quarkusio/quarkus/commit/68e77eb275934ac73fb99fed2890405a3b8f744e", "committedDate": "2020-02-11T14:53:48Z", "message": "Undertow: unused servlet initParams code, adds tests\n\nTwo occurences of\n\n```\n- Map<String, String> params = new HashMap<>();\n- for (Map.Entry<String, String> i : params.entrySet()) {\n-     params.put(i.getKey(), i.getValue());\n- }\n```\n\nare removed from UndertowBuildStep.\n\nNew tests covering init params and descriptions for Servlet and Filter were added, both for xml and annotation."}, "afterCommit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8", "author": {"user": {"login": "Karm", "name": "Michal Karm Babacek"}}, "url": "https://github.com/quarkusio/quarkus/commit/af0251cfff43b386814f5a44285dd515810996a8", "committedDate": "2020-02-12T11:10:19Z", "message": "Undertow: unused servlet initParams code, adds tests\n\nTwo occurences of\n\n```\n- Map<String, String> params = new HashMap<>();\n- for (Map.Entry<String, String> i : params.entrySet()) {\n-     params.put(i.getKey(), i.getValue());\n- }\n```\n\nare removed from UndertowBuildStep.\n\nNew tests covering init params and descriptions for Servlet and Filter were added, both for xml and annotation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MzczMzY1", "url": "https://github.com/quarkusio/quarkus/pull/7143#pullrequestreview-357373365", "createdAt": "2020-02-12T11:19:03Z", "commit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMToxOTowM1rOFoq1uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMToxOTo1MlrOFoq3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE4OTI0MQ==", "bodyText": "I am not sure it's a good idea to change the API here. Other extensions (external to core - camel?) may be using it", "url": "https://github.com/quarkusio/quarkus/pull/7143#discussion_r378189241", "createdAt": "2020-02-12T11:19:03Z", "author": {"login": "gastaldi"}, "path": "extensions/undertow/runtime/src/main/java/io/quarkus/undertow/runtime/UndertowDeploymentRecorder.java", "diffHunk": "@@ -221,16 +220,13 @@ public static SocketAddress getHttpAddress() {\n             Class<?> servletClass,\n             boolean asyncSupported,\n             int loadOnStartup,\n-            BeanContainer beanContainer, Map<String, String> initParams,\n+            BeanContainer beanContainer,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE4OTYxNg==", "bodyText": "Where are these init params used?", "url": "https://github.com/quarkusio/quarkus/pull/7143#discussion_r378189616", "createdAt": "2020-02-12T11:19:52Z", "author": {"login": "gastaldi"}, "path": "extensions/undertow/deployment/src/main/java/io/quarkus/undertow/deployment/UndertowBuildStep.java", "diffHunk": "@@ -499,7 +488,7 @@ public ServletDeploymentManagerBuildItem build(List<ServletBuildItem> servlets,\n             String filterClass = filter.getFilterClass();\n             reflectiveClasses.accept(new ReflectiveClassBuildItem(false, false, filterClass));\n             recorder.registerFilter(deployment, filter.getName(), context.classProxy(filterClass), filter.isAsyncSupported(),\n-                    bc.getValue(), filter.getInitParams(), filter.getInstanceFactory());\n+                    bc.getValue(), filter.getInstanceFactory());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NTEyNjE4", "url": "https://github.com/quarkusio/quarkus/pull/7143#pullrequestreview-357512618", "createdAt": "2020-02-12T14:49:54Z", "commit": {"oid": "af0251cfff43b386814f5a44285dd515810996a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4908, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}