{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1MDEzMjI3", "number": 14038, "title": "Improve error message for missing wrong/named parameters", "bodyText": "If a named parameter is not specified you currently get a runtime error message: \"Could not locate ordinal parameter [1], expecting one of []\". With this PR you will get a compile time error message instead: \"myMethod of Repository MyRepo is missing the named parameters [myParam], provided are [otherParam]. Ensure that the parameters are correctly annotated with @Param\".\nThe error messages of MethodNameParser did not include the Repository name which can make it hard to identify the source if you have many Repositories declaring the same method.", "createdAt": "2020-12-23T20:21:56Z", "url": "https://github.com/quarkusio/quarkus/pull/14038", "merged": true, "mergeCommit": {"oid": "03f8a2782bc057543279e12aa26a686af014e4fc"}, "closed": true, "closedAt": "2020-12-30T16:33:20Z", "author": {"login": "renegrob"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpFZsNgBqjQxNDU0NzcxNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpS4f8AFqTU1ODQ4ODg4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de9e89c09f8212fae05e66902761c9e5ad239e99", "author": {"user": {"login": "renegrob", "name": "Ren\u00e9 Grob"}}, "url": "https://github.com/quarkusio/quarkus/commit/de9e89c09f8212fae05e66902761c9e5ad239e99", "committedDate": "2020-12-23T20:14:26Z", "message": "Better error message for missing/wrong named parameters, include Repository name in error message"}, "afterCommit": {"oid": "7894ecd86fdd4581d3f4735b863bfd97a935f284", "author": {"user": {"login": "renegrob", "name": "Ren\u00e9 Grob"}}, "url": "https://github.com/quarkusio/quarkus/commit/7894ecd86fdd4581d3f4735b863bfd97a935f284", "committedDate": "2020-12-23T20:45:21Z", "message": "Better error message for missing/wrong named parameters, include Repository name in error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NDMyNzYw", "url": "https://github.com/quarkusio/quarkus/pull/14038#pullrequestreview-558432760", "createdAt": "2020-12-24T09:39:12Z", "commit": {"oid": "7894ecd86fdd4581d3f4735b863bfd97a935f284"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwOTozOToxM1rOILD4PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwOTozOToxM1rOILD4PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQ2ODc5Nw==", "bodyText": "I don't think we need the comment TBH - that comment is best left on the issue (as you have already done)", "url": "https://github.com/quarkusio/quarkus/pull/14038#discussion_r548468797", "createdAt": "2020-12-24T09:39:13Z", "author": {"login": "geoand"}, "path": "extensions/spring-data-jpa/deployment/src/main/java/io/quarkus/spring/data/deployment/generate/CustomQueryMethodsAdder.java", "diffHunk": "@@ -150,6 +153,19 @@ public void add(ClassCreator classCreator, FieldDescriptor entityClassFieldDescr\n             try (MethodCreator methodCreator = classCreator.getMethodCreator(method.name(), methodReturnTypeDotName.toString(),\n                     methodParameterTypesStr)) {\n \n+                Set<String> usedNamedParameters = extractNamedParameters(queryString);\n+                if (!usedNamedParameters.isEmpty()) {\n+                    Set<String> missingParameters = new LinkedHashSet<>(usedNamedParameters);\n+                    missingParameters.removeAll(namedParameterToIndex.keySet());\n+                    if (!missingParameters.isEmpty()) {\n+                        // better error message than \"Could not locate ordinal parameter [1], expecting one of []\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7894ecd86fdd4581d3f4735b863bfd97a935f284"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NDMzMjUw", "url": "https://github.com/quarkusio/quarkus/pull/14038#pullrequestreview-558433250", "createdAt": "2020-12-24T09:40:32Z", "commit": {"oid": "7894ecd86fdd4581d3f4735b863bfd97a935f284"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ec95a770ed0fba75800d5ae8aaa1ddd49d161c", "author": {"user": {"login": "renegrob", "name": "Ren\u00e9 Grob"}}, "url": "https://github.com/quarkusio/quarkus/commit/45ec95a770ed0fba75800d5ae8aaa1ddd49d161c", "committedDate": "2020-12-24T12:16:24Z", "message": "Better error message for missing/wrong named parameters, include Repository name in error message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7894ecd86fdd4581d3f4735b863bfd97a935f284", "author": {"user": {"login": "renegrob", "name": "Ren\u00e9 Grob"}}, "url": "https://github.com/quarkusio/quarkus/commit/7894ecd86fdd4581d3f4735b863bfd97a935f284", "committedDate": "2020-12-23T20:45:21Z", "message": "Better error message for missing/wrong named parameters, include Repository name in error message"}, "afterCommit": {"oid": "45ec95a770ed0fba75800d5ae8aaa1ddd49d161c", "author": {"user": {"login": "renegrob", "name": "Ren\u00e9 Grob"}}, "url": "https://github.com/quarkusio/quarkus/commit/45ec95a770ed0fba75800d5ae8aaa1ddd49d161c", "committedDate": "2020-12-24T12:16:24Z", "message": "Better error message for missing/wrong named parameters, include Repository name in error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NDg4ODg5", "url": "https://github.com/quarkusio/quarkus/pull/14038#pullrequestreview-558488889", "createdAt": "2020-12-24T12:28:08Z", "commit": {"oid": "45ec95a770ed0fba75800d5ae8aaa1ddd49d161c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4255, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}