{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNzg0ODY5", "number": 9040, "title": "Allow multiple tags for container-image", "bodyText": "Update container-image extension to allow passing multiple tags. If multiple tags are declared, and push is enabled, all tags will be pushed.\nIf no tags are specified, there will only be the application version\nI renamed property:\nquarkus.container-image.tag\n\nto\nquarkus.container-image.tags\n\nThis close #8643", "createdAt": "2020-05-04T07:36:15Z", "url": "https://github.com/quarkusio/quarkus/pull/9040", "merged": true, "mergeCommit": {"oid": "35ed807cd06174c6bf991849e31a4e7f8cda9ab9"}, "closed": true, "closedAt": "2020-05-11T10:21:27Z", "author": {"login": "glefloch"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd76n3gBqjMyOTg5OTU4MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgLGhIAFqTQwODk0OTY3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30d6a72175b69cbb24240bb5acbed9c9f0195d8e", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/30d6a72175b69cbb24240bb5acbed9c9f0195d8e", "committedDate": "2020-05-04T07:10:00Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/095d2ef88543fc933dd41253135b56750f0f9c1f", "committedDate": "2020-05-04T09:17:50Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODMzODI2", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-404833826", "createdAt": "2020-05-04T09:32:28Z", "commit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTozMjoyOVrOGP49jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTozMjoyOVrOGP49jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxNTA4NQ==", "bodyText": "Shouldn't this be containerImage.getAdditonalTags() considering we have most of the work done https://github.com/quarkusio/quarkus/pull/9040/files#diff-11cc649f490ec2882648b7efcf89760aR20-R22 and it seems like we are repeating ourselves?", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r419315085", "createdAt": "2020-05-04T09:32:29Z", "author": {"login": "machi1990"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -195,7 +198,10 @@ private ImageReference getImageReference(ContainerImageConfig containerImageConf\n             throw new IllegalArgumentException(\"The supplied container-image repository '\" + repository + \"' is invalid\");\n         }\n \n-        String tag = containerImageConfig.tag.orElse(applicationInfo.getVersion());\n+        List<String> tags = new ArrayList<>();\n+        containerImageConfig.tag.ifPresent(tags::add);\n+        tags.addAll(containerImageConfig.tags.orElse(Collections.singletonList(applicationInfo.getVersion())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDcyMjk1", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-405072295", "createdAt": "2020-05-04T15:01:12Z", "commit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTowMToxM1rOGQEbyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTowMToxM1rOGQEbyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUwMzA1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    additionalImageTags.stream().forEach(tag -> {\n          \n          \n            \n                    additionalImageTags.forEach(tag -> {", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r419503051", "createdAt": "2020-05-04T15:01:13Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -140,13 +152,30 @@ private void createContainerImage(ContainerImageConfig containerImageConfig, Doc\n                     throw dockerException(new String[] { \"-u\", containerImageConfig.username.get(), \"-p\", \"********\" });\n                 }\n             }\n-            String[] pushArgs = { \"push\", image };\n-            boolean pushSuccessful = ExecUtil.exec(\"docker\", pushArgs);\n-            if (!pushSuccessful) {\n-                throw dockerException(pushArgs);\n+\n+            List<String> imageToPush = new ArrayList<>(additionalImageTags);\n+            imageToPush.add(image);\n+            imageToPush.forEach(this::pushImage);\n+        }\n+    }\n+\n+    private void createAdditionalTags(String image, Set<String> additionalImageTags) {\n+        additionalImageTags.stream().forEach(tag -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDcyODAw", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-405072800", "createdAt": "2020-05-04T15:01:46Z", "commit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTowMTo0NlrOGQEdTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTowMTo0NlrOGQEdTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUwMzQzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    containerImage.getAdditionalTags().stream().forEach(containerizer::withAdditionalTag);\n          \n          \n            \n                    containerImage.getAdditionalTags().forEach(containerizer::withAdditionalTag);", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r419503439", "createdAt": "2020-05-04T15:01:46Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -108,16 +111,16 @@ public void buildFromNative(ContainerImageConfig containerImageConfig, JibConfig\n \n         JibContainerBuilder jibContainerBuilder = createContainerBuilderFromNative(containerImageConfig, jibConfig,\n                 nativeImage, containerImageLabels);\n-        JibContainer container = containerize(applicationInfo, containerImageConfig, jibContainerBuilder,\n+        containerize(applicationInfo, containerImageConfig, containerImage, jibContainerBuilder,\n                 pushRequest.isPresent());\n \n-        ImageReference targetImage = container.getTargetImage();\n         artifactResultProducer.produce(new ArtifactResultBuildItem(null, \"native-container\", Collections.emptyMap()));\n     }\n \n     private JibContainer containerize(ApplicationInfoBuildItem applicationInfo, ContainerImageConfig containerImageConfig,\n-            JibContainerBuilder jibContainerBuilder, boolean pushRequested) {\n+            ContainerImageInfoBuildItem containerImage, JibContainerBuilder jibContainerBuilder, boolean pushRequested) {\n         Containerizer containerizer = createContainerizer(containerImageConfig, applicationInfo, pushRequested);\n+        containerImage.getAdditionalTags().stream().forEach(containerizer::withAdditionalTag);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "095d2ef88543fc933dd41253135b56750f0f9c1f", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/095d2ef88543fc933dd41253135b56750f0f9c1f", "committedDate": "2020-05-04T09:17:50Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "8b363d44bd79fa51e36132433bd77f0060a4fb7b", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/8b363d44bd79fa51e36132433bd77f0060a4fb7b", "committedDate": "2020-05-05T06:55:26Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b363d44bd79fa51e36132433bd77f0060a4fb7b", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/8b363d44bd79fa51e36132433bd77f0060a4fb7b", "committedDate": "2020-05-05T06:55:26Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "fa3634078563a6f430e181fa6bd3a0a2ccf49e71", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/fa3634078563a6f430e181fa6bd3a0a2ccf49e71", "committedDate": "2020-05-08T19:25:22Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa3634078563a6f430e181fa6bd3a0a2ccf49e71", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/fa3634078563a6f430e181fa6bd3a0a2ccf49e71", "committedDate": "2020-05-08T19:25:22Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "d4d52c7f9c6a799b71d835563c4f2607d62ffa0c", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/d4d52c7f9c6a799b71d835563c4f2607d62ffa0c", "committedDate": "2020-05-09T09:18:20Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4d52c7f9c6a799b71d835563c4f2607d62ffa0c", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/d4d52c7f9c6a799b71d835563c4f2607d62ffa0c", "committedDate": "2020-05-09T09:18:20Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "7aa601b0004b52f8d83540fb489358e8fa54c05c", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/7aa601b0004b52f8d83540fb489358e8fa54c05c", "committedDate": "2020-05-09T09:25:32Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7aa601b0004b52f8d83540fb489358e8fa54c05c", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/7aa601b0004b52f8d83540fb489358e8fa54c05c", "committedDate": "2020-05-09T09:25:32Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/3993b5a298f4145823ddaa4df7c5a55100510c11", "committedDate": "2020-05-10T13:45:01Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk0OTQ5", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408894949", "createdAt": "2020-05-11T06:37:01Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozNzowMVrOGTOcYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozNzowMVrOGTOcYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxMjc3MQ==", "bodyText": "I would prefer if we used List instead of Set here. That would make it consistent with the rest of the codebase", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422812771", "createdAt": "2020-05-11T06:37:01Z", "author": {"login": "geoand"}, "path": "extensions/container-image/deployment/src/main/java/io/quarkus/container/image/deployment/ContainerImageConfig.java", "diffHunk": "@@ -26,6 +27,12 @@\n     @ConfigItem(defaultValue = \"${quarkus.application.version:latest}\")\n     public Optional<String> tag;\n \n+    /**\n+     * Additional tags of the container image.\n+     */\n+    @ConfigItem\n+    public Optional<Set<String>> additionalTags;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk2Mjc2", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408896276", "createdAt": "2020-05-11T06:39:51Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozOTo1MVrOGTOg6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozOTo1MVrOGTOg6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxMzkzMA==", "bodyText": "This check it's really necessary.", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422813930", "createdAt": "2020-05-11T06:39:51Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -131,9 +136,19 @@ private JibContainer containerize(ApplicationInfoBuildItem applicationInfo, Cont\n     }\n \n     private Containerizer createContainerizer(ContainerImageConfig containerImageConfig,\n+            ContainerImageInfoBuildItem containerImage,\n             ApplicationInfoBuildItem applicationInfo, boolean pushRequested) {\n         Containerizer containerizer;\n-        ImageReference imageReference = getImageReference(containerImageConfig, applicationInfo);\n+        ImageReference imageReference = getImageReference(containerImageConfig, containerImage, applicationInfo);\n+\n+        if (!containerImage.getAdditionalTags().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk3MjE3", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408897217", "createdAt": "2020-05-11T06:41:45Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MTo0NVrOGTOkOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MTo0NVrOGTOkOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxNDc3OQ==", "bodyText": "Can we get rid of the these lambdas please? We really try to avoid them in cases where they bring no real benefit (as they do have a small runtime cost), like here. A simple for loop would be just fine.", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422814779", "createdAt": "2020-05-11T06:41:45Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -131,9 +136,19 @@ private JibContainer containerize(ApplicationInfoBuildItem applicationInfo, Cont\n     }\n \n     private Containerizer createContainerizer(ContainerImageConfig containerImageConfig,\n+            ContainerImageInfoBuildItem containerImage,\n             ApplicationInfoBuildItem applicationInfo, boolean pushRequested) {\n         Containerizer containerizer;\n-        ImageReference imageReference = getImageReference(containerImageConfig, applicationInfo);\n+        ImageReference imageReference = getImageReference(containerImageConfig, containerImage, applicationInfo);\n+\n+        if (!containerImage.getAdditionalTags().isEmpty()) {\n+            containerImage.getAdditionalTags().forEach(additionalTag -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk3NDAz", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408897403", "createdAt": "2020-05-11T06:42:11Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MjoxMVrOGTOk4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MjoxMVrOGTOk4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxNDk0NQ==", "bodyText": "See my other comment about lambdas.", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422814945", "createdAt": "2020-05-11T06:42:11Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -109,14 +112,16 @@ public void buildFromNative(ContainerImageConfig containerImageConfig, JibConfig\n         JibContainerBuilder jibContainerBuilder = createContainerBuilderFromNative(containerImageConfig, jibConfig,\n                 nativeImage, containerImageLabels);\n \n-        containerize(applicationInfo, containerImageConfig, jibContainerBuilder, pushRequest.isPresent());\n+        containerize(applicationInfo, containerImageConfig, containerImage, jibContainerBuilder,\n+                pushRequest.isPresent());\n \n         artifactResultProducer.produce(new ArtifactResultBuildItem(null, \"native-container\", Collections.emptyMap()));\n     }\n \n     private JibContainer containerize(ApplicationInfoBuildItem applicationInfo, ContainerImageConfig containerImageConfig,\n-            JibContainerBuilder jibContainerBuilder, boolean pushRequested) {\n-        Containerizer containerizer = createContainerizer(containerImageConfig, applicationInfo, pushRequested);\n+            ContainerImageInfoBuildItem containerImage, JibContainerBuilder jibContainerBuilder, boolean pushRequested) {\n+        Containerizer containerizer = createContainerizer(containerImageConfig, containerImage, applicationInfo, pushRequested);\n+        containerImage.getAdditionalTags().forEach(containerizer::withAdditionalTag);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk3NjI2", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408897626", "createdAt": "2020-05-11T06:42:39Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MjozOVrOGTOlqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MjozOVrOGTOlqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxNTE0NQ==", "bodyText": "See my other comment about lambdas.", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422815145", "createdAt": "2020-05-11T06:42:39Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -140,13 +151,30 @@ private void createContainerImage(ContainerImageConfig containerImageConfig, Doc\n                     throw dockerException(new String[] { \"-u\", containerImageConfig.username.get(), \"-p\", \"********\" });\n                 }\n             }\n-            String[] pushArgs = { \"push\", image };\n-            boolean pushSuccessful = ExecUtil.exec(\"docker\", pushArgs);\n-            if (!pushSuccessful) {\n-                throw dockerException(pushArgs);\n+\n+            List<String> imageToPush = new ArrayList<>(additionalImageTags);\n+            imageToPush.add(image);\n+            imageToPush.forEach(this::pushImage);\n+        }\n+    }\n+\n+    private void createAdditionalTags(String image, List<String> additionalImageTags) {\n+        additionalImageTags.forEach(tag -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODk4MTIz", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408898123", "createdAt": "2020-05-11T06:43:39Z", "commit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MzozOVrOGTOnSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjo0MzozOVrOGTOnSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxNTU2MA==", "bodyText": "See my other comment about lambdas.", "url": "https://github.com/quarkusio/quarkus/pull/9040#discussion_r422815560", "createdAt": "2020-05-11T06:43:39Z", "author": {"login": "geoand"}, "path": "extensions/container-image/container-image-docker/deployment/src/main/java/io/quarkus/container/image/docker/deployment/DockerProcessor.java", "diffHunk": "@@ -140,13 +151,30 @@ private void createContainerImage(ContainerImageConfig containerImageConfig, Doc\n                     throw dockerException(new String[] { \"-u\", containerImageConfig.username.get(), \"-p\", \"********\" });\n                 }\n             }\n-            String[] pushArgs = { \"push\", image };\n-            boolean pushSuccessful = ExecUtil.exec(\"docker\", pushArgs);\n-            if (!pushSuccessful) {\n-                throw dockerException(pushArgs);\n+\n+            List<String> imageToPush = new ArrayList<>(additionalImageTags);\n+            imageToPush.add(image);\n+            imageToPush.forEach(this::pushImage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ccb8da249bf5ac6aa8db024debf6b284a50db4", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/b5ccb8da249bf5ac6aa8db024debf6b284a50db4", "committedDate": "2020-05-11T07:34:14Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3993b5a298f4145823ddaa4df7c5a55100510c11", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/3993b5a298f4145823ddaa4df7c5a55100510c11", "committedDate": "2020-05-10T13:45:01Z", "message": "Allow multiple tags for container-image"}, "afterCommit": {"oid": "b5ccb8da249bf5ac6aa8db024debf6b284a50db4", "author": {"user": {"login": "glefloch", "name": "Guillaume Le Floch"}}, "url": "https://github.com/quarkusio/quarkus/commit/b5ccb8da249bf5ac6aa8db024debf6b284a50db4", "committedDate": "2020-05-11T07:34:14Z", "message": "Allow multiple tags for container-image"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTQ5Njc3", "url": "https://github.com/quarkusio/quarkus/pull/9040#pullrequestreview-408949677", "createdAt": "2020-05-11T08:07:44Z", "commit": {"oid": "b5ccb8da249bf5ac6aa8db024debf6b284a50db4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3483, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}