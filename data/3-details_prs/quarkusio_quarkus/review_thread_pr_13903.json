{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwMzkyMDQz", "number": 13903, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxMDoyMlrOFF1JuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxMDoyMlrOFF1JuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNjU4MDQwOnYy", "diffSide": "RIGHT", "path": "independent-projects/resteasy-reactive/server/vertx/src/main/java/org/jboss/resteasy/reactive/server/vertx/ResteasyReactiveOutputStream.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxMDoyMlrOIGiPxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwNjozODoyOVrOIG1CwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMzQ2Mw==", "bodyText": "This double write does not look correct, although I don't think the code path will actually be used at the moment as for now we only allocate direct buffers.", "url": "https://github.com/quarkusio/quarkus/pull/13903#discussion_r543723463", "createdAt": "2020-12-15T22:10:22Z", "author": {"login": "stuartwdouglas"}, "path": "independent-projects/resteasy-reactive/server/vertx/src/main/java/org/jboss/resteasy/reactive/server/vertx/ResteasyReactiveOutputStream.java", "diffHunk": "@@ -87,8 +87,12 @@ public void write(ByteBuf data, boolean last) throws IOException {\n                     if (overflow == null) {\n                         overflow = new ByteArrayOutputStream();\n                     }\n-                    overflow.write(data.array(), data.arrayOffset() + data.readerIndex(),\n-                            data.arrayOffset() + data.writerIndex());\n+                    if (data.hasArray()) {\n+                        overflow.write(data.array());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aeab968c0f69926e44290c332bf5323a8f9ed3fc"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyOTQ2Ng==", "bodyText": "Oops! The first write is left over... Let me fix it", "url": "https://github.com/quarkusio/quarkus/pull/13903#discussion_r544029466", "createdAt": "2020-12-16T06:36:09Z", "author": {"login": "geoand"}, "path": "independent-projects/resteasy-reactive/server/vertx/src/main/java/org/jboss/resteasy/reactive/server/vertx/ResteasyReactiveOutputStream.java", "diffHunk": "@@ -87,8 +87,12 @@ public void write(ByteBuf data, boolean last) throws IOException {\n                     if (overflow == null) {\n                         overflow = new ByteArrayOutputStream();\n                     }\n-                    overflow.write(data.array(), data.arrayOffset() + data.readerIndex(),\n-                            data.arrayOffset() + data.writerIndex());\n+                    if (data.hasArray()) {\n+                        overflow.write(data.array());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMzQ2Mw=="}, "originalCommit": {"oid": "aeab968c0f69926e44290c332bf5323a8f9ed3fc"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAzMTQyNA==", "bodyText": "Fixed", "url": "https://github.com/quarkusio/quarkus/pull/13903#discussion_r544031424", "createdAt": "2020-12-16T06:38:29Z", "author": {"login": "geoand"}, "path": "independent-projects/resteasy-reactive/server/vertx/src/main/java/org/jboss/resteasy/reactive/server/vertx/ResteasyReactiveOutputStream.java", "diffHunk": "@@ -87,8 +87,12 @@ public void write(ByteBuf data, boolean last) throws IOException {\n                     if (overflow == null) {\n                         overflow = new ByteArrayOutputStream();\n                     }\n-                    overflow.write(data.array(), data.arrayOffset() + data.readerIndex(),\n-                            data.arrayOffset() + data.writerIndex());\n+                    if (data.hasArray()) {\n+                        overflow.write(data.array());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMzQ2Mw=="}, "originalCommit": {"oid": "aeab968c0f69926e44290c332bf5323a8f9ed3fc"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4551, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}