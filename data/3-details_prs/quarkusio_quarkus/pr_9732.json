{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NzI0MDI0", "number": 9732, "title": "Reactive db2 client", "bodyText": "Fixes #9457", "createdAt": "2020-06-02T17:25:06Z", "url": "https://github.com/quarkusio/quarkus/pull/9732", "merged": true, "mergeCommit": {"oid": "520103fbf9c725d58aa8625027fe598aef1229b7"}, "closed": true, "closedAt": "2020-06-04T16:00:20Z", "author": {"login": "aguibert"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnaNxPAFqTQyMzAwMTkzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn-fWSgBqjM0MDY5ODc0MDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDAxOTMy", "url": "https://github.com/quarkusio/quarkus/pull/9732#pullrequestreview-423001932", "createdAt": "2020-06-02T19:41:42Z", "commit": {"oid": "ab1a50222ed2b495bd26a37bc25ce9ea2cd8c1e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTo0MTo0MlrOGeBXNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTo0MTo0MlrOGeBXNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEzMjc4OQ==", "bodyText": "IBM and Red Hat both :)\nLooks correct, but I believe we generally don't have such notices? I see the other reactive integration tests have them, but not other module.", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434132789", "createdAt": "2020-06-02T19:41:42Z", "author": {"login": "Sanne"}, "path": "integration-tests/reactive-db2-client/pom.xml", "diffHunk": "@@ -0,0 +1,265 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright 2020 IBM Corporation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab1a50222ed2b495bd26a37bc25ce9ea2cd8c1e5"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDAyODk5", "url": "https://github.com/quarkusio/quarkus/pull/9732#pullrequestreview-423002899", "createdAt": "2020-06-02T19:43:11Z", "commit": {"oid": "ab1a50222ed2b495bd26a37bc25ce9ea2cd8c1e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "629879da440b7a203c78f943066b315ab38c7b09", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/629879da440b7a203c78f943066b315ab38c7b09", "committedDate": "2020-06-02T19:59:01Z", "message": "Add reactive DB2 client to CI jobs"}, "afterCommit": {"oid": "bab9a32ec1efe81787111c919d44edc51804130c", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/bab9a32ec1efe81787111c919d44edc51804130c", "committedDate": "2020-06-02T20:23:21Z", "message": "Add reactive DB2 client to CI jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bab9a32ec1efe81787111c919d44edc51804130c", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/bab9a32ec1efe81787111c919d44edc51804130c", "committedDate": "2020-06-02T20:23:21Z", "message": "Add reactive DB2 client to CI jobs"}, "afterCommit": {"oid": "61676922c539b8248d9cd7fa941034eab2094d62", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/61676922c539b8248d9cd7fa941034eab2094d62", "committedDate": "2020-06-02T23:25:05Z", "message": "Add reactive DB2 client to CI jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fdb3f71dfaf965881980212f78da7c5cd4c5865d", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/fdb3f71dfaf965881980212f78da7c5cd4c5865d", "committedDate": "2020-06-03T02:12:10Z", "message": "Experimental changes to get CI passing"}, "afterCommit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/07492d51146d85b3478dd2f4d6ce02cdcda7ae24", "committedDate": "2020-06-03T03:16:08Z", "message": "Add reactive DB2 client to CI jobs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjkyMjkw", "url": "https://github.com/quarkusio/quarkus/pull/9732#pullrequestreview-423292290", "createdAt": "2020-06-03T07:36:37Z", "commit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzozNjozN1rOGePrsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0MzowM1rOGeP5Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM2NzQwOQ==", "bodyText": "Why are surefire tests skipped?", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434367409", "createdAt": "2020-06-03T07:36:37Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-db2-client/deployment/pom.xml", "diffHunk": "@@ -0,0 +1,63 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-reactive-db2-client-parent</artifactId>\n+        <version>999-SNAPSHOT</version>\n+        <relativePath>../</relativePath>\n+    </parent>\n+\n+    <artifactId>quarkus-reactive-db2-client-deployment</artifactId>\n+\n+    <name>Quarkus - Reactive DB2 Client - Deployment</name>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-reactive-datasource-deployment</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-vertx-deployment</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-credentials-deployment</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-reactive-db2-client</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-smallrye-health-spi</artifactId>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <annotationProcessorPaths>\n+                        <path>\n+                            <groupId>io.quarkus</groupId>\n+                            <artifactId>quarkus-extension-processor</artifactId>\n+                            <version>${project.version}</version>\n+                        </path>\n+                    </annotationProcessorPaths>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM2ODQ2Ng==", "bodyText": "Importing the smallrye-mutiny-vertx-db2-client should bring vertx-db2-client", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434368466", "createdAt": "2020-06-03T07:38:32Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-db2-client/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,67 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-reactive-db2-client-parent</artifactId>\n+        <version>999-SNAPSHOT</version>\n+        <relativePath>../</relativePath>\n+    </parent>\n+\n+    <artifactId>quarkus-reactive-db2-client</artifactId>\n+\n+    <name>Quarkus - Reactive DB2 Client - Runtime</name>\n+    <description>Connect to the DB2 database using the reactive pattern</description>\n+    <dependencies>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-reactive-datasource</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-vertx</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.vertx</groupId>\n+            <artifactId>vertx-db2-client</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM2OTYxNg==", "bodyText": "Probably more a question for @mkouba, but what's the reason to not use a regular @Inject or an Instance?", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434369616", "createdAt": "2020-06-03T07:40:47Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-db2-client/runtime/src/main/java/io/quarkus/reactive/db2/client/runtime/health/ReactiveDB2DataSourceHealthCheck.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package io.quarkus.reactive.db2.client.runtime.health;\n+\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+\n+import org.eclipse.microprofile.health.HealthCheck;\n+import org.eclipse.microprofile.health.HealthCheckResponse;\n+import org.eclipse.microprofile.health.HealthCheckResponseBuilder;\n+import org.eclipse.microprofile.health.Readiness;\n+\n+import io.quarkus.arc.Arc;\n+import io.vertx.db2client.DB2Pool;\n+\n+@Readiness\n+@ApplicationScoped\n+public class ReactiveDB2DataSourceHealthCheck implements HealthCheck {\n+    private DB2Pool db2Pool;\n+\n+    @PostConstruct\n+    protected void init() {\n+        db2Pool = Arc.container().instance(DB2Pool.class).get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MDI1Mw==", "bodyText": "Using the Mutiny version would simplify this to:\npool.query(...).await().atMost(Duration.ofSeconds(10))", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434370253", "createdAt": "2020-06-03T07:42:00Z", "author": {"login": "cescoffier"}, "path": "extensions/reactive-db2-client/runtime/src/main/java/io/quarkus/reactive/db2/client/runtime/health/ReactiveDB2DataSourceHealthCheck.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package io.quarkus.reactive.db2.client.runtime.health;\n+\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+\n+import org.eclipse.microprofile.health.HealthCheck;\n+import org.eclipse.microprofile.health.HealthCheckResponse;\n+import org.eclipse.microprofile.health.HealthCheckResponseBuilder;\n+import org.eclipse.microprofile.health.Readiness;\n+\n+import io.quarkus.arc.Arc;\n+import io.vertx.db2client.DB2Pool;\n+\n+@Readiness\n+@ApplicationScoped\n+public class ReactiveDB2DataSourceHealthCheck implements HealthCheck {\n+    private DB2Pool db2Pool;\n+\n+    @PostConstruct\n+    protected void init() {\n+        db2Pool = Arc.container().instance(DB2Pool.class).get();\n+    }\n+\n+    @Override\n+    public HealthCheckResponse call() {\n+        HealthCheckResponseBuilder builder = HealthCheckResponse.named(\"Reactive DB2 connection health check\").up();\n+\n+        try {\n+            CompletableFuture<Void> databaseConnectionAttempt = new CompletableFuture<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07492d51146d85b3478dd2f4d6ce02cdcda7ae24"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MDgyNg==", "bodyText": "I would be in favor of removing the header completely if possible.", "url": "https://github.com/quarkusio/quarkus/pull/9732#discussion_r434370826", "createdAt": "2020-06-03T07:43:03Z", "author": {"login": "cescoffier"}, "path": "integration-tests/reactive-db2-client/pom.xml", "diffHunk": "@@ -0,0 +1,265 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright 2020 IBM Corporation", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEzMjc4OQ=="}, "originalCommit": {"oid": "ab1a50222ed2b495bd26a37bc25ce9ea2cd8c1e5"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NDM4MTAy", "url": "https://github.com/quarkusio/quarkus/pull/9732#pullrequestreview-424438102", "createdAt": "2020-06-04T13:25:59Z", "commit": {"oid": "6f9866b21fa86bf1067c86f17d84f40dfa61c404"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da301af2c745dec6c733035fcc7ff3e5f56185db", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/da301af2c745dec6c733035fcc7ff3e5f56185db", "committedDate": "2020-06-04T13:57:14Z", "message": "Initial copy of the reactive DB2 client extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa81a609cf528dfcfceab17820ed31f857c6b198", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/aa81a609cf528dfcfceab17820ed31f857c6b198", "committedDate": "2020-06-04T13:57:15Z", "message": "Add Mutiny integration to reactive-db2-client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f43a2304e6b3940483872083d04c7b1b8ed911f", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/1f43a2304e6b3940483872083d04c7b1b8ed911f", "committedDate": "2020-06-04T13:57:15Z", "message": "Add integration test module for reactive DB2 client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ef374d2d7909a293a46f1ca46778a6cc2462714", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/7ef374d2d7909a293a46f1ca46778a6cc2462714", "committedDate": "2020-06-04T13:57:15Z", "message": "Add documentation for reactive DB2 client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39c6adc99fbbff942c4f1af3abd78b57c25f1b7c", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/39c6adc99fbbff942c4f1af3abd78b57c25f1b7c", "committedDate": "2020-06-04T13:57:15Z", "message": "Add reactive DB2 client to CI jobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c96108bbc10b76bb24f860526b0d7f8e83e62d48", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/c96108bbc10b76bb24f860526b0d7f8e83e62d48", "committedDate": "2020-06-04T13:57:15Z", "message": "Address review comments from Clement"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f9866b21fa86bf1067c86f17d84f40dfa61c404", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/6f9866b21fa86bf1067c86f17d84f40dfa61c404", "committedDate": "2020-06-03T14:27:45Z", "message": "Address review comments from Clement"}, "afterCommit": {"oid": "c96108bbc10b76bb24f860526b0d7f8e83e62d48", "author": {"user": {"login": "aguibert", "name": "Andrew Guibert"}}, "url": "https://github.com/quarkusio/quarkus/commit/c96108bbc10b76bb24f860526b0d7f8e83e62d48", "committedDate": "2020-06-04T13:57:15Z", "message": "Address review comments from Clement"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4412, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}