{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMzE0NzE4", "number": 6455, "title": "Fix for #6442 quarkusDev not working in multi module projects", "bodyText": "Fixes #6442\nThe fix is to register if a dependency is a Project Component and ignore it if it is as it will be added to the classpath later on", "createdAt": "2020-01-08T07:12:27Z", "url": "https://github.com/quarkusio/quarkus/pull/6455", "merged": true, "mergeCommit": {"oid": "6fde618dd1f367bde575329d67e6dce30508e35e"}, "closed": true, "closedAt": "2020-01-09T09:25:05Z", "author": {"login": "tobad357"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4QiQPgFqTMzOTY5MTIyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4XZN_gFqTMzOTk1NzcyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NjkxMjIw", "url": "https://github.com/quarkusio/quarkus/pull/6455#pullrequestreview-339691220", "createdAt": "2020-01-08T07:50:34Z", "commit": {"oid": "e4a1dc32a1aaf8791fa521b192c638dac35208ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwNzo1MDozNVrOFbO2kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwNzo1MDozNVrOFbO2kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA5OTIxOQ==", "bodyText": "Should this one be debug instead of info?", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364099219", "createdAt": "2020-01-08T07:50:35Z", "author": {"login": "gsmet"}, "path": "devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java", "diffHunk": "@@ -242,7 +242,11 @@ public void startDev() {\n                         e);\n             }\n             for (AppDependency appDep : appModel.getAllDependencies()) {\n-                addToClassPaths(classPathManifest, context, appDep.getArtifact().getPath().toFile());\n+                if (!appDep.getArtifact().isSubModule()) {\n+                    addToClassPaths(classPathManifest, context, appDep.getArtifact().getPath().toFile());\n+                } else {\n+                    getLogger().info(\"Ignoring {} as it is a project dependency\", appDep);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4a1dc32a1aaf8791fa521b192c638dac35208ad"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5ODM4MTAy", "url": "https://github.com/quarkusio/quarkus/pull/6455#pullrequestreview-339838102", "createdAt": "2020-01-08T12:42:25Z", "commit": {"oid": "6e0b4a10664be507c6513348d0f029d06b375dbe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMjo0MjoyNVrOFbVuCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMjo0MjoyNVrOFbVuCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMTcyMQ==", "bodyText": "You can also replace this snippet with appArtifact.setSubModule(id instanceof ProjectComponentIdentifier) \ud83d\ude09", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364211721", "createdAt": "2020-01-08T12:42:25Z", "author": {"login": "gastaldi"}, "path": "devtools/gradle/src/main/java/io/quarkus/gradle/AppModelGradleResolver.java", "diffHunk": "@@ -192,6 +194,10 @@ private ModuleIdentifier getModuleId(ResolvedArtifact a) {\n     private AppDependency toAppDependency(ResolvedArtifact a) {\n         final String[] split = a.getModuleVersion().toString().split(\":\");\n         final AppArtifact appArtifact = new AppArtifact(split[0], split[1], split[2]);\n+        final ComponentIdentifier id = a.getId().getComponentIdentifier();\n+        if (id instanceof ProjectComponentIdentifier) {\n+            appArtifact.setSubModule(true);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0b4a10664be507c6513348d0f029d06b375dbe"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e0b4a10664be507c6513348d0f029d06b375dbe", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/6e0b4a10664be507c6513348d0f029d06b375dbe", "committedDate": "2020-01-08T12:30:49Z", "message": "Change logging to debug"}, "afterCommit": {"oid": "15bbb0ff36bad4e0839e35bcb35a96ed092ac570", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/15bbb0ff36bad4e0839e35bcb35a96ed092ac570", "committedDate": "2020-01-08T12:42:07Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdf6ba3c6d0ed4133c00b21cf2302e183c160015", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/bdf6ba3c6d0ed4133c00b21cf2302e183c160015", "committedDate": "2020-01-08T12:44:18Z", "message": "Simplify check if ProjectComponentIdentifier"}, "afterCommit": {"oid": "be74264edf9f15108dcce8b84658b9317e83ff48", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/be74264edf9f15108dcce8b84658b9317e83ff48", "committedDate": "2020-01-08T12:45:02Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug\n\nSimplify check if ProjectComponentIdentifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5ODQwMTE0", "url": "https://github.com/quarkusio/quarkus/pull/6455#pullrequestreview-339840114", "createdAt": "2020-01-08T12:46:37Z", "commit": {"oid": "be74264edf9f15108dcce8b84658b9317e83ff48"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMjo0NjozN1rOFbVz2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMjo0NjozN1rOFbVz2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMzIwOQ==", "bodyText": "I think this import is unused now?", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364213209", "createdAt": "2020-01-08T12:46:37Z", "author": {"login": "gastaldi"}, "path": "devtools/gradle/src/main/java/io/quarkus/gradle/AppModelGradleResolver.java", "diffHunk": "@@ -23,6 +23,8 @@\n import org.gradle.api.artifacts.ModuleVersionIdentifier;\n import org.gradle.api.artifacts.ResolvedArtifact;\n import org.gradle.api.artifacts.ResolvedConfiguration;\n+import org.gradle.api.artifacts.component.ComponentIdentifier;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be74264edf9f15108dcce8b84658b9317e83ff48"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be74264edf9f15108dcce8b84658b9317e83ff48", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/be74264edf9f15108dcce8b84658b9317e83ff48", "committedDate": "2020-01-08T12:45:02Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug\n\nSimplify check if ProjectComponentIdentifier"}, "afterCommit": {"oid": "c56ee9556b8a256151b7f307fc02a96d7f50b4d5", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/c56ee9556b8a256151b7f307fc02a96d7f50b4d5", "committedDate": "2020-01-08T12:51:53Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug\n\nSimplify check if ProjectComponentIdentifier\n\nRemove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5OTQzOTMw", "url": "https://github.com/quarkusio/quarkus/pull/6455#pullrequestreview-339943930", "createdAt": "2020-01-08T15:31:13Z", "commit": {"oid": "0918b8efd5ef3b9106e5141e07952517c2f7fcb5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNTozMToxM1rOFbakag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNTozMToxM1rOFbakag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI5MTE3OA==", "bodyText": "Please remove this leftover.", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364291178", "createdAt": "2020-01-08T15:31:13Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/model/AppArtifact.java", "diffHunk": "@@ -11,6 +11,8 @@\n \n     protected Path path;\n \n+    protected boolean subModule;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0918b8efd5ef3b9106e5141e07952517c2f7fcb5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "committedDate": "2020-01-08T15:34:07Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13bf755deb0f43e9d2576577e432acb5f9a9b3bb", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/13bf755deb0f43e9d2576577e432acb5f9a9b3bb", "committedDate": "2020-01-08T15:31:22Z", "message": "Make sure we add gradle deps after project deps\n\nthis is to keep the same ordering of the classpath and avoid gradle deps stepping on the project ones"}, "afterCommit": {"oid": "b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "committedDate": "2020-01-08T15:34:07Z", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5OTU3NzIw", "url": "https://github.com/quarkusio/quarkus/pull/6455#pullrequestreview-339957720", "createdAt": "2020-01-08T15:50:03Z", "commit": {"oid": "b27ebf41a7fd12162035c6dffda5b1bf3296a19f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 335, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}