{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NTE5OTk3", "number": 11660, "title": "Fix some ClassLoader leaks from the BuildMojo", "bodyText": "Hopefully this will fix some of the CI issues", "createdAt": "2020-08-27T07:51:30Z", "url": "https://github.com/quarkusio/quarkus/pull/11660", "merged": true, "mergeCommit": {"oid": "5d2d9bf7550a6bc1a932ce8ecfe24498670be463"}, "closed": true, "closedAt": "2020-08-28T09:16:20Z", "author": {"login": "stuartwdouglas"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC7rLtgBqjM2OTgyNDM3ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDOwwYAFqTQ3NzI2MzE3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73f8ab80e3d6f449fa9b73403b02d6978a868422", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/73f8ab80e3d6f449fa9b73403b02d6978a868422", "committedDate": "2020-08-27T07:50:52Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}, "afterCommit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/94a06497d5ddd2358a65edaad2cc2bcd235214a9", "committedDate": "2020-08-27T07:56:29Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NDg5NjYx", "url": "https://github.com/quarkusio/quarkus/pull/11660#pullrequestreview-476489661", "createdAt": "2020-08-27T08:17:43Z", "commit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoxNzo0M1rOHIFegQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoxNzo0M1rOHIFegQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0MDM4NQ==", "bodyText": "This doesn't seem to do be used anywhere", "url": "https://github.com/quarkusio/quarkus/pull/11660#discussion_r478240385", "createdAt": "2020-08-27T08:17:43Z", "author": {"login": "geoand"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildMojo.java", "diffHunk": "@@ -133,9 +133,10 @@ public BuildMojo() {\n         MojoLogger.logSupplier = this::getLog;\n     }\n \n+    boolean pause = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NDkwMzIy", "url": "https://github.com/quarkusio/quarkus/pull/11660#pullrequestreview-476490322", "createdAt": "2020-08-27T08:18:34Z", "commit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoxODozNFrOHIFggQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoxODozNFrOHIFggQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0MDg5Nw==", "bodyText": "Is there any chance of this causing unexpected behavior?", "url": "https://github.com/quarkusio/quarkus/pull/11660#discussion_r478240897", "createdAt": "2020-08-27T08:18:34Z", "author": {"login": "geoand"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/BuildMojo.java", "diffHunk": "@@ -201,6 +202,7 @@ public void execute() throws MojoExecutionException {\n             QuarkusBootstrap.Builder builder = QuarkusBootstrap.builder()\n                     .setAppArtifact(appArtifact)\n                     .setMavenArtifactResolver(resolver)\n+                    .setIsolateDeployment(true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTAyNTcz", "url": "https://github.com/quarkusio/quarkus/pull/11660#pullrequestreview-476502573", "createdAt": "2020-08-27T08:34:49Z", "commit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODozNDo0OVrOHIGGAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODozNDo0OVrOHIGGAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI1MDQ5Nw==", "bodyText": "There are two of these classes. Is it supposed to be one for the runtime and one for the deployment CL?", "url": "https://github.com/quarkusio/quarkus/pull/11660#discussion_r478250497", "createdAt": "2020-08-27T08:34:49Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/classloading/DriverRemover.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package io.quarkus.bootstrap.classloading;\n+\n+import java.sql.Driver;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Enumeration;\n+import org.jboss.logging.Logger;\n+\n+public class DriverRemover implements Runnable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94a06497d5ddd2358a65edaad2cc2bcd235214a9", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/94a06497d5ddd2358a65edaad2cc2bcd235214a9", "committedDate": "2020-08-27T07:56:29Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}, "afterCommit": {"oid": "d51302b3ec0d1f279783b551a53bcd2245ae1b73", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/d51302b3ec0d1f279783b551a53bcd2245ae1b73", "committedDate": "2020-08-27T08:41:39Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d51302b3ec0d1f279783b551a53bcd2245ae1b73", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/d51302b3ec0d1f279783b551a53bcd2245ae1b73", "committedDate": "2020-08-27T08:41:39Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}, "afterCommit": {"oid": "f94606e839efb83a2e2de54aa204dda2695c8d46", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/f94606e839efb83a2e2de54aa204dda2695c8d46", "committedDate": "2020-08-27T23:54:34Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f94606e839efb83a2e2de54aa204dda2695c8d46", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/f94606e839efb83a2e2de54aa204dda2695c8d46", "committedDate": "2020-08-27T23:54:34Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}, "afterCommit": {"oid": "adb11e118f337c7938ab5207847acc1f5bbf18d3", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/adb11e118f337c7938ab5207847acc1f5bbf18d3", "committedDate": "2020-08-28T01:56:45Z", "message": "Limit the amount of memory surefire can use\n\nBy default surefile will take up to 1/4 of system\nmemory, however in memory constrained environments\nthis can be too much. 1024m should be plenty to run\nthe tests, and prevents surefire from allocating more\nthan it needs."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e31b82ad7311598f9b37eae842d61803f35ee69d", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/e31b82ad7311598f9b37eae842d61803f35ee69d", "committedDate": "2020-08-28T03:00:55Z", "message": "Fix ClassLoader leak in the docs build\n\nAlso raise the metaspace limit, there is a bit of\ntrial and error here to find out what works."}, "afterCommit": {"oid": "39e32b647097841e3d4b83ca570da092736d90a2", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/39e32b647097841e3d4b83ca570da092736d90a2", "committedDate": "2020-08-28T03:04:52Z", "message": "Fix ClassLoader leak in the docs build\n\nAlso raise the metaspace limit, there is a bit of\ntrial and error here to find out what works."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "448cf8cb5ed6332eb9073ff973879b03c94942a3", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/448cf8cb5ed6332eb9073ff973879b03c94942a3", "committedDate": "2020-08-28T06:08:54Z", "message": "Fix some ClassLoader leaks from the BuildMojo\n\nHopefully this will fix some of the CI issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6bbf0c36ec708e3c329cdb64fad937c9dee90ee", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/b6bbf0c36ec708e3c329cdb64fad937c9dee90ee", "committedDate": "2020-08-28T06:08:54Z", "message": "Limit maven metaspace during the build\n\nThis ensures it will clean up old ClassLoaders,\ninstead of just allocating more memory."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce60f44af09d0942bb6e1a1d3b9f7ad08b8b253a", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce60f44af09d0942bb6e1a1d3b9f7ad08b8b253a", "committedDate": "2020-08-28T06:08:54Z", "message": "Fix ClassLoader leak in the docs build\n\nAlso raise the metaspace limit, there is a bit of\ntrial and error here to find out what works."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06c7f56696592f24b5b135617026f3f1925d6e81", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/06c7f56696592f24b5b135617026f3f1925d6e81", "committedDate": "2020-08-28T04:55:27Z", "message": "Disable MutinyTest\n\nIt is still unstable even after my attempt to fix it"}, "afterCommit": {"oid": "ce60f44af09d0942bb6e1a1d3b9f7ad08b8b253a", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce60f44af09d0942bb6e1a1d3b9f7ad08b8b253a", "committedDate": "2020-08-28T06:08:54Z", "message": "Fix ClassLoader leak in the docs build\n\nAlso raise the metaspace limit, there is a bit of\ntrial and error here to find out what works."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MjYzMTc1", "url": "https://github.com/quarkusio/quarkus/pull/11660#pullrequestreview-477263175", "createdAt": "2020-08-28T06:10:56Z", "commit": {"oid": "ce60f44af09d0942bb6e1a1d3b9f7ad08b8b253a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 746, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}