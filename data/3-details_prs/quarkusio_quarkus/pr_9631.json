{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzg1MTc4", "number": 9631, "title": "Introduce QuarkusProject and Quarkus project zipping in codegen", "bodyText": "This is part of #8178\nThis is a good one :-), things starts to get nicer and cleaner (but not quite there yet ^^)..\nIntroduce QuarkusProject in codegen to reduce ProjectWriter & BuildTool coupling, it will slowly replace BuildFile and ProjectWriter.\nI also uniformised the quarkus-cli (I am not sure if it's used) by giving the project folder instead of the pom.xml, it should now also work with Gradle.\nDeleted ZipProjectWriter which is not used and will be replaced by a way to zip a Quarkus project folder.", "createdAt": "2020-05-27T11:25:05Z", "url": "https://github.com/quarkusio/quarkus/pull/9631", "merged": true, "mergeCommit": {"oid": "d5c94c1eee6d620d97729f0bd90effcd0ce005fe"}, "closed": true, "closedAt": "2020-05-28T20:36:59Z", "author": {"login": "ia3andy"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclXwBcgBqjMzNzc3MTEzMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl0AU5AFqTQyMDQ3MjQyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3452ea347470d76da2455b6ad92ba2dd314117d1", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/3452ea347470d76da2455b6ad92ba2dd314117d1", "committedDate": "2020-05-27T11:19:05Z", "message": "Introduce QuarkusProject in codegen to reduce ProjectWriter and BuildTool coupling\n\nThis is part of #8178\n\nThis is a good one :-), things starts to get nicer and cleaner (but not quite there yet ^^).."}, "afterCommit": {"oid": "1dc58e909465157a2465e317069edd5f0e8f193d", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/1dc58e909465157a2465e317069edd5f0e8f193d", "committedDate": "2020-05-27T11:41:22Z", "message": "Introduce QuarkusProject in codegen to reduce ProjectWriter and BuildTool coupling\n\nThis is part of #8178\n\nThis is a good one :-), things starts to get nicer and cleaner (but not quite there yet ^^).."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MTIxMjM4", "url": "https://github.com/quarkusio/quarkus/pull/9631#pullrequestreview-419121238", "createdAt": "2020-05-27T12:01:05Z", "commit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjowMTowNVrOGbGANA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMjowMTowNVrOGbGANA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA2MzA5Mg==", "bodyText": "I need to check that it still works..", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431063092", "createdAt": "2020-05-27T12:01:05Z", "author": {"login": "ia3andy"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "diffHunk": "@@ -236,10 +235,9 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n \n-    private void createGradleWrapper(QuarkusPlatformDescriptor platform,\n-            ProjectWriter writer) {\n+    private void createGradleWrapper(QuarkusPlatformDescriptor platform, Path projectFolderPath) {\n         try {\n-            writer.mkdirs(\"gradle/wrapper\");\n+            Files.createDirectories(projectFolderPath.resolve(\"gradle/wrapper\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTgxNzU5", "url": "https://github.com/quarkusio/quarkus/pull/9631#pullrequestreview-419581759", "createdAt": "2020-05-27T20:26:27Z", "commit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNjoyOFrOGbb3kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDoyNjoyOFrOGbb3kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQyMTMyOA==", "bodyText": "Just a note, previously a single invocation could have been passed to multiple handlers (e.g. create followed by add extensions) that would use the same project writer instance. It doesn't mean it has to stay that way.", "url": "https://github.com/quarkusio/quarkus/pull/9631#discussion_r431421328", "createdAt": "2020-05-27T20:26:28Z", "author": {"login": "aloubyansky"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProjectCommandHandler.java", "diffHunk": "@@ -20,10 +21,8 @@\n \n     @Override\n     public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws QuarkusCommandException {\n-        final ProjectWriter projectWriter = invocation.getProjectWriter();\n-        if (projectWriter == null) {\n-            throw new IllegalStateException(\"Project writer has not been provided\");\n-        }\n+        final ProjectWriter projectWriter = new FileProjectWriter(\n+                invocation.getQuarkusProject().getProjectFolderPath().toFile());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c7f189912c22d2beca000ae46d70e1d8ce5e944"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555c7c79f82a01a2318e424650c7cde06d28b236", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/555c7c79f82a01a2318e424650c7cde06d28b236", "committedDate": "2020-05-28T09:42:20Z", "message": "Introduce QuarkusProject in codegen to reduce ProjectWriter and BuildTool coupling\n\nThis is part of #8178\n\nThis is a good one :-), things starts to get nicer and cleaner (but not quite there yet ^^).."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b304180d91f3c569b1b8beab6ce88b4ae1fa268", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/6b304180d91f3c569b1b8beab6ce88b4ae1fa268", "committedDate": "2020-05-28T09:42:21Z", "message": "Clean package structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "658d730226e43c155dc16fb43c4f1989c144bc96", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/658d730226e43c155dc16fb43c4f1989c144bc96", "committedDate": "2020-05-28T09:42:21Z", "message": "Fix multiple close overriding modification when adding extensions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f44f9801fdda4a64e87536011270660ca0242dff", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/f44f9801fdda4a64e87536011270660ca0242dff", "committedDate": "2020-05-28T08:55:51Z", "message": "Introduce QuarkusProjectCompress to zip QuarkusProject"}, "afterCommit": {"oid": "d3b2456f713ea543ea5bfb6bc641c53e9cbd9566", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/d3b2456f713ea543ea5bfb6bc641c53e9cbd9566", "committedDate": "2020-05-28T09:42:21Z", "message": "Introduce QuarkusProjectCompress to zip QuarkusProject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a3c24d4718d24d8f8743ddc91425b132209c069", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/8a3c24d4718d24d8f8743ddc91425b132209c069", "committedDate": "2020-05-28T13:41:32Z", "message": "Minor refactor in QuarkusProject"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7b78b331d7c4422dfa86d122f4af1dd3b1865a", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/2e7b78b331d7c4422dfa86d122f4af1dd3b1865a", "committedDate": "2020-05-28T13:41:37Z", "message": "Introduce QuarkusProjectCompress to zip QuarkusProject"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3b2456f713ea543ea5bfb6bc641c53e9cbd9566", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/d3b2456f713ea543ea5bfb6bc641c53e9cbd9566", "committedDate": "2020-05-28T09:42:21Z", "message": "Introduce QuarkusProjectCompress to zip QuarkusProject"}, "afterCommit": {"oid": "2e7b78b331d7c4422dfa86d122f4af1dd3b1865a", "author": {"user": {"login": "ia3andy", "name": "Andy Damevin"}}, "url": "https://github.com/quarkusio/quarkus/commit/2e7b78b331d7c4422dfa86d122f4af1dd3b1865a", "committedDate": "2020-05-28T13:41:37Z", "message": "Introduce QuarkusProjectCompress to zip QuarkusProject"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDcyNDIy", "url": "https://github.com/quarkusio/quarkus/pull/9631#pullrequestreview-420472422", "createdAt": "2020-05-28T20:36:42Z", "commit": {"oid": "2e7b78b331d7c4422dfa86d122f4af1dd3b1865a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3219, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}