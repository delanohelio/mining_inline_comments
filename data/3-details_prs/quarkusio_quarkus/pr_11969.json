{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxOTQ2MTY2", "number": 11969, "title": "Separate REST Data Panache controller from resource", "bodyText": "This change separates a generated REST Data with Panache JAX-RS controller class from a generated RestDataResource class. Here are the main benefits of this separation.\n\nRestDataResource interface that is used by a user is more user-friendly. JAX-RS Response result type is replaced with type-safe interfaces such as List<T> or 'T'. list method has Page and Sort as parameters instead of integers and strings.\nJAX-RS controller is generated separately and does not implement RestDataResource. This allows methods to have different definitions depending on the configuration. E.g. if pagination is disabled, page index and size parameters are not defined and as a result not shown in an OpenAPI spec.\nJAX-RS controller can specify all the query and path parameters with annotations and does not need to use UriInfo to access them.\n@ResourceProperties and @MethodProperties are now checked when generating methods. Generated code is now smaller because it can avoid unnecessary runtime checks.\nAs a bonus, controller and resource separation should make it easier to implement new features, such as custom endpoints, in the future.\n\nThis PR also fixes #11391.", "createdAt": "2020-09-08T10:30:00Z", "url": "https://github.com/quarkusio/quarkus/pull/11969", "merged": true, "mergeCommit": {"oid": "f6c4314f98e24a8b1832747865b850daca69a5c8"}, "closed": true, "closedAt": "2020-11-03T16:48:10Z", "author": {"login": "gytis"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQOfi4gFqTUwMzk3Njc1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdY8CGegFqTUyMjY5MDA3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzOTc2NzU3", "url": "https://github.com/quarkusio/quarkus/pull/11969#pullrequestreview-503976757", "createdAt": "2020-10-07T15:00:56Z", "commit": {"oid": "0fc9c530189b7b73f6766df51028c36181c9d6ae"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTowMDo1NlrOHd3yIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTowMjo1M1rOHd33yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA4NDcwNA==", "bodyText": "So why not return a List<Person>?", "url": "https://github.com/quarkusio/quarkus/pull/11969#discussion_r501084704", "createdAt": "2020-10-07T15:00:56Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/rest-data-panache.adoc", "diffHunk": "@@ -92,7 +92,9 @@ public class PeopleResourceImpl implements PeopleResource { // The actual class\n \n     @GET\n     @Produces(\"application/json\")\n-    public Response list(){\n+    public Response list(@QueryParam(\"page\") @DefaultValue(\"0\") int pageIndex,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fc9c530189b7b73f6766df51028c36181c9d6ae"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA4NTc3Mw==", "bodyText": "Isn't it List<Person>?\nAlso it feels weird that these are Page and Sort when the generated code you showed up there uses int and String, is it normal?", "url": "https://github.com/quarkusio/quarkus/pull/11969#discussion_r501085773", "createdAt": "2020-10-07T15:02:22Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/rest-data-panache.adoc", "diffHunk": "@@ -132,10 +134,10 @@ It can be used in your resource interface:\n @ResourceProperties(hal = true, path = \"my-people\")\n public interface PeopleResource extends PanacheEntityResource<Person, Long> {\n     @MethodProperties(path = \"all\")\n-    Response list();\n+    Person list(Page page, Sort sort);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fc9c530189b7b73f6766df51028c36181c9d6ae"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA4NjE1Mw==", "bodyText": "We end up returning a boolean response?", "url": "https://github.com/quarkusio/quarkus/pull/11969#discussion_r501086153", "createdAt": "2020-10-07T15:02:53Z", "author": {"login": "FroMage"}, "path": "docs/src/main/asciidoc/rest-data-panache.adoc", "diffHunk": "@@ -132,10 +134,10 @@ It can be used in your resource interface:\n @ResourceProperties(hal = true, path = \"my-people\")\n public interface PeopleResource extends PanacheEntityResource<Person, Long> {\n     @MethodProperties(path = \"all\")\n-    Response list();\n+    Person list(Page page, Sort sort);\n \n     @MethodProperties(exposed = false)\n-    void delete(Long id);\n+    boolean delete(Long id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fc9c530189b7b73f6766df51028c36181c9d6ae"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0fc9c530189b7b73f6766df51028c36181c9d6ae", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/0fc9c530189b7b73f6766df51028c36181c9d6ae", "committedDate": "2020-09-08T09:35:35Z", "message": "Separate REST Data Panache controller from resource"}, "afterCommit": {"oid": "84f67e51ed95706d979926a449d7134a0f4d58a5", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/84f67e51ed95706d979926a449d7134a0f4d58a5", "committedDate": "2020-10-15T16:58:11Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84f67e51ed95706d979926a449d7134a0f4d58a5", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/84f67e51ed95706d979926a449d7134a0f4d58a5", "committedDate": "2020-10-15T16:58:11Z", "message": "Separate REST Data Panache controller from resource"}, "afterCommit": {"oid": "63158a8f2047b3f7156b06d7fb520e83c9694cab", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/63158a8f2047b3f7156b06d7fb520e83c9694cab", "committedDate": "2020-10-19T12:45:15Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63158a8f2047b3f7156b06d7fb520e83c9694cab", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/63158a8f2047b3f7156b06d7fb520e83c9694cab", "committedDate": "2020-10-19T12:45:15Z", "message": "Separate REST Data Panache controller from resource"}, "afterCommit": {"oid": "206eed9d16ca62cb5a47c2f23dc8ddcc57740e54", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/206eed9d16ca62cb5a47c2f23dc8ddcc57740e54", "committedDate": "2020-10-26T12:07:18Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "206eed9d16ca62cb5a47c2f23dc8ddcc57740e54", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/206eed9d16ca62cb5a47c2f23dc8ddcc57740e54", "committedDate": "2020-10-26T12:07:18Z", "message": "Separate REST Data Panache controller from resource"}, "afterCommit": {"oid": "f54ec02207ee59d59d86d0b8365633c974da7377", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/f54ec02207ee59d59d86d0b8365633c974da7377", "committedDate": "2020-10-26T13:38:23Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6caddc63798f604313fbe1fa0d3d2bf1104d711d", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/6caddc63798f604313fbe1fa0d3d2bf1104d711d", "committedDate": "2020-10-29T12:56:35Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f54ec02207ee59d59d86d0b8365633c974da7377", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/f54ec02207ee59d59d86d0b8365633c974da7377", "committedDate": "2020-10-26T13:38:23Z", "message": "Separate REST Data Panache controller from resource"}, "afterCommit": {"oid": "6caddc63798f604313fbe1fa0d3d2bf1104d711d", "author": {"user": null}, "url": "https://github.com/quarkusio/quarkus/commit/6caddc63798f604313fbe1fa0d3d2bf1104d711d", "committedDate": "2020-10-29T12:56:35Z", "message": "Separate REST Data Panache controller from resource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNjkwMDcz", "url": "https://github.com/quarkusio/quarkus/pull/11969#pullrequestreview-522690073", "createdAt": "2020-11-03T16:48:01Z", "commit": {"oid": "6caddc63798f604313fbe1fa0d3d2bf1104d711d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 581, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}