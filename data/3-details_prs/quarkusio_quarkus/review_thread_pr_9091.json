{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNTkxOTIw", "number": 9091, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNTozOTo0M1rOD5dfsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNTozOTo0M1rOD5dfsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNTc4NjczOnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "isResolved": false, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNTozOTo0M1rOGQvbKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOTozNDowM1rOGRLHWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg==", "bodyText": "just a quick comment: we lost the chmod in passing. It's not a problem?\n/cc @cescoffier", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420207402", "createdAt": "2020-05-05T15:39:43Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwOTY5MQ==", "bodyText": "@gsmet I see, but not a problem in my tests.", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420209691", "createdAt": "2020-05-05T15:42:56Z", "author": {"login": "haraldatbmw"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxMjQ1MA==", "bodyText": "@gsmet Don't know if podman or other docker versions have problems.\nAlso my Windows docker deamon does it correct.\n\nSECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420212450", "createdAt": "2020-05-05T15:46:40Z", "author": {"login": "haraldatbmw"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxMzEyNQ==", "bodyText": "Well, you're the one who insisted on it :)\n#6461", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420213125", "createdAt": "2020-05-05T15:47:37Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxNTA3OQ==", "bodyText": "Yes, seams my newer docker daemon fixed this already.", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420215079", "createdAt": "2020-05-05T15:50:17Z", "author": {"login": "haraldatbmw"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM1OTk2MQ==", "bodyText": "@cescoffier IIRC you added these commands, mind taking a look?", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420359961", "createdAt": "2020-05-05T19:40:11Z", "author": {"login": "geoand"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU2MzgxMQ==", "bodyText": "These commands were the recommendation made by Ope3nshift and Podman.\nThe change looks good but it needs to be tested carefully.", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420563811", "createdAt": "2020-05-06T06:09:41Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY2MTA4Mg==", "bodyText": "Do you have automated tests for deployment into Openshift and with Podman?", "url": "https://github.com/quarkusio/quarkus/pull/9091#discussion_r420661082", "createdAt": "2020-05-06T09:34:03Z", "author": {"login": "haraldatbmw"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-native.ftl", "diffHunk": "@@ -16,13 +16,7 @@\n ###\n FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n WORKDIR /work/\n-COPY ${build_dir}/*-runner /work/application\n-\n-# set up permissions for user `1001`\n-RUN chmod 775 /work /work/application \\\n-  && chown -R 1001 /work \\\n-  && chmod -R \"g+rwX\" /work \\\n-  && chown -R 1001:root /work\n+COPY --chown=1001:root ${build_dir}/*-runner /work/application", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNzQwMg=="}, "originalCommit": {"oid": "d2f2bc265419032b5b46646bdb041a288fd1948f"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3247, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}