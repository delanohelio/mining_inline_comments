{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjE3MjY5", "number": 8151, "title": "Generate projects for Java 11 by default", "bodyText": "@gastaldi I created the PR early so that you can have a look too.\nI will try generating projects now :).", "createdAt": "2020-03-25T14:22:18Z", "url": "https://github.com/quarkusio/quarkus/pull/8151", "merged": true, "mergeCommit": {"oid": "4b5ec654e3a1705cce7c1e056ddd068802e3b591"}, "closed": true, "closedAt": "2020-03-26T11:03:28Z", "author": {"login": "gsmet"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRIRl3gH2gAyMzkzNjE3MjY5OjdlZjY2NmYxNzMzYzk3MGMyMmYzZGNjNjNkMzdkZDI0YjY4ZTRlODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRYKSOgH2gAyMzkzNjE3MjY5OmEyYThhODQ5OGY3ZjE2NjliYzYwYzE5OTIyYWNmMDM1YTZiODViOTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7ef666f1733c970c22f3dcc63d37dd24b68e4e85", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/7ef666f1733c970c22f3dcc63d37dd24b68e4e85", "committedDate": "2020-03-25T14:21:15Z", "message": "Generate projects for Java 11 by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTk2ODQw", "url": "https://github.com/quarkusio/quarkus/pull/8151#pullrequestreview-381196840", "createdAt": "2020-03-25T14:24:17Z", "commit": {"oid": "7ef666f1733c970c22f3dcc63d37dd24b68e4e85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjE3NjAz", "url": "https://github.com/quarkusio/quarkus/pull/8151#pullrequestreview-381217603", "createdAt": "2020-03-25T14:44:40Z", "commit": {"oid": "7ef666f1733c970c22f3dcc63d37dd24b68e4e85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/36ca0171102cddf80aa6def23766759b40cc396c", "committedDate": "2020-03-25T16:30:36Z", "message": "Parameterize the Java target\n\nBy default, it is based on the Java version used to create the project.\nIt can be overridden in CreateProject though if you really want to\nenforce it in your tools.\n\nI haven't exposed it for now as we will probably remove it or tweak it\nlater.\n\nNote that even if you enforce it, it will still use either 8 or 11 for\nnow. We might want to further enhance that later."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzM4ODM2", "url": "https://github.com/quarkusio/quarkus/pull/8151#pullrequestreview-381338836", "createdAt": "2020-03-25T16:47:09Z", "commit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0NzowOVrOF7kd3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0NzowOVrOF7kd3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwNzc3Mw==", "bodyText": "The comment isn't really helpful, just saying :)", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398007773", "createdAt": "2020-03-25T16:47:09Z", "author": {"login": "geoand"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "diffHunk": "@@ -134,6 +147,15 @@ public boolean doCreateProject(final Map<String, Object> context) throws IOExcep\n     }\n \n     public QuarkusCommandOutcome execute() throws QuarkusCommandException {\n+        // Define the Java version to use determined from the one specified or the one creating the project", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNTQ3MDQy", "url": "https://github.com/quarkusio/quarkus/pull/8151#pullrequestreview-381547042", "createdAt": "2020-03-25T21:23:10Z", "commit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzoxMFrOF7u4Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzoxMFrOF7u4Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODM5NQ==", "bodyText": "why not have one \"java_target\" and another \"java_underscore_target\" so the same property isn't to be treated differently ?", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398178395", "createdAt": "2020-03-25T21:23:10Z", "author": {"login": "maxandersen"}, "path": "independent-projects/tools/common/src/main/java/io/quarkus/cli/commands/CreateProject.java", "diffHunk": "@@ -134,6 +147,15 @@ public boolean doCreateProject(final Map<String, Object> context) throws IOExcep\n     }\n \n     public QuarkusCommandOutcome execute() throws QuarkusCommandException {\n+        // Define the Java version to use determined from the one specified or the one creating the project\n+        Matcher matcher = JAVA_VERSION_PATTERN\n+                .matcher(this.javaTarget != null ? this.javaTarget : System.getProperty(\"java.version\", \"\"));\n+        if (matcher.matches() && Integer.parseInt(matcher.group(1)) < 11) {\n+            invocation.setProperty(JAVA_TARGET, invocation.getBuildTool() == BuildTool.MAVEN ? \"1.8\" : \"1_8\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNTQ3NDYy", "url": "https://github.com/quarkusio/quarkus/pull/8151#pullrequestreview-381547462", "createdAt": "2020-03-25T21:23:54Z", "commit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzo1NFrOF7u5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyMzo1NFrOF7u5sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3ODczOQ==", "bodyText": "so if grok this right this change is a change in the \"api\" of the code generation that means the templates now require java_target to be set which will not be the case if you are using 1.3.0 plugin (@aloubyansky correct me if i'm wrong on this here).\nSo 1.3.0 plugin will pick up latest 1.3.x platform and when generation happens it will fail.\nTo remedy this the various .ftl files should check if java_target is set.\nif my freemarker syntax memory is right its something like ${java_target!\"11\"}", "url": "https://github.com/quarkusio/quarkus/pull/8151#discussion_r398178739", "createdAt": "2020-03-25T21:23:54Z", "author": {"login": "maxandersen"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/basic-rest/kotlin/pom.xml-template.ftl", "diffHunk": "@@ -107,7 +107,7 @@\n                 </executions>\n                 <configuration>\n                     <javaParameters>true</javaParameters>\n-                    <jvmTarget>1.8</jvmTarget>\n+                    <jvmTarget>${java_target}</jvmTarget>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca0171102cddf80aa6def23766759b40cc396c"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a8a8498f7f1669bc60c19922acf035a6b85b90", "author": {"user": {"login": "gsmet", "name": "Guillaume Smet"}}, "url": "https://github.com/quarkusio/quarkus/commit/a2a8a8498f7f1669bc60c19922acf035a6b85b90", "committedDate": "2020-03-26T08:51:45Z", "message": "Keep template files compatible with Maven plugin < 1.3.1"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3618, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}