{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMTg0MDQ0", "number": 12271, "title": "Deprecate QuarkusTestBeforeAllCallback", "bodyText": "Introduce the properly named QuarkusTestAfterConstructCallback\nin it's place.\nFixes: #12250", "createdAt": "2020-09-22T20:42:11Z", "url": "https://github.com/quarkusio/quarkus/pull/12271", "merged": true, "mergeCommit": {"oid": "6f1f65c9d1f2b23dc3d8424cfddf1ec5c8b9ecbf"}, "closed": true, "closedAt": "2020-09-23T18:32:11Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLeZIKAFqTQ5MzgzOTI2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLv8AagFqTQ5NDg4MjczNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODM5MjY2", "url": "https://github.com/quarkusio/quarkus/pull/12271#pullrequestreview-493839266", "createdAt": "2020-09-22T20:54:59Z", "commit": {"oid": "b339124810258171866e2f825e5001fb475debda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo1NTowMFrOHWMB_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo1NTowMFrOHWMB_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAyNzgzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            WARNING: `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback` has been deprecated in favor of `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback` and will be removed in future releases of Quarkus\n          \n          \n            \n            WARNING: `io.quarkus.test.junit.callback.QuarkusTestBeforeAllCallback` has been deprecated in favor of `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback` and will be removed in future releases of Quarkus", "url": "https://github.com/quarkusio/quarkus/pull/12271#discussion_r493027837", "createdAt": "2020-09-22T20:55:00Z", "author": {"login": "gastaldi"}, "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -436,10 +436,12 @@ transaction, but roll it back once the test method is complete to revert any dat\n \n Alternatively or additionally to an interceptor, you can enrich *all* your `@QuarkusTest` classes by implementing the following callback interfaces:\n \n-* `io.quarkus.test.junit.callback.QuarkusTestBeforeAllCallback`\n+* `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback`\n * `io.quarkus.test.junit.callback.QuarkusTestBeforeEachCallback`\n * `io.quarkus.test.junit.callback.QuarkusTestAfterEachCallback`\n \n+WARNING: `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback` has been deprecated in favor of `io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback` and will be removed in future releases of Quarkus", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b339124810258171866e2f825e5001fb475debda"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODU1OTAw", "url": "https://github.com/quarkusio/quarkus/pull/12271#pullrequestreview-493855900", "createdAt": "2020-09-22T21:21:04Z", "commit": {"oid": "b339124810258171866e2f825e5001fb475debda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToyMTowNVrOHWM08A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToyMTowNVrOHWM08A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA0MDg4MA==", "bodyText": "I suppose we cannot (yet) log something here? If not, can we when calling afterConstruct?", "url": "https://github.com/quarkusio/quarkus/pull/12271#discussion_r493040880", "createdAt": "2020-09-22T21:21:05Z", "author": {"login": "famod"}, "path": "test-framework/junit5/src/main/java/io/quarkus/test/junit/QuarkusTestExtension.java", "diffHunk": "@@ -329,14 +331,20 @@ private void populateCallbacks(ClassLoader classLoader) throws ClassNotFoundExce\n         // make sure that we start over everytime we populate the callbacks\n         // otherwise previous runs of QuarkusTest (with different TestProfile values can leak into the new run)\n         quarkusTestMethodContextClass = null;\n-        beforeAllCallbacks = new ArrayList<>();\n+        afterConstructCallbacks = new ArrayList<>();\n+        legacyAfterConstructCallbacks = new ArrayList<>();\n         beforeEachCallbacks = new ArrayList<>();\n         afterEachCallbacks = new ArrayList<>();\n \n-        ServiceLoader<?> quarkusTestBeforeAllLoader = ServiceLoader\n+        ServiceLoader<?> quarkusTestAfterConstructLoader = ServiceLoader\n+                .load(Class.forName(QuarkusTestAfterConstructCallback.class.getName(), false, classLoader), classLoader);\n+        for (Object quarkusTestAfterConstructCallback : quarkusTestAfterConstructLoader) {\n+            afterConstructCallbacks.add(quarkusTestAfterConstructCallback);\n+        }\n+        ServiceLoader<?> quarkusTestLegacyAfterConstructLoader = ServiceLoader\n                 .load(Class.forName(QuarkusTestBeforeAllCallback.class.getName(), false, classLoader), classLoader);\n-        for (Object quarkusTestBeforeAllCallback : quarkusTestBeforeAllLoader) {\n-            beforeAllCallbacks.add(quarkusTestBeforeAllCallback);\n+        for (Object quarkusTestLegacyAfterConstructCallback : quarkusTestLegacyAfterConstructLoader) {\n+            legacyAfterConstructCallbacks.add(quarkusTestLegacyAfterConstructCallback);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b339124810258171866e2f825e5001fb475debda"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2515e9545f56a313df1502b8e5b7a0b5f9839373", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2515e9545f56a313df1502b8e5b7a0b5f9839373", "committedDate": "2020-09-23T04:49:48Z", "message": "Deprecate QuarkusTestBeforeAllCallback\n\nIntroduce the properly named QuarkusTestAfterConstructCallback\nin it's place.\n\nFixes: #12250"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a37514b5519847fadb39d9d7fe72856a9d9b171", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/3a37514b5519847fadb39d9d7fe72856a9d9b171", "committedDate": "2020-09-23T04:48:28Z", "message": "Update docs/src/main/asciidoc/getting-started-testing.adoc\n\nCo-authored-by: George Gastaldi <gegastaldi@gmail.com>"}, "afterCommit": {"oid": "2515e9545f56a313df1502b8e5b7a0b5f9839373", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/2515e9545f56a313df1502b8e5b7a0b5f9839373", "committedDate": "2020-09-23T04:49:48Z", "message": "Deprecate QuarkusTestBeforeAllCallback\n\nIntroduce the properly named QuarkusTestAfterConstructCallback\nin it's place.\n\nFixes: #12250"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0ODgyNzM2", "url": "https://github.com/quarkusio/quarkus/pull/12271#pullrequestreview-494882736", "createdAt": "2020-09-23T17:21:29Z", "commit": {"oid": "2515e9545f56a313df1502b8e5b7a0b5f9839373"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 401, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}