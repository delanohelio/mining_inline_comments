{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1ODEyNDQy", "number": 7714, "title": "Allow @QuarkusTest to use constructor injection", "bodyText": "", "createdAt": "2020-03-09T20:50:58Z", "url": "https://github.com/quarkusio/quarkus/pull/7714", "merged": true, "mergeCommit": {"oid": "ee19730e7346d99daa80d4ab99d76f11e9766a8a"}, "closed": true, "closedAt": "2020-03-10T08:48:56Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMETSwAFqTM3MTUyMTQyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMNZyDABqjMxMTM1MzY4MTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNTIxNDI0", "url": "https://github.com/quarkusio/quarkus/pull/7714#pullrequestreview-371521424", "createdAt": "2020-03-09T20:53:52Z", "commit": {"oid": "7c2116d68eeff3543005c53916ae2bcab7d28ed3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c2116d68eeff3543005c53916ae2bcab7d28ed3", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/7c2116d68eeff3543005c53916ae2bcab7d28ed3", "committedDate": "2020-03-09T20:50:31Z", "message": "Allow @QuarkusTest to use constructor injection"}, "afterCommit": {"oid": "6d8df7bd2283b256166638fea183aa78463fa0f4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6d8df7bd2283b256166638fea183aa78463fa0f4", "committedDate": "2020-03-09T20:53:58Z", "message": "Allow @QuarkusTest to use constructor injection"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d8df7bd2283b256166638fea183aa78463fa0f4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/6d8df7bd2283b256166638fea183aa78463fa0f4", "committedDate": "2020-03-09T20:53:58Z", "message": "Allow @QuarkusTest to use constructor injection"}, "afterCommit": {"oid": "5db16806919cab29a6eccde636faf063bfcfa4e4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/5db16806919cab29a6eccde636faf063bfcfa4e4", "committedDate": "2020-03-09T21:05:26Z", "message": "Allow @QuarkusTest to use constructor injection"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5db16806919cab29a6eccde636faf063bfcfa4e4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/5db16806919cab29a6eccde636faf063bfcfa4e4", "committedDate": "2020-03-09T21:05:26Z", "message": "Allow @QuarkusTest to use constructor injection"}, "afterCommit": {"oid": "e6d66f773aeb5a010048216068ca1afea79620bc", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e6d66f773aeb5a010048216068ca1afea79620bc", "committedDate": "2020-03-09T21:07:05Z", "message": "Allow @QuarkusTest to use constructor injection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNTQ1ODEw", "url": "https://github.com/quarkusio/quarkus/pull/7714#pullrequestreview-371545810", "createdAt": "2020-03-09T21:35:42Z", "commit": {"oid": "e6d66f773aeb5a010048216068ca1afea79620bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMTozNTo0MlrOFz6MtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMTozNTo0MlrOFz6MtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTk3NTIyMA==", "bodyText": "I would wrap the exception with this, not log it, so it shows up in the test failures.", "url": "https://github.com/quarkusio/quarkus/pull/7714#discussion_r389975220", "createdAt": "2020-03-09T21:35:42Z", "author": {"login": "stuartwdouglas"}, "path": "test-framework/junit5/src/main/java/io/quarkus/test/junit/QuarkusTestExtension.java", "diffHunk": "@@ -231,9 +235,15 @@ public void interceptBeforeAllMethod(Invocation<Void> invocation, ReflectiveInvo\n         }\n         T result;\n         ClassLoader old = Thread.currentThread().getContextClassLoader();\n+        Class<?> requiredTestClass = extensionContext.getRequiredTestClass();\n         try {\n-            Thread.currentThread().setContextClassLoader(extensionContext.getRequiredTestClass().getClassLoader());\n+            Thread.currentThread().setContextClassLoader(requiredTestClass.getClassLoader());\n             result = invocation.proceed();\n+        } catch (NullPointerException e) {\n+            System.err.println(\n+                    \"When using constructor injection in a test, the only legal operation is to assign the constructor values to fields. Offending class is \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6d66f773aeb5a010048216068ca1afea79620bc"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6d66f773aeb5a010048216068ca1afea79620bc", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e6d66f773aeb5a010048216068ca1afea79620bc", "committedDate": "2020-03-09T21:07:05Z", "message": "Allow @QuarkusTest to use constructor injection"}, "afterCommit": {"oid": "e9ea42385e538befbffd988c13960b0507097459", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e9ea42385e538befbffd988c13960b0507097459", "committedDate": "2020-03-09T21:37:52Z", "message": "Allow @QuarkusTest to use constructor injection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86263634fa7917a6ab0e1f86b5b91d1485710d22", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/86263634fa7917a6ab0e1f86b5b91d1485710d22", "committedDate": "2020-03-10T07:29:40Z", "message": "Allow @QuarkusTest to use constructor injection"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9ea42385e538befbffd988c13960b0507097459", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e9ea42385e538befbffd988c13960b0507097459", "committedDate": "2020-03-09T21:37:52Z", "message": "Allow @QuarkusTest to use constructor injection"}, "afterCommit": {"oid": "86263634fa7917a6ab0e1f86b5b91d1485710d22", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/86263634fa7917a6ab0e1f86b5b91d1485710d22", "committedDate": "2020-03-10T07:29:40Z", "message": "Allow @QuarkusTest to use constructor injection"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3774, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}