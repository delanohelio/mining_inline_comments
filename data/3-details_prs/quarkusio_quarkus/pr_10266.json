{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5OTc0NzY5", "number": 10266, "title": "Enable forwarded for prefix header configuration", "bodyText": "This is the last part of #9622 that enable users to configure the header to be used to prefix the HTTP request's URI. It includes also documentation how to setup it.\nFixes: #9622", "createdAt": "2020-06-25T12:02:52Z", "url": "https://github.com/quarkusio/quarkus/pull/10266", "merged": true, "mergeCommit": {"oid": "af0996b7a67a921f522b2afb56e8cde6be485b7f"}, "closed": true, "closedAt": "2020-07-10T00:15:19Z", "author": {"login": "ejba"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwBH7sgFqTQzOTE0MjEzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABczYTflAFqTQ0NjA0NzUzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTQyMTMx", "url": "https://github.com/quarkusio/quarkus/pull/10266#pullrequestreview-439142131", "createdAt": "2020-06-29T13:27:57Z", "commit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzoyNzo1N1rOGqQ7jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzozMTozOFrOGqRFfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MDc2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n          \n          \n            \n            In those scenarios, Quarkus can be configured to automatically update information like protocol, host, port and URI", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446970767", "createdAt": "2020-06-29T13:27:57Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MDg0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n          \n          \n            \n            Quarkus could be accessed through proxies that additionally generate headers (e.g. `X-Forwarded-Host`) to keep", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446970848", "createdAt": "2020-06-29T13:28:04Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MTA2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).\n          \n          \n            \n            IMPORTANT: Activating this feature makes the server exposed to several security issues (i.e. information spoofing).", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446971060", "createdAt": "2020-06-29T13:28:25Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n+reflecting the values in these headers.\n+\n+IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MTQyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Both configurations related with standard and non-standard headers can be combine. Therefore, the\n          \n          \n            \n            Both configurations related with standard and non-standard headers can be combined.", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446971423", "createdAt": "2020-06-29T13:28:56Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n+reflecting the values in these headers.\n+\n+IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).\n+Consider activate it only when running behind a reverse proxy.\n+\n+To setup this feature, please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+----\n+\n+To consider only de-facto standard header (`Forwarded` header), please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.allow-forwarded=true\n+----\n+\n+To consider only non-standard headers, please include the following lines instead in `src/main/resources/application.properties`:\n+\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+quarkus.http.proxy.enable-forwarded-host=true\n+quarkus.http.proxy.enable-forwarded-prefix=true\n+----\n+\n+Both configurations related with standard and non-standard headers can be combine. Therefore, the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MTgwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `Forwarded` header will have precedence in presence of both set of headers.\n          \n          \n            \n            In this case, the `Forwarded` header will have precedence in presence of both set of headers.", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446971802", "createdAt": "2020-06-29T13:29:28Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n+reflecting the values in these headers.\n+\n+IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).\n+Consider activate it only when running behind a reverse proxy.\n+\n+To setup this feature, please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+----\n+\n+To consider only de-facto standard header (`Forwarded` header), please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.allow-forwarded=true\n+----\n+\n+To consider only non-standard headers, please include the following lines instead in `src/main/resources/application.properties`:\n+\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+quarkus.http.proxy.enable-forwarded-host=true\n+quarkus.http.proxy.enable-forwarded-prefix=true\n+----\n+\n+Both configurations related with standard and non-standard headers can be combine. Therefore, the\n+`Forwarded` header will have precedence in presence of both set of headers.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MTkxNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Supported forwarding address headers:\n          \n          \n            \n            Supported forwarding address headers are:", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446971915", "createdAt": "2020-06-29T13:29:38Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n+reflecting the values in these headers.\n+\n+IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).\n+Consider activate it only when running behind a reverse proxy.\n+\n+To setup this feature, please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+----\n+\n+To consider only de-facto standard header (`Forwarded` header), please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.allow-forwarded=true\n+----\n+\n+To consider only non-standard headers, please include the following lines instead in `src/main/resources/application.properties`:\n+\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+quarkus.http.proxy.enable-forwarded-host=true\n+quarkus.http.proxy.enable-forwarded-prefix=true\n+----\n+\n+Both configurations related with standard and non-standard headers can be combine. Therefore, the\n+`Forwarded` header will have precedence in presence of both set of headers.\n+\n+Supported forwarding address headers:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3MzMwOA==", "bodyText": "I'm not sure I'm following the purpose of this list?\nAlso are the two headers config documented somewhere?", "url": "https://github.com/quarkusio/quarkus/pull/10266#discussion_r446973308", "createdAt": "2020-06-29T13:31:38Z", "author": {"login": "gsmet"}, "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -703,6 +703,49 @@ java.lang.IllegalStateException: Failed to create cache dir\n \n Assuming `/tmp/` is writeable this can be fixed by setting the `vertx.cacheDirBase` property to point to a directory in `/tmp/` for instance in OpenShift by creating an environment variable `JAVA_OPTS` with the value `-Dvertx.cacheDirBase=/tmp/vertx`.\n \n+== Running behind a reverse proxy\n+\n+Quarkus could be accessed through proxies that additionally generates headers (e.g. `X-Forwarded-Host`) to keep\n+information from the client-facing side of the proxy servers that is altered or lost when they are involved.\n+In those scenarios, Quarkus can be configured to automatically updates information like protocol, host, port and URI\n+reflecting the values in these headers.\n+\n+IMPORTANT: Activate this feature makes the server exposed to several security issues (i.e. information spoofing).\n+Consider activate it only when running behind a reverse proxy.\n+\n+To setup this feature, please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+----\n+\n+To consider only de-facto standard header (`Forwarded` header), please include the following lines in `src/main/resources/application.properties`:\n+[source]\n+----\n+quarkus.http.allow-forwarded=true\n+----\n+\n+To consider only non-standard headers, please include the following lines instead in `src/main/resources/application.properties`:\n+\n+[source]\n+----\n+quarkus.http.proxy-address-forwarding=true\n+quarkus.http.proxy.enable-forwarded-host=true\n+quarkus.http.proxy.enable-forwarded-prefix=true\n+----\n+\n+Both configurations related with standard and non-standard headers can be combine. Therefore, the\n+`Forwarded` header will have precedence in presence of both set of headers.\n+\n+Supported forwarding address headers:\n+\n+* `Forwarded`\n+* `X-Forwarded-Proto`\n+* `X-Forwarded-Host`\n+* `X-Forwarded-Port`\n+* `X-Forwarded-Prefix`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f00103df7f39b09c0e46563da33749599b52d1ed", "author": {"user": {"login": "ejba", "name": "Emanuel Alves"}}, "url": "https://github.com/quarkusio/quarkus/commit/f00103df7f39b09c0e46563da33749599b52d1ed", "committedDate": "2020-06-25T11:58:10Z", "message": "Enable forwarded for prefix header configuration"}, "afterCommit": {"oid": "2fb5b702cac2228cae3b7674ca22b1b31f4ed226", "author": {"user": {"login": "ejba", "name": "Emanuel Alves"}}, "url": "https://github.com/quarkusio/quarkus/commit/2fb5b702cac2228cae3b7674ca22b1b31f4ed226", "committedDate": "2020-06-29T15:43:28Z", "message": "Enable forwarded for prefix header configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2935fbc7e4d5c9f501900f9a0f381785a245d67a", "author": {"user": {"login": "ejba", "name": "Emanuel Alves"}}, "url": "https://github.com/quarkusio/quarkus/commit/2935fbc7e4d5c9f501900f9a0f381785a245d67a", "committedDate": "2020-07-03T07:26:10Z", "message": "Enable forwarded for prefix header configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fb5b702cac2228cae3b7674ca22b1b31f4ed226", "author": {"user": {"login": "ejba", "name": "Emanuel Alves"}}, "url": "https://github.com/quarkusio/quarkus/commit/2fb5b702cac2228cae3b7674ca22b1b31f4ed226", "committedDate": "2020-06-29T15:43:28Z", "message": "Enable forwarded for prefix header configuration"}, "afterCommit": {"oid": "2935fbc7e4d5c9f501900f9a0f381785a245d67a", "author": {"user": {"login": "ejba", "name": "Emanuel Alves"}}, "url": "https://github.com/quarkusio/quarkus/commit/2935fbc7e4d5c9f501900f9a0f381785a245d67a", "committedDate": "2020-07-03T07:26:10Z", "message": "Enable forwarded for prefix header configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjgxMDM4", "url": "https://github.com/quarkusio/quarkus/pull/10266#pullrequestreview-442281038", "createdAt": "2020-07-03T09:30:23Z", "commit": {"oid": "2935fbc7e4d5c9f501900f9a0f381785a245d67a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDQ3NTM0", "url": "https://github.com/quarkusio/quarkus/pull/10266#pullrequestreview-446047534", "createdAt": "2020-07-10T00:15:14Z", "commit": {"oid": "2935fbc7e4d5c9f501900f9a0f381785a245d67a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3717, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}