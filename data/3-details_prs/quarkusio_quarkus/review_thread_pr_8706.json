{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTI3Mjk2", "number": 8706, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNjozNToxOVrODz0WHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTo1ODo1MlrOD0KGLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjYxNTk4OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNjozNToxOVrOGIdaWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNjozNToxOVrOGIdaWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTUyMzY3Mg==", "bodyText": "Two comments here. I think we should use ./gradlew. Maybe we could reuse the one in devtools/gradle. We would need to support both Unix-based OSes and Windows (so use the gradlew.bat on Windows).\nAlso, I think we should specify the version by using the gradle-wrapper.version property defined in build-parent/pom.xml.", "url": "https://github.com/quarkusio/quarkus/pull/8706#discussion_r411523672", "createdAt": "2020-04-20T16:35:19Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/pom.xml", "diffHunk": "@@ -65,6 +65,27 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>exec-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>generate-gradle-wrapper</id>\n+                        <phase>prepare-package</phase>\n+                        <configuration>\n+                            <executable>gradle</executable>\n+                            <arguments>\n+                                <argument>wrapper</argument>\n+                            </arguments>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5745e5f54cc158ef2c69e48583e978134a74eac1"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDE3ODY4OnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTo1ODo0MFrOGI9Vfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTo1ODo0MFrOGI9Vfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0NjcxOA==", "bodyText": "Shouldn't we just drop the part where we try to use a local Gradle? I think copying things is better.", "url": "https://github.com/quarkusio/quarkus/pull/8706#discussion_r412046718", "createdAt": "2020-04-21T09:58:40Z", "author": {"login": "gsmet"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "diffHunk": "@@ -248,7 +253,10 @@ private void createGradleWrapper(File projectDirectory, Properties props) {\n                 getLog().warn(\"Unable to install the Gradle wrapper (./gradlew) in project. See log for details.\");\n             }\n \n-        } catch (InterruptedException | IOException e) {\n+        } catch (IOException e) {\n+            getLog().warn(\"Unable to install the Gradle wrapper with gradle. Gradle wrapper is going to be copy.\");\n+            copyGradleWrapperFiles(platform, writer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71eed2f7ecdb2f6bac75711a3fff4f656a56120d"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDE3OTY1OnYy", "diffSide": "RIGHT", "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTo1ODo1MlrOGI9WEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwOTo1ODo1MlrOGI9WEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0Njg2Nw==", "bodyText": "We don't want to lose the exception.", "url": "https://github.com/quarkusio/quarkus/pull/8706#discussion_r412046867", "createdAt": "2020-04-21T09:58:52Z", "author": {"login": "gsmet"}, "path": "devtools/maven/src/main/java/io/quarkus/maven/CreateProjectMojo.java", "diffHunk": "@@ -257,6 +265,28 @@ private void createGradleWrapper(File projectDirectory, Properties props) {\n \n     }\n \n+    private void copyGradleWrapperFiles(QuarkusPlatformDescriptor platform, ProjectWriter writer) {\n+        try {\n+            writer.mkdirs(\"gradle/wrapper\");\n+\n+            for (String filename : CreateUtils.GRADLE_WRAPPER_FILES) {\n+                byte[] fileContent = platform.loadResource(Paths.get(CreateUtils.GRADLE_WRAPPER_PATH, filename).toString(),\n+                        is -> {\n+                            byte[] buffer = new byte[is.available()];\n+                            is.read(buffer);\n+                            return buffer;\n+                        });\n+                final Path destination = writer.getProjectFolder().toPath().resolve(filename);\n+                Files.write(destination, fileContent);\n+            }\n+\n+            new File(writer.getProjectFolder(), \"gradlew\").setExecutable(true);\n+            new File(writer.getProjectFolder(), \"gradlew.bat\").setExecutable(true);\n+        } catch (IOException e) {\n+            getLog().error(\"Unable to copy Gradle wrapper from platform descriptor\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71eed2f7ecdb2f6bac75711a3fff4f656a56120d"}, "originalPosition": 71}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3392, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}