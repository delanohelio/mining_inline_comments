{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTQyOTUz", "number": 8602, "title": "Qute if section - consider truthy/falsy values during evaluation", "bodyText": "resolves #8582", "createdAt": "2020-04-15T19:20:13Z", "url": "https://github.com/quarkusio/quarkus/pull/8602", "merged": true, "mergeCommit": {"oid": "809126ab4a7eed12c7672999c5254186ee3d53ad"}, "closed": true, "closedAt": "2020-04-16T17:00:26Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX-4YJABqjMyMzczMjM2NjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYPvFQAFqTM5NDgyODAzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdad4e611723ca66044e851d9cb857d5f8731c7a", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/bdad4e611723ca66044e851d9cb857d5f8731c7a", "committedDate": "2020-04-15T19:19:20Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}, "afterCommit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/0fd696ac6c03eac2f93d9f96351f7e7df261447d", "committedDate": "2020-04-15T21:21:53Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzQ5OTk1", "url": "https://github.com/quarkusio/quarkus/pull/8602#pullrequestreview-394349995", "createdAt": "2020-04-16T07:04:22Z", "commit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowNDoyMlrOGGXUTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowNDoyMlrOGGXUTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTMyNjY3MQ==", "bodyText": "BigInteger?\nAlso perhaps AtomicInteger and AtomicLong and AtomicDouble?", "url": "https://github.com/quarkusio/quarkus/pull/8602#discussion_r409326671", "createdAt": "2020-04-16T07:04:22Z", "author": {"login": "Ladicek"}, "path": "independent-projects/qute/core/src/main/java/io/quarkus/qute/Booleans.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package io.quarkus.qute;\n+\n+import io.quarkus.qute.Results.Result;\n+import java.lang.reflect.Array;\n+import java.math.BigDecimal;\n+import java.util.Collection;\n+import java.util.Map;\n+\n+public final class Booleans {\n+\n+    private static final Long LONG_ZERO = 0L;\n+    private static final Integer INTEGER_ZERO = 0;\n+    private static final Short SHORT_ZERO = 0;\n+    private static final Byte BYTE_ZERO = 0;\n+    private static final Double DOUBLE_ZERO = 0.0;\n+    private static final Float FLOAT_ZERO = 0.0F;\n+\n+    private Booleans() {\n+    }\n+\n+    /**\n+     * A value is considered falsy if it's null, {@link Result#NOT_FOUND}, {code false}, an empty collection, an empty map, an\n+     * empty array, an empty string/char sequence or a number equal to zero.\n+     * \n+     * @param value\n+     * @return {@code true} if the value is falsy\n+     */\n+    public static boolean isFalsy(Object value) {\n+        if (value == null || Results.Result.NOT_FOUND.equals(value)) {\n+            return true;\n+        } else if (value instanceof Boolean) {\n+            return !(Boolean) value;\n+        } else if (value instanceof Collection) {\n+            return ((Collection<?>) value).isEmpty();\n+        } else if (value instanceof Map) {\n+            return ((Map<?, ?>) value).isEmpty();\n+        } else if (value.getClass().isArray()) {\n+            return Array.getLength(value) == 0;\n+        } else if (value instanceof CharSequence) {\n+            return ((CharSequence) value).length() == 0;\n+        } else if (value instanceof Number) {\n+            return isZero((Number) value);\n+        }\n+        return false;\n+    }\n+\n+    private static boolean isZero(Number number) {\n+        if (number instanceof BigDecimal) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzUwMTA3", "url": "https://github.com/quarkusio/quarkus/pull/8602#pullrequestreview-394350107", "createdAt": "2020-04-16T07:04:32Z", "commit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowNDozM1rOGGXUlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowNDozM1rOGGXUlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTMyNjc0Mg==", "bodyText": "AtomicBoolean perhaps?", "url": "https://github.com/quarkusio/quarkus/pull/8602#discussion_r409326742", "createdAt": "2020-04-16T07:04:33Z", "author": {"login": "Ladicek"}, "path": "independent-projects/qute/core/src/main/java/io/quarkus/qute/Booleans.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package io.quarkus.qute;\n+\n+import io.quarkus.qute.Results.Result;\n+import java.lang.reflect.Array;\n+import java.math.BigDecimal;\n+import java.util.Collection;\n+import java.util.Map;\n+\n+public final class Booleans {\n+\n+    private static final Long LONG_ZERO = 0L;\n+    private static final Integer INTEGER_ZERO = 0;\n+    private static final Short SHORT_ZERO = 0;\n+    private static final Byte BYTE_ZERO = 0;\n+    private static final Double DOUBLE_ZERO = 0.0;\n+    private static final Float FLOAT_ZERO = 0.0F;\n+\n+    private Booleans() {\n+    }\n+\n+    /**\n+     * A value is considered falsy if it's null, {@link Result#NOT_FOUND}, {code false}, an empty collection, an empty map, an\n+     * empty array, an empty string/char sequence or a number equal to zero.\n+     * \n+     * @param value\n+     * @return {@code true} if the value is falsy\n+     */\n+    public static boolean isFalsy(Object value) {\n+        if (value == null || Results.Result.NOT_FOUND.equals(value)) {\n+            return true;\n+        } else if (value instanceof Boolean) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzUzMjQ5", "url": "https://github.com/quarkusio/quarkus/pull/8602#pullrequestreview-394353249", "createdAt": "2020-04-16T07:09:51Z", "commit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowOTo1MVrOGGXeUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzowOTo1MVrOGGXeUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTMyOTIzMw==", "bodyText": "This text is repeated twice, perhaps better to factor it out to a separate section?", "url": "https://github.com/quarkusio/quarkus/pull/8602#discussion_r409329233", "createdAt": "2020-04-16T07:09:51Z", "author": {"login": "Ladicek"}, "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -374,8 +376,9 @@ The output will be:\n [[if_section]]\n ===== If Section\n \n-A basic control flow section.\n-The simplest possible version accepts a single parameter and renders the content if it's evaluated to `true` (or `Boolean.TRUE`).\n+The `if` section represents a basic control flow section.\n+The simplest possible version accepts a single parameter and renders the content if the condition is evaluated to `true`.\n+A condition without an operator evaluates to `true` if the value is not considered `falsy`, i.e. if the value is not `null`, `false`, an empty collection, an empty map, an empty array, an empty string/char sequence or a number equal to zero.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0fd696ac6c03eac2f93d9f96351f7e7df261447d", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/0fd696ac6c03eac2f93d9f96351f7e7df261447d", "committedDate": "2020-04-15T21:21:53Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}, "afterCommit": {"oid": "fc5529e577a24362f0e56737839ae8a8e89ae82c", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/fc5529e577a24362f0e56737839ae8a8e89ae82c", "committedDate": "2020-04-16T07:37:58Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc5529e577a24362f0e56737839ae8a8e89ae82c", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/fc5529e577a24362f0e56737839ae8a8e89ae82c", "committedDate": "2020-04-16T07:37:58Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}, "afterCommit": {"oid": "dfb19948c27aa9910765eca7feaef63ae2bc2acc", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/dfb19948c27aa9910765eca7feaef63ae2bc2acc", "committedDate": "2020-04-16T07:41:40Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfb19948c27aa9910765eca7feaef63ae2bc2acc", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/dfb19948c27aa9910765eca7feaef63ae2bc2acc", "committedDate": "2020-04-16T07:41:40Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}, "afterCommit": {"oid": "3c031d82fb80b354cbfd0d71735f31afdcd7eaf4", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/3c031d82fb80b354cbfd0d71735f31afdcd7eaf4", "committedDate": "2020-04-16T07:51:34Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aea98a187e88dfc4e1a06c4369dd63eac3a24ac5", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/aea98a187e88dfc4e1a06c4369dd63eac3a24ac5", "committedDate": "2020-04-16T14:11:25Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c031d82fb80b354cbfd0d71735f31afdcd7eaf4", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/3c031d82fb80b354cbfd0d71735f31afdcd7eaf4", "committedDate": "2020-04-16T07:51:34Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}, "afterCommit": {"oid": "aea98a187e88dfc4e1a06c4369dd63eac3a24ac5", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/aea98a187e88dfc4e1a06c4369dd63eac3a24ac5", "committedDate": "2020-04-16T14:11:25Z", "message": "Qute if section - consider truthy/falsy values during evaluation\n\n- resolves #8582"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODI4MDM3", "url": "https://github.com/quarkusio/quarkus/pull/8602#pullrequestreview-394828037", "createdAt": "2020-04-16T17:00:16Z", "commit": {"oid": "aea98a187e88dfc4e1a06c4369dd63eac3a24ac5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4599, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}