{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2Nzc0MzI3", "number": 13460, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMToxMjoyMlrOE87IBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMToxMjoyMlrOE87IBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMzE4NzI0OnYy", "diffSide": "RIGHT", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "isResolved": true, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMToxMjoyMlrOH5VWiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo0ODoxMlrOH50MRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg==", "bodyText": "I'm kinda on the fence about having such a separate configuration root.\nI think it might be weird for a used that prometheus configuration would only affect Kubernetes manifests.\n@iocanel WDYT?", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r529880712", "createdAt": "2020-11-24T21:12:22Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4NTM0OA==", "bodyText": "This is what I was asking about. I ended up making it its own thing because of how the annotations are added (as a subcontext for minikube, openshift, and vanilla kubernetes).\nI wanted to be able to re-ingest that prefix value..\n@ConfigItem(defaultValue = \"${quarkus.prometheus.prefix}/path\")\nAs soon as this configuration is nested, e.g. underneath Kubernetes:\n@ConfigItem(defaultValue = \"${quarkus.kubernetes.prometheus.prefix}/path\")\nIt may be just how I attempted it the first time, but the hierarchy of configuration between the kubernetes types made this a little tricky for me to sort out how to do (specifically to ensure I could reuse that prefix as the default value for other attributes), given I think I could end up with ${quarkus.openshift.prometheus.prefix}/path or whatever.\n@geoand .. you're supposed to be reading. TOMORROW.", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r529885348", "createdAt": "2020-11-24T21:20:56Z", "author": {"login": "ebullient"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE0NDM4Mw==", "bodyText": "I think we should probably move this configuration part of io.quarkus.kubernetes.deployment.PlatformConfiguration", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530144383", "createdAt": "2020-11-25T06:57:49Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM1MDcwNA==", "bodyText": "That's where I put it initially, but I couldn't figure out how to do that w/o having it become ${quarkus.kubernetes.prometheus.prefix}/path or ${quarkus.openshift.prometheus.prefix}/path or ...", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530350704", "createdAt": "2020-11-25T12:51:41Z", "author": {"login": "ebullient"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM1MTM3Mw==", "bodyText": "It would be come that. But what is that a problem?", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530351373", "createdAt": "2020-11-25T12:52:44Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM1MjYwNw==", "bodyText": "See my first comment about setting default values.  I don't see how I can do that from one common place when the String is different depending on kube flavor.", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530352607", "createdAt": "2020-11-25T12:54:34Z", "author": {"login": "ebullient"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM1MzUyNg==", "bodyText": "OK, I see.\nYou'll have to do that manually in the processor code.", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530353526", "createdAt": "2020-11-25T12:56:03Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM4MzkyOA==", "bodyText": "Right. From a documentation perspective (understanding how default values are set, etc), that's why I thought it was more appropriate (in the end) to make it its own thing. There are a few other cross-config references w/in the kube space, but they are into other config roots (container config), so this isn't a problem in those cases.", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530383928", "createdAt": "2020-11-25T13:44:59Z", "author": {"login": "ebullient"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM4NTk4OA==", "bodyText": "Yeah, as this config is only about Kubernetes and not standalone Prometeus, it really sure should be properly namespaced.\nIt's a bit more work, but it should be worth it.", "url": "https://github.com/quarkusio/quarkus/pull/13460#discussion_r530385988", "createdAt": "2020-11-25T13:48:12Z", "author": {"login": "geoand"}, "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/PrometheusConfiguration.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot\n+public class PrometheusConfiguration {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4MDcxMg=="}, "originalCommit": {"oid": "f13f10c003ca73edd157f07daa8b6c4e7528e24a"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3827, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}