{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMDkzNTk2", "number": 8911, "title": "Add the singleton scope to beans produced by the JsonbProducer", "bodyText": "This avoids re-creating the bean each time.\nThe cost to create the bean has shown up in some startup profile for kafka messaging based application, when using the provided JsonbSerializer/Deserializer they recover a Jsonb instance from Arc and multiple ones was created.\nAfter this fix none are created (Jsonb is created once for all usage).", "createdAt": "2020-04-28T12:44:32Z", "url": "https://github.com/quarkusio/quarkus/pull/8911", "merged": true, "mergeCommit": {"oid": "581ccdf1689b13e36a3d4876ec0361441504bfa2"}, "closed": true, "closedAt": "2020-04-29T05:19:17Z", "author": {"login": "loicmathieu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccDWyZAFqTQwMTgwMDk0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccEv6fgBqjMyODA1OTI5NTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODAwOTQ0", "url": "https://github.com/quarkusio/quarkus/pull/8911#pullrequestreview-401800944", "createdAt": "2020-04-28T12:50:34Z", "commit": {"oid": "14ac3da4c86e55893c04f4d3c5fda3791d98b831"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODQ4OTAw", "url": "https://github.com/quarkusio/quarkus/pull/8911#pullrequestreview-401848900", "createdAt": "2020-04-28T13:44:01Z", "commit": {"oid": "14ac3da4c86e55893c04f4d3c5fda3791d98b831"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMzo0NDowMVrOGNUuyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMzo0NDowMVrOGNUuyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjYyNDMyOA==", "bodyText": "JsonbConfig is not thread safe. So I don't think it's a good idea to share the instance. Do we really need to expose it as a bean?", "url": "https://github.com/quarkusio/quarkus/pull/8911#discussion_r416624328", "createdAt": "2020-04-28T13:44:01Z", "author": {"login": "mkouba"}, "path": "extensions/jsonb/runtime/src/main/java/io/quarkus/jsonb/JsonbProducer.java", "diffHunk": "@@ -13,6 +13,7 @@\n public class JsonbProducer {\n \n     @Produces\n+    @Singleton\n     @DefaultBean\n     public JsonbConfig jsonbConfig(Instance<JsonbConfigCustomizer> customizers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ac3da4c86e55893c04f4d3c5fda3791d98b831"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "532605411be3b49b0ca3a0a4b6a8ea85910b5b81", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/quarkusio/quarkus/commit/532605411be3b49b0ca3a0a4b6a8ea85910b5b81", "committedDate": "2020-04-28T14:27:40Z", "message": "Add the singleton scope to beans produces by the JsonbProducer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14ac3da4c86e55893c04f4d3c5fda3791d98b831", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/quarkusio/quarkus/commit/14ac3da4c86e55893c04f4d3c5fda3791d98b831", "committedDate": "2020-04-28T10:00:36Z", "message": "Add the singleton scope to beans produces by the JsonbProducer"}, "afterCommit": {"oid": "532605411be3b49b0ca3a0a4b6a8ea85910b5b81", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/quarkusio/quarkus/commit/532605411be3b49b0ca3a0a4b6a8ea85910b5b81", "committedDate": "2020-04-28T14:27:40Z", "message": "Add the singleton scope to beans produces by the JsonbProducer"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4381, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}