{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNzk3OTA5", "number": 6989, "title": "ArC - improve automatic registration for reflection", "bodyText": "previously we did not register constructor for reflection when an @AroundConstruct interceptor was used\nresolves #6898", "createdAt": "2020-02-04T11:58:52Z", "url": "https://github.com/quarkusio/quarkus/pull/6989", "merged": true, "mergeCommit": {"oid": "44a8f6c1065829b13a833c6b26768796800ccc47"}, "closed": true, "closedAt": "2020-02-05T20:34:32Z", "author": {"login": "mkouba"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBC9ENgH2gAyMzcwNzk3OTA5OjkwZmRlODcxZWM3MTlhZDYyZjg4ZmEzNGQwOTg2M2Q3OWM2MjQxOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBSZpvgH2gAyMzcwNzk3OTA5OjIyNmY2ZGJkMzU5MmMxOTYyMTEwZDk0ZjM3ODYxNjY5ODVhN2UzNmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "90fde871ec719ad62f88fa34d09863d79c624197", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/90fde871ec719ad62f88fa34d09863d79c624197", "committedDate": "2020-02-04T15:06:31Z", "message": "ArC - improve automatic registration for reflection\n\n- previously we did not register constructor for reflection when an @AroundConstruct interceptor was used\n- resolves #6898"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49feb5e34c03b2097b0331c44de6acdf82cb62a9", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/49feb5e34c03b2097b0331c44de6acdf82cb62a9", "committedDate": "2020-02-04T11:57:45Z", "message": "ArC - improve automatic registration for reflection\n\n- previously we did not register constructor for reflection when an @AroundConstruct interceptor was used\n- resolves #6898"}, "afterCommit": {"oid": "90fde871ec719ad62f88fa34d09863d79c624197", "author": {"user": {"login": "mkouba", "name": "Martin Kouba"}}, "url": "https://github.com/quarkusio/quarkus/commit/90fde871ec719ad62f88fa34d09863d79c624197", "committedDate": "2020-02-04T15:06:31Z", "message": "ArC - improve automatic registration for reflection\n\n- previously we did not register constructor for reflection when an @AroundConstruct interceptor was used\n- resolves #6898"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDUxODky", "url": "https://github.com/quarkusio/quarkus/pull/6989#pullrequestreview-353051892", "createdAt": "2020-02-04T15:10:24Z", "commit": {"oid": "90fde871ec719ad62f88fa34d09863d79c624197"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNDcxMjY1", "url": "https://github.com/quarkusio/quarkus/pull/6989#pullrequestreview-353471265", "createdAt": "2020-02-05T05:18:38Z", "commit": {"oid": "90fde871ec719ad62f88fa34d09863d79c624197"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwNToxODozOVrOFlsDpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwNToxODozOVrOFlsDpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MzQ2MQ==", "bodyText": "Shouldn't we add an assertion in io.quarkus.it.main.MetricsTestCase or somewhere to make sure the gauge really gets registered?", "url": "https://github.com/quarkusio/quarkus/pull/6989#discussion_r375063461", "createdAt": "2020-02-05T05:18:39Z", "author": {"login": "jmartisk"}, "path": "integration-tests/main/src/main/java/io/quarkus/it/metrics/DummyGauge.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package io.quarkus.it.metrics;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.event.Observes;\n+import javax.interceptor.AroundConstruct;\n+\n+import org.eclipse.microprofile.metrics.MetricUnits;\n+import org.eclipse.microprofile.metrics.annotation.Gauge;\n+\n+import io.quarkus.runtime.StartupEvent;\n+\n+/**\n+ * The purpose of this bean is to test that ArC automatically registers the constructor for reflection if an\n+ * {@link AroundConstruct} interceptors is used. We use a dedicated bean to make sure the class is not registered by another\n+ * extension, ie. by resteasy in case of JAX-RS resource.\n+ * \n+ * See https://github.com/quarkusio/quarkus/issues/6898\n+ */\n+@ApplicationScoped\n+public class DummyGauge {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90fde871ec719ad62f88fa34d09863d79c624197"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "226f6dbd3592c1962110d94f3786166985a7e36c", "author": {"user": {"login": "jmartisk", "name": "Jan Martiska"}}, "url": "https://github.com/quarkusio/quarkus/commit/226f6dbd3592c1962110d94f3786166985a7e36c", "committedDate": "2020-02-05T09:06:19Z", "message": "Finish test for DummyGauge"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 68, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}