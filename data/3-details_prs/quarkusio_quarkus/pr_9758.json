{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NDE0Mzcy", "number": 9758, "title": "Properly support defining env vars from secret/configmap keys", "bodyText": "Fixes #9629\n\n Restore (undocumented) behavior that was broken with the new style configuration\n Provide new style configuration for defining env vars from secret/configmap keys\n Check/improve validation\n Add integration tests\n Update documentation", "createdAt": "2020-06-03T19:42:45Z", "url": "https://github.com/quarkusio/quarkus/pull/9758", "merged": true, "mergeCommit": {"oid": "2383a1f8456587f954a9ee3a99fcdf9b8621c839"}, "closed": true, "closedAt": "2020-06-11T16:27:29Z", "author": {"login": "metacosm"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoRpsngBqjM0MTEwNDY3Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqQKe9AFqTQyOTA0MTk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfd4a829ffaf4e4e75b66366d6a5cfeff446fced", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/cfd4a829ffaf4e4e75b66366d6a5cfeff446fced", "committedDate": "2020-06-05T09:03:56Z", "message": "feat: warn when importing both from secret/cm using same property name"}, "afterCommit": {"oid": "b3cb6ee49333d226b9e48309c30c95b6c15beee3", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/b3cb6ee49333d226b9e48309c30c95b6c15beee3", "committedDate": "2020-06-05T09:22:04Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3cb6ee49333d226b9e48309c30c95b6c15beee3", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/b3cb6ee49333d226b9e48309c30c95b6c15beee3", "committedDate": "2020-06-05T09:22:04Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}, "afterCommit": {"oid": "8f531a9b08b2097733581abbf018f0b918dcc48e", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/8f531a9b08b2097733581abbf018f0b918dcc48e", "committedDate": "2020-06-07T20:27:58Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MDI0NTk1", "url": "https://github.com/quarkusio/quarkus/pull/9758#pullrequestreview-427024595", "createdAt": "2020-06-09T10:57:58Z", "commit": {"oid": "8f531a9b08b2097733581abbf018f0b918dcc48e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMDo1Nzo1OFrOGhEACg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMDo1ODo0N1rOGhEByg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMyMTczOA==", "bodyText": "I think that we do need to also test the case where we map a configmap property to env vars.\nNote: This already exists for old style in branch 3.11 so you could pick it up from there.", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r437321738", "createdAt": "2020-06-09T10:57:58Z", "author": {"login": "iocanel"}, "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-configmap.properties", "diffHunk": "@@ -0,0 +1 @@\n+quarkus.kubernetes.env.configmaps=my-configmap", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f531a9b08b2097733581abbf018f0b918dcc48e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMyMjE4Ng==", "bodyText": "I think that we do need to also test the case where we map a secret property to env vars.\nNote: This already exists for old style in branch 3.11 so you could pick it up from there.", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r437322186", "createdAt": "2020-06-09T10:58:47Z", "author": {"login": "iocanel"}, "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-secret.properties", "diffHunk": "@@ -1 +1 @@\n-quarkus.kubernetes.env-vars.ignored.secret=my-secret\n+quarkus.kubernetes.env.secrets=my-secret", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f531a9b08b2097733581abbf018f0b918dcc48e"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "591fa4aa16b2a027ec7d0c9ab6d6882e63728dfc", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/591fa4aa16b2a027ec7d0c9ab6d6882e63728dfc", "committedDate": "2020-06-09T13:22:39Z", "message": "chore: add tests from secret/configmap key"}, "afterCommit": {"oid": "eb04499d69c76d91abab041a5d9431b1eb437516", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/eb04499d69c76d91abab041a5d9431b1eb437516", "committedDate": "2020-06-09T15:18:40Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MTc2NzA3", "url": "https://github.com/quarkusio/quarkus/pull/9758#pullrequestreview-428176707", "createdAt": "2020-06-10T15:30:31Z", "commit": {"oid": "eb04499d69c76d91abab041a5d9431b1eb437516"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNTozMDozMlrOGh6htQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNTozMDozMlrOGh6htQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNTA5Mw==", "bodyText": "@metacosm: Since you've asked about naming ... How about\nquarkus.kubernetes.env.secret.db-password.secret=db-secret\nquarkus.kubernetes.env.secret.db-password.key=database.password", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r438215093", "createdAt": "2020-06-10T15:30:32Z", "author": {"login": "iocanel"}, "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-secret.properties", "diffHunk": "@@ -1 +1,3 @@\n-quarkus.kubernetes.env-vars.ignored.secret=my-secret\n+quarkus.kubernetes.env.secrets=my-secret\n+quarkus.kubernetes.env.vars-from-secret.db-password.secret=db-secret", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb04499d69c76d91abab041a5d9431b1eb437516"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "committedDate": "2020-06-11T12:44:49Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb04499d69c76d91abab041a5d9431b1eb437516", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/eb04499d69c76d91abab041a5d9431b1eb437516", "committedDate": "2020-06-09T15:18:40Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}, "afterCommit": {"oid": "ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "author": {"user": {"login": "metacosm", "name": "Chris Laprun"}}, "url": "https://github.com/quarkusio/quarkus/commit/ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "committedDate": "2020-06-11T12:44:49Z", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MDQxOTg5", "url": "https://github.com/quarkusio/quarkus/pull/9758#pullrequestreview-429041989", "createdAt": "2020-06-11T15:40:50Z", "commit": {"oid": "ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4428, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}