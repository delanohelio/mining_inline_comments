{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMTcxODk0", "number": 6528, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNToyNDozMVrODXjowA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODowNjozNlrODXm8tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDI3NzEyOnYy", "diffSide": "LEFT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNToyNDozMVrOFc6ghQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNToyNDozMVrOFc6ghQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2MzA0NQ==", "bodyText": "No FROM ?", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365863045", "createdAt": "2020-01-13T15:24:31Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDMwMDUyOnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozMTowNVrOFc6u1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1NTowNVrOFc7jqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NjcwOA==", "bodyText": "You have 2 entry points?", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365866708", "createdAt": "2020-01-13T15:31:05Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n \n-# Be prepared for running in OpenShift too\n-RUN adduser -G root --no-create-home --disabled-password 1001 \\\n-  && chown -R 1001 /deployments \\\n-  && chmod -R \"g+rwX\" /deployments \\\n-  && chown -R 1001:root /deployments\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n \n COPY ${build_dir}/lib/* /deployments/lib/\n COPY ${build_dir}/*-runner.jar /deployments/app.jar\n-EXPOSE 8080\n+ENTRYPOINT [ \"/deployments/run-java.sh\" ]\n \n-# run with user 1001\n+EXPOSE 8080\n USER 1001\n \n ENTRYPOINT [ \"/deployments/run-java.sh\" ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MDIzMw==", "bodyText": "Sorry, bad copy and paste, it's been fixed.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365880233", "createdAt": "2020-01-13T15:55:05Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n \n-# Be prepared for running in OpenShift too\n-RUN adduser -G root --no-create-home --disabled-password 1001 \\\n-  && chown -R 1001 /deployments \\\n-  && chmod -R \"g+rwX\" /deployments \\\n-  && chown -R 1001:root /deployments\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n \n COPY ${build_dir}/lib/* /deployments/lib/\n COPY ${build_dir}/*-runner.jar /deployments/app.jar\n-EXPOSE 8080\n+ENTRYPOINT [ \"/deployments/run-java.sh\" ]\n \n-# run with user 1001\n+EXPOSE 8080\n USER 1001\n \n ENTRYPOINT [ \"/deployments/run-java.sh\" ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NjcwOA=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDMwMjQ3OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozMTozOVrOFc6wBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1Nzo0OVrOFc7qEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NzAxNA==", "bodyText": "you don't need any recursion as this directory was just created, no?", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365867014", "createdAt": "2020-01-13T15:31:39Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg3NDgzOA==", "bodyText": "Right, I took that from the existing file. We can simplify.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365874838", "createdAt": "2020-01-13T15:45:45Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NzAxNA=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MTg3Mg==", "bodyText": "Done.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365881872", "createdAt": "2020-01-13T15:57:49Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NzAxNA=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDMxMTU1OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozNDoxNlrOFc61wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjowNjoxN1rOFc78hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ4MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n          \n          \n            \n                && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365868481", "createdAt": "2020-01-13T15:34:16Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MTk1Mw==", "bodyText": "Fixed.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365881953", "createdAt": "2020-01-13T15:57:57Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ4MQ=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MjExMQ==", "bodyText": "Actually wondering if we should use a specific mirror.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365882111", "createdAt": "2020-01-13T15:58:13Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ4MQ=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NjQwMA==", "bodyText": "https://central.maven.org/ is a better choice AFAIK (even though it resolves to the same host)", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365886400", "createdAt": "2020-01-13T16:05:54Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ4MQ=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NjU5OA==", "bodyText": "It should be fine actually, the user can change it if a specific mirror is required.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365886598", "createdAt": "2020-01-13T16:06:17Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ4MQ=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDMxNTA3OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozNToyMVrOFc637Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1Nzo0MFrOFc7ppA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2OTAzNw==", "bodyText": "Looks like you defined two entrypoints? (see https://github.com/quarkusio/quarkus/pull/6528/files#diff-9e12667a22b8cd0de271bd24a18b11d6R41)", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365869037", "createdAt": "2020-01-13T15:35:21Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n \n-# Be prepared for running in OpenShift too\n-RUN adduser -G root --no-create-home --disabled-password 1001 \\\n-  && chown -R 1001 /deployments \\\n-  && chmod -R \"g+rwX\" /deployments \\\n-  && chown -R 1001:root /deployments\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n \n COPY ${build_dir}/lib/* /deployments/lib/\n COPY ${build_dir}/*-runner.jar /deployments/app.jar\n-EXPOSE 8080\n+ENTRYPOINT [ \"/deployments/run-java.sh\" ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MTc2NA==", "bodyText": "Fixed, bad copy and paste.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365881764", "createdAt": "2020-01-13T15:57:40Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\\n+    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security\n \n-# Be prepared for running in OpenShift too\n-RUN adduser -G root --no-create-home --disabled-password 1001 \\\n-  && chown -R 1001 /deployments \\\n-  && chmod -R \"g+rwX\" /deployments \\\n-  && chown -R 1001:root /deployments\n+ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n \n COPY ${build_dir}/lib/* /deployments/lib/\n COPY ${build_dir}/*-runner.jar /deployments/app.jar\n-EXPOSE 8080\n+ENTRYPOINT [ \"/deployments/run-java.sh\" ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2OTAzNw=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDMxNTE3OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozNToyMlrOFc63-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1ODozMFrOFc7roA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2OTA1MA==", "bodyText": "I think it should be chown with the right owner and then only made 750. Or maybe it should even not be made writable.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365869050", "createdAt": "2020-01-13T15:35:22Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MjI3Mg==", "bodyText": "I've reduced it even more to 740.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365882272", "createdAt": "2020-01-13T15:58:30Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,28 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown -R 1001 /deployments \\\n+    && chmod -R \"g+rwX\" /deployments \\\n+    && chown -R 1001:root /deployments \\\n+    && curl http://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh > /deployments/run-java.sh \\\n+    && chmod 755 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2OTA1MA=="}, "originalCommit": {"oid": "b56c33c13df6ba644072d5413f7c1083ae1655ce"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDQwNTE2OnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1OTo0OVrOFc7ulw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNzowNzo0OVrOFc-AnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ==", "bodyText": "Shouldn't 550 work i.e. just executable and not modifiable by anyone? That would make the file immutable.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365883031", "createdAt": "2020-01-13T15:59:49Z", "author": {"login": "gsmet"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NDIxMw==", "bodyText": "Do we want the file to be executable by anyone from the group?\n540 seems ok, no?\n\nExecutable by 1001\nReadable by the root group - but not executable\nInvisible for anyone else", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365884213", "createdAt": "2020-01-13T16:01:51Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ=="}, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NzAwNA==", "bodyText": "So should it be 540 or 740 as is in the code now?", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365887004", "createdAt": "2020-01-13T16:07:04Z", "author": {"login": "geoand"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ=="}, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4ODE5MA==", "bodyText": "@geoand we are hesitating between 540 or 550 :-D", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365888190", "createdAt": "2020-01-13T16:09:21Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ=="}, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg5MDA1Mw==", "bodyText": "My vote is for 540 since we generally try to make sure the process isn't run by root right?", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365890053", "createdAt": "2020-01-13T16:12:40Z", "author": {"login": "geoand"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ=="}, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyMDQxMg==", "bodyText": "540 is it!", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365920412", "createdAt": "2020-01-13T17:07:49Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1\n+\n+ARG JAVA_PACKAGE=java-1.8.0-openjdk-headless\n+ARG RUN_JAVA_VERSION=1.3.5\n+\n+# Install java and the run-java script\n+# Also set up permissions for user `1001`\n+RUN microdnf install ${JAVA_PACKAGE} \\\n+    && microdnf clean all \\\n+    && mkdir /deployments \\\n+    && chown 1001 /deployments \\\n+    && chmod \"g+rwX\" /deployments \\\n+    && chown 1001:root /deployments \\\n+    && curl https://repo1.maven.org/maven2/io/fabric8/run-java-sh/${RUN_JAVA_VERSION}/run-java-sh-${RUN_JAVA_VERSION}-sh.sh -o /deployments/run-java.sh \\\n+    && chown 1001 /deployments/run-java.sh \\\n+    && chmod 740 /deployments/run-java.sh \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4MzAzMQ=="}, "originalCommit": {"oid": "d9fd417792f0225b9bb08ecd084c14a8ae38f7c6"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDgxOTcyOnYy", "diffSide": "RIGHT", "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODowNjozNlrOFc_twQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowNTo0N1rOFdDBig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk0ODM1Mw==", "bodyText": "In https://access.redhat.com/containers/?tab=images#/registry.access.redhat.com/ubi8/ubi-minimal the recommended URL is registry.redhat.io/ubi8/ubi-minimal instead of registry.access.redhat.com", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365948353", "createdAt": "2020-01-13T18:06:36Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0148f9181c9fd00ca356271e29eb2423b627c80e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk1MTM1Mw==", "bodyText": "See https://www.redhat.com/en/blog/transitioning-red-hat-container-registry", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365951353", "createdAt": "2020-01-13T18:13:27Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk0ODM1Mw=="}, "originalCommit": {"oid": "0148f9181c9fd00ca356271e29eb2423b627c80e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk1MjU2Mw==", "bodyText": "ok, didn't know that. The native Dockerfile is also using registry.access.redhat.com", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365952563", "createdAt": "2020-01-13T18:16:17Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk0ODM1Mw=="}, "originalCommit": {"oid": "0148f9181c9fd00ca356271e29eb2423b627c80e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk1Mjg2Mg==", "bodyText": "Yeah, now it's the time to use the suggested one \ud83d\ude09", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r365952862", "createdAt": "2020-01-13T18:17:00Z", "author": {"login": "gastaldi"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk0ODM1Mw=="}, "originalCommit": {"oid": "0148f9181c9fd00ca356271e29eb2423b627c80e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAwMjU3MA==", "bodyText": "$docker pull registry.redhat.io/ubi8/ubi-minimal:8.1                                              \nError response from daemon: Get https://registry.redhat.io/v2/ubi8/ubi-minimal/manifests/8.1: unauthorized: Please login to the Red Hat Registry using your Customer Portal credentials. Further instructions can be found here: https://access.redhat.com/RegistryAuthentication\n\nI know why it's recommended. But it's not user-friendly.", "url": "https://github.com/quarkusio/quarkus/pull/6528#discussion_r366002570", "createdAt": "2020-01-13T20:05:47Z", "author": {"login": "cescoffier"}, "path": "devtools/platform-descriptor-json/src/main/resources/templates/dockerfile-jvm.ftl", "diffHunk": "@@ -14,21 +14,30 @@\n # docker run -i --rm -p 8080:8080 quarkus/${project_artifactId}-jvm\n #\n ###\n-FROM fabric8/java-alpine-openjdk8-jre:1.6.5\n-ENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\n-ENV AB_ENABLED=jmx_exporter\n+FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk0ODM1Mw=="}, "originalCommit": {"oid": "0148f9181c9fd00ca356271e29eb2423b627c80e"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1191, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}