{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMTQyMjAx", "number": 8115, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMToyNlrODrGhQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMToyNlrODrGhQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTIyMTc3OnYy", "diffSide": "RIGHT", "path": "extensions/scheduler/deployment/src/main/java/io/quarkus/scheduler/deployment/SchedulerProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMToyNlrOF7P1oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMToyNlrOF7P1oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY2OTc5Mw==", "bodyText": "would be better to say \"with no scope defined\", there could be some other unrelated annotations", "url": "https://github.com/quarkusio/quarkus/pull/8115#discussion_r397669793", "createdAt": "2020-03-25T08:11:26Z", "author": {"login": "jmartisk"}, "path": "extensions/scheduler/deployment/src/main/java/io/quarkus/scheduler/deployment/SchedulerProcessor.java", "diffHunk": "@@ -104,14 +104,14 @@ public boolean appliesTo(org.jboss.jandex.AnnotationTarget.Kind kind) {\n \n             @Override\n             public void transform(TransformationContext context) {\n-                if (context.isClass() && !scopes.isScopeDeclaredOn(context.getTarget().asClass())) {\n+                ClassInfo target = context.getTarget().asClass();\n+                if (!scopes.isScopeIn(context.getAnnotations())\n+                        && (target.annotations().containsKey(SCHEDULED_NAME)\n+                                || target.annotations().containsKey(SCHEDULES_NAME))) {\n                     // Class with no scope annotation but with @Scheduled method\n-                    if (context.getTarget().asClass().annotations().containsKey(SCHEDULED_NAME)\n-                            || context.getTarget().asClass().annotations().containsKey(SCHEDULES_NAME)) {\n-                        LOGGER.debugf(\"Found scheduled business methods on a class %s with no annotations - adding @Singleton\",\n-                                context.getTarget());\n-                        context.transform().add(Singleton.class).done();\n-                    }\n+                    LOGGER.debugf(\"Found scheduled business methods on a class %s with no annotations - adding @Singleton\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba607113fe974601f06eaf54706a03f1bae0217"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4607, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}