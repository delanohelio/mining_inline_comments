{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4Nzk1MTA0", "number": 13529, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjozODo1NlrOE-H2hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjo0NDo0NFrOE-H4zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNTc1ODEyOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/HibernateValidatorProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjozODo1NlrOH7Kh1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjozODo1NlrOH7Kh1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTgwMDUzMw==", "bodyText": "method.declaringClass() is already available as clazz .", "url": "https://github.com/quarkusio/quarkus/pull/13529#discussion_r531800533", "createdAt": "2020-11-27T22:38:56Z", "author": {"login": "famod"}, "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/HibernateValidatorProcessor.java", "diffHunk": "@@ -376,13 +376,23 @@ private static void contributeClassMarkedForCascadingValidation(Set<DotName> cla\n     }\n \n     private static void contributeMethodsWithInheritedValidation(\n-            Map<DotName, Set<SimpleMethodSignatureKey>> inheritedAnnotationsToBeValidated,\n+            Map<DotName, Set<SimpleMethodSignatureKey>> methodsWithInheritedValidation,\n             IndexView indexView, MethodInfo method) {\n         ClassInfo clazz = method.declaringClass();\n-        if (Modifier.isInterface(clazz.flags())) {\n-            // Remember annotated interface methods that must be validated\n-            inheritedAnnotationsToBeValidated.computeIfAbsent(clazz.name(), k -> new HashSet<>())\n-                    .add(new SimpleMethodSignatureKey(method));\n+\n+        methodsWithInheritedValidation.computeIfAbsent(clazz.name(), k -> new HashSet<>())\n+                .add(new SimpleMethodSignatureKey(method));\n+\n+        if (Modifier.isInterface(method.declaringClass().flags())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6d8b0e8c8549279a2f59f0920c6c0920b28344"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNTc2MjYzOnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/MethodValidatedAnnotationsTransformer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjo0MzozOVrOH7KkEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjo0MzozOVrOH7KkEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTgwMTEwNA==", "bodyText": "Parameter name should also be methodsWithInheritedValidation.", "url": "https://github.com/quarkusio/quarkus/pull/13529#discussion_r531801104", "createdAt": "2020-11-27T22:43:39Z", "author": {"login": "famod"}, "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/MethodValidatedAnnotationsTransformer.java", "diffHunk": "@@ -23,15 +23,15 @@\n     private static final Logger LOGGER = Logger.getLogger(MethodValidatedAnnotationsTransformer.class.getPackage().getName());\n \n     private final Set<DotName> consideredAnnotations;\n-    private final Map<DotName, Set<SimpleMethodSignatureKey>> inheritedAnnotationsToBeValidated;\n+    private final Map<DotName, Set<SimpleMethodSignatureKey>> methodsWithInheritedValidation;\n     private final Map<DotName, Set<SimpleMethodSignatureKey>> jaxRsMethods;\n \n     MethodValidatedAnnotationsTransformer(Set<DotName> consideredAnnotations,\n             Map<DotName, Set<SimpleMethodSignatureKey>> jaxRsMethods,\n             Map<DotName, Set<SimpleMethodSignatureKey>> inheritedAnnotationsToBeValidated) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6d8b0e8c8549279a2f59f0920c6c0920b28344"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNTc2Mzk4OnYy", "diffSide": "RIGHT", "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/MethodValidatedAnnotationsTransformer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjo0NDo0NFrOH7KkvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QyMjo0NDo0NFrOH7KkvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTgwMTI3Ng==", "bodyText": "This could be moved further down because it is only needed when validatedMethods is not null or empty.", "url": "https://github.com/quarkusio/quarkus/pull/13529#discussion_r531801276", "createdAt": "2020-11-27T22:44:44Z", "author": {"login": "famod"}, "path": "extensions/hibernate-validator/deployment/src/main/java/io/quarkus/hibernate/validator/deployment/MethodValidatedAnnotationsTransformer.java", "diffHunk": "@@ -67,17 +67,19 @@ private boolean requiresValidation(MethodInfo method) {\n                 return true;\n             }\n         }\n+\n         // This method has no annotations of its own: look for inherited annotations\n-        ClassInfo clazz = method.declaringClass();\n         SimpleMethodSignatureKey signatureKey = new SimpleMethodSignatureKey(method);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6d8b0e8c8549279a2f59f0920c6c0920b28344"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3863, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}