{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxODUxMDg0", "number": 13669, "title": "Auto-detect container runtime", "bodyText": "This checks that podman or docker is chosen based on the environment\nThis is a follow-up to #10637 (comment)", "createdAt": "2020-12-03T15:12:08Z", "url": "https://github.com/quarkusio/quarkus/pull/13669", "merged": true, "mergeCommit": {"oid": "b0830c03954c8910017a1318a91f1fccbce703d2"}, "closed": true, "closedAt": "2020-12-03T21:45:40Z", "author": {"login": "gastaldi"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdikqxvABqjQwNjgwMzM1ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi2YfWgFqTU0NDg5MTYzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08d57bd8655a1e806d2da190d615738ac17c5793", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/08d57bd8655a1e806d2da190d615738ac17c5793", "committedDate": "2020-12-03T15:09:39Z", "message": "Auto-detect container runtime\n\nThis ensures that podman is selected if available in the environment and if it was not specified in the build configuration"}, "afterCommit": {"oid": "4dd39030b5d37c629cf4461faaf8fe031516002e", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/4dd39030b5d37c629cf4461faaf8fe031516002e", "committedDate": "2020-12-03T15:13:47Z", "message": "Auto-detect container runtime\n\nThis ensures that podman is selected if available in the environment and if it was not specified in the build configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4dd39030b5d37c629cf4461faaf8fe031516002e", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/4dd39030b5d37c629cf4461faaf8fe031516002e", "committedDate": "2020-12-03T15:13:47Z", "message": "Auto-detect container runtime\n\nThis ensures that podman is selected if available in the environment and if it was not specified in the build configuration"}, "afterCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/5f32dcd534ae5fafdb4e50cb41fdcda702957219", "committedDate": "2020-12-03T15:33:20Z", "message": "Auto-detect container runtime\n\nThis checks that the podman or docker is chosen based on the environment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MTI0MjM0", "url": "https://github.com/quarkusio/quarkus/pull/13669#pullrequestreview-544124234", "createdAt": "2020-12-03T16:09:52Z", "commit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowOTo1M1rOH-kcKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowOTo1M1rOH-kcKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MDc5Mw==", "bodyText": "Consider this wording instead?\nUsing container engine %s to run the native image builder, ....", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r535370793", "createdAt": "2020-12-03T16:09:53Z", "author": {"login": "jerboaa"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -343,23 +344,25 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n     public static List<String> setupContainerBuild(NativeConfig nativeConfig,\n             Optional<ProcessInheritIODisabled> processInheritIODisabled, Path outputDir) {\n         List<String> nativeImage;\n-        String containerRuntime = nativeConfig.containerRuntime.orElse(\"docker\");\n+        final ContainerRuntime containerRuntime = nativeConfig.containerRuntime\n+                .orElseGet(NativeImageBuildStep::detectContainerRuntime);\n+        log.infof(\"Using %s to build the native image\", containerRuntime.getExecutableName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MTMzMjE1", "url": "https://github.com/quarkusio/quarkus/pull/13669#pullrequestreview-544133215", "createdAt": "2020-12-03T16:18:44Z", "commit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/0997ebfe531a41b92d33367116b003d6f7116a25", "committedDate": "2020-12-03T16:44:20Z", "message": "Auto-detect container runtime\n\nThis checks that the podman or docker is chosen based on the environment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f32dcd534ae5fafdb4e50cb41fdcda702957219", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/5f32dcd534ae5fafdb4e50cb41fdcda702957219", "committedDate": "2020-12-03T15:33:20Z", "message": "Auto-detect container runtime\n\nThis checks that the podman or docker is chosen based on the environment"}, "afterCommit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25", "author": {"user": {"login": "gastaldi", "name": "George Gastaldi"}}, "url": "https://github.com/quarkusio/quarkus/commit/0997ebfe531a41b92d33367116b003d6f7116a25", "committedDate": "2020-12-03T16:44:20Z", "message": "Auto-detect container runtime\n\nThis checks that the podman or docker is chosen based on the environment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0ODkxNjMw", "url": "https://github.com/quarkusio/quarkus/pull/13669#pullrequestreview-544891630", "createdAt": "2020-12-04T11:50:46Z", "commit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo1MDo0NlrOH_NiMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo1MDo0NlrOH_NiMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0NDA4MA==", "bodyText": "The comment implies that podman is preferred over docker but the code does the opposite.", "url": "https://github.com/quarkusio/quarkus/pull/13669#discussion_r536044080", "createdAt": "2020-12-04T11:50:46Z", "author": {"login": "zakkak"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -394,6 +397,51 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n         return nativeImage;\n     }\n \n+    /**\n+     * @return {@link ContainerRuntime#PODMAN} if the podman executable exists in the environment or if the docker executable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0997ebfe531a41b92d33367116b003d6f7116a25"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1220, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}