{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NTE5MTI2", "number": 8823, "title": "Ensure that an uppercase username doesn't break container-image building", "bodyText": "Fixes: #8819", "createdAt": "2020-04-24T12:22:35Z", "url": "https://github.com/quarkusio/quarkus/pull/8823", "merged": true, "mergeCommit": {"oid": "e840569b5baf556edf785e650ef417cddd3df59c"}, "closed": true, "closedAt": "2020-04-24T15:39:03Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcawjIqAH2gAyNDA4NTE5MTI2OmU4MGIzYTc3NjZiNjQ3MTJmOTM4OGExMWY0YmRmYjg3MDY1MTVlZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcazXgmgFqTQwMDA1ODIyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e80b3a7766b64712f9388a11f4bdfb8706515ee4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/e80b3a7766b64712f9388a11f4bdfb8706515ee4", "committedDate": "2020-04-24T12:21:56Z", "message": "Ensure that an uppercase username doesn't break container image building\n\nFixes: #8819"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTEzNDMx", "url": "https://github.com/quarkusio/quarkus/pull/8823#pullrequestreview-399913431", "createdAt": "2020-04-24T12:46:30Z", "commit": {"oid": "e80b3a7766b64712f9388a11f4bdfb8706515ee4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjo0NjozMFrOGLWBCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjo0NjozMFrOGLWBCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU0ODIzNQ==", "bodyText": "I'm not sure why we lowercase only in this case? I mean it will fail if the group has some uppercase character, won't it?", "url": "https://github.com/quarkusio/quarkus/pull/8823#discussion_r414548235", "createdAt": "2020-04-24T12:46:30Z", "author": {"login": "gsmet"}, "path": "extensions/container-image/deployment/src/main/java/io/quarkus/container/image/deployment/ContainerImageConfig.java", "diffHunk": "@@ -61,4 +61,20 @@\n      */\n     @ConfigItem\n     public boolean push;\n+\n+    /**\n+     * Since user.name which is default value can be uppercase and uppercase values are not allowed\n+     * in the repository part of image references, we need to make the username lowercase.\n+     *\n+     * We purposely don't change the value of an explicitly set group.\n+     */\n+    public Optional<String> getEffectiveGroup() {\n+        if (group.isPresent()) {\n+            String originalGroup = group.get();\n+            if (originalGroup.equals(System.getProperty(\"user.name\"))) {\n+                return Optional.of(originalGroup.toLowerCase());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e80b3a7766b64712f9388a11f4bdfb8706515ee4"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDU4MjI5", "url": "https://github.com/quarkusio/quarkus/pull/8823#pullrequestreview-400058229", "createdAt": "2020-04-24T15:38:57Z", "commit": {"oid": "e80b3a7766b64712f9388a11f4bdfb8706515ee4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4519, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}