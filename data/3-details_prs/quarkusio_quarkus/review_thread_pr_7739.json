{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MTg5MDYx", "number": 7739, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzoyMToyN1rODm49jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDo1OTozMlrODnBx9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTA1NzQyOnYy", "diffSide": "RIGHT", "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzoyMToyN1rOF0kZsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNzoxMDoxNlrOF0rP-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2NjY3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // this is done because the for the .env file to take effect, it needs to be\n          \n          \n            \n                // this is done because for the .env file to take effect, it needs to be", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390666673", "createdAt": "2020-03-10T23:21:27Z", "author": {"login": "gsmet"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because the for the .env file to take effect, it needs to be", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "985c8cbdceb4b1911d3ecd57954fc9a2b191a3d1"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc3ODg3NA==", "bodyText": "Fixed, thanks", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390778874", "createdAt": "2020-03-11T07:10:16Z", "author": {"login": "geoand"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because the for the .env file to take effect, it needs to be", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2NjY3Mw=="}, "originalCommit": {"oid": "985c8cbdceb4b1911d3ecd57954fc9a2b191a3d1"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTA1ODkzOnYy", "diffSide": "RIGHT", "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzoyMjowMlrOF0kaig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNjo1OTo1NlrOF0rEtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2Njg5MA==", "bodyText": "Does it work on Windows?", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390666890", "createdAt": "2020-03-10T23:22:02Z", "author": {"login": "gsmet"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because the for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "985c8cbdceb4b1911d3ecd57954fc9a2b191a3d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2NzIxNQ==", "bodyText": "I suppose so as you have a test.", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390667215", "createdAt": "2020-03-10T23:23:08Z", "author": {"login": "gsmet"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because the for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2Njg5MA=="}, "originalCommit": {"oid": "985c8cbdceb4b1911d3ecd57954fc9a2b191a3d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc3NTk4OA==", "bodyText": "Yup, thankfully we have CI running on Windows as well \ud83d\ude0e - moreover it passes :)", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390775988", "createdAt": "2020-03-11T06:59:56Z", "author": {"login": "geoand"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because the for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2Njg5MA=="}, "originalCommit": {"oid": "985c8cbdceb4b1911d3ecd57954fc9a2b191a3d1"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjQ5MzY5OnYy", "diffSide": "RIGHT", "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/DevModeBuildStep.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDo1NzoyMFrOF0yGIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMToxNDozNFrOF0ypcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MTA0MA==", "bodyText": "This seems like it might be overkill... would something like this work?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    Paths.get(\"\").toAbsolutePath().normalize().resolve(\".env\").toAbsolutePath().toString()));\n          \n          \n            \n                                    Paths.get(\".env\").toAbsolutePath().toString()));", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390891040", "createdAt": "2020-03-11T10:57:20Z", "author": {"login": "dmlloyd"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/DevModeBuildStep.java", "diffHunk": "@@ -11,6 +12,7 @@\n     @BuildStep\n     List<HotDeploymentWatchedFileBuildItem> config() {\n         return Arrays.asList(new HotDeploymentWatchedFileBuildItem(\"META-INF/microprofile-config.properties\"),\n-                new HotDeploymentWatchedFileBuildItem(\"application.properties\"));\n+                new HotDeploymentWatchedFileBuildItem(\"application.properties\"), new HotDeploymentWatchedFileBuildItem(\n+                        Paths.get(\"\").toAbsolutePath().normalize().resolve(\".env\").toAbsolutePath().toString()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkwMDA4MQ==", "bodyText": "It does yes, thanks", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390900081", "createdAt": "2020-03-11T11:14:34Z", "author": {"login": "geoand"}, "path": "core/deployment/src/main/java/io/quarkus/deployment/steps/DevModeBuildStep.java", "diffHunk": "@@ -11,6 +12,7 @@\n     @BuildStep\n     List<HotDeploymentWatchedFileBuildItem> config() {\n         return Arrays.asList(new HotDeploymentWatchedFileBuildItem(\"META-INF/microprofile-config.properties\"),\n-                new HotDeploymentWatchedFileBuildItem(\"application.properties\"));\n+                new HotDeploymentWatchedFileBuildItem(\"application.properties\"), new HotDeploymentWatchedFileBuildItem(\n+                        Paths.get(\"\").toAbsolutePath().normalize().resolve(\".env\").toAbsolutePath().toString()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MTA0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjUwMjI4OnYy", "diffSide": "RIGHT", "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDo1OTozMlrOF0yLNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMToxNTozMlrOF0yrLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA==", "bodyText": "This seems wrong... unless we know for a fact that the current directory is going to be target/?  We don't want to modify anything outside target for any reason.  It would be better to modify the config source impl if that's the case.", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390892340", "createdAt": "2020-03-11T10:59:32Z", "author": {"login": "dmlloyd"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5NDQ2NQ==", "bodyText": "The reason I did this is because as a user I expect that if my ${rootDir}/.env file is going to be picked up when I do mvn quarkus:dev, then I would also expect it to be monitored for changes. With this way of doing things, those changes are picked up.\nIt doesn't really have to do with ./target at all, unless I am missing something.\nWDYT?", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390894465", "createdAt": "2020-03-11T11:03:36Z", "author": {"login": "geoand"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5NjY3Nw==", "bodyText": "The question is, where is this symbolic link being created, in practical terms?", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390896677", "createdAt": "2020-03-11T11:07:53Z", "author": {"login": "dmlloyd"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5OTEzMg==", "bodyText": "Inside target. Which is why I mentioned that updates work, but deleting the original .env doesn't (although I wouldn't expect the user to do that)", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390899132", "createdAt": "2020-03-11T11:12:36Z", "author": {"login": "geoand"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5OTk3NQ==", "bodyText": "OK, that's what I wanted to know.  Thanks!", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390899975", "createdAt": "2020-03-11T11:14:21Z", "author": {"login": "dmlloyd"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkwMDUyNA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/quarkusio/quarkus/pull/7739#discussion_r390900524", "createdAt": "2020-03-11T11:15:32Z", "author": {"login": "geoand"}, "path": "core/devmode/src/main/java/io/quarkus/dev/DevModeMain.java", "diffHunk": "@@ -110,6 +114,36 @@ public void start() throws Exception {\n         }\n     }\n \n+    // copies the .env file to the directory where the process is running\n+    // this is done because for the .env file to take effect, it needs to be\n+    // in the same directory as the running process\n+    private void copyDotEnvFile() {\n+        File projectDir = context.getProjectDir();\n+        if (projectDir == null) { // this is the case for QuarkusDevModeTest\n+            return;\n+        }\n+        Path currentDir = Paths.get(\"\").toAbsolutePath().normalize();\n+        Path dotEnvPath = projectDir.toPath().resolve(\".env\");\n+        if (Files.exists(dotEnvPath)) {\n+            try {\n+                Path link = currentDir.resolve(\".env\");\n+                silentDeleteFile(link);\n+                // create a symlink to ensure that user updates to the file have the expected effect in dev-mode\n+                Files.createSymbolicLink(link, dotEnvPath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjM0MA=="}, "originalCommit": {"oid": "c1ffc2a98208664b2334f0c6f568e55e30f496b6"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4801, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}