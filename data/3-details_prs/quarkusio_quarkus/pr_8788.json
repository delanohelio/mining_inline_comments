{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3ODgyMjkz", "number": 8788, "title": "Fix case where MongoDB and MariaDB extensions fail in native", "bodyText": "Fixes: #8785", "createdAt": "2020-04-23T12:26:01Z", "url": "https://github.com/quarkusio/quarkus/pull/8788", "merged": true, "mergeCommit": {"oid": "c67568fb38a2cb74c49262932313a4b997169998"}, "closed": true, "closedAt": "2020-04-23T19:54:28Z", "author": {"login": "geoand"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcadVM1gFqTM5OTEyMjQ5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaia9eAFqTM5OTQyODAwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MTIyNDkz", "url": "https://github.com/quarkusio/quarkus/pull/8788#pullrequestreview-399122493", "createdAt": "2020-04-23T13:57:18Z", "commit": {"oid": "84e6e4bd92721adf0a208a880f06705b64aa5ac4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMzo1NzoxOFrOGKpXnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMzo1ODoyNlrOGKpbLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgxNjczMw==", "bodyText": "Since this substitution targets a class which isn't MongoDB specific, does it belong here?\nMy concern is that if such subtitutions are kept within an extension, then they will eventually conflict with other extensions.\nI guess it could be acceptable as a temporary solution, if there's an issue tracking a further improvement.", "url": "https://github.com/quarkusio/quarkus/pull/8788#discussion_r413816733", "createdAt": "2020-04-23T13:57:18Z", "author": {"login": "Sanne"}, "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/runtime/graal/MongoClientSubstitutions.java", "diffHunk": "@@ -173,3 +173,13 @@ public String resolveAdditionalQueryParametersFromTxtRecords(final String host)\n         throw new UnsupportedOperationException(\"mongo+srv:// not supported in native mode\");\n     }\n }\n+\n+@TargetClass(com.sun.jna.Native.class)\n+final class JnaNativeSubstitutions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84e6e4bd92721adf0a208a880f06705b64aa5ac4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgxNzY0Nw==", "bodyText": "should this perhaps log a warning or throw an exception if a MariaDB feature is being disabled?\nWe shouldn't silentily ignore configuration.", "url": "https://github.com/quarkusio/quarkus/pull/8788#discussion_r413817647", "createdAt": "2020-04-23T13:58:26Z", "author": {"login": "Sanne"}, "path": "extensions/jdbc/jdbc-mariadb/runtime/src/main/java/io/quarkus/jdbc/mariadb/runtime/graal/SimpleSocketHandlerFunction.java", "diffHunk": "@@ -0,0 +1,15 @@\n+package io.quarkus.jdbc.mariadb.runtime.graal;\n+\n+import java.io.IOException;\n+import java.net.Socket;\n+\n+import org.mariadb.jdbc.internal.io.socket.SocketHandlerFunction;\n+import org.mariadb.jdbc.internal.util.Utils;\n+import org.mariadb.jdbc.util.Options;\n+\n+public class SimpleSocketHandlerFunction implements SocketHandlerFunction {\n+    @Override\n+    public Socket apply(Options options, String host) throws IOException {\n+        return Utils.standardSocket(options, host);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84e6e4bd92721adf0a208a880f06705b64aa5ac4"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84e6e4bd92721adf0a208a880f06705b64aa5ac4", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/84e6e4bd92721adf0a208a880f06705b64aa5ac4", "committedDate": "2020-04-23T12:25:16Z", "message": "Ensure that MariaDB never uses JNA"}, "afterCommit": {"oid": "490f29ece2a49e7bf9d4412688962db9a9e23bd2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/490f29ece2a49e7bf9d4412688962db9a9e23bd2", "committedDate": "2020-04-23T14:44:28Z", "message": "Ensure that MariaDB never uses JNA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06bd301fb86c6880a133b84ec30efc07471c6afa", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/06bd301fb86c6880a133b84ec30efc07471c6afa", "committedDate": "2020-04-23T16:34:41Z", "message": "Add substitution that ensures Classloader#library is never used in native\n\nFixes: #8785"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa89e92054784d38ec9bf70285188a6bacad0076", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/aa89e92054784d38ec9bf70285188a6bacad0076", "committedDate": "2020-04-23T16:34:41Z", "message": "Ensure that MariaDB never uses JNA"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "490f29ece2a49e7bf9d4412688962db9a9e23bd2", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/490f29ece2a49e7bf9d4412688962db9a9e23bd2", "committedDate": "2020-04-23T14:44:28Z", "message": "Ensure that MariaDB never uses JNA"}, "afterCommit": {"oid": "aa89e92054784d38ec9bf70285188a6bacad0076", "author": {"user": {"login": "geoand", "name": "Georgios Andrianakis"}}, "url": "https://github.com/quarkusio/quarkus/commit/aa89e92054784d38ec9bf70285188a6bacad0076", "committedDate": "2020-04-23T16:34:41Z", "message": "Ensure that MariaDB never uses JNA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NDI4MDA0", "url": "https://github.com/quarkusio/quarkus/pull/8788#pullrequestreview-399428004", "createdAt": "2020-04-23T19:54:20Z", "commit": {"oid": "aa89e92054784d38ec9bf70285188a6bacad0076"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4498, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}