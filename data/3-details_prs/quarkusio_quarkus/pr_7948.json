{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNzM4NDkx", "number": 7948, "title": "Throw exception if using blocking mailer from IO thread", "bodyText": "This prevents a potential deadlock.\nFixes #3223", "createdAt": "2020-03-19T00:57:03Z", "url": "https://github.com/quarkusio/quarkus/pull/7948", "merged": true, "mergeCommit": {"oid": "0e3240e7259b46e7c256138d278146833befeb83"}, "closed": true, "closedAt": "2020-03-19T07:50:47Z", "author": {"login": "stuartwdouglas"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPCPEegBqjMxNDM4MDE2NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPHFpbgFqTM3NzQ4NTgxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "352797a2428912178b8b5658dc17fe93b734f913", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/352797a2428912178b8b5658dc17fe93b734f913", "committedDate": "2020-03-19T00:56:03Z", "message": "Throw exception if using blocking mailer from IO thread\n\nThis prevents a potential deadlock.\n\nFixes #3223"}, "afterCommit": {"oid": "d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672", "committedDate": "2020-03-19T02:10:58Z", "message": "Throw exception if using blocking mailer from IO thread\n\nThis prevents a potential deadlock.\n\nFixes #3223"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mzk2MzI2", "url": "https://github.com/quarkusio/quarkus/pull/7948#pullrequestreview-377396326", "createdAt": "2020-03-19T03:16:27Z", "commit": {"oid": "d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzoxNjoyN1rOF4euwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzoxNjoyN1rOF4euwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2ODA2NQ==", "bodyText": "There's a typo in the error message:\n\nIf you want to send main from...\n\nShould have been \"If you want to send mail from...\"", "url": "https://github.com/quarkusio/quarkus/pull/7948#discussion_r394768065", "createdAt": "2020-03-19T03:16:27Z", "author": {"login": "jaikiran"}, "path": "extensions/mailer/runtime/src/main/java/io/quarkus/mailer/runtime/BlockingMailerImpl.java", "diffHunk": "@@ -18,6 +19,10 @@\n \n     @Override\n     public void send(Mail... mails) {\n+        if (!BlockingOperationControl.isBlockingAllowed()) {\n+            throw new RuntimeException(\n+                    \"Attempted a blocking operation from the IO thread. If you want to send main from an IO thread please use ReactiveMailer instead, or dispatch to a worker thread to use the blocking mailer.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd98d59afbe353791b32bf4cbcec07e59c070c5d", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/fd98d59afbe353791b32bf4cbcec07e59c070c5d", "committedDate": "2020-03-19T03:59:34Z", "message": "Throw exception if using blocking mailer from IO thread\n\nThis prevents a potential deadlock.\n\nFixes #3223"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/d2544a6d1ce75f10dbbbb2d3bcc64d7db640b672", "committedDate": "2020-03-19T02:10:58Z", "message": "Throw exception if using blocking mailer from IO thread\n\nThis prevents a potential deadlock.\n\nFixes #3223"}, "afterCommit": {"oid": "fd98d59afbe353791b32bf4cbcec07e59c070c5d", "author": {"user": {"login": "stuartwdouglas", "name": "Stuart Douglas"}}, "url": "https://github.com/quarkusio/quarkus/commit/fd98d59afbe353791b32bf4cbcec07e59c070c5d", "committedDate": "2020-03-19T03:59:34Z", "message": "Throw exception if using blocking mailer from IO thread\n\nThis prevents a potential deadlock.\n\nFixes #3223"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDg1ODE3", "url": "https://github.com/quarkusio/quarkus/pull/7948#pullrequestreview-377485817", "createdAt": "2020-03-19T07:50:27Z", "commit": {"oid": "fd98d59afbe353791b32bf4cbcec07e59c070c5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3723, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}