{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1OTUwMDg0", "number": 8690, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxNjoxNlrODzrMwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxODowM1rODzrPXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTExNzQ1OnYy", "diffSide": "RIGHT", "path": "extensions/security/deployment/src/main/java/io/quarkus/security/deployment/SecurityProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxNjoxNlrOGIPeNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxNjoxNlrOGIPeNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5NTI4Nw==", "bodyText": "I don't think it's worth changing it for this PR but please, in the future, when using a for loop is simpler than using a lambda, let's do the former.\nUsing lambdas in build time code is allowed but maybe let's only use them when they bring something to the plate?", "url": "https://github.com/quarkusio/quarkus/pull/8690#discussion_r411295287", "createdAt": "2020-04-20T11:16:16Z", "author": {"login": "gsmet"}, "path": "extensions/security/deployment/src/main/java/io/quarkus/security/deployment/SecurityProcessor.java", "diffHunk": "@@ -140,9 +140,13 @@ void gatherSecurityChecks(BuildProducer<BeanRegistrarBuildItem> beanRegistrars,\n             List<AdditionalSecurityCheckBuildItem> additionalSecurityChecks, SecurityBuildTimeConfig config) {\n         classPredicate.produce(new ApplicationClassPredicateBuildItem(new SecurityCheckStorage.AppPredicate()));\n \n-        Set<ClassInfo> additionalSecured = new HashSet<>();\n+        final Map<DotName, ClassInfo> additionalSecured = new HashMap<>();\n         for (AdditionalSecuredClassesBuildIem securedClasses : additionalSecuredClasses) {\n-            additionalSecured.addAll(securedClasses.additionalSecuredClasses);\n+            securedClasses.additionalSecuredClasses.forEach(c -> {\n+                if (!additionalSecured.containsKey(c.name())) {\n+                    additionalSecured.put(c.name(), c);\n+                }\n+            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c244f307209c614331edde37d3bf0b24b5e00fb3"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTEyNDE0OnYy", "diffSide": "RIGHT", "path": "extensions/security/deployment/src/main/java/io/quarkus/security/deployment/SecurityProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxODowM1rOGIPiFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMToxODowM1rOGIPiFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5NjI3Ng==", "bodyText": "You could have used values() here.", "url": "https://github.com/quarkusio/quarkus/pull/8690#discussion_r411296276", "createdAt": "2020-04-20T11:18:03Z", "author": {"login": "gsmet"}, "path": "extensions/security/deployment/src/main/java/io/quarkus/security/deployment/SecurityProcessor.java", "diffHunk": "@@ -225,8 +229,8 @@ private ResultHandle paramTypes(MethodCreator ctor, List<Type> parameters) {\n          * Handle additional secured classes by adding the denyAll check to all public non-static methods\n          * that don't have security annotations\n          */\n-        for (ClassInfo additionalSecureClassInfo : additionalSecuredClasses) {\n-            for (MethodInfo methodInfo : additionalSecureClassInfo.methods()) {\n+        for (Map.Entry<DotName, ClassInfo> additionalSecureClassInfo : additionalSecuredClasses.entrySet()) {\n+            for (MethodInfo methodInfo : additionalSecureClassInfo.getValue().methods()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c244f307209c614331edde37d3bf0b24b5e00fb3"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3380, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}