{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTcyNTU1", "number": 10127, "title": "Validate extension dependencies in the packaging phase of the runtime artifact", "bodyText": "This change adds a validation logic into the Maven plugin that generates the quarkus-extension.properties descriptor for the runtime extension artifacts.\nSpecifically, it is making sure that:\n\nthe deployment artifact depends on the runtime artifact (although that could possibly be relaxed by enhancing the resolver a bit);\nif a runtime artifact depends on another extension's runtime artifact then the deployment artifact depends on the corresponding deployment artifact of the other extension.\n\nThe validation is enabled by default and, as a consequence, the PR includes fixes extensions that failed the validation.\nThe validation can be disabled by adding -DskipExtensionValidation to the command line.", "createdAt": "2020-06-19T15:47:52Z", "url": "https://github.com/quarkusio/quarkus/pull/10127", "merged": true, "mergeCommit": {"oid": "5bb81e398531714a0416a1167418c127a4699bc7"}, "closed": true, "closedAt": "2020-06-24T13:38:08Z", "author": {"login": "aloubyansky"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcs1FN4gBqjM0NjMwMTI0MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuaLcnAFqTQzNjY1MjIzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f99151c657fdae62c131a39024fe3f6e6e236621", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/f99151c657fdae62c131a39024fe3f6e6e236621", "committedDate": "2020-06-19T15:41:49Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}, "afterCommit": {"oid": "542e85071e56d785508cbbd25d1bc66c05fb0448", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/542e85071e56d785508cbbd25d1bc66c05fb0448", "committedDate": "2020-06-19T15:49:11Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "542e85071e56d785508cbbd25d1bc66c05fb0448", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/542e85071e56d785508cbbd25d1bc66c05fb0448", "committedDate": "2020-06-19T15:49:11Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}, "afterCommit": {"oid": "56550edbd548b19fc166274e74f79270b80eb8d4", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/56550edbd548b19fc166274e74f79270b80eb8d4", "committedDate": "2020-06-19T15:58:53Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56550edbd548b19fc166274e74f79270b80eb8d4", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/56550edbd548b19fc166274e74f79270b80eb8d4", "committedDate": "2020-06-19T15:58:53Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}, "afterCommit": {"oid": "afc9ecfa9a6c85beb6a3529897171c228c012e27", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/afc9ecfa9a6c85beb6a3529897171c228c012e27", "committedDate": "2020-06-19T16:10:46Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afc9ecfa9a6c85beb6a3529897171c228c012e27", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/afc9ecfa9a6c85beb6a3529897171c228c012e27", "committedDate": "2020-06-19T16:10:46Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}, "afterCommit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/234063503a61c11e4d8cbb43206a632dd64edc85", "committedDate": "2020-06-19T20:06:05Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDg0MjYy", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-434484262", "createdAt": "2020-06-21T09:14:37Z", "commit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDg0MzI2", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-434484326", "createdAt": "2020-06-21T09:15:25Z", "commit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQwOToxNToyNlrOGmqwWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQwOToxNToyNlrOGmqwWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE5OTU3Nw==", "bodyText": "@gytis can you make sure this is correct?", "url": "https://github.com/quarkusio/quarkus/pull/10127#discussion_r443199577", "createdAt": "2020-06-21T09:15:26Z", "author": {"login": "geoand"}, "path": "extensions/panache/hibernate-orm-rest-data-panache/deployment/pom.xml", "diffHunk": "@@ -16,11 +16,11 @@\n     <dependencies>\n         <dependency>\n             <groupId>io.quarkus</groupId>\n-            <artifactId>quarkus-hibernate-orm-rest-data-panache</artifactId>\n+            <artifactId>quarkus-rest-data-panache-deployment</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTg3ODY1", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-434587865", "createdAt": "2020-06-22T03:52:17Z", "commit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjkzMDI5", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-434693029", "createdAt": "2020-06-22T08:08:08Z", "commit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODowODowOFrOGm2F3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODowODowOFrOGm2F3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4NTMwOQ==", "bodyText": "Why do we need this file? This module cannot be used on its own and only contains the common classes that are used by the Hibernate ORM REST Data extension (and the future Mongo alternative).", "url": "https://github.com/quarkusio/quarkus/pull/10127#discussion_r443385309", "createdAt": "2020-06-22T08:08:08Z", "author": {"login": "gytis"}, "path": "extensions/panache/rest-data-panache/runtime/src/main/resources/META-INF/quarkus-extension.yaml", "diffHunk": "@@ -0,0 +1,12 @@\n+---", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NzExNDE2", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-434711416", "createdAt": "2020-06-22T08:32:49Z", "commit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODozMjo0OVrOGm273Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODozMjo0OVrOGm273Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM5OTEzMw==", "bodyText": "I'm not sure this is needed. This module is not exposed as an extension.", "url": "https://github.com/quarkusio/quarkus/pull/10127#discussion_r443399133", "createdAt": "2020-06-22T08:32:49Z", "author": {"login": "gytis"}, "path": "extensions/panache/rest-data-panache/runtime/pom.xml", "diffHunk": "@@ -42,4 +42,13 @@\n             <scope>test</scope>\n         </dependency>\n     </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>io.quarkus</groupId>\n+                <artifactId>quarkus-bootstrap-maven-plugin</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce8f172629636f7fb6b608f04fbb54a03f6afb88", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce8f172629636f7fb6b608f04fbb54a03f6afb88", "committedDate": "2020-06-22T10:56:23Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "234063503a61c11e4d8cbb43206a632dd64edc85", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/234063503a61c11e4d8cbb43206a632dd64edc85", "committedDate": "2020-06-19T20:06:05Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}, "afterCommit": {"oid": "ce8f172629636f7fb6b608f04fbb54a03f6afb88", "author": {"user": {"login": "aloubyansky", "name": "Alexey Loubyansky"}}, "url": "https://github.com/quarkusio/quarkus/commit/ce8f172629636f7fb6b608f04fbb54a03f6afb88", "committedDate": "2020-06-22T10:56:23Z", "message": "Validate extension dependencies in the packaging phase of the runtime artifact"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NjUyMjM4", "url": "https://github.com/quarkusio/quarkus/pull/10127#pullrequestreview-436652238", "createdAt": "2020-06-24T13:35:41Z", "commit": {"oid": "ce8f172629636f7fb6b608f04fbb54a03f6afb88"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzozNTo0MVrOGoSaJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzozNTo0MVrOGoSaJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg5NzgyOA==", "bodyText": "Minor but if it's really necessary, we need to move it up with the other non-test dependencies.", "url": "https://github.com/quarkusio/quarkus/pull/10127#discussion_r444897828", "createdAt": "2020-06-24T13:35:41Z", "author": {"login": "gsmet"}, "path": "extensions/security-jpa/deployment/pom.xml", "diffHunk": "@@ -82,7 +82,6 @@\n         <dependency>\n             <groupId>io.quarkus</groupId>\n             <artifactId>quarkus-hibernate-orm-deployment</artifactId>\n-            <scope>test</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce8f172629636f7fb6b608f04fbb54a03f6afb88"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4270, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}