{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MzI4OTU3", "number": 3212, "title": "GH-3211: Add DefSftpSF.setKnownHosts(Resource)", "bodyText": "Fixes #3211\n\nAdd DefaultSftpSessionFactory.setKnownHosts(Resource) to\nallow to configure externally any resource for file with known_hosts content\nDeprecate an existing method in favor of new one\nThe new method makes it aligned with the setPrivateKey(Resource)\nFix tests do not use a deprecated method any more\n\nCherry-pick to 5.2.x", "createdAt": "2020-03-10T19:43:31Z", "url": "https://github.com/spring-projects/spring-integration/pull/3212", "merged": true, "mergeCommit": {"oid": "6b82681cc0b9408706fb933538219f3023e1f34f"}, "closed": true, "closedAt": "2020-03-10T20:50:01Z", "author": {"login": "artembilan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMX45OAH2gAyMzg2MzI4OTU3OjAyNDUxYzExOTA0MTE1MjVkMzRjY2Y3N2FiZjMwMzliYmI0NGU1NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMY1_YAFqTM3MjMxMTA5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "02451c1190411525d34ccf77abf3039bbb44e542", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/02451c1190411525d34ccf77abf3039bbb44e542", "committedDate": "2020-03-10T19:43:08Z", "message": "GH-3211: Add DefSftpSF.setKnownHosts(Resource)\n\nFixes https://github.com/spring-projects/spring-integration/issues/3211\n\n* Add `DefaultSftpSessionFactory.setKnownHosts(Resource)` to\nallow to configure externally any resource for file with known_hosts content\n* Deprecate an existing method in favor of new one\n* The new method makes it aligned with the `setPrivateKey(Resource)`\n* Fix tests do not use a deprecated method any more\n\n**Cherry-pick to 5.2.x**"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMjcwODM0", "url": "https://github.com/spring-projects/spring-integration/pull/3212#pullrequestreview-372270834", "createdAt": "2020-03-10T19:48:36Z", "commit": {"oid": "02451c1190411525d34ccf77abf3039bbb44e542"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo0ODozNlrOF0ee1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo0ODozNlrOF0ee1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2OTY4NQ==", "bodyText": "Won't this cause a problem with <bean/> config? (ambiguous setter) setKnownHostsResource() ?", "url": "https://github.com/spring-projects/spring-integration/pull/3212#discussion_r390569685", "createdAt": "2020-03-10T19:48:36Z", "author": {"login": "garyrussell"}, "path": "spring-integration-sftp/src/main/java/org/springframework/integration/sftp/session/DefaultSftpSessionFactory.java", "diffHunk": "@@ -191,8 +193,21 @@ public void setPassword(String password) {\n \t * false (default).</b>\n \t * @param knownHosts The known hosts.\n \t * @see JSch#setKnownHosts(String)\n+\t * @deprecated since 5.2.5 in favor of {@link #setKnownHosts(Resource)}\n \t */\n+\t@Deprecated\n \tpublic void setKnownHosts(String knownHosts) {\n+\t\tsetKnownHosts(new FileSystemResource(knownHosts));\n+\t}\n+\n+\t/**\n+\t * Specifies the filename that will be used for a host key repository.\n+\t * The file has the same format as OpenSSH's known_hosts file.\n+\t * @param knownHosts the resource for known hosts.\n+\t * @see JSch#setKnownHosts(InputStream)\n+\t * @since 5.2.5\n+\t */\n+\tpublic void setKnownHosts(Resource knownHosts) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02451c1190411525d34ccf77abf3039bbb44e542"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7de122d325c3f38d853a86e1bd1c7d4d73dc682e", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/7de122d325c3f38d853a86e1bd1c7d4d73dc682e", "committedDate": "2020-03-10T20:37:39Z", "message": "* Rename to `setKnownHostsResource()` to avoid XML parser confusion\n* Change `sftp.adoc` to reflect a new property"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMzA2NDYz", "url": "https://github.com/spring-projects/spring-integration/pull/3212#pullrequestreview-372306463", "createdAt": "2020-03-10T20:43:02Z", "commit": {"oid": "7de122d325c3f38d853a86e1bd1c7d4d73dc682e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDo0MzowMlrOF0gPgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDo0MzowMlrOF0gPgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU5ODUyOA==", "bodyText": "Should we really deprecate? This is easier if you are using Java Config and want to point to a simple file name.\nNot related to this PR but perhaps we should consider adding a SftpSessionFactorySpec ?", "url": "https://github.com/spring-projects/spring-integration/pull/3212#discussion_r390598528", "createdAt": "2020-03-10T20:43:02Z", "author": {"login": "garyrussell"}, "path": "spring-integration-sftp/src/main/java/org/springframework/integration/sftp/session/DefaultSftpSessionFactory.java", "diffHunk": "@@ -191,8 +193,21 @@ public void setPassword(String password) {\n \t * false (default).</b>\n \t * @param knownHosts The known hosts.\n \t * @see JSch#setKnownHosts(String)\n+\t * @deprecated since 5.2.5 in favor of {@link #setKnownHostsResource(Resource)}\n \t */\n+\t@Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de122d325c3f38d853a86e1bd1c7d4d73dc682e"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMzExMDk2", "url": "https://github.com/spring-projects/spring-integration/pull/3212#pullrequestreview-372311096", "createdAt": "2020-03-10T20:49:52Z", "commit": {"oid": "7de122d325c3f38d853a86e1bd1c7d4d73dc682e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 198, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}