{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODM1MDAz", "number": 3361, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozMzowNlrOEWXLZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozOTowMFrOEWXV5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODgzODc2OnYy", "diffSide": "RIGHT", "path": "spring-integration-core/src/main/java/org/springframework/integration/dsl/GatewayProxySpec.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozMzowNlrOG9oqrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozMzowNlrOG9oqrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI4MjYwNQ==", "bodyText": "Your name here, please\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *\n          \n          \n            \n             * @author Gary Russell", "url": "https://github.com/spring-projects/spring-integration/pull/3361#discussion_r467282605", "createdAt": "2020-08-07T21:33:06Z", "author": {"login": "artembilan"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/dsl/GatewayProxySpec.java", "diffHunk": "@@ -43,7 +44,7 @@\n  *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8399ac1b85ec1496649d17a0aac8ede32beaa43"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODg0ODAxOnYy", "diffSide": "RIGHT", "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozNTowMlrOG9owgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozNTowMlrOG9owgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI4NDA5Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tthis.gatewayMap.values().forEach(gw -> gw.destroy());\n          \n          \n            \n            \t\tthis.gatewayMap.values().forEach(MethodInvocationGateway::destroy);\n          \n      \n    \n    \n  \n\nHow do we live without this before?\nShould we consider to back-port it as a bug?\nWhat is a consequence not having this destroy()?", "url": "https://github.com/spring-projects/spring-integration/pull/3361#discussion_r467284096", "createdAt": "2020-08-07T21:35:02Z", "author": {"login": "artembilan"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java", "diffHunk": "@@ -1020,6 +1032,11 @@ protected void doStop() {\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic void destroy() {\n+\t\tthis.gatewayMap.values().forEach(gw -> gw.destroy());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8399ac1b85ec1496649d17a0aac8ede32beaa43"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODg2MTU3OnYy", "diffSide": "RIGHT", "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/MessagingGatewaySupport.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozODowNlrOG9o5ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozODowNlrOG9o5ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI4NjM3Mg==", "bodyText": "Ah! I got it.\nGary, take a look, please, what does that @SuppressWarnings(\"deprecation\") do on this class?", "url": "https://github.com/spring-projects/spring-integration/pull/3361#discussion_r467286372", "createdAt": "2020-08-07T21:38:06Z", "author": {"login": "artembilan"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/MessagingGatewaySupport.java", "diffHunk": "@@ -802,6 +857,13 @@ protected void doStop() {\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic void destroy() {\n+\t\tthis.timers.forEach(MeterFacade::remove);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8399ac1b85ec1496649d17a0aac8ede32beaa43"}, "originalPosition": 158}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODg2NTY1OnYy", "diffSide": "RIGHT", "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/MessagingGatewaySupport.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMTozOTowMFrOG9o77w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxMzozMjo1MlrOG-OtDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI4NzAyMw==", "bodyText": "Do we really talk here about source?", "url": "https://github.com/spring-projects/spring-integration/pull/3361#discussion_r467287023", "createdAt": "2020-08-07T21:39:00Z", "author": {"login": "artembilan"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/MessagingGatewaySupport.java", "diffHunk": "@@ -690,6 +726,25 @@ private void sendMessageForReactiveFlow(MessageChannel requestChannel, Message<?\n \t\t}\n \t}\n \n+\tprotected TimerFacade sendTimer() {\n+\t\tif (this.successTimer == null) {\n+\t\t\tthis.successTimer = buildSendTimer(true, \"none\");\n+\t\t}\n+\t\treturn this.successTimer;\n+\t}\n+\n+\tprotected TimerFacade buildSendTimer(boolean success, String exception) {\n+\t\tTimerFacade timer = this.metricsCaptor.timerBuilder(SEND_TIMER_NAME)\n+\t\t\t\t.tag(\"type\", \"source\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8399ac1b85ec1496649d17a0aac8ede32beaa43"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzkwNTgwNw==", "bodyText": "It really is a message source - I thought it was better than introducing a new type gateway because that can be in or out.", "url": "https://github.com/spring-projects/spring-integration/pull/3361#discussion_r467905807", "createdAt": "2020-08-10T13:32:52Z", "author": {"login": "garyrussell"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/MessagingGatewaySupport.java", "diffHunk": "@@ -690,6 +726,25 @@ private void sendMessageForReactiveFlow(MessageChannel requestChannel, Message<?\n \t\t}\n \t}\n \n+\tprotected TimerFacade sendTimer() {\n+\t\tif (this.successTimer == null) {\n+\t\t\tthis.successTimer = buildSendTimer(true, \"none\");\n+\t\t}\n+\t\treturn this.successTimer;\n+\t}\n+\n+\tprotected TimerFacade buildSendTimer(boolean success, String exception) {\n+\t\tTimerFacade timer = this.metricsCaptor.timerBuilder(SEND_TIMER_NAME)\n+\t\t\t\t.tag(\"type\", \"source\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI4NzAyMw=="}, "originalCommit": {"oid": "e8399ac1b85ec1496649d17a0aac8ede32beaa43"}, "originalPosition": 139}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1897, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}