{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5NjI2ODk4", "number": 3353, "title": "AMQP: Support CorrelationData Message Headers", "bodyText": "In preparation for spring-cloud/spring-cloud-stream-binder-rabbit#303\nNow that CorrelationData has a Future<?>, users might simply add\ncorrelation data in a header and not receive confirm/return messages.\n\nNo longer require channels for returns and confirms\ndon't build the confirm message if there are no channels\nreduce the log level for no channels to DEBUG\ncomplete the user's future when a message is returned (async GW)", "createdAt": "2020-07-30T21:55:38Z", "url": "https://github.com/spring-projects/spring-integration/pull/3353", "merged": true, "mergeCommit": {"oid": "8cf6ff04620dabf4b203d40236676f69b479b6c5"}, "closed": true, "closedAt": "2020-07-31T14:00:19Z", "author": {"login": "garyrussell"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6G4cHAH2gAyNDU5NjI2ODk4Ojc0OTc1YWU4ZTdhMzIxOWZlNmRmYzJjNzE5MWYyMzczMmMxOWU4MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6UaoogH2gAyNDU5NjI2ODk4OjgzMjcxYWVkZjRiMzQxMTE3YTMyNjI4YmNjMmI3ZTQ2MjE0OTE2ZDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74975ae8e7a3219fe6dfc2c7191f23732c19e818", "author": {"user": {"login": "garyrussell", "name": "Gary Russell"}}, "url": "https://github.com/spring-projects/spring-integration/commit/74975ae8e7a3219fe6dfc2c7191f23732c19e818", "committedDate": "2020-07-30T21:54:46Z", "message": "AMQP: Support CorrelationData Message Headers\n\nIn preparation for https://github.com/spring-cloud/spring-cloud-stream-binder-rabbit/issues/303\n\nNow that `CorrelationData` has a `Future<?>`, users might simply add\ncorrelation data in a header and not receive confirm/return messages.\n\n- No longer require channels for returns and confirms\n- don't build the confirm message if there are no channels\n- reduce the log level for no channels to DEBUG\n- complete the user's future when a message is returned (async GW)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTY0MDU3", "url": "https://github.com/spring-projects/spring-integration/pull/3353#pullrequestreview-459164057", "createdAt": "2020-07-31T13:15:47Z", "commit": {"oid": "74975ae8e7a3219fe6dfc2c7191f23732c19e818"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMzoxNTo0N1rOG6IIjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMzoxNTo0N1rOG6IIjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYwMzg1Mw==", "bodyText": "I think this is a copy/paste artefact.\nProbably this new Also... sentence should go already after additional headers added.", "url": "https://github.com/spring-projects/spring-integration/pull/3353#discussion_r463603853", "createdAt": "2020-07-31T13:15:47Z", "author": {"login": "artembilan"}, "path": "src/reference/asciidoc/amqp.adoc", "diffHunk": "@@ -1025,24 +1034,29 @@ When a publisher confirmation is received and correlation data is supplied, the\n The payload of the confirmation is the correlation data as defined by this expression, and the message has its 'amqp_publishConfirm' header set to `true` (`ack`) or `false` (`nack`).\n For `nack` instances, an additional header (`amqp_publishConfirmNackCause`) is provided.\n Examples: `headers['myCorrelationData']`, `payload`.\n-If the expression resolves to a `Message<?>` instance (such as \"`#this`\"), the message emitted on the `ack`/`nack` channel is based on that message, with the additional headers added.\n+If the expression resolves to a `Message<?>` instance (such as \"`#this`\"), the message emitted on the `ack`/`nack` channel is based on that message, with the Also see <<alternative-confirms-returns>>.\n+additional headers added.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74975ae8e7a3219fe6dfc2c7191f23732c19e818"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83271aedf4b341117a32628bcc2b7e46214916d8", "author": {"user": {"login": "garyrussell", "name": "Gary Russell"}}, "url": "https://github.com/spring-projects/spring-integration/commit/83271aedf4b341117a32628bcc2b7e46214916d8", "committedDate": "2020-07-31T13:40:53Z", "message": "Fix typo."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 102, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}