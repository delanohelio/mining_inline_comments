{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDg1MzA3", "number": 3197, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNDo1MFrODlgZtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNjo0MFrODlgcpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjU0NzczOnYy", "diffSide": "RIGHT", "path": "src/reference/asciidoc/handler-advice.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNDo1MFrOFycFLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNDo1MFrOFycFLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzMzE5OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example when we can an HTTP request over WebFlux client, we could use bellow configuration to not wait for response more than 5 seconds:\n          \n          \n            \n            For example when we can an HTTP request over WebFlux client, we could use below configuration to not wait for response more than 5 seconds:", "url": "https://github.com/spring-projects/spring-integration/pull/3197#discussion_r388433199", "createdAt": "2020-03-05T17:04:50Z", "author": {"login": "garyrussell"}, "path": "src/reference/asciidoc/handler-advice.adoc", "diffHunk": "@@ -549,6 +551,26 @@ public Message<?> service(Message<?> message) {\n ----\n ====\n \n+[[reactive-advice]]\n+==== Reactive Advice\n+\n+Starting with version 5.3, a `ReactiveRequestHandlerAdvice` can be used for request message handlers producing a `Mono` replies.\n+A `BiFunction<Message<?>, Mono<?>, Publisher<?>>` has to be provided for this advice and it is called from the `Mono.transform()` operator on a reply produced by the intercepted `handleRequestMessage()` method implementation.\n+Typically such a `Mono` customization is necessary when we would like to control network fluctuations via `timeout()`, `retry()` and similar support operators.\n+For example when we can an HTTP request over WebFlux client, we could use bellow configuration to not wait for response more than 5 seconds:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f68bb41e024e7c4a92710d46b74be858184eda7"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjU1MDU1OnYy", "diffSide": "RIGHT", "path": "src/reference/asciidoc/handler-advice.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNTo0NFrOFycHJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNTo0NFrOFycHJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzMzcwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `message` argument is a request message for such a message handler and can be used to determine a request-scope attributes.\n          \n          \n            \n            The `message` argument is the request message for the message handler and can be used to determine request-scope attributes.", "url": "https://github.com/spring-projects/spring-integration/pull/3197#discussion_r388433703", "createdAt": "2020-03-05T17:05:44Z", "author": {"login": "garyrussell"}, "path": "src/reference/asciidoc/handler-advice.adoc", "diffHunk": "@@ -549,6 +551,26 @@ public Message<?> service(Message<?> message) {\n ----\n ====\n \n+[[reactive-advice]]\n+==== Reactive Advice\n+\n+Starting with version 5.3, a `ReactiveRequestHandlerAdvice` can be used for request message handlers producing a `Mono` replies.\n+A `BiFunction<Message<?>, Mono<?>, Publisher<?>>` has to be provided for this advice and it is called from the `Mono.transform()` operator on a reply produced by the intercepted `handleRequestMessage()` method implementation.\n+Typically such a `Mono` customization is necessary when we would like to control network fluctuations via `timeout()`, `retry()` and similar support operators.\n+For example when we can an HTTP request over WebFlux client, we could use bellow configuration to not wait for response more than 5 seconds:\n+\n+====\n+[source, java]\n+----\n+.handle(WebFlux.outboundGateway(\"https://somehost/\"),\n+                       e -> e.customizeMonoReply((message, mono) -> mono.timeout(Duration.ofSeconds(5))));\n+----\n+====\n+\n+The `message` argument is a request message for such a message handler and can be used to determine a request-scope attributes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f68bb41e024e7c4a92710d46b74be858184eda7"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjU1NTI2OnYy", "diffSide": "RIGHT", "path": "src/reference/asciidoc/handler-advice.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNjo0MFrOFycJ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNjo0MFrOFycJ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzNDQyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `mono` argument is a result of this message handler `handleRequestMessage()` method implementation.\n          \n          \n            \n            The `mono` argument is the result of this message handler's `handleRequestMessage()` method implementation.", "url": "https://github.com/spring-projects/spring-integration/pull/3197#discussion_r388434424", "createdAt": "2020-03-05T17:06:40Z", "author": {"login": "garyrussell"}, "path": "src/reference/asciidoc/handler-advice.adoc", "diffHunk": "@@ -549,6 +551,26 @@ public Message<?> service(Message<?> message) {\n ----\n ====\n \n+[[reactive-advice]]\n+==== Reactive Advice\n+\n+Starting with version 5.3, a `ReactiveRequestHandlerAdvice` can be used for request message handlers producing a `Mono` replies.\n+A `BiFunction<Message<?>, Mono<?>, Publisher<?>>` has to be provided for this advice and it is called from the `Mono.transform()` operator on a reply produced by the intercepted `handleRequestMessage()` method implementation.\n+Typically such a `Mono` customization is necessary when we would like to control network fluctuations via `timeout()`, `retry()` and similar support operators.\n+For example when we can an HTTP request over WebFlux client, we could use bellow configuration to not wait for response more than 5 seconds:\n+\n+====\n+[source, java]\n+----\n+.handle(WebFlux.outboundGateway(\"https://somehost/\"),\n+                       e -> e.customizeMonoReply((message, mono) -> mono.timeout(Duration.ofSeconds(5))));\n+----\n+====\n+\n+The `message` argument is a request message for such a message handler and can be used to determine a request-scope attributes.\n+The `mono` argument is a result of this message handler `handleRequestMessage()` method implementation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f68bb41e024e7c4a92710d46b74be858184eda7"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1984, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}