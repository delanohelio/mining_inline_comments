{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNzM1MDAz", "number": 3448, "title": "Subscribe to Publisher in the NullChannel", "bodyText": "If a payload of the message in the flow is a org.reactivestreams.Publisher,\nit must be subscribed somewhere downstream to initiate reactive processing.\nThe NullChannel just ignores the message altogether and therefore Publisher\nis lost\n\nCheck the payload of the message in the NullChannel for Publisher type\nand subscribe to it\nVerify in the test and mention this logic in the docs\n\nCherry-pick to 5.4.x", "createdAt": "2020-12-21T21:32:25Z", "url": "https://github.com/spring-projects/spring-integration/pull/3448", "merged": true, "mergeCommit": {"oid": "c38da2f4ee511ababc302773b95a1bb1d42a1990"}, "closed": true, "closedAt": "2020-12-22T17:20:13Z", "author": {"login": "artembilan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdodugZgH2gAyNTQzNzM1MDAzOmUwNTFmMGQyODJmMGQzYTU4N2U2Yzc0OTVmMjgwYzhlZDM0Njc4M2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdos1hEgH2gAyNTQzNzM1MDAzOmQ3OGY4NTFhODkwMzJhZTg0MjlkNTlkZWQ3ZGFjNDE5MWM0ZGMyYjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e051f0d282f0d3a587e6c7495f280c8ed346783e", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/e051f0d282f0d3a587e6c7495f280c8ed346783e", "committedDate": "2020-12-21T22:32:15Z", "message": "Subscribe to Publisher in the NullChannel\n\nIf a payload of the message in the flow is a `org.reactivestreams.Publisher`,\nit must be subscribed somewhere downstream to initiate reactive processing.\nThe `NullChannel` just ignores the message altogether and therefore `Publisher`\nis lost\n\n* Check the payload of the message in the `NullChannel` for `Publisher` type\nand subscribe to it\n* Verify in the test and mention this logic in the docs\n\n**Cherry-pick to 5.4.x**"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc92412ffe698ba61e0f3d49e77569ce18f87867", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/cc92412ffe698ba61e0f3d49e77569ce18f87867", "committedDate": "2020-12-21T21:32:03Z", "message": "Subscribe to Publisher in the NullChannel\n\nIf a payload of the message in the flow is a `org.reactivestreams.Publisher`,\nit must be subscribed somewhere downstream to initiate reactive processing.\nThe `NullChannel` just ignores the message altogether and therefore `Publisher`\nis lost\n\n* Check the payload of the message in the `NullChannel` for `Publisher` type\nand subscribe to it\n* Verify in the test and mention this logic in the docs\n\n**Cherry-pick to 5.4.x**"}, "afterCommit": {"oid": "e051f0d282f0d3a587e6c7495f280c8ed346783e", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/e051f0d282f0d3a587e6c7495f280c8ed346783e", "committedDate": "2020-12-21T22:32:15Z", "message": "Subscribe to Publisher in the NullChannel\n\nIf a payload of the message in the flow is a `org.reactivestreams.Publisher`,\nit must be subscribed somewhere downstream to initiate reactive processing.\nThe `NullChannel` just ignores the message altogether and therefore `Publisher`\nis lost\n\n* Check the payload of the message in the `NullChannel` for `Publisher` type\nand subscribe to it\n* Verify in the test and mention this logic in the docs\n\n**Cherry-pick to 5.4.x**"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MTU1OTg2", "url": "https://github.com/spring-projects/spring-integration/pull/3448#pullrequestreview-557155986", "createdAt": "2020-12-22T15:19:19Z", "commit": {"oid": "e051f0d282f0d3a587e6c7495f280c8ed346783e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNToxOToxOVrOIJ-wLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNToyMjozNFrOIJ-2pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzMzNjIzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * and all {@link #send} calls will return {@code true} although no action is performed.\n          \n          \n            \n             * Unless the payload of a sent is a {@link Publisher} implementation.\n          \n          \n            \n             * In this case the {@link Publisher#subscribe(Subscriber)} is called to initiate\n          \n          \n            \n             * the reactive stream, although data is ignored in this channel.\n          \n          \n            \n             * and all {@link #send} calls will return {@code true} although no action is performed.\n          \n          \n            \n             * Unless the payload of a sent message is a {@link Publisher} implementation, in\n          \n          \n            \n             * which case the {@link Publisher#subscribe(Subscriber)} is called to initiate\n          \n          \n            \n             * the reactive stream, although the data is discarded by this channel.", "url": "https://github.com/spring-projects/spring-integration/pull/3448#discussion_r547336236", "createdAt": "2020-12-22T15:19:19Z", "author": {"login": "garyrussell"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/channel/NullChannel.java", "diffHunk": "@@ -35,13 +38,16 @@\n \n /**\n  * A channel implementation that essentially behaves like \"/dev/null\".\n- * All receive() calls will return <em>null</em>, and all send() calls\n- * will return <em>true</em> although no action is performed.\n+ * All {@link #receive()} calls will return {@code null},\n+ * and all {@link #send} calls will return {@code true} although no action is performed.\n+ * Unless the payload of a sent is a {@link Publisher} implementation.\n+ * In this case the {@link Publisher#subscribe(Subscriber)} is called to initiate\n+ * the reactive stream, although data is ignored in this channel.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e051f0d282f0d3a587e6c7495f280c8ed346783e"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzMzNzg5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The special treatment is applied for the `org.reactivestreams.Publisher` payload of a sent message: it is subscribed in this channel immediately to initiate a reactive stream processing, although data is ignored in this channel according `NullChannel` nature.\n          \n          \n            \n            The special treatment is applied for an `org.reactivestreams.Publisher` payload of a sent message: it is subscribed to in this channel immediately, to initiate reactive stream processing, although the data is discarded.", "url": "https://github.com/spring-projects/spring-integration/pull/3448#discussion_r547337892", "createdAt": "2020-12-22T15:22:34Z", "author": {"login": "garyrussell"}, "path": "src/reference/asciidoc/channel.adoc", "diffHunk": "@@ -1142,9 +1142,11 @@ For example, you can use this technique to configure a test case to verify messa\n [[channel-special-channels]]\n ==== Special Channels\n \n-If namespace support is enabled, two special channels are defined within the application context by default: `errorChannel` and `nullChannel`.\n-The 'nullChannel' acts like `/dev/null`, logging any message sent to it at the `DEBUG` level and returning immediately.\n+Two special channels are defined within the application context by default: `errorChannel` and `nullChannel`.\n+The 'nullChannel' (an instance of `NullChannel`) acts like `/dev/null`, logging any message sent to it at the `DEBUG` level and returning immediately.\n+The special treatment is applied for the `org.reactivestreams.Publisher` payload of a sent message: it is subscribed in this channel immediately to initiate a reactive stream processing, although data is ignored in this channel according `NullChannel` nature.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e051f0d282f0d3a587e6c7495f280c8ed346783e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d78f851a89032ae8429d59ded7dac4191c4dc2b9", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/d78f851a89032ae8429d59ded7dac4191c4dc2b9", "committedDate": "2020-12-22T16:08:29Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Gary Russell <grussell@vmware.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 149, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}