{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0OTMxMjY1", "number": 3327, "title": "GH-3326: TCP: Support Unsolicited Server Messages", "bodyText": "Resolves #3326\n\nOB Gateway - send unsolicited messages and late replies to a channel\nSupport multiple TcpSenders", "createdAt": "2020-07-06T18:19:17Z", "url": "https://github.com/spring-projects/spring-integration/pull/3327", "merged": true, "mergeCommit": {"oid": "e91942868033500acc46e6cd53cdbb2f6cf1035b"}, "closed": true, "closedAt": "2020-07-06T19:05:58Z", "author": {"login": "garyrussell"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyVZ-AAH2gAyNDQ0OTMxMjY1OjgwNTA2NTg2YmNlMjAzNzY0ZmQ3MjFmYzczNWRmNWRhYzFiMTdlYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyWAPOAH2gAyNDQ0OTMxMjY1OjBhNzM4NTUwMjI0OGIwNGZhNTFlNWY4YmRiYWY3MGIyODI2ODU3OGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80506586bce203764fd721fc735df5dac1b17ebc", "author": {"user": {"login": "garyrussell", "name": "Gary Russell"}}, "url": "https://github.com/spring-projects/spring-integration/commit/80506586bce203764fd721fc735df5dac1b17ebc", "committedDate": "2020-07-06T18:18:40Z", "message": "GH-3326: TCP: Support Unsolicited Server Messages\n\nResolves https://github.com/spring-projects/spring-integration/issues/3326\n\n- OB Gateway - send unsolicited messages and late replies to a channel\n- Support multiple `TcpSender`s"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzEwMjI1", "url": "https://github.com/spring-projects/spring-integration/pull/3327#pullrequestreview-443310225", "createdAt": "2020-07-06T18:22:50Z", "commit": {"oid": "80506586bce203764fd721fc735df5dac1b17ebc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxODoyMjo1MVrOGtiYFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxODoyMzo1MFrOGtiZ3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQwMjMyNw==", "bodyText": "Looks like you have there this setter as well setUnsolicitedMessageChannel(MessageChannel unsolicitedMessageChannel). Don't we need to have similar option here on DSL level?\nThanks", "url": "https://github.com/spring-projects/spring-integration/pull/3327#discussion_r450402327", "createdAt": "2020-07-06T18:22:51Z", "author": {"login": "artembilan"}, "path": "spring-integration-ip/src/main/java/org/springframework/integration/ip/dsl/TcpOutboundGatewaySpec.java", "diffHunk": "@@ -114,6 +114,11 @@ public TcpOutboundGatewaySpec async(boolean async) {\n \t\treturn this;\n \t}\n \n+\tpublic TcpOutboundGatewaySpec unsolictedMessageChannelName(String channelName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80506586bce203764fd721fc735df5dac1b17ebc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQwMjc4Mw==", "bodyText": "this. on method calls?\nI guess you have just moved those existing setter over here for better class structure.\nNevertheless can we fix this. as well since we are already here in a change?", "url": "https://github.com/spring-projects/spring-integration/pull/3327#discussion_r450402783", "createdAt": "2020-07-06T18:23:50Z", "author": {"login": "artembilan"}, "path": "spring-integration-ip/src/main/java/org/springframework/integration/ip/tcp/TcpOutboundGateway.java", "diffHunk": "@@ -118,14 +129,53 @@ public void setIntegrationEvaluationContext(EvaluationContext evaluationContext)\n \t\tthis.evaluationContextSet = true;\n \t}\n \n-\t@Override\n-\tprotected void doInit() {\n-\t\tsuper.doInit();\n-\t\tif (!this.evaluationContextSet) {\n-\t\t\tthis.evaluationContext = ExpressionUtils.createStandardEvaluationContext(getBeanFactory());\n-\t\t}\n-\t\tAssert.state(!this.closeStreamAfterSend || this.isSingleUse,\n-\t\t\t\t\"Single use connection needed with closeStreamAfterSend\");\n+\t/**\n+\t * Specify the Spring Integration reply channel. If this property is not\n+\t * set the gateway will check for a 'replyChannel' header on the request.\n+\t * @param replyChannel The reply channel.\n+\t */\n+\tpublic void setReplyChannel(MessageChannel replyChannel) {\n+\t\tthis.setOutputChannel(replyChannel);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80506586bce203764fd721fc735df5dac1b17ebc"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a7385502248b04fa51e5f8bdbaf70b28268578b", "author": {"user": {"login": "garyrussell", "name": "Gary Russell"}}, "url": "https://github.com/spring-projects/spring-integration/commit/0a7385502248b04fa51e5f8bdbaf70b28268578b", "committedDate": "2020-07-06T19:00:28Z", "message": "Add channel variant to spec; code polishing."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 82, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}