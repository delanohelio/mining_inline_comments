{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNjUzMjM2", "number": 3322, "title": "GH-3320: Refine lifecycle control in StdIntFlow", "bodyText": "Fixes #3320\nTurns out that lifecycle control for the whole bunch of components\nin one IntegrationFlow is useful in fields.\n\nChange the logic in the StandardIntegrationFlow to let to call\nstart() and stop() independently how the flow was registered in\nthe application context.\nThis way it can be autowired as a Lifecycle to let end-user to\navoid the search for proper component in the flow to stop or start\nmanually - all the components registered with the flow are going\nto be stopped or started respectively", "createdAt": "2020-07-02T17:28:10Z", "url": "https://github.com/spring-projects/spring-integration/pull/3322", "merged": true, "mergeCommit": {"oid": "146b0af1f4bc2822a26b823219cee8aab1da12a5"}, "closed": true, "closedAt": "2020-07-02T19:29:44Z", "author": {"login": "artembilan"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxCR9iAH2gAyNDQzNjUzMjM2OmZjN2NmYTVkZmE0NjAzYjQyYmJkOTA3OTIwOTc0NzhiNDM1MmU4Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxC4H6gH2gAyNDQzNjUzMjM2OjFmYWE1NWY4OTdlNzdjNzY5MDEyMjA2OGI0MzIwM2Q1ZGMzNjRlMTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc7cfa5dfa4603b42bbd90792097478b4352e877", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/fc7cfa5dfa4603b42bbd90792097478b4352e877", "committedDate": "2020-07-02T17:27:48Z", "message": "GH-3320: Refine lifecycle control in StdIntFlow\n\nFixes https://github.com/spring-projects/spring-integration/issues/3320\n\nTurns out that lifecycle control for the whole bunch of components\nin one `IntegrationFlow` is useful in fields.\n\n* Change the logic in the `StandardIntegrationFlow` to let to call\n`start()` and `stop()` independently how the flow was registered in\nthe application context.\nThis way it can be autowired as a `Lifecycle` to let end-user to\navoid the search for proper component in the flow to stop or start\nmanually - all the components registered with the flow are going\nto be stopped or started respectively"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTA4MDY4", "url": "https://github.com/spring-projects/spring-integration/pull/3322#pullrequestreview-441908068", "createdAt": "2020-07-02T17:50:51Z", "commit": {"oid": "fc7cfa5dfa4603b42bbd90792097478b4352e877"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzo1MToyNlrOGsXv4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNzo1MToyNlrOGsXv4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE3OTYxOQ==", "bodyText": "I didn't notice this, but stopping right to left was wrong; corrected in the new code.", "url": "https://github.com/spring-projects/spring-integration/pull/3322#discussion_r449179619", "createdAt": "2020-07-02T17:51:26Z", "author": {"login": "garyrussell"}, "path": "spring-integration-core/src/main/java/org/springframework/integration/dsl/StandardIntegrationFlow.java", "diffHunk": "@@ -127,30 +124,29 @@ public void start() {\n \n \t@Override\n \tpublic void stop(Runnable callback) {\n-\t\tif (this.lifecycles.size() > 0) {\n-\t\t\tAggregatingCallback aggregatingCallback = new AggregatingCallback(this.lifecycles.size(), callback);\n-\t\t\tListIterator<SmartLifecycle> iterator = this.lifecycles.listIterator(this.lifecycles.size());\n-\t\t\twhile (iterator.hasPrevious()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7cfa5dfa4603b42bbd90792097478b4352e877"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1faa55f897e77c7690122068b43203d5dc364e15", "author": {"user": {"login": "artembilan", "name": "Artem Bilan"}}, "url": "https://github.com/spring-projects/spring-integration/commit/1faa55f897e77c7690122068b43203d5dc364e15", "committedDate": "2020-07-02T18:09:29Z", "message": "* Add `this.` to class property usage to satisfy Checkstyle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 78, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}