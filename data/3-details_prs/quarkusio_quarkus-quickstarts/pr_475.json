{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjMxNjA5", "number": 475, "title": "[#353] Add tests to the neo4j quickstart", "bodyText": "Signed-off-by: Miguel Serra serramiguel1@gmail.com", "createdAt": "2020-02-25T14:56:25Z", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475", "merged": true, "mergeCommit": {"oid": "25307e2e94b4b22facff979fe31c3c2b52693c4d"}, "closed": true, "closedAt": "2020-03-03T17:42:58Z", "author": {"login": "mcserra"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHzYIUAH2gAyMzc5NjMxNjA5OjMxZWIyNmUyNzlhYjBlNzJlYTU4Y2ZlNmZmNTg0YjMxODExNjM5Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKEvOwAFqTM2ODExOTQzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "31eb26e279ab0e72ea58cfe6ff584b3181163928", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/31eb26e279ab0e72ea58cfe6ff584b3181163928", "committedDate": "2020-02-25T14:55:04Z", "message": "Add tests to the neo4j quickstart\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MjE2MjYx", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#pullrequestreview-364216261", "createdAt": "2020-02-25T15:09:00Z", "commit": {"oid": "31eb26e279ab0e72ea58cfe6ff584b3181163928"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNTowOTowMVrOFuJw3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNTowOToyNlrOFuJxyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkzODc4Mw==", "bodyText": "Any reason to not use TestContainers as others quickstart (like Kafka)", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#discussion_r383938783", "createdAt": "2020-02-25T15:09:01Z", "author": {"login": "cescoffier"}, "path": "neo4j-quickstart/pom.xml", "diffHunk": "@@ -73,6 +74,58 @@\n           </execution>\n         </executions>\n       </plugin>\n+      <plugin>\n+        <!-- Automatically start Neo4J for integration testing - requires Docker -->\n+        <groupId>io.fabric8</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31eb26e279ab0e72ea58cfe6ff584b3181163928"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkzOTAxOA==", "bodyText": "Would be great to also test the reactive API if possible.", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#discussion_r383939018", "createdAt": "2020-02-25T15:09:26Z", "author": {"login": "cescoffier"}, "path": "neo4j-quickstart/src/test/java/org/acme/neo4j/FruitsEndpointTest.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package org.acme.neo4j;\n+\n+import io.quarkus.test.junit.QuarkusTest;\n+\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.function.UnaryOperator;\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.core.IsNot.not;\n+\n+@QuarkusTest\n+class FruitsEndpointTest  {\n+\n+    private static final Map<String, String> fruitIdMap = new HashMap<>();\n+    private static final UnaryOperator<String> FRUIT = fruit ->  String.format(\"{\\\"name\\\":\\\"%s\\\"}\", fruit);\n+\n+    @Test\n+    public void testResource() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31eb26e279ab0e72ea58cfe6ff584b3181163928"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Nzg0NTYy", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#pullrequestreview-366784562", "createdAt": "2020-02-29T08:00:05Z", "commit": {"oid": "c11737463318792b6baca4f3ff6498abb09e39ef"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwODowMDowNVrOFwIOUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwODowMDowNVrOFwIOUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxMDcwNQ==", "bodyText": "The interest of test container combined with this approach is that you don't need to set up the exposed port. It will pick a random available port.", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#discussion_r386010705", "createdAt": "2020-02-29T08:00:05Z", "author": {"login": "cescoffier"}, "path": "neo4j-quickstart/src/test/java/org/acme/neo4j/Neo4jResource.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package org.acme.neo4j;\n+\n+import io.quarkus.test.common.QuarkusTestResourceLifecycleManager;\n+\n+import com.github.dockerjava.api.model.ExposedPort;\n+import com.github.dockerjava.api.model.PortBinding;\n+import com.github.dockerjava.api.model.Ports;\n+\n+import java.util.Collections;\n+import java.util.Map;\n+\n+import org.testcontainers.containers.Neo4jContainer;\n+\n+public class Neo4jResource implements QuarkusTestResourceLifecycleManager {\n+\n+    private final Neo4jContainer NEO4J = new Neo4jContainer<>(\"neo4j:4.0.0\").withAdminPassword(null)\n+        .withExposedPorts(7687)\n+        .withCreateContainerCmdModifier(cmd -> cmd\n+            .withHostName(\"localhost\")\n+            .getHostConfig().withPortBindings(new PortBinding(Ports.Binding.bindPort(7687), new ExposedPort(7687))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c11737463318792b6baca4f3ff6498abb09e39ef"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c11737463318792b6baca4f3ff6498abb09e39ef", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/c11737463318792b6baca4f3ff6498abb09e39ef", "committedDate": "2020-02-25T20:03:14Z", "message": "Add testcontainers\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}, "afterCommit": {"oid": "2898daeafafa46d0063ffe1a6ad750cff93cac22", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/2898daeafafa46d0063ffe1a6ad750cff93cac22", "committedDate": "2020-02-29T09:45:35Z", "message": "Add testcontainers\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTExOTgy", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#pullrequestreview-368111982", "createdAt": "2020-03-03T16:08:20Z", "commit": {"oid": "2898daeafafa46d0063ffe1a6ad750cff93cac22"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNjowODoyMFrOFxMQPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNjowODoyMFrOFxMQPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEyNTMxMA==", "bodyText": "Can be removed no?", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#discussion_r387125310", "createdAt": "2020-03-03T16:08:20Z", "author": {"login": "cescoffier"}, "path": "neo4j-quickstart/pom.xml", "diffHunk": "@@ -12,6 +12,8 @@\n     <maven.compiler.source>1.8</maven.compiler.source>\n     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n     <maven.compiler.target>1.8</maven.compiler.target>\n+    <docker-plugin.version>0.28.0</docker-plugin.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2898daeafafa46d0063ffe1a6ad750cff93cac22"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ed756362968080747a817ed603f367b48715f84", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/0ed756362968080747a817ed603f367b48715f84", "committedDate": "2020-03-03T16:14:41Z", "message": "Add testcontainers\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2898daeafafa46d0063ffe1a6ad750cff93cac22", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/2898daeafafa46d0063ffe1a6ad750cff93cac22", "committedDate": "2020-02-29T09:45:35Z", "message": "Add testcontainers\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}, "afterCommit": {"oid": "0ed756362968080747a817ed603f367b48715f84", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/0ed756362968080747a817ed603f367b48715f84", "committedDate": "2020-03-03T16:14:41Z", "message": "Add testcontainers\n\nSigned-off-by: Miguel Serra <Miguel.Serra@criticaltechworks.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTE5NDMy", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/475#pullrequestreview-368119432", "createdAt": "2020-03-03T16:16:32Z", "commit": {"oid": "0ed756362968080747a817ed603f367b48715f84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3432, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}