{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTMzODc4", "number": 918, "title": "Changes to add/invoke content provider for broker interaction", "bodyText": "MSAL PR : AzureAD/microsoft-authentication-library-for-android#1053\nBroker PR : https://github.com/AzureAD/ad-accounts-for-android/pull/1298\nChange Doc : https://identitydivision.visualstudio.com/DefaultCollection/DevEx/_git/AuthLibrariesApiReview/pullrequest/1554", "createdAt": "2020-05-27T00:29:34Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918", "merged": true, "mergeCommit": {"oid": "4e4644c1f08d7d71b9d4a0f61bb209fbf5f928e0"}, "closed": true, "closedAt": "2020-06-03T21:29:32Z", "author": {"login": "kreedula"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcev2gYgH2gAyNDIzNTMzODc4OjQ1ZTY5ZjEyYmJiNjQwYjRiZDYxYTdlZDEwZGNmYjU1NTViNDE2NGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnvqKPgFqTQyMzkxMjg4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45e69f12bbb640b4bd61a7ed10dcfb5555b4164b", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/45e69f12bbb640b4bd61a7ed10dcfb5555b4164b", "committedDate": "2020-05-06T21:48:53Z", "message": "Changes to add/invoke content provider for broker interaction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f16bb3b2e57f45839ac242c8f719334577560ff", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9f16bb3b2e57f45839ac242c8f719334577560ff", "committedDate": "2020-05-11T03:14:26Z", "message": "More changes related to Content provider strategy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c6df8a4a469f4fa2488999169523f20f750600a", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6c6df8a4a469f4fa2488999169523f20f750600a", "committedDate": "2020-05-13T21:35:15Z", "message": "Minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5da5c13d403dc9def4de42c7b72180819bed61a", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c5da5c13d403dc9def4de42c7b72180819bed61a", "committedDate": "2020-05-19T22:42:22Z", "message": "Content provider telemetry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0737d76a5bf65375a89072197bc24dae912afdc2", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0737d76a5bf65375a89072197bc24dae912afdc2", "committedDate": "2020-05-19T22:46:24Z", "message": "Merge branch 'dev' into kreedula/content-provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6611b1777c155912ad967b9a1515e7925e2b4cab", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6611b1777c155912ad967b9a1515e7925e2b4cab", "committedDate": "2020-05-27T00:28:47Z", "message": "Minor comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148ebfa16446673262c836251fba865d56367da5", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/148ebfa16446673262c836251fba865d56367da5", "committedDate": "2020-05-27T00:29:43Z", "message": "Merge branch 'dev' into kreedula/content-provider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTE5NjQx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-419519641", "createdAt": "2020-05-27T18:57:18Z", "commit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NzoxOFrOGbY01w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NzoxOFrOGbY01w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MTQ3OQ==", "bodyText": "nit: capitalize letter e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431371479", "createdAt": "2020-05-27T18:57:18Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICe_PATH = \"/getCurrentAccountSharedDevice\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTE5OTE1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-419519915", "createdAt": "2020-05-27T18:57:40Z", "commit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1Nzo0MFrOGbY1tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1Nzo0MFrOGbY1tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MTcwMw==", "bodyText": "nit: capitalize letter e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431371703", "createdAt": "2020-05-27T18:57:40Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICe_PATH = \"/getCurrentAccountSharedDevice\";\n+\n+        public static final String GET_DEVICE_MODE_PATH = \"/getDeviceMode\";\n+\n+        public static final String SIGN_OUT_FROM_SHARED_DEVICE_PATH = \"/signOutFromSharedDevice\";\n+\n+\n+        /** Codes for URI **/\n+        public static final int HELLO_URI_CODE = 1;\n+\n+        public static final int ACQUIRE_TOKEN_INTERACTIVE_CODE = 2;\n+\n+        public static final int ACQUIRE_TOKEN_SILENT_CODE = 3;\n+\n+        public static final int GET_ACCOUNTS_CODE = 4;\n+\n+        public static final int REMOVE_ACCOUNTS_CODE = 5;\n+\n+        public static final int GET_CURRENT_ACCOUNT_SHARED_DEVICe_CODE = 6;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTIxNTM5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-419521539", "createdAt": "2020-05-27T18:59:52Z", "commit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1OTo1MlrOGbY6ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1OTo1MlrOGbY6ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3Mjk4Ng==", "bodyText": "can be simplified to TextUtils.isEmpty", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431372986", "createdAt": "2020-05-27T18:59:52Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "diffHunk": "@@ -101,8 +101,11 @@ public void disconnect() {\n      * @return Intent\n      */\n     public Intent getIntentForAuthService(final Context context) {\n-        final String currentActiveBrokerPackageName = getCurrentActiveBrokerPackageName(context);\n-        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0) {\n+        final String currentActiveBrokerPackageName = new BrokerValidator(context).\n+                getCurrentActiveBrokerPackageName(context);\n+\n+        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0 ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTIyNTQw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-419522540", "createdAt": "2020-05-27T19:01:14Z", "commit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOTowMToxNVrOGbY9xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOTowMToxNVrOGbY9xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3Mzc2NQ==", "bodyText": "Looks like we weren't doing this check before. Why was it NOT needed before? Or why is it needed now?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431373765", "createdAt": "2020-05-27T19:01:15Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "diffHunk": "@@ -101,8 +101,11 @@ public void disconnect() {\n      * @return Intent\n      */\n     public Intent getIntentForAuthService(final Context context) {\n-        final String currentActiveBrokerPackageName = getCurrentActiveBrokerPackageName(context);\n-        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0) {\n+        final String currentActiveBrokerPackageName = new BrokerValidator(context).\n+                getCurrentActiveBrokerPackageName(context);\n+\n+        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0 ||\n+                !isMicrosoftAuthServiceSupported(context.getPackageManager(), currentActiveBrokerPackageName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "420050cd0c16140046dc34f831a66df8f767b4db", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/420050cd0c16140046dc34f831a66df8f767b4db", "committedDate": "2020-05-28T17:53:07Z", "message": "Addressing comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5effcbb12d35e20e0beee5111d65f59a1c77c6ec", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5effcbb12d35e20e0beee5111d65f59a1c77c6ec", "committedDate": "2020-05-28T17:53:54Z", "message": "Merge branch 'dev' into kreedula/content-provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de788371bcdfc03422587c6b91131705d88b274b", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/de788371bcdfc03422587c6b91131705d88b274b", "committedDate": "2020-05-29T01:31:29Z", "message": "Parcelable util"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a468ebdef5b9e49f660929119378a392d5a241b", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0a468ebdef5b9e49f660929119378a392d5a241b", "committedDate": "2020-05-29T20:56:53Z", "message": "Marshalling changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/27b0ab93e492e42564cac7e718da27d9e2cfcd88", "committedDate": "2020-05-29T21:23:54Z", "message": "Added copyright"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzY2ODI5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-421366829", "createdAt": "2020-05-30T01:38:36Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDgyMTg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423082186", "createdAt": "2020-06-02T21:49:50Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo0OTo1MFrOGeFK8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo0OTo1MFrOGeFK8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NTE4Ng==", "bodyText": "@Nullable return value would be good to document with an annot / javadoc (where presumably null indicates no active broker)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434195186", "createdAt": "2020-06-02T21:49:50Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,25 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context\n+     * @return String\n+     */\n+    public String getCurrentActiveBrokerPackageName(@NonNull final Context context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDg1OTI3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423085927", "createdAt": "2020-06-02T21:57:22Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1NzoyMlrOGeFWfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1NzoyMlrOGeFWfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODE0Mw==", "bodyText": "Just calling out that this change alters binary compatibility of common....", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198143", "createdAt": "2020-06-02T21:57:22Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDg2MDg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423086086", "createdAt": "2020-06-02T21:57:41Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1Nzo0MVrOGeFW_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1Nzo0MVrOGeFW_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODI3MA==", "bodyText": "Same here, changes binary compatibility. Just FYI", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198270", "createdAt": "2020-06-02T21:57:41Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDg2MzI1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423086325", "createdAt": "2020-06-02T21:58:10Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1ODoxMFrOGeFXvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1ODoxMFrOGeFXvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODQ2MQ==", "bodyText": "Here too", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198461", "createdAt": "2020-06-02T21:58:10Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 97}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDg2ODc5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423086879", "createdAt": "2020-06-02T21:59:13Z", "commit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e815afc86905c61befb69273cbb30999ff4759d", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8e815afc86905c61befb69273cbb30999ff4759d", "committedDate": "2020-06-02T22:14:11Z", "message": "Addressing comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9be93a249e0f8152e0b3779a3383f3a6330ea8cf", "committedDate": "2020-06-02T22:14:57Z", "message": "Merge branch 'dev' into kreedula/content-provider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDk4MzIz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423098323", "createdAt": "2020-06-02T22:24:00Z", "commit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyNDowMVrOGeF9pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyNDowMVrOGeF9pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwODE2Nw==", "bodyText": "Nit: Should this be the @return ? Seems like this content on the wrong attribute", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434208167", "createdAt": "2020-06-02T22:24:01Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMTAwMDg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423100086", "createdAt": "2020-06-02T22:28:14Z", "commit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyODoxNFrOGeGDtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjo0NDoyMFrOGeGZIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwOTcxOA==", "bodyText": "If this is a constant collection, and it looks like it is, should it have a private constructor?  The other instances of this have documentation describing each constant, should this?  Is there a link to documentation that could be referenced?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434209718", "createdAt": "2020-06-02T22:28:14Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDEzMA==", "bodyText": "Should these integers be in a separate container?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210130", "createdAt": "2020-06-02T22:29:27Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICE_PATH = \"/getCurrentAccountSharedDevice\";\n+\n+        public static final String GET_DEVICE_MODE_PATH = \"/getDeviceMode\";\n+\n+        public static final String SIGN_OUT_FROM_SHARED_DEVICE_PATH = \"/signOutFromSharedDevice\";\n+\n+\n+        /** Codes for URI **/\n+        public static final int HELLO_URI_CODE = 1;\n+\n+        public static final int ACQUIRE_TOKEN_INTERACTIVE_CODE = 2;\n+\n+        public static final int ACQUIRE_TOKEN_SILENT_CODE = 3;\n+\n+        public static final int GET_ACCOUNTS_CODE = 4;\n+\n+        public static final int REMOVE_ACCOUNTS_CODE = 5;\n+\n+        public static final int GET_CURRENT_ACCOUNT_SHARED_DEVICE_CODE = 6;\n+\n+        public static final int GET_DEVICE_MODE_CODE = 7;\n+\n+        public static final int SIGN_OUT_FROM_SHARED_DEVICE_CODE = 8;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDUyMQ==", "bodyText": "Should there be documentation for this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210521", "createdAt": "2020-06-02T22:30:31Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -415,6 +417,28 @@ public Bundle getRequestBundleForHello(@NonNull final CommandParameters paramete\n         return requestBundle;\n     }\n \n+    public Intent getRequestIntentForAcquireTokenInteractive(@NonNull final Bundle resultBundle,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDc4Ng==", "bodyText": "Should we document this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210786", "createdAt": "2020-06-02T22:31:18Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDgzOQ==", "bodyText": "Should we document this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210839", "createdAt": "2020-06-02T22:31:28Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTY0OA==", "bodyText": "@nonnull?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211648", "createdAt": "2020-06-02T22:33:52Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTcxOQ==", "bodyText": "@nonnull?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211719", "createdAt": "2020-06-02T22:34:06Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {\n+        final Parcel parcel = Parcel.obtain();\n+        parcel.unmarshall(bytes, 0, bytes.length);\n+        parcel.setDataPosition(0);\n+        return parcel;\n+    }\n+\n+    public static <T> T unmarshall(byte[] bytes, Parcelable.Creator<T> creator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ==", "bodyText": "Should we have documentation on this public class?  Should it be final, with a private constructor?  Higher level, is there a reason to prefer static method references over instance methods on a singleton-safe class?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211911", "createdAt": "2020-06-02T22:34:43Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxNTIwMQ==", "bodyText": "Point of curiosity: what's the relationship between this context and mContext?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434215201", "createdAt": "2020-06-02T22:44:20Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "477877f2d99d6eb7d752f18d941a682b51665c62", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/477877f2d99d6eb7d752f18d941a682b51665c62", "committedDate": "2020-06-03T00:41:56Z", "message": "Addressing comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25d68346fc7c8a6bacd04f1966148ff5d32269a6", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/25d68346fc7c8a6bacd04f1966148ff5d32269a6", "committedDate": "2020-06-03T00:42:30Z", "message": "Merge branch 'kreedula/content-provider' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into kreedula/content-provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88388a82c7235d47a9293a69f5b8f30b496a1cc5", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/88388a82c7235d47a9293a69f5b8f30b496a1cc5", "committedDate": "2020-06-03T00:52:30Z", "message": "Added NonNull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48de467c71434097b86f08be2e69dfd3748d425b", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/48de467c71434097b86f08be2e69dfd3748d425b", "committedDate": "2020-06-03T18:35:16Z", "message": "Addressing comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODQ2MTAx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423846101", "createdAt": "2020-06-03T19:04:18Z", "commit": {"oid": "48de467c71434097b86f08be2e69dfd3748d425b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowNDoxOVrOGepd5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowNDoxOVrOGepd5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4OTg2MA==", "bodyText": "You can also do @NoArgsConstructor(access = AccessLevel.PRIVATE) if you prefer the Lombok style.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434789860", "createdAt": "2020-06-03T19:04:19Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * Utility class to marshall and unmarshall Parcelable types.\n+ */\n+public final class ParcelableUtil {\n+\n+    private ParcelableUtil(){\n+\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48de467c71434097b86f08be2e69dfd3748d425b"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a553eea4573add49159e38a5d2cfd2924cb0672", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8a553eea4573add49159e38a5d2cfd2924cb0672", "committedDate": "2020-06-03T19:25:33Z", "message": "Added lombok style private constructor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODY3Mjcz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423867273", "createdAt": "2020-06-03T19:34:32Z", "commit": {"oid": "8a553eea4573add49159e38a5d2cfd2924cb0672"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODY4MjUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423868253", "createdAt": "2020-06-03T19:35:13Z", "commit": {"oid": "8a553eea4573add49159e38a5d2cfd2924cb0672"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55e3aea7e14cf6b9adf4ee519fffdeeddca58552", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/55e3aea7e14cf6b9adf4ee519fffdeeddca58552", "committedDate": "2020-06-03T20:35:21Z", "message": "Address javadoc comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89c45a6e932984652122cf2ae07ead60f86dbe4d", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/89c45a6e932984652122cf2ae07ead60f86dbe4d", "committedDate": "2020-06-03T20:37:03Z", "message": "Minor edits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzOTEyODg0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#pullrequestreview-423912884", "createdAt": "2020-06-03T20:40:43Z", "commit": {"oid": "89c45a6e932984652122cf2ae07ead60f86dbe4d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1644, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}