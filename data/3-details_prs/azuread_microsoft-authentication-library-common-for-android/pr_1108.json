{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNTc0ODU1", "number": 1108, "title": "Hello() cache", "bodyText": "Changes\nIntroduces a cache for cutting down the amount of redundant hello().\nIt can be deduced that a negotiated protocol version might change when one (or more) the following criteria changes.\n\nThe client (app) bumps minimum version support in config file\nThe client (MSAL) bumps maximum/curent protocol version.\nWhen the targeted broker app changes\n(i.e. Authenticator app is uninstalled and CP became the new broker)\nWhen the targeted app is updated.\n\nWe do not have an access to the actual protocol version the broker supports - it might or might not be the same, so we make sure nothing breaks by re-negotiating.\n\n\n\nThis cache will use all the following criterias to create a key - for storing negotiated protocol version in SharedPref.\nThis should cut the amount of hello() down to lower single digit per month.\nI also integrate the cache with BrokerMsalController in this PR.", "createdAt": "2020-11-01T07:32:17Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108", "merged": true, "mergeCommit": {"oid": "968aff7d46da0d48f945ace2747d95e776bcb0b5"}, "closed": true, "closedAt": "2020-11-02T16:54:58Z", "author": {"login": "rpdome"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYbwu4gFqTUyMTMwNzUyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYnfTBAFqTUyMTgxMzY1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzA3NTI3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521307527", "createdAt": "2020-11-02T03:04:57Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMzowNDo1N1rOHr1A5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMzowNzozMFrOHr1Clw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxOTM5Ng==", "bodyText": "these will change, so you may want a distinguishing factor in here.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515719396", "createdAt": "2020-11-02T03:04:57Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -644,11 +644,21 @@\n          */\n         public static final String BROKER_ACTIVITY_NAME = \"broker.activity.name\";\n \n+        /**\n+         * The Msal-To-Broker protocol name.\n+         */\n+        public static final String MSAL_TO_BROKER_PROTOCOL_NAME = \"msal.to.broker\";\n+\n         /**\n          * The newest Msal-To-Broker protocol version.\n          */\n         public static final String MSAL_TO_BROKER_PROTOCOL_VERSION_CODE = \"5.0\";\n \n+        /**\n+         * The Msal-To-Broker protocol name.\n+         */\n+        public static final String BROKER_API_TO_BROKER_PROTOCOL_NAME = \"broker.api.to.broker\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxOTQ0MQ==", "bodyText": "Log.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515719441", "createdAt": "2020-11-02T03:05:06Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/ipc/ContentProviderStrategy.java", "diffHunk": "@@ -136,6 +136,10 @@ public boolean isBrokerContentProviderAvailable(@NonNull final String targetedBr\n         final List<ProviderInfo> providers = mContext.getPackageManager()\n                 .queryContentProviders(null, 0, 0);\n \n+        if (providers == null){\n+            return false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxOTgzMQ==", "bodyText": "We might want a way to clean these up so they don't continually build.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515719831", "createdAt": "2020-11-02T03:07:30Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/HelloCache.java", "diffHunk": "@@ -0,0 +1,152 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+\n+package com.microsoft.identity.common.internal.cache;\n+\n+import android.content.Context;\n+import android.content.pm.PackageInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.annotation.VisibleForTesting;\n+\n+import com.microsoft.identity.common.internal.logging.Logger;\n+\n+/**\n+ * Persisted cache for the IPC hello() protocol.\n+ * Use client's protocol version and the targeted app's package name and app version as a key\n+ * to cache the negotiated protocol version.\n+ * <p>\n+ * This means a new hello() call will ONLY be triggered only when.\n+ * 1. IPC operation is invoked for the very first time.\n+ * 2. Client bumps up protocol version.\n+ * 3. The targeted app is updated, uninstalled, reinstalled.\n+ * <p>\n+ * NOTE: the downside of this is that if you're debugging protocol change on the targeted app side,\n+ * you'll either have to keep bumping the test app version or clear the cache.\n+ * I've provided clearCache() for this purpose.\n+ */\n+public class HelloCache {\n+    private static final String TAG = HelloCache.class.getSimpleName();\n+\n+    private static final String SHARED_PREFERENCE_NAME = \"com.microsoft.common.ipc.hello.cache\";\n+\n+    private final SharedPreferencesFileManager mFileManager;\n+    private final Context mContext;\n+    private final String mProtocolName;\n+    private final String mTargetAppPackageName;\n+\n+    /**\n+     * Default constructor.\n+     *\n+     * @param context              application context.\n+     * @param protocolName         name of the protocol that invokes hello().\n+     * @param targetAppPackageName package name of the app that this client will hello() with.\n+     */\n+    public HelloCache(@NonNull final Context context,\n+                      @NonNull final String protocolName,\n+                      @NonNull final String targetAppPackageName) {\n+        mFileManager = new SharedPreferencesFileManager(context, SHARED_PREFERENCE_NAME);\n+        mContext = context;\n+        mProtocolName = protocolName;\n+        mTargetAppPackageName = targetAppPackageName;\n+    }\n+\n+    /**\n+     * Gets the cached negotiated protocol version. Returns null if there is none.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    public @Nullable String tryGetNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                                            @NonNull final String clientMaximumProtocolVersion) {\n+        final String methodName = \":tryGetNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return null;\n+        }\n+\n+        return mFileManager.getString(key);\n+    }\n+\n+    /**\n+     * Store the given negotiated protocol version into the cache.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     * @param negotiatedProtocolVersion    the negotiated protocol version as returned from hello().\n+     */\n+    public void saveNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                              @NonNull final String clientMaximumProtocolVersion,\n+                                              @NonNull final String negotiatedProtocolVersion) {\n+        final String methodName = \":saveNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return;\n+        }\n+\n+        mFileManager.putString(key, negotiatedProtocolVersion);\n+    }\n+\n+    /**\n+     * Generates {@link SharedPreferencesFileManager}'s key.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    private @NonNull String getKey(@Nullable final String clientMinimumProtocolVersion,\n+                                   @NonNull final String clientMaximumProtocolVersion)\n+            throws PackageManager.NameNotFoundException {\n+        return mProtocolName +\n+                \"[\" + clientMinimumProtocolVersion + \",\" + clientMaximumProtocolVersion + \"]:\"\n+                + mTargetAppPackageName + \"[\" + getVersionCode() + \"]\";\n+    }\n+\n+    /**\n+     * To be used while debugging protocol change only.\n+     */\n+    @VisibleForTesting\n+    public void clearCache() {\n+        mFileManager.clear();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 141}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI1NzI4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521325728", "createdAt": "2020-11-02T04:29:56Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDoyOTo1NlrOHr1-BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDoyOTo1NlrOHr1-BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNTA0NQ==", "bodyText": "We probably want something more descriptive here (as this changelog is public)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515735045", "createdAt": "2020-11-02T04:29:56Z", "author": {"login": "shahzaibj"}, "path": "changelog.txt", "diffHunk": "@@ -14,6 +14,7 @@ vNext\n     - [Part 3] Refactor AccountManager Strategy[IPC part 4] test cases for IPC strategies (#1092)\n     - [Part 4] test cases for IPC strategies (#1093)\n     - [Part 5.5] make changes to support the Broker API work (#1101)\n+- Hello() cache (#1108)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI1ODQ1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521325845", "createdAt": "2020-11-02T04:30:28Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozMDoyOFrOHr1-ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozMDoyOFrOHr1-ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNTE0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                     * The Msal-To-Broker protocol name.\n          \n          \n            \n                     * The Broker-To-Broker protocol name.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515735140", "createdAt": "2020-11-02T04:30:28Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -644,11 +644,21 @@\n          */\n         public static final String BROKER_ACTIVITY_NAME = \"broker.activity.name\";\n \n+        /**\n+         * The Msal-To-Broker protocol name.\n+         */\n+        public static final String MSAL_TO_BROKER_PROTOCOL_NAME = \"msal.to.broker\";\n+\n         /**\n          * The newest Msal-To-Broker protocol version.\n          */\n         public static final String MSAL_TO_BROKER_PROTOCOL_VERSION_CODE = \"5.0\";\n \n+        /**\n+         * The Msal-To-Broker protocol name.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI2Mzkx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521326391", "createdAt": "2020-11-02T04:33:09Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozMzowOVrOHr2ANw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozMzowOVrOHr2ANw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNTYwNw==", "bodyText": "Or you could pass a flag to disable/enable the cache for Hello....I would actually like to see that...doesn't necessarily have to be in this PR.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515735607", "createdAt": "2020-11-02T04:33:09Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/HelloCache.java", "diffHunk": "@@ -0,0 +1,152 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+\n+package com.microsoft.identity.common.internal.cache;\n+\n+import android.content.Context;\n+import android.content.pm.PackageInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.annotation.VisibleForTesting;\n+\n+import com.microsoft.identity.common.internal.logging.Logger;\n+\n+/**\n+ * Persisted cache for the IPC hello() protocol.\n+ * Use client's protocol version and the targeted app's package name and app version as a key\n+ * to cache the negotiated protocol version.\n+ * <p>\n+ * This means a new hello() call will ONLY be triggered only when.\n+ * 1. IPC operation is invoked for the very first time.\n+ * 2. Client bumps up protocol version.\n+ * 3. The targeted app is updated, uninstalled, reinstalled.\n+ * <p>\n+ * NOTE: the downside of this is that if you're debugging protocol change on the targeted app side,\n+ * you'll either have to keep bumping the test app version or clear the cache.\n+ * I've provided clearCache() for this purpose.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI3MDQx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521327041", "createdAt": "2020-11-02T04:36:11Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozNjoxMVrOHr2CjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozNjoxMVrOHr2CjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNjIwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private @NonNull String getKey(@Nullable final String clientMinimumProtocolVersion,\n          \n          \n            \n                private @NonNull String getNegotiatedProtocolVersionCacheKey(@Nullable final String clientMinimumProtocolVersion,", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515736204", "createdAt": "2020-11-02T04:36:11Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/HelloCache.java", "diffHunk": "@@ -0,0 +1,152 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+\n+package com.microsoft.identity.common.internal.cache;\n+\n+import android.content.Context;\n+import android.content.pm.PackageInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.annotation.VisibleForTesting;\n+\n+import com.microsoft.identity.common.internal.logging.Logger;\n+\n+/**\n+ * Persisted cache for the IPC hello() protocol.\n+ * Use client's protocol version and the targeted app's package name and app version as a key\n+ * to cache the negotiated protocol version.\n+ * <p>\n+ * This means a new hello() call will ONLY be triggered only when.\n+ * 1. IPC operation is invoked for the very first time.\n+ * 2. Client bumps up protocol version.\n+ * 3. The targeted app is updated, uninstalled, reinstalled.\n+ * <p>\n+ * NOTE: the downside of this is that if you're debugging protocol change on the targeted app side,\n+ * you'll either have to keep bumping the test app version or clear the cache.\n+ * I've provided clearCache() for this purpose.\n+ */\n+public class HelloCache {\n+    private static final String TAG = HelloCache.class.getSimpleName();\n+\n+    private static final String SHARED_PREFERENCE_NAME = \"com.microsoft.common.ipc.hello.cache\";\n+\n+    private final SharedPreferencesFileManager mFileManager;\n+    private final Context mContext;\n+    private final String mProtocolName;\n+    private final String mTargetAppPackageName;\n+\n+    /**\n+     * Default constructor.\n+     *\n+     * @param context              application context.\n+     * @param protocolName         name of the protocol that invokes hello().\n+     * @param targetAppPackageName package name of the app that this client will hello() with.\n+     */\n+    public HelloCache(@NonNull final Context context,\n+                      @NonNull final String protocolName,\n+                      @NonNull final String targetAppPackageName) {\n+        mFileManager = new SharedPreferencesFileManager(context, SHARED_PREFERENCE_NAME);\n+        mContext = context;\n+        mProtocolName = protocolName;\n+        mTargetAppPackageName = targetAppPackageName;\n+    }\n+\n+    /**\n+     * Gets the cached negotiated protocol version. Returns null if there is none.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    public @Nullable String tryGetNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                                            @NonNull final String clientMaximumProtocolVersion) {\n+        final String methodName = \":tryGetNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return null;\n+        }\n+\n+        return mFileManager.getString(key);\n+    }\n+\n+    /**\n+     * Store the given negotiated protocol version into the cache.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     * @param negotiatedProtocolVersion    the negotiated protocol version as returned from hello().\n+     */\n+    public void saveNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                              @NonNull final String clientMaximumProtocolVersion,\n+                                              @NonNull final String negotiatedProtocolVersion) {\n+        final String methodName = \":saveNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return;\n+        }\n+\n+        mFileManager.putString(key, negotiatedProtocolVersion);\n+    }\n+\n+    /**\n+     * Generates {@link SharedPreferencesFileManager}'s key.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    private @NonNull String getKey(@Nullable final String clientMinimumProtocolVersion,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 127}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI3MTMy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521327132", "createdAt": "2020-11-02T04:36:34Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozNjozNFrOHr2Czg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozNjozNFrOHr2Czg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNjI3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Generates {@link SharedPreferencesFileManager}'s key.\n          \n          \n            \n                 * Generates {@link SharedPreferencesFileManager}'s cache key for the negotiated protocol version.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515736270", "createdAt": "2020-11-02T04:36:34Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/HelloCache.java", "diffHunk": "@@ -0,0 +1,152 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+\n+package com.microsoft.identity.common.internal.cache;\n+\n+import android.content.Context;\n+import android.content.pm.PackageInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.annotation.VisibleForTesting;\n+\n+import com.microsoft.identity.common.internal.logging.Logger;\n+\n+/**\n+ * Persisted cache for the IPC hello() protocol.\n+ * Use client's protocol version and the targeted app's package name and app version as a key\n+ * to cache the negotiated protocol version.\n+ * <p>\n+ * This means a new hello() call will ONLY be triggered only when.\n+ * 1. IPC operation is invoked for the very first time.\n+ * 2. Client bumps up protocol version.\n+ * 3. The targeted app is updated, uninstalled, reinstalled.\n+ * <p>\n+ * NOTE: the downside of this is that if you're debugging protocol change on the targeted app side,\n+ * you'll either have to keep bumping the test app version or clear the cache.\n+ * I've provided clearCache() for this purpose.\n+ */\n+public class HelloCache {\n+    private static final String TAG = HelloCache.class.getSimpleName();\n+\n+    private static final String SHARED_PREFERENCE_NAME = \"com.microsoft.common.ipc.hello.cache\";\n+\n+    private final SharedPreferencesFileManager mFileManager;\n+    private final Context mContext;\n+    private final String mProtocolName;\n+    private final String mTargetAppPackageName;\n+\n+    /**\n+     * Default constructor.\n+     *\n+     * @param context              application context.\n+     * @param protocolName         name of the protocol that invokes hello().\n+     * @param targetAppPackageName package name of the app that this client will hello() with.\n+     */\n+    public HelloCache(@NonNull final Context context,\n+                      @NonNull final String protocolName,\n+                      @NonNull final String targetAppPackageName) {\n+        mFileManager = new SharedPreferencesFileManager(context, SHARED_PREFERENCE_NAME);\n+        mContext = context;\n+        mProtocolName = protocolName;\n+        mTargetAppPackageName = targetAppPackageName;\n+    }\n+\n+    /**\n+     * Gets the cached negotiated protocol version. Returns null if there is none.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    public @Nullable String tryGetNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                                            @NonNull final String clientMaximumProtocolVersion) {\n+        final String methodName = \":tryGetNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return null;\n+        }\n+\n+        return mFileManager.getString(key);\n+    }\n+\n+    /**\n+     * Store the given negotiated protocol version into the cache.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     * @param negotiatedProtocolVersion    the negotiated protocol version as returned from hello().\n+     */\n+    public void saveNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                              @NonNull final String clientMaximumProtocolVersion,\n+                                              @NonNull final String negotiatedProtocolVersion) {\n+        final String methodName = \":saveNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return;\n+        }\n+\n+        mFileManager.putString(key, negotiatedProtocolVersion);\n+    }\n+\n+    /**\n+     * Generates {@link SharedPreferencesFileManager}'s key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 122}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI3NjEw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521327610", "createdAt": "2020-11-02T04:38:58Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozODo1OFrOHr2EUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDozODo1OFrOHr2EUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNjY1OA==", "bodyText": "this cache is actually in the calling app itself right? If yes, then do we even need to store the package name?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515736658", "createdAt": "2020-11-02T04:38:58Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/HelloCache.java", "diffHunk": "@@ -0,0 +1,152 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+\n+package com.microsoft.identity.common.internal.cache;\n+\n+import android.content.Context;\n+import android.content.pm.PackageInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.annotation.VisibleForTesting;\n+\n+import com.microsoft.identity.common.internal.logging.Logger;\n+\n+/**\n+ * Persisted cache for the IPC hello() protocol.\n+ * Use client's protocol version and the targeted app's package name and app version as a key\n+ * to cache the negotiated protocol version.\n+ * <p>\n+ * This means a new hello() call will ONLY be triggered only when.\n+ * 1. IPC operation is invoked for the very first time.\n+ * 2. Client bumps up protocol version.\n+ * 3. The targeted app is updated, uninstalled, reinstalled.\n+ * <p>\n+ * NOTE: the downside of this is that if you're debugging protocol change on the targeted app side,\n+ * you'll either have to keep bumping the test app version or clear the cache.\n+ * I've provided clearCache() for this purpose.\n+ */\n+public class HelloCache {\n+    private static final String TAG = HelloCache.class.getSimpleName();\n+\n+    private static final String SHARED_PREFERENCE_NAME = \"com.microsoft.common.ipc.hello.cache\";\n+\n+    private final SharedPreferencesFileManager mFileManager;\n+    private final Context mContext;\n+    private final String mProtocolName;\n+    private final String mTargetAppPackageName;\n+\n+    /**\n+     * Default constructor.\n+     *\n+     * @param context              application context.\n+     * @param protocolName         name of the protocol that invokes hello().\n+     * @param targetAppPackageName package name of the app that this client will hello() with.\n+     */\n+    public HelloCache(@NonNull final Context context,\n+                      @NonNull final String protocolName,\n+                      @NonNull final String targetAppPackageName) {\n+        mFileManager = new SharedPreferencesFileManager(context, SHARED_PREFERENCE_NAME);\n+        mContext = context;\n+        mProtocolName = protocolName;\n+        mTargetAppPackageName = targetAppPackageName;\n+    }\n+\n+    /**\n+     * Gets the cached negotiated protocol version. Returns null if there is none.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    public @Nullable String tryGetNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                                            @NonNull final String clientMaximumProtocolVersion) {\n+        final String methodName = \":tryGetNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return null;\n+        }\n+\n+        return mFileManager.getString(key);\n+    }\n+\n+    /**\n+     * Store the given negotiated protocol version into the cache.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     * @param negotiatedProtocolVersion    the negotiated protocol version as returned from hello().\n+     */\n+    public void saveNegotiatedProtocolVersion(@Nullable final String clientMinimumProtocolVersion,\n+                                              @NonNull final String clientMaximumProtocolVersion,\n+                                              @NonNull final String negotiatedProtocolVersion) {\n+        final String methodName = \":saveNegotiatedProtocolVersion\";\n+\n+        final String key;\n+        try {\n+            key = getKey(clientMinimumProtocolVersion, clientMaximumProtocolVersion);\n+        } catch (final PackageManager.NameNotFoundException e) {\n+            Logger.error(TAG + methodName, \"Failed to retrieve key\", e);\n+            return;\n+        }\n+\n+        mFileManager.putString(key, negotiatedProtocolVersion);\n+    }\n+\n+    /**\n+     * Generates {@link SharedPreferencesFileManager}'s key.\n+     *\n+     * @param clientMinimumProtocolVersion minimum version of the protocol that the client supports.\n+     * @param clientMaximumProtocolVersion maximum version of the protocol that to be advertised by the client.\n+     */\n+    private @NonNull String getKey(@Nullable final String clientMinimumProtocolVersion,\n+                                   @NonNull final String clientMaximumProtocolVersion)\n+            throws PackageManager.NameNotFoundException {\n+        return mProtocolName +\n+                \"[\" + clientMinimumProtocolVersion + \",\" + clientMaximumProtocolVersion + \"]:\"\n+                + mTargetAppPackageName + \"[\" + getVersionCode() + \"]\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 132}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI4MzA5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521328309", "createdAt": "2020-11-02T04:42:12Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDo0MjoxM1rOHr2G9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDo0MjoxM1rOHr2G9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNzMzMg==", "bodyText": "and do we actually want a RuntimeException in that case?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515737332", "createdAt": "2020-11-02T04:42:13Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BrokerMsalController.java", "diffHunk": "@@ -153,16 +170,41 @@ public BrokerMsalController(final Context applicationContext) {\n      * @param parameters a {@link CommandParameters}\n      * @return a protocol version negotiated by MSAL and Broker.\n      */\n-    private @NonNull String hello(@NonNull IIpcStrategy strategy,\n-                                  @NonNull final CommandParameters parameters) throws BaseException {\n+    @VisibleForTesting\n+    public @NonNull String hello(@NonNull IIpcStrategy strategy,\n+                                 @NonNull final CommandParameters parameters) throws BaseException {\n+\n+        final Bundle bundle = mRequestAdapter.getRequestBundleForHello(parameters);\n+        final String minimumProtocolVersion = bundle.getString(CLIENT_CONFIGURED_MINIMUM_BP_VERSION_KEY);\n+        final String maximumProtocolVersion = bundle.getString(CLIENT_ADVERTISED_MAXIMUM_BP_VERSION_KEY);\n+\n+        // This should be part of the bundle.\n+        // If we're hitting this, it means that the hello protocol changed. see getRequestBundleForHello().", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzI4NTk0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521328594", "createdAt": "2020-11-02T04:43:27Z", "commit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDo0MzoyN1rOHr2Hwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNDo0MzoyN1rOHr2Hwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTczNzUzOA==", "bodyText": "we probably don't need this method....whatever it is doing I think can be done directly in the test", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#discussion_r515737538", "createdAt": "2020-11-02T04:43:27Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BrokerMsalController.java", "diffHunk": "@@ -103,15 +108,27 @@\n     private final Context mApplicationContext;\n     private final String mActiveBrokerPackageName;\n     private final BrokerOperationExecutor mBrokerOperationExecutor;\n+    private final HelloCache mHelloCache;\n \n     public BrokerMsalController(final Context applicationContext) {\n         mApplicationContext = applicationContext;\n-        mActiveBrokerPackageName = new BrokerValidator(mApplicationContext).getCurrentActiveBrokerPackageName();\n+        mActiveBrokerPackageName = getActiveBrokerPackageName();\n         if (TextUtils.isEmpty(mActiveBrokerPackageName)) {\n             throw new IllegalStateException(\"Active Broker not found. This class should not be initialized.\");\n         }\n \n         mBrokerOperationExecutor = new BrokerOperationExecutor(getIpcStrategies(mApplicationContext, mActiveBrokerPackageName));\n+        mHelloCache = getHelloCache();\n+    }\n+\n+    @VisibleForTesting\n+    public HelloCache getHelloCache() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7de082f9113e0c86fee41e06432603094a278678", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7de082f9113e0c86fee41e06432603094a278678", "committedDate": "2020-11-01T07:33:01Z", "message": "changelog"}, "afterCommit": {"oid": "b3541a8dab3e745ff147b6a82b05e6e631166a57", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b3541a8dab3e745ff147b6a82b05e6e631166a57", "committedDate": "2020-11-02T08:29:00Z", "message": "Resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4372f6647816c9317c3d5da43cfeed4485215bf", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d4372f6647816c9317c3d5da43cfeed4485215bf", "committedDate": "2020-11-02T08:58:49Z", "message": "Introduce a cache for Hello() protocol"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3541a8dab3e745ff147b6a82b05e6e631166a57", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b3541a8dab3e745ff147b6a82b05e6e631166a57", "committedDate": "2020-11-02T08:29:00Z", "message": "Resolve comments"}, "afterCommit": {"oid": "d4372f6647816c9317c3d5da43cfeed4485215bf", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d4372f6647816c9317c3d5da43cfeed4485215bf", "committedDate": "2020-11-02T08:58:49Z", "message": "Introduce a cache for Hello() protocol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODEzNjU2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1108#pullrequestreview-521813656", "createdAt": "2020-11-02T16:51:54Z", "commit": {"oid": "d4372f6647816c9317c3d5da43cfeed4485215bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1408, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}