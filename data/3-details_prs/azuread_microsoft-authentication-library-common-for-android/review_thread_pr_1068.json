{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MzUzNTkw", "number": 1068, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjozNzo1NlrOEqgUGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo0NToyOFrOEqgaow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMDA1MDgzOnYy", "diffSide": "LEFT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationSettings.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjozNzo1NlrOHcwEzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo0MzozNlrOHcwMQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwOTgzOQ==", "bodyText": "So are we no longer using getters and setters? Do we still need them?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1068#discussion_r499909839", "createdAt": "2020-10-05T22:37:56Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationSettings.java", "diffHunk": "@@ -88,8 +93,8 @@\n      *\n      * @return byte[] secret data\n      */\n-    public byte[] getSecretKeyData() {\n-        return mSecretKeyData.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb7e8b5e8f309c0898a212d33ee968ef8b8b4c24"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxMDY4Mw==", "bodyText": "we're using them.  Just adding synchronization/safe-copy.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1068#discussion_r499910683", "createdAt": "2020-10-05T22:40:29Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationSettings.java", "diffHunk": "@@ -88,8 +93,8 @@\n      *\n      * @return byte[] secret data\n      */\n-    public byte[] getSecretKeyData() {\n-        return mSecretKeyData.get();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwOTgzOQ=="}, "originalCommit": {"oid": "eb7e8b5e8f309c0898a212d33ee968ef8b8b4c24"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxMTc0NQ==", "bodyText": "Ohh okay, so Arrays.copyOf() acts as a copy + get.....hadn't used this one before", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1068#discussion_r499911745", "createdAt": "2020-10-05T22:43:36Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationSettings.java", "diffHunk": "@@ -88,8 +93,8 @@\n      *\n      * @return byte[] secret data\n      */\n-    public byte[] getSecretKeyData() {\n-        return mSecretKeyData.get();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwOTgzOQ=="}, "originalCommit": {"oid": "eb7e8b5e8f309c0898a212d33ee968ef8b8b4c24"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMDA2NzU1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/cache/StorageHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo0NToyOFrOHcwOuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjo0NToyOFrOHcwOuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxMjM3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            SecretKey key = getSecretKey(secretKeyData);\n          \n          \n            \n                            return key;\n          \n          \n            \n                            return getSecretKey(secretKeyData);", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1068#discussion_r499912376", "createdAt": "2020-10-05T22:45:28Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/cache/StorageHelper.java", "diffHunk": "@@ -590,7 +590,13 @@ public SecretKey loadSecretKey(@NonNull final KeyType keyType) throws IOExceptio\n                 return getSecretKey(AuthenticationSettings.INSTANCE.getBrokerSecretKeys().get(COMPANY_PORTAL_APP_PACKAGE_NAME));\n \n             case ADAL_USER_DEFINED_KEY:\n-                return getSecretKey(AuthenticationSettings.INSTANCE.getSecretKeyData());\n+                final byte[] secretKeyData = AuthenticationSettings.INSTANCE.getSecretKeyData();\n+                if (secretKeyData == null) {\n+                    Logger.error(\"StorageHelper:loadSecretKey\", \"Went looking for a key that wasn't there.\", null);\n+                    return null;\n+                }\n+                SecretKey key = getSecretKey(secretKeyData);\n+                return key;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb7e8b5e8f309c0898a212d33ee968ef8b8b4c24"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1988, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}