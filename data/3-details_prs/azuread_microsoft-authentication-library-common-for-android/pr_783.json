{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzOTMzMjM2", "number": 783, "title": "Added More API's in MsalCPPoAuth2Cache", "bodyText": "", "createdAt": "2020-01-17T02:22:51Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783", "merged": true, "mergeCommit": {"oid": "9708f5714925b562ff9d77223ade08e26510f31a"}, "closed": true, "closedAt": "2020-01-18T00:29:56Z", "author": {"login": "kreedula"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbw_soqAH2gAyMzYzOTMzMjM2OjExMjU4OWRhODIyYzBjMzFmN2Y0ODMxNDZhNjRhZDU2ZWUxMzViYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7YNRqgH2gAyMzYzOTMzMjM2OmIyNTg5ZmNlMzViZTlmYzAzZjU1NmM0NGMyYjIwYmM5MTE1NGYyMTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "112589da822c0c31f7f483146a64ad56ee135ba8", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/112589da822c0c31f7f483146a64ad56ee135ba8", "committedDate": "2019-12-16T18:16:04Z", "message": "Updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7368cbffcc7bc3ea081e5e830beafb7eec69d56", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d7368cbffcc7bc3ea081e5e830beafb7eec69d56", "committedDate": "2020-01-14T00:31:21Z", "message": "Merge commit '61ce5113cae09876a7dee4d6ceb4bdcbeb45fee3' into shoatman/androidSetup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad668512f048ea8cd07e2724eaaf89ed58919fef", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ad668512f048ea8cd07e2724eaaf89ed58919fef", "committedDate": "2020-01-15T19:00:36Z", "message": "Merge commit 'd35bf0f78c0ba74bb673ff6d7eb573aecb0eb7cf' into kreedula/storage-implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "100bfc0ff3e86f12af829dcccba9dd5e8f2678e5", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/100bfc0ff3e86f12af829dcccba9dd5e8f2678e5", "committedDate": "2020-01-17T01:22:16Z", "message": "New API's in MsalCppCache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0674b86c81e6c6b62f5f7d4b82674f0a34a6941a", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0674b86c81e6c6b62f5f7d4b82674f0a34a6941a", "committedDate": "2020-01-17T01:50:58Z", "message": "Formatting updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/edd36ab9c9a58c1d6c57b273306e76c150ab9775", "committedDate": "2020-01-17T04:05:45Z", "message": "Merge branch 'dev' into kreedula/more-storage-apis"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MzU0NDI3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344354427", "createdAt": "2020-01-17T04:07:14Z", "commit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNDowNzoxNFrOFeuWhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNDowNzoxNFrOFeuWhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc2MTAzMQ==", "bodyText": "is this intentional? (name not matching with method name)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#discussion_r367761031", "createdAt": "2020-01-17T04:07:14Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/MsalOAuth2TokenCache.java", "diffHunk": "@@ -862,7 +862,7 @@ private void setToCacheRecord(@NonNull final CacheRecord target,\n     @Override\n     public List<AccountRecord> getAccounts(@Nullable final String environment,\n                                            @NonNull final String clientId) {\n-        final String methodName = \":getAccounts\";\n+        final String methodName = \":getAllAccounts\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MzU0ODU0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344354854", "createdAt": "2020-01-17T04:09:35Z", "commit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNDowOTozNlrOFeuX7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNDowOTozNlrOFeuX7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc2MTM5MA==", "bodyText": "nit: do we need validateNonNull here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#discussion_r367761390", "createdAt": "2020-01-17T04:09:36Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/MsalCppOAuth2TokenCache.java", "diffHunk": "@@ -148,4 +126,93 @@ public synchronized void saveCredentials(@NonNull final AccountRecord accountRec\n         saveCredentialsInternal(credentials);\n     }\n \n+    /**\n+     * API to save {@link AccountRecord}\n+     *\n+     * @param accountRecord : accountRecord to be saved.\n+     */\n+    public synchronized void saveAccountRecord(@NonNull AccountRecord accountRecord) {\n+        getAccountCredentialCache().saveAccount(accountRecord);\n+\n+    }\n+\n+    /**\n+     * API to clear all cache.\n+     * Note: This method is intended to be only used for testing purposes.\n+     */\n+    public synchronized void clearCache() {\n+        getAccountCredentialCache().clearAll();\n+    }\n+\n+    /**\n+     * Method to remove Account matched with homeAccountId, environment and realm\n+     *\n+     * @param homeAccountId : HomeAccountId of the Account\n+     * @param environment   : Environment of the Account\n+     * @param realm         : Realm of the Account\n+     * @return {@link AccountDeletionRecord}\n+     */\n+    public synchronized AccountDeletionRecord removeAccount(@NonNull final String homeAccountId,\n+                                                            @NonNull final String environment,\n+                                                            @NonNull final String realm) {\n+        final List<Credential> credentials = getAccountCredentialCache().getCredentialsFilteredBy(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MzU0OTU5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344354959", "createdAt": "2020-01-17T04:10:12Z", "commit": {"oid": "edd36ab9c9a58c1d6c57b273306e76c150ab9775"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b0927f522c91bfbdb66a292f0fe030e95820d66", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8b0927f522c91bfbdb66a292f0fe030e95820d66", "committedDate": "2020-01-17T19:37:00Z", "message": "Update ApiCallback.java\n\nUpdating to remove Status code name changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a03ebc4ac84e532d628002f0e3045fc2cf4667fb", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a03ebc4ac84e532d628002f0e3045fc2cf4667fb", "committedDate": "2020-01-17T19:38:21Z", "message": "Removed un intentional method name change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff41b1c599c016e6c03b054eb771d5a4507d5211", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ff41b1c599c016e6c03b054eb771d5a4507d5211", "committedDate": "2020-01-17T19:39:10Z", "message": "Errorstatus -> Status changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83b6db18f310019afc16bf18860bd06f3b38822f", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/83b6db18f310019afc16bf18860bd06f3b38822f", "committedDate": "2020-01-17T19:40:28Z", "message": "Errorstatus -> Status changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4512a109cd0bfe48a4cee910deb2670654775093", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4512a109cd0bfe48a4cee910deb2670654775093", "committedDate": "2020-01-17T19:54:05Z", "message": "Merge commit 'c121594bb89e853f9e873bfe048360e68e875120' into kreedula/storage-implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ccd44f52430f502d46b644b3696fb485414ac1c", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9ccd44f52430f502d46b644b3696fb485414ac1c", "committedDate": "2020-01-17T20:14:03Z", "message": "Addressing comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f1429b38e0f2fec508bfeab94651c0db1daa5da", "author": {"user": null}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1f1429b38e0f2fec508bfeab94651c0db1daa5da", "committedDate": "2020-01-17T20:23:09Z", "message": "Addressing comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f3ea605aea5ecf610922ed49f47c37f3d868693", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7f3ea605aea5ecf610922ed49f47c37f3d868693", "committedDate": "2020-01-17T20:27:34Z", "message": "Change to Status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5c2db1167e1e22abd53080a4ad6fc6743d6770c", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c5c2db1167e1e22abd53080a4ad6fc6743d6770c", "committedDate": "2020-01-17T20:28:16Z", "message": "Change to status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c84668b64966905824dedc98c662fc1d3387e17", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0c84668b64966905824dedc98c662fc1d3387e17", "committedDate": "2020-01-17T20:28:52Z", "message": "Change to status"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODkxMTY0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344891164", "createdAt": "2020-01-17T23:20:01Z", "commit": {"oid": "0c84668b64966905824dedc98c662fc1d3387e17"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODk0ODkx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344894891", "createdAt": "2020-01-17T23:35:26Z", "commit": {"oid": "0c84668b64966905824dedc98c662fc1d3387e17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMzozNToyNlrOFfH0kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QyMzozNToyNlrOFfH0kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE3ODMyMQ==", "bodyText": "Minor formatting weirdness here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#discussion_r368178321", "createdAt": "2020-01-17T23:35:26Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/cache/MsalCppOAuth2TokenCache.java", "diffHunk": "@@ -148,4 +126,95 @@ public synchronized void saveCredentials(@NonNull final AccountRecord accountRec\n         saveCredentialsInternal(credentials);\n     }\n \n+    /**\n+     * API to save {@link AccountRecord}\n+     *\n+     * @param accountRecord : accountRecord to be saved.\n+     */\n+    public synchronized void saveAccountRecord(@NonNull AccountRecord accountRecord) {\n+        getAccountCredentialCache().saveAccount(accountRecord);\n+\n+    }\n+\n+    /**\n+     * API to clear all cache.\n+     * Note: This method is intended to be only used for testing purposes.\n+     */\n+    public synchronized void clearCache() {\n+        getAccountCredentialCache().clearAll();\n+    }\n+\n+    /**\n+     * Method to remove Account matched with homeAccountId, environment and realm\n+     *\n+     * @param homeAccountId : HomeAccountId of the Account\n+     * @param environment   : Environment of the Account\n+     * @param realm         : Realm of the Account\n+     * @return {@link AccountDeletionRecord}\n+     */\n+    public synchronized AccountDeletionRecord removeAccount(@NonNull final String homeAccountId,\n+                                                            @Nullable final String environment,\n+                                                            @NonNull final String realm) throws ClientException {\n+        validateNonNull(homeAccountId, \"homeAccountId\");\n+        validateNonNull(realm, \"realm\");\n+        final List<Credential> credentials = getAccountCredentialCache().getCredentialsFilteredBy(\n+                homeAccountId,\n+                environment,\n+                CredentialType.RefreshToken,\n+                null, realm,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c84668b64966905824dedc98c662fc1d3387e17"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0ODk1NzUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/783#pullrequestreview-344895753", "createdAt": "2020-01-17T23:39:11Z", "commit": {"oid": "0c84668b64966905824dedc98c662fc1d3387e17"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2589fce35be9fc03f556c44c2b20bc91154f213", "author": {"user": {"login": "kreedula", "name": "Krishna Eedula"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b2589fce35be9fc03f556c44c2b20bc91154f213", "committedDate": "2020-01-18T00:28:41Z", "message": "Formatting fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1712, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}