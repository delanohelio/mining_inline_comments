{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNjgxMjMz", "number": 1169, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0MDo0NVrOFIORVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODozNTo0NFrOFIQlUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTY2NzQxOnYy", "diffSide": "RIGHT", "path": "azure-pipelines.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0MDo0NlrOIKBfYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0NDoyOVrOIKBmzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MTA5MA==", "bodyText": "some reason to do this?  It seems strange.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547381090", "createdAt": "2020-12-22T16:40:46Z", "author": {"login": "AdamBJohnsonx"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+  displayName: 'Build and test inside docker container'\n+- script: |\n+    echo =============================================\n+    echo Cleaning up build output that is owned by docker user rather than agent user\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 gradle clean\n+    echo =============================================\n+    echo prune containers to avoid running out of disk space - shutdown containers still exist on disk\n+    echo =============================================\n+    docker system prune -f\n+    echo =============================================\n+    echo Dump environment variables for build agent\n+    echo =============================================\n+    env", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4Mjk4OQ==", "bodyText": "Mostly it's for debugging.  In case something unexpected happens.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547382989", "createdAt": "2020-12-22T16:44:29Z", "author": {"login": "shoatman"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+  displayName: 'Build and test inside docker container'\n+- script: |\n+    echo =============================================\n+    echo Cleaning up build output that is owned by docker user rather than agent user\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 gradle clean\n+    echo =============================================\n+    echo prune containers to avoid running out of disk space - shutdown containers still exist on disk\n+    echo =============================================\n+    docker system prune -f\n+    echo =============================================\n+    echo Dump environment variables for build agent\n+    echo =============================================\n+    env", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MTA5MA=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTY3NTQ3OnYy", "diffSide": "RIGHT", "path": "azure-pipelines.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0MzoxOVrOIKBkZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1OTozOFrOIKCFeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MjM3Mg==", "bodyText": "It'd be pretty cool to cache these containers and script their creation.  So when we move to API31, all we need to do is change this number.  Can the API version be a variable?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547382372", "createdAt": "2020-12-22T16:43:19Z", "author": {"login": "AdamBJohnsonx"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4Mzc4NQ==", "bodyText": "I'm going to check the handlebars templates for the docker files into android-complete, but yes the docker file generation is template and you can change several different variables to produce a different image including: build tools version, api level, type of image (google_apis, default, etc), abi of image, JDK version, etc....", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547383785", "createdAt": "2020-12-22T16:46:00Z", "author": {"login": "shoatman"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MjM3Mg=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NTAwOQ==", "bodyText": "The container image is cached in an azure container registry.  Hence the long image name which is a prefix of the azure container registry service endpoint.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547385009", "createdAt": "2020-12-22T16:48:14Z", "author": {"login": "shoatman"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MjM3Mg=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM5MDg0MQ==", "bodyText": "I'm fine with the long name. ;-)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547390841", "createdAt": "2020-12-22T16:59:38Z", "author": {"login": "AdamBJohnsonx"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MjM3Mg=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTY3ODYwOnYy", "diffSide": "RIGHT", "path": "azure-pipelines.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0NDoxNlrOIKBmUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1NzoyM1rOIKCA4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4Mjg2NQ==", "bodyText": "Yeah, if the API version and/or docker target can become variables so we don't need to keep them in sync manually that would help the next person not mess it up.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547382865", "createdAt": "2020-12-22T16:44:16Z", "author": {"login": "AdamBJohnsonx"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+  displayName: 'Build and test inside docker container'\n+- script: |\n+    echo =============================================\n+    echo Cleaning up build output that is owned by docker user rather than agent user\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 gradle clean", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NDY3Mw==", "bodyText": "The images themselves are specific to API versions.  At some point I want to play with a matrix pipeline where the instrumented tests are run against multiple different docker images each with their own api level configuration.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547384673", "createdAt": "2020-12-22T16:47:35Z", "author": {"login": "shoatman"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+  displayName: 'Build and test inside docker container'\n+- script: |\n+    echo =============================================\n+    echo Cleaning up build output that is owned by docker user rather than agent user\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 gradle clean", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4Mjg2NQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4OTY2Nw==", "bodyText": "Main feedback here is \"can we put the long name into a variable in the pipeline setup file so we don't have to repeat it exactly\".", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547389667", "createdAt": "2020-12-22T16:57:23Z", "author": {"login": "AdamBJohnsonx"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+  displayName: 'Build and test inside docker container'\n+- script: |\n+    echo =============================================\n+    echo Cleaning up build output that is owned by docker user rather than agent user\n+    echo =============================================\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 gradle clean", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4Mjg2NQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTcwMDcyOnYy", "diffSide": "RIGHT", "path": "scripts/run-instrumented-tests.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1MDozOFrOIKBzcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNzowMzoyMFrOIKCMLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NjIyNQ==", "bodyText": "sleep 30 the best we can do?  Maybe something here: https://stackoverflow.com/questions/3634041/detect-when-android-emulator-is-fully-booted or here https://androidstudio.googleblog.com/2019/05/emulator-2907-canary.html ?\nmaybe -no-boot-anim ?\nRegardless, if you're going to sleep, you should print how long you're sleeping for so people watching the output know.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547386225", "createdAt": "2020-12-22T16:50:38Z", "author": {"login": "AdamBJohnsonx"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NzMzNA==", "bodyText": "It's a headless emulator.  adb wait-for-device was hanging so i added the sleep for now while investigating other alternatives.\nIt's not actually necessary... more a reminder to future engineers....The emulator currently starts in 1-1.5 minutes and gradle is currently looking for depedencies for at least 4 minutes.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547387334", "createdAt": "2020-12-22T16:52:54Z", "author": {"login": "shoatman"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NjIyNQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM5MjU1Ng==", "bodyText": "Cool.  I do like scripting that says \"Sleeping for <x> <timeunits> because <reason>\" so that operators reading the term know what's happening.  I'd rather have it be bulletproof so that we can't break it by fixing the build speed (in some better, future world)... what happens if it outruns the emulator, though?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547392556", "createdAt": "2020-12-22T17:03:20Z", "author": {"login": "AdamBJohnsonx"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4NjIyNQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MTcxMzQ5OnYy", "diffSide": "RIGHT", "path": "scripts/run-instrumented-tests.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo1NDo0NlrOIKB7WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNzoxNjo0MFrOIKCmfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4ODI0OQ==", "bodyText": "Can we make this more prominent, like including it in the banner below with backticks?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547388249", "createdAt": "2020-12-22T16:54:46Z", "author": {"login": "AdamBJohnsonx"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30\n+gradle -version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4OTYxOQ==", "bodyText": "All of the commands or something specific?  I'm fine with making all of this more prominent. :-)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547389619", "createdAt": "2020-12-22T16:57:15Z", "author": {"login": "shoatman"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30\n+gradle -version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4ODI0OQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM5OTI5NA==", "bodyText": "It (the code review tool) doesn't do a good job of this (highlighting the single line I left the comment on), but the Gradle version being run.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547399294", "createdAt": "2020-12-22T17:16:40Z", "author": {"login": "AdamBJohnsonx"}, "path": "scripts/run-instrumented-tests.sh", "diffHunk": "@@ -0,0 +1,13 @@\n+#!/bin/bash\n+echo =============================================\n+echo Starting ADB Daemon\n+echo =============================================\n+adb start-server\n+emulator @test -no-window -no-audio -wipe-data &\n+sleep 30\n+gradle -version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4ODI0OQ=="}, "originalCommit": {"oid": "e6ffb2740716666282ab1f6912e6ba6d8ac0ac7a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MjA0NjI1OnYy", "diffSide": "RIGHT", "path": "azure-pipelines.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODozNTo0NFrOIKFFjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODozNTo0NFrOIKFFjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ0MDAxMg==", "bodyText": "nit: Run unit and instrumented tests inside docker container", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1169#discussion_r547440012", "createdAt": "2020-12-22T18:35:44Z", "author": {"login": "iamgusain"}, "path": "azure-pipelines.yml", "diffHunk": "@@ -0,0 +1,36 @@\n+name: Instrumented Tests\n+trigger:\n+- main\n+\n+\n+pool:\n+ name: DockerBuildAgents\n+\n+workspace:\n+  clean: all\n+steps:\n+- script: |\n+    docker --version\n+    echo =============================================\n+    echo Kill all running containers if existing\n+    echo =============================================\n+    docker container kill $(docker ps -q)\n+    echo =============================================\n+    echo Run unit and instrumented inside docker container", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9b6b56aba6c64c8983d713d414b92e477c4ce91"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2156, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}