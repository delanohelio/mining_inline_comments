{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTMyMDA4", "number": 1156, "title": "Log an informative error message, when broker redirect_uri is mismatched - Closes #1155", "bodyText": "Closes #1155\n\nNote: This message is not being logged as PII/OII, as redirect_uri is not a secret value and the package id can be determined from looking at the log output", "createdAt": "2020-12-09T23:29:58Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156", "merged": true, "mergeCommit": {"oid": "f10a8fd6c0e7098d472ca738f7a2878e526c4464"}, "closed": true, "closedAt": "2020-12-10T18:57:45Z", "author": {"login": "iambmelt"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdknUuxgH2gAyNTM1NTMyMDA4OjJlYjQ5NTQwYThmOWJhNWQ0MjA4YzU2ZmE5NzZjMzA3NzY4YzA2ZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk1vfagH2gAyNTM1NTMyMDA4OmI4MGMxODVhMDVlZmFlZTIzODhiNDA2MWUwMTNkZDc2ZTNjYzhjMDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/2eb49540a8f9ba5d4208c56fa976c307768c06fc", "committedDate": "2020-12-09T23:27:27Z", "message": "Closes #1155"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzAxMDc2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#pullrequestreview-548701076", "createdAt": "2020-12-09T23:32:21Z", "commit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMzozMjoyMVrOICuVgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMzozMjoyMVrOICuVgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyNzIzMg==", "bodyText": "nit: Do we need a multiline log statement here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#discussion_r539727232", "createdAt": "2020-12-09T23:32:21Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -257,7 +256,24 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n     public static boolean isValidBrokerRedirect(@Nullable final String redirectUri,\n                                                 @NonNull final Context context,\n                                                 @NonNull final String packageName) {\n-        return StringUtil.equalsIgnoreCase(redirectUri, getBrokerRedirectUri(context, packageName));\n+        final String methodName = \":isValidBrokerRedirect\";\n+        final String expectedBrokerRedirectUri = getBrokerRedirectUri(context, packageName);\n+        final boolean isValidBrokerRedirect = StringUtil.equalsIgnoreCase(redirectUri, expectedBrokerRedirectUri);\n+\n+        if (!isValidBrokerRedirect) {\n+            Logger.error(\n+                    TAG + methodName,\n+                    \"Broker redirect uri is invalid.\"\n+                            + \"\\n\"\n+                            + \"Expected: \" + expectedBrokerRedirectUri\n+                            + \"\\n\"\n+                            + \"Actual: \" + redirectUri\n+                    ,\n+                    null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzAxNzQ4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#pullrequestreview-548701748", "createdAt": "2020-12-09T23:33:49Z", "commit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afb5c4e0ee59fab5f9f5c8b9d72f114acc0c47e8", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/afb5c4e0ee59fab5f9f5c8b9d72f114acc0c47e8", "committedDate": "2020-12-09T23:35:18Z", "message": "Merge branch 'dev' into iambmelt/1155"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aea0a320fac4153a1be00b9f0bde40b69d941fe", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8aea0a320fac4153a1be00b9f0bde40b69d941fe", "committedDate": "2020-12-09T23:37:12Z", "message": "Update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ba315d9844276826b443fa641a182e6735785fc", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0ba315d9844276826b443fa641a182e6735785fc", "committedDate": "2020-12-09T23:37:19Z", "message": "Merge branch 'iambmelt/1155' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into iambmelt/1155"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0092674e3d4be0f5a8792b95bfa565c33fcd554b", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0092674e3d4be0f5a8792b95bfa565c33fcd554b", "committedDate": "2020-12-09T23:37:55Z", "message": "Merge branch 'dev' into iambmelt/1155"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzA5MTM1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#pullrequestreview-548709135", "createdAt": "2020-12-09T23:45:41Z", "commit": {"oid": "0092674e3d4be0f5a8792b95bfa565c33fcd554b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7750fcc23e709526ff61e63173d0aec164cc803e", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7750fcc23e709526ff61e63173d0aec164cc803e", "committedDate": "2020-12-09T23:48:24Z", "message": "Merge error fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d64813b138042f882c398ad2899edf21019720f3", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d64813b138042f882c398ad2899edf21019720f3", "committedDate": "2020-12-09T23:57:06Z", "message": "Log redirect_uri output on a single line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzE5NjAz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#pullrequestreview-548719603", "createdAt": "2020-12-10T00:10:46Z", "commit": {"oid": "d64813b138042f882c398ad2899edf21019720f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTQ1NTE1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#pullrequestreview-548945515", "createdAt": "2020-12-10T08:18:43Z", "commit": {"oid": "d64813b138042f882c398ad2899edf21019720f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b80c185a05efaee2388b4061e013dd76e3cc8c04", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b80c185a05efaee2388b4061e013dd76e3cc8c04", "committedDate": "2020-12-10T16:15:21Z", "message": "Merge branch 'dev' into iambmelt/1155"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1475, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}