{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTMyMDA4", "number": 1156, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMzozMjoyMVrOFDMLWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMzozMjoyMVrOFDMLWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4ODg5NTYzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMzozMjoyMVrOICuVgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMDowMjo0NlrOICvKJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyNzIzMg==", "bodyText": "nit: Do we need a multiline log statement here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#discussion_r539727232", "createdAt": "2020-12-09T23:32:21Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -257,7 +256,24 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n     public static boolean isValidBrokerRedirect(@Nullable final String redirectUri,\n                                                 @NonNull final Context context,\n                                                 @NonNull final String packageName) {\n-        return StringUtil.equalsIgnoreCase(redirectUri, getBrokerRedirectUri(context, packageName));\n+        final String methodName = \":isValidBrokerRedirect\";\n+        final String expectedBrokerRedirectUri = getBrokerRedirectUri(context, packageName);\n+        final boolean isValidBrokerRedirect = StringUtil.equalsIgnoreCase(redirectUri, expectedBrokerRedirectUri);\n+\n+        if (!isValidBrokerRedirect) {\n+            Logger.error(\n+                    TAG + methodName,\n+                    \"Broker redirect uri is invalid.\"\n+                            + \"\\n\"\n+                            + \"Expected: \" + expectedBrokerRedirectUri\n+                            + \"\\n\"\n+                            + \"Actual: \" + redirectUri\n+                    ,\n+                    null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyODI5Nw==", "bodyText": "Personally I think it's easier to read, but I appreciate this is subjective. Is your suggestion to condense this to a single line or to log this altogether differently?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#discussion_r539728297", "createdAt": "2020-12-09T23:34:59Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -257,7 +256,24 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n     public static boolean isValidBrokerRedirect(@Nullable final String redirectUri,\n                                                 @NonNull final Context context,\n                                                 @NonNull final String packageName) {\n-        return StringUtil.equalsIgnoreCase(redirectUri, getBrokerRedirectUri(context, packageName));\n+        final String methodName = \":isValidBrokerRedirect\";\n+        final String expectedBrokerRedirectUri = getBrokerRedirectUri(context, packageName);\n+        final boolean isValidBrokerRedirect = StringUtil.equalsIgnoreCase(redirectUri, expectedBrokerRedirectUri);\n+\n+        if (!isValidBrokerRedirect) {\n+            Logger.error(\n+                    TAG + methodName,\n+                    \"Broker redirect uri is invalid.\"\n+                            + \"\\n\"\n+                            + \"Expected: \" + expectedBrokerRedirectUri\n+                            + \"\\n\"\n+                            + \"Actual: \" + redirectUri\n+                    ,\n+                    null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyNzIzMg=="}, "originalCommit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTczNDgxMA==", "bodyText": "A single line is best.  If we need to put structure on it, we can do it inside of a line.  (Log injection attacks are a thing.)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#discussion_r539734810", "createdAt": "2020-12-09T23:48:26Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -257,7 +256,24 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n     public static boolean isValidBrokerRedirect(@Nullable final String redirectUri,\n                                                 @NonNull final Context context,\n                                                 @NonNull final String packageName) {\n-        return StringUtil.equalsIgnoreCase(redirectUri, getBrokerRedirectUri(context, packageName));\n+        final String methodName = \":isValidBrokerRedirect\";\n+        final String expectedBrokerRedirectUri = getBrokerRedirectUri(context, packageName);\n+        final boolean isValidBrokerRedirect = StringUtil.equalsIgnoreCase(redirectUri, expectedBrokerRedirectUri);\n+\n+        if (!isValidBrokerRedirect) {\n+            Logger.error(\n+                    TAG + methodName,\n+                    \"Broker redirect uri is invalid.\"\n+                            + \"\\n\"\n+                            + \"Expected: \" + expectedBrokerRedirectUri\n+                            + \"\\n\"\n+                            + \"Actual: \" + redirectUri\n+                    ,\n+                    null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyNzIzMg=="}, "originalCommit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc0MDcxMA==", "bodyText": "d64813b", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1156#discussion_r539740710", "createdAt": "2020-12-10T00:02:46Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -257,7 +256,24 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n     public static boolean isValidBrokerRedirect(@Nullable final String redirectUri,\n                                                 @NonNull final Context context,\n                                                 @NonNull final String packageName) {\n-        return StringUtil.equalsIgnoreCase(redirectUri, getBrokerRedirectUri(context, packageName));\n+        final String methodName = \":isValidBrokerRedirect\";\n+        final String expectedBrokerRedirectUri = getBrokerRedirectUri(context, packageName);\n+        final boolean isValidBrokerRedirect = StringUtil.equalsIgnoreCase(redirectUri, expectedBrokerRedirectUri);\n+\n+        if (!isValidBrokerRedirect) {\n+            Logger.error(\n+                    TAG + methodName,\n+                    \"Broker redirect uri is invalid.\"\n+                            + \"\\n\"\n+                            + \"Expected: \" + expectedBrokerRedirectUri\n+                            + \"\\n\"\n+                            + \"Actual: \" + redirectUri\n+                    ,\n+                    null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTcyNzIzMg=="}, "originalCommit": {"oid": "2eb49540a8f9ba5d4208c56fa976c307768c06fc"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2139, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}