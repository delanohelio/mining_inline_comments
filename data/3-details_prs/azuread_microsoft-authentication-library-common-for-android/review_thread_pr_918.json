{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTMzODc4", "number": 918, "reviewThreads": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NzoxOFrOEAO8uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowNDoxOFrOECSJgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjgwMzc2OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NzoxOFrOGbY01w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NzoxOFrOGbY01w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MTQ3OQ==", "bodyText": "nit: capitalize letter e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431371479", "createdAt": "2020-05-27T18:57:18Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICe_PATH = \"/getCurrentAccountSharedDevice\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjgwNTI4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1Nzo0MFrOGbY1tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1Nzo0MFrOGbY1tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MTcwMw==", "bodyText": "nit: capitalize letter e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431371703", "createdAt": "2020-05-27T18:57:40Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICe_PATH = \"/getCurrentAccountSharedDevice\";\n+\n+        public static final String GET_DEVICE_MODE_PATH = \"/getDeviceMode\";\n+\n+        public static final String SIGN_OUT_FROM_SHARED_DEVICE_PATH = \"/signOutFromSharedDevice\";\n+\n+\n+        /** Codes for URI **/\n+        public static final int HELLO_URI_CODE = 1;\n+\n+        public static final int ACQUIRE_TOKEN_INTERACTIVE_CODE = 2;\n+\n+        public static final int ACQUIRE_TOKEN_SILENT_CODE = 3;\n+\n+        public static final int GET_ACCOUNTS_CODE = 4;\n+\n+        public static final int REMOVE_ACCOUNTS_CODE = 5;\n+\n+        public static final int GET_CURRENT_ACCOUNT_SHARED_DEVICe_CODE = 6;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjgxMzIwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1OTo1MlrOGbY6ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1OTo1MlrOGbY6ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3Mjk4Ng==", "bodyText": "can be simplified to TextUtils.isEmpty", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431372986", "createdAt": "2020-05-27T18:59:52Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "diffHunk": "@@ -101,8 +101,11 @@ public void disconnect() {\n      * @return Intent\n      */\n     public Intent getIntentForAuthService(final Context context) {\n-        final String currentActiveBrokerPackageName = getCurrentActiveBrokerPackageName(context);\n-        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0) {\n+        final String currentActiveBrokerPackageName = new BrokerValidator(context).\n+                getCurrentActiveBrokerPackageName(context);\n+\n+        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0 ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjgxNzY4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOTowMToxNVrOGbY9xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNzo1MToxMlrOGcANug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3Mzc2NQ==", "bodyText": "Looks like we weren't doing this check before. Why was it NOT needed before? Or why is it needed now?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r431373765", "createdAt": "2020-05-27T19:01:15Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "diffHunk": "@@ -101,8 +101,11 @@ public void disconnect() {\n      * @return Intent\n      */\n     public Intent getIntentForAuthService(final Context context) {\n-        final String currentActiveBrokerPackageName = getCurrentActiveBrokerPackageName(context);\n-        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0) {\n+        final String currentActiveBrokerPackageName = new BrokerValidator(context).\n+                getCurrentActiveBrokerPackageName(context);\n+\n+        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0 ||\n+                !isMicrosoftAuthServiceSupported(context.getPackageManager(), currentActiveBrokerPackageName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjAxNjgyNg==", "bodyText": "We always did the check, see here\nJust refactored here to decouple active broker check and this", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r432016826", "createdAt": "2020-05-28T17:51:12Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/MicrosoftAuthClient.java", "diffHunk": "@@ -101,8 +101,11 @@ public void disconnect() {\n      * @return Intent\n      */\n     public Intent getIntentForAuthService(final Context context) {\n-        final String currentActiveBrokerPackageName = getCurrentActiveBrokerPackageName(context);\n-        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0) {\n+        final String currentActiveBrokerPackageName = new BrokerValidator(context).\n+                getCurrentActiveBrokerPackageName(context);\n+\n+        if (currentActiveBrokerPackageName == null || currentActiveBrokerPackageName.length() == 0 ||\n+                !isMicrosoftAuthServiceSupported(context.getPackageManager(), currentActiveBrokerPackageName)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3Mzc2NQ=="}, "originalCommit": {"oid": "148ebfa16446673262c836251fba865d56367da5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDYxMjMzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo0OTo1MFrOGeFK8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoxNDo0N1rOGeFwqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NTE4Ng==", "bodyText": "@Nullable return value would be good to document with an annot / javadoc (where presumably null indicates no active broker)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434195186", "createdAt": "2020-06-02T21:49:50Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,25 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context\n+     * @return String\n+     */\n+    public String getCurrentActiveBrokerPackageName(@NonNull final Context context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NTM3Mw==", "bodyText": "Oh, I see this was moved. Still good to have :)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434195373", "createdAt": "2020-06-02T21:50:17Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,25 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context\n+     * @return String\n+     */\n+    public String getCurrentActiveBrokerPackageName(@NonNull final Context context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NTE4Ng=="}, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwNDg0Mg==", "bodyText": "updated", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434204842", "createdAt": "2020-06-02T22:14:47Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,25 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context\n+     * @return String\n+     */\n+    public String getCurrentActiveBrokerPackageName(@NonNull final Context context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NTE4Ng=="}, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDYzMDU5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1NzoyMlrOGeFWfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoxMzoxNFrOGeFumQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODE0Mw==", "bodyText": "Just calling out that this change alters binary compatibility of common....", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198143", "createdAt": "2020-06-02T21:57:22Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwNDMxMw==", "bodyText": "Ack. these are only used by MSAL for these the request , so we should be good.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434204313", "createdAt": "2020-06-02T22:13:14Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODE0Mw=="}, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDYzMTQ4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1Nzo0MVrOGeFW_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoxMzoyMlrOGeFu2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODI3MA==", "bodyText": "Same here, changes binary compatibility. Just FYI", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198270", "createdAt": "2020-06-02T21:57:41Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwNDM3Ng==", "bodyText": "same as above", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434204376", "createdAt": "2020-06-02T22:13:22Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODI3MA=="}, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDYzMjcwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo1ODoxMFrOGeFXvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoxMzoyOVrOGeFu9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODQ2MQ==", "bodyText": "Here too", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434198461", "createdAt": "2020-06-02T21:58:10Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwNDQwNA==", "bodyText": "same as above", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434204404", "createdAt": "2020-06-02T22:13:29Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODQ2MQ=="}, "originalCommit": {"oid": "27b0ab93e492e42564cac7e718da27d9e2cfcd88"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDY5Mjk4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyNDowMVrOGeF9pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1NToxM1rOGeIpMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwODE2Nw==", "bodyText": "Nit: Should this be the @return ? Seems like this content on the wrong attribute", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434208167", "createdAt": "2020-06-02T22:24:01Z", "author": {"login": "iambmelt"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MjA4Mg==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434252082", "createdAt": "2020-06-03T00:55:13Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwODE2Nw=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcwMjk3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyODoxNFrOGeGDtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1NTowNFrOGeIo_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwOTcxOA==", "bodyText": "If this is a constant collection, and it looks like it is, should it have a private constructor?  The other instances of this have documentation describing each constant, should this?  Is there a link to documentation that could be referenced?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434209718", "createdAt": "2020-06-02T22:28:14Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MjAyOQ==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434252029", "createdAt": "2020-06-03T00:55:04Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIwOTcxOA=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcwNTcxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjoyOToyN1rOGeGFUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1NDozNVrOGeIomw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDEzMA==", "bodyText": "Should these integers be in a separate container?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210130", "createdAt": "2020-06-02T22:29:27Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICE_PATH = \"/getCurrentAccountSharedDevice\";\n+\n+        public static final String GET_DEVICE_MODE_PATH = \"/getDeviceMode\";\n+\n+        public static final String SIGN_OUT_FROM_SHARED_DEVICE_PATH = \"/signOutFromSharedDevice\";\n+\n+\n+        /** Codes for URI **/\n+        public static final int HELLO_URI_CODE = 1;\n+\n+        public static final int ACQUIRE_TOKEN_INTERACTIVE_CODE = 2;\n+\n+        public static final int ACQUIRE_TOKEN_SILENT_CODE = 3;\n+\n+        public static final int GET_ACCOUNTS_CODE = 4;\n+\n+        public static final int REMOVE_ACCOUNTS_CODE = 5;\n+\n+        public static final int GET_CURRENT_ACCOUNT_SHARED_DEVICE_CODE = 6;\n+\n+        public static final int GET_DEVICE_MODE_CODE = 7;\n+\n+        public static final int SIGN_OUT_FROM_SHARED_DEVICE_CODE = 8;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTkzMQ==", "bodyText": "These are related to BrokerContentProvider itself , so i'd prefer these to be within this class.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251931", "createdAt": "2020-06-03T00:54:35Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1247,6 +1257,50 @@ private AuthenticationConstants() {\n         public static final String REMOVE_ACCOUNT_FROM_SHARED_DEVICE = \"REMOVE_ACCOUNT_FROM_SHARED_DEVICE\";\n     }\n \n+\n+    public static final class BrokerContentProvider{\n+\n+        public static final String CONTENT_SCHEME = \"content://\";\n+\n+        /** Paths for all broker api's **/\n+        public static final String AUTHORITY = \"microsoft.identity.broker\";\n+\n+        public static final String HELLO_PATH = \"/hello\";\n+\n+        public static final String ACQUIRE_TOKEN_INTERACTIVE_PATH = \"/acquireTokenInteractive\";\n+\n+        public static final String ACQUIRE_TOKEN_SILENT_PATH = \"/acquireTokenSilent\";\n+\n+        public static final String GET_ACCOUNTS_PATH = \"/getAccounts\";\n+\n+        public static final String REMOVE_ACCOUNTS_PATH = \"/removeAccounts\";\n+\n+        public static final String GET_CURRENT_ACCOUNT_SHARED_DEVICE_PATH = \"/getCurrentAccountSharedDevice\";\n+\n+        public static final String GET_DEVICE_MODE_PATH = \"/getDeviceMode\";\n+\n+        public static final String SIGN_OUT_FROM_SHARED_DEVICE_PATH = \"/signOutFromSharedDevice\";\n+\n+\n+        /** Codes for URI **/\n+        public static final int HELLO_URI_CODE = 1;\n+\n+        public static final int ACQUIRE_TOKEN_INTERACTIVE_CODE = 2;\n+\n+        public static final int ACQUIRE_TOKEN_SILENT_CODE = 3;\n+\n+        public static final int GET_ACCOUNTS_CODE = 4;\n+\n+        public static final int REMOVE_ACCOUNTS_CODE = 5;\n+\n+        public static final int GET_CURRENT_ACCOUNT_SHARED_DEVICE_CODE = 6;\n+\n+        public static final int GET_DEVICE_MODE_CODE = 7;\n+\n+        public static final int SIGN_OUT_FROM_SHARED_DEVICE_CODE = 8;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDEzMA=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcwODI3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozMDozMVrOGeGG2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1MzoxOVrOGeInTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDUyMQ==", "bodyText": "Should there be documentation for this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210521", "createdAt": "2020-06-02T22:30:31Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -415,6 +417,28 @@ public Bundle getRequestBundleForHello(@NonNull final CommandParameters paramete\n         return requestBundle;\n     }\n \n+    public Intent getRequestIntentForAcquireTokenInteractive(@NonNull final Bundle resultBundle,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTU5OQ==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251599", "createdAt": "2020-06-03T00:53:19Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -415,6 +417,28 @@ public Bundle getRequestBundleForHello(@NonNull final CommandParameters paramete\n         return requestBundle;\n     }\n \n+    public Intent getRequestIntentForAcquireTokenInteractive(@NonNull final Bundle resultBundle,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDUyMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcwOTk0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozMToxOFrOGeGH4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1MzoxMVrOGeInKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDc4Ng==", "bodyText": "Should we document this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210786", "createdAt": "2020-06-02T22:31:18Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTU2MQ==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251561", "createdAt": "2020-06-03T00:53:11Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDc4Ng=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcxMDIwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozMToyOFrOGeGIFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1MzowMVrOGeInBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDgzOQ==", "bodyText": "Should we document this public method?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434210839", "createdAt": "2020-06-02T22:31:28Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTUyNA==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251524", "createdAt": "2020-06-03T00:53:01Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java", "diffHunk": "@@ -475,29 +499,44 @@ private Bundle getRequestBundleFromBrokerRequest(@NonNull BrokerRequest brokerRe\n                     sRequestAdapterGsonInstance.toJson(brokerRequest, BrokerRequest.class)\n             );\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters) {\n+    public Bundle getRequestBundleForGetAccounts(@NonNull final CommandParameters parameters,\n+                                                 @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n         requestBundle.putString(ACCOUNT_REDIRECT, parameters.getRedirectUri());\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n         //Disable the environment and tenantID. Just return all accounts belong to this clientID.\n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccount(@NonNull final RemoveAccountCommandParameters parameters,\n+                                                   @Nullable final String negotiatedBrokerProtocolVersion) {\n         final Bundle requestBundle = new Bundle();\n         if (null != parameters.getAccount()) {\n             requestBundle.putString(ACCOUNT_CLIENTID_KEY, parameters.getClientId());\n             requestBundle.putString(ENVIRONMENT, parameters.getAccount().getEnvironment());\n             requestBundle.putString(ACCOUNT_HOME_ACCOUNT_ID, parameters.getAccount().getHomeAccountId());\n         }\n+        requestBundle.putString(\n+                AuthenticationConstants.Broker.NEGOTIATED_BP_VERSION_KEY,\n+                negotiatedBrokerProtocolVersion\n+        );\n \n         return requestBundle;\n     }\n \n-    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters) {\n+    public Bundle getRequestBundleForRemoveAccountFromSharedDevice(@NonNull final RemoveAccountCommandParameters parameters,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMDgzOQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcxNTQ0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozMzo1MlrOGeGLQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1Mjo0N1rOGeImvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTY0OA==", "bodyText": "@nonnull?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211648", "createdAt": "2020-06-02T22:33:52Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTQ1Mw==", "bodyText": "Addressed", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251453", "createdAt": "2020-06-03T00:52:47Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTY0OA=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcxNTg4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozNDowNlrOGeGLhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo1MDo0NlrOGeIlCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTcxOQ==", "bodyText": "@nonnull?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211719", "createdAt": "2020-06-02T22:34:06Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {\n+        final Parcel parcel = Parcel.obtain();\n+        parcel.unmarshall(bytes, 0, bytes.length);\n+        parcel.setDataPosition(0);\n+        return parcel;\n+    }\n+\n+    public static <T> T unmarshall(byte[] bytes, Parcelable.Creator<T> creator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MTAxNw==", "bodyText": "Addressed via 477877f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434251017", "createdAt": "2020-06-03T00:50:46Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {\n+\n+    public static byte[] marshall(@NonNull final Parcelable parceable) {\n+        final Parcel parcel = Parcel.obtain();\n+        parceable.writeToParcel(parcel, 0);\n+        final byte[] bytes = parcel.marshall();\n+        parcel.recycle();\n+        return bytes;\n+    }\n+\n+    public static Parcel unmarshall(byte[] bytes) {\n+        final Parcel parcel = Parcel.obtain();\n+        parcel.unmarshall(bytes, 0, bytes.length);\n+        parcel.setDataPosition(0);\n+        return parcel;\n+    }\n+\n+    public static <T> T unmarshall(byte[] bytes, Parcelable.Creator<T> creator) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTcxOQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDcxNjk0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjozNDo0M1rOGeGMRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0MDo1MVrOGeoswA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ==", "bodyText": "Should we have documentation on this public class?  Should it be final, with a private constructor?  Higher level, is there a reason to prefer static method references over instance methods on a singleton-safe class?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434211911", "createdAt": "2020-06-02T22:34:43Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MDg5NQ==", "bodyText": "Added documentation via 477877f. The intention of this class is have just util methods to transform parcelable , hence static methods to keep it simple. I would say it's a coding preference we have been following for all our Util classes.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434250895", "createdAt": "2020-06-03T00:50:22Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc0MTg5MQ==", "bodyText": "I'm fine with this, though it will make it more difficult to induce exceptional behavior in the writeToParcel methods for the purposes of testing.  What I would suggest is that, since it's never reasonable to instantiate or inherit from this type of class, declare it to be final and give it a private constructor.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434741891", "createdAt": "2020-06-03T17:38:59Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3NTUxNg==", "bodyText": "yup, I would not expect to induce any behavior to these as these are basic util methods using Platform API's to transform. Declared as final and added a private constructor as suggested", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434775516", "createdAt": "2020-06-03T18:37:43Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3NzI4MA==", "bodyText": "Thanks!   I'm looking into static analysis to enforce this kind of thing so we're not doing it in review.  Looks like we have a checkstyle ruleset in the codebase...", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434777280", "createdAt": "2020-06-03T18:40:51Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+public class ParcelableUtil {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxMTkxMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDczODA0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMjo0NDoyMFrOGeGZIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDo0Mzo1NlrOGeIecA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxNTIwMQ==", "bodyText": "Point of curiosity: what's the relationship between this context and mContext?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434215201", "createdAt": "2020-06-02T22:44:20Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI0OTMyOA==", "bodyText": "Good catch, didn't realize we already have a member variable for Context, removed context as an arg.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434249328", "createdAt": "2020-06-03T00:43:56Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerValidator.java", "diffHunk": "@@ -229,6 +231,26 @@ private X509Certificate getSelfSignedCert(final List<X509Certificate> certs)\n         return selfSignedCert;\n     }\n \n+    /**\n+     * Returns the package that is currently active relative to the Work Account custom account type\n+     * Note: either the company portal or the authenticator\n+     *\n+     * @param context : current active broker package name, null if no broker is available", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIxNTIwMQ=="}, "originalCommit": {"oid": "9be93a249e0f8152e0b3779a3383f3a6330ea8cf"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODI5OTUzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowNDoxOVrOGepd5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOToyNjoyNlrOGeqLjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4OTg2MA==", "bodyText": "You can also do @NoArgsConstructor(access = AccessLevel.PRIVATE) if you prefer the Lombok style.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434789860", "createdAt": "2020-06-03T19:04:19Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * Utility class to marshall and unmarshall Parcelable types.\n+ */\n+public final class ParcelableUtil {\n+\n+    private ParcelableUtil(){\n+\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48de467c71434097b86f08be2e69dfd3748d425b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDgwMTU0OQ==", "bodyText": "Good tip, now that we have embraced lombok , better to use it :)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/918#discussion_r434801549", "createdAt": "2020-06-03T19:26:26Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/util/ParcelableUtil.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation.\n+// All rights reserved.\n+//\n+// This code is licensed under the MIT License.\n+//\n+// Permission is hereby granted, free of charge, to any person obtaining a copy\n+// of this software and associated documentation files(the \"Software\"), to deal\n+// in the Software without restriction, including without limitation the rights\n+// to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+// copies of the Software, and to permit persons to whom the Software is\n+// furnished to do so, subject to the following conditions :\n+//\n+// The above copyright notice and this permission notice shall be included in\n+// all copies or substantial portions of the Software.\n+//\n+// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+// THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * Utility class to marshall and unmarshall Parcelable types.\n+ */\n+public final class ParcelableUtil {\n+\n+    private ParcelableUtil(){\n+\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4OTg2MA=="}, "originalCommit": {"oid": "48de467c71434097b86f08be2e69dfd3748d425b"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2365, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}