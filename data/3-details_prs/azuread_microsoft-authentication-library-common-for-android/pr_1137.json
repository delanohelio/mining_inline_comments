{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0MDk2MTU4", "number": 1137, "title": "Sends CP version to ESTS and handle WebCP uri.", "bodyText": "Current experience\n\nWhenever you run into Device Enrollment CA during sign in.... Webview is launched -> You have to sign in (again) -> it shows a page that redirects you to play store.\nThe experience is bad, and even more so when Work Profile comes into play (because you'll see this if you're trying to log in in your personal profile - even if you already have everything set up in work profile)\nThe scope is originally for duo, but eventually we want to improve this experience for everyone (Duo comes with Broker installed).\n\nThe proposed fix\n\nBroker + MSAL (and soon ADAL) detects the existence of company portal in the current profile.\nIt sends the installed version of CP as a query parameter along with the auth request to eSTS. (cpVersion=x)\neSTS passes that information to WebCP. WebCP uses that information to decide how it should proceed with the flow.\n-There are 4 possible states\n1) the webview does not support CP deeplink.\n2) CP is not installed.\n3) CP is installed, but it's an older version\n4) CP is installed, and it contains the latest change with improved UX. (here)\n\nIf no values is passed to WebCP, then it's either 1,2 or 3 . In this case, we will proceed with the improved browser flow (extra login no longer required)\n\n\nFor 4), WebCP will tell eSTS (to redirect us) to companyportal://enrollment. To avoid potential phishing, we hardcoded this url in common - saying that if this link appears, launch CP.", "createdAt": "2020-11-19T16:57:00Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137", "merged": true, "mergeCommit": {"oid": "44438ef4ec673552b5d7da47e033b6945bc1272d"}, "closed": true, "closedAt": "2021-01-11T06:11:48Z", "author": {"login": "rpdome"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeG1OoAFqTUzNDcyMDczNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABduQS6AgFqTU2NDYyMDk4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzIwNzM0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-534720734", "createdAt": "2020-11-19T18:12:31Z", "commit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxMjozMlrOH2rcxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxMjozMlrOH2rcxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NzAyOA==", "bodyText": "nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    public static final String WEBCP_LAUNCH_COMPANY_PORTAL_URL = \"companyportal://enrollment\";\n          \n          \n            \n                    public static final String WEBCP_LAUNCH_COMPANY_PORTAL_URL = BROWSER_EXT_WEB_CP + \"enrollment\";", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r527097028", "createdAt": "2020-11-19T18:12:32Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1055,6 +1055,16 @@\n          */\n         public static final String BROWSER_EXT_INSTALL_PREFIX = \"msauth://\";\n \n+        /**\n+         * Prefix in the redirect from WebCP.\n+         */\n+        public static final String BROWSER_EXT_WEB_CP = \"companyportal://\";\n+\n+        /**\n+         * Redirect URL from WebCP that should launch the Intune Company Portal app.\n+         */\n+        public static final String WEBCP_LAUNCH_COMPANY_PORTAL_URL = \"companyportal://enrollment\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzIzMjAy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-534723202", "createdAt": "2020-11-19T18:15:40Z", "commit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxNTo0MFrOH2rkhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxNTo0MFrOH2rkhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5OTAxMg==", "bodyText": "Update method docs with additional case.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r527099012", "createdAt": "2020-11-19T18:15:40Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -161,6 +161,9 @@ private boolean handleUrl(final WebView view, final String url) {\n         } else if (isInstallRequestUrl(formattedURL)) {\n             Logger.info(TAG, \"It is an install request\");\n             return processInstallRequest(view, url);\n+        } else if (isWebCpUrl(formattedURL)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzIzNjgy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-534723682", "createdAt": "2020-11-19T18:16:17Z", "commit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxNjoxN1rOH2rl8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoxNjoxN1rOH2rl8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5OTM3Nw==", "bodyText": "should we write this as a getUriHanlder method that returns a BiFunction that we call to handle the URI and view?\nSo the method then becomes return getUriHandler(formattedUrl).apply(view, url);\nIt's not long enough to really matter.  Nevermind.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r527099377", "createdAt": "2020-11-19T18:16:17Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -161,6 +161,9 @@ private boolean handleUrl(final WebView view, final String url) {\n         } else if (isInstallRequestUrl(formattedURL)) {\n             Logger.info(TAG, \"It is an install request\");\n             return processInstallRequest(view, url);\n+        } else if (isWebCpUrl(formattedURL)) {\n+            Logger.info(TAG, \"It is a request from WebCP\");\n+            return processWebCpRequest(view, url);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzQxNTYz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-534741563", "createdAt": "2020-11-19T18:39:09Z", "commit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODozOTowOVrOH2scbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODozOTowOVrOH2scbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzExMzMyNg==", "bodyText": "Should we take charge of logging this here, so we can put in the logs the package name we tried to launch?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r527113326", "createdAt": "2020-11-19T18:39:09Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/AuthorizationRequest.java", "diffHunk": "@@ -221,26 +235,39 @@ public B setClaims(String claims) {\n             return self();\n         }\n \n-        public B setRequestHeaders(HashMap<String, String> requestHeaders){\n+        public B setRequestHeaders(HashMap<String, String> requestHeaders) {\n             mRequestHeaders = requestHeaders;\n             return self();\n         }\n \n         public Builder<B> setWebViewZoomEnabled(boolean webViewZoomEnabled) {\n-            this.webViewZoomEnabled = webViewZoomEnabled;\n+            mWebViewZoomEnabled = webViewZoomEnabled;\n             return self();\n         }\n \n         public Builder<B> setWebViewZoomControlsEnabled(boolean webViewZoomControlsEnabled) {\n-            this.webViewZoomControlsEnabled = webViewZoomControlsEnabled;\n+            mWebViewZoomControlsEnabled = webViewZoomControlsEnabled;\n+            return self();\n+        }\n+\n+        public Builder<B> setCpInstallationDetail(final @NonNull Context context) {\n+            try {\n+                // Do not use COMPANY_PORTAL_APP_PACKAGE_NAME, since we actually want this to be\n+                // CP's package name - not brokerHost's - even in localDebug mode.\n+                final PackageInfo packageInfo =\n+                        context.getPackageManager().getPackageInfo(\"com.microsoft.windowsintune.companyportal\", 0);\n+                mCpVersion = packageInfo.versionName;\n+            } catch (final PackageManager.NameNotFoundException e) {\n+                // CP is not installed. No need to do anything.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzQxOTUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-534741953", "createdAt": "2020-11-19T18:39:38Z", "commit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODozOTozOVrOH2sdew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODozOTozOVrOH2sdew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzExMzU5NQ==", "bodyText": "nitpick: make the string a constant.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r527113595", "createdAt": "2020-11-19T18:39:39Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/AuthorizationRequest.java", "diffHunk": "@@ -221,26 +235,39 @@ public B setClaims(String claims) {\n             return self();\n         }\n \n-        public B setRequestHeaders(HashMap<String, String> requestHeaders){\n+        public B setRequestHeaders(HashMap<String, String> requestHeaders) {\n             mRequestHeaders = requestHeaders;\n             return self();\n         }\n \n         public Builder<B> setWebViewZoomEnabled(boolean webViewZoomEnabled) {\n-            this.webViewZoomEnabled = webViewZoomEnabled;\n+            mWebViewZoomEnabled = webViewZoomEnabled;\n             return self();\n         }\n \n         public Builder<B> setWebViewZoomControlsEnabled(boolean webViewZoomControlsEnabled) {\n-            this.webViewZoomControlsEnabled = webViewZoomControlsEnabled;\n+            mWebViewZoomControlsEnabled = webViewZoomControlsEnabled;\n+            return self();\n+        }\n+\n+        public Builder<B> setCpInstallationDetail(final @NonNull Context context) {\n+            try {\n+                // Do not use COMPANY_PORTAL_APP_PACKAGE_NAME, since we actually want this to be\n+                // CP's package name - not brokerHost's - even in localDebug mode.\n+                final PackageInfo packageInfo =\n+                        context.getPackageManager().getPackageInfo(\"com.microsoft.windowsintune.companyportal\", 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fda3a321d82619116fe58ca999ee64f6ffa843f3"}, "originalPosition": 98}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee0ceb7cf15d1a7ade5216103cc3c7feb85074ee", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ee0ceb7cf15d1a7ade5216103cc3c7feb85074ee", "committedDate": "2020-11-20T06:39:16Z", "message": "Update common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}, "afterCommit": {"oid": "81b90a1013828450c5144f09f27c11691f035cc7", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/81b90a1013828450c5144f09f27c11691f035cc7", "committedDate": "2020-11-27T11:41:36Z", "message": "resolve comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81b90a1013828450c5144f09f27c11691f035cc7", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/81b90a1013828450c5144f09f27c11691f035cc7", "committedDate": "2020-11-27T11:41:36Z", "message": "resolve comments"}, "afterCommit": {"oid": "3fc4a9b8de82fe41c870a6d34ab4d8ac9870e402", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/3fc4a9b8de82fe41c870a6d34ab4d8ac9870e402", "committedDate": "2020-12-01T12:38:46Z", "message": "resolve comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fc4a9b8de82fe41c870a6d34ab4d8ac9870e402", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/3fc4a9b8de82fe41c870a6d34ab4d8ac9870e402", "committedDate": "2020-12-01T12:38:46Z", "message": "resolve comments"}, "afterCommit": {"oid": "a06d8146d828a54ea0ec7e578b3fae7a79e1d674", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a06d8146d828a54ea0ec7e578b3fae7a79e1d674", "committedDate": "2021-01-08T14:01:15Z", "message": "resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6db3b3e015eaa857dea2c89621b25aa0342c1059", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6db3b3e015eaa857dea2c89621b25aa0342c1059", "committedDate": "2021-01-08T20:33:33Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4592af96f1b4a496f5429420ebd8e289b838840f", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4592af96f1b4a496f5429420ebd8e289b838840f", "committedDate": "2021-01-08T20:33:33Z", "message": "changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a13a7d2acacbf208f833c42c99088ab77706e10c", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a13a7d2acacbf208f833c42c99088ab77706e10c", "committedDate": "2021-01-08T20:33:33Z", "message": "Update common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89a8256a19d9b3d58cf5f3ab555431fd309ee565", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/89a8256a19d9b3d58cf5f3ab555431fd309ee565", "committedDate": "2021-01-08T20:33:33Z", "message": "resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c75e64af81fd59f0779c07273cfe8c1db2f4ea7", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8c75e64af81fd59f0779c07273cfe8c1db2f4ea7", "committedDate": "2021-01-08T20:33:33Z", "message": "update link"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/455a2e9b1e312472aae71863aeadf7030df19003", "committedDate": "2021-01-08T20:33:33Z", "message": "update link"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d382dd3566d82dbb1cea7eeaaa920de75d6ae51f", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d382dd3566d82dbb1cea7eeaaa920de75d6ae51f", "committedDate": "2021-01-08T20:32:29Z", "message": "update link"}, "afterCommit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/455a2e9b1e312472aae71863aeadf7030df19003", "committedDate": "2021-01-08T20:33:33Z", "message": "update link"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NTY5MTA1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-564569105", "createdAt": "2021-01-08T20:42:49Z", "commit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo0Mjo1MFrOIQgh6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo0Mjo1MFrOIQgh6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE4MTA5Ng==", "bodyText": "This scheme we're using, does this provide a deep link into CompanyPortal?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r554181096", "createdAt": "2021-01-08T20:42:50Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1073,6 +1073,16 @@\n          */\n         public static final String BROWSER_EXT_INSTALL_PREFIX = \"msauth://\";\n \n+        /**\n+         * Prefix in the redirect from WebCP.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NTcyNDI4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-564572428", "createdAt": "2021-01-08T20:49:04Z", "commit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo0OTowNVrOIQgsNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo0OTowNVrOIQgsNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE4MzczNQ==", "bodyText": "I'm assuming that this means that we don't want to link into BrokerHostApp.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r554183735", "createdAt": "2021-01-08T20:49:05Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -248,19 +256,9 @@ private boolean processWebsiteRequest(@NonNull final WebView view, @NonNull fina\n             //       Until that comes, we'll only handle this in ipphone.\n             if (packageHelper.isPackageInstalledAndEnabled(applicationContext, IPPHONE_APP_PACKAGE_NAME) &&\n                     IPPHONE_APP_SIGNATURE.equals(packageHelper.getCurrentSignatureForPackage(IPPHONE_APP_PACKAGE_NAME)) &&\n-                    packageHelper.isPackageInstalledAndEnabled(applicationContext, COMPANY_PORTAL_APP_PACKAGE_NAME)) {\n+                    packageHelper.isPackageInstalledAndEnabled(applicationContext, COMPANY_PORTAL_PROD_APP_PACKAGE_NAME)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NTczNTcy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-564573572", "createdAt": "2021-01-08T20:51:07Z", "commit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo1MTowN1rOIQgvaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDo1MTowN1rOIQgvaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE4NDU1Mg==", "bodyText": "do we want to be case-insensitive here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#discussion_r554184552", "createdAt": "2021-01-08T20:51:07Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -296,6 +310,20 @@ private void openLinkInBrowser(final String url) {\n         }\n     }\n \n+    private boolean processWebCpRequest(@NonNull final WebView view, @NonNull final String url) {\n+\n+        view.stopLoading();\n+        \n+        if (url.equalsIgnoreCase(AuthenticationConstants.Broker.WEBCP_LAUNCH_COMPANY_PORTAL_URL)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NTc1MjMw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-564575230", "createdAt": "2021-01-08T20:54:04Z", "commit": {"oid": "455a2e9b1e312472aae71863aeadf7030df19003"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NjIwOTg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1137#pullrequestreview-564620986", "createdAt": "2021-01-08T22:16:53Z", "commit": {"oid": "a4f8ee5018ac135c93d1c18cafcefc405289c502"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1441, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}