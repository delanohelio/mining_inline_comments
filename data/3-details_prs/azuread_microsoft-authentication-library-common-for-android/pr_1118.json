{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MDAwMjA2", "number": 1118, "title": "Adding config to publish uiautomation utilities", "bodyText": "Adding UI Automation Utilities.\nFixing issue where if you don't specify the local project reference will be used and this does not convey a group id.  This appears to default to the letter 's' for reasons that are still unknown to me; however I'm setting this to the correct group id when encountered.", "createdAt": "2020-11-09T19:50:12Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118", "merged": true, "mergeCommit": {"oid": "1f176680f047d68a8b7fcc88b21890c660cd3272"}, "closed": true, "closedAt": "2020-11-10T05:36:39Z", "author": {"login": "shoatman"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda6NhoAH2gAyNTE4MDAwMjA2OjhhNjQwNTE3NWYzYmY5YzNmZDU5YTJmN2ZhN2YyZjRlOTUxMzI2YTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda_WcaAFqTUyNjc5MTk4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7", "committedDate": "2020-11-09T19:48:32Z", "message": "Adding config to publish uiautomation utilities"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjEwNzA3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118#pullrequestreview-526610707", "createdAt": "2020-11-09T20:02:48Z", "commit": {"oid": "8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowMjo0OFrOHv_iKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowMjo0OFrOHv_iKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NjA1OA==", "bodyText": "should we supply this as a function?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118#discussion_r520086058", "createdAt": "2020-11-09T20:02:48Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/build.gradle", "diffHunk": "@@ -44,14 +53,78 @@ android {\n \n }\n \n+\n+task sourcesJar(type: Jar) {\n+    from android.sourceSets.main.java.srcDirs\n+}\n+\n+tasks.whenTaskAdded { task ->\n+    if (task.name == 'assembleDebug' || task.name == 'assembleRelease') {\n+        task.dependsOn 'sourcesJar'\n+    }\n+}\n+\n+project.afterEvaluate{\n+    publishing {\n+        publications {\n+            aar(MavenPublication) {\n+                artifact sourcesJar\n+                groupId 'com.microsoft.identity'\n+                artifactId = 'uiautomationutilities'\n+                version = getAppVersionName()\n+\n+                pom.withXml {\n+\n+                    // Dependencies\n+                    def dependenciesNode = asNode().appendNode('dependencies')\n+\n+                    //Iterate over the implementation dependencies (we don't want the test ones), adding a <dependency> node for each\n+                    configurations.implementation.allDependencies.each {\n+                        if (it.group != null && it.name != null) {\n+                            def dependencyNode = dependenciesNode.appendNode('dependency')\n+                            if(it.group == 's'){\n+                                dependencyNode.appendNode('groupId', groupId)\n+                            }else{\n+                                dependencyNode.appendNode('groupId', it.group)\n+                            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjEyODI0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118#pullrequestreview-526612824", "createdAt": "2020-11-09T20:05:55Z", "commit": {"oid": "8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNTo1NVrOHv_oYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNTo1NVrOHv_oYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NzY0OA==", "bodyText": "I'm not sure what this comment means?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118#discussion_r520087648", "createdAt": "2020-11-09T20:05:55Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/build.gradle", "diffHunk": "@@ -44,14 +53,78 @@ android {\n \n }\n \n+\n+task sourcesJar(type: Jar) {\n+    from android.sourceSets.main.java.srcDirs\n+}\n+\n+tasks.whenTaskAdded { task ->\n+    if (task.name == 'assembleDebug' || task.name == 'assembleRelease') {\n+        task.dependsOn 'sourcesJar'\n+    }\n+}\n+\n+project.afterEvaluate{\n+    publishing {\n+        publications {\n+            aar(MavenPublication) {\n+                artifact sourcesJar\n+                groupId 'com.microsoft.identity'\n+                artifactId = 'uiautomationutilities'\n+                version = getAppVersionName()\n+\n+                pom.withXml {\n+\n+                    // Dependencies\n+                    def dependenciesNode = asNode().appendNode('dependencies')\n+\n+                    //Iterate over the implementation dependencies (we don't want the test ones), adding a <dependency> node for each\n+                    configurations.implementation.allDependencies.each {\n+                        if (it.group != null && it.name != null) {\n+                            def dependencyNode = dependenciesNode.appendNode('dependency')\n+                            if(it.group == 's'){\n+                                dependencyNode.appendNode('groupId', groupId)\n+                            }else{\n+                                dependencyNode.appendNode('groupId', it.group)\n+                            }\n+                            dependencyNode.appendNode('artifactId', it.name)\n+                            dependencyNode.appendNode('version', it.version)\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        repositories {\n+            maven {\n+                name \"vsts-maven-adal-android\"\n+                url \"https://identitydivision.pkgs.visualstudio.com/_packaging/AndroidADAL/maven/v1\"\n+                credentials {\n+                    username project.ext.vstsUsername\n+                    password project.ext.vstsPassword\n+                }\n+            }\n+        }\n+    }\n+}\n+\n dependencies {\n     implementation fileTree(dir: 'libs', include: ['*.jar'])\n     implementation \"androidx.appcompat:appcompat:$rootProject.ext.appCompatVersion\"\n     implementation 'junit:junit:4.13'\n     implementation \"androidx.test.uiautomator:uiautomator:$rootProject.ext.uiAutomatorVersion\"\n     implementation \"androidx.test:monitor:$rootProject.ext.androidxTestMonitorVersion\"\n     implementation \"androidx.test:core:$rootProject.ext.androidxTestCoreVersion\"\n-    implementation project(':testutils')\n+    // keyvault per product flavor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a6405175f3bf9c3fd59a2f7fa7f2f4e951326a7"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "597624c0c8266f92c010885a695471000401ddce", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/597624c0c8266f92c010885a695471000401ddce", "committedDate": "2020-11-10T01:37:53Z", "message": "Feedback and adding root project name for common.  Root project name because group id during publishing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7b529179176905f9d14d13388333e7233036c88", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a7b529179176905f9d14d13388333e7233036c88", "committedDate": "2020-11-10T01:39:16Z", "message": "Merge branch 'dev' into shoatman/publish-uitautomationutilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4132eed8f3fa7d5959939f59b0d60cd28f4262c7", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4132eed8f3fa7d5959939f59b0d60cd28f4262c7", "committedDate": "2020-11-10T01:46:09Z", "message": "Merge branch 'dev' into shoatman/publish-uitautomationutilities"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzkxOTg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1118#pullrequestreview-526791986", "createdAt": "2020-11-10T01:47:48Z", "commit": {"oid": "4132eed8f3fa7d5959939f59b0d60cd28f4262c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1416, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}