{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzY3MjE4", "number": 992, "title": "Add app-name and app-ver headers to /auth and /token requests", "bodyText": "Address this API consistency item: https://dev.azure.com/IdentityDivision/Engineering/_workitems/edit/865193\nRelated Broker PR: AzureAD/ad-accounts-for-android#1352", "createdAt": "2020-08-07T03:25:44Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992", "merged": true, "mergeCommit": {"oid": "e87fdd2277ce0106b9a5c6aedbdbc34916027061"}, "closed": true, "closedAt": "2020-08-07T19:45:15Z", "author": {"login": "shahzaibj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8bq8igH2gAyNDY0MzY3MjE4OjdhZGRiNDk0MmNmZjA2ZTA2NjA2ZWNmMWM3YTlkMjQ0NDU3NTZmY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8ps0aAFqTQ2MzU2NTQ3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7addb4942cff06e06606ecf1c7a9d24445756fcb", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7addb4942cff06e06606ecf1c7a9d24445756fcb", "committedDate": "2020-08-07T03:15:53Z", "message": "Add app-name and app-ver headers to /auth and /token requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b752017df98ea579a73fa9703631c71a843ba112", "committedDate": "2020-08-07T17:21:10Z", "message": "Merge branch 'dev' into shahzaibj/app-name-and-version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNDk5Mjg4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#pullrequestreview-463499288", "createdAt": "2020-08-07T17:55:17Z", "commit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NToxN1rOG9i1rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NjozMVrOG9i4EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzExOQ==", "bodyText": "This is super-trivial, but we can save some allocations on the map resize if we size it to start with or use the Map/Map constructor to handle this trivially.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187119", "createdAt": "2020-08-07T17:55:17Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java", "diffHunk": "@@ -188,6 +189,18 @@ public abstract AcquireTokenResult acquireDeviceCodeFlowToken(final Authorizatio\n                 scopes.addAll(interactiveTokenCommandParameters.getExtraScopesToConsent());\n             }\n \n+            final HashMap<String, String> completeRequestHeaders = new HashMap<>();\n+\n+            if (interactiveTokenCommandParameters.getRequestHeaders() != null) {\n+                completeRequestHeaders.putAll(interactiveTokenCommandParameters.getRequestHeaders());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzUyNA==", "bodyText": "nit: Do we need these variables?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187524", "createdAt": "2020-08-07T17:56:07Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/microsoftsts/MicrosoftStsOAuth2Strategy.java", "diffHunk": "@@ -469,6 +470,12 @@ private HttpResponse performPKeyAuthRequest(\n         headers.put(\"client-request-id\", DiagnosticContext.getRequestContext().get(DiagnosticContext.CORRELATION_ID));\n         headers.putAll(Device.getPlatformIdParameters());\n \n+        final String appName = request.getClientAppName();\n+        final String appVer = request.getClientAppVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzcyOQ==", "bodyText": "nit: do we need these variables?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187729", "createdAt": "2020-08-07T17:56:31Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java", "diffHunk": "@@ -185,6 +186,14 @@ protected HttpResponse performTokenRequest(final GenericTokenRequest request) th\n         headers.putAll(Device.getPlatformIdParameters());\n         headers.putAll(EstsTelemetry.getInstance().getTelemetryHeaders());\n \n+        if (request instanceof MicrosoftTokenRequest) {\n+            final String appName = ((MicrosoftTokenRequest) request).getClientAppName();\n+            final String appVer = ((MicrosoftTokenRequest) request).getClientAppVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63c8a2985a0c03303d4dd97811cdb3eaad1182f4", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/63c8a2985a0c03303d4dd97811cdb3eaad1182f4", "committedDate": "2020-08-07T19:14:52Z", "message": "Address comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e877ebf2cf76e4ada393b264acc13e59240ec1b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7e877ebf2cf76e4ada393b264acc13e59240ec1b", "committedDate": "2020-08-07T19:16:02Z", "message": "Merge branch 'dev' into shahzaibj/app-name-and-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2c7d53ab58ee5f05a4008301941df9f2e37d53b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c2c7d53ab58ee5f05a4008301941df9f2e37d53b", "committedDate": "2020-08-07T19:18:29Z", "message": "Address comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNTY1NDcx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#pullrequestreview-463565471", "createdAt": "2020-08-07T19:36:36Z", "commit": {"oid": "c2c7d53ab58ee5f05a4008301941df9f2e37d53b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1516, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}