{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MTAyMjE1", "number": 1109, "title": "Android/package test utilities", "bodyText": "", "createdAt": "2020-11-02T14:36:30Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109", "merged": true, "mergeCommit": {"oid": "f72b03bd47b85352f491513b4452fbabda917c58"}, "closed": true, "closedAt": "2020-11-05T21:44:34Z", "author": {"login": "shoatman"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYX9nUAH2gAyNTE0MTAyMjE1OmZiNmZhMWQ4YmY1ZDkzNDYwMGU0OGRjZjllYWZhYmIyYTMwM2QwNDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZpcE5gFqTUyNDY5NDk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb6fa1d8bf5d934600e48dcf9eafabb2a303d046", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/fb6fa1d8bf5d934600e48dcf9eafabb2a303d046", "committedDate": "2020-11-01T22:46:32Z", "message": "WIP supporting packages for test utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3b4dfa2a40117567b9caf97af27f8937cd4a3d7", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d3b4dfa2a40117567b9caf97af27f8937cd4a3d7", "committedDate": "2020-11-01T23:54:35Z", "message": "Updated github action workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32bc5af66ab571254554136ca8312963d5a6fa3d", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/32bc5af66ab571254554136ca8312963d5a6fa3d", "committedDate": "2020-11-02T15:32:52Z", "message": "Fix command name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef3e428bec88fe9afeaf84cc2832402c20108877", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ef3e428bec88fe9afeaf84cc2832402c20108877", "committedDate": "2020-11-02T15:35:36Z", "message": "Correct name and use star/unstar to test workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eaf8b688e26c2709075fcaf9269627db415cdd2", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7eaf8b688e26c2709075fcaf9269627db415cdd2", "committedDate": "2020-11-02T15:47:00Z", "message": "Correct username/password variables for repository"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6c66e5b2cfd896478f53164d81a50b22079ca32", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c6c66e5b2cfd896478f53164d81a50b22079ca32", "committedDate": "2020-11-02T18:13:05Z", "message": "Updates while testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de382076df2a50932c5404d68e85f0aacb3c45a6", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/de382076df2a50932c5404d68e85f0aacb3c45a6", "committedDate": "2020-11-02T18:27:13Z", "message": "clean up common build.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d170e0b97f9f642c26a0e6cbfed04285923553aa", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d170e0b97f9f642c26a0e6cbfed04285923553aa", "committedDate": "2020-11-02T18:28:07Z", "message": "Merge branch 'dev' into android/package-test-utilities"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODk0Njc0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-521894674", "createdAt": "2020-11-02T18:32:38Z", "commit": {"oid": "d170e0b97f9f642c26a0e6cbfed04285923553aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODozMjozOFrOHsQ6wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODozMjozOFrOHsQ6wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE3NjU3Ng==", "bodyText": "What version of common is this? Looks very old", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r516176576", "createdAt": "2020-11-02T18:32:38Z", "author": {"login": "shahzaibj"}, "path": "testutils/build.gradle", "diffHunk": "@@ -56,11 +64,86 @@ android {\n \n }\n \n+task sourcesJar(type: Jar) {\n+    from android.sourceSets.main.java.srcDirs\n+}\n+\n+tasks.whenTaskAdded { task ->\n+    if (task.name == 'assembleDebug' || task.name == 'assembleRelease') {\n+        task.dependsOn 'sourcesJar'\n+    }\n+}\n+\n+project.afterEvaluate{\n+    publishing {\n+        publications {\n+            aar(MavenPublication) {\n+                artifact sourcesJar\n+                groupId 'com.microsoft.identity'\n+                artifactId = 'testutils'\n+                version = getAppVersionName()\n+\n+                pom.withXml {\n+\n+                    // Dependencies\n+                    def dependenciesNode = asNode().appendNode('dependencies')\n+\n+                    //Iterate over the implementation dependencies (we don't want the test ones), adding a <dependency> node for each\n+                    configurations.implementation.allDependencies.each {\n+                        if (it.group != null && it.name != null) {\n+                            def dependencyNode = dependenciesNode.appendNode('dependency')\n+                            dependencyNode.appendNode('groupId', it.group)\n+                            dependencyNode.appendNode('artifactId', it.name)\n+                            dependencyNode.appendNode('version', it.version)\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        repositories {\n+            maven {\n+                name \"vsts-maven-adal-android\"\n+                url \"https://identitydivision.pkgs.visualstudio.com/_packaging/AndroidADAL/maven/v1\"\n+                credentials {\n+                    username project.ext.vstsUsername\n+                    password project.ext.vstsPassword\n+                }\n+            }\n+        }\n+    }\n+}\n+\n dependencies {\n     implementation fileTree(dir: 'libs', include: ['*.jar'])\n-    implementation project(':common')\n+\n     implementation project(':keyvault')\n     implementation project(':labapi')\n+\n+    implementation(group: 'com.microsoft.identity', name: 'common', version: '0.0.22')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d170e0b97f9f642c26a0e6cbfed04285923553aa"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODk1NDk0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-521895494", "createdAt": "2020-11-02T18:33:51Z", "commit": {"oid": "d170e0b97f9f642c26a0e6cbfed04285923553aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODozMzo1MVrOHsQ9Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODozMzo1MVrOHsQ9Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE3NzE5OQ==", "bodyText": "I'm not clear on what is happening here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r516177199", "createdAt": "2020-11-02T18:33:51Z", "author": {"login": "shahzaibj"}, "path": "common/versioning/version.properties", "diffHunk": "@@ -1,3 +1,4 @@\n-#Thu Aug 02 12:03:16 PDT 2018\n-versionName=3.0.5-RC1\n-versionCode=1\n+#Mon Nov 02 10:02:30 PST 2020\r\n+versionName=0.0.26\r\n+versionCode=1\r\n+latestPatchVersion=26\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d170e0b97f9f642c26a0e6cbfed04285923553aa"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cbf9b0576bf8dd559ad92237c4f89b8b540522e", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5cbf9b0576bf8dd559ad92237c4f89b8b540522e", "committedDate": "2020-11-02T18:52:58Z", "message": "switch to feature branch for testing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNTgyODc5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-522582879", "createdAt": "2020-11-03T14:59:57Z", "commit": {"oid": "5cbf9b0576bf8dd559ad92237c4f89b8b540522e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDo1OTo1OFrOHsyyeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDo1OTo1OFrOHsyyeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjczMTUxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Jobs run in parrelel by default.  Use \"needs:\" to indicate dependencies run sequentially\n          \n          \n            \n            # Jobs run in parallel by default.  Use \"needs:\" to indicate dependencies run sequentially", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r516731514", "createdAt": "2020-11-03T14:59:58Z", "author": {"login": "AdamBJohnsonx"}, "path": ".github/workflows/main.yml", "diffHunk": "@@ -3,18 +3,41 @@ name: dev_updated\n \n # Controls when the action will run. Triggers the workflow on push or pull request\n # events but only for the dev branch\n+#on:\n+#  push:\n+#    branches: [ dev ]\n+\n on:\n-  push:\n-    branches: [ dev ]\n+  watch:\n+    types: [started]\n+    branches: [android/package-test-utilities]\n \n-# A workflow run is made up of one or more jobs that can run sequentially or in parallel\n+# Jobs run in parrelel by default.  Use \"needs:\" to indicate dependencies run sequentially", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cbf9b0576bf8dd559ad92237c4f89b8b540522e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e632389030671a36dbee98973e28c147d367375", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1e632389030671a36dbee98973e28c147d367375", "committedDate": "2020-11-03T15:17:53Z", "message": "Update .github/workflows/main.yml\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bcd6bea473e07fcb99d6b86e318a42b7e3b320e", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/3bcd6bea473e07fcb99d6b86e318a42b7e3b320e", "committedDate": "2020-11-03T15:18:04Z", "message": "Merge branch 'dev' into android/package-test-utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76325ec98fd84f2a9a22844cbf4b9aa914da4fc9", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/76325ec98fd84f2a9a22844cbf4b9aa914da4fc9", "committedDate": "2020-11-05T18:36:30Z", "message": "fix common dependency for testutils and reset current version to match current in repo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTU5Nzc4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-524559778", "createdAt": "2020-11-05T18:43:21Z", "commit": {"oid": "76325ec98fd84f2a9a22844cbf4b9aa914da4fc9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODo0MzoyMVrOHuRTqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODo0MzoyMVrOHuRTqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI4MDEwNw==", "bodyText": "Ah, windows newlines versus unix newlines.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r518280107", "createdAt": "2020-11-05T18:43:21Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/versioning/version.properties", "diffHunk": "@@ -1,3 +1,4 @@\n-#Thu Aug 02 12:03:16 PDT 2018\n-versionName=3.0.5-RC1\n-versionCode=1\n+#Mon Nov 02 10:02:30 PST 2020\r\n+versionName=3.0.5-RC1\r\n+versionCode=1\r\n+latestPatchVersion=26\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76325ec98fd84f2a9a22844cbf4b9aa914da4fc9"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0", "author": {"user": {"login": "shoatman", "name": "Shane Oatman"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/38fe76f51986b91abd84678d8d588f1faf887ad0", "committedDate": "2020-11-05T19:40:04Z", "message": "Ignore failing test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NjY3NjM2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-524667636", "createdAt": "2020-11-05T21:08:47Z", "commit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTowODo0N1rOHuWhRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTowODo0N1rOHuWhRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM2NTUxMA==", "bodyText": "Does groovy coerce this to 0?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r518365510", "createdAt": "2020-11-05T21:08:47Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/versioning/version_tasks.gradle", "diffHunk": "@@ -34,6 +45,18 @@ private void saveChanges(String versionName) {\n     versionProps.store(getVersionFile().newWriter(), null)\n }\n \n+private void incrementLatestVersion(){\n+    def versionProps = getVersionProps()\n+    versionProps[\"latestPatchVersion\"] = (getLatestPatchVersion() + 1).toString()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NjY5NTk1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-524669595", "createdAt": "2020-11-05T21:10:30Z", "commit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToxMDozMFrOHuWkkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToxMDozMFrOHuWkkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM2NjM1NA==", "bodyText": "explode if you can't find it, pls, and tell people why (this environment variable and this property were both empty, could not find access token to talk to foo).  Bonus points, include information about what scopes and organizations that access token needs to be able to work.  You're new and you're running this.  You should be able to remediate based on the output.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r518366354", "createdAt": "2020-11-05T21:10:30Z", "author": {"login": "AdamBJohnsonx"}, "path": "keyvault/build.gradle", "diffHunk": "@@ -1,4 +1,42 @@\n-apply plugin: 'java-library'\n+plugins {\n+    id 'java-library'\n+    id 'maven-publish'\n+}\n+\n+apply from: '../common/versioning/version_tasks.gradle'\n+\n+project.ext.vstsUsername = System.getenv(\"ENV_VSTS_MVN_ANDROIDCOMMON_USERNAME\") != null ? System.getenv(\"ENV_VSTS_MVN_ANDROIDCOMMON_USERNAME\") : project.findProperty(\"vstsUsername\")\n+project.ext.vstsPassword = System.getenv(\"ENV_VSTS_MVN_ANDROIDCOMMON_ACCESSTOKEN\") != null ? System.getenv(\"ENV_VSTS_MVN_ANDROIDCOMMON_ACCESSTOKEN\") : project.findProperty(\"vstsMavenAccessToken\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NjgyMDk3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-524682097", "createdAt": "2020-11-05T21:21:24Z", "commit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyMToyNFrOHuXJCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyMToyNFrOHuXJCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NTY4OQ==", "bodyText": "This seems to do the same thing in both cases.  Am I missing something?  I am.  There's an extra common if the file exists.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#discussion_r518375689", "createdAt": "2020-11-05T21:21:24Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/versioning/version_tasks.gradle", "diffHunk": "@@ -1,5 +1,12 @@\n def getVersionFile() {\n-    return file('versioning/version.properties')\n+    \n+    File file = new File(\"$rootDir/common/common/versioning/version.properties\")\n+    if(file.exists()){\n+        return file;\n+    }else{\n+        return new File(\"$rootDir/common/versioning/version.properties\")\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0Njk0OTcx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1109#pullrequestreview-524694971", "createdAt": "2020-11-05T21:42:07Z", "commit": {"oid": "38fe76f51986b91abd84678d8d588f1faf887ad0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1410, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}