{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMjIyNzY2", "number": 902, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjo0ODozN1rOD5MWCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjo1MDozMlrOD5MYKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjk3NjczOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjo0ODozN1rOGQU8bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMzowMToxMlrOGQVOJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3MzU0OQ==", "bodyText": "Is this related to an issue, or should there be more in the commit message stating why this alteration needs to be made?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419773549", "createdAt": "2020-05-04T22:48:37Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3ODA4Ng==", "bodyText": "Yes, we accidentally passed a hardcoded key into the clientId field, instead of the actual value.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419778086", "createdAt": "2020-05-04T23:01:12Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3MzU0OQ=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjk4MjE2OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjo1MDozMlrOGQU_gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMzoyNTo1N1rOGQVtnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw==", "bodyText": "How are the requests working without a client id or how did they work \ud83d\ude44  ?\nCan you add a desc of the issue?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419774337", "createdAt": "2020-05-04T22:50:32Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NjA3MA==", "bodyText": "Oh okay this is a regression due to lombok related changes, so looks like we haven't tested ADAL with broker for these changes.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419776070", "createdAt": "2020-05-04T22:55:38Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NzA4OA==", "bodyText": "Yeah we haven't tested ADAL with Broker since my Lombok changes. I believe we don't have a version of ADAL with the latest common so it should be working. I guess, Teams will run into issues as they dual stack", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419777088", "createdAt": "2020-05-04T22:58:38Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3ODQ4Nw==", "bodyText": "@kreedula  added.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419778487", "createdAt": "2020-05-04T23:02:21Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3OTg5Mw==", "bodyText": "@kreedula On top of what @shahzaibj said, prod ADAL uses 2.0.5, so they won't run into this issue.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419779893", "createdAt": "2020-05-04T23:06:37Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NDk1Mg==", "bodyText": "@rpdome I believe Teams can still run into the issue, right? I believe they use the common pulled by MSAL and they could run into this with the latest MSAL I believe. Have they reported anything?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419784952", "createdAt": "2020-05-04T23:22:12Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NTc2MA==", "bodyText": "Oh, by 'they' I meant prod ADAL. Yes, Teams would still run into the issue (which is why I said \"on top of what you said\". Grammar mistake :D", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419785760", "createdAt": "2020-05-04T23:24:48Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NjE0Mw==", "bodyText": "It's actually super easy to repro. My guess is that they haven't tried ADAL flow :D", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419786143", "createdAt": "2020-05-04T23:25:57Z", "author": {"login": "rpdome"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, "originalCommit": {"oid": "215d36652af8157eea066c765a7188c8ff26658a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2356, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}