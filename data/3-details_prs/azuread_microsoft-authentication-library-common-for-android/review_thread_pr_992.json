{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzY3MjE4", "number": 992, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NToxN1rOEWTehA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NjozMVrOEWTgFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODIzMjM2OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NToxN1rOG9i1rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxOToxNzoxOVrOG9lJ1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzExOQ==", "bodyText": "This is super-trivial, but we can save some allocations on the map resize if we size it to start with or use the Map/Map constructor to handle this trivially.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187119", "createdAt": "2020-08-07T17:55:17Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java", "diffHunk": "@@ -188,6 +189,18 @@ public abstract AcquireTokenResult acquireDeviceCodeFlowToken(final Authorizatio\n                 scopes.addAll(interactiveTokenCommandParameters.getExtraScopesToConsent());\n             }\n \n+            final HashMap<String, String> completeRequestHeaders = new HashMap<>();\n+\n+            if (interactiveTokenCommandParameters.getRequestHeaders() != null) {\n+                completeRequestHeaders.putAll(interactiveTokenCommandParameters.getRequestHeaders());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIyNTA0NA==", "bodyText": "Yeah, I'll keep as is for now to avoid branched logic for creating hashmap. because this could be null", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467225044", "createdAt": "2020-08-07T19:17:19Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java", "diffHunk": "@@ -188,6 +189,18 @@ public abstract AcquireTokenResult acquireDeviceCodeFlowToken(final Authorizatio\n                 scopes.addAll(interactiveTokenCommandParameters.getExtraScopesToConsent());\n             }\n \n+            final HashMap<String, String> completeRequestHeaders = new HashMap<>();\n+\n+            if (interactiveTokenCommandParameters.getRequestHeaders() != null) {\n+                completeRequestHeaders.putAll(interactiveTokenCommandParameters.getRequestHeaders());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzExOQ=="}, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODIzNTAxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/microsoftsts/MicrosoftStsOAuth2Strategy.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NjowN1rOG9i3RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxOToxNTozMFrOG9lGig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzUyNA==", "bodyText": "nit: Do we need these variables?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187524", "createdAt": "2020-08-07T17:56:07Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/microsoftsts/MicrosoftStsOAuth2Strategy.java", "diffHunk": "@@ -469,6 +470,12 @@ private HttpResponse performPKeyAuthRequest(\n         headers.put(\"client-request-id\", DiagnosticContext.getRequestContext().get(DiagnosticContext.CORRELATION_ID));\n         headers.putAll(Device.getPlatformIdParameters());\n \n+        final String appName = request.getClientAppName();\n+        final String appVer = request.getClientAppVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIyNDIwMg==", "bodyText": "Addressed", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467224202", "createdAt": "2020-08-07T19:15:30Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/microsoftsts/MicrosoftStsOAuth2Strategy.java", "diffHunk": "@@ -469,6 +470,12 @@ private HttpResponse performPKeyAuthRequest(\n         headers.put(\"client-request-id\", DiagnosticContext.getRequestContext().get(DiagnosticContext.CORRELATION_ID));\n         headers.putAll(Device.getPlatformIdParameters());\n \n+        final String appName = request.getClientAppName();\n+        final String appVer = request.getClientAppVersion();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzUyNA=="}, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODIzNjM3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo1NjozMVrOG9i4EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxOToxNTozNlrOG9lGwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzcyOQ==", "bodyText": "nit: do we need these variables?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467187729", "createdAt": "2020-08-07T17:56:31Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java", "diffHunk": "@@ -185,6 +186,14 @@ protected HttpResponse performTokenRequest(final GenericTokenRequest request) th\n         headers.putAll(Device.getPlatformIdParameters());\n         headers.putAll(EstsTelemetry.getInstance().getTelemetryHeaders());\n \n+        if (request instanceof MicrosoftTokenRequest) {\n+            final String appName = ((MicrosoftTokenRequest) request).getClientAppName();\n+            final String appVer = ((MicrosoftTokenRequest) request).getClientAppVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIyNDI1Nw==", "bodyText": "Addressed", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/992#discussion_r467224257", "createdAt": "2020-08-07T19:15:36Z", "author": {"login": "shahzaibj"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java", "diffHunk": "@@ -185,6 +186,14 @@ protected HttpResponse performTokenRequest(final GenericTokenRequest request) th\n         headers.putAll(Device.getPlatformIdParameters());\n         headers.putAll(EstsTelemetry.getInstance().getTelemetryHeaders());\n \n+        if (request instanceof MicrosoftTokenRequest) {\n+            final String appName = ((MicrosoftTokenRequest) request).getClientAppName();\n+            final String appVer = ((MicrosoftTokenRequest) request).getClientAppVersion();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4NzcyOQ=="}, "originalCommit": {"oid": "b752017df98ea579a73fa9703631c71a843ba112"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2197, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}