{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwODE4NjI0", "number": 1142, "title": "Adding DevicePinSetupRule", "bodyText": "implemented device pin setup rule and moved launchIntent function from BaseSettings to CommonUtils.", "createdAt": "2020-12-02T07:38:43Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142", "merged": true, "mergeCommit": {"oid": "13cbd9c007d632161a08ac933e1e694a5c27d5fb"}, "closed": true, "closedAt": "2020-12-17T16:55:43Z", "author": {"login": "kkrishnareddy"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiJiT8gH2gAyNTMwODE4NjI0OjUyMDFjODM4NzYyMWEwZjQ0ZDU3ZmJkYmUwMjk1M2I2OTM1NDllMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm-ZFMAH2gAyNTMwODE4NjI0OjlkOWZjYjM2ZGZlYWU2MDM4MTNmY2RlOWYxYzI1MGY2NDc4Y2Y3NmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5201c8387621a0f44d57fbdbe02953b693549e1a", "committedDate": "2020-12-02T07:37:17Z", "message": "Adding DevicePinSetupRule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDIzODg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543423886", "createdAt": "2020-12-03T03:55:20Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NToyMVrOH94YwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NToyMVrOH94YwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY0OTAyNQ==", "bodyText": "add license", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534649025", "createdAt": "2020-12-03T03:55:21Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDIzOTI5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543423929", "createdAt": "2020-12-03T03:55:29Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NToyOVrOH94Y8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NToyOVrOH94Y8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY0OTA3NQ==", "bodyText": "add javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534649075", "createdAt": "2020-12-03T03:55:29Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI0MjUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543424253", "createdAt": "2020-12-03T03:56:24Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NjoyNFrOH94aDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1NjoyNFrOH94aDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY0OTM1OQ==", "bodyText": "what does this comment about api 16+ mean here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534649359", "createdAt": "2020-12-03T03:56:24Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();\n+        KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); //api 16+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI0NzA0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543424704", "createdAt": "2020-12-03T03:57:48Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1Nzo0OFrOH94b6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1Nzo0OFrOH94b6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY0OTgzNA==", "bodyText": "variable names should start with lower case as pinButton", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534649834", "createdAt": "2020-12-03T03:57:48Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();\n+        KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); //api 16+\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+            return keyguardManager.isDeviceSecure();\n+        }\n+        return keyguardManager.isKeyguardSecure();\n+    }\n+\n+    private void setLock() throws UiObjectNotFoundException {\n+\n+        UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+        launchIntent(Settings.ACTION_SECURITY_SETTINGS);\n+\n+        UiObject screenLock = UiAutomatorUtils.obtainUiObjectWithText(\"Screen lock\");\n+        Assert.assertTrue(screenLock.exists());\n+        screenLock.click();\n+        //click on PIN.\n+        UiObject PinButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"PIN\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1MDc3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425077", "createdAt": "2020-12-03T03:58:54Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1ODo1NFrOH94dMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1ODo1NFrOH94dMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MDE2Mw==", "bodyText": "Let's put the pin code 1234 in a global constant and just reference the constant here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534650163", "createdAt": "2020-12-03T03:58:54Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();\n+        KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); //api 16+\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+            return keyguardManager.isDeviceSecure();\n+        }\n+        return keyguardManager.isKeyguardSecure();\n+    }\n+\n+    private void setLock() throws UiObjectNotFoundException {\n+\n+        UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+        launchIntent(Settings.ACTION_SECURITY_SETTINGS);\n+\n+        UiObject screenLock = UiAutomatorUtils.obtainUiObjectWithText(\"Screen lock\");\n+        Assert.assertTrue(screenLock.exists());\n+        screenLock.click();\n+        //click on PIN.\n+        UiObject PinButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"PIN\");\n+        Assert.assertTrue(PinButton.exists());\n+        PinButton.click();\n+\n+        //click on NO\n+        UiObject noButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"NO\");\n+        Assert.assertTrue(noButton.exists());\n+        noButton.click();\n+\n+        //press 1234\n+        UiObject passwordField = UiAutomatorUtils.obtainUiObjectWithResourceId(\"com.android.settings:id/password_entry\");\n+        Assert.assertTrue(passwordField.exists());\n+        passwordField.setText(\"1234\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1MjQ1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425245", "createdAt": "2020-12-03T03:59:22Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OToyMlrOH94dxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OToyMlrOH94dxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MDMwOQ==", "bodyText": "If this line is not needed then let's remove it", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534650309", "createdAt": "2020-12-03T03:59:22Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();\n+        KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); //api 16+\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+            return keyguardManager.isDeviceSecure();\n+        }\n+        return keyguardManager.isKeyguardSecure();\n+    }\n+\n+    private void setLock() throws UiObjectNotFoundException {\n+\n+        UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+        launchIntent(Settings.ACTION_SECURITY_SETTINGS);\n+\n+        UiObject screenLock = UiAutomatorUtils.obtainUiObjectWithText(\"Screen lock\");\n+        Assert.assertTrue(screenLock.exists());\n+        screenLock.click();\n+        //click on PIN.\n+        UiObject PinButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"PIN\");\n+        Assert.assertTrue(PinButton.exists());\n+        PinButton.click();\n+\n+        //click on NO\n+        UiObject noButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"NO\");\n+        Assert.assertTrue(noButton.exists());\n+        noButton.click();\n+\n+        //press 1234\n+        UiObject passwordField = UiAutomatorUtils.obtainUiObjectWithResourceId(\"com.android.settings:id/password_entry\");\n+        Assert.assertTrue(passwordField.exists());\n+        passwordField.setText(\"1234\");\n+        //press Enter.\n+        //UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 73}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1MzM0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425334", "createdAt": "2020-12-03T03:59:39Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OTozOVrOH94eIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OTozOVrOH94eIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MDQwMA==", "bodyText": "nit: add final to all variables where applicable", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534650400", "createdAt": "2020-12-03T03:59:39Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();\n+        KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); //api 16+\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+            return keyguardManager.isDeviceSecure();\n+        }\n+        return keyguardManager.isKeyguardSecure();\n+    }\n+\n+    private void setLock() throws UiObjectNotFoundException {\n+\n+        UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1NDM3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425437", "createdAt": "2020-12-03T03:59:55Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OTo1NVrOH94edw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzo1OTo1NVrOH94edw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MDQ4Nw==", "bodyText": "Since this is public, let's add some javadoc for it", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534650487", "createdAt": "2020-12-03T03:59:55Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/CommonUtils.java", "diffHunk": "@@ -159,4 +159,11 @@ public static void copyFileToFolderInSdCard(final File file, @Nullable final Str\n         AdbShellUtils.executeShellCommand(\"mkdir -p \" + destinationPath);\n         AdbShellUtils.executeShellCommandAsCurrentPackage(\"cp \" + filePath + \" \" + destFilePath);\n     }\n+\n+    public static void launchIntent(@NonNull final String action) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1ODAx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425801", "createdAt": "2020-12-03T04:01:04Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTowNVrOH94gCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTowNVrOH94gCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MDg5MQ==", "bodyText": "nit: add final to variables when possible", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534650891", "createdAt": "2020-12-03T04:01:05Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {\n+        Context context = ApplicationProvider.getApplicationContext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI1OTg0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543425984", "createdAt": "2020-12-03T04:01:38Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTozOFrOH94g2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTozOFrOH94g2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MTA5OQ==", "bodyText": "do we need this member variable? Can we just not call the isDeviceSecured method whenever needed?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534651099", "createdAt": "2020-12-03T04:01:38Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI2MDg3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543426087", "createdAt": "2020-12-03T04:01:59Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTo1OVrOH94hQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNDowMTo1OVrOH94hQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDY1MTIwMA==", "bodyText": "Method names should start with lower case\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private boolean IsDeviceSecured() {\n          \n          \n            \n                private boolean isDeviceSecured() {", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r534651200", "createdAt": "2020-12-03T04:01:59Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final Boolean isLocked = IsDeviceSecured();\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isLocked) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean IsDeviceSecured() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNDI2MjAy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-543426202", "createdAt": "2020-12-03T04:02:22Z", "commit": {"oid": "5201c8387621a0f44d57fbdbe02953b693549e1a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "537f242d568920b8ff220b03c63172b190c518dd", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/537f242d568920b8ff220b03c63172b190c518dd", "committedDate": "2020-12-03T04:04:33Z", "message": "Resolving PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bfcecddf8323e1fc8f37447b6879fd9a430c336", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4bfcecddf8323e1fc8f37447b6879fd9a430c336", "committedDate": "2020-12-03T04:15:16Z", "message": "added javadoc to launchintent function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac97ed6853786df555fdff1170e4309ed12eb7e", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9ac97ed6853786df555fdff1170e4309ed12eb7e", "committedDate": "2020-12-03T04:19:06Z", "message": "resolving PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "195bc0ee6318063caca70f76d9ccaeaeef5dd9b4", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/195bc0ee6318063caca70f76d9ccaeaeef5dd9b4", "committedDate": "2020-12-03T04:20:50Z", "message": "Resolving pr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b7e2be3e89bb2855af48c943fd11e36006f94a5", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9b7e2be3e89bb2855af48c943fd11e36006f94a5", "committedDate": "2020-12-03T04:22:28Z", "message": "Resolving PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a04e9a27369e4591ddaac3a7ac1e52e1dccdaaa8", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a04e9a27369e4591ddaac3a7ac1e52e1dccdaaa8", "committedDate": "2020-12-03T04:29:16Z", "message": "Update DevicePinSetupRule.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "752812798ef06a77375495c94e0cb8ec02944c72", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/752812798ef06a77375495c94e0cb8ec02944c72", "committedDate": "2020-12-04T09:25:58Z", "message": "Adding Device Pin Setup rule in getPrimary Rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1673c06eb2f359c4151a1062f4399daed43a00bb", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1673c06eb2f359c4151a1062f4399daed43a00bb", "committedDate": "2020-12-04T09:26:10Z", "message": "Merge branch 'kkoppart-device_lock_rule' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into kkoppart-device_lock_rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTMwNjgx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-548930681", "createdAt": "2020-12-10T07:55:27Z", "commit": {"oid": "1673c06eb2f359c4151a1062f4399daed43a00bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1NToyN1rOIC76pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1NToyN1rOIC76pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0OTczMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                final String password = \"1234\";\n          \n          \n            \n                static final String PASSWORD = \"1234\";", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r539949733", "createdAt": "2020-12-10T07:55:27Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,103 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+/**\n+ * A test rule that allows you to setup PIN for the device if the pin is not setup and\n+ * if it is already setup then it will keep the same PIN.\n+ */\n+public class DevicePinSetupRule implements TestRule {\n+\n+    final String password = \"1234\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1673c06eb2f359c4151a1062f4399daed43a00bb"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTMxMjkz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-548931293", "createdAt": "2020-12-10T07:56:31Z", "commit": {"oid": "1673c06eb2f359c4151a1062f4399daed43a00bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1NjozMVrOIC789g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNzo1NjozMVrOIC789g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1MDMyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * it will launch activity specified in the action.\n          \n          \n            \n                 * Launches an activity specified by the action.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r539950326", "createdAt": "2020-12-10T07:56:31Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/CommonUtils.java", "diffHunk": "@@ -159,4 +159,15 @@ public static void copyFileToFolderInSdCard(final File file, @Nullable final Str\n         AdbShellUtils.executeShellCommand(\"mkdir -p \" + destinationPath);\n         AdbShellUtils.executeShellCommandAsCurrentPackage(\"cp \" + filePath + \" \" + destFilePath);\n     }\n+\n+    /**\n+     * it will launch activity specified in the action.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1673c06eb2f359c4151a1062f4399daed43a00bb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c759c9b5d856ff84dbf372730725745f8f2e703", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0c759c9b5d856ff84dbf372730725745f8f2e703", "committedDate": "2020-12-10T07:57:04Z", "message": "Update uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/CommonUtils.java\n\nCo-authored-by: Shahzaib <37125644+shahzaibj@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92e7fc41959ce374966a442f822821bf86cdfb4b", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/92e7fc41959ce374966a442f822821bf86cdfb4b", "committedDate": "2020-12-10T07:58:49Z", "message": "Update DevicePinSetupRule.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9350b0150d2ed3987b759340c727af6fdb31cd7e", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9350b0150d2ed3987b759340c727af6fdb31cd7e", "committedDate": "2020-12-12T17:56:45Z", "message": "Merge branch 'dev' into kkoppart-device_lock_rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODUxMjA3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550851207", "createdAt": "2020-12-12T18:21:05Z", "commit": {"oid": "9350b0150d2ed3987b759340c727af6fdb31cd7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQxODoyMTowNlrOIEnM4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQxODoyMTowNlrOIEnM4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTcwNzQ4OQ==", "bodyText": "I did not get NO button on my device and therefore test is failing....for me it goes straight to entering the PIN.\nBy the way, I think this entire method needs to move to the ISettings class and change logic based on device", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r541707489", "createdAt": "2020-12-12T18:21:06Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,103 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+/**\n+ * A test rule that allows you to setup PIN for the device if the pin is not setup and\n+ * if it is already setup then it will keep the same PIN.\n+ */\n+public class DevicePinSetupRule implements TestRule {\n+\n+    static final String PASSWORD = \"1234\";\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isDeviceSecured()) {\n+                    setLock();\n+                }\n+                base.evaluate();\n+            }\n+        };\n+    }\n+\n+    private boolean isDeviceSecured() {\n+        final Context context = ApplicationProvider.getApplicationContext();\n+        final KeyguardManager keyguardManager =\n+                (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE);\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+            return keyguardManager.isDeviceSecure();\n+        }\n+        return keyguardManager.isKeyguardSecure();\n+    }\n+\n+    private void setLock() throws UiObjectNotFoundException {\n+\n+        final UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+        launchIntent(Settings.ACTION_SECURITY_SETTINGS);\n+\n+        final UiObject screenLock = UiAutomatorUtils.obtainUiObjectWithText(\"Screen lock\");\n+        Assert.assertTrue(screenLock.exists());\n+        screenLock.click();\n+        final UiObject pinButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"PIN\");\n+        Assert.assertTrue(pinButton.exists());\n+        pinButton.click();\n+        final UiObject noButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"NO\");\n+        Assert.assertTrue(noButton.exists());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9350b0150d2ed3987b759340c727af6fdb31cd7e"}, "originalPosition": 88}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODUxMjIx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550851221", "createdAt": "2020-12-12T18:21:14Z", "commit": {"oid": "9350b0150d2ed3987b759340c727af6fdb31cd7e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c198e314723b927c50bd332ba31835a98bbb986c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c198e314723b927c50bd332ba31835a98bbb986c", "committedDate": "2020-12-12T22:46:38Z", "message": "Merge branch 'dev' into kkoppart-device_lock_rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9949cffee548d9f70550bfed031d97c60501e5d5", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9949cffee548d9f70550bfed031d97c60501e5d5", "committedDate": "2020-12-13T03:03:22Z", "message": "moved pinsetup function to ISettings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5017cbbd8bd661d2b934a9ddc44b6562f6712341", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5017cbbd8bd661d2b934a9ddc44b6562f6712341", "committedDate": "2020-12-13T03:05:23Z", "message": "Merge branch 'kkoppart-device_lock_rule' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into kkoppart-device_lock_rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7dced4db0fc418eb2c5721c59170ed849b956a0", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/f7dced4db0fc418eb2c5721c59170ed849b956a0", "committedDate": "2020-12-13T03:09:41Z", "message": "Resolving Merge Conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f584f76e802948e8225d17dcf9afe467a7306d6", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6f584f76e802948e8225d17dcf9afe467a7306d6", "committedDate": "2020-12-13T03:11:22Z", "message": "Resolving Merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODgwNjk3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550880697", "createdAt": "2020-12-13T03:19:51Z", "commit": {"oid": "6f584f76e802948e8225d17dcf9afe467a7306d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzoxOTo1MVrOIEu1Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzoxOTo1MVrOIEu1Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzMjU0Ng==", "bodyText": "Can we rename this to something like setPinOnDevice?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r541832546", "createdAt": "2020-12-13T03:19:51Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/ISettings.java", "diffHunk": "@@ -87,4 +88,14 @@ void addWorkAccount(final ITestBroker expectedBroker,\n      * UI appears on the device. It will activate the admin for whichever admin requested the activation.\n      */\n     void activateAdmin();\n+\n+    /**\n+     * Adds screen lock to the device.\n+     */\n+    void addPinSetup() throws UiObjectNotFoundException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f584f76e802948e8225d17dcf9afe467a7306d6"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7962950872248f65f7d0570d43ad11840411dd5", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c7962950872248f65f7d0570d43ad11840411dd5", "committedDate": "2020-12-13T03:27:59Z", "message": "Renaming function name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODgxMTg4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550881188", "createdAt": "2020-12-13T03:29:29Z", "commit": {"oid": "c7962950872248f65f7d0570d43ad11840411dd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzoyOToyOVrOIEu6HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzoyOToyOVrOIEu6HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzMzc1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static final String PASSWORD = \"1234\";\n          \n          \n            \n                static final String PIN = \"1234\";", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r541833756", "createdAt": "2020-12-13T03:29:29Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.TestContext;\n+import com.microsoft.identity.client.ui.automation.device.settings.BaseSettings;\n+import com.microsoft.identity.client.ui.automation.device.settings.ISettings;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+/**\n+ * A test rule that allows you to setup PIN for the device if the pin is not setup and\n+ * if it is already setup then it will keep the same PIN.\n+ */\n+public class DevicePinSetupRule implements TestRule {\n+\n+    static final String PASSWORD = \"1234\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7962950872248f65f7d0570d43ad11840411dd5"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c816fe602e2071b53c4a80f3b6e97ecb8cba75", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c8c816fe602e2071b53c4a80f3b6e97ecb8cba75", "committedDate": "2020-12-13T03:29:49Z", "message": "Update uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java\n\nCo-authored-by: Shahzaib <37125644+shahzaibj@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODgxMjQ0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550881244", "createdAt": "2020-12-13T03:30:28Z", "commit": {"oid": "c8c816fe602e2071b53c4a80f3b6e97ecb8cba75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzozMDoyOFrOIEu6xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzozMDoyOFrOIEu6xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzMzkyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                TestContext.getTestContext().getTestDevice().getSettings().setPinOnDevice(PASSWORD);\n          \n          \n            \n                                TestContext.getTestContext().getTestDevice().getSettings().setPinOnDevice(PIN);", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r541833925", "createdAt": "2020-12-13T03:30:28Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import android.app.KeyguardManager;\n+import android.content.Context;\n+import android.os.Build;\n+import android.provider.Settings;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.TestContext;\n+import com.microsoft.identity.client.ui.automation.device.settings.BaseSettings;\n+import com.microsoft.identity.client.ui.automation.device.settings.ISettings;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.launchIntent;\n+\n+/**\n+ * A test rule that allows you to setup PIN for the device if the pin is not setup and\n+ * if it is already setup then it will keep the same PIN.\n+ */\n+public class DevicePinSetupRule implements TestRule {\n+\n+    static final String PIN = \"1234\";\n+\n+    @Override\n+    public Statement apply(final Statement base, final Description description) {\n+        return new Statement() {\n+            @Override\n+            public void evaluate() throws Throwable {\n+                if (!isDeviceSecured()) {\n+                    TestContext.getTestContext().getTestDevice().getSettings().setPinOnDevice(PASSWORD);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8c816fe602e2071b53c4a80f3b6e97ecb8cba75"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37ff6983fd55651ff8a1911140e570921195239f", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/37ff6983fd55651ff8a1911140e570921195239f", "committedDate": "2020-12-13T03:30:33Z", "message": "Update uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/DevicePinSetupRule.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODgxNTIx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550881521", "createdAt": "2020-12-13T03:36:44Z", "commit": {"oid": "37ff6983fd55651ff8a1911140e570921195239f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzozNjo0NVrOIEu92Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMzozNjo0NVrOIEu92Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzNDcxMw==", "bodyText": "That's how it seems to come up on my Pixel 3 (there may be difference in API 29 on Pixel 2 vs 3)....let's change it to this to get it to work on Pixel 3\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final UiObject doneButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"DONE\");\n          \n          \n            \n                        final UiObject doneButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"Done\");", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#discussion_r541834713", "createdAt": "2020-12-13T03:36:45Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/GoogleSettings.java", "diffHunk": "@@ -240,6 +240,32 @@ private UiObject obtainDisableAdminButton(final DeviceAdmin deviceAdmin) {\n         );\n     }\n \n+    @Override\n+    public void setPinOnDevice(final String password) throws UiObjectNotFoundException {\n+        UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+        launchScreenLockPage();\n+        final UiObject screenLock = UiAutomatorUtils.obtainUiObjectWithText(\"Screen lock\");\n+        Assert.assertTrue(screenLock.exists());\n+        screenLock.click();\n+        final UiObject pinButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"PIN\");\n+        Assert.assertTrue(pinButton.exists());\n+        pinButton.click();\n+        UiAutomatorUtils.handleInput(\"com.android.settings:id/password_entry\", password);\n+        device.pressEnter();\n+        UiAutomatorUtils.handleInput(\"com.android.settings:id/password_entry\", password);\n+        device.pressEnter();\n+        handleDoneButton();\n+    }\n+\n+    private void handleDoneButton() throws UiObjectNotFoundException {\n+        if (android.os.Build.VERSION.SDK_INT == 28) {\n+            UiAutomatorUtils.handleButtonClick(\"com.android.settings:id/redaction_done_button\");\n+        } else {\n+            final UiObject doneButton = UiAutomatorUtils.obtainUiObjectWithExactText(\"DONE\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37ff6983fd55651ff8a1911140e570921195239f"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODgxNTU1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1142#pullrequestreview-550881555", "createdAt": "2020-12-13T03:37:28Z", "commit": {"oid": "37ff6983fd55651ff8a1911140e570921195239f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f24414ee3d0145a98cff4e25ce97ddd397e8eb", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a5f24414ee3d0145a98cff4e25ce97ddd397e8eb", "committedDate": "2020-12-13T03:38:07Z", "message": "Update uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/GoogleSettings.java\n\nCo-authored-by: Shahzaib <37125644+shahzaibj@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d9fcb36dfeae603813fcde9f1c250f6478cf76d", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9d9fcb36dfeae603813fcde9f1c250f6478cf76d", "committedDate": "2020-12-17T07:27:52Z", "message": "Merge branch 'dev' into kkoppart-device_lock_rule"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1451, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}