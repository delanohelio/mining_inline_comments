{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyODc0NzYx", "number": 1149, "title": "Remove about:blank initial page load from WebViewAuthorizationFragment", "bodyText": "Impetus:\nhttps://portal.microsofticm.com/imp/v3/incidents/details/212200669/home\nCurrent behavior:\n\nAfter creating the WebView in onCreateView(), about:blank is loaded -- it is unclear why this is being done...\nWhen handling onBackPressed() events, this page should be factored in when determining if the hosting Activity is being dismissed or not however, this seems to not be totally reliable as I can intermittently 'back' onto this blank screen\nReference incident ID: UBT8DZ5P for incorrect behavior\n\nNew behavior:\n\nDon't load about:blank -- this view would have just been created, as onCreateView() is at the beginning of the lifecycle (see graphic below)\nRemove this -2 history check and go goBack() if possible or cancel() if you can't\nReference incident ID: S57C2G76 for correct behavior\n\n\n\nNote: I'm not clear on what the original purpose of this about:blank page load was, it does not seem to serve a purpose and the accompanying comment is too vague for me to determine what issue it's trying to solve", "createdAt": "2020-12-05T02:00:28Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149", "merged": true, "mergeCommit": {"oid": "e1c25f71d46fcff44cb27c47488beffe3f141a41"}, "closed": true, "closedAt": "2020-12-08T20:36:39Z", "author": {"login": "iambmelt"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjCTVngH2gAyNTMyODc0NzYxOjg2Yzk5MDZlNzQzNTg4YTQ5MzIzNWEzOTJmNWEwMGQ2NTIxNjU1OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkQIGLAFqTU0NzYwMTU4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "86c9906e743588a493235a392f5a00d652165598", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/86c9906e743588a493235a392f5a00d652165598", "committedDate": "2020-12-05T01:45:31Z", "message": "Remove about:blank initial page load -- why was this here?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/75788c812f7c3b658dd57ad823051a2d34fa52c9", "committedDate": "2020-12-05T02:14:58Z", "message": "Update changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTY4OTgx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#pullrequestreview-547568981", "createdAt": "2020-12-08T19:39:44Z", "commit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTozOTo0NFrOIBy5Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTozOTo0NFrOIBy5Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1MzM2Mg==", "bodyText": "We lost a null check here.  Did we need it?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538753362", "createdAt": "2020-12-08T19:39:44Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/WebViewAuthorizationFragment.java", "diffHunk": "@@ -171,18 +169,14 @@ public void run() {\n     @Override\n     public boolean onBackPressed() {\n         Logger.info(TAG, \"Back button is pressed\");\n-        if (null != mWebView && mWebView.canGoBack()) {\n-            // User should be able to click back button to cancel. Counting blank page as well.\n-            final int BACK_PRESSED_STEPS = -2;\n-            if (!mWebView.canGoBackOrForward(BACK_PRESSED_STEPS)) {\n-                cancelAuthorization(true);\n-            } else {\n-                mWebView.goBack();\n-            }\n-            return true;\n+\n+        if (mWebView.canGoBack()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTcwOTY5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#pullrequestreview-547570969", "createdAt": "2020-12-08T19:42:27Z", "commit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTo0MjoyN1rOIBzAFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTo0MjoyN1rOIBzAFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1NTA5Mw==", "bodyText": "This used to return true iff we had a WebView and it could go back, false otherwise.  Do we need to?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538755093", "createdAt": "2020-12-08T19:42:27Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/WebViewAuthorizationFragment.java", "diffHunk": "@@ -171,18 +169,14 @@ public void run() {\n     @Override\n     public boolean onBackPressed() {\n         Logger.info(TAG, \"Back button is pressed\");\n-        if (null != mWebView && mWebView.canGoBack()) {\n-            // User should be able to click back button to cancel. Counting blank page as well.\n-            final int BACK_PRESSED_STEPS = -2;\n-            if (!mWebView.canGoBackOrForward(BACK_PRESSED_STEPS)) {\n-                cancelAuthorization(true);\n-            } else {\n-                mWebView.goBack();\n-            }\n-            return true;\n+\n+        if (mWebView.canGoBack()) {\n+            mWebView.goBack();\n+        } else {\n+            cancelAuthorization(true);\n         }\n \n-        return false;\n+        return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjAxNTgy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#pullrequestreview-547601582", "createdAt": "2020-12-08T20:25:50Z", "commit": {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1456, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}