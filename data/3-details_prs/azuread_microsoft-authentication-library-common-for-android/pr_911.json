{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2OTYyNjk5", "number": 911, "title": "Add UI Automation Utilities", "bodyText": "In this PR, I have added a bunch of utility classes that will be used to facilitate writing UI Automation tests.\nThe following changes are made:\n\nAdd new module called uiautomationutilities to common\nAdd UI Automator as a dependency. This is the framework driving our UI Tests\nAdd utility methods for handling prompts during authorization request\nAdd utility methods for installing apps from Play Store\nAdd methods for interacting with ADB shell\nAdd methods for interacting with Broker and perform operations such as device registration\n\nFor now these are being used in MSAL UI Tests here: AzureAD/microsoft-authentication-library-for-android#1047\nGoing forward, we will also be using these for Broker UI Tests.", "createdAt": "2020-05-12T20:52:06Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911", "merged": true, "mergeCommit": {"oid": "8d55a8644511b6a86bbcb8dbfc58140fbdf88655"}, "closed": true, "closedAt": "2020-06-08T19:49:25Z", "author": {"login": "shahzaibj"}, "timelineItems": {"totalCount": 42, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbO9WRgH2gAyNDE2OTYyNjk5OjY3NWMyMzZlMTQ0YWVjOGM2MmRkY2EyZjk4OTFhMDAwOGU5MDJmOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpVzWIAFqTQyNjU2MzIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "675c236e144aec8c62ddca2f9891a0008e902f8b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/675c236e144aec8c62ddca2f9891a0008e902f8b", "committedDate": "2020-04-25T23:47:43Z", "message": "Fix key vault access on device"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80829264e4e7738358ed617c3307236b1a3a2ef3", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/80829264e4e7738358ed617c3307236b1a3a2ef3", "committedDate": "2020-04-25T23:48:06Z", "message": "Add helper to pull temp user from lab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a151c9479ad847980a5e31b292ebb748c0b0488", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0a151c9479ad847980a5e31b292ebb748c0b0488", "committedDate": "2020-05-07T17:57:29Z", "message": "Merge branch 'dev' into shahzaibj/ui-automation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02ff809d41c392b70b18629f8522e49361415fd5", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/02ff809d41c392b70b18629f8522e49361415fd5", "committedDate": "2020-05-13T18:57:52Z", "message": "Move ui test utilities to its own module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e4b955ae841a9b937ae6350ced8d81727f0ff8d", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1e4b955ae841a9b937ae6350ced8d81727f0ff8d", "committedDate": "2020-05-15T02:57:26Z", "message": "Add versions to versions.gradle, remove test files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5854dc6275296ee409512569266a1214b3a5d8a7", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5854dc6275296ee409512569266a1214b3a5d8a7", "committedDate": "2020-05-18T23:09:15Z", "message": "Rearrange ui automation files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc02968e13236ecba1ad932dcd8e851aae61e5dc", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/fc02968e13236ecba1ad932dcd8e851aae61e5dc", "committedDate": "2020-05-18T23:52:01Z", "message": "Merge branch 'dev' into shahzaibj/ui-automation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ab8c7e492e2c18a40450aac85deeac1f3bce1e2", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1ab8c7e492e2c18a40450aac85deeac1f3bce1e2", "committedDate": "2020-05-19T00:49:21Z", "message": "Remove references to android support library"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "619a325499609d7234cf266d6d3ea21c0a0a555c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/619a325499609d7234cf266d6d3ea21c0a0a555c", "committedDate": "2020-05-19T01:40:15Z", "message": "Add javadoc to public methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3225bae9a9931f1fbe9820edbe3d464e68b4009", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d3225bae9a9931f1fbe9820edbe3d464e68b4009", "committedDate": "2020-05-19T01:42:25Z", "message": "Add missing licenses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8e02634a9bc7033feb87e419dec540baa694a5c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e8e02634a9bc7033feb87e419dec540baa694a5c", "committedDate": "2020-05-19T01:43:00Z", "message": "Add mising license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47afcb9af0cab241e765bcaad5b486d9b448c064", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/47afcb9af0cab241e765bcaad5b486d9b448c064", "committedDate": "2020-05-21T17:36:02Z", "message": "Add ability to install app via local storage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed", "committedDate": "2020-05-23T21:43:44Z", "message": "Add support to grant package permission\n\nAlso some refactoring and reduce global timeout to 30 seconds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTk0MDky", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424594092", "createdAt": "2020-06-04T15:53:01Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1MzowMVrOGfMr4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1MzowMVrOGfMr4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM2Njg4MQ==", "bodyText": "need javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435366881", "createdAt": "2020-06-04T15:53:01Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IApp.java", "diffHunk": "@@ -0,0 +1,55 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+public interface IApp {\n+\n+    /**\n+     * Install this app on the device\n+     */\n+    void install();\n+\n+    /**\n+     * Launch this app on the device\n+     */\n+    void launch();\n+\n+    /**\n+     * Clear (storage) associated to this app on the device\n+     */\n+    void clear();\n+\n+    /**\n+     * Remove this app from the device\n+     */\n+    void uninstall();\n+\n+    /**\n+     * Handle the first run experience for this app on first time launch\n+     */\n+    void handleFirstRun();\n+\n+    boolean hasPermission(String permission);\n+\n+    void grantPermission(String permission);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTk0Nzg4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424594788", "createdAt": "2020-06-04T15:53:41Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1Mzo0MlrOGfMt1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1Mzo0MlrOGfMt1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM2NzM4MA==", "bodyText": "needs TODO after this block as there is probably unfinished business here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435367380", "createdAt": "2020-06-04T15:53:42Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerAuthenticator.java", "diffHunk": "@@ -0,0 +1,182 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.Manifest;\n+import android.os.Build;\n+\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.MicrosoftPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerAuthenticator extends App implements ITestBroker {\n+\n+    public final static String AUTHENTICATOR_APP_PACKAGE_NAME = \"com.azure.authenticator\";\n+    public final static String AUTHENTICATOR_APP_NAME = \"Microsoft Authenticator\";\n+    public final static String AUTHENTICATOR_APK = \"Authenticator.apk\";\n+\n+    public BrokerAuthenticator() {\n+        super(AUTHENTICATOR_APP_PACKAGE_NAME, AUTHENTICATOR_APP_NAME, new PlayStore());\n+        localApkFileName = AUTHENTICATOR_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        performDeviceRegistrationHelper(\n+                username,\n+                password,\n+                \"com.azure.authenticator:id/manage_device_registration_email_input\",\n+                \"com.azure.authenticator:id/manage_device_registration_register_button\"\n+        );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTk1MTYy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424595162", "createdAt": "2020-06-04T15:54:02Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1NDowMlrOGfMu_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1NDowMlrOGfMu_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM2NzY3Ng==", "bodyText": "needs javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435367676", "createdAt": "2020-06-04T15:54:02Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/installer/IAppInstaller.java", "diffHunk": "@@ -0,0 +1,7 @@\n+package com.microsoft.identity.client.ui.automation.installer;\n+\n+public interface IAppInstaller {\n+\n+    void installApp(final String appHint);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTk2OTU4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424596958", "createdAt": "2020-06-04T15:55:53Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1NTo1M1rOGfM0Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTo1NTo1M1rOGfM0Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM2ODk5NQ==", "bodyText": "Add class description", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435368995", "createdAt": "2020-06-04T15:55:53Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/AdbShellUtils.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.microsoft.identity.client.ui.automation.utils;\n+\n+import androidx.test.uiautomator.UiDevice;\n+\n+import org.junit.Assert;\n+\n+import java.io.IOException;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+\n+public class AdbShellUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0Nzk5NDU2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424799456", "createdAt": "2020-06-04T20:22:36Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDoyMjozNlrOGfWc6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDoyMjozNlrOGfWc6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTUyNjg5MA==", "bodyText": "I'd suggest adding a comment here around why this is necessary... mostly so no one removes without testing.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435526890", "createdAt": "2020-06-04T20:22:36Z", "author": {"login": "shoatman"}, "path": "keyvault/src/main/java/com/microsoft/identity/internal/test/keyvault/ApiClient.java", "diffHunk": "@@ -93,6 +93,9 @@ public ApiClient() {\n         authentications.put(\"oauth\", oAuthAuthentication);\n         // Prevent the authentications from being modified.\n         authentications = Collections.unmodifiableMap(authentications);\n+        List<Protocol> protocols = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTIzMjk0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424923294", "createdAt": "2020-06-05T00:30:41Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozMDo0MlrOGfcpiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozMDo0MlrOGfcpiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYyODQyNw==", "bodyText": "needs to fail here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435628427", "createdAt": "2020-06-05T00:30:42Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerAuthenticator.java", "diffHunk": "@@ -0,0 +1,182 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.Manifest;\n+import android.os.Build;\n+\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.MicrosoftPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerAuthenticator extends App implements ITestBroker {\n+\n+    public final static String AUTHENTICATOR_APP_PACKAGE_NAME = \"com.azure.authenticator\";\n+    public final static String AUTHENTICATOR_APP_NAME = \"Microsoft Authenticator\";\n+    public final static String AUTHENTICATOR_APK = \"Authenticator.apk\";\n+\n+    public BrokerAuthenticator() {\n+        super(AUTHENTICATOR_APP_PACKAGE_NAME, AUTHENTICATOR_APP_NAME, new PlayStore());\n+        localApkFileName = AUTHENTICATOR_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        performDeviceRegistrationHelper(\n+                username,\n+                password,\n+                \"com.azure.authenticator:id/manage_device_registration_email_input\",\n+                \"com.azure.authenticator:id/manage_device_registration_register_button\"\n+        );\n+    }\n+\n+    @Override\n+    public void performSharedDeviceRegistration(String username, String password) {\n+        performDeviceRegistrationHelper(\n+                username,\n+                password,\n+                \"com.azure.authenticator:id/shared_device_registration_email_input\",\n+                \"com.azure.authenticator:id/shared_device_registration_button\"\n+        );\n+\n+        final UiDevice mDevice =\n+                UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+        UiSelector sharedDeviceConfirmationSelector = new UiSelector()\n+                .descriptionContains(\"Shared Device Mode\")\n+                .className(\"android.widget.ImageView\");\n+\n+        //confirm that we are in Shared Device Mode inside Authenticator\n+        UiObject sharedDeviceConfirmation = mDevice.findObject(sharedDeviceConfirmationSelector);\n+        sharedDeviceConfirmation.waitForExists(TIMEOUT);\n+        Assert.assertTrue(sharedDeviceConfirmation.exists());\n+    }\n+\n+    private void performDeviceRegistrationHelper(final String username,\n+                                                 final String password,\n+                                                 final String emailInputResourceId,\n+                                                 final String registerBtnResourceId) {\n+        launch(); // launch Authenticator app\n+        handleFirstRun(); // handle first run experience\n+\n+        // click the 3 dot menu icon in top right\n+        UiAutomatorUtils.handleButtonClick(\"com.azure.authenticator:id/menu_overflow\");\n+\n+        try {\n+            // select Settings from drop down\n+            final UiObject settings = UiAutomatorUtils.obtainUiObjectWithText(\"Settings\");\n+            settings.click();\n+\n+            // scroll down the recycler view to find device registration btn\n+            final UiObject deviceRegistration = UiAutomatorUtils.obtainChildInScrollable(\n+                    \"com.azure.authenticator:id/recycler_view\",\n+                    \"Device registration\"\n+            );\n+\n+            assert deviceRegistration != null;\n+\n+            // click the device registration button\n+            deviceRegistration.click();\n+\n+            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {\n+                grantPermission(Manifest.permission.GET_ACCOUNTS);\n+            }\n+        } catch (UiObjectNotFoundException e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 124}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTcxMTkz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-424971193", "createdAt": "2020-06-05T03:20:32Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMzoyMDozMlrOGffIkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMzoyMDozMlrOGffIkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY2OTEzNw==", "bodyText": "nit: rename to AzureActiveDirectoryPromptHandler or AadPromptHandler", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r435669137", "createdAt": "2020-06-05T03:20:32Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/MicrosoftPromptHandler.java", "diffHunk": "@@ -0,0 +1,65 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.interaction;\n+\n+public class MicrosoftPromptHandler extends AbstractPromptHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDcxNjk0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425471694", "createdAt": "2020-06-05T17:01:37Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMTozOFrOGf2RXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMTozOFrOGf2RXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA0ODIyMQ==", "bodyText": "Don't forget to make corresponding update in android-complete :)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436048221", "createdAt": "2020-06-05T17:01:38Z", "author": {"login": "iambmelt"}, "path": "gradle/versions.gradle", "diffHunk": "@@ -12,6 +12,9 @@ ext {\n     androidMavenGradlePluginVersion = \"1.4.1\"\n \n     // Libraries\n+    androidxTestRunnerVersion = \"1.2.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDcyMDU5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425472059", "createdAt": "2020-06-05T17:02:10Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMjoxMFrOGf2SfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMjoxMFrOGf2SfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA0ODUwOQ==", "bodyText": "Missing license info?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436048509", "createdAt": "2020-06-05T17:02:10Z", "author": {"login": "iambmelt"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabConfig.java", "diffHunk": "@@ -1,6 +1,9 @@\n package com.microsoft.identity.internal.testutils.labutils;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDcyNzEw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425472710", "createdAt": "2020-06-05T17:03:08Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMzowOVrOGf2USw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMzowOVrOGf2USw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA0ODk3MQ==", "bodyText": "Interface description?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436048971", "createdAt": "2020-06-05T17:03:09Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IApp.java", "diffHunk": "@@ -0,0 +1,55 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+public interface IApp {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDczMTQ1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425473145", "createdAt": "2020-06-05T17:03:47Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMzo0N1rOGf2Vdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowMzo0N1rOGf2Vdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA0OTI3MA==", "bodyText": "javadoc here too -- are these android permissions? something else? not clear at a glance", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436049270", "createdAt": "2020-06-05T17:03:47Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IApp.java", "diffHunk": "@@ -0,0 +1,55 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+public interface IApp {\n+\n+    /**\n+     * Install this app on the device\n+     */\n+    void install();\n+\n+    /**\n+     * Launch this app on the device\n+     */\n+    void launch();\n+\n+    /**\n+     * Clear (storage) associated to this app on the device\n+     */\n+    void clear();\n+\n+    /**\n+     * Remove this app from the device\n+     */\n+    void uninstall();\n+\n+    /**\n+     * Handle the first run experience for this app on first time launch\n+     */\n+    void handleFirstRun();\n+\n+    boolean hasPermission(String permission);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDczODQz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425473843", "createdAt": "2020-06-05T17:04:52Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNDo1MlrOGf2XgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNDo1MlrOGf2XgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA0OTc5Mw==", "bodyText": "Just call out: love the use of comments here. Makes this super readable", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436049793", "createdAt": "2020-06-05T17:04:52Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerAuthenticator.java", "diffHunk": "@@ -0,0 +1,182 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.Manifest;\n+import android.os.Build;\n+\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.MicrosoftPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerAuthenticator extends App implements ITestBroker {\n+\n+    public final static String AUTHENTICATOR_APP_PACKAGE_NAME = \"com.azure.authenticator\";\n+    public final static String AUTHENTICATOR_APP_NAME = \"Microsoft Authenticator\";\n+    public final static String AUTHENTICATOR_APK = \"Authenticator.apk\";\n+\n+    public BrokerAuthenticator() {\n+        super(AUTHENTICATOR_APP_PACKAGE_NAME, AUTHENTICATOR_APP_NAME, new PlayStore());\n+        localApkFileName = AUTHENTICATOR_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        performDeviceRegistrationHelper(\n+                username,\n+                password,\n+                \"com.azure.authenticator:id/manage_device_registration_email_input\",\n+                \"com.azure.authenticator:id/manage_device_registration_register_button\"\n+        );\n+    }\n+\n+    @Override\n+    public void performSharedDeviceRegistration(String username, String password) {\n+        performDeviceRegistrationHelper(\n+                username,\n+                password,\n+                \"com.azure.authenticator:id/shared_device_registration_email_input\",\n+                \"com.azure.authenticator:id/shared_device_registration_button\"\n+        );\n+\n+        final UiDevice mDevice =\n+                UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+        UiSelector sharedDeviceConfirmationSelector = new UiSelector()\n+                .descriptionContains(\"Shared Device Mode\")\n+                .className(\"android.widget.ImageView\");\n+\n+        //confirm that we are in Shared Device Mode inside Authenticator\n+        UiObject sharedDeviceConfirmation = mDevice.findObject(sharedDeviceConfirmationSelector);\n+        sharedDeviceConfirmation.waitForExists(TIMEOUT);\n+        Assert.assertTrue(sharedDeviceConfirmation.exists());\n+    }\n+\n+    private void performDeviceRegistrationHelper(final String username,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc0MjEy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425474212", "createdAt": "2020-06-05T17:05:27Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNToyN1rOGf2Ymw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNToyN1rOGf2Ymw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDA3NQ==", "bodyText": "Do we need to file work items/throw unimplemented exceptions?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050075", "createdAt": "2020-06-05T17:05:27Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -0,0 +1,86 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerCompanyPortal extends App implements ITestBroker {\n+\n+    public final static String COMPANY_PORTAL_APP_PACKAGE_NAME = \"com.microsoft.windowsintune.companyportal\";\n+    public final static String COMPANY_PORTAL_APP_NAME = \"Intune Company Portal\";\n+    public final static String COMPANY_PORTAL_APK = \"CompanyPortal.apk\";\n+\n+    public BrokerCompanyPortal() {\n+        super(COMPANY_PORTAL_APP_PACKAGE_NAME, COMPANY_PORTAL_APP_NAME);\n+        localApkFileName = COMPANY_PORTAL_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        //TODO implement device registration for CP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc0Mjkz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425474293", "createdAt": "2020-06-05T17:05:34Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNTozNFrOGf2Y3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNTozNFrOGf2Y3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDE0Mw==", "bodyText": "Do we need to file work items/throw unimplemented exceptions?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050143", "createdAt": "2020-06-05T17:05:34Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -0,0 +1,86 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerCompanyPortal extends App implements ITestBroker {\n+\n+    public final static String COMPANY_PORTAL_APP_PACKAGE_NAME = \"com.microsoft.windowsintune.companyportal\";\n+    public final static String COMPANY_PORTAL_APP_NAME = \"Intune Company Portal\";\n+    public final static String COMPANY_PORTAL_APK = \"CompanyPortal.apk\";\n+\n+    public BrokerCompanyPortal() {\n+        super(COMPANY_PORTAL_APP_PACKAGE_NAME, COMPANY_PORTAL_APP_NAME);\n+        localApkFileName = COMPANY_PORTAL_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        //TODO implement device registration for CP\n+    }\n+\n+    @Override\n+    public void performSharedDeviceRegistration(String username, String password) {\n+        //TODO implement shared device registration for CP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc0MzY2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425474366", "createdAt": "2020-06-05T17:05:41Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNTo0MVrOGf2ZGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNTo0MVrOGf2ZGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDIwMQ==", "bodyText": "Do we need to file work items/throw unimplemented exceptions?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050201", "createdAt": "2020-06-05T17:05:41Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -0,0 +1,86 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+\n+import org.junit.Assert;\n+\n+import lombok.Getter;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+@Getter\n+public class BrokerCompanyPortal extends App implements ITestBroker {\n+\n+    public final static String COMPANY_PORTAL_APP_PACKAGE_NAME = \"com.microsoft.windowsintune.companyportal\";\n+    public final static String COMPANY_PORTAL_APP_NAME = \"Intune Company Portal\";\n+    public final static String COMPANY_PORTAL_APK = \"CompanyPortal.apk\";\n+\n+    public BrokerCompanyPortal() {\n+        super(COMPANY_PORTAL_APP_PACKAGE_NAME, COMPANY_PORTAL_APP_NAME);\n+        localApkFileName = COMPANY_PORTAL_APK;\n+    }\n+\n+    @Override\n+    public void performDeviceRegistration(String username, String password) {\n+        //TODO implement device registration for CP\n+    }\n+\n+    @Override\n+    public void performSharedDeviceRegistration(String username, String password) {\n+        //TODO implement shared device registration for CP\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        //TODO handle first run for CP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc1MTU0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425475154", "createdAt": "2020-06-05T17:06:52Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNjo1MlrOGf2bVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNjo1MlrOGf2bVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDc3NA==", "bodyText": "Would be good to javadoc App.java; if the superclass has clear docs, the subclasses get easier to grok", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050774", "createdAt": "2020-06-05T17:06:52Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/browser/BrowserChrome.java", "diffHunk": "@@ -0,0 +1,42 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.browser;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+public class BrowserChrome extends App {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc1MjUy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425475252", "createdAt": "2020-06-05T17:07:01Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNzowMVrOGf2blQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNzowMVrOGf2blQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDgzNw==", "bodyText": "License info", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050837", "createdAt": "2020-06-05T17:07:01Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/installer/LocalApkInstaller.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package com.microsoft.identity.client.ui.automation.installer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc1NDAw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425475400", "createdAt": "2020-06-05T17:07:17Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNzoxN1rOGf2cCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzowNzoxN1rOGf2cCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MDk1Mw==", "bodyText": "License info", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436050953", "createdAt": "2020-06-05T17:07:17Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/installer/PlayStore.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package com.microsoft.identity.client.ui.automation.installer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc4MjAy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425478202", "createdAt": "2020-06-05T17:11:45Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMTo0NVrOGf2kLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMTo0NVrOGf2kLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MzAzOQ==", "bodyText": "Javadoc goes before the @Annotations", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436053039", "createdAt": "2020-06-05T17:11:45Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -0,0 +1,74 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.interaction;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+\n+import lombok.Builder;\n+import lombok.Getter;\n+import lombok.NonNull;\n+\n+@Builder\n+@Getter\n+/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc4NzE1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425478715", "createdAt": "2020-06-05T17:12:31Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMjozMVrOGf2lsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMjozMVrOGf2lsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MzQyNg==", "bodyText": "Same here, comments between the annotation and its target... should be flipped around", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436053426", "createdAt": "2020-06-05T17:12:31Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -0,0 +1,74 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.interaction;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+\n+import lombok.Builder;\n+import lombok.Getter;\n+import lombok.NonNull;\n+\n+@Builder\n+@Getter\n+/**\n+ * A set of values that can be used to denote the behaviour we expect to observe during an oauth\n+ * authorization request. These values can then be supplied to a {@link AbstractPromptHandler} and\n+ * used to handle prompt in the manner as expected during the execution of a given test.\n+ * The test should fail if the actual behaviour observed deviates from what is denoted as expected\n+ * via these parameters.\n+ */\n+public class PromptHandlerParameters {\n+\n+    @NonNull\n+    // the prompt behaviour we expect\n+    private PromptParameter prompt;\n+\n+    // whether session is expected or not (via presence of a cookie)\n+    private boolean sessionExpected;\n+\n+    // whether login hint was supplied or not to the interactive request\n+    private boolean loginHintProvided;\n+\n+    // whether we expect to receive consent page or not\n+    private boolean consentPageExpected;\n+\n+    // whether we expect to receive speed bump or not\n+    private boolean speedBumpExpected;\n+\n+    // whether we are expecting at least one account in broker\n+    private boolean expectingNonZeroAccountsInBroker;\n+\n+    // whether we are expecting at least one account in the browser/webview cookie\n+    private boolean expectingNonZeroAccountsInCookie;\n+\n+    @Builder.Default\n+    // The way in which we want to respond to consent page for this request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc4ODQz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425478843", "createdAt": "2020-06-05T17:12:43Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMjo0M1rOGf2mEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMjo0M1rOGf2mEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1MzUyMA==", "bodyText": "Same here, comments between the annotation and its target... should be flipped around", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436053520", "createdAt": "2020-06-05T17:12:43Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -0,0 +1,74 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.interaction;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+\n+import lombok.Builder;\n+import lombok.Getter;\n+import lombok.NonNull;\n+\n+@Builder\n+@Getter\n+/**\n+ * A set of values that can be used to denote the behaviour we expect to observe during an oauth\n+ * authorization request. These values can then be supplied to a {@link AbstractPromptHandler} and\n+ * used to handle prompt in the manner as expected during the execution of a given test.\n+ * The test should fail if the actual behaviour observed deviates from what is denoted as expected\n+ * via these parameters.\n+ */\n+public class PromptHandlerParameters {\n+\n+    @NonNull\n+    // the prompt behaviour we expect\n+    private PromptParameter prompt;\n+\n+    // whether session is expected or not (via presence of a cookie)\n+    private boolean sessionExpected;\n+\n+    // whether login hint was supplied or not to the interactive request\n+    private boolean loginHintProvided;\n+\n+    // whether we expect to receive consent page or not\n+    private boolean consentPageExpected;\n+\n+    // whether we expect to receive speed bump or not\n+    private boolean speedBumpExpected;\n+\n+    // whether we are expecting at least one account in broker\n+    private boolean expectingNonZeroAccountsInBroker;\n+\n+    // whether we are expecting at least one account in the browser/webview cookie\n+    private boolean expectingNonZeroAccountsInCookie;\n+\n+    @Builder.Default\n+    // The way in which we want to respond to consent page for this request\n+    private UiResponse consentPageResponse = UiResponse.ACCEPT;\n+\n+    @Builder.Default\n+    // The way in which we want to respond to speed bump page for this request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDc5NTg0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425479584", "createdAt": "2020-06-05T17:13:56Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMzo1NlrOGf2oSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxMzo1NlrOGf2oSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1NDA4OA==", "bodyText": "Lots of places without any nullability annots -- these would be good to have. Will just call out once here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436054088", "createdAt": "2020-06-05T17:13:56Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/AdbShellUtils.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.microsoft.identity.client.ui.automation.utils;\n+\n+import androidx.test.uiautomator.UiDevice;\n+\n+import org.junit.Assert;\n+\n+import java.io.IOException;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+\n+public class AdbShellUtils {\n+\n+    private static void executeShellCommand(final String command) {\n+        UiDevice mDevice = UiDevice.getInstance(getInstrumentation());\n+        try {\n+            mDevice.executeShellCommand(command);\n+        } catch (IOException e) {\n+            Assert.fail(e.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Remove the supplied package name from the device\n+     *\n+     * @param packageName the package name to remove\n+     */\n+    public static void removePackage(final String packageName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDgwMTgw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425480180", "createdAt": "2020-06-05T17:14:56Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxNDo1N1rOGf2qCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxNDo1N1rOGf2qCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1NDUzNg==", "bodyText": "Could consider doing TimeUnit.SECONDS.toMillis(30) but is minor", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436054536", "createdAt": "2020-06-05T17:14:57Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/CommonUtils.java", "diffHunk": "@@ -0,0 +1,87 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.utils;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+import android.content.pm.PackageManager;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+\n+public class CommonUtils {\n+\n+    public final static long TIMEOUT = 1000 * 30;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDgwNTQ5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425480549", "createdAt": "2020-06-05T17:15:29Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxNToyOVrOGf2rMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzoxNToyOVrOGf2rMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA1NDgzMw==", "bodyText": "nit: final", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#discussion_r436054833", "createdAt": "2020-06-05T17:15:29Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/CommonUtils.java", "diffHunk": "@@ -0,0 +1,87 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.utils;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+import android.content.pm.PackageManager;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+\n+public class CommonUtils {\n+\n+    public final static long TIMEOUT = 1000 * 30;\n+\n+    /**\n+     * Launch (open) the supplied package on the device\n+     *\n+     * @param packageName the package name to launch\n+     */\n+    public static void launchApp(final String packageName) {\n+        final Context context = ApplicationProvider.getApplicationContext();\n+        Intent intent = context.getPackageManager().getLaunchIntentForPackage(packageName);  //sets the intent to start your app", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDgxMzM4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-425481338", "createdAt": "2020-06-05T17:16:47Z", "commit": {"oid": "7389d58d9f119a02abf27bbc9a0ae1c7ed8db4ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ee8a60c8e52220756fee1218ad1ca9106227a28", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0ee8a60c8e52220756fee1218ad1ca9106227a28", "committedDate": "2020-06-08T03:34:57Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40b7b237460eccb6be11cfd190415915b8117d43", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/40b7b237460eccb6be11cfd190415915b8117d43", "committedDate": "2020-06-08T16:19:19Z", "message": "Merge branch 'dev' into shahzaibj/ui-automation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "565d2dbcd04a33a4d03e399c05d7adda3a75851c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/565d2dbcd04a33a4d03e399c05d7adda3a75851c", "committedDate": "2020-06-08T17:55:59Z", "message": "Add final to prompt parameter instance variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NTYzMjMz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/911#pullrequestreview-426563233", "createdAt": "2020-06-08T19:41:04Z", "commit": {"oid": "565d2dbcd04a33a4d03e399c05d7adda3a75851c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1640, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}