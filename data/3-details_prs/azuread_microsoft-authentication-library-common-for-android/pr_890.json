{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODkyNjUw", "number": 890, "title": "Send cancel command result if base exception is user cancel exception", "bodyText": "When broker sends broker result to MSAL, then in case of error MSAL adapts it into some type of exception and then the MSAL Broker controller will throw that exception. In case of a User Cancel, that will be the UserCancel exception. In this case, the Command Result returned by MSAL  should be the CANCEL result. Currently, in broker scenarios, we were just returning it an error result even though it should have been a CANCEL result. This PR fixes that scenario.", "createdAt": "2020-04-15T17:27:19Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/890", "merged": true, "mergeCommit": {"oid": "9d1f960e46474484fbad15691173f59607e12d42"}, "closed": true, "closedAt": "2020-04-15T18:21:05Z", "author": {"login": "shahzaibj"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX7c3UAH2gAyNDAzODkyNjUwOmIzZDQ5N2VhNzA5ODc5NjA1YTk1NTkxNDczMGJjOGJhMjA1ZjQ5N2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX79NoAH2gAyNDAzODkyNjUwOjA0MjJlNjlkNTBkNDNlMDNkNGY4ZjZmOGFiZmNhYjZhYTI4YjUxMGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b3d497ea709879605a955914730bc8ba205f497b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b3d497ea709879605a955914730bc8ba205f497b", "committedDate": "2020-04-15T17:22:16Z", "message": "Send cancel command result if base exception is user cancel exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTg2MTYx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/890#pullrequestreview-393986161", "createdAt": "2020-04-15T17:29:37Z", "commit": {"oid": "b3d497ea709879605a955914730bc8ba205f497b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTg4Mjg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/890#pullrequestreview-393988286", "createdAt": "2020-04-15T17:32:27Z", "commit": {"oid": "b3d497ea709879605a955914730bc8ba205f497b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzozMjoyN1rOGGERYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzozMjoyN1rOGGERYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAxNDYyNA==", "bodyText": "Shouldn't this be new CommandResult(CommandResult.ResultStatus.CANCEL, baseException) ?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/890#discussion_r409014624", "createdAt": "2020-04-15T17:32:27Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/CommandDispatcher.java", "diffHunk": "@@ -153,8 +153,12 @@ private static CommandResult executeCommand(BaseCommand command) {\n         }\n \n         if (baseException != null) {\n-            //Post On Error\n-            commandResult = new CommandResult(CommandResult.ResultStatus.ERROR, baseException);\n+            if (baseException instanceof UserCancelException) {\n+                commandResult = new CommandResult(CommandResult.ResultStatus.CANCEL, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3d497ea709879605a955914730bc8ba205f497b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDAzMjY0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/890#pullrequestreview-394003264", "createdAt": "2020-04-15T17:53:04Z", "commit": {"oid": "b3d497ea709879605a955914730bc8ba205f497b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0422e69d50d43e03d4f8f6f8abfcab6aa28b510e", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0422e69d50d43e03d4f8f6f8abfcab6aa28b510e", "committedDate": "2020-04-15T17:57:36Z", "message": "Merge branch 'dev' into shahzaibj/fix-cancel-exception-command-result"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1628, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}