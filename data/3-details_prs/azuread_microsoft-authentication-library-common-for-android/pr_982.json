{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NTMyNTY4", "number": 982, "title": "Add (a lot) more UI test utilities and Test Infrastructure Improvements. See description for complete context!", "bodyText": "This PR includes a lot more utilities and infrastructure setup for UI Automation Tests. The following are added in this PR:\nLAB API\n\nHelper to delete a device via LAB API\nHelper to reset Password, MFA via LAB API\n\nInterfaces describing Test\n\nMove interfaces describing a broker test, lab test to this repo (common) from the broker, msal repos where they were duplicated earlier.\n\nDevice / Settings\n\nA class describing a TestContext i.e Device under Test (manufacturer, model, apiLevel, and its own version of Settings app)\nUtilities to interact with Device Settings in Google devices (optimized for Pixel 2)\nUtilities to interact with Device Settings in Samsung devices (optimized for Galaxy S6)\n\nApps\n\nInterfaces describing a first party app\nInterface describing a browser app\nUtilities to interact with sign in UI in first party apps such as Outlook, Word, Teams\nUtilities to interact with sign in UI in Azure Sample App\nUtilities to interact with browsers such as Edge\n\nBroker\n\nCompany Portal Device Enrollment during UI Test\nHandling of App Protection Policy (setting app pin by using random values)\nBroker Device Registration via the Join Activity (Device Settings screen)\nObtain Device Id from Authenticator App\nEnable Browser Access in Authenticator App\n\nInteraction / Prompt\n\nMore functionality to Prompt Handler Parameters to handle registration page and enrollment page\nHandle prompts for ADFS accounts\n\nPlay Store\n\nImprovements in Play Store utilities to skip straight to market page for app to avoid app search\n\nUI Automator Utilities\n\nMore utilities in UIAutomatorUtils to cover more types of UI elements\n\nADB Shell Utilities\n\nMore utilities in ADBShellUtils such as enable, disable automatic time zone\nAllow force stop a package\n\nRules\n\nRetryTestRule\nDeviceEnrollmentFailureRecoveryRule\nUI Automator Test Rule\nRemoveBrokerBeforeTestRule\nInstallBrokerTestRule\nRemoveFirstPartyAppsRule\nLoadLabUserTestRule\nResetAutomaticTimeZoneTestRule\n\nAnnotations\n\nAdd annotation that can be put on Tests to indicate if they should be retried and how many times\n\nCLI\n\nAccept broker install source from CLI params to dynamically change if broker should be installed from PlayStore or a local APK pushed to the device\n\nThese utilities are being used in the UI Automation Tests written in MSAL and Broker.\nMSAL PR: AzureAD/microsoft-authentication-library-for-android#1110\nBroker PR: AzureAD/ad-accounts-for-android#1338", "createdAt": "2020-07-24T23:47:17Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982", "merged": true, "mergeCommit": {"oid": "38ce6933794ddc7a92a31263ee26819e31349f18"}, "closed": true, "closedAt": "2020-08-09T20:04:09Z", "author": {"login": "shahzaibj"}, "timelineItems": {"totalCount": 73, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctilijgH2gAyNDU2NTMyNTY4OjQyMWMxZWJhNzQ5YTJjMTdjMDNiZTFkOTQxYWU0NTMzODc4NzJmODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8weE7AH2gAyNDU2NTMyNTY4OjQ0MjQyOWNjZGZiZjI3NDBiM2Q1ZDI5OGI5NDI2OGNhYjg2ZTAzODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "421c1eba749a2c17c03be1d941ae453387872f84", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/421c1eba749a2c17c03be1d941ae453387872f84", "committedDate": "2020-06-21T20:50:27Z", "message": "Add utils for CP device registration and enrollment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8681ffb7f19a324a7e4911fb51373e835eb022ea", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8681ffb7f19a324a7e4911fb51373e835eb022ea", "committedDate": "2020-06-26T21:33:32Z", "message": "Merge branch 'dev' into shahzaibj/more-ui-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6234802aa5870ad8ba0f85997017673833141a44", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6234802aa5870ad8ba0f85997017673833141a44", "committedDate": "2020-06-27T00:53:16Z", "message": "Add more utilities for UI Tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48d4f6b6b3c33dfb3eb36382f797ac922876ee76", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/48d4f6b6b3c33dfb3eb36382f797ac922876ee76", "committedDate": "2020-06-29T16:59:19Z", "message": "Add license and comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f0ee44c5f3ad7ac831dd5ebb889b4d1cfae9660", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5f0ee44c5f3ad7ac831dd5ebb889b4d1cfae9660", "committedDate": "2020-06-29T23:29:49Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "315d72e653d884d86a3fee5d4551a8108b3e6672", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/315d72e653d884d86a3fee5d4551a8108b3e6672", "committedDate": "2020-07-06T23:39:35Z", "message": "Add ui test utils for 1p apps as well as Settings screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f3b07beb03a175568f9862b9fb1c288f5e5799", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/f5f3b07beb03a175568f9862b9fb1c288f5e5799", "committedDate": "2020-07-06T23:42:30Z", "message": "Merge branch 'dev' into shahzaibj/more-ui-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4381ba6244eb59690bf94ba865de1e8dc17671", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5e4381ba6244eb59690bf94ba865de1e8dc17671", "committedDate": "2020-07-06T23:47:53Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cf836265c3b5ae1ae07de5ad8a95ed73b3da773", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0cf836265c3b5ae1ae07de5ad8a95ed73b3da773", "committedDate": "2020-07-08T22:38:40Z", "message": "Merge branch 'shahzaibj/more-ui-test-utils' into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2159a165d0625d611f6667a464f05e6760b95e9", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b2159a165d0625d611f6667a464f05e6760b95e9", "committedDate": "2020-07-08T22:38:49Z", "message": "Merge branch 'dev' into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36d1d431231e6f9611b7bb8dce4b5b469f34b6d7", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/36d1d431231e6f9611b7bb8dce4b5b469f34b6d7", "committedDate": "2020-07-13T17:31:13Z", "message": "Add auth ui utilities for 1p apps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43e20289faeccf88a1a0be219728512fe0c6f051", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/43e20289faeccf88a1a0be219728512fe0c6f051", "committedDate": "2020-07-20T18:26:07Z", "message": "Add more ui test utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f012672e0c0ab84c4f7d00caa6eef2b3f17bb87", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4f012672e0c0ab84c4f7d00caa6eef2b3f17bb87", "committedDate": "2020-07-20T20:50:03Z", "message": "Add test rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ae0c296cf938005bf868ba3fd5375ce4d966be", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d1ae0c296cf938005bf868ba3fd5375ce4d966be", "committedDate": "2020-07-22T01:27:20Z", "message": "Add device enrollment failure recovery rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bb6e7c8485ade614bb7c2c7212c35e142b370e3", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/2bb6e7c8485ade614bb7c2c7212c35e142b370e3", "committedDate": "2020-07-22T01:32:29Z", "message": "Rename rules package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f463cdc1e9348b48545079a50df87a13a06fd3d", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6f463cdc1e9348b48545079a50df87a13a06fd3d", "committedDate": "2020-07-22T17:44:00Z", "message": "Accept retry on failure count"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb05c7bce9685245c99ff50f9920f9780634e6c3", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/cb05c7bce9685245c99ff50f9920f9780634e6c3", "committedDate": "2020-07-22T18:57:12Z", "message": "Fix remove account from Settings page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4297100223edb885478e0118fd744e1143ca9d0d", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4297100223edb885478e0118fd744e1143ca9d0d", "committedDate": "2020-07-24T23:40:19Z", "message": "Add device and settings interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31551a6c08e10e1b3f5464a114a19c9ab6b488db", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/31551a6c08e10e1b3f5464a114a19c9ab6b488db", "committedDate": "2020-07-25T19:22:52Z", "message": "Add change date util for samsung devices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebf26c8734145b919e409321f8ce51648d8a1bc9", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ebf26c8734145b919e409321f8ce51648d8a1bc9", "committedDate": "2020-07-25T23:06:27Z", "message": "Add javadoc and comments to code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54f3881c93c3ef00ec5b574426f9df44c37c49e2", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/54f3881c93c3ef00ec5b574426f9df44c37c49e2", "committedDate": "2020-07-25T23:10:47Z", "message": "Add missing licenses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec5795d3d9e591ad3e61995739142c4e26f1eeac", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ec5795d3d9e591ad3e61995739142c4e26f1eeac", "committedDate": "2020-07-25T23:33:07Z", "message": "Add nonnull and final where needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7da8a8f70fe4da03dd9fb626ce0aba912b50a03", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/f7da8a8f70fe4da03dd9fb626ce0aba912b50a03", "committedDate": "2020-07-25T23:41:06Z", "message": "Add more comments and javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/20b7302dbef3684fb3d68ccb73d190c659104da0", "committedDate": "2020-07-26T17:10:31Z", "message": "Configure broker install source via CLI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTg5ODQx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455989841", "createdAt": "2020-07-27T17:29:15Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOToxNlrOG3saoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOToxNlrOG3saoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1MjU3Nw==", "bodyText": "final", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461052577", "createdAt": "2020-07-27T17:29:16Z", "author": {"login": "shahzaibj"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabDeviceHelper.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.DeleteDeviceApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link DeleteDeviceApi}\n+ */\n+public class LabDeviceHelper {\n+\n+    /**\n+     * Deletes the provided device from the directory\n+     *\n+     * @param upn      the upn to whom this device is associated\n+     * @param deviceId the device id of the device to delete\n+     * @return\n+     */\n+    public static boolean deleteDevice(final String upn, final String deviceId) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        DeleteDeviceApi deleteDeviceApi = new DeleteDeviceApi();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTkwMDk3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455990097", "createdAt": "2020-07-27T17:29:36Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOTozNlrOG3sbZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOTozNlrOG3sbZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1Mjc3Mg==", "bodyText": "final", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461052772", "createdAt": "2020-07-27T17:29:36Z", "author": {"login": "shahzaibj"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}\n+ */\n+public class LabResetHelper {\n+\n+    /**\n+     * Reset the password for the supplied account\n+     *\n+     * @param upn the upn of the user for which to reset password\n+     * @return a boolean indicating if password reset was successful\n+     */\n+    public static boolean resetPassword(@NonNull final String upn) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        ResetApi resetApi = new ResetApi();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTkwMjI1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455990225", "createdAt": "2020-07-27T17:29:44Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOTo0NFrOG3sb0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyOTo0NFrOG3sb0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1Mjg4MQ==", "bodyText": "final", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461052881", "createdAt": "2020-07-27T17:29:44Z", "author": {"login": "shahzaibj"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}\n+ */\n+public class LabResetHelper {\n+\n+    /**\n+     * Reset the password for the supplied account\n+     *\n+     * @param upn the upn of the user for which to reset password\n+     * @return a boolean indicating if password reset was successful\n+     */\n+    public static boolean resetPassword(@NonNull final String upn) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        ResetApi resetApi = new ResetApi();\n+\n+        final CustomSuccessResponse customSuccessResponse;\n+\n+        try {\n+            customSuccessResponse = resetApi.putResetInfo(upn, LabConstants.ResetOperation.PASSWORD);\n+            final String expectedResult = (\"Password reset successful for user : \" + upn)\n+                    .toLowerCase();\n+            return customSuccessResponse.getResult().toLowerCase().contains(expectedResult);\n+        } catch (ApiException e) {\n+            throw new RuntimeException(e.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Resets the MFA for the supplied user account\n+     *\n+     * @param upn the upn of the user for which to reset MFA\n+     * @return a boolean indicating if MFA reset was successful\n+     */\n+    public static boolean resetMfa(@NonNull final String upn) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        ResetApi resetApi = new ResetApi();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTkxODA2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455991806", "createdAt": "2020-07-27T17:31:35Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMTozNlrOG3sgUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMTozNlrOG3sgUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NDAzMw==", "bodyText": "this first party app", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461054033", "createdAt": "2020-07-27T17:31:36Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IFirstPartyApp.java", "diffHunk": "@@ -0,0 +1,71 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+\n+/**\n+ * An interface describing a first party application and the actions that can be performed on them.\n+ */\n+public interface IFirstPartyApp {\n+\n+    /**\n+     * Add the first user account to this first party app\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addFirstAccount(@NonNull final String username,\n+                         @NonNull final String password,\n+                         @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * Add another account to this first party app. This must only be called if the an account was\n+     * previously added to this first party app.\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addAnotherAccount(final String username,\n+                           final String password,\n+                           final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * This method can be called handle welcome screens in the first party app that appear on the\n+     * successful addition of an account to that first party app", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTkyMDU0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455992054", "createdAt": "2020-07-27T17:31:56Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMTo1NlrOG3shJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMTo1NlrOG3shJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NDI0NQ==", "bodyText": "are", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461054245", "createdAt": "2020-07-27T17:31:56Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/OutlookApp.java", "diffHunk": "@@ -0,0 +1,116 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Outlook Android app during UI Automated Test\n+ */\n+public class OutlookApp extends App implements IFirstPartyApp {\n+\n+    private static final String OUTLOOK_PACKAGE_NAME = \"com.microsoft.office.outlook\";\n+    private static final String OUTLOOK_APP_NAME = \"Microsoft Outlook\";\n+\n+    public OutlookApp() {\n+        super(OUTLOOK_PACKAGE_NAME, OUTLOOK_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Click start btn\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.outlook:id/btn_splash_start\");\n+\n+        // sign in with supplied username/password\n+        signIn(username, password, promptHandlerParameters);\n+    }\n+\n+    @Override\n+    public void onAccountAdded() {\n+        // Make sure we on add another account (shows up after an account is added)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTkyMzQ1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455992345", "createdAt": "2020-07-27T17:32:19Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMjoxOVrOG3siAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMjoxOVrOG3siAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NDQ2NA==", "bodyText": "extra line", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461054464", "createdAt": "2020-07-27T17:32:19Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/TeamsApp.java", "diffHunk": "@@ -0,0 +1,121 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Teams Android app during UI Automated Test\n+ */\n+public class TeamsApp extends App implements IFirstPartyApp {\n+\n+    private static final String TEAMS_PACKAGE_NAME = \"com.microsoft.teams\";\n+    private static final String TEAMS_APP_NAME = \"Microsoft Teams\";\n+\n+    public TeamsApp() {\n+        super(TEAMS_PACKAGE_NAME, TEAMS_APP_NAME, new PlayStore());\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk0MTEw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455994110", "createdAt": "2020-07-27T17:34:52Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNDo1MlrOG3snmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNDo1MlrOG3snmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NTg5Ng==", "bodyText": "if account", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461055896", "createdAt": "2020-07-27T17:34:52Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/browser/BrowserEdge.java", "diffHunk": "@@ -0,0 +1,155 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.browser;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import static org.junit.Assert.fail;\n+\n+/**\n+ * This class represents the Edge Android app during UI Automated Test\n+ */\n+public class BrowserEdge extends App implements IBrowser {\n+\n+    private static final String EDGE_PACKAGE_NAME = \"com.microsoft.emmx\";\n+    private static final String EDGE_APP_NAME = \"Microsoft Edge\";\n+\n+    public BrowserEdge() {\n+        super(EDGE_PACKAGE_NAME, EDGE_APP_NAME);\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // cancel sync in Edge\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.emmx:id/not_now\");\n+        sleep(); // need to use sleep due to Edge animations\n+        // cancel sharing data\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.emmx:id/not_now\");\n+        sleep(); // need to use sleep due to Edge animations\n+        // cancel personalization\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.emmx:id/fre_share_not_now\");\n+        sleep();// need to use sleep due to Edge animations\n+        // avoid setting default\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.emmx:id/no\");\n+        sleep();// need to use sleep due to Edge animations\n+    }\n+\n+    public void browse(@NonNull final String url) {\n+        //  Click on the search bar in the browser UI\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.emmx:id/search_box_text\");\n+\n+        final UiObject inputField = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                \"com.microsoft.emmx:id/url_bar\"\n+        );\n+\n+        try {\n+            // enter the URL\n+            inputField.setText(url);\n+        } catch (UiObjectNotFoundException e) {\n+            fail(e.getMessage());\n+        }\n+\n+        final UiDevice device =\n+                UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+        // press enter on the Keyboard\n+        device.pressEnter();\n+    }\n+\n+    private void sleep() {\n+        try {\n+            Thread.sleep(3000);\n+        } catch (InterruptedException e) {\n+            Assert.fail(e.getMessage());\n+        }\n+    }\n+\n+    public void signIn(@NonNull final String username,\n+                       @NonNull final String password,\n+                       @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // The Sign In UI in Edge is different depending on account(s) are in TSL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk1MDI2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455995026", "createdAt": "2020-07-27T17:36:14Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNjoxNFrOG3sqsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNjoxNFrOG3sqsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NjY4OQ==", "bodyText": "should fail", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461056689", "createdAt": "2020-07-27T17:36:14Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/installer/PlayStore.java", "diffHunk": "@@ -92,61 +107,51 @@ private void selectGooglePlayAppFromInstallBar() throws UiObjectNotFoundExceptio\n         appInstallBar.click();\n     }\n \n-    private void selectGooglePlayAppFromAppName(@NonNull final String appName) {\n+    private void selectGooglePlayAppFromAppName() {\n         try {\n             selectGooglePlayAppFromInstallBar();\n         } catch (UiObjectNotFoundException e) {\n             try {\n-                selectGooglePlayAppFromAppList(appName);\n+                selectGooglePlayAppFromAppList();\n             } catch (UiObjectNotFoundException ex) {\n-                Assert.fail(ex.getMessage());\n+                ex.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk1NTcz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455995573", "createdAt": "2020-07-27T17:37:05Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNzowNVrOG3ssag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNzowNVrOG3ssag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NzEzMA==", "bodyText": "comments", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461057130", "createdAt": "2020-07-27T17:37:05Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -44,23 +44,37 @@\n     @NonNull\n     private final PromptParameter prompt;\n \n+    // the login hint that was provided\n+    private final String loginHint;\n+\n     // whether session is expected or not (via presence of a cookie)\n     private final boolean sessionExpected;\n \n-    // whether login hint was supplied or not to the interactive request\n-    private final boolean loginHintProvided;\n+    // The broker that should be being used for this request\n+    private final ITestBroker broker;\n+\n+    private final boolean expectingBrokerAccountChooserActivity;\n+\n+    private final boolean expectingProvidedAccountInBroker;\n+\n+    private final boolean expectingLoginPageAccountPicker;\n+\n+    private final boolean expectingProvidedAccountInCookie;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk1NjYz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455995663", "createdAt": "2020-07-27T17:37:13Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNzoxM1rOG3sstQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozNzoxM1rOG3sstQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NzIwNQ==", "bodyText": "comment", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461057205", "createdAt": "2020-07-27T17:37:13Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -44,23 +44,37 @@\n     @NonNull\n     private final PromptParameter prompt;\n \n+    // the login hint that was provided\n+    private final String loginHint;\n+\n     // whether session is expected or not (via presence of a cookie)\n     private final boolean sessionExpected;\n \n-    // whether login hint was supplied or not to the interactive request\n-    private final boolean loginHintProvided;\n+    // The broker that should be being used for this request\n+    private final ITestBroker broker;\n+\n+    private final boolean expectingBrokerAccountChooserActivity;\n+\n+    private final boolean expectingProvidedAccountInBroker;\n+\n+    private final boolean expectingLoginPageAccountPicker;\n+\n+    private final boolean expectingProvidedAccountInCookie;\n \n     // whether we expect to receive consent page or not\n     private final boolean consentPageExpected;\n \n     // whether we expect to receive speed bump or not\n     private final boolean speedBumpExpected;\n \n-    // whether we are expecting at least one account in broker\n-    private final boolean expectingNonZeroAccountsInBroker;\n+    private final boolean registerPageExpected;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk3Mjk5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-455997299", "createdAt": "2020-07-27T17:39:33Z", "commit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozOTozNFrOG3sxrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozOTozNFrOG3sxrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1ODQ3OA==", "bodyText": "This class isn't needed anymore and should be deleted", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461058478", "createdAt": "2020-07-27T17:39:34Z", "author": {"login": "shahzaibj"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/SettingsUtils.java", "diffHunk": "@@ -0,0 +1,253 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.utils;\n+\n+import android.content.ComponentName;\n+import android.content.Context;\n+import android.content.Intent;\n+import android.provider.Settings;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+\n+import org.junit.Assert;\n+\n+import java.util.Calendar;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+import static com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils.obtainUiObjectWithExactText;\n+\n+/**\n+ * This class contains utilities to interact with device Settings during a UI TEST\n+ */\n+public class SettingsUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20b7302dbef3684fb3d68ccb73d190c659104da0"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f18aa85be4b7cc8f3cf5e957a042dc4c10d864ec", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/f18aa85be4b7cc8f3cf5e957a042dc4c10d864ec", "committedDate": "2020-07-27T17:50:45Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca3e2ce288baa752dad049040ada13142cacc5b0", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ca3e2ce288baa752dad049040ada13142cacc5b0", "committedDate": "2020-07-27T17:50:59Z", "message": "Delete SettingsUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/249ab28af1e7e67ad64fc250b7378bc65b921f02", "committedDate": "2020-07-27T18:15:19Z", "message": "Merge branch 'dev' into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MDk3OTE5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456097919", "createdAt": "2020-07-27T20:08:58Z", "commit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "state": "COMMENTED", "comments": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMDowODo1OVrOG3xvWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToxNDo0N1rOG3z1tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEzOTgwMg==", "bodyText": "punctuation for first line of Javadoc.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461139802", "createdAt": "2020-07-27T20:08:59Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabDeviceHelper.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.DeleteDeviceApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link DeleteDeviceApi}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEzOTkyMQ==", "bodyText": "punctuation for first line of javadoc.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461139921", "createdAt": "2020-07-27T20:09:13Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabDeviceHelper.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.DeleteDeviceApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link DeleteDeviceApi}\n+ */\n+public class LabDeviceHelper {\n+\n+    /**\n+     * Deletes the provided device from the directory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MDAxOQ==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461140019", "createdAt": "2020-07-27T20:09:26Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MDA4Mg==", "bodyText": "punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461140082", "createdAt": "2020-07-27T20:09:33Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}\n+ */\n+public class LabResetHelper {\n+\n+    /**\n+     * Reset the password for the supplied account", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTgzNw==", "bodyText": "From: https://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javadoc.html#comments\nFirst sentence - The first sentence of each doc comment should be a summary sentence, containing a concise but complete description of the declared entity. This sentence ends at the first period that is followed by a blank, tab, or line terminator, or at the first block tag. The Javadoc tool copies this first sentence to the member summary at the top of the HTML page.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461141837", "createdAt": "2020-07-27T20:13:00Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabDeviceHelper.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.DeleteDeviceApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link DeleteDeviceApi}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEzOTgwMg=="}, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTk2MQ==", "bodyText": "Punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461141961", "createdAt": "2020-07-27T20:13:16Z", "author": {"login": "AdamBJohnsonx"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}\n+ */\n+public class LabResetHelper {\n+\n+    /**\n+     * Reset the password for the supplied account\n+     *\n+     * @param upn the upn of the user for which to reset password\n+     * @return a boolean indicating if password reset was successful\n+     */\n+    public static boolean resetPassword(@NonNull final String upn) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        final ResetApi resetApi = new ResetApi();\n+\n+        final CustomSuccessResponse customSuccessResponse;\n+\n+        try {\n+            customSuccessResponse = resetApi.putResetInfo(upn, LabConstants.ResetOperation.PASSWORD);\n+            final String expectedResult = (\"Password reset successful for user : \" + upn)\n+                    .toLowerCase();\n+            return customSuccessResponse.getResult().toLowerCase().contains(expectedResult);\n+        } catch (ApiException e) {\n+            throw new RuntimeException(e.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Resets the MFA for the supplied user account", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MjcxOA==", "bodyText": "punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461142718", "createdAt": "2020-07-27T20:14:50Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/IBrokerTest.java", "diffHunk": "@@ -0,0 +1,34 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+\n+/**\n+ * An interface describing a test that can leverage a {@link ITestBroker} installed on the device", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0Mjk0Mw==", "bodyText": "punctuation.  What does implementing this interface do?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461142943", "createdAt": "2020-07-27T20:15:14Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/ILabTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation;\n+\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+/**\n+ * An interface describing a test that can leverage the Lab Api to fetch accounts", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NTE2MA==", "bodyText": "This non-final protected member variable should have documentation describing what it does.  How would one decide when to set it to false?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461145160", "createdAt": "2020-07-27T20:19:33Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/App.java", "diffHunk": "@@ -45,13 +45,15 @@\n     @Setter\n     private IAppInstaller appInstaller;\n \n-    private String packageName;\n+    private final String packageName;\n \n     @Setter\n     private String appName;\n \n     protected String localApkFileName = null;\n \n+    protected boolean shouldHandleFirstRun = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NjQ4Nw==", "bodyText": "nit: silly naming comment, but this name reads like it is the app.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461146487", "createdAt": "2020-07-27T20:21:53Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class models the Azure Sample App for MSAL Android.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java\n+ */\n+public class AzureSampleApp extends App {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NzA0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Sing out of the Azure Sample App. Please note that this method performs sign out of the\n          \n          \n            \n                 * Sign out of the Azure Sample App. Please note that this method performs sign out of the", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461147048", "createdAt": "2020-07-27T20:22:56Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class models the Azure Sample App for MSAL Android.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";\n+\n+    public AzureSampleApp() {\n+        super(AZURE_SAMPLE_PACKAGE_NAME, AZURE_SAMPLE_APP_NAME, new LocalApkInstaller());\n+        localApkFileName = AZURE_SAMPLE_APK;\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    /**\n+     * Sign in into the Azure Sample App. Please note that this method performs sign in into the\n+     * Single Account Mode Fragment in the Sample App.\n+     *\n+     * @param username                    the username of the account to sign in\n+     * @param password                    the password of the account to sign in\n+     * @param browser                     the browser that is expected to be used during sign in flow\n+     * @param shouldHandleBrowserFirstRun whether this is the first time the browser being run\n+     * @param promptHandlerParameters     the prompt handler parameters indicating how to handle prompt\n+     */\n+    public void signIn(@NonNull final String username,\n+                       @NonNull final String password,\n+                       @Nullable final IBrowser browser,\n+                       final boolean shouldHandleBrowserFirstRun,\n+                       @NonNull final MicrosoftStsPromptHandlerParameters promptHandlerParameters) {\n+        // Click Sign In in Single Account Fragment\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_signIn\");\n+\n+        if (promptHandlerParameters.getBroker() == null && browser != null && shouldHandleBrowserFirstRun) {\n+            // handle browser first run as applicable\n+            ((IApp) browser).handleFirstRun();\n+        }\n+\n+        // handle prompt in AAD login page\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler =\n+                new MicrosoftStsPromptHandler(promptHandlerParameters);\n+\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    /**\n+     * Sing out of the Azure Sample App. Please note that this method performs sign out of the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NzE2OQ==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461147169", "createdAt": "2020-07-27T20:23:12Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class models the Azure Sample App for MSAL Android.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";\n+\n+    public AzureSampleApp() {\n+        super(AZURE_SAMPLE_PACKAGE_NAME, AZURE_SAMPLE_APP_NAME, new LocalApkInstaller());\n+        localApkFileName = AZURE_SAMPLE_APK;\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    /**\n+     * Sign in into the Azure Sample App. Please note that this method performs sign in into the\n+     * Single Account Mode Fragment in the Sample App.\n+     *\n+     * @param username                    the username of the account to sign in\n+     * @param password                    the password of the account to sign in\n+     * @param browser                     the browser that is expected to be used during sign in flow\n+     * @param shouldHandleBrowserFirstRun whether this is the first time the browser being run\n+     * @param promptHandlerParameters     the prompt handler parameters indicating how to handle prompt\n+     */\n+    public void signIn(@NonNull final String username,\n+                       @NonNull final String password,\n+                       @Nullable final IBrowser browser,\n+                       final boolean shouldHandleBrowserFirstRun,\n+                       @NonNull final MicrosoftStsPromptHandlerParameters promptHandlerParameters) {\n+        // Click Sign In in Single Account Fragment\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_signIn\");\n+\n+        if (promptHandlerParameters.getBroker() == null && browser != null && shouldHandleBrowserFirstRun) {\n+            // handle browser first run as applicable\n+            ((IApp) browser).handleFirstRun();\n+        }\n+\n+        // handle prompt in AAD login page\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler =\n+                new MicrosoftStsPromptHandler(promptHandlerParameters);\n+\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    /**\n+     * Sing out of the Azure Sample App. Please note that this method performs sign out of the\n+     * Single Account mode fragment in the Azure Sample App.\n+     */\n+    public void signOut() {\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_removeAccount\");\n+    }\n+\n+    /**\n+     * Makes sure that the provided username is already signed into the Azure Sample App", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NzU2OA==", "bodyText": "punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461147568", "createdAt": "2020-07-27T20:24:00Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IApp.java", "diffHunk": "@@ -66,4 +66,16 @@\n      * @param permission the permission that should be granted\n      */\n     void grantPermission(String permission);\n+\n+    /**\n+     * Force stops (closes, shuts down) this application", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0NzYyMA==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461147620", "createdAt": "2020-07-27T20:24:05Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IApp.java", "diffHunk": "@@ -66,4 +66,16 @@\n      * @param permission the permission that should be granted\n      */\n     void grantPermission(String permission);\n+\n+    /**\n+     * Force stops (closes, shuts down) this application\n+     */\n+    void forceStop();\n+\n+    /**\n+     * Determines if this application (package) is installed on the device", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0Nzg4OQ==", "bodyText": "What's the relationship between this interface and App.class?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461147889", "createdAt": "2020-07-27T20:24:33Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IFirstPartyApp.java", "diffHunk": "@@ -0,0 +1,71 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+\n+/**\n+ * An interface describing a first party application and the actions that can be performed on them.\n+ */\n+public interface IFirstPartyApp {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0ODMxMg==", "bodyText": "Do we need two distinct methods here?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461148312", "createdAt": "2020-07-27T20:25:18Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IFirstPartyApp.java", "diffHunk": "@@ -0,0 +1,71 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+\n+/**\n+ * An interface describing a first party application and the actions that can be performed on them.\n+ */\n+public interface IFirstPartyApp {\n+\n+    /**\n+     * Add the first user account to this first party app\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addFirstAccount(@NonNull final String username,\n+                         @NonNull final String password,\n+                         @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * Add another account to this first party app. This must only be called if the an account was\n+     * previously added to this first party app.\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addAnotherAccount(final String username,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0ODYwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Add another account to this first party app. This must only be called if the an account was\n          \n          \n            \n                 * Add another account to this first party app. This must only be called if an account was", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461148603", "createdAt": "2020-07-27T20:25:55Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IFirstPartyApp.java", "diffHunk": "@@ -0,0 +1,71 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+\n+/**\n+ * An interface describing a first party application and the actions that can be performed on them.\n+ */\n+public interface IFirstPartyApp {\n+\n+    /**\n+     * Add the first user account to this first party app\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addFirstAccount(@NonNull final String username,\n+                         @NonNull final String password,\n+                         @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * Add another account to this first party app. This must only be called if the an account was", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0ODgwOA==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461148808", "createdAt": "2020-07-27T20:26:21Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/IFirstPartyApp.java", "diffHunk": "@@ -0,0 +1,71 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+\n+/**\n+ * An interface describing a first party application and the actions that can be performed on them.\n+ */\n+public interface IFirstPartyApp {\n+\n+    /**\n+     * Add the first user account to this first party app\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addFirstAccount(@NonNull final String username,\n+                         @NonNull final String password,\n+                         @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * Add another account to this first party app. This must only be called if the an account was\n+     * previously added to this first party app.\n+     *\n+     * @param username                the username of the account to add\n+     * @param password                the password of the account to add\n+     * @param promptHandlerParameters the prompt handler parameters indicating how to handle prompt\n+     */\n+    void addAnotherAccount(final String username,\n+                           final String password,\n+                           final FirstPartyAppPromptHandlerParameters promptHandlerParameters);\n+\n+    /**\n+     * This method can be called to handle the welcome screens in the first party app that appear on", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0ODkzMg==", "bodyText": "punctuation.  Maybe model for interacting with the instead of this class.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461148932", "createdAt": "2020-07-27T20:26:32Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/OutlookApp.java", "diffHunk": "@@ -0,0 +1,116 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Outlook Android app during UI Automated Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0OTk1NA==", "bodyText": "punctuation. see above comment regarding what the class is doing.  \"A representation of the Teams Android app that can be interacted with by UI automation.\" perhaps.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461149954", "createdAt": "2020-07-27T20:28:22Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/TeamsApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Teams Android app during UI Automated Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE1NjMwNA==", "bodyText": "final", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461156304", "createdAt": "2020-07-27T20:40:26Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import android.widget.Button;\n+import android.widget.EditText;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Word Android app during UI Automated Test\n+ */\n+public class WordApp extends App implements IFirstPartyApp {\n+\n+    public static final String WORD_PACKAGE_NAME = \"com.microsoft.office.word\";\n+    public static final String WORD_APP_NAME = \"Microsoft Word\";\n+\n+    public WordApp() {\n+        super(WORD_PACKAGE_NAME, WORD_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        CommonUtils.grantPackagePermission(); // grant permission to access storage\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Enter email\n+        UiAutomatorUtils.handleInput(\"com.microsoft.office.word:id/OfcEditText\", username);\n+        // Click continue\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/OfcActionButton2\");\n+        // handle prompt\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler = new MicrosoftStsPromptHandler(promptHandlerParameters);\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    @Override\n+    public void addAnotherAccount(@NonNull final String username,\n+                                  @NonNull final String password,\n+                                  @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Click account drawer\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_me_image\");\n+        // Click add account\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_account_list_add_account\");\n+        // sing in with supplied username/password\n+        signIn(username, password, promptHandlerParameters);\n+    }\n+\n+    @Override\n+    public void onAccountAdded() {\n+        throw new UnsupportedOperationException(\"Not implemented\");\n+    }\n+\n+    private void signIn(@NonNull final String username,\n+                        @NonNull final String password,\n+                        @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        try {\n+            // Word has very interesting sing in UI. They show a custom WebView to accept email\n+            // No resource id available on anything :(\n+            final UiObject emailField = UiAutomatorUtils.obtainUiObjectWithTextAndClassType(\n+                    \"\", EditText.class\n+            );\n+\n+            emailField.setText(username);\n+\n+            final UiObject nextBtn = UiAutomatorUtils.obtainUiObjectWithTextAndClassType(\n+                    \"Next\", Button.class\n+            );\n+\n+            nextBtn.click();\n+        } catch (UiObjectNotFoundException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 104}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE1NjQwMQ==", "bodyText": "punctuation, phrase as a statement of being instead of a reference \"A representation of\" instead of \"This class is...\".", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461156401", "createdAt": "2020-07-27T20:40:36Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import android.widget.Button;\n+import android.widget.EditText;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Word Android app during UI Automated Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE1ODE2Mg==", "bodyText": "Javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461158162", "createdAt": "2020-07-27T20:43:50Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/AbstractTestBroker.java", "diffHunk": "@@ -0,0 +1,126 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.text.TextUtils;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.BuildConfig;\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+public abstract class AbstractTestBroker extends App implements ITestBroker {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE1OTE2OA==", "bodyText": "Hm.  Is this really what we want to do?  It seems fragile.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461159168", "createdAt": "2020-07-27T20:45:44Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import android.widget.Button;\n+import android.widget.EditText;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class represents the Word Android app during UI Automated Test\n+ */\n+public class WordApp extends App implements IFirstPartyApp {\n+\n+    public static final String WORD_PACKAGE_NAME = \"com.microsoft.office.word\";\n+    public static final String WORD_APP_NAME = \"Microsoft Word\";\n+\n+    public WordApp() {\n+        super(WORD_PACKAGE_NAME, WORD_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        CommonUtils.grantPackagePermission(); // grant permission to access storage\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Enter email\n+        UiAutomatorUtils.handleInput(\"com.microsoft.office.word:id/OfcEditText\", username);\n+        // Click continue\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/OfcActionButton2\");\n+        // handle prompt\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler = new MicrosoftStsPromptHandler(promptHandlerParameters);\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    @Override\n+    public void addAnotherAccount(@NonNull final String username,\n+                                  @NonNull final String password,\n+                                  @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Click account drawer\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_me_image\");\n+        // Click add account\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_account_list_add_account\");\n+        // sing in with supplied username/password\n+        signIn(username, password, promptHandlerParameters);\n+    }\n+\n+    @Override\n+    public void onAccountAdded() {\n+        throw new UnsupportedOperationException(\"Not implemented\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE1OTc2Ng==", "bodyText": "interesting that this didn't fall into a UiAutomatorUtils method,", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461159766", "createdAt": "2020-07-27T20:46:52Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/AbstractTestBroker.java", "diffHunk": "@@ -0,0 +1,126 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.text.TextUtils;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.BuildConfig;\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+public abstract class AbstractTestBroker extends App implements ITestBroker {\n+\n+    public AbstractTestBroker(@NonNull final String packageName,\n+                              @NonNull final String appName) {\n+        super(packageName, appName, BuildConfig.INSTALL_SOURCE_LOCAL_APK\n+                .equalsIgnoreCase(BuildConfig.BROKER_INSTALL_SOURCE)\n+                ? new LocalApkInstaller() : new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleAccountPicker(@Nullable final String username) {\n+        final UiDevice device = UiDevice.getInstance(getInstrumentation());\n+\n+        // find the object associated to this username in account picker.\n+        // if the username is not provided, then click on the \"Use another account\" option\n+        final UiObject accountSelected = device.findObject(new UiSelector().resourceId(\n+                getResourceId(getPackageName(), \"account_chooser_listView\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2MTYwOQ==", "bodyText": "Javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461161609", "createdAt": "2020-07-27T20:50:27Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -23,28 +23,40 @@\n package com.microsoft.identity.client.ui.automation.broker;\n \n import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.platform.app.InstrumentationRegistry;\n import androidx.test.uiautomator.UiDevice;\n import androidx.test.uiautomator.UiObject;\n import androidx.test.uiautomator.UiObjectNotFoundException;\n import androidx.test.uiautomator.UiSelector;\n \n-import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.TestContext;\n+import com.microsoft.identity.client.ui.automation.device.settings.ISettings;\n+import com.microsoft.identity.client.ui.automation.device.settings.SamsungSettings;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n \n import org.junit.Assert;\n \n+import java.util.Random;\n+\n import lombok.Getter;\n \n-import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n-import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+import static org.junit.Assert.fail;\n \n @Getter\n-public class BrokerCompanyPortal extends App implements ITestBroker {\n+public class BrokerCompanyPortal extends AbstractTestBroker implements ITestBroker, IMdmAgent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2MTgxOA==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461161818", "createdAt": "2020-07-27T20:50:53Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/UiAutomatorUtils.java", "diffHunk": "@@ -184,4 +250,41 @@ private static void closeKeyboardIfNeeded() {\n             uiDevice.pressBack();\n         }\n     }\n+\n+    /**\n+     * Obtain an instance of the UiObject for the given text\n+     *\n+     * @param text the text of the element to obtain\n+     * @return the UiObject associated to the supplied text\n+     */\n+    public static UiObject obtainUiObjectWithExactText(@NonNull final String text) {\n+        final UiDevice device =\n+                UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+        final UiObject uiObject = device.findObject(new UiSelector()\n+                .text(text));\n+\n+        uiObject.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n+        return uiObject;\n+    }\n+\n+    /**\n+     * Obtain an instance of the UiObject for the given class and index", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 155}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2MTk0NA==", "bodyText": "punctuation", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461161944", "createdAt": "2020-07-27T20:51:06Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/UiAutomatorUtils.java", "diffHunk": "@@ -184,4 +250,41 @@ private static void closeKeyboardIfNeeded() {\n             uiDevice.pressBack();\n         }\n     }\n+\n+    /**\n+     * Obtain an instance of the UiObject for the given text\n+     *\n+     * @param text the text of the element to obtain\n+     * @return the UiObject associated to the supplied text\n+     */\n+    public static UiObject obtainUiObjectWithExactText(@NonNull final String text) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2MjIyNg==", "bodyText": "punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461162226", "createdAt": "2020-07-27T20:51:41Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/UiAutomatorUtils.java", "diffHunk": "@@ -104,6 +124,52 @@ public static UiObject obtainUiObjectWithTextAndClassType(@NonNull final String\n     public static UiObject obtainChildInScrollable(@NonNull final String scrollableResourceId,\n                                                    @NonNull final String childText) {\n         final UiSelector scrollSelector = new UiSelector().resourceId(scrollableResourceId);\n+        return obtainChildInScrollable(childText, scrollSelector);\n+    }\n+\n+    /**\n+     * Obtain a child element inside a scrollable view by specifying class and text\n+     *\n+     * @param clazz     the class of the parent scroll view\n+     * @param childText the text on the child view\n+     * @return the UiObject associated to the desired child element\n+     */\n+    public static UiObject obtainChildInScrollable(@NonNull final Class clazz,\n+                                                   @NonNull final String childText) {\n+        final UiSelector scrollSelector = new UiSelector().className(clazz);\n+        return obtainChildInScrollable(childText, scrollSelector);\n+    }\n+\n+    private static UiObject obtainChildInScrollable(@NonNull final String childText,\n+                                                    @NonNull final UiSelector scrollSelector) {\n+        final UiScrollable recyclerView = new UiScrollable(scrollSelector);\n+\n+        final UiSelector childSelector = new UiSelector()\n+                .textContains(childText);\n+\n+        try {\n+            final UiObject child = recyclerView.getChildByText(\n+                    childSelector,\n+                    childText\n+            );\n+\n+            child.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n+            return child;\n+        } catch (UiObjectNotFoundException e) {\n+            fail(e.getMessage());\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Obtain a child element inside a scrollable view by specifying text", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2MjMwOQ==", "bodyText": "Punctuation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461162309", "createdAt": "2020-07-27T20:51:49Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/utils/UiAutomatorUtils.java", "diffHunk": "@@ -104,6 +124,52 @@ public static UiObject obtainUiObjectWithTextAndClassType(@NonNull final String\n     public static UiObject obtainChildInScrollable(@NonNull final String scrollableResourceId,\n                                                    @NonNull final String childText) {\n         final UiSelector scrollSelector = new UiSelector().resourceId(scrollableResourceId);\n+        return obtainChildInScrollable(childText, scrollSelector);\n+    }\n+\n+    /**\n+     * Obtain a child element inside a scrollable view by specifying class and text", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2NTYyMQ==", "bodyText": "Why would we want this to be nullable?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461165621", "createdAt": "2020-07-27T20:58:08Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/rules/InstallBrokerTestRule.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.rules;\n+\n+import androidx.annotation.Nullable;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+\n+import org.junit.rules.TestRule;\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+/**\n+ * A Test Rule to install the provided broker on the device prior to executing the test case\n+ */\n+public class InstallBrokerTestRule implements TestRule {\n+\n+    private final ITestBroker broker;\n+\n+    public InstallBrokerTestRule(@Nullable ITestBroker broker) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2Njk4Nw==", "bodyText": "The location of these comments is strange.  These are all private and final.  Do these single-line comments feed some javadoc generation via Lombok?  I thought that was required to be javadoc to start with.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461166987", "createdAt": "2020-07-27T21:00:35Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/PromptHandlerParameters.java", "diffHunk": "@@ -44,23 +44,43 @@\n     @NonNull\n     private final PromptParameter prompt;\n \n+    // the login hint that was provided\n+    private final String loginHint;\n+\n     // whether session is expected or not (via presence of a cookie)\n     private final boolean sessionExpected;\n \n-    // whether login hint was supplied or not to the interactive request\n-    private final boolean loginHintProvided;\n+    // The broker that should be being used for this request\n+    private final ITestBroker broker;\n+\n+    // whether we expected the broker account chooser activity to appear", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NDE5Nw==", "bodyText": "Assert messages are more helpful if they give some context.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461174197", "createdAt": "2020-07-27T21:14:47Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * This class models the Azure Sample App for MSAL Android.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";\n+\n+    public AzureSampleApp() {\n+        super(AZURE_SAMPLE_PACKAGE_NAME, AZURE_SAMPLE_APP_NAME, new LocalApkInstaller());\n+        localApkFileName = AZURE_SAMPLE_APK;\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    /**\n+     * Sign in into the Azure Sample App. Please note that this method performs sign in into the\n+     * Single Account Mode Fragment in the Sample App.\n+     *\n+     * @param username                    the username of the account to sign in\n+     * @param password                    the password of the account to sign in\n+     * @param browser                     the browser that is expected to be used during sign in flow\n+     * @param shouldHandleBrowserFirstRun whether this is the first time the browser being run\n+     * @param promptHandlerParameters     the prompt handler parameters indicating how to handle prompt\n+     */\n+    public void signIn(@NonNull final String username,\n+                       @NonNull final String password,\n+                       @Nullable final IBrowser browser,\n+                       final boolean shouldHandleBrowserFirstRun,\n+                       @NonNull final MicrosoftStsPromptHandlerParameters promptHandlerParameters) {\n+        // Click Sign In in Single Account Fragment\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_signIn\");\n+\n+        if (promptHandlerParameters.getBroker() == null && browser != null && shouldHandleBrowserFirstRun) {\n+            // handle browser first run as applicable\n+            ((IApp) browser).handleFirstRun();\n+        }\n+\n+        // handle prompt in AAD login page\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler =\n+                new MicrosoftStsPromptHandler(promptHandlerParameters);\n+\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    /**\n+     * Sing out of the Azure Sample App. Please note that this method performs sign out of the\n+     * Single Account mode fragment in the Azure Sample App.\n+     */\n+    public void signOut() {\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_removeAccount\");\n+    }\n+\n+    /**\n+     * Makes sure that the provided username is already signed into the Azure Sample App\n+     *\n+     * @param username the username of the account for which to confirm sign in\n+     */\n+    public void confirmSignedIn(@NonNull final String username) {\n+        final UiObject signedInUser = UiAutomatorUtils.obtainUiObjectWithResourceId(\"com.azuresamples.msalandroidapp:id/current_user\");\n+        try {\n+            Assert.assertEquals(signedInUser.getText(), username);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "249ab28af1e7e67ad64fc250b7378bc65b921f02"}, "originalPosition": 105}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f0dff2ef9a56e6711deccfb22b120d7d374f433", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/3f0dff2ef9a56e6711deccfb22b120d7d374f433", "committedDate": "2020-07-28T03:40:58Z", "message": "Add periods to javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "803e6b1f2b530ea2288e5fadd8c41b4fbd26a909", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/803e6b1f2b530ea2288e5fadd8c41b4fbd26a909", "committedDate": "2020-07-28T16:21:13Z", "message": "Address comment\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "230b04a3880580158ac8e2263aa2375322d3ec4f", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/230b04a3880580158ac8e2263aa2375322d3ec4f", "committedDate": "2020-07-28T16:21:49Z", "message": "Address comment\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42b4b5e2b285daef3669105298961b937807cd05", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/42b4b5e2b285daef3669105298961b937807cd05", "committedDate": "2020-07-28T17:03:17Z", "message": "Add javadoc for shouldHandleFirstRun"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eb510bcf596aaa3d8266591b8ab21977e7107c8", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5eb510bcf596aaa3d8266591b8ab21977e7107c8", "committedDate": "2020-07-28T17:03:30Z", "message": "Improve javadoc for ILabTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aaffce2b818f122958646fb4cd3bfc186163d81", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7aaffce2b818f122958646fb4cd3bfc186163d81", "committedDate": "2020-07-28T17:03:38Z", "message": "Merge branch 'shahzaibj/extensive-test-utils' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d35df23b1e7a0bb1e85485573ed1ae0c832f6d16", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d35df23b1e7a0bb1e85485573ed1ae0c832f6d16", "committedDate": "2020-07-28T17:04:55Z", "message": "Add relationship between first party app and app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50f411f2c5adcc56a6e8a4d9aaabc62d69d46c8b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/50f411f2c5adcc56a6e8a4d9aaabc62d69d46c8b", "committedDate": "2020-07-28T17:14:35Z", "message": "Incorporate javadoc suggestions for Apps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68b31111f392450c6a2dc147f066a88d0063842c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/68b31111f392450c6a2dc147f066a88d0063842c", "committedDate": "2020-07-28T17:30:35Z", "message": "Add final to exception catch blocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/107ff17583dfa6f49c238d37ed82a98b27f8a50b", "committedDate": "2020-07-28T17:33:13Z", "message": "Add relationship between browser and app"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2ODU5NTY4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456859568", "createdAt": "2020-07-28T17:35:40Z", "commit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzozNTo0MFrOG4XSSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzozNTo0MFrOG4XSSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1NDk1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // Word has very interesting sing in UI. They show a custom WebView to accept email\n          \n          \n            \n                        // Word has very interesting sign in UI. They show a custom WebView to accept email", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461754952", "createdAt": "2020-07-28T17:35:40Z", "author": {"login": "AdamBJohnsonx"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import android.widget.Button;\n+import android.widget.EditText;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Word Android App during UI Test.\n+ */\n+public class WordApp extends App implements IFirstPartyApp {\n+\n+    public static final String WORD_PACKAGE_NAME = \"com.microsoft.office.word\";\n+    public static final String WORD_APP_NAME = \"Microsoft Word\";\n+\n+    public WordApp() {\n+        super(WORD_PACKAGE_NAME, WORD_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        CommonUtils.grantPackagePermission(); // grant permission to access storage\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Enter email\n+        UiAutomatorUtils.handleInput(\"com.microsoft.office.word:id/OfcEditText\", username);\n+        // Click continue\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/OfcActionButton2\");\n+        // handle prompt\n+        final MicrosoftStsPromptHandler microsoftStsPromptHandler = new MicrosoftStsPromptHandler(promptHandlerParameters);\n+        microsoftStsPromptHandler.handlePrompt(username, password);\n+    }\n+\n+    @Override\n+    public void addAnotherAccount(@NonNull final String username,\n+                                  @NonNull final String password,\n+                                  @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Click account drawer\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_me_image\");\n+        // Click add account\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.word:id/docsui_account_list_add_account\");\n+        // sing in with supplied username/password\n+        signIn(username, password, promptHandlerParameters);\n+    }\n+\n+    @Override\n+    public void onAccountAdded() {\n+        throw new UnsupportedOperationException(\"Not implemented\");\n+    }\n+\n+    private void signIn(@NonNull final String username,\n+                        @NonNull final String password,\n+                        @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        try {\n+            // Word has very interesting sing in UI. They show a custom WebView to accept email", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 91}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af3b64ecd658def0bbcc093253a6c7e1da1ae46f", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/af3b64ecd658def0bbcc093253a6c7e1da1ae46f", "committedDate": "2020-07-28T17:59:14Z", "message": "Update uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4c56bdf37f3cd2c749d209cbe98494ee752535ad", "committedDate": "2020-07-28T18:24:46Z", "message": "Merge branch 'dev' into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b210f1b6280abec3158cf68a5e5b5b583819a46d", "committedDate": "2020-07-28T19:20:39Z", "message": "Make broker rule non-null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2ODU5MTAz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456859103", "createdAt": "2020-07-28T17:35:01Z", "commit": {"oid": "68b31111f392450c6a2dc147f066a88d0063842c"}, "state": "COMMENTED", "comments": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzozNTowMVrOG4XQrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTowMzoxMFrOG4aZEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1NDU0Mw==", "bodyText": "how would this work with userless WPJ?\nI assume that UPN here is being used to find a matching tenant? (UPN is not a required field for device registration. For those account without it, the owner would be displayed as \"none\" in the portal, and I can still look up the device with only deviceID and delete the device manually).", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461754543", "createdAt": "2020-07-28T17:35:01Z", "author": {"login": "rpdome"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabDeviceHelper.java", "diffHunk": "@@ -0,0 +1,56 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.DeleteDeviceApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link DeleteDeviceApi}.\n+ */\n+public class LabDeviceHelper {\n+\n+    /**\n+     * Deletes the provided device from the directory.\n+     *\n+     * @param upn      the upn to whom this device is associated\n+     * @param deviceId the device id of the device to delete\n+     * @return a boolean indicating if the device has been deleted successfully\n+     */\n+    public static boolean deleteDevice(final String upn, final String deviceId) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        final DeleteDeviceApi deleteDeviceApi = new DeleteDeviceApi();\n+\n+        final CustomSuccessResponse customSuccessResponse;\n+        try {\n+            customSuccessResponse = deleteDeviceApi.delete(upn, deviceId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68b31111f392450c6a2dc147f066a88d0063842c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc2MDAyMQ==", "bodyText": "nit: we could put this in try{} block. Here and in the function below.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461760021", "createdAt": "2020-07-28T17:44:12Z", "author": {"login": "rpdome"}, "path": "testutils/src/main/java/com/microsoft/identity/internal/testutils/labutils/LabResetHelper.java", "diffHunk": "@@ -0,0 +1,80 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.internal.testutils.labutils;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.internal.test.labapi.ApiException;\n+import com.microsoft.identity.internal.test.labapi.api.ResetApi;\n+import com.microsoft.identity.internal.test.labapi.model.CustomSuccessResponse;\n+\n+/**\n+ * Utilities to interact with Lab {@link ResetApi}.\n+ */\n+public class LabResetHelper {\n+\n+    /**\n+     * Reset the password for the supplied account.\n+     *\n+     * @param upn the upn of the user for which to reset password\n+     * @return a boolean indicating if password reset was successful\n+     */\n+    public static boolean resetPassword(@NonNull final String upn) {\n+        LabAuthenticationHelper.getInstance().setupApiClientWithAccessToken();\n+        final ResetApi resetApi = new ResetApi();\n+\n+        final CustomSuccessResponse customSuccessResponse;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc2NzE4Mw==", "bodyText": "I think it would help to make a clear line between AAD Device (WPJ) and the device that the test is being run on. Could you please rename the variables/classes/method/etc or update comments to reflect that?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461767183", "createdAt": "2020-07-28T17:55:38Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/TestContext.java", "diffHunk": "@@ -0,0 +1,74 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation;\n+\n+import android.content.Context;\n+import android.os.Build;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+\n+import com.microsoft.identity.client.ui.automation.device.Device;\n+\n+import lombok.Getter;\n+import lombok.NonNull;\n+\n+/**\n+ * A class describing the context under which the test is being executed. This includes things like\n+ * details about the device on which the test is being run.\n+ */\n+@Getter\n+public class TestContext {\n+\n+    private final Device device;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc3MTU1MA==", "bodyText": "Suggestion: Is it possible to add version support? (i.e. if we're making changes in broker protocol, it would be great if we can test it with MSAL with the new protocol, and the one with the old protocol, making sure that things work as expected).\n(doesn't have to be this PR, just something to be considered).", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461771550", "createdAt": "2020-07-28T18:02:48Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Azure Sample App for MSAL Android during UI Test.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java.\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc3NTk4NA==", "bodyText": "nit: signInWithSingleAccountFragment?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461775984", "createdAt": "2020-07-28T18:10:42Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Azure Sample App for MSAL Android during UI Test.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java.\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";\n+\n+    public AzureSampleApp() {\n+        super(AZURE_SAMPLE_PACKAGE_NAME, AZURE_SAMPLE_APP_NAME, new LocalApkInstaller());\n+        localApkFileName = AZURE_SAMPLE_APK;\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    /**\n+     * Sign in into the Azure Sample App. Please note that this method performs sign in into the\n+     * Single Account Mode Fragment in the Sample App.\n+     *\n+     * @param username                    the username of the account to sign in\n+     * @param password                    the password of the account to sign in\n+     * @param browser                     the browser that is expected to be used during sign in flow\n+     * @param shouldHandleBrowserFirstRun whether this is the first time the browser being run\n+     * @param promptHandlerParameters     the prompt handler parameters indicating how to handle prompt\n+     */\n+    public void signIn(@NonNull final String username,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc3NjU2Ng==", "bodyText": "what does this actually do in this flow?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461776566", "createdAt": "2020-07-28T18:11:46Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/AzureSampleApp.java", "diffHunk": "@@ -0,0 +1,110 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Azure Sample App for MSAL Android during UI Test.\n+ * This refers to app stored in Azure-Samples/ms-identity-android-java repository.\n+ * See this: https://github.com/Azure-Samples/ms-identity-android-java.\n+ */\n+public class AzureSampleApp extends App {\n+\n+    private static final String AZURE_SAMPLE_PACKAGE_NAME = \"com.azuresamples.msalandroidapp\";\n+    private static final String AZURE_SAMPLE_APP_NAME = \"Azure Sample\";\n+    public final static String AZURE_SAMPLE_APK = \"AzureSample.apk\";\n+\n+    public AzureSampleApp() {\n+        super(AZURE_SAMPLE_PACKAGE_NAME, AZURE_SAMPLE_APP_NAME, new LocalApkInstaller());\n+        localApkFileName = AZURE_SAMPLE_APK;\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    /**\n+     * Sign in into the Azure Sample App. Please note that this method performs sign in into the\n+     * Single Account Mode Fragment in the Sample App.\n+     *\n+     * @param username                    the username of the account to sign in\n+     * @param password                    the password of the account to sign in\n+     * @param browser                     the browser that is expected to be used during sign in flow\n+     * @param shouldHandleBrowserFirstRun whether this is the first time the browser being run\n+     * @param promptHandlerParameters     the prompt handler parameters indicating how to handle prompt\n+     */\n+    public void signIn(@NonNull final String username,\n+                       @NonNull final String password,\n+                       @Nullable final IBrowser browser,\n+                       final boolean shouldHandleBrowserFirstRun,\n+                       @NonNull final MicrosoftStsPromptHandlerParameters promptHandlerParameters) {\n+        // Click Sign In in Single Account Fragment\n+        UiAutomatorUtils.handleButtonClick(\"com.azuresamples.msalandroidapp:id/btn_signIn\");\n+\n+        if (promptHandlerParameters.getBroker() == null && browser != null && shouldHandleBrowserFirstRun) {\n+            // handle browser first run as applicable\n+            ((IApp) browser).handleFirstRun();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4MjczOA==", "bodyText": "nit: This is technically first run, right?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461782738", "createdAt": "2020-07-28T18:22:37Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/OutlookApp.java", "diffHunk": "@@ -0,0 +1,116 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Outlook Android App during UI Test.\n+ */\n+public class OutlookApp extends App implements IFirstPartyApp {\n+\n+    private static final String OUTLOOK_PACKAGE_NAME = \"com.microsoft.office.outlook\";\n+    private static final String OUTLOOK_APP_NAME = \"Microsoft Outlook\";\n+\n+    public OutlookApp() {\n+        super(OUTLOOK_PACKAGE_NAME, OUTLOOK_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        // nothing required\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Click start btn\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.office.outlook:id/btn_splash_start\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107ff17583dfa6f49c238d37ed82a98b27f8a50b"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4OTA1Nw==", "bodyText": "Not related to this PR:\nThis makes me wonder if there's a clear signal if the test breaks because Word, etc decide to change its UI?\nUse case: Word shipped a new UI in the middle of our hot fix release. With a clear sign (ideally without having to go through the error logs), we would know that we could run the test with Word manually, and update this class later.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461789057", "createdAt": "2020-07-28T18:33:25Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/app/WordApp.java", "diffHunk": "@@ -0,0 +1,120 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.app;\n+\n+import android.widget.Button;\n+import android.widget.EditText;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.FirstPartyAppPromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.MicrosoftStsPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+/**\n+ * A model for interacting with the Word Android App during UI Test.\n+ */\n+public class WordApp extends App implements IFirstPartyApp {\n+\n+    public static final String WORD_PACKAGE_NAME = \"com.microsoft.office.word\";\n+    public static final String WORD_APP_NAME = \"Microsoft Word\";\n+\n+    public WordApp() {\n+        super(WORD_PACKAGE_NAME, WORD_APP_NAME, new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleFirstRun() {\n+        CommonUtils.grantPackagePermission(); // grant permission to access storage\n+    }\n+\n+    @Override\n+    public void addFirstAccount(@NonNull final String username,\n+                                @NonNull final String password,\n+                                @NonNull final FirstPartyAppPromptHandlerParameters promptHandlerParameters) {\n+        // Enter email\n+        UiAutomatorUtils.handleInput(\"com.microsoft.office.word:id/OfcEditText\", username);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5MzIyOA==", "bodyText": "We're going to make changes to this UI soon (to support device less PRT). How would one debug this class/function with a local UI change?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461793228", "createdAt": "2020-07-28T18:40:48Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/AbstractTestBroker.java", "diffHunk": "@@ -0,0 +1,129 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import android.text.TextUtils;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.BuildConfig;\n+import com.microsoft.identity.client.ui.automation.app.App;\n+import com.microsoft.identity.client.ui.automation.installer.LocalApkInstaller;\n+import com.microsoft.identity.client.ui.automation.installer.PlayStore;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.CommonUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.getResourceId;\n+\n+/**\n+ * A model for interacting with a Broker App during UI Test.\n+ */\n+public abstract class AbstractTestBroker extends App implements ITestBroker {\n+\n+    public AbstractTestBroker(@NonNull final String packageName,\n+                              @NonNull final String appName) {\n+        super(packageName, appName, BuildConfig.INSTALL_SOURCE_LOCAL_APK\n+                .equalsIgnoreCase(BuildConfig.BROKER_INSTALL_SOURCE)\n+                ? new LocalApkInstaller() : new PlayStore());\n+    }\n+\n+    @Override\n+    public void handleAccountPicker(@Nullable final String username) {\n+        final UiDevice device = UiDevice.getInstance(getInstrumentation());\n+\n+        // find the object associated to this username in account picker.\n+        // if the username is not provided, then click on the \"Use another account\" option\n+        final UiObject accountSelected = device.findObject(new UiSelector().resourceId(\n+                getResourceId(getPackageName(), \"account_chooser_listView\")\n+        ).childSelector(new UiSelector().textContains(\n+                // This String is pulled from\n+                // R.string.broker_account_chooser_choose_another_account\n+                TextUtils.isEmpty(username) ? \"Use another account\" : username\n+        )));\n+\n+        try {\n+            accountSelected.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n+            accountSelected.click();\n+        } catch (final UiObjectNotFoundException e) {\n+            Assert.fail(e.getMessage());\n+        }\n+    }\n+\n+    @Override\n+    public void performJoinViaJoinActivity(@NonNull final String username,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5NDM5MA==", "bodyText": "Would it be possible to clear all registered device first prior to running this test?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461794390", "createdAt": "2020-07-28T18:43:03Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -53,40 +68,225 @@ public BrokerCompanyPortal() {\n     @Override\n     public void performDeviceRegistration(@NonNull final String username,\n                                           @NonNull final String password) {\n-        //TODO implement device registration for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        enrollDevice(username, password); // enrolling device also performs device registration\n     }\n \n     @Override\n     public void performSharedDeviceRegistration(@NonNull final String username,\n                                                 @NonNull final String password) {\n         //TODO implement shared device registration for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        throw new UnsupportedOperationException(\"Not supported!\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String obtainDeviceId() {\n+        throw new UnsupportedOperationException(\"Not supported!\");\n+    }\n+\n+    @Override\n+    public void enableBrowserAccess() {\n+        throw new UnsupportedOperationException(\"Not implemented\");\n     }\n \n     @Override\n     public void handleFirstRun() {\n-        //TODO handle first run for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        // nothing needed here\n     }\n \n     @Override\n-    public void handleAccountPicker(@NonNull final String username) {\n-        final UiDevice device = UiDevice.getInstance(getInstrumentation());\n+    public void enrollDevice(@NonNull final String username,\n+                             @NonNull final String password) {\n+        launch(); // launch CP app\n+\n+        handleFirstRun(); // handle CP first run\n+\n+        // click Sign In button on CP welcome page\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/sign_in_button\");\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .prompt(PromptParameter.LOGIN)\n+                .consentPageExpected(false)\n+                .expectingLoginPageAccountPicker(false)\n+                .sessionExpected(false)\n+                .loginHint(null)\n+                .build();\n+\n+        final AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+\n+        // handle AAD login page\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        // click the activate device admin btn\n+        final UiObject accessSetupScreen = UiAutomatorUtils.obtainUiObjectWithText(\"Access Setup\");\n+        Assert.assertTrue(accessSetupScreen.exists());\n+\n+        // click on BEGIN button to start enroll\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/setup_positive_button\");\n+\n+        // click CONTINUE to ack privacy page\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/ContinueButton\");\n+\n+        // click NEXT to ack Android system permissions requirements\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/bullet_list_page_forward_button\");\n+\n+        // grant permission\n+        CommonUtils.grantPackagePermission();\n+\n+        // Activate CP as admin\n+        TestContext.getTestContext().getDevice().getSettings().activateAdmin();\n+\n+        final ISettings deviceSettings = TestContext.getTestContext().getDevice().getSettings();\n+\n+        // if on a Samsung device, also need to handle enrollment in Knox\n+        if (deviceSettings instanceof SamsungSettings) {\n+            ((SamsungSettings) deviceSettings).enrollInKnox();\n+        }\n+\n+        // make sure we are on the page to complete setup\n+        final UiObject setupCompletePage = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                \"com.microsoft.windowsintune.companyportal:id/setup_title\"\n+        );\n+\n+        if (!setupCompletePage.exists()) {\n+            // Something went wrong with enrollment. If we see a device limit reached dialog, then\n+            // we throw a DeviceLimitReachedException so that we the DeviceEnrollmentRecoveryRule\n+            // can perform cleanup and recovery for future enrollments.\n+            final UiObject deviceLimitReachedDialog = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                    \"com.microsoft.windowsintune.companyportal:id/alertTitle\"\n+            );\n+\n+            if (deviceLimitReachedDialog.exists()) {\n+                throw new DeviceLimitReachedException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwMDI0Mw==", "bodyText": "This is a WPJ error, right?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461800243", "createdAt": "2020-07-28T18:53:25Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/DeviceLimitReachedException.java", "diffHunk": "@@ -0,0 +1,49 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.broker;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * This exception indicates device enrollment failure in Company Portal due to the device limit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwMTIxMw==", "bodyText": "nit: Suggest renaming to TestDevice (to prevent a confusion with \"WPJ Device\").", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461801213", "createdAt": "2020-07-28T18:54:59Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/Device.java", "diffHunk": "@@ -0,0 +1,73 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.device;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.client.ui.automation.device.settings.GoogleSettings;\n+import com.microsoft.identity.client.ui.automation.device.settings.ISettings;\n+import com.microsoft.identity.client.ui.automation.device.settings.SamsungSettings;\n+\n+import lombok.Getter;\n+\n+/**\n+ * This class represents a device under test during UI Automation.\n+ */\n+@Getter\n+public class Device {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwMjI4OA==", "bodyText": "would this UI be different for each OS version?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461802288", "createdAt": "2020-07-28T18:56:52Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/GoogleSettings.java", "diffHunk": "@@ -0,0 +1,205 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.device.settings;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+import androidx.test.uiautomator.UiSelector;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+import com.microsoft.identity.client.ui.automation.utils.AdbShellUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import java.util.Calendar;\n+\n+import static com.microsoft.identity.client.ui.automation.utils.CommonUtils.FIND_UI_ELEMENT_TIMEOUT;\n+import static com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils.obtainUiObjectWithExactText;\n+\n+public class GoogleSettings extends BaseSettings {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwMjU4MQ==", "bodyText": "Would this UI be different for each (Knox?) version?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461802581", "createdAt": "2020-07-28T18:57:24Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/SamsungSettings.java", "diffHunk": "@@ -0,0 +1,186 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.device.settings;\n+\n+import android.view.View;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+import com.microsoft.identity.client.ui.automation.utils.AdbShellUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import java.util.Calendar;\n+\n+public class SamsungSettings extends BaseSettings {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwNTg0MQ==", "bodyText": "Would this be different for each Play Store app version?\nFYI, for every comment like this, I'm not asking you to implement/support all possible version, but it would really be great to have a clear signal that tells something like.... \"Google Play Store changes their UX in page A. We're trying to do B but now we can't.\" without having to debug, or dig through logs.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461805841", "createdAt": "2020-07-28T19:03:10Z", "author": {"login": "rpdome"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/installer/PlayStore.java", "diffHunk": "@@ -66,18 +79,20 @@ private void searchAppOnGooglePlay(@NonNull final String hint) {\n         try {\n             searchTextField.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n             searchTextField.setText(hint);\n-        } catch (UiObjectNotFoundException e) {\n+        } catch (final UiObjectNotFoundException e) {\n             Assert.fail(e.getMessage());\n         }\n \n         device.pressEnter();\n     }\n \n-    private void selectGooglePlayAppFromAppList(@NonNull final String appName) throws UiObjectNotFoundException {\n+    private void selectGooglePlayAppFromAppList() throws UiObjectNotFoundException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c56bdf37f3cd2c749d209cbe98494ee752535ad"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTM5Njc4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456939678", "createdAt": "2020-07-28T19:26:12Z", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOToyNjoxMlrOG4bMoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOToyNjoxMlrOG4bMoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgxOTA0MA==", "bodyText": "Question: If these elements can't be found (due to app update, for example), do these fail in a way that's easy to understand/correct?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461819040", "createdAt": "2020-07-28T19:26:12Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/broker/BrokerCompanyPortal.java", "diffHunk": "@@ -53,40 +68,225 @@ public BrokerCompanyPortal() {\n     @Override\n     public void performDeviceRegistration(@NonNull final String username,\n                                           @NonNull final String password) {\n-        //TODO implement device registration for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        enrollDevice(username, password); // enrolling device also performs device registration\n     }\n \n     @Override\n     public void performSharedDeviceRegistration(@NonNull final String username,\n                                                 @NonNull final String password) {\n         //TODO implement shared device registration for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        throw new UnsupportedOperationException(\"Not supported!\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String obtainDeviceId() {\n+        throw new UnsupportedOperationException(\"Not supported!\");\n+    }\n+\n+    @Override\n+    public void enableBrowserAccess() {\n+        throw new UnsupportedOperationException(\"Not implemented\");\n     }\n \n     @Override\n     public void handleFirstRun() {\n-        //TODO handle first run for CP\n-        throw new UnsupportedOperationException(\"Unimplemented!\");\n+        // nothing needed here\n     }\n \n     @Override\n-    public void handleAccountPicker(@NonNull final String username) {\n-        final UiDevice device = UiDevice.getInstance(getInstrumentation());\n+    public void enrollDevice(@NonNull final String username,\n+                             @NonNull final String password) {\n+        launch(); // launch CP app\n+\n+        handleFirstRun(); // handle CP first run\n+\n+        // click Sign In button on CP welcome page\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/sign_in_button\");\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .prompt(PromptParameter.LOGIN)\n+                .consentPageExpected(false)\n+                .expectingLoginPageAccountPicker(false)\n+                .sessionExpected(false)\n+                .loginHint(null)\n+                .build();\n+\n+        final AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+\n+        // handle AAD login page\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        // click the activate device admin btn\n+        final UiObject accessSetupScreen = UiAutomatorUtils.obtainUiObjectWithText(\"Access Setup\");\n+        Assert.assertTrue(accessSetupScreen.exists());\n+\n+        // click on BEGIN button to start enroll\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/setup_positive_button\");\n+\n+        // click CONTINUE to ack privacy page\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/ContinueButton\");\n+\n+        // click NEXT to ack Android system permissions requirements\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/bullet_list_page_forward_button\");\n+\n+        // grant permission\n+        CommonUtils.grantPackagePermission();\n+\n+        // Activate CP as admin\n+        TestContext.getTestContext().getDevice().getSettings().activateAdmin();\n+\n+        final ISettings deviceSettings = TestContext.getTestContext().getDevice().getSettings();\n+\n+        // if on a Samsung device, also need to handle enrollment in Knox\n+        if (deviceSettings instanceof SamsungSettings) {\n+            ((SamsungSettings) deviceSettings).enrollInKnox();\n+        }\n+\n+        // make sure we are on the page to complete setup\n+        final UiObject setupCompletePage = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                \"com.microsoft.windowsintune.companyportal:id/setup_title\"\n+        );\n+\n+        if (!setupCompletePage.exists()) {\n+            // Something went wrong with enrollment. If we see a device limit reached dialog, then\n+            // we throw a DeviceLimitReachedException so that we the DeviceEnrollmentRecoveryRule\n+            // can perform cleanup and recovery for future enrollments.\n+            final UiObject deviceLimitReachedDialog = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                    \"com.microsoft.windowsintune.companyportal:id/alertTitle\"\n+            );\n+\n+            if (deviceLimitReachedDialog.exists()) {\n+                throw new DeviceLimitReachedException(\n+                        \"Unable to complete enrollment as device limit reached for this account.\",\n+                        this\n+                );\n+            } else {\n+                // We don't see device limit issue, but the enrollment still failed due to reasons\n+                // that aren't immediately known\n+                Assert.fail(\"Unable to complete enrollment due to unknown reason\");\n+            }\n+        }\n+\n+        // click on DONE to complete setup\n+        UiAutomatorUtils.handleButtonClick(\n+                \"com.microsoft.windowsintune.companyportal:id/setup_center_button\"\n+        );\n+\n+        // Enrollment has been performed successfully\n+        enrollmentPerformedSuccessfully = true;\n+    }\n+\n+    @Override\n+    public void handleAppProtectionPolicy() {\n+        final UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+        // get access screen\n+        final UiObject getAccessScreen = UiAutomatorUtils.obtainUiObjectWithText(\"Get Access\");\n+        Assert.assertTrue(getAccessScreen.exists());\n+\n+        // get access screen - continue\n+        UiAutomatorUtils.handleButtonClick(\"com.microsoft.windowsintune.companyportal:id/positive_button\");\n \n-        // find the object associated to this username in account picker\n-        final UiObject accountSelected = device.findObject(new UiSelector().resourceId(\n-                getResourceId(COMPANY_PORTAL_APP_PACKAGE_NAME, \"account_chooser_listView\")\n-        ).childSelector(new UiSelector().textContains(\n-                username\n-        )));\n+        // handle PIN\n+        final Random random = new Random();\n+        final int randomPin = random.nextInt(10000);\n+\n+        final UiObject pinField = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                \"com.microsoft.windowsintune.companyportal:id/pin_entry_passcodeEditView\"\n+        );\n \n         try {\n-            accountSelected.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n-            accountSelected.click();\n-        } catch (UiObjectNotFoundException e) {\n+            pinField.setText(String.valueOf(randomPin));\n+        } catch (final UiObjectNotFoundException e) {\n+            fail(e.getMessage());\n+        }\n+\n+        device.pressEnter();\n+\n+        // confirm PIN\n+\n+        final UiObject pinConfirmField = UiAutomatorUtils.obtainUiObjectWithResourceId(\n+                \"com.microsoft.windowsintune.companyportal:id/pin_entry_passcodeEditView\"\n+        );\n+\n+        try {\n+            pinConfirmField.setText(String.valueOf(randomPin));\n+        } catch (final UiObjectNotFoundException e) {\n+            fail(e.getMessage());\n+        }\n+\n+        device.pressEnter();\n+    }\n+\n+    private void openDevicesTab() {\n+        // launch CP\n+        launch();\n+\n+        try {\n+            final UiDevice device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+            // Click Devices Tab\n+            final UiObject devicesTab = device.findObject(new UiSelector().description(\n+                    \"Devices, Tab, 2 of 3\"\n+            ).clickable(true));\n+\n+            devicesTab.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n+\n+            devicesTab.click();\n+        } catch (final UiObjectNotFoundException e) {\n             Assert.fail(e.getMessage());\n         }\n     }\n \n+    /**\n+     * Removes a device from Company Portal (from the devices listed in CP Devices Tab)\n+     */\n+    public void removeDevice() {\n+        // if enrollment failed, then Devices Tab is automatically opened for us\n+        if (enrollmentPerformedSuccessfully) {\n+            openDevicesTab();\n+        }\n+\n+        try {\n+            final UiDevice uiDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\n+\n+            // If Enrollment failed, then the first device on the list is in corrupted state and\n+            // cannot even be removed, we need to remove the second one in the list\n+            final UiObject deviceToRemove = uiDevice.findObject(new UiSelector()\n+                    .resourceId(\"com.microsoft.windowsintune.companyportal:id/device_list_item\")\n+                    .index(enrollmentPerformedSuccessfully ? 0 : 1)\n+            );\n+\n+            deviceToRemove.waitForExists(FIND_UI_ELEMENT_TIMEOUT);\n+\n+            // click on the device to be removed\n+            deviceToRemove.click();\n+\n+            // Click more options in the top right\n+            final UiObject threeDots = uiDevice.findObject(new UiSelector().descriptionContains(\n+                    \"More options\"\n+            ));\n+\n+            threeDots.waitForExists(FIND_UI_ELEMENT_TIMEOUT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "originalPosition": 268}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQxNDgx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456941481", "createdAt": "2020-07-28T19:28:51Z", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOToyODo1MlrOG4bSRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOToyODo1MlrOG4bSRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgyMDQ4NQ==", "bodyText": "Suggestion: navigateTo() (browse() wasn't very to me)", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461820485", "createdAt": "2020-07-28T19:28:52Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/browser/IBrowser.java", "diffHunk": "@@ -0,0 +1,39 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.browser;\n+\n+import com.microsoft.identity.client.ui.automation.app.IApp;\n+\n+/**\n+ * An interface describing a browser app on an Android device during UI Automated test.\n+ */\n+public interface IBrowser extends IApp {\n+\n+    /**\n+     * Browse to the supplied url using this browser.\n+     *\n+     * @param url the url to open\n+     */\n+    void browse(String url);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQyNzAx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456942701", "createdAt": "2020-07-28T19:30:35Z", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTozMDozNVrOG4bWSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTozMDozNVrOG4bWSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgyMTUxMg==", "bodyText": "Opportunity to have an AdminNames object or constant?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461821512", "createdAt": "2020-07-28T19:30:35Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/device/settings/SamsungSettings.java", "diffHunk": "@@ -0,0 +1,186 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.device.settings;\n+\n+import android.view.View;\n+\n+import androidx.annotation.NonNull;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.ui.automation.broker.ITestBroker;\n+import com.microsoft.identity.client.ui.automation.utils.AdbShellUtils;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+\n+import org.junit.Assert;\n+\n+import java.util.Calendar;\n+\n+public class SamsungSettings extends BaseSettings {\n+\n+    @Override\n+    public void disableAdmin(@NonNull final String adminName) {\n+        launchDeviceAdminSettingsPage();\n+\n+        try {\n+            // scroll down the recycler view to find the list item for this admin\n+            final UiObject adminAppListItem = UiAutomatorUtils.obtainChildInScrollable(\n+                    \"android:id/list\",\n+                    adminName\n+            );\n+\n+            // Click into this admin\n+            assert adminAppListItem != null;\n+            adminAppListItem.click();\n+\n+            // Click Deactivate button\n+            UiAutomatorUtils.handleButtonClick(\"com.android.settings:id/action_button\");\n+\n+            if (\"Company Portal\".equalsIgnoreCase(adminName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQzNzUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456943753", "createdAt": "2020-07-28T19:32:06Z", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTozMjowNlrOG4bZOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTozMjowNlrOG4bZOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgyMjI2Ng==", "bodyText": "Nit javadoc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#discussion_r461822266", "createdAt": "2020-07-28T19:32:06Z", "author": {"login": "iambmelt"}, "path": "uiautomationutilities/src/main/java/com/microsoft/identity/client/ui/automation/interaction/microsoftsts/MicrosoftStsPromptHandlerParameters.java", "diffHunk": "@@ -0,0 +1,35 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.ui.automation.interaction.microsoftsts;\n+\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+\n+import lombok.Getter;\n+import lombok.experimental.SuperBuilder;\n+\n+@SuperBuilder\n+@Getter\n+public class MicrosoftStsPromptHandlerParameters extends PromptHandlerParameters {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQ0NTcx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-456944571", "createdAt": "2020-07-28T19:33:17Z", "commit": {"oid": "b210f1b6280abec3158cf68a5e5b5b583819a46d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8a2bc9270bdad42df26a271e840cf66efd628e1", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c8a2bc9270bdad42df26a271e840cf66efd628e1", "committedDate": "2020-07-28T20:39:09Z", "message": "Fix javadoc for prompt handler parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64f9f6cbe37f80ed682ddac59b1be50b8175390f", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/64f9f6cbe37f80ed682ddac59b1be50b8175390f", "committedDate": "2020-07-28T20:44:28Z", "message": "Rename Device to TestDevice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDE2MTU1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/982#pullrequestreview-457016155", "createdAt": "2020-07-28T21:11:30Z", "commit": {"oid": "c8a2bc9270bdad42df26a271e840cf66efd628e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4553db202e268d085dcf879544fe1a602fa6db01", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4553db202e268d085dcf879544fe1a602fa6db01", "committedDate": "2020-07-28T21:14:19Z", "message": "Address try catch block comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef5fb5be33eda091cdcd7349ec26cd9f5ce7ce65", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ef5fb5be33eda091cdcd7349ec26cd9f5ce7ce65", "committedDate": "2020-07-28T21:18:35Z", "message": "Address comment about azure sample app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "232253803f674235f06e02268737bac1a2eb0c0c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/232253803f674235f06e02268737bac1a2eb0c0c", "committedDate": "2020-07-28T21:52:35Z", "message": "Address comment about javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "172b12c97b3ea1654257c7f96a20ffb06447a529", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/172b12c97b3ea1654257c7f96a20ffb06447a529", "committedDate": "2020-07-28T21:53:39Z", "message": "Address comment about method name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "087aa79b92bf86d15b01ac0623aa3c4b316507e7", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/087aa79b92bf86d15b01ac0623aa3c4b316507e7", "committedDate": "2020-07-28T22:05:30Z", "message": "Add enum for device admin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89481c18cedd45882877423586406b171d9f171e", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/89481c18cedd45882877423586406b171d9f171e", "committedDate": "2020-08-05T21:21:00Z", "message": "Return from word on account added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc2327a1a52a0a5f04bbebb1255df4a30772a90", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/bbc2327a1a52a0a5f04bbebb1255df4a30772a90", "committedDate": "2020-08-05T21:28:40Z", "message": "Add javadoc for settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e1482a21ae79d4aff08fd5c003370cbbe68a9f", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/37e1482a21ae79d4aff08fd5c003370cbbe68a9f", "committedDate": "2020-08-06T02:58:10Z", "message": "Add assert messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "717c12b97a5883d4b9744dbdfe8de118e212e19c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/717c12b97a5883d4b9744dbdfe8de118e212e19c", "committedDate": "2020-08-06T02:59:29Z", "message": "Merge branch 'dev' into shahzaibj/extensive-test-utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "055e35cb5cb1b315e70efdc23e9c09a39fd3c017", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/055e35cb5cb1b315e70efdc23e9c09a39fd3c017", "committedDate": "2020-08-08T03:16:48Z", "message": "Rename method to change device time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "442429ccdfbf2740b3d5d298b94268cab86e0382", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/442429ccdfbf2740b3d5d298b94268cab86e0382", "committedDate": "2020-08-08T03:29:50Z", "message": "Merge branch 'dev' into shahzaibj/extensive-test-utils"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1504, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}