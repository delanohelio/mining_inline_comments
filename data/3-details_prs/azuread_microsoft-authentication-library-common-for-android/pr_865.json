{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMzY4MzA0", "number": 865, "title": "Detect MDM link", "bodyText": "Server will attach a query string (ismdmurl=1) along with the browser link to tell us that this link belongs to Intune (MDM) flow.\nWebView will detect that query string and return AuthenticationConstants.UIResponse.BROWSER_CODE_MDM (instead of BROWSER_CODE_CANCEL)", "createdAt": "2020-03-20T06:09:14Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865", "merged": true, "mergeCommit": {"oid": "b455553048e5a5f5f97f74aeb685bfd494cfed98"}, "closed": true, "closedAt": "2020-03-24T00:43:36Z", "author": {"login": "rpdome"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPaJSEgH2gAyMzkxMzY4MzA0OmU3M2E4ZjdlODU2NzE2NTVkZDg3MGExNDk3NTA1ZmM1NTFiYjA3Mjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQncSeAFqTM3OTkxNTc4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e73a8f7e85671655dd870a1497505fc551bb0729", "committedDate": "2020-03-20T06:02:37Z", "message": "Detect MDM link"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTIzMDMz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378523033", "createdAt": "2020-03-20T14:19:31Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxOTozMVrOF5Vm9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoxOTozMVrOF5Vm9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY2NzE5MA==", "bodyText": "Looks we already had the constant defined using the forward link instead of the query string and were using it to launch CP. So server change was not a must but good to have.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395667190", "createdAt": "2020-03-20T14:19:31Z", "author": {"login": "Om83"}, "path": "common/src/main/java/com/microsoft/identity/common/adal/internal/AuthenticationConstants.java", "diffHunk": "@@ -1016,14 +1021,14 @@ private AuthenticationConstants() {\n         public static final String BROWSER_EXT_INSTALL_PREFIX = \"msauth://\";\n \n         /**\n-         * Prefix in the redirect to open external browser to finish the CA auth.\n+         * A query param indicating that this is an intune device CA link.\n          */\n-        public static final String BROWSER_DEVICE_CA_URL = \"browser://go.microsoft.com/fwlink/?LinkId=396941\";\n+        public static final String BROWSER_DEVICE_CA_URL_QUERY_STRING_PARAMETER = \"&ismdmurl=1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTI1OTM0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378525934", "createdAt": "2020-03-20T14:22:51Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoyMjo1MVrOF5Vvng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoyMjo1MVrOF5Vvng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY2OTQwNg==", "bodyText": "Why are we passing the same parameter twice?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395669406", "createdAt": "2020-03-20T14:22:51Z", "author": {"login": "Om83"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectoryAuthorizationResultFactory.java", "diffHunk": "@@ -103,11 +103,21 @@ public AzureActiveDirectoryAuthorizationResult createAuthorizationResult(final i\n                 break;\n \n             case AuthenticationConstants.UIResponse.BROWSER_CODE_DEVICE_REGISTER:\n-                Logger.verbose(TAG, \"Device needs to have broker installed, we expect the apps to call us\"\n-                        + \"back when the broker is installed\");\n+                Logger.info(TAG, \"Device Registration needed, need to start WPJ\");\n                 result = createAuthorizationResultWithErrorResponse(AuthorizationStatus.FAIL,\n-                        MicrosoftAuthorizationErrorResponse.AUTHORIZATION_FAILED,\n-                        MicrosoftAuthorizationErrorResponse.BROKER_NEEDS_TO_BE_INSTALLED);\n+                        MicrosoftAuthorizationErrorResponse.DEVICE_REGISTRATION_NEEDED,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTMyNjQx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378532641", "createdAt": "2020-03-20T14:30:25Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozMDoyNVrOF5WDyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozMDoyNVrOF5WDyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3NDU2OA==", "bodyText": "Same here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395674568", "createdAt": "2020-03-20T14:30:25Z", "author": {"login": "Om83"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectoryAuthorizationResultFactory.java", "diffHunk": "@@ -103,11 +103,21 @@ public AzureActiveDirectoryAuthorizationResult createAuthorizationResult(final i\n                 break;\n \n             case AuthenticationConstants.UIResponse.BROWSER_CODE_DEVICE_REGISTER:\n-                Logger.verbose(TAG, \"Device needs to have broker installed, we expect the apps to call us\"\n-                        + \"back when the broker is installed\");\n+                Logger.info(TAG, \"Device Registration needed, need to start WPJ\");\n                 result = createAuthorizationResultWithErrorResponse(AuthorizationStatus.FAIL,\n-                        MicrosoftAuthorizationErrorResponse.AUTHORIZATION_FAILED,\n-                        MicrosoftAuthorizationErrorResponse.BROKER_NEEDS_TO_BE_INSTALLED);\n+                        MicrosoftAuthorizationErrorResponse.DEVICE_REGISTRATION_NEEDED,\n+                        MicrosoftAuthorizationErrorResponse.DEVICE_REGISTRATION_NEEDED);\n+                // Set username returned from the service\n+                result.getAuthorizationErrorResponse().setUserName(data.getStringExtra(\n+                        AuthenticationConstants.Broker.INSTALL_UPN_KEY)\n+                );\n+                break;\n+\n+            case AuthenticationConstants.UIResponse.BROWSER_CODE_MDM:\n+                Logger.info(TAG, \"MDM required. Launching Intune MDM link on browser.\");\n+                result = createAuthorizationResultWithErrorResponse(AuthorizationStatus.FAIL,\n+                        MicrosoftAuthorizationErrorResponse.DEVICE_NEEDS_TO_BE_MANAGED,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTMyODQw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378532840", "createdAt": "2020-03-20T14:30:37Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozMDozN1rOF5WEXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozMDozN1rOF5WEXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3NDcxOQ==", "bodyText": "And here", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395674719", "createdAt": "2020-03-20T14:30:37Z", "author": {"login": "Om83"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/microsoftsts/MicrosoftStsAuthorizationResultFactory.java", "diffHunk": "@@ -123,7 +123,12 @@ public MicrosoftStsAuthorizationResult createAuthorizationResult(final int resul\n                         );\n                 break;\n \n-\n+            case AuthenticationConstants.UIResponse.BROWSER_CODE_MDM:\n+                Logger.info(TAG, \"MDM required. Launching Intune MDM link on browser.\");\n+                result = createAuthorizationResultWithErrorResponse(AuthorizationStatus.FAIL,\n+                        MicrosoftAuthorizationErrorResponse.DEVICE_NEEDS_TO_BE_MANAGED,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTM2MDY1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378536065", "createdAt": "2020-03-20T14:34:20Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozNDoyMFrOF5WOHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozNDoyMFrOF5WOHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3NzIxMw==", "bodyText": "Why do we need this. Shouldn't the server already be rejecting it?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395677213", "createdAt": "2020-03-20T14:34:20Z", "author": {"login": "Om83"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -214,35 +214,40 @@ protected boolean processRedirectUrl(@NonNull final WebView view, @NonNull final\n \n     private boolean processWebsiteRequest(@NonNull final WebView view, @NonNull final String url) {\n         final String methodName = \"#processWebsiteRequest\";\n-        final PackageHelper packageHelper = new PackageHelper(getActivity().getPackageManager());\n-        final Context applicationContext = getActivity().getApplicationContext();\n-        if (url.startsWith(AuthenticationConstants.Broker.BROWSER_DEVICE_CA_URL)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME)\n-                && AuthenticationConstants.Broker.IPPHONE_APP_SIGNATURE.equals(\n-                packageHelper.getCurrentSignatureForPackage(AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME))) {\n-            // TODO: This flow should really check if the Microsoft Intune or the Company Portal apps are installed,\n-            // which is the correct client app to launch depending on the enrollment, and launch that app, to permanently skip the browser.\n-            // Also it must handle 3rd party MDMs as appropriate, which will depend on the browser flow determining the authority.\n-            Logger.info(TAG + methodName, \"It is a device CA request on IPPhone. Company Portal is installed.\");\n-            try {\n-                Logger.verbose(TAG + methodName, \"Sending intent to launch the CompanyPortal.\");\n-                final Intent intent = new Intent();\n-                intent.setComponent(new ComponentName(AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME,\n-                        AuthenticationConstants.Broker.COMPANY_PORTAL_APP_LAUNCH_ACTIVITY_NAME));\n-                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n-                getActivity().startActivity(intent);\n-            } catch (final SecurityException ex) {\n-                Logger.warn(TAG + methodName, \"Failed to launch Company Portal, falling back to browser.\");\n-                openLinkInBrowser(url);\n+\n+        view.stopLoading();\n+\n+        if (url.contains(AuthenticationConstants.Broker.BROWSER_DEVICE_CA_URL_QUERY_STRING_PARAMETER)) {\n+            Logger.info(TAG + methodName, \"This is a device CA request.\");\n+            final PackageHelper packageHelper = new PackageHelper(getActivity().getPackageManager());\n+            final Context applicationContext = getActivity().getApplicationContext();\n+\n+            // If CP is installed, redirect to CP.\n+            if (!getActivity().getPackageName().equalsIgnoreCase(AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME) &&\n+                    packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME)) {\n+                try {\n+                    Logger.verbose(TAG + methodName, \"Sending intent to launch the CompanyPortal.\");\n+                    final Intent intent = new Intent();\n+                    intent.setComponent(new ComponentName(AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME,\n+                            AuthenticationConstants.Broker.COMPANY_PORTAL_APP_LAUNCH_ACTIVITY_NAME));\n+                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n+                    getActivity().startActivity(intent);\n+\n+                    getCompletionCallback().onChallengeResponseReceived(AuthenticationConstants.UIResponse.BROWSER_CODE_MDM, new Intent());\n+                    return true;\n+                } catch (final Exception ex) {\n+                    Logger.warn(TAG + methodName, \"Failed to launch Company Portal, falling back to browser.\");\n+                }\n             }\n-        } else {\n-            openLinkInBrowser(url);\n+\n+            // Otherwise, strip out BROWSER_DEVICE_CA_URL_QUERY_STRING_PARAMETER and launch in Browser.\n+            openLinkInBrowser(url.replace(AuthenticationConstants.Broker.BROWSER_DEVICE_CA_URL_QUERY_STRING_PARAMETER, \"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTM2NjUx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378536651", "createdAt": "2020-03-20T14:35:01Z", "commit": {"oid": "e73a8f7e85671655dd870a1497505fc551bb0729"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e62d9cb40acbeb2523977148e4cf966dc3e9ddec", "committedDate": "2020-03-20T16:02:54Z", "message": "Merge branch 'dev' into rapong/MDMCancel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzMyMzAw", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378732300", "createdAt": "2020-03-20T18:46:46Z", "commit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0Njo0NlrOF5fdCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0Njo0NlrOF5fdCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgyODQ5MA==", "bodyText": "Why is this check removed ? I see a TODO, but did we test this ?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395828490", "createdAt": "2020-03-20T18:46:46Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -214,35 +214,40 @@ protected boolean processRedirectUrl(@NonNull final WebView view, @NonNull final\n \n     private boolean processWebsiteRequest(@NonNull final WebView view, @NonNull final String url) {\n         final String methodName = \"#processWebsiteRequest\";\n-        final PackageHelper packageHelper = new PackageHelper(getActivity().getPackageManager());\n-        final Context applicationContext = getActivity().getApplicationContext();\n-        if (url.startsWith(AuthenticationConstants.Broker.BROWSER_DEVICE_CA_URL)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME)\n-                && AuthenticationConstants.Broker.IPPHONE_APP_SIGNATURE.equals(\n-                packageHelper.getCurrentSignatureForPackage(AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzMzNDY2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378733466", "createdAt": "2020-03-20T18:48:37Z", "commit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0ODozOFrOF5fgqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0ODozOFrOF5fgqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgyOTQxNw==", "bodyText": "nit : most of the lines in this method are very long, way beyond 100 chars, see if you can format to improve readability", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#discussion_r395829417", "createdAt": "2020-03-20T18:48:38Z", "author": {"login": "kreedula"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -214,35 +214,40 @@ protected boolean processRedirectUrl(@NonNull final WebView view, @NonNull final\n \n     private boolean processWebsiteRequest(@NonNull final WebView view, @NonNull final String url) {\n         final String methodName = \"#processWebsiteRequest\";\n-        final PackageHelper packageHelper = new PackageHelper(getActivity().getPackageManager());\n-        final Context applicationContext = getActivity().getApplicationContext();\n-        if (url.startsWith(AuthenticationConstants.Broker.BROWSER_DEVICE_CA_URL)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME)\n-                && packageHelper.isPackageInstalledAndEnabled(applicationContext, AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME)\n-                && AuthenticationConstants.Broker.IPPHONE_APP_SIGNATURE.equals(\n-                packageHelper.getCurrentSignatureForPackage(AuthenticationConstants.Broker.IPPHONE_APP_PACKAGE_NAME))) {\n-            // TODO: This flow should really check if the Microsoft Intune or the Company Portal apps are installed,\n-            // which is the correct client app to launch depending on the enrollment, and launch that app, to permanently skip the browser.\n-            // Also it must handle 3rd party MDMs as appropriate, which will depend on the browser flow determining the authority.\n-            Logger.info(TAG + methodName, \"It is a device CA request on IPPhone. Company Portal is installed.\");\n-            try {\n-                Logger.verbose(TAG + methodName, \"Sending intent to launch the CompanyPortal.\");\n-                final Intent intent = new Intent();\n-                intent.setComponent(new ComponentName(AuthenticationConstants.Broker.COMPANY_PORTAL_APP_PACKAGE_NAME,\n-                        AuthenticationConstants.Broker.COMPANY_PORTAL_APP_LAUNCH_ACTIVITY_NAME));\n-                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n-                getActivity().startActivity(intent);\n-            } catch (final SecurityException ex) {\n-                Logger.warn(TAG + methodName, \"Failed to launch Company Portal, falling back to browser.\");\n-                openLinkInBrowser(url);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b36b4a55275cc16ea01ba756c4e651a53a84aef", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1b36b4a55275cc16ea01ba756c4e651a53a84aef", "committedDate": "2020-03-20T19:48:57Z", "message": "Address comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzczMDk1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-378773095", "createdAt": "2020-03-20T19:54:24Z", "commit": {"oid": "e62d9cb40acbeb2523977148e4cf966dc3e9ddec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9df1a927b6cb684848e311b47202b783339a7494", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9df1a927b6cb684848e311b47202b783339a7494", "committedDate": "2020-03-20T20:20:53Z", "message": "Remove self-check. It should not matter if the call is being made through broker's company portal."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e987359236f835fa5ef9eae1b2521774dd3a18a", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/1e987359236f835fa5ef9eae1b2521774dd3a18a", "committedDate": "2020-03-20T20:21:28Z", "message": "Merge branch 'rapong/MDMCancel' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into rapong/MDMCancel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "112954e149f6a2778316217230e097e8a38fd17a", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/112954e149f6a2778316217230e097e8a38fd17a", "committedDate": "2020-03-20T20:46:13Z", "message": "Update test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "944b6e71e293df90b9b04d13f1913c4222ee0160", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/944b6e71e293df90b9b04d13f1913c4222ee0160", "committedDate": "2020-03-23T16:26:05Z", "message": "Merge branch 'dev' into rapong/MDMCancel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19d37909e4ce82f8019127ede05663590d558d87", "author": {"user": {"login": "rpdome", "name": "Dome Pongmongkol"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/19d37909e4ce82f8019127ede05663590d558d87", "committedDate": "2020-03-23T16:53:15Z", "message": "Remove url stripping logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5OTE1Nzg0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/865#pullrequestreview-379915784", "createdAt": "2020-03-24T00:06:04Z", "commit": {"oid": "19d37909e4ce82f8019127ede05663590d558d87"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1611, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}