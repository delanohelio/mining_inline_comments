{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2OTM2NDE5", "number": 1158, "title": "Update deprecated HttpRequest.sendGet to use new HttpClient - Closes #1038", "bodyText": "Closes #1038", "createdAt": "2020-12-11T14:23:41Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158", "merged": true, "mergeCommit": {"oid": "e8997b2469466bbe5b9820d9ec308627d7b3b8da"}, "closed": true, "closedAt": "2020-12-11T21:00:03Z", "author": {"login": "gitaumoses4"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlK8YPAH2gAyNTM2OTM2NDE5OjBlNzY3YTNjNmExYWU5MDMwNmZmYjRlYzFlNzg0MjY0ZDdkZGI0MzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlNi9XgFqTU1MDUzNjkyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e767a3c6a1ae90306ffb4ec1e784264d7ddb432", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0e767a3c6a1ae90306ffb4ec1e784264d7ddb432", "committedDate": "2020-12-11T16:57:26Z", "message": "Update usage of deprecated HttpRequest.sendGet\n\nFixes #1038"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffc5bf9ecb2247be2e49c80116946c07bda4d7f6", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ffc5bf9ecb2247be2e49c80116946c07bda4d7f6", "committedDate": "2020-12-11T16:57:51Z", "message": "Update changelog.txt"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af881062d574ce62b58edbb1ff4b0f1ae4af88b1", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/af881062d574ce62b58edbb1ff4b0f1ae4af88b1", "committedDate": "2020-12-11T15:41:58Z", "message": "Update formatting"}, "afterCommit": {"oid": "8eac46d67be5498dc248a4bec6bda6894061c685", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8eac46d67be5498dc248a4bec6bda6894061c685", "committedDate": "2020-12-11T16:57:56Z", "message": "Update formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMjk0MTA1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550294105", "createdAt": "2020-12-11T17:01:27Z", "commit": {"oid": "8eac46d67be5498dc248a4bec6bda6894061c685"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowMToyN1rOIEBo-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowMToyN1rOIEBo-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5MjA4OQ==", "bodyText": "on 1 line?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541092089", "createdAt": "2020-12-11T17:01:27Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectory.java", "diffHunk": "@@ -179,13 +181,12 @@ public static synchronized void performCloudDiscovery() throws IOException {\n                 .appendQueryParameter(AUTHORIZATION_ENDPOINT, AUTHORIZATION_ENDPOINT_VALUE)\n                 .build();\n \n-        Map<String, String> headers = new HashMap<>();\n+        final UrlConnectionHttpClient httpClient = UrlConnectionHttpClient.getDefaultInstance();\n \n-        // Suppressing deprecation warnings due to the deprecated method HttpRequest.sendGet(). Raised issue https://github.com/AzureAD/microsoft-authentication-library-common-for-android/issues/1038\n-        @SuppressWarnings(WarningType.deprecation_warning)\n-        HttpResponse response = HttpRequest.sendGet(\n-                new URL(instanceDiscoveryRequestUri.toString()),\n-                headers\n+        final Map<String, String> headers = new HashMap<>();\n+\n+        final HttpResponse response = httpClient.get(\n+                new URL(instanceDiscoveryRequestUri.toString()), headers", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8eac46d67be5498dc248a4bec6bda6894061c685"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8eac46d67be5498dc248a4bec6bda6894061c685", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/8eac46d67be5498dc248a4bec6bda6894061c685", "committedDate": "2020-12-11T16:57:56Z", "message": "Update formatting"}, "afterCommit": {"oid": "397793f2d323cc70e362b3991025e9d820808314", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/397793f2d323cc70e362b3991025e9d820808314", "committedDate": "2020-12-11T17:01:59Z", "message": "Update formatting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "397793f2d323cc70e362b3991025e9d820808314", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/397793f2d323cc70e362b3991025e9d820808314", "committedDate": "2020-12-11T17:01:59Z", "message": "Update formatting"}, "afterCommit": {"oid": "63531c4b9697f63f7f24c1662466d1fccc2c3da3", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/63531c4b9697f63f7f24c1662466d1fccc2c3da3", "committedDate": "2020-12-11T17:03:37Z", "message": "Update formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMjk4Mjk4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550298298", "createdAt": "2020-12-11T17:04:36Z", "commit": {"oid": "63531c4b9697f63f7f24c1662466d1fccc2c3da3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowNDozNlrOIEBwZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowNDozNlrOIEBwZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5Mzk5MA==", "bodyText": "This can be a field.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541093990", "createdAt": "2020-12-11T17:04:36Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectory.java", "diffHunk": "@@ -179,14 +181,11 @@ public static synchronized void performCloudDiscovery() throws IOException {\n                 .appendQueryParameter(AUTHORIZATION_ENDPOINT, AUTHORIZATION_ENDPOINT_VALUE)\n                 .build();\n \n-        Map<String, String> headers = new HashMap<>();\n+        final UrlConnectionHttpClient httpClient = UrlConnectionHttpClient.getDefaultInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63531c4b9697f63f7f24c1662466d1fccc2c3da3"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63531c4b9697f63f7f24c1662466d1fccc2c3da3", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/63531c4b9697f63f7f24c1662466d1fccc2c3da3", "committedDate": "2020-12-11T17:03:37Z", "message": "Update formatting"}, "afterCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/32b1f52456e836f19bb3d0151385bb7394e52775", "committedDate": "2020-12-11T17:08:36Z", "message": "Update formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzA5MTI2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550309126", "createdAt": "2020-12-11T17:12:12Z", "commit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMjoxMlrOIECCpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMjoxMlrOIECCpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5ODY2MA==", "bodyText": "If we don't do anything with the header reference, can we just pass a new HashMap to the get call?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541098660", "createdAt": "2020-12-11T17:12:12Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OpenIdProviderConfigurationClient.java", "diffHunk": "@@ -139,9 +141,9 @@ public synchronized OpenIdProviderConfiguration loadOpenIdProviderConfiguration(\n                     \"Using request URL: \" + configUrl\n             );\n \n-            // Suppressing deprecation warnings due to the deprecated method HttpRequest.sendGet(). Raised issue https://github.com/AzureAD/microsoft-authentication-library-common-for-android/issues/1038\n-            @SuppressWarnings(WarningType.deprecation_warning)\n-            final HttpResponse providerConfigResponse = HttpRequest.sendGet(configUrl, new HashMap<String, String>());\n+            final Map<String, String> headers = new HashMap<>();\n+\n+            final HttpResponse providerConfigResponse = httpClient.get(configUrl, headers);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzEwMDkx", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550310091", "createdAt": "2020-12-11T17:12:53Z", "commit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMjo1M1rOIECEdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMjo1M1rOIECEdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5OTEyNg==", "bodyText": "ditto comment about inlining the header reference.", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541099126", "createdAt": "2020-12-11T17:12:53Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectory.java", "diffHunk": "@@ -179,14 +182,9 @@ public static synchronized void performCloudDiscovery() throws IOException {\n                 .appendQueryParameter(AUTHORIZATION_ENDPOINT, AUTHORIZATION_ENDPOINT_VALUE)\n                 .build();\n \n-        Map<String, String> headers = new HashMap<>();\n+        final Map<String, String> headers = new HashMap<>();\n \n-        // Suppressing deprecation warnings due to the deprecated method HttpRequest.sendGet(). Raised issue https://github.com/AzureAD/microsoft-authentication-library-common-for-android/issues/1038\n-        @SuppressWarnings(WarningType.deprecation_warning)\n-        HttpResponse response = HttpRequest.sendGet(\n-                new URL(instanceDiscoveryRequestUri.toString()),\n-                headers\n-        );\n+        final HttpResponse response = httpClient.get(new URL(instanceDiscoveryRequestUri.toString()), headers);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzExMDQ5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550311049", "createdAt": "2020-12-11T17:13:32Z", "commit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMzozMlrOIECF3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMzozMlrOIECF3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5OTQ4NA==", "bodyText": "Can this just be an HttpClient?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541099484", "createdAt": "2020-12-11T17:13:32Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectory.java", "diffHunk": "@@ -72,6 +74,7 @@\n     private static ConcurrentMap<String, AzureActiveDirectoryCloud> sAadClouds = new ConcurrentHashMap<>();\n     private static boolean sIsInitialized = false;\n     private static Environment sEnvironment = Environment.Production;\n+    private static final UrlConnectionHttpClient httpClient = UrlConnectionHttpClient.getDefaultInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzExNTAy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550311502", "createdAt": "2020-12-11T17:13:50Z", "commit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMzo1MVrOIECGtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzoxMzo1MVrOIECGtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5OTcwMA==", "bodyText": "Can this type just be HttpClient?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541099700", "createdAt": "2020-12-11T17:13:51Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OpenIdProviderConfigurationClient.java", "diffHunk": "@@ -54,6 +55,7 @@\n     private static final String sWellKnownConfig = \"/.well-known/openid-configuration\";\n     private static final ExecutorService sBackgroundExecutor = Executors.newCachedThreadPool();\n     private static final Map<URL, OpenIdProviderConfiguration> sConfigCache = new HashMap<>();\n+    private static final UrlConnectionHttpClient httpClient = UrlConnectionHttpClient.getDefaultInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/44addd132da6029d9343b5333938f9b478c64c40", "committedDate": "2020-12-11T17:21:19Z", "message": "Update formatting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "32b1f52456e836f19bb3d0151385bb7394e52775", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/32b1f52456e836f19bb3d0151385bb7394e52775", "committedDate": "2020-12-11T17:08:36Z", "message": "Update formatting"}, "afterCommit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40", "author": {"user": {"login": "gitaumoses4", "name": "Moses Gitau"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/44addd132da6029d9343b5333938f9b478c64c40", "committedDate": "2020-12-11T17:21:19Z", "message": "Update formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzM2MjA2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550336206", "createdAt": "2020-12-11T17:30:54Z", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzQwNjIy", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550340622", "createdAt": "2020-12-11T17:33:56Z", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzQ2NzM0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550346734", "createdAt": "2020-12-11T17:37:09Z", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNzowOVrOIEC-FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNzowOVrOIEC-FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExMzg3Ng==", "bodyText": "We should set some parameters here - how many writers do we expect for this CHM?", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#discussion_r541113876", "createdAt": "2020-12-11T17:37:09Z", "author": {"login": "AdamBJohnsonx"}, "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/azureactivedirectory/AzureActiveDirectory.java", "diffHunk": "@@ -72,6 +74,7 @@\n     private static ConcurrentMap<String, AzureActiveDirectoryCloud> sAadClouds = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTA1MDI3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550505027", "createdAt": "2020-12-11T19:09:08Z", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTM2OTIz", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1158#pullrequestreview-550536923", "createdAt": "2020-12-11T19:59:23Z", "commit": {"oid": "44addd132da6029d9343b5333938f9b478c64c40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1479, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}