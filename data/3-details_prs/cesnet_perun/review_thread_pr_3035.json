{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4OTUyNjky", "number": 3035, "reviewThreads": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo1NDo0NlrOFE3sXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0OToyNFrOFFwAyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjUxMTAzOnYy", "diffSide": "RIGHT", "path": "perun-openapi/openapi.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo1NDo0NlrOIFF8lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMjo1NjoyNlrOIFPI4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxMTIyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, description: \"return applications newer than this date\" }\n          \n          \n            \n                    - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, required: false, description: \"return applications newer than this date\" }", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542211222", "createdAt": "2020-12-14T08:54:46Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, description: \"return applications newer than this date\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2MTgyNg==", "bodyText": "This is the openapi default, but making it verbose anyway as requested.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542361826", "createdAt": "2020-12-14T12:56:26Z", "author": {"login": "mvocu"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, description: \"return applications newer than this date\" }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxMTIyMg=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjUxMTc3OnYy", "diffSide": "RIGHT", "path": "perun-openapi/openapi.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo1NDo1OFrOIFF9Eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMjo1Njo0NFrOIFPJtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxMTM0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    - { name: \"dateTo\", schema: { type: string, format: date }, in: query, description: \"return applications older than this date\" }\n          \n          \n            \n                    - { name: \"dateTo\", schema: { type: string, format: date }, in: query, required: false, description: \"return applications older than this date\" }", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542211346", "createdAt": "2020-12-14T08:54:58Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, description: \"return applications newer than this date\" }\n+        - { name: \"dateTo\", schema: { type: string, format: date }, in: query, description: \"return applications older than this date\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2MjAzOQ==", "bodyText": "dtto.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542362039", "createdAt": "2020-12-14T12:56:44Z", "author": {"login": "mvocu"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, description: \"return applications newer than this date\" }\n+        - { name: \"dateTo\", schema: { type: string, format: date }, in: query, description: \"return applications older than this date\" }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxMTM0Ng=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjUyOTg3OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo1ODo1OVrOIFGHfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzowMTo1NlrOIFPWxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNDAxMg==", "bodyText": "Generally, we want to use one policy for one method. Please, create a new policy in the perun-base/src/main/resources/perun-roles.yml file.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {\n          \n          \n            \n            \t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542214012", "createdAt": "2020-12-14T08:58:59Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2NTM4Mw==", "bodyText": "I can hardly see the the reason why the two should differ, but doing it anyway.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542365383", "createdAt": "2020-12-14T13:01:56Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNDAxMg=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjU1MzA5OnYy", "diffSide": "RIGHT", "path": "perun-openapi/openapi.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTowNDozNlrOIFGVCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMjo1NzowNFrOIFPKnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzQ4Mw==", "bodyText": "Also, please update the getApplicationsForGroup parameters.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542217483", "createdAt": "2020-12-14T09:04:36Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2MjI3MQ==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542362271", "createdAt": "2020-12-14T12:57:04Z", "author": {"login": "mvocu"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzQ4Mw=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNjU1NjU1OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTowNToyNVrOIFGXAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzowNDo1OFrOIFPeAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzk4Nw==", "bodyText": "Same for this policy.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n          \n          \n            \n            \t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_String_String_policy\", Collections.singletonList(group))) {", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542217987", "createdAt": "2020-12-14T09:05:25Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2NzIzNA==", "bodyText": "Added.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542367234", "createdAt": "2020-12-14T13:04:58Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzk4Nw=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzExOTM5OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowNzo0OVrOIFLYGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowNzo0OVrOIFLYGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMDE4Ng==", "bodyText": "This SQL seems to be invalid. If you would use the LocalDate, you can fix it like this\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\treturn jdbc.query(APP_SELECT + \" where a.vo_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, vo.getId(), dateFrom, dateTo);\n          \n          \n            \n            \t\t\t\treturn jdbc.query(APP_SELECT + \" where a.vo_id=? and a.created_at::date >= ? and a.created_at::date <= ? order by a.id desc\", APP_MAPPER, vo.getId(), dateFrom, dateTo);", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542300186", "createdAt": "2020-12-14T11:07:49Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.vo_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, vo.getId(), dateFrom, dateTo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzEyMjY2OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowODo0MVrOIFLZ-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowODo0MVrOIFLZ-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMDY2Nw==", "bodyText": "This SQL seems to be invalid. If you would use the LocalDate, you can fix it like this\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.vo_id=:voId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);\n          \n          \n            \n            \t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.vo_id=:voId and state in ( :states ) and a.created_at::date >= :from and a.created_at::date <= :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542300667", "createdAt": "2020-12-14T11:08:41Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.vo_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, vo.getId(), dateFrom, dateTo);\n+\t\t\t} catch (EmptyResultDataAccessException ex) {\n+\t\t\t\treturn new ArrayList<>();\n+\t\t\t}\n+\t\t} else {\n+\t\t\t// filter by state\n+\t\t\ttry {\n+\t\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.vo_id=:voId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzEyOTk5OnYy", "diffSide": "RIGHT", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToxMDoyMlrOIFLeNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToxMDoyMlrOIFLeNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMTc1MA==", "bodyText": "This is not necessary, but there is also a method for parsing LocalDates. I would suggest using it instead of the String. Same for other similar usages.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t\tparms.readString(\"dateFrom\"), \n          \n          \n            \n            \t\t\t\t\t\tparms.readLocalDate(\"dateFrom\"),", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542301750", "createdAt": "2020-12-14T11:10:22Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -479,14 +498,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given Group in a given date period.\n+\t *\n+\t * @param group int Group <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications\n+\t * @param dateTo String Latest date for applications\n+\t * @return List<Application> Found applications\n+\t */\n \tgetApplicationsForGroup {\n \n \t\t@Override\n \t\tpublic List<Application> call(ApiCaller ac, Deserializer parms) throws PerunException {\n-\t\t\tif (parms.contains(\"state\")) {\n-\t\t\t\treturn ac.getRegistrarManager().getApplicationsForGroup(ac.getSession(), ac.getGroupById(parms.readInt(\"group\")), parms.readList(\"state\", String.class));\n+\t\t\tif (parms.contains(\"dateFrom\")) {\n+\t\t\t\treturn ac.getRegistrarManager().getApplicationsForGroup(\n+\t\t\t\t\t\tac.getSession(), \n+\t\t\t\t\t\tac.getGroupById(parms.readInt(\"group\")), \n+\t\t\t\t\t\tparms.contains(\"state\") ? parms.readList(\"state\", String.class) : null,\n+\t\t\t\t\t\tparms.readString(\"dateFrom\"), ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzE0NDYzOnYy", "diffSide": "RIGHT", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToxNDowM1rOIFLmlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzowNjoyM1rOIFPhMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMzg5NA==", "bodyText": "This way, you can specify only one bound.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (parms.contains(\"dateFrom\")) {\n          \n          \n            \n            \t\t\tif (parms.contains(\"dateFrom\") || parms.contains(\"dateTo\")) {", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542303894", "createdAt": "2020-12-14T11:14:03Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -479,14 +498,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given Group in a given date period.\n+\t *\n+\t * @param group int Group <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications\n+\t * @param dateTo String Latest date for applications\n+\t * @return List<Application> Found applications\n+\t */\n \tgetApplicationsForGroup {\n \n \t\t@Override\n \t\tpublic List<Application> call(ApiCaller ac, Deserializer parms) throws PerunException {\n-\t\t\tif (parms.contains(\"state\")) {\n-\t\t\t\treturn ac.getRegistrarManager().getApplicationsForGroup(ac.getSession(), ac.getGroupById(parms.readInt(\"group\")), parms.readList(\"state\", String.class));\n+\t\t\tif (parms.contains(\"dateFrom\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM2ODA1MQ==", "bodyText": "Added.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542368051", "createdAt": "2020-12-14T13:06:23Z", "author": {"login": "mvocu"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -479,14 +498,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given Group in a given date period.\n+\t *\n+\t * @param group int Group <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications\n+\t * @param dateTo String Latest date for applications\n+\t * @return List<Application> Found applications\n+\t */\n \tgetApplicationsForGroup {\n \n \t\t@Override\n \t\tpublic List<Application> call(ApiCaller ac, Deserializer parms) throws PerunException {\n-\t\t\tif (parms.contains(\"state\")) {\n-\t\t\t\treturn ac.getRegistrarManager().getApplicationsForGroup(ac.getSession(), ac.getGroupById(parms.readInt(\"group\")), parms.readList(\"state\", String.class));\n+\t\t\tif (parms.contains(\"dateFrom\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMzg5NA=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzE2NjM5OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToxOTowNVrOIFLyyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzozNTowOVrOIFQrTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzAxOQ==", "bodyText": "With this change, it will work even if only one bound is specified.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t}\n          \n          \n            \n            \t\t}\n          \n          \n            \n            \t\tif (dateTo == null) {\n          \n          \n            \n            \t\t\tdateTo = LocalDate.MAX;\n          \n          \n            \n            \t\t}\n          \n          \n            \n            \t\tif (dateFrom == null {\n          \n          \n            \n            \t\t\tdateFrom = LocalDate.MIN;\n          \n          \n            \n            \t\t}", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542307019", "createdAt": "2020-12-14T11:19:05Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM4NzAyMQ==", "bodyText": "This is extremely ugly from the SQL point of view. I rewrote it.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542387021", "createdAt": "2020-12-14T13:35:09Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzAxOQ=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzE3MDgzOnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToyMDowNVrOIFL1Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjowMjoxNVrOIGHeeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzY0Nw==", "bodyText": "This SQL also seems to be incorrect. This will again work only if you use LocalDates.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);\n          \n          \n            \n            \t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= ? and a.created_at::date <= ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542307647", "createdAt": "2020-12-14T11:20:05Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDM4MQ==", "bodyText": "I do not understand. AFAIK the SQL is correct and works (tested on command line).", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542374381", "createdAt": "2020-12-14T13:16:17Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzY0Nw=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE4MDY1Mw==", "bodyText": "The column create_at is incorrect. Also, the notation date ? doesn't work in JDBC. I have run it, and it just throws PSQLException: ERROR: syntax error at or near \"$2\".\nRewritting it to date(?) or ?::date seemed to fix it.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543180653", "createdAt": "2020-12-15T09:26:53Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzY0Nw=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4NDg1OA==", "bodyText": "Changed to 'date(:param)'", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543284858", "createdAt": "2020-12-15T12:02:15Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzY0Nw=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzE3MzY5OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToyMDo0OVrOIFL22w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjowMjozMVrOIGHfUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwODA1OQ==", "bodyText": "This SQL also seems to be incorrect. This will again work only if you use LocalDates.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.group_id=:groupId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);\n          \n          \n            \n            \t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.group_id=:groupId and state in ( :states ) and a.created_at::date >= :from and a.created_at::date <= :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542308059", "createdAt": "2020-12-14T11:20:49Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);\n+\t\t\t} catch (EmptyResultDataAccessException ex) {\n+\t\t\t\treturn new ArrayList<>();\n+\t\t\t}\n+\t\t} else {\n+\t\t\t// filter by state\n+\t\t\ttry {\n+\t\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.group_id=:groupId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDUwOA==", "bodyText": "See above.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542374508", "createdAt": "2020-12-14T13:16:28Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);\n+\t\t\t} catch (EmptyResultDataAccessException ex) {\n+\t\t\t\treturn new ArrayList<>();\n+\t\t\t}\n+\t\t} else {\n+\t\t\t// filter by state\n+\t\t\ttry {\n+\t\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.group_id=:groupId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwODA1OQ=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4NTA3NA==", "bodyText": "Changed to 'date(:param)'", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543285074", "createdAt": "2020-12-15T12:02:31Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1959,37 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\tif (state == null || state.isEmpty()) {\n+\t\t\t// list all\n+\t\t\ttry {\n+\t\t\t\treturn jdbc.query(APP_SELECT + \" where a.group_id=? and a.created_at::date >= date ? and a.create_at::date <= date ? order by a.id desc\", APP_MAPPER, group.getId(), dateFrom, dateTo);\n+\t\t\t} catch (EmptyResultDataAccessException ex) {\n+\t\t\t\treturn new ArrayList<>();\n+\t\t\t}\n+\t\t} else {\n+\t\t\t// filter by state\n+\t\t\ttry {\n+\t\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\treturn namedJdbc.query(APP_SELECT + \" where a.group_id=:groupId and state in ( :states ) and a.created_at::date >= date :from and a.create_at::date <= date :to order by a.id desc\", sqlParameterSource, APP_MAPPER);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwODA1OQ=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzE4MDAxOnYy", "diffSide": "RIGHT", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMToyMjoxMVrOIFL6VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoxNjo0M1rOIFP7DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwODk0OA==", "bodyText": "I would suggest the same changes as for the getApplicationsForGroup method here.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542308948", "createdAt": "2020-12-14T11:22:11Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -452,14 +452,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given VO in a given date period.\n+\t *\n+\t * @param vo int VO <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications\n+\t * @param dateTo String Latest date for applications\n+\t * @return List<Application> Found applications\n+\t */\n \tgetApplicationsForVo {\n \n \t\t@Override\n \t\tpublic List<Application> call(ApiCaller ac, Deserializer parms) throws PerunException {\n-\t\t\tif (parms.contains(\"state\")) {\n-\t\t\t\treturn ac.getRegistrarManager().getApplicationsForVo(ac.getSession(), ac.getVoById(parms.readInt(\"vo\")), parms.readList(\"state\", String.class));\n+\t\t\tif(parms.contains(\"dateFrom\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDY2OA==", "bodyText": "OK", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r542374668", "createdAt": "2020-12-14T13:16:43Z", "author": {"login": "mvocu"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -452,14 +452,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given VO in a given date period.\n+\t *\n+\t * @param vo int VO <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications\n+\t * @param dateTo String Latest date for applications\n+\t * @return List<Application> Found applications\n+\t */\n \tgetApplicationsForVo {\n \n \t\t@Override\n \t\tpublic List<Application> call(ApiCaller ac, Deserializer parms) throws PerunException {\n-\t\t\tif (parms.contains(\"state\")) {\n-\t\t\t\treturn ac.getRegistrarManager().getApplicationsForVo(ac.getSession(), ac.getVoById(parms.readInt(\"vo\")), parms.readList(\"state\", String.class));\n+\t\t\tif(parms.contains(\"dateFrom\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwODk0OA=="}, "originalCommit": {"oid": "3f5bcf3eee2fa92e469ae7428d1b60a239b207e2"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjM3NTU3OnYy", "diffSide": "RIGHT", "path": "perun-base/src/main/resources/perun-roles.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzowMzo0NlrOIF748w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzowMjoxNFrOIGJxhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NTAyNw==", "bodyText": "First parameter of the method is a Group not a VO. Therefore, the name should be:\ngetApplicationsForGroup_Group_List<String>_String_String_policy", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543095027", "createdAt": "2020-12-15T07:03:46Z", "author": {"login": "balcirakpeter"}, "path": "perun-base/src/main/resources/perun-roles.yml", "diffHunk": "@@ -5985,6 +5993,16 @@ perun_policies:\n     include_policies:\n       - default_policy\n \n+  getApplicationsForGroup_Vo_List<String>_String_String_policy:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzMyMjUwMA==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543322500", "createdAt": "2020-12-15T13:02:14Z", "author": {"login": "mvocu"}, "path": "perun-base/src/main/resources/perun-roles.yml", "diffHunk": "@@ -5985,6 +5993,16 @@ perun_policies:\n     include_policies:\n       - default_policy\n \n+  getApplicationsForGroup_Vo_List<String>_String_String_policy:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NTAyNw=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjM5MTg4OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzowODoyN1rOIF8Bwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMTo1OTozNVrOIGHYaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NzI4Mg==", "bodyText": "There is an extra and", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543097282", "createdAt": "2020-12-15T07:08:27Z", "author": {"login": "balcirakpeter"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4MzMwNQ==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543283305", "createdAt": "2020-12-15T11:59:35Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NzI4Mg=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjM5NjU2OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzowOTo0OFrOIF8ERg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjowMDoxN1rOIGHZ8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NzkyNg==", "bodyText": "I think the correct column should be created_at", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543097926", "createdAt": "2020-12-15T07:09:48Z", "author": {"login": "balcirakpeter"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");\n+\t\t\t}\n+\t\t\tif(dateTo != null && !dateTo.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\tquery.append(\" and a.create_at::date <= date :to \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4MzY5OQ==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543283699", "createdAt": "2020-12-15T12:00:17Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");\n+\t\t\t}\n+\t\t\tif(dateTo != null && !dateTo.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\tquery.append(\" and a.create_at::date <= date :to \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NzkyNg=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjM5ODg3OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoxMDozMVrOIF8FjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjowMDoxMlrOIGHZxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5ODI1Mg==", "bodyText": "Same as in the previous method", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543098252", "createdAt": "2020-12-15T07:10:31Z", "author": {"login": "balcirakpeter"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1962,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_String_String_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.group_id=:groupId\");\n+\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4MzY1Mg==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543283652", "createdAt": "2020-12-15T12:00:12Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1962,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_String_String_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.group_id=:groupId\");\n+\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5ODI1Mg=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjQwMDcxOnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoxMTowNlrOIF8GmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoxMTowNlrOIF8GmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5ODUyMQ==", "bodyText": "Same as in the previous method", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543098521", "createdAt": "2020-12-15T07:11:06Z", "author": {"login": "balcirakpeter"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1928,6 +1962,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForGroup(PerunSession userSession, Group group, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tgroupsManager.checkGroupExists(userSession, group);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForGroup_Vo_List<String>_String_String_policy\", Collections.singletonList(group))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForGroup\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.group_id=:groupId\");\n+\t\t\tsqlParameterSource.addValue(\"groupId\", group.getId());\n+\t\t\tif (state != null && !state.isEmpty()) {\n+\t\t\t\t// list all\n+\t\t\t\tsqlParameterSource.addValue(\"states\", state);\n+\t\t\t\tquery.append(\" and state in ( :states )\");\n+\t\t\t}\n+\t\t\tif(dateFrom != null && !dateFrom.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"from\", dateFrom);\n+\t\t\t\tquery.append(\" and and a.created_at::date >= date :from \");\n+\t\t\t}\n+\t\t\tif(dateTo != null && !dateTo.isEmpty()) {\n+\t\t\t\tsqlParameterSource.addValue(\"to\", dateTo);\n+\t\t\t\tquery.append(\" and a.create_at::date <= date :to \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjQxMjA1OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoxNDoyNVrOIF8MwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzo0NjozN1rOIGLqOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEwMDA5Ng==", "bodyText": "I think that when you specify only the VO, it will also return all group applications within that VO. I know that this is how also the old method works but I am not sure if it is correct. What do you think @zlamalp ?", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543100096", "createdAt": "2020-12-15T07:14:25Z", "author": {"login": "balcirakpeter"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyNzczMg==", "bodyText": "@balcirakpeter you are right. Original method returns also group applications within the VO on purpose. So the new method should do the same as its expected to be used from the same part of GUI. It was probably just not reflected in javadoc.\n@mvocu we should add some kind of boolean flag in API of those methods (defaulting to old behaviour), since I see we use it from AppAutoRejectionScheduler, where it should process only VO applications, but like this it works also on group applications. For now it doesn't have to be in outer API (openAPI/RPC). Its just for the purpose of AppAutoRejectionScheduler.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543127732", "createdAt": "2020-12-15T08:06:19Z", "author": {"login": "zlamalp"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEwMDA5Ng=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1MzQwMg==", "bodyText": "OK, parameter added, references fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543353402", "createdAt": "2020-12-15T13:46:37Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/impl/RegistrarManagerImpl.java", "diffHunk": "@@ -1899,6 +1899,40 @@ public Application getApplicationById(PerunSession sess, int appId) throws Regis\n \n \t}\n \n+\t@Override\n+\tpublic List<Application> getApplicationsForVo(PerunSession userSession, Vo vo, List<String> state, String dateFrom, String dateTo) throws PerunException {\n+\t\tvosManager.checkVoExists(userSession, vo);\n+\n+\t\t//Authorization\n+\t\tif (!AuthzResolver.authorizedInternal(userSession, \"getApplicationsForVo_Vo_List<String>_String_String_policy\", Collections.singletonList(vo))) {\n+\t\t\tthrow new PrivilegeException(userSession, \"getApplicationsForVo\");\n+\t\t}\n+\t\ttry {\n+\t\t\tMapSqlParameterSource sqlParameterSource = new MapSqlParameterSource();\n+\t\t\tStringBuilder query = new StringBuilder(APP_SELECT);\n+\t\t\tquery.append(\" where a.vo_id=:voId\");\n+\t\t\tsqlParameterSource.addValue(\"voId\", vo.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEwMDA5Ng=="}, "originalCommit": {"oid": "58d166abc09e7093427302192cb54957da548da3"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTY3Nzc0OnYy", "diffSide": "RIGHT", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODozNjoyM1rOIGaENQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwODozMzo0NFrOIG5oLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4OTQyOQ==", "bodyText": "Please add includeGroupApplications param to the javadoc. Same for the method above.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543589429", "createdAt": "2020-12-15T18:36:23Z", "author": {"login": "zlamalp"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java", "diffHunk": "@@ -274,7 +275,23 @@\n \t * @return list of applications\n \t * @throws PerunException\n \t */\n-\tList<Application> getApplicationsForVo(PerunSession sess, Vo vo, List<String> state) throws PerunException;\n+\tList<Application> getApplicationsForVo(PerunSession sess, Vo vo, List<String> state, Boolean includeGroupApplications) throws PerunException;\n+\n+\n+\t/**\n+\t * Gets all applications in a given state for a given VO.\n+\t * If state is null, returns all applications for a given VO.\n+\t *\n+\t * @param sess who is asking\n+\t * @param vo VO to get applications for\n+\t * @param state application state to filter by\n+\t * @param dateFrom return only applications with this date or newer\n+\t * @param dateTo return only applications with this date or older\n+\t * @return list of applications", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDEwNjU0Mg==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r544106542", "createdAt": "2020-12-16T08:33:44Z", "author": {"login": "mvocu"}, "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java", "diffHunk": "@@ -274,7 +275,23 @@\n \t * @return list of applications\n \t * @throws PerunException\n \t */\n-\tList<Application> getApplicationsForVo(PerunSession sess, Vo vo, List<String> state) throws PerunException;\n+\tList<Application> getApplicationsForVo(PerunSession sess, Vo vo, List<String> state, Boolean includeGroupApplications) throws PerunException;\n+\n+\n+\t/**\n+\t * Gets all applications in a given state for a given VO.\n+\t * If state is null, returns all applications for a given VO.\n+\t *\n+\t * @param sess who is asking\n+\t * @param vo VO to get applications for\n+\t * @param state application state to filter by\n+\t * @param dateFrom return only applications with this date or newer\n+\t * @param dateTo return only applications with this date or older\n+\t * @return list of applications", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4OTQyOQ=="}, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTcxOTQ2OnYy", "diffSide": "RIGHT", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NToxNlrOIGadYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwODozNzo0NlrOIG5xtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NTg3NQ==", "bodyText": "Maybe suggest format for date string like YYYY-MM-DD. Same for the VO version of the method.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543595875", "createdAt": "2020-12-15T18:45:16Z", "author": {"login": "zlamalp"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -479,14 +500,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given Group in a given date period.\n+\t *\n+\t * @param group int Group <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDEwODk4Mw==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r544108983", "createdAt": "2020-12-16T08:37:46Z", "author": {"login": "mvocu"}, "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -479,14 +500,33 @@ public ApplicationFormItem call(ApiCaller ac, Deserializer parms) throws PerunEx\n \t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n \t * @return List<Application> Found applications\n \t */\n+\t/*#\n+\t * Gets all applications in a given state for a given Group in a given date period.\n+\t *\n+\t * @param group int Group <code>id</code>\n+\t * @param state List<String> List of states: NEW, VERIFIED, APPROVED, REJECTED\n+\t * @param dateFrom String Earliest date for applications", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NTg3NQ=="}, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTczODM1OnYy", "diffSide": "RIGHT", "path": "perun-openapi/openapi.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0OToyNVrOIGaoZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwODozNzo1M1rOIG5x9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5ODY5NA==", "bodyText": "Param description says >, but in impl we do >=, so the description should tell, that submitted date is also included in resulting list of applications. Same for dateTo and for both methods.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r543598694", "createdAt": "2020-12-15T18:49:25Z", "author": {"login": "zlamalp"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, required: false, description: \"return applications newer than this date\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDEwOTA0Ng==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/3035#discussion_r544109046", "createdAt": "2020-12-16T08:37:53Z", "author": {"login": "mvocu"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -12892,6 +12892,8 @@ paths:\n       parameters:\n         - $ref: '#/components/parameters/voId'\n         - { name: \"state[]\", schema: { type: array, items: { type: string } }, in: query, description: \"list of states: NEW, VERIFIED, APPROVED, REJECTED\" }\n+        - { name: \"dateFrom\", schema: { type: string, format: date }, in: query, required: false, description: \"return applications newer than this date\" }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5ODY5NA=="}, "originalCommit": {"oid": "65f5888f357b2a7571ed453b674acd0e81d63a3e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2230, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}