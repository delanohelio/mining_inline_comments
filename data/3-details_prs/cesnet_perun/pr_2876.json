{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NTEwMTAx", "number": 2876, "title": "Added getUsersSubjects to ExtSources", "bodyText": "method getUsersSubjects is now implemented everywhere where getGroupSubjects is\nquery used by this method should be defined in perun-extSources.xml\nmethod to get http connection separated to protected method for better testing in ExtSourceISMU, also some other methods accessibility changed to protected to be mocked in tests\nalso added tests for this method", "createdAt": "2020-08-31T20:01:42Z", "url": "https://github.com/CESNET/perun/pull/2876", "merged": true, "mergeCommit": {"oid": "c0163605cd5bb99f3e6e55fe3e8c6b832c2f473f"}, "closed": true, "closedAt": "2020-09-04T07:05:15Z", "author": {"login": "metodej"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEYX7BgH2gAyNDc2NTEwMTAxOjhmMjM2OGMzOWMyZDdkNzMwZDg3OWM0M2QwNWYxNzQ1MGI5N2RhZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFfuyUgFqTQ4MjQwODE0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f2368c39c2d7d730d879c43d05f17450b97dad9", "author": {"user": {"login": "metodej", "name": null}}, "url": "https://github.com/CESNET/perun/commit/8f2368c39c2d7d730d879c43d05f17450b97dad9", "committedDate": "2020-08-31T19:56:47Z", "message": "Added getUsersSubjects to ExtSources\n\n- method getUsersSubjects is now implemented everywhere where getGroupSubjects is\n- query used by this method should be defined in perun-extSources.xml\n- method to get http connection separated to protected method for better testing in ExtSourceISMU, also some other methods accessibility changed to protected to be mocked in tests\n- also added tests for this method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNzMwMzM0", "url": "https://github.com/CESNET/perun/pull/2876#pullrequestreview-480730334", "createdAt": "2020-09-02T11:33:37Z", "commit": {"oid": "8f2368c39c2d7d730d879c43d05f17450b97dad9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMTozMzozN1rOHLq8_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMTozNDoxMVrOHLq-eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAwMDEyNw==", "bodyText": "Please add check if the getGroupsFromRemote() is not null or edit that method so it cannot return a null but empty list instead (if it is possible).", "url": "https://github.com/CESNET/perun/pull/2876#discussion_r482000127", "createdAt": "2020-09-02T11:33:37Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ExtSourceVOOT.java", "diffHunk": "@@ -159,8 +159,19 @@ public static PerunBlImpl setPerunBlImpl(PerunBlImpl perun) {\n     }\n \n \t@Override\n-\tpublic List<Map<String, String>> getUsersSubjects() throws ExtSourceUnsupportedOperationException {\n-\t\tthrow new ExtSourceUnsupportedOperationException();\n+\tpublic List<Map<String, String>> getUsersSubjects() {\n+\t\tquery = getAttributes().get(\"usersQuery\");\n+\n+\t\tprepareEnvironment();\n+\n+\t\ttry {\n+\t\t\treturn getUsersFromRemote(getGroupsFromRemote(), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f2368c39c2d7d730d879c43d05f17450b97dad9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAwMDUwNg==", "bodyText": "Consider creating a constant for \"usersQuery\".", "url": "https://github.com/CESNET/perun/pull/2876#discussion_r482000506", "createdAt": "2020-09-02T11:34:11Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ExtSourceVOOT.java", "diffHunk": "@@ -159,8 +159,19 @@ public static PerunBlImpl setPerunBlImpl(PerunBlImpl perun) {\n     }\n \n \t@Override\n-\tpublic List<Map<String, String>> getUsersSubjects() throws ExtSourceUnsupportedOperationException {\n-\t\tthrow new ExtSourceUnsupportedOperationException();\n+\tpublic List<Map<String, String>> getUsersSubjects() {\n+\t\tquery = getAttributes().get(\"usersQuery\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f2368c39c2d7d730d879c43d05f17450b97dad9"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNzg3NDQw", "url": "https://github.com/CESNET/perun/pull/2876#pullrequestreview-480787440", "createdAt": "2020-09-02T12:53:17Z", "commit": {"oid": "8f2368c39c2d7d730d879c43d05f17450b97dad9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f48dec598456abf67d695710e359fbe946d516f1", "author": {"user": {"login": "metodej", "name": null}}, "url": "https://github.com/CESNET/perun/commit/f48dec598456abf67d695710e359fbe946d516f1", "committedDate": "2020-09-03T15:56:47Z", "message": "Fixes based on review\n\n- getGroupsFromRemote in ExtSourceVOOT returns empty array if no group was found instead of null\n- name of attribute usersQuery is set as constant in UsersManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNDA4MTQx", "url": "https://github.com/CESNET/perun/pull/2876#pullrequestreview-482408141", "createdAt": "2020-09-04T07:05:01Z", "commit": {"oid": "f48dec598456abf67d695710e359fbe946d516f1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1020, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}