{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MjgyNDQ5", "number": 2799, "title": "Core - search users optimizations", "bodyText": "The most expensive operation when searching users as a Perun Admin was\nchecking, if the attribute definition passed to the authorization method\nis correct. This doesn't need to be performed here, because this is\nusually verified in earlier calls or to this method are passed only\ndefinitions retrieved from the database.\nAlso removed duplicit conversion of richUsers to\nrichUsersWithAttributes.", "createdAt": "2020-07-21T08:51:42Z", "url": "https://github.com/CESNET/perun/pull/2799", "merged": true, "mergeCommit": {"oid": "2fd31570ba3ad23fa6b0f45f27293a59dde6be18"}, "closed": true, "closedAt": "2020-07-24T11:38:59Z", "author": {"login": "Vojtech-Sassmann"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3Cy7KgFqTQ1MjI3OTk4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4CeQdAFqTQ1NDgxOTA0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjc5OTg4", "url": "https://github.com/CESNET/perun/pull/2799#pullrequestreview-452279988", "createdAt": "2020-07-21T09:23:57Z", "commit": {"oid": "5f42d39f9d1584e2c70404d2f06549747fed2384"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMzo1N1rOG0vohQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMzo1N1rOG0vohQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk1OTU1Nw==", "bodyText": "Same optimization can be done for findRichUsersWithAttributesByExactMatch() below.\nAlso I wonder, if we can optimize implementation of convertRichUsersToRichUsersWithAttributes() itself, which retrieves user by id. We can easily pass RichUser instead of User into getAttributes() method, but I'm not sure that some code doesn't rely on the exact class to be used.", "url": "https://github.com/CESNET/perun/pull/2799#discussion_r457959557", "createdAt": "2020-07-21T09:23:57Z", "author": {"login": "zlamalp"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/UsersManagerBlImpl.java", "diffHunk": "@@ -1729,7 +1729,7 @@ public RichUser convertUserToRichUserWithAttributesByNames(PerunSession sess, Us\n \tpublic List<RichUser> findRichUsersWithAttributes(PerunSession sess, String searchString, List<String> attrsName) throws UserNotExistsException {\n \n \t\tif(attrsName == null || attrsName.isEmpty()) {\n-\t\t\treturn convertRichUsersToRichUsersWithAttributes(sess, findRichUsers(sess, searchString));\n+\t\t\treturn findRichUsers(sess, searchString);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f42d39f9d1584e2c70404d2f06549747fed2384"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ab8d5ec25147efcb750fefb81fd557e1f0cffb", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/97ab8d5ec25147efcb750fefb81fd557e1f0cffb", "committedDate": "2020-07-23T14:15:44Z", "message": "Core - search users optimizations\n\n* The most expensive operation when searching users as a Perun Admin was\nchecking, if the attribute definition passed to the authorization method\nis correct. This doesn't need to be performed here, because this is\nusually verified in earlier calls or to this method are passed only\ndefinitions retrieved from the database.\n* Also removed duplicit conversion of richUsers to\nrichUsersWithAttributes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f42d39f9d1584e2c70404d2f06549747fed2384", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/5f42d39f9d1584e2c70404d2f06549747fed2384", "committedDate": "2020-07-21T08:50:38Z", "message": "Core - search users optimizations\n\n* The most expensive operation when searching users as a Perun Admin was\nchecking, if the attribute definition passed to the authorization method\nis correct. This doesn't need to be performed here, because this is\nusually verified in earlier calls or to this method are passed only\ndefinitions retrieved from the database.\n* Also removed duplicit conversion of richUsers to\nrichUsersWithAttributes."}, "afterCommit": {"oid": "97ab8d5ec25147efcb750fefb81fd557e1f0cffb", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/97ab8d5ec25147efcb750fefb81fd557e1f0cffb", "committedDate": "2020-07-23T14:15:44Z", "message": "Core - search users optimizations\n\n* The most expensive operation when searching users as a Perun Admin was\nchecking, if the attribute definition passed to the authorization method\nis correct. This doesn't need to be performed here, because this is\nusually verified in earlier calls or to this method are passed only\ndefinitions retrieved from the database.\n* Also removed duplicit conversion of richUsers to\nrichUsersWithAttributes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NzI5MTM1", "url": "https://github.com/CESNET/perun/pull/2799#pullrequestreview-454729135", "createdAt": "2020-07-24T08:53:20Z", "commit": {"oid": "97ab8d5ec25147efcb750fefb81fd557e1f0cffb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0ODE5MDQ4", "url": "https://github.com/CESNET/perun/pull/2799#pullrequestreview-454819048", "createdAt": "2020-07-24T11:38:42Z", "commit": {"oid": "97ab8d5ec25147efcb750fefb81fd557e1f0cffb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1264, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}