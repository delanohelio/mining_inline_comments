{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NjE1NTM3", "number": 2705, "title": "Attribute modules configuration", "bodyText": "Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n\nCreated ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n\nIn the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist.", "createdAt": "2020-05-15T14:11:10Z", "url": "https://github.com/CESNET/perun/pull/2705", "merged": true, "mergeCommit": {"oid": "85ef60e3fb6ecf31e5535a25fb9925d505337521"}, "closed": true, "closedAt": "2020-05-25T13:24:39Z", "author": {"login": "Vojtech-Sassmann"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchi0vrABqjMzNDExMjk5MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckwBgvgFqTQxNzcwODczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "161425e767b640f6a3bcd06d345cdc5fd158c240", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/161425e767b640f6a3bcd06d345cdc5fd158c240", "committedDate": "2020-05-15T14:07:55Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "68c5aaf7e0601313bd39caedb153938fae1e3483", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/68c5aaf7e0601313bd39caedb153938fae1e3483", "committedDate": "2020-05-15T14:19:34Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68c5aaf7e0601313bd39caedb153938fae1e3483", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/68c5aaf7e0601313bd39caedb153938fae1e3483", "committedDate": "2020-05-15T14:19:34Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/b657fa44df67514a3f4b12bc42d3d408e908207f", "committedDate": "2020-05-15T14:21:59Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDg2NzYz", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-413086763", "createdAt": "2020-05-16T15:48:51Z", "commit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxNTo0ODo1MVrOGWbDqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxNjowOTozNlrOGWbKYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE2NTE2MQ==", "bodyText": "Path /etc/perun/ is stored inside the ${perun.conf} variable. You can use that.", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r426165161", "createdAt": "2020-05-16T15:48:51Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/ModulesYamlConfigLoader.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package cz.metacentrum.perun.core.impl.modules;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.dataformat.yaml.YAMLFactory;\n+import cz.metacentrum.perun.core.api.exceptions.InternalErrorException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static cz.metacentrum.perun.core.impl.Utils.notNull;\n+\n+/**\n+ * @author Vojtech Sassmann <vojtech.sassmann@gmail.com>\n+ */\n+\n+public class ModulesYamlConfigLoader implements ModulesConfigLoader {\n+\n+\tprivate final static Logger log = LoggerFactory.getLogger(ModulesYamlConfigLoader.class);\n+\n+\tprivate static final ObjectMapper yamlObjectMapper = new ObjectMapper(new YAMLFactory());\n+\tprivate String modulesDirPath = \"/etc/perun/modules/\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE2NjAwNA==", "bodyText": "This method should have some Javadoc. It is not clear what is the purpose of it.", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r426166004", "createdAt": "2020-05-16T15:59:35Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/ModulesYamlConfigLoader.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package cz.metacentrum.perun.core.impl.modules;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.dataformat.yaml.YAMLFactory;\n+import cz.metacentrum.perun.core.api.exceptions.InternalErrorException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static cz.metacentrum.perun.core.impl.Utils.notNull;\n+\n+/**\n+ * @author Vojtech Sassmann <vojtech.sassmann@gmail.com>\n+ */\n+\n+public class ModulesYamlConfigLoader implements ModulesConfigLoader {\n+\n+\tprivate final static Logger log = LoggerFactory.getLogger(ModulesYamlConfigLoader.class);\n+\n+\tprivate static final ObjectMapper yamlObjectMapper = new ObjectMapper(new YAMLFactory());\n+\tprivate String modulesDirPath = \"/etc/perun/modules/\";\n+\n+\tpublic ModulesYamlConfigLoader() { }\n+\n+\tpublic ModulesYamlConfigLoader(String modulesDirPath) {\n+\t\tthis.modulesDirPath = modulesDirPath;\n+\t}\n+\n+\t@Override\n+\tpublic String loadStringProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).asText();\n+\t}\n+\n+\t@Override\n+\tpublic Integer loadIntegerProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).isNull() ? null : loadPropertyNode(moduleName, property).asInt();\n+\t}\n+\n+\t@Override\n+\tpublic List<String> loadStringListProperty(String moduleName, String property) {\n+\t\tList<String> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.asText()));\n+\t\treturn values;\n+\t}\n+\n+\t@Override\n+\tpublic List<Integer> loadIntegerListProperty(String moduleName, String property) {\n+\t\tList<Integer> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.isNull() ? null : node.asInt()));\n+\t\treturn values;\n+\t}\n+\n+\tprivate JsonNode loadPropertyNode(String moduleName, String propertyName) {\n+\t\tnotNull(moduleName, \"configFile\");\n+\t\tnotNull(propertyName, \"propertyName\");\n+\n+\t\tString path = modulesDirPath + moduleName + \".yaml\";\n+\n+\t\tJsonNode root = loadModulesYamlFile(path);\n+\n+\t\tJsonNode propertyNode = parsePropertyNode(root, propertyName);\n+\t\tif (propertyNode == null) {\n+\t\t\tthrow new InternalErrorException(\"Failed to parse property: '\" + propertyName + \"' from file: \" + path);\n+\t\t}\n+\t\treturn propertyNode;\n+\t}\n+\n+\tprivate static JsonNode parsePropertyNode(JsonNode root, String propertyName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE2NjIwOQ==", "bodyText": "You should mention that the property name can be chained by dots.", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r426166209", "createdAt": "2020-05-16T16:01:42Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/ModulesConfigLoader.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package cz.metacentrum.perun.core.impl.modules;\n+\n+import java.util.List;\n+\n+/**\n+ * @author Vojtech Sassmann <vojtech.sassmann@gmail.com>\n+ */\n+public interface ModulesConfigLoader {\n+\n+\t/**\n+\t * For module with the given name, find a String configuration property with given name.\n+\t *\n+\t * @param moduleName name of a module\n+\t * @param property name of a property", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE2Njg4Mg==", "bodyText": "I am citing Pavel Z. who commented on this behavior in the previous PR:\n\"I just wonder, if we couldn't use empty value as a correct input for some logic. Like value is either set or not, then some logic performs specific or generic behavior. You could fall-back to default values by type like empty list / null / false etc.\"", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r426166882", "createdAt": "2020-05-16T16:09:36Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/ModulesYamlConfigLoader.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package cz.metacentrum.perun.core.impl.modules;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.dataformat.yaml.YAMLFactory;\n+import cz.metacentrum.perun.core.api.exceptions.InternalErrorException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static cz.metacentrum.perun.core.impl.Utils.notNull;\n+\n+/**\n+ * @author Vojtech Sassmann <vojtech.sassmann@gmail.com>\n+ */\n+\n+public class ModulesYamlConfigLoader implements ModulesConfigLoader {\n+\n+\tprivate final static Logger log = LoggerFactory.getLogger(ModulesYamlConfigLoader.class);\n+\n+\tprivate static final ObjectMapper yamlObjectMapper = new ObjectMapper(new YAMLFactory());\n+\tprivate String modulesDirPath = \"/etc/perun/modules/\";\n+\n+\tpublic ModulesYamlConfigLoader() { }\n+\n+\tpublic ModulesYamlConfigLoader(String modulesDirPath) {\n+\t\tthis.modulesDirPath = modulesDirPath;\n+\t}\n+\n+\t@Override\n+\tpublic String loadStringProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).asText();\n+\t}\n+\n+\t@Override\n+\tpublic Integer loadIntegerProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).isNull() ? null : loadPropertyNode(moduleName, property).asInt();\n+\t}\n+\n+\t@Override\n+\tpublic List<String> loadStringListProperty(String moduleName, String property) {\n+\t\tList<String> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.asText()));\n+\t\treturn values;\n+\t}\n+\n+\t@Override\n+\tpublic List<Integer> loadIntegerListProperty(String moduleName, String property) {\n+\t\tList<Integer> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.isNull() ? null : node.asInt()));\n+\t\treturn values;\n+\t}\n+\n+\tprivate JsonNode loadPropertyNode(String moduleName, String propertyName) {\n+\t\tnotNull(moduleName, \"configFile\");\n+\t\tnotNull(propertyName, \"propertyName\");\n+\n+\t\tString path = modulesDirPath + moduleName + \".yaml\";\n+\n+\t\tJsonNode root = loadModulesYamlFile(path);\n+\n+\t\tJsonNode propertyNode = parsePropertyNode(root, propertyName);\n+\t\tif (propertyNode == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTQ2MjM2", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-413146236", "createdAt": "2020-05-17T10:02:51Z", "commit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDowMjo1MlrOGWfvMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDowMjo1MlrOGWfvMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0MTg0MQ==", "bodyText": "Here I would prefer this way of loading a YAML file:\nYAMLMapper mapper = new YAMLMapper();\nreturn mapper.readTree(new File(path));", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r426241841", "createdAt": "2020-05-17T10:02:52Z", "author": {"login": "martin-kuba"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/ModulesYamlConfigLoader.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package cz.metacentrum.perun.core.impl.modules;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.dataformat.yaml.YAMLFactory;\n+import cz.metacentrum.perun.core.api.exceptions.InternalErrorException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static cz.metacentrum.perun.core.impl.Utils.notNull;\n+\n+/**\n+ * @author Vojtech Sassmann <vojtech.sassmann@gmail.com>\n+ */\n+\n+public class ModulesYamlConfigLoader implements ModulesConfigLoader {\n+\n+\tprivate final static Logger log = LoggerFactory.getLogger(ModulesYamlConfigLoader.class);\n+\n+\tprivate static final ObjectMapper yamlObjectMapper = new ObjectMapper(new YAMLFactory());\n+\tprivate String modulesDirPath = \"/etc/perun/modules/\";\n+\n+\tpublic ModulesYamlConfigLoader() { }\n+\n+\tpublic ModulesYamlConfigLoader(String modulesDirPath) {\n+\t\tthis.modulesDirPath = modulesDirPath;\n+\t}\n+\n+\t@Override\n+\tpublic String loadStringProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).asText();\n+\t}\n+\n+\t@Override\n+\tpublic Integer loadIntegerProperty(String moduleName, String property) {\n+\t\treturn loadPropertyNode(moduleName, property).isNull() ? null : loadPropertyNode(moduleName, property).asInt();\n+\t}\n+\n+\t@Override\n+\tpublic List<String> loadStringListProperty(String moduleName, String property) {\n+\t\tList<String> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.asText()));\n+\t\treturn values;\n+\t}\n+\n+\t@Override\n+\tpublic List<Integer> loadIntegerListProperty(String moduleName, String property) {\n+\t\tList<Integer> values = new ArrayList<>();\n+\t\tJsonNode propertyNode = loadPropertyNode(moduleName, property);\n+\t\tpropertyNode.iterator().forEachRemaining(node -> values.add(node.isNull() ? null : node.asInt()));\n+\t\treturn values;\n+\t}\n+\n+\tprivate JsonNode loadPropertyNode(String moduleName, String propertyName) {\n+\t\tnotNull(moduleName, \"configFile\");\n+\t\tnotNull(propertyName, \"propertyName\");\n+\n+\t\tString path = modulesDirPath + moduleName + \".yaml\";\n+\n+\t\tJsonNode root = loadModulesYamlFile(path);\n+\n+\t\tJsonNode propertyNode = parsePropertyNode(root, propertyName);\n+\t\tif (propertyNode == null) {\n+\t\t\tthrow new InternalErrorException(\"Failed to parse property: '\" + propertyName + \"' from file: \" + path);\n+\t\t}\n+\t\treturn propertyNode;\n+\t}\n+\n+\tprivate static JsonNode parsePropertyNode(JsonNode root, String propertyName) {\n+\t\tJsonNode currentNode = root;\n+\t\twhile (propertyName.contains(\".\")) {\n+\t\t\tString[] split = propertyName.split(\"\\\\.\", 2);\n+\t\t\tcurrentNode = currentNode.get(split[0]);\n+\t\t\tpropertyName = split[1];\n+\t\t}\n+\t\treturn currentNode.get(propertyName);\n+\t}\n+\n+\tprivate static JsonNode loadModulesYamlFile(String path) {\n+\t\ttry (InputStream is = new FileInputStream(path)) {\n+\t\t\treturn yamlObjectMapper.readTree(is);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f"}, "originalPosition": 88}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b657fa44df67514a3f4b12bc42d3d408e908207f", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/b657fa44df67514a3f4b12bc42d3d408e908207f", "committedDate": "2020-05-15T14:21:59Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "149e9722934a737ef01edf450a1b7fb29c562022", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/149e9722934a737ef01edf450a1b7fb29c562022", "committedDate": "2020-05-21T09:22:31Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "149e9722934a737ef01edf450a1b7fb29c562022", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/149e9722934a737ef01edf450a1b7fb29c562022", "committedDate": "2020-05-21T09:22:31Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "1dc60ccb6164fc1c1a3cd7a917f303a321fd8036", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/1dc60ccb6164fc1c1a3cd7a917f303a321fd8036", "committedDate": "2020-05-21T09:27:36Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1dc60ccb6164fc1c1a3cd7a917f303a321fd8036", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/1dc60ccb6164fc1c1a3cd7a917f303a321fd8036", "committedDate": "2020-05-21T09:27:36Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "d118155ac5745efc75717108ccb50317d0ac8cb0", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/d118155ac5745efc75717108ccb50317d0ac8cb0", "committedDate": "2020-05-21T09:28:01Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d118155ac5745efc75717108ccb50317d0ac8cb0", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/d118155ac5745efc75717108ccb50317d0ac8cb0", "committedDate": "2020-05-21T09:28:01Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/69a8dc0a423261b985124d788a6e9bd7b2bcfd51", "committedDate": "2020-05-21T09:29:32Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MzUwNjgx", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-416350681", "createdAt": "2020-05-21T17:33:50Z", "commit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODk4MDY3", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-416898067", "createdAt": "2020-05-22T13:12:03Z", "commit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzU4NDMz", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-417358433", "createdAt": "2020-05-24T13:23:59Z", "commit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMzoyMzo1OVrOGZu7FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMzoyMzo1OVrOGZu7FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzNjM3Mg==", "bodyText": "I've just realized that the domain name property will be stored without the \"@\" character. However, we need to include the \"@\" while setting the attribute value.\nSo, please could you change the code to something like this?\nif (attribute.getFriendlyName().equals(attrNameFenix)) {\n    String domain = \"@\" + getDomainNameFenix();\n    filledAttribute.setValue(sha1HashCount(user, domain).toString() + domain);", "url": "https://github.com/CESNET/perun/pull/2705#discussion_r429636372", "createdAt": "2020-05-24T13:23:59Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_user_attribute_def_def_login_namespace_fenix_persistent_shadow.java", "diffHunk": "@@ -41,7 +54,7 @@ public Attribute fillAttribute(PerunSessionImpl perunSession, User user, Attribu\n \t\tAttribute filledAttribute = new Attribute(attribute);\n \n \t\tif (attribute.getFriendlyName().equals(attrNameFenix)) {\n-\t\t\tfilledAttribute.setValue(sha1HashCount(user, domainNameFenix).toString() + domainNameFenix);\n+\t\t\tfilledAttribute.setValue(sha1HashCount(user, getDomainNameFenix()).toString() + getDomainNameFenix());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7234cf8294cfbd711f91a0af1b6e908f9ef979a9", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/7234cf8294cfbd711f91a0af1b6e908f9ef979a9", "committedDate": "2020-05-25T11:38:20Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69a8dc0a423261b985124d788a6e9bd7b2bcfd51", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/69a8dc0a423261b985124d788a6e9bd7b2bcfd51", "committedDate": "2020-05-21T09:29:32Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}, "afterCommit": {"oid": "7234cf8294cfbd711f91a0af1b6e908f9ef979a9", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/7234cf8294cfbd711f91a0af1b6e908f9ef979a9", "committedDate": "2020-05-25T11:38:20Z", "message": "Attribute modules configuration\n\n* Some attribute modules need to have a separate configuration file.\nThese configurations should be located inside the /etc/perun/modules/\nfolder.\n\n* Created ModulesConfigLoader component that is used to load a module's\nconfigurations.\n\n* In the module of u:def:login_namespace_fenix_persistent_shadow\nattribute added loading of extSourceNameFenix and domainNameFenix from\nits configuration file. If the module is not used, the configuration\nfile does not need to exist."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzA4NzMz", "url": "https://github.com/CESNET/perun/pull/2705#pullrequestreview-417708733", "createdAt": "2020-05-25T13:24:27Z", "commit": {"oid": "7234cf8294cfbd711f91a0af1b6e908f9ef979a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1375, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}