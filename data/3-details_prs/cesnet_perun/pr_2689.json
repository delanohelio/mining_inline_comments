{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzM2NzA4", "number": 2689, "title": "CORE: Fixed getAssignedServices(resource)", "bodyText": "It previously retrieved service IDs and then asked\nfor each service by ID in the BL. Now we retrieve\nlist of services directly in DAO layer.", "createdAt": "2020-05-08T17:11:30Z", "url": "https://github.com/CESNET/perun/pull/2689", "merged": true, "mergeCommit": {"oid": "51d4426b445ac86b94a66ae8772609064c1320f2"}, "closed": true, "closedAt": "2020-05-11T07:42:13Z", "author": {"login": "zlamalp"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfVEaxAH2gAyNDE1MzM2NzA4OjE3NjBjZTNiNzBmZTQxZmU3NTYxMDI1ZWY5ZmExZDkwYWUzM2NiNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgKnSGgFqTQwODkyNzAyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1760ce3b70fe41fe7561025ef9fa1d90ae33cb56", "author": {"user": {"login": "zlamalp", "name": "Pavel Zl\u00e1mal"}}, "url": "https://github.com/CESNET/perun/commit/1760ce3b70fe41fe7561025ef9fa1d90ae33cb56", "committedDate": "2020-05-08T17:10:34Z", "message": "CORE: Fixed getAssignedServices(resource)\n\n- It previously retrieved service IDs and then asked\n  for each service by ID in the BL. Now we retrieve\n  list of services directly in DAO layer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTIwNDYy", "url": "https://github.com/CESNET/perun/pull/2689#pullrequestreview-408920462", "createdAt": "2020-05-11T07:23:43Z", "commit": {"oid": "1760ce3b70fe41fe7561025ef9fa1d90ae33cb56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzoyMzo0M1rOGTPxAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzoyMzo0M1rOGTPxAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgzNDQzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t\" from services join resource_services on services.id=resource_services.service_id and resource_services.resource_id=?\",\n          \n          \n            \n            \t\t\t\t\t\" from services join resource_services on services.id=resource_services.service_id where resource_services.resource_id=?\",\n          \n      \n    \n    \n  \n\nI just wanted to ask, if there is a reason to use the condition in the join like you do, instead of writing WHERE?", "url": "https://github.com/CESNET/perun/pull/2689#discussion_r422834435", "createdAt": "2020-05-11T07:23:43Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ResourcesManagerImpl.java", "diffHunk": "@@ -560,9 +560,11 @@ public boolean isGroupAssigned(PerunSession sess, Group group, Resource resource\n \t}\n \n \t@Override\n-\tpublic List<Integer> getAssignedServices(PerunSession sess, Resource resource) throws InternalErrorException {\n+\tpublic List<Service> getAssignedServices(PerunSession sess, Resource resource) throws InternalErrorException {\n \t\ttry {\n-\t\t\treturn jdbc.query(\"select service_id as id from resource_services where resource_id=?\", Utils.ID_MAPPER, resource.getId());\n+\t\t\treturn jdbc.query(\"select \"+ ServicesManagerImpl.serviceMappingSelectQuery +\n+\t\t\t\t\t\" from services join resource_services on services.id=resource_services.service_id and resource_services.resource_id=?\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1760ce3b70fe41fe7561025ef9fa1d90ae33cb56"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTIxMDM2", "url": "https://github.com/CESNET/perun/pull/2689#pullrequestreview-408921036", "createdAt": "2020-05-11T07:24:39Z", "commit": {"oid": "1760ce3b70fe41fe7561025ef9fa1d90ae33cb56"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTI3MDIx", "url": "https://github.com/CESNET/perun/pull/2689#pullrequestreview-408927021", "createdAt": "2020-05-11T07:33:37Z", "commit": {"oid": "1760ce3b70fe41fe7561025ef9fa1d90ae33cb56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1367, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}