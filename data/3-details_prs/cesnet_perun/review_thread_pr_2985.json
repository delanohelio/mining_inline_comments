{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNDM1OTcx", "number": 2985, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToyNDo0NFrOE4oPdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToyNjowOFrOE4oRLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3ODE1MDI5OnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToyNDo0NFrOHyquPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMTo0MjowNlrOHyrNNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5MDgxNQ==", "bodyText": "Is there any reason for these empty lines?", "url": "https://github.com/CESNET/perun/pull/2985#discussion_r522890815", "createdAt": "2020-11-13T11:24:44Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "diffHunk": "@@ -1243,6 +1243,8 @@ public static void makeUserPerunAdmin(PerunSession sess, User user) throws Alrea\n \t\t\tthrow new RoleCannotBeManagedException(role, complementaryObject);\n \t\t}\n \n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07f494c664afdf2a73299988f870e78c994c56a5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5ODc0MQ==", "bodyText": "Fixed", "url": "https://github.com/CESNET/perun/pull/2985#discussion_r522898741", "createdAt": "2020-11-13T11:42:06Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "diffHunk": "@@ -1243,6 +1243,8 @@ public static void makeUserPerunAdmin(PerunSession sess, User user) throws Alrea\n \t\t\tthrow new RoleCannotBeManagedException(role, complementaryObject);\n \t\t}\n \n+\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5MDgxNQ=="}, "originalCommit": {"oid": "07f494c664afdf2a73299988f870e78c994c56a5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3ODE1NDY5OnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToyNjowOFrOHyqwwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMTo0MjoxMVrOHyrNWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5MTQ1OA==", "bodyText": "This is not the correct way how to name variables in Java.", "url": "https://github.com/CESNET/perun/pull/2985#discussion_r522891458", "createdAt": "2020-11-13T11:26:08Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "diffHunk": "@@ -2129,11 +2131,19 @@ private static boolean objectAndRoleManageableByEntity(String entityToManage, Pe\n \t\t\tthrow new InternalErrorException(\"Management rules not exist for the role \" + role, e);\n \t\t}\n \n-\t\treturn createMappingOfValues(complementaryObject, role, rules);\n+\t\t//For reading a role it is enough to know role and the primary object.\n+\t\t//No need to fetch all related objects\n+\t\tMap<String, Integer> mapping = new HashMap<>();\n+\t\tInteger role_id = authzResolverImpl.getRoleId(role);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07f494c664afdf2a73299988f870e78c994c56a5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5ODc3OQ==", "bodyText": "Fixed", "url": "https://github.com/CESNET/perun/pull/2985#discussion_r522898779", "createdAt": "2020-11-13T11:42:11Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AuthzResolverBlImpl.java", "diffHunk": "@@ -2129,11 +2131,19 @@ private static boolean objectAndRoleManageableByEntity(String entityToManage, Pe\n \t\t\tthrow new InternalErrorException(\"Management rules not exist for the role \" + role, e);\n \t\t}\n \n-\t\treturn createMappingOfValues(complementaryObject, role, rules);\n+\t\t//For reading a role it is enough to know role and the primary object.\n+\t\t//No need to fetch all related objects\n+\t\tMap<String, Integer> mapping = new HashMap<>();\n+\t\tInteger role_id = authzResolverImpl.getRoleId(role);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg5MTQ1OA=="}, "originalCommit": {"oid": "07f494c664afdf2a73299988f870e78c994c56a5"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2169, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}