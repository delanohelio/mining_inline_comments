{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTEwMzI4", "number": 2775, "title": "New method forceAllSubGroupsSynchronization", "bodyText": "to be able to force synchronization of all subgroups (whole tree) of\nany base group, we need to add new method for it\nin forcing group process we need to also check if group is enabled to\nbe synchronized, if not, new exception should be thrown. For this\nreason GroupSynchronizationNotEnabledException was created\nadd new method also to rpc and openapi", "createdAt": "2020-07-02T13:16:21Z", "url": "https://github.com/CESNET/perun/pull/2775", "merged": true, "mergeCommit": {"oid": "3c4720159a8060821b94ca3b85f87abbf7f4e54b"}, "closed": true, "closedAt": "2020-07-07T11:07:35Z", "author": {"login": "stavamichal"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxPLYrgFqTQ0MjIzODU2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyjtSFAFqTQ0Mzc4MjE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjM4NTY3", "url": "https://github.com/CESNET/perun/pull/2775#pullrequestreview-442238567", "createdAt": "2020-07-03T08:27:09Z", "commit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODoyNzowOVrOGsoP4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODoyNzowOVrOGsoP4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ0OTk1Mg==", "bodyText": "This attribute is not boolean but String so I do not think you can cast it to boolean like that.", "url": "https://github.com/CESNET/perun/pull/2775#discussion_r449449952", "createdAt": "2020-07-03T08:27:09Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -1739,20 +1740,27 @@ protected boolean hasCandidateExistingMember(Candidate candidate, RichMember ric\n \t\treturn skippedGroups;\n \t}\n \n-\t/**\n-\t * Adds the group on the first place to the queue of groups waiting for synchronization.\n-\t *\n-\t * @param group the group to be forced this way\n-\t *\n-\t * @throws GroupSynchronizationAlreadyRunningException when group synchronization is already running at this moment\n-\t */\n \t@Override\n-\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException {\n-\t\t//Check if the group is not currently in synchronization process\n-\t\tif(poolOfSynchronizations.putGroupToPoolOfWaitingGroups(group, true)) {\n-\t\t\tlog.debug(\"Scheduling synchronization for the group {} by force!\", group);\n+\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException, GroupSynchronizationNotEnabledException {\n+\t\t//Check if the group should be synchronized (attribute synchronizationEnabled is set to 'true')\n+\t\tBoolean syncEnabled = false;\n+\t\ttry {\n+\t\t\tAttribute syncEnabledAttr = getPerunBl().getAttributesManagerBl().getAttribute(sess, group, GroupsManager.GROUPSYNCHROENABLED_ATTRNAME);\n+\t\t\tif(syncEnabledAttr.getValue() != null) syncEnabled = syncEnabledAttr.valueAsBoolean();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzE0Mjc1", "url": "https://github.com/CESNET/perun/pull/2775#pullrequestreview-442314275", "createdAt": "2020-07-03T10:24:03Z", "commit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "501811ca28f68bb42001019f52944467f7b3926e", "author": {"user": {"login": "stavamichal", "name": "Michal Stava"}}, "url": "https://github.com/CESNET/perun/commit/501811ca28f68bb42001019f52944467f7b3926e", "committedDate": "2020-07-07T10:53:28Z", "message": "New method forceAllSubGroupsSynchronization\n\n - to be able to force synchronization of all subgroups (whole tree) of\n any base group, we need to add new method for it\n - in forcing group process we need to also check if group is enabled to\n be synchronized, if not, new exception should be thrown. For this\n reason GroupSynchronizationNotEnabledException was created\n - add new method also to rpc and openapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37", "author": {"user": {"login": "stavamichal", "name": "Michal Stava"}}, "url": "https://github.com/CESNET/perun/commit/e76e45e6aabba8116a788b58fcb815dcebe1df37", "committedDate": "2020-07-02T13:13:46Z", "message": "New method forceAllSubGroupsSynchronization\n\n - to be able to force synchronization of all subgroups (whole tree) of\n any base group, we need to add new method for it\n - in forcing group process we need to also check if group is enabled to\n be synchronized, if not, new exception should be thrown. For this\n reason GroupSynchronizationNotEnabledException was created\n - add new method also to rpc and openapi"}, "afterCommit": {"oid": "501811ca28f68bb42001019f52944467f7b3926e", "author": {"user": {"login": "stavamichal", "name": "Michal Stava"}}, "url": "https://github.com/CESNET/perun/commit/501811ca28f68bb42001019f52944467f7b3926e", "committedDate": "2020-07-07T10:53:28Z", "message": "New method forceAllSubGroupsSynchronization\n\n - to be able to force synchronization of all subgroups (whole tree) of\n any base group, we need to add new method for it\n - in forcing group process we need to also check if group is enabled to\n be synchronized, if not, new exception should be thrown. For this\n reason GroupSynchronizationNotEnabledException was created\n - add new method also to rpc and openapi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNzgyMTY1", "url": "https://github.com/CESNET/perun/pull/2775#pullrequestreview-443782165", "createdAt": "2020-07-07T10:58:26Z", "commit": {"oid": "501811ca28f68bb42001019f52944467f7b3926e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1241, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}