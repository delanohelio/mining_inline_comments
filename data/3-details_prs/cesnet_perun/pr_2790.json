{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MzUyNDQ3", "number": 2790, "title": "DISPATCHER: Reintroduced configurable re-schedule interval", "bodyText": "If Tasks are DONE or ERROR for too many hours, they will\nbe re-scheduled, even if source data hasn't changed.\nIt was previously configurable, then we\nswitched to fixed \"two days\" period.\nNow, it is configurable again, defaulting to two days\n(setting is in hours in perun-dispatcher.properties).", "createdAt": "2020-07-15T09:12:43Z", "url": "https://github.com/CESNET/perun/pull/2790", "merged": true, "mergeCommit": {"oid": "70e8424a68bd4ca2e8e9cc83c9e5acea92d964c6"}, "closed": true, "closedAt": "2020-07-21T18:09:35Z", "author": {"login": "zlamalp"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3GiZVgFqTQ1MjQ3NDE3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3KJlPABqjM1NzI0ODI3MjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDc0MTcy", "url": "https://github.com/CESNET/perun/pull/2790#pullrequestreview-452474172", "createdAt": "2020-07-21T13:47:37Z", "commit": {"oid": "0063be93e9a1542a15dc4fe4018f4e71cf1699d1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzo0NzozN1rOG04zDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzo0NzozN1rOG04zDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwOTcxMQ==", "bodyText": "Probably just a typo here: \"toManyHoursAgo\" -> \"tooManyHoursAgo\".", "url": "https://github.com/CESNET/perun/pull/2790#discussion_r458109711", "createdAt": "2020-07-21T13:47:37Z", "author": {"login": "mvocu"}, "path": "perun-dispatcher/src/main/java/cz/metacentrum/perun/dispatcher/scheduling/PropagationMaintainer.java", "diffHunk": "@@ -186,11 +191,11 @@ private void rescheduleErrorTasks() {\n \t\t\t\thowManyMinutesAgo = task.getDelay() + 1;\n \t\t\t}\n \n-\t\t\tlog.trace(\"[{}] Task in ERROR state completed {} minutes ago: {}.\", new Object[]{task.getId(), howManyMinutesAgo, task});\n+\t\t\tlog.trace(\"[{}] Task in ERROR state completed {} minutes ago: {}.\", task.getId(), howManyMinutesAgo, task);\n \n \t\t\t// If DELAY time has passed, we reschedule...\n \t\t\tint recurrence = task.getRecurrence() + 1;\n-\t\t\tLocalDateTime twoDaysAgo = LocalDateTime.now().minusDays(2);\n+\t\t\tLocalDateTime toManyHoursAgo = LocalDateTime.now().minusHours(oldRescheduleHours);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0063be93e9a1542a15dc4fe4018f4e71cf1699d1"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "author": {"user": {"login": "zlamalp", "name": "Pavel Zl\u00e1mal"}}, "url": "https://github.com/CESNET/perun/commit/01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "committedDate": "2020-07-21T17:59:07Z", "message": "DISPATCHER: Reintroduced configurable re-schedule interval\n\n- If Tasks are DONE or ERROR for too many hours, they will\n  be re-scheduled. It was previously configurable, then we\n  switched to fixed \"two days\" period.\n  Now, it is configurable again, defaulting to two days\n  (setting is in hours in perun-dispatcher.properties)."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0063be93e9a1542a15dc4fe4018f4e71cf1699d1", "author": {"user": {"login": "zlamalp", "name": "Pavel Zl\u00e1mal"}}, "url": "https://github.com/CESNET/perun/commit/0063be93e9a1542a15dc4fe4018f4e71cf1699d1", "committedDate": "2020-07-15T09:10:48Z", "message": "DISPATCHER: Reintroduced configurable re-schedule interval\n\n- If Tasks are DONE or ERROR for too many hours, they will\n  be re-scheduled. It was previously configurable, then we\n  switched to fixed \"two days\" period.\n  Now, it is configurable again, defaulting to two days\n  (setting is in hours in perun-dispatcher.properties)."}, "afterCommit": {"oid": "01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "author": {"user": {"login": "zlamalp", "name": "Pavel Zl\u00e1mal"}}, "url": "https://github.com/CESNET/perun/commit/01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "committedDate": "2020-07-21T17:59:07Z", "message": "DISPATCHER: Reintroduced configurable re-schedule interval\n\n- If Tasks are DONE or ERROR for too many hours, they will\n  be re-scheduled. It was previously configurable, then we\n  switched to fixed \"two days\" period.\n  Now, it is configurable again, defaulting to two days\n  (setting is in hours in perun-dispatcher.properties)."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1252, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}