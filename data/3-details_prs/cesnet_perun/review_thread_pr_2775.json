{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTEwMzI4", "number": 2775, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODoyNzowOVrOELK1rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODoyNzowOVrOELK1rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMTQ3MzcyOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODoyNzowOVrOGsoP4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMDo1NToyNFrOGt5Wng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ0OTk1Mg==", "bodyText": "This attribute is not boolean but String so I do not think you can cast it to boolean like that.", "url": "https://github.com/CESNET/perun/pull/2775#discussion_r449449952", "createdAt": "2020-07-03T08:27:09Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -1739,20 +1740,27 @@ protected boolean hasCandidateExistingMember(Candidate candidate, RichMember ric\n \t\treturn skippedGroups;\n \t}\n \n-\t/**\n-\t * Adds the group on the first place to the queue of groups waiting for synchronization.\n-\t *\n-\t * @param group the group to be forced this way\n-\t *\n-\t * @throws GroupSynchronizationAlreadyRunningException when group synchronization is already running at this moment\n-\t */\n \t@Override\n-\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException {\n-\t\t//Check if the group is not currently in synchronization process\n-\t\tif(poolOfSynchronizations.putGroupToPoolOfWaitingGroups(group, true)) {\n-\t\t\tlog.debug(\"Scheduling synchronization for the group {} by force!\", group);\n+\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException, GroupSynchronizationNotEnabledException {\n+\t\t//Check if the group should be synchronized (attribute synchronizationEnabled is set to 'true')\n+\t\tBoolean syncEnabled = false;\n+\t\ttry {\n+\t\t\tAttribute syncEnabledAttr = getPerunBl().getAttributesManagerBl().getAttribute(sess, group, GroupsManager.GROUPSYNCHROENABLED_ATTRNAME);\n+\t\t\tif(syncEnabledAttr.getValue() != null) syncEnabled = syncEnabledAttr.valueAsBoolean();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc3ODc4Mg==", "bodyText": "You are right, fixed.", "url": "https://github.com/CESNET/perun/pull/2775#discussion_r450778782", "createdAt": "2020-07-07T10:55:24Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -1739,20 +1740,27 @@ protected boolean hasCandidateExistingMember(Candidate candidate, RichMember ric\n \t\treturn skippedGroups;\n \t}\n \n-\t/**\n-\t * Adds the group on the first place to the queue of groups waiting for synchronization.\n-\t *\n-\t * @param group the group to be forced this way\n-\t *\n-\t * @throws GroupSynchronizationAlreadyRunningException when group synchronization is already running at this moment\n-\t */\n \t@Override\n-\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException {\n-\t\t//Check if the group is not currently in synchronization process\n-\t\tif(poolOfSynchronizations.putGroupToPoolOfWaitingGroups(group, true)) {\n-\t\t\tlog.debug(\"Scheduling synchronization for the group {} by force!\", group);\n+\tpublic void forceGroupSynchronization(PerunSession sess, Group group) throws GroupSynchronizationAlreadyRunningException, GroupSynchronizationNotEnabledException {\n+\t\t//Check if the group should be synchronized (attribute synchronizationEnabled is set to 'true')\n+\t\tBoolean syncEnabled = false;\n+\t\ttry {\n+\t\t\tAttribute syncEnabledAttr = getPerunBl().getAttributesManagerBl().getAttribute(sess, group, GroupsManager.GROUPSYNCHROENABLED_ATTRNAME);\n+\t\t\tif(syncEnabledAttr.getValue() != null) syncEnabled = syncEnabledAttr.valueAsBoolean();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ0OTk1Mg=="}, "originalCommit": {"oid": "e76e45e6aabba8116a788b58fcb815dcebe1df37"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1925, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}