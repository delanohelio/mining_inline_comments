{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNzk4OTI1", "number": 2957, "title": "Fix policies for sponsor methods", "bodyText": "We wanted sponsors to be able call methods removeSponsor and\nsponsorMember. We also don't want VoAdmins to do this, this is\njob for sponsors.\nHowever, the policy for the removeSponsor method has to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "createdAt": "2020-10-28T19:51:08Z", "url": "https://github.com/CESNET/perun/pull/2957", "merged": true, "mergeCommit": {"oid": "6aedc9f94d7d0f65b30c1b2eb8d4a45cac711535"}, "closed": true, "closedAt": "2020-10-28T20:24:37Z", "author": {"login": "Vojtech-Sassmann"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXDUWPAFqTUxOTA0Mjg2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXDgemgFqTUxOTA0NjYzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDQyODYz", "url": "https://github.com/CESNET/perun/pull/2957#pullrequestreview-519042863", "createdAt": "2020-10-28T20:09:11Z", "commit": {"oid": "ecc115319da95f6922131f98471c05733c0a8ddb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDowOToxMVrOHp7hZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMDowOToxMVrOHp7hZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcyODg2OQ==", "bodyText": "I do not think you want to split this policy into two. When you call method sponsorMember you don't have the SPONSORSHIP role with the member yet. therefore, what you want to use is this:\n  sponsor-sponsorMember_Member_User_LocalDate_policy:\n    policy_roles:\n      - SPONSOR: Vo\n        SELF: User\n    include_policies:\n      - default_policy", "url": "https://github.com/CESNET/perun/pull/2957#discussion_r513728869", "createdAt": "2020-10-28T20:09:11Z", "author": {"login": "balcirakpeter"}, "path": "perun-base/src/main/resources/perun-roles.yml", "diffHunk": "@@ -2471,9 +2471,15 @@ perun_policies:\n     include_policies:\n       - default_policy\n \n-  sponsorMember_Member_User_LocalDate_policy:\n+  sponsored-sponsorMember_Member_User_LocalDate_policy:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecc115319da95f6922131f98471c05733c0a8ddb"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ecc115319da95f6922131f98471c05733c0a8ddb", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/ecc115319da95f6922131f98471c05733c0a8ddb", "committedDate": "2020-10-28T19:49:49Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}, "afterCommit": {"oid": "f7bcaba0bc641705a9645034c3df6e3590b3536d", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/f7bcaba0bc641705a9645034c3df6e3590b3536d", "committedDate": "2020-10-28T20:13:05Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7bcaba0bc641705a9645034c3df6e3590b3536d", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/f7bcaba0bc641705a9645034c3df6e3590b3536d", "committedDate": "2020-10-28T20:13:05Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}, "afterCommit": {"oid": "3c6805e840205b1244a8f30de75b6253151d351d", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/3c6805e840205b1244a8f30de75b6253151d351d", "committedDate": "2020-10-28T20:13:45Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c6805e840205b1244a8f30de75b6253151d351d", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/3c6805e840205b1244a8f30de75b6253151d351d", "committedDate": "2020-10-28T20:13:45Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}, "afterCommit": {"oid": "f3384b964a68279a0a5335a419fdade5e9690bab", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/f3384b964a68279a0a5335a419fdade5e9690bab", "committedDate": "2020-10-28T20:14:04Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policy for the removeSponsors method has to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "committedDate": "2020-10-28T20:17:20Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3384b964a68279a0a5335a419fdade5e9690bab", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/f3384b964a68279a0a5335a419fdade5e9690bab", "committedDate": "2020-10-28T20:14:04Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policy for the removeSponsors method has to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}, "afterCommit": {"oid": "d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "author": {"user": {"login": "Vojtech-Sassmann", "name": "Vojt\u011bch Sassmann"}}, "url": "https://github.com/CESNET/perun/commit/d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "committedDate": "2020-10-28T20:17:20Z", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDUwMTIz", "url": "https://github.com/CESNET/perun/pull/2957#pullrequestreview-519050123", "createdAt": "2020-10-28T20:19:21Z", "commit": {"oid": "d0e5393396d48f4ef0ba1116ec8c93426dd8a28b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDQ2NjMx", "url": "https://github.com/CESNET/perun/pull/2957#pullrequestreview-519046631", "createdAt": "2020-10-28T20:14:22Z", "commit": {"oid": "f7bcaba0bc641705a9645034c3df6e3590b3536d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1127, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}