{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5OTk0Njkx", "number": 2765, "title": "removed artificial limits on varchar lengths", "bodyText": "In PostgreSQL and HSQL, limiting the length of a varchar database column is useless, it does not save any space and adds a small overhead.\n\nreplaced all \"varchar(N)\" with \"varchar\" in postgres.sql\nadded corresponding ALTER TABLE ALTER COLUMN lines into postgresChangelog.txt\nreplaced all \"vachar(N)\" with \"longvarchar\" in test-schema.sql (longvarchar is a synonym for varchar but it does not need the limit)\nremoved useless lines from hsqldbChangelog.txt and postgresChangelog.txt", "createdAt": "2020-06-25T12:42:18Z", "url": "https://github.com/CESNET/perun/pull/2765", "merged": true, "mergeCommit": {"oid": "f031e6a192e1bc36a3f6d6975c53b45877e22abb"}, "closed": true, "closedAt": "2020-06-26T10:20:27Z", "author": {"login": "martin-kuba"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcut675AH2gAyNDM5OTk0NjkxOjBhOTkzZjM0OThjNGJkZDRhNDYyNWI5Y2RkYjk4MTM4Y2JhZDg1YmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvAikigFqTQzODE4MTIyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "author": {"user": {"login": "martin-kuba", "name": "Martin Kuba"}}, "url": "https://github.com/CESNET/perun/commit/0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "committedDate": "2020-06-25T12:36:42Z", "message": "removed artificial limits on varchar lengths"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDIwOTg4", "url": "https://github.com/CESNET/perun/pull/2765#pullrequestreview-438020988", "createdAt": "2020-06-26T05:24:31Z", "commit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNToyNDozMVrOGpUE5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNTozMjoyNlrOGpUMrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3MzczNQ==", "bodyText": "Change varchar(1) to char(1) is missing in postgresql changelog. Also we should probably default to '0' (character not int) as other char columns do. It can be later updated to boolean, but I would like to have converts from char to boolean as a separate pull-request.", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445973735", "createdAt": "2020-06-26T05:24:31Z", "author": {"login": "zlamalp"}, "path": "perun-db/postgres.sql", "diffHunk": "@@ -84,16 +84,16 @@ create table cabinet_publications (\n \tid integer not null,\n \texternalId integer not null, --identifier at externa pub. system\n \tpublicationSystemId integer not null, --identifier of external pub. system (cabinet_publication_systems.id) *)\n-\ttitle varchar(1024) not null,\n+\ttitle varchar not null,\n \tyear integer not null, --short title of publication\n-\tmain varchar(4000), --full cite of publication\n-\tisbn varchar(32),\n+\tmain varchar, --full cite of publication\n+\tisbn varchar,\n \tcategoryId integer not null, --identifier of category (cabinet_categories.id)\n-\tcreatedBy varchar(1300) default user not null,\n+\tcreatedBy varchar default user not null,\n \tcreatedDate timestamp not null,\n \trank numeric (38,1) default 0 not null,\n-\tdoi varchar(256),\n-\tlocked varchar(1) default 0 not null,\n+\tdoi varchar,\n+\tlocked char(1) default 0 not null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NDIwNg==", "bodyText": "Again this change is missing from postgresql changelog.", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445974206", "createdAt": "2020-06-26T05:26:20Z", "author": {"login": "zlamalp"}, "path": "perun-db/postgres.sql", "diffHunk": "@@ -563,9 +563,9 @@ create table application_data (\n create table application_mails (\n \tid integer not null,\n \tform_id integer not null,       --identifier of form (application_form.id)\n-\tapp_type varchar(30) not null,  --application type (initial/extension)\n-\tmail_type varchar(30) not null, --type of mail (user/administrator)\n-\tsend varchar(1) not null,       --sent (Y/N)\n+\tapp_type varchar not null,  --application type (initial/extension)\n+\tmail_type varchar not null, --type of mail (user/administrator)\n+\tsend char(1) not null,       --sent (Y/N)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb"}, "originalPosition": 520}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTQzOQ==", "bodyText": "Should be probably char(1) as in postgres.", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445975439", "createdAt": "2020-06-26T05:31:27Z", "author": {"login": "zlamalp"}, "path": "perun-base/src/test/resources/test-schema.sql", "diffHunk": "@@ -567,9 +567,9 @@ create table application_data (\n create table application_mails (\n \tid integer not null,\n \tform_id integer not null,       --identifier of form (application_form.id)\n-\tapp_type varchar(30) not null,  --application type (initial/extension)\n-\tmail_type varchar(30) not null, --type of mail (user/administrator)\n-\tsend varchar(1) not null,       --sent (Y/N)\n+\tapp_type longvarchar not null,  --application type (initial/extension)\n+\tmail_type longvarchar not null, --type of mail (user/administrator)\n+\tsend longvarchar not null,       --sent (Y/N)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb"}, "originalPosition": 526}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTcyNA==", "bodyText": "Should be probably char(1) and default to '0' as in postgres.", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445975724", "createdAt": "2020-06-26T05:32:26Z", "author": {"login": "zlamalp"}, "path": "perun-base/src/test/resources/test-schema.sql", "diffHunk": "@@ -88,16 +88,16 @@ create table cabinet_publications (\n \tid integer not null,\n \texternalId integer not null, --identifier at externa pub. system\n \tpublicationSystemId integer not null, --identifier of external pub. system (cabinet_publication_systems.id) *)\n-\ttitle varchar(1024) not null,\n+\ttitle longvarchar not null,\n \tyear integer not null, --short title of publication\n-\tmain varchar(4000), --full cite of publication\n-\tisbn varchar(32),\n+\tmain longvarchar, --full cite of publication\n+\tisbn longvarchar,\n \tcategoryId integer not null, --identifier of category (cabinet_categories.id)\n-\tcreatedBy varchar(1300) default user not null,\n+\tcreatedBy longvarchar default user not null,\n \tcreatedDate timestamp not null,\n \trank numeric (38,1) default 0 not null,\n-\tdoi varchar(256),\n-\tlocked varchar(1) default 0 not null,\n+\tdoi longvarchar,\n+\tlocked longvarchar default 0 not null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04ee1d77d62ce735f942c871cdce0d63cee443b", "author": {"user": {"login": "martin-kuba", "name": "Martin Kuba"}}, "url": "https://github.com/CESNET/perun/commit/b04ee1d77d62ce735f942c871cdce0d63cee443b", "committedDate": "2020-06-26T10:09:14Z", "message": "fixed two char(1) representing booleans in test-schema.sql"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTc5NzE2", "url": "https://github.com/CESNET/perun/pull/2765#pullrequestreview-438179716", "createdAt": "2020-06-26T10:15:51Z", "commit": {"oid": "b04ee1d77d62ce735f942c871cdce0d63cee443b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTgxMjI1", "url": "https://github.com/CESNET/perun/pull/2765#pullrequestreview-438181225", "createdAt": "2020-06-26T10:18:17Z", "commit": {"oid": "b04ee1d77d62ce735f942c871cdce0d63cee443b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1229, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}