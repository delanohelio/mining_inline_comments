{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NTI2NTQ1", "number": 2703, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMTozOTo1N1rOD81m8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMTozOTo1N1rOD81m8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTE5NDcyOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AttributesManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMTozOTo1N1rOGWBW4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxODowODo1NlrOGY9W2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc0NDA5Nw==", "bodyText": "Why are you changing input parameter? It is always better to prevent this behavior and return list of rich attributes instead. You can then call  \"addAll\" outside instead. We should prevent this behavior as much as possible.", "url": "https://github.com/CESNET/perun/pull/2703#discussion_r425744097", "createdAt": "2020-05-15T11:39:57Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AttributesManagerBlImpl.java", "diffHunk": "@@ -5715,211 +5851,230 @@ private void checkAttributesDependencies(PerunSession sess, Member member, Group\n \t\t\t\t\tthrow new WrongAttributeAssignmentException(attr);\n \t\t\t\t}\n \t\t\t}\n-\t\t\tcheckAttributesDependencies(sess, member, null, memberAttributes);\n-\t\t\tcheckAttributesDependencies(sess, user, null, userAttributes);\n-\t\t\tcheckAttributesDependencies(sess, member, group, memberGroupAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, null, memberAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, user, null, userAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, group, memberGroupAttributes);\n \t\t} else {\n-\t\t\tcheckAttributesDependencies(sess, member, group, attributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, group, attributes);\n \t\t}\n+\t\tcheckAttributesDependencies(sess, richAttrs);\n \t}\n \n-\tprivate void checkAttributesDependencies(PerunSession sess, Object primaryHolder, Object secondaryHolder, List<Attribute> attributes) throws InternalErrorException, WrongAttributeValueException, WrongAttributeAssignmentException, WrongReferenceAttributeValueException {\n+\tprivate void constructRichAttributes(List<RichAttribute> richAttrs, Object primaryHolder, Object secondaryHolder, List<Attribute> attributes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d96cd12a55b2803eb832760a224c8c65fdeef34"}, "originalPosition": 970}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODgyNDI4MQ==", "bodyText": "Fixed in the next commit. I also renamed the method to more common convertToRichAttributes()", "url": "https://github.com/CESNET/perun/pull/2703#discussion_r428824281", "createdAt": "2020-05-21T18:08:56Z", "author": {"login": "zlamalp"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/AttributesManagerBlImpl.java", "diffHunk": "@@ -5715,211 +5851,230 @@ private void checkAttributesDependencies(PerunSession sess, Member member, Group\n \t\t\t\t\tthrow new WrongAttributeAssignmentException(attr);\n \t\t\t\t}\n \t\t\t}\n-\t\t\tcheckAttributesDependencies(sess, member, null, memberAttributes);\n-\t\t\tcheckAttributesDependencies(sess, user, null, userAttributes);\n-\t\t\tcheckAttributesDependencies(sess, member, group, memberGroupAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, null, memberAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, user, null, userAttributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, group, memberGroupAttributes);\n \t\t} else {\n-\t\t\tcheckAttributesDependencies(sess, member, group, attributes);\n+\t\t\tconstructRichAttributes(richAttrs, member, group, attributes);\n \t\t}\n+\t\tcheckAttributesDependencies(sess, richAttrs);\n \t}\n \n-\tprivate void checkAttributesDependencies(PerunSession sess, Object primaryHolder, Object secondaryHolder, List<Attribute> attributes) throws InternalErrorException, WrongAttributeValueException, WrongAttributeAssignmentException, WrongReferenceAttributeValueException {\n+\tprivate void constructRichAttributes(List<RichAttribute> richAttrs, Object primaryHolder, Object secondaryHolder, List<Attribute> attributes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc0NDA5Nw=="}, "originalCommit": {"oid": "0d96cd12a55b2803eb832760a224c8c65fdeef34"}, "originalPosition": 970}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2039, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}