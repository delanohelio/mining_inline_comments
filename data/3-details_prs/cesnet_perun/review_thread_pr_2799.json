{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MjgyNDQ5", "number": 2799, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMzo1N1rOEQihEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMzo1N1rOEQihEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1Nzc4MTk1OnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/UsersManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMzo1N1rOG0vohQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDoxNjozNFrOG2MpMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk1OTU1Nw==", "bodyText": "Same optimization can be done for findRichUsersWithAttributesByExactMatch() below.\nAlso I wonder, if we can optimize implementation of convertRichUsersToRichUsersWithAttributes() itself, which retrieves user by id. We can easily pass RichUser instead of User into getAttributes() method, but I'm not sure that some code doesn't rely on the exact class to be used.", "url": "https://github.com/CESNET/perun/pull/2799#discussion_r457959557", "createdAt": "2020-07-21T09:23:57Z", "author": {"login": "zlamalp"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/UsersManagerBlImpl.java", "diffHunk": "@@ -1729,7 +1729,7 @@ public RichUser convertUserToRichUserWithAttributesByNames(PerunSession sess, Us\n \tpublic List<RichUser> findRichUsersWithAttributes(PerunSession sess, String searchString, List<String> attrsName) throws UserNotExistsException {\n \n \t\tif(attrsName == null || attrsName.isEmpty()) {\n-\t\t\treturn convertRichUsersToRichUsersWithAttributes(sess, findRichUsers(sess, searchString));\n+\t\t\treturn findRichUsers(sess, searchString);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f42d39f9d1584e2c70404d2f06549747fed2384"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4MzQ0Mw==", "bodyText": "Same optimization can be done for findRichUsersWithAttributesByExactMatch() below.\n\nDone.\n\nAlso I wonder, if we can optimize implementation of convertRichUsersToRichUsersWithAttributes() itself, which retrieves user by id. We can easily pass RichUser instead of User into getAttributes() method, but I'm not sure that some code doesn't rely on the exact class to be used.\n\nI have noticed this as well. I took a look at it and I think this should not cause any problems. So I have added also this optimization.", "url": "https://github.com/CESNET/perun/pull/2799#discussion_r459483443", "createdAt": "2020-07-23T14:16:34Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/UsersManagerBlImpl.java", "diffHunk": "@@ -1729,7 +1729,7 @@ public RichUser convertUserToRichUserWithAttributesByNames(PerunSession sess, Us\n \tpublic List<RichUser> findRichUsersWithAttributes(PerunSession sess, String searchString, List<String> attrsName) throws UserNotExistsException {\n \n \t\tif(attrsName == null || attrsName.isEmpty()) {\n-\t\t\treturn convertRichUsersToRichUsersWithAttributes(sess, findRichUsers(sess, searchString));\n+\t\t\treturn findRichUsers(sess, searchString);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk1OTU1Nw=="}, "originalCommit": {"oid": "5f42d39f9d1584e2c70404d2f06549747fed2384"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1947, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}