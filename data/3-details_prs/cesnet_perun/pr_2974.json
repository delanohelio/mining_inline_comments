{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1ODY4ODMy", "number": 2974, "title": "New attributes rpEnvironment and rpProtocol", "bodyText": "Created modules for facility attributes rpEnvironment and rpProtocol.\nAttributes were added to LDAP.", "createdAt": "2020-11-05T07:56:36Z", "url": "https://github.com/CESNET/perun/pull/2974", "merged": true, "mergeCommit": {"oid": "250e6f6b6e88a6d1b4dc8546cb86a97ec74bcb61"}, "closed": true, "closedAt": "2020-11-06T11:11:39Z", "author": {"login": "cuadradek"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZgEWFgFqTUyNDEzMjE2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZ01jbAFqTUyNTA1MTUxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTMyMTY0", "url": "https://github.com/CESNET/perun/pull/2974#pullrequestreview-524132164", "createdAt": "2020-11-05T10:40:39Z", "commit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDo0MDozOVrOHt9WPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDo0NDowMlrOHt9eHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk1MzA4Ng==", "bodyText": "Can you add the attribute name and the invalid value to the error message?", "url": "https://github.com/CESNET/perun/pull/2974#discussion_r517953086", "createdAt": "2020-11-05T10:40:39Z", "author": {"login": "mvocu"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_facility_attribute_def_def_rpEnvironment.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package cz.metacentrum.perun.core.impl.modules.attributes;\n+\n+import cz.metacentrum.perun.core.api.Attribute;\n+import cz.metacentrum.perun.core.api.AttributeDefinition;\n+import cz.metacentrum.perun.core.api.AttributesManager;\n+import cz.metacentrum.perun.core.api.Facility;\n+import cz.metacentrum.perun.core.api.exceptions.WrongAttributeValueException;\n+import cz.metacentrum.perun.core.impl.PerunSessionImpl;\n+import cz.metacentrum.perun.core.implApi.modules.attributes.FacilityAttributesModuleAbstract;\n+\n+/**\n+ * Attribute module for rpEnvironment. Possible values are \"TESTING\", \"STAGING\" or \"PRODUCTION\".\n+ *\n+ * @author Radoslav \u010cerh\u00e1k <r.cerhak@gmail.com>\n+ */\n+public class urn_perun_facility_attribute_def_def_rpEnvironment extends FacilityAttributesModuleAbstract {\n+\n+\t@Override\n+\tpublic void checkAttributeSyntax(PerunSessionImpl perunSession, Facility facility, Attribute attribute) throws WrongAttributeValueException {\n+\t\tString attrValue = attribute.valueAsString();\n+\t\tif (attrValue == null) return;\n+\n+\t\tif (!attrValue.equals(\"TESTING\") && !attrValue.equals(\"STAGING\") && !attrValue.equals(\"PRODUCTION\")) {\n+\t\t\tthrow new WrongAttributeValueException(attribute, facility, \"Possible values for this attribute are 'TESTING', 'STAGING' or 'PRODUCTION'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk1MzUyNA==", "bodyText": "Can you add the attribute name and the invalid value to the error message?", "url": "https://github.com/CESNET/perun/pull/2974#discussion_r517953524", "createdAt": "2020-11-05T10:41:23Z", "author": {"login": "mvocu"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_facility_attribute_def_def_rpProtocol.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package cz.metacentrum.perun.core.impl.modules.attributes;\n+\n+import cz.metacentrum.perun.core.api.Attribute;\n+import cz.metacentrum.perun.core.api.AttributeDefinition;\n+import cz.metacentrum.perun.core.api.AttributesManager;\n+import cz.metacentrum.perun.core.api.Facility;\n+import cz.metacentrum.perun.core.api.exceptions.WrongAttributeValueException;\n+import cz.metacentrum.perun.core.impl.PerunSessionImpl;\n+import cz.metacentrum.perun.core.implApi.modules.attributes.FacilityAttributesModuleAbstract;\n+\n+/**\n+ * Attribute module for rpProtocol. Possible values are \"SAML\" or \"OIDC\".\n+ *\n+ * @author Radoslav \u010cerh\u00e1k <r.cerhak@gmail.com>\n+ */\n+public class urn_perun_facility_attribute_def_def_rpProtocol extends FacilityAttributesModuleAbstract {\n+\n+\t@Override\n+\tpublic void checkAttributeSyntax(PerunSessionImpl perunSession, Facility facility, Attribute attribute) throws WrongAttributeValueException {\n+\t\tString attrValue = attribute.valueAsString();\n+\t\tif (attrValue == null) return;\n+\n+\t\tif (!attrValue.equals(\"SAML\") && !attrValue.equals(\"OIDC\")) {\n+\t\t\tthrow new WrongAttributeValueException(attribute, facility, \"Possible values for this attribute are 'SAML' or 'OIDC'.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk1NDUxNg==", "bodyText": "This description is not very informative, there is no information what the attribute means.", "url": "https://github.com/CESNET/perun/pull/2974#discussion_r517954516", "createdAt": "2020-11-05T10:43:04Z", "author": {"login": "mvocu"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_facility_attribute_def_def_rpEnvironment.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package cz.metacentrum.perun.core.impl.modules.attributes;\n+\n+import cz.metacentrum.perun.core.api.Attribute;\n+import cz.metacentrum.perun.core.api.AttributeDefinition;\n+import cz.metacentrum.perun.core.api.AttributesManager;\n+import cz.metacentrum.perun.core.api.Facility;\n+import cz.metacentrum.perun.core.api.exceptions.WrongAttributeValueException;\n+import cz.metacentrum.perun.core.impl.PerunSessionImpl;\n+import cz.metacentrum.perun.core.implApi.modules.attributes.FacilityAttributesModuleAbstract;\n+\n+/**\n+ * Attribute module for rpEnvironment. Possible values are \"TESTING\", \"STAGING\" or \"PRODUCTION\".\n+ *\n+ * @author Radoslav \u010cerh\u00e1k <r.cerhak@gmail.com>\n+ */\n+public class urn_perun_facility_attribute_def_def_rpEnvironment extends FacilityAttributesModuleAbstract {\n+\n+\t@Override\n+\tpublic void checkAttributeSyntax(PerunSessionImpl perunSession, Facility facility, Attribute attribute) throws WrongAttributeValueException {\n+\t\tString attrValue = attribute.valueAsString();\n+\t\tif (attrValue == null) return;\n+\n+\t\tif (!attrValue.equals(\"TESTING\") && !attrValue.equals(\"STAGING\") && !attrValue.equals(\"PRODUCTION\")) {\n+\t\t\tthrow new WrongAttributeValueException(attribute, facility, \"Possible values for this attribute are 'TESTING', 'STAGING' or 'PRODUCTION'\");\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic AttributeDefinition getAttributeDefinition() {\n+\t\tAttributeDefinition attr = new AttributeDefinition();\n+\t\tattr.setNamespace(AttributesManager.NS_FACILITY_ATTR_DEF);\n+\t\tattr.setFriendlyName(\"rpEnvironment\");\n+\t\tattr.setDisplayName(\"rpEnvironment\");\n+\t\tattr.setType(String.class.getName());\n+\t\tattr.setDescription(\"rpEnvironment\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk1NTEwMQ==", "bodyText": "This description is not very informative, there is no information about the attribute meaning.", "url": "https://github.com/CESNET/perun/pull/2974#discussion_r517955101", "createdAt": "2020-11-05T10:44:02Z", "author": {"login": "mvocu"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/modules/attributes/urn_perun_facility_attribute_def_def_rpProtocol.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package cz.metacentrum.perun.core.impl.modules.attributes;\n+\n+import cz.metacentrum.perun.core.api.Attribute;\n+import cz.metacentrum.perun.core.api.AttributeDefinition;\n+import cz.metacentrum.perun.core.api.AttributesManager;\n+import cz.metacentrum.perun.core.api.Facility;\n+import cz.metacentrum.perun.core.api.exceptions.WrongAttributeValueException;\n+import cz.metacentrum.perun.core.impl.PerunSessionImpl;\n+import cz.metacentrum.perun.core.implApi.modules.attributes.FacilityAttributesModuleAbstract;\n+\n+/**\n+ * Attribute module for rpProtocol. Possible values are \"SAML\" or \"OIDC\".\n+ *\n+ * @author Radoslav \u010cerh\u00e1k <r.cerhak@gmail.com>\n+ */\n+public class urn_perun_facility_attribute_def_def_rpProtocol extends FacilityAttributesModuleAbstract {\n+\n+\t@Override\n+\tpublic void checkAttributeSyntax(PerunSessionImpl perunSession, Facility facility, Attribute attribute) throws WrongAttributeValueException {\n+\t\tString attrValue = attribute.valueAsString();\n+\t\tif (attrValue == null) return;\n+\n+\t\tif (!attrValue.equals(\"SAML\") && !attrValue.equals(\"OIDC\")) {\n+\t\t\tthrow new WrongAttributeValueException(attribute, facility, \"Possible values for this attribute are 'SAML' or 'OIDC'.\");\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic AttributeDefinition getAttributeDefinition() {\n+\t\tAttributeDefinition attr = new AttributeDefinition();\n+\t\tattr.setNamespace(AttributesManager.NS_FACILITY_ATTR_DEF);\n+\t\tattr.setFriendlyName(\"rpProtocol\");\n+\t\tattr.setDisplayName(\"rpProtocol\");\n+\t\tattr.setType(String.class.getName());\n+\t\tattr.setDescription(\"rpProtocol\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTcyNjIy", "url": "https://github.com/CESNET/perun/pull/2974#pullrequestreview-524172622", "createdAt": "2020-11-05T11:34:35Z", "commit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMTozNDozNVrOHt_O_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMTozNDozNVrOHt_O_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk4Mzk5Ng==", "bodyText": "Also please don't forget to update description here as well.", "url": "https://github.com/CESNET/perun/pull/2974#discussion_r517983996", "createdAt": "2020-11-05T11:34:35Z", "author": {"login": "metodej"}, "path": "perun-utils/ldapc-scripts/schemas/perun-schema.ldif", "diffHunk": "@@ -63,12 +63,14 @@ olcAttributeTypes: {58}( 1.3.6.1.4.1.8057.2.80.64 NAME 'sponsoredMembershipInOrg\n olcAttributeTypes: {59}( 1.3.6.1.4.1.8057.2.80.65 NAME 'userIdentities' DESC 'All user ExtLogin for UserExtSource with Type IDP' EQUALITY caseIgnoreMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )\n olcAttributeTypes: {60}( 1.3.6.1.4.1.8057.2.80.66 NAME 'schacPersonalUniqueCodes' DESC 'Unique codes of the user in Perun' EQUALITY caseIgnoreMatch SUBSTR caseIgnoreSubstringsMatch ORDERING caseIgnoreOrderingMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )\n olcAttributeTypes: {61}( 1.3.6.1.4.1.8057.2.80.67 NAME 'rpIdentifier' DESC 'rpIdentifier of facility.' EQUALITY caseExactMatch SUBSTR caseExactSubstringsMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )\n+olcAttributeTypes: {62}( 1.3.6.1.4.1.8057.2.80.68 NAME 'rpEnvironment' DESC 'rpEnvironment' EQUALITY caseExactMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 SINGLE-VALUE )\n+olcAttributeTypes: {63}( 1.3.6.1.4.1.8057.2.80.69 NAME 'rpProtocol' DESC 'rpProtocol' EQUALITY caseExactMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 SINGLE-VALUE )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb", "author": {"user": {"login": "cuadradek", "name": "Radoslav \u010cerh\u00e1k"}}, "url": "https://github.com/CESNET/perun/commit/e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb", "committedDate": "2020-11-05T15:02:08Z", "message": "New attributes rpEnvironment and rpProtocol\n\n- Created modules for facility attributes rpEnvironment and rpProtocol.\n- Attributes were added to LDAP."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a107d6c60027a211416e2d8678ac5f089ebb3fa", "author": {"user": {"login": "cuadradek", "name": "Radoslav \u010cerh\u00e1k"}}, "url": "https://github.com/CESNET/perun/commit/3a107d6c60027a211416e2d8678ac5f089ebb3fa", "committedDate": "2020-11-05T07:40:44Z", "message": "New attributes rpEnvironment and rpProtocol\n\n- Created modules for facility attributes rpEnvironment and rpProtocol.\n- Attributes were added to LDAP."}, "afterCommit": {"oid": "e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb", "author": {"user": {"login": "cuadradek", "name": "Radoslav \u010cerh\u00e1k"}}, "url": "https://github.com/CESNET/perun/commit/e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb", "committedDate": "2020-11-05T15:02:08Z", "message": "New attributes rpEnvironment and rpProtocol\n\n- Created modules for facility attributes rpEnvironment and rpProtocol.\n- Attributes were added to LDAP."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0OTk5ODU5", "url": "https://github.com/CESNET/perun/pull/2974#pullrequestreview-524999859", "createdAt": "2020-11-06T09:47:26Z", "commit": {"oid": "e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MDUxNTEx", "url": "https://github.com/CESNET/perun/pull/2974#pullrequestreview-525051511", "createdAt": "2020-11-06T10:58:54Z", "commit": {"oid": "e2eeca8d66b2f4927d22b42eb6b79f30792cc8fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1652, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}