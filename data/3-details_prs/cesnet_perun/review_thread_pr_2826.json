{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MDY0MTI1", "number": 2826, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToxMTo1NVrOETonaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo1Nzo1M1rOEVTXnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIzODUxOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToxMTo1NVrOG5enIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMDowNzowNVrOG7Z6XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMzU1NA==", "bodyText": "Add also information about group (for which synchronization was running).", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r462923554", "createdAt": "2020-07-30T11:11:55Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2926,19 +2926,14 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t\t}\n \t\t\t}\n \n+\t\t\t// If user not found in perun, skip him and log it\n \t\t\tif (user == null) {\n-\t\t\t\t//If not find, get more information about him from member extSource\n-\t\t\t\tList<Map<String, String>> subjectToConvert = Collections.singletonList(subjectFromLoginSource);\n-\t\t\t\tList<Candidate> convertedCandidatesList = convertSubjectsToCandidates(sess, subjectToConvert, memberSource, loginSource, groupMembers, skippedMembers);\n-\t\t\t\t//Empty means not found (skipped)\n-\t\t\t\tif(!convertedCandidatesList.isEmpty()) {\n-\t\t\t\t\t//We add one subject so we take the one converted candidate\n-\t\t\t\t\tcandidate = convertedCandidatesList.get(0);\n-\t\t\t\t}\n+\t\t\t\tlog.debug(\"Subject {} with login {} was skipped during lightweight synchronization because he is not in perun yet.\", subjectFromLoginSource, login);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1def4ae4788e8aa6aa0255a781e1b0ad3feaa1a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk0MzcwOQ==", "bodyText": "Added.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r464943709", "createdAt": "2020-08-04T10:07:05Z", "author": {"login": "metodej"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2926,19 +2926,14 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t\t}\n \t\t\t}\n \n+\t\t\t// If user not found in perun, skip him and log it\n \t\t\tif (user == null) {\n-\t\t\t\t//If not find, get more information about him from member extSource\n-\t\t\t\tList<Map<String, String>> subjectToConvert = Collections.singletonList(subjectFromLoginSource);\n-\t\t\t\tList<Candidate> convertedCandidatesList = convertSubjectsToCandidates(sess, subjectToConvert, memberSource, loginSource, groupMembers, skippedMembers);\n-\t\t\t\t//Empty means not found (skipped)\n-\t\t\t\tif(!convertedCandidatesList.isEmpty()) {\n-\t\t\t\t\t//We add one subject so we take the one converted candidate\n-\t\t\t\t\tcandidate = convertedCandidatesList.get(0);\n-\t\t\t\t}\n+\t\t\t\tlog.debug(\"Subject {} with login {} was skipped during lightweight synchronization because he is not in perun yet.\", subjectFromLoginSource, login);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMzU1NA=="}, "originalCommit": {"oid": "d1def4ae4788e8aa6aa0255a781e1b0ad3feaa1a"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDcwNzkzOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMzoyOTo1OVrOG5jEjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMDowNzoyNVrOG7Z7JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5NjYyMg==", "bodyText": "This is now much harder to read so we probably need to change the code a little.\nI would suggest defining all possible situations we can reach:\n\nThe user was found by extSource or additional user extSource => user is not null, need to process more\nThe user wasn't found => user is null, the situation will be logged and skipped\n\nAnd you can say that there are only 2 possible ways how to process the situation 1:\n\nthe user is already a member of the group =>just revalidate him if possible and remove him from the list idsOfUsersInGroup\nthe user is not yet a member of the group => create a candidate, add him to candidatesToAdd\n\nWhat do you think? In my opinion, this way it will be much easier for reading.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r462996622", "createdAt": "2020-07-30T13:29:59Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2951,11 +2946,8 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tidsOfUsersInGroup.remove(user.getId());\n-\t\t\t} else if (candidate != null) {\n-\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t} else {\n-\t\t\t\t//Both null means that we can't find subject by login in extSource at all (will be in skipped members)\n-\t\t\t\tlog.debug(\"Subject with login {} was skipped because can't be found in extSource {}.\", login, memberSource);\n+\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1def4ae4788e8aa6aa0255a781e1b0ad3feaa1a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzAyMDQ4NA==", "bodyText": "I agree that the current state is difficult to understand, the suggested change looks good.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r463020484", "createdAt": "2020-07-30T14:04:26Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2951,11 +2946,8 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tidsOfUsersInGroup.remove(user.getId());\n-\t\t\t} else if (candidate != null) {\n-\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t} else {\n-\t\t\t\t//Both null means that we can't find subject by login in extSource at all (will be in skipped members)\n-\t\t\t\tlog.debug(\"Subject with login {} was skipped because can't be found in extSource {}.\", login, memberSource);\n+\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5NjYyMg=="}, "originalCommit": {"oid": "d1def4ae4788e8aa6aa0255a781e1b0ad3feaa1a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk0MzkwOQ==", "bodyText": "I hope it's better now.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r464943909", "createdAt": "2020-08-04T10:07:25Z", "author": {"login": "metodej"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2951,11 +2946,8 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tidsOfUsersInGroup.remove(user.getId());\n-\t\t\t} else if (candidate != null) {\n-\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t} else {\n-\t\t\t\t//Both null means that we can't find subject by login in extSource at all (will be in skipped members)\n-\t\t\t\tlog.debug(\"Subject with login {} was skipped because can't be found in extSource {}.\", login, memberSource);\n+\t\t\t\tcandidatesToAdd.add(candidate);\n \t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5NjYyMg=="}, "originalCommit": {"oid": "d1def4ae4788e8aa6aa0255a781e1b0ad3feaa1a"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzcyNjkwOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo1NzoxOVrOG7-hLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwOTozNDoyOVrOG8B60A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0MzQ3MA==", "bodyText": "Call users manager in Bl instead in Entry. This will prevent throwing a privilege exception.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r465543470", "createdAt": "2020-08-05T07:57:19Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2910,52 +2909,45 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t} catch (UserExtSourceNotExistsException e) {\n \t\t\t\t//skipping, this extSource does not exist and thus won't be in the list\n \t\t\t}\n+\t\t\tVo groupVo = getVo(sess, group);\n \t\t\tList<UserExtSource> additionalUserExtSources = Utils.extractAdditionalUserExtSources(sess, subjectFromLoginSource);\n \t\t\tuserExtSources.addAll(additionalUserExtSources);\n \t\t\tfor (UserExtSource source : userExtSources) {\n \t\t\t\ttry {\n \t\t\t\t\tuser = getPerunBl().getUsersManagerBl().getUserByUserExtSource(sess, source);\n-\t\t\t\t\tif(!idsOfUsersInGroup.containsKey(user.getId())) {\n-\t\t\t\t\t\tcandidate = new Candidate(user, source);\n-\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n-\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t// check if user is already member of group's vo\n+\t\t\t\t\tif (sess.getPerun().getUsersManager().getVosWhereUserIsMember(sess, user).contains(groupVo)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02b9fd117b17f3d870e566a2f4221a4fa1c259a9"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU5OTE4NA==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r465599184", "createdAt": "2020-08-05T09:34:29Z", "author": {"login": "metodej"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2910,52 +2909,45 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t} catch (UserExtSourceNotExistsException e) {\n \t\t\t\t//skipping, this extSource does not exist and thus won't be in the list\n \t\t\t}\n+\t\t\tVo groupVo = getVo(sess, group);\n \t\t\tList<UserExtSource> additionalUserExtSources = Utils.extractAdditionalUserExtSources(sess, subjectFromLoginSource);\n \t\t\tuserExtSources.addAll(additionalUserExtSources);\n \t\t\tfor (UserExtSource source : userExtSources) {\n \t\t\t\ttry {\n \t\t\t\t\tuser = getPerunBl().getUsersManagerBl().getUserByUserExtSource(sess, source);\n-\t\t\t\t\tif(!idsOfUsersInGroup.containsKey(user.getId())) {\n-\t\t\t\t\t\tcandidate = new Candidate(user, source);\n-\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n-\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t// check if user is already member of group's vo\n+\t\t\t\t\tif (sess.getPerun().getUsersManager().getVosWhereUserIsMember(sess, user).contains(groupVo)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0MzQ3MA=="}, "originalCommit": {"oid": "02b9fd117b17f3d870e566a2f4221a4fa1c259a9"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzcyODkyOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo1Nzo1M1rOG7-iXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwOTozNDozNlrOG8B7Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0Mzc3NA==", "bodyText": "This is definitely not needed, privilege exception is wrong in Bl layer.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r465543774", "createdAt": "2020-08-05T07:57:53Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2910,52 +2909,45 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t} catch (UserExtSourceNotExistsException e) {\n \t\t\t\t//skipping, this extSource does not exist and thus won't be in the list\n \t\t\t}\n+\t\t\tVo groupVo = getVo(sess, group);\n \t\t\tList<UserExtSource> additionalUserExtSources = Utils.extractAdditionalUserExtSources(sess, subjectFromLoginSource);\n \t\t\tuserExtSources.addAll(additionalUserExtSources);\n \t\t\tfor (UserExtSource source : userExtSources) {\n \t\t\t\ttry {\n \t\t\t\t\tuser = getPerunBl().getUsersManagerBl().getUserByUserExtSource(sess, source);\n-\t\t\t\t\tif(!idsOfUsersInGroup.containsKey(user.getId())) {\n-\t\t\t\t\t\tcandidate = new Candidate(user, source);\n-\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n-\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t// check if user is already member of group's vo\n+\t\t\t\t\tif (sess.getPerun().getUsersManager().getVosWhereUserIsMember(sess, user).contains(groupVo)) {\n+\t\t\t\t\t\tif (idsOfUsersInGroup.containsKey(user.getId())) {\n+\t\t\t\t\t\t\t//we can skip this one, because he is already in group, and remove him from the map\n+\t\t\t\t\t\t\t//but first we need to also validate him if he was disabled before (invalidate and then validate)\n+\t\t\t\t\t\t\tRichMember richMember = idsOfUsersInGroup.get(user.getId());\n+\t\t\t\t\t\t\tif (richMember != null && Status.DISABLED.equals(richMember.getStatus())) {\n+\t\t\t\t\t\t\t\tgetPerunBl().getMembersManagerBl().invalidateMember(sess, richMember);\n+\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\tgetPerunBl().getMembersManagerBl().validateMember(sess, richMember);\n+\t\t\t\t\t\t\t\t} catch (WrongAttributeValueException | WrongReferenceAttributeValueException e) {\n+\t\t\t\t\t\t\t\t\tlog.info(\"Switching member id {} into INVALID state from DISABLED, because there was problem with attributes {}.\", richMember.getId(), e);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tidsOfUsersInGroup.remove(user.getId());\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t//he is not yet in group, so we need to create a candidate\n+\t\t\t\t\t\t\tCandidate candidate = new Candidate(user, source);\n+\t\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n+\t\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t\t\tcandidatesToAdd.add(candidate);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n-\t\t\t\t\tbreak;\n-\t\t\t\t} catch(UserNotExistsException e) {\n+\t\t\t\t} catch(UserNotExistsException | PrivilegeException e) {\n \t\t\t\t\t//skip because the user from this ExtSource does not exist so we can continue\n+\t\t\t\t\t//skip because we do not have privilege to get vos of this user", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02b9fd117b17f3d870e566a2f4221a4fa1c259a9"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU5OTI1NA==", "bodyText": "Removed.", "url": "https://github.com/CESNET/perun/pull/2826#discussion_r465599254", "createdAt": "2020-08-05T09:34:36Z", "author": {"login": "metodej"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/GroupsManagerBlImpl.java", "diffHunk": "@@ -2910,52 +2909,45 @@ private void categorizeMembersForLightweightSynchronization(PerunSession sess, G\n \t\t\t} catch (UserExtSourceNotExistsException e) {\n \t\t\t\t//skipping, this extSource does not exist and thus won't be in the list\n \t\t\t}\n+\t\t\tVo groupVo = getVo(sess, group);\n \t\t\tList<UserExtSource> additionalUserExtSources = Utils.extractAdditionalUserExtSources(sess, subjectFromLoginSource);\n \t\t\tuserExtSources.addAll(additionalUserExtSources);\n \t\t\tfor (UserExtSource source : userExtSources) {\n \t\t\t\ttry {\n \t\t\t\t\tuser = getPerunBl().getUsersManagerBl().getUserByUserExtSource(sess, source);\n-\t\t\t\t\tif(!idsOfUsersInGroup.containsKey(user.getId())) {\n-\t\t\t\t\t\tcandidate = new Candidate(user, source);\n-\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n-\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t// check if user is already member of group's vo\n+\t\t\t\t\tif (sess.getPerun().getUsersManager().getVosWhereUserIsMember(sess, user).contains(groupVo)) {\n+\t\t\t\t\t\tif (idsOfUsersInGroup.containsKey(user.getId())) {\n+\t\t\t\t\t\t\t//we can skip this one, because he is already in group, and remove him from the map\n+\t\t\t\t\t\t\t//but first we need to also validate him if he was disabled before (invalidate and then validate)\n+\t\t\t\t\t\t\tRichMember richMember = idsOfUsersInGroup.get(user.getId());\n+\t\t\t\t\t\t\tif (richMember != null && Status.DISABLED.equals(richMember.getStatus())) {\n+\t\t\t\t\t\t\t\tgetPerunBl().getMembersManagerBl().invalidateMember(sess, richMember);\n+\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\tgetPerunBl().getMembersManagerBl().validateMember(sess, richMember);\n+\t\t\t\t\t\t\t\t} catch (WrongAttributeValueException | WrongReferenceAttributeValueException e) {\n+\t\t\t\t\t\t\t\t\tlog.info(\"Switching member id {} into INVALID state from DISABLED, because there was problem with attributes {}.\", richMember.getId(), e);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tidsOfUsersInGroup.remove(user.getId());\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t//he is not yet in group, so we need to create a candidate\n+\t\t\t\t\t\t\tCandidate candidate = new Candidate(user, source);\n+\t\t\t\t\t\t\t//for lightweight synchronization we want to skip all update of attributes\n+\t\t\t\t\t\t\tcandidate.setAttributes(new HashMap<>());\n+\t\t\t\t\t\t\tcandidatesToAdd.add(candidate);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n-\t\t\t\t\tbreak;\n-\t\t\t\t} catch(UserNotExistsException e) {\n+\t\t\t\t} catch(UserNotExistsException | PrivilegeException e) {\n \t\t\t\t\t//skip because the user from this ExtSource does not exist so we can continue\n+\t\t\t\t\t//skip because we do not have privilege to get vos of this user", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0Mzc3NA=="}, "originalCommit": {"oid": "02b9fd117b17f3d870e566a2f4221a4fa1c259a9"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2376, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}