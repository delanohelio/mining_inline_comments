{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNzA5Nzk5", "number": 2745, "title": "OpenApi AuthzResolver", "bodyText": "missing service manager methods implemented", "createdAt": "2020-06-12T14:22:02Z", "url": "https://github.com/CESNET/perun/pull/2745", "merged": true, "mergeCommit": {"oid": "89dc7a57407390b52a29084e4aae54536bdfceca"}, "closed": true, "closedAt": "2020-06-22T11:15:43Z", "author": {"login": "xpavlic"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqjmysgH2gAyNDMzNzA5Nzk5OjE5Nzc4YjFjMzI3MGZhYTllMGNhMzNkNzhiOTA4MjJjMDhhNDU1MmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrzfT3gH2gAyNDMzNzA5Nzk5OjI3ZDU3NzJkZWE3OWU3NTUxNmY3ZjcxNDExNDBhMzY1YTM5Y2YzZjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e", "author": {"user": null}, "url": "https://github.com/CESNET/perun/commit/19778b1c3270faa9e0ca33d78b90822c08a4552e", "committedDate": "2020-06-12T14:19:57Z", "message": "AuthzResolver added missing methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzY2NzY2", "url": "https://github.com/CESNET/perun/pull/2745#pullrequestreview-431366766", "createdAt": "2020-06-16T10:25:39Z", "commit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDoyNTozOVrOGkVFxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMDozNDozOVrOGkVX4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc0NzQ2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              /json/aithzResolver/getPrincipalRoleNames:\n          \n          \n            \n              /json/authzResolver/getPrincipalRoleNames:", "url": "https://github.com/CESNET/perun/pull/2745#discussion_r440747462", "createdAt": "2020-06-16T10:25:39Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -2144,6 +2144,20 @@ paths:\n   #                                               #\n   #################################################\n \n+  /json/aithzResolver/getPrincipalRoleNames:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc0ODk3Nw==", "bodyText": "Although it is now written in the documentation, this method takes a group param of type int.", "url": "https://github.com/CESNET/perun/pull/2745#discussion_r440748977", "createdAt": "2020-06-16T10:28:37Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -2384,6 +2400,127 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getGroupRoleNames:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc1MDYxMw==", "bodyText": "This might sound a bit dumb but this method actually takes a groupId param. #/components/parameters/groupId refers to a param with name group.", "url": "https://github.com/CESNET/perun/pull/2745#discussion_r440750613", "createdAt": "2020-06-16T10:31:38Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -2384,6 +2400,127 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getGroupRoleNames:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoleNames\n+      summary: |\n+        Returns list of group's role names. Perun system uses role names in the upper case format. However,\n+        for now, they are converted to the lower case format because of the compatibility with external systems.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfStringsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/getGroupRoles:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoles\n+      summary: Returns all roles as an AuthzRoles object for a given group.\n+      parameters:\n+        - $ref: '#/components/parameters/groupId'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "originalPosition": 144}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc1MTgzNw==", "bodyText": "You can use here the optionalGroupId defined parameter.", "url": "https://github.com/CESNET/perun/pull/2745#discussion_r440751837", "createdAt": "2020-06-16T10:34:06Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -2384,6 +2400,127 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getGroupRoleNames:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoleNames\n+      summary: |\n+        Returns list of group's role names. Perun system uses role names in the upper case format. However,\n+        for now, they are converted to the lower case format because of the compatibility with external systems.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfStringsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/getGroupRoles:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoles\n+      summary: Returns all roles as an AuthzRoles object for a given group.\n+      parameters:\n+        - $ref: '#/components/parameters/groupId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/AuthzRolesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/isVoAdmin:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: isVoAdmin\n+      summary: Returns 1 if User has VO manager role (VOADMIN) or for specific VO defined by id\n+      parameters:\n+        - name: vo\n+          description: \"id of Vo\"\n+          schema:\n+            type: integer\n+          in: query\n+          required: false\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/isGroupAdmin:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: isGroupAdmin\n+      summary: Returns 1 if User has Group manager role (GROUPADMIN) or for specific Group defined by id\n+      parameters:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "originalPosition": 176}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc1MjA5OA==", "bodyText": "Same here, you can use the optionalFacilityId", "url": "https://github.com/CESNET/perun/pull/2745#discussion_r440752098", "createdAt": "2020-06-16T10:34:39Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -2384,6 +2400,127 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getGroupRoleNames:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoleNames\n+      summary: |\n+        Returns list of group's role names. Perun system uses role names in the upper case format. However,\n+        for now, they are converted to the lower case format because of the compatibility with external systems.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfStringsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/getGroupRoles:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getGroupRoles\n+      summary: Returns all roles as an AuthzRoles object for a given group.\n+      parameters:\n+        - $ref: '#/components/parameters/groupId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/AuthzRolesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/isVoAdmin:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: isVoAdmin\n+      summary: Returns 1 if User has VO manager role (VOADMIN) or for specific VO defined by id\n+      parameters:\n+        - name: vo\n+          description: \"id of Vo\"\n+          schema:\n+            type: integer\n+          in: query\n+          required: false\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/isGroupAdmin:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: isGroupAdmin\n+      summary: Returns 1 if User has Group manager role (GROUPADMIN) or for specific Group defined by id\n+      parameters:\n+        - name: group\n+          description: \"id of Group\"\n+          schema:\n+            type: integer\n+          in: query\n+          required: false\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /urlinjsonout/authzResolver/isFacilityAdmin:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: isFacilityAdmin\n+      summary: Returns 1 if User has Facility manager role (FACILITYADMIN) or for specific Facility defined by id\n+      parameters:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19778b1c3270faa9e0ca33d78b90822c08a4552e"}, "originalPosition": 195}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1798ace422db0ca6522bfe66c28663219aa2d8b8", "author": {"user": null}, "url": "https://github.com/CESNET/perun/commit/1798ace422db0ca6522bfe66c28663219aa2d8b8", "committedDate": "2020-06-16T10:58:50Z", "message": "suggestion fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e062b113ae9c196adbcd95644fe4ca3e088c9bb", "author": {"user": {"login": "xpavlic", "name": "Jan Pavl\u00ed\u010dek"}}, "url": "https://github.com/CESNET/perun/commit/0e062b113ae9c196adbcd95644fe4ca3e088c9bb", "committedDate": "2020-06-16T10:59:39Z", "message": "Merge branch 'master' into AuthzResolverOpenApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d5772dea79e75516f7f7141140a365a39cf3f6", "author": {"user": {"login": "xpavlic", "name": "Jan Pavl\u00ed\u010dek"}}, "url": "https://github.com/CESNET/perun/commit/27d5772dea79e75516f7f7141140a365a39cf3f6", "committedDate": "2020-06-16T11:24:11Z", "message": "added groupId parameter into getGroupRoleNames"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1203, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}