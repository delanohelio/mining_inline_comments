{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MTk4Mjc1", "number": 2761, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzo0MTozOFrOEIXw9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODo1MDozMFrOEIq7Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjEzNDMwOnYy", "diffSide": "RIGHT", "path": "perun-core/src/test/java/cz/metacentrum/perun/core/entry/GroupStructureSynchronizationIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMzo0MTozOFrOGoSqOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDoyMjoxOFrOGoUbKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwMTk0NA==", "bodyText": "You probably want to change name of this variable. It is a little confusing now.", "url": "https://github.com/CESNET/perun/pull/2761#discussion_r444901944", "createdAt": "2020-06-24T13:41:38Z", "author": {"login": "stavamichal"}, "path": "perun-core/src/test/java/cz/metacentrum/perun/core/entry/GroupStructureSynchronizationIntegrationTest.java", "diffHunk": "@@ -447,6 +454,104 @@ public void removeAllGroupsTest() throws Exception {\n \t\tassertTrue(\"List of sub groups of base group should be empty!\", subGroups.isEmpty());\n \t}\n \n+\t@Test\n+\tpublic void additionalStringAttributeIsSet() throws Exception {\n+        System.out.println(CLASS_NAME + \"additionalStringAttributeIsSet\");\n+\n+\t\tAttributeDefinition loginAttrDef = setGroupAttribute(ADDITIONAL_STRING);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0def6685ac94ac9b6da9bf8807533bc71a5475c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkzMDg1Nw==", "bodyText": "Yes, I do. I have changed it.", "url": "https://github.com/CESNET/perun/pull/2761#discussion_r444930857", "createdAt": "2020-06-24T14:22:18Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-core/src/test/java/cz/metacentrum/perun/core/entry/GroupStructureSynchronizationIntegrationTest.java", "diffHunk": "@@ -447,6 +454,104 @@ public void removeAllGroupsTest() throws Exception {\n \t\tassertTrue(\"List of sub groups of base group should be empty!\", subGroups.isEmpty());\n \t}\n \n+\t@Test\n+\tpublic void additionalStringAttributeIsSet() throws Exception {\n+        System.out.println(CLASS_NAME + \"additionalStringAttributeIsSet\");\n+\n+\t\tAttributeDefinition loginAttrDef = setGroupAttribute(ADDITIONAL_STRING);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwMTk0NA=="}, "originalCommit": {"oid": "d0def6685ac94ac9b6da9bf8807533bc71a5475c"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NTI3MzkxOnYy", "diffSide": "RIGHT", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ExtSourceSql.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODo1MDozMFrOGoxbRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMDoyNDo0NVrOGo0rQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQwNjAyMg==", "bodyText": "I would prefer to return the new resulting Map instead of just changing the input one.", "url": "https://github.com/CESNET/perun/pull/2761#discussion_r445406022", "createdAt": "2020-06-25T08:50:30Z", "author": {"login": "balcirakpeter"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ExtSourceSql.java", "diffHunk": "@@ -358,6 +323,94 @@ public void close() {\n \t\t}\n \t}\n \n+\t/**\n+\t * Decodes a full attribute name from the given value. For used mappings,\n+\t * see attributeNameMapping.\n+\t *\n+\t * @param value which will be mapped\n+\t * @return attribute full name\n+\t */\n+\tprivate String mapAttributeNames(String value) {\n+\t\tString[] attributeRaw = value.split(\":\", 3);\n+\t\tString attributeName = null;\n+\t\tif (!attributeNameMapping.containsKey(attributeRaw[0])) {\n+\t\t\tlog.warn(\"Unknown attribute type '{}', attributeRaw {}\", attributeRaw[0], attributeRaw);\n+\t\t} else if (!attributeNameMapping.containsKey(attributeRaw[1])) {\n+\t\t\tlog.warn(\"Unknown attribute type '{}', attributeRaw {}\", attributeRaw[1], attributeRaw);\n+\t\t} else {\n+\t\t\tattributeName = attributeNameMapping.get(attributeRaw[0]) + attributeNameMapping.get(attributeRaw[1]) +\n+\t\t\t\t\tattributeRaw[2];\n+\t\t}\n+\t\treturn attributeName;\n+\t}\n+\n+\t/**\n+\t * Add additional data from the given result set to the given map.\n+\t *\n+\t * @param map map with attributeName-value entries\n+\t * @param rs result set with attribute data\n+\t * @throws SQLException SQLException\n+\t */\n+\tprivate void addAdditionalAttributeData(Map<String, String> map, ResultSet rs) throws SQLException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a010e260ed0ab6602f1636b3018d462770975840"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ1OTI2Nw==", "bodyText": "I have changed it so it returns the data.", "url": "https://github.com/CESNET/perun/pull/2761#discussion_r445459267", "createdAt": "2020-06-25T10:24:45Z", "author": {"login": "Vojtech-Sassmann"}, "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/ExtSourceSql.java", "diffHunk": "@@ -358,6 +323,94 @@ public void close() {\n \t\t}\n \t}\n \n+\t/**\n+\t * Decodes a full attribute name from the given value. For used mappings,\n+\t * see attributeNameMapping.\n+\t *\n+\t * @param value which will be mapped\n+\t * @return attribute full name\n+\t */\n+\tprivate String mapAttributeNames(String value) {\n+\t\tString[] attributeRaw = value.split(\":\", 3);\n+\t\tString attributeName = null;\n+\t\tif (!attributeNameMapping.containsKey(attributeRaw[0])) {\n+\t\t\tlog.warn(\"Unknown attribute type '{}', attributeRaw {}\", attributeRaw[0], attributeRaw);\n+\t\t} else if (!attributeNameMapping.containsKey(attributeRaw[1])) {\n+\t\t\tlog.warn(\"Unknown attribute type '{}', attributeRaw {}\", attributeRaw[1], attributeRaw);\n+\t\t} else {\n+\t\t\tattributeName = attributeNameMapping.get(attributeRaw[0]) + attributeNameMapping.get(attributeRaw[1]) +\n+\t\t\t\t\tattributeRaw[2];\n+\t\t}\n+\t\treturn attributeName;\n+\t}\n+\n+\t/**\n+\t * Add additional data from the given result set to the given map.\n+\t *\n+\t * @param map map with attributeName-value entries\n+\t * @param rs result set with attribute data\n+\t * @throws SQLException SQLException\n+\t */\n+\tprivate void addAdditionalAttributeData(Map<String, String> map, ResultSet rs) throws SQLException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQwNjAyMg=="}, "originalCommit": {"oid": "a010e260ed0ab6602f1636b3018d462770975840"}, "originalPosition": 114}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1904, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}