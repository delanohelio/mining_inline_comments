{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMzk0OTQ0", "number": 2868, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNjozNTo1MVrOEm5NZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNzoxNjoxN1rOEm6Auw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5MjE4NjYxOnYy", "diffSide": "RIGHT", "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNjozNTo1MVrOHXLpwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwOTozNjoxNFrOHXSGKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA3MDIwOA==", "bodyText": "We recently changed member suspended message, so it should be suspended.$ just like the other member states.\nMember status within group is limited to VALID and EXPIRED states, hence we should react only on validated.$ (which is correct in above conditions) and expired.$ in here.", "url": "https://github.com/CESNET/perun/pull/2868#discussion_r494070208", "createdAt": "2020-09-24T06:35:51Z", "author": {"login": "zlamalp"}, "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "diffHunk": "@@ -676,6 +676,105 @@ http://www.springframework.org/schema/aop http://www.springframework.org/schema/\n \t\t\t</list>\n \t\t</property>\n \t</bean>\n+\t\n+\t<!--  \n+\t  This bean processes events that would lead to change of virtual attribute and audit message\n+\t  \"virtual attribute changed\". It is here to off-load processing of the change from RPC to LDAPC.  \n+\t-->\n+\t<bean id=\"virtualAttributeEventProcessor\" class=\"cz.metacentrum.perun.ldapc.processor.impl.VirtualAttributeEventProcessor\">\n+\t\t<property name=\"dispatchConditions\">\n+\t\t\t<list>\n+\t\t\t\t<!-- group membership events -->\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" added to Group:\\[.*\\]\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" was removed from Group:\\[.*\\] totally\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d991e210877e468f7477e346c70d4ec09680292a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE3NTc4NQ==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/2868#discussion_r494175785", "createdAt": "2020-09-24T09:36:14Z", "author": {"login": "mvocu"}, "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "diffHunk": "@@ -676,6 +676,105 @@ http://www.springframework.org/schema/aop http://www.springframework.org/schema/\n \t\t\t</list>\n \t\t</property>\n \t</bean>\n+\t\n+\t<!--  \n+\t  This bean processes events that would lead to change of virtual attribute and audit message\n+\t  \"virtual attribute changed\". It is here to off-load processing of the change from RPC to LDAPC.  \n+\t-->\n+\t<bean id=\"virtualAttributeEventProcessor\" class=\"cz.metacentrum.perun.ldapc.processor.impl.VirtualAttributeEventProcessor\">\n+\t\t<property name=\"dispatchConditions\">\n+\t\t\t<list>\n+\t\t\t\t<!-- group membership events -->\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" added to Group:\\[.*\\]\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" was removed from Group:\\[.*\\] totally\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA3MDIwOA=="}, "originalCommit": {"oid": "d991e210877e468f7477e346c70d4ec09680292a"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5MjMxODAzOnYy", "diffSide": "RIGHT", "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNzoxNjoxN1rOHXM2RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwOTozNjozMFrOHXSGxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4OTc5Nw==", "bodyText": "We recently changed member suspended message, so it should be suspended.$ just like the other member states.", "url": "https://github.com/CESNET/perun/pull/2868#discussion_r494089797", "createdAt": "2020-09-24T07:16:17Z", "author": {"login": "zlamalp"}, "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "diffHunk": "@@ -676,6 +676,105 @@ http://www.springframework.org/schema/aop http://www.springframework.org/schema/\n \t\t\t</list>\n \t\t</property>\n \t</bean>\n+\t\n+\t<!--  \n+\t  This bean processes events that would lead to change of virtual attribute and audit message\n+\t  \"virtual attribute changed\". It is here to off-load processing of the change from RPC to LDAPC.  \n+\t-->\n+\t<bean id=\"virtualAttributeEventProcessor\" class=\"cz.metacentrum.perun.ldapc.processor.impl.VirtualAttributeEventProcessor\">\n+\t\t<property name=\"dispatchConditions\">\n+\t\t\t<list>\n+\t\t\t\t<!-- group membership events -->\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" added to Group:\\[.*\\]\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" was removed from Group:\\[.*\\] totally\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d991e210877e468f7477e346c70d4ec09680292a"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE3NTk0MA==", "bodyText": "Fixed.", "url": "https://github.com/CESNET/perun/pull/2868#discussion_r494175940", "createdAt": "2020-09-24T09:36:30Z", "author": {"login": "mvocu"}, "path": "perun-ldapc/src/main/resources/perun-ldapc.xml", "diffHunk": "@@ -676,6 +676,105 @@ http://www.springframework.org/schema/aop http://www.springframework.org/schema/\n \t\t\t</list>\n \t\t</property>\n \t</bean>\n+\t\n+\t<!--  \n+\t  This bean processes events that would lead to change of virtual attribute and audit message\n+\t  \"virtual attribute changed\". It is here to off-load processing of the change from RPC to LDAPC.  \n+\t-->\n+\t<bean id=\"virtualAttributeEventProcessor\" class=\"cz.metacentrum.perun.ldapc.processor.impl.VirtualAttributeEventProcessor\">\n+\t\t<property name=\"dispatchConditions\">\n+\t\t\t<list>\n+\t\t\t\t<!-- group membership events -->\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" added to Group:\\[.*\\]\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" was removed from Group:\\[.*\\] totally\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Group</value>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processGroupMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\" validated.$\"/>\n+\t\t\t\t\t<property name=\"handlerMethodName\" value=\"processMemberChange\"/>\n+\t\t\t\t</bean>\n+\t\t\t\t<bean class=\"cz.metacentrum.perun.ldapc.processor.impl.RegexpDispatchEventCondition\">\n+\t\t\t\t\t<property name=\"beansCondition\">\n+\t\t\t\t\t\t<list>\n+\t\t\t\t\t\t\t<value>cz.metacentrum.perun.core.api.Member</value>\n+\t\t\t\t\t\t</list>\n+\t\t\t\t\t</property>\n+\t\t\t\t\t<property name=\"pattern\" value=\"expired.$|disabled.$|invalidated.$|suspended #\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA4OTc5Nw=="}, "originalCommit": {"oid": "d991e210877e468f7477e346c70d4ec09680292a"}, "originalPosition": 68}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2237, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}