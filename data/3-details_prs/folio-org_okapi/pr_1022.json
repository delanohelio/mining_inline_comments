{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNjcwNjIy", "number": 1022, "title": "Cleanup ProxyContext logging OKAPI-910", "bodyText": "", "createdAt": "2020-10-27T11:12:57Z", "url": "https://github.com/folio-org/okapi/pull/1022", "merged": true, "mergeCommit": {"oid": "dcb669c48ec24d7d96f5d21ca694d5d9631cbcc1"}, "closed": true, "closedAt": "2020-10-27T18:46:09Z", "author": {"login": "adamdickmeiss"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWnCTdgH2gAyNTEwNjcwNjIyOjI5YmI5YWU4ZjE2ZjlmNDE5ZGU4NDA3ODQ1ZmM5NzI2OGNhYmM2MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWtYZsgH2gAyNTEwNjcwNjIyOjFjYzY4NjJiZGY5NDYyMGUyMTRhOTI1N2MyODA4NmFlOWMxZjJmMjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/29bb9ae8f16f9f419de8407845fc97268cabc625", "committedDate": "2020-10-27T11:12:23Z", "message": "Cleanup ProxyContext logging OKAPI-910"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcxMTc0", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517871174", "createdAt": "2020-10-27T15:57:44Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1Nzo0NFrOHpD6mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1Nzo0NFrOHpD6mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxNzgxNw==", "bodyText": "Missing Java doc for logger", "url": "https://github.com/folio-org/okapi/pull/1022#discussion_r512817817", "createdAt": "2020-10-27T15:57:44Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/bean/InterfaceDescriptor.java", "diffHunk": "@@ -197,11 +197,11 @@ public void setHandlers(RoutingEntry[] handlers) {\n    * @param section \"provides\" or \"requires\" - the rules differ\n    * @return \"\" if ok, or a simple error message\n    */\n-  public String validate(ProxyContext pc, String section, String mod) {\n+  public String validate(Logger logger, String section, String mod) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcxNDI2", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517871426", "createdAt": "2020-10-27T15:57:58Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1Nzo1OFrOHpD7eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1Nzo1OFrOHpD7eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxODA0MA==", "bodyText": "Would this work logger.debug(\"Loading permissions for {}\", mdTo.getName()?", "url": "https://github.com/folio-org/okapi/pull/1022#discussion_r512818040", "createdAt": "2020-10-27T15:57:58Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/TenantManager.java", "diffHunk": "@@ -544,7 +545,7 @@ private void fireTimer(Tenant tenant, ModuleDescriptor md, RoutingEntry re, Stri\n   private Future<Void> invokePermissionsForModule(Tenant tenant, ModuleDescriptor mdTo,\n                                                   ModuleDescriptor permsModule, ProxyContext pc) {\n \n-    pc.debug(\"Loading permissions for \" + mdTo.getName()\n+    logger.debug(\"Loading permissions for {}\", () -> mdTo.getName()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcxNTMz", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517871533", "createdAt": "2020-10-27T15:58:03Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODowM1rOHpD7yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODowM1rOHpD7yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxODEyMg==", "bodyText": "Would this work logger.debug(\"tenantPerms Req: {}\", pljson);?", "url": "https://github.com/folio-org/okapi/pull/1022#discussion_r512818122", "createdAt": "2020-10-27T15:58:03Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/TenantManager.java", "diffHunk": "@@ -555,7 +556,7 @@ private void fireTimer(Tenant tenant, ModuleDescriptor md, RoutingEntry re, Stri\n       pl = new PermissionList(moduleTo, mdTo.getExpandedPermissionSets());\n     }\n     String pljson = Json.encodePrettily(pl);\n-    pc.debug(\"tenantPerms Req: \" + pljson);\n+    logger.debug(\"tenantPerms Req: {}\", () -> pljson);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcxNTk3", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517871597", "createdAt": "2020-10-27T15:58:06Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODowN1rOHpD7_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODowN1rOHpD7_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxODE3Mw==", "bodyText": "Would this work logger.debug(\"tenantPerms: {} and {}\", permsModule.getId(), permPath);?", "url": "https://github.com/folio-org/okapi/pull/1022#discussion_r512818173", "createdAt": "2020-10-27T15:58:07Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/TenantManager.java", "diffHunk": "@@ -572,11 +573,11 @@ private void fireTimer(Tenant tenant, ModuleDescriptor md, RoutingEntry re, Stri\n           \"Bad _tenantPermissions interface in module \" + permsModule.getId()\n               + \". No path to POST to\"));\n     }\n-    pc.debug(\"tenantPerms: \" + permsModule.getId() + \" and \" + permPath);\n+    logger.debug(\"tenantPerms: {} and {}\", (Supplier<?>) () -> permsModule.getId(), permPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcxODIz", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517871823", "createdAt": "2020-10-27T15:58:18Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODoxOFrOHpD8qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNTo1ODoxOFrOHpD8qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgxODM0NA==", "bodyText": "Would this work logger.debug(\"tenantPerms request to {} succeeded for module {} and tenant {}\", permsModule.getId(), moduleTo, tenant.getId());?", "url": "https://github.com/folio-org/okapi/pull/1022#discussion_r512818344", "createdAt": "2020-10-27T15:58:18Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/TenantManager.java", "diffHunk": "@@ -572,11 +573,11 @@ private void fireTimer(Tenant tenant, ModuleDescriptor md, RoutingEntry re, Stri\n           \"Bad _tenantPermissions interface in module \" + permsModule.getId()\n               + \". No path to POST to\"));\n     }\n-    pc.debug(\"tenantPerms: \" + permsModule.getId() + \" and \" + permPath);\n+    logger.debug(\"tenantPerms: {} and {}\", (Supplier<?>) () -> permsModule.getId(), permPath);\n     return proxyService.callSystemInterface(tenant, permInst, pljson, pc).compose(cres -> {\n       pc.passOkapiTraceHeaders(cres);\n-      pc.debug(\"tenantPerms request to \" + permsModule.getName()\n-          + \" succeeded for module \" + moduleTo + \" and tenant \" + tenant.getId());\n+      logger.debug(\"tenantPerms request to {} succeeded for module {} and tenant {}\",\n+          () -> permsModule.getId(), () -> moduleTo, () -> tenant.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODczODI1", "url": "https://github.com/folio-org/okapi/pull/1022#pullrequestreview-517873825", "createdAt": "2020-10-27T16:00:03Z", "commit": {"oid": "29bb9ae8f16f9f419de8407845fc97268cabc625"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5637482c0890fb7011aa342ec05e687b117b028", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/e5637482c0890fb7011aa342ec05e687b117b028", "committedDate": "2020-10-27T18:34:50Z", "message": "Fix javadoc for public method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cc6862bdf94620e214a9257c28086ae9c1f2f25", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/1cc6862bdf94620e214a9257c28086ae9c1f2f25", "committedDate": "2020-10-27T18:35:57Z", "message": "Not using lambdas for a few calls that should have minimal overhead"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2888, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}