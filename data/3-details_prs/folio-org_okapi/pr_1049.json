{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MTg1MjIx", "number": 1049, "title": "Update to Vert.x 4.0.0.CR2 OKAPI-955", "bodyText": "Update from Vert.x 4.0.0CR1 to CR2. There are breaking changes again..\neclipse-vertx/vert.x@d58e825", "createdAt": "2020-11-26T16:45:02Z", "url": "https://github.com/folio-org/okapi/pull/1049", "merged": true, "mergeCommit": {"oid": "8dfca94bcb27e727c8c4de0e293b6bfc81da602d"}, "closed": true, "closedAt": "2020-11-27T12:58:39Z", "author": {"login": "adamdickmeiss"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgVwqLAH2gAyNTI4MTg1MjIxOmVmNjk2YTZiZTAyZDk5N2MzOTZlNmJiZmU5MmEyZGE2NjcyMTc3NTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgmd50AFqTUzOTkzNDA3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/ef696a6be02d997c396e6bbfe92a2da667217753", "committedDate": "2020-11-26T16:43:58Z", "message": "Update to 4.0.0.CR2 OKAPI-955"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTMyMDA0", "url": "https://github.com/folio-org/okapi/pull/1049#pullrequestreview-539932004", "createdAt": "2020-11-27T12:08:21Z", "commit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMjowODoyMVrOH68I8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMjowODoyMVrOH68I8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU2NDc4Ng==", "bodyText": "This is ok.\nReplacing HttpClient by WebClient allows for more concise code and would have avoided this code change.\nYou don't need to replace HttpClient by WebClient before merging this pull request.\n    WebClient\n        .create(vertx)\n        .post(PORT, \"localhost\", \"/test1\")\n        .send()\n        .onSuccess(res -> {\n          if (ctx.request().isEnded()) {\n            ctx.response().end(\"OK2\"); // Vert.x 3.6 series\n          } else {\n            ctx.request().endHandler(y -> {\n              ctx.response().end(\"OK2\");\n            });\n            ctx.request().resume();\n          }\n        }).onFailure(cause -> {\n          ctx.response().setStatusCode(500);\n          ctx.response().end(cause.getMessage());\n        });", "url": "https://github.com/folio-org/okapi/pull/1049#discussion_r531564786", "createdAt": "2020-11-27T12:08:21Z", "author": {"login": "julianladisch"}, "path": "okapi-common/src/test/java/org/folio/okapi/common/PauseResumeTest.java", "diffHunk": "@@ -37,7 +37,7 @@ private void myStreamHandle2(RoutingContext ctx) {\n         return;\n       }\n       req.result().end();\n-      req.result().onComplete(res -> {\n+      req.result().response(res -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTMzOTIy", "url": "https://github.com/folio-org/okapi/pull/1049#pullrequestreview-539933922", "createdAt": "2020-11-27T12:11:36Z", "commit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMjoxMTozNlrOH68O6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMjoxMTozNlrOH68O6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU2NjMxNA==", "bodyText": "This is ok.\nReplacing HttpClient by WebClient allows for more concise code and would have avoided this code change.\nYou don't need to replace HttpClient by WebClient before merging this pull request.\n    context.assertNotNull(server);\n    WebClient.create(vertx)\n        .post(PORT, LOCALHOST, URL + \"/test1\")\n        .expect(ResponsePredicate.SC_OK)\n        .send()\n        .onComplete(context.asyncAssertSuccess());", "url": "https://github.com/folio-org/okapi/pull/1049#discussion_r531566314", "createdAt": "2020-11-27T12:11:36Z", "author": {"login": "julianladisch"}, "path": "okapi-common/src/test/java/org/folio/okapi/common/OkapiClientTest.java", "diffHunk": "@@ -360,7 +360,7 @@ public void testLegacyPostOk(TestContext context) {\n     client.request(HttpMethod.POST, PORT, LOCALHOST, URL + \"/test1\")\n         .onComplete(context.asyncAssertSuccess(request -> {\n           request.end();\n-          request.onComplete(context.asyncAssertSuccess(response -> {\n+          request.response(context.asyncAssertSuccess(response -> {\n             context.assertEquals(200, response.statusCode());\n           }));\n         }));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTM0MDc5", "url": "https://github.com/folio-org/okapi/pull/1049#pullrequestreview-539934079", "createdAt": "2020-11-27T12:11:52Z", "commit": {"oid": "ef696a6be02d997c396e6bbfe92a2da667217753"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2781, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}