{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyODE1MDEx", "number": 1063, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxNzo1NDoxMlrOFNzM1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQyMjoxMzowM1rOFN5npA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUwMDE0Njc5OnYy", "diffSide": "RIGHT", "path": "okapi-core/src/main/java/org/folio/okapi/service/impl/DockerModuleHandle.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxNzo1NDoxMlrOISNaHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQyMTozODowNFrOISWYuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTk2NDk1Ng==", "bodyText": "Should make the try block smaller to start from line 146?", "url": "https://github.com/folio-org/okapi/pull/1063#discussion_r555964956", "createdAt": "2021-01-12T17:54:12Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/service/impl/DockerModuleHandle.java", "diffHunk": "@@ -136,18 +136,22 @@ static String setupDockerAddress(StringBuilder socketAddress, String u) {\n   private Future<HttpClientResponse> request(HttpMethod method, String url,\n                                              MultiMap headers, Buffer body) {\n \n-    RequestOptions requestOptions = new RequestOptions()\n-        .setMethod(method)\n-        .setAbsoluteURI(dockerUrl + url);\n-    if (socketAddress != null) {\n-      requestOptions.setServer(socketAddress);\n-    }\n-    return client.request(requestOptions).compose(request -> {\n-      if (headers != null) {\n-        request.headers().setAll(headers);\n+    try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8127a1345ac9073376b0105498c930d4cea614fe"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjExMjA1Ng==", "bodyText": "Done.", "url": "https://github.com/folio-org/okapi/pull/1063#discussion_r556112056", "createdAt": "2021-01-12T21:38:04Z", "author": {"login": "julianladisch"}, "path": "okapi-core/src/main/java/org/folio/okapi/service/impl/DockerModuleHandle.java", "diffHunk": "@@ -136,18 +136,22 @@ static String setupDockerAddress(StringBuilder socketAddress, String u) {\n   private Future<HttpClientResponse> request(HttpMethod method, String url,\n                                              MultiMap headers, Buffer body) {\n \n-    RequestOptions requestOptions = new RequestOptions()\n-        .setMethod(method)\n-        .setAbsoluteURI(dockerUrl + url);\n-    if (socketAddress != null) {\n-      requestOptions.setServer(socketAddress);\n-    }\n-    return client.request(requestOptions).compose(request -> {\n-      if (headers != null) {\n-        request.headers().setAll(headers);\n+    try {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTk2NDk1Ng=="}, "originalCommit": {"oid": "8127a1345ac9073376b0105498c930d4cea614fe"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUwMTE5ODQ0OnYy", "diffSide": "RIGHT", "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQyMjoxMzowM1rOISXe3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQyMjo1MDo0NFrOISYodg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjEzMDAxMw==", "bodyText": "OkapiClient does not need this new FuturisedHttpClient?", "url": "https://github.com/folio-org/okapi/pull/1063#discussion_r556130013", "createdAt": "2021-01-12T22:13:03Z", "author": {"login": "hjiebsco"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "diffHunk": "@@ -1201,7 +1201,7 @@ private static DeploymentDescriptor pickInstance(List<DeploymentDescriptor> inst\n     Map<String, String> headers = sysReqHeaders(headersIn, tenantId, authToken, inst, modPerms);\n     headers.put(XOkapiHeaders.URL_TO, inst.getUrl());\n     logger.debug(\"syscall begin {} {}{}\", inst.getMethod(), inst.getUrl(), inst.getPath());\n-    OkapiClient cli = new OkapiClient(this.httpClient, inst.getUrl(), vertx, headers);\n+    OkapiClient cli = new OkapiClient(httpClient.getHttpClient(), inst.getUrl(), vertx, headers);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "703a71f2332e3e14b0905c31794caa5adcf3b357"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjE0ODg1NA==", "bodyText": "OkapiClient wraps HttpClient into WebClient, and WebClient wraps the call into a try-catch-block: https://github.com/vert-x3/vertx-web/blob/4.0.0/vertx-web-client/src/main/java/io/vertx/ext/web/client/impl/HttpContext.java#L305", "url": "https://github.com/folio-org/okapi/pull/1063#discussion_r556148854", "createdAt": "2021-01-12T22:50:44Z", "author": {"login": "julianladisch"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "diffHunk": "@@ -1201,7 +1201,7 @@ private static DeploymentDescriptor pickInstance(List<DeploymentDescriptor> inst\n     Map<String, String> headers = sysReqHeaders(headersIn, tenantId, authToken, inst, modPerms);\n     headers.put(XOkapiHeaders.URL_TO, inst.getUrl());\n     logger.debug(\"syscall begin {} {}{}\", inst.getMethod(), inst.getUrl(), inst.getPath());\n-    OkapiClient cli = new OkapiClient(this.httpClient, inst.getUrl(), vertx, headers);\n+    OkapiClient cli = new OkapiClient(httpClient.getHttpClient(), inst.getUrl(), vertx, headers);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjEzMDAxMw=="}, "originalCommit": {"oid": "703a71f2332e3e14b0905c31794caa5adcf3b357"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 104, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}