{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMzc1MjE2", "number": 957, "title": "Okapi 865 upgrade to 4 Beta 1", "bodyText": "", "createdAt": "2020-08-05T13:13:29Z", "url": "https://github.com/folio-org/okapi/pull/957", "merged": true, "mergeCommit": {"oid": "27f40413c1282419c064e7dd7d80cb3350fc2bef"}, "closed": true, "closedAt": "2020-08-07T13:11:31Z", "author": {"login": "adamdickmeiss"}, "timelineItems": {"totalCount": 44, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvD9x1gH2gAyNDYzMzc1MjE2OmI3NGYwODU5YzkzNDQ1MGU1MjA0YmM3ZDFmZDJkZTBjNGNkZTRjNGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8j_tOAFqTQ2MzI5MDA2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b74f0859c934450e5204bc7d1fd2de0c4cde4c4b", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/b74f0859c934450e5204bc7d1fd2de0c4cde4c4b", "committedDate": "2020-06-26T14:17:43Z", "message": "Tests passes, one is ignored\n\nIgnore test DockerModuleHandleTest.testNoDockerAtPort.\nRemove EventBusOptions.setClustered(true). Not sure if there's\na replacement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac9bb6507be72b61a41932152341cb82cd92fc9a", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/ac9bb6507be72b61a41932152341cb82cd92fc9a", "committedDate": "2020-06-29T08:51:50Z", "message": "Test case for HttpClient double fail problem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e270de4bcf462352b5c18e46ad4b0e0639f5f95", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/0e270de4bcf462352b5c18e46ad4b0e0639f5f95", "committedDate": "2020-07-06T13:14:05Z", "message": "Update to Vert.x 4-SNAPSHOT (vertx-core+vertx-web)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ffc89ebe840d2be9b7c0494a99428994e0f581", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/d1ffc89ebe840d2be9b7c0494a99428994e0f581", "committedDate": "2020-07-07T15:22:02Z", "message": "Merge branch 'master' into OKAPI-865-upgrade-to-4-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9b648576a57cd7e484ecf288265a112af5b743", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/bf9b648576a57cd7e484ecf288265a112af5b743", "committedDate": "2020-07-07T18:58:39Z", "message": "Compiles with Vert.x snapshot\n\nBut we see https://github.com/eclipse-vertx/vert.x/issues/3487"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92677f829ffad1e821a59f0a2284d3e8341d9066", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/92677f829ffad1e821a59f0a2284d3e8341d9066", "committedDate": "2020-07-09T14:11:36Z", "message": "Log test method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b6225b8eb4b55542adeed9de73e65986c7bff14", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/6b6225b8eb4b55542adeed9de73e65986c7bff14", "committedDate": "2020-07-10T08:09:09Z", "message": "Newer version of netty-tcnative-boringssl-static"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a54654b46534637e470dfbed28e5ba46664fe61e", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/a54654b46534637e470dfbed28e5ba46664fe61e", "committedDate": "2020-08-03T11:33:27Z", "message": "Merge branch 'master' into OKAPI-865-upgrade-to-4-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26f0b4f4c87f144673d4507255efbcad249baf7b", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/26f0b4f4c87f144673d4507255efbcad249baf7b", "committedDate": "2020-08-04T14:28:10Z", "message": "Partial upgrade to Beta1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f347ae433fc765c47fe873a428a0fd4b09ae0ac", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/4f347ae433fc765c47fe873a428a0fd4b09ae0ac", "committedDate": "2020-08-05T13:12:52Z", "message": "Passes but igorning testDeleteCORS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb4702ff2cc81f4a005dcad268ff606cab61180", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/9eb4702ff2cc81f4a005dcad268ff606cab61180", "committedDate": "2020-08-05T14:01:01Z", "message": "Fix some issues reported by SonarQube"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22d7e5c660eae81f5d84557bd70f0b3be1f3fc9a", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/22d7e5c660eae81f5d84557bd70f0b3be1f3fc9a", "committedDate": "2020-08-05T14:02:05Z", "message": "Merge remote-tracking branch 'origin/master' into OKAPI-865-upgrade-to-4-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20f18727d51dd57ed4df3046cfb77443908d52c2", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/20f18727d51dd57ed4df3046cfb77443908d52c2", "committedDate": "2020-08-05T14:17:57Z", "message": "Update misc overrides"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbbb81f08b2ef6238e9fc3733c9f768c2999dab5", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/dbbb81f08b2ef6238e9fc3733c9f768c2999dab5", "committedDate": "2020-08-05T14:18:34Z", "message": "Avoid literal characters in regex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5fd0a0637893501ee5ba3dd83afbbab47842001", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/c5fd0a0637893501ee5ba3dd83afbbab47842001", "committedDate": "2020-08-05T14:19:08Z", "message": "Invoke methods conditionally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "683658f8e893ded0776201a0767014979a964371", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/683658f8e893ded0776201a0767014979a964371", "committedDate": "2020-08-05T14:26:48Z", "message": "Do not mess with | for removeLogCharacgers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1002b1a461ccde0ea8a0f586423fa7c8b74bb8d", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/c1002b1a461ccde0ea8a0f586423fa7c8b74bb8d", "committedDate": "2020-08-05T15:02:46Z", "message": "Test DiscoveryManager health"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c78dc261a6d5d293b966a1872ecf377b0647d7c9", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/c78dc261a6d5d293b966a1872ecf377b0647d7c9", "committedDate": "2020-08-05T15:14:11Z", "message": "Unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b5726bafb857f661cc84a98330c42f1e01fa2e6", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/8b5726bafb857f661cc84a98330c42f1e01fa2e6", "committedDate": "2020-08-05T16:07:34Z", "message": "Use lambdas for logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84b7ef104ac003e9c6d1c7013c2ba96c400e9082", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/84b7ef104ac003e9c6d1c7013c2ba96c400e9082", "committedDate": "2020-08-05T16:08:01Z", "message": "Remove redundant guard in PullManager.getList"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0916cc55f45a7a2b2f7962d3d93ce1ad43a0c524", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/0916cc55f45a7a2b2f7962d3d93ce1ad43a0c524", "committedDate": "2020-08-05T16:10:02Z", "message": "Further simplify PullManager.getList"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8f89eafa7b3b6959f52b157cadcf50309a24d07", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/c8f89eafa7b3b6959f52b157cadcf50309a24d07", "committedDate": "2020-08-05T18:32:06Z", "message": "skipList is not nullable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "994dbdba60b8defe76c1998617cfc22e8e745148", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/994dbdba60b8defe76c1998617cfc22e8e745148", "committedDate": "2020-08-06T09:47:01Z", "message": "Proper Origin value for CORS test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47b2cf2e41eced0eb092f5792e1a1b5c2da49e0d", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/47b2cf2e41eced0eb092f5792e1a1b5c2da49e0d", "committedDate": "2020-08-06T10:01:52Z", "message": "Use String.replace for simple pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "448695c8dc4b46dd912bca0e3d7c59a3a0721676", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/448695c8dc4b46dd912bca0e3d7c59a3a0721676", "committedDate": "2020-08-06T10:58:38Z", "message": "Test proxy client failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9528a4227607e773cb2e2b1f1273d41fd0598c9", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/e9528a4227607e773cb2e2b1f1273d41fd0598c9", "committedDate": "2020-08-06T11:57:24Z", "message": "Test request-log + request-response-1.0 combo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c", "committedDate": "2020-08-06T12:12:36Z", "message": "Refactor end to proxy log clients"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTMwOTIw", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462530920", "createdAt": "2020-08-06T13:43:00Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo0MzowMFrOG80HGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo0MzowMFrOG80HGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMTUyOQ==", "bodyText": "what is the reason for stripping this out?", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466421529", "createdAt": "2020-08-06T13:43:00Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/main/java/org/folio/okapi/bean/RoutingEntry.java", "diffHunk": "@@ -195,11 +194,6 @@ public String getPhaseLevel() {\n    * @param methods HTTP method name or \"*\" for all\n    */\n   public void setMethods(String[] methods) {\n-    for (String s : methods) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTM3Njcx", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462537671", "createdAt": "2020-08-06T13:50:23Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo1MDoyM1rOG80bcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzo1MDoyM1rOG80bcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyNjczNw==", "bodyText": "this refactoring is annoying, but at least this is cleaner...", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466426737", "createdAt": "2020-08-06T13:50:23Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "diffHunk": "@@ -609,53 +608,55 @@ private void proxyRequestHttpClient(\n     RoutingContext ctx = pc.getCtx();\n     String url = makeUrl(mi, ctx);\n     HttpMethod meth = ctx.request().method();\n-    HttpClientRequest clientRequest = httpClient.requestAbs(meth, url, res1 -> {\n-      if (proxyHttpFail(pc, mi, res1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTU4MzEw", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462558310", "createdAt": "2020-08-06T14:12:12Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoxMjoxMlrOG81YAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoxMjoxMlrOG81YAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ0MjI0Mw==", "bodyText": "why not just call res.result() once?", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466442243", "createdAt": "2020-08-06T14:12:12Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/main/java/org/folio/okapi/service/impl/DockerModuleHandle.java", "diffHunk": "@@ -99,48 +100,62 @@ static String setupDockerAddress(StringBuilder socketAddress, String u) {\n     return u + \"/\" + DEFAULT_DOCKER_VERSION;\n   }\n \n-  private void handle204(HttpClientResponse res, String msg,\n+  private void handle204(AsyncResult<HttpClientResponse> res, String msg,\n                          Handler<AsyncResult<Void>> future) {\n+    if (res.failed()) {\n+      future.handle(res.mapEmpty());\n+      return;\n+    }\n     Buffer body = Buffer.buffer();\n-    res.handler(body::appendBuffer);\n-    res.endHandler(d -> {\n-      if (res.statusCode() == 204) {\n+    res.result().handler(body::appendBuffer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTY3MDE0", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462567014", "createdAt": "2020-08-06T14:21:46Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyMTo0NlrOG81xlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyMTo0NlrOG81xlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ0ODc5MQ==", "bodyText": "neat trick", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466448791", "createdAt": "2020-08-06T14:21:46Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/test/java/org/folio/okapi/ProxyTest.java", "diffHunk": "@@ -65,10 +69,19 @@\n   private int timerDelaySum = 0;\n   private int timerTenantInitStatus = 200;\n   private int timerTenantPermissionsStatus = 200;\n+  private HttpServer listenTimer;\n   private JsonObject timerPermissions = new JsonObject();\n   private JsonArray edgePermissionsAtInit = null;\n   private JsonObject timerTenantData;\n \n+  @Rule\n+  public TestWatcher watchman = new TestWatcher() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTY5MjQ4", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462569248", "createdAt": "2020-08-06T14:23:53Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyMzo1M1rOG813uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyMzo1M1rOG813uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ1MDM2Mw==", "bodyText": "not sure it's a big deal, but is this really an equivalent test to 404 or 204?", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466450363", "createdAt": "2020-08-06T14:23:53Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/test/java/org/folio/okapi/ProxyTest.java", "diffHunk": "@@ -314,14 +342,15 @@ private void td(TestContext context, Async async) {\n   @After\n   public void tearDown(TestContext context) {\n     Async async = context.async();\n-\n-    HttpClientLegacy.delete(httpClient, port, \"localhost\", \"/_/discovery/modules\", response -> {\n-      context.assertTrue(response.statusCode() == 404 || response.statusCode() == 204);\n-      response.endHandler(x -> {\n-        httpClient.close();\n-        td(context, async);\n-      });\n-    }).end();\n+    httpClient.delete(port, \"localhost\", \"/_/discovery/modules\",\n+        MultiMap.caseInsensitiveMultiMap(), res1 -> {\n+          context.assertTrue(res1.succeeded());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 165}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTcwMTUz", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462570153", "createdAt": "2020-08-06T14:24:45Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyNDo0NVrOG816XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyNDo0NVrOG816XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ1MTAzNw==", "bodyText": "Just curious why?", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466451037", "createdAt": "2020-08-06T14:24:45Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/test/java/org/folio/okapi/ProxyTest.java", "diffHunk": "@@ -2177,20 +2214,20 @@ public void testRequestOnly(TestContext context) {\n       c.getLastReport().isEmpty());\n \n     final String docRequestOnly = \"{\" + LS\n-      + \"  \\\"id\\\" : \\\"request-only-1.0.0\\\",\" + LS\n-      + \"  \\\"name\\\" : \\\"request-only\\\",\" + LS\n-      + \"  \\\"filters\\\" : [ {\" + LS\n-      + \"    \\\"methods\\\" : [ \\\"GET\\\", \\\"POST\\\" ],\" + LS\n-      + \"    \\\"path\\\" : \\\"/testb\\\",\" + LS\n-      + \"    \\\"level\\\" : \\\"33\\\",\" + LS\n-      + \"    \\\"type\\\" : \\\"request-only\\\",\" + LS\n-      + \"    \\\"permissionsRequired\\\" : [ ]\" + LS\n-      + \"  } ],\" + LS\n-      + \"  \\\"launchDescriptor\\\" : {\" + LS\n-      + \"    \\\"exec\\\" : \"\n-      + \"\\\"java -Dport=%p -jar ../okapi-test-module/target/okapi-test-module-fat.jar\\\"\" + LS\n-      + \"  }\" + LS\n-      + \"}\";\n+        + \"  \\\"id\\\" : \\\"request-only-1.0.0\\\",\" + LS\n+        + \"  \\\"name\\\" : \\\"request-only\\\",\" + LS\n+        + \"  \\\"filters\\\" : [ {\" + LS\n+        + \"    \\\"methods\\\" : [ \\\"GET\\\", \\\"POST\\\" ],\" + LS\n+        + \"    \\\"path\\\" : \\\"/testb\\\",\" + LS\n+        + \"    \\\"level\\\" : \\\"30\\\",\" + LS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 272}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTcyMDkw", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462572090", "createdAt": "2020-08-06T14:26:38Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyNjozOFrOG82ASA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDoyNjozOFrOG82ASA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ1MjU1Mg==", "bodyText": "is having an invalid property value tested elsewhere?", "url": "https://github.com/folio-org/okapi/pull/957#discussion_r466452552", "createdAt": "2020-08-06T14:26:38Z", "author": {"login": "craigmcnally"}, "path": "okapi-core/src/test/java/org/folio/okapi/bean/BeanTest.java", "diffHunk": "@@ -233,7 +233,7 @@ public void testModuleDescriptorBadMethod() {\n       + \"    \\\"id\\\" : \\\"sample\\\",\" + LS\n       + \"    \\\"version\\\" : \\\"1.0\\\",\" + LS\n       + \"    \\\"handlers\\\" : [ {\" + LS\n-      + \"      \\\"methods\\\" : [ \\\"GET\\\", \\\"NOST\\\" ],\" + LS\n+      + \"      \\\"methods1\\\" : [ \\\"GET\\\", \\\"POST\\\" ],\" + LS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTc2ODcz", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-462576873", "createdAt": "2020-08-06T14:31:27Z", "commit": {"oid": "6d9c7884fcd3f4433f3e144d4bc678f9f6b0b71c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62971c6c743ba26c5a4fd89230a38a613423f96b", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/62971c6c743ba26c5a4fd89230a38a613423f96b", "committedDate": "2020-08-07T09:34:26Z", "message": "Unknown HTTP method never caught"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7974bfa1899865ab3e675ef47400b8377b6e1a4f", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/7974bfa1899865ab3e675ef47400b8377b6e1a4f", "committedDate": "2020-08-07T10:28:19Z", "message": "ProxyTest testEdgeCase cleans better up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "199b19cd4470f55048a3eb771d7f2b66b1b1dee8", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/199b19cd4470f55048a3eb771d7f2b66b1b1dee8", "committedDate": "2020-08-07T10:40:08Z", "message": "Unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc6eed7244f671ac8f8dc3e3e6d85e9e4fe6bded", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/cc6eed7244f671ac8f8dc3e3e6d85e9e4fe6bded", "committedDate": "2020-08-07T11:31:06Z", "message": "Methods in routing entries checked again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "720913ca36d490e7e9ae919a775d9246a2b53b79", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/720913ca36d490e7e9ae919a775d9246a2b53b79", "committedDate": "2020-08-07T11:40:52Z", "message": "Empty line removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "450715458838faec0581886ab83abba6bcb4a744", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/450715458838faec0581886ab83abba6bcb4a744", "committedDate": "2020-08-07T12:08:09Z", "message": "Add utility RoutingEntry.getDefaultMethod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1087b57d2bbcec4151921c1cb338216932f9b95", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/b1087b57d2bbcec4151921c1cb338216932f9b95", "committedDate": "2020-08-07T12:11:43Z", "message": "Fix description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b2777a803a760e872c110b7a28e842af627a48c", "author": {"user": {"login": "adamdickmeiss", "name": "Adam Dickmeiss"}}, "url": "https://github.com/folio-org/okapi/commit/0b2777a803a760e872c110b7a28e842af627a48c", "committedDate": "2020-08-07T12:23:25Z", "message": "Package private junit5 tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMjkwMDY0", "url": "https://github.com/folio-org/okapi/pull/957#pullrequestreview-463290064", "createdAt": "2020-08-07T12:57:48Z", "commit": {"oid": "0b2777a803a760e872c110b7a28e842af627a48c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2809, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}