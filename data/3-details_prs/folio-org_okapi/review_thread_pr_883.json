{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NjgwMTUy", "number": 883, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwOToxOTo0NlrODiQNzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMDowMjo0M1rODio0Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MjQzODUyOnYy", "diffSide": "RIGHT", "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwOToxOTo0NlrOFtZmkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjoyNjo0OVrOFuEMYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE0OTcxMg==", "bodyText": "Is this a cache? If yes, can you rename it to enabledModulesCache?", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383149712", "createdAt": "2020-02-24T09:19:46Z", "author": {"login": "julianladisch"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "diffHunk": "@@ -38,6 +38,7 @@\n   private String mapName = \"modules\";\n   private LockedTypedMap1<ModuleDescriptor> modules\n     = new LockedTypedMap1<>(ModuleDescriptor.class);\n+  private Map<String,ModuleDescriptor> enabledModules = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg0NzUyMw==", "bodyText": "yep", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383847523", "createdAt": "2020-02-25T12:26:49Z", "author": {"login": "adamdickmeiss"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "diffHunk": "@@ -38,6 +38,7 @@\n   private String mapName = \"modules\";\n   private LockedTypedMap1<ModuleDescriptor> modules\n     = new LockedTypedMap1<>(ModuleDescriptor.class);\n+  private Map<String,ModuleDescriptor> enabledModules = new HashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE0OTcxMg=="}, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MjQ0MjY2OnYy", "diffSide": "RIGHT", "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwOToyMToxOVrOFtZo_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjoyNzoxN1rOFuENPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE1MDMzMg==", "bodyText": "Is the cache pruned when ModuleManager.update or ModuleManager.delete is called, and are there unit tests for update and delete?", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383150332", "createdAt": "2020-02-24T09:21:19Z", "author": {"login": "julianladisch"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "diffHunk": "@@ -38,6 +38,7 @@\n   private String mapName = \"modules\";\n   private LockedTypedMap1<ModuleDescriptor> modules\n     = new LockedTypedMap1<>(ModuleDescriptor.class);\n+  private Map<String,ModuleDescriptor> enabledModules = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg0Nzc0MA==", "bodyText": "In reality not needed, but I'll just do it. MDs are immutable and probably MD PUT will be removed soon.", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383847740", "createdAt": "2020-02-25T12:27:17Z", "author": {"login": "adamdickmeiss"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ModuleManager.java", "diffHunk": "@@ -38,6 +38,7 @@\n   private String mapName = \"modules\";\n   private LockedTypedMap1<ModuleDescriptor> modules\n     = new LockedTypedMap1<>(ModuleDescriptor.class);\n+  private Map<String,ModuleDescriptor> enabledModules = new HashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE1MDMzMg=="}, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NjQ2OTI3OnYy", "diffSide": "RIGHT", "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMDowMjo0M1rOFt_01w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjoyNzoyN1rOFuENfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3NTk1OQ==", "bodyText": "Can you also change\nif (sz > limit) {\n\nto\nif (sz > limit && logger.isInfoEnabled()) {\n\nand remove the unused StringBuilder from dumpHeaders?", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383775959", "createdAt": "2020-02-25T10:02:43Z", "author": {"login": "julianladisch"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "diffHunk": "@@ -685,7 +685,7 @@ private void proxyRequestResponse10(Iterator<ModuleInstance> it,\n \n   private void copyHeaders(HttpClientRequest cReq, RoutingContext ctx, ModuleInstance mi) {\n     int sz = 0;\n-    int limit = 5; // all headers dumped\n+    int limit = 2000; // all headers dumped", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg0NzgwNA==", "bodyText": "Yep. Will do", "url": "https://github.com/folio-org/okapi/pull/883#discussion_r383847804", "createdAt": "2020-02-25T12:27:27Z", "author": {"login": "adamdickmeiss"}, "path": "okapi-core/src/main/java/org/folio/okapi/managers/ProxyService.java", "diffHunk": "@@ -685,7 +685,7 @@ private void proxyRequestResponse10(Iterator<ModuleInstance> it,\n \n   private void copyHeaders(HttpClientRequest cReq, RoutingContext ctx, ModuleInstance mi) {\n     int sz = 0;\n-    int limit = 5; // all headers dumped\n+    int limit = 2000; // all headers dumped", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3NTk1OQ=="}, "originalCommit": {"oid": "6397ee87282bb33e2396bf688507425372fb01f1"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 212, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}