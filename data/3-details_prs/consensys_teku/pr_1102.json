{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NTAxMzQ2", "number": 1102, "title": "Add exceptionallyCompose to SafeFuture", "bodyText": "PR Description\nAdd an exceptionallyCompose method to SafeFuture which is the error handling version of thenCompose allowing errors to be handled async.", "createdAt": "2020-01-21T20:39:44Z", "url": "https://github.com/ConsenSys/teku/pull/1102", "merged": true, "mergeCommit": {"oid": "584935cb0f5d3b52b7768f5d4cbb5b7844649aba"}, "closed": true, "closedAt": "2020-01-21T21:04:49Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8nR-bgH2gAyMzY1NTAxMzQ2Ojk3OTNlNTg2NTA0Yzc0Njc4MjVlZGFkOTQxMGEwMjM5NjI5YmZkZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8nj9zAFqTM0NjE4NTAwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9793e586504c7467825edad9410a0239629bfdf2", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/9793e586504c7467825edad9410a0239629bfdf2", "committedDate": "2020-01-21T20:36:19Z", "message": "Add exceptionallyCompose to SafeFuture."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe", "committedDate": "2020-01-21T20:38:59Z", "message": "Test error handling of errors from error handler."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79666fd4da5312633d7bfaac2c9ae60e8355026d", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/79666fd4da5312633d7bfaac2c9ae60e8355026d", "committedDate": "2020-01-21T20:43:01Z", "message": "Fix spotless."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0aea188bd030eb9a18530d211c0b11d81f91c1d", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/a0aea188bd030eb9a18530d211c0b11d81f91c1d", "committedDate": "2020-01-21T20:50:38Z", "message": "Suppress warnings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTgzMzQ5", "url": "https://github.com/ConsenSys/teku/pull/1102#pullrequestreview-346183349", "createdAt": "2020-01-21T20:52:58Z", "commit": {"oid": "1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMDo1Mjo1OFrOFgIcCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMDo1Mjo1OFrOFgIcCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzNzAwMA==", "bodyText": "lol nope.", "url": "https://github.com/ConsenSys/teku/pull/1102#discussion_r369237000", "createdAt": "2020-01-21T20:52:58Z", "author": {"login": "cemozerr"}, "path": "util/src/test/java/tech/pegasys/artemis/util/async/SafeFutureTest.java", "diffHunk": "@@ -261,6 +253,56 @@ public void reportExceptions_shouldLogUnhandledExceptions() {\n     assertThat(logCounter.getCount()).isEqualTo(1);\n   }\n \n+  @Test\n+  public void exceptionallyCompose_shouldComposeInErrorCase() {\n+    final AtomicReference<Throwable> receivedError = new AtomicReference<>();\n+    final SafeFuture<String> safeFuture = new SafeFuture<>();\n+    final SafeFuture<String> composedFuture = new SafeFuture<>();\n+    final SafeFuture<String> result = safeFuture.exceptionallyCompose(error -> {\n+      receivedError.set(error);\n+      return composedFuture;\n+    });\n+    final RuntimeException exception = new RuntimeException(\"Nope\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81d511046e799ab23ab37ee95e80bbda1104a28e", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/81d511046e799ab23ab37ee95e80bbda1104a28e", "committedDate": "2020-01-21T20:55:31Z", "message": "Merge branch 'master' into add-exceptionally-compose"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTg1MDA2", "url": "https://github.com/ConsenSys/teku/pull/1102#pullrequestreview-346185006", "createdAt": "2020-01-21T20:55:58Z", "commit": {"oid": "81d511046e799ab23ab37ee95e80bbda1104a28e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4217, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}