{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MjkxNzgx", "number": 1119, "title": "Use a single TimeProvider instance across the system", "bodyText": "PR Description\nPulls the creation of TimeProvider right up to the top level BeaconNode and share the same instance everywhere it's needed.\nSupport millis in TimeProvider since I'll be needing that precision next.  Also made it an interface with two separate implementations which actually just boiled down to personal preference (I initially thought it would be required but turned out not to be).  One advantage of interfaces is that you can't accidentally add a method to the \"real\" implementation and forget to override it in the stub so I figure it's worth keeping the change.", "createdAt": "2020-01-28T23:07:01Z", "url": "https://github.com/ConsenSys/teku/pull/1119", "merged": true, "mergeCommit": {"oid": "8dad343dc485fdabedc93b7da35467dce04f9363"}, "closed": true, "closedAt": "2020-01-29T02:36:24Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-5f4rgH2gAyMzY4MjkxNzgxOmU3NzI5MzMyNTNjOGNiYzA0OWYzODIyY2VmMmNkYjY3ZDA2NWM4MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-8W3ngH2gAyMzY4MjkxNzgxOjViNjczYzQyZWU0ODZlODhlY2VjZGUzNzM4ZWRjZjg0MjFhNjcyZjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e772933253c8cbc049f3822cef2cdb67d065c834", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/e772933253c8cbc049f3822cef2cdb67d065c834", "committedDate": "2020-01-28T22:57:39Z", "message": "Use a single TimeProvider instance across the system."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc934c8788fbfad19758f235c8c349b957b6f5a5", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/fc934c8788fbfad19758f235c8c349b957b6f5a5", "committedDate": "2020-01-28T23:01:40Z", "message": "Simplify SystemTimeProvider."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72960d1da9a495a2ce12535c7743eda2b184c50e", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/72960d1da9a495a2ce12535c7743eda2b184c50e", "committedDate": "2020-01-28T23:15:48Z", "message": "Fix stub time provider."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODI2MDYx", "url": "https://github.com/ConsenSys/teku/pull/1119#pullrequestreview-349826061", "createdAt": "2020-01-29T02:11:11Z", "commit": {"oid": "72960d1da9a495a2ce12535c7743eda2b184c50e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjoxMToxMVrOFi6t1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjoxMToxMVrOFi6t1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1NzkwOA==", "bodyText": "(nit) might want to switch this line to:\nthis.timeProvider = config.getTimeProvider();\n\nTo be in line with other member variables.", "url": "https://github.com/ConsenSys/teku/pull/1119#discussion_r372157908", "createdAt": "2020-01-29T02:11:11Z", "author": {"login": "cemozerr"}, "path": "services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java", "diffHunk": "@@ -62,11 +62,13 @@\n   private String provider;\n \n   private String depositSimFile;\n+  private TimeProvider timeProvider;\n \n   public PowchainService() {}\n \n   @Override\n   public void init(ServiceConfig config) {\n+    timeProvider = config.getTimeProvider();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72960d1da9a495a2ce12535c7743eda2b184c50e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODI3MjQw", "url": "https://github.com/ConsenSys/teku/pull/1119#pullrequestreview-349827240", "createdAt": "2020-01-29T02:16:19Z", "commit": {"oid": "72960d1da9a495a2ce12535c7743eda2b184c50e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b673c42ee486e88ececde3738edcf8421a672f8", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/5b673c42ee486e88ececde3738edcf8421a672f8", "committedDate": "2020-01-29T02:17:31Z", "message": "Add this."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4247, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}