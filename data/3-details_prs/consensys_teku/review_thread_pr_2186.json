{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjIwNTQ4", "number": 2186, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMToxNzoyNFrOEHZzfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMToxNzoyNFrOEHZzfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTk4MjcwOnYy", "diffSide": "RIGHT", "path": "storage/src/main/java/tech/pegasys/teku/storage/server/rocksdb/RocksDbDatabase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMToxNzoyNFrOGmvjrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMToyMzoyN1rOGmvmxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3ODI1Mg==", "bodyText": "would commit failure here cause unhandled exceptions?", "url": "https://github.com/ConsenSys/teku/pull/2186#discussion_r443278252", "createdAt": "2020-06-22T01:17:24Z", "author": {"login": "rolfyone"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/server/rocksdb/RocksDbDatabase.java", "diffHunk": "@@ -98,13 +109,14 @@ public void storeGenesis(final UpdatableStore store) {\n         // We need to store the genesis block in both hot and cold storage so that on restart\n         // we're guaranteed to have at least one block / state to load into RecentChainData.\n         // Save to hot storage\n-        updater.addHotBlock(block);\n+        hotUpdater.addHotBlock(block);\n         // Save to cold storage\n-        updater.addFinalizedBlock(block);\n-        putFinalizedState(updater, root, state);\n+        finalizedUpdater.addFinalizedBlock(block);\n+        putFinalizedState(finalizedUpdater, root, state);\n       }\n \n-      updater.commit();\n+      finalizedUpdater.commit();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18ea9af6fd3a5d9ed0e758a1c6b91df8bafa4838"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3OTA0Nw==", "bodyText": "It gets handled in ChainStorage.onStorageUpdate and even that isn't actually necessary as the event channel would have packaged it back up into the returned SafeFuture rather than leaving it unhandled.", "url": "https://github.com/ConsenSys/teku/pull/2186#discussion_r443279047", "createdAt": "2020-06-22T01:23:27Z", "author": {"login": "ajsutton"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/server/rocksdb/RocksDbDatabase.java", "diffHunk": "@@ -98,13 +109,14 @@ public void storeGenesis(final UpdatableStore store) {\n         // We need to store the genesis block in both hot and cold storage so that on restart\n         // we're guaranteed to have at least one block / state to load into RecentChainData.\n         // Save to hot storage\n-        updater.addHotBlock(block);\n+        hotUpdater.addHotBlock(block);\n         // Save to cold storage\n-        updater.addFinalizedBlock(block);\n-        putFinalizedState(updater, root, state);\n+        finalizedUpdater.addFinalizedBlock(block);\n+        putFinalizedState(finalizedUpdater, root, state);\n       }\n \n-      updater.commit();\n+      finalizedUpdater.commit();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3ODI1Mg=="}, "originalCommit": {"oid": "18ea9af6fd3a5d9ed0e758a1c6b91df8bafa4838"}, "originalPosition": 89}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3615, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}