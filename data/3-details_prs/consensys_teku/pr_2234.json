{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNDY0MTcx", "number": 2234, "title": "Add a bash/zsh autocomplete script to distributions", "bodyText": "PR Description\nTurns out PicoCLI can generate bash/zsh autocomplete files.  So add that as a debug command and then use it when building the distributions to create a teku.autocomplete.sh file. Running  source teku.autocomplete.sh or putting it in /etc/bash_completion.d/ will give you autocomplete support for all of Teku's subcommand and CLI options.\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-06-26T08:53:39Z", "url": "https://github.com/ConsenSys/teku/pull/2234", "merged": true, "mergeCommit": {"oid": "a9725d863f9bba610dea0d9285518652504c3f92"}, "closed": true, "closedAt": "2020-06-26T21:25:25Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu_RRagH2gAyNDQwNDY0MTcxOjc5NDFiYTViOThhMWI1M2VmMmI5ZTk3N2RjY2U5MmYzNGI0MDViYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvJ5-2AH2gAyNDQwNDY0MTcxOmExMjg3OGRkNmEzYTU3YmQ5NmFlOTFjNzY5ZTI3YzEyZWE4OTdmM2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7941ba5b98a1b53ef2b9e977dcce92f34b405bb3", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/7941ba5b98a1b53ef2b9e977dcce92f34b405bb3", "committedDate": "2020-06-26T08:49:29Z", "message": "Add a bash/zsh autocomplete script to distributions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTQyMTA2", "url": "https://github.com/ConsenSys/teku/pull/2234#pullrequestreview-438142106", "createdAt": "2020-06-26T09:16:42Z", "commit": {"oid": "7941ba5b98a1b53ef2b9e977dcce92f34b405bb3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwOToxNjo0MlrOGpZ0IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwOToxNjo0MlrOGpZ0IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2Nzc0NQ==", "bodyText": "I believe we are exiting after executing this command, however I would avoid closing System.out though", "url": "https://github.com/ConsenSys/teku/pull/2234#discussion_r446067745", "createdAt": "2020-06-26T09:16:42Z", "author": {"login": "Nashatyrev"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/subcommand/debug/DebugCommand.java", "diffHunk": "@@ -24,15 +33,54 @@\n     showDefaultValues = true,\n     abbreviateSynopsis = true,\n     mixinStandardHelpOptions = true,\n+    addMethodSubcommands = true,\n     versionProvider = PicoCliVersionProvider.class,\n     synopsisHeading = \"%n\",\n     descriptionHeading = \"%nDescription:%n%n\",\n     optionListHeading = \"%nOptions:%n\",\n     footerHeading = \"%n\",\n     footer = \"Teku is licensed under the Apache License 2.0\")\n public class DebugCommand implements Runnable {\n+  @Spec private CommandSpec commandSpec;\n+\n   @Override\n   public void run() {\n     CommandLine.usage(this, System.out);\n   }\n+\n+  @Command(\n+      name = \"generate-autocomplete\",\n+      description = \"Generate a bash/zsh autocomplete file\",\n+      subcommands = {DebugDbCommand.class},\n+      showDefaultValues = true,\n+      abbreviateSynopsis = true,\n+      mixinStandardHelpOptions = true,\n+      versionProvider = PicoCliVersionProvider.class,\n+      synopsisHeading = \"%n\",\n+      descriptionHeading = \"%nDescription:%n%n\",\n+      optionListHeading = \"%nOptions:%n\",\n+      footerHeading = \"%n\",\n+      footer = \"Teku is licensed under the Apache License 2.0\")\n+  public int autocomplete(\n+      @Option(\n+              names = {\"--output\", \"-o\"},\n+              description = \"File to output to, default is System.out\")\n+          final File output) {\n+    try (final PrintStream out = outputStream(output)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7941ba5b98a1b53ef2b9e977dcce92f34b405bb3"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a12878dd6a3a57bd96ae91c769e27c12ea897f3c", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/a12878dd6a3a57bd96ae91c769e27c12ea897f3c", "committedDate": "2020-06-26T21:13:00Z", "message": "Merge branch 'master' into bash-autocomplete"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3744, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}