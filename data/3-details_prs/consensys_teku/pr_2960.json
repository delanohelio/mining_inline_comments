{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMjU4MTk4", "number": 2960, "title": "Enforce StrictNoSign on gossip messages", "bodyText": "PR Description\nDon't propagate gossip messages with 'from', 'signature' or 'seqno' fields set\nFixed Issue(s)\nethereum/consensus-specs#1981\nPart of  #2951\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-10-13T12:27:49Z", "url": "https://github.com/ConsenSys/teku/pull/2960", "merged": true, "mergeCommit": {"oid": "c5650d6eb8d4c9cd3793a347695efff41518e6b1"}, "closed": true, "closedAt": "2020-10-14T18:07:18Z", "author": {"login": "Nashatyrev"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSHmUsAH2gAyNTAyMjU4MTk4OjkzOTUwYjU0YjZkMDlhOTViMDQyZTA2YzljMTkzMmU5ZTk4ZDg3ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSeqdWAH2gAyNTAyMjU4MTk4OjYxZDRjODIxNTZhZmMwOGQwMDgxZjIyNjkyYzdkMzA1NTBmNWFjMDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93950b54b6d09a95b042e06c9c1932e9e98d8786", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/93950b54b6d09a95b042e06c9c1932e9e98d8786", "committedDate": "2020-10-13T12:19:04Z", "message": "Don't propagate gossip messages with 'from', 'signature' or 'seqno' fields set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3Njg0MDA1", "url": "https://github.com/ConsenSys/teku/pull/2960#pullrequestreview-507684005", "createdAt": "2020-10-13T17:43:12Z", "commit": {"oid": "93950b54b6d09a95b042e06c9c1932e9e98d8786"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzo0MzoxM1rOHgyXCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzo0MzoxM1rOHgyXCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE0MTU3OA==", "bodyText": "Any particular reason to make this a singleton?  Its not very common in the teku codebase.", "url": "https://github.com/ConsenSys/teku/pull/2960#discussion_r504141578", "createdAt": "2020-10-13T17:43:13Z", "author": {"login": "mbaxter"}, "path": "networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipWireValidator.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.teku.networking.p2p.libp2p.gossip;\n+\n+import io.libp2p.pubsub.PubsubMessageValidator;\n+import org.jetbrains.annotations.NotNull;\n+import pubsub.pb.Rpc;\n+import pubsub.pb.Rpc.RPC;\n+\n+/**\n+ * Validates Gossip messages at the level of Protobuf structures Rejects messages with prohibited\n+ * Gossip fields: {@code from, signature, seqno}\n+ */\n+public class GossipWireValidator implements PubsubMessageValidator {\n+\n+  public static final GossipWireValidator INSTANCE = new GossipWireValidator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93950b54b6d09a95b042e06c9c1932e9e98d8786"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "141ddf1e4610b1a2429a6883bfe392b29cb620c1", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/141ddf1e4610b1a2429a6883bfe392b29cb620c1", "committedDate": "2020-10-14T11:17:14Z", "message": "Get rid of the singleton"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61d4c82156afc08d0081f22692c7d30550f5ac00", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/61d4c82156afc08d0081f22692c7d30550f5ac00", "committedDate": "2020-10-14T15:11:24Z", "message": "Merge branch 'master' into feature/gossip-strict-no-sign"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3351, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}