{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNzU4Nzcz", "number": 1572, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo0MDozOFrODxxjbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo0MjoxMlrODxxlaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNTE4NzAwOnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/EpochProcessorUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo0MDozOFrOGFb-4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMDowMjoxN1rOGFlIOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NDUyOQ==", "bodyText": "Seems like these 3 variables could go into the Constants file", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408354529", "createdAt": "2020-04-14T18:40:38Z", "author": {"login": "cemozerr"}, "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/EpochProcessorUtil.java", "diffHunk": "@@ -612,22 +610,22 @@ public static void process_final_updates(MutableBeaconState state) {\n     for (int index = 0; index < validators.size(); index++) {\n       Validator validator = validators.get(index);\n       UnsignedLong balance = balances.get(index);\n-      long HALF_INCREMENT = Constants.EFFECTIVE_BALANCE_INCREMENT / 2;\n-      if (balance.compareTo(validator.getEffective_balance()) < 0\n-          || validator\n-                  .getEffective_balance()\n-                  .plus(UnsignedLong.valueOf(3 * HALF_INCREMENT))\n-                  .compareTo(balance)\n-              < 0) {\n \n+      final UnsignedLong hysteresis_increment =\n+          EFFECTIVE_BALANCE_INCREMENT.dividedBy(HYSTERESIS_QUOTIENT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8df60ccc68dafee0ade113e11e5545876f34fb8"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUwNDM3Nw==", "bodyText": "If the constants were actually constants yes, but we'd need to be able to reset them after loading from the constants yaml file.", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408504377", "createdAt": "2020-04-15T00:02:17Z", "author": {"login": "ajsutton"}, "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/EpochProcessorUtil.java", "diffHunk": "@@ -612,22 +610,22 @@ public static void process_final_updates(MutableBeaconState state) {\n     for (int index = 0; index < validators.size(); index++) {\n       Validator validator = validators.get(index);\n       UnsignedLong balance = balances.get(index);\n-      long HALF_INCREMENT = Constants.EFFECTIVE_BALANCE_INCREMENT / 2;\n-      if (balance.compareTo(validator.getEffective_balance()) < 0\n-          || validator\n-                  .getEffective_balance()\n-                  .plus(UnsignedLong.valueOf(3 * HALF_INCREMENT))\n-                  .compareTo(balance)\n-              < 0) {\n \n+      final UnsignedLong hysteresis_increment =\n+          EFFECTIVE_BALANCE_INCREMENT.dividedBy(HYSTERESIS_QUOTIENT);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NDUyOQ=="}, "originalCommit": {"oid": "f8df60ccc68dafee0ade113e11e5545876f34fb8"}, "originalPosition": 99}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNTE5MjExOnYy", "diffSide": "RIGHT", "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/Signer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo0MjoxMlrOGFcCVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxODo0MjoxMlrOGFcCVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NTQxMw==", "bodyText": "nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        forkIfno.getFork(),\n          \n          \n            \n                        forkInfo.getFork(),", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408355413", "createdAt": "2020-04-14T18:42:12Z", "author": {"login": "cemozerr"}, "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/Signer.java", "diffHunk": "@@ -35,29 +36,49 @@ public Signer(final MessageSignerService signerService) {\n     this.signerService = signerService;\n   }\n \n-  public SafeFuture<BLSSignature> createRandaoReveal(final UnsignedLong epoch, final Fork fork) {\n-    Bytes domain = get_domain(Constants.DOMAIN_RANDAO, epoch, fork);\n+  public SafeFuture<BLSSignature> createRandaoReveal(\n+      final UnsignedLong epoch, final ForkInfo forkIfno) {\n+    Bytes domain =\n+        get_domain(\n+            Constants.DOMAIN_RANDAO,\n+            epoch,\n+            forkIfno.getFork(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8df60ccc68dafee0ade113e11e5545876f34fb8"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1597, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}