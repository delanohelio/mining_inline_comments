{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MzMzMTc2", "number": 1201, "title": "[BC-90] Process rpc responses asynchronously", "bodyText": "PR Description\nCreate new AsyncResponseProcessor class for processing responses to outgoing rpc requests asynchronously.  This fixes a few issues:\n\nPreviously, our response processing time would be considered when evaluating rpc timeouts.  Now, timeouts should only fire if bytes are slow to arrive from the network.\nPreviously, if we were slow in processing rpc responses, bytes received from our peer would end up buffered in memory at the libp2p layer.  When an error was encountered, we could close our rpc stream, but those messages buffered in memory would continue to arrive and be processed.  This caused some confusing behavior where messages continued to be processed when a request was considered finished.", "createdAt": "2020-02-19T18:50:22Z", "url": "https://github.com/ConsenSys/teku/pull/1201", "merged": true, "mergeCommit": {"oid": "3be9c287fc74edb41e677b9c3c92324f4973d9cd"}, "closed": true, "closedAt": "2020-02-20T15:14:41Z", "author": {"login": "mbaxter"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF4a3gAH2gAyMzc3MzMzMTc2OmUxNmNhMDgyOGU5ZGNiOTA4YzY1NDg0NzlhN2EwNWVjMjFlMTUzNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGMJSbAH2gAyMzc3MzMzMTc2OmMzZWQ0ZmJkOGEyYzU5ODQyYWRiMDk2Mzc3NzkwZGMzNDU3YmI2MTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e16ca0828e9dcb908c6548479a7a05ec21e15345", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/e16ca0828e9dcb908c6548479a7a05ec21e15345", "committedDate": "2020-02-19T15:39:44Z", "message": "Hide executor from AsyncRunner interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a736eebf98104fa46be161ec0478bd335931a350", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/a736eebf98104fa46be161ec0478bd335931a350", "committedDate": "2020-02-19T15:39:44Z", "message": "Add ability to inject executor into DelayedExecutorAsyncRunner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20816fe0999af99e9602729c62cdfff8ad7c5080", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/20816fe0999af99e9602729c62cdfff8ad7c5080", "committedDate": "2020-02-19T15:39:44Z", "message": "Consolidate request shutdown logic, close stream on error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f455e3daf2f3b6d1e9fc957f8b45d7b6ae306c0", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/7f455e3daf2f3b6d1e9fc957f8b45d7b6ae306c0", "committedDate": "2020-02-19T15:39:44Z", "message": "Process rpc responses asynchronously"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "696ce826443a6effc6e58941d70928862308c1ec", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/696ce826443a6effc6e58941d70928862308c1ec", "committedDate": "2020-02-19T15:39:44Z", "message": "Request handler shouldn't need to clear async processor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc154def654ad8a8ae6e190f0dc899a7fdfab0b5", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/dc154def654ad8a8ae6e190f0dc899a7fdfab0b5", "committedDate": "2020-02-19T15:39:44Z", "message": "Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9834c728cb111c8a18220d66bf2b0fda21ad5f32", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/9834c728cb111c8a18220d66bf2b0fda21ad5f32", "committedDate": "2020-02-19T16:09:27Z", "message": "Cut unused classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e756c6fdbdd747912deb9e0dafc4beb1fc983865", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/e756c6fdbdd747912deb9e0dafc4beb1fc983865", "committedDate": "2020-02-19T18:24:31Z", "message": "Clean up test utilities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b7f69753d5c0141375dec2cb53cf9015699c607", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/9b7f69753d5c0141375dec2cb53cf9015699c607", "committedDate": "2020-02-19T18:40:02Z", "message": "Use final or volatile instance vars, fix var name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ebd1fb0aa10097a3ce5640cd05e5fd5dad3166f", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/2ebd1fb0aa10097a3ce5640cd05e5fd5dad3166f", "committedDate": "2020-02-19T18:49:44Z", "message": "Fix spotless issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTE1ODkz", "url": "https://github.com/ConsenSys/teku/pull/1201#pullrequestreview-361515893", "createdAt": "2020-02-19T23:32:32Z", "commit": {"oid": "2ebd1fb0aa10097a3ce5640cd05e5fd5dad3166f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMzozMjozMlrOFr7h4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMzozMjozMlrOFr7h4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYwODQxNg==", "bodyText": "ooo, fancy. I like it.", "url": "https://github.com/ConsenSys/teku/pull/1201#discussion_r381608416", "createdAt": "2020-02-19T23:32:32Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/async/SafeFuture.java", "diffHunk": "@@ -74,6 +74,15 @@ public static void reportExceptions(final CompletionStage<?> future) {\n         });\n   }\n \n+  static SafeFuture<Void> fromRunnable(final Runnable action) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ebd1fb0aa10097a3ce5640cd05e5fd5dad3166f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3ed4fbd8a2c59842adb096377790dc3457bb614", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/c3ed4fbd8a2c59842adb096377790dc3457bb614", "committedDate": "2020-02-20T14:38:38Z", "message": "Merge branch 'master' into bc-90/process-rpc-responses-async"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4069, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}