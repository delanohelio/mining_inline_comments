{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwOTg1ODk5", "number": 1240, "title": "Improve rpc logging, only close outgoing rpc stream once", "bodyText": "PR Description\nImprove rpc logging by ensuring that we only close our outgoing rpc streams once.  Previously, our timeout code could run after the stream had already been closed, which made the logs a bit confusing.", "createdAt": "2020-02-27T17:44:35Z", "url": "https://github.com/ConsenSys/teku/pull/1240", "merged": true, "mergeCommit": {"oid": "b84022af6c0526544f8bf1889507a607e8839bee"}, "closed": true, "closedAt": "2020-02-27T19:23:27Z", "author": {"login": "mbaxter"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIe2ldgH2gAyMzgwOTg1ODk5OmQwMjc4NTA1ODM4MDMyNThlYTBlZmJlYTY0ZDU4MWQyYzcyNDNhYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIgSpEAFqTM2NTkyNzk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d027850583803258ea0efbea64d581d2c7243ac4", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/d027850583803258ea0efbea64d581d2c7243ac4", "committedDate": "2020-02-27T17:34:15Z", "message": "Improve rpc logging, only close outgoing rpc stream once"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "405e50ef04318a6e2e3590a42aef84798132b70f", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/405e50ef04318a6e2e3590a42aef84798132b70f", "committedDate": "2020-02-27T17:44:49Z", "message": "Merge branch 'master' into minor/improve-rpc-logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTI3NzE4", "url": "https://github.com/ConsenSys/teku/pull/1240#pullrequestreview-365927718", "createdAt": "2020-02-27T19:14:29Z", "commit": {"oid": "405e50ef04318a6e2e3590a42aef84798132b70f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOToxNDoyOVrOFvd1yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOToxNDoyOVrOFvd1yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNjI5Nw==", "bodyText": "Why use compare and set here instead of just setting is closed to true?", "url": "https://github.com/ConsenSys/teku/pull/1240#discussion_r385316297", "createdAt": "2020-02-27T19:14:29Z", "author": {"login": "cemozerr"}, "path": "networking/eth2/src/main/java/tech/pegasys/artemis/networking/eth2/rpc/core/Eth2OutgoingRequestHandler.java", "diffHunk": "@@ -135,6 +140,9 @@ private void completeRequest(final RpcStream rpcStream) {\n   }\n \n   private void cancelRequest(final RpcStream rpcStream, Throwable error) {\n+    if (!isClosed.compareAndSet(false, true)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "405e50ef04318a6e2e3590a42aef84798132b70f"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTI3OTQ1", "url": "https://github.com/ConsenSys/teku/pull/1240#pullrequestreview-365927945", "createdAt": "2020-02-27T19:14:48Z", "commit": {"oid": "405e50ef04318a6e2e3590a42aef84798132b70f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4130, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}