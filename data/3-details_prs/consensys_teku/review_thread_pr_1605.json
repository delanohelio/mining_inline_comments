{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MTA4NDQz", "number": 1605, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNTowMjo1MFrODyi6Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTo0OToyMFrODy8_Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzI3Mzk4OnYy", "diffSide": "RIGHT", "path": "services/beaconchain/src/main/java/tech/pegasys/artemis/services/beaconchain/BeaconChainController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNTowMjo1MFrOGGpx3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwMzoyNDo1M1rOGG-oNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyOTE1MA==", "bodyText": "As you mentioned in the description making the last two arguments constants with clear names would be nice.", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r409629150", "createdAt": "2020-04-16T15:02:50Z", "author": {"login": "cemozerr"}, "path": "services/beaconchain/src/main/java/tech/pegasys/artemis/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -268,6 +275,13 @@ private void initEth1DataCache() {\n         });\n   }\n \n+  private void initSyncStateTracker() {\n+    LOG.debug(\"BeaconChainController.initSyncStateTracker\");\n+    // TODO: Make startup conditions configurable and set reasonable defaults based on the network\n+    syncStateTracker =\n+        new SyncStateTracker(asyncRunner, syncService, p2pNetwork, 5, Duration.ofSeconds(10));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e9e3a06ae4b68596bf39745925d52c93395be8a"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk3MDc0Mw==", "bodyText": "Yep they're command line options with defaults provided by the --network choice now.", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r409970743", "createdAt": "2020-04-17T03:24:53Z", "author": {"login": "ajsutton"}, "path": "services/beaconchain/src/main/java/tech/pegasys/artemis/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -268,6 +275,13 @@ private void initEth1DataCache() {\n         });\n   }\n \n+  private void initSyncStateTracker() {\n+    LOG.debug(\"BeaconChainController.initSyncStateTracker\");\n+    // TODO: Make startup conditions configurable and set reasonable defaults based on the network\n+    syncStateTracker =\n+        new SyncStateTracker(asyncRunner, syncService, p2pNetwork, 5, Duration.ofSeconds(10));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyOTE1MA=="}, "originalCommit": {"oid": "3e9e3a06ae4b68596bf39745925d52c93395be8a"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzQ4MTQ2OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfigurationBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTozMTozMVrOGHSwZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMjozMToxNlrOGHe7wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMwMDUxOQ==", "bodyText": "nit: the naming of these two methods is a bit confusing since the getEffectiveValueOptional is currently the one that possibly returns null whereas getEffectiveValue wraps it in an optional", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r410300519", "createdAt": "2020-04-17T15:31:31Z", "author": {"login": "cemozerr"}, "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfigurationBuilder.java", "diffHunk": "@@ -343,7 +363,12 @@ public ArtemisConfiguration build() {\n         restApiInterface);\n   }\n \n-  private <T> T getEffectiveValue(\n+  private <T> T getEffectiveValue(final T explicitValue, final Supplier<T> predefinedNetworkValue) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2163f71adfe307ca51c36a7e9ead1102acbd516e"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDUwMDAzNA==", "bodyText": "The different is actually about whether the default value is Optional or not. I can't think of a particularly clear name but have changed to getOrDefault and getOrOptionalDefault to match the Map.getOrDefault method since that's essentially what it does. Ideally they'd have the same name but you can't have method signatures where only the generics vary.", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r410500034", "createdAt": "2020-04-17T22:31:16Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfigurationBuilder.java", "diffHunk": "@@ -343,7 +363,12 @@ public ArtemisConfiguration build() {\n         restApiInterface);\n   }\n \n-  private <T> T getEffectiveValue(\n+  private <T> T getEffectiveValue(final T explicitValue, final Supplier<T> predefinedNetworkValue) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMwMDUxOQ=="}, "originalCommit": {"oid": "2163f71adfe307ca51c36a7e9ead1102acbd516e"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NzU0NjM0OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tech/pegasys/artemis/util/async/AsyncRunner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTo0OToyMFrOGHTatw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMjoyNzo0N1rOGHe4Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMxMTM1MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    () -> {\n          \n          \n            \n                    () -> SafeFuture.fromRunnable(action)", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r410311351", "createdAt": "2020-04-17T15:49:20Z", "author": {"login": "mbaxter"}, "path": "util/src/main/java/tech/pegasys/artemis/util/async/AsyncRunner.java", "diffHunk": "@@ -27,6 +27,17 @@\n   <U> SafeFuture<U> runAfterDelay(\n       Supplier<SafeFuture<U>> action, long delayAmount, TimeUnit delayUnit);\n \n+  default SafeFuture<Void> runAfterDelay(\n+      final Runnable action, long delayAmount, TimeUnit delayUnit) {\n+    return runAfterDelay(\n+        () -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2163f71adfe307ca51c36a7e9ead1102acbd516e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ5OTA4Mg==", "bodyText": "Ooo good spot.", "url": "https://github.com/ConsenSys/teku/pull/1605#discussion_r410499082", "createdAt": "2020-04-17T22:27:47Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/async/AsyncRunner.java", "diffHunk": "@@ -27,6 +27,17 @@\n   <U> SafeFuture<U> runAfterDelay(\n       Supplier<SafeFuture<U>> action, long delayAmount, TimeUnit delayUnit);\n \n+  default SafeFuture<Void> runAfterDelay(\n+      final Runnable action, long delayAmount, TimeUnit delayUnit) {\n+    return runAfterDelay(\n+        () -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMxMTM1MQ=="}, "originalCommit": {"oid": "2163f71adfe307ca51c36a7e9ead1102acbd516e"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1645, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}