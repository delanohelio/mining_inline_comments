{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NTUzMzU5", "number": 3056, "title": "Delete v3 database", "bodyText": "PR Description\nThe v3 database is at least 6 months old, and its very unlikely that any existing databases out there are still running this version.  Delete it because it's not worth maintaining at this point.\nFixed Issue(s)\n\n\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-10-22T20:54:48Z", "url": "https://github.com/ConsenSys/teku/pull/3056", "merged": true, "mergeCommit": {"oid": "fd6127ac0b7f35662c38b0eb7ffa1bba4bf81a1d"}, "closed": true, "closedAt": "2020-10-22T22:03:49Z", "author": {"login": "mbaxter"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVIV9KAH2gAyNTA4NTUzMzU5OjM4MTMzOGY2NDc1NDk1MzJjODczNWU2M2VmZDZjZTBkZTNhOTM0ZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVJUcLgFqTUxNTE1MTEwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "381338f647549532c8735e63efd6ce0de3a934d9", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/381338f647549532c8735e63efd6ce0de3a934d9", "committedDate": "2020-10-22T20:52:52Z", "message": "Delete v3 database handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTEyMjUw", "url": "https://github.com/ConsenSys/teku/pull/3056#pullrequestreview-515112250", "createdAt": "2020-10-22T20:56:28Z", "commit": {"oid": "381338f647549532c8735e63efd6ce0de3a934d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDo1NjoyOVrOHmzgrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDo1NjoyOVrOHmzgrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ1MTg4NQ==", "bodyText": "Upgraded this to an error because we should no longer be persisting hot blocks that do not descend from the latest finalized block.  This will help us catch regressions more easily with tests.", "url": "https://github.com/ConsenSys/teku/pull/3056#discussion_r510451885", "createdAt": "2020-10-22T20:56:29Z", "author": {"login": "mbaxter"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/store/Store.java", "diffHunk": "@@ -170,11 +170,10 @@ public static UpdatableStore create(\n     childToParentRoot.forEach(treeBuilder::childAndParentRoots);\n     final BlockTree blockTree = BlockTree.create(treeBuilder.build(), rootToSlotMap);\n     if (blockTree.size() < childToParentRoot.size()) {\n-      // This should be an error, but keeping this as a warning now for backwards-compatibility\n-      // reasons.  Some existing databases may have unpruned fork blocks, and could become\n-      // unusable\n-      // if we throw here.  In the future, we should convert this to an error.\n-      LOG.warn(\"Ignoring {} non-canonical blocks\", childToParentRoot.size() - blockTree.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "381338f647549532c8735e63efd6ce0de3a934d9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c153ee12ef0d5c59a1d96b8857298a3bc9ef43e7", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/c153ee12ef0d5c59a1d96b8857298a3bc9ef43e7", "committedDate": "2020-10-22T21:00:53Z", "message": "Migrate remaining v3 tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2b9129e2b07f8fbf4c2245f00cdbdaef05af8fe", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/b2b9129e2b07f8fbf4c2245f00cdbdaef05af8fe", "committedDate": "2020-10-22T21:18:17Z", "message": "Merge branch 'master' into minor/delete-v3-db"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTUxMTA3", "url": "https://github.com/ConsenSys/teku/pull/3056#pullrequestreview-515151107", "createdAt": "2020-10-22T22:01:07Z", "commit": {"oid": "b2b9129e2b07f8fbf4c2245f00cdbdaef05af8fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3246, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}