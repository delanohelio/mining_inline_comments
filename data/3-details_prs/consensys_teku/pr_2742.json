{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMzIwMTYy", "number": 2742, "title": "Better handle p2p target peer bounds", "bodyText": "PR Description\nBetter handle p2p target peer bounds.\nFixed Issue(s)\n\n\nFixes #2641\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-09-07T11:48:48Z", "url": "https://github.com/ConsenSys/teku/pull/2742", "merged": true, "mergeCommit": {"oid": "8ce9151f7068e24b87a589f0be0202d294ed07f7"}, "closed": true, "closedAt": "2020-09-09T13:51:33Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGhk-VAH2gAyNDgxMzIwMTYyOjE5NzEwNWFlODUxYWM5NTNhMGVlYmM3NjdiNDRlNWZlZWVjMTExMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHL9xeAH2gAyNDgxMzIwMTYyOmI2NTU1NGU5MGQwNGY5M2RjN2E0MThkYTVmMDM4NGMyMmM0MjgyNmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "197105ae851ac953a0eebc767b44e5feeec11133", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/197105ae851ac953a0eebc767b44e5feeec11133", "committedDate": "2020-09-07T11:48:02Z", "message": "Better handle p2p target peer bounds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNzExMjg4", "url": "https://github.com/ConsenSys/teku/pull/2742#pullrequestreview-483711288", "createdAt": "2020-09-07T21:20:50Z", "commit": {"oid": "197105ae851ac953a0eebc767b44e5feeec11133"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMToyMDo1MFrOHOHvqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMToyMToxMFrOHOHv3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU2OTAwMw==", "bodyText": "Math.min?", "url": "https://github.com/ConsenSys/teku/pull/2742#discussion_r484569003", "createdAt": "2020-09-07T21:20:50Z", "author": {"login": "ajsutton"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java", "diffHunk": "@@ -150,11 +150,19 @@ public String getP2pPrivateKeyFile() {\n   }\n \n   public int getP2pLowerBound() {\n-    return p2pLowerBound;\n+    if (p2pLowerBound > p2pUpperBound) {\n+      return p2pUpperBound;\n+    } else {\n+      return p2pLowerBound;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "197105ae851ac953a0eebc767b44e5feeec11133"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU2OTA1Mw==", "bodyText": "Math.max?", "url": "https://github.com/ConsenSys/teku/pull/2742#discussion_r484569053", "createdAt": "2020-09-07T21:21:10Z", "author": {"login": "ajsutton"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java", "diffHunk": "@@ -150,11 +150,19 @@ public String getP2pPrivateKeyFile() {\n   }\n \n   public int getP2pLowerBound() {\n-    return p2pLowerBound;\n+    if (p2pLowerBound > p2pUpperBound) {\n+      return p2pUpperBound;\n+    } else {\n+      return p2pLowerBound;\n+    }\n   }\n \n   public int getP2pUpperBound() {\n-    return p2pUpperBound;\n+    if (p2pUpperBound < p2pLowerBound) {\n+      return p2pLowerBound;\n+    } else {\n+      return p2pUpperBound;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "197105ae851ac953a0eebc767b44e5feeec11133"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7729e00c9341800d493bb5f833449a7dad09d4ba", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/7729e00c9341800d493bb5f833449a7dad09d4ba", "committedDate": "2020-09-08T11:43:34Z", "message": "Merge branch 'master' into betterHandleP2PTargetPeerBounds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84a61b29321832a316cb6b791efb7d417d6cf954", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/84a61b29321832a316cb6b791efb7d417d6cf954", "committedDate": "2020-09-08T11:54:25Z", "message": "Add warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75871ee984943f8d6b3779cc36d1ba3b6ef4bf8b", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/75871ee984943f8d6b3779cc36d1ba3b6ef4bf8b", "committedDate": "2020-09-08T11:54:41Z", "message": "Run spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NDk0MzE4", "url": "https://github.com/ConsenSys/teku/pull/2742#pullrequestreview-484494318", "createdAt": "2020-09-08T21:08:29Z", "commit": {"oid": "75871ee984943f8d6b3779cc36d1ba3b6ef4bf8b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMTowODoyOVrOHOuFQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMTowODoyOVrOHOuFQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE5NzEyMw==", "bodyText": "This will get lost in the log file but probably should go to the console instead (via StatusLogger).", "url": "https://github.com/ConsenSys/teku/pull/2742#discussion_r485197123", "createdAt": "2020-09-08T21:08:29Z", "author": {"login": "ajsutton"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java", "diffHunk": "@@ -150,11 +154,25 @@ public String getP2pPrivateKeyFile() {\n   }\n \n   public int getP2pLowerBound() {\n-    return p2pLowerBound;\n+    if (p2pLowerBound > p2pUpperBound) {\n+      LOG.warn(\n+          \"Adjusting target number of peers lower bound to equal upper bound, which is {}\",\n+          p2pUpperBound);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75871ee984943f8d6b3779cc36d1ba3b6ef4bf8b"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46e03ea2810fb54e74be0d722c8f8328937c4f9d", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/46e03ea2810fb54e74be0d722c8f8328937c4f9d", "committedDate": "2020-09-08T23:35:08Z", "message": "Merge branch 'master' into betterHandleP2PTargetPeerBounds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f460d7fb146df9c555991ed0f8fcad3e74783584", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/f460d7fb146df9c555991ed0f8fcad3e74783584", "committedDate": "2020-09-08T23:38:24Z", "message": "Merge branch 'master' into betterHandleP2PTargetPeerBounds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bf89da3b0fb8eb4873c14a486bd03d6959c9ab8", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/6bf89da3b0fb8eb4873c14a486bd03d6959c9ab8", "committedDate": "2020-09-09T12:07:23Z", "message": "Log via the status logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc99419c900f458103208d57cdc9eb8fc854c45b", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/dc99419c900f458103208d57cdc9eb8fc854c45b", "committedDate": "2020-09-09T12:07:38Z", "message": "Merge branch 'master' into betterHandleP2PTargetPeerBounds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2242e8adc958e6013a04dbc1a4df5aa746660632", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/2242e8adc958e6013a04dbc1a4df5aa746660632", "committedDate": "2020-09-09T12:17:47Z", "message": "Remove redundant logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b65554e90d04f93dc7a418da5f0384c22c42826f", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/b65554e90d04f93dc7a418da5f0384c22c42826f", "committedDate": "2020-09-09T13:11:08Z", "message": "Run spotless"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3582, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}