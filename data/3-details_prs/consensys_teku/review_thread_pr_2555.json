{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MjEzNzc3", "number": 2555, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDoyMToxNVrOEXXiWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDoyMzo1MVrOEXXl-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyOTM4MzMxOnYy", "diffSide": "RIGHT", "path": "storage/src/main/java/tech/pegasys/teku/storage/client/CombinedChainDataClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDoyMToxNVrOG_HzuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDozMzoyMlrOG_IOnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0MTQwMQ==", "bodyText": "Should we apply this rename to recentChainData.getBestSlot() too? I must admit I'm getting confused about best vs head vs current slot and what they all mean.  It may be worth adding some JavaDoc to define them.", "url": "https://github.com/ConsenSys/teku/pull/2555#discussion_r468841401", "createdAt": "2020-08-11T20:21:15Z", "author": {"login": "ajsutton"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/client/CombinedChainDataClient.java", "diffHunk": "@@ -333,10 +334,22 @@ public boolean isChainDataFullyAvailable() {\n     return result;\n   }\n \n-  public UInt64 getBestSlot() {\n+  public UInt64 getHeadSlot() {\n     return this.recentChainData.getBestSlot();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d66bb78aa5c85228e4d2be3c87018460571aab30"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0ODI4Nw==", "bodyText": "Yeah, I've thought about doing this several times and just avoided it because of the noise, but worth doing here since its kind of topical.", "url": "https://github.com/ConsenSys/teku/pull/2555#discussion_r468848287", "createdAt": "2020-08-11T20:33:22Z", "author": {"login": "mbaxter"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/client/CombinedChainDataClient.java", "diffHunk": "@@ -333,10 +334,22 @@ public boolean isChainDataFullyAvailable() {\n     return result;\n   }\n \n-  public UInt64 getBestSlot() {\n+  public UInt64 getHeadSlot() {\n     return this.recentChainData.getBestSlot();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0MTQwMQ=="}, "originalCommit": {"oid": "d66bb78aa5c85228e4d2be3c87018460571aab30"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyOTM5MjU3OnYy", "diffSide": "RIGHT", "path": "validator/coordinator/src/main/java/tech/pegasys/teku/validator/coordinator/ValidatorApiHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDoyMzo1MVrOG_H4-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMDoyMzo1MVrOG_H4-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0Mjc0Ng==", "bodyText": "I'd extract getCurrentSyncState to a variable so we have a consistent view of it rather than it potentially changing part way through this logic (should still work out fine but is easier to reason about if its fixed).", "url": "https://github.com/ConsenSys/teku/pull/2555#discussion_r468842746", "createdAt": "2020-08-11T20:23:51Z", "author": {"login": "ajsutton"}, "path": "validator/coordinator/src/main/java/tech/pegasys/teku/validator/coordinator/ValidatorApiHandler.java", "diffHunk": "@@ -307,8 +308,16 @@ public void sendSignedBlock(final SignedBeaconBlock block) {\n     eventBus.post(new ProposedBlockEvent(block));\n   }\n \n-  private boolean isSyncActive() {\n-    return !syncStateTracker.getCurrentSyncState().isInSync();\n+  @VisibleForTesting\n+  boolean isSyncActive() {\n+    return syncStateTracker.getCurrentSyncState().isStartingUp()\n+        || (syncStateTracker.getCurrentSyncState().isSyncing() && headBlockIsTooFarBehind());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d66bb78aa5c85228e4d2be3c87018460571aab30"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3393, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}