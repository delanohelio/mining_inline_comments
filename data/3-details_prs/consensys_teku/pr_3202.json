{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NTU4NzM0", "number": 3202, "title": "Add CLI option to disable built-in slashing protection for external signers", "bodyText": "PR Description\nAdds the --validators-external-signer-slashing-protection-enabled CLI option to disable the built-in slashing protection Teku provides for external signers.  Internal signers always use slashing protection regardless of this option.\nThe idea is that if you have advanced slashing protection with something like Web3Signer, you don't want Teku using its simpler slashing protection and refusing to even send requests to the external signer because it violates the more simple checks.\nAlso fixes ExternalSigner so that it uses a single HttpClient instance across all validators so resources can be optimally shared instead of creating a HttpClient instance for every validator.\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-11-12T01:48:25Z", "url": "https://github.com/ConsenSys/teku/pull/3202", "merged": true, "mergeCommit": {"oid": "b43627d678673743907e6f9c27a1f1970f404332"}, "closed": true, "closedAt": "2020-11-12T20:15:08Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbod0nAH2gAyNTE5NTU4NzM0OjAwMGFmZTFhNjY2YWI1OTE2YWNmM2IwZjFmZGRkMThiZDk1Yzk4OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb4NNRAH2gAyNTE5NTU4NzM0OjgyY2YwZGM5Mjg5ZDEzYmRhMmJiMGExYzg1NjE5Zjk1NzEzYjc3NWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "000afe1a666ab5916acf3b0f1fddd18bd95c988f", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/000afe1a666ab5916acf3b0f1fddd18bd95c988f", "committedDate": "2020-11-12T01:41:58Z", "message": "Add CLI option to disable built-in slashing protection for external signers."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjkyMDMy", "url": "https://github.com/ConsenSys/teku/pull/3202#pullrequestreview-528692032", "createdAt": "2020-11-12T02:34:02Z", "commit": {"oid": "000afe1a666ab5916acf3b0f1fddd18bd95c988f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMjozNDowMlrOHxm5PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMjozNDowMlrOHxm5PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc3OTUxNw==", "bodyText": "i would just make this --validators-internal-slashing-protection-enabled", "url": "https://github.com/ConsenSys/teku/pull/3202#discussion_r521779517", "createdAt": "2020-11-12T02:34:02Z", "author": {"login": "rolfyone"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/options/ValidatorOptions.java", "diffHunk": "@@ -75,6 +75,14 @@\n       arity = \"1\")\n   private String validatorExternalSignerUrl = null;\n \n+  @Option(\n+      names = {\"--validators-external-signer-slashing-protection-enabled\"},\n+      paramLabel = \"<BOOLEAN>\",\n+      description = \"Enable internal slashing protection for external signers. Default: true\",\n+      fallbackValue = \"true\",\n+      arity = \"0..1\")\n+  private boolean validatorExternalSignerSlashingProtectionEnabled = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "000afe1a666ab5916acf3b0f1fddd18bd95c988f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjkzMDAx", "url": "https://github.com/ConsenSys/teku/pull/3202#pullrequestreview-528693001", "createdAt": "2020-11-12T02:37:06Z", "commit": {"oid": "000afe1a666ab5916acf3b0f1fddd18bd95c988f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82cf0dc9289d13bda2bb0a1c85619f95713b775e", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/82cf0dc9289d13bda2bb0a1c85619f95713b775e", "committedDate": "2020-11-12T20:02:18Z", "message": "Merge branch 'master' of github.com:ConsenSys/teku into support-disabling-slashing-protection\n\n# Conflicts:\n#\tteku/src/main/java/tech/pegasys/teku/cli/options/ValidatorOptions.java\n#\tteku/src/main/java/tech/pegasys/teku/cli/subcommand/VoluntaryExitCommand.java\n#\tvalidator/client/src/main/java/tech/pegasys/teku/validator/client/ValidatorClientService.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4439, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}