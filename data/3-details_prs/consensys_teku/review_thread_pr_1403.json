{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMjAwMTg2", "number": 1403, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1MjoyOVrODpGLPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1NjoyNFrODpGQxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDE5MzkxOnYy", "diffSide": "RIGHT", "path": "validator/coordinator/src/main/java/tech/pegasys/artemis/validator/coordinator/Eth1DataCache.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1MjoyOVrOF4Dhyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1MjoyOVrOF4Dhyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMyMjM3OA==", "bodyText": "neat", "url": "https://github.com/ConsenSys/teku/pull/1403#discussion_r394322378", "createdAt": "2020-03-18T12:52:29Z", "author": {"login": "cemozerr"}, "path": "validator/coordinator/src/main/java/tech/pegasys/artemis/validator/coordinator/Eth1DataCache.java", "diffHunk": "@@ -153,9 +151,10 @@ private UnsignedLong secondsBeforeCurrentVotingPeriodStartTime(\n   }\n \n   private UnsignedLong computeTimeAtSlot(UnsignedLong slot) {\n-    if (genesisTime.isEmpty())\n-      throw new RuntimeException(\"computeTimeAtSlot called without genesisTime being set\");\n-    return genesisTime.get().plus(slot.times(UnsignedLong.valueOf(Constants.SECONDS_PER_SLOT)));\n+    return genesisTime\n+        .orElseThrow(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa08c115ed8506aae3104ba4e50a4353528ad503"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDIwODA2OnYy", "diffSide": "RIGHT", "path": "validator/coordinator/src/test/java/tech/pegasys/artemis/validator/coordinator/Eth1DataCacheTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1NjoyNFrOF4Dq9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjo1NjoyNFrOF4Dq9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMyNDcyNg==", "bodyText": "The comment here is misleading. This cacheEth1BlockEvent3 is still inside the current voting period, and that's why it gets cleaned up.", "url": "https://github.com/ConsenSys/teku/pull/1403#discussion_r394324726", "createdAt": "2020-03-18T12:56:24Z", "author": {"login": "cemozerr"}, "path": "validator/coordinator/src/test/java/tech/pegasys/artemis/validator/coordinator/Eth1DataCacheTest.java", "diffHunk": "@@ -288,6 +288,30 @@ void pruneAfterGenesis() {\n     assertThat(eth1DataCache.getMapForTesting().values()).containsExactly(eth1Data3);\n   }\n \n+  @Test\n+  void pruneAllBlockData() {\n+    eth1DataCache.startBeaconChainMode(genesisState);\n+    eth1DataCache.onSlot(new SlotEvent(START_SLOT));\n+\n+    // First two Eth1Data timestamps inside the spec range for this voting period\n+    CacheEth1BlockEvent cacheEth1BlockEvent1 =\n+        createRandomCacheEth1BlockEvent(UnsignedLong.valueOf(359));\n+    CacheEth1BlockEvent cacheEth1BlockEvent2 =\n+        createRandomCacheEth1BlockEvent(UnsignedLong.valueOf(360));\n+\n+    // This Eth1Data timestamp inside the spec range for the next voting period", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa08c115ed8506aae3104ba4e50a4353528ad503"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2567, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}