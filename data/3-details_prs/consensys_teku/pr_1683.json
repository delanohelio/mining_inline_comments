{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NzkzNDMz", "number": 1683, "title": "Set correct best block before network starts", "bodyText": "PR Description\nSet correct best block before network starts", "createdAt": "2020-04-27T23:08:06Z", "url": "https://github.com/ConsenSys/teku/pull/1683", "merged": true, "mergeCommit": {"oid": "73d6d543515bfeb92dadfb275105ef6c2bbdd098"}, "closed": true, "closedAt": "2020-04-28T18:10:19Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb4F2vgFqTQwMTQwMjI0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccHOTNgH2gAyNDA5NzkzNDMzOjRjMWM1YTgxM2RhMTk2Y2I0YWMyMGU0ZTcyZWM0YzU5MDc2ODNiY2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNDAyMjQ2", "url": "https://github.com/ConsenSys/teku/pull/1683#pullrequestreview-401402246", "createdAt": "2020-04-27T23:42:37Z", "commit": {"oid": "d3bac59c82cd8d84599a7ee22ba335dfe6a23ef7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzo0MjozOFrOGM8RDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzo0MjozOFrOGM8RDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyMzUwMA==", "bodyText": "I don't think this is right.  It works for genesis because there are no unknown blocks, but starting up after genesis we need to run fork choice to select the best block.", "url": "https://github.com/ConsenSys/teku/pull/1683#discussion_r416223500", "createdAt": "2020-04-27T23:42:38Z", "author": {"login": "ajsutton"}, "path": "storage/src/main/java/tech/pegasys/artemis/storage/client/RecentChainData.java", "diffHunk": "@@ -128,6 +122,12 @@ public Store getStore() {\n \n   // NETWORKING RELATED INFORMATION METHODS:\n \n+  public void updateBestBlock(ReadOnlyStore store) {\n+    Bytes32 headBlockRoot = store.getFinalizedCheckpoint().getRoot();\n+    BeaconBlock headBlock = store.getBlock(headBlockRoot);\n+    updateBestBlock(headBlockRoot, headBlock.getSlot());\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3bac59c82cd8d84599a7ee22ba335dfe6a23ef7"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c700788241c4a5886c1dbd01bab952c48f30e0ab", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/c700788241c4a5886c1dbd01bab952c48f30e0ab", "committedDate": "2020-04-28T16:33:25Z", "message": "Run fork choice after store then start network"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3bac59c82cd8d84599a7ee22ba335dfe6a23ef7", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/d3bac59c82cd8d84599a7ee22ba335dfe6a23ef7", "committedDate": "2020-04-27T23:39:02Z", "message": "Fix recentChainDataTests"}, "afterCommit": {"oid": "c700788241c4a5886c1dbd01bab952c48f30e0ab", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/c700788241c4a5886c1dbd01bab952c48f30e0ab", "committedDate": "2020-04-28T16:33:25Z", "message": "Run fork choice after store then start network"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f378f7f60f2c6f6b8a654e0e4a0cc724e2fb3206", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/f378f7f60f2c6f6b8a654e0e4a0cc724e2fb3206", "committedDate": "2020-04-28T16:56:37Z", "message": "Merge branch 'master' into storeInitializationGuaranteesBestBlock"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDQ4OTgw", "url": "https://github.com/ConsenSys/teku/pull/1683#pullrequestreview-402048980", "createdAt": "2020-04-28T17:17:35Z", "commit": {"oid": "f378f7f60f2c6f6b8a654e0e4a0cc724e2fb3206"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c1c5a813da196cb4ac20e4e72ec4c5907683bca", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/4c1c5a813da196cb4ac20e4e72ec4c5907683bca", "committedDate": "2020-04-28T17:20:55Z", "message": "Tiny clean up"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4136, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}