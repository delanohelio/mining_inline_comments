{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTU1MDU3", "number": 2971, "title": "Update config and reference tests to v1.0.0-rc.0 + Reject BLS infinity pubkeys and signatures", "bodyText": "PR Description\nThis is the continuation of @ajsutton PR #2952:\n\nReject BLS infinity pubkeys and signatures\nAllow zero private key creation but throw when signing with this key\nAdd BLSConstants.VALID_INFINITY temporary compatibility flag which may be set to true to preserve previous BLS behavior\nMake reference BLS tests covering both BLS implementations\nMikuli implementation code clean up: many methods removed and/or inlined\nAdjust unit tests for the new BLS infinity treatment\n\nFixed Issue(s)\nPart of #2951\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-10-14T18:16:17Z", "url": "https://github.com/ConsenSys/teku/pull/2971", "merged": true, "mergeCommit": {"oid": "b8b2b569507143b5075efeb6df65c48e1b3bb027"}, "closed": true, "closedAt": "2020-10-16T11:29:31Z", "author": {"login": "Nashatyrev"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR7ytUAH2gAyNTAzNTU1MDU3OjllNTNhZWE4NDIyYTA1ZTQ0MmY2NTg3NDc1N2QwNzhkOGMyZjQzZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTELpIAH2gAyNTAzNTU1MDU3OjdkMGFlNzVlMWI3NTNjYmI2MTQ0YTAzZjNlZThkZDg3ZWEzZDMyNDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e53aea8422a05e442f65874757d078d8c2f43f9", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/9e53aea8422a05e442f65874757d078d8c2f43f9", "committedDate": "2020-10-12T22:33:44Z", "message": "Apply new config for 1.0.0-rc.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45c683f66726e34170c7cac81ca7048b1aad9c26", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/45c683f66726e34170c7cac81ca7048b1aad9c26", "committedDate": "2020-10-12T22:54:05Z", "message": "Apply the right version of config."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52e42272d649e3cf1ca4fbc298e2cba9e9f3798", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/c52e42272d649e3cf1ca4fbc298e2cba9e9f3798", "committedDate": "2020-10-12T22:56:20Z", "message": "No really, the phase 0 constants from 1.0.0-rc.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81b9ade17f63ee57a45045f26e8f2b138b34ec1f", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/81b9ade17f63ee57a45045f26e8f2b138b34ec1f", "committedDate": "2020-10-12T23:07:11Z", "message": "Update expected length bounds.  New constants allow beacon state to be larger."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "215d6bf82a9cefac5078254a0e6ddb62b4558866", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/215d6bf82a9cefac5078254a0e6ddb62b4558866", "committedDate": "2020-10-13T00:04:25Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into rc1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14795cc3870707769d589958ae0834adb43f984b", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/14795cc3870707769d589958ae0834adb43f984b", "committedDate": "2020-10-13T00:12:25Z", "message": "Update states in FuzzUtilTest to match new constants."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "463362084c644aa41bee18b8fcd157faafa3c820", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/463362084c644aa41bee18b8fcd157faafa3c820", "committedDate": "2020-10-13T00:38:26Z", "message": "Support weird case of one test using messages instead of message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4df2638a060e691e0094a8cac9a6ec23f99cf8d1", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/4df2638a060e691e0094a8cac9a6ec23f99cf8d1", "committedDate": "2020-10-13T00:40:22Z", "message": "Handle signing tests that are expected to fail."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f9dccbdeb58f3baa9cb7b8aac319c326c164b9b", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/7f9dccbdeb58f3baa9cb7b8aac319c326c164b9b", "committedDate": "2020-10-13T00:40:44Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into rc1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aadfb274fca7504bca1d715ac56c063627ff63d", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/3aadfb274fca7504bca1d715ac56c063627ff63d", "committedDate": "2020-10-13T15:04:03Z", "message": "Fix the original issue with  BlstSignature.verify(List<PublicKeyMessagePair> keysToMessages) and Infinity pub key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf76b2f2b786053746ad5d3c2bf62fb94d71d1a4", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/cf76b2f2b786053746ad5d3c2bf62fb94d71d1a4", "committedDate": "2020-10-13T15:19:14Z", "message": "Add global BLSConstants.VALID_INFINITY variable and make use of it for Blst implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bf299fd3e8884c6d8814a0a4438c5a76db3f3e8", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/7bf299fd3e8884c6d8814a0a4438c5a76db3f3e8", "committedDate": "2020-10-13T16:22:35Z", "message": "Convert invalid signature test cases from Mikuli specific to generic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92087a1c590d4e1611791af7675b1279305e9265", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/92087a1c590d4e1611791af7675b1279305e9265", "committedDate": "2020-10-14T09:50:20Z", "message": "Use dedicated DeserializeException when failed to deserialize G1/G2 points from bytes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eacd8fa60472742c276bac47651677a6f703c0a", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/4eacd8fa60472742c276bac47651677a6f703c0a", "committedDate": "2020-10-14T11:06:54Z", "message": "Cleanup Mikuli implementation. Handle malformed serialized pkeys and signatures on a higher level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcdc0ffa7108d8b6a3fb4af8847fff63c8030a2", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/2fcdc0ffa7108d8b6a3fb4af8847fff63c8030a2", "committedDate": "2020-10-14T16:13:52Z", "message": "A bit more Mikuli clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a98fa087a0344139d83ca6b4a38cc39903227c28", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/a98fa087a0344139d83ca6b4a38cc39903227c28", "committedDate": "2020-10-14T17:02:04Z", "message": "More Mikuli BLS code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a071d94ae0dda187d957b36ecd4edece66fe389e", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/a071d94ae0dda187d957b36ecd4edece66fe389e", "committedDate": "2020-10-14T17:30:46Z", "message": "Make reference BLS tests executing on both BLS implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d4c0cfc87b55775276af901bd803ef05af2e21e", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/3d4c0cfc87b55775276af901bd803ef05af2e21e", "committedDate": "2020-10-14T17:33:19Z", "message": "Handle Infinity pubkey in mikuli implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "425f1e3766ff45d38d74ba2ae37ee6238d265096", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/425f1e3766ff45d38d74ba2ae37ee6238d265096", "committedDate": "2020-10-14T17:33:34Z", "message": "Spotless apply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cceb096af6e14c3fdf29db2977449629a75f846", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/3cceb096af6e14c3fdf29db2977449629a75f846", "committedDate": "2020-10-14T18:04:13Z", "message": "Fix unit tests to conform new BLS spec draft: Infinite pubkey/sig are invalid, not allowed to sign with Zero privkey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71143774ce40f7b80e98d4e7ff526bce5a24006f", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/71143774ce40f7b80e98d4e7ff526bce5a24006f", "committedDate": "2020-10-14T18:04:48Z", "message": "Fix batchVerify with respect to Infinite pubkeys in both implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac93af65c91a3753cf97457f83c9987b33251792", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/ac93af65c91a3753cf97457f83c9987b33251792", "committedDate": "2020-10-14T18:05:59Z", "message": "Merge remote-tracking branch 'pegasys/master' into feature/rc1-bls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "145d5039594c09d8279564453493fd26de9ebac6", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/145d5039594c09d8279564453493fd26de9ebac6", "committedDate": "2020-10-14T18:35:24Z", "message": "Fix warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "373732ff8b8b5ff2b9d0eae4933fd1e55398f3d0", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/373732ff8b8b5ff2b9d0eae4933fd1e55398f3d0", "committedDate": "2020-10-14T18:41:14Z", "message": "Return back accidentally removed @Disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c80cdb9c73d9f99d7f82b1ee5d717c14b21bb45e", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/c80cdb9c73d9f99d7f82b1ee5d717c14b21bb45e", "committedDate": "2020-10-15T09:20:21Z", "message": "Specify BLSConstants.VALID_INFINITY by custom Constants const"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8422bd2e307e40166eca9eab260153bc6b401ead", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/8422bd2e307e40166eca9eab260153bc6b401ead", "committedDate": "2020-10-15T09:33:24Z", "message": "Fix the test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5OTM4Mjkw", "url": "https://github.com/ConsenSys/teku/pull/2971#pullrequestreview-509938290", "createdAt": "2020-10-16T00:34:43Z", "commit": {"oid": "8422bd2e307e40166eca9eab260153bc6b401ead"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwMDozNDo0M1rOHigC-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwMDozNDo0M1rOHigC-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzODY4Mg==", "bodyText": "Can we make this a boolean instead of 0 or 1?", "url": "https://github.com/ConsenSys/teku/pull/2971#discussion_r505938682", "createdAt": "2020-10-16T00:34:43Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/Constants.java", "diffHunk": "@@ -167,13 +169,19 @@\n   public static final int VALID_VALIDATOR_SET_SIZE = 10000;\n   public static final int NETWORKING_FAILURE_REPEAT_INTERVAL = 3; // in sec\n \n+  // Custom\n+  // Temporary BLS backward compatibility flag\n+  // Set to 1 if required BLS to be pre rc-1 spec compatible\n+  public static int BLS_INFINITY_VALID = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8422bd2e307e40166eca9eab260153bc6b401ead"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3cfcc5a6caaa816c4ab674621a3fca88678f6fe", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/b3cfcc5a6caaa816c4ab674621a3fca88678f6fe", "committedDate": "2020-10-16T10:35:31Z", "message": "Make BLS_INFINITY_VALID boolean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d0ae75e1b753cbb6144a03f3ee8dd87ea3d3248", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/7d0ae75e1b753cbb6144a03f3ee8dd87ea3d3248", "committedDate": "2020-10-16T10:54:08Z", "message": "Merge remote-tracking branch 'pegasys/master' into feature/rc1-bls"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3357, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}