{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczOTQ4MTYw", "number": 2659, "title": "Support reading withdrawal public key from keystore", "bodyText": "PR Description\nSupport reading withdrawal public key from keystore using the --withdrawal-keystore-file CLI argument.\nFixed Issue(s)\n\n\nFixes #1758\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-08-26T14:30:45Z", "url": "https://github.com/ConsenSys/teku/pull/2659", "merged": true, "mergeCommit": {"oid": "97b5ce37ae5f284ab558030d25bd446438cc6a48"}, "closed": true, "closedAt": "2020-08-28T11:02:44Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCssZaAH2gAyNDczOTQ4MTYwOjBiMjBiNDRiMzM2YWUyNTYxNGFkMTY0ZTEyNDM2YTdhYmFlMmRmZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDSxgBAH2gAyNDczOTQ4MTYwOjU4OTA0OGEyYWViOTE5MGVhYTNmODljYTA1NTQzZmVhNDgxMDllMTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0b20b44b336ae25614ad164e12436a7abae2dfe5", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/0b20b44b336ae25614ad164e12436a7abae2dfe5", "committedDate": "2020-08-26T14:29:24Z", "message": "Support reading withdrawal public key from keystore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72040916170ea7769269a8d66d429c7f195bf935", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/72040916170ea7769269a8d66d429c7f195bf935", "committedDate": "2020-08-26T14:36:55Z", "message": "Run spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODM2Mzk5", "url": "https://github.com/ConsenSys/teku/pull/2659#pullrequestreview-475836399", "createdAt": "2020-08-26T20:31:29Z", "commit": {"oid": "72040916170ea7769269a8d66d429c7f195bf935"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDozMToyOVrOHHcoiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDozMToyOVrOHHcoiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU3MTIwOQ==", "bodyText": "We shouldn't need the withdrawal keystore password because the public key is recorded in the JSON (it gets parsed as KeystoreData.pubkey).  There's a chance it might differ from the actual key but seems reasonable to assume it's correct (and it's at least as accurate as taking the public key directly on the command line).", "url": "https://github.com/ConsenSys/teku/pull/2659#discussion_r477571209", "createdAt": "2020-08-26T20:31:29Z", "author": {"login": "ajsutton"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/deposit/WithdrawalPublicKeyOptions.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.teku.cli.deposit;\n+\n+import java.io.File;\n+import picocli.CommandLine.ArgGroup;\n+import picocli.CommandLine.Option;\n+\n+class WithdrawalPublicKeyOptions {\n+  @Option(\n+      names = {\"--withdrawal-public-key\"},\n+      paramLabel = \"<PUBLIC_KEY>\",\n+      required = true,\n+      description = \"Public withdrawal key for the validator\")\n+  String withdrawalKey;\n+\n+  @ArgGroup(exclusive = false, multiplicity = \"1\")\n+  WithdrawalEncryptedKeystoreOptions keystoreOptions;\n+\n+  static class WithdrawalEncryptedKeystoreOptions {\n+    @Option(\n+        names = {\"--withdrawal-keystore-file\"},\n+        required = true,\n+        paramLabel = \"<FILE>\",\n+        description = \"Path to encrypted (V3) keystore containing withdrawal key for the validator\")\n+    File withdrawalKeystoreFile;\n+\n+    @Option(\n+        names = {\"--withdrawal-keystore-password-file\"},\n+        required = true,\n+        paramLabel = \"<FILE>\",\n+        description =\n+            \"Path to file containing password to decrypt validator withdrawal key keystore\")\n+    File withdrawalKeystorePasswordFile;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72040916170ea7769269a8d66d429c7f195bf935"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e745667c4e90c01db153407d0ec97a918beac5e5", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/e745667c4e90c01db153407d0ec97a918beac5e5", "committedDate": "2020-08-27T09:22:45Z", "message": "Remove the need for password file when taking in withdrawal keystore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b7a17925fb14e4921506a7cd31336d81ee1a095", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/3b7a17925fb14e4921506a7cd31336d81ee1a095", "committedDate": "2020-08-27T09:23:03Z", "message": "Run spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed566b538d2bdd442b053bd69f9bac3afc2a3f4c", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/ed566b538d2bdd442b053bd69f9bac3afc2a3f4c", "committedDate": "2020-08-27T09:30:20Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d72ca2c4b11802d4f2a44496f2f5f22efac5c603", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/d72ca2c4b11802d4f2a44496f2f5f22efac5c603", "committedDate": "2020-08-27T11:42:27Z", "message": "Use generated withdrawal keys for generate-and-register"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14329810932d3801a12ee1dbba9f0955e581eac9", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/14329810932d3801a12ee1dbba9f0955e581eac9", "committedDate": "2020-08-27T11:58:29Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a45776ddeeedbdc0ff90d005508a99ad39cb1213", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/a45776ddeeedbdc0ff90d005508a99ad39cb1213", "committedDate": "2020-08-27T12:09:37Z", "message": "Run spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d0bfb508e0cd11ece2d2ef25cb0bc48a84d7ed5", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/3d0bfb508e0cd11ece2d2ef25cb0bc48a84d7ed5", "committedDate": "2020-08-27T12:35:12Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36227e121d8588d1ef570cc44da7fda903a68c2c", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/36227e121d8588d1ef570cc44da7fda903a68c2c", "committedDate": "2020-08-27T13:44:03Z", "message": "Merge branch 'master' into readWithdrawalKeyFromKeystore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTYwODM1", "url": "https://github.com/ConsenSys/teku/pull/2659#pullrequestreview-477160835", "createdAt": "2020-08-28T00:06:18Z", "commit": {"oid": "36227e121d8588d1ef570cc44da7fda903a68c2c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "589048a2aeb9190eaa3f89ca05543fea48109e12", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/589048a2aeb9190eaa3f89ca05543fea48109e12", "committedDate": "2020-08-28T10:51:22Z", "message": "Merge branch 'master' into readWithdrawalKeyFromKeystore"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3533, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}