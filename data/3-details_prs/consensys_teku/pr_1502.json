{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1Mzk3NDky", "number": 1502, "title": "Only add loggers programmatically to a custom log4j config when selected", "bodyText": "PR Description\nChanging the programmatic logging to only be applied when the user has provided a log4j2 config file either as a System or Environment variable AND has chosen a destination in the Teku config file", "createdAt": "2020-03-30T04:28:44Z", "url": "https://github.com/ConsenSys/teku/pull/1502", "merged": true, "mergeCommit": {"oid": "cba98c95135ff6a94b6bd8fbb2b7f7e503114f9d"}, "closed": true, "closedAt": "2020-03-31T03:38:18Z", "author": {"login": "CjHare"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSjChWgH2gAyMzk1Mzk3NDkyOjU3ZDZmMWQ0M2ZjYmE3ZTdhODdlMmYwMWE0YjVlOTAxNjhmNGM2MWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS6VVdgH2gAyMzk1Mzk3NDkyOjEyYTgxNjI1ZDMwMWFmNzNiNmY3OTU5ZTQzOGYxZjljNWNhZGIxOTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "57d6f1d43fcba7e7a87e2f01a4b5e90168f4c61c", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/57d6f1d43fcba7e7a87e2f01a4b5e90168f4c61c", "committedDate": "2020-03-30T00:06:09Z", "message": "Do not override a system log configFile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3a8a76e3ad79e11a19c802a4f0c20e0c664c78", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/da3a8a76e3ad79e11a19c802a4f0c20e0c664c78", "committedDate": "2020-03-30T02:35:08Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into enviroment-logging-config-replaces-application"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fdf2b601a90e9f851ffae5e10b7e904b566fc01", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/7fdf2b601a90e9f851ffae5e10b7e904b566fc01", "committedDate": "2020-03-30T04:26:05Z", "message": "changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e371e87836bbd8f67f39f028f43aca7b3a0af01d", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/e371e87836bbd8f67f39f028f43aca7b3a0af01d", "committedDate": "2020-03-30T04:47:41Z", "message": "Fixing UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d1da4aac1d0653a64a7094402b26ede802956c7", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/8d1da4aac1d0653a64a7094402b26ede802956c7", "committedDate": "2020-03-30T04:47:48Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into enviroment-logging-config-replaces-application"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88965fab3c4315292bba8f86ee7f9114bac405c2", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/88965fab3c4315292bba8f86ee7f9114bac405c2", "committedDate": "2020-03-30T23:35:16Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into enviroment-logging-config-replaces-application"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MzA1NzQ3", "url": "https://github.com/ConsenSys/teku/pull/1502#pullrequestreview-384305747", "createdAt": "2020-03-30T23:36:13Z", "commit": {"oid": "8d1da4aac1d0653a64a7094402b26ede802956c7"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMzozNjo0MFrOF-AFKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMzozNzozMlrOF-AGJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU1NzM1Mw==", "bodyText": "It's slightly confusing that this winds up printing:\n2020-03-31 09:32:18,769 main INFO Configuring logging for destination: DEFAULT_BOTH\nGiven we bail out entirely when custom logging is set, it would probably be more helpful to show the logging destination as \"file and console\" or something.  And if I'm being picky showing where the log file is being written would be super helpful.", "url": "https://github.com/ConsenSys/teku/pull/1502#discussion_r400557353", "createdAt": "2020-03-30T23:36:40Z", "author": {"login": "ajsutton"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/LoggingConfigurator.java", "diffHunk": "@@ -77,25 +80,27 @@ public static synchronized void addLoggersProgrammatically(\n \n   private static void addLoggers(final AbstractConfiguration configuration) {\n \n-    if (DESTINATION == null) {\n+    if (isUninitialized() || noProgrammaticLoggingRequired()) {\n       return;\n     }\n \n     StatusLogger.getLogger().info(\"Configuring logging for destination: {}\", DESTINATION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88965fab3c4315292bba8f86ee7f9114bac405c2"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU1NzYwNQ==", "bodyText": "Probably useful to have an info log here saying that custom logging config is being used.", "url": "https://github.com/ConsenSys/teku/pull/1502#discussion_r400557605", "createdAt": "2020-03-30T23:37:32Z", "author": {"login": "ajsutton"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/LoggingConfigurator.java", "diffHunk": "@@ -77,25 +80,27 @@ public static synchronized void addLoggersProgrammatically(\n \n   private static void addLoggers(final AbstractConfiguration configuration) {\n \n-    if (DESTINATION == null) {\n+    if (isUninitialized() || noProgrammaticLoggingRequired()) {\n       return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88965fab3c4315292bba8f86ee7f9114bac405c2"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4792b8e43618f553b41faad00a49f01a2625b6f", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/d4792b8e43618f553b41faad00a49f01a2625b6f", "committedDate": "2020-03-31T00:21:14Z", "message": "Logging when custom config is used"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8172078a3056973086469c79f856dc6045b262db", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/8172078a3056973086469c79f856dc6045b262db", "committedDate": "2020-03-31T00:22:18Z", "message": "Renaming variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bd9773e303a719b38cdae67e9197a8d8f5f948a", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/2bd9773e303a719b38cdae67e9197a8d8f5f948a", "committedDate": "2020-03-31T00:26:06Z", "message": "Method renmaing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16eb5d94e12b0b3c289317667e64099078a169d7", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/16eb5d94e12b0b3c289317667e64099078a169d7", "committedDate": "2020-03-31T03:04:45Z", "message": "extra logging output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12a81625d301af73b6f7959e438f1f9c5cadb191", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/12a81625d301af73b6f7959e438f1f9c5cadb191", "committedDate": "2020-03-31T03:14:31Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into enviroment-logging-config-replaces-application"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4414, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}