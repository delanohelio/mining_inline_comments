{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTA1MjI0", "number": 3090, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxOToxMTo1OFrOEygrWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxOToxMTo1OFrOEygrWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzk5NjQxOnYy", "diffSide": "RIGHT", "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/encodings/AbstractByteBufDecoder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxOToxMTo1OFrOHpMgKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwOTozNzoyNlrOHphYIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk1ODUwNQ==", "bodyText": "(nit / optional) We could move this to a helper method assertOpen()", "url": "https://github.com/ConsenSys/teku/pull/3090#discussion_r512958505", "createdAt": "2020-10-27T19:11:58Z", "author": {"login": "mbaxter"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/encodings/AbstractByteBufDecoder.java", "diffHunk": "@@ -30,12 +30,16 @@\n     implements ByteBufDecoder<TMessage, TException> {\n \n   private CompositeByteBuf compositeByteBuf = Unpooled.compositeBuffer();\n+  private boolean closed = false;\n \n   @Override\n   public Optional<TMessage> decodeOneMessage(ByteBuf in) throws TException {\n     if (!in.isReadable()) {\n       return Optional.empty();\n     }\n+    if (closed) {\n+      throw new IllegalStateException(\"Trying to reuse disposed decoder instance\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291db00c1da1fdb0b2c84b0f7dd256e3309ef40b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMwMDUxNQ==", "bodyText": "Yep good idea  \ud83d\udc4d  Just named it assertNotClosed since Opened sounds a bit weird with respect to Decoder IMO :)", "url": "https://github.com/ConsenSys/teku/pull/3090#discussion_r513300515", "createdAt": "2020-10-28T09:37:26Z", "author": {"login": "Nashatyrev"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/encodings/AbstractByteBufDecoder.java", "diffHunk": "@@ -30,12 +30,16 @@\n     implements ByteBufDecoder<TMessage, TException> {\n \n   private CompositeByteBuf compositeByteBuf = Unpooled.compositeBuffer();\n+  private boolean closed = false;\n \n   @Override\n   public Optional<TMessage> decodeOneMessage(ByteBuf in) throws TException {\n     if (!in.isReadable()) {\n       return Optional.empty();\n     }\n+    if (closed) {\n+      throw new IllegalStateException(\"Trying to reuse disposed decoder instance\");\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk1ODUwNQ=="}, "originalCommit": {"oid": "291db00c1da1fdb0b2c84b0f7dd256e3309ef40b"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3101, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}