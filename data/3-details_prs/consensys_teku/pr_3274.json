{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1MzU1NTQ1", "number": 3274, "title": "Exit cleanly if remote host is not available for voluntary exit.", "bodyText": "Fixes #3272\nSigned-off-by: Paul Harris paul.harris@consensys.net\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-11-22T20:59:13Z", "url": "https://github.com/ConsenSys/teku/pull/3274", "merged": true, "mergeCommit": {"oid": "e44882d2848ae64b6d7f83fc0a400082f551d4a6"}, "closed": true, "closedAt": "2020-11-22T22:16:50Z", "author": {"login": "rolfyone"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfG_y8AH2gAyNTI1MzU1NTQ1OjFlMTU5ZmU1MzQyMWU5NzkzOWFkYjZiMGQ5MmE2ZTRjNTE5M2Y3ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfIFROgFqTUzNjEyMTAxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1e159fe53421e97939adb6b0d92a6e4c5193f7fa", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/1e159fe53421e97939adb6b0d92a6e4c5193f7fa", "committedDate": "2020-11-22T20:58:00Z", "message": "Exit cleanly if remote host is not available for voluntary exit.\n\nFixes #3272\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc1a2bfd54bfc55b2dee9f47bbc601af13ebc28b", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/dc1a2bfd54bfc55b2dee9f47bbc601af13ebc28b", "committedDate": "2020-11-22T20:59:31Z", "message": "Merge remote-tracking branch 'upstream/master' into 3272"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MTE3MzQ0", "url": "https://github.com/ConsenSys/teku/pull/3274#pullrequestreview-536117344", "createdAt": "2020-11-22T21:32:11Z", "commit": {"oid": "dc1a2bfd54bfc55b2dee9f47bbc601af13ebc28b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMTozMjoxMVrOH37cnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMTozMjoxMVrOH37cnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQwNzcwOQ==", "bodyText": "Would be good to avoid the duplication in this try catch.  Given it's a RuntimeException I wonder if we can just catch it higher up instead of in these private methods and handle it in one place?\nWould also be kind of nice if the api client threw UncheckedIOException instead of RuntimeException so we don't have to catch something so generic.", "url": "https://github.com/ConsenSys/teku/pull/3274#discussion_r528407709", "createdAt": "2020-11-22T21:32:11Z", "author": {"login": "ajsutton"}, "path": "teku/src/main/java/tech/pegasys/teku/cli/subcommand/VoluntaryExitCommand.java", "diffHunk": "@@ -149,15 +153,31 @@ private void submitExitForValidator(final BLSPublicKey publicKey, final Integer\n   }\n \n   private Optional<Bytes32> getGenesisRoot() {\n-    return apiClient.getGenesis().map(response -> response.getData().getGenesisValidatorsRoot());\n+    try {\n+      return apiClient.getGenesis().map(response -> response.getData().getGenesisValidatorsRoot());\n+    } catch (RuntimeException ex) {\n+      if (Throwables.getRootCause(ex) instanceof ConnectException) {\n+        SUB_COMMAND_LOG.error(getFailedToConnectMessage());\n+        System.exit(1);\n+      }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc1a2bfd54bfc55b2dee9f47bbc601af13ebc28b"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfec3f0d26e270ac17f3c078b63a2e9b7c8a9ae1", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/dfec3f0d26e270ac17f3c078b63a2e9b7c8a9ae1", "committedDate": "2020-11-22T21:39:07Z", "message": "Merge remote-tracking branch 'upstream/master' into 3272"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7412024365c40bdc5c0f770e89486ec38a9a722a", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/7412024365c40bdc5c0f770e89486ec38a9a722a", "committedDate": "2020-11-22T22:00:09Z", "message": "review feedback\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MTIxMDE0", "url": "https://github.com/ConsenSys/teku/pull/3274#pullrequestreview-536121014", "createdAt": "2020-11-22T22:13:53Z", "commit": {"oid": "7412024365c40bdc5c0f770e89486ec38a9a722a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3221, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}