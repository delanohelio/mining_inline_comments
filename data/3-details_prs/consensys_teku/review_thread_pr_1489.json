{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDgzMDM2", "number": 1489, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyNzowNlrODr4dJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDozMjo1NFrODr4hOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzQwMzI1OnYy", "diffSide": "RIGHT", "path": "logging/src/main/java/tech/pegasys/teku/logging/StatusLogger.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyNzowNlrOF8fKvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDozNDoxMlrOF8fR9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2OTUzMw==", "bodyText": "Might be a good idea to name this as dutyFailure or something.", "url": "https://github.com/ConsenSys/teku/pull/1489#discussion_r398969533", "createdAt": "2020-03-27T00:27:06Z", "author": {"login": "cemozerr"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/StatusLogger.java", "diffHunk": "@@ -72,7 +72,7 @@ public void blockCreationFailure(final Exception cause) {\n     log.error(\"Error during block creation\", cause);\n   }\n \n-  public void attestationFailure(final IllegalArgumentException cause) {\n+  public void attestationFailure(final Throwable cause) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "287e65431e7653e25e2a17164eb4a2c5491bdede"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2OTkzMQ==", "bodyText": "That message is specifically for failing to create an attestation - there's a separate status event for failing to create a block.", "url": "https://github.com/ConsenSys/teku/pull/1489#discussion_r398969931", "createdAt": "2020-03-27T00:28:34Z", "author": {"login": "ajsutton"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/StatusLogger.java", "diffHunk": "@@ -72,7 +72,7 @@ public void blockCreationFailure(final Exception cause) {\n     log.error(\"Error during block creation\", cause);\n   }\n \n-  public void attestationFailure(final IllegalArgumentException cause) {\n+  public void attestationFailure(final Throwable cause) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2OTUzMw=="}, "originalCommit": {"oid": "287e65431e7653e25e2a17164eb4a2c5491bdede"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk3MTM4Mg==", "bodyText": "Then we should probably change the log.warn() string below at some point.", "url": "https://github.com/ConsenSys/teku/pull/1489#discussion_r398971382", "createdAt": "2020-03-27T00:34:12Z", "author": {"login": "cemozerr"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/StatusLogger.java", "diffHunk": "@@ -72,7 +72,7 @@ public void blockCreationFailure(final Exception cause) {\n     log.error(\"Error during block creation\", cause);\n   }\n \n-  public void attestationFailure(final IllegalArgumentException cause) {\n+  public void attestationFailure(final Throwable cause) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2OTUzMw=="}, "originalCommit": {"oid": "287e65431e7653e25e2a17164eb4a2c5491bdede"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzQxMzcxOnYy", "diffSide": "RIGHT", "path": "validator/coordinator/src/main/java/tech/pegasys/artemis/validator/coordinator/ValidatorCoordinator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDozMjo1NFrOF8fQqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDozMjo1NFrOF8fQqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk3MTA1MQ==", "bodyText": "Nice.", "url": "https://github.com/ConsenSys/teku/pull/1489#discussion_r398971051", "createdAt": "2020-03-27T00:32:54Z", "author": {"login": "cemozerr"}, "path": "validator/coordinator/src/main/java/tech/pegasys/artemis/validator/coordinator/ValidatorCoordinator.java", "diffHunk": "@@ -197,27 +194,82 @@ public void onAttestationEvent(BroadcastAttestationEvent event) throws IllegalAr\n       }\n \n       // Get attester information to prepare AttestationAggregator for new slot's aggregation\n-      List<AttesterInformation> attesterInformations = committeeAssignments.get(slot);\n+      List<AttesterInformation> attestersInformation = committeeAssignments.get(slot);\n \n       // If our beacon node does have any attestation responsibilities for this slot\n-      if (attesterInformations == null) {\n+      if (attestersInformation == null) {\n         return;\n       }\n \n       // Pass attestationAggregator all the attester information necessary\n       // for aggregation\n-      attestationAggregator.updateAggregatorInformations(attesterInformations);\n-\n-      asyncProduceAttestations(\n-          attesterInformations, headState, getGenericAttestationData(headState, headBlock));\n-\n-      // Save headState to check for slashings\n-      //      this.headState = headState;\n+      attestationAggregator.updateAggregatorInformations(attestersInformation);\n+\n+      final Map<UnsignedLong, List<AttesterInformation>> attestersByCommittee =\n+          attestersInformation.stream()\n+              .collect(Collectors.groupingBy(info -> info.getCommittee().getIndex()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "287e65431e7653e25e2a17164eb4a2c5491bdede"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1756, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}