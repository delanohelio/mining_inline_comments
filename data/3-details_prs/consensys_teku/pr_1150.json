{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NjA0MzQ4", "number": 1150, "title": "Ensure Eth1DataCache and ValidatorCoordinator process slots in sync", "bodyText": "The order that slot events were delivered to Eth1DataCache and ValidatorCoordinator was not guaranteed which may result in ValidatorCoordinator producing blocks with incorrect ETH1 data or Eth1DataCache not having the information ValidatorCoordinator needed.\nIt also led to intermittency in ValidatorCoordinatorTest when Eth1DataCache had not received a SlotEvent and initialised its currentVotingPeriodStartTime before ValidatorCoordinator asked it for an ETH1 data vote, resulting in java.lang.IllegalArgumentException: inconsistent range from the sorted map when retrieving votes.\nValidatorCoordinator now directly passes slot events to Eth1DataCache to ensure it has processed the slot event prior to starting to create blocks.", "createdAt": "2020-02-13T00:09:23Z", "url": "https://github.com/ConsenSys/teku/pull/1150", "merged": true, "mergeCommit": {"oid": "24aaba4bf26e22f0d456c9e8fc939673e713b65c"}, "closed": true, "closedAt": "2020-02-13T00:39:40Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDvbKsAH2gAyMzc0NjA0MzQ4OjE1MWE2ZjllOTM4YjQ5YmZlOWM2YWM4MzNmOTM1OTM4MWExNzExNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDvmZcAFqTM1Nzg3OTIyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "151a6f9e938b49bfe9c6ac833f9359381a171142", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/151a6f9e938b49bfe9c6ac833f9359381a171142", "committedDate": "2020-02-13T00:03:04Z", "message": "Ensure Eth1DataCache has processed slot events before ValidatorCoordinator tries to use it to create new blocks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "664037ae185758667766a5417bc63e0bcdffb259", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/664037ae185758667766a5417bc63e0bcdffb259", "committedDate": "2020-02-13T00:03:39Z", "message": "Remove unused code while I'm here."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODc4Njk2", "url": "https://github.com/ConsenSys/teku/pull/1150#pullrequestreview-357878696", "createdAt": "2020-02-13T00:13:55Z", "commit": {"oid": "664037ae185758667766a5417bc63e0bcdffb259"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDoxMzo1NlrOFpDCIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDoxMzo1NlrOFpDCIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NTYzMg==", "bodyText": "I was going to do this today if you didn't \ud83d\ude04", "url": "https://github.com/ConsenSys/teku/pull/1150#discussion_r378585632", "createdAt": "2020-02-13T00:13:56Z", "author": {"login": "cemozerr"}, "path": "validator/coordinator/src/main/java/tech/pegasys/artemis/validator/coordinator/ValidatorCoordinator.java", "diffHunk": "@@ -117,50 +117,6 @@ public ValidatorCoordinator(\n     this.eventBus.register(this);\n   }\n \n-  /*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "664037ae185758667766a5417bc63e0bcdffb259"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODc5MjIy", "url": "https://github.com/ConsenSys/teku/pull/1150#pullrequestreview-357879222", "createdAt": "2020-02-13T00:15:20Z", "commit": {"oid": "664037ae185758667766a5417bc63e0bcdffb259"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4032, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}