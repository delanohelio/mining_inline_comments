{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMTQ2NzUx", "number": 2834, "title": "Check consistency with wsCheckpoint at startup", "bodyText": "PR Description\nValidate consistency with the weak subjectivity checkpoint at startup.\nFixed Issue(s)\nPart of #2273\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-09-22T19:25:16Z", "url": "https://github.com/ConsenSys/teku/pull/2834", "merged": true, "mergeCommit": {"oid": "9060354d5abaa3427d6a88209d30901a270393eb"}, "closed": true, "closedAt": "2020-09-23T19:35:38Z", "author": {"login": "mbaxter"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLdBCdgH2gAyNDkxMTQ2NzUxOjYzYjM3NTM1MTQyMTUzZWJmMjRlYzU5ZDFhYTViMjE2YjY5MmE3MGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLxZsggH2gAyNDkxMTQ2NzUxOmRjZGVkNDZlYThlOTM4NjA4MjI3MWE5NmJiMWQyYjQwNTJhMmUyMzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "63b37535142153ebf24ec59d1aa5b216b692a70c", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/63b37535142153ebf24ec59d1aa5b216b692a70c", "committedDate": "2020-09-22T19:18:47Z", "message": "Check consistency with wsCheckpoint at startup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89f1b77600e62f591cf7c63d2e1dd65fbf3b093e", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/89f1b77600e62f591cf7c63d2e1dd65fbf3b093e", "committedDate": "2020-09-22T19:41:00Z", "message": "Undo method name change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5e6793ebb7cc40eb11f12ef788793686e8f48c4", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/a5e6793ebb7cc40eb11f12ef788793686e8f48c4", "committedDate": "2020-09-22T19:49:06Z", "message": "Add test for case where historical block missing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c580bf101327cbe86690b2f3576da9cd522510e", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/8c580bf101327cbe86690b2f3576da9cd522510e", "committedDate": "2020-09-23T15:01:20Z", "message": "Merge branch 'master' into issue-2273/validate-chain-state-at-startup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzYwMTA4", "url": "https://github.com/ConsenSys/teku/pull/2834#pullrequestreview-494760108", "createdAt": "2020-09-23T15:03:37Z", "commit": {"oid": "8c580bf101327cbe86690b2f3576da9cd522510e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNTowMzozN1rOHWzE9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNTowMzozN1rOHWzE9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY2NzU3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public SafeFuture<Void> validateIsConsistentWithWSCheckpoint(CombinedChainDataClient chainData) {\n          \n          \n            \n              public SafeFuture<Void> validateChainIsConsistentWithWSCheckpoint(CombinedChainDataClient chainData) {", "url": "https://github.com/ConsenSys/teku/pull/2834#discussion_r493667575", "createdAt": "2020-09-23T15:03:37Z", "author": {"login": "cemozerr"}, "path": "ethereum/weaksubjectivity/src/main/java/tech/pegasys/teku/weaksubjectivity/WeakSubjectivityValidator.java", "diffHunk": "@@ -72,6 +74,33 @@ public static WeakSubjectivityValidator lenient(final WeakSubjectivityConfig con\n         calculator, policies, config.getWeakSubjectivityCheckpoint());\n   }\n \n+  /** Check whether the chain matches any configured weak subjectivity checkpoint or state */\n+  public SafeFuture<Void> validateIsConsistentWithWSCheckpoint(CombinedChainDataClient chainData) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c580bf101327cbe86690b2f3576da9cd522510e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0OTM2NzQ3", "url": "https://github.com/ConsenSys/teku/pull/2834#pullrequestreview-494936747", "createdAt": "2020-09-23T18:32:47Z", "commit": {"oid": "8c580bf101327cbe86690b2f3576da9cd522510e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcded46ea8e9386082271a96bb1d2b4052a2e233", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/dcded46ea8e9386082271a96bb1d2b4052a2e233", "committedDate": "2020-09-23T19:03:49Z", "message": "Rename method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3453, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}