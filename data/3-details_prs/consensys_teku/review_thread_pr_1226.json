{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5ODY5NzAx", "number": 1226, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMDo1NToyMlrODi6Hmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMzoxNTo0NVrODi7jMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3OTMwMzk0OnYy", "diffSide": "RIGHT", "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/beaconhandlers/BeaconChainHeadHandler.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMDo1NToyMlrOFuazkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNDozMDoyNVrOFud8qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODAwMQ==", "bodyText": "can we use NO_CONTENT_PRE_GENESIS", "url": "https://github.com/ConsenSys/teku/pull/1226#discussion_r384218001", "createdAt": "2020-02-26T00:55:22Z", "author": {"login": "macfarla"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/beaconhandlers/BeaconChainHeadHandler.java", "diffHunk": "@@ -49,15 +53,16 @@ public BeaconChainHeadHandler(ChainStorageClient client, JsonProvider jsonProvid\n       path = ROUTE,\n       method = HttpMethod.GET,\n       summary = \"Get the canonical head from the beacon node.\",\n-      tags = {\"Beacon\"},\n+      tags = {TAG_BEACON},\n       description = \"Requests the canonical head from the beacon node.\",\n       responses = {\n         @OpenApiResponse(\n-            status = \"200\",\n+            status = RES_OK,\n             content = @OpenApiContent(from = BeaconChainHeadResponse.class)),\n         @OpenApiResponse(\n-            status = \"204\",\n-            description = \"No Content will be returned if pre Genesis state\")\n+            status = RES_NO_CONTENT,\n+            description = \"No Content will be returned if pre Genesis state\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45500700e245e2b4bdb2c0e689d898932a18ae60"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI1NDY1Nw==", "bodyText": "+1, seems like a spot to use that?", "url": "https://github.com/ConsenSys/teku/pull/1226#discussion_r384254657", "createdAt": "2020-02-26T03:16:25Z", "author": {"login": "mark-terry"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/beaconhandlers/BeaconChainHeadHandler.java", "diffHunk": "@@ -49,15 +53,16 @@ public BeaconChainHeadHandler(ChainStorageClient client, JsonProvider jsonProvid\n       path = ROUTE,\n       method = HttpMethod.GET,\n       summary = \"Get the canonical head from the beacon node.\",\n-      tags = {\"Beacon\"},\n+      tags = {TAG_BEACON},\n       description = \"Requests the canonical head from the beacon node.\",\n       responses = {\n         @OpenApiResponse(\n-            status = \"200\",\n+            status = RES_OK,\n             content = @OpenApiContent(from = BeaconChainHeadResponse.class)),\n         @OpenApiResponse(\n-            status = \"204\",\n-            description = \"No Content will be returned if pre Genesis state\")\n+            status = RES_NO_CONTENT,\n+            description = \"No Content will be returned if pre Genesis state\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODAwMQ=="}, "originalCommit": {"oid": "45500700e245e2b4bdb2c0e689d898932a18ae60"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI2OTQ4MA==", "bodyText": "yep that was the intent :/ ta", "url": "https://github.com/ConsenSys/teku/pull/1226#discussion_r384269480", "createdAt": "2020-02-26T04:30:25Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/beaconhandlers/BeaconChainHeadHandler.java", "diffHunk": "@@ -49,15 +53,16 @@ public BeaconChainHeadHandler(ChainStorageClient client, JsonProvider jsonProvid\n       path = ROUTE,\n       method = HttpMethod.GET,\n       summary = \"Get the canonical head from the beacon node.\",\n-      tags = {\"Beacon\"},\n+      tags = {TAG_BEACON},\n       description = \"Requests the canonical head from the beacon node.\",\n       responses = {\n         @OpenApiResponse(\n-            status = \"200\",\n+            status = RES_OK,\n             content = @OpenApiContent(from = BeaconChainHeadResponse.class)),\n         @OpenApiResponse(\n-            status = \"204\",\n-            description = \"No Content will be returned if pre Genesis state\")\n+            status = RES_NO_CONTENT,\n+            description = \"No Content will be returned if pre Genesis state\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODAwMQ=="}, "originalCommit": {"oid": "45500700e245e2b4bdb2c0e689d898932a18ae60"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3OTUzODQxOnYy", "diffSide": "RIGHT", "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/RestApiUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMzoxNTo0NVrOFudCKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNDozODowOVrOFueCwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI1NDUwNw==", "bodyText": "It's doing paramaterMap.get(key) at least twice, perhaps local var?", "url": "https://github.com/ConsenSys/teku/pull/1226#discussion_r384254507", "createdAt": "2020-02-26T03:15:45Z", "author": {"login": "mark-terry"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/RestApiUtils.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi;\n+\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.commons.lang3.StringUtils;\n+\n+public class RestApiUtils {\n+\n+  /**\n+   * Checks that a parameter exists, has a single entry, and is not an empty string\n+   *\n+   * @param parameterMap\n+   * @param key\n+   * @return returns the Value from the key, or throws IllegalArgumentException\n+   */\n+  public static String validateQueryParameter(\n+      final Map<String, List<String>> parameterMap, final String key)\n+      throws IllegalArgumentException {\n+    if (parameterMap.containsKey(key)\n+        && parameterMap.get(key).size() == 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45500700e245e2b4bdb2c0e689d898932a18ae60"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MTA0MQ==", "bodyText": "it'll be a lot more code, but sure, we could do that.", "url": "https://github.com/ConsenSys/teku/pull/1226#discussion_r384271041", "createdAt": "2020-02-26T04:38:09Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/RestApiUtils.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi;\n+\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.commons.lang3.StringUtils;\n+\n+public class RestApiUtils {\n+\n+  /**\n+   * Checks that a parameter exists, has a single entry, and is not an empty string\n+   *\n+   * @param parameterMap\n+   * @param key\n+   * @return returns the Value from the key, or throws IllegalArgumentException\n+   */\n+  public static String validateQueryParameter(\n+      final Map<String, List<String>> parameterMap, final String key)\n+      throws IllegalArgumentException {\n+    if (parameterMap.containsKey(key)\n+        && parameterMap.get(key).size() == 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI1NDUwNw=="}, "originalCommit": {"oid": "45500700e245e2b4bdb2c0e689d898932a18ae60"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2673, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}