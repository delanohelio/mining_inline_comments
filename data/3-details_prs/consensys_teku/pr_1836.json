{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNTMzOTM0", "number": 1836, "title": "Validate future checks latest & pass attestations to pool", "bodyText": "PR Description\nRefactors attestation processing so that the checks for if the attestation should be saved for future are run last. This way attestations saved for the future are guaranteed to pass all other validations.\nSaves the indexed version of the attestation in the DelayableAttestation object so that the indexing doesn't have to happen twice.\nExposes a fork choice method only to apply the IndexedAttestation of the DelayableAttestation 's that were SAVED_FOR_FUTURE and skip on all processing steps.\nAdds successfully processed, and SAVED_FOR_FUTURE attestations to AggregatingAttestationsPool.", "createdAt": "2020-05-21T19:20:58Z", "url": "https://github.com/ConsenSys/teku/pull/1836", "merged": true, "mergeCommit": {"oid": "1a2b2ca88cfcbdb9b21209d68721ab002633d22e"}, "closed": true, "closedAt": "2020-05-27T00:27:41Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjinDyAH2gAyNDIxNTMzOTM0OmMwZTZlNjU0MmYwZDQzN2ZkZjUwNmY5MzhkODk4MTU1NDAxNjM5MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclN0yLAH2gAyNDIxNTMzOTM0OmY3MTg1NTdlNGQxYTQxODRlZGVkYWYxZTlkMjk1MTY5ZWJlYWI2OTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0e6e6542f0d437fdf506f938d89815540163915", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/c0e6e6542f0d437fdf506f938d89815540163915", "committedDate": "2020-05-21T19:12:52Z", "message": "Validate future checks latest & pass attestations to Pool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "738dba85c6abfe609c59d93ab012b575468bae2f", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/738dba85c6abfe609c59d93ab012b575468bae2f", "committedDate": "2020-05-21T19:43:24Z", "message": "Simplify indented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/628c22b4a8d745eecdeb75ca6895935c5f82f5f5", "committedDate": "2020-05-21T19:47:02Z", "message": "Pass pool to attestation manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e199ed07dff7bca30ed21fe290f6d3d1eabe3670", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/e199ed07dff7bca30ed21fe290f6d3d1eabe3670", "committedDate": "2020-05-21T21:30:22Z", "message": "Close of future Attestation DOS vector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTY4MDY1", "url": "https://github.com/ConsenSys/teku/pull/1836#pullrequestreview-416568065", "createdAt": "2020-05-22T00:00:27Z", "commit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDowMDoyN1rOGZGn5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDozNjowMlrOGZHLuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3NjEwMQ==", "bodyText": "This should be volatile as it could potentially be accessed from multiple threads.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428976101", "createdAt": "2020-05-22T00:00:27Z", "author": {"login": "ajsutton"}, "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/forkchoice/DelayableAttestation.java", "diffHunk": "@@ -11,29 +11,43 @@\n  * specific language governing permissions and limitations under the License.\n  */\n \n-package tech.pegasys.teku.sync;\n+package tech.pegasys.teku.datastructures.forkchoice;\n \n import com.google.common.primitives.UnsignedLong;\n import java.util.Collection;\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+\n import org.apache.tuweni.bytes.Bytes32;\n import tech.pegasys.teku.datastructures.operations.Attestation;\n+import tech.pegasys.teku.datastructures.operations.IndexedAttestation;\n \n public class DelayableAttestation {\n   private final Attestation attestation;\n-  private final Runnable onSuccessfulProcessing;\n+  private final Consumer<Attestation> onSuccessfulProcessing;\n+\n+  private Optional<IndexedAttestation> maybeIndexedAttestation = Optional.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3Nzc3NA==", "bodyText": "I'd say this should just take an IndexedAttestation and push responsibility for ensuring IndexedAttestation all the way up to AttestationManager.  It shouldn't ever add an attestation to FutureAttestation that hasn't passed validation.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428977774", "createdAt": "2020-05-22T00:06:56Z", "author": {"login": "ajsutton"}, "path": "ethereum/statetransition/src/main/java/tech/pegasys/teku/statetransition/forkchoice/ForkChoice.java", "diffHunk": "@@ -71,11 +72,19 @@ public synchronized BlockImportResult onBlock(final SignedBeaconBlock block) {\n   }\n \n   public AttestationProcessingResult onAttestation(\n-      final MutableStore store, final Attestation attestation) {\n+      final MutableStore store, final DelayableAttestation attestation) {\n     return on_attestation(store, attestation, stateTransition, protoArrayForkChoiceStrategy);\n   }\n \n-  @Override\n+  public void applyIndexedAttestation(\n+          final MutableStore store, final DelayableAttestation attestation) {\n+    protoArrayForkChoiceStrategy.onAttestation(store, attestation.getIndexedAttestation()\n+            .orElseThrow(() -> new IllegalStateException(\"Future attestation should have had a proper indexed attestation.\"))\n+    );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3ODYyOQ==", "bodyText": "Just take an IndexedAttestation here.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428978629", "createdAt": "2020-05-22T00:10:11Z", "author": {"login": "ajsutton"}, "path": "ethereum/statetransition/src/main/java/tech/pegasys/teku/statetransition/attestation/ForkChoiceAttestationProcessor.java", "diffHunk": "@@ -30,12 +31,18 @@ public ForkChoiceAttestationProcessor(\n     this.forkChoice = forkChoice;\n   }\n \n-  public AttestationProcessingResult processAttestation(final Attestation attestation) {\n+  public AttestationProcessingResult processAttestation(final DelayableAttestation attestation) {\n     final Store.Transaction transaction = recentChainData.startStoreTransaction();\n     final AttestationProcessingResult result = forkChoice.onAttestation(transaction, attestation);\n     if (result.isSuccessful()) {\n       transaction.commit(() -> {}, \"Failed to persist attestation result\");\n     }\n     return result;\n   }\n+\n+  public void applyAttestationToForkChoice(final DelayableAttestation attestation) {\n+    final Store.Transaction transaction = recentChainData.startStoreTransaction();\n+    forkChoice.applyIndexedAttestation(transaction, attestation);\n+    transaction.commit(() -> {}, \"Failed to persist attestation result\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3OTMwOA==", "bodyText": "This is where I'd check the IndexedAttestation exists and log an error if it doesn't indicating that somehow an unvalidated attestation got into the future pool (then don't process it obviously).\nAt the moment you could actually make futureAttestations just hold IndexedAttestation but that's only because we aren't currently calling delayableAttestation.onAttestationProcessedSuccessfully for attestations we process from futureAttestations.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428979308", "createdAt": "2020-05-22T00:12:28Z", "author": {"login": "ajsutton"}, "path": "sync/src/main/java/tech/pegasys/teku/sync/AttestationManager.java", "diffHunk": "@@ -41,47 +41,48 @@\n \n   private final PendingPool<DelayableAttestation> pendingAttestations;\n   private final FutureItems<DelayableAttestation> futureAttestations;\n+  private final AggregatingAttestationPool aggregatingAttestationPool;\n \n   AttestationManager(\n-      final EventBus eventBus,\n-      final ForkChoiceAttestationProcessor attestationProcessor,\n-      final PendingPool<DelayableAttestation> pendingAttestations,\n-      final FutureItems<DelayableAttestation> futureAttestations) {\n+          final EventBus eventBus,\n+          final ForkChoiceAttestationProcessor attestationProcessor,\n+          final PendingPool<DelayableAttestation> pendingAttestations,\n+          final FutureItems<DelayableAttestation> futureAttestations,\n+          final AggregatingAttestationPool aggregatingAttestationPool) {\n     this.eventBus = eventBus;\n     this.attestationProcessor = attestationProcessor;\n     this.pendingAttestations = pendingAttestations;\n     this.futureAttestations = futureAttestations;\n+    this.aggregatingAttestationPool = aggregatingAttestationPool;\n   }\n \n   public static AttestationManager create(\n       final EventBus eventBus,\n       final PendingPool<DelayableAttestation> pendingAttestations,\n       final FutureItems<DelayableAttestation> futureAttestations,\n-      final ForkChoiceAttestationProcessor forkChoiceAttestationProcessor) {\n+      final ForkChoiceAttestationProcessor forkChoiceAttestationProcessor,\n+      final AggregatingAttestationPool aggregatingAttestationPool) {\n     return new AttestationManager(\n-        eventBus, forkChoiceAttestationProcessor, pendingAttestations, futureAttestations);\n+        eventBus, forkChoiceAttestationProcessor, pendingAttestations, futureAttestations, aggregatingAttestationPool);\n   }\n \n   @Subscribe\n   @SuppressWarnings(\"unused\")\n   private void onGossipedAttestation(final Attestation attestation) {\n-    processAttestation(\n-        new DelayableAttestation(\n-            attestation, () -> eventBus.post(new ProcessedAttestationEvent(attestation))));\n+    processAttestation(new DelayableAttestation(attestation, aggregatingAttestationPool::add));\n   }\n \n   @Subscribe\n   @SuppressWarnings(\"unused\")\n   private void onAggregateAndProof(final SignedAggregateAndProof aggregateAndProof) {\n-    final Attestation aggregate = aggregateAndProof.getMessage().getAggregate();\n-    processAttestation(\n-        new DelayableAttestation(\n-            aggregate, () -> eventBus.post(new ProcessedAggregateEvent(aggregate))));\n+    final Attestation aggregateAttestation = aggregateAndProof.getMessage().getAggregate();\n+    processAttestation(new DelayableAttestation(aggregateAttestation, aggregatingAttestationPool::add));\n+\n   }\n \n   @Override\n   public void onSlot(final UnsignedLong slot) {\n-    futureAttestations.prune(slot).forEach(this::processAttestation);\n+    futureAttestations.prune(slot).forEach(attestationProcessor::applyAttestationToForkChoice);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628c22b4a8d745eecdeb75ca6895935c5f82f5f5"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MTk2MA==", "bodyText": "10 is probably too generous actually.  Really the only reason for this to happen is clock drift or if Teku is lagging behind slightly so 99% of the time it will only be one slot ahead so I'd probably limit it to something like 3 - that gives a 36 second buffer which should be plenty.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428981960", "createdAt": "2020-05-22T00:22:53Z", "author": {"login": "ajsutton"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/gossip/topics/validation/AttestationValidator.java", "diffHunk": "@@ -41,6 +41,7 @@\n \n public class AttestationValidator {\n \n+  private static final UnsignedLong MAX_FUTURE_SLOT_ALLOWANCE = UnsignedLong.valueOf(10);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e199ed07dff7bca30ed21fe290f6d3d1eabe3670"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MjQyOA==", "bodyText": "Is it just me or should isAfterPropagationSlotRange really be isBeforePropagationSlotRange?  ie it's valid if it's after the propagation slot range and invalid if it's from too far back.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428982428", "createdAt": "2020-05-22T00:24:38Z", "author": {"login": "ajsutton"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/gossip/topics/validation/AttestationValidator.java", "diffHunk": "@@ -105,7 +106,8 @@ ValidationResult singleOrAggregateAttestationChecks(final Attestation attestatio\n     // queue\n     // future attestations for processing at the appropriate slot).\n     final UnsignedLong currentTimeMillis = secondsToMillis(recentChainData.getStore().getTime());\n-    if (isAfterPropagationSlotRange(currentTimeMillis, attestation)) {\n+    if (isAfterPropagationSlotRange(currentTimeMillis, attestation)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e199ed07dff7bca30ed21fe290f6d3d1eabe3670"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4NTI3NQ==", "bodyText": "nit: Suggest extracting the currentTimeMillis.plus bit to a variable - something like discardAttestationsAfterMillis.  Just makes the comparison clearer.", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r428985275", "createdAt": "2020-05-22T00:36:02Z", "author": {"login": "ajsutton"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/gossip/topics/validation/AttestationValidator.java", "diffHunk": "@@ -152,6 +154,18 @@ private boolean isBeforeMinimumBroadcastTime(\n     return currentTimeMillis.compareTo(minimumBroadcastTimeMillis) < 0;\n   }\n \n+  private boolean isFromFarFuture(\n+          final Attestation attestation, final UnsignedLong currentTimeMillis) {\n+    final UnsignedLong attestationSlotTimeMillis =\n+            secondsToMillis(recentChainData\n+                    .getGenesisTime()\n+                    .plus(attestation.getEarliestSlotForForkChoiceProcessing()\n+                            .times(UnsignedLong.valueOf(SECONDS_PER_SLOT))\n+                    ));\n+    return attestationSlotTimeMillis.compareTo(currentTimeMillis\n+            .plus(secondsToMillis(MAX_FUTURE_SLOT_ALLOWANCE.times(UnsignedLong.valueOf(SECONDS_PER_SLOT))))) > 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e199ed07dff7bca30ed21fe290f6d3d1eabe3670"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "630f441ce25eb5de7ba1d7ea248b7c53f602562e", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/630f441ce25eb5de7ba1d7ea248b7c53f602562e", "committedDate": "2020-05-22T17:45:11Z", "message": "Make indexedAttestation variable volatile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c1e7b59f3b8c8cb25c6c1899313ba00a9c95ccf", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/7c1e7b59f3b8c8cb25c6c1899313ba00a9c95ccf", "committedDate": "2020-05-22T18:16:00Z", "message": "Pass indexed attestation around & change method names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6207ae8a3b9e0d64bd853b50ffc825275f3559ac", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/6207ae8a3b9e0d64bd853b50ffc825275f3559ac", "committedDate": "2020-05-22T20:56:38Z", "message": "Refactor tests to match refactored AttestationManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b18991dc1239fb9143972232e418f9753d9a4b1", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/6b18991dc1239fb9143972232e418f9753d9a4b1", "committedDate": "2020-05-22T21:02:07Z", "message": "Run spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21be5ad414e7f9df65209ccc2cf01831aa51cd78", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/21be5ad414e7f9df65209ccc2cf01831aa51cd78", "committedDate": "2020-05-22T21:14:21Z", "message": "Fix unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f745abfeb309b414a3ffa9b291c610ece57aade9", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/f745abfeb309b414a3ffa9b291c610ece57aade9", "committedDate": "2020-05-22T21:31:54Z", "message": "Merge branch 'master' into validateAtestationFutureChecksLatest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzk0NjUy", "url": "https://github.com/ConsenSys/teku/pull/1836#pullrequestreview-417394652", "createdAt": "2020-05-24T21:48:14Z", "commit": {"oid": "f745abfeb309b414a3ffa9b291c610ece57aade9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMTo0ODoxNFrOGZxfWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMTo0ODoxNFrOGZxfWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY3ODQyNA==", "bodyText": "ewww, spies...  All the checks on on these can be done quite effectively just using it's size method to see if anything has been added or not.\nI'd also suggest adding a method:\nprivate void verifyAttestationProcessed(final Attestation attestation) {\n    ArgumentCaptor<DelayableAttestation> captor =\n        ArgumentCaptor.forClass(DelayableAttestation.class);\n    verify(attestationProcessor).processAttestation(captor.capture());\n    assertThat(captor.getValue().getAttestation()).isSameAs(attestation);\n  }\n\nwhich will let you be more specific instead of using verify(attestationProcessor).processAttestation(attestation).", "url": "https://github.com/ConsenSys/teku/pull/1836#discussion_r429678424", "createdAt": "2020-05-24T21:48:14Z", "author": {"login": "ajsutton"}, "path": "sync/src/test/java/tech/pegasys/teku/sync/AttestationManagerTest.java", "diffHunk": "@@ -25,45 +30,41 @@\n \n import com.google.common.eventbus.EventBus;\n import com.google.common.primitives.UnsignedLong;\n-import java.util.List;\n import org.apache.tuweni.bytes.Bytes32;\n import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.BeforeEach;\n import org.junit.jupiter.api.Test;\n+import org.mockito.ArgumentCaptor;\n import tech.pegasys.teku.bls.BLSSignature;\n import tech.pegasys.teku.core.results.AttestationProcessingResult;\n import tech.pegasys.teku.datastructures.blocks.SignedBeaconBlock;\n-import tech.pegasys.teku.datastructures.operations.AggregateAndProof;\n+import tech.pegasys.teku.datastructures.forkchoice.DelayableAttestation;\n import tech.pegasys.teku.datastructures.operations.Attestation;\n import tech.pegasys.teku.datastructures.operations.AttestationData;\n+import tech.pegasys.teku.datastructures.operations.IndexedAttestation;\n import tech.pegasys.teku.datastructures.operations.SignedAggregateAndProof;\n import tech.pegasys.teku.datastructures.state.Checkpoint;\n import tech.pegasys.teku.datastructures.util.DataStructureUtil;\n import tech.pegasys.teku.ssz.SSZTypes.Bitlist;\n+import tech.pegasys.teku.statetransition.attestation.AggregatingAttestationPool;\n import tech.pegasys.teku.statetransition.attestation.ForkChoiceAttestationProcessor;\n-import tech.pegasys.teku.statetransition.events.attestation.ProcessedAggregateEvent;\n-import tech.pegasys.teku.statetransition.events.attestation.ProcessedAttestationEvent;\n import tech.pegasys.teku.statetransition.events.block.ImportedBlockEvent;\n-import tech.pegasys.teku.util.EventSink;\n \n class AttestationManagerTest {\n   private final DataStructureUtil dataStructureUtil = new DataStructureUtil();\n   private final EventBus eventBus = new EventBus();\n-  private final PendingPool<DelayableAttestation> pendingAttestations =\n-      PendingPool.createForAttestations();\n-  private final FutureItems<DelayableAttestation> futureAttestations =\n-      new FutureItems<>(DelayableAttestation::getEarliestSlotForForkChoiceProcessing);\n \n-  private final ForkChoiceAttestationProcessor attestationProcessor =\n+  private AggregatingAttestationPool attestationPool = mock(AggregatingAttestationPool.class);\n+  private ForkChoiceAttestationProcessor attestationProcessor =\n       mock(ForkChoiceAttestationProcessor.class);\n-  private final List<ProcessedAttestationEvent> processedAttestationEvents =\n-      EventSink.capture(eventBus, ProcessedAttestationEvent.class);\n-  private final List<ProcessedAggregateEvent> processedAggregateEvents =\n-      EventSink.capture(eventBus, ProcessedAggregateEvent.class);\n+  private final PendingPool<DelayableAttestation> pendingAttestations =\n+      spy(PendingPool.createForAttestations());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f745abfeb309b414a3ffa9b291c610ece57aade9"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07c21f4c5f4e011912025851d71d8ed113efe90f", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/07c21f4c5f4e011912025851d71d8ed113efe90f", "committedDate": "2020-05-26T17:06:29Z", "message": "Remove usage of spies in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff1c1657e59b867e106a5a82d4eddf411f087f48", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/ff1c1657e59b867e106a5a82d4eddf411f087f48", "committedDate": "2020-05-26T17:07:02Z", "message": "Merge branch 'master' into validateAtestationFutureChecksLatest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ae990290a7c5aa1ed4acad3c207206a957e4806", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/8ae990290a7c5aa1ed4acad3c207206a957e4806", "committedDate": "2020-05-26T17:18:37Z", "message": "Run spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzE2Njk2", "url": "https://github.com/ConsenSys/teku/pull/1836#pullrequestreview-418716696", "createdAt": "2020-05-26T22:15:56Z", "commit": {"oid": "8ae990290a7c5aa1ed4acad3c207206a957e4806"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f718557e4d1a4184ededaf1e9d295169ebeab692", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/f718557e4d1a4184ededaf1e9d295169ebeab692", "committedDate": "2020-05-27T00:07:42Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into validateAtestationFutureChecksLatest"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4014, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}