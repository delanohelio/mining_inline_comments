{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzODY4MDIz", "number": 1981, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1NzoyM1rOEARbvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1ODo0MlrOEARddg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzIxMDg1OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1NzoyM1rOGbc2xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1NzoyM1rOGbc2xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNzUxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n          \n          \n            \n                      \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' must be specified together\";", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431437510", "createdAt": "2020-05-27T20:57:23Z", "author": {"login": "macfarla"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzIxNTI2OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1ODo0MlrOGbc5hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMDowNjoyNlrOGbhVFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODIxMw==", "bodyText": "number of arguments doesn't seem quite right. The argument is a list, containing a number of items? Size or length might be more accurate", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431438213", "createdAt": "2020-05-27T20:58:42Z", "author": {"login": "macfarla"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n+      throw new InvalidConfigurationException(errorMessage);\n+    }\n+\n     if (validatorKeystoreFiles.size() != validatorKeystorePasswordFiles.size()) {\n+      StatusLogger.getLogger()\n+          .debug(\n+              \"Invalid configuration. The size of validator.validatorsKeystoreFiles {} and validator.validatorsKeystorePasswordFiles {} must match\",\n+              validatorKeystoreFiles.size(),\n+              validatorKeystorePasswordFiles.size());\n+\n       final String errorMessage =\n           String.format(\n-              \"Invalid configuration. The size of validator.validatorsKeystoreFiles [%d] and validator.validatorsKeystorePasswordFiles [%d] must match\",\n+              \"Invalid configuration. The number of arguments for --validators-key-files [%d] and --validators-key-password-files [%d] must match\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ3NDgzNg==", "bodyText": "We're trying to make it more human-readable, imo referring to the number of items in a list as size or length is confusing.\nPerhaps something more like:\n\"The number of files specified for --validators-key-files [%d] and --validators-key-password-files [%d] must match\" ?", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431474836", "createdAt": "2020-05-27T22:18:34Z", "author": {"login": "mark-terry"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n+      throw new InvalidConfigurationException(errorMessage);\n+    }\n+\n     if (validatorKeystoreFiles.size() != validatorKeystorePasswordFiles.size()) {\n+      StatusLogger.getLogger()\n+          .debug(\n+              \"Invalid configuration. The size of validator.validatorsKeystoreFiles {} and validator.validatorsKeystorePasswordFiles {} must match\",\n+              validatorKeystoreFiles.size(),\n+              validatorKeystorePasswordFiles.size());\n+\n       final String errorMessage =\n           String.format(\n-              \"Invalid configuration. The size of validator.validatorsKeystoreFiles [%d] and validator.validatorsKeystorePasswordFiles [%d] must match\",\n+              \"Invalid configuration. The number of arguments for --validators-key-files [%d] and --validators-key-password-files [%d] must match\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODIxMw=="}, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NTg0Ng==", "bodyText": "each key file specified by --validators-keys-files must also have a password file specified by --validators-key-password-files?", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431485846", "createdAt": "2020-05-27T22:48:40Z", "author": {"login": "rolfyone"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n+      throw new InvalidConfigurationException(errorMessage);\n+    }\n+\n     if (validatorKeystoreFiles.size() != validatorKeystorePasswordFiles.size()) {\n+      StatusLogger.getLogger()\n+          .debug(\n+              \"Invalid configuration. The size of validator.validatorsKeystoreFiles {} and validator.validatorsKeystorePasswordFiles {} must match\",\n+              validatorKeystoreFiles.size(),\n+              validatorKeystorePasswordFiles.size());\n+\n       final String errorMessage =\n           String.format(\n-              \"Invalid configuration. The size of validator.validatorsKeystoreFiles [%d] and validator.validatorsKeystorePasswordFiles [%d] must match\",\n+              \"Invalid configuration. The number of arguments for --validators-key-files [%d] and --validators-key-password-files [%d] must match\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODIxMw=="}, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NjEzNg==", "bodyText": "you must specify the same number of key and password files?", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431486136", "createdAt": "2020-05-27T22:49:35Z", "author": {"login": "macfarla"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n+      throw new InvalidConfigurationException(errorMessage);\n+    }\n+\n     if (validatorKeystoreFiles.size() != validatorKeystorePasswordFiles.size()) {\n+      StatusLogger.getLogger()\n+          .debug(\n+              \"Invalid configuration. The size of validator.validatorsKeystoreFiles {} and validator.validatorsKeystorePasswordFiles {} must match\",\n+              validatorKeystoreFiles.size(),\n+              validatorKeystorePasswordFiles.size());\n+\n       final String errorMessage =\n           String.format(\n-              \"Invalid configuration. The size of validator.validatorsKeystoreFiles [%d] and validator.validatorsKeystorePasswordFiles [%d] must match\",\n+              \"Invalid configuration. The number of arguments for --validators-key-files [%d] and --validators-key-password-files [%d] must match\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODIxMw=="}, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUxMDgwNg==", "bodyText": "The number of --validators-key-files (num) must equal the number of --validators-key-password-files (num)", "url": "https://github.com/ConsenSys/teku/pull/1981#discussion_r431510806", "createdAt": "2020-05-28T00:06:26Z", "author": {"login": "mark-terry"}, "path": "util/src/main/java/tech/pegasys/teku/util/config/TekuConfiguration.java", "diffHunk": "@@ -456,17 +457,30 @@ public void validateConfig() throws IllegalArgumentException {\n               \"Invalid configuration. Interop number of validators [%d] must be greater than or equal to [%d]\",\n               interopNumberOfValidators, Constants.SLOTS_PER_EPOCH));\n     }\n-    validateKeyStoreFilesAndPasswordFilesSize();\n+    validateKeyStoreFilesAndPasswordFilesConfig();\n   }\n \n-  private void validateKeyStoreFilesAndPasswordFilesSize() {\n+  private void validateKeyStoreFilesAndPasswordFilesConfig() {\n     final List<String> validatorKeystoreFiles = getValidatorKeystoreFiles();\n     final List<String> validatorKeystorePasswordFiles = getValidatorKeystorePasswordFiles();\n \n+    if ((validatorKeystoreFiles != null && validatorKeystorePasswordFiles == null)\n+        || (validatorKeystoreFiles == null && validatorKeystorePasswordFiles != null)) {\n+      final String errorMessage =\n+          \"Invalid configuration. '--validators-key-files' and '--validators-key-password-files' cannot be specified separately\";\n+      throw new InvalidConfigurationException(errorMessage);\n+    }\n+\n     if (validatorKeystoreFiles.size() != validatorKeystorePasswordFiles.size()) {\n+      StatusLogger.getLogger()\n+          .debug(\n+              \"Invalid configuration. The size of validator.validatorsKeystoreFiles {} and validator.validatorsKeystorePasswordFiles {} must match\",\n+              validatorKeystoreFiles.size(),\n+              validatorKeystorePasswordFiles.size());\n+\n       final String errorMessage =\n           String.format(\n-              \"Invalid configuration. The size of validator.validatorsKeystoreFiles [%d] and validator.validatorsKeystorePasswordFiles [%d] must match\",\n+              \"Invalid configuration. The number of arguments for --validators-key-files [%d] and --validators-key-password-files [%d] must match\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODIxMw=="}, "originalCommit": {"oid": "03c109a47cf07452d8852deb7b2d63cff4b4ab1c"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3671, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}