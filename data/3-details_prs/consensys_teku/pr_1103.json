{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NTU2MDcy", "number": 1103, "title": "Add runAfterDelay and runAsync to SafeFuture", "bodyText": "PR Description\nAdds runAfterDelay and runAsync methods to SafeFuture which make it simple to execute an action which returns another future either after a delay or async in a specified executor.", "createdAt": "2020-01-21T22:30:25Z", "url": "https://github.com/ConsenSys/teku/pull/1103", "merged": true, "mergeCommit": {"oid": "8541794803ce871d80d11417255fc3e96b6fc59d"}, "closed": true, "closedAt": "2020-01-21T23:00:49Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8o5HBAH2gAyMzY1NTU2MDcyOjk3OTZmZWUyNTI0MGVjM2JkMzNlMDYzOWZmZTBkNGI3Njk1NmFhMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8pNsZgFqTM0NjI0NzE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9796fee25240ec3bd33e0639ffe0d4b76956aa26", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/9796fee25240ec3bd33e0639ffe0d4b76956aa26", "committedDate": "2020-01-21T22:28:58Z", "message": "Add runAfterDelay and runAsync to SafeFuture."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d5930800d8d4002cacfd022a4ab026a7090c83e", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/8d5930800d8d4002cacfd022a4ab026a7090c83e", "committedDate": "2020-01-21T22:30:35Z", "message": "Merge branch 'master' into runAfterDelay"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjQ2MTA5", "url": "https://github.com/ConsenSys/teku/pull/1103#pullrequestreview-346246109", "createdAt": "2020-01-21T22:49:03Z", "commit": {"oid": "8d5930800d8d4002cacfd022a4ab026a7090c83e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMjo0OTowM1rOFgLa0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMjo0OTowM1rOFgLa0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI4NTg0Mw==", "bodyText": "I don' t understand why you included this line.", "url": "https://github.com/ConsenSys/teku/pull/1103#discussion_r369285843", "createdAt": "2020-01-21T22:49:03Z", "author": {"login": "cemozerr"}, "path": "util/src/test/java/tech/pegasys/artemis/util/async/SafeFutureTest.java", "diffHunk": "@@ -309,6 +318,65 @@ public void exceptionallyCompose_shouldNotDoAnythingWhenCompletedSuccessfully()\n     assertThat(result).isCompletedWithValue(\"Success\");\n   }\n \n+  @SuppressWarnings(\"unchecked\")\n+  @Test\n+  public void runAsync_shouldExecuteActionWithExecutorAndReturnResult() {\n+    final SafeFuture<String> actionResult = new SafeFuture<>();\n+    final Executor executor = mock(Executor.class);\n+    final Supplier<SafeFuture<String>> action = mock(Supplier.class);\n+    when(action.get()).thenReturn(actionResult);\n+\n+    final SafeFuture<String> result = SafeFuture.runAsync(action, executor);\n+\n+    final ArgumentCaptor<Runnable> captor = ArgumentCaptor.forClass(Runnable.class);\n+    verify(executor).execute(captor.capture());\n+    final Runnable executedRunnable = captor.getValue();\n+\n+    executedRunnable.run();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d5930800d8d4002cacfd022a4ab026a7090c83e"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ce6c73650dc6f1f8e6993b156fd469f2cd43005", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/1ce6c73650dc6f1f8e6993b156fd469f2cd43005", "committedDate": "2020-01-21T22:51:13Z", "message": "Merge branch 'master' of github.com:PegaSysEng/artemis into runAfterDelay"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjQ3MTg1", "url": "https://github.com/ConsenSys/teku/pull/1103#pullrequestreview-346247185", "createdAt": "2020-01-21T22:51:27Z", "commit": {"oid": "8d5930800d8d4002cacfd022a4ab026a7090c83e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4220, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}