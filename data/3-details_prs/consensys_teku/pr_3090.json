{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTA1MjI0", "number": 3090, "title": "AbstractByteBufDecoder: don't close twice", "bodyText": "PR Description\nAvoid closing AbstractByteBufDecoder twice\nFixed Issue(s)\nFix #3069\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-10-27T16:56:47Z", "url": "https://github.com/ConsenSys/teku/pull/3090", "merged": true, "mergeCommit": {"oid": "98bd905893d4a07b43ae2e4659005a7b7c89852e"}, "closed": true, "closedAt": "2020-10-28T11:01:50Z", "author": {"login": "Nashatyrev"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWp1WcgH2gAyNTEwOTA1MjI0OjI5MWRiMDBjMWRhMWZkYjBiMmM4NGIwZjdkZDI1NmUzMzA5ZWY0MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW7N-dAH2gAyNTEwOTA1MjI0OjQ3MjRkOWVjODM0NjBkZDc3ZTg4NjkyNWFkNTZlOWFkNDU5ZGY1MGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "291db00c1da1fdb0b2c84b0f7dd256e3309ef40b", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/291db00c1da1fdb0b2c84b0f7dd256e3309ef40b", "committedDate": "2020-10-27T14:27:57Z", "message": "AbstractByteBufDecoder: don't close twice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDUyNTQ1", "url": "https://github.com/ConsenSys/teku/pull/3090#pullrequestreview-518052545", "createdAt": "2020-10-27T19:11:58Z", "commit": {"oid": "291db00c1da1fdb0b2c84b0f7dd256e3309ef40b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxOToxMTo1OFrOHpMgKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxOToxMTo1OFrOHpMgKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk1ODUwNQ==", "bodyText": "(nit / optional) We could move this to a helper method assertOpen()", "url": "https://github.com/ConsenSys/teku/pull/3090#discussion_r512958505", "createdAt": "2020-10-27T19:11:58Z", "author": {"login": "mbaxter"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/encodings/AbstractByteBufDecoder.java", "diffHunk": "@@ -30,12 +30,16 @@\n     implements ByteBufDecoder<TMessage, TException> {\n \n   private CompositeByteBuf compositeByteBuf = Unpooled.compositeBuffer();\n+  private boolean closed = false;\n \n   @Override\n   public Optional<TMessage> decodeOneMessage(ByteBuf in) throws TException {\n     if (!in.isReadable()) {\n       return Optional.empty();\n     }\n+    if (closed) {\n+      throw new IllegalStateException(\"Trying to reuse disposed decoder instance\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291db00c1da1fdb0b2c84b0f7dd256e3309ef40b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "054872ce63c88cdce936de977bfbd8345fe04795", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/054872ce63c88cdce936de977bfbd8345fe04795", "committedDate": "2020-10-28T09:35:55Z", "message": "Deduplicate code: add assertNotClosed() method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4724d9ec83460dd77e886925ad56e9ad459df50b", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/4724d9ec83460dd77e886925ad56e9ad459df50b", "committedDate": "2020-10-28T10:43:14Z", "message": "Merge branch 'master' into fix/decode-close-exception"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3267, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}