{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NTg5NTQ4", "number": 2348, "title": "Ensure validator indices in attester slashings are valid", "bodyText": "PR Description\nAttestaterSlashing objects include an IndexedAttestation opening up the possibility that the validator indices it specifies are out of bounds for the validator list. Normally this isn't an issue because we index the attestation ourselves so know the indices are valid.\nSignedAggregateAndProof also includes a validator index which must be verified to be in range before looking up the validator public key.\nTo ensure this category of errors is avoided, ValidatorsUtil.getValidatorPubKey now performs bounds checking and returns an empty Optional if the index is out of range.  Callers are updated to handle this and fail validation of the public key is not available.\nFixed Issue(s)\nfix #2345\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-07-14T01:30:08Z", "url": "https://github.com/ConsenSys/teku/pull/2348", "merged": true, "mergeCommit": {"oid": "016000db892ed109eab53a808334600c0acf4e2c"}, "closed": true, "closedAt": "2020-07-14T09:03:00Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0rtM3AH2gAyNDQ4NTg5NTQ4OjgyMzBmYjg3ZDE1MDBkZmM1ZGY3NzU4ZTdlNTM1MzdmMzRlODhlMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0xmWjgFqTQ0Nzg4NTUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8230fb87d1500dfc5df7758e7e53537f34e88e13", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/8230fb87d1500dfc5df7758e7e53537f34e88e13", "committedDate": "2020-07-14T01:25:26Z", "message": "Ensure validator indices in attester slashings are valid.\nAvoid IndexOutOfBoundsException when looking up validator public keys."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb51146ef77fa180f575b820219c23967d9a7d3e", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/bb51146ef77fa180f575b820219c23967d9a7d3e", "committedDate": "2020-07-14T01:36:22Z", "message": "Use Resources intead of IOUtils."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODg1NTI3", "url": "https://github.com/ConsenSys/teku/pull/2348#pullrequestreview-447885527", "createdAt": "2020-07-14T08:12:32Z", "commit": {"oid": "bb51146ef77fa180f575b820219c23967d9a7d3e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODoxMjozM1rOGxJEtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODoxMjozM1rOGxJEtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE4MjA3MQ==", "bodyText": "Oh, is it allowed by our codestyle? I mean methods static import.\n(would be just happy is yes \ud83d\udc4d)", "url": "https://github.com/ConsenSys/teku/pull/2348#discussion_r454182071", "createdAt": "2020-07-14T08:12:33Z", "author": {"login": "Nashatyrev"}, "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/AttestationUtil.java", "diffHunk": "@@ -150,13 +147,17 @@ public static AttestationProcessingResult is_valid_indexed_attestation(\n     SSZList<UnsignedLong> indices = indexed_attestation.getAttesting_indices();\n \n     List<UnsignedLong> bit_0_indices_sorted =\n-        indices.stream().sorted().distinct().collect(Collectors.toList());\n+        indices.stream().sorted().distinct().collect(toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb51146ef77fa180f575b820219c23967d9a7d3e"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3833, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}