{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MDI5ODAx", "number": 1379, "title": "Programmatic logging", "bodyText": "PR Description\nUpdating the logging configuration to support Log4j2 hot replace of xml configuration file, in addition to options in the Teku confg.\nThe concept applied was to split the logging through Teku into three types:\n\nClass logging (the default approach LogManager.getLogger())\nEventLogger contextual log messages (events occurring with a cadence e.g. SlotEvents)\nStatusLogger context log messages (events occurring without a cadence e.g. unexpected failures)\n\nThe loggers were changed from being defined in default log4j2.xml to being programmatically defined. This allows greater flexibility in setup.\nNow there are three logging DESTINATIONs available:\n\nCONSOLE all log messages go to the stdout (no log file is created or written to).\nFILE all log messages go to the log file (no output to stdout)\nBOTH messages from EventLogger and StatusLogger are displayed in both the console and file, but class log message only appear in the file.\n(NB there is a semaphore to disable output from the StatusLogger)\n\nSemaphore added for whether color is to be used in output, if color is enabled and the message is output to the log, then the color character is included.", "createdAt": "2020-03-16T06:59:16Z", "url": "https://github.com/ConsenSys/teku/pull/1379", "merged": true, "mergeCommit": {"oid": "726db42e42ecc97ba96042f4c21df10ada708090"}, "closed": true, "closedAt": "2020-03-19T00:42:22Z", "author": {"login": "CjHare"}, "timelineItems": {"totalCount": 45, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMgJZcAH2gAyMzg5MDI5ODAxOjI0NmFjOTIyMzkyY2ZjNzIwNzhiNmM1MDc4MmM3MjVlZjMyOWIzZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPAREBgH2gAyMzg5MDI5ODAxOjU3NTliYzM2ODZhNDhkMDVjM2JmNzk0YjE3NDFkZWVjNWMxMGZkMWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "246ac922392cfc72078b6c50782c725ef329b3f2", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/246ac922392cfc72078b6c50782c725ef329b3f2", "committedDate": "2020-03-11T05:20:24Z", "message": "Files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99dbffd55d6f32c23da73efb0dc4c130fab4b529", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/99dbffd55d6f32c23da73efb0dc4c130fab4b529", "committedDate": "2020-03-11T05:23:07Z", "message": "TODOs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e16b1ba3b81086205db604baaf319db1836c786", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/4e16b1ba3b81086205db604baaf319db1836c786", "committedDate": "2020-03-11T06:37:16Z", "message": "Config changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b22154431e50f6d8f4f24d0b3060591074858eb2", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/b22154431e50f6d8f4f24d0b3060591074858eb2", "committedDate": "2020-03-11T06:37:32Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7b840c31e07419199c8285fd61bd450f63c766d", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/b7b840c31e07419199c8285fd61bd450f63c766d", "committedDate": "2020-03-11T07:01:37Z", "message": "Moving setAllLevels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dfe7b74f93d3eaa69119f37573525ff626226b2", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/4dfe7b74f93d3eaa69119f37573525ff626226b2", "committedDate": "2020-03-11T07:09:42Z", "message": "wiring up config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3afcbaab3de5b5d2bf68c003972802a4e27ddf0b", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/3afcbaab3de5b5d2bf68c003972802a4e27ddf0b", "committedDate": "2020-03-11T23:45:12Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23635cf5298eb9004de07d13e7c8c1880a7359be", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/23635cf5298eb9004de07d13e7c8c1880a7359be", "committedDate": "2020-03-12T04:09:41Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3bcb970ad1d138eb70a51c31ca4c28956117e85", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/d3bcb970ad1d138eb70a51c31ca4c28956117e85", "committedDate": "2020-03-12T06:44:44Z", "message": "Color configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "413cf66e6050b880ed5f0f8e6b02d3163a5fb570", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/413cf66e6050b880ed5f0f8e6b02d3163a5fb570", "committedDate": "2020-03-12T07:09:16Z", "message": "Logging to both"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3a6ce5c64de42f10795bbb250a99aea6356e502", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/c3a6ce5c64de42f10795bbb250a99aea6356e502", "committedDate": "2020-03-12T07:15:55Z", "message": "Clean code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d561bab3604f3570247e06d0fe5117de71e1210", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/4d561bab3604f3570247e06d0fe5117de71e1210", "committedDate": "2020-03-12T07:23:17Z", "message": "Excluding events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa2bc95da0c2d90c8a332771b6559896af4b0f99", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/fa2bc95da0c2d90c8a332771b6559896af4b0f99", "committedDate": "2020-03-12T07:31:46Z", "message": "Programmatically create on reload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2ae26e055782a161c18254895f2d55e69a9094", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/2d2ae26e055782a161c18254895f2d55e69a9094", "committedDate": "2020-03-12T08:28:39Z", "message": "Console only, but still a logfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a13c36b6c71a580d1d30d753977b669b52b8de48", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/a13c36b6c71a580d1d30d753977b669b52b8de48", "committedDate": "2020-03-13T06:56:31Z", "message": "Programmatically creating a file logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b70a575674b333460a75eb924248540801c57743", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/b70a575674b333460a75eb924248540801c57743", "committedDate": "2020-03-13T07:11:45Z", "message": "Streamlining"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13981eb400ab681f8c1139fea1001061a7ff2243", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/13981eb400ab681f8c1139fea1001061a7ff2243", "committedDate": "2020-03-13T07:13:58Z", "message": "Streamlining"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b9ff8d5ea4870fa5ef8b00ebd4e1e0d3b3d75e", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/89b9ff8d5ea4870fa5ef8b00ebd4e1e0d3b3d75e", "committedDate": "2020-03-13T08:06:54Z", "message": "Attempting to adapt to Log4j2 hot replace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc402e81284ed4b3caa2aa365d1d205eee916de4", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/cc402e81284ed4b3caa2aa365d1d205eee916de4", "committedDate": "2020-03-13T08:36:31Z", "message": "Log4j2 config hot replace no longer breaks logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c6801981d321f6a40174d4793e0b16bf462b7e", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/10c6801981d321f6a40174d4793e0b16bf462b7e", "committedDate": "2020-03-13T08:37:05Z", "message": "Config back to default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47785a947cb4a0d4e0a60d5840c360f41d109a05", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/47785a947cb4a0d4e0a60d5840c360f41d109a05", "committedDate": "2020-03-13T08:37:25Z", "message": "Config back to default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3b0fb1efa2ac2c357f125cd3f1a3aa7f230c8f0", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/f3b0fb1efa2ac2c357f125cd3f1a3aa7f230c8f0", "committedDate": "2020-03-13T08:38:00Z", "message": "Done Todo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df907d9840bb831eddf078c8176ae32b16ad0550", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/df907d9840bb831eddf078c8176ae32b16ad0550", "committedDate": "2020-03-15T22:48:41Z", "message": "Merging upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c19e19ceb9311404f2491be23285ea2ddbe9714", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/4c19e19ceb9311404f2491be23285ea2ddbe9714", "committedDate": "2020-03-16T04:23:11Z", "message": "Config for file and file pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e50383f98628fd1d8c8c347f7bc4e3c6b8db083c", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/e50383f98628fd1d8c8c347f7bc4e3c6b8db083c", "committedDate": "2020-03-16T05:05:55Z", "message": "Correcting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c244b2f0780dde1ce12b3ffec74ddb2077006b9", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/7c244b2f0780dde1ce12b3ffec74ddb2077006b9", "committedDate": "2020-03-16T05:10:14Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db0ea074ce91a9446e5db1d447f7d8ec92b0d377", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/db0ea074ce91a9446e5db1d447f7d8ec92b0d377", "committedDate": "2020-03-16T05:31:07Z", "message": "Removing ToDos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8470a90849188854c6f744aad686b66042c1971a", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/8470a90849188854c6f744aad686b66042c1971a", "committedDate": "2020-03-16T05:31:30Z", "message": "Removing unused method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f7aaf96de89b7bc932deb2782b53c3793a609dd", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/9f7aaf96de89b7bc932deb2782b53c3793a609dd", "committedDate": "2020-03-16T05:49:08Z", "message": "UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/aab2a73b0093f21f8ecd2da3b4fede6f183d54ff", "committedDate": "2020-03-16T06:33:10Z", "message": "Logging config object"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Njc0MzQ5", "url": "https://github.com/ConsenSys/teku/pull/1379#pullrequestreview-375674349", "createdAt": "2020-03-17T00:57:20Z", "commit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMDo1NzoyMVrOF3KkiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMToxNTowMVrOF3K1Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM4OTE5Mw==", "bodyText": "At minimum COLOR would be accessed from multiple threads so needs to be either volatile or an AtomicBoolean. I suspect they all need to be thread safe since Log4J could be reconfigured from any thread which would lead these to be accessed.\nMight be best to just make the public methods all synchronized.", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393389193", "createdAt": "2020-03-17T00:57:21Z", "author": {"login": "ajsutton"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/LoggingConfigurator.java", "diffHunk": "@@ -0,0 +1,182 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.teku.logging;\n+\n+import org.apache.logging.log4j.Level;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.core.Appender;\n+import org.apache.logging.log4j.core.Layout;\n+import org.apache.logging.log4j.core.LoggerContext;\n+import org.apache.logging.log4j.core.appender.ConsoleAppender;\n+import org.apache.logging.log4j.core.appender.RollingFileAppender;\n+import org.apache.logging.log4j.core.appender.rolling.CompositeTriggeringPolicy;\n+import org.apache.logging.log4j.core.appender.rolling.OnStartupTriggeringPolicy;\n+import org.apache.logging.log4j.core.appender.rolling.TimeBasedTriggeringPolicy;\n+import org.apache.logging.log4j.core.config.AbstractConfiguration;\n+import org.apache.logging.log4j.core.config.Configurator;\n+import org.apache.logging.log4j.core.config.LoggerConfig;\n+import org.apache.logging.log4j.core.layout.PatternLayout;\n+import org.apache.logging.log4j.status.StatusLogger;\n+\n+public class LoggingConfigurator {\n+\n+  static final String EVENT_LOGGER_NAME = \"teku-event-log\";\n+  static final String STATUS_LOGGER_NAME = \"teku-status-log\";\n+\n+  private static final String CONSOLE_APPENDER_NAME = \"teku-console-appender\";\n+  private static final String CONSOLE_FORMAT = \"%d{HH:mm:ss.SSS} [%-5level] - %msg%n\";\n+  private static final String FILE_APPENDER_NAME = \"teku-log-appender\";\n+  private static final String FILE_MESSAGE_FORMAT =\n+      \"%d{yyyy-MM-dd HH:mm:ss.SSSZZZ} | %t | %-5level | %c{1} | %msg%n\";\n+\n+  private static LoggingDestination DESTINATION;\n+  private static boolean COLOR;\n+  private static boolean INCLUDE_EVENTS;\n+  private static String FILE;\n+  private static String FILE_PATTERN;\n+  private static Level LOG_LEVEL = Level.INFO;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM4OTM2Nw==", "bodyText": "Not sure Programmatic logging setup is meaningful to a user.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                StatusLogger.getLogger().info(\"Programmatic logging setup: {}\", DESTINATION);\n          \n          \n            \n                StatusLogger.getLogger().info(\"Configuring logging for destination: {}\", DESTINATION);", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393389367", "createdAt": "2020-03-17T00:58:06Z", "author": {"login": "ajsutton"}, "path": "logging/src/main/java/tech/pegasys/teku/logging/LoggingConfigurator.java", "diffHunk": "@@ -0,0 +1,182 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.teku.logging;\n+\n+import org.apache.logging.log4j.Level;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.core.Appender;\n+import org.apache.logging.log4j.core.Layout;\n+import org.apache.logging.log4j.core.LoggerContext;\n+import org.apache.logging.log4j.core.appender.ConsoleAppender;\n+import org.apache.logging.log4j.core.appender.RollingFileAppender;\n+import org.apache.logging.log4j.core.appender.rolling.CompositeTriggeringPolicy;\n+import org.apache.logging.log4j.core.appender.rolling.OnStartupTriggeringPolicy;\n+import org.apache.logging.log4j.core.appender.rolling.TimeBasedTriggeringPolicy;\n+import org.apache.logging.log4j.core.config.AbstractConfiguration;\n+import org.apache.logging.log4j.core.config.Configurator;\n+import org.apache.logging.log4j.core.config.LoggerConfig;\n+import org.apache.logging.log4j.core.layout.PatternLayout;\n+import org.apache.logging.log4j.status.StatusLogger;\n+\n+public class LoggingConfigurator {\n+\n+  static final String EVENT_LOGGER_NAME = \"teku-event-log\";\n+  static final String STATUS_LOGGER_NAME = \"teku-status-log\";\n+\n+  private static final String CONSOLE_APPENDER_NAME = \"teku-console-appender\";\n+  private static final String CONSOLE_FORMAT = \"%d{HH:mm:ss.SSS} [%-5level] - %msg%n\";\n+  private static final String FILE_APPENDER_NAME = \"teku-log-appender\";\n+  private static final String FILE_MESSAGE_FORMAT =\n+      \"%d{yyyy-MM-dd HH:mm:ss.SSSZZZ} | %t | %-5level | %c{1} | %msg%n\";\n+\n+  private static LoggingDestination DESTINATION;\n+  private static boolean COLOR;\n+  private static boolean INCLUDE_EVENTS;\n+  private static String FILE;\n+  private static String FILE_PATTERN;\n+  private static Level LOG_LEVEL = Level.INFO;\n+\n+  public static boolean isColorEnabled() {\n+    return COLOR;\n+  }\n+\n+  public static void setAllLevels(final Level level) {\n+    StatusLogger.getLogger().info(\"Setting logging level to {}\", level.name());\n+    Configurator.setAllLevels(\"\", level);\n+    LOG_LEVEL = level;\n+  }\n+\n+  public static void update(final LoggingConfiguration configuration) {\n+    COLOR = configuration.isColorEnabled();\n+    DESTINATION = configuration.getDestination();\n+    INCLUDE_EVENTS = configuration.isIncludeEventsEnabled();\n+    FILE = configuration.getFile();\n+    FILE_PATTERN = configuration.getFileNamePattern();\n+\n+    final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n+    addLoggersProgrammatically((AbstractConfiguration) ctx.getConfiguration());\n+    ctx.updateLoggers();\n+  }\n+\n+  public static void addLoggersProgrammatically(final AbstractConfiguration configuration) {\n+\n+    if (DESTINATION == null) {\n+      return;\n+    }\n+\n+    StatusLogger.getLogger().info(\"Programmatic logging setup: {}\", DESTINATION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM5MjcwMw==", "bodyText": "This is a very unfortunate dependency to add.", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393392703", "createdAt": "2020-03-17T01:12:01Z", "author": {"login": "ajsutton"}, "path": "util/build.gradle", "diffHunk": "@@ -5,6 +5,8 @@ plugins {\n dependencies {\n   api 'org.bouncycastle:bcprov-jdk15on'\n \n+  implementation project(':logging')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM5MzA1Nw==", "bodyText": "Typically ArtemisConfiguration sticks to just the raw data types so I think we probably should invert this dependency.  So ArtemisConfiguration.getLoggingDestination just returns a string and LoggingDestination has a fromConfig that has this mapping.", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393393057", "createdAt": "2020-03-17T01:13:28Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfiguration.java", "diffHunk": "@@ -399,4 +431,25 @@ public int getBeaconRestAPIPortNumber() {\n   public boolean getBeaconRestAPIEnableSwagger() {\n     return config.getBoolean(\"beaconrestapi.enableSwagger\");\n   }\n+\n+  private LoggingDestination getLoggingDestination() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM5MzA4Mw==", "bodyText": "Probably should warn on unknown values.", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393393083", "createdAt": "2020-03-17T01:13:38Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfiguration.java", "diffHunk": "@@ -399,4 +431,25 @@ public int getBeaconRestAPIPortNumber() {\n   public boolean getBeaconRestAPIEnableSwagger() {\n     return config.getBoolean(\"beaconrestapi.enableSwagger\");\n   }\n+\n+  private LoggingDestination getLoggingDestination() {\n+    switch (config.getString(\"logging.destination\")) {\n+      case \"consoleOnly\":\n+        return LoggingDestination.CONSOLE_ONLY;\n+      case \"fileOnly\":\n+        return LoggingDestination.FILE_ONLY;\n+      case \"both\":\n+      default:\n+        return LoggingDestination.BOTH;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM5MzQxOA==", "bodyText": "Probably should invert this dependency too so have LoggingConfiguration.fromConfig(ArtemisConfiguration).", "url": "https://github.com/ConsenSys/teku/pull/1379#discussion_r393393418", "createdAt": "2020-03-17T01:15:01Z", "author": {"login": "ajsutton"}, "path": "util/src/main/java/tech/pegasys/artemis/util/config/ArtemisConfiguration.java", "diffHunk": "@@ -399,4 +431,25 @@ public int getBeaconRestAPIPortNumber() {\n   public boolean getBeaconRestAPIEnableSwagger() {\n     return config.getBoolean(\"beaconrestapi.enableSwagger\");\n   }\n+\n+  private LoggingDestination getLoggingDestination() {\n+    switch (config.getString(\"logging.destination\")) {\n+      case \"consoleOnly\":\n+        return LoggingDestination.CONSOLE_ONLY;\n+      case \"fileOnly\":\n+        return LoggingDestination.FILE_ONLY;\n+      case \"both\":\n+      default:\n+        return LoggingDestination.BOTH;\n+    }\n+  }\n+\n+  public LoggingConfiguration getLoggingConfiguration() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aab2a73b0093f21f8ecd2da3b4fede6f183d54ff"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3860c5730029328baf6c90e614483ef29f5ad23e", "author": {"user": {"login": "CjHare", "name": "CJ Hare"}}, "url": "https://github.com/ConsenSys/teku/commit/3860c5730029328baf6c90e614483ef29f5ad23e", "committedDate": "2020-03-17T02:48:06Z", "message": "Update logging/src/main/java/tech/pegasys/teku/logging/LoggingConfigurator.java\n\nCo-Authored-By: Adrian Sutton <adrian@symphonious.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "634a521daf4f6a479e9f771a1e2dd41e83a2beb7", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/634a521daf4f6a479e9f771a1e2dd41e83a2beb7", "committedDate": "2020-03-17T02:53:52Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73bd4d04834daaa27836ab89dc8653c0463c3113", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/73bd4d04834daaa27836ab89dc8653c0463c3113", "committedDate": "2020-03-17T02:54:05Z", "message": "Merge branch 'logging-config' of github.com:CjHare/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "854ad1533e9e76285992b0bd62df3408b1e321d5", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/854ad1533e9e76285992b0bd62df3408b1e321d5", "committedDate": "2020-03-17T03:00:59Z", "message": "Warning on unknown logging destination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff4e9ec9b51a93055209c8e0f181c5fdcda324c0", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/ff4e9ec9b51a93055209c8e0f181c5fdcda324c0", "committedDate": "2020-03-17T03:11:26Z", "message": "Thread saftey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "167025daaf9c164f486ffc76358164ec68a85e6f", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/167025daaf9c164f486ffc76358164ec68a85e6f", "committedDate": "2020-03-17T03:23:43Z", "message": "Fall through comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f5abe8317a2f134952f31c636661a1af861fbc", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/a5f5abe8317a2f134952f31c636661a1af861fbc", "committedDate": "2020-03-17T04:01:13Z", "message": "Inverting config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da192ddf150e10174e1c700e7089043d7c84c66c", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/da192ddf150e10174e1c700e7089043d7c84c66c", "committedDate": "2020-03-17T04:10:45Z", "message": "Converting into LoggingDesintation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e0503f87cd0e839c7539ab665cda7c1d2d3cf5", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/75e0503f87cd0e839c7539ab665cda7c1d2d3cf5", "committedDate": "2020-03-17T04:17:59Z", "message": "Conversion in BeaconNode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ae74922c19a590ddad781c9d42f28ede756dfe1", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/2ae74922c19a590ddad781c9d42f28ede756dfe1", "committedDate": "2020-03-17T04:26:55Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4507e4e03538cd360e316fac5c5bfcba4e3b081", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/b4507e4e03538cd360e316fac5c5bfcba4e3b081", "committedDate": "2020-03-17T06:50:01Z", "message": "Raising the JDK requirement to resolve dependency correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a16c9596b40a68555350b00f726ac984afbf08e", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/2a16c9596b40a68555350b00f726ac984afbf08e", "committedDate": "2020-03-17T06:50:17Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into logging-config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mjg4MzQx", "url": "https://github.com/ConsenSys/teku/pull/1379#pullrequestreview-377288341", "createdAt": "2020-03-18T22:44:30Z", "commit": {"oid": "2a16c9596b40a68555350b00f726ac984afbf08e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5759bc3686a48d05c3bf794b1741deec5c10fd1f", "author": {"user": null}, "url": "https://github.com/ConsenSys/teku/commit/5759bc3686a48d05c3bf794b1741deec5c10fd1f", "committedDate": "2020-03-18T23:53:35Z", "message": "Merging upstream"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3982, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}