{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NDQ3ODg5", "number": 3182, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwNToxNjozNFrOE2m58Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwNToxNjozNFrOE2m58Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1Njk1OTg1OnYy", "diffSide": "RIGHT", "path": "pow/src/main/java/tech/pegasys/teku/pow/contract/DepositContract.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwNToxNjozNFrOHvfRQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwNToxODoyNlrOHvfS3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU1NzQ0Mg==", "bodyText": "'FROM' eth1 node?", "url": "https://github.com/ConsenSys/teku/pull/3182#discussion_r519557442", "createdAt": "2020-11-09T05:16:34Z", "author": {"login": "rolfyone"}, "path": "pow/src/main/java/tech/pegasys/teku/pow/contract/DepositContract.java", "diffHunk": "@@ -138,11 +138,19 @@ protected DepositContract(\n             .ethGetLogs(filter)\n             .sendAsync()\n             .thenApply(\n-                logs ->\n-                    logs.getLogs().stream()\n-                        .map(log -> (Log) log.get())\n-                        .map(this::convertLogToDepositEventEventResponse)\n-                        .collect(Collectors.toList())));\n+                logs -> {\n+                  if (logs.getLogs() == null) {\n+                    // We got a response from the node but it didn't include even an empty list\n+                    // of logs.  This happens with Infura when more than 10,000 log entries match\n+                    // so treat as an explicit rejection of the request to allow the requested block\n+                    // range to be reduced.\n+                    throw new RejectedRequestException(\"No logs returned by ETH1 node\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e98772a625d6a42099555a856173b2ca508b523"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU1Nzg1Mw==", "bodyText": "Grammatically I'd have said by - ie it was the ETH1 node that produced the empty response.  It really doesn't matter though because we catch the exception and handle it anyway.", "url": "https://github.com/ConsenSys/teku/pull/3182#discussion_r519557853", "createdAt": "2020-11-09T05:18:26Z", "author": {"login": "ajsutton"}, "path": "pow/src/main/java/tech/pegasys/teku/pow/contract/DepositContract.java", "diffHunk": "@@ -138,11 +138,19 @@ protected DepositContract(\n             .ethGetLogs(filter)\n             .sendAsync()\n             .thenApply(\n-                logs ->\n-                    logs.getLogs().stream()\n-                        .map(log -> (Log) log.get())\n-                        .map(this::convertLogToDepositEventEventResponse)\n-                        .collect(Collectors.toList())));\n+                logs -> {\n+                  if (logs.getLogs() == null) {\n+                    // We got a response from the node but it didn't include even an empty list\n+                    // of logs.  This happens with Infura when more than 10,000 log entries match\n+                    // so treat as an explicit rejection of the request to allow the requested block\n+                    // range to be reduced.\n+                    throw new RejectedRequestException(\"No logs returned by ETH1 node\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU1NzQ0Mg=="}, "originalCommit": {"oid": "5e98772a625d6a42099555a856173b2ca508b523"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2982, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}