{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1ODU5NjMy", "number": 1503, "title": "Convert storage query events to EventChannels", "bodyText": "PR Description\nConverts storage query events to EventChannels", "createdAt": "2020-03-30T19:45:17Z", "url": "https://github.com/ConsenSys/teku/pull/1503", "merged": true, "mergeCommit": {"oid": "1f3b0bb9318ab86179f9915950ce0f6e44cbce6a"}, "closed": true, "closedAt": "2020-03-30T23:51:28Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSz493AH2gAyMzk1ODU5NjMyOmVmM2JiMTY2ZDVmNjVhY2EyN2Y2NjM2MGE4MGEwMjBkMmYwNzhkZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS28CPAFqTM4NDI5NjA2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ef3bb166d5f65aca27f66360a80a020d2f078dfb", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/ef3bb166d5f65aca27f66360a80a020d2f078dfb", "committedDate": "2020-03-30T19:44:06Z", "message": "Convert storage query events to EventChannels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "748457c8cd0788eda916eacfd7c99559948df3ac", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/748457c8cd0788eda916eacfd7c99559948df3ac", "committedDate": "2020-03-30T19:51:27Z", "message": "Subscribe to query calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b64e99723b6ac59010a64b5469cfc4e0f99b191", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/1b64e99723b6ac59010a64b5469cfc4e0f99b191", "committedDate": "2020-03-30T20:13:29Z", "message": "Remove redundant AsyncEventTracker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40f346572a3f8fb5fc50c46e43c9390c01ec554c", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/40f346572a3f8fb5fc50c46e43c9390c01ec554c", "committedDate": "2020-03-30T22:21:46Z", "message": "Merge branch 'master' into storageQueryEventsToEventChannels"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0Mjk2MDY4", "url": "https://github.com/ConsenSys/teku/pull/1503#pullrequestreview-384296068", "createdAt": "2020-03-30T23:10:53Z", "commit": {"oid": "40f346572a3f8fb5fc50c46e43c9390c01ec554c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMzoxMDo1M1rOF9_jfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMzoxMDo1M1rOF9_jfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU0ODczNA==", "bodyText": "We talked about using HistoricalChainData as a wrapper around StorageQueryChannel but I hadn't realised we were able to completely remove HistoricalChainData.  So actually I think using the channel directly is better than the wrapper class in this case.\nI am however tempted to move as much stuff to use CombinedChainData as possible rather than directly requesting data from storage.  Then it can load content from memory when possible and that would be the place we could add caching if needed.  I'd probably only do that in this PR where CombinedChainData is already reasonably easily available - otherwise it's just something we'll get to in the future.", "url": "https://github.com/ConsenSys/teku/pull/1503#discussion_r400548734", "createdAt": "2020-03-30T23:10:53Z", "author": {"login": "ajsutton"}, "path": "networking/eth2/src/main/java/tech/pegasys/artemis/networking/eth2/Eth2NetworkBuilder.java", "diffHunk": "@@ -101,7 +101,13 @@ public Eth2NetworkBuilder eventBus(final EventBus eventBus) {\n     return this;\n   }\n \n-  public Eth2NetworkBuilder chainStorageClient(final RecentChainData recentChainData) {\n+  public Eth2NetworkBuilder historicalChainData(final StorageQueryChannel historicalChainData) {\n+    checkNotNull(historicalChainData);\n+    this.historicalChainData = historicalChainData;\n+    return this;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40f346572a3f8fb5fc50c46e43c9390c01ec554c"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4417, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}