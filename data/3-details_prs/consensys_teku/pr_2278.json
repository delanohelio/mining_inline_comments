{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMzM5MzQ1", "number": 2278, "title": "Synchronize access to DepositProvider fields correctly", "bodyText": "PR Description\nDepositProvider tracks deposits in two separate fields, neither of which are thread safe.  However it wasn't consistently synchronising all access to those fields.\nFixed Issue(s)\n#2264 - not really sure how we'd get an invalid Merkle proof as a result of these synchronization problems but it definitely doesn't help.  Will have to keep watching to see if this fixes it or if the problem persists.\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-06-30T22:56:23Z", "url": "https://github.com/ConsenSys/teku/pull/2278", "merged": true, "mergeCommit": {"oid": "348ce870a01bf8cc87179f98181c66d27aa6ed4e"}, "closed": true, "closedAt": "2020-07-01T21:06:20Z", "author": {"login": "ajsutton"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwdd3fgH2gAyNDQyMzM5MzQ1Ojg0ZGQ0ZTBkNjI3MTA1ZjVhNzQ5YzAyM2M0ZGQxMGU5N2JiZGU0YWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwwzQ2gFqTQ0MTE5NjU0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84dd4e0d627105f5a749c023c4dd10e97bbde4ab", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/84dd4e0d627105f5a749c023c4dd10e97bbde4ab", "committedDate": "2020-06-30T22:34:19Z", "message": "Synchronize access to DepositProvider fields correctly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18bf56c471d10553c70203a966b9c6f7e4eb60b2", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/18bf56c471d10553c70203a966b9c6f7e4eb60b2", "committedDate": "2020-06-30T22:56:41Z", "message": "Merge branch 'master' into sync-merkle-tree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "458c0ba92c0f87723294d0e914a43e6c9d68395a", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/458c0ba92c0f87723294d0e914a43e6c9d68395a", "committedDate": "2020-06-30T23:15:58Z", "message": "Merge branch 'master' into sync-merkle-tree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a136ea50abc05399c8d9f6c2c5d37391d70d3c8", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/3a136ea50abc05399c8d9f6c2c5d37391d70d3c8", "committedDate": "2020-07-01T20:47:16Z", "message": "Merge branch 'master' into sync-merkle-tree"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTkzMjU1", "url": "https://github.com/ConsenSys/teku/pull/2278#pullrequestreview-441193255", "createdAt": "2020-07-01T20:59:50Z", "commit": {"oid": "3a136ea50abc05399c8d9f6c2c5d37391d70d3c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1OTo1MFrOGr1MPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1OTo1MFrOGr1MPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMzQzNg==", "bodyText": "Why is there no need for synchronization here?", "url": "https://github.com/ConsenSys/teku/pull/2278#discussion_r448613436", "createdAt": "2020-07-01T20:59:50Z", "author": {"login": "cemozerr"}, "path": "validator/coordinator/src/main/java/tech/pegasys/teku/validator/coordinator/DepositProvider.java", "diffHunk": "@@ -152,7 +150,7 @@ public int getDepositMapSize() {\n    * @param eth1DepositCount number of deposits in the merkle tree according to Eth1Data in state\n    * @return\n    */\n-  private synchronized List<Deposit> getDepositsWithProof(\n+  private List<Deposit> getDepositsWithProof(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a136ea50abc05399c8d9f6c2c5d37391d70d3c8"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTk2NTQ0", "url": "https://github.com/ConsenSys/teku/pull/2278#pullrequestreview-441196544", "createdAt": "2020-07-01T21:05:53Z", "commit": {"oid": "3a136ea50abc05399c8d9f6c2c5d37391d70d3c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3779, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}