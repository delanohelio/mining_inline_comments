{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0OTk1NzYy", "number": 2322, "title": "Access genesis data through genesis event rather than Store", "bodyText": "PR Description\nAs part of #2291, reduce dependencies on Store API's by creating an AnchorPoint object that is now used to encapsulate genesis-related data.  This means we no longer need to query the Store to pull genesis-related data.\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-07-06T20:52:37Z", "url": "https://github.com/ConsenSys/teku/pull/2322", "merged": true, "mergeCommit": {"oid": "38a47deec12216b799f22205a1353921e0d5af2a"}, "closed": true, "closedAt": "2020-07-07T18:03:43Z", "author": {"login": "mbaxter"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyXkIxgH2gAyNDQ0OTk1NzYyOmZlOTgzMzg4OWNkN2JjNmM0OTcxYmNlZGNlZTY0OTRkOTY0MGFjNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcypYB5gH2gAyNDQ0OTk1NzYyOjM0NTc1YzJiNTY4M2IwMjRmMThmZjJiYjRlYjc4MmUxNWIwZDdiZjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe9833889cd7bc6c4971bcedcee6494d9640ac76", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/fe9833889cd7bc6c4971bcedcee6494d9640ac76", "committedDate": "2020-07-06T20:49:35Z", "message": "Access genesis data through GenesisEvent rather than Store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cba4245303a664045495392c30bb5f4381cf9b46", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/cba4245303a664045495392c30bb5f4381cf9b46", "committedDate": "2020-07-06T20:53:07Z", "message": "Merge branch 'master' into issue-2291/add-genesis-event"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNDQwNDE5", "url": "https://github.com/ConsenSys/teku/pull/2322#pullrequestreview-443440419", "createdAt": "2020-07-06T22:13:47Z", "commit": {"oid": "cba4245303a664045495392c30bb5f4381cf9b46"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMjoxMzo0OFrOGtowvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMjoxNTo1N1rOGtoz1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwNjk0Mw==", "bodyText": "Would it be difficult to switch this over to using the EventChannel interface to get this event rather than the EventBus while you're here?  Don't worry if it takes more than a couple of minutes but it would be nice to get rid of one more usage of EventBus.", "url": "https://github.com/ConsenSys/teku/pull/2322#discussion_r450506943", "createdAt": "2020-07-06T22:13:48Z", "author": {"login": "ajsutton"}, "path": "data/recorder/src/main/java/tech/pegasys/teku/data/recorder/SSZTransitionRecorder.java", "diffHunk": "@@ -41,13 +40,12 @@ public SSZTransitionRecorder(final Path outputDirectory) {\n   }\n \n   @Subscribe\n-  public void onGenesis(final UpdatableStore store) {\n-    final Checkpoint finalizedCheckpoint = store.getFinalizedCheckpoint();\n+  public void onGenesis(final GenesisEvent genesis) {\n+    final Checkpoint finalizedCheckpoint = genesis.getCheckpoint();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cba4245303a664045495392c30bb5f4381cf9b46"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwNzczMg==", "bodyText": "anchorState is the more correct term (and possibly we should update a lot of places that refer to Genesis).  We might be starting from a state that isn't slot 0.", "url": "https://github.com/ConsenSys/teku/pull/2322#discussion_r450507732", "createdAt": "2020-07-06T22:15:57Z", "author": {"login": "ajsutton"}, "path": "storage/src/main/java/tech/pegasys/teku/storage/store/StoreBuilder.java", "diffHunk": "@@ -54,40 +51,49 @@ public static StoreBuilder create() {\n   public static UpdatableStore buildForkChoiceStore(\n       final MetricsSystem metricsSystem,\n       final BlockProvider blockProvider,\n-      final BeaconState anchorState) {\n-    return forkChoiceStoreBuilder(metricsSystem, blockProvider, anchorState).build();\n+      final BeaconState genesisState) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cba4245303a664045495392c30bb5f4381cf9b46"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4333f359f50cfd2340cb31a828e0946fd1da4c51", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/4333f359f50cfd2340cb31a828e0946fd1da4c51", "committedDate": "2020-07-07T14:37:35Z", "message": "Merge branch 'master' into issue-2291/add-genesis-event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aafc7db58bff4e61771897f1f6e410e601d0b5b", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/6aafc7db58bff4e61771897f1f6e410e601d0b5b", "committedDate": "2020-07-07T15:16:55Z", "message": "Use more generic anchor event in place of genesis event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19fb989e537ce5f595b97018f74ac8bd57d8a775", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/19fb989e537ce5f595b97018f74ac8bd57d8a775", "committedDate": "2020-07-07T15:33:45Z", "message": "Check that genesis state argument is valid, rename variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4e378138c40dbd164ed9736590c50295e6d33aa", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/f4e378138c40dbd164ed9736590c50295e6d33aa", "committedDate": "2020-07-07T16:03:54Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6da08a3a5601fd584f3d4f60bd3cf333dc974560", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/6da08a3a5601fd584f3d4f60bd3cf333dc974560", "committedDate": "2020-07-07T17:23:07Z", "message": "Fix ChainDataProviderTest - use valid genesis state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34575c2b5683b024f18ff2bb4eb782e15b0d7bf8", "author": {"user": {"login": "mbaxter", "name": null}}, "url": "https://github.com/ConsenSys/teku/commit/34575c2b5683b024f18ff2bb4eb782e15b0d7bf8", "committedDate": "2020-07-07T17:34:39Z", "message": "Fix SlotProcessorTest"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3816, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}