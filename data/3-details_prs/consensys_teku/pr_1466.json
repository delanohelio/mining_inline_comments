{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMjIwOTkx", "number": 1466, "title": "Improved handling of invalid key strings", "bodyText": "BLSPubKey.fromHexString now forces early validation of the key string. This means if bad keys are passed to the API they are validated there and not passed to the back end.", "createdAt": "2020-03-24T19:45:27Z", "url": "https://github.com/ConsenSys/teku/pull/1466", "merged": true, "mergeCommit": {"oid": "944c5c4edda677f9b35cce3e563037182ba013d4"}, "closed": true, "closedAt": "2020-03-25T02:06:27Z", "author": {"login": "macfarla"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQr3GFAH2gAyMzkzMjIwOTkxOjAwNTVjMTkxYTY3YWVhYTVkMDY2OTdjOThhMzQ3YjE4YTQ2ZDk4MzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ8X-tAH2gAyMzkzMjIwOTkxOjg4NTdiMTFiNzYyNTA1NzU3YjU3YTZlYTJmMzZkZDhkYWZjNWRhYTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0055c191a67aeaa5d06697c98a347b18a46d9832", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/0055c191a67aeaa5d06697c98a347b18a46d9832", "committedDate": "2020-03-24T05:14:58Z", "message": "added test for illegal arg\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e80e4472b3344df54ab256a409968bf45bf80b8f", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/e80e4472b3344df54ab256a409968bf45bf80b8f", "committedDate": "2020-03-24T19:00:12Z", "message": "validate key up front\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c24de38b6a81d52ee93b7563ffceeb32ca76d797", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/c24de38b6a81d52ee93b7563ffceeb32ca76d797", "committedDate": "2020-03-24T19:39:51Z", "message": "simplify test\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "754162f578adced869c425f4e13585ef3effe9da", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/754162f578adced869c425f4e13585ef3effe9da", "committedDate": "2020-03-24T19:48:11Z", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNzIwNjQ5", "url": "https://github.com/ConsenSys/teku/pull/1466#pullrequestreview-380720649", "createdAt": "2020-03-24T21:46:29Z", "commit": {"oid": "754162f578adced869c425f4e13585ef3effe9da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5083e8d9c15618b39bb247e752c919bc79ff25dc", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/5083e8d9c15618b39bb247e752c919bc79ff25dc", "committedDate": "2020-03-24T22:00:20Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1168d1d0ef8d418aea90fa6b492f3e639dcb1a9e", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/1168d1d0ef8d418aea90fa6b492f3e639dcb1a9e", "committedDate": "2020-03-24T22:07:07Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNzMwNjI4", "url": "https://github.com/ConsenSys/teku/pull/1466#pullrequestreview-380730628", "createdAt": "2020-03-24T22:04:47Z", "commit": {"oid": "754162f578adced869c425f4e13585ef3effe9da"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMjowNDo0OFrOF7E25A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMjowNTowMlrOF7E3Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4OTg5Mg==", "bodyText": "nit: Would be a lot better if this were wrapped in a blsPublicKey.isValid()", "url": "https://github.com/ConsenSys/teku/pull/1466#discussion_r397489892", "createdAt": "2020-03-24T22:04:48Z", "author": {"login": "ajsutton"}, "path": "data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java", "diffHunk": "@@ -60,8 +61,11 @@ public String toString() {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) {\n-    return new BLSPubKey(Bytes.fromHexString(value));\n+  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {\n+    BLSPublicKey blsPublicKey = BLSPublicKey.fromBytes(Bytes.fromHexString(value));\n+    // force validation early - this will throw IllegalArgumentException if not valid\n+    blsPublicKey.getPublicKey().g1Point();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754162f578adced869c425f4e13585ef3effe9da"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4OTk3OA==", "bodyText": "nit: Don't need to declare unchecked exceptions like IllegalArgumentException.", "url": "https://github.com/ConsenSys/teku/pull/1466#discussion_r397489978", "createdAt": "2020-03-24T22:05:02Z", "author": {"login": "ajsutton"}, "path": "data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java", "diffHunk": "@@ -60,8 +61,11 @@ public String toString() {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) {\n-    return new BLSPubKey(Bytes.fromHexString(value));\n+  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754162f578adced869c425f4e13585ef3effe9da"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2946fe1ef3385d978a9fc5e6b771e13d34955274", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/2946fe1ef3385d978a9fc5e6b771e13d34955274", "committedDate": "2020-03-24T23:55:27Z", "message": "added isValid method\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb82171347a16be4317069e794f127149e040f90", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/fb82171347a16be4317069e794f127149e040f90", "committedDate": "2020-03-25T00:20:40Z", "message": "test\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8857b11b762505757b57a6ea2f36dd8dafc5daa8", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/8857b11b762505757b57a6ea2f36dd8dafc5daa8", "committedDate": "2020-03-25T00:29:22Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4379, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}