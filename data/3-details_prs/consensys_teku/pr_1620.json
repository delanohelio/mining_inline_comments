{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NzU1MTMz", "number": 1620, "title": "Use ArtemisMetricCategory as the source for valid metric categories.", "bodyText": "due to dependencies continue to export strings to the lower levels.\n\n\nUpdate the default categories in the config.yaml to contain no invalid values.\n\n\nset the default prometheus categories to at least include the beacon category.\n\n\nAddresses #1619\nSigned-off-by: Paul Harris paul.harris@consensys.net", "createdAt": "2020-04-19T23:18:44Z", "url": "https://github.com/ConsenSys/teku/pull/1620", "merged": true, "mergeCommit": {"oid": "bb534012687f507d71011697316bf5a80404217d"}, "closed": true, "closedAt": "2020-04-20T01:45:39Z", "author": {"login": "rolfyone"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZS7tfAH2gAyNDA1NzU1MTMzOjVmNjBiZjZmNjk0Mjk1NTk2NWJiZGY2NDk4OTdhYWJlMTFmZTdlNjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZU3daAH2gAyNDA1NzU1MTMzOmFiOGQyYzRkNDdkZDIwMzJmODIxOWNhMDFjZmUzNjBlY2IyMjdiMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5f60bf6f6942955965bbdf649897aabe11fe7e65", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/5f60bf6f6942955965bbdf649897aabe11fe7e65", "committedDate": "2020-04-19T23:17:42Z", "message": "Use ArtemisMetricCategory as the source for valid metric categories.\n\n - due to dependencies continue to export strings to the lower levels.\n\n - Update the default categories in the config.yaml to contain no invalid values.\n\n - set the default prometheus categories to at least include the beacon category.\n\n Addresses #1619\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDc5NDYx", "url": "https://github.com/ConsenSys/teku/pull/1620#pullrequestreview-396079461", "createdAt": "2020-04-20T00:06:35Z", "commit": {"oid": "5f60bf6f6942955965bbdf649897aabe11fe7e65"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwMDowNjozNVrOGH-3fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwMDowNjozNVrOGH-3fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAyMzIzMQ==", "bodyText": "I'd suggest defaulting to enabling all metrics. I hadn't noticed that we'd disabled them all by default.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = List.of(BEACON);\n          \n          \n            \n              public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = new ArrayList<>(EnumSet.allOf(ArtemisMetricCategory.class));", "url": "https://github.com/ConsenSys/teku/pull/1620#discussion_r411023231", "createdAt": "2020-04-20T00:06:35Z", "author": {"login": "ajsutton"}, "path": "artemis/src/main/java/tech/pegasys/artemis/cli/options/MetricsOptions.java", "diffHunk": "@@ -26,7 +30,7 @@\n   public static final boolean DEFAULT_METRICS_ENABLED = false;\n   public static final int DEFAULT_METRICS_PORT = 8008;\n   public static final String DEFAULT_METRICS_INTERFACE = \"127.0.0.1\";\n-  public static final ArrayList<String> DEFAULT_METRICS_CATEGORIES = new ArrayList<>();\n+  public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = List.of(BEACON);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f60bf6f6942955965bbdf649897aabe11fe7e65"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "580f30657150414056fea23931281305a4900be0", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/580f30657150414056fea23931281305a4900be0", "committedDate": "2020-04-20T01:31:54Z", "message": "Process and JVM can now be used as categories, and removing them disables them.\n\nAdded a default of all categories.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab8d2c4d47dd2032f8219ca01cfe360ecb227b01", "author": {"user": {"login": "rolfyone", "name": "Paul Harris"}}, "url": "https://github.com/ConsenSys/teku/commit/ab8d2c4d47dd2032f8219ca01cfe360ecb227b01", "committedDate": "2020-04-20T01:32:52Z", "message": "Merge remote-tracking branch 'upstream/master' into 1619-metrics-categories"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4317, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}