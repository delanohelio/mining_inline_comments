{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MjQ3OTE1", "number": 2695, "title": "Print warning when the Eth1 chain is shorter than follow distance", "bodyText": "PR Description\nPrint warning when the Eth1 chain is shorter than follow distance\nFixed Issue(s)\n\n\nFixes #1888\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-08-31T11:50:41Z", "url": "https://github.com/ConsenSys/teku/pull/2695", "merged": true, "mergeCommit": {"oid": "b14a8a8962e736690230a5c352b04ea6281f886e"}, "closed": true, "closedAt": "2020-09-02T08:39:35Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEOwtAAH2gAyNDc2MjQ3OTE1OjRmODQ5ZjQ5ODEyNjYzMjBhYjQ1NDk2ZWQzNDA3ZWEzMTJiMGU0YWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE3ku7AH2gAyNDc2MjQ3OTE1OmFlNzg0MzZhODc1MGQ4YmQzMDIwNjhlOTFjOTg5MGMxZGRjZDhlMmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4f849f4981266320ab45496ed3407ea312b0e4af", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/4f849f4981266320ab45496ed3407ea312b0e4af", "committedDate": "2020-08-31T08:44:48Z", "message": "Print warning when the Eth1 chain is shorter than follow distance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e0cddd1bd404e4827a4d2d07fe948e83cd3b398", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/8e0cddd1bd404e4827a4d2d07fe948e83cd3b398", "committedDate": "2020-08-31T08:49:07Z", "message": "Remove stale comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1f23168390324e799d413feec2109ff5564582", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/ab1f23168390324e799d413feec2109ff5564582", "committedDate": "2020-08-31T11:51:13Z", "message": "Merge branch 'master' into warningWhenEth1ChainIsShorter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4Njk4Njcw", "url": "https://github.com/ConsenSys/teku/pull/2695#pullrequestreview-478698670", "createdAt": "2020-08-31T15:07:52Z", "commit": {"oid": "ab1f23168390324e799d413feec2109ff5564582"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTowNzo1MlrOHJ8tyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTowNzo1MlrOHJ8tyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5Mzk5NA==", "bodyText": "Should we retry less frequently and log a warning in this case?", "url": "https://github.com/ConsenSys/teku/pull/2695#discussion_r480193994", "createdAt": "2020-08-31T15:07:52Z", "author": {"login": "mbaxter"}, "path": "pow/src/main/java/tech/pegasys/teku/pow/Eth1DepositManager.java", "diffHunk": "@@ -146,8 +146,16 @@ private void preGenesisSubscription(final BigInteger lastProcessedBlockNumber) {\n     return eth1Provider\n         .getLatestEth1Block()\n         .thenApply(EthBlock.Block::getNumber)\n-        .thenApply(number -> number.subtract(Constants.ETH1_FOLLOW_DISTANCE.bigIntegerValue()))\n         .thenApply(UInt64::valueOf)\n+        .thenApply(\n+            number -> {\n+              if (number.isLessThan(Constants.ETH1_FOLLOW_DISTANCE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab1f23168390324e799d413feec2109ff5564582"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d894f43ebe0cbf2cf0c06e7763e3a8c20a7786f2", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/d894f43ebe0cbf2cf0c06e7763e3a8c20a7786f2", "committedDate": "2020-09-01T10:30:52Z", "message": "Wait until local chain reaches follow distance instead of logging a warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30efdb8fa0fd65317bf8c39e983c0d53e6543430", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/30efdb8fa0fd65317bf8c39e983c0d53e6543430", "committedDate": "2020-09-01T11:28:23Z", "message": "Run spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3084f5464db48d30dc41a24120ed2f7acf552b5d", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/3084f5464db48d30dc41a24120ed2f7acf552b5d", "committedDate": "2020-09-01T15:43:42Z", "message": "Merge branch 'master' into warningWhenEth1ChainIsShorter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTczMjk4", "url": "https://github.com/ConsenSys/teku/pull/2695#pullrequestreview-479973298", "createdAt": "2020-09-01T17:37:43Z", "commit": {"oid": "3084f5464db48d30dc41a24120ed2f7acf552b5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae78436a8750d8bd302068e91c9890c1ddcd8e2a", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/ae78436a8750d8bd302068e91c9890c1ddcd8e2a", "committedDate": "2020-09-02T08:17:50Z", "message": "Merge branch 'master' into warningWhenEth1ChainIsShorter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3551, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}