{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNTYxODU1", "number": 2254, "title": "Fix empty RPC request handling", "bodyText": "PR Description\nHandle the case when RPC request is empty and the Eth2IncomingRequestHandler.complete() method might be called without any prior processData() invocation.\nDocumentation\n\n I thought about documentation and added the documentation label to this PR if updates are required.", "createdAt": "2020-06-29T17:50:57Z", "url": "https://github.com/ConsenSys/teku/pull/2254", "merged": true, "mergeCommit": {"oid": "f83d71be1b58f09cc175c6eb8f57c2290cbc0de3"}, "closed": true, "closedAt": "2020-06-29T21:14:31Z", "author": {"login": "Nashatyrev"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwEtZPgH2gAyNDQxNTYxODU1OmY4YWY0MmI1ZWI5NjFiN2VkYmRmNzIzNzUwOTYzMGFhMTRiMmE5ZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwHki7AH2gAyNDQxNTYxODU1OjQ1NDk3NzM0NmJkYmJjYzViZjExNzVhOTM1NmI3YjVkOTg0NjA5OWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8af42b5eb961b7edbdf7237509630aa14b2a9f1", "author": {"user": {"login": "Nashatyrev", "name": "Anton Nashatyrev"}}, "url": "https://github.com/ConsenSys/teku/commit/f8af42b5eb961b7edbdf7237509630aa14b2a9f1", "committedDate": "2020-06-29T17:43:39Z", "message": "Handle the case when RPC request is empty and the complete() method might be called without any prior processData() invocation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NDczMjM2", "url": "https://github.com/ConsenSys/teku/pull/2254#pullrequestreview-439473236", "createdAt": "2020-06-29T20:24:50Z", "commit": {"oid": "f8af42b5eb961b7edbdf7237509630aa14b2a9f1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMDoyNDo1MFrOGqg4Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMDoyNDo1MFrOGqg4Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMjAyNg==", "bodyText": "nit: Stray semicolon.", "url": "https://github.com/ConsenSys/teku/pull/2254#discussion_r447232026", "createdAt": "2020-06-29T20:24:50Z", "author": {"login": "ajsutton"}, "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/Eth2IncomingRequestHandler.java", "diffHunk": "@@ -81,7 +81,13 @@ public void processData(final NodeId nodeId, final RpcStream rpcStream, final By\n   @Override\n   public void complete(NodeId nodeId, RpcStream rpcStream) {\n     try {\n-      requestDecoder.complete();\n+      Optional<Eth2Peer> peer = peerLookup.getConnectedPeer(nodeId);\n+      requestDecoder\n+          .complete()\n+          .ifPresent(\n+              request ->\n+                  handleRequest(peer, request, new RpcResponseCallback<>(rpcStream, rpcEncoder)));\n+      ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8af42b5eb961b7edbdf7237509630aa14b2a9f1"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "454977346bdbbcc5bf1175a9356b7b5d9846099a", "author": {"user": {"login": "ajsutton", "name": "Adrian Sutton"}}, "url": "https://github.com/ConsenSys/teku/commit/454977346bdbbcc5bf1175a9356b7b5d9846099a", "committedDate": "2020-06-29T21:03:42Z", "message": "Merge branch 'master' into fix-empty-request-handling"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3759, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}