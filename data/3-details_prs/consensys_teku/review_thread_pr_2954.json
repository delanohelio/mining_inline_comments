{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxODg2Mzc5", "number": 2954, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDoxMzoyNFrOEs0iAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDoxMzoyNFrOEs0iAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NDMzNDc1OnYy", "diffSide": "RIGHT", "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDoxMzoyNFrOHgROGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDozNjoxMVrOHgRkmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5ODYxNw==", "bodyText": "this breaks a lot of the old api's if we care about that?", "url": "https://github.com/ConsenSys/teku/pull/2954#discussion_r503598617", "createdAt": "2020-10-13T00:13:24Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -161,19 +166,32 @@ private String readResource(final String fileName, Charset charset) throws IOExc\n   }\n \n   private void addExceptionHandlers() {\n+    app.exception(ChainDataUnavailableException.class, (e, ctx) -> ctx.status(SC_NO_CONTENT));\n     app.exception(\n-        ChainDataUnavailableException.class,\n+        NodeSyncingException.class,\n         (e, ctx) -> {\n-          ctx.status(SC_NO_CONTENT);\n+          ctx.status(SC_SERVICE_UNAVAILABLE);\n+          setErrorBody(ctx, () -> BadRequest.serviceUnavailable(jsonProvider));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53cd4feb7dada1adc82390f4b1f51c546d981f07"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5OTA1NQ==", "bodyText": "The diff makes it look a bit confusing.  ChainDataUnavailableException still returns SC_NO_CONTENT as always.  NodeSyncingException previously return 500 internal server error but now returns SC_SERVICE_UNAVAILABLE.", "url": "https://github.com/ConsenSys/teku/pull/2954#discussion_r503599055", "createdAt": "2020-10-13T00:15:11Z", "author": {"login": "ajsutton"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -161,19 +166,32 @@ private String readResource(final String fileName, Charset charset) throws IOExc\n   }\n \n   private void addExceptionHandlers() {\n+    app.exception(ChainDataUnavailableException.class, (e, ctx) -> ctx.status(SC_NO_CONTENT));\n     app.exception(\n-        ChainDataUnavailableException.class,\n+        NodeSyncingException.class,\n         (e, ctx) -> {\n-          ctx.status(SC_NO_CONTENT);\n+          ctx.status(SC_SERVICE_UNAVAILABLE);\n+          setErrorBody(ctx, () -> BadRequest.serviceUnavailable(jsonProvider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5ODYxNw=="}, "originalCommit": {"oid": "53cd4feb7dada1adc82390f4b1f51c546d981f07"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNDM3OQ==", "bodyText": "ah ok", "url": "https://github.com/ConsenSys/teku/pull/2954#discussion_r503604379", "createdAt": "2020-10-13T00:36:11Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -161,19 +166,32 @@ private String readResource(final String fileName, Charset charset) throws IOExc\n   }\n \n   private void addExceptionHandlers() {\n+    app.exception(ChainDataUnavailableException.class, (e, ctx) -> ctx.status(SC_NO_CONTENT));\n     app.exception(\n-        ChainDataUnavailableException.class,\n+        NodeSyncingException.class,\n         (e, ctx) -> {\n-          ctx.status(SC_NO_CONTENT);\n+          ctx.status(SC_SERVICE_UNAVAILABLE);\n+          setErrorBody(ctx, () -> BadRequest.serviceUnavailable(jsonProvider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5ODYxNw=="}, "originalCommit": {"oid": "53cd4feb7dada1adc82390f4b1f51c546d981f07"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3188, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}