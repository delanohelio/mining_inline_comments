{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2OTY3NzAz", "number": 1362, "title": "Validator duties", "bodyText": "Added /validator/duties endpoint\nsee #1203", "createdAt": "2020-03-11T23:30:14Z", "url": "https://github.com/ConsenSys/teku/pull/1362", "merged": true, "mergeCommit": {"oid": "8b2cc40515355d76b407e157e04ad64723db2808"}, "closed": true, "closedAt": "2020-03-12T05:11:47Z", "author": {"login": "macfarla"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMJdyHgH2gAyMzg2OTY3NzAzOmIxNDc0ODIwMzg4MzVkNzUxZTBiYzdmNjhhMjVkNTI1NDNjOTY0Y2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM0azngFqTM3MzI3ODcwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b147482038835d751e0bc7f68a25d52543c964cf", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/b147482038835d751e0bc7f68a25d52543c964cf", "committedDate": "2020-03-10T02:54:51Z", "message": "first draft\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb3f44c46fe46ca73e67b97b8579f3c2d5cb255e", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/cb3f44c46fe46ca73e67b97b8579f3c2d5cb255e", "committedDate": "2020-03-10T03:54:59Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into validator-duties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ed75ac732ff62ef736656f21a13fe1b8f44c111", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/3ed75ac732ff62ef736656f21a13fe1b8f44c111", "committedDate": "2020-03-10T23:04:32Z", "message": "draft of validator data provider\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16ea454951fb72b61d177a8583a3fc81063f27bd", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/16ea454951fb72b61d177a8583a3fc81063f27bd", "committedDate": "2020-03-10T23:04:41Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into validator-duties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "125b8e18c2a7c1042294ed7058a970787ab1413d", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/125b8e18c2a7c1042294ed7058a970787ab1413d", "committedDate": "2020-03-11T03:57:59Z", "message": "making a mess\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "539ffa94513a79d220dc1672f41f075f88a5ca0a", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/539ffa94513a79d220dc1672f41f075f88a5ca0a", "committedDate": "2020-03-11T04:04:02Z", "message": "merge\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "414997436e55bc0bb83ed371d7d256819ea7e344", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/414997436e55bc0bb83ed371d7d256819ea7e344", "committedDate": "2020-03-11T07:42:17Z", "message": "added ValidatorRequest and BLSPubKeyDeserializer\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd8e8f0b8b137ede066beb1e3bb2e2949db8492d", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/bd8e8f0b8b137ede066beb1e3bb2e2949db8492d", "committedDate": "2020-03-11T08:51:59Z", "message": "messy draft\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1052d4b301bbbc01ecf83918e78035324277b3de", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/1052d4b301bbbc01ecf83918e78035324277b3de", "committedDate": "2020-03-11T09:26:30Z", "message": "added tests\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de62e970565787717e34dfff60c655df9ec63415", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/de62e970565787717e34dfff60c655df9ec63415", "committedDate": "2020-03-11T22:07:09Z", "message": "merge\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efe17e2b089e88106ce9f8176a048ca49d329ef9", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/efe17e2b089e88106ce9f8176a048ca49d329ef9", "committedDate": "2020-03-11T22:15:14Z", "message": "rename to match the new world\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac96626c6b8a321ab0fed06ecfb4ad14fcf67329", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/ac96626c6b8a321ab0fed06ecfb4ad14fcf67329", "committedDate": "2020-03-11T22:49:12Z", "message": "tests for chain provider\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d33ceea6baa76d14426768cf4be8365408405df", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/6d33ceea6baa76d14426768cf4be8365408405df", "committedDate": "2020-03-11T23:27:33Z", "message": "merge\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da962a1bf31cb8c5a4d1292f2e96d3077aab1a60", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/da962a1bf31cb8c5a4d1292f2e96d3077aab1a60", "committedDate": "2020-03-11T23:29:46Z", "message": "unneeded dep\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a139f24ab8b9df3694ec64e1f1b76669bfbf9bda", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/a139f24ab8b9df3694ec64e1f1b76669bfbf9bda", "committedDate": "2020-03-11T23:30:25Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into validator-duties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjAzODM5", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373203839", "createdAt": "2020-03-12T00:04:29Z", "commit": {"oid": "a139f24ab8b9df3694ec64e1f1b76669bfbf9bda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwMDowNDozMFrOF1NUPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwMDowNDozMFrOF1NUPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMzNzAyMw==", "bodyText": "We shouldn't need to use MockitoExtension because we're using the static mock method to create mocks.  We shouldn't actually have it even on the class path to force us to be consistent but somehow it snuck in...", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391337023", "createdAt": "2020-03-12T00:04:30Z", "author": {"login": "ajsutton"}, "path": "data/beaconrestapi/src/test/java/tech/pegasys/artemis/beaconrestapi/handlers/validator/GetValidatorDutiesTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi.handlers.validator;\n+\n+import static javax.servlet.http.HttpServletResponse.SC_NO_CONTENT;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import io.javalin.http.Context;\n+import java.util.Optional;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import tech.pegasys.artemis.api.ChainDataProvider;\n+import tech.pegasys.artemis.provider.JsonProvider;\n+\n+@ExtendWith(MockitoExtension.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a139f24ab8b9df3694ec64e1f1b76669bfbf9bda"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88913d9971d3454779d7dc75c55d77e37564a48", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/a88913d9971d3454779d7dc75c55d77e37564a48", "committedDate": "2020-03-12T01:14:12Z", "message": "post\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3175e675ae76cd0b625bdb4b505a8430decbd7b", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/c3175e675ae76cd0b625bdb4b505a8430decbd7b", "committedDate": "2020-03-12T02:42:54Z", "message": "added tests\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4603d5e94b2330a23455ad63ddd19c11f57dbbc8", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/4603d5e94b2330a23455ad63ddd19c11f57dbbc8", "committedDate": "2020-03-12T03:10:06Z", "message": "catch json mapping ex\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb472fa3e69ba49d72de3288990d8ecf0a30ae31", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/fb472fa3e69ba49d72de3288990d8ecf0a30ae31", "committedDate": "2020-03-12T03:17:41Z", "message": "cracked the future\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a45ccd505377c05b1e3e1ad71fa229502d93ff21", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/a45ccd505377c05b1e3e1ad71fa229502d93ff21", "committedDate": "2020-03-12T03:20:21Z", "message": "post\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b215634a30b75185701455780efb92be0c94bebd", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/b215634a30b75185701455780efb92be0c94bebd", "committedDate": "2020-03-12T03:24:10Z", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into validator-duties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/9ef35cd95e2f4677db6ab584c66ec29db1ed8b77", "committedDate": "2020-03-12T03:26:30Z", "message": "removed unused code\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da251125b0c3c527b5f67146dde904fb83b82345", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/da251125b0c3c527b5f67146dde904fb83b82345", "committedDate": "2020-03-12T03:56:27Z", "message": "nullable fields\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b31071ecba8bf6d60ddb75b9e925bb95d574c942", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/b31071ecba8bf6d60ddb75b9e925bb95d574c942", "committedDate": "2020-03-12T03:59:50Z", "message": "field names\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e52b8abc91d6158c0a4093c51c3a5ea659776d", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/49e52b8abc91d6158c0a4093c51c3a5ea659776d", "committedDate": "2020-03-12T04:02:02Z", "message": "alpha\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjY1NzQ4", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373265748", "createdAt": "2020-03-12T04:02:32Z", "commit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowMjozMlrOF1QlSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowMjozMlrOF1QlSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTM5MDUzOA==", "bodyText": "nit: it was alphabetic order...", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391390538", "createdAt": "2020-03-12T04:02:32Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/RestApiConstants.java", "diffHunk": "@@ -23,9 +23,9 @@\n   public static final String COMMITTEE_INDEX = \"committee_index\";\n \n   public static final String TAG_BEACON = \"Beacon\";\n+  public static final String TAG_VALIDATOR = \"Validator\";\n   public static final String TAG_NODE = \"Node\";\n   public static final String TAG_NETWORK = \"Network\";\n-  public static final String TAG_VALIDATOR = \"Validator\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjY1ODU1", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373265855", "createdAt": "2020-03-12T04:02:58Z", "commit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowMjo1OFrOF1Qlkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowMjo1OFrOF1Qlkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTM5MDYxMA==", "bodyText": "PostValidatorDuties...", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391390610", "createdAt": "2020-03-12T04:02:58Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/handlers/validator/GetValidatorDuties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi.handlers.validator;\n+\n+import static javax.servlet.http.HttpServletResponse.SC_BAD_REQUEST;\n+import static javax.servlet.http.HttpServletResponse.SC_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.CacheControlUtils.CACHE_NONE;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.NO_CONTENT_PRE_GENESIS;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_INTERNAL_ERROR;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_OK;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.TAG_VALIDATOR;\n+\n+import com.fasterxml.jackson.databind.JsonMappingException;\n+import io.javalin.core.util.Header;\n+import io.javalin.http.Context;\n+import io.javalin.http.Handler;\n+import io.javalin.plugin.openapi.annotations.HttpMethod;\n+import io.javalin.plugin.openapi.annotations.OpenApi;\n+import io.javalin.plugin.openapi.annotations.OpenApiContent;\n+import io.javalin.plugin.openapi.annotations.OpenApiRequestBody;\n+import io.javalin.plugin.openapi.annotations.OpenApiResponse;\n+import java.util.List;\n+import tech.pegasys.artemis.api.ChainDataProvider;\n+import tech.pegasys.artemis.api.schema.ValidatorDuties;\n+import tech.pegasys.artemis.api.schema.ValidatorsRequest;\n+import tech.pegasys.artemis.beaconrestapi.schema.BadRequest;\n+import tech.pegasys.artemis.provider.JsonProvider;\n+import tech.pegasys.artemis.util.async.SafeFuture;\n+\n+public class GetValidatorDuties implements Handler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjY2MDg0", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373266084", "createdAt": "2020-03-12T04:04:00Z", "commit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowNDowMFrOF1QmTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowNDowMFrOF1QmTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTM5MDc5Nw==", "bodyText": "you can add a description here that can be handy:\ndescription = \"```\\n{\\n  \\\"epoch\\\": (uint64),\\n  \\\"pubkeys\\\": [(Bytes48 as Hex String)]\\n}\\n```\"", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391390797", "createdAt": "2020-03-12T04:04:00Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/handlers/validator/GetValidatorDuties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi.handlers.validator;\n+\n+import static javax.servlet.http.HttpServletResponse.SC_BAD_REQUEST;\n+import static javax.servlet.http.HttpServletResponse.SC_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.CacheControlUtils.CACHE_NONE;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.NO_CONTENT_PRE_GENESIS;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_INTERNAL_ERROR;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_OK;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.TAG_VALIDATOR;\n+\n+import com.fasterxml.jackson.databind.JsonMappingException;\n+import io.javalin.core.util.Header;\n+import io.javalin.http.Context;\n+import io.javalin.http.Handler;\n+import io.javalin.plugin.openapi.annotations.HttpMethod;\n+import io.javalin.plugin.openapi.annotations.OpenApi;\n+import io.javalin.plugin.openapi.annotations.OpenApiContent;\n+import io.javalin.plugin.openapi.annotations.OpenApiRequestBody;\n+import io.javalin.plugin.openapi.annotations.OpenApiResponse;\n+import java.util.List;\n+import tech.pegasys.artemis.api.ChainDataProvider;\n+import tech.pegasys.artemis.api.schema.ValidatorDuties;\n+import tech.pegasys.artemis.api.schema.ValidatorsRequest;\n+import tech.pegasys.artemis.beaconrestapi.schema.BadRequest;\n+import tech.pegasys.artemis.provider.JsonProvider;\n+import tech.pegasys.artemis.util.async.SafeFuture;\n+\n+public class GetValidatorDuties implements Handler {\n+  private final ChainDataProvider provider;\n+\n+  public GetValidatorDuties(final ChainDataProvider provider, final JsonProvider jsonProvider) {\n+    this.provider = provider;\n+    this.jsonProvider = jsonProvider;\n+  }\n+\n+  public static final String ROUTE = \"/validator/duties\";\n+  private final JsonProvider jsonProvider;\n+\n+  @OpenApi(\n+      path = ROUTE,\n+      method = HttpMethod.POST,\n+      summary = \"Returns validator duties that match the specified query.\",\n+      tags = {TAG_VALIDATOR},\n+      description = \"Returns validator duties for the given epoch.\",\n+      requestBody = @OpenApiRequestBody(content = @OpenApiContent(from = ValidatorsRequest.class)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjY2MTY0", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373266164", "createdAt": "2020-03-12T04:04:20Z", "commit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowNDoyMFrOF1QmjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDowNDoyMFrOF1QmjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTM5MDg2MA==", "bodyText": "add bad_request", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391390860", "createdAt": "2020-03-12T04:04:20Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/handlers/validator/GetValidatorDuties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2020 ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package tech.pegasys.artemis.beaconrestapi.handlers.validator;\n+\n+import static javax.servlet.http.HttpServletResponse.SC_BAD_REQUEST;\n+import static javax.servlet.http.HttpServletResponse.SC_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.CacheControlUtils.CACHE_NONE;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.NO_CONTENT_PRE_GENESIS;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_INTERNAL_ERROR;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_NO_CONTENT;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.RES_OK;\n+import static tech.pegasys.artemis.beaconrestapi.RestApiConstants.TAG_VALIDATOR;\n+\n+import com.fasterxml.jackson.databind.JsonMappingException;\n+import io.javalin.core.util.Header;\n+import io.javalin.http.Context;\n+import io.javalin.http.Handler;\n+import io.javalin.plugin.openapi.annotations.HttpMethod;\n+import io.javalin.plugin.openapi.annotations.OpenApi;\n+import io.javalin.plugin.openapi.annotations.OpenApiContent;\n+import io.javalin.plugin.openapi.annotations.OpenApiRequestBody;\n+import io.javalin.plugin.openapi.annotations.OpenApiResponse;\n+import java.util.List;\n+import tech.pegasys.artemis.api.ChainDataProvider;\n+import tech.pegasys.artemis.api.schema.ValidatorDuties;\n+import tech.pegasys.artemis.api.schema.ValidatorsRequest;\n+import tech.pegasys.artemis.beaconrestapi.schema.BadRequest;\n+import tech.pegasys.artemis.provider.JsonProvider;\n+import tech.pegasys.artemis.util.async.SafeFuture;\n+\n+public class GetValidatorDuties implements Handler {\n+  private final ChainDataProvider provider;\n+\n+  public GetValidatorDuties(final ChainDataProvider provider, final JsonProvider jsonProvider) {\n+    this.provider = provider;\n+    this.jsonProvider = jsonProvider;\n+  }\n+\n+  public static final String ROUTE = \"/validator/duties\";\n+  private final JsonProvider jsonProvider;\n+\n+  @OpenApi(\n+      path = ROUTE,\n+      method = HttpMethod.POST,\n+      summary = \"Returns validator duties that match the specified query.\",\n+      tags = {TAG_VALIDATOR},\n+      description = \"Returns validator duties for the given epoch.\",\n+      requestBody = @OpenApiRequestBody(content = @OpenApiContent(from = ValidatorsRequest.class)),\n+      responses = {\n+        @OpenApiResponse(status = RES_OK, content = @OpenApiContent(from = ValidatorDuties.class)),\n+        @OpenApiResponse(status = RES_NO_CONTENT, description = NO_CONTENT_PRE_GENESIS),\n+        @OpenApiResponse(status = RES_INTERNAL_ERROR)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef35cd95e2f4677db6ab584c66ec29db1ed8b77"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa899b826563251644b9682e6329f86a7aeaf21b", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/aa899b826563251644b9682e6329f86a7aeaf21b", "committedDate": "2020-03-12T04:37:42Z", "message": "Tests\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76d707d15e71177c1a0676c90a4c1cfe37786f4b", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/76d707d15e71177c1a0676c90a4c1cfe37786f4b", "committedDate": "2020-03-12T04:44:06Z", "message": "PR review\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjc3MTQz", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373277143", "createdAt": "2020-03-12T04:51:20Z", "commit": {"oid": "76d707d15e71177c1a0676c90a4c1cfe37786f4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDo1MToyMFrOF1RLDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNDo1MToyMFrOF1RLDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQwMDIwNQ==", "bodyText": "int: I'm thinking it might be better to group the POSTs down the bottom initially, potentially at some point we might break them into separate setup functions...", "url": "https://github.com/ConsenSys/teku/pull/1362#discussion_r391400205", "createdAt": "2020-03-12T04:51:20Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/artemis/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -122,6 +123,7 @@ private void addBeaconHandlers(final DataProvider dataProvider) {\n \n   private void addValidatorHandlers(DataProvider dataProvider) {\n     ChainDataProvider provider = dataProvider.getChainDataProvider();\n+    app.post(PostValidatorDuties.ROUTE, new PostValidatorDuties(provider, jsonProvider));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76d707d15e71177c1a0676c90a4c1cfe37786f4b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e6d974933c2483930c700197e0feb6f558d47df", "author": {"user": {"login": "macfarla", "name": "Sally MacFarlane"}}, "url": "https://github.com/ConsenSys/teku/commit/6e6d974933c2483930c700197e0feb6f558d47df", "committedDate": "2020-03-12T04:57:02Z", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjc4NzA5", "url": "https://github.com/ConsenSys/teku/pull/1362#pullrequestreview-373278709", "createdAt": "2020-03-12T04:57:32Z", "commit": {"oid": "76d707d15e71177c1a0676c90a4c1cfe37786f4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3968, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}