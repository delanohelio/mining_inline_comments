{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NjQ0Mjcz", "number": 1513, "title": "Remove FinalizedCheckpointEvent", "bodyText": "PR Description\n\nRemoves FinalizedCheckpointEvent.\nUses the FinalizedCheckpointChannel (which is renamed from FinalizedCheckpointEventChannel) to notify objects of the new finalized checkpoint.", "createdAt": "2020-03-31T22:30:36Z", "url": "https://github.com/ConsenSys/teku/pull/1513", "merged": true, "mergeCommit": {"oid": "39d060df8d20cc3080e4c50d7f816c93b7575b3e"}, "closed": true, "closedAt": "2020-04-01T00:46:49Z", "author": {"login": "cemozerr"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTK1dQgH2gAyMzk2NjQ0MjczOjY0ZTM4NDJiZDBiY2U4YWM3YjI4YTE2MDI4ZjkwNmMwMTI1MGM3Y2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTMjxzgH2gAyMzk2NjQ0MjczOjQwZTJhN2RmNWM1OWVmYjJlYzI5MmM0OTUwNjkyYjdlN2NjNTAzZTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64e3842bd0bce8ac7b28a16028f906c01250c7ca", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/64e3842bd0bce8ac7b28a16028f906c01250c7ca", "committedDate": "2020-03-31T22:28:05Z", "message": "Remove FinalizedCheckpointEvent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTUxNTgw", "url": "https://github.com/ConsenSys/teku/pull/1513#pullrequestreview-385151580", "createdAt": "2020-03-31T22:33:53Z", "commit": {"oid": "64e3842bd0bce8ac7b28a16028f906c01250c7ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjozMzo1M1rOF-qo1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjozMzo1M1rOF-qo1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI1NDYxMw==", "bodyText": "I had to pull out the creation of pendingAttestations to here so that I can do the subscription to event channel on this level rather than passing event channels to modules below. Not sure whether I should move the initialization of all the objects in AttestationManager, i.e. AttestationProcessor and FutureAttestations to this level, so that they all can follow the dependency injection model.", "url": "https://github.com/ConsenSys/teku/pull/1513#discussion_r401254613", "createdAt": "2020-03-31T22:33:53Z", "author": {"login": "cemozerr"}, "path": "services/beaconchain/src/main/java/tech/pegasys/artemis/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -271,8 +275,12 @@ private void initPreGenesisDepositHandler() {\n   }\n \n   private void initAttestationPropagationManager() {\n-    attestationManager = AttestationManager.create(eventBus, recentChainData);\n-    eventChannels.subscribe(SlotEventsChannel.class, attestationManager);\n+    final PendingPool<DelayableAttestation> pendingAttestations =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64e3842bd0bce8ac7b28a16028f906c01250c7ca"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5992d2ba850b7f3656218fd532dffa01b1a2e4a1", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/5992d2ba850b7f3656218fd532dffa01b1a2e4a1", "committedDate": "2020-03-31T22:35:59Z", "message": "Merge branch 'master' into removeFinalizedCheckpointEvent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7af136dc19c2c680965425eb352aa082ff140038", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/7af136dc19c2c680965425eb352aa082ff140038", "committedDate": "2020-03-31T22:47:44Z", "message": "Merge branch 'master' into removeFinalizedCheckpointEvent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23ed7f49cbec51635872ec22e80a60f8be04e18", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/d23ed7f49cbec51635872ec22e80a60f8be04e18", "committedDate": "2020-03-31T23:16:35Z", "message": "Merge branch 'master' into removeFinalizedCheckpointEvent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTc1MDc3", "url": "https://github.com/ConsenSys/teku/pull/1513#pullrequestreview-385175077", "createdAt": "2020-03-31T23:35:20Z", "commit": {"oid": "d23ed7f49cbec51635872ec22e80a60f8be04e18"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMzozNToyMFrOF-r4CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMzo1NzozNFrOF-sSgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI3NDg4OA==", "bodyText": "Seems weird to have two public methods that do the exact same thing.  And this new one seems to be unused... :)", "url": "https://github.com/ConsenSys/teku/pull/1513#discussion_r401274888", "createdAt": "2020-03-31T23:35:20Z", "author": {"login": "ajsutton"}, "path": "ethereum/datastructures/src/main/java/tech/pegasys/artemis/datastructures/state/Checkpoint.java", "diffHunk": "@@ -124,6 +124,10 @@ public UnsignedLong getEpochStartSlot() {\n     return compute_start_slot_at_epoch(getEpoch());\n   }\n \n+  public UnsignedLong getFinalizedSlot() {\n+    return getEpochStartSlot();\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d23ed7f49cbec51635872ec22e80a60f8be04e18"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI4MTY2Ng==", "bodyText": "I'm a fan of pulling the creation of stuff upward more and doing more dependency injection.  At some point we'll need to refactor BeaconChainController so we don't literally have one class creating the entire world but the idea of having a few dedicated builder classes at the top that build things and then inject them where needed makes a lot of sense.", "url": "https://github.com/ConsenSys/teku/pull/1513#discussion_r401281666", "createdAt": "2020-03-31T23:57:34Z", "author": {"login": "ajsutton"}, "path": "services/beaconchain/src/main/java/tech/pegasys/artemis/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -271,8 +275,12 @@ private void initPreGenesisDepositHandler() {\n   }\n \n   private void initAttestationPropagationManager() {\n-    attestationManager = AttestationManager.create(eventBus, recentChainData);\n-    eventChannels.subscribe(SlotEventsChannel.class, attestationManager);\n+    final PendingPool<DelayableAttestation> pendingAttestations =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI1NDYxMw=="}, "originalCommit": {"oid": "64e3842bd0bce8ac7b28a16028f906c01250c7ca"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e2a7df5c59efb2ec292c4950692b7e7cc503e2", "author": {"user": {"login": "cemozerr", "name": "Cem Ozer"}}, "url": "https://github.com/ConsenSys/teku/commit/40e2a7df5c59efb2ec292c4950692b7e7cc503e2", "committedDate": "2020-04-01T00:28:35Z", "message": "Dependency inject member variables"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4427, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}