{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNzQ2NzAw", "number": 2263, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzoxMjowMlrOEJ6byg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzo1NToxNVrOEJ648g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODMwMDI2OnYy", "diffSide": "RIGHT", "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzoxMjowMlrOGqqC7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzoxNDoxOFrOGqqEzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4MjI1NQ==", "bodyText": "Can we avoid creating BeaconRestApi entirely if it's disabled?", "url": "https://github.com/ConsenSys/teku/pull/2263#discussion_r447382255", "createdAt": "2020-06-30T03:12:02Z", "author": {"login": "ajsutton"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -144,17 +145,23 @@ public BeaconRestApi(final DataProvider dataProvider, final TekuConfiguration co\n               config.logIfServerNotStarted = false;\n               config.showJavalinBanner = false;\n             });\n+    restApiEnabled = configuration.isRestApiEnabled();\n     initialize(dataProvider, configuration);\n   }\n \n   BeaconRestApi(\n       final DataProvider dataProvider, final TekuConfiguration configuration, final Javalin app) {\n     this.app = app;\n+    this.restApiEnabled = configuration.isRestApiEnabled();\n     initialize(dataProvider, configuration);\n   }\n \n   public void start() {\n-    app.start();\n+    if (restApiEnabled) {\n+      app.start();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228eb3d826304c6eb614146ef35c99ad237f57a2"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4MjczNQ==", "bodyText": "i'll see how ugly it gets, I was trying to minimise the change but maybe.", "url": "https://github.com/ConsenSys/teku/pull/2263#discussion_r447382735", "createdAt": "2020-06-30T03:14:18Z", "author": {"login": "rolfyone"}, "path": "data/beaconrestapi/src/main/java/tech/pegasys/teku/beaconrestapi/BeaconRestApi.java", "diffHunk": "@@ -144,17 +145,23 @@ public BeaconRestApi(final DataProvider dataProvider, final TekuConfiguration co\n               config.logIfServerNotStarted = false;\n               config.showJavalinBanner = false;\n             });\n+    restApiEnabled = configuration.isRestApiEnabled();\n     initialize(dataProvider, configuration);\n   }\n \n   BeaconRestApi(\n       final DataProvider dataProvider, final TekuConfiguration configuration, final Javalin app) {\n     this.app = app;\n+    this.restApiEnabled = configuration.isRestApiEnabled();\n     initialize(dataProvider, configuration);\n   }\n \n   public void start() {\n-    app.start();\n+    if (restApiEnabled) {\n+      app.start();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4MjI1NQ=="}, "originalCommit": {"oid": "228eb3d826304c6eb614146ef35c99ad237f57a2"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODM3NDkwOnYy", "diffSide": "RIGHT", "path": "services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzo1NToxNVrOGqquCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzo1NToxNVrOGqquCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM5MzI4OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private volatile Optional<BeaconRestApi> beaconRestAPI;\n          \n          \n            \n              private volatile Optional<BeaconRestApi> beaconRestAPI = Optional.empty();", "url": "https://github.com/ConsenSys/teku/pull/2263#discussion_r447393289", "createdAt": "2020-06-30T03:55:15Z", "author": {"login": "ajsutton"}, "path": "services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -117,7 +117,7 @@\n   private volatile BlockImporter blockImporter;\n   private volatile RecentChainData recentChainData;\n   private volatile Eth2Network p2pNetwork;\n-  private volatile BeaconRestApi beaconRestAPI;\n+  private volatile Optional<BeaconRestApi> beaconRestAPI;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b40a39b7458bd0a3a7bb8c0d0055da3c6f9529f9"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3491, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}