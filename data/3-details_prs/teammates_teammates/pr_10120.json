{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMTA0NDcw", "number": 10120, "title": "[#10102] Add participant comment to student session result", "bodyText": "Fixes #10102\n\nOutline of Solution\nAdd tm-comment-row in tm-student-view-responses.\nQuestions\n\n\nNot sure what visibility options to pass in for questionShowResponsesTo. Should the comment's visibility follow the question's visibility?\n\n\nIs it correct to use CommentRowMode.EDIT for the mode? There isn't a VIEW mode as far as I can tell.", "createdAt": "2020-05-26T09:57:01Z", "url": "https://github.com/TEAMMATES/teammates/pull/10120", "merged": true, "mergeCommit": {"oid": "6e993c984f466f04d2ad683ba9ac14a86fc8782b"}, "closed": true, "closedAt": "2020-05-28T06:07:07Z", "author": {"login": "ccyccyccy"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclE4zugFqTQxODMxMDEyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclng6yAFqTQxOTc5OTU3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzEwMTI0", "url": "https://github.com/TEAMMATES/teammates/pull/10120#pullrequestreview-418310124", "createdAt": "2020-05-26T13:42:54Z", "commit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzo0Mjo1NFrOGae2mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzo0Mjo1NFrOGae2mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ==", "bodyText": "Is it possible to move this to the ts file instead? Genuine question, I'm not that familiar with Angular haha", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430421659", "createdAt": "2020-05-26T13:42:54Z", "author": {"login": "madanalogy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "889651a3c22cf6247c7fcecd6fde23b4b08177de", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/889651a3c22cf6247c7fcecd6fde23b4b08177de", "committedDate": "2020-05-27T08:31:49Z", "message": "Convert to use pipes"}, "afterCommit": {"oid": "e6079aaf3bc1d261f34fe5ff341fcb3db3f0d57f", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e6079aaf3bc1d261f34fe5ff341fcb3db3f0d57f", "committedDate": "2020-05-27T08:48:15Z", "message": "Convert to use pipes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a13944710b561be2f8ed588310e90afbd7a017", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/82a13944710b561be2f8ed588310e90afbd7a017", "committedDate": "2020-05-28T03:51:09Z", "message": "Add participant comment to student session result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31abf1290c9c4ef01ccb28a880a695ede5fce623", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/31abf1290c9c4ef01ccb28a880a695ede5fce623", "committedDate": "2020-05-28T03:51:09Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "520984830897fd617dd92d60dcf3fdc1f4e1b748", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/520984830897fd617dd92d60dcf3fdc1f4e1b748", "committedDate": "2020-05-28T03:51:09Z", "message": "Convert to use pipes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8293acb07ee7546bb5968f65a0f46bfa78a130be", "committedDate": "2020-05-28T03:51:09Z", "message": "Add visibility for comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "564cc08f84377dcb0a914e5a00a3e6030f1a05cd", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/564cc08f84377dcb0a914e5a00a3e6030f1a05cd", "committedDate": "2020-05-28T03:50:23Z", "message": "Add visibility for comments"}, "afterCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8293acb07ee7546bb5968f65a0f46bfa78a130be", "committedDate": "2020-05-28T03:51:09Z", "message": "Add visibility for comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NzgwNTkx", "url": "https://github.com/TEAMMATES/teammates/pull/10120#pullrequestreview-419780591", "createdAt": "2020-05-28T05:09:05Z", "commit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTowOTowNVrOGblzmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNToxMDowNlrOGbl0ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDE1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              CommentRowMode: typeof CommentRowMode = CommentRowMode;\n          \n          \n            \n              // enum\n          \n          \n            \n              CommentRowMode: typeof CommentRowMode = CommentRowMode;", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584153", "createdAt": "2020-05-28T05:09:05Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "diffHunk": "@@ -10,11 +11,9 @@ import { FeedbackQuestionDetails, FeedbackQuestionType, ResponseOutput } from '.\n   styleUrls: ['./student-view-responses.component.scss'],\n })\n export class StudentViewResponsesComponent implements OnInit {\n+  CommentRowMode: typeof CommentRowMode = CommentRowMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDI5NA==", "bodyText": "I can we avoid using !?", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584294", "createdAt": "2020-05-28T05:09:42Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "diffHunk": "@@ -10,11 +11,9 @@ import { FeedbackQuestionDetails, FeedbackQuestionType, ResponseOutput } from '.\n   styleUrls: ['./student-view-responses.component.scss'],\n })\n export class StudentViewResponsesComponent implements OnInit {\n+  CommentRowMode: typeof CommentRowMode = CommentRowMode;\n \n-  @Input() questionDetails: FeedbackQuestionDetails = {\n-    questionType: FeedbackQuestionType.TEXT,\n-    questionText: '',\n-  };\n+  @Input() feedbackQuestion!: FeedbackQuestion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDM5NA==", "bodyText": "Technically this should be true", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584394", "createdAt": "2020-05-28T05:10:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -13,7 +13,24 @@\n           </tr>\n           <tr>\n             <td>\n-              <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n+              <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"feedbackQuestion.questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n+            </td>\n+          </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c45723af0c168b07093d0d7740d1a8edcb68bed", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4c45723af0c168b07093d0d7740d1a8edcb68bed", "committedDate": "2020-05-28T05:17:24Z", "message": "Fix issues raised by review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa38a4ab979a1763da6922ad86c1cb6cae8ace45", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/aa38a4ab979a1763da6922ad86c1cb6cae8ace45", "committedDate": "2020-05-28T05:23:38Z", "message": "Fix lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Nzk5NTcz", "url": "https://github.com/TEAMMATES/teammates/pull/10120#pullrequestreview-419799573", "createdAt": "2020-05-28T06:03:32Z", "commit": {"oid": "aa38a4ab979a1763da6922ad86c1cb6cae8ace45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4415, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}