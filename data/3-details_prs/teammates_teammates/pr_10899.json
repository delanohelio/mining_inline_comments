{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MTc1NTc0", "number": 10899, "title": "[#10825] Remove Const.StatusMessages, Const.StudentsLogicConst, Const.StatusCodes", "bodyText": "Second part of #10825\n\nConst.StatusMessages: most items are unused and thus removed, but more importantly, we don't really have a reason to congregate all status messages in one place anymore. The ones that are still used are moved to their own classes.\nConst.StudentsLogicConst: almost everything in here are confined to StudentsLogic, thus it is better to place the constants there. Only SECTION_SIZE_LIMIT are used across different classes/layers.\nConst.StatusCodes:\n\nThere is no reason to have specific BACKDOOR_STATUS_* because it only functions as a switch for whether the API call succeeds or not; a simple boolean suffices as the replacement.\nNULL_PARAMETER and DBLEVEL_NULL_INPUT provides no additional information; it is as good as not having any status message.\nNULL_HTTP_PARAMETER and NULL_BODY_PARAMETER have only one usage each. On a side note, request body is not exactly a \"parameter\".", "createdAt": "2020-12-28T17:35:15Z", "url": "https://github.com/TEAMMATES/teammates/pull/10899", "merged": true, "mergeCommit": {"oid": "77fc94953a27d0657fa12324f365c47eb68aa98b"}, "closed": true, "closedAt": "2021-01-08T15:45:59Z", "author": {"login": "wkurniawan07"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdrf2C2AFqTU2MDI5Mjg1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABduJsBjgBqjQxODQ2NDQ1OTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjkyODU2", "url": "https://github.com/TEAMMATES/teammates/pull/10899#pullrequestreview-560292856", "createdAt": "2020-12-31T08:30:00Z", "commit": {"oid": "ee0d9f1debdab3ab231e38ed85d18742b452a0d3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQwODozMDowMFrOIM7dlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQwODo0MTozMlrOIM7luQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyODA1NA==", "bodyText": "Why not return a boolean here instead of throwing an exception?", "url": "https://github.com/TEAMMATES/teammates/pull/10899#discussion_r550428054", "createdAt": "2020-12-31T08:30:00Z", "author": {"login": "rrtheonlyone"}, "path": "src/test/java/teammates/test/AbstractBackDoor.java", "diffHunk": "@@ -260,11 +261,14 @@ public void removeDataBundle(DataBundle dataBundle) {\n     /**\n      * Puts searchable documents in data bundle into the datastore.\n      */\n-    public String putDocuments(DataBundle dataBundle) {\n+    public String putDocuments(DataBundle dataBundle) throws HttpRequestFailedException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee0d9f1debdab3ab231e38ed85d18742b452a0d3"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyODkwNA==", "bodyText": "Why is there a println here?", "url": "https://github.com/TEAMMATES/teammates/pull/10899#discussion_r550428904", "createdAt": "2020-12-31T08:35:11Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/BaseE2ETestCase.java", "diffHunk": "@@ -349,13 +350,25 @@ protected String getKeyForStudent(StudentAttributes student) {\n     }\n \n     @Override\n-    protected String doRemoveAndRestoreDataBundle(DataBundle testData) throws HttpRequestFailedException {\n-        return BACKDOOR.removeAndRestoreDataBundle(testData);\n+    protected boolean doRemoveAndRestoreDataBundle(DataBundle testData) {\n+        try {\n+            BACKDOOR.removeAndRestoreDataBundle(testData);\n+            return true;\n+        } catch (HttpRequestFailedException e) {\n+            System.out.println(TeammatesException.toStringWithStackTrace(e));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee0d9f1debdab3ab231e38ed85d18742b452a0d3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyODkzNg==", "bodyText": "same here", "url": "https://github.com/TEAMMATES/teammates/pull/10899#discussion_r550428936", "createdAt": "2020-12-31T08:35:18Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/BaseE2ETestCase.java", "diffHunk": "@@ -349,13 +350,25 @@ protected String getKeyForStudent(StudentAttributes student) {\n     }\n \n     @Override\n-    protected String doRemoveAndRestoreDataBundle(DataBundle testData) throws HttpRequestFailedException {\n-        return BACKDOOR.removeAndRestoreDataBundle(testData);\n+    protected boolean doRemoveAndRestoreDataBundle(DataBundle testData) {\n+        try {\n+            BACKDOOR.removeAndRestoreDataBundle(testData);\n+            return true;\n+        } catch (HttpRequestFailedException e) {\n+            System.out.println(TeammatesException.toStringWithStackTrace(e));\n+            return false;\n+        }\n     }\n \n     @Override\n-    protected String doPutDocuments(DataBundle testData) {\n-        return BACKDOOR.putDocuments(testData);\n+    protected boolean doPutDocuments(DataBundle testData) {\n+        try {\n+            BACKDOOR.putDocuments(testData);\n+            return true;\n+        } catch (HttpRequestFailedException e) {\n+            System.out.println(TeammatesException.toStringWithStackTrace(e));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee0d9f1debdab3ab231e38ed85d18742b452a0d3"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQzMDEzNw==", "bodyText": "This is not related to this PR but catching all Exception is rarely a good choice. It is much better to catch the specific ones that you know will be thrown and handle them.", "url": "https://github.com/TEAMMATES/teammates/pull/10899#discussion_r550430137", "createdAt": "2020-12-31T08:41:32Z", "author": {"login": "rrtheonlyone"}, "path": "src/test/java/teammates/test/BaseComponentTestCase.java", "diffHunk": "@@ -115,23 +114,25 @@ protected void removeAndRestoreTypicalDataBundle() {\n     }\n \n     @Override\n-    protected String doRemoveAndRestoreDataBundle(DataBundle dataBundle) {\n+    protected boolean doRemoveAndRestoreDataBundle(DataBundle dataBundle) {\n         try {\n             logic.removeDataBundle(dataBundle);\n             logic.persistDataBundle(dataBundle);\n-            return Const.StatusCodes.BACKDOOR_STATUS_SUCCESS;\n+            return true;\n         } catch (Exception e) {\n-            return Const.StatusCodes.BACKDOOR_STATUS_FAILURE + \": \" + TeammatesException.toStringWithStackTrace(e);\n+            System.out.println(TeammatesException.toStringWithStackTrace(e));\n+            return false;\n         }\n     }\n \n     @Override\n-    protected String doPutDocuments(DataBundle dataBundle) {\n+    protected boolean doPutDocuments(DataBundle dataBundle) {\n         try {\n             logic.putDocuments(dataBundle);\n-            return Const.StatusCodes.BACKDOOR_STATUS_SUCCESS;\n+            return true;\n         } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee0d9f1debdab3ab231e38ed85d18742b452a0d3"}, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2fd2120e9000f16b08b57ce41603c9fa36ecc5c", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c2fd2120e9000f16b08b57ce41603c9fa36ecc5c", "committedDate": "2020-12-28T17:24:07Z", "message": "Remove Const.StatusCodes"}, "afterCommit": {"oid": "1f0a714762d8cdccf0aec59965f45d8cd4341fb1", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1f0a714762d8cdccf0aec59965f45d8cd4341fb1", "committedDate": "2021-01-02T23:19:03Z", "message": "Remove Const.StatusCodes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f0a714762d8cdccf0aec59965f45d8cd4341fb1", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1f0a714762d8cdccf0aec59965f45d8cd4341fb1", "committedDate": "2021-01-02T23:19:03Z", "message": "Remove Const.StatusCodes"}, "afterCommit": {"oid": "2c1e99330dd2b605117434e6c30bc3aeee725d66", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2c1e99330dd2b605117434e6c30bc3aeee725d66", "committedDate": "2021-01-02T23:52:57Z", "message": "Remove Const.StatusCodes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNjc4NTI5", "url": "https://github.com/TEAMMATES/teammates/pull/10899#pullrequestreview-560678529", "createdAt": "2021-01-03T08:47:31Z", "commit": {"oid": "2c1e99330dd2b605117434e6c30bc3aeee725d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c1e99330dd2b605117434e6c30bc3aeee725d66", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2c1e99330dd2b605117434e6c30bc3aeee725d66", "committedDate": "2021-01-02T23:52:57Z", "message": "Remove Const.StatusCodes"}, "afterCommit": {"oid": "6a43908061a4fab8b09345ca116f153b6478dd1a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6a43908061a4fab8b09345ca116f153b6478dd1a", "committedDate": "2021-01-04T01:17:34Z", "message": "Remove Const.StatusCodes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MTQ0NjI1", "url": "https://github.com/TEAMMATES/teammates/pull/10899#pullrequestreview-564144625", "createdAt": "2021-01-08T10:11:12Z", "commit": {"oid": "6a43908061a4fab8b09345ca116f153b6478dd1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "421ab6686bc2cba3183fea503cf894c8989ae9c9", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/421ab6686bc2cba3183fea503cf894c8989ae9c9", "committedDate": "2021-01-08T14:34:45Z", "message": "Remove Const.StatusMessages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93cfbbea655991d80a89f369bc02aeac45ab405e", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/93cfbbea655991d80a89f369bc02aeac45ab405e", "committedDate": "2021-01-08T14:34:45Z", "message": "Remove Const.StudentsLogicConst"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555c719884cf73cf7caab20a9b70c3d4e160507c", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/555c719884cf73cf7caab20a9b70c3d4e160507c", "committedDate": "2021-01-08T14:34:45Z", "message": "Remove usage of BACKDOOR_STATUS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12b4e157902339f5ec5abdb9f86266f3b996507a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/12b4e157902339f5ec5abdb9f86266f3b996507a", "committedDate": "2021-01-08T14:34:45Z", "message": "Remove Const.StatusCodes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a43908061a4fab8b09345ca116f153b6478dd1a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6a43908061a4fab8b09345ca116f153b6478dd1a", "committedDate": "2021-01-04T01:17:34Z", "message": "Remove Const.StatusCodes"}, "afterCommit": {"oid": "12b4e157902339f5ec5abdb9f86266f3b996507a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/12b4e157902339f5ec5abdb9f86266f3b996507a", "committedDate": "2021-01-08T14:34:45Z", "message": "Remove Const.StatusCodes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4186, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}