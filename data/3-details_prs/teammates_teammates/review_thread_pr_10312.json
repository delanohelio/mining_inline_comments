{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MzU1Nzc5", "number": 10312, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMzoxNToxMFrOEOghvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDozNjoxMlrOEOhacQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjQ4NDQ3OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMzoxNToxMFrOGxsqCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNToyNjozM1rOGxuzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ==", "bodyText": "Shouldn't we just remove this line?\n\n  \n    \n      teammates/src/web/app/pages-session/session-submission-page/session-submission-page.component.ts\n    \n    \n        Lines 147 to 150\n      in\n      5deb81a\n    \n    \n    \n    \n\n        \n          \n           if (this.previewAsPerson) { \n        \n\n        \n          \n             // disable submission in the preview mode \n        \n\n        \n          \n             this.isSubmissionFormsDisabled = true; \n        \n\n        \n          \n           }", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454765065", "createdAt": "2020-07-15T03:15:10Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "diffHunk": "@@ -77,7 +77,7 @@ <h4>Previewing Session as\n <tm-question-submission-form *ngFor=\"let questionSubmissionForm of questionSubmissionForms; let i = index; trackBy: trackQuestionSubmissionFormByFn\"\n                              [attr.id]=\"questionSubmissionForm.feedbackQuestionId\"\n                              [(formModel)]=\"questionSubmissionForms[i]\" [formMode]=\"getQuestionSubmissionFormMode(questionSubmissionForm)\"\n-                             [isDisabled]=\"isSubmissionFormsDisabled\"\n+                             [isDisabled]=\"isSubmissionFormsDisabled && !this.previewAsPerson\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3ab8e3ce9caf5b1e43871b93cb0b7c437e57d26"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NDAzMQ==", "bodyText": "Removing that will cause the \"Submit Feedback\" button to be enabled", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454784031", "createdAt": "2020-07-15T04:29:47Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "diffHunk": "@@ -77,7 +77,7 @@ <h4>Previewing Session as\n <tm-question-submission-form *ngFor=\"let questionSubmissionForm of questionSubmissionForms; let i = index; trackBy: trackQuestionSubmissionFormByFn\"\n                              [attr.id]=\"questionSubmissionForm.feedbackQuestionId\"\n                              [(formModel)]=\"questionSubmissionForms[i]\" [formMode]=\"getQuestionSubmissionFormMode(questionSubmissionForm)\"\n-                             [isDisabled]=\"isSubmissionFormsDisabled\"\n+                             [isDisabled]=\"isSubmissionFormsDisabled && !this.previewAsPerson\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}, "originalCommit": {"oid": "a3ab8e3ce9caf5b1e43871b93cb0b7c437e57d26"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTQzOA==", "bodyText": "Then I think we should update the [disabled] attribute in the submit button to be xx || this.previewAsPerson. The current looks weird as isSubmissionFormsDisabled is controlled by previewAsPerson while isDisabled also depends on previewAsPerson.", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785438", "createdAt": "2020-07-15T04:34:41Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "diffHunk": "@@ -77,7 +77,7 @@ <h4>Previewing Session as\n <tm-question-submission-form *ngFor=\"let questionSubmissionForm of questionSubmissionForms; let i = index; trackBy: trackQuestionSubmissionFormByFn\"\n                              [attr.id]=\"questionSubmissionForm.feedbackQuestionId\"\n                              [(formModel)]=\"questionSubmissionForms[i]\" [formMode]=\"getQuestionSubmissionFormMode(questionSubmissionForm)\"\n-                             [isDisabled]=\"isSubmissionFormsDisabled\"\n+                             [isDisabled]=\"isSubmissionFormsDisabled && !this.previewAsPerson\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}, "originalCommit": {"oid": "a3ab8e3ce9caf5b1e43871b93cb0b7c437e57d26"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgwMDE4MA==", "bodyText": "@xpdavid the submit button also depends on isSubmissionFormsDisabled so in this case no alternative is better than the other", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454800180", "createdAt": "2020-07-15T05:26:33Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "diffHunk": "@@ -77,7 +77,7 @@ <h4>Previewing Session as\n <tm-question-submission-form *ngFor=\"let questionSubmissionForm of questionSubmissionForms; let i = index; trackBy: trackQuestionSubmissionFormByFn\"\n                              [attr.id]=\"questionSubmissionForm.feedbackQuestionId\"\n                              [(formModel)]=\"questionSubmissionForms[i]\" [formMode]=\"getQuestionSubmissionFormMode(questionSubmissionForm)\"\n-                             [isDisabled]=\"isSubmissionFormsDisabled\"\n+                             [isDisabled]=\"isSubmissionFormsDisabled && !this.previewAsPerson\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}, "originalCommit": {"oid": "a3ab8e3ce9caf5b1e43871b93cb0b7c437e57d26"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjQ5MjM0OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMzoxOToxN1rOGxsuZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDozNTo0NFrOGxt67Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw==", "bodyText": "We should have (click)=\"selectAnswer(i, j)\" here?", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454766183", "createdAt": "2020-07-15T03:19:17Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7039f9c70836a0369e524e89d423528cb7a59661"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4Mzc5NA==", "bodyText": "No. j is not defined at this block.", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454783794", "createdAt": "2020-07-15T04:28:58Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw=="}, "originalCommit": {"oid": "7039f9c70836a0369e524e89d423528cb7a59661"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTc3Mw==", "bodyText": "The problem is that the model only get updated after selectAnswer(i, j) is called.", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785773", "createdAt": "2020-07-15T04:35:44Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw=="}, "originalCommit": {"oid": "7039f9c70836a0369e524e89d423528cb7a59661"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjYyOTYxOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDozNjoxMlrOGxt7bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDozNjoxMlrOGxt7bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTkwMQ==", "bodyText": "We should add (click)=\"selectAnswer(i, j)\" here.", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785901", "createdAt": "2020-07-15T04:36:12Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"\n+         [ngClass]=\"{ 'row-answered': i < responseDetails.answer.length && responseDetails.answer[i] !== RUBRIC_ANSWER_NOT_CHOSEN }\">\n+      <div *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\">\n+        <label>\n+          <input type=\"radio\" [disabled]=\"isDisabled\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7039f9c70836a0369e524e89d423528cb7a59661"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3630, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}