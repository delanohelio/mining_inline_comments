{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyODAyMjg3", "number": 10549, "title": "[#9536] Feedback Submit Page E2E Test", "bodyText": "Part of #9536\nOutline of Solution\n\nAdd methods to BaseE2ETestCase to compare emails sent\nAdd FeedbackSubmitPage to represent feedback submission page\nAdd registration key to result of getStudentAction for backdoor requests.\nAdd FeedbackSubmitPageE2ETest to test general actions on the submit page:\n\nverify loaded session data\nquestions with giver type instructor\nquestions with giver type students\nverify recipients: students\nverify recipients: instructors\nverify recipients: team mates\nverify recipients: teams\nsubmit partial response\ncannot submit in closed session\ncan submit in grace period\nconfirmation email\nadd comment\nedit comment\ndelete comment\n\n\n\nResponding to each different specific question type will be tested in their own individual tests instead of here.", "createdAt": "2020-08-04T14:26:20Z", "url": "https://github.com/TEAMMATES/teammates/pull/10549", "merged": true, "mergeCommit": {"oid": "dc2fbb5425ef8b85cca067b3503be7f761455c0c"}, "closed": true, "closedAt": "2020-09-01T04:23:27Z", "author": {"login": "jtankw3"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7nSCmgH2gAyNDYyODAyMjg3Ojg4YzhmY2VjZTA2OTMzZTU5MzY5ODQ3NDQ2ZThhYmYzZjZkM2IwMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEez9JAH2gAyNDYyODAyMjg3OjM5NTljMjMzYThiNTM2NDc3OGM4NjUzNmU2M2QyZTE0OWIzNTU1NmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88c8fcece06933e59369847446e8abf3f6d3b010", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/88c8fcece06933e59369847446e8abf3f6d3b010", "committedDate": "2020-08-04T14:13:37Z", "message": "Add methods for email comparison"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1300932373bb08a8d44a8ed157faa48348fb85e", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e1300932373bb08a8d44a8ed157faa48348fb85e", "committedDate": "2020-08-04T14:14:09Z", "message": "Add backdoor method to get student key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0152cdd1eb6188d3d0918ccf3d00faafe24615fb", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0152cdd1eb6188d3d0918ccf3d00faafe24615fb", "committedDate": "2020-08-04T14:15:32Z", "message": "Add FeedbackSubmitPageE2ETest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14475eb8a64d268a251f080233053248151af541", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/14475eb8a64d268a251f080233053248151af541", "committedDate": "2020-08-04T14:18:16Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/web/app/components/comment-box/comment-row/comment-row.component.html\n#\tsrc/web/app/components/question-submission-form/question-submission-form.component.html\n#\tsrc/web/app/pages-session/session-submission-page/session-submission-page.component.html"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29c83e0684ace99ade57ac632a3032d1c01c402a", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/29c83e0684ace99ade57ac632a3032d1c01c402a", "committedDate": "2020-08-06T10:37:56Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/web/app/components/question-submission-form/question-submission-form.component.html"}, "afterCommit": {"oid": "bbb51451680d350d3049feb2d3edb28c156d1347", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bbb51451680d350d3049feb2d3edb28c156d1347", "committedDate": "2020-08-09T03:35:46Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/web/app/components/question-submission-form/question-submission-form.component.html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65a398063ec761ed6f806ac5cc4d30ddc4728362", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/65a398063ec761ed6f806ac5cc4d30ddc4728362", "committedDate": "2020-08-09T05:07:03Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/web/app/components/question-submission-form/question-submission-form.component.html"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbb51451680d350d3049feb2d3edb28c156d1347", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bbb51451680d350d3049feb2d3edb28c156d1347", "committedDate": "2020-08-09T03:35:46Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/web/app/components/question-submission-form/question-submission-form.component.html"}, "afterCommit": {"oid": "af3b1dff1fe01e234811bf2122d07a05bb0de48c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/af3b1dff1fe01e234811bf2122d07a05bb0de48c", "committedDate": "2020-08-09T05:07:33Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5327f254f7aec95d0fa1b627c8647e82f1e8842", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b5327f254f7aec95d0fa1b627c8647e82f1e8842", "committedDate": "2020-08-09T05:30:06Z", "message": "Debug commit"}, "afterCommit": {"oid": "98a6ed947429864c73f0739f864b245a00b8cee0", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/98a6ed947429864c73f0739f864b245a00b8cee0", "committedDate": "2020-08-09T05:53:15Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8043268712fbefe89efd8b921885b7da64f352a4", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8043268712fbefe89efd8b921885b7da64f352a4", "committedDate": "2020-08-09T07:03:36Z", "message": "Merge branch 'master' into session-submission-e2e"}, "afterCommit": {"oid": "cb94dd5fc31db31c8586da8bbf4638d2115c9d1f", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/cb94dd5fc31db31c8586da8bbf4638d2115c9d1f", "committedDate": "2020-08-09T07:30:28Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "322921348e07879a5d08076bbc5ad624fa51439c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/322921348e07879a5d08076bbc5ad624fa51439c", "committedDate": "2020-08-09T08:03:44Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb94dd5fc31db31c8586da8bbf4638d2115c9d1f", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/cb94dd5fc31db31c8586da8bbf4638d2115c9d1f", "committedDate": "2020-08-09T07:30:28Z", "message": "Fix writeToRichTextEditor method"}, "afterCommit": {"oid": "322921348e07879a5d08076bbc5ad624fa51439c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/322921348e07879a5d08076bbc5ad624fa51439c", "committedDate": "2020-08-09T08:03:44Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b342949032d3622e13515facd7ab0918442116b", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6b342949032d3622e13515facd7ab0918442116b", "committedDate": "2020-08-11T07:42:29Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0f97cd5eae0a84c97ba938afd2a2486bec3f9be", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b0f97cd5eae0a84c97ba938afd2a2486bec3f9be", "committedDate": "2020-08-11T08:53:19Z", "message": "Scroll editor into view before writing to it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fbb3a28cb8662bf1f21a027cc91f23db6968eb6", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8fbb3a28cb8662bf1f21a027cc91f23db6968eb6", "committedDate": "2020-08-11T09:27:59Z", "message": "Fix writeToRichTextEditor method"}, "afterCommit": {"oid": "695cce8e230067a4ebef1d8b48c0a5f27a98ffe5", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/695cce8e230067a4ebef1d8b48c0a5f27a98ffe5", "committedDate": "2020-08-11T10:01:18Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b65d445feb454b9e6326d1e5092e814638100cc", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6b65d445feb454b9e6326d1e5092e814638100cc", "committedDate": "2020-08-11T10:27:45Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "695cce8e230067a4ebef1d8b48c0a5f27a98ffe5", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/695cce8e230067a4ebef1d8b48c0a5f27a98ffe5", "committedDate": "2020-08-11T10:01:18Z", "message": "Fix writeToRichTextEditor method"}, "afterCommit": {"oid": "6b65d445feb454b9e6326d1e5092e814638100cc", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6b65d445feb454b9e6326d1e5092e814638100cc", "committedDate": "2020-08-11T10:27:45Z", "message": "Fix writeToRichTextEditor method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe41bdd2801d60dccf404a4f8051744050a0dc4e", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fe41bdd2801d60dccf404a4f8051744050a0dc4e", "committedDate": "2020-08-13T16:46:22Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}, "afterCommit": {"oid": "b5c1327d1dd1d8cde9c33661658a80e06e1a9817", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b5c1327d1dd1d8cde9c33661658a80e06e1a9817", "committedDate": "2020-08-13T17:12:29Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5c1327d1dd1d8cde9c33661658a80e06e1a9817", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b5c1327d1dd1d8cde9c33661658a80e06e1a9817", "committedDate": "2020-08-13T17:12:29Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}, "afterCommit": {"oid": "7cf9e5808a34745e7a23a17943266b8a39db32fc", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7cf9e5808a34745e7a23a17943266b8a39db32fc", "committedDate": "2020-08-13T17:24:50Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/76fa0423103bfff05239f59137ac59543d08d2f4", "committedDate": "2020-08-20T03:20:18Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/cases/e2e/BaseE2ETestCase.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cf9e5808a34745e7a23a17943266b8a39db32fc", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7cf9e5808a34745e7a23a17943266b8a39db32fc", "committedDate": "2020-08-13T17:24:50Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}, "afterCommit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/76fa0423103bfff05239f59137ac59543d08d2f4", "committedDate": "2020-08-20T03:20:18Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/cases/e2e/BaseE2ETestCase.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/AppPage.java\n#\tsrc/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java\n#\tsrc/e2e/resources/testng-e2e.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDc3OTE3", "url": "https://github.com/TEAMMATES/teammates/pull/10549#pullrequestreview-472477917", "createdAt": "2020-08-21T13:16:10Z", "commit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxMzoxNjoxMFrOHEsu4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxMzoxODoxMlrOHEszBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDY4OTI1MA==", "bodyText": "Not harmful, but be careful of this", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r474689250", "createdAt": "2020-08-21T13:16:10Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/pageobjects/AppPage.java", "diffHunk": "@@ -378,6 +376,8 @@ protected void fillFileBox(RemoteWebElement fileBoxElement, String fileName) {\n     }\n \n     /**\n+<<<<<<< HEAD\n+=======", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDY4OTMxMA==", "bodyText": "And this", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r474689310", "createdAt": "2020-08-21T13:16:17Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/pageobjects/AppPage.java", "diffHunk": "@@ -392,6 +392,7 @@ protected String getEditorRichText(WebElement editor) {\n     }\n \n     /**\n+>>>>>>> 5c2f44f0c69a6abac594ba5c03ef90c162b336f3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDY5MDMxMA==", "bodyText": "Is there another way to verify this that doesn't involve reloading?", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r474690310", "createdAt": "2020-08-21T13:18:12Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/FeedbackSubmitPageE2ETest.java", "diffHunk": "@@ -0,0 +1,175 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.time.Instant;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AppPage;\n+import teammates.e2e.pageobjects.FeedbackSubmitPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#SESSION_SUBMISSION_PAGE}.\n+ */\n+public class FeedbackSubmitPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+\n+    private FeedbackSessionAttributes openSession;\n+    private FeedbackSessionAttributes closedSession;\n+    private FeedbackSessionAttributes gracePeriodSession;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/FeedbackSubmitPageE2ETest.json\");\n+        testData.feedbackSessions.get(\"Grace Period Session\").setEndTime(Instant.now());\n+        student = testData.students.get(\"Alice\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+        removeAndRestoreDataBundle(testData);\n+\n+        openSession = testData.feedbackSessions.get(\"Open Session\");\n+        closedSession = testData.feedbackSessions.get(\"Closed Session\");\n+        gracePeriodSession = testData.feedbackSessions.get(\"Grace Period Session\");\n+    }\n+\n+    @Test\n+    public void testAll() {\n+        AppUrl url = createUrl(Const.WebPageURIs.INSTRUCTOR_SESSION_SUBMISSION_PAGE)\n+                .withUserId(testData.instructors.get(\"SFSubmitE2eT.instr\").googleId)\n+                .withCourseId(openSession.getCourseId())\n+                .withSessionName(openSession.getFeedbackSessionName());\n+        FeedbackSubmitPage submitPage = loginAdminToPage(url, FeedbackSubmitPage.class);\n+        submitPage.waitForPageToLoad();\n+\n+        ______TS(\"verify loaded session data\");\n+        submitPage.verifyFeedbackSessionDetails(openSession);\n+\n+        ______TS(\"questions with giver type instructor\");\n+        submitPage.verifyNumQuestions(1);\n+        submitPage.verifyQuestionDetails(1, testData.feedbackQuestions.get(\"qn5InSession1\"));\n+\n+        ______TS(\"questions with giver type students\");\n+        submitPage = loginAdminToPage(getStudentSubmitPageUrl(student, openSession), FeedbackSubmitPage.class);\n+        submitPage.waitForPageToLoad();\n+\n+        submitPage.verifyNumQuestions(4);\n+        submitPage.verifyQuestionDetails(1, testData.feedbackQuestions.get(\"qn1InSession1\"));\n+        submitPage.verifyQuestionDetails(2, testData.feedbackQuestions.get(\"qn2InSession1\"));\n+        submitPage.verifyQuestionDetails(3, testData.feedbackQuestions.get(\"qn3InSession1\"));\n+        submitPage.verifyQuestionDetails(4, testData.feedbackQuestions.get(\"qn4InSession1\"));\n+\n+        ______TS(\"verify recipients: students\");\n+        submitPage.verifyLimitedRecipients(1, 3, getOtherStudents(student));\n+\n+        ______TS(\"verify recipients: instructors\");\n+        submitPage.verifyRecipients(2, getInstructors(), \"Instructor\");\n+\n+        ______TS(\"verify recipients: team mates\");\n+        submitPage.verifyRecipients(3, getTeammates(student), \"Student\");\n+\n+        ______TS(\"verify recipients: teams\");\n+        submitPage.verifyRecipients(4, getOtherTeams(student), \"Team\");\n+\n+        ______TS(\"submit partial response\");\n+        int[] unansweredQuestions = { 1, 2, 3, 4 };\n+        submitPage.verifyWarningMessageForPartialResponse(unansweredQuestions);\n+\n+        ______TS(\"cannot submit in closed session\");\n+        AppUrl closedSessionUrl = getStudentSubmitPageUrl(student, closedSession);\n+        submitPage = AppPage.getNewPageInstance(browser, closedSessionUrl, FeedbackSubmitPage.class);\n+        submitPage.verifyCannotSubmit();\n+\n+        ______TS(\"can submit in grace period\");\n+        AppUrl gracePeriodSessionUrl = getStudentSubmitPageUrl(student, gracePeriodSession);\n+        submitPage = AppPage.getNewPageInstance(browser, gracePeriodSessionUrl, FeedbackSubmitPage.class);\n+        submitPage.waitForPageToLoad();\n+\n+        int[] gracePeriodUnansweredQuestions = { 1 };\n+        submitPage.verifyWarningMessageForPartialResponse(gracePeriodUnansweredQuestions);\n+\n+        ______TS(\"confirmation email\");\n+        submitPage.selectMultipleChoiceOption(1, 1, 1);\n+        submitPage.markWithConfirmationEmail();\n+\n+        submitPage.verifyWarningMessageForPartialResponse(gracePeriodUnansweredQuestions);\n+        verifyEmailSent(student.getEmail(), \"TEAMMATES: Feedback responses successfully recorded\"\n+                + \" [Course: \" + testData.courses.get(\"SFSubmitE2eT.CS2104\").getName() + \"][Feedback Session: \"\n+                + gracePeriodSession.getFeedbackSessionName() + \"]\");\n+\n+        ______TS(\"add comment\");\n+        int qnToComment = 1;\n+        int recipientToComment = 1;\n+        String comment = \"<p>new comment</p>\";\n+        submitPage.addComment(qnToComment, recipientToComment, comment);\n+\n+        submitPage.verifyWarningMessageForPartialResponse(gracePeriodUnansweredQuestions);\n+        // Reload page to verify comment persists in datastore", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76fa0423103bfff05239f59137ac59543d08d2f4"}, "originalPosition": 115}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b007e337c6dbd48195647e23737f6ea8d873e8d8", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b007e337c6dbd48195647e23737f6ea8d873e8d8", "committedDate": "2020-08-26T01:56:58Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77b782d2dcc8a3350aef0aa5924b6d3dcb23536e", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/77b782d2dcc8a3350aef0aa5924b6d3dcb23536e", "committedDate": "2020-08-26T13:11:22Z", "message": "Add backdoor methods to get FeedbackResponseComment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "000c8b80cff8fed8488b87ec7a66d3e081d15d56", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/000c8b80cff8fed8488b87ec7a66d3e081d15d56", "committedDate": "2020-08-26T13:50:38Z", "message": "Improve verifications in FeedbackSubmitPageE2ETest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf379bb63b4accd40db722a0d634831ea4639b1a", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bf379bb63b4accd40db722a0d634831ea4639b1a", "committedDate": "2020-08-26T13:23:12Z", "message": "Remove comments added on accident"}, "afterCommit": {"oid": "5bff2f9ffe0b4a06fbe001cc28d52395a1c13b91", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5bff2f9ffe0b4a06fbe001cc28d52395a1c13b91", "committedDate": "2020-08-26T13:51:03Z", "message": "Add test case for preview and moderation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5bff2f9ffe0b4a06fbe001cc28d52395a1c13b91", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5bff2f9ffe0b4a06fbe001cc28d52395a1c13b91", "committedDate": "2020-08-26T13:51:03Z", "message": "Add test case for preview and moderation"}, "afterCommit": {"oid": "259125a046dcd7e3a2819e524f38b761ffd86ed1", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/259125a046dcd7e3a2819e524f38b761ffd86ed1", "committedDate": "2020-08-26T14:02:17Z", "message": "Add test case for preview and moderation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "259125a046dcd7e3a2819e524f38b761ffd86ed1", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/259125a046dcd7e3a2819e524f38b761ffd86ed1", "committedDate": "2020-08-26T14:02:17Z", "message": "Add test case for preview and moderation"}, "afterCommit": {"oid": "e273204c380fe12960657f8d2ade470ff6bc3c0c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e273204c380fe12960657f8d2ade470ff6bc3c0c", "committedDate": "2020-08-26T14:04:40Z", "message": "Add test case for preview and moderation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e273204c380fe12960657f8d2ade470ff6bc3c0c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e273204c380fe12960657f8d2ade470ff6bc3c0c", "committedDate": "2020-08-26T14:04:40Z", "message": "Add test case for preview and moderation"}, "afterCommit": {"oid": "d530677f148813ecd8c5cbfdef1d084d10ac75ed", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d530677f148813ecd8c5cbfdef1d084d10ac75ed", "committedDate": "2020-08-26T14:24:12Z", "message": "Add test case for preview and moderation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTIwMjM2", "url": "https://github.com/TEAMMATES/teammates/pull/10549#pullrequestreview-477920236", "createdAt": "2020-08-28T17:51:37Z", "commit": {"oid": "82dbb15e7ff58415b1a50ed2ac770ec7dd495444"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo1MTozN1rOHJPcyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo1MTozN1rOHJPcyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MjM2MA==", "bodyText": "I think instead of this, we can just check for admin privilege?", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r479452360", "createdAt": "2020-08-28T17:51:37Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/GetStudentAction.java", "diffHunk": "@@ -80,6 +80,9 @@ public ActionResult execute() {\n         }\n \n         StudentData studentData = new StudentData(student);\n+        if (isBackdoor()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82dbb15e7ff58415b1a50ed2ac770ec7dd495444"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NjI5MjE5", "url": "https://github.com/TEAMMATES/teammates/pull/10549#pullrequestreview-478629219", "createdAt": "2020-08-31T13:45:19Z", "commit": {"oid": "4130c7382103ebbc52770ea1082d797aa5bfcd66"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMzo0NToxOVrOHJ5fUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMzo0NTozMlrOHJ5fvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE0MTEzNg==", "bodyText": "Need to check that userInfo is not null", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r480141136", "createdAt": "2020-08-31T13:45:19Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/GetStudentAction.java", "diffHunk": "@@ -80,6 +80,9 @@ public ActionResult execute() {\n         }\n \n         StudentData studentData = new StudentData(student);\n+        if (userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4130c7382103ebbc52770ea1082d797aa5bfcd66"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE0MTI0NA==", "bodyText": "This change is no longer necessary, I believe", "url": "https://github.com/TEAMMATES/teammates/pull/10549#discussion_r480141244", "createdAt": "2020-08-31T13:45:32Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/Action.java", "diffHunk": "@@ -95,7 +99,7 @@ public void checkAccessControl() {\n     }\n \n     private void initAuthInfo() {\n-        if (Config.BACKDOOR_KEY.equals(req.getHeader(\"Backdoor-Key\"))) {\n+        if (isBackdoor()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4130c7382103ebbc52770ea1082d797aa5bfcd66"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f24d5df57d61895956c13ec2094092c7555feba6", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f24d5df57d61895956c13ec2094092c7555feba6", "committedDate": "2020-08-31T14:02:48Z", "message": "Add test case for preview and moderation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4130c7382103ebbc52770ea1082d797aa5bfcd66", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4130c7382103ebbc52770ea1082d797aa5bfcd66", "committedDate": "2020-08-31T13:28:37Z", "message": "Merge branch 'master' into session-submission-e2e"}, "afterCommit": {"oid": "0a81ed908af316a5742a6c14027a5129bccbffd6", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0a81ed908af316a5742a6c14027a5129bccbffd6", "committedDate": "2020-08-31T14:03:59Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd10a840772f5bc79135f3d1089aaec4b341920d", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fd10a840772f5bc79135f3d1089aaec4b341920d", "committedDate": "2020-08-31T14:09:26Z", "message": "Change getStudentAction to check for admin privilege for student key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bee73550a52dfc9a8e2840e1e26659291ba2daf", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1bee73550a52dfc9a8e2840e1e26659291ba2daf", "committedDate": "2020-08-31T14:09:35Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a81ed908af316a5742a6c14027a5129bccbffd6", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0a81ed908af316a5742a6c14027a5129bccbffd6", "committedDate": "2020-08-31T14:03:59Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}, "afterCommit": {"oid": "1bee73550a52dfc9a8e2840e1e26659291ba2daf", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1bee73550a52dfc9a8e2840e1e26659291ba2daf", "committedDate": "2020-08-31T14:09:35Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into session-submission-e2e"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5MDY0NDI2", "url": "https://github.com/TEAMMATES/teammates/pull/10549#pullrequestreview-479064426", "createdAt": "2020-08-31T23:41:39Z", "commit": {"oid": "1bee73550a52dfc9a8e2840e1e26659291ba2daf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3959c233a8b5364778c86536e63d2e149b35556b", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3959c233a8b5364778c86536e63d2e149b35556b", "committedDate": "2020-09-01T03:26:50Z", "message": "Merge branch 'master' into session-submission-e2e"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4232, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}