{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODI0MDgw", "number": 10227, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTozNDoxNlrOEISr6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTozNDoxNlrOEISr6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MTMwMjE2OnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTozNDoxNlrOGoKidg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMjowMjowOVrOGoPGzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2ODg4Ng==", "bodyText": "I think the common code questionCompleteGiverRecipientMap.put() can be extracted out of if-else.", "url": "https://github.com/TEAMMATES/teammates/pull/10227#discussion_r444768886", "createdAt": "2020-06-24T09:34:16Z", "author": {"login": "Derek-Hardy"}, "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "diffHunk": "@@ -1651,13 +1651,20 @@ private void addCommentVisibilityToTable(\n             List<FeedbackResponseAttributes> existingResponses, CourseRoster courseRoster, @Nullable String section) {\n \n         // first get all possible giver recipient pairs\n-        Map<String, Map<String, Set<String>>> completeGiverRecipientMap =\n-                fqLogic.buildCompleteGiverRecipientMap(feedbackSession, relatedQuestionsMap.values(), courseRoster);\n+        Map<String, Map<String, Set<String>>> questionCompleteGiverRecipientMap = new HashMap<>();\n+        for (FeedbackQuestionAttributes feedbackQuestion : relatedQuestionsMap.values()) {\n+            if (feedbackQuestion.getQuestionDetails().shouldGenerateMissingResponses(feedbackQuestion)) {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(),\n+                        fqLogic.buildCompleteGiverRecipientMap(feedbackSession, feedbackQuestion, courseRoster));\n+            } else {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(), new HashMap<>());\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df4e1395bb77154d1f39c03f732d8d53f02d71dc"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDgzMTc4Nw==", "bodyText": "Can I check if you're requesting for a change? Cause if not I was gonna merge this PR haha", "url": "https://github.com/TEAMMATES/teammates/pull/10227#discussion_r444831787", "createdAt": "2020-06-24T11:38:09Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "diffHunk": "@@ -1651,13 +1651,20 @@ private void addCommentVisibilityToTable(\n             List<FeedbackResponseAttributes> existingResponses, CourseRoster courseRoster, @Nullable String section) {\n \n         // first get all possible giver recipient pairs\n-        Map<String, Map<String, Set<String>>> completeGiverRecipientMap =\n-                fqLogic.buildCompleteGiverRecipientMap(feedbackSession, relatedQuestionsMap.values(), courseRoster);\n+        Map<String, Map<String, Set<String>>> questionCompleteGiverRecipientMap = new HashMap<>();\n+        for (FeedbackQuestionAttributes feedbackQuestion : relatedQuestionsMap.values()) {\n+            if (feedbackQuestion.getQuestionDetails().shouldGenerateMissingResponses(feedbackQuestion)) {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(),\n+                        fqLogic.buildCompleteGiverRecipientMap(feedbackSession, feedbackQuestion, courseRoster));\n+            } else {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(), new HashMap<>());\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2ODg4Ng=="}, "originalCommit": {"oid": "df4e1395bb77154d1f39c03f732d8d53f02d71dc"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg0MzcyNw==", "bodyText": "Not big issue, can merge.", "url": "https://github.com/TEAMMATES/teammates/pull/10227#discussion_r444843727", "createdAt": "2020-06-24T12:02:09Z", "author": {"login": "Derek-Hardy"}, "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "diffHunk": "@@ -1651,13 +1651,20 @@ private void addCommentVisibilityToTable(\n             List<FeedbackResponseAttributes> existingResponses, CourseRoster courseRoster, @Nullable String section) {\n \n         // first get all possible giver recipient pairs\n-        Map<String, Map<String, Set<String>>> completeGiverRecipientMap =\n-                fqLogic.buildCompleteGiverRecipientMap(feedbackSession, relatedQuestionsMap.values(), courseRoster);\n+        Map<String, Map<String, Set<String>>> questionCompleteGiverRecipientMap = new HashMap<>();\n+        for (FeedbackQuestionAttributes feedbackQuestion : relatedQuestionsMap.values()) {\n+            if (feedbackQuestion.getQuestionDetails().shouldGenerateMissingResponses(feedbackQuestion)) {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(),\n+                        fqLogic.buildCompleteGiverRecipientMap(feedbackSession, feedbackQuestion, courseRoster));\n+            } else {\n+                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(), new HashMap<>());\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2ODg4Ng=="}, "originalCommit": {"oid": "df4e1395bb77154d1f39c03f732d8d53f02d71dc"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3861, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}