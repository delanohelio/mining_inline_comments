{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NDM1MjU2", "number": 10717, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwODozMjoyM1rOEljUnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNjowNjowOFrOEnUcyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3ODExNDg1OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwODozMjoyM1rOHVFcag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwODozMjoyM1rOHVFcag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg3MTMzOA==", "bodyText": "Typo", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r491871338", "createdAt": "2020-09-21T08:32:23Z", "author": {"login": "niqiukun"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -15,7 +15,26 @@ import { SimpleModalType } from '../simple-modal/simple-modal-type';\n import { collapseAnim } from '../teammates-common/collapse-anim';\n import { QuestionEditFormMode, QuestionEditFormModel } from './question-edit-form-model';\n \n-const CLEAN_PROPERTIES: Set<string> = new Set<string>(['isEditable', 'isCollapsed', 'isChanged']);\n+const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([\n+  'giverType',\n+  'recipientType',\n+  'isUsingOtherFeedbackPath',\n+  'numberOfEntitiesToGiveFeedbackToSetting',\n+  'customNumberOfEntitiesToGiveFeedbackTo',\n+]);\n+const VISIBILITY_PROPTERIES: Set<string> = new Set<string>([", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d8bd3c76f3da16ec0b32629ed110e07e5f25488"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3ODEyNDg4OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwODozNDo1NFrOHVFh_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwODozNDo1NFrOHVFh_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg3Mjc2NA==", "bodyText": "I wouldn't put visibilities inside clean properties because clean properties represent UI properties that does not affect the question at the backend. Visibilities do change the question at the backend.", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r491872764", "createdAt": "2020-09-21T08:34:54Z", "author": {"login": "niqiukun"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -15,7 +15,26 @@ import { SimpleModalType } from '../simple-modal/simple-modal-type';\n import { collapseAnim } from '../teammates-common/collapse-anim';\n import { QuestionEditFormMode, QuestionEditFormModel } from './question-edit-form-model';\n \n-const CLEAN_PROPERTIES: Set<string> = new Set<string>(['isEditable', 'isCollapsed', 'isChanged']);\n+const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([\n+  'giverType',\n+  'recipientType',\n+  'isUsingOtherFeedbackPath',\n+  'numberOfEntitiesToGiveFeedbackToSetting',\n+  'customNumberOfEntitiesToGiveFeedbackTo',\n+]);\n+const VISIBILITY_PROPTERIES: Set<string> = new Set<string>([\n+  'isUsingOtherVisibilitySetting',\n+  'showResponsesTo',\n+  'showGiverNameTo',\n+  'showRecipientNameTo',\n+  'commonVisibilitySettingName',\n+]);\n+const CLEAN_PROPERTIES: Set<string> = new Set<string>([\n+  ...VISIBILITY_PROPTERIES,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d8bd3c76f3da16ec0b32629ed110e07e5f25488"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjQ2ODMyOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-edit-form/question-edit-form-model.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNDoyNjo0MlrOHX0iYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNDoyNjo0MlrOHX0iYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc0MDA2Nw==", "bodyText": "Can we remove isChanged then?", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r494740067", "createdAt": "2020-09-25T04:26:42Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form-model.ts", "diffHunk": "@@ -54,4 +54,7 @@ export interface QuestionEditFormModel {\n   isSaving: boolean;\n   isCollapsed: boolean;\n   isChanged: boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec0c72c326a6851e15d34f879aee0b78e7d7c17"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjY0OTcxOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwNjowNjowOFrOHX2ILw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNDowMTo1MVrOHYkcVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc2NjEyNw==", "bodyText": "We can use a more strict type here (and similarly below)\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([\n          \n          \n            \n            const FEEDBACK_PATH_PROPERTIES: Set<keyof QuestionEditFormModel> = new Set<string>([", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r494766127", "createdAt": "2020-09-25T06:06:08Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -15,7 +15,26 @@ import { SimpleModalType } from '../simple-modal/simple-modal-type';\n import { collapseAnim } from '../teammates-common/collapse-anim';\n import { QuestionEditFormMode, QuestionEditFormModel } from './question-edit-form-model';\n \n-const CLEAN_PROPERTIES: Set<string> = new Set<string>(['isEditable', 'isCollapsed', 'isChanged']);\n+const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ccfc80e3b907413bcc7b8b4710affdeba271333"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQyODM3NA==", "bodyText": "I think this change would not be compatible with the way we use the keys below,\nObject.keys(obj).some((key: string) => VISIBILITY_PROPERTIES.has(key))\nWhere key is expected to be of type string, and not keyof QuestionEditFormModel? Maybe it's possible but I can't seem to get it to work.\nWe can do this to ensure the keys added in do not have typos tho, do you want me to proceed with this change?\nconst FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<keyof QuestionEditFormModel>([...", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r495428374", "createdAt": "2020-09-26T07:42:26Z", "author": {"login": "helloImHai"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -15,7 +15,26 @@ import { SimpleModalType } from '../simple-modal/simple-modal-type';\n import { collapseAnim } from '../teammates-common/collapse-anim';\n import { QuestionEditFormMode, QuestionEditFormModel } from './question-edit-form-model';\n \n-const CLEAN_PROPERTIES: Set<string> = new Set<string>(['isEditable', 'isCollapsed', 'isChanged']);\n+const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc2NjEyNw=="}, "originalCommit": {"oid": "1ccfc80e3b907413bcc7b8b4710affdeba271333"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUyNDk0OA==", "bodyText": "It's fine if it is difficult to do so", "url": "https://github.com/TEAMMATES/teammates/pull/10717#discussion_r495524948", "createdAt": "2020-09-27T04:01:51Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -15,7 +15,26 @@ import { SimpleModalType } from '../simple-modal/simple-modal-type';\n import { collapseAnim } from '../teammates-common/collapse-anim';\n import { QuestionEditFormMode, QuestionEditFormModel } from './question-edit-form-model';\n \n-const CLEAN_PROPERTIES: Set<string> = new Set<string>(['isEditable', 'isCollapsed', 'isChanged']);\n+const FEEDBACK_PATH_PROPERTIES: Set<string> = new Set<string>([", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc2NjEyNw=="}, "originalCommit": {"oid": "1ccfc80e3b907413bcc7b8b4710affdeba271333"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3568, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}