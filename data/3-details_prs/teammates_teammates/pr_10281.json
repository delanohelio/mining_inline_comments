{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NjUyMjg2", "number": 10281, "title": "[#10245] Add and refactor collapse animations", "bodyText": "Part of  #10213\nPart of  #10245\nChange collapse animation implementation, and migrate all existing collapse animations to new implementation\nThe old collapse animation renders all components on page load, preventing any sort of user interaction until all components, even collapsed, are rendered. (See Instructor help page for worse case example)\nThe new collapse animation builds on top of the *ngIf directive, only rendering components when required, greatly improving load times. The new implementation also uses the exact height of the rendered component to play the animation, instead of hard coding an arbitrary value like the old version.\nAdded collapse animations to following components\n\nCourses - Archieved courses\nCourses - Deleted courses\nCourses - Add new course\nToggle comments\nSessions - Add new feedback session\nSessions - Deleted sessions\nSessions -> Session Edit - [Change] buttons\nALL Show / Hide visibility for comments\nAdmin -> Sessions\nAdmin -> Search\n\nProblems faced\n\nCourses -> Enroll - Existing students (Can't get collapse to work. Seems to require it to be rendered on page load. Will be sticking with [hidden])\nCourses -> Enroll - New students (Can't get collapse to work. Seems to require it to be rendered on page load. Will be sticking with [hidden])", "createdAt": "2020-07-06T09:26:43Z", "url": "https://github.com/TEAMMATES/teammates/pull/10281", "merged": true, "mergeCommit": {"oid": "8461a63ce7ab065b11c457cd7f56810d5f66ab99"}, "closed": true, "closedAt": "2020-07-09T05:05:35Z", "author": {"login": "ccyccyccy"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyPTFZgBqjM1MTU0MTY0NTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczHFZZgBqjM1Mjc4ODQ1NDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb804b7ebb7f03cf3f3f209de05af16255ebb04f", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fb804b7ebb7f03cf3f3f209de05af16255ebb04f", "committedDate": "2020-07-06T10:45:36Z", "message": "Update snapshots"}, "afterCommit": {"oid": "8aea30110b373c21da39667363a35ea56dacc39a", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8aea30110b373c21da39667363a35ea56dacc39a", "committedDate": "2020-07-06T11:11:10Z", "message": "Update snapshots"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTMzMzYy", "url": "https://github.com/TEAMMATES/teammates/pull/10281#pullrequestreview-443533362", "createdAt": "2020-07-07T03:13:30Z", "commit": {"oid": "d7094cef4808b2f5ba8bac68e373955ffe9223d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMzoxMzozMFrOGttt7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMzoxMzozMFrOGttt7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4ODE0MA==", "bodyText": "One more level of indentation here for thead?", "url": "https://github.com/TEAMMATES/teammates/pull/10281#discussion_r450588140", "createdAt": "2020-07-07T03:13:30Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/sessions-recycle-bin-table/sessions-recycle-bin-table.component.html", "diffHunk": "@@ -19,7 +19,8 @@ <h2 class=\"text-muted\">\n             </div>\n           </div>\n         </div>\n-      <table class=\"table table-responsive-lg table-striped table-bordered recycle-bin-table\" *ngIf=\"isRecycleBinExpanded\">\n+      <div *ngIf=\"isRecycleBinExpanded\" @collapseAnim>\n+        <table class=\"table table-responsive-lg table-striped table-bordered recycle-bin-table\">\n         <thead class=\"recycle-bin-table-header\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7094cef4808b2f5ba8bac68e373955ffe9223d3"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "787bd82f324e1ce25412c0a29c2eb2bfabbf7aa5", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/787bd82f324e1ce25412c0a29c2eb2bfabbf7aa5", "committedDate": "2020-07-07T05:46:28Z", "message": "Fix E2E by adding timer for animation to play"}, "afterCommit": {"oid": "a6e9bf43b446a3d877390cdeb553164917c382f3", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a6e9bf43b446a3d877390cdeb553164917c382f3", "committedDate": "2020-07-07T06:14:31Z", "message": "Indentation fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNzc1ODY4", "url": "https://github.com/TEAMMATES/teammates/pull/10281#pullrequestreview-443775868", "createdAt": "2020-07-07T10:48:26Z", "commit": {"oid": "a6e9bf43b446a3d877390cdeb553164917c382f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDExNzE1", "url": "https://github.com/TEAMMATES/teammates/pull/10281#pullrequestreview-444411715", "createdAt": "2020-07-08T04:53:18Z", "commit": {"oid": "a6e9bf43b446a3d877390cdeb553164917c382f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1MzoxOFrOGuYEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1MzoxOFrOGuYEHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4MTk0OA==", "bodyText": "Although this works, this may not be very stable. Is there another way possible here, e.g. waiting for certain element to appear?\nIf not then at least abstract this out to a method in AppPage.\npublic void waitForCollapseAnimation() {\n    ThreadHelper.waitFor(500);\n}", "url": "https://github.com/TEAMMATES/teammates/pull/10281#discussion_r451281948", "createdAt": "2020-07-08T04:53:18Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -231,6 +231,11 @@ private void verifyLinkExpansionButtons(StudentAttributes student, InstructorAtt\n \n         searchPage.clickExpandInstructorLinks();\n         searchPage.clickCollapseStudentLinks();\n+        try {\n+            Thread.sleep(500);\n+        } catch (InterruptedException e) {\n+            e.printStackTrace();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6e9bf43b446a3d877390cdeb553164917c382f3"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NzU5ODI4", "url": "https://github.com/TEAMMATES/teammates/pull/10281#pullrequestreview-444759828", "createdAt": "2020-07-08T13:24:22Z", "commit": {"oid": "0aa413f9ee4916c6837d2158f538e1a7c06b9b1f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMzoyNDoyMlrOGun3eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMzoyNDoyMlrOGun3eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU0MDg1Ng==", "bodyText": "Don't really need this", "url": "https://github.com/TEAMMATES/teammates/pull/10281#discussion_r451540856", "createdAt": "2020-07-08T13:24:22Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/pageobjects/InstructorCoursesPage.java", "diffHunk": "@@ -94,6 +95,7 @@ public void verifyArchivedCoursesDetails(CourseAttributes[] courses) {\n \n     public void verifyDeletedCoursesDetails(CourseAttributes[] courses) {\n         showDeleteTable();\n+        this.waitUntilAnimationFinish();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0aa413f9ee4916c6837d2158f538e1a7c06b9b1f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7902d382bbed6a5222e18b3d4090655b9f783de", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b7902d382bbed6a5222e18b3d4090655b9f783de", "committedDate": "2020-07-09T03:04:58Z", "message": "Add skeleton for new collapse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8650342073cbe166f7d6cc07538a67bddcafa19c", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8650342073cbe166f7d6cc07538a67bddcafa19c", "committedDate": "2020-07-09T03:09:03Z", "message": "Convert old collapse animations to use new ones"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11a57f4e6ec8989726d37e0b8d92cf3922826348", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/11a57f4e6ec8989726d37e0b8d92cf3922826348", "committedDate": "2020-07-09T03:10:06Z", "message": "Add collapse animations for multiple places"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c00e3417ce03561f7720e305d843c083383b50dd", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c00e3417ce03561f7720e305d843c083383b50dd", "committedDate": "2020-07-09T03:10:06Z", "message": "Update snapshots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49714a4d72067f7cd51f61387f971f9fd1595b39", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/49714a4d72067f7cd51f61387f971f9fd1595b39", "committedDate": "2020-07-09T03:10:06Z", "message": "Lint fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3081c9ec97e948f9f8338850c14199013cdf2454", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3081c9ec97e948f9f8338850c14199013cdf2454", "committedDate": "2020-07-09T03:10:06Z", "message": "Fix E2E by adding timer for animation to play"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab64a0bb4946a19cef7f1f98cd611d921f107d15", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ab64a0bb4946a19cef7f1f98cd611d921f107d15", "committedDate": "2020-07-09T03:10:06Z", "message": "Indentation fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3ea5c88f93001ad685773815af125bf0a068097", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e3ea5c88f93001ad685773815af125bf0a068097", "committedDate": "2020-07-09T03:10:06Z", "message": "Change animation waiting method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0aa413f9ee4916c6837d2158f538e1a7c06b9b1f", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0aa413f9ee4916c6837d2158f538e1a7c06b9b1f", "committedDate": "2020-07-08T10:39:57Z", "message": "Change animation waiting method"}, "afterCommit": {"oid": "e3ea5c88f93001ad685773815af125bf0a068097", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e3ea5c88f93001ad685773815af125bf0a068097", "committedDate": "2020-07-09T03:10:06Z", "message": "Change animation waiting method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4273, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}