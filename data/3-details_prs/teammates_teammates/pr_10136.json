{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0OTk0NTI0", "number": 10136, "title": "[#10124] Show instructor comments on student result page", "bodyText": "Fixes #10124\n\nOutline of Solution\n\nAdded a new pipe CommentsToCommentTableModelPipe to transform instructor comments to   CommentTableModel\nAdded isReadonly field to CommentTableModel to enable or disable various features of the CommentTableComponent\nRenamed the pipe ParticipantCommentToCommandRowModelPipe to CommentToCommentRowModelPipe to be more precise.\n\nOther Information\nThere's a code fragment that is does a very similar thing compared to my new pipe CommentsToCommentTableModelPipe.\ngetCommentTableModel(comments: CommentOutput[]): CommentTableModel {\n    return {\n      commentRows: comments.map((comment: FeedbackResponseComment) => this.getCommentRowModel(comment)),\n      newCommentRow: {\n        commentEditFormModel: {\n          commentText: '',\n          isUsingCustomVisibilities: false,\n          showCommentTo: [],\n          showGiverNameTo: [],\n        },\n        isEditing: false,\n      },\n      isAddingNewComment: false,\n      isReadonly: false,\n    };\n  }\n\nThe above code is duplicated in the master branch at 2 different files, in addition to the new pipe CommentsToCommentTableModelPipe. Can consider having them all call the same function. Should I fix in another issue? EDIT: Have refactored the code.\nI realise the comment adding feature in InstructorStudentRecordsPageComponent doesnt seem to be working, before or after this change. Will make an issue for that.", "createdAt": "2020-05-29T09:32:43Z", "url": "https://github.com/TEAMMATES/teammates/pull/10136", "merged": true, "mergeCommit": {"oid": "c2ce258fd591f3c983627cecc98b7f71426c315a"}, "closed": true, "closedAt": "2020-05-31T08:27:04Z", "author": {"login": "ccyccyccy"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl_t3mAFqTQyMDgyNjY0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmnRxlgFqTQyMTQ3MjI0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwODI2NjQw", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-420826640", "createdAt": "2020-05-29T10:15:24Z", "commit": {"oid": "ee148e7730cd1b0c70ade443ba935d52dc4e1cb3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee148e7730cd1b0c70ade443ba935d52dc4e1cb3", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ee148e7730cd1b0c70ade443ba935d52dc4e1cb3", "committedDate": "2020-05-29T09:10:40Z", "message": "Fix lint"}, "afterCommit": {"oid": "46ffb45b53d22795e9788117b2f1b8dfc53cf118", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/46ffb45b53d22795e9788117b2f1b8dfc53cf118", "committedDate": "2020-05-29T16:22:03Z", "message": "Fix missing timezone param"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzY2MjMw", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421366230", "createdAt": "2020-05-30T01:31:33Z", "commit": {"oid": "77f9e0eca009557a8bdc42314962357e5e18f282"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzczNzI0", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421373724", "createdAt": "2020-05-30T03:25:11Z", "commit": {"oid": "77f9e0eca009557a8bdc42314962357e5e18f282"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzc2MjYw", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421376260", "createdAt": "2020-05-30T04:14:23Z", "commit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDU3MzA3", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421457307", "createdAt": "2020-05-31T02:54:12Z", "commit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMjo1NDoxMlrOGc2ZIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMjo1NDoxMlrOGc2ZIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwNDQ4Mg==", "bodyText": "I think the camel case naming should be like: isReadOnly ?", "url": "https://github.com/TEAMMATES/teammates/pull/10136#discussion_r432904482", "createdAt": "2020-05-31T02:54:12Z", "author": {"login": "Derek-Hardy"}, "path": "src/web/app/components/comment-box/comment-table-modal/comment-table-modal.component.ts", "diffHunk": "@@ -27,16 +27,14 @@ export class CommentTableModalComponent implements OnInit, OnChanges {\n     newCommentRow: {\n       commentEditFormModel: {\n         commentText: '',\n-\n         isUsingCustomVisibilities: false,\n         showCommentTo: [],\n         showGiverNameTo: [],\n       },\n-\n       isEditing: true,\n     },\n-\n     isAddingNewComment: true,\n+    isReadonly: false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDYwODU0", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421460854", "createdAt": "2020-05-31T04:39:29Z", "commit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDY0MTQ0", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421464144", "createdAt": "2020-05-31T06:02:23Z", "commit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNjowMjoyM1rOGc260g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNjowMjoyM1rOGc260g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkxMzEwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                isReadonly: false,\n          \n          \n            \n                isReadOnly: false,", "url": "https://github.com/TEAMMATES/teammates/pull/10136#discussion_r432913106", "createdAt": "2020-05-31T06:02:23Z", "author": {"login": "madanalogy"}, "path": "src/web/app/components/comment-box/comment-table-modal/comment-table-modal.component.ts", "diffHunk": "@@ -27,16 +27,14 @@ export class CommentTableModalComponent implements OnInit, OnChanges {\n     newCommentRow: {\n       commentEditFormModel: {\n         commentText: '',\n-\n         isUsingCustomVisibilities: false,\n         showCommentTo: [],\n         showGiverNameTo: [],\n       },\n-\n       isEditing: true,\n     },\n-\n     isAddingNewComment: true,\n+    isReadonly: false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c723d870a7b2032a7281d427963e1337510cc8c8", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c723d870a7b2032a7281d427963e1337510cc8c8", "committedDate": "2020-05-31T07:41:27Z", "message": "Rename participant-comment-to-comment-row-model pipe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f649967a33e66df187a94f22717e2ac5f552fae6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f649967a33e66df187a94f22717e2ac5f552fae6", "committedDate": "2020-05-31T07:41:27Z", "message": "Rename old pipe to better name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4328a9d4985c40a48c80c1a34207f3421084818", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b4328a9d4985c40a48c80c1a34207f3421084818", "committedDate": "2020-05-31T07:47:11Z", "message": "Add table for instructor comments\n\nNot sure what `isAddingNewComment` field in `model` is doing. Need to\ncheck\nAlso check how to best use a pipe in the other pipe. Is the provider\nfield needed?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "839823f97da12ea1588bb57b19720e053804d72e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/839823f97da12ea1588bb57b19720e053804d72e", "committedDate": "2020-05-31T07:47:11Z", "message": "Rename pipe names to be more accurate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5f34ffa6be1d29b2e401cbcd67dfadd7c2267fe", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b5f34ffa6be1d29b2e401cbcd67dfadd7c2267fe", "committedDate": "2020-05-31T07:47:12Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a66dd248f4700f08b9550eb7aa3e29012f3bdc27", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a66dd248f4700f08b9550eb7aa3e29012f3bdc27", "committedDate": "2020-05-31T07:47:12Z", "message": "Add readonly mode to comment table model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b327844b44d1b6dea35713b8cba9524914d7c5df", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b327844b44d1b6dea35713b8cba9524914d7c5df", "committedDate": "2020-05-31T07:47:12Z", "message": "Refactor pipe, add readonly option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b63e13772c64c7640b116c5a3707ce53dbab61c", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6b63e13772c64c7640b116c5a3707ce53dbab61c", "committedDate": "2020-05-31T07:47:12Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "728fd53d64333a5339840b05d97ec37e6c1f9ad7", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/728fd53d64333a5339840b05d97ec37e6c1f9ad7", "committedDate": "2020-05-31T07:47:12Z", "message": "Fix lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0ee1dbcd03d023b4e88575831258b4f9596619c", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c0ee1dbcd03d023b4e88575831258b4f9596619c", "committedDate": "2020-05-31T07:47:12Z", "message": "Refactor to remove duplicate code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9d5dc09292abb0683a398ca3ad9acc1a805257e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f9d5dc09292abb0683a398ca3ad9acc1a805257e", "committedDate": "2020-05-31T07:47:12Z", "message": "Add pipes to scope"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91cbd03ff66e2dc53da039db97340fa6053413d6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/91cbd03ff66e2dc53da039db97340fa6053413d6", "committedDate": "2020-05-31T07:47:12Z", "message": "Fix missing timezone param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9064f439d6125f386e891b3e5f1ff5c0e4ce2d52", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9064f439d6125f386e891b3e5f1ff5c0e4ce2d52", "committedDate": "2020-05-31T07:47:12Z", "message": "Attempt to fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee06c7709526a0708c238a7ef74457ae07b459b1", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ee06c7709526a0708c238a7ef74457ae07b459b1", "committedDate": "2020-05-31T07:47:12Z", "message": "Update snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97bff24614c3a8223fb3c92e142cf6ac04265ed2", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/97bff24614c3a8223fb3c92e142cf6ac04265ed2", "committedDate": "2020-05-31T07:47:13Z", "message": "Change isReadonly to isReadOnly"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8743178d04ca174d20d143ec0219a3a6e6ed525", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a8743178d04ca174d20d143ec0219a3a6e6ed525", "committedDate": "2020-05-30T03:57:54Z", "message": "Update snapshot"}, "afterCommit": {"oid": "97bff24614c3a8223fb3c92e142cf6ac04265ed2", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/97bff24614c3a8223fb3c92e142cf6ac04265ed2", "committedDate": "2020-05-31T07:47:13Z", "message": "Change isReadonly to isReadOnly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDcyMjQ0", "url": "https://github.com/TEAMMATES/teammates/pull/10136#pullrequestreview-421472244", "createdAt": "2020-05-31T08:20:55Z", "commit": {"oid": "97bff24614c3a8223fb3c92e142cf6ac04265ed2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4326, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}