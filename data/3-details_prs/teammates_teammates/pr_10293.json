{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MjQzNTIx", "number": 10293, "title": "[#9551] Standardize modals", "bodyText": "Fixes #9551\nContinuation / Adaptation of #9843\nNeed some reviews on the approach of calling the modal. (ConfirmationModalModule)\nComponents refactored\n\nquestion-edit-form.component\ninstructor-home-page.component\nStudent-profile-page.component\ncontribution-question-edit-answer-form.component\nContribution-question-statistics.component\nMore-info.component\ninstructor-course-enroll-page.component\nInstructor-help-questions-section.component\nStudent-list.component\ninstructor-session-edit-page.component\ninstructor-course-student-edit-page.component\nInstructor-courses-page.component\nInstructor-course-edit-page.component\nSession-submission-page.component\nAdmin-search-page.component\nRubric-question-edit-details-form.component\nSession-edit-form.component\n\nModals left alone (more complex modals)\n\nCopy-from-other-sessions-modal.component\nCopy-questions-from-other-sessions-modal.component\nCopy-session-modal.component\n#resendPastLinksModal\nResend-results-link-to-students-modal.component\nSaving-complete-modal.component\nSend-reminders-to-student-modal.component\nTemplate-question-modal.component\nUpload-edit-profile-picture-modal.component\nView-role-privileges-modal.component\nSessions-permanent-deletion-confirm-modal.component\nComment-table-modal-component\n\nFor modals left alone, I plan to standarise their style after this PR is merged.\nDeleted modal components\n\nconfirm-delete-comment-modal.component\nCourse-permanent-deletion-confirm-modal.component\nCourse-soft-deletion-confirm-modal.component\nDelete-instructor-confirm-modal.component\nFeedback-session-closed-modal.component\nFeedback-session-closing-soon-modal.component\nFeedback-session-deleted-modal.component\nFeedback-session-not-open-modal.component\nRegenerate-links-confirm-modal.component\nResend-invitation-email-modal.component\nStatus-message-modal.component\nReset-google-id-confirm-modal.component\nConfirm-publishing-session-modal.component\nConfirm-unpublishing-session-modal.component\nconfirm-session-move-to-recycle-bin-modal.component\nConfirm-session-move-to-recycle-bin-modal.component\n\nModal design:\nINFO   | WARNING\nDANGER | NEUTRAL", "createdAt": "2020-07-10T06:00:37Z", "url": "https://github.com/TEAMMATES/teammates/pull/10293", "merged": true, "mergeCommit": {"oid": "2f0dfb7c717d751148b2b35ede2e9713f9f6af61"}, "closed": true, "closedAt": "2020-07-20T13:48:06Z", "author": {"login": "ccyccyccy"}, "timelineItems": {"totalCount": 52, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczgkcHgFqTQ0NjI3NDA0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2xqaaAH2gAyNDQ3MjQzNTIxOjI2ZDNiNzhmMzQ5YjQ4OWQzNTU1NDRhOTUwYjQ1MmY1NzgzOTMzYmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Mjc0MDQ3", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-446274047", "createdAt": "2020-07-10T09:52:59Z", "commit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwOTo1Mjo1OVrOGvxVDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwOTo1Mjo1OVrOGvxVDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ==", "bodyText": "What kind of \"more complicated use case\" do we have right now?", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r452744461", "createdAt": "2020-07-10T09:52:59Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Nzc3MTY3", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-446777167", "createdAt": "2020-07-11T04:30:28Z", "commit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQwNDozMDoyOVrOGwKUsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQwNDozNDo1MVrOGwKV2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1Mzk2OQ==", "bodyText": "I think you can name the method as openSimpleModel.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453153969", "createdAt": "2020-07-11T04:30:29Z", "author": {"login": "xpdavid"}, "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ=="}, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDAwNg==", "bodyText": "Can we give string type for content?", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154006", "createdAt": "2020-07-11T04:30:46Z", "author": {"login": "xpdavid"}, "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDAxOA==", "bodyText": "Better to put definition on the top.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154018", "createdAt": "2020-07-11T04:31:03Z", "author": {"login": "xpdavid"}, "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {\n+    const modalRef: NgbModalRef = this.modalService.open(ConfirmationModalComponent);\n+    modalRef.componentInstance.header = header;\n+    modalRef.componentInstance.content = content;\n+    modalRef.componentInstance.type = type;\n+    if (options) {\n+      Object.entries(options).map(([key, value]: [string, string | boolean]) => {\n+        modalRef.componentInstance[key] = value;\n+      });\n+    }\n+    return modalRef;\n+  }\n+}\n+\n+/**\n+ * isNotificationOnly: true will cause modal to only have 1 button\n+ * confirmMessage: custom text message for confirm button\n+ * cancelMessage: custom text message for cancel button\n+ */\n+export interface ConfirmationModalOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDIzNg==", "bodyText": "The explanation for each field should be put along with field itself.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154236", "createdAt": "2020-07-11T04:34:16Z", "author": {"login": "xpdavid"}, "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {\n+    const modalRef: NgbModalRef = this.modalService.open(ConfirmationModalComponent);\n+    modalRef.componentInstance.header = header;\n+    modalRef.componentInstance.content = content;\n+    modalRef.componentInstance.type = type;\n+    if (options) {\n+      Object.entries(options).map(([key, value]: [string, string | boolean]) => {\n+        modalRef.componentInstance[key] = value;\n+      });\n+    }\n+    return modalRef;\n+  }\n+}\n+\n+/**\n+ * isNotificationOnly: true will cause modal to only have 1 button\n+ * confirmMessage: custom text message for confirm button\n+ * cancelMessage: custom text message for cancel button", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDI2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              constructor(private confirmationModalComponent: ConfirmationModalService,\n          \n          \n            \n              constructor(private confirmationModalService: ConfirmationModalService,", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154264", "createdAt": "2020-07-11T04:34:51Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/comment-box/comment-row/comment-row.component.ts", "diffHunk": "@@ -114,7 +116,8 @@ export class CommentRowComponent implements OnInit, OnChanges {\n \n   visibilityStateMachine: CommentVisibilityStateMachine;\n \n-  constructor(private modalService: NgbModal, private commentService: FeedbackResponseCommentService) {\n+  constructor(private confirmationModalComponent: ConfirmationModalService,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b654e971f57733ebc9baca7335599ad0b9b4b"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99027a56a1a9713d039eb55aa74581d86af03896", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/99027a56a1a9713d039eb55aa74581d86af03896", "committedDate": "2020-07-14T05:36:12Z", "message": "Partial working port of old PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d323d4918bb2bed2ae56a5cd26cdf356a01dbb25", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d323d4918bb2bed2ae56a5cd26cdf356a01dbb25", "committedDate": "2020-07-14T05:36:12Z", "message": "Add notification only modal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0152f9d85db6918b77c6c65c5e6a4f4a980cea57", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0152f9d85db6918b77c6c65c5e6a4f4a980cea57", "committedDate": "2020-07-14T05:36:12Z", "message": "Replace confirm-delete-comment-modal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bc3c32f3a1e8aff26ce0f42bb6ddd1aec1108d5", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8bc3c32f3a1e8aff26ce0f42bb6ddd1aec1108d5", "committedDate": "2020-07-14T05:36:12Z", "message": "Add custom text options for modal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40003eca80a7f8fce01affe49b974a746b1cda3d", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/40003eca80a7f8fce01affe49b974a746b1cda3d", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for student-profile-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bc3942a95cd3f1d8fc6b66e79b5864b353ad609", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2bc3942a95cd3f1d8fc6b66e79b5864b353ad609", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for contribution-question-edit-answer-form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "446606286630ca5f1a87638c416704483ba045e6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/446606286630ca5f1a87638c416704483ba045e6", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for contribution-question-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eee7e6506caee4323464ae12669b4c51e2d98f6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8eee7e6506caee4323464ae12669b4c51e2d98f6", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for more-info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e730cee635aade077163a331153d2f3905478474", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e730cee635aade077163a331153d2f3905478474", "committedDate": "2020-07-14T05:36:12Z", "message": "Rename service to simpleModal from confirmationModal, and fixes from review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "015e2b483d8116c1b3ba438bb72ab497340889f1", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/015e2b483d8116c1b3ba438bb72ab497340889f1", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-course-enroll-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8ec89978adc785aa7faa7697247c396bae0466", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0c8ec89978adc785aa7faa7697247c396bae0466", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-course-student-edit-page.component\n\nDid not convert resendPastLinksModal as it have 3 buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "566db956598fb7fdca73cfb117abdb30278b626f", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/566db956598fb7fdca73cfb117abdb30278b626f", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-help-questions-section.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07e1f3f52297ce0ca9350a17a3e2ddc9616a5bc6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/07e1f3f52297ce0ca9350a17a3e2ddc9616a5bc6", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for student-list.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aaf268c605360f78765ee3156dcc4fff3fd9d2e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4aaf268c605360f78765ee3156dcc4fff3fd9d2e", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-session-edit-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b7f9628800d5a7c3a6a60cfa4ed4a84f56df64", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/92b7f9628800d5a7c3a6a60cfa4ed4a84f56df64", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-courses-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43cdcf511d0ecb8f3330cc04588d98183630c2b5", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/43cdcf511d0ecb8f3330cc04588d98183630c2b5", "committedDate": "2020-07-14T05:36:12Z", "message": "Refactor modals for instructor-course-edit-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "220a73e0b435dc99a2abb3c7163e2aa4e9b2084d", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/220a73e0b435dc99a2abb3c7163e2aa4e9b2084d", "committedDate": "2020-07-14T06:12:18Z", "message": "Refactor modals for session-submission-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a571bfaca0da8f003d382bbfadf07f448fb624f3", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a571bfaca0da8f003d382bbfadf07f448fb624f3", "committedDate": "2020-07-14T06:43:44Z", "message": "Refactor modals for admin-search-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63c051ab0aee10d8c50aebbbf31cb89a151a8ba6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/63c051ab0aee10d8c50aebbbf31cb89a151a8ba6", "committedDate": "2020-07-14T06:58:25Z", "message": "Refactor modals for rubric-question-edit-details-form.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d128f6c1fdcac37da330ed16cfafcc7f79dc71b", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6d128f6c1fdcac37da330ed16cfafcc7f79dc71b", "committedDate": "2020-07-14T07:06:27Z", "message": "Refactor modals for session-edit-form.component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf41eb1c1e3fe67e1e505989ab9c7b6af1b5a284", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/cf41eb1c1e3fe67e1e505989ab9c7b6af1b5a284", "committedDate": "2020-07-13T11:40:17Z", "message": "Refactor modals for instructor-course-edit-page.component"}, "afterCommit": {"oid": "e4893380f355951ddf2ed25cfe245d8789d0be76", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e4893380f355951ddf2ed25cfe245d8789d0be76", "committedDate": "2020-07-14T08:48:34Z", "message": "Remove unused components and update snapshots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "147f1a538c5ab755803c18e928e20d29a9960d34", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/147f1a538c5ab755803c18e928e20d29a9960d34", "committedDate": "2020-07-14T09:13:26Z", "message": "Remove unused components and update snapshots"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4893380f355951ddf2ed25cfe245d8789d0be76", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e4893380f355951ddf2ed25cfe245d8789d0be76", "committedDate": "2020-07-14T08:48:34Z", "message": "Remove unused components and update snapshots"}, "afterCommit": {"oid": "147f1a538c5ab755803c18e928e20d29a9960d34", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/147f1a538c5ab755803c18e928e20d29a9960d34", "committedDate": "2020-07-14T09:13:26Z", "message": "Remove unused components and update snapshots"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "623eb5adb97c1942ff36c7e65ce6b30fd9cc6ba9", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/623eb5adb97c1942ff36c7e65ce6b30fd9cc6ba9", "committedDate": "2020-07-14T09:37:03Z", "message": "Fix bad commits"}, "afterCommit": {"oid": "3f528a10b65e9bbfd049bf134d89d0191afd129e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3f528a10b65e9bbfd049bf134d89d0191afd129e", "committedDate": "2020-07-14T09:48:25Z", "message": "Fix bad commits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f4435c72c344656e08d4a151f12d96cf9842cc8", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6f4435c72c344656e08d4a151f12d96cf9842cc8", "committedDate": "2020-07-14T09:55:15Z", "message": "Fix bad commits"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f528a10b65e9bbfd049bf134d89d0191afd129e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3f528a10b65e9bbfd049bf134d89d0191afd129e", "committedDate": "2020-07-14T09:48:25Z", "message": "Fix bad commits"}, "afterCommit": {"oid": "6f4435c72c344656e08d4a151f12d96cf9842cc8", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6f4435c72c344656e08d4a151f12d96cf9842cc8", "committedDate": "2020-07-14T09:55:15Z", "message": "Fix bad commits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29533a1b8dfc2b743c486f617127bcbc2e5628ee", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/29533a1b8dfc2b743c486f617127bcbc2e5628ee", "committedDate": "2020-07-14T10:00:00Z", "message": "Add error catcher to .then calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be04d3eda31774721ba255933a6c1666feda8f4b", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/be04d3eda31774721ba255933a6c1666feda8f4b", "committedDate": "2020-07-15T07:01:38Z", "message": "Reword confirmation modal headers to be questions, as well as bolding variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NzAxMzA1", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-448701305", "createdAt": "2020-07-15T07:36:15Z", "commit": {"oid": "be04d3eda31774721ba255933a6c1666feda8f4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNzozNjoxNVrOGxx9zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNzozNjoxNVrOGxx9zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg1MjA0Ng==", "bodyText": "We're putting too much of HTML here. If there is this large amount of HTML code necessary, should keep the HTML code inside the HTML file and pass by reference to TemplateRef.\nImplementation reference:\n\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.component.html\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.component.ts\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.ts\n\nUsage example:\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.html\n    \n    \n        Lines 47 to 52\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           <ng-template #newCourseMessageTemplate> \n        \n\n        \n          \n             The course has been added. Click <a routerLink=\"/web/instructor/courses/enroll\" [queryParams]=\"{ courseid: course.courseId }\">here</a> \n        \n\n        \n          \n             to add students to the course or click <a routerLink=\"/web/instructor/courses/edit\" [queryParams]=\"{ courseid: course.courseId }\">here</a> \n        \n\n        \n          \n             to add other instructors.<br>If you don't see the course in the list below, \n        \n\n        \n          \n             please refresh the page after a few moments. \n        \n\n        \n          \n           </ng-template> \n        \n    \n  \n\n\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.ts\n    \n    \n         Line 21\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           @ViewChild('newCourseMessageTemplate') newCourseMessageTemplate!: TemplateRef<any>; \n        \n    \n  \n\n\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.ts\n    \n    \n         Line 72\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           this.statusMessageService.showSuccessToastTemplate(this.newCourseMessageTemplate);", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r454852046", "createdAt": "2020-07-15T07:36:15Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -127,17 +128,186 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n \n-  constructor(private modalService: NgbModal,\n+  constructor(private simpleModalService: SimpleModalService,\n               private pageScrollService: PageScrollService,\n               @Inject(DOCUMENT) private document: any) {\n     super();\n   }\n \n   /**\n-   * Opens modal window.\n+   * Opens modal for contribution info.\n    */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openContribInfoModal(): void {\n+    const modalContent: string = `<div class=\"modal-body\">\n+      <ul>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be04d3eda31774721ba255933a6c1666feda8f4b"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4239e58bccaee2d22e6130ed60d8fc16ca51f8d", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c4239e58bccaee2d22e6130ed60d8fc16ca51f8d", "committedDate": "2020-07-15T12:47:49Z", "message": "Use TemplateRef for large HTML modals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e846040b996cb4bd944f620d508c16094108dd5", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2e846040b996cb4bd944f620d508c16094108dd5", "committedDate": "2020-07-16T05:47:41Z", "message": "Remove PRIMARY modal type as it is very similar to INFO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f2df73f328c937ed0695faf1a18e971c1b33c55", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2f2df73f328c937ed0695faf1a18e971c1b33c55", "committedDate": "2020-07-16T06:32:36Z", "message": "Merge branch 'master' into 9551-standardize-modal"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d5b8c69d855c9d12d7fcd1d2631bd32f0f5f7ed", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8d5b8c69d855c9d12d7fcd1d2631bd32f0f5f7ed", "committedDate": "2020-07-16T08:02:02Z", "message": "e2e test fix"}, "afterCommit": {"oid": "5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "committedDate": "2020-07-16T09:04:17Z", "message": "e2e test fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "committedDate": "2020-07-16T09:04:17Z", "message": "e2e test fix"}, "afterCommit": {"oid": "835c303d057ecc67522a1984d9f64beb522a06a6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/835c303d057ecc67522a1984d9f64beb522a06a6", "committedDate": "2020-07-16T09:28:21Z", "message": "e2e test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "committedDate": "2020-07-16T09:52:08Z", "message": "e2e test fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "835c303d057ecc67522a1984d9f64beb522a06a6", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/835c303d057ecc67522a1984d9f64beb522a06a6", "committedDate": "2020-07-16T09:28:21Z", "message": "e2e test fix"}, "afterCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "committedDate": "2020-07-16T09:52:08Z", "message": "e2e test fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzQ3MzE1", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-450347315", "createdAt": "2020-07-17T03:17:59Z", "commit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzoxODowMFrOGzD9vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzoyMTo1NVrOGzEBXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NTUxOQ==", "bodyText": "Possible to split this method into two? so waitForConfirmationModal() and clickOkOnModal()", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456195519", "createdAt": "2020-07-17T03:18:00Z", "author": {"login": "t-cheepeng"}, "path": "src/e2e/java/teammates/e2e/pageobjects/AdminSearchPage.java", "diffHunk": "@@ -210,7 +204,7 @@ public void resetInstructorGoogleId(InstructorAttributes instructor) {\n         instructorRow.findElement(By.linkText(LINK_TEXT_RESET_GOOGLE_ID)).click();\n         waitForPageToLoad();\n \n-        resetGoogleIdModal.findElement(By.className(\"btn-warning\")).click();\n+        waitForConfirmationModalAndClickOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NjQ0Ng==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456196446", "createdAt": "2020-07-17T03:21:55Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/simple-modal/simple-modal.component.ts", "diffHunk": "@@ -0,0 +1,34 @@\n+import { Component, Input, OnInit, TemplateRef } from '@angular/core';\n+import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from './simple-modal-type';\n+\n+/**\n+ * A component to display contents of confirmation modals.\n+ */\n+@Component({\n+  selector: 'tm-confirmation-modal',\n+  templateUrl: './simple-modal.component.html',\n+  styleUrls: ['./simple-modal.component.scss'],\n+})\n+export class SimpleModalComponent implements OnInit {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzQ2MTE5", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-450346119", "createdAt": "2020-07-17T03:13:02Z", "commit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzoxMzowMlrOGzD5QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzo0MTo1OVrOGzEUGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NDM2OQ==", "bodyText": "The header content should also vary", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456194369", "createdAt": "2020-07-17T03:13:02Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -268,12 +272,18 @@ export class QuestionEditFormComponent implements OnInit {\n   /**\n    * Handle event to discard changes users made.\n    */\n-  discardChangesHandler(modal: any): void {\n+  discardChangesHandler(isNewQuestion: boolean): void {\n     if (!this.model.isChanged) {\n       this.discardChanges();\n       return;\n     }\n-    this.modalService.open(modal).result.then(() => {\n+    const modalContent: string = isNewQuestion ?\n+        'Are you sure you want to delete this question?' :\n+        'Are you sure you want to discard your unsaved edits?';\n+\n+    const modalRef: NgbModalRef = this.simpleModalService\n+        .openConfirmationModal('Discard unsaved changes?', SimpleModalType.WARNING, modalContent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NjczMA==", "bodyText": "I think this is complicated (for the lack of other term) enough to be extracted out to template.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456196730", "createdAt": "2020-07-17T03:23:08Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.ts", "diffHunk": "@@ -44,10 +45,13 @@ export class ContributionQuestionEditAnswerFormComponent\n     return points;\n   }\n \n-  /**\n-   * Opens a modal.\n-   */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openHelpModal(): void {\n+    const modalHeader: string = 'More info about the <code>Equal Share</code> scale';\n+    const modalContent: string = `\n+        <p><code>Equal share</code> is a relative measure of individual contribution to a team task.</p>\n+        <p>For example, in a 3-person team, <code>Equal share</code> means a third of the work done.</p>\n+        <p><code>Equal share + 10%</code> means the person did about 10% <em>more</em> than an equal share,\n+            <code>Equal share - 10%</code> means about 10% <em>less</em> than an equal share, and so on.</p>`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5Nzg3NQ==", "bodyText": "This is creating an unnecessary diff now. Let's put this modal to the bottom of the HTML file, like how it was done before.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456197875", "createdAt": "2020-07-17T03:28:15Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.html", "diffHunk": "@@ -19,7 +19,55 @@\n             <span *ngIf=\"i !== 0\">,&nbsp;</span>\n             <tm-contribution [value]=\"other\"></tm-contribution>\n           </span>\n-          &nbsp;<a (click)=\"openModal(contribInfoModal)\" [routerLink]=\"\" queryParamsHandling=\"preserve\"><i class=\"fas fa-info-circle\"></i></a>\n+          &nbsp;<a (click)=\"openHelpModal()\" [routerLink]=\"\" queryParamsHandling=\"preserve\"><i class=\"fas fa-info-circle\"></i></a>\n+          <ng-template #contributionHelpModal>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5ODE1Mw==", "bodyText": "I can close one eye if it takes too much effort to undo, but all the changes in this file between the constructor definition and this line are unrelated?", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456198153", "createdAt": "2020-07-17T03:29:28Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.ts", "diffHunk": "@@ -90,18 +111,17 @@ export class ContributionQuestionStatisticsComponent extends ContributionQuestio\n         {\n           customComponent: {\n             component: ContributionRatingsListComponent,\n-            componentData: { ratingsList: statistics.results[email].perceivedOthers },\n+            componentData: {\n+              ratingsList: statistics.results[email].perceivedOthers,\n+            },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5OTA2Mw==", "bodyText": "This also should be kept as template.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456199063", "createdAt": "2020-07-17T03:33:06Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -126,18 +127,38 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n   };\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n+  @ViewChild('contributionTemplateBody') contributionTemplateBody!: TemplateRef<any>;\n \n-  constructor(private modalService: NgbModal,\n+  constructor(private simpleModalService: SimpleModalService,\n               private pageScrollService: PageScrollService,\n               @Inject(DOCUMENT) private document: any) {\n     super();\n   }\n \n   /**\n-   * Opens modal window.\n+   * Opens modal for contribution info.\n    */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openContribInfoModal(): void {\n+    this.simpleModalService.openInformationModal(\n+        'Team contribution calculation', SimpleModalType.NEUTRAL, this.contributionTemplateBody);\n+  }\n+\n+  /**\n+   * Opens modal for rank info.\n+   */\n+  openRankInfoModal(): void {\n+    const modalContent: string = `<ul>\n+      <li>\n+        <b>Ranks Received</b> is a list of the actual ranks each recipient received. TEAMMATES processes the original responses, handling ties and unused ranks.\n+        For example, if giver A's original response is <code>(1, 3, 3, 5)</code> and Rank 5 is given to recipient B, after the processing, giver A's response will become <code>(1, 2, 2, 4)</code> and recipient B will have a Rank 4 in his/her <b>Ranks Received</b>, instead of the Rank 5 in the original response by giver A.\n+      </li>\n+      <li>\n+        The <b>Overall Rank</b> ranks the average rank each recipient receives.\n+        For example, if recipient A received the ranks <code>(1, 2)</code> and recipient B received the ranks <code>(2, 4, 6)</code>, then recipient A and recipient B's average ranks are 1.5 and 4 respectively. By ranking these two averages, recipient A and B will get an <b>Overall Rank</b> of 1 and 2 respectively.\n+      </li>\n+    </ul>`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDE1Nw==", "bodyText": "This is not the same as the previous implementation. You may want to check it again.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200157", "createdAt": "2020-07-17T03:37:25Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/student-profile/more-info/more-info.component.ts", "diffHunk": "@@ -14,16 +15,18 @@ export class MoreInfoComponent implements OnInit {\n   @Input() studentName: string = '';\n   @Input() moreInfoText: string = '';\n \n-  constructor(private ngbModal: NgbModal) { }\n+  constructor(private simpleModalService: SimpleModalService) { }\n \n   ngOnInit(): void {\n   }\n \n   /**\n    * Open the more info modal.\n    */\n-  openModal(content: any): void {\n-    this.ngbModal.open(content);\n+  openMoreInfoModal(): void {\n+    this.simpleModalService\n+        .openInformationModal(`<strong>${this.studentName}<strong>\\'s Profile - More Info`, SimpleModalType.NEUTRAL,\n+            this.moreInfoText, { confirmMessage: 'Close' });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDU1NQ==", "bodyText": "typo: parameters", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200555", "createdAt": "2020-07-17T03:39:12Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDY1NQ==", "bodyText": "... there is should be 2 buttons ...", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200655", "createdAt": "2020-07-17T03:39:37Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDc5Nw==", "bodyText": "Can be private?", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200797", "createdAt": "2020-07-17T03:40:04Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal\n+  confirmMessage?: string; // custom text message for confirm button\n+  cancelMessage?: string; // custom text message for cancel button\n+}\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class SimpleModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code SimpleModalOptions}\n+   */\n+  open(header: string, type: SimpleModalType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMTI0MA==", "bodyText": "We (or I, because I started it) did name it modalService before, but let's keep it close to the original name and call it ngbModal. Also because naming it modalService is too similar to this service's name.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456201240", "createdAt": "2020-07-17T03:41:59Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal\n+  confirmMessage?: string; // custom text message for confirm button\n+  cancelMessage?: string; // custom text message for cancel button\n+}\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class SimpleModalService {\n+\n+  constructor(private modalService: NgbModal) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a7d01c363b57d4e485d82f410f0c191714e430c", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8a7d01c363b57d4e485d82f410f0c191714e430c", "committedDate": "2020-07-17T05:28:03Z", "message": "Make modalContents a bit more detailed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5afbfdb44aa4cde1020b66b53fd74004f69af3a0", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5afbfdb44aa4cde1020b66b53fd74004f69af3a0", "committedDate": "2020-07-17T05:35:06Z", "message": "Refactor complex html to TemplateRef"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8f4f9c2ed26a444748a507c7dd344298fcbf1d9", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d8f4f9c2ed26a444748a507c7dd344298fcbf1d9", "committedDate": "2020-07-17T06:12:13Z", "message": "Refactor modals for instructor-course-detail-page.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20f7ceea2be5b548bee04937dc7c9cf2a00c633c", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/20f7ceea2be5b548bee04937dc7c9cf2a00c633c", "committedDate": "2020-07-17T08:12:32Z", "message": "miscellaneous fixes from review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/12147dbfd3f7de9240c6f20106378efbb5436656", "committedDate": "2020-07-17T08:12:39Z", "message": "Rename all modalService to ngbModal"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "732c47550fe98ee71de93e3c67033711b90d300e", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/732c47550fe98ee71de93e3c67033711b90d300e", "committedDate": "2020-07-17T07:02:15Z", "message": "Rename all modalService to ngbModal"}, "afterCommit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/12147dbfd3f7de9240c6f20106378efbb5436656", "committedDate": "2020-07-17T08:12:39Z", "message": "Rename all modalService to ngbModal"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDg0NDk0", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-451084494", "createdAt": "2020-07-18T21:55:59Z", "commit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMTo1NjowMFrOGzqzFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMjowNTo0NFrOGzq1zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMTc2NA==", "bodyText": "Nitpicking, this can be in the previous line.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456831764", "createdAt": "2020-07-18T21:56:00Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -290,13 +296,20 @@ export class QuestionEditFormComponent implements OnInit {\n   /**\n    * Saves the question.\n    */\n-  saveQuestionHandler(modal: any): void {\n+  saveQuestionHandler(): void {\n     if (this.formMode === QuestionEditFormMode.EDIT) {\n       // alert user that editing question may result in deletion of responses\n       if (!this.model.isQuestionHasResponses || !this.model.isChanged) {\n         this.saveExistingQuestionEvent.emit();\n       } else {\n-        this.modalService.open(modal).result.then(() => {\n+        const modalContent: string = `\n+            <p>Editing fields affecting responders' answers may result in <b>all existing responses for this question to be deleted.</b></p>\n+            <p>Are you sure you want to continue?</p>\n+        `;\n+        const modalRef: NgbModalRef = this.simpleModalService\n+            .openConfirmationModal('Save the question?',\n+                SimpleModalType.DANGER, modalContent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjEwNQ==", "bodyText": "You can make equalShareHelp as a argument here so you don't need to declare @ViewChild('equalShareHelp')", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832105", "createdAt": "2020-07-18T22:00:53Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.ts", "diffHunk": "@@ -44,10 +47,8 @@ export class ContributionQuestionEditAnswerFormComponent\n     return points;\n   }\n \n-  /**\n-   * Opens a modal.\n-   */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openHelpModal(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjE0MQ==", "bodyText": "Same here.", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832141", "createdAt": "2020-07-18T22:01:23Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.html", "diffHunk": "@@ -60,57 +60,51 @@\n     </div>\n   </div>\n </div>\n-\n-<ng-template #contribInfoModal let-modal>\n-  <div class=\"modal-header\">\n-    <h4 class=\"modal-title\">More info about contribution questions</h4>\n-  </div>\n-  <div class=\"modal-body\">\n-    <h4>How do I interpret these results?</h4>\n-    <ul>\n-      <li>\n-        Compare the values given in 'My view' with those under 'Team's view'.\n-        This tells you whether your perception matches what the team thinks, particularly regarding your own contribution.\n-        You may ignore minor differences.\n-      </li>\n-      <li>\n-        From the estimates you submit, we try to deduce the answer to this question:\n-        In your opinion, if your teammates are doing the project by themselves without you,\n-        how do they compare against each other in terms of contribution?\n-        We want to deduce your unbiased opinion about your team members' contributions.\n-      </li>\n-    </ul>\n-    <h4>How are contribution question results used in grading?</h4>\n-    <ul>\n-      <li>\n-        TEAMMATES does not calculate grades. Instructors are free to choose how they use contribution question results.\n-      </li>\n-      <li>\n-        TEAMMATES recommends that contribution question results be used only as flags to identify teams with contribution imbalances.\n-        Once identified, the instructor is recommended to investigate further before taking action.\n-      </li>\n-    </ul>\n-    <h4>How are the scores for contribution questions calculated?</h4>\n-    <p>\n-      Here are the important things to note about\n-      <a href=\"/web/front/help/instructor#team-contribution-questions\" rel=\"noopener noreferrer\" target=\"_blank\">how contribution scores are calculated</a>:\n-    </p>\n-    <ul>\n-      <li>\n-        The contribution value you attribute to yourself is not used to calculate the team's view of your contribution.\n-        That means you cannot boost your perceived contribution by claiming a high contribution for yourself\n-        or attributing a low contribution to team members.\n-      </li>\n-      <li>\n-        We adjust the estimates you submitted to remove artificial inflation/deflation.\n-        For example, giving everyone <code>[Equal share + 20%]</code> is as same as giving everyone\n-        <code>[Equal share]</code> because in both cases all members have done a similar share of work.\n-      </li>\n-      <li>\n-        The sum of values in the team's view has been scaled to equal the sum of values in your view.\n-        That way, you can make a direct comparison between your view and the team's view.\n-        As this scaling is specific to you, the values you see in team's view may not match the values your team members see in their results.\n-      </li>\n-    </ul>\n-  </div>\n+<ng-template #contributionHelpModal>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjQ2MA==", "bodyText": "And in multiple cases", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832460", "createdAt": "2020-07-18T22:05:44Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -126,18 +127,29 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n   };\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n+  @ViewChild('contributionTemplateBody') contributionTemplateBody!: TemplateRef<any>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f80231648c43a8d476c5b4ef4b2f76b0c7d6b05f", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f80231648c43a8d476c5b4ef4b2f76b0c7d6b05f", "committedDate": "2020-07-20T03:31:35Z", "message": "Merge branch 'master' into 9551-standardize-modal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e804e925b0cdf1172d66aaf857ae6c638767d246", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e804e925b0cdf1172d66aaf857ae6c638767d246", "committedDate": "2020-07-20T03:58:20Z", "message": "Convert template to be passed in as argument instead of using ViewChild"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d6e532132b50972f29b4491f1df18d269077d67", "author": {"user": {"login": "ccyccyccy", "name": "Chong Chee Yuan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7d6e532132b50972f29b4491f1df18d269077d67", "committedDate": "2020-07-20T07:14:33Z", "message": "Merge branch 'master' into 9551-standardize-modal"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNjA1NDE0", "url": "https://github.com/TEAMMATES/teammates/pull/10293#pullrequestreview-451605414", "createdAt": "2020-07-20T13:29:30Z", "commit": {"oid": "7d6e532132b50972f29b4491f1df18d269077d67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26d3b78f349b489d355544a950b452f5783933ba", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/26d3b78f349b489d355544a950b452f5783933ba", "committedDate": "2020-07-20T13:29:40Z", "message": "Merge branch 'master' into 9551-standardize-modal"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4281, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}