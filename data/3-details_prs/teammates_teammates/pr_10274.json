{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzOTc5NDY1", "number": 10274, "title": "[#10245] UAT Round 2: Fix Help Page Links", "bodyText": "Part of #10245, Fixes #10003\nFixes\n\nInstructor help page: link fragments (the part at the end of links at the end that looks #like-this) are not respected. Proper link fragments should cause the page to scroll to the specified id.\n\n\nOutline of Solution\n\nSwitch from fragments to queryParams\nAdded scroll to question\nAdded expand method to base class and implemented them in the different sections\nRefactored out the different id's used to control collapsing and links", "createdAt": "2020-07-03T10:20:08Z", "url": "https://github.com/TEAMMATES/teammates/pull/10274", "merged": true, "mergeCommit": {"oid": "0b8966c9a72a6f7c5d60a187f70bec2790da008b"}, "closed": true, "closedAt": "2020-07-10T12:47:10Z", "author": {"login": "t-cheepeng"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxQX-DAH2gAyNDQzOTc5NDY1OjliMmZmODNkZWE1MzdjM2VmMjdjYzM0ODI5NTViZTEwZWY1MjhjYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczi2BgAH2gAyNDQzOTc5NDY1OjAyZmIwYjMxMDgxMjU2ZGJmMDI5MzM5YTkzYmMwNmZhM2E2ZGRlMjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9b2ff83dea537c3ef27cc3482955be10ef528cbc", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9b2ff83dea537c3ef27cc3482955be10ef528cbc", "committedDate": "2020-07-03T09:53:02Z", "message": "Change fragment to queryParams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec202651869f9d2368dbfd7fea42f046900b6ed3", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ec202651869f9d2368dbfd7fea42f046900b6ed3", "committedDate": "2020-07-03T09:53:36Z", "message": "Add in missing anchors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa54c400b6ac0d1ab07d6195175c64fd24f5375e", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/aa54c400b6ac0d1ab07d6195175c64fd24f5375e", "committedDate": "2020-07-03T09:53:48Z", "message": "Add scrolling logic in help page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47153471d71fea36d2154f2e9917cd19b113f15c", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/47153471d71fea36d2154f2e9917cd19b113f15c", "committedDate": "2020-07-03T10:11:58Z", "message": "Update tests and fix lint issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b87462fbbe9c5bdadceb9f473dd1cb1510c359f7", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b87462fbbe9c5bdadceb9f473dd1cb1510c359f7", "committedDate": "2020-07-03T10:20:21Z", "message": "Merge branch 'master' into 10245-help-page-links"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNzMxMDM1", "url": "https://github.com/TEAMMATES/teammates/pull/10274#pullrequestreview-442731035", "createdAt": "2020-07-06T01:36:37Z", "commit": {"oid": "b87462fbbe9c5bdadceb9f473dd1cb1510c359f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwMTozNjozN1rOGtGh3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwMTozNjozN1rOGtGh3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0NjA3OA==", "bodyText": "The scrolling actions seems a bit too slow (based on the screenshot provided)\nJust scrolling is not sufficient; the relevant help section needs to be expanded", "url": "https://github.com/TEAMMATES/teammates/pull/10274#discussion_r449946078", "createdAt": "2020-07-06T01:36:37Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-help/instructor-help-page/instructor-help-page.component.ts", "diffHunk": "@@ -22,14 +24,22 @@ export class InstructorHelpPageComponent implements OnInit, AfterViewInit {\n \n   @ViewChild('helpPage') bodyRef ?: ElementRef;\n \n-  constructor(private route: ActivatedRoute) { }\n+  constructor(private route: ActivatedRoute,\n+              private pageScrollService: PageScrollService,\n+              @Inject(DOCUMENT) private document: Document) { }\n \n   ngOnInit(): void {\n   }\n \n   ngAfterViewInit(): void {\n-    this.route.fragment.subscribe((f: string) => {\n-      this.scroll(f);\n+    this.route.queryParams.subscribe((queryParam: Params) => {\n+      if (queryParam.questionId) {\n+        setTimeout(() => this.pageScrollService.scroll({\n+          document: this.document,\n+          scrollTarget: `#${queryParam.questionId}`,\n+          scrollOffset: 70,\n+        }), 500);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b87462fbbe9c5bdadceb9f473dd1cb1510c359f7"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07b389f7b3944aaf94ed602a82483fc3a153340e", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/07b389f7b3944aaf94ed602a82483fc3a153340e", "committedDate": "2020-07-06T03:28:37Z", "message": "Merge branch 'master' into 10245-help-page-links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bea2fbebef8fd5a401406a4c22561a28c7cfc89", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2bea2fbebef8fd5a401406a4c22561a28c7cfc89", "committedDate": "2020-07-06T11:01:10Z", "message": "Refactor out questions ids of each section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23fd403175d6b01f7e55fd01b76a2aa5c9a38c50", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/23fd403175d6b01f7e55fd01b76a2aa5c9a38c50", "committedDate": "2020-07-06T11:01:15Z", "message": "Add expand method to base class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "559a2eb17a06dc6c7a0cfa7c4ce07c10591f5c3a", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/559a2eb17a06dc6c7a0cfa7c4ce07c10591f5c3a", "committedDate": "2020-07-06T11:04:07Z", "message": "Add expand to child class and refactor collapse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8e8a4509995b08c6b9b31a0b68bcaba13898c4a", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d8e8a4509995b08c6b9b31a0b68bcaba13898c4a", "committedDate": "2020-07-06T11:04:11Z", "message": "Add expansion of tab after scroll ends"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f86285103bf4e02a5053521eb99c58b80ee10c05", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f86285103bf4e02a5053521eb99c58b80ee10c05", "committedDate": "2020-07-06T11:04:35Z", "message": "Change strings to use refactored enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e9383f6298729677bb3ec0bc28069e1400920fa", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1e9383f6298729677bb3ec0bc28069e1400920fa", "committedDate": "2020-07-06T11:05:34Z", "message": "Cover remaining links to help page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NzY2OTg1", "url": "https://github.com/TEAMMATES/teammates/pull/10274#pullrequestreview-444766985", "createdAt": "2020-07-08T13:31:50Z", "commit": {"oid": "1e9383f6298729677bb3ec0bc28069e1400920fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d08a6a340f48f8ae13e7c749ed02af71d6a3f1", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/58d08a6a340f48f8ae13e7c749ed02af71d6a3f1", "committedDate": "2020-07-09T08:47:39Z", "message": "Merge branch 'master' into 10245-help-page-links"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDQyODkx", "url": "https://github.com/TEAMMATES/teammates/pull/10274#pullrequestreview-446042891", "createdAt": "2020-07-09T23:59:41Z", "commit": {"oid": "58d08a6a340f48f8ae13e7c749ed02af71d6a3f1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMzo1OTo0MVrOGvloMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMzo1OTo0MVrOGvloMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU1Mjc1NA==", "bodyText": "Looks like this is not needed anymore", "url": "https://github.com/TEAMMATES/teammates/pull/10274#discussion_r452552754", "createdAt": "2020-07-09T23:59:41Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-help/instructor-help-page/instructor-help-courses-section/instructor-help-courses-section.component.ts", "diffHunk": "@@ -16,29 +19,37 @@ import { InstructorHelpSectionComponent } from '../instructor-help-section.compo\n })\n export class InstructorHelpCoursesSectionComponent extends InstructorHelpSectionComponent implements OnInit {\n \n+  // enum\n+  StudentsSectionQuestions: typeof StudentsSectionQuestions = StudentsSectionQuestions;\n+  CoursesSectionQuestions: typeof CoursesSectionQuestions = CoursesSectionQuestions;\n+  Sections: typeof Sections = Sections;\n+\n   readonly supportEmail: string = environment.supportEmail;\n \n-  isAddStudentsCollapsed: boolean = false;\n-  isSizeLimitCollapsed: boolean = false;\n-  isNoTeamsCollapsed: boolean = false;\n-  isSectionsCollapsed: boolean = false;\n-  isEnrollSectionsCollapsed: boolean = false;\n-  isAddInstructorCollapsed: boolean = false;\n-  isEditInstructorCollapsed: boolean = false;\n-  isInstructorAccessCollapsed: boolean = false;\n-  isPrivilegesCollapsed: boolean = false;\n-  isViewStudentsCollapsed: boolean = false;\n-  isChangeSectionCollapsed: boolean = false;\n-  isDisappearedCourseCollapsed: boolean = false;\n-  isDelStudentsCollapsed: boolean = false;\n-  isArchiveCourseCollapsed: boolean = false;\n-  isViewArchivedCollapsed: boolean = false;\n-  isCourseUnarchiveCollapsed: boolean = false;\n-  isViewDelCollapsed: boolean = false;\n-  isRestoreCollapsed: boolean = false;\n-  isDelCollapsed: boolean = false;\n-  isRestoreAllCollapsed: boolean = false;\n-  @Output() collapseStudentEditDetails: EventEmitter<boolean> = new EventEmitter<boolean>();\n+  questionsToCollapsed: Record<string, boolean> = {\n+    [CoursesSectionQuestions.COURSE_ADD_STUDENTS]: false,\n+    [CoursesSectionQuestions.SIZE_LIMIT]: false,\n+    [CoursesSectionQuestions.NO_TEAMS]: false,\n+    [CoursesSectionQuestions.SECTIONS]: false,\n+    [CoursesSectionQuestions.ENROLL_SECTIONS]: false,\n+    [CoursesSectionQuestions.COURSE_ADD_INSTRUCTOR]: false,\n+    [CoursesSectionQuestions.COURSE_EDIT_INSTRUCTOR]: false,\n+    [CoursesSectionQuestions.COURSE_INSTRUCTOR_ACCESS]: false,\n+    [CoursesSectionQuestions.PRIVILEGES]: false,\n+    [CoursesSectionQuestions.COURSE_VIEW_STUDENTS]: false,\n+    [CoursesSectionQuestions.CHANGE_SECTION]: false,\n+    [CoursesSectionQuestions.DISAPPEARED_COURSE]: false,\n+    [CoursesSectionQuestions.DEL_STUDENTS]: false,\n+    [CoursesSectionQuestions.COURSE_ARCHIVE]: false,\n+    [CoursesSectionQuestions.COURSE_VIEW_ARCHIVED]: false,\n+    [CoursesSectionQuestions.COURSE_UNARCHIVE]: false,\n+    [CoursesSectionQuestions.COURSE_VIEW_DELETED]: false,\n+    [CoursesSectionQuestions.COURSE_RESTORE]: false,\n+    [CoursesSectionQuestions.PERM_DEL]: false,\n+    [CoursesSectionQuestions.RESTORE_ALL]: false,\n+  };\n+\n+  @Output() collapseStudentEditDetails: EventEmitter<any> = new EventEmitter();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d08a6a340f48f8ae13e7c749ed02af71d6a3f1"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02fb0b31081256dbf029339a93bc06fa3a6dde28", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/02fb0b31081256dbf029339a93bc06fa3a6dde28", "committedDate": "2020-07-10T12:32:00Z", "message": "Merge branch 'master' into 10245-help-page-links"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4271, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}