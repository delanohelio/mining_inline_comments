{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MDQxMDU5", "number": 10288, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyMDoyN1rOEM_Knw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1OTowOVrOENrLdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDUzMjc5OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyMDoyN1rOGvaqjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMzoyNzozMVrOGvorGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3MzEzMw==", "bodyText": "The sorting should be done at the root page? (single point of truth?)", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452373133", "createdAt": "2020-07-09T17:20:27Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "diffHunk": "@@ -70,9 +72,28 @@ export class CommentTableComponent implements OnInit {\n   @Output()\n   updateCommentEvent: EventEmitter<number> = new EventEmitter();\n \n-  constructor() { }\n+  constructor(private tableComparatorService: TableComparatorService) { }\n \n   ngOnInit(): void {\n+    this.sortComments();\n+  }\n+\n+  ngOnChanges(): void {\n+    this.sortComments();\n+  }\n+\n+  /**\n+   * Sorts the comments by last edited date.\n+   */\n+  sortComments(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU5OTM4Nw==", "bodyText": "There's quite a bit of pages that uses the comment table component other than session result ones and those pages don't have comments pre-processed. So i was thinking if there was an alternative way to do the sorting? Or would the only option be to preprocess comments at these pages too?", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452599387", "createdAt": "2020-07-10T03:12:20Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "diffHunk": "@@ -70,9 +72,28 @@ export class CommentTableComponent implements OnInit {\n   @Output()\n   updateCommentEvent: EventEmitter<number> = new EventEmitter();\n \n-  constructor() { }\n+  constructor(private tableComparatorService: TableComparatorService) { }\n \n   ngOnInit(): void {\n+    this.sortComments();\n+  }\n+\n+  ngOnChanges(): void {\n+    this.sortComments();\n+  }\n+\n+  /**\n+   * Sorts the comments by last edited date.\n+   */\n+  sortComments(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3MzEzMw=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYwMTc4Nw==", "bodyText": "The main concert here is we break the single point of truth. The parent component losses control on the model.\n\nThere's quite a bit of pages\n\nThere are only two if I am not wrong? We don't need the help page example box to be sorted.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452601787", "createdAt": "2020-07-10T03:23:45Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "diffHunk": "@@ -70,9 +72,28 @@ export class CommentTableComponent implements OnInit {\n   @Output()\n   updateCommentEvent: EventEmitter<number> = new EventEmitter();\n \n-  constructor() { }\n+  constructor(private tableComparatorService: TableComparatorService) { }\n \n   ngOnInit(): void {\n+    this.sortComments();\n+  }\n+\n+  ngOnChanges(): void {\n+    this.sortComments();\n+  }\n+\n+  /**\n+   * Sorts the comments by last edited date.\n+   */\n+  sortComments(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3MzEzMw=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYwMjY1MQ==", "bodyText": "Got it. then will stick with preprocessing the comments since help page doesn't need to be sorted", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452602651", "createdAt": "2020-07-10T03:27:31Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "diffHunk": "@@ -70,9 +72,28 @@ export class CommentTableComponent implements OnInit {\n   @Output()\n   updateCommentEvent: EventEmitter<number> = new EventEmitter();\n \n-  constructor() { }\n+  constructor(private tableComparatorService: TableComparatorService) { }\n \n   ngOnInit(): void {\n+    this.sortComments();\n+  }\n+\n+  ngOnChanges(): void {\n+    this.sortComments();\n+  }\n+\n+  /**\n+   * Sorts the comments by last edited date.\n+   */\n+  sortComments(): void {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3MzEzMw=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDU0NjY0OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyNDoxNlrOGvay8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyNDoxNlrOGvay8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NTI4Mw==", "bodyText": "You can make this to return void Observable to indicate the completion and subscribe it.\nIf you think it is overkill, I would suggest just keep parameter index as (index and model refer to the same thing)", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452375283", "createdAt": "2020-07-09T17:24:16Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.ts", "diffHunk": "@@ -198,9 +198,9 @@ export class InstructorHomePageComponent extends InstructorSessionModalPageCompo\n   }\n \n   /**\n-   * Loads the feedback session in the course.\n+   * Loads the feedback session in the course and sorts them according to end date.\n    */\n-  loadFeedbackSessions(model: CourseTabModel): void {\n+  loadFeedbackSessions(model: CourseTabModel, index: number): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDU1NjQ3OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyNzoxNlrOGva5aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo0NzowM1rOGwajMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg==", "bodyText": "Is it possible to do this more explicitly?", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452376936", "createdAt": "2020-07-09T17:27:16Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU5OTg1Mw==", "bodyText": "What do you mean by doing it more explicitly? Like the parent component has to call the method?", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452599853", "createdAt": "2020-07-10T03:14:43Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYwMDQ1NQ==", "bodyText": "Use SortBy.* instead of initial column index or leftmost sortable column.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452600455", "createdAt": "2020-07-10T03:17:25Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxNTIxNw==", "bodyText": "See if you can reuse/remove the sorting logic in the CSV generation code (as the sortable table is related to question stats and CSV has a deterministic order for question stats).", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452615217", "createdAt": "2020-07-10T04:25:50Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY2MTM0Nw==", "bodyText": "resuse/remove the sorting logic in the csv generation code\n\nWill look into this", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452661347", "createdAt": "2020-07-10T07:07:09Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxOTgyNw==", "bodyText": "The only way i can see resuse is to add some sort method to the *-calculation class. But it seems to be break the purpose of the class since it is supposed to be for calculation of statistics only. Don't think that it brings about much benefit also since they have very different logic(the one in CSV and the one in sortable table). Unless I'm missing something?", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453419827", "createdAt": "2020-07-13T03:47:03Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg=="}, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzczMzkzOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1MTo1MFrOGwam9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1MTo1MFrOGwam9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMDc4OA==", "bodyText": "Can we make this as @Input() (take place of initialSortBy )\nI just realize this break the promise of @Input().", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453420788", "createdAt": "2020-07-13T03:51:50Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -49,6 +49,9 @@ export class SortableTableComponent implements OnInit {\n   @Input()\n   rows: SortableTableCellData[][] = [];\n \n+  @Input()\n+  initialSortBy: SortBy = SortBy.NONE;\n+\n   columnToSortBy: string = '';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzczOTQwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-comments.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1NjowMlrOGwaqIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1NjowMlrOGwaqIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMTYwMA==", "bodyText": "I think it is unnecessary to add sorting when CUD are happening.\n\nDelete won't affect the order\nFor update, we could have a recent edited comment jumping from the first row to the last row. I don't think user will expect this. I don't think V6 has this behavior either. We should sort by created data instead. However, if we do this, them, update won't affect the order also\nFor create, the order won't be affected as we do append.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453421600", "createdAt": "2020-07-13T03:56:02Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-comments.component.ts", "diffHunk": "@@ -125,8 +130,18 @@ export abstract class InstructorCommentsComponent {\n             },\n             isAddingNewComment: false,\n           };\n+          this.sortComments(this.instructorCommentTableModel[responseId]);\n         }, (resp: ErrorMessageOutput) => {\n           this.statusMessageService.showErrorToast(resp.error.message);\n         });\n   }\n+\n+  sortComments(commentTable: CommentTableModel): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzc0MzkxOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1OTowOVrOGwasuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1OTowOVrOGwasuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMjI2Nw==", "bodyText": "Although this work, can we do this with .pipe or other method. The current solution looks like a hack as it sort the list every time when activeCourses is udpated.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453422267", "createdAt": "2020-07-13T03:59:09Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.ts", "diffHunk": "@@ -94,6 +90,7 @@ export class InstructorCoursesPageComponent implements OnInit {\n           const canModifyStudent: boolean = instructorPrivilege.canModifyStudent;\n           const activeCourse: CourseModel = Object.assign({}, { course, canModifyCourse, canModifyStudent });\n           this.activeCourses.push(activeCourse);\n+          this.sortCoursesEvent(SortBy.COURSE_CREATION_DATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3600, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}