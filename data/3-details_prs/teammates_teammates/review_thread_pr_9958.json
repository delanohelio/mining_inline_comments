{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODY1NDk3", "number": 9958, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyMDo1MlrODgPDsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNjowMVrODgPEnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3NzMxOnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyMDo1MlrOFqVWMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMTo1MDowMVrOFqVd3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDI1Ng==", "bodyText": "Forget to change?", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934256", "createdAt": "2020-02-16T21:20:52Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNjIyMA==", "bodyText": "Updated javadoc to reflect on the actual test.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379936220", "createdAt": "2020-02-16T21:50:01Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDI1Ng=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3ODE0OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyMjoyN1rOFqVWmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMTozMDo1MFrOFqVY1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDM2Mg==", "bodyText": "sleep for?", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934362", "createdAt": "2020-02-16T21:22:27Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionSubmitLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.STUDENTS)\n+                            .withRecipientType(FeedbackParticipantType.SELF)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .withNumberOfEntitiesToGiveFeedbackTo(1)\n+                            .build()\n+                );\n+\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+                headers.add(\"studentEmail\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(FEEDBACK_SESSION_NAME);\n+                    csvRow.add(student.email);\n+\n+                    csvData.add(csvRow);\n+\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    private Map<String, String> getRequestHeaders() {\n+        Map<String, String> headers = new LinkedHashMap<>();\n+\n+        headers.put(\"X-CSRF-TOKEN\", \"${csrfToken}\");\n+        headers.put(\"Content-Type\", \"application/json\");\n+\n+        return headers;\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler())\n+                .add(JMeterElements.csrfExtractor(\"csrfToken\"));\n+\n+        HeaderManager headerManager = JMeterElements.headerManager(getRequestHeaders());\n+        threadGroup.add(headerManager);\n+\n+        //Backdoor to retrieve questionId which is generated only on backend server\n+        String fqId = BackDoor.getFeedbackQuestionId(COURSE_ID, FEEDBACK_SESSION_NAME, 1);\n+\n+        String body = \"{\\\"questionType\\\": \\\"TEXT\\\",\"\n+                + \"\\\"recipientIdentifier\\\": \\\"${studentEmail}\\\",\"\n+                + \"\\\"responseDetails\\\": {\\\"answer\\\": \\\"<p>test</p>\\\", \\\"questionType\\\": \\\"TEXT\\\"}}\";\n+        String fourthPath = \"webapi/response?questionid=\" + fqId\n+                                    + \"&intent=STUDENT_SUBMISSION\";\n+        threadGroup.add(JMeterElements.httpSampler(fourthPath, POST, body));\n+\n+        return testPlan;\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        createTestData();\n+        persistTestData();\n+    }\n+\n+    @Test\n+    public void runLnpTest() throws IOException {\n+        try {\n+            Thread.sleep(3000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 254}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDkzNA==", "bodyText": "This test had a tendency to break randomly. Sometimes, the Backdoor access to retrieve questionId will result in out of bounds exception, which I assumed that the data was still being generated. Hence the 3 second delay to ensure that the test only runs after all data has been created.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934934", "createdAt": "2020-02-16T21:30:50Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionSubmitLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.STUDENTS)\n+                            .withRecipientType(FeedbackParticipantType.SELF)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .withNumberOfEntitiesToGiveFeedbackTo(1)\n+                            .build()\n+                );\n+\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+                headers.add(\"studentEmail\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(FEEDBACK_SESSION_NAME);\n+                    csvRow.add(student.email);\n+\n+                    csvData.add(csvRow);\n+\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    private Map<String, String> getRequestHeaders() {\n+        Map<String, String> headers = new LinkedHashMap<>();\n+\n+        headers.put(\"X-CSRF-TOKEN\", \"${csrfToken}\");\n+        headers.put(\"Content-Type\", \"application/json\");\n+\n+        return headers;\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler())\n+                .add(JMeterElements.csrfExtractor(\"csrfToken\"));\n+\n+        HeaderManager headerManager = JMeterElements.headerManager(getRequestHeaders());\n+        threadGroup.add(headerManager);\n+\n+        //Backdoor to retrieve questionId which is generated only on backend server\n+        String fqId = BackDoor.getFeedbackQuestionId(COURSE_ID, FEEDBACK_SESSION_NAME, 1);\n+\n+        String body = \"{\\\"questionType\\\": \\\"TEXT\\\",\"\n+                + \"\\\"recipientIdentifier\\\": \\\"${studentEmail}\\\",\"\n+                + \"\\\"responseDetails\\\": {\\\"answer\\\": \\\"<p>test</p>\\\", \\\"questionType\\\": \\\"TEXT\\\"}}\";\n+        String fourthPath = \"webapi/response?questionid=\" + fqId\n+                                    + \"&intent=STUDENT_SUBMISSION\";\n+        threadGroup.add(JMeterElements.httpSampler(fourthPath, POST, body));\n+\n+        return testPlan;\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        createTestData();\n+        persistTestData();\n+    }\n+\n+    @Test\n+    public void runLnpTest() throws IOException {\n+        try {\n+            Thread.sleep(3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDM2Mg=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 254}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3ODU3OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyMzoxOVrOFqVWzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMTo1MDoxMFrOFqVd4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDQxNA==", "bodyText": "Remember to change the doc", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934414", "createdAt": "2020-02-16T21:23:19Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionSubmitLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.STUDENTS)\n+                            .withRecipientType(FeedbackParticipantType.SELF)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .withNumberOfEntitiesToGiveFeedbackTo(1)\n+                            .build()\n+                );\n+\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+                headers.add(\"studentEmail\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(FEEDBACK_SESSION_NAME);\n+                    csvRow.add(student.email);\n+\n+                    csvData.add(csvRow);\n+\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    private Map<String, String> getRequestHeaders() {\n+        Map<String, String> headers = new LinkedHashMap<>();\n+\n+        headers.put(\"X-CSRF-TOKEN\", \"${csrfToken}\");\n+        headers.put(\"Content-Type\", \"application/json\");\n+\n+        return headers;\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler())\n+                .add(JMeterElements.csrfExtractor(\"csrfToken\"));\n+\n+        HeaderManager headerManager = JMeterElements.headerManager(getRequestHeaders());\n+        threadGroup.add(headerManager);\n+\n+        //Backdoor to retrieve questionId which is generated only on backend server\n+        String fqId = BackDoor.getFeedbackQuestionId(COURSE_ID, FEEDBACK_SESSION_NAME, 1);\n+\n+        String body = \"{\\\"questionType\\\": \\\"TEXT\\\",\"\n+                + \"\\\"recipientIdentifier\\\": \\\"${studentEmail}\\\",\"\n+                + \"\\\"responseDetails\\\": {\\\"answer\\\": \\\"<p>test</p>\\\", \\\"questionType\\\": \\\"TEXT\\\"}}\";\n+        String fourthPath = \"webapi/response?questionid=\" + fqId\n+                                    + \"&intent=STUDENT_SUBMISSION\";\n+        threadGroup.add(JMeterElements.httpSampler(fourthPath, POST, body));\n+\n+        return testPlan;\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        createTestData();\n+        persistTestData();\n+    }\n+\n+    @Test\n+    public void runLnpTest() throws IOException {\n+        try {\n+            Thread.sleep(3000);\n+        } catch (Exception e) {\n+            System.out.println(\"Error while executing LnP Test.\");\n+            System.out.println(e.toString());\n+        }\n+        runJmeter(true);\n+    }\n+\n+    /**\n+     * Removes the entities added for the instructors' student enrollment L&P test.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 263}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNjIyNw==", "bodyText": "Updated javadoc to reflect on the actual test.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379936227", "createdAt": "2020-02-16T21:50:10Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -0,0 +1,273 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.BackDoor;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionSubmitLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.STUDENTS)\n+                            .withRecipientType(FeedbackParticipantType.SELF)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .withNumberOfEntitiesToGiveFeedbackTo(1)\n+                            .build()\n+                );\n+\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+                headers.add(\"studentEmail\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(FEEDBACK_SESSION_NAME);\n+                    csvRow.add(student.email);\n+\n+                    csvData.add(csvRow);\n+\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    private Map<String, String> getRequestHeaders() {\n+        Map<String, String> headers = new LinkedHashMap<>();\n+\n+        headers.put(\"X-CSRF-TOKEN\", \"${csrfToken}\");\n+        headers.put(\"Content-Type\", \"application/json\");\n+\n+        return headers;\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler())\n+                .add(JMeterElements.csrfExtractor(\"csrfToken\"));\n+\n+        HeaderManager headerManager = JMeterElements.headerManager(getRequestHeaders());\n+        threadGroup.add(headerManager);\n+\n+        //Backdoor to retrieve questionId which is generated only on backend server\n+        String fqId = BackDoor.getFeedbackQuestionId(COURSE_ID, FEEDBACK_SESSION_NAME, 1);\n+\n+        String body = \"{\\\"questionType\\\": \\\"TEXT\\\",\"\n+                + \"\\\"recipientIdentifier\\\": \\\"${studentEmail}\\\",\"\n+                + \"\\\"responseDetails\\\": {\\\"answer\\\": \\\"<p>test</p>\\\", \\\"questionType\\\": \\\"TEXT\\\"}}\";\n+        String fourthPath = \"webapi/response?questionid=\" + fqId\n+                                    + \"&intent=STUDENT_SUBMISSION\";\n+        threadGroup.add(JMeterElements.httpSampler(fourthPath, POST, body));\n+\n+        return testPlan;\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        createTestData();\n+        persistTestData();\n+    }\n+\n+    @Test\n+    public void runLnpTest() throws IOException {\n+        try {\n+            Thread.sleep(3000);\n+        } catch (Exception e) {\n+            System.out.println(\"Error while executing LnP Test.\");\n+            System.out.println(e.toString());\n+        }\n+        runJmeter(true);\n+    }\n+\n+    /**\n+     * Removes the entities added for the instructors' student enrollment L&P test.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDQxNA=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 263}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3OTA2OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionViewLNPTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNDoxOVrOFqVXDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMTo1MDo1OVrOFqVeIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDQ3OA==", "bodyText": "Is there any particular reason to name the path as firstPath, secondPath and so on?", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934478", "createdAt": "2020-02-16T21:24:19Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionViewLNPTest.java", "diffHunk": "@@ -0,0 +1,244 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionViewLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(\"Test Feedback Session\", COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(\"Test Feedback Session\", session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(\"Test Feedback Session\")\n+                            .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.SELF)\n+                            .withRecipientType(FeedbackParticipantType.NONE)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(\"Test Feedback Session\");\n+\n+                    csvData.add(csvRow);\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler());\n+\n+        // Add HTTP samplers for test endpoint\n+        String firstPath = \"webapi/student?courseid=${courseId}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 210}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNjI4OA==", "bodyText": "No particular reason at first, it was when I was trying stuff out. I changed the name to be more explanatory of what it does.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379936288", "createdAt": "2020-02-16T21:50:59Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionViewLNPTest.java", "diffHunk": "@@ -0,0 +1,244 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.util.Const;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPTestData;\n+\n+/**\n+ * L&P Test Case for instructor's student enrollment API endpoint.\n+ */\n+public class FeedbackSessionViewLNPTest extends BaseLNPTestCase {\n+\n+    private static final int NUMBER_OF_USER_ACCOUNTS = 500;\n+    private static final int RAMP_UP_PERIOD = 2;\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"personalEmail\";\n+\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                Map<String, AccountAttributes> accounts = new LinkedHashMap<>();\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    accounts.put(STUDENT_NAME + i, AccountAttributes.builder(STUDENT_NAME + i + \".tmms\")\n+                            .withEmail(STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                            .withName(STUDENT_NAME + i)\n+                            .withIsInstructor(false)\n+                            .withInstitute(\"TEAMMATES Test Institute 2\")\n+                            .build()\n+                    );\n+                }\n+\n+                return accounts;\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new LinkedHashMap<>();\n+\n+                courses.put(\"course\", CourseAttributes.builder(COURSE_ID)\n+                        .withName(\"Feedback Load Testing\")\n+                        .withTimezone(ZoneId.of(\"UTC\"))\n+                        .build()\n+                );\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new LinkedHashMap<>();\n+\n+                instructors.put(\"teammates.test.instructor\",\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                                .withGoogleId(\"TestData.instructor\")\n+                                .withName(\"Teammates Test\")\n+                                .withRole(\"Co-owner\")\n+                                .withIsDisplayedToStudents(true)\n+                                .withDisplayedName(\"Co-owner\")\n+                                .withPrivileges(new InstructorPrivileges(\n+                                        Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                                .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                for (int i = 0; i < NUMBER_OF_USER_ACCOUNTS; i++) {\n+                    studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL + i + \"@gmail.tmt\")\n+                                            .withGoogleId(STUDENT_NAME + i + \".tmms\")\n+                                            .withName(STUDENT_NAME + i)\n+                                            .withComment(\"This student's name is \" + STUDENT_NAME + i)\n+                                            .withSectionName(\"None\")\n+                                            .withTeamName(\"Team 1\")\n+                                            .build();\n+                    students.put(STUDENT_NAME + i, studentAttribute);\n+                }\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                                                            .builder(\"Test Feedback Session\", COURSE_ID)\n+                                                            .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                                                            .withStartTime(Instant.now())\n+                                                            .withEndTime(Instant.now().plusSeconds(500))\n+                                                            .withSessionVisibleFromTime(Instant.now())\n+                                                            .withResultsVisibleFromTime(Instant.now())\n+                                                            .build();\n+\n+                feedbackSessions.put(\"Test Feedback Session\", session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(\"Test Question\");\n+                feedbackQuestions.put(\"QuestionTest\",\n+                        FeedbackQuestionAttributes.builder()\n+                            .withFeedbackSessionName(\"Test Feedback Session\")\n+                            .withQuestionDescription(\"Test Question\")\n+                            .withCourseId(COURSE_ID)\n+                            .withQuestionDetails(details)\n+                            .withQuestionNumber(1)\n+                            .withGiverType(FeedbackParticipantType.SELF)\n+                            .withRecipientType(FeedbackParticipantType.NONE)\n+                            .withShowResponsesTo(showResponses)\n+                            .withShowGiverNameTo(showGiverName)\n+                            .withShowRecipientNameTo(showRecepientName)\n+                            .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"googleId\");\n+                headers.add(\"courseId\");\n+                headers.add(\"fsname\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.students.forEach((key, student) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(student.googleId); // \"googleId\" is used for logging in, not \"email\"\n+                    csvRow.add(\"no\");\n+                    csvRow.add(student.googleId);\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(\"Test Feedback Session\");\n+\n+                    csvData.add(csvRow);\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUMBER_OF_USER_ACCOUNTS, RAMP_UP_PERIOD, 1));\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+                .add(JMeterElements.loginSampler());\n+\n+        // Add HTTP samplers for test endpoint\n+        String firstPath = \"webapi/student?courseid=${courseId}\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDQ3OA=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 210}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3OTM3OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNToyMFrOFqVXQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNToyMFrOFqVXQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDUzMQ==", "bodyText": "This is more like a work-around before #9956", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934531", "createdAt": "2020-02-16T21:25:20Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "diffHunk": "@@ -258,6 +259,22 @@ public static CourseAttributes getCourse(String courseId) {\n         return CourseAttributes.builder(courseData.getCourseId()).build();\n     }\n \n+    /**\n+     * Gets the ID of an feedback question from the datastore.\n+     */\n+    public static String getFeedbackQuestionId(String courseId, String fsName, int questionNumber) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3OTUyOnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNTo0MVrOFqVXWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwODozMjo1OFrOFtYbzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU1Mg==", "bodyText": "As you make implicit assumption that an instructor is logged in.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934552", "createdAt": "2020-02-16T21:25:41Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "diffHunk": "@@ -258,6 +259,22 @@ public static CourseAttributes getCourse(String courseId) {\n         return CourseAttributes.builder(courseData.getCourseId()).build();\n     }\n \n+    /**\n+     * Gets the ID of an feedback question from the datastore.\n+     */\n+    public static String getFeedbackQuestionId(String courseId, String fsName, int questionNumber) {\n+        Map<String, String[]> params = new HashMap<>();\n+        params.put(Const.ParamsNames.COURSE_ID, new String[] { courseId });\n+        params.put(Const.ParamsNames.FEEDBACK_SESSION_NAME, new String[] {fsName});\n+        params.put(Const.ParamsNames.INTENT, new String[] {\"INSTRUCTOR_RESULT\"});\n+        ResponseBodyAndCode response = executeGetRequest(Const.ResourceURIs.QUESTIONS, params);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNjYwMw==", "bodyText": "I chose the \"INSTRUCTOR_RESULT\" intent because it provides the feedback questions without checking for logged in instructors, as shown in the code here (GetFeedbackQuestionsAction.java, line 78).\n    case INSTRUCTOR_RESULT:\n        questions = logic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);\n\nPlus the Backdoor api access gives us full privilege, which passes the privilege check. It minimized the amount of change I needed to make to make this temporary backdoor workaround work.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379936603", "createdAt": "2020-02-16T21:55:22Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "diffHunk": "@@ -258,6 +259,22 @@ public static CourseAttributes getCourse(String courseId) {\n         return CourseAttributes.builder(courseData.getCourseId()).build();\n     }\n \n+    /**\n+     * Gets the ID of an feedback question from the datastore.\n+     */\n+    public static String getFeedbackQuestionId(String courseId, String fsName, int questionNumber) {\n+        Map<String, String[]> params = new HashMap<>();\n+        params.put(Const.ParamsNames.COURSE_ID, new String[] { courseId });\n+        params.put(Const.ParamsNames.FEEDBACK_SESSION_NAME, new String[] {fsName});\n+        params.put(Const.ParamsNames.INTENT, new String[] {\"INSTRUCTOR_RESULT\"});\n+        ResponseBodyAndCode response = executeGetRequest(Const.ResourceURIs.QUESTIONS, params);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU1Mg=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk3MDEyNA==", "bodyText": "probably add some documentation explaining the situation, as it is not straight forward.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r381970124", "createdAt": "2020-02-20T12:31:56Z", "author": {"login": "junming403"}, "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "diffHunk": "@@ -258,6 +259,22 @@ public static CourseAttributes getCourse(String courseId) {\n         return CourseAttributes.builder(courseData.getCourseId()).build();\n     }\n \n+    /**\n+     * Gets the ID of an feedback question from the datastore.\n+     */\n+    public static String getFeedbackQuestionId(String courseId, String fsName, int questionNumber) {\n+        Map<String, String[]> params = new HashMap<>();\n+        params.put(Const.ParamsNames.COURSE_ID, new String[] { courseId });\n+        params.put(Const.ParamsNames.FEEDBACK_SESSION_NAME, new String[] {fsName});\n+        params.put(Const.ParamsNames.INTENT, new String[] {\"INSTRUCTOR_RESULT\"});\n+        ResponseBodyAndCode response = executeGetRequest(Const.ResourceURIs.QUESTIONS, params);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU1Mg=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzEzMDU3Mw==", "bodyText": "Added documentation to explain the situation in getFeedbackQuestionId method", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r383130573", "createdAt": "2020-02-24T08:32:58Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/util/BackDoor.java", "diffHunk": "@@ -258,6 +259,22 @@ public static CourseAttributes getCourse(String courseId) {\n         return CourseAttributes.builder(courseData.getCourseId()).build();\n     }\n \n+    /**\n+     * Gets the ID of an feedback question from the datastore.\n+     */\n+    public static String getFeedbackQuestionId(String courseId, String fsName, int questionNumber) {\n+        Map<String, String[]> params = new HashMap<>();\n+        params.put(Const.ParamsNames.COURSE_ID, new String[] { courseId });\n+        params.put(Const.ParamsNames.FEEDBACK_SESSION_NAME, new String[] {fsName});\n+        params.put(Const.ParamsNames.INTENT, new String[] {\"INSTRUCTOR_RESULT\"});\n+        ResponseBodyAndCode response = executeGetRequest(Const.ResourceURIs.QUESTIONS, params);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU1Mg=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTI3OTY3OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/util/LNPTestData.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMToyNjowMVrOFqVXcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMTo1NzowOFrOFqVf0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU3OQ==", "bodyText": "Irrelevant changes?", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379934579", "createdAt": "2020-02-16T21:26:01Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/util/LNPTestData.java", "diffHunk": "@@ -67,8 +67,8 @@ public DataBundle generateJsonData() {\n         dataBundle.courses = generateCourses();\n         dataBundle.instructors = generateInstructors();\n         dataBundle.students = generateStudents();\n-        dataBundle.feedbackSessions = generateFeedbackSessions();\n         dataBundle.feedbackQuestions = generateFeedbackQuestions();\n+        dataBundle.feedbackSessions = generateFeedbackSessions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNjcyMA==", "bodyText": "Reverted back the change. Leftover from when I was trying out ways to obtain feedback question ID.", "url": "https://github.com/TEAMMATES/teammates/pull/9958#discussion_r379936720", "createdAt": "2020-02-16T21:57:08Z", "author": {"login": "daekoon"}, "path": "src/e2e/java/teammates/e2e/util/LNPTestData.java", "diffHunk": "@@ -67,8 +67,8 @@ public DataBundle generateJsonData() {\n         dataBundle.courses = generateCourses();\n         dataBundle.instructors = generateInstructors();\n         dataBundle.students = generateStudents();\n-        dataBundle.feedbackSessions = generateFeedbackSessions();\n         dataBundle.feedbackQuestions = generateFeedbackQuestions();\n+        dataBundle.feedbackSessions = generateFeedbackSessions();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzNDU3OQ=="}, "originalCommit": {"oid": "b01c9ae90972f8ca048f71407ff251fda060c159"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4063, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}