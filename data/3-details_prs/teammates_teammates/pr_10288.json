{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MDQxMDU5", "number": 10288, "title": "[#10213] Add default sorting of tables and pages", "bodyText": "Part of #10213\nOutline of Solution\n\nAdded sorting once data is loaded at these places:\n\n\nInst. Home Page - Sort by end date\n\n\nInst. Course Page - Sort by creation date\n\n\nInst. Sessions Page - Sort by course ID\n\n\nInst. Recycle Bin - Sort by deletion date\n\n\nInst. Student List - Sort course tabs by course ID\n\n\nComment tables - Sort by last edited at time\n\n\n\nStudent all records - Sort by feedback session name\n\n\n\nStudent home - Add sort buttons for course ID and course name. Feedback sessions are already sorted according to end date\n\n\n\nSortable tables - Add initial sort by leftmost column or an input index from parent component.", "createdAt": "2020-07-08T07:06:26Z", "url": "https://github.com/TEAMMATES/teammates/pull/10288", "merged": true, "mergeCommit": {"oid": "70f388d654b8876744d75daf68cfe8c8a6799581"}, "closed": true, "closedAt": "2020-07-15T08:29:38Z", "author": {"login": "t-cheepeng"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyjbEEAH2gAyNDQ2MDQxMDU5OjNkYzMzZWJhYzQ2NmI1ZDUwMzY5NDk3N2YxNzE1NmM4M2IyYTU4M2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1FINxAH2gAyNDQ2MDQxMDU5OjUzMDY0NDM5ZDQzNjM5MzFiYjhmZTdlYjg5ZTAyNDI4N2Q1Mzg1NTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3dc33ebac466b5d503694977f17156c83b2a583c", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3dc33ebac466b5d503694977f17156c83b2a583c", "committedDate": "2020-07-07T10:38:32Z", "message": "Add sort by to student home page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ef92c4cfdd8e7205f79cdfc1b95725ed8ecb222", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4ef92c4cfdd8e7205f79cdfc1b95725ed8ecb222", "committedDate": "2020-07-07T10:39:11Z", "message": "Add default sort to instructor course page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9235d94d864727e892db08c1727385746bcdbe12", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9235d94d864727e892db08c1727385746bcdbe12", "committedDate": "2020-07-07T10:40:24Z", "message": "Add comment sort by last edited date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f21af8e1d783f1a104e1cc0480da29971ce216a6", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f21af8e1d783f1a104e1cc0480da29971ce216a6", "committedDate": "2020-07-08T06:49:22Z", "message": "Add initial sorting to sortable table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3434ba3de4c924feb758d2197b5ab8aa3eb76293", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3434ba3de4c924feb758d2197b5ab8aa3eb76293", "committedDate": "2020-07-08T06:51:40Z", "message": "Add sorting to instructor home, session, student"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9fbdb81344a5bb270d70b28a8d4712957e57edb", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f9fbdb81344a5bb270d70b28a8d4712957e57edb", "committedDate": "2020-07-08T06:52:04Z", "message": "Update snapshots and fix lint issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bd839bf3d2c7012ca3e639eedb36f5016930f69", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5bd839bf3d2c7012ca3e639eedb36f5016930f69", "committedDate": "2020-07-08T07:49:46Z", "message": "Fix instructor home page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382538275e8218b844eda972c55cdbcd134ec9c1", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/382538275e8218b844eda972c55cdbcd134ec9c1", "committedDate": "2020-07-09T03:17:58Z", "message": "Merge branch 'master' into 10213-table-consistent-load"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c507ef547eae330dee2e26c4adaada93b1740fa", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6c507ef547eae330dee2e26c4adaada93b1740fa", "committedDate": "2020-07-09T04:54:48Z", "message": "Fix instructor course page E2E test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6002cb853b9fe787f2f3b5a204e9b75a7665ee59", "committedDate": "2020-07-09T06:32:25Z", "message": "Merge branch 'master' into 10213-table-consistent-load"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTAzOTk1", "url": "https://github.com/TEAMMATES/teammates/pull/10288#pullrequestreview-445503995", "createdAt": "2020-07-09T10:49:46Z", "commit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODE5MTU5", "url": "https://github.com/TEAMMATES/teammates/pull/10288#pullrequestreview-445819159", "createdAt": "2020-07-09T17:20:27Z", "commit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyMDoyN1rOGvaqjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNzoyNzoxNlrOGva5aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3MzEzMw==", "bodyText": "The sorting should be done at the root page? (single point of truth?)", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452373133", "createdAt": "2020-07-09T17:20:27Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/comment-box/comment-table/comment-table.component.ts", "diffHunk": "@@ -70,9 +72,28 @@ export class CommentTableComponent implements OnInit {\n   @Output()\n   updateCommentEvent: EventEmitter<number> = new EventEmitter();\n \n-  constructor() { }\n+  constructor(private tableComparatorService: TableComparatorService) { }\n \n   ngOnInit(): void {\n+    this.sortComments();\n+  }\n+\n+  ngOnChanges(): void {\n+    this.sortComments();\n+  }\n+\n+  /**\n+   * Sorts the comments by last edited date.\n+   */\n+  sortComments(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NTI4Mw==", "bodyText": "You can make this to return void Observable to indicate the completion and subscribe it.\nIf you think it is overkill, I would suggest just keep parameter index as (index and model refer to the same thing)", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452375283", "createdAt": "2020-07-09T17:24:16Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.ts", "diffHunk": "@@ -198,9 +198,9 @@ export class InstructorHomePageComponent extends InstructorSessionModalPageCompo\n   }\n \n   /**\n-   * Loads the feedback session in the course.\n+   * Loads the feedback session in the course and sorts them according to end date.\n    */\n-  loadFeedbackSessions(model: CourseTabModel): void {\n+  loadFeedbackSessions(model: CourseTabModel, index: number): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM3NjkzNg==", "bodyText": "Is it possible to do this more explicitly?", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r452376936", "createdAt": "2020-07-09T17:27:16Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -94,4 +98,19 @@ export class SortableTableComponent implements OnInit {\n     });\n   }\n \n+  /**\n+   * Sorts the table with initial column index or leftmost sortable column", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6002cb853b9fe787f2f3b5a204e9b75a7665ee59"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68ebc127af8a25847c494bbe034a36a4ea4d3a91", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/68ebc127af8a25847c494bbe034a36a4ea4d3a91", "committedDate": "2020-07-10T06:57:48Z", "message": "Specify initial sort more explicitly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87efe849aec4a986e165f4bda1e742821b6ef3bb", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/87efe849aec4a986e165f4bda1e742821b6ef3bb", "committedDate": "2020-07-10T06:58:25Z", "message": "Change loadFeedbackSession to use index"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ea4fb34716daab82cbe9f290062a471a09841a73", "committedDate": "2020-07-10T07:06:05Z", "message": "Move comment sorting to root page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2OTY1NTAz", "url": "https://github.com/TEAMMATES/teammates/pull/10288#pullrequestreview-446965503", "createdAt": "2020-07-13T03:51:50Z", "commit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1MTo1MFrOGwam9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo1OTowOVrOGwasuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMDc4OA==", "bodyText": "Can we make this as @Input() (take place of initialSortBy )\nI just realize this break the promise of @Input().", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453420788", "createdAt": "2020-07-13T03:51:50Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/sortable-table/sortable-table.component.ts", "diffHunk": "@@ -49,6 +49,9 @@ export class SortableTableComponent implements OnInit {\n   @Input()\n   rows: SortableTableCellData[][] = [];\n \n+  @Input()\n+  initialSortBy: SortBy = SortBy.NONE;\n+\n   columnToSortBy: string = '';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMTYwMA==", "bodyText": "I think it is unnecessary to add sorting when CUD are happening.\n\nDelete won't affect the order\nFor update, we could have a recent edited comment jumping from the first row to the last row. I don't think user will expect this. I don't think V6 has this behavior either. We should sort by created data instead. However, if we do this, them, update won't affect the order also\nFor create, the order won't be affected as we do append.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453421600", "createdAt": "2020-07-13T03:56:02Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-comments.component.ts", "diffHunk": "@@ -125,8 +130,18 @@ export abstract class InstructorCommentsComponent {\n             },\n             isAddingNewComment: false,\n           };\n+          this.sortComments(this.instructorCommentTableModel[responseId]);\n         }, (resp: ErrorMessageOutput) => {\n           this.statusMessageService.showErrorToast(resp.error.message);\n         });\n   }\n+\n+  sortComments(commentTable: CommentTableModel): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyMjI2Nw==", "bodyText": "Although this work, can we do this with .pipe or other method. The current solution looks like a hack as it sort the list every time when activeCourses is udpated.", "url": "https://github.com/TEAMMATES/teammates/pull/10288#discussion_r453422267", "createdAt": "2020-07-13T03:59:09Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.ts", "diffHunk": "@@ -94,6 +90,7 @@ export class InstructorCoursesPageComponent implements OnInit {\n           const canModifyStudent: boolean = instructorPrivilege.canModifyStudent;\n           const activeCourse: CourseModel = Object.assign({}, { course, canModifyCourse, canModifyStudent });\n           this.activeCourses.push(activeCourse);\n+          this.sortCoursesEvent(SortBy.COURSE_CREATION_DATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea4fb34716daab82cbe9f290062a471a09841a73"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1441d613ba8c7afa18dcdb4515f23d5ca2f41068", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1441d613ba8c7afa18dcdb4515f23d5ca2f41068", "committedDate": "2020-07-13T04:50:39Z", "message": "Remove sorting from CUD and sort by creation date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f8b94f41dad1239a944aca4439badf15e6eaed7", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1f8b94f41dad1239a944aca4439badf15e6eaed7", "committedDate": "2020-07-13T05:00:18Z", "message": "Change sortCoursesEvent to be called at the end"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c51841ade4a30c5abba0272b2f44b42b231c4c5", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1c51841ade4a30c5abba0272b2f44b42b231c4c5", "committedDate": "2020-07-14T03:29:08Z", "message": "Fix E2E tests for instructor course page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NjI0NTk4", "url": "https://github.com/TEAMMATES/teammates/pull/10288#pullrequestreview-448624598", "createdAt": "2020-07-15T04:43:28Z", "commit": {"oid": "1c51841ade4a30c5abba0272b2f44b42b231c4c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53064439d4363931bb8fe7eb89e024287d538555", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/53064439d4363931bb8fe7eb89e024287d538555", "committedDate": "2020-07-15T07:02:34Z", "message": "Merge branch 'master' into 10213-table-consistent-load"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4278, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}