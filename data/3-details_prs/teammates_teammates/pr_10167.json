{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MjU2OTUz", "number": 10167, "title": "[#10164] Result Page: InstructorSessionResultSectionType.GIVER still shows recipient name", "bodyText": "Fixes #10164\nOutline of Solution\nGRQ\n\nGQR\n\nThe bug was due to the templates for the components not checking against the responses to show. The fix was to add a ngIf check\n\nAlso added a new variable to both views so that the Team xxx tab/card will not show if there are no responses from anyone in the team", "createdAt": "2020-06-05T06:49:02Z", "url": "https://github.com/TEAMMATES/teammates/pull/10167", "merged": true, "mergeCommit": {"oid": "87eb23d81de7923a05e4599bcc4f6cd6a8cc375c"}, "closed": true, "closedAt": "2020-06-09T06:21:41Z", "author": {"login": "t-cheepeng"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoLRsUAH2gAyNDI4MjU2OTUzOjY5YTI1OTExOWVlOWM4NGY1ZmE0Yzc3MTM5OTFjYzZjYjFjNWNkMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpe9gxgFqTQyNjgxOTYzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "69a259119ee9c84f5fa4c7713991cc6cb1c5cd38", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/69a259119ee9c84f5fa4c7713991cc6cb1c5cd38", "committedDate": "2020-06-05T04:51:20Z", "message": "Hide recipient names in grq-rgq result view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4697026d3460bf1a540c4e1d51cb89ceec1406", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5e4697026d3460bf1a540c4e1d51cb89ceec1406", "committedDate": "2020-06-05T06:35:18Z", "message": "Hide recipient names in gqr-rqg result view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e555e81e0d001f918c8f111a93b4508f7809aa20", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e555e81e0d001f918c8f111a93b4508f7809aa20", "committedDate": "2020-06-08T06:29:56Z", "message": "Merge branch 'master' into 10164-section-show-recipient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36841da53f5eaf6829fe9d29331b1a91d3fd6f4a", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/36841da53f5eaf6829fe9d29331b1a91d3fd6f4a", "committedDate": "2020-06-08T07:56:06Z", "message": "Change to filter for teamsToUsers and userExpanded"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NTkyNjk2", "url": "https://github.com/TEAMMATES/teammates/pull/10167#pullrequestreview-426592696", "createdAt": "2020-06-08T20:24:58Z", "commit": {"oid": "36841da53f5eaf6829fe9d29331b1a91d3fd6f4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMDoyNDo1OFrOGgvEOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMDoyNDo1OFrOGgvEOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3ODc0NA==", "bodyText": "Have you considered put the same shouldDisplayBasedOnSection check in L89?", "url": "https://github.com/TEAMMATES/teammates/pull/10167#discussion_r436978744", "createdAt": "2020-06-08T20:24:58Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -142,6 +142,12 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n             .isFeedbackResponsesDisplayedOnSection(response, this.section, this.sectionType);\n \n           if (!shouldDisplayBasedOnSection) {\n+            const team: string = this.isGqr ? response.giverTeam : response.recipientTeam;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36841da53f5eaf6829fe9d29331b1a91d3fd6f4a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4027be69f96483aac4ed351a4815061afb57ba5", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f4027be69f96483aac4ed351a4815061afb57ba5", "committedDate": "2020-06-09T03:26:57Z", "message": "Add check to filter users at an earlier stage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a29216619807ec37c530032df8e9da35c2ebff1", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4a29216619807ec37c530032df8e9da35c2ebff1", "committedDate": "2020-06-09T03:27:12Z", "message": "Merge branch 'master' into 10164-section-show-recipient"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2ODAxNzc1", "url": "https://github.com/TEAMMATES/teammates/pull/10167#pullrequestreview-426801775", "createdAt": "2020-06-09T05:37:58Z", "commit": {"oid": "4a29216619807ec37c530032df8e9da35c2ebff1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNTozNzo1OFrOGg5bbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNTozNzo1OFrOGg5bbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE0ODUyNA==", "bodyText": "Try to use guard clause?\nconst shouldDisplayBasedOnSection = xx\n\nif (!shouldDisplayBasedOnSection) {\n    continue;\n}", "url": "https://github.com/TEAMMATES/teammates/pull/10167#discussion_r437148524", "createdAt": "2020-06-09T05:37:58Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -92,33 +92,39 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n         if (response.recipientEmail) {\n           this.userToEmail[response.recipient] = response.recipientEmail;\n         }\n-        if (this.isGqr) {\n-          this.teamsToUsers[response.giverTeam] = this.teamsToUsers[response.giverTeam] || [];\n-          if (this.teamsToUsers[response.giverTeam].indexOf(response.giver) === -1) {\n-            this.teamsToUsers[response.giverTeam].push(response.giver);\n-            this.teamExpanded[response.giverTeam] = this.isExpandAll;\n-          }\n-          if (response.relatedGiverEmail) {\n-            this.userToRelatedEmail[response.giver] = response.relatedGiverEmail;\n-          }\n-          this.userExpanded[response.giver] = this.isExpandAll;\n-        } else {\n-          if (!response.recipientTeam) {\n-            // Recipient is team\n-            this.teamsToUsers[response.recipient] = this.teamsToUsers[response.recipient] || [];\n-            if (this.teamsToUsers[response.recipient].indexOf(response.recipient) === -1) {\n-              this.teamsToUsers[response.recipient].push(response.recipient);\n-              this.teamExpanded[response.recipient] = this.isExpandAll;\n+\n+        const shouldDisplayBasedOnSection: boolean = this.feedbackResponsesService\n+            .isFeedbackResponsesDisplayedOnSection(response, this.section, this.sectionType);\n+        if (shouldDisplayBasedOnSection) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a29216619807ec37c530032df8e9da35c2ebff1"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8e023b0beaca818681b60dcc0a4089d81c758bb", "author": {"user": {"login": "t-cheepeng", "name": "t-cheepeng"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b8e023b0beaca818681b60dcc0a4089d81c758bb", "committedDate": "2020-06-09T05:49:59Z", "message": "Switch to use guard clause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2ODE5NjM1", "url": "https://github.com/TEAMMATES/teammates/pull/10167#pullrequestreview-426819635", "createdAt": "2020-06-09T06:21:19Z", "commit": {"oid": "b8e023b0beaca818681b60dcc0a4089d81c758bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4341, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}