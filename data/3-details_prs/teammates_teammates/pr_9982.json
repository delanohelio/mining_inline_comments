{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjQ5ODM2", "number": 9982, "title": "[#9946] Migration to new RESTful search endpoints - Instructors", "bodyText": "Part of #9946.\nThis PR implements the new instructors endpoint necessary for the search migration in accordance with RESTful principles. The response object is listed below, along with a listing of which of its keys is relevant to the old response objects.\nOld endpoints\nAdmin search\nGET /accounts/search?searchkey=john\n\n  Response\n{\n  \"students\": [\n    {\n      \"section\": \"Tutorial Group 2\",\n      \"team\": \"Team 2\",\n      \"comments\": \"This student's name is John Dorian\",\n      \"recordsPageLink\": \"http://localhost:4200/web/instructor/students/records?courseid=teammates.instructor.uni-demo&studentemail=teammates.instructor%40university.edu&user=test%40example.com\",\n      \"openSessions\": {\n        \"Second team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Thu, 02 Apr 2037, 11:59 PM SGT]\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=Second+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"notOpenSessions\": {\n        \"Session with different question types [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Currently Not Open)\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=Session+with+different+question+types&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\",\n        \"First team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Currently Not Open)\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=First+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"publishedSessions\": {\n        \"First team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Published)\": \"http://localhost:4200/web/sessions/result?courseid=teammates.instructor.uni-demo&fsname=First+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\",\n        \"Session with different question types [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Published)\": \"http://localhost:4200/web/sessions/result?courseid=teammates.instructor.uni-demo&fsname=Session+with+different+question+types&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"googleId\": \"test@example.com\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"courseName\": \"Sample Course 101\",\n      \"institute\": \"National University of Singapore\",\n      \"courseJoinLink\": \"http://localhost:4200/web/join?key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu&courseid=teammates.instructor.uni-demo&entitytype=student\",\n      \"homePageLink\": \"/web/student/home?user=test%40example.com\",\n      \"manageAccountLink\": \"/web/admin/accounts?instructorid=test%40example.com\",\n      \"showLinks\": false\n    }\n  ],\n  \"instructors\": [\n    {\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"googleId\": \"test@example.com\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"courseName\": \"Sample Course 101\",\n      \"institute\": \"National University of Singapore\",\n      \"courseJoinLink\": \"http://localhost:4200/web/join?key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DAD88776C661F6D51601691F4CE3223F0&entitytype=instructor\",\n      \"homePageLink\": \"http://localhost:4200/web/instructor/home?user=test%40example.com\",\n      \"manageAccountLink\": \"/web/admin/accounts?instructorid=test%40example.com\",\n      \"showLinks\": false\n    }\n  ],\n  \"requestId\": \"5e65f2880002a3c8cb7a1d77\"\n}\n\nInstructor search\nGET /studentsAndSessionData/search?searchkey=john&searchstudents=true&searchfeedbacksessiondata=true\n\n  Response\n{\n  \"searchStudentsTables\": [\n    {\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"sections\": [\n        {\n          \"sectionName\": \"Tutorial Group 2\",\n          \"isAllowedToViewStudentInSection\": true,\n          \"isAllowedToModifyStudent\": true,\n          \"students\": [\n            {\n              \"name\": \"John Dorian\",\n              \"email\": \"teammates.instructor@university.edu\",\n              \"status\": \"Joined\",\n              \"team\": \"Team 2\"\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  \"requestId\": \"5e65f2ba000d0fc054ceb912\"\n}\n\nNew instructors endpoint\nOnly accessible by admins.\nGET /search/instructors?searchkey=john\n\n  Response\n{\n  \"instructors\": [\n    {\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"joinState\": \"JOINED\",\n      \"googleId\": \"test@example.com\"\n    }\n  ],\n  \"requestId\": \"5e65f3ba0008e9405a5b0f9b\"\n}\n\nRelevant keys: googleId, courseId, email, name", "createdAt": "2020-03-11T12:04:43Z", "url": "https://github.com/TEAMMATES/teammates/pull/9982", "merged": true, "mergeCommit": {"oid": "c2d26d4ae41381142beb72b3fda53eabab67bcfd"}, "closed": true, "closedAt": "2020-03-17T06:41:43Z", "author": {"login": "dvrylc"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNxXytABqjMxMzAwODk1MDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcObljygH2gAyMzg2NjQ5ODM2OmQxYjVmMDQwOGU1M2Q5YmQyOTM5OTI4NmI4NWY0NDVkYjgxMmRiMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2707878740c537ff8c62ea213c6323431e2158ce", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2707878740c537ff8c62ea213c6323431e2158ce", "committedDate": "2020-03-15T02:30:21Z", "message": "Fix lint"}, "afterCommit": {"oid": "fe96c5abe77d4e3c476db399d0a6df75fb19903f", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fe96c5abe77d4e3c476db399d0a6df75fb19903f", "committedDate": "2020-03-15T03:49:43Z", "message": "Fix lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NDA5Mjcw", "url": "https://github.com/TEAMMATES/teammates/pull/9982#pullrequestreview-375409270", "createdAt": "2020-03-16T16:56:30Z", "commit": {"oid": "5f5f898b20aaf01722e20831d328968bea0236c3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo1NjozMVrOF29QkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo1NjozMVrOF29QkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE3MTA4OA==", "bodyText": "SEARCH_INSTRUCTORS?", "url": "https://github.com/TEAMMATES/teammates/pull/9982#discussion_r393171088", "createdAt": "2020-03-16T16:56:31Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/util/Const.java", "diffHunk": "@@ -752,6 +752,7 @@ private Const() {\n         public static final String INSTRUCTORS = \"/instructors\";\n         public static final String INSTRUCTOR = \"/instructor\";\n         public static final String INSTRUCTOR_PRIVILEGE = \"/instructor/privilege\";\n+        public static final String INSTRUCTORS_SEARCH = \"/search/instructors\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f5f898b20aaf01722e20831d328968bea0236c3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c45217eeb8bb78ed212412e87c6f3620040e914c", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c45217eeb8bb78ed212412e87c6f3620040e914c", "committedDate": "2020-03-17T05:00:17Z", "message": "Implement search student endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f73f416433205c1b52e6a92a1587be97a682770", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3f73f416433205c1b52e6a92a1587be97a682770", "committedDate": "2020-03-17T05:00:17Z", "message": "Implement instructors search endpoint (#2)\n\n* Add instructor search endpoint\r\n\r\n* Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0cc658eb2ad7f6dc50f916d185eb86a360814f8", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e0cc658eb2ad7f6dc50f916d185eb86a360814f8", "committedDate": "2020-03-17T05:00:17Z", "message": "Switch from SearchInstructorsData to InstructorsData (#6)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02511b3d3679409c7cdc6ca452a0a8a9aa9ebdf2", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/02511b3d3679409c7cdc6ca452a0a8a9aa9ebdf2", "committedDate": "2020-03-17T05:00:17Z", "message": "Switch from SearchStudentsData to StudentsData (#7)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "678e94e2a36ddc8f25d48101d658cf5556abf332", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/678e94e2a36ddc8f25d48101d658cf5556abf332", "committedDate": "2020-03-17T05:00:17Z", "message": "Allow travis to build search migration branch (#5)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9630cfb14a3f00e7560d574cba5e34c8322ef105", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9630cfb14a3f00e7560d574cba5e34c8322ef105", "committedDate": "2020-03-17T05:00:17Z", "message": "Implement sessions search endpoint (#3)\n\n* Add sessions search endpoint\r\n\r\n* Add tests\r\n\r\n* Fix lint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c6472b3e750a345059b0a4c9d14e43df6e00c61", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1c6472b3e750a345059b0a4c9d14e43df6e00c61", "committedDate": "2020-03-17T05:00:17Z", "message": "Add course endpoint (#8)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8938bdd96a33bbd56f59e14d49c1ce110f0367b0", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8938bdd96a33bbd56f59e14d49c1ce110f0367b0", "committedDate": "2020-03-17T05:00:17Z", "message": "Implement Links Endpoint (#4)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5fb118719ff7a543426bbe96fd7d059f7e4aacf", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b5fb118719ff7a543426bbe96fd7d059f7e4aacf", "committedDate": "2020-03-17T05:00:17Z", "message": "Add googleId  field to StudentData (#9)\n\n* Add googleid to studentdata\r\n\r\n* Add nullable to student data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45c01c7e0a89c0cc90be3c2ab976ddfe00216387", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/45c01c7e0a89c0cc90be3c2ab976ddfe00216387", "committedDate": "2020-03-17T05:00:17Z", "message": "Improve search response classes (#12)\n\n* Improve students endpoint classes\r\n\r\n* Move joinState attribute from common to student\r\n\r\n* Improve instructors endpoint classes\r\n\r\n* Revert \"Add googleId  field to StudentData (#9)\"\r\n\r\nThis reverts commit b5d46cabc092bf3bedc429ae1c771515bf149606.\r\n\r\n* Revert unnecessary InstructorData changes\r\n\r\n* Fix typo\r\n\r\n* Make joinState common\r\n\r\n* Make names sane again\r\n\r\n* Remove unused setters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4428f7d4b7947fa36bae15042a6d2b5da04b6b34", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4428f7d4b7947fa36bae15042a6d2b5da04b6b34", "committedDate": "2020-03-17T05:00:17Z", "message": "Standardize search endpoints (#13)\n\n* Improve course endpoint class names\r\n\r\n* Improve links endpoint class names\r\n\r\n* Improve sessions endpoint class names\r\n\r\n* Standardize comments\r\n\r\n* Fix import order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea3284719fb49038e5bde18930195ef04ea810cf", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ea3284719fb49038e5bde18930195ef04ea810cf", "committedDate": "2020-03-17T05:00:17Z", "message": "Revert travis config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acb26083b5834f32d87e40d0720ae95949b60a45", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/acb26083b5834f32d87e40d0720ae95949b60a45", "committedDate": "2020-03-17T05:00:17Z", "message": "Split PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e82b056c12d5bcf9767600cb705bf92d2ce6e82", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2e82b056c12d5bcf9767600cb705bf92d2ce6e82", "committedDate": "2020-03-17T05:00:17Z", "message": "Revert to existing response classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c338943d7a54768b2d0e2fec1807afb36245d0a", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9c338943d7a54768b2d0e2fec1807afb36245d0a", "committedDate": "2020-03-17T05:00:17Z", "message": "Fix lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfa71e44965110807bbc97df5be890e7e46fcb39", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bfa71e44965110807bbc97df5be890e7e46fcb39", "committedDate": "2020-03-17T05:00:17Z", "message": "Improve information hiding logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d10fbae0b9ab788a23fd366c01dbeab6cbe79926", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d10fbae0b9ab788a23fd366c01dbeab6cbe79926", "committedDate": "2020-03-17T05:00:17Z", "message": "Improve resource name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f5f898b20aaf01722e20831d328968bea0236c3", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5f5f898b20aaf01722e20831d328968bea0236c3", "committedDate": "2020-03-15T07:56:45Z", "message": "Improve information hiding logic"}, "afterCommit": {"oid": "d10fbae0b9ab788a23fd366c01dbeab6cbe79926", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d10fbae0b9ab788a23fd366c01dbeab6cbe79926", "committedDate": "2020-03-17T05:00:17Z", "message": "Improve resource name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1b5f0408e53d9bd29399286b85f445db812db05", "author": {"user": {"login": "xpdavid", "name": "Xiao Pu"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d1b5f0408e53d9bd29399286b85f445db812db05", "committedDate": "2020-03-17T05:09:29Z", "message": "Merge branch 'master' into 9946-search-migration-instructors"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4379, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}