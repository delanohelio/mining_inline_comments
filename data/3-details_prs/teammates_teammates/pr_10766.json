{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MzUwMjQz", "number": 10766, "title": "[#9536] Instructor Course Details Page E2E Test", "bodyText": "Part of #9536\nOutline of Solution\n\nAdd InstructorCourseDetailsPageE2ETest which tests:\n\nverify loaded details\nsend invite\nremind all students to join\ndownload student list;\ndelete student\ndelete all students", "createdAt": "2020-10-06T08:04:57Z", "url": "https://github.com/TEAMMATES/teammates/pull/10766", "merged": true, "mergeCommit": {"oid": "481c7a9786bb3408d7b73a925065b822349d4852"}, "closed": true, "closedAt": "2020-10-17T12:45:28Z", "author": {"login": "jtankw3"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPztKLgH2gAyNDk4MzUwMjQzOmVmYzE5YTE0NjRjYjBhZWZhOGM0OTY4MDdlYzkwYzc3NWI1NDI4MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTXYeogFqTUxMDk3MTQ3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efc19a1464cb0aefa8c496807ec90c775b54282c", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/efc19a1464cb0aefa8c496807ec90c775b54282c", "committedDate": "2020-10-06T08:00:35Z", "message": "Add InstructorCourseDetailsPageE2ETest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMDkyODQ1", "url": "https://github.com/TEAMMATES/teammates/pull/10766#pullrequestreview-503092845", "createdAt": "2020-10-06T15:29:31Z", "commit": {"oid": "efc19a1464cb0aefa8c496807ec90c775b54282c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNToyOTozMVrOHdNeDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxODowNzoyMlrOHdT4aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM5MTQzNw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r500391437", "createdAt": "2020-10-06T15:29:31Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.html", "diffHunk": "@@ -6,38 +6,38 @@ <h1>Course Details</h1>\n         <div class=\"form\">\n           <div class=\"form-group row\">\n             <label class=\"col-sm-3 text-sm-right\">Course ID:</label>\n-            <div class=\"col-sm-6 text-sm-left\">\n+            <div id=\"course-id\" class=\"col-sm-6 text-sm-left\">\n               <p class=\"form-control-static\">{{courseDetails.course.courseId}}</p>\n             </div>\n           </div>\n           <div class=\"form-group row\">\n             <label class=\"col-sm-3 text-sm-right\">Course name:</label>\n-            <div class=\"col-sm-6 text-sm-left\" id=\"coursename\">\n+            <div id=\"course-name\" class=\"col-sm-6 text-sm-left\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efc19a1464cb0aefa8c496807ec90c775b54282c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5NTc3MA==", "bodyText": "Consider using System.lineSeparator() to make this work across OS", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r500495770", "createdAt": "2020-10-06T18:06:09Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/pageobjects/InstructorCourseDetailsPage.java", "diffHunk": "@@ -0,0 +1,153 @@\n+package teammates.e2e.pageobjects;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.util.List;\n+import java.util.StringJoiner;\n+\n+import org.openqa.selenium.By;\n+import org.openqa.selenium.NoSuchElementException;\n+import org.openqa.selenium.WebElement;\n+import org.openqa.selenium.support.FindBy;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+\n+/**\n+ * Represents the instructor course details page of the website.\n+ */\n+public class InstructorCourseDetailsPage extends AppPage {\n+    @FindBy(id = \"course-id\")\n+    private WebElement courseIdField;\n+\n+    @FindBy(id = \"course-name\")\n+    private WebElement courseNameField;\n+\n+    @FindBy(id = \"num-sections\")\n+    private WebElement numSectionsField;\n+\n+    @FindBy(id = \"num-teams\")\n+    private WebElement numTeamsField;\n+\n+    @FindBy(id = \"num-students\")\n+    private WebElement numStudentsField;\n+\n+    @FindBy(id = \"instructors\")\n+    private WebElement instructorsField;\n+\n+    public InstructorCourseDetailsPage(Browser browser) {\n+        super(browser);\n+    }\n+\n+    @Override\n+    protected boolean containsExpectedPageContents() {\n+        return getPageTitle().contains(\"Course Details\");\n+    }\n+\n+    public void verifyCourseDetails(CourseAttributes course, InstructorAttributes[] instructors,\n+                                    int numSections, int numTeams, int numStudents) {\n+        assertEquals(course.getId(), courseIdField.getText());\n+        assertEquals(course.getName(), courseNameField.getText());\n+        assertEquals(Integer.toString(numSections), numSectionsField.getText());\n+        assertEquals(Integer.toString(numTeams), numTeamsField.getText());\n+        assertEquals(Integer.toString(numStudents), numStudentsField.getText());\n+        assertEquals(getExpectedInstructorString(instructors), instructorsField.getText());\n+    }\n+\n+    public void verifyStudentDetails(StudentAttributes[] students) {\n+        verifyTableBodyValues(getStudentList(), getExpectedStudentValues(students));\n+    }\n+\n+    public void verifyNumStudents(int expected) {\n+        assertEquals(expected, getNumStudents());\n+    }\n+\n+    public void sendInvite(StudentAttributes student) {\n+        clickAndConfirm(getSendInviteButton(student));\n+    }\n+\n+    public void remindAllToJoin() {\n+        clickAndConfirm(waitForElementPresence(By.id(\"btn-remind-all\")));\n+    }\n+\n+    public void downloadStudentList() {\n+        click(waitForElementPresence(By.id(\"btn-download\")));\n+    }\n+\n+    public void sortByName() {\n+        click(browser.driver.findElement(By.id(\"sort-by-name\")));\n+        waitUntilAnimationFinish();\n+    }\n+\n+    public void sortByStatus() {\n+        click(browser.driver.findElement(By.id(\"sort-by-status\")));\n+        waitUntilAnimationFinish();\n+    }\n+\n+    public void deleteStudent(StudentAttributes student) {\n+        clickAndConfirm(getDeleteButton(student));\n+    }\n+\n+    public void deleteAllStudents() {\n+        clickAndConfirm(waitForElementPresence(By.id(\"btn-delete-all\")));\n+    }\n+\n+    private String getExpectedInstructorString(InstructorAttributes[] instructors) {\n+        StringJoiner expected = new StringJoiner(\"\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efc19a1464cb0aefa8c496807ec90c775b54282c"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5NjQ4OA==", "bodyText": "Nitpicking here. Looks kind of weird that one item is beside the {, can put everything in new line instead? Same goes for the instructors variable above.", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r500496488", "createdAt": "2020-10-06T18:07:22Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = { testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = { testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efc19a1464cb0aefa8c496807ec90c775b54282c"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1164b5bf9367b4d54b9ebf2959357f547d8d236", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f1164b5bf9367b4d54b9ebf2959357f547d8d236", "committedDate": "2020-10-07T05:03:18Z", "message": "Use System.lineSeparator to make test work across OS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ea1a143230039a5fa2a91a3d9b43d70776299ed", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1ea1a143230039a5fa2a91a3d9b43d70776299ed", "committedDate": "2020-10-07T05:03:25Z", "message": "Fix spacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc76562e5aa427378d8d6f6862552e51ee9fba69", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/dc76562e5aa427378d8d6f6862552e51ee9fba69", "committedDate": "2020-10-07T05:03:44Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into instructor-course-details-e2e"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTM3Mzcx", "url": "https://github.com/TEAMMATES/teammates/pull/10766#pullrequestreview-503537371", "createdAt": "2020-10-07T05:36:43Z", "commit": {"oid": "dc76562e5aa427378d8d6f6862552e51ee9fba69"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0be5ed614000547e08388d9186a09225ef7bedff", "committedDate": "2020-10-07T07:19:43Z", "message": "Merge branch 'master' into instructor-course-details-e2e"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5OTI1Mzkw", "url": "https://github.com/TEAMMATES/teammates/pull/10766#pullrequestreview-509925390", "createdAt": "2020-10-16T00:23:58Z", "commit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwMDoyMzo1OFrOHif3Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwMDozNjoxOFrOHigGdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzNTY3NQ==", "bodyText": "why is 4 hardcoded here^", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505935675", "createdAt": "2020-10-16T00:23:58Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzNjUwNw==", "bodyText": "I find it odd that we only check that one student is in the downloaded file. Shouldn't we check and ensure all the student's are there?\nverifyDownloadedFile name is a little misleading - I think a better name is verifyDownloadedFileContainsContent (since all it does is check if something is inside - it is not an equality check)", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505936507", "createdAt": "2020-10-16T00:27:04Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);\n+        detailsPage.verifyStudentDetails(students);\n+\n+        ______TS(\"send invite\");\n+        detailsPage.sendInvite(student);\n+\n+        detailsPage.verifyStatusMessage(\"An email has been sent to \" + student.getEmail());\n+        String expectedEmailSubject = \"TEAMMATES: Invitation to join course [\"\n+                + course.getName() + \"][\" + course.getId() + \"]\";\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"remind all students to join\");\n+        detailsPage.remindAllToJoin();\n+\n+        detailsPage.verifyStatusMessage(\"Emails have been sent to unregistered students.\");\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"download student list\");\n+        detailsPage.downloadStudentList();\n+        String status = student.googleId.isEmpty() ? \"Yet to Join\" : \"Joined\";\n+        String lastName = student.getName().split(\" \")[1];\n+        String[] studentInfo = { student.getTeam(), student.getName(), lastName, status, student.getEmail() };\n+        List<String> expectedContent = Arrays.asList(\"Course ID,\" + course.getId(),\n+                \"Course Name,\" + course.getName(), String.join(\",\", studentInfo));\n+        verifyDownloadedFile(fileName, expectedContent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzNjg0NQ==", "bodyText": "Here, we also check email sent for just one student. Shouldn't we check all unregistered students get an email (which I think is all for this case)?", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505936845", "createdAt": "2020-10-16T00:28:31Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);\n+        detailsPage.verifyStudentDetails(students);\n+\n+        ______TS(\"send invite\");\n+        detailsPage.sendInvite(student);\n+\n+        detailsPage.verifyStatusMessage(\"An email has been sent to \" + student.getEmail());\n+        String expectedEmailSubject = \"TEAMMATES: Invitation to join course [\"\n+                + course.getName() + \"][\" + course.getId() + \"]\";\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"remind all students to join\");\n+        detailsPage.remindAllToJoin();\n+\n+        detailsPage.verifyStatusMessage(\"Emails have been sent to unregistered students.\");\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzNzg0OQ==", "bodyText": "3 hardcoded here too^ (although this is just a minor nit..)", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505937849", "createdAt": "2020-10-16T00:32:33Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);\n+        detailsPage.verifyStudentDetails(students);\n+\n+        ______TS(\"send invite\");\n+        detailsPage.sendInvite(student);\n+\n+        detailsPage.verifyStatusMessage(\"An email has been sent to \" + student.getEmail());\n+        String expectedEmailSubject = \"TEAMMATES: Invitation to join course [\"\n+                + course.getName() + \"][\" + course.getId() + \"]\";\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"remind all students to join\");\n+        detailsPage.remindAllToJoin();\n+\n+        detailsPage.verifyStatusMessage(\"Emails have been sent to unregistered students.\");\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"download student list\");\n+        detailsPage.downloadStudentList();\n+        String status = student.googleId.isEmpty() ? \"Yet to Join\" : \"Joined\";\n+        String lastName = student.getName().split(\" \")[1];\n+        String[] studentInfo = { student.getTeam(), student.getName(), lastName, status, student.getEmail() };\n+        List<String> expectedContent = Arrays.asList(\"Course ID,\" + course.getId(),\n+                \"Course Name,\" + course.getName(), String.join(\",\", studentInfo));\n+        verifyDownloadedFile(fileName, expectedContent);\n+\n+        ______TS(\"delete student\");\n+        detailsPage.sortByName();\n+        detailsPage.sortByStatus();\n+        StudentAttributes[] studentsAfterDelete = { students[3], students[0], students[2] };\n+        detailsPage.deleteStudent(student);\n+\n+        detailsPage.verifyStatusMessage(\"Student is successfully deleted from course \\\"\"\n+                + course.getId() + \"\\\"\");\n+        detailsPage.verifyNumStudents(3);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzOTQwNA==", "bodyText": "This one is really your call! I would actually sort and remove the student.", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505939404", "createdAt": "2020-10-16T00:35:57Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);\n+        detailsPage.verifyStudentDetails(students);\n+\n+        ______TS(\"send invite\");\n+        detailsPage.sendInvite(student);\n+\n+        detailsPage.verifyStatusMessage(\"An email has been sent to \" + student.getEmail());\n+        String expectedEmailSubject = \"TEAMMATES: Invitation to join course [\"\n+                + course.getName() + \"][\" + course.getId() + \"]\";\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"remind all students to join\");\n+        detailsPage.remindAllToJoin();\n+\n+        detailsPage.verifyStatusMessage(\"Emails have been sent to unregistered students.\");\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"download student list\");\n+        detailsPage.downloadStudentList();\n+        String status = student.googleId.isEmpty() ? \"Yet to Join\" : \"Joined\";\n+        String lastName = student.getName().split(\" \")[1];\n+        String[] studentInfo = { student.getTeam(), student.getName(), lastName, status, student.getEmail() };\n+        List<String> expectedContent = Arrays.asList(\"Course ID,\" + course.getId(),\n+                \"Course Name,\" + course.getName(), String.join(\",\", studentInfo));\n+        verifyDownloadedFile(fileName, expectedContent);\n+\n+        ______TS(\"delete student\");\n+        detailsPage.sortByName();\n+        detailsPage.sortByStatus();\n+        StudentAttributes[] studentsAfterDelete = { students[3], students[0], students[2] };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzOTU3NQ==", "bodyText": "why not use a loop here for these three", "url": "https://github.com/TEAMMATES/teammates/pull/10766#discussion_r505939575", "createdAt": "2020-10-16T00:36:18Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/InstructorCourseDetailsPageE2ETest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.e2e.pageobjects.InstructorCourseDetailsPage;\n+import teammates.e2e.util.TestProperties;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_COURSE_DETAILS_PAGE}.\n+ */\n+public class InstructorCourseDetailsPageE2ETest extends BaseE2ETestCase {\n+    private StudentAttributes student;\n+    private CourseAttributes course;\n+\n+    private String fileName;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/InstructorCourseDetailsPageE2ETest.json\");\n+        student = testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\");\n+        if (!TestProperties.isDevServer()) {\n+            student.email = TestProperties.TEST_STUDENT1_ACCOUNT;\n+        }\n+\n+        removeAndRestoreDataBundle(testData);\n+        course = testData.courses.get(\"ICDetailsE2eT.CS2104\");\n+        fileName = \"/\" + course.getId() + \"_studentList.csv\";\n+    }\n+\n+    @BeforeClass\n+    public void classSetup() {\n+        deleteDownloadsFile(fileName);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl detailsPageUrl = createUrl(Const.WebPageURIs.INSTRUCTOR_COURSE_DETAILS_PAGE)\n+                .withUserId(testData.instructors.get(\"ICDetailsE2eT.instr\").googleId)\n+                .withCourseId(course.getId());\n+        InstructorCourseDetailsPage detailsPage = loginAdminToPage(detailsPageUrl, InstructorCourseDetailsPage.class);\n+\n+        ______TS(\"verify loaded details\");\n+        InstructorAttributes[] instructors = {\n+                testData.instructors.get(\"ICDetailsE2eT.instr\"),\n+                testData.instructors.get(\"ICDetailsE2eT.instr2\"),\n+        };\n+        StudentAttributes[] students = {\n+                testData.students.get(\"alice.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"charlie.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"benny.tmms@ICDetailsE2eT.CS2104\"),\n+                testData.students.get(\"danny.tmms@ICDetailsE2eT.CS2104\"),\n+        };\n+\n+        verifyCourseDetails(detailsPage, course, instructors, students);\n+        detailsPage.verifyNumStudents(4);\n+        detailsPage.verifyStudentDetails(students);\n+\n+        ______TS(\"send invite\");\n+        detailsPage.sendInvite(student);\n+\n+        detailsPage.verifyStatusMessage(\"An email has been sent to \" + student.getEmail());\n+        String expectedEmailSubject = \"TEAMMATES: Invitation to join course [\"\n+                + course.getName() + \"][\" + course.getId() + \"]\";\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"remind all students to join\");\n+        detailsPage.remindAllToJoin();\n+\n+        detailsPage.verifyStatusMessage(\"Emails have been sent to unregistered students.\");\n+        verifyEmailSent(student.getEmail(), expectedEmailSubject);\n+\n+        ______TS(\"download student list\");\n+        detailsPage.downloadStudentList();\n+        String status = student.googleId.isEmpty() ? \"Yet to Join\" : \"Joined\";\n+        String lastName = student.getName().split(\" \")[1];\n+        String[] studentInfo = { student.getTeam(), student.getName(), lastName, status, student.getEmail() };\n+        List<String> expectedContent = Arrays.asList(\"Course ID,\" + course.getId(),\n+                \"Course Name,\" + course.getName(), String.join(\",\", studentInfo));\n+        verifyDownloadedFile(fileName, expectedContent);\n+\n+        ______TS(\"delete student\");\n+        detailsPage.sortByName();\n+        detailsPage.sortByStatus();\n+        StudentAttributes[] studentsAfterDelete = { students[3], students[0], students[2] };\n+        detailsPage.deleteStudent(student);\n+\n+        detailsPage.verifyStatusMessage(\"Student is successfully deleted from course \\\"\"\n+                + course.getId() + \"\\\"\");\n+        detailsPage.verifyNumStudents(3);\n+        detailsPage.verifyStudentDetails(studentsAfterDelete);\n+        verifyAbsentInDatastore(student);\n+\n+        ______TS(\"delete all students\");\n+        detailsPage.deleteAllStudents();\n+\n+        detailsPage.verifyStatusMessage(\"All the students have been removed from the course\");\n+        detailsPage.verifyNumStudents(0);\n+        verifyAbsentInDatastore(studentsAfterDelete[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0be5ed614000547e08388d9186a09225ef7bedff"}, "originalPosition": 109}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "883acb773bb55f7a49120e9188bd08f553c6f543", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/883acb773bb55f7a49120e9188bd08f553c6f543", "committedDate": "2020-10-17T04:47:33Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into instructor-course-details-e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2fe2ca6aa50aefa013559479af191cc060f756a", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c2fe2ca6aa50aefa013559479af191cc060f756a", "committedDate": "2020-10-17T05:05:31Z", "message": "Clean up code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56f0ee23d148e80ca6f3419a8ca7b8e2818affd4", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/56f0ee23d148e80ca6f3419a8ca7b8e2818affd4", "committedDate": "2020-10-17T06:40:21Z", "message": "Add section test data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwOTcxNDcw", "url": "https://github.com/TEAMMATES/teammates/pull/10766#pullrequestreview-510971470", "createdAt": "2020-10-17T09:16:21Z", "commit": {"oid": "56f0ee23d148e80ca6f3419a8ca7b8e2818affd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4194, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}