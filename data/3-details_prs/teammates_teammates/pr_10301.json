{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3ODY1NDIy", "number": 10301, "title": "[#9495] Add cancel button when editing an existing session", "bodyText": "Resolves #9495, Closes #9568\nCredits to @martinoamigo for original design and implementation.", "createdAt": "2020-07-12T07:53:23Z", "url": "https://github.com/TEAMMATES/teammates/pull/10301", "merged": true, "mergeCommit": {"oid": "5deb81a13108950736b7484f938f1f989f962ce2"}, "closed": true, "closedAt": "2020-07-14T17:34:14Z", "author": {"login": "madanalogy"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABaXhMmkAH2gAyNDQ3ODY1NDIyOjYxMzdjOTdjMTU5MzI2OTFhNzMxZDM3M2Q4YzI3YzZjZjBmMTIwZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc03DrAAH2gAyNDQ3ODY1NDIyOjlmNWRjYzQwMTZlZTExYjRhZDQ2YzFiZDkzOGFjOTY4YTEyYzA0OTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6137c97c15932691a731d373d8c27c6cf0f120f9", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6137c97c15932691a731d373d8c27c6cf0f120f9", "committedDate": "2019-03-13T18:24:40Z", "message": "Adds \"Discard\" button to session edit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cf84afaef4665b85c6bb202cf515bdbd73ace33", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9cf84afaef4665b85c6bb202cf515bdbd73ace33", "committedDate": "2019-03-13T18:27:25Z", "message": "Merge branch 'master' into 9495-Cancel-Button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3fba8f35075c6e12ce7cef584d6ce6c6f789cb6", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a3fba8f35075c6e12ce7cef584d6ce6c6f789cb6", "committedDate": "2019-03-13T18:39:22Z", "message": "Removes unnecessary change."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dd9e825e78f6c07a5a2c42c37d2da9213288d45", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3dd9e825e78f6c07a5a2c42c37d2da9213288d45", "committedDate": "2019-03-13T22:26:20Z", "message": "Added warning modal and tooltip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d93a87894a8419c0d089d495c7143fa85b6d08", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/11d93a87894a8419c0d089d495c7143fa85b6d08", "committedDate": "2019-03-13T22:38:08Z", "message": "Update package.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b285f5f1948638a570ae2d0ca8b0cbfad6ad8525", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b285f5f1948638a570ae2d0ca8b0cbfad6ad8525", "committedDate": "2019-03-13T22:49:08Z", "message": "Changes modal text to match others"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "651bd2603a87e56e4d8123494a7bb00dc623b04f", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/651bd2603a87e56e4d8123494a7bb00dc623b04f", "committedDate": "2019-03-14T15:11:35Z", "message": "Removes call to backend, instead stores session instructions locally on clicking \"Edit\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fd47a928375aff25031b33bcf0d180362891d2a", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2fd47a928375aff25031b33bcf0d180362891d2a", "committedDate": "2019-03-14T15:12:32Z", "message": "Merge branch '9495-Cancel-Button' of https://github.com/martinoamigo/teammates into 9495-Cancel-Button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2130aa1cf78a97d3c90d8ac4484d1337efb5f406", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2130aa1cf78a97d3c90d8ac4484d1337efb5f406", "committedDate": "2019-03-14T21:44:33Z", "message": "fixes linting issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1b778ef295704f0ef8df89fb5df4fb59d6867ec", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b1b778ef295704f0ef8df89fb5df4fb59d6867ec", "committedDate": "2019-03-15T15:07:15Z", "message": "Uses getSessionEditFormModel to update form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc8829d60d18c515d9495ffac5111436040e6da2", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bc8829d60d18c515d9495ffac5111436040e6da2", "committedDate": "2019-03-15T15:45:47Z", "message": "tslint ignores no null assertion for one line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e6f94357e608d57afcc71cd92e0943725cc60f1", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0e6f94357e608d57afcc71cd92e0943725cc60f1", "committedDate": "2019-03-18T16:05:33Z", "message": "Merge branch 'master' into 9495-Cancel-Button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7581e680f1abc22543b12a90f983b31bbb26b6ec", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7581e680f1abc22543b12a90f983b31bbb26b6ec", "committedDate": "2019-03-19T21:33:37Z", "message": "Merge branch 'master' into 9495-Cancel-Button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06becf063984f787cd901b644ada97b3f7106cd3", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/06becf063984f787cd901b644ada97b3f7106cd3", "committedDate": "2019-04-10T16:40:39Z", "message": "Removed Map for FeedbackSession"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a18bcea4dd7b6dc1ac695e188f67ac790a38556", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2a18bcea4dd7b6dc1ac695e188f67ac790a38556", "committedDate": "2019-06-07T14:24:35Z", "message": "Renamed variables and updated comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6faf79dd8fae6d7cf10f0cf0428170f5753180e2", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6faf79dd8fae6d7cf10f0cf0428170f5753180e2", "committedDate": "2019-06-07T14:27:03Z", "message": "Renamed cancel event and handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4332d5c83ff0002e9e537d23d02568784647408", "author": {"user": {"login": "martinoamigo", "name": "Evan Martino"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b4332d5c83ff0002e9e537d23d02568784647408", "committedDate": "2019-06-07T14:32:28Z", "message": "renamed functions and variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea0dd9be411ebc8250d91cc0b0e0428b1fd6b054", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ea0dd9be411ebc8250d91cc0b0e0428b1fd6b054", "committedDate": "2020-05-06T09:03:28Z", "message": "Merge branch 'master' into 9495-Cancel-Button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe4c24b4b15687baa8f7bc68cabc077cffe0cb27", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fe4c24b4b15687baa8f7bc68cabc077cffe0cb27", "committedDate": "2020-07-12T07:32:52Z", "message": "Merge branch 'master' into 9495-sessionEdit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e32a30ad37cebe14d00c233dc95843ab626ae5a", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4e32a30ad37cebe14d00c233dc95843ab626ae5a", "committedDate": "2020-07-12T07:50:36Z", "message": "Change feedbackSessionModelBeforeEditing to model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2OTAxOTEw", "url": "https://github.com/TEAMMATES/teammates/pull/10301#pullrequestreview-446901910", "createdAt": "2020-07-12T18:56:55Z", "commit": {"oid": "4e32a30ad37cebe14d00c233dc95843ab626ae5a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMlQxODo1Njo1NVrOGwWWmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMlQxODo1Njo1NVrOGwWWmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1MTA2NQ==", "bodyText": "I don't think this will work as the two variable refer to the same object.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.feedbackSessionModelBeforeEditing = this.sessionEditFormModel;\n          \n          \n            \n                    this.feedbackSessionModelBeforeEditing = this.getSessionEditFormModel(feedbackSession);\n          \n      \n    \n    \n  \n\nEdit: Will work as the event emitter always emit a new object :P But let's not depends on the implicit setting.", "url": "https://github.com/TEAMMATES/teammates/pull/10301#discussion_r453351065", "createdAt": "2020-07-12T18:56:55Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -209,6 +212,7 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n       })\n       .subscribe((feedbackSession: FeedbackSession) => {\n         this.sessionEditFormModel = this.getSessionEditFormModel(feedbackSession);\n+        this.feedbackSessionModelBeforeEditing = this.sessionEditFormModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e32a30ad37cebe14d00c233dc95843ab626ae5a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb", "committedDate": "2020-07-13T01:20:03Z", "message": "Refactor edit model in subscription\n\nCo-authored-by: Xiao Pu <xp.xiaopu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2OTYzMTQw", "url": "https://github.com/TEAMMATES/teammates/pull/10301#pullrequestreview-446963140", "createdAt": "2020-07-13T03:41:55Z", "commit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo0MTo1NVrOGwaesQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzo0NTowNVrOGwahfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxODY3Mw==", "bodyText": "We should inform #10293 to include the model in the standardization also.", "url": "https://github.com/TEAMMATES/teammates/pull/10301#discussion_r453418673", "createdAt": "2020-07-13T03:41:55Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/session-edit-form/session-edit-form.component.html", "diffHunk": "@@ -36,6 +36,22 @@ <h5 class=\"text-md-right\">Or: </h5>\n       <div class=\"col-12 text-center text-md-right session-form-buttons\">\n         <button type=\"button\" class=\"btn btn-primary\" (click)=\"triggerModelChange('isEditable', true)\" *ngIf=\"formMode == SessionEditFormMode.EDIT && !model.isEditable\"><i class=\"fas fa-pencil-alt\"></i> Edit</button>\n         <button type=\"button\" class=\"btn btn-primary\" (click)=\"submitFormHandler()\" [disabled]=\"model.isSaving\" *ngIf=\"model.isEditable\"><i class=\"fas fa-check\"></i> Save <tm-ajax-loading *ngIf=\"model.isSaving\"></tm-ajax-loading></button>\n+        <button type=\"button\" class=\"btn btn-primary\" ngbTooltip=\"Discard changes to the feedback session\" (click)=\"cancelHandler(sessionDiscardModal)\" *ngIf=\"model.isEditable\"><i class=\"fas fa-ban\"></i> Cancel </button>\n+        <ng-template #sessionDiscardModal let-modal>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxOTEyNQ==", "bodyText": "Same problem here (they refer to the same thing).", "url": "https://github.com/TEAMMATES/teammates/pull/10301#discussion_r453419125", "createdAt": "2020-07-13T03:44:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -115,6 +115,9 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n     hasEmailSettingsPanelExpanded: false,\n   };\n \n+  // to get the original session model on discard changes\n+  feedbackSessionModelBeforeEditing: SessionEditFormModel = this.sessionEditFormModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxOTI3Ng==", "bodyText": "And here", "url": "https://github.com/TEAMMATES/teammates/pull/10301#discussion_r453419276", "createdAt": "2020-07-13T03:44:38Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -333,6 +337,7 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n    */\n   editExistingSessionHandler(): void {\n     this.sessionEditFormModel.isSaving = true;\n+    this.feedbackSessionModelBeforeEditing = this.sessionEditFormModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxOTM5MA==", "bodyText": "And here.", "url": "https://github.com/TEAMMATES/teammates/pull/10301#discussion_r453419390", "createdAt": "2020-07-13T03:45:05Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -382,6 +387,13 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n     });\n   }\n \n+  /**\n+   * Handles canceling existing session event without saving changes.\n+   */\n+  cancelEditingSessionHandler(): void {\n+    this.sessionEditFormModel = this.feedbackSessionModelBeforeEditing;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9c0f0f45da21ead38ca17f0f4cfff8a116a3fb"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3edf5d8892144fe7a7178b5bddc4b23142803e9c", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3edf5d8892144fe7a7178b5bddc4b23142803e9c", "committedDate": "2020-07-14T03:08:58Z", "message": "Implement deep copy of session model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODAxNzk0", "url": "https://github.com/TEAMMATES/teammates/pull/10301#pullrequestreview-447801794", "createdAt": "2020-07-14T05:41:50Z", "commit": {"oid": "3edf5d8892144fe7a7178b5bddc4b23142803e9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20377280b9b23f9818809e3069f2caa8686d9d37", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/20377280b9b23f9818809e3069f2caa8686d9d37", "committedDate": "2020-07-14T09:42:30Z", "message": "Merge branch 'master' into 9495-sessionEdit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f5dcc4016ee11b4ad46c1bd938ac968a12c0499", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9f5dcc4016ee11b4ad46c1bd938ac968a12c0499", "committedDate": "2020-07-14T14:38:56Z", "message": "Merge branch 'master' into 9495-sessionEdit"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4285, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}