{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNDAxODk0", "number": 10242, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwMzo0NDozN1rOEJhhEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzoyMTo0N1rOEJ6iZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDIxNzc5OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwMzo0NDozN1rOGqDzOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwMzo0NDozN1rOGqDzOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1NTY0Mg==", "bodyText": "The lint errors in the CI are for the indentation in 293/4 & 299. You can try running ./gradlew lint locally to catch them :)", "url": "https://github.com/TEAMMATES/teammates/pull/10242#discussion_r446755642", "createdAt": "2020-06-29T03:44:37Z", "author": {"login": "madanalogy"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "diffHunk": "@@ -0,0 +1,331 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.Const;\n+import teammates.common.util.JsonUtils;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPSpecification;\n+import teammates.e2e.util.LNPTestData;\n+import teammates.ui.webapi.request.StudentUpdateRequest;\n+\n+/**\n+* L&P Test Case for student update cascade API.\n+*/\n+public class StudentUpdateLNPTest extends BaseLNPTestCase {\n+    private static final int NUM_INSTRUCTORS = 1;\n+    private static final int RAMP_UP_PERIOD = NUM_INSTRUCTORS * 2;\n+\n+    private static final int NUMBER_OF_FEEDBACK_RESPONSES = 100;\n+\n+    private static final String INSTRUCTOR_NAME = \"LnPInstructor\";\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String COURSE_NAME = \"LnPCourse\";\n+    private static final String COURSE_TIME_ZONE = \"UTC\";\n+\n+    private static final String STUDENT_ID = \"LnPStudent.tmms\";\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"studentEmail@gmail.tmt\";\n+    private static final String STUDENT_COMMENTS = \"This is test student comment\";\n+\n+    private static final String UPDATE_STUDENT_NAME = \"updateLnPStudent\";\n+    private static final String UPDATE_STUDENT_EMAIL = \"studentEmailUpdate@gmail.tmt\";\n+\n+    private static final String TEAM_NAME = \"Team 1\";\n+    private static final String GIVER_SECTION_NAME = \"Section 1\";\n+    private static final String RECEIVER_SECTION_NAME = \"Section 1\";\n+\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+    private static final String FEEDBACK_RESPONSE_ID = \"ResponseForQ\";\n+\n+    private static final String QUESTION_ID = \"QuestionTest\";\n+    private static final String QUESTION_TEXT = \"Test Question\";\n+\n+    private static final double ERROR_RATE_LIMIT = 0.01;\n+    private static final double MEAN_RESP_TIME_LIMIT = 10;\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                return new HashMap<>();\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new HashMap<>();\n+\n+                courses.put(COURSE_NAME, CourseAttributes.builder(COURSE_ID)\n+                        .withName(COURSE_NAME)\n+                        .withTimezone(ZoneId.of(COURSE_TIME_ZONE))\n+                        .build());\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new HashMap<>();\n+\n+                instructors.put(INSTRUCTOR_NAME,\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                            .withGoogleId(INSTRUCTOR_NAME)\n+                            .withName(INSTRUCTOR_NAME)\n+                            .withRole(\"Co-owner\")\n+                            .withIsDisplayedToStudents(true)\n+                            .withDisplayedName(\"Co-owner\")\n+                            .withPrivileges(new InstructorPrivileges(\n+                                    Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                            .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL)\n+                        .withGoogleId(STUDENT_ID)\n+                        .withName(STUDENT_NAME)\n+                        .withComment(\"This student's name is \" + STUDENT_NAME)\n+                        .withSectionName(GIVER_SECTION_NAME)\n+                        .withTeamName(TEAM_NAME)\n+                        .build();\n+\n+                students.put(STUDENT_NAME, studentAttribute);\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                        .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                        .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                        .withStartTime(Instant.now())\n+                        .withEndTime(Instant.now().plusSeconds(500))\n+                        .withSessionVisibleFromTime(Instant.now())\n+                        .withResultsVisibleFromTime(Instant.now())\n+                        .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(QUESTION_TEXT);\n+\n+                feedbackQuestions.put(QUESTION_ID,\n+                        FeedbackQuestionAttributes.builder()\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(QUESTION_TEXT)\n+                                .withCourseId(COURSE_ID)\n+                                .withQuestionDetails(details)\n+                                .withQuestionNumber(1)\n+                                .withGiverType(FeedbackParticipantType.STUDENTS)\n+                                .withRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)\n+                                .withShowResponsesTo(showResponses)\n+                                .withShowGiverNameTo(showGiverName)\n+                                .withShowRecipientNameTo(showRecepientName)\n+                                .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackResponseAttributes> generateFeedbackResponses() {\n+                Map<String, FeedbackResponseAttributes> feedbackResponses = new HashMap<>();\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    String responseText = FEEDBACK_RESPONSE_ID + \" \" + i;\n+                    FeedbackTextResponseDetails details =\n+                            new FeedbackTextResponseDetails(responseText);\n+\n+                    feedbackResponses.put(responseText,\n+                            FeedbackResponseAttributes.builder(QUESTION_ID,\n+                                STUDENT_EMAIL,\n+                                STUDENT_EMAIL)\n+                                .withCourseId(COURSE_ID)\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withGiverSection(GIVER_SECTION_NAME)\n+                                .withRecipientSection(RECEIVER_SECTION_NAME)\n+                                .withResponseDetails(details)\n+                                .build());\n+                }\n+\n+                return feedbackResponses;\n+            }\n+\n+            @Override\n+            public List<String> generateCsvHeaders() {\n+                List<String> headers = new ArrayList<>();\n+\n+                headers.add(\"loginId\");\n+                headers.add(\"isAdmin\");\n+                headers.add(\"courseId\");\n+                headers.add(\"studentId\");\n+                headers.add(\"studentEmail\");\n+                headers.add(\"fsname\");\n+                headers.add(\"fqname\");\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    headers.add(\"frname_\" + i);\n+                }\n+\n+                headers.add(\"updateData\");\n+\n+                return headers;\n+            }\n+\n+            @Override\n+            public List<List<String>> generateCsvData() {\n+                DataBundle dataBundle = loadDataBundle(getJsonDataPath());\n+                List<List<String>> csvData = new ArrayList<>();\n+\n+                dataBundle.instructors.forEach((key, instructor) -> {\n+                    List<String> csvRow = new ArrayList<>();\n+\n+                    csvRow.add(instructor.googleId);\n+                    csvRow.add(\"no\");\n+                    csvRow.add(COURSE_ID);\n+                    csvRow.add(STUDENT_ID);\n+                    csvRow.add(STUDENT_EMAIL);\n+                    csvRow.add(FEEDBACK_SESSION_NAME);\n+                    csvRow.add(QUESTION_ID);\n+\n+                    for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                        csvRow.add(FEEDBACK_RESPONSE_ID + \" \" + i);\n+                    }\n+\n+                    StudentUpdateRequest studentUpdateRequest = new StudentUpdateRequest(\n+                            UPDATE_STUDENT_NAME,\n+                            UPDATE_STUDENT_EMAIL,\n+                            TEAM_NAME,\n+                            GIVER_SECTION_NAME,\n+                            STUDENT_COMMENTS,\n+                            false\n+                    );\n+\n+                    String updateData = sanitizeForCsv(JsonUtils.toJson(studentUpdateRequest));\n+                    csvRow.add(updateData);\n+\n+                    csvData.add(csvRow);\n+                });\n+\n+                return csvData;\n+            }\n+        };\n+    }\n+\n+    private Map<String, String> getRequestHeaders() {\n+        Map<String, String> headers = new HashMap<>();\n+\n+        headers.put(\"X-CSRF-TOKEN\", \"${csrfToken}\");\n+        headers.put(\"Content-Type\", \"application/json\");\n+\n+        return headers;\n+    }\n+\n+    private String getTestEndpoint() {\n+        return Const.ResourceURIs.URI_PREFIX + Const.ResourceURIs.STUDENT\n+            + \"?courseid=${courseId}&studentid=${studentId}&studentemail=${studentEmail}\";\n+    }\n+\n+    @Override\n+    protected ListedHashTree getLnpTestPlan() {\n+        ListedHashTree testPlan = new ListedHashTree(JMeterElements.testPlan());\n+        HashTree threadGroup = testPlan.add(\n+                JMeterElements.threadGroup(NUM_INSTRUCTORS, RAMP_UP_PERIOD, 1));\n+\n+        threadGroup.add(JMeterElements.csvDataSet(getPathToTestDataFile(getCsvConfigPath())));\n+        threadGroup.add(JMeterElements.cookieManager());\n+        threadGroup.add(JMeterElements.defaultSampler());\n+\n+        threadGroup.add(JMeterElements.onceOnlyController())\n+            .add(JMeterElements.loginSampler())\n+            .add(JMeterElements.csrfExtractor(\"csrfToken\"));\n+\n+        // Add HTTP sampler for test endpoint\n+        HeaderManager headerManager = JMeterElements.headerManager(getRequestHeaders());\n+        threadGroup.add(JMeterElements.httpSampler(getTestEndpoint(), PUT, \"${updateData}\"))\n+            .add(headerManager);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d041583badf6a4f7ff25ed912969ab5c1d1e7aab"}, "originalPosition": 299}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODMxNzE4OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMzoyMTo0N1rOGqqMmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDo0NDowNVrOGqrfSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4NDcyOQ==", "bodyText": "I think update this field will also cause cascade update. Have u considered this?", "url": "https://github.com/TEAMMATES/teammates/pull/10242#discussion_r447384729", "createdAt": "2020-06-30T03:21:47Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "diffHunk": "@@ -0,0 +1,331 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.Const;\n+import teammates.common.util.JsonUtils;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPSpecification;\n+import teammates.e2e.util.LNPTestData;\n+import teammates.ui.webapi.request.StudentUpdateRequest;\n+\n+/**\n+* L&P Test Case for student update cascade API.\n+*/\n+public class StudentUpdateLNPTest extends BaseLNPTestCase {\n+    private static final int NUM_INSTRUCTORS = 1;\n+    private static final int RAMP_UP_PERIOD = NUM_INSTRUCTORS * 2;\n+\n+    private static final int NUMBER_OF_FEEDBACK_RESPONSES = 100;\n+\n+    private static final String INSTRUCTOR_NAME = \"LnPInstructor\";\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String COURSE_NAME = \"LnPCourse\";\n+    private static final String COURSE_TIME_ZONE = \"UTC\";\n+\n+    private static final String STUDENT_ID = \"LnPStudent.tmms\";\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"studentEmail@gmail.tmt\";\n+    private static final String STUDENT_COMMENTS = \"This is test student comment\";\n+\n+    private static final String UPDATE_STUDENT_NAME = \"updateLnPStudent\";\n+    private static final String UPDATE_STUDENT_EMAIL = \"studentEmailUpdate@gmail.tmt\";\n+\n+    private static final String TEAM_NAME = \"Team 1\";\n+    private static final String GIVER_SECTION_NAME = \"Section 1\";\n+    private static final String RECEIVER_SECTION_NAME = \"Section 1\";\n+\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+    private static final String FEEDBACK_RESPONSE_ID = \"ResponseForQ\";\n+\n+    private static final String QUESTION_ID = \"QuestionTest\";\n+    private static final String QUESTION_TEXT = \"Test Question\";\n+\n+    private static final double ERROR_RATE_LIMIT = 0.01;\n+    private static final double MEAN_RESP_TIME_LIMIT = 10;\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                return new HashMap<>();\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new HashMap<>();\n+\n+                courses.put(COURSE_NAME, CourseAttributes.builder(COURSE_ID)\n+                        .withName(COURSE_NAME)\n+                        .withTimezone(ZoneId.of(COURSE_TIME_ZONE))\n+                        .build());\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new HashMap<>();\n+\n+                instructors.put(INSTRUCTOR_NAME,\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                            .withGoogleId(INSTRUCTOR_NAME)\n+                            .withName(INSTRUCTOR_NAME)\n+                            .withRole(\"Co-owner\")\n+                            .withIsDisplayedToStudents(true)\n+                            .withDisplayedName(\"Co-owner\")\n+                            .withPrivileges(new InstructorPrivileges(\n+                                    Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                            .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL)\n+                        .withGoogleId(STUDENT_ID)\n+                        .withName(STUDENT_NAME)\n+                        .withComment(\"This student's name is \" + STUDENT_NAME)\n+                        .withSectionName(GIVER_SECTION_NAME)\n+                        .withTeamName(TEAM_NAME)\n+                        .build();\n+\n+                students.put(STUDENT_NAME, studentAttribute);\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                        .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                        .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                        .withStartTime(Instant.now())\n+                        .withEndTime(Instant.now().plusSeconds(500))\n+                        .withSessionVisibleFromTime(Instant.now())\n+                        .withResultsVisibleFromTime(Instant.now())\n+                        .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(QUESTION_TEXT);\n+\n+                feedbackQuestions.put(QUESTION_ID,\n+                        FeedbackQuestionAttributes.builder()\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(QUESTION_TEXT)\n+                                .withCourseId(COURSE_ID)\n+                                .withQuestionDetails(details)\n+                                .withQuestionNumber(1)\n+                                .withGiverType(FeedbackParticipantType.STUDENTS)\n+                                .withRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)\n+                                .withShowResponsesTo(showResponses)\n+                                .withShowGiverNameTo(showGiverName)\n+                                .withShowRecipientNameTo(showRecepientName)\n+                                .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackResponseAttributes> generateFeedbackResponses() {\n+                Map<String, FeedbackResponseAttributes> feedbackResponses = new HashMap<>();\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    String responseText = FEEDBACK_RESPONSE_ID + \" \" + i;\n+                    FeedbackTextResponseDetails details =\n+                            new FeedbackTextResponseDetails(responseText);\n+\n+                    feedbackResponses.put(responseText,\n+                            FeedbackResponseAttributes.builder(QUESTION_ID,\n+                                STUDENT_EMAIL,\n+                                STUDENT_EMAIL)\n+                                .withCourseId(COURSE_ID)\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withGiverSection(GIVER_SECTION_NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c80baf6a0e746f007d19f3f81739c9d140b224b"}, "originalPosition": 198}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4Njk0Mg==", "bodyText": "Yup, I am considering the worst case of a general student update here.\nMaybe in the future, if we want a more fine-grained LNP test, we can separate it out to 2 test cases, one for course_id, and one for section name.", "url": "https://github.com/TEAMMATES/teammates/pull/10242#discussion_r447386942", "createdAt": "2020-06-30T03:30:02Z", "author": {"login": "Derek-Hardy"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "diffHunk": "@@ -0,0 +1,331 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.Const;\n+import teammates.common.util.JsonUtils;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPSpecification;\n+import teammates.e2e.util.LNPTestData;\n+import teammates.ui.webapi.request.StudentUpdateRequest;\n+\n+/**\n+* L&P Test Case for student update cascade API.\n+*/\n+public class StudentUpdateLNPTest extends BaseLNPTestCase {\n+    private static final int NUM_INSTRUCTORS = 1;\n+    private static final int RAMP_UP_PERIOD = NUM_INSTRUCTORS * 2;\n+\n+    private static final int NUMBER_OF_FEEDBACK_RESPONSES = 100;\n+\n+    private static final String INSTRUCTOR_NAME = \"LnPInstructor\";\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String COURSE_NAME = \"LnPCourse\";\n+    private static final String COURSE_TIME_ZONE = \"UTC\";\n+\n+    private static final String STUDENT_ID = \"LnPStudent.tmms\";\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"studentEmail@gmail.tmt\";\n+    private static final String STUDENT_COMMENTS = \"This is test student comment\";\n+\n+    private static final String UPDATE_STUDENT_NAME = \"updateLnPStudent\";\n+    private static final String UPDATE_STUDENT_EMAIL = \"studentEmailUpdate@gmail.tmt\";\n+\n+    private static final String TEAM_NAME = \"Team 1\";\n+    private static final String GIVER_SECTION_NAME = \"Section 1\";\n+    private static final String RECEIVER_SECTION_NAME = \"Section 1\";\n+\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+    private static final String FEEDBACK_RESPONSE_ID = \"ResponseForQ\";\n+\n+    private static final String QUESTION_ID = \"QuestionTest\";\n+    private static final String QUESTION_TEXT = \"Test Question\";\n+\n+    private static final double ERROR_RATE_LIMIT = 0.01;\n+    private static final double MEAN_RESP_TIME_LIMIT = 10;\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                return new HashMap<>();\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new HashMap<>();\n+\n+                courses.put(COURSE_NAME, CourseAttributes.builder(COURSE_ID)\n+                        .withName(COURSE_NAME)\n+                        .withTimezone(ZoneId.of(COURSE_TIME_ZONE))\n+                        .build());\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new HashMap<>();\n+\n+                instructors.put(INSTRUCTOR_NAME,\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                            .withGoogleId(INSTRUCTOR_NAME)\n+                            .withName(INSTRUCTOR_NAME)\n+                            .withRole(\"Co-owner\")\n+                            .withIsDisplayedToStudents(true)\n+                            .withDisplayedName(\"Co-owner\")\n+                            .withPrivileges(new InstructorPrivileges(\n+                                    Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                            .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL)\n+                        .withGoogleId(STUDENT_ID)\n+                        .withName(STUDENT_NAME)\n+                        .withComment(\"This student's name is \" + STUDENT_NAME)\n+                        .withSectionName(GIVER_SECTION_NAME)\n+                        .withTeamName(TEAM_NAME)\n+                        .build();\n+\n+                students.put(STUDENT_NAME, studentAttribute);\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                        .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                        .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                        .withStartTime(Instant.now())\n+                        .withEndTime(Instant.now().plusSeconds(500))\n+                        .withSessionVisibleFromTime(Instant.now())\n+                        .withResultsVisibleFromTime(Instant.now())\n+                        .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(QUESTION_TEXT);\n+\n+                feedbackQuestions.put(QUESTION_ID,\n+                        FeedbackQuestionAttributes.builder()\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(QUESTION_TEXT)\n+                                .withCourseId(COURSE_ID)\n+                                .withQuestionDetails(details)\n+                                .withQuestionNumber(1)\n+                                .withGiverType(FeedbackParticipantType.STUDENTS)\n+                                .withRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)\n+                                .withShowResponsesTo(showResponses)\n+                                .withShowGiverNameTo(showGiverName)\n+                                .withShowRecipientNameTo(showRecepientName)\n+                                .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackResponseAttributes> generateFeedbackResponses() {\n+                Map<String, FeedbackResponseAttributes> feedbackResponses = new HashMap<>();\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    String responseText = FEEDBACK_RESPONSE_ID + \" \" + i;\n+                    FeedbackTextResponseDetails details =\n+                            new FeedbackTextResponseDetails(responseText);\n+\n+                    feedbackResponses.put(responseText,\n+                            FeedbackResponseAttributes.builder(QUESTION_ID,\n+                                STUDENT_EMAIL,\n+                                STUDENT_EMAIL)\n+                                .withCourseId(COURSE_ID)\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withGiverSection(GIVER_SECTION_NAME)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4NDcyOQ=="}, "originalCommit": {"oid": "9c80baf6a0e746f007d19f3f81739c9d140b224b"}, "originalPosition": 198}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4NzI4Mw==", "bodyText": "Maybe in the future, if we want a more fine-grained LNP test, we can separate it out to 2 test cases, one for course_id, and one for section name.\n\nI think this is more important to do. See if you can finish before your internship ends :P", "url": "https://github.com/TEAMMATES/teammates/pull/10242#discussion_r447387283", "createdAt": "2020-06-30T03:31:13Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "diffHunk": "@@ -0,0 +1,331 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.Const;\n+import teammates.common.util.JsonUtils;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPSpecification;\n+import teammates.e2e.util.LNPTestData;\n+import teammates.ui.webapi.request.StudentUpdateRequest;\n+\n+/**\n+* L&P Test Case for student update cascade API.\n+*/\n+public class StudentUpdateLNPTest extends BaseLNPTestCase {\n+    private static final int NUM_INSTRUCTORS = 1;\n+    private static final int RAMP_UP_PERIOD = NUM_INSTRUCTORS * 2;\n+\n+    private static final int NUMBER_OF_FEEDBACK_RESPONSES = 100;\n+\n+    private static final String INSTRUCTOR_NAME = \"LnPInstructor\";\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String COURSE_NAME = \"LnPCourse\";\n+    private static final String COURSE_TIME_ZONE = \"UTC\";\n+\n+    private static final String STUDENT_ID = \"LnPStudent.tmms\";\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"studentEmail@gmail.tmt\";\n+    private static final String STUDENT_COMMENTS = \"This is test student comment\";\n+\n+    private static final String UPDATE_STUDENT_NAME = \"updateLnPStudent\";\n+    private static final String UPDATE_STUDENT_EMAIL = \"studentEmailUpdate@gmail.tmt\";\n+\n+    private static final String TEAM_NAME = \"Team 1\";\n+    private static final String GIVER_SECTION_NAME = \"Section 1\";\n+    private static final String RECEIVER_SECTION_NAME = \"Section 1\";\n+\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+    private static final String FEEDBACK_RESPONSE_ID = \"ResponseForQ\";\n+\n+    private static final String QUESTION_ID = \"QuestionTest\";\n+    private static final String QUESTION_TEXT = \"Test Question\";\n+\n+    private static final double ERROR_RATE_LIMIT = 0.01;\n+    private static final double MEAN_RESP_TIME_LIMIT = 10;\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                return new HashMap<>();\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new HashMap<>();\n+\n+                courses.put(COURSE_NAME, CourseAttributes.builder(COURSE_ID)\n+                        .withName(COURSE_NAME)\n+                        .withTimezone(ZoneId.of(COURSE_TIME_ZONE))\n+                        .build());\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new HashMap<>();\n+\n+                instructors.put(INSTRUCTOR_NAME,\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                            .withGoogleId(INSTRUCTOR_NAME)\n+                            .withName(INSTRUCTOR_NAME)\n+                            .withRole(\"Co-owner\")\n+                            .withIsDisplayedToStudents(true)\n+                            .withDisplayedName(\"Co-owner\")\n+                            .withPrivileges(new InstructorPrivileges(\n+                                    Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                            .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL)\n+                        .withGoogleId(STUDENT_ID)\n+                        .withName(STUDENT_NAME)\n+                        .withComment(\"This student's name is \" + STUDENT_NAME)\n+                        .withSectionName(GIVER_SECTION_NAME)\n+                        .withTeamName(TEAM_NAME)\n+                        .build();\n+\n+                students.put(STUDENT_NAME, studentAttribute);\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                        .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                        .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                        .withStartTime(Instant.now())\n+                        .withEndTime(Instant.now().plusSeconds(500))\n+                        .withSessionVisibleFromTime(Instant.now())\n+                        .withResultsVisibleFromTime(Instant.now())\n+                        .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(QUESTION_TEXT);\n+\n+                feedbackQuestions.put(QUESTION_ID,\n+                        FeedbackQuestionAttributes.builder()\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(QUESTION_TEXT)\n+                                .withCourseId(COURSE_ID)\n+                                .withQuestionDetails(details)\n+                                .withQuestionNumber(1)\n+                                .withGiverType(FeedbackParticipantType.STUDENTS)\n+                                .withRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)\n+                                .withShowResponsesTo(showResponses)\n+                                .withShowGiverNameTo(showGiverName)\n+                                .withShowRecipientNameTo(showRecepientName)\n+                                .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackResponseAttributes> generateFeedbackResponses() {\n+                Map<String, FeedbackResponseAttributes> feedbackResponses = new HashMap<>();\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    String responseText = FEEDBACK_RESPONSE_ID + \" \" + i;\n+                    FeedbackTextResponseDetails details =\n+                            new FeedbackTextResponseDetails(responseText);\n+\n+                    feedbackResponses.put(responseText,\n+                            FeedbackResponseAttributes.builder(QUESTION_ID,\n+                                STUDENT_EMAIL,\n+                                STUDENT_EMAIL)\n+                                .withCourseId(COURSE_ID)\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withGiverSection(GIVER_SECTION_NAME)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4NDcyOQ=="}, "originalCommit": {"oid": "9c80baf6a0e746f007d19f3f81739c9d140b224b"}, "originalPosition": 198}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQwNTg5Ng==", "bodyText": "If you check the code, there are three different conditions for student cascade update:\n\nChanging student email\nChanging student team\nChanging student section\n\nFor LnP test to be successful in catching bottleneck operations, they need to be separate.", "url": "https://github.com/TEAMMATES/teammates/pull/10242#discussion_r447405896", "createdAt": "2020-06-30T04:44:05Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/StudentUpdateLNPTest.java", "diffHunk": "@@ -0,0 +1,331 @@\n+package teammates.e2e.cases.lnp;\n+\n+import java.io.IOException;\n+import java.time.Instant;\n+import java.time.ZoneId;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.jmeter.protocol.http.control.HeaderManager;\n+import org.apache.jorphan.collections.HashTree;\n+import org.apache.jorphan.collections.ListedHashTree;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.DataBundle;\n+import teammates.common.datatransfer.FeedbackParticipantType;\n+import teammates.common.datatransfer.InstructorPrivileges;\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.Const;\n+import teammates.common.util.JsonUtils;\n+import teammates.e2e.util.JMeterElements;\n+import teammates.e2e.util.LNPSpecification;\n+import teammates.e2e.util.LNPTestData;\n+import teammates.ui.webapi.request.StudentUpdateRequest;\n+\n+/**\n+* L&P Test Case for student update cascade API.\n+*/\n+public class StudentUpdateLNPTest extends BaseLNPTestCase {\n+    private static final int NUM_INSTRUCTORS = 1;\n+    private static final int RAMP_UP_PERIOD = NUM_INSTRUCTORS * 2;\n+\n+    private static final int NUMBER_OF_FEEDBACK_RESPONSES = 100;\n+\n+    private static final String INSTRUCTOR_NAME = \"LnPInstructor\";\n+    private static final String INSTRUCTOR_EMAIL = \"tmms.test@gmail.tmt\";\n+\n+    private static final String COURSE_ID = \"TestData.CS101\";\n+    private static final String COURSE_NAME = \"LnPCourse\";\n+    private static final String COURSE_TIME_ZONE = \"UTC\";\n+\n+    private static final String STUDENT_ID = \"LnPStudent.tmms\";\n+    private static final String STUDENT_NAME = \"LnPStudent\";\n+    private static final String STUDENT_EMAIL = \"studentEmail@gmail.tmt\";\n+    private static final String STUDENT_COMMENTS = \"This is test student comment\";\n+\n+    private static final String UPDATE_STUDENT_NAME = \"updateLnPStudent\";\n+    private static final String UPDATE_STUDENT_EMAIL = \"studentEmailUpdate@gmail.tmt\";\n+\n+    private static final String TEAM_NAME = \"Team 1\";\n+    private static final String GIVER_SECTION_NAME = \"Section 1\";\n+    private static final String RECEIVER_SECTION_NAME = \"Section 1\";\n+\n+    private static final String FEEDBACK_SESSION_NAME = \"Test Feedback Session\";\n+    private static final String FEEDBACK_RESPONSE_ID = \"ResponseForQ\";\n+\n+    private static final String QUESTION_ID = \"QuestionTest\";\n+    private static final String QUESTION_TEXT = \"Test Question\";\n+\n+    private static final double ERROR_RATE_LIMIT = 0.01;\n+    private static final double MEAN_RESP_TIME_LIMIT = 10;\n+\n+    @Override\n+    protected LNPTestData getTestData() {\n+        return new LNPTestData() {\n+            @Override\n+            protected Map<String, AccountAttributes> generateAccounts() {\n+                return new HashMap<>();\n+            }\n+\n+            @Override\n+            protected Map<String, CourseAttributes> generateCourses() {\n+                Map<String, CourseAttributes> courses = new HashMap<>();\n+\n+                courses.put(COURSE_NAME, CourseAttributes.builder(COURSE_ID)\n+                        .withName(COURSE_NAME)\n+                        .withTimezone(ZoneId.of(COURSE_TIME_ZONE))\n+                        .build());\n+\n+                return courses;\n+            }\n+\n+            @Override\n+            protected Map<String, InstructorAttributes> generateInstructors() {\n+                Map<String, InstructorAttributes> instructors = new HashMap<>();\n+\n+                instructors.put(INSTRUCTOR_NAME,\n+                        InstructorAttributes.builder(COURSE_ID, INSTRUCTOR_EMAIL)\n+                            .withGoogleId(INSTRUCTOR_NAME)\n+                            .withName(INSTRUCTOR_NAME)\n+                            .withRole(\"Co-owner\")\n+                            .withIsDisplayedToStudents(true)\n+                            .withDisplayedName(\"Co-owner\")\n+                            .withPrivileges(new InstructorPrivileges(\n+                                    Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER))\n+                            .build()\n+                );\n+\n+                return instructors;\n+            }\n+\n+            @Override\n+            protected Map<String, StudentAttributes> generateStudents() {\n+                Map<String, StudentAttributes> students = new LinkedHashMap<>();\n+                StudentAttributes studentAttribute;\n+\n+                studentAttribute = StudentAttributes.builder(COURSE_ID, STUDENT_EMAIL)\n+                        .withGoogleId(STUDENT_ID)\n+                        .withName(STUDENT_NAME)\n+                        .withComment(\"This student's name is \" + STUDENT_NAME)\n+                        .withSectionName(GIVER_SECTION_NAME)\n+                        .withTeamName(TEAM_NAME)\n+                        .build();\n+\n+                students.put(STUDENT_NAME, studentAttribute);\n+\n+                return students;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackSessionAttributes> generateFeedbackSessions() {\n+                Map<String, FeedbackSessionAttributes> feedbackSessions = new LinkedHashMap<>();\n+\n+                FeedbackSessionAttributes session = FeedbackSessionAttributes\n+                        .builder(FEEDBACK_SESSION_NAME, COURSE_ID)\n+                        .withCreatorEmail(INSTRUCTOR_EMAIL)\n+                        .withStartTime(Instant.now())\n+                        .withEndTime(Instant.now().plusSeconds(500))\n+                        .withSessionVisibleFromTime(Instant.now())\n+                        .withResultsVisibleFromTime(Instant.now())\n+                        .build();\n+\n+                feedbackSessions.put(FEEDBACK_SESSION_NAME, session);\n+\n+                return feedbackSessions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackQuestionAttributes> generateFeedbackQuestions() {\n+                ArrayList<FeedbackParticipantType> showResponses = new ArrayList<>();\n+                showResponses.add(FeedbackParticipantType.RECEIVER);\n+                showResponses.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showGiverName = new ArrayList<>();\n+                showGiverName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                ArrayList<FeedbackParticipantType> showRecepientName = new ArrayList<>();\n+                showRecepientName.add(FeedbackParticipantType.INSTRUCTORS);\n+\n+                Map<String, FeedbackQuestionAttributes> feedbackQuestions = new LinkedHashMap<>();\n+                FeedbackQuestionDetails details = new FeedbackTextQuestionDetails(QUESTION_TEXT);\n+\n+                feedbackQuestions.put(QUESTION_ID,\n+                        FeedbackQuestionAttributes.builder()\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withQuestionDescription(QUESTION_TEXT)\n+                                .withCourseId(COURSE_ID)\n+                                .withQuestionDetails(details)\n+                                .withQuestionNumber(1)\n+                                .withGiverType(FeedbackParticipantType.STUDENTS)\n+                                .withRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)\n+                                .withShowResponsesTo(showResponses)\n+                                .withShowGiverNameTo(showGiverName)\n+                                .withShowRecipientNameTo(showRecepientName)\n+                                .build()\n+                );\n+                return feedbackQuestions;\n+            }\n+\n+            @Override\n+            protected Map<String, FeedbackResponseAttributes> generateFeedbackResponses() {\n+                Map<String, FeedbackResponseAttributes> feedbackResponses = new HashMap<>();\n+\n+                for (int i = 1; i <= NUMBER_OF_FEEDBACK_RESPONSES; i++) {\n+                    String responseText = FEEDBACK_RESPONSE_ID + \" \" + i;\n+                    FeedbackTextResponseDetails details =\n+                            new FeedbackTextResponseDetails(responseText);\n+\n+                    feedbackResponses.put(responseText,\n+                            FeedbackResponseAttributes.builder(QUESTION_ID,\n+                                STUDENT_EMAIL,\n+                                STUDENT_EMAIL)\n+                                .withCourseId(COURSE_ID)\n+                                .withFeedbackSessionName(FEEDBACK_SESSION_NAME)\n+                                .withGiverSection(GIVER_SECTION_NAME)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM4NDcyOQ=="}, "originalCommit": {"oid": "9c80baf6a0e746f007d19f3f81739c9d140b224b"}, "originalPosition": 198}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3882, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}