{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5Mjg5ODY1", "number": 9987, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo0Nzo0MlrODrlpkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo1MDo1MlrODrluHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDMyMjA5OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo0Nzo0MlrOF8BF1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo0Nzo0MlrOF8BF1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3Njc1OA==", "bodyText": "Student1 is a rather generic term. This may result in unexpected results when there are other data in the system.", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398476758", "createdAt": "2020-03-26T10:47:42Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -0,0 +1,188 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.time.Instant;\n+\n+import org.openqa.selenium.WebElement;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AdminHomePage;\n+import teammates.e2e.pageobjects.AdminSearchPage;\n+import teammates.e2e.pageobjects.AppPage;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#ADMIN_SEARCH_PAGE}.\n+ */\n+public class AdminSearchPageE2ETest extends BaseE2ETestCase {\n+    private AdminSearchPage searchPage;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/AdminSearchPageE2ETest.json\");\n+        removeAndRestoreDataBundle(testData);\n+        putDocuments(testData);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl url = createUrl(Const.WebPageURIs.ADMIN_SEARCH_PAGE);\n+        loginAdminToPage(url, AdminHomePage.class);\n+        searchPage = AppPage.getNewPageInstance(browser, url, AdminSearchPage.class);\n+\n+        browser.waitForPageLoad();\n+        StudentAttributes student = testData.students.get(\"student1InCourse1\");\n+        AccountAttributes studentAccount = testData.accounts.get(\"student1InCourse1\");\n+        InstructorAttributes instructor = testData.instructors.get(\"instructor1OfCourse1\");\n+        AccountAttributes instructorAccount = testData.accounts.get(\"instructor1OfCourse1\");\n+\n+        ______TS(\"Typical case: Search student keyword\");\n+        String searchContent = \"Student1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDMyNzE4OnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo0OTowMlrOF8BJBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNTozMjo1OFrOF8MvNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3NzU3NA==", "bodyText": "May need more example cases. I don't think resetting instructor google ID is the only action possible from this page.", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398477574", "createdAt": "2020-03-26T10:49:02Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -0,0 +1,188 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.time.Instant;\n+\n+import org.openqa.selenium.WebElement;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AdminHomePage;\n+import teammates.e2e.pageobjects.AdminSearchPage;\n+import teammates.e2e.pageobjects.AppPage;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#ADMIN_SEARCH_PAGE}.\n+ */\n+public class AdminSearchPageE2ETest extends BaseE2ETestCase {\n+    private AdminSearchPage searchPage;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/AdminSearchPageE2ETest.json\");\n+        removeAndRestoreDataBundle(testData);\n+        putDocuments(testData);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl url = createUrl(Const.WebPageURIs.ADMIN_SEARCH_PAGE);\n+        loginAdminToPage(url, AdminHomePage.class);\n+        searchPage = AppPage.getNewPageInstance(browser, url, AdminSearchPage.class);\n+\n+        browser.waitForPageLoad();\n+        StudentAttributes student = testData.students.get(\"student1InCourse1\");\n+        AccountAttributes studentAccount = testData.accounts.get(\"student1InCourse1\");\n+        InstructorAttributes instructor = testData.instructors.get(\"instructor1OfCourse1\");\n+        AccountAttributes instructorAccount = testData.accounts.get(\"instructor1OfCourse1\");\n+\n+        ______TS(\"Typical case: Search student keyword\");\n+        String searchContent = \"Student1\";\n+        searchPage.inputSearchContent(searchContent);\n+        searchPage.clickSearchButton();\n+        verifyStudentRowContent(student, studentAccount);\n+        verifyStudentExpandedLinks(student);\n+\n+        ______TS(\"Typical case: Search for instructor email\");\n+        searchPage.clearSearchBox();\n+        searchContent = \"searchUI.instructor1@course1.tmt\";\n+        searchPage.inputSearchContent(searchContent);\n+        searchPage.clickSearchButton();\n+        verifyInstructorRowContent(instructor, instructorAccount);\n+        verifyInstructorExpandedLinks(instructor);\n+\n+        ______TS(\"Typical case: Reset instructor google id\");\n+        searchPage.resetInstructorGoogleId(instructor);\n+        instructor.googleId = null;\n+        verifyInstructorRowContent(instructor, instructorAccount);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2NzU3NQ==", "bodyText": "From the admin-search-page-component.ts I believe the only actions for this page are show links, hide links and reset student and instructor google id. There is also a manage account link and a homepage link which I checked but did not click.", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398667575", "createdAt": "2020-03-26T15:32:58Z", "author": {"login": "jtankw3"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -0,0 +1,188 @@\n+package teammates.e2e.cases.e2e;\n+\n+import java.time.Instant;\n+\n+import org.openqa.selenium.WebElement;\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.AccountAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AdminHomePage;\n+import teammates.e2e.pageobjects.AdminSearchPage;\n+import teammates.e2e.pageobjects.AppPage;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#ADMIN_SEARCH_PAGE}.\n+ */\n+public class AdminSearchPageE2ETest extends BaseE2ETestCase {\n+    private AdminSearchPage searchPage;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/AdminSearchPageE2ETest.json\");\n+        removeAndRestoreDataBundle(testData);\n+        putDocuments(testData);\n+    }\n+\n+    @Test\n+    public void allTests() {\n+        AppUrl url = createUrl(Const.WebPageURIs.ADMIN_SEARCH_PAGE);\n+        loginAdminToPage(url, AdminHomePage.class);\n+        searchPage = AppPage.getNewPageInstance(browser, url, AdminSearchPage.class);\n+\n+        browser.waitForPageLoad();\n+        StudentAttributes student = testData.students.get(\"student1InCourse1\");\n+        AccountAttributes studentAccount = testData.accounts.get(\"student1InCourse1\");\n+        InstructorAttributes instructor = testData.instructors.get(\"instructor1OfCourse1\");\n+        AccountAttributes instructorAccount = testData.accounts.get(\"instructor1OfCourse1\");\n+\n+        ______TS(\"Typical case: Search student keyword\");\n+        String searchContent = \"Student1\";\n+        searchPage.inputSearchContent(searchContent);\n+        searchPage.clickSearchButton();\n+        verifyStudentRowContent(student, studentAccount);\n+        verifyStudentExpandedLinks(student);\n+\n+        ______TS(\"Typical case: Search for instructor email\");\n+        searchPage.clearSearchBox();\n+        searchContent = \"searchUI.instructor1@course1.tmt\";\n+        searchPage.inputSearchContent(searchContent);\n+        searchPage.clickSearchButton();\n+        verifyInstructorRowContent(instructor, instructorAccount);\n+        verifyInstructorExpandedLinks(instructor);\n+\n+        ______TS(\"Typical case: Reset instructor google id\");\n+        searchPage.resetInstructorGoogleId(instructor);\n+        instructor.googleId = null;\n+        verifyInstructorRowContent(instructor, instructorAccount);\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3NzU3NA=="}, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDMzMTUzOnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/ui/webapi/action/SearchAccountsAction.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo1MDoxN1rOF8BLyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNToyNDo1NFrOF8MVtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3ODI4Mw==", "bodyText": "Reason for this?", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398478283", "createdAt": "2020-03-26T10:50:17Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/SearchAccountsAction.java", "diffHunk": "@@ -267,7 +267,7 @@ private String generateResultUrl(StudentAttributes student, String fsName) {\n             if (ib.getGoogleId() != null) {\n                 ib.setHomePageLink(Config.getFrontEndAppUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE)\n                         .withUserId(instructor.googleId)\n-                        .toAbsoluteString());\n+                        .toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2MTA0NA==", "bodyText": "As the instructor manage account link and the student manage account link and homepage link all use relative url, I believe it would be more consistent to use a relative url for the instructor homepage link.\nIt is also more convenient for testing as you would not be redirected to localhost:4200 when accessing from localhost:8080", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398661044", "createdAt": "2020-03-26T15:24:54Z", "author": {"login": "jtankw3"}, "path": "src/main/java/teammates/ui/webapi/action/SearchAccountsAction.java", "diffHunk": "@@ -267,7 +267,7 @@ private String generateResultUrl(StudentAttributes student, String fsName) {\n             if (ib.getGoogleId() != null) {\n                 ib.setHomePageLink(Config.getFrontEndAppUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE)\n                         .withUserId(instructor.googleId)\n-                        .toAbsoluteString());\n+                        .toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3ODI4Mw=="}, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDMzMzc1OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-admin/admin-search-page/admin-search-page.component.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo1MDo1MlrOF8BNGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDo1MDo1MlrOF8BNGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ3ODYxOA==", "bodyText": "Unrelated change; although this doesn't affect correctness, try not to have this kind of stuff.", "url": "https://github.com/TEAMMATES/teammates/pull/9987#discussion_r398478618", "createdAt": "2020-03-26T10:50:52Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-admin/admin-search-page/admin-search-page.component.html", "diffHunk": "@@ -92,7 +92,7 @@\n         </tr>\n       </thead>\n       <tbody>\n-        <ng-container *ngFor=\"let student of students\">\n+        <ng-container *ngFor=\"let student of students;\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9623cc0a7ed310fb8c708368de910fdf3c187db5"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3911, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}