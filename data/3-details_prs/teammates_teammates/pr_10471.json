{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2ODcwMTgy", "number": 10471, "title": "[#10455] Add a redirect banner for users to switch versions", "bodyText": "Fixes #10455", "createdAt": "2020-07-27T03:09:12Z", "url": "https://github.com/TEAMMATES/teammates/pull/10471", "merged": true, "mergeCommit": {"oid": "e92d8d7c70fd1fb2e2ebf92649da92d62d90dec1"}, "closed": true, "closedAt": "2020-07-29T16:20:16Z", "author": {"login": "madanalogy"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4479agH2gAyNDU2ODcwMTgyOjRlMWYwMTcwODExODg5ZmVjYTQ1M2VkNzViNjFkZDM0ZGY2ZWYyZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5rLjRAH2gAyNDU2ODcwMTgyOjc3NmZmMGU1M2IxY2ZhOWQ5NzkyZjZlMTQwZTQ5MGM2NGQ2NjlkMGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e1f0170811889feca453ed75b61dd34df6ef2d1", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/4e1f0170811889feca453ed75b61dd34df6ef2d1", "committedDate": "2020-07-27T03:06:01Z", "message": "Add redirect-banner.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38f6f94d1187b5b3d4d2a78521073a267b587417", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/38f6f94d1187b5b3d4d2a78521073a267b587417", "committedDate": "2020-07-27T04:39:40Z", "message": "Change info message and fix lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDc2NDQ3", "url": "https://github.com/TEAMMATES/teammates/pull/10471#pullrequestreview-455476447", "createdAt": "2020-07-27T05:17:00Z", "commit": {"oid": "38f6f94d1187b5b3d4d2a78521073a267b587417"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTE3NzI3", "url": "https://github.com/TEAMMATES/teammates/pull/10471#pullrequestreview-455517727", "createdAt": "2020-07-27T07:02:35Z", "commit": {"oid": "79c84f929ad60ae8b6d0151926848969e693b682"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d63b4fe5159d49a80fc3ce0ec69c5c5fd42cab", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c9d63b4fe5159d49a80fc3ce0ec69c5c5fd42cab", "committedDate": "2020-07-28T02:46:55Z", "message": "Merge branch 'master' into 10455-redirect\n\n# Conflicts:\n#\tsrc/web/app/pages-instructor/instructor-home-page/instructor-home-page.module.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d25807a87b31c4401edadaca316579455c6b68", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d0d25807a87b31c4401edadaca316579455c6b68", "committedDate": "2020-07-28T07:29:23Z", "message": "Add support email and change banner message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79c84f929ad60ae8b6d0151926848969e693b682", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/79c84f929ad60ae8b6d0151926848969e693b682", "committedDate": "2020-07-27T06:30:51Z", "message": "Merge branch 'master' into 10455-redirect"}, "afterCommit": {"oid": "d0d25807a87b31c4401edadaca316579455c6b68", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d0d25807a87b31c4401edadaca316579455c6b68", "committedDate": "2020-07-28T07:29:23Z", "message": "Add support email and change banner message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa4f509df1f7633443cc0739bfdf0ca911f584be", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fa4f509df1f7633443cc0739bfdf0ca911f584be", "committedDate": "2020-07-28T07:34:56Z", "message": "Update snapshot with config points set to null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDg0ODQ0", "url": "https://github.com/TEAMMATES/teammates/pull/10471#pullrequestreview-456484844", "createdAt": "2020-07-28T10:00:43Z", "commit": {"oid": "fa4f509df1f7633443cc0739bfdf0ca911f584be"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMDowMDo0NFrOG4FoCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMDowMToyNlrOG4FpXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ2NTYwOA==", "bodyText": "Don't need this. It is reasonable to assume that environment.supportEmail will always be set.", "url": "https://github.com/TEAMMATES/teammates/pull/10471#discussion_r461465608", "createdAt": "2020-07-28T10:00:44Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/redirect-banner/redirect-banner.component.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import { Component } from '@angular/core';\n+import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n+import { environment } from '../../../environments/environment';\n+\n+/**\n+ * Version redirect banner.\n+ */\n+@Component({\n+  selector: 'tm-redirect-banner',\n+  templateUrl: './redirect-banner.component.html',\n+  styleUrls: ['./redirect-banner.component.scss'],\n+})\n+export class RedirectBannerComponent {\n+\n+  redirectUrl: SafeResourceUrl | null;\n+  supportEmail: SafeResourceUrl | null;\n+\n+  constructor(private sanitizer: DomSanitizer) {\n+    this.redirectUrl = environment.redirectUrl\n+        ? this.sanitizer.bypassSecurityTrustResourceUrl(environment.redirectUrl)\n+        : null;\n+    this.supportEmail = environment.supportEmail", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4f509df1f7633443cc0739bfdf0ca911f584be"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ2NTk1MQ==", "bodyText": "A config point should not be dependent of this kind of specific component name.", "url": "https://github.com/TEAMMATES/teammates/pull/10471#discussion_r461465951", "createdAt": "2020-07-28T10:01:26Z", "author": {"login": "wkurniawan07"}, "path": "src/web/environments/config.template.ts", "diffHunk": "@@ -23,4 +23,9 @@ export const config: any = {\n    * e.g. \"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\" is a site key for test environments.\n    */\n   captchaSiteKey: '',\n+\n+  /**\n+   * This is the URL address that will show in the {@link RedirectBannerComponent}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4f509df1f7633443cc0739bfdf0ca911f584be"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "847fbe84c1db0f0df57eba2a52107ea91b30bf5e", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/847fbe84c1db0f0df57eba2a52107ea91b30bf5e", "committedDate": "2020-07-28T15:23:07Z", "message": "Change comment description and support email assignment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTEyNTIy", "url": "https://github.com/TEAMMATES/teammates/pull/10471#pullrequestreview-456912522", "createdAt": "2020-07-28T18:48:06Z", "commit": {"oid": "847fbe84c1db0f0df57eba2a52107ea91b30bf5e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxODo0ODowNlrOG4Z3Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxODo0ODo0OFrOG4Z4mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5NzE1NA==", "bodyText": "Why not just make supportEmail a string and put mailto into the HTML template? That way you don't need this entire line. There are plenty of examples of this kind of code throughout.", "url": "https://github.com/TEAMMATES/teammates/pull/10471#discussion_r461797154", "createdAt": "2020-07-28T18:48:06Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/redirect-banner/redirect-banner.component.ts", "diffHunk": "@@ -0,0 +1,24 @@\n+import { Component } from '@angular/core';\n+import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n+import { environment } from '../../../environments/environment';\n+\n+/**\n+ * Version redirect banner.\n+ */\n+@Component({\n+  selector: 'tm-redirect-banner',\n+  templateUrl: './redirect-banner.component.html',\n+  styleUrls: ['./redirect-banner.component.scss'],\n+})\n+export class RedirectBannerComponent {\n+\n+  redirectUrl: SafeResourceUrl | null;\n+  supportEmail: SafeResourceUrl | null;\n+\n+  constructor(private sanitizer: DomSanitizer) {\n+    this.redirectUrl = environment.redirectUrl\n+        ? this.sanitizer.bypassSecurityTrustResourceUrl(environment.redirectUrl)\n+        : null;\n+    this.supportEmail = this.sanitizer.bypassSecurityTrustResourceUrl(`mailto:${environment.supportEmail}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "847fbe84c1db0f0df57eba2a52107ea91b30bf5e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5NzUyOA==", "bodyText": "Actually why do we even need this bypassSecurityTrustResourceUrl?", "url": "https://github.com/TEAMMATES/teammates/pull/10471#discussion_r461797528", "createdAt": "2020-07-28T18:48:48Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/redirect-banner/redirect-banner.component.ts", "diffHunk": "@@ -0,0 +1,24 @@\n+import { Component } from '@angular/core';\n+import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n+import { environment } from '../../../environments/environment';\n+\n+/**\n+ * Version redirect banner.\n+ */\n+@Component({\n+  selector: 'tm-redirect-banner',\n+  templateUrl: './redirect-banner.component.html',\n+  styleUrls: ['./redirect-banner.component.scss'],\n+})\n+export class RedirectBannerComponent {\n+\n+  redirectUrl: SafeResourceUrl | null;\n+  supportEmail: SafeResourceUrl | null;\n+\n+  constructor(private sanitizer: DomSanitizer) {\n+    this.redirectUrl = environment.redirectUrl\n+        ? this.sanitizer.bypassSecurityTrustResourceUrl(environment.redirectUrl)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "847fbe84c1db0f0df57eba2a52107ea91b30bf5e"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0761bfcae902366798c8530d0668683e7d8b531", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f0761bfcae902366798c8530d0668683e7d8b531", "committedDate": "2020-07-29T08:17:14Z", "message": "Change supportEmail to be string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff0817dcacf27a083640edabe7595d196409e3ac", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ff0817dcacf27a083640edabe7595d196409e3ac", "committedDate": "2020-07-29T08:27:11Z", "message": "Change redirectUrl to be string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NTAxMjIz", "url": "https://github.com/TEAMMATES/teammates/pull/10471#pullrequestreview-457501223", "createdAt": "2020-07-29T13:07:19Z", "commit": {"oid": "ff0817dcacf27a083640edabe7595d196409e3ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776ff0e53b1cfa9d9792f6e140e490c64d669d0e", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/776ff0e53b1cfa9d9792f6e140e490c64d669d0e", "committedDate": "2020-07-29T13:38:18Z", "message": "Merge branch 'master' into 10455-redirect"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4312, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}