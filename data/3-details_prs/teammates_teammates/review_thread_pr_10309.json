{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MTczNDE1", "number": 10309, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMzoyMzo1NlrOEOrt8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNToyMDozOVrOEP91MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzODMxNzkzOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/loading-spinner/loading-spinner.module.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMzoyMzo1NlrOGx96Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMzoyMzo1NlrOGx96Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0Nzc1NQ==", "bodyText": "Just a small nit haha\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Module for loading spinner\n          \n          \n            \n             * Module for the loading spinner", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455047755", "createdAt": "2020-07-15T13:23:56Z", "author": {"login": "madanalogy"}, "path": "src/web/app/components/loading-spinner/loading-spinner.module.ts", "diffHunk": "@@ -1,19 +1,17 @@\n import { CommonModule } from '@angular/common';\n import { NgModule } from '@angular/core';\n import { LoadingSpinnerComponent } from './loading-spinner.component';\n+import { LoadingSpinnerDirective } from './loading-spinner.directive';\n \n /**\n- * Module for the loading-spinner.\n+ * Module for loading spinner", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcffacb10decbab40a3f6e80252dc4a3d8e60176"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTA3NDk5OnYy", "diffSide": "RIGHT", "path": "src/web/app/page.component.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNDozNFrOGyYjxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNDozNFrOGyYjxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NDM1Ng==", "bodyText": "Yup \ud83d\udc4d  That's exactly the cleanest way to add loading indicator.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455484356", "createdAt": "2020-07-16T03:14:34Z", "author": {"login": "xpdavid"}, "path": "src/web/app/page.component.html", "diffHunk": "@@ -42,9 +42,8 @@\n   </div>\n </nav>\n <tm-loader-bar></tm-loader-bar>\n-<tm-loading-spinner *ngIf=\"isFetchingAuthDetails\"></tm-loading-spinner>\n <tm-toast [(toast)]=\"toast\" aria-live=\"polite\" aria-atomic=\"true\"></tm-toast>\n-<div *ngIf=\"!isFetchingAuthDetails\" id=\"main-content\" class=\"container main-content\">\n+<div *tmIsLoading=\"isFetchingAuthDetails\" id=\"main-content\" class=\"container main-content\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9a68d61189877b7af89c84b8ede96d702555b92"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTA3ODE3OnYy", "diffSide": "LEFT", "path": "src/web/app/pages-instructor/instructor-home-page/__snapshots__/instructor-home-page.component.spec.ts.snap", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNjowOVrOGyYllA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNzo1NFrOGyYnVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NDgyMA==", "bodyText": "Is the deletion of the snapshot intended? Look like we do have concrete content in the container?", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455484820", "createdAt": "2020-07-16T03:16:09Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/__snapshots__/instructor-home-page.component.spec.ts.snap", "diffHunk": "@@ -282,475 +226,35 @@ exports[`InstructorHomePageComponent should snap with one course with one feedba\n         </div>\n       </div>\n     </div>\n-  </div><div\n-    class=\"row mb-3\"\n-  >\n+  </div><tm-loading-spinner>\n     <div\n-      class=\"col-4\"\n-    >\n-      <a\n-        class=\"btn btn-primary text-white\"\n-        href=\"/web/instructor/courses?isAddNewCourse=true\"\n-        routerlink=\"/web/instructor/courses\"\n-      >\n-        Add New Course\n-      </a>\n-    </div>\n-    \n-    <div\n-      class=\"col-8\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"float-right\"\n+        class=\"row spinner-border text-primary\"\n+        role=\"status\"\n+      />\n+      <div\n+        class=\"row text-secondary\"\n       >\n-        <strong\n-          class=\"d-inline\"\n-        >\n-           Sort By: \n-        </strong>\n-        <div\n-          class=\"btn-group\"\n-          data-toggle=\"buttons\"\n-        >\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course ID\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course Name\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-            disabled=\"\"\n-          >\n-            Creation Date\n-          </button>\n-        </div>\n+        Loading...\n       </div>\n     </div>\n-  </div><div>\n-    \n+  </tm-loading-spinner><tm-loading-spinner>\n     <div\n-      class=\"card\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"card-header bg-primary text-white course-tab-header\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c2b91ad5b0e74b7efdd083d7a1219ccf4297ea7"}, "originalPosition": 238}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NTE4OQ==", "bodyText": "Looks like you need update set hasCoursesLoaded  when testing. Let's check similar case in other tests also.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455485189", "createdAt": "2020-07-16T03:17:34Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/__snapshots__/instructor-home-page.component.spec.ts.snap", "diffHunk": "@@ -282,475 +226,35 @@ exports[`InstructorHomePageComponent should snap with one course with one feedba\n         </div>\n       </div>\n     </div>\n-  </div><div\n-    class=\"row mb-3\"\n-  >\n+  </div><tm-loading-spinner>\n     <div\n-      class=\"col-4\"\n-    >\n-      <a\n-        class=\"btn btn-primary text-white\"\n-        href=\"/web/instructor/courses?isAddNewCourse=true\"\n-        routerlink=\"/web/instructor/courses\"\n-      >\n-        Add New Course\n-      </a>\n-    </div>\n-    \n-    <div\n-      class=\"col-8\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"float-right\"\n+        class=\"row spinner-border text-primary\"\n+        role=\"status\"\n+      />\n+      <div\n+        class=\"row text-secondary\"\n       >\n-        <strong\n-          class=\"d-inline\"\n-        >\n-           Sort By: \n-        </strong>\n-        <div\n-          class=\"btn-group\"\n-          data-toggle=\"buttons\"\n-        >\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course ID\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course Name\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-            disabled=\"\"\n-          >\n-            Creation Date\n-          </button>\n-        </div>\n+        Loading...\n       </div>\n     </div>\n-  </div><div>\n-    \n+  </tm-loading-spinner><tm-loading-spinner>\n     <div\n-      class=\"card\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"card-header bg-primary text-white course-tab-header\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NDgyMA=="}, "originalCommit": {"oid": "8c2b91ad5b0e74b7efdd083d7a1219ccf4297ea7"}, "originalPosition": 238}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NTI2OA==", "bodyText": "In addition, we shall have test case when the courses are loading.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455485268", "createdAt": "2020-07-16T03:17:54Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/__snapshots__/instructor-home-page.component.spec.ts.snap", "diffHunk": "@@ -282,475 +226,35 @@ exports[`InstructorHomePageComponent should snap with one course with one feedba\n         </div>\n       </div>\n     </div>\n-  </div><div\n-    class=\"row mb-3\"\n-  >\n+  </div><tm-loading-spinner>\n     <div\n-      class=\"col-4\"\n-    >\n-      <a\n-        class=\"btn btn-primary text-white\"\n-        href=\"/web/instructor/courses?isAddNewCourse=true\"\n-        routerlink=\"/web/instructor/courses\"\n-      >\n-        Add New Course\n-      </a>\n-    </div>\n-    \n-    <div\n-      class=\"col-8\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"float-right\"\n+        class=\"row spinner-border text-primary\"\n+        role=\"status\"\n+      />\n+      <div\n+        class=\"row text-secondary\"\n       >\n-        <strong\n-          class=\"d-inline\"\n-        >\n-           Sort By: \n-        </strong>\n-        <div\n-          class=\"btn-group\"\n-          data-toggle=\"buttons\"\n-        >\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course ID\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-          >\n-            Course Name\n-          </button>\n-          <button\n-            class=\"btn btn-light\"\n-            disabled=\"\"\n-          >\n-            Creation Date\n-          </button>\n-        </div>\n+        Loading...\n       </div>\n     </div>\n-  </div><div>\n-    \n+  </tm-loading-spinner><tm-loading-spinner>\n     <div\n-      class=\"card\"\n+      class=\"loading-container\"\n     >\n       <div\n-        class=\"card-header bg-primary text-white course-tab-header\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NDgyMA=="}, "originalCommit": {"oid": "8c2b91ad5b0e74b7efdd083d7a1219ccf4297ea7"}, "originalPosition": 238}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTA3OTY2OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNjo1M1rOGyYmXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoxNjo1M1rOGyYmXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NTAyMw==", "bodyText": "I think the indentation is not correct.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455485023", "createdAt": "2020-07-16T03:16:53Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.html", "diffHunk": "@@ -36,15 +36,16 @@ <h1>Home</h1>\n   </div>\n </div>\n \n-<div *ngIf=\"courseTabModels.length > 0\">\n-  <div class=\"card\" *ngFor=\"let courseTabModel of courseTabModels; let idx = index\">\n-    <div class=\"card-header bg-primary text-white course-tab-header\" (click)=\"courseTabModel.isTabExpanded = handleClick($event, courseTabModel); this.loadFeedbackSessions(courseTabModel);\">\n-      <div class=\"row\">\n-        <div class=\"course-header col-md-6\">\n-          <b>[{{ courseTabModel.course.courseId }}]: {{ courseTabModel.course.courseName }}</b>\n-        </div>\n-        <div class=\"btn-toolbar col-md-6\">\n-          <div class=\"float-right\" *ngIf=\"courseTabModel.isAjaxSuccess; else errorLoadingFeedbackSessions\">\n+<div *tmIsLoading=\"!hasCoursesLoaded\">\n+  <div *ngIf=\"courseTabModels.length > 0\">\n+    <div class=\"card\" *ngFor=\"let courseTabModel of courseTabModels; let idx = index\">\n+      <div class=\"card-header bg-primary text-white course-tab-header\" (click)=\"courseTabModel.isTabExpanded = handleClick($event, courseTabModel); this.loadFeedbackSessions(courseTabModel);\">\n+        <div class=\"row\">\n+          <div class=\"course-header col-md-6\">\n+            <b>[{{ courseTabModel.course.courseId }}]: {{ courseTabModel.course.courseName }}</b>\n+          </div>\n+          <div class=\"btn-toolbar col-md-6\">\n+            <div class=\"float-right\" *ngIf=\"courseTabModel.isAjaxSuccess; else errorLoadingFeedbackSessions\">\n             <span ngbDropdown class=\"padding-right-10px\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c2b91ad5b0e74b7efdd083d7a1219ccf4297ea7"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTA5MTU1OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-student/student-profile-page/student-profile-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoyNDowM1rOGyYtZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwMzoyNDowM1rOGyYtZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQ4NjgyMQ==", "bodyText": "This should be in the complete callback?", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r455486821", "createdAt": "2020-07-16T03:24:03Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-student/student-profile-page/student-profile-page.component.ts", "diffHunk": "@@ -66,24 +69,28 @@ export class StudentProfilePageComponent implements OnInit {\n    * Loads the student profile details for this page.\n    */\n   loadStudentProfile(): void {\n+    this.isLoadingStudentProfile = true;\n     this.authService.getAuthUser().subscribe((auth: AuthInfo) => {\n       if (auth.user) {\n         this.id = auth.user.id;\n \n         this.profilePicLink = `${this.backendUrl}/webapi/student/profilePic?user=${this.id}`;\n \n         // retrieve profile once we have the student's googleId\n-        this.studentProfileService.getStudentProfile().subscribe((response: StudentProfile) => {\n-          if (response) {\n-            this.student = response;\n-            this.name = response.name;\n-            this.initStudentProfileForm(this.student);\n-          } else {\n-            this.statusMessageService.showErrorToast('Error retrieving student profile');\n-          }\n-        }, (response: ErrorMessageOutput) => {\n-          this.statusMessageService.showErrorToast(response.error.message);\n-        });\n+        this.studentProfileService.getStudentProfile()\n+            .pipe(finalize(() => this.isLoadingStudentProfile = false))\n+            .subscribe((response: StudentProfile) => {\n+              if (response) {\n+                this.student = response;\n+                this.name = response.name;\n+                this.initStudentProfileForm(this.student);\n+              } else {\n+                this.statusMessageService.showErrorToast('Error retrieving student profile');\n+              }\n+            }, (response: ErrorMessageOutput) => {\n+              this.isLoadingStudentProfile = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139b38ccfbee47337ec063b1b3621736926c438e"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MTYwMDEyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDoyODowMlrOGz3Ygg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDoyODowMlrOGz3Ygg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzNzk1NA==", "bodyText": "I think we can just delete the if check. There is no need to have a variable to store the csv result.\nThis can just the normal flow where we set isLoadingCsv to true and then to false", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r457037954", "createdAt": "2020-07-20T04:28:02Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.ts", "diffHunk": "@@ -190,16 +193,16 @@ export class InstructorCourseDetailsPageComponent implements OnInit {\n     let blob: any;\n \n     // Calling REST API only the first time to load the downloadable data\n-    if (this.loading) {\n+    if (this.isLoadingCsv) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5add23f1edcc95022a5b8e55b88d2ecdfdddd6b"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MTYwNTU3OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDozMDowM1rOGz3bbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDozMDowM1rOGz3bbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzODcwMg==", "bodyText": "By right, this field should go to InstructorEditPanelDetail model.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r457038702", "createdAt": "2020-07-20T04:30:03Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "diffHunk": "@@ -151,6 +151,12 @@ export class InstructorCourseEditPageComponent implements OnInit {\n   allSections: string[] = [];\n   allSessions: string[] = [];\n \n+  isCourseLoading: boolean = false;\n+  isInstructorsLoading: boolean = false;\n+  isSavingCourseEdit: boolean = false;\n+  isSavingNewInstructor: boolean = false;\n+  isSavingInstructorEdit: boolean[] = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5add23f1edcc95022a5b8e55b88d2ecdfdddd6b"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MTYwODg2OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDozMTowNlrOGz3dHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNDozMTowNlrOGz3dHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzOTEzMw==", "bodyText": "And therefore we should have panelDetail.isSavingInstructorEdit  = true here.", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r457039133", "createdAt": "2020-07-20T04:31:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "diffHunk": "@@ -374,6 +386,7 @@ export class InstructorCourseEditPageComponent implements OnInit {\n    */\n   saveInstructor(index: number): void {\n     const panelDetail: InstructorEditPanelDetail = this.instructorDetailPanels[index];\n+    this.isSavingInstructorEdit[index] = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5add23f1edcc95022a5b8e55b88d2ecdfdddd6b"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MTc2NjU1OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNToxOToyNFrOGz4vyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNToxOToyNFrOGz4vyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2MDI5Ng==", "bodyText": "We can delete this line and the variable courseStudentListAsCsv", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r457060296", "createdAt": "2020-07-20T05:19:24Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.ts", "diffHunk": "@@ -189,24 +189,19 @@ export class InstructorCourseDetailsPageComponent implements OnInit {\n    * Download all the students from a course.\n    */\n   downloadAllStudentsFromCourse(courseId: string): void {\n+    this.isLoadingCsv = true;\n     const filename: string = `${courseId.concat('_studentList')}.csv`;\n     let blob: any;\n \n-    // Calling REST API only the first time to load the downloadable data\n-    if (this.isLoadingCsv) {\n-      blob = new Blob([this.courseStudentListAsCsv], { type: 'text/csv' });\n-      saveAs(blob, filename);\n-    } else {\n-      this.studentService.loadStudentListAsCsv({ courseId })\n-        .pipe(finalize(() => this.isLoadingCsv = false))\n-        .subscribe((resp: string) => {\n-          blob = new Blob([resp], { type: 'text/csv' });\n-          saveAs(blob, filename);\n-          this.courseStudentListAsCsv = resp;\n-        }, (resp: ErrorMessageOutput) => {\n-          this.statusMessageService.showErrorToast(resp.error.message);\n-        });\n-    }\n+    this.studentService.loadStudentListAsCsv({ courseId })\n+      .pipe(finalize(() => this.isLoadingCsv = false))\n+      .subscribe((resp: string) => {\n+        blob = new Blob([resp], { type: 'text/csv' });\n+        saveAs(blob, filename);\n+        this.courseStudentListAsCsv = resp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb5d75d3e7835c0c2915c254581eac81ba23e37"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MTc3MTM2OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNToyMDozOVrOGz4yNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNToyMDozOVrOGz4yNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2MDkxOA==", "bodyText": "Sorry about the confusion, I think the field should go to InstructorEditPanel", "url": "https://github.com/TEAMMATES/teammates/pull/10309#discussion_r457060918", "createdAt": "2020-07-20T05:20:39Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-course-edit-page.component.ts", "diffHunk": "@@ -486,14 +486,14 @@ export class InstructorCourseEditPageComponent implements OnInit {\n             originalInstructor: Object.assign({}, resp),\n             originalPanel: this.getInstructorEditPanelModel(resp),\n             editPanel: this.getInstructorEditPanelModel(resp),\n+            isSavingInstructorEdit: false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb5d75d3e7835c0c2915c254581eac81ba23e37"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3623, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}