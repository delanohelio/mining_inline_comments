{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NDE2MTY2", "number": 10617, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMDo0NDozOVrOEY_npQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzoyMjo0MlrOEZCxcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NjQzNjIxOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMDo0NDozOVrOHBjsPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1MDowMlrOHBnXKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM5NTM5MQ==", "bodyText": "I might be wrong, but I don't think you need this. Both (unpublish|publish)FeedbackSession endpoint should return the session object itself, which you can use straightaway to construct the new visible from time.", "url": "https://github.com/TEAMMATES/teammates/pull/10617#discussion_r471395391", "createdAt": "2020-08-17T10:44:39Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "diffHunk": "@@ -383,7 +402,13 @@ export class InstructorSessionResultPageComponent extends InstructorCommentsComp\n       ;\n \n       response.subscribe(() => {\n-        this.router.navigateByUrl('/web/instructor/sessions');\n+        this.loadFeedbackSessionVisibleFromTime(this.courseId, this.fsName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d578510243c177beca774f5b144db6cfe791593"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1NTUzMQ==", "bodyText": "Yes you are right. Thanks for pointing out. I should have checked the response type from the endpoint. I think part of the reason for me to overlook this is because the type of the variable response is Observable<any> where it actually can be Observable<FeedbackSession>.", "url": "https://github.com/TEAMMATES/teammates/pull/10617#discussion_r471455531", "createdAt": "2020-08-17T12:50:02Z", "author": {"login": "niqiukun"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "diffHunk": "@@ -383,7 +402,13 @@ export class InstructorSessionResultPageComponent extends InstructorCommentsComp\n       ;\n \n       response.subscribe(() => {\n-        this.router.navigateByUrl('/web/instructor/sessions');\n+        this.loadFeedbackSessionVisibleFromTime(this.courseId, this.fsName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM5NTM5MQ=="}, "originalCommit": {"oid": "2d578510243c177beca774f5b144db6cfe791593"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Njk1MDA4OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzoyMjowMFrOHBof9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzoyMjowMFrOHBof9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ3NDE2Nw==", "bodyText": "If this variable is not read by the HTML file, you can move it to outside the export class definition. That way you don't need this.TIME_FORMAT.", "url": "https://github.com/TEAMMATES/teammates/pull/10617#discussion_r471474167", "createdAt": "2020-08-17T13:22:00Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "diffHunk": "@@ -109,6 +109,8 @@ export class InstructorSessionResultPageComponent extends InstructorCommentsComp\n   FeedbackSessionPublishStatus: typeof FeedbackSessionPublishStatus = FeedbackSessionPublishStatus;\n   isExpandAll: boolean = false;\n \n+  readonly TIME_FORMAT: string = 'ddd, DD MMM, YYYY, hh:mm A zz';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dba0c88e93d025f1b0a1fa65b091ce05d6c4eb47"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Njk1MjgyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzoyMjo0MlrOHBohkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzoyMjo0MlrOHBohkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ3NDU3Nw==", "bodyText": "Are the conditionals isPublished and this.session.resultVisibleFromTimestamp equivalent?", "url": "https://github.com/TEAMMATES/teammates/pull/10617#discussion_r471474577", "createdAt": "2020-08-17T13:22:42Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts", "diffHunk": "@@ -382,8 +384,20 @@ export class InstructorSessionResultPageComponent extends InstructorCommentsComp\n           )\n       ;\n \n-      response.subscribe(() => {\n-        this.router.navigateByUrl('/web/instructor/sessions');\n+      response.subscribe((res: FeedbackSession) => {\n+        this.session = res;\n+        if (this.session.resultVisibleFromTimestamp) {\n+          this.formattedResultVisibleFromTime = this.timezoneService\n+            .formatToString(this.session.resultVisibleFromTimestamp, this.session.timeZone, this.TIME_FORMAT);\n+        } else {\n+          this.formattedResultVisibleFromTime = 'Not applicable';\n+        }\n+        if (isPublished) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dba0c88e93d025f1b0a1fa65b091ce05d6c4eb47"}, "originalPosition": 59}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3493, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}