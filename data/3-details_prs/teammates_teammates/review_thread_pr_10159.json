{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MDA4NDcz", "number": 10159, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzozMjo1OFrOECCQ5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODo0MjozOFrOEDD5dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTY5NzAxOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzozMjo1OFrOGePkVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzozMjo1OFrOGePkVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM2NTUyNg==", "bodyText": "Avoid naming like responseComments? If you remember the DB entity relation, the name refers to a different thing.", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434365526", "createdAt": "2020-06-03T07:32:58Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.html", "diffHunk": "@@ -0,0 +1,26 @@\n+<div class=\"card border border-primary mb-4\">\n+  <div class=\"card-header text-white bg-primary font-weight-bold\">Questions, responses, comments on responses</div>\n+  <div class=\"card-body p-4 row\" *ngFor=\"let sessions of commentTables\">\n+    <div class=\"font-weight-bold col-md-3\">Session: {{sessions.sessionName}} {{sessions.courseId}}</div>\n+    <div class=\"col-md-9\">\n+      <div *ngFor=\"let section of sessions.sections\" class=\"card p-0 border border-primary mb-5\">\n+        <div class=\"card-header bg-light-blue\">\n+          <b>Question {{section.questionNumber}}</b> {{section.questionText}}\n+        </div>\n+        <div *ngFor=\"let responseComment of section.responseComments\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTczMzY5OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0NDoyMFrOGeP7xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxNDozOVrOGeVWig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MTUyNA==", "bodyText": "Is it necessary to define the interface here? The structure of API output is far enough?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434371524", "createdAt": "2020-06-03T07:44:20Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { CommentTableModel } from \"../../../components/comment-box/comment-table/comment-table.component\";\n+import { SearchCommentsTable } from \"../instructor-search-page.component\";\n+import { ResponseOutput } from \"../../../../types/api-output\";\n+\n+export interface CommentListSectionData {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ0Njk2Mg==", "bodyText": "Alright, that makes sense. We can just keep the feedback session and question output API outputs since all the fields are there. But I think there should be an additional commentTableModel as the comment table needs this model as data. The transformation is then done in the search service itself. So we can just have\nSearchCommentsTable {\n    feedbackSession: FeedbackSession,\n    questions: QuestionOutput[],\n    commentTableModel: CommentTableModel\n}\n\nSounds like a better interface?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434446962", "createdAt": "2020-06-03T09:50:51Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { CommentTableModel } from \"../../../components/comment-box/comment-table/comment-table.component\";\n+import { SearchCommentsTable } from \"../instructor-search-page.component\";\n+import { ResponseOutput } from \"../../../../types/api-output\";\n+\n+export interface CommentListSectionData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MTUyNA=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ0ODkyMw==", "bodyText": "But I think there should be an additional commentTableModel as the comment table needs this model as data.\n\nThe examples in the code base is actually not good. Service cares about business logic so it should not transform how data should be presented.\nRegarding how to transform instructor comment to comment table model, you can use pipe to do so.", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434448923", "createdAt": "2020-06-03T09:54:18Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { CommentTableModel } from \"../../../components/comment-box/comment-table/comment-table.component\";\n+import { SearchCommentsTable } from \"../instructor-search-page.component\";\n+import { ResponseOutput } from \"../../../../types/api-output\";\n+\n+export interface CommentListSectionData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MTUyNA=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ1MTAzMA==", "bodyText": "Alright, then leave the data transformation to the component displaying it then", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434451030", "createdAt": "2020-06-03T09:57:55Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { CommentTableModel } from \"../../../components/comment-box/comment-table/comment-table.component\";\n+import { SearchCommentsTable } from \"../instructor-search-page.component\";\n+import { ResponseOutput } from \"../../../../types/api-output\";\n+\n+export interface CommentListSectionData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MTUyNA=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MDI5OA==", "bodyText": "FYI\n\nWe can just keep the feedback session and question output API outputs since all the fields are there.\n\nThis is usually true if it is just a component for data presentation. See here or results page for reference.\nHowever, if it involves form inputs (e.g. user can enter something), usually we will need to transform data to a *Model (see question edit form for reference) (and it is also why the comment table does not accept FeedbackResponse as a input).", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434460298", "createdAt": "2020-06-03T10:14:39Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { CommentTableModel } from \"../../../components/comment-box/comment-table/comment-table.component\";\n+import { SearchCommentsTable } from \"../instructor-search-page.component\";\n+import { ResponseOutput } from \"../../../../types/api-output\";\n+\n+export interface CommentListSectionData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3MTUyNA=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTc1MTQwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0OToyNVrOGeQGww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0OToyNVrOGeQGww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NDMzOQ==", "bodyText": "Actually there is a bad pattern here where the child component changes the value from the parent component.", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434374339", "createdAt": "2020-06-03T07:49:25Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "diffHunk": "@@ -9,8 +10,14 @@ import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n   styleUrls: ['./instructor-search-bar.component.scss'],\n })\n export class InstructorSearchBarComponent implements OnInit {\n-  @Input() searchKey: string = '';\n-  @Output() searched: EventEmitter<string> = new EventEmitter<string>();\n+\n+  @Input() searchParams: SearchParams = {\n+    searchKey: '',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTc1MzMwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0OTo1OVrOGeQH-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo0OTo1OVrOGeQH-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NDY1MQ==", "bodyText": "I would suggest to use two-way data binding here [(searchParams)]=\"searchParams\"", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434374651", "createdAt": "2020-06-03T07:49:59Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.html", "diffHunk": "@@ -1,4 +1,6 @@\n-<tm-instructor-search-bar (searched)=\"search($event)\" [searchKey]=\"searchKey\"></tm-instructor-search-bar>\n+<tm-instructor-search-bar (searched)=\"search($event)\" [searchParams]=\"searchParams\"></tm-instructor-search-bar>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTc1NTI4OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo1MDozOVrOGeQJNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo1MDozOVrOGeQJNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NDk2Nw==", "bodyText": "The type definition should be in src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts right?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434374967", "createdAt": "2020-06-03T07:50:39Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "diffHunk": "@@ -18,6 +16,24 @@ export interface SearchStudentsTable {\n   sections: StudentListSectionData[];\n }\n \n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {\n+  courseId: string;\n+  sessionName: string;\n+  sections: CommentListSectionData[];\n+}\n+\n+/**\n+ * Parameters inputted by user to be used in search\n+ */\n+export interface SearchParams {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTc1NjYxOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo1MTowMVrOGeQKCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwOTo1NjoxM1rOGeUuaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NTE3Nw==", "bodyText": "The type definition should be in src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts right?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434375177", "createdAt": "2020-06-03T07:51:01Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "diffHunk": "@@ -18,6 +16,24 @@ export interface SearchStudentsTable {\n   sections: StudentListSectionData[];\n }\n \n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ0OTEyOA==", "bodyText": "Then also shift the SearchStudentsTable to the respective component too? Sounds better to place it there too", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434449128", "createdAt": "2020-06-03T09:54:41Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "diffHunk": "@@ -18,6 +16,24 @@ export interface SearchStudentsTable {\n   sections: StudentListSectionData[];\n }\n \n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NTE3Nw=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ1MDAyNQ==", "bodyText": "Yes. But please do it in a separate PR.", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434450025", "createdAt": "2020-06-03T09:56:13Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-page.component.ts", "diffHunk": "@@ -18,6 +16,24 @@ export interface SearchStudentsTable {\n   sections: StudentListSectionData[];\n }\n \n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NTE3Nw=="}, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTc2MDE0OnYy", "diffSide": "RIGHT", "path": "src/web/services/search.service.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo1MjowNVrOGeQMTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNzo1MjowNVrOGeQMTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NTc1Nw==", "bodyText": "Why touching the irrelevant method? Creating a new method maybe?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434375757", "createdAt": "2020-06-03T07:52:05Z", "author": {"login": "xpdavid"}, "path": "src/web/services/search.service.ts", "diffHunk": "@@ -36,16 +44,24 @@ export class SearchService {\n     private linkService: LinkService,\n   ) {}\n \n-  searchInstructor(searchKey: string): Observable<InstructorSearchResult> {\n-    return this.searchStudents(searchKey).pipe(\n-      map((studentsRes: Students) => this.getCoursesWithSections(studentsRes)),\n-      mergeMap((coursesWithSections: SearchStudentsTable[]) =>\n-        forkJoin([\n-          of(coursesWithSections),\n-          this.getPrivileges(coursesWithSections),\n-        ]),\n-      ),\n-      map((res: [SearchStudentsTable[], InstructorPrivilege[]]) => this.combinePrivileges(res)),\n+  searchInstructor(searchKey: string, isSearchForStudents: boolean, isSearchForComments: boolean): Observable<InstructorSearchResult> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d045ad0e7f7a0ab971b85fd4aa64220a166c4151"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODYyOTI4OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMDo0Nzo0OFrOGesxbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMDo0Nzo0OFrOGesxbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDAxNQ==", "bodyText": "When writing documentation, it is a good practice to mention what it is but not how it going to be used (because it is already revealed in the code).", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434844015", "createdAt": "2020-06-03T20:47:48Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { FeedbackSession, QuestionOutput } from \"../../../../types/api-output\";\n+\n+/**\n+ * Data object for communication with child comment result component", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODYzMjAwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMDo0ODozOFrOGeszGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzoyMzoyMlrOGe0fmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDQ0MA==", "bodyText": "I guess you may even use CommentSearchResult here", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434844440", "createdAt": "2020-06-03T20:48:38Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { FeedbackSession, QuestionOutput } from \"../../../../types/api-output\";\n+\n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3MDUyMA==", "bodyText": "Right, that's possible too. But i think its better to just split it into the feedback session and question. I feel that it is more readable this way and you have direct access to the session/question instead of going through another layer of data", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434970520", "createdAt": "2020-06-04T03:23:22Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/comment-result-table/comment-result-table.component.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { Component, Input, OnInit } from '@angular/core';\n+import { FeedbackSession, QuestionOutput } from \"../../../../types/api-output\";\n+\n+/**\n+ * Data object for communication with child comment result component\n+ */\n+export interface SearchCommentsTable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDQ0MA=="}, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODYzMzcwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMDo0OToxMVrOGes0LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzozNjo1NFrOGe0sJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDcxNw==", "bodyText": "Why the event is not used?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434844717", "createdAt": "2020-06-03T20:49:11Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "diffHunk": "@@ -9,8 +18,16 @@ import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n   styleUrls: ['./instructor-search-bar.component.scss'],\n })\n export class InstructorSearchBarComponent implements OnInit {\n-  @Input() searchKey: string = '';\n-  @Output() searched: EventEmitter<string> = new EventEmitter<string>();\n+\n+  @Input() searchParams: SearchParams = {\n+    searchKey: '',\n+    isSearchForStudents: true,\n+    isSearchForComments: false\n+  }\n+\n+  @Output() searched: EventEmitter<SearchParams> = new EventEmitter();\n+\n+  @Output() searchParamsChange: EventEmitter<SearchParams> = new EventEmitter();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3MTY0OA==", "bodyText": "Which event is not used?\nsearched is used when user clicks/enter the search button\nsearchParamsChange is used in the two way binding for searchParams in instructor-search-page.component", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434971648", "createdAt": "2020-06-04T03:28:05Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "diffHunk": "@@ -9,8 +18,16 @@ import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n   styleUrls: ['./instructor-search-bar.component.scss'],\n })\n export class InstructorSearchBarComponent implements OnInit {\n-  @Input() searchKey: string = '';\n-  @Output() searched: EventEmitter<string> = new EventEmitter<string>();\n+\n+  @Input() searchParams: SearchParams = {\n+    searchKey: '',\n+    isSearchForStudents: true,\n+    isSearchForComments: false\n+  }\n+\n+  @Output() searched: EventEmitter<SearchParams> = new EventEmitter();\n+\n+  @Output() searchParamsChange: EventEmitter<SearchParams> = new EventEmitter();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDcxNw=="}, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3MzczMg==", "bodyText": "The 2-way binding does not happen magically if you do not fire the event searchParamsChange.emit(newSearchParams)", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434973732", "createdAt": "2020-06-04T03:36:54Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.ts", "diffHunk": "@@ -9,8 +18,16 @@ import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n   styleUrls: ['./instructor-search-bar.component.scss'],\n })\n export class InstructorSearchBarComponent implements OnInit {\n-  @Input() searchKey: string = '';\n-  @Output() searched: EventEmitter<string> = new EventEmitter<string>();\n+\n+  @Input() searchParams: SearchParams = {\n+    searchKey: '',\n+    isSearchForStudents: true,\n+    isSearchForComments: false\n+  }\n+\n+  @Output() searched: EventEmitter<SearchParams> = new EventEmitter();\n+\n+  @Output() searchParamsChange: EventEmitter<SearchParams> = new EventEmitter();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg0NDcxNw=="}, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTQ1NzgyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzozNzo0MFrOGe0s1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzo1NDo0N1rOGe08Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3MzkxMQ==", "bodyText": "Why your current implementation work is because here you do 2-way binding for  searchParams.isSearchForStudents (i.e. you are still changes the value in the child component)", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434973911", "createdAt": "2020-06-04T03:37:40Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.html", "diffHunk": "@@ -9,11 +9,21 @@\n     </div>\n     <div class=\"form-group\">\n       <div class=\"input-group\">\n-        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchKey\" (keyup.enter)=\"search()\"\n+        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchParams.searchKey\" (keyup.enter)=\"search()\"\n             placeholder=\"Your search keyword\">\n           <div class=\"input-group-append\">\n             <button class=\"btn btn-primary\" (click)=\"search()\">Search</button>\n           </div>\n+        <div class=\"input-group mt-md-1\">\n+          <div class=\"col-md-3\">\n+            <input type=\"checkbox\" class=\"form-check-inline\" id=\"studentsCheckbox\" [(ngModel)]=\"searchParams.isSearchForStudents\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3Nzg4Nw==", "bodyText": "Ah i see. Okay, will change the implementation", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r434977887", "createdAt": "2020-06-04T03:54:47Z", "author": {"login": "t-cheepeng"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.html", "diffHunk": "@@ -9,11 +9,21 @@\n     </div>\n     <div class=\"form-group\">\n       <div class=\"input-group\">\n-        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchKey\" (keyup.enter)=\"search()\"\n+        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchParams.searchKey\" (keyup.enter)=\"search()\"\n             placeholder=\"Your search keyword\">\n           <div class=\"input-group-append\">\n             <button class=\"btn btn-primary\" (click)=\"search()\">Search</button>\n           </div>\n+        <div class=\"input-group mt-md-1\">\n+          <div class=\"col-md-3\">\n+            <input type=\"checkbox\" class=\"form-check-inline\" id=\"studentsCheckbox\" [(ngModel)]=\"searchParams.isSearchForStudents\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3MzkxMQ=="}, "originalCommit": {"oid": "3adb38261dfcb9196d0ef768136297a7f58bf657"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTkyODAyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzoyOToyOVrOGe5Ocg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzoyOToyOVrOGe5Ocg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA0ODA1MA==", "bodyText": "Try search triggerModelChange method in the code base and you will find that you don't need to write this so verbosely.", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r435048050", "createdAt": "2020-06-04T07:29:29Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-search-page/instructor-search-bar/instructor-search-bar.component.html", "diffHunk": "@@ -9,11 +9,33 @@\n     </div>\n     <div class=\"form-group\">\n       <div class=\"input-group\">\n-        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchKey\" (keyup.enter)=\"search()\"\n-            placeholder=\"Your search keyword\">\n+        <input type=\"text\" class=\"form-control\" [ngModel]=\"searchParams.searchKey\"\n+          (ngModelChange)=\"triggerSearchParamsChangeEvent({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a64e4f8666652fdc2135a89d57631a7845bcb2a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDc4NDM3OnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/ui/webapi/output/CommentSearchResultData.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoyNToxMlrOGfpEBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoyNToxMlrOGfpEBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgzMTgxMw==", "bodyText": "Thanks for catching that haha", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r435831813", "createdAt": "2020-06-05T10:25:12Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/ui/webapi/output/CommentSearchResultData.java", "diffHunk": "@@ -41,10 +41,10 @@ public CommentSearchResultData(FeedbackSessionAttributes session,\n         for (FeedbackResponseAttributes response : responses) {\n             output.add(ResponseOutput.builder()\n                     .withResponseId(response.getId())\n-                    .withGiver(bundle.responseGiverTable.get(response.giver))\n+                    .withGiver(bundle.responseGiverTable.get(response.getId()))\n                     .withGiverEmail(response.giver)\n                     .withGiverSection(response.giverSection)\n-                    .withRecipient(bundle.responseRecipientTable.get(response.recipient))\n+                    .withRecipient(bundle.responseRecipientTable.get(response.getId()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa0425d70c6eaedc64418598ff5aff9fe1685bac"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjQ1MDQ1OnYy", "diffSide": "RIGHT", "path": "src/web/services/search.service.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODo0MjozOFrOGf5gZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODo0MjozOFrOGf5gZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEwMTIyMA==", "bodyText": "We should have some doc here?", "url": "https://github.com/TEAMMATES/teammates/pull/10159#discussion_r436101220", "createdAt": "2020-06-05T18:42:38Z", "author": {"login": "xpdavid"}, "path": "src/web/services/search.service.ts", "diffHunk": "@@ -51,6 +57,12 @@ export class SearchService {\n     );\n   }\n \n+  searchComment(searchKey: string): Observable<InstructorSearchResult> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa0425d70c6eaedc64418598ff5aff9fe1685bac"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3778, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}