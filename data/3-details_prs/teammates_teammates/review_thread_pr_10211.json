{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2ODIwMzQx", "number": 10211, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMTo1MTo1NVrOEG9ySA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOTo0Mzo0NFrOEHUHTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzM5MjA4OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMTo1MTo1NVrOGmFg4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOTozMzowOFrOGmoAIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU4OTQxMA==", "bodyText": "I think if this is the case:\n\nThe sectionType GIVER, EVALUEE will be invalid under G** or R** view or it is really confused.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442589410", "createdAt": "2020-06-19T01:51:55Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -86,19 +86,26 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n           // filter out missing responses\n           continue;\n         }\n-        if (response.giverEmail) {\n-          this.userToEmail[response.giver] = response.giverEmail;\n-        }\n-        if (response.recipientEmail) {\n-          this.userToEmail[response.recipient] = response.recipientEmail;\n-        }\n \n+        if (this.section) {\n+          if (this.isGqr && response.giverSection !== this.section", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a67585cd8b7e20450daf858ef5cd5bf4703ea06"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYzNDEzOQ==", "bodyText": "Redundant, not invalid.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442634139", "createdAt": "2020-06-19T05:12:19Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -86,19 +86,26 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n           // filter out missing responses\n           continue;\n         }\n-        if (response.giverEmail) {\n-          this.userToEmail[response.giver] = response.giverEmail;\n-        }\n-        if (response.recipientEmail) {\n-          this.userToEmail[response.recipient] = response.recipientEmail;\n-        }\n \n+        if (this.section) {\n+          if (this.isGqr && response.giverSection !== this.section", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU4OTQxMA=="}, "originalCommit": {"oid": "5a67585cd8b7e20450daf858ef5cd5bf4703ea06"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NDQ2NQ==", "bodyText": "I think somehow later we should just hide the options. In addition, I think if we do this properly, we might not need this if check and the isFeedbackResponsesDisplayedOnSection can filter responses already.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r443154465", "createdAt": "2020-06-20T19:33:08Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -86,19 +86,26 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n           // filter out missing responses\n           continue;\n         }\n-        if (response.giverEmail) {\n-          this.userToEmail[response.giver] = response.giverEmail;\n-        }\n-        if (response.recipientEmail) {\n-          this.userToEmail[response.recipient] = response.recipientEmail;\n-        }\n \n+        if (this.section) {\n+          if (this.isGqr && response.giverSection !== this.section", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU4OTQxMA=="}, "originalCommit": {"oid": "5a67585cd8b7e20450daf858ef5cd5bf4703ea06"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzQwMzUyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.html", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMTo1OToxNVrOGmFnxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMTowMjo1MVrOGmvcGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5MTE3Mg==", "bodyText": "The checkbox should also be unchecked (to show that stats is not enabled and not allowed to enabled).", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442591172", "createdAt": "2020-06-19T01:59:15Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.html", "diffHunk": "@@ -109,7 +109,7 @@ <h1>\n         <label class=\"form-check-label\" ngbTooltip=\"Group results in the current view by team\"><input type=\"checkbox\" [(ngModel)]=\"groupByTeam\" [disabled]=\"viewType === 'QUESTION'\"> Group by Teams</label>\n       </div>\n       <div>\n-        <label class=\"form-check-label\"  ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\"> Show Statistics</label>\n+        <label class=\"form-check-label\" ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\" [disabled]=\"viewType === 'GRQ' || viewType === 'RGQ'\"> Show Statistics</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "307962328a78300b2887802afa11af2b2494ff5c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NDkxOA==", "bodyText": "Are we going to address this?\n\nThe checkbox should also be unchecked (to show that stats is not enabled and not allowed to enabled).", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r443154918", "createdAt": "2020-06-20T19:40:54Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.html", "diffHunk": "@@ -109,7 +109,7 @@ <h1>\n         <label class=\"form-check-label\" ngbTooltip=\"Group results in the current view by team\"><input type=\"checkbox\" [(ngModel)]=\"groupByTeam\" [disabled]=\"viewType === 'QUESTION'\"> Group by Teams</label>\n       </div>\n       <div>\n-        <label class=\"form-check-label\"  ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\"> Show Statistics</label>\n+        <label class=\"form-check-label\" ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\" [disabled]=\"viewType === 'GRQ' || viewType === 'RGQ'\"> Show Statistics</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5MTE3Mg=="}, "originalCommit": {"oid": "307962328a78300b2887802afa11af2b2494ff5c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3NjMxMw==", "bodyText": "Don't think it's worth the trouble.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r443276313", "createdAt": "2020-06-22T01:02:51Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.html", "diffHunk": "@@ -109,7 +109,7 @@ <h1>\n         <label class=\"form-check-label\" ngbTooltip=\"Group results in the current view by team\"><input type=\"checkbox\" [(ngModel)]=\"groupByTeam\" [disabled]=\"viewType === 'QUESTION'\"> Group by Teams</label>\n       </div>\n       <div>\n-        <label class=\"form-check-label\"  ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\"> Show Statistics</label>\n+        <label class=\"form-check-label\" ngbTooltip=\"Show statistics\"><input type=\"checkbox\" [(ngModel)]=\"showStatistics\" [disabled]=\"viewType === 'GRQ' || viewType === 'RGQ'\"> Show Statistics</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5MTE3Mg=="}, "originalCommit": {"oid": "307962328a78300b2887802afa11af2b2494ff5c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzQxNzI4OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/grouped-responses/grouped-responses.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjowNzo0OFrOGmFv9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjowNzo0OFrOGmFv9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5MzI2OA==", "bodyText": "this.hasNonMissingResponses  -> this.hasRealResponses (or we can just go opposite this.areAllMissingResponses). Reasons: The name hasNonMissingResponses seems it requires non missing response while it is not true in the case.\n\n\nAnd to save code :P\n\n\nthis.hasNonMissingResponses = this.responses.some((question) => question.allResponses.some((response) => !response.isMissingResponse))", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442593268", "createdAt": "2020-06-19T02:07:48Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/grouped-responses/grouped-responses.component.ts", "diffHunk": "@@ -42,11 +42,24 @@ export class GroupedResponsesComponent extends InstructorResponsesViewBase imple\n     createdAtTimestamp: 0,\n   };\n \n+  hasNonMissingResponses: boolean = false;\n+\n   constructor() {\n     super();\n   }\n \n   ngOnInit(): void {\n+    for (const question of this.responses) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af11f1123071f3a5ffb834a12c7a6b5d05990ad"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzQyMTYwOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjoxMDo1MVrOGmFyoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjoxMDo1MVrOGmFyoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5Mzk1Mg==", "bodyText": "Same naming issue here.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442593952", "createdAt": "2020-06-19T02:10:51Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "diffHunk": "@@ -56,6 +56,7 @@ export class GrqRgqViewResponsesComponent extends InstructorResponsesViewBase im\n   userExpanded: Record<string, boolean> = {};\n \n   responsesToShow: Record<string, Record<string, QuestionOutput[]>> = {};\n+  userHasNonMissingResponses: Record<string, boolean> = {};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af11f1123071f3a5ffb834a12c7a6b5d05990ad"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzQyMjE3OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjoxMTowOVrOGmFy-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjoxMTowOVrOGmFy-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5NDA0MA==", "bodyText": "this.userHasNonMissingResponses[user] = questionCopy2.allResponses.some((response: ResponseOutput) => !response.isMissingResponse)", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442594040", "createdAt": "2020-06-19T02:11:09Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "diffHunk": "@@ -174,6 +178,14 @@ export class GrqRgqViewResponsesComponent extends InstructorResponsesViewBase im\n             this.responsesToShow[user] = this.responsesToShow[user] || {};\n             this.responsesToShow[user][other] = this.responsesToShow[user][other] || [];\n             this.responsesToShow[user][other].push(questionCopy2);\n+\n+            if (!this.userHasNonMissingResponses[user]) {\n+              const hasNonMissingResponse: boolean =\n+                  !!questionCopy2.allResponses.filter((response: ResponseOutput) => !response.isMissingResponse).length;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af11f1123071f3a5ffb834a12c7a6b5d05990ad"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzQyOTExOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMjoxNjowOFrOGmF3Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNTowNDoxMFrOGmIIPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5NTEzNA==", "bodyText": "So we are saying if all responses are missing responses then we are going to show it as no response? Looks confusing under the case where indicateMissingResponses is true.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442595134", "createdAt": "2020-06-19T02:16:08Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.ts", "diffHunk": "@@ -89,7 +89,14 @@ export class PerQuestionViewResponsesComponent extends InstructorResponsesViewBa\n \n       responsesToShow.push(response);\n     }\n-    this.responsesToShow = responsesToShow;\n+\n+    const hasNonMissingResponse: boolean =\n+        !!responsesToShow.filter((response: ResponseOutput) => !response.isMissingResponse).length;\n+    if (hasNonMissingResponse) {\n+      this.responsesToShow = responsesToShow;\n+    } else {\n+      this.responsesToShow = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af11f1123071f3a5ffb834a12c7a6b5d05990ad"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYzMjI1Mw==", "bodyText": "Knowing which responses are missing is not meaningful when there are no actual responses that act as the control.", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r442632253", "createdAt": "2020-06-19T05:04:10Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.ts", "diffHunk": "@@ -89,7 +89,14 @@ export class PerQuestionViewResponsesComponent extends InstructorResponsesViewBa\n \n       responsesToShow.push(response);\n     }\n-    this.responsesToShow = responsesToShow;\n+\n+    const hasNonMissingResponse: boolean =\n+        !!responsesToShow.filter((response: ResponseOutput) => !response.isMissingResponse).length;\n+    if (hasNonMissingResponse) {\n+      this.responsesToShow = responsesToShow;\n+    } else {\n+      this.responsesToShow = [];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU5NTEzNA=="}, "originalCommit": {"oid": "3af11f1123071f3a5ffb834a12c7a6b5d05990ad"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTA1MDM5OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOTo0Mzo0NFrOGmoCgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOTo0Mzo0NFrOGmoCgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NTA3NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          const hasRealResponse: boolean =\n          \n          \n            \n                          this.userHasRealResponses[user] =\n          \n      \n    \n    \n  \n\ncan be simplified :P", "url": "https://github.com/TEAMMATES/teammates/pull/10211#discussion_r443155075", "createdAt": "2020-06-20T19:43:44Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/grq-rgq-view-responses/grq-rgq-view-responses.component.ts", "diffHunk": "@@ -174,6 +178,14 @@ export class GrqRgqViewResponsesComponent extends InstructorResponsesViewBase im\n             this.responsesToShow[user] = this.responsesToShow[user] || {};\n             this.responsesToShow[user][other] = this.responsesToShow[user][other] || [];\n             this.responsesToShow[user][other].push(questionCopy2);\n+\n+            if (!this.userHasRealResponses[user]) {\n+              const hasRealResponse: boolean =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83abaf0770cb39c44085a0a5185ea90bd26e4dc"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3837, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}