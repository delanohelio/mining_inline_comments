{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NDg5NDgx", "number": 10043, "title": "[#10041] Add builder pattern to LNPSpecification class", "bodyText": "Fixes #10041\nImproved the design of LNPSpecification class by applying Builder pattern.\nOutline of Solution:\n\nrefactored the LNPSpecification class to apply Builder pattern\nremoved calling LNPSpecification constructor from BaseLNPTestCase class; using builder() method instead.", "createdAt": "2020-05-12T05:12:10Z", "url": "https://github.com/TEAMMATES/teammates/pull/10043", "merged": true, "mergeCommit": {"oid": "1380932e2cd2b12f70b3872265922effadb700a7"}, "closed": true, "closedAt": "2020-05-19T11:10:03Z", "author": {"login": "Derek-Hardy"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgc-k2gH2gAyNDE2NDg5NDgxOmMwMTc0YjZhMGViMWQyNWNmMzUyYTMwODI5OWM5MzBjZWE4ZmQyYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciyXYdAFqTQxNDMzMjg4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0174b6a0eb1d25cf352a308299c930cea8fd2c8", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c0174b6a0eb1d25cf352a308299c930cea8fd2c8", "committedDate": "2020-05-12T04:57:21Z", "message": "added builder pattern to LNPSpecification class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4f40abb7d8f8fc038c7a900f82c1a39a66c8efb", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a4f40abb7d8f8fc038c7a900f82c1a39a66c8efb", "committedDate": "2020-05-12T04:57:21Z", "message": "fixed syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06b07713d0ce6f7faec5f8ee0adf2bae43f51850", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/06b07713d0ce6f7faec5f8ee0adf2bae43f51850", "committedDate": "2020-05-12T07:44:43Z", "message": "updated the static analysis suppression"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODAxODA1", "url": "https://github.com/TEAMMATES/teammates/pull/10043#pullrequestreview-409801805", "createdAt": "2020-05-12T08:13:21Z", "commit": {"oid": "06b07713d0ce6f7faec5f8ee0adf2bae43f51850"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTI2MzQ3", "url": "https://github.com/TEAMMATES/teammates/pull/10043#pullrequestreview-413126347", "createdAt": "2020-05-17T04:36:37Z", "commit": {"oid": "06b07713d0ce6f7faec5f8ee0adf2bae43f51850"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNDozNjozOFrOGWeLpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNDozOToxOVrOGWeMIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIxNjM1OA==", "bodyText": "I think the rule suppression should be specific to the file rather than to the whole package. Take a look at ResourceEndpoints to see how to do this.", "url": "https://github.com/TEAMMATES/teammates/pull/10043#discussion_r426216358", "createdAt": "2020-05-17T04:36:38Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/util/LNPSpecification.java", "diffHunk": "@@ -60,4 +54,37 @@ private void checkErrorLimit(double errorPct) {\n                     + \"% higher than the specified threshold. \";\n         }\n     }\n+\n+    /**\n+     * Returns a builder for {@link LNPSpecification}.\n+     */\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * A builder class for {@link LNPSpecification}.\n+     */\n+    public static class Builder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b07713d0ce6f7faec5f8ee0adf2bae43f51850"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIxNjQ4MA==", "bodyText": "Ideally, the method should be overridden by child class and the child class will call the builder to return a  LNPSpecification instance (in any way they want). Therefore, the method should not specify what variables to pass (i.e., we should not have the two arguments in the method).", "url": "https://github.com/TEAMMATES/teammates/pull/10043#discussion_r426216480", "createdAt": "2020-05-17T04:39:19Z", "author": {"login": "xpdavid"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/BaseLNPTestCase.java", "diffHunk": "@@ -76,7 +76,10 @@\n      *                          (in seconds) for the test endpoint.\n      */\n     protected void setupSpecification(double errorRateLimit, double meanRespTimeLimit) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b07713d0ce6f7faec5f8ee0adf2bae43f51850"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76770b46c4b7c711be94a6454678819f8d4a9fa9", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/76770b46c4b7c711be94a6454678819f8d4a9fa9", "committedDate": "2020-05-18T01:32:48Z", "message": "refactored setupSpecification method to abstract and overridden by child classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae0d6793135bb318fdb738467b4f243d0b17e812", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ae0d6793135bb318fdb738467b4f243d0b17e812", "committedDate": "2020-05-18T01:37:18Z", "message": "updated rule suppression to file-level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bbf2b64fe12dcc9ee2ef3c8832f494f5abf1c9", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/17bbf2b64fe12dcc9ee2ef3c8832f494f5abf1c9", "committedDate": "2020-05-18T03:29:18Z", "message": "added Javadoc method suppression comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fa3edffb0c81d10391a92fcd8fff30e17f8c2502", "committedDate": "2020-05-18T03:29:48Z", "message": "removed suppression from .xml file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjYxOTU5", "url": "https://github.com/TEAMMATES/teammates/pull/10043#pullrequestreview-413261959", "createdAt": "2020-05-18T04:18:03Z", "commit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjgxMTQy", "url": "https://github.com/TEAMMATES/teammates/pull/10043#pullrequestreview-413281142", "createdAt": "2020-05-18T05:32:22Z", "commit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNTozMjoyMlrOGWoBiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNTo1MzoxOVrOGWoX0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM3NzYxMQ==", "bodyText": "This should be proper Javadoc format instead of code comment.\n/**\n * Maximum allowable threshold for the ratio of failed request\n * (between 0 and 1) to the test endpoint.\n */\nI modified the wordings a bit because the number is clearly a ratio, not percentage.", "url": "https://github.com/TEAMMATES/teammates/pull/10043#discussion_r426377611", "createdAt": "2020-05-18T05:32:22Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/util/LNPSpecification.java", "diffHunk": "@@ -5,24 +5,18 @@\n  */\n public class LNPSpecification {\n \n-    /*\n-        Note: Consider applying the builder pattern if this class gets more complicated.\n-    */\n-\n+    // Maximum allowable threshold for the percentage of failed requests\n+    // (0 to 100) to the test endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM3ODI5OA==", "bodyText": "Try not to have this kind of custom indentation. The intention may be good (e.g. to align with the dots at the previous line), but if any of the previous line changes (e.g. the LNPSpecification class name's change), these lines will be affected as well.\nIt should just be simple 8-space indentation, i.e. 2 steps (where 1 step is 4-space indentation).\n        this.specification = LNPSpecification.builder()\n                .withErrorRateLimit(ERROR_RATE_LIMIT)\n                .withMeanRespTimeLimit(MEAN_RESP_TIME_LIMIT)\n                .build();", "url": "https://github.com/TEAMMATES/teammates/pull/10043#discussion_r426378298", "createdAt": "2020-05-18T05:35:04Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/lnp/FeedbackSessionSubmitLNPTest.java", "diffHunk": "@@ -252,11 +256,19 @@ protected ListedHashTree getLnpTestPlan() {\n         return testPlan;\n     }\n \n+    @Override\n+    protected void setupSpecification() {\n+        this.specification = LNPSpecification.builder()\n+                                             .withErrorRateLimit(ERROR_RATE_LIMIT)\n+                                             .withMeanRespTimeLimit(MEAN_RESP_TIME_LIMIT)\n+                                             .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM4MzMxMw==", "bodyText": "Similarly here.", "url": "https://github.com/TEAMMATES/teammates/pull/10043#discussion_r426383313", "createdAt": "2020-05-18T05:53:19Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/util/LNPSpecification.java", "diffHunk": "@@ -5,24 +5,18 @@\n  */\n public class LNPSpecification {\n \n-    /*\n-        Note: Consider applying the builder pattern if this class gets more complicated.\n-    */\n-\n+    // Maximum allowable threshold for the percentage of failed requests\n+    // (0 to 100) to the test endpoint\n     private double errorRateLimit;\n+\n+    // Maximum allowable threshold for the mean response time\n+    // (in seconds) for the test endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa3edffb0c81d10391a92fcd8fff30e17f8c2502"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa07f5700ea5fcec05c359a1351eee477bbc9140", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/aa07f5700ea5fcec05c359a1351eee477bbc9140", "committedDate": "2020-05-19T03:48:32Z", "message": "updated coding style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382f674ba3bbf9b19d6dc94811ac40cc257fd612", "author": {"user": {"login": "Derek-Hardy", "name": "Derek-Hardy"}}, "url": "https://github.com/TEAMMATES/teammates/commit/382f674ba3bbf9b19d6dc94811ac40cc257fd612", "committedDate": "2020-05-19T04:18:07Z", "message": "added missing period for Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3085fd71e944e5838a6dc6822ffb4a3e7fe58faf", "author": {"user": {"login": "daekoon", "name": "Daekoon"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3085fd71e944e5838a6dc6822ffb4a3e7fe58faf", "committedDate": "2020-05-19T04:21:48Z", "message": "Merge branch 'master' into 10041-add-builder-pattern"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzMyODgw", "url": "https://github.com/TEAMMATES/teammates/pull/10043#pullrequestreview-414332880", "createdAt": "2020-05-19T11:00:18Z", "commit": {"oid": "3085fd71e944e5838a6dc6822ffb4a3e7fe58faf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4396, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}