{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5Mjc4MzU4", "number": 9901, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzoyMTo1N1rODV5xPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0Nzo1NlrODWVflg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjkzMTgyOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-student-records-page/__snapshots__/instructor-student-records-page.component.spec.ts.snap", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzoyMTo1N1rOFaW3mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMTowMjoxNVrOFaa8gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MTk3Nw==", "bodyText": "Looks like snapshot testing does not capture full value.", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363181977", "createdAt": "2020-01-06T07:21:57Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/__snapshots__/instructor-student-records-page.component.spec.ts.snap", "diffHunk": "@@ -0,0 +1,29 @@\n+// Jest Snapshot v1, https://goo.gl/fbAQLP\n+\n+exports[`InstructorStudentRecordsPageComponent should snap with default fields 1`] = `\n+<tm-instructor-student-records-page\n+  courseId=\"undefined\"\n+  photoUrl={[Function String]}\n+  route={[Function ActivatedRoute]}\n+  sessions={[Function Array]}\n+  statusMessageService={[Function StatusMessageService]}\n+  studentEmail=\"undefined\"\n+  studentProfile={[Function Object]}\n+  studentProfileService={[Function StudentProfileService]}\n+>\n+  <h1>\n+    's Records\n+    <small\n+      class=\"text-muted\"\n+    >\n+       - \n+    </small>\n+  </h1><tm-student-profile\n+    ng-reflect-photo-url=\"http://localhost:8080/webapi/s\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI0ODc3MA==", "bodyText": "I tried doing this in the past, but it seems ng-reflect has a character cap of 30, so I'm not able to see the full expression. angular/angular#28786", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363248770", "createdAt": "2020-01-06T11:02:15Z", "author": {"login": "hcwong"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/__snapshots__/instructor-student-records-page.component.spec.ts.snap", "diffHunk": "@@ -0,0 +1,29 @@\n+// Jest Snapshot v1, https://goo.gl/fbAQLP\n+\n+exports[`InstructorStudentRecordsPageComponent should snap with default fields 1`] = `\n+<tm-instructor-student-records-page\n+  courseId=\"undefined\"\n+  photoUrl={[Function String]}\n+  route={[Function ActivatedRoute]}\n+  sessions={[Function Array]}\n+  statusMessageService={[Function StatusMessageService]}\n+  studentEmail=\"undefined\"\n+  studentProfile={[Function Object]}\n+  studentProfileService={[Function StudentProfileService]}\n+>\n+  <h1>\n+    's Records\n+    <small\n+      class=\"text-muted\"\n+    >\n+       - \n+    </small>\n+  </h1><tm-student-profile\n+    ng-reflect-photo-url=\"http://localhost:8080/webapi/s\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MTk3Nw=="}, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MjkzMzQ2OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzoyMjo1MlrOFaW4fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMDowMDo1M1rOFa00QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MjIwNg==", "bodyText": "We can keep the snapshot. In addition,\nI think now you can\n\ninject a fake profile data\nassert the url match your expection", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363182206", "createdAt": "2020-01-06T07:22:52Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,8 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY3MjY0MA==", "bodyText": "I'm not quite sure how to inject the queryParams info into the subscribe callback without mocking it, but it works with undefined queryParams", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363672640", "createdAt": "2020-01-07T10:00:53Z", "author": {"login": "hcwong"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,8 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MjIwNg=="}, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NzQ3NDE0OnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0Nzo1NlrOFbCYVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwNDowMToyN1rOFbqa2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ==", "bodyText": "Great! You are on the right track. The only thing left is to inject real profile into the component. You can search on existing code (e.g. other test files) or take a look at student-course-details-page.component.spec.ts to get an idea of how to assign value to component during testing.", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363894869", "createdAt": "2020-01-07T18:47:56Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA4MTU1NQ==", "bodyText": "Sorry, perhaps I should have phrased my question a little better. I'm not sure how to mock the queryParams of the ngOnInit callback. I'm trying to set the url for the specific test but I can't seem to find any examples online.\nthis.route.queryParams.subscribe((queryParams: any) => {\n      this.courseId = queryParams.courseid;\n      this.studentEmail = queryParams.studentemail;\n\n      this.loadStudentRecords();\n      this.photoUrl\n          = `${environment.backendUrl}/webapi/student/profilePic?`\n            + `courseid=${this.courseId}&studentemail=${this.studentEmail}`;\n    });", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r364081555", "createdAt": "2020-01-08T06:37:25Z", "author": {"login": "hcwong"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ=="}, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM4ODYxNw==", "bodyText": "https://stackoverflow.com/a/45939161 Here you go :)", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r364388617", "createdAt": "2020-01-08T18:54:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ=="}, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU1MDcyNg==", "bodyText": "I tried this link 2 days back and it failed, turns out that I had to replace params with queryParams as stated here  zzzzz\ud83e\udd23.\nbut thanks for the help! Do you need me to squash commits or is it auto squash merge", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r364550726", "createdAt": "2020-01-09T04:00:25Z", "author": {"login": "hcwong"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ=="}, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU1MDg3NQ==", "bodyText": "\ud83d\udc4d No worry. It will be auto-squashed.", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r364550875", "createdAt": "2020-01-09T04:01:27Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ=="}, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4014, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}