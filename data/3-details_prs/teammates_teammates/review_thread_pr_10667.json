{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NDQzNDgz", "number": 10667, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDo0NjoxOVrOEe8AuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDo0NjoxOVrOEe8AuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwODc1OTYwOnYy", "diffSide": "RIGHT", "path": "src/e2e/java/teammates/e2e/cases/e2e/FeedbackTextQuestionE2ETest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDo0NjoxOVrOHK5uCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzoyODozMVrOHLBBCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE5MzQ4Mg==", "bodyText": "Minor suggestion: Shall we make this string longer to see if the response length field can work? Maybe a string that has 100 words?", "url": "https://github.com/TEAMMATES/teammates/pull/10667#discussion_r481193482", "createdAt": "2020-09-01T14:46:19Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/FeedbackTextQuestionE2ETest.java", "diffHunk": "@@ -0,0 +1,134 @@\n+package teammates.e2e.cases.e2e;\n+\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AppPage;\n+import teammates.e2e.pageobjects.FeedbackSubmitPage;\n+import teammates.e2e.pageobjects.InstructorFeedbackEditPage;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_SESSION_EDIT_PAGE}, {@link Const.WebPageURIs#SESSION_SUBMISSION_PAGE}\n+ *      specifically for text questions.\n+ */\n+public class FeedbackTextQuestionE2ETest extends BaseE2ETestCase {\n+    InstructorAttributes instructor;\n+    CourseAttributes course;\n+    FeedbackSessionAttributes feedbackSession;\n+    StudentAttributes student;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/FeedbackTextQuestionE2ETest.json\");\n+        removeAndRestoreDataBundle(testData);\n+\n+        instructor = testData.instructors.get(\"instructor\");\n+        course = testData.courses.get(\"course\");\n+        feedbackSession = testData.feedbackSessions.get(\"openSession\");\n+        student = testData.students.get(\"alice.tmms@FTextQuestionE2eT.CS2104\");\n+    }\n+\n+    @Test\n+    public void testAll() {\n+        testEditPage();\n+        testSubmitPage();\n+    }\n+\n+    private void testEditPage() {\n+        AppUrl url = createUrl(Const.WebPageURIs.INSTRUCTOR_SESSION_EDIT_PAGE)\n+                .withUserId(instructor.googleId)\n+                .withCourseId(course.getId())\n+                .withSessionName(feedbackSession.getFeedbackSessionName());\n+        InstructorFeedbackEditPage feedbackEditPage = loginAdminToPage(url, InstructorFeedbackEditPage.class);\n+        feedbackEditPage.waitForPageToLoad();\n+\n+        ______TS(\"verify loaded question\");\n+        FeedbackQuestionAttributes loadedQuestion = testData.feedbackQuestions.get(\"qn1ForFirstSession\");\n+        FeedbackTextQuestionDetails questionDetails = (FeedbackTextQuestionDetails) loadedQuestion.getQuestionDetails();\n+        feedbackEditPage.verifyTextQuestionDetails(1, questionDetails);\n+\n+        ______TS(\"add new question\");\n+        // add new question exactly like loaded question\n+        loadedQuestion.setQuestionNumber(2);\n+        feedbackEditPage.addTextQuestion(loadedQuestion);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(2, questionDetails);\n+        verifyPresentInDatastore(loadedQuestion);\n+\n+        ______TS(\"copy question\");\n+        FeedbackQuestionAttributes copiedQuestion = testData.feedbackQuestions.get(\"qn1ForSecondSession\");\n+        questionDetails = (FeedbackTextQuestionDetails) copiedQuestion.getQuestionDetails();\n+        feedbackEditPage.copyQuestion(copiedQuestion.getCourseId(),\n+                copiedQuestion.getQuestionDetails().getQuestionText());\n+        copiedQuestion.courseId = course.getId();\n+        copiedQuestion.feedbackSessionName = feedbackSession.getFeedbackSessionName();\n+        copiedQuestion.setQuestionNumber(3);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(3, questionDetails);\n+        verifyPresentInDatastore(copiedQuestion);\n+\n+        ______TS(\"edit question\");\n+        questionDetails.setRecommendedLength(200);\n+        copiedQuestion.questionDetails = questionDetails;\n+        feedbackEditPage.editTextQuestion(3, questionDetails);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(3, questionDetails);\n+        verifyPresentInDatastore(copiedQuestion);\n+    }\n+\n+    private void testSubmitPage() {\n+        AppUrl url = createUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)\n+                .withUserId(student.googleId)\n+                .withCourseId(student.course)\n+                .withSessionName(feedbackSession.getFeedbackSessionName())\n+                .withRegistrationKey(StringHelper.encrypt(getStudent(student).key));\n+        FeedbackSubmitPage feedbackSubmitPage = loginAdminToPage(url, FeedbackSubmitPage.class);\n+        feedbackSubmitPage.waitForPageToLoad();\n+\n+        ______TS(\"verify loaded question\");\n+        FeedbackQuestionAttributes question = testData.feedbackQuestions.get(\"qn1ForFirstSession\");\n+        InstructorAttributes receiver = testData.instructors.get(\"instructor\");\n+        question.setQuestionNumber(1);\n+        feedbackSubmitPage.verifyTextQuestion(1, (FeedbackTextQuestionDetails) question.getQuestionDetails());\n+\n+        ______TS(\"submit response\");\n+        String questionId = getFeedbackQuestion(question).getId();\n+        FeedbackResponseAttributes response = getResponse(questionId, receiver, \"<p>This is the response for qn 1</p>\");\n+        feedbackSubmitPage.submitTextResponse(1, receiver.getName(), response);\n+\n+        verifyPresentInDatastore(response);\n+\n+        ______TS(\"check previous response\");\n+        feedbackSubmitPage = AppPage.getNewPageInstance(browser, url, FeedbackSubmitPage.class);\n+        feedbackSubmitPage.waitForPageToLoad();\n+        feedbackSubmitPage.verifyTextResponse(1, receiver.getName(), response);\n+\n+        ______TS(\"edit response\");\n+        String editedResponse = \"<p><strong>Edited response</strong></p>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52ac2346a72e3fc0cfdb8405c15ad163ef759ff9"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMxMzAzNQ==", "bodyText": "Actually above there is a string of length 7 that aims to test the counting functionality of the response length field. I believe increasing it to 100 should not make a difference unless we are testing for handling of excess number of words,  which I think should not be done for E2E test.", "url": "https://github.com/TEAMMATES/teammates/pull/10667#discussion_r481313035", "createdAt": "2020-09-01T17:28:31Z", "author": {"login": "jtankw3"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/FeedbackTextQuestionE2ETest.java", "diffHunk": "@@ -0,0 +1,134 @@\n+package teammates.e2e.cases.e2e;\n+\n+import org.testng.annotations.Test;\n+\n+import teammates.common.datatransfer.attributes.CourseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;\n+import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;\n+import teammates.common.datatransfer.attributes.InstructorAttributes;\n+import teammates.common.datatransfer.attributes.StudentAttributes;\n+import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;\n+import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;\n+import teammates.common.util.AppUrl;\n+import teammates.common.util.Const;\n+import teammates.common.util.StringHelper;\n+import teammates.e2e.pageobjects.AppPage;\n+import teammates.e2e.pageobjects.FeedbackSubmitPage;\n+import teammates.e2e.pageobjects.InstructorFeedbackEditPage;\n+\n+/**\n+ * SUT: {@link Const.WebPageURIs#INSTRUCTOR_SESSION_EDIT_PAGE}, {@link Const.WebPageURIs#SESSION_SUBMISSION_PAGE}\n+ *      specifically for text questions.\n+ */\n+public class FeedbackTextQuestionE2ETest extends BaseE2ETestCase {\n+    InstructorAttributes instructor;\n+    CourseAttributes course;\n+    FeedbackSessionAttributes feedbackSession;\n+    StudentAttributes student;\n+\n+    @Override\n+    protected void prepareTestData() {\n+        testData = loadDataBundle(\"/FeedbackTextQuestionE2ETest.json\");\n+        removeAndRestoreDataBundle(testData);\n+\n+        instructor = testData.instructors.get(\"instructor\");\n+        course = testData.courses.get(\"course\");\n+        feedbackSession = testData.feedbackSessions.get(\"openSession\");\n+        student = testData.students.get(\"alice.tmms@FTextQuestionE2eT.CS2104\");\n+    }\n+\n+    @Test\n+    public void testAll() {\n+        testEditPage();\n+        testSubmitPage();\n+    }\n+\n+    private void testEditPage() {\n+        AppUrl url = createUrl(Const.WebPageURIs.INSTRUCTOR_SESSION_EDIT_PAGE)\n+                .withUserId(instructor.googleId)\n+                .withCourseId(course.getId())\n+                .withSessionName(feedbackSession.getFeedbackSessionName());\n+        InstructorFeedbackEditPage feedbackEditPage = loginAdminToPage(url, InstructorFeedbackEditPage.class);\n+        feedbackEditPage.waitForPageToLoad();\n+\n+        ______TS(\"verify loaded question\");\n+        FeedbackQuestionAttributes loadedQuestion = testData.feedbackQuestions.get(\"qn1ForFirstSession\");\n+        FeedbackTextQuestionDetails questionDetails = (FeedbackTextQuestionDetails) loadedQuestion.getQuestionDetails();\n+        feedbackEditPage.verifyTextQuestionDetails(1, questionDetails);\n+\n+        ______TS(\"add new question\");\n+        // add new question exactly like loaded question\n+        loadedQuestion.setQuestionNumber(2);\n+        feedbackEditPage.addTextQuestion(loadedQuestion);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(2, questionDetails);\n+        verifyPresentInDatastore(loadedQuestion);\n+\n+        ______TS(\"copy question\");\n+        FeedbackQuestionAttributes copiedQuestion = testData.feedbackQuestions.get(\"qn1ForSecondSession\");\n+        questionDetails = (FeedbackTextQuestionDetails) copiedQuestion.getQuestionDetails();\n+        feedbackEditPage.copyQuestion(copiedQuestion.getCourseId(),\n+                copiedQuestion.getQuestionDetails().getQuestionText());\n+        copiedQuestion.courseId = course.getId();\n+        copiedQuestion.feedbackSessionName = feedbackSession.getFeedbackSessionName();\n+        copiedQuestion.setQuestionNumber(3);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(3, questionDetails);\n+        verifyPresentInDatastore(copiedQuestion);\n+\n+        ______TS(\"edit question\");\n+        questionDetails.setRecommendedLength(200);\n+        copiedQuestion.questionDetails = questionDetails;\n+        feedbackEditPage.editTextQuestion(3, questionDetails);\n+\n+        feedbackEditPage.verifyTextQuestionDetails(3, questionDetails);\n+        verifyPresentInDatastore(copiedQuestion);\n+    }\n+\n+    private void testSubmitPage() {\n+        AppUrl url = createUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)\n+                .withUserId(student.googleId)\n+                .withCourseId(student.course)\n+                .withSessionName(feedbackSession.getFeedbackSessionName())\n+                .withRegistrationKey(StringHelper.encrypt(getStudent(student).key));\n+        FeedbackSubmitPage feedbackSubmitPage = loginAdminToPage(url, FeedbackSubmitPage.class);\n+        feedbackSubmitPage.waitForPageToLoad();\n+\n+        ______TS(\"verify loaded question\");\n+        FeedbackQuestionAttributes question = testData.feedbackQuestions.get(\"qn1ForFirstSession\");\n+        InstructorAttributes receiver = testData.instructors.get(\"instructor\");\n+        question.setQuestionNumber(1);\n+        feedbackSubmitPage.verifyTextQuestion(1, (FeedbackTextQuestionDetails) question.getQuestionDetails());\n+\n+        ______TS(\"submit response\");\n+        String questionId = getFeedbackQuestion(question).getId();\n+        FeedbackResponseAttributes response = getResponse(questionId, receiver, \"<p>This is the response for qn 1</p>\");\n+        feedbackSubmitPage.submitTextResponse(1, receiver.getName(), response);\n+\n+        verifyPresentInDatastore(response);\n+\n+        ______TS(\"check previous response\");\n+        feedbackSubmitPage = AppPage.getNewPageInstance(browser, url, FeedbackSubmitPage.class);\n+        feedbackSubmitPage.waitForPageToLoad();\n+        feedbackSubmitPage.verifyTextResponse(1, receiver.getName(), response);\n+\n+        ______TS(\"edit response\");\n+        String editedResponse = \"<p><strong>Edited response</strong></p>\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE5MzQ4Mg=="}, "originalCommit": {"oid": "52ac2346a72e3fc0cfdb8405c15ad163ef759ff9"}, "originalPosition": 117}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3516, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}