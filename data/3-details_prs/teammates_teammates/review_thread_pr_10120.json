{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMTA0NDcw", "number": 10120, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzo0Mjo1NFrOD_reUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNToxMDowNlrOEAXHiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MDk5MTUzOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "isResolved": false, "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMzo0Mjo1NFrOGae2mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0NToxMFrOGa9QwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ==", "bodyText": "Is it possible to move this to the ts file instead? Genuine question, I'm not that familiar with Angular haha", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430421659", "createdAt": "2020-05-26T13:42:54Z", "author": {"login": "madanalogy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQzMzg2MA==", "bodyText": "I'm also not that familiar with Angular :)\nI wanted to do that as well, but the data is in the loop *ngFor=\"let response of responses. I will have to do a map on responses to add a new attribute model to each response and reference it here.\nFeel that writing it in the template file is much clearer, unless there is a better way to do it.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430433860", "createdAt": "2020-05-26T13:59:19Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQzNTI3OA==", "bodyText": "Gotcha will ask senior devs for input on this", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430435278", "createdAt": "2020-05-26T14:01:17Z", "author": {"login": "madanalogy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0NDc5Mw==", "bodyText": "Searching for examples in code base is something a good option:\n\n  \n    \n      teammates/src/web/app/components/question-responses/grouped-responses/grouped-responses.component.html\n    \n    \n        Lines 22 to 30\n      in\n      0e16875\n    \n    \n    \n    \n\n        \n          \n           <tm-comment-row *ngIf=\"response.allResponses[0].participantComment\" \n        \n\n        \n          \n                           [model]=\"transformParticipantCommentToCommandRowModel(response.allResponses[0].participantComment)\" \n        \n\n        \n          \n                           [questionShowResponsesTo]=\"response.feedbackQuestion.showResponsesTo\" \n        \n\n        \n          \n                           [isDisabled]=\"true\" [isVisibilityOptionEnabled]=\"false\" \n        \n\n        \n          \n                           [mode]=\"CommentRowMode.EDIT\" \n        \n\n        \n          \n                           [isFeedbackParticipantComment]=\"true\" \n        \n\n        \n          \n                           [shouldHideDeleteButton]=\"true\" \n        \n\n        \n          \n                           [shouldHideEditButton]=\"true\" \n        \n\n        \n          \n           ></tm-comment-row>", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430644793", "createdAt": "2020-05-26T19:11:16Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MDc2MQ==", "bodyText": "Thanks for the suggestion! However, I realise that the same function is ran multiple times whenever I do something on the page, like clicking on anything on the page. Most likely something to do with Angular's change detection mechanism.\nDo you think it's worth optimizing this, like using a pure pipe instead of simply calling a function in the template?", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430860761", "createdAt": "2020-05-27T05:12:38Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTI1OQ==", "bodyText": "Just clicking non-clickable thing?", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430861259", "createdAt": "2020-05-27T05:14:39Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MTcxMA==", "bodyText": "Yup just clicking anywhere on the page, clickable or not. Tested this by adding a console log to the function.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430861710", "createdAt": "2020-05-27T05:16:33Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2MzI5Mw==", "bodyText": "Let's just be clear.\nIf you make a method like transformParticipantCommentToCommandRowModel, then you are saying that when you do something on the page, the method gets called multiple time.  How do you know that the method is ran multiple times (by adding console.log?)", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430863293", "createdAt": "2020-05-27T05:23:01Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MDIzMg==", "bodyText": "If you make a method like transformParticipantCommentToCommandRowModel, then you are saying that when you do something on the page, the method gets called multiple time.\n\nYes. Actually the current transformParticipantCommentToCommandRowModel function on the master branch also suffers from the same problem.\n\nHow do you know that the method is ran multiple times (by adding console.log?)\n\nTo reproduce:\n\nAdd a console.log(\"calling transform\"); to the current transformParticipantCommentToCommandRowModel function\n\ntransformParticipantCommentToCommandRowModel(participantComment: CommentOutput): CommentRowModel {\n    console.log(\"calling transform\");\n    return {\n      originalComment: participantComment,\n      timezone: this.session.timeZone,\n      commentGiverName: participantComment.commentGiverName,\n      lastEditorName: participantComment.lastEditorName,\n      commentEditFormModel: {\n        commentText: participantComment.commentText,\n        isUsingCustomVisibilities: false,\n        showCommentTo: [],\n        showGiverNameTo: [],\n      },\n      isEditing: false,\n    };\n  }\n\n\nNavigate to a page that uses `GroupedResponsesComponent such as the instructor session result page.\nEnsure that it has participant comments and the responses are grouped by GRQ or RGQ\nClick anywhere on the page.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430870232", "createdAt": "2020-05-27T05:46:32Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3NTQ4MQ==", "bodyText": "https://medium.com/showpad-engineering/why-you-should-never-use-function-calls-in-angular-template-expressions-e1a50f9c0496\nGood catching \ud83d\udcaf\nSo if we construct the object in the template file, can we avoid this?", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430875481", "createdAt": "2020-05-27T06:02:42Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4NDM0MQ==", "bodyText": "That's what I hoped... But I can't find any mention of this strategy anywhere, and I'm not sure on how to test it as well.\nPersonally think that pure pipe is better, since we can facilitate code reuse while resolving this issue, as long as the input participantComment: CommentOutput is immutable.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430884341", "createdAt": "2020-05-27T06:27:42Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg5OTY5MQ==", "bodyText": "I think we can try pipe. You can add one in comment-box module.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430899691", "createdAt": "2020-05-27T07:05:42Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkxOTg3Mw==", "bodyText": "Got it. Will do.", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r430919873", "createdAt": "2020-05-27T07:45:10Z", "author": {"login": "ccyccyccy"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -16,6 +16,35 @@\n               <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n             </td>\n           </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"true\"\n+                              [shouldHideSavingButton]=\"true\"\n+                              [shouldHideClosingButton]=\"true\"\n+                              [shouldHideEditButton]=\"true\"\n+                              [shouldHideDeleteButton]=\"true\"\n+                              [isFeedbackParticipantComment]=\"true\"\n+                              [response]=\"response\"\n+                              [questionShowResponsesTo]=\"[]\"\n+                              [model]=\"\n+                                {\n+                                  commentEditFormModel: {\n+                                    commentText: response.participantComment.commentText,\n+                                    isUsingCustomVisibilities: false,\n+                                    showCommentTo: response.participantComment.showCommentTo,\n+                                    showGiverNameTo: response.participantComment.showGiverNameTo\n+                                  },\n+                                  originalComment: response.participantComment,\n+                                  isEditing: false,\n+                                  commentGiverName: response.participantComment.commentGiverName,\n+                                  lastEditorName: response.participantComment.lastEditorName\n+                                }\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyMTY1OQ=="}, "originalCommit": {"oid": "55b852f39a931c24cc8953288e063d669ec2a2a5"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODE0MDUzOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTowOTowNVrOGblzmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTowOTowNVrOGblzmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDE1Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              CommentRowMode: typeof CommentRowMode = CommentRowMode;\n          \n          \n            \n              // enum\n          \n          \n            \n              CommentRowMode: typeof CommentRowMode = CommentRowMode;", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584153", "createdAt": "2020-05-28T05:09:05Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "diffHunk": "@@ -10,11 +11,9 @@ import { FeedbackQuestionDetails, FeedbackQuestionType, ResponseOutput } from '.\n   styleUrls: ['./student-view-responses.component.scss'],\n })\n export class StudentViewResponsesComponent implements OnInit {\n+  CommentRowMode: typeof CommentRowMode = CommentRowMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODE0MTUwOnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTowOTo0MlrOGbl0Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTowOTo0MlrOGbl0Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDI5NA==", "bodyText": "I can we avoid using !?", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584294", "createdAt": "2020-05-28T05:09:42Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.ts", "diffHunk": "@@ -10,11 +11,9 @@ import { FeedbackQuestionDetails, FeedbackQuestionType, ResponseOutput } from '.\n   styleUrls: ['./student-view-responses.component.scss'],\n })\n export class StudentViewResponsesComponent implements OnInit {\n+  CommentRowMode: typeof CommentRowMode = CommentRowMode;\n \n-  @Input() questionDetails: FeedbackQuestionDetails = {\n-    questionType: FeedbackQuestionType.TEXT,\n-    questionText: '',\n-  };\n+  @Input() feedbackQuestion!: FeedbackQuestion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODE0MjE5OnYy", "diffSide": "RIGHT", "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNToxMDowNlrOGbl0ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNToxMDowNlrOGbl0ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU4NDM5NA==", "bodyText": "Technically this should be true", "url": "https://github.com/TEAMMATES/teammates/pull/10120#discussion_r431584394", "createdAt": "2020-05-28T05:10:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html", "diffHunk": "@@ -13,7 +13,24 @@\n           </tr>\n           <tr>\n             <td>\n-              <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n+              <tm-single-response [responseDetails]=\"response.responseDetails\" [questionDetails]=\"feedbackQuestion.questionDetails\" [isStudentPage]=\"true\"></tm-single-response>\n+            </td>\n+          </tr>\n+          <tr *ngIf=\"response.participantComment\">\n+            <td>\n+              <tm-comment-row\n+                              [mode]=\"CommentRowMode.EDIT\"\n+                              [isVisibilityOptionEnabled]=\"false\"\n+                              [isDisabled]=\"false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8293acb07ee7546bb5968f65a0f46bfa78a130be"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4009, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}