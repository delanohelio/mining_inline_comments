{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NzAyNTQz", "number": 9925, "title": "[#9642] Feedback sessions with # or ? in their name can't be edited.", "bodyText": "Fixes #9642\nOutline of Solution\nThe issue was with session name containing special characters. The solution was to call URIEncodeComponent before calling the relevant functions.\nHowever, I think we should just prevent people from using URI special characters in name (I had to manually search the codebase to find the calls, not friendly for new contributors), as it is quite troublesome to insert encodeURIComponent everytime we make a call with fsname param. Seems like we already do this for coursenames", "createdAt": "2020-01-20T08:17:39Z", "url": "https://github.com/TEAMMATES/teammates/pull/9925", "merged": true, "mergeCommit": {"oid": "3d63185659edd46eb457026d3b7212e05740c6b8"}, "closed": true, "closedAt": "2020-02-28T07:09:33Z", "author": {"login": "hcwong"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8IToUABqjI5NjIwMTI2Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIqHn8gH2gAyMzY0NzAyNTQzOmYwOTBjYjU0MDk4YTUzZWFmOWUxOGE3NjEzYmE1OTQ2MzcwZWE3Njg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbd34c582c7911fd201117be1faeb0d3cfa6497e", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/dbd34c582c7911fd201117be1faeb0d3cfa6497e", "committedDate": "2020-01-20T08:30:23Z", "message": "lint"}, "afterCommit": {"oid": "3a1b4486cf2af71b2d102628a44a3e18756f80c8", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3a1b4486cf2af71b2d102628a44a3e18756f80c8", "committedDate": "2020-01-20T08:30:56Z", "message": "lint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a1b4486cf2af71b2d102628a44a3e18756f80c8", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3a1b4486cf2af71b2d102628a44a3e18756f80c8", "committedDate": "2020-01-20T08:30:56Z", "message": "lint"}, "afterCommit": {"oid": "e68d8f0c461c5c5407e631d5be57a4c8b7d1a8c4", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e68d8f0c461c5c5407e631d5be57a4c8b7d1a8c4", "committedDate": "2020-01-23T08:57:21Z", "message": "Fix lint error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e68d8f0c461c5c5407e631d5be57a4c8b7d1a8c4", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e68d8f0c461c5c5407e631d5be57a4c8b7d1a8c4", "committedDate": "2020-01-23T08:57:21Z", "message": "Fix lint error"}, "afterCommit": {"oid": "86df0d83b8c26a8b9ae20d362e6699a75fec037a", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/86df0d83b8c26a8b9ae20d362e6699a75fec037a", "committedDate": "2020-01-23T09:17:48Z", "message": "Fix lint error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86df0d83b8c26a8b9ae20d362e6699a75fec037a", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/86df0d83b8c26a8b9ae20d362e6699a75fec037a", "committedDate": "2020-01-23T09:17:48Z", "message": "Fix lint error"}, "afterCommit": {"oid": "9234948ed868990338b2d8da7eda5217e15c195f", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9234948ed868990338b2d8da7eda5217e15c195f", "committedDate": "2020-01-24T00:26:47Z", "message": "Fix bugs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62f81311b127bce12fbed302ffa1743e52faf7c2", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/62f81311b127bce12fbed302ffa1743e52faf7c2", "committedDate": "2020-01-24T06:30:10Z", "message": "Fix bug"}, "afterCommit": {"oid": "74f969ff7067c08a0793bf68fd6dbf53775c1325", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/74f969ff7067c08a0793bf68fd6dbf53775c1325", "committedDate": "2020-01-24T07:19:40Z", "message": "Implement url param encoding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3ODk5NDI3", "url": "https://github.com/TEAMMATES/teammates/pull/9925#pullrequestreview-347899427", "createdAt": "2020-01-24T11:37:54Z", "commit": {"oid": "74f969ff7067c08a0793bf68fd6dbf53775c1325"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMTozNzo1NFrOFhbKVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMTo0MTo1OFrOFhbPwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU5MjM0Mw==", "bodyText": "Is there a reason why this is done using encodeURIComponent instead of this.navigationService.navigateByURLWithParamEncoding?", "url": "https://github.com/TEAMMATES/teammates/pull/9925#discussion_r370592343", "createdAt": "2020-01-24T11:37:54Z", "author": {"login": "joanneong"}, "path": "src/web/app/pages-instructor/instructor-session-base-page.component.ts", "diffHunk": "@@ -201,16 +205,19 @@ export abstract class InstructorSessionBasePageComponent {\n    * Submits the feedback session as instructor.\n    */\n   submitSessionAsInstructor(model: SessionsTableRowModel): void {\n-    this.router.navigateByUrl('/web/instructor/sessions/submission'\n-        + `?courseid=${model.feedbackSession.courseId}&fsname=${model.feedbackSession.feedbackSessionName}`);\n+    this.navigationService.navigateByURLWithParamEncoding(\n+        this.router,\n+        '/web/instructor/sessions/submission',\n+        { courseid: model.feedbackSession.courseId, fsname: model.feedbackSession.feedbackSessionName });\n   }\n \n   /**\n    * Views the result of a feedback session.\n    */\n   viewSessionResult(model: SessionsTableRowModel): void {\n     this.router.navigateByUrl('/web/instructor/sessions/result'\n-        + `?courseid=${model.feedbackSession.courseId}&fsname=${model.feedbackSession.feedbackSessionName}`);\n+        + `?courseid=${model.feedbackSession.courseId}`\n+        + `&fsname=${encodeURIComponent(model.feedbackSession.feedbackSessionName)}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74f969ff7067c08a0793bf68fd6dbf53775c1325"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU5MzczMA==", "bodyText": "Small grammatical error: should be an encoded param string rather than a encoded param string.", "url": "https://github.com/TEAMMATES/teammates/pull/9925#discussion_r370593730", "createdAt": "2020-01-24T11:41:58Z", "author": {"login": "joanneong"}, "path": "src/web/services/navigation.service.spec.ts", "diffHunk": "@@ -14,4 +14,9 @@ describe('NavigationService', () => {\n     const service: NavigationService = TestBed.get(NavigationService);\n     expect(service).toBeTruthy();\n   });\n+\n+  it('should return a encoded param string upon calling encodeParams', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74f969ff7067c08a0793bf68fd6dbf53775c1325"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4Mzc1MzE5", "url": "https://github.com/TEAMMATES/teammates/pull/9925#pullrequestreview-348375319", "createdAt": "2020-01-26T12:11:10Z", "commit": {"oid": "68e133402e5c26f750530106003ec135ad46dc0b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68e133402e5c26f750530106003ec135ad46dc0b", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/68e133402e5c26f750530106003ec135ad46dc0b", "committedDate": "2020-01-26T04:19:05Z", "message": "Fix comments"}, "afterCommit": {"oid": "3e08b58c1df6a69adab2f49444f83418b22e6d5f", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3e08b58c1df6a69adab2f49444f83418b22e6d5f", "committedDate": "2020-01-26T12:34:52Z", "message": "Fix comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMjg2NTEz", "url": "https://github.com/TEAMMATES/teammates/pull/9925#pullrequestreview-352286513", "createdAt": "2020-02-03T14:20:42Z", "commit": {"oid": "3e08b58c1df6a69adab2f49444f83418b22e6d5f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDoyMDo0MlrOFky7hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNDoyMDo0MlrOFky7hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEyNzQ5Mg==", "bodyText": "WithParamEncoding should not be part of the name, as it kind of suggests that \"param encoding\" is some kind of isolated case. The fact is, param encoding should be expected especially when any kind of user input is involved.\nWould suggest to combine this with the previous method and set {} to be the default value for params.", "url": "https://github.com/TEAMMATES/teammates/pull/9925#discussion_r374127492", "createdAt": "2020-02-03T14:20:42Z", "author": {"login": "wkurniawan07"}, "path": "src/web/services/navigation.service.ts", "diffHunk": "@@ -53,4 +74,11 @@ export class NavigationService {\n     }\n     window.open(url.toString());\n   }\n+\n+  /**\n+   * Opens a new browser window with URL Param encoding\n+   */\n+  openNewWindowWithParamEncoding(urlWithoutParams: string, params: {[key: string]: string}): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e08b58c1df6a69adab2f49444f83418b22e6d5f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de0c9efe7228c734eda63e3cd5e05022e7317fba", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/de0c9efe7228c734eda63e3cd5e05022e7317fba", "committedDate": "2020-02-04T08:07:46Z", "message": "Implement url param encoding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "722ccc8bbcce4930612294a1ebf2179156729a1c", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/722ccc8bbcce4930612294a1ebf2179156729a1c", "committedDate": "2020-02-04T08:07:46Z", "message": "Fix comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25401aa01c4d3fe8dd52ec083997869339738b72", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/25401aa01c4d3fe8dd52ec083997869339738b72", "committedDate": "2020-02-04T08:07:46Z", "message": "Remove openNewWindowWithParamEncoding method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e08b58c1df6a69adab2f49444f83418b22e6d5f", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3e08b58c1df6a69adab2f49444f83418b22e6d5f", "committedDate": "2020-01-26T12:34:52Z", "message": "Fix comments"}, "afterCommit": {"oid": "25401aa01c4d3fe8dd52ec083997869339738b72", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/25401aa01c4d3fe8dd52ec083997869339738b72", "committedDate": "2020-02-04T08:07:46Z", "message": "Remove openNewWindowWithParamEncoding method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3be0f0cca3554441b97cc497cc23e71ad0bdbb", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1d3be0f0cca3554441b97cc497cc23e71ad0bdbb", "committedDate": "2020-02-04T08:37:59Z", "message": "Remove navigateWithSuccessMessageWithParamEncoding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1ODM3MTA1", "url": "https://github.com/TEAMMATES/teammates/pull/9925#pullrequestreview-365837105", "createdAt": "2020-02-27T17:06:05Z", "commit": {"oid": "1d3be0f0cca3554441b97cc497cc23e71ad0bdbb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cec596cb8a21bed2de413ef66de8770a0e02abc3", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/cec596cb8a21bed2de413ef66de8770a0e02abc3", "committedDate": "2020-02-28T02:48:14Z", "message": "Merge branch 'master' into fix/session-name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f090cb54098a53eaf9e18a7613ba5946370ea768", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f090cb54098a53eaf9e18a7613ba5946370ea768", "committedDate": "2020-02-28T06:41:49Z", "message": "Merge branch 'master' into fix/session-name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4420, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}