{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2ODg3NzE1", "number": 10472, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxODo1NFrOESPTQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTo1NDoxMVrOES4Prw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTYwNTEzOnYy", "diffSide": "RIGHT", "path": "src/web/app/user-join-page.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxODo1NFrOG3T81g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxODo1NFrOG3T81g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTczNA==", "bodyText": "You can just put this into the the template html.", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460651734", "createdAt": "2020-07-27T05:18:54Z", "author": {"login": "xpdavid"}, "path": "src/web/app/user-join-page.component.ts", "diffHunk": "@@ -18,6 +18,8 @@ import { ErrorMessageOutput } from './error-message-output';\n })\n export class UserJoinPageComponent implements OnInit {\n \n+  link: string = '/web/front/request';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b9cb408a10604b9c55514c519025633295a53ba"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTgwNjUyOnYy", "diffSide": "RIGHT", "path": "src/web/app/user-join-page.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNjo1NDo0OFrOG3Vx6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzo1NzoyMVrOG3XkfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTcwNg==", "bodyText": "Requesting a new join link is not the same as requesting a new account; the latter creates a duplicate sample course.", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460681706", "createdAt": "2020-07-27T06:54:48Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/user-join-page.component.html", "diffHunk": "@@ -12,7 +12,8 @@ <h3>Not logged in</h3>\n       <h3>Invalid course join link</h3>\n     </div>\n     <div class=\"card-body\" *ngIf=\"!validUrl\">\n-      You are using an invalid join link. Please <a [routerLink]=\"link\">request for a new join link</a> or check that you copied the URL entirely.\n+      You are using an invalid join link. Please <a routerLink=\"/web/front/request\">request for a new join link</a>\n+      or check that you copied the URL entirely.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b53fdfec676532d4d9147f6218017f55576a9c7d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxMTAzNw==", "bodyText": "So should I remove the redirection to the request page then? I'll create an issue separately for regenerating join links", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460711037", "createdAt": "2020-07-27T07:57:21Z", "author": {"login": "madanalogy"}, "path": "src/web/app/user-join-page.component.html", "diffHunk": "@@ -12,7 +12,8 @@ <h3>Not logged in</h3>\n       <h3>Invalid course join link</h3>\n     </div>\n     <div class=\"card-body\" *ngIf=\"!validUrl\">\n-      You are using an invalid join link. Please <a [routerLink]=\"link\">request for a new join link</a> or check that you copied the URL entirely.\n+      You are using an invalid join link. Please <a routerLink=\"/web/front/request\">request for a new join link</a>\n+      or check that you copied the URL entirely.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTcwNg=="}, "originalCommit": {"oid": "b53fdfec676532d4d9147f6218017f55576a9c7d"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTgwNzQ1OnYy", "diffSide": "RIGHT", "path": "src/web/app/app.module.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNjo1NTowMlrOG3VyZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNjo1NTowMlrOG3VyZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTgyOA==", "bodyText": "Not necessary; this can be removed.", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460681828", "createdAt": "2020-07-27T06:55:02Z", "author": {"login": "wkurniawan07"}, "path": "src/web/app/app.module.ts", "diffHunk": "@@ -84,6 +84,12 @@ const routes: Routes = [\n       },\n     ],\n   },\n+  {\n+    // This path is added to support redirection of v6 join link to v7\n+    path: 'page/instructorCourseJoin',\n+    pathMatch: 'full',\n+    redirectTo: 'web/join',\n+  },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b53fdfec676532d4d9147f6218017f55576a9c7d"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjMxMzQzOnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/ui/webapi/action/LegacyUrlMapper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTo1NDoxMVrOG4TXgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTo1NDoxMVrOG4TXgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY5MDc1NQ==", "bodyText": "Not necessary. This entire class will be removed in the first place once V6 is decommissioned.", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r461690755", "createdAt": "2020-07-28T15:54:11Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/LegacyUrlMapper.java", "diffHunk": "@@ -31,10 +33,17 @@ public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOExc\n         switch (uri) {\n         case Const.LegacyURIs.INSTRUCTOR_COURSE_JOIN:\n             key = req.getParameter(Const.ParamsNames.REGKEY);\n-            redirectUrl = Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)\n+            String institute = req.getParameter(Const.ParamsNames.INSTRUCTOR_INSTITUTION);\n+            AppUrl newUrl = Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)\n                     .withRegistrationKey(key)\n-                    .withParam(Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR)\n-                    .toString();\n+                    .withParam(Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR);\n+            // TODO: Remove the following code block for mac generation once v6 join links stop being supported", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9e134d3fc75f388b92601f57855bd43f29c6234"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3705, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}