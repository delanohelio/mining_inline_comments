{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjQwMzg3", "number": 9979, "title": "[#9946] Migration to new RESTful search endpoints - Students", "bodyText": "Part of #9946.\nThis PR implements the new student endpoint necessary for the search migration in accordance with RESTful principles. The response object is listed below, along with a listing of which of its keys is relevant to the old response objects.\nOld endpoints\nAdmin search\nGET /accounts/search?searchkey=john\n\n  Response\n{\n  \"students\": [\n    {\n      \"section\": \"Tutorial Group 2\",\n      \"team\": \"Team 2\",\n      \"comments\": \"This student's name is John Dorian\",\n      \"recordsPageLink\": \"http://localhost:4200/web/instructor/students/records?courseid=teammates.instructor.uni-demo&studentemail=teammates.instructor%40university.edu&user=test%40example.com\",\n      \"openSessions\": {\n        \"Second team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Thu, 02 Apr 2037, 11:59 PM SGT]\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=Second+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"notOpenSessions\": {\n        \"Session with different question types [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Currently Not Open)\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=Session+with+different+question+types&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\",\n        \"First team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Currently Not Open)\": \"http://localhost:4200/web/sessions/submission?courseid=teammates.instructor.uni-demo&fsname=First+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"publishedSessions\": {\n        \"First team feedback session [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Published)\": \"http://localhost:4200/web/sessions/result?courseid=teammates.instructor.uni-demo&fsname=First+team+feedback+session&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\",\n        \"Session with different question types [Sun, 01 Apr 2012, 11:59 PM SGT - Mon, 02 Apr 2012, 11:59 PM SGT] (Published)\": \"http://localhost:4200/web/sessions/result?courseid=teammates.instructor.uni-demo&fsname=Session+with+different+question+types&key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu\"\n      },\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"googleId\": \"test@example.com\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"courseName\": \"Sample Course 101\",\n      \"institute\": \"National University of Singapore\",\n      \"courseJoinLink\": \"http://localhost:4200/web/join?key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DCBCA0B3D9F369EE709B81C049B9203CC&studentemail=teammates.instructor%40university.edu&courseid=teammates.instructor.uni-demo&entitytype=student\",\n      \"homePageLink\": \"/web/student/home?user=test%40example.com\",\n      \"manageAccountLink\": \"/web/admin/accounts?instructorid=test%40example.com\",\n      \"showLinks\": false\n    }\n  ],\n  \"instructors\": [\n    {\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"googleId\": \"test@example.com\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"courseName\": \"Sample Course 101\",\n      \"institute\": \"National University of Singapore\",\n      \"courseJoinLink\": \"http://localhost:4200/web/join?key=10B463A2220C26C15D6E7031721F92EC38324BB88017679A58CBD5208A912F6195D298063208653CF3FE63F0C3F874DB3474F977C7CF09D22ED2932FA3B9CB3DAD88776C661F6D51601691F4CE3223F0&entitytype=instructor\",\n      \"homePageLink\": \"http://localhost:4200/web/instructor/home?user=test%40example.com\",\n      \"manageAccountLink\": \"/web/admin/accounts?instructorid=test%40example.com\",\n      \"showLinks\": false\n    }\n  ],\n  \"requestId\": \"5e65f2880002a3c8cb7a1d77\"\n}\n\nInstructor search\nGET /studentsAndSessionData/search?searchkey=john&searchstudents=true&searchfeedbacksessiondata=true\n\n  Response\n{\n  \"searchStudentsTables\": [\n    {\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"sections\": [\n        {\n          \"sectionName\": \"Tutorial Group 2\",\n          \"isAllowedToViewStudentInSection\": true,\n          \"isAllowedToModifyStudent\": true,\n          \"students\": [\n            {\n              \"name\": \"John Dorian\",\n              \"email\": \"teammates.instructor@university.edu\",\n              \"status\": \"Joined\",\n              \"team\": \"Team 2\"\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  \"requestId\": \"5e65f2ba000d0fc054ceb912\"\n}\n\nNew student endpoint\nGET /search/students?searchkey=john\nAs admin\n\n  Response\n{\n  \"students\": [\n    {\n      \"team\": \"Team 2\",\n      \"section\": \"Tutorial Group 2\",\n      \"comments\": \"This student's name is John Dorian\",\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"joinState\": \"JOINED\",\n      \"googleId\": \"test@example.com\"\n    }\n  ],\n  \"requestId\": \"5e65f2d3000528509109c85a\"\n}\n\nRelevant keys: email, courseId, name, comments, team, section, googleId\nAs instructor\n\n  Response\n{\n  \"students\": [\n    {\n      \"team\": \"Team 2\",\n      \"section\": \"Tutorial Group 2\",\n      \"name\": \"John Dorian\",\n      \"email\": \"teammates.instructor@university.edu\",\n      \"courseId\": \"teammates.instructor.uni-demo\",\n      \"joinState\": \"NOT_JOINED\"\n    }\n  ],\n  \"requestId\": \"5e65f34f0003fb88667be543\"\n}\n\nRelevant keys: email, courseId, name, team, section", "createdAt": "2020-03-11T11:43:16Z", "url": "https://github.com/TEAMMATES/teammates/pull/9979", "merged": true, "mergeCommit": {"oid": "8ce800938faed1da40baf7bea2d9795debfb3b80"}, "closed": true, "closedAt": "2020-03-17T05:08:53Z", "author": {"login": "dvrylc"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcN2QPxgBqjMxMzAzMTcwMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcObYXEABqjMxMzU4MzI1Mzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef936feb26919f195a51ff0fdb3e49d60109d581", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ef936feb26919f195a51ff0fdb3e49d60109d581", "committedDate": "2020-03-15T07:09:05Z", "message": "Improve information hiding logic"}, "afterCommit": {"oid": "56e95de33a96cd6cd4f0abd6859499c69749f94d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/56e95de33a96cd6cd4f0abd6859499c69749f94d", "committedDate": "2020-03-15T09:34:34Z", "message": "Improve information hiding logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NDA3Mzk0", "url": "https://github.com/TEAMMATES/teammates/pull/9979#pullrequestreview-375407394", "createdAt": "2020-03-16T16:54:15Z", "commit": {"oid": "56e95de33a96cd6cd4f0abd6859499c69749f94d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo1NDoxNVrOF29IUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo1NDoxNVrOF29IUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2ODk3OQ==", "bodyText": "SEARCH_STUDENTS?", "url": "https://github.com/TEAMMATES/teammates/pull/9979#discussion_r393168979", "createdAt": "2020-03-16T16:54:15Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/util/Const.java", "diffHunk": "@@ -763,6 +763,7 @@ private Const() {\n         public static final String SESSION_STATS = \"/session/stats\";\n         public static final String SESSION_SUBMITTED_GIVER_SET = \"/session/submitted/giverset\";\n         public static final String SESSIONS = \"/sessions\";\n+        public static final String STUDENTS_SEARCH = \"/search/students\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56e95de33a96cd6cd4f0abd6859499c69749f94d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b8a9ca1e57958db0d9de3ff22f4dcd6f58f74ff", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2b8a9ca1e57958db0d9de3ff22f4dcd6f58f74ff", "committedDate": "2020-03-17T04:39:50Z", "message": "Implement search student endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e14ec6b885e90d7090bd26770ad6040fd18cb82a", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e14ec6b885e90d7090bd26770ad6040fd18cb82a", "committedDate": "2020-03-17T04:39:50Z", "message": "Implement instructors search endpoint (#2)\n\n* Add instructor search endpoint\r\n\r\n* Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd7fc577bf29dc77861b244c319ea98d38058399", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bd7fc577bf29dc77861b244c319ea98d38058399", "committedDate": "2020-03-17T04:39:50Z", "message": "Switch from SearchInstructorsData to InstructorsData (#6)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f9ed79712d460a16cd6ba998dbdf1f0fccc126d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8f9ed79712d460a16cd6ba998dbdf1f0fccc126d", "committedDate": "2020-03-17T04:39:50Z", "message": "Switch from SearchStudentsData to StudentsData (#7)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00a0ca2f92a56e8768747693fc18ce3c2c342637", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/00a0ca2f92a56e8768747693fc18ce3c2c342637", "committedDate": "2020-03-17T04:39:50Z", "message": "Allow travis to build search migration branch (#5)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34897df06db75eab44e58314ab3d72e1db47468e", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/34897df06db75eab44e58314ab3d72e1db47468e", "committedDate": "2020-03-17T04:39:50Z", "message": "Implement sessions search endpoint (#3)\n\n* Add sessions search endpoint\r\n\r\n* Add tests\r\n\r\n* Fix lint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d20d844de8ac5670966e05ef03daa4993ac09083", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d20d844de8ac5670966e05ef03daa4993ac09083", "committedDate": "2020-03-17T04:39:50Z", "message": "Add course endpoint (#8)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a912cea673b7deebfca63c063a8f6f2167394d54", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a912cea673b7deebfca63c063a8f6f2167394d54", "committedDate": "2020-03-17T04:39:50Z", "message": "Implement Links Endpoint (#4)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7ad6c648d705262731fd60da3c572a93c8afd2d", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e7ad6c648d705262731fd60da3c572a93c8afd2d", "committedDate": "2020-03-17T04:39:50Z", "message": "Add googleId  field to StudentData (#9)\n\n* Add googleid to studentdata\r\n\r\n* Add nullable to student data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1944e959685c7cbe5a371cbe98f52d6ca306677d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1944e959685c7cbe5a371cbe98f52d6ca306677d", "committedDate": "2020-03-17T04:39:50Z", "message": "Improve search response classes (#12)\n\n* Improve students endpoint classes\r\n\r\n* Move joinState attribute from common to student\r\n\r\n* Improve instructors endpoint classes\r\n\r\n* Revert \"Add googleId  field to StudentData (#9)\"\r\n\r\nThis reverts commit b5d46cabc092bf3bedc429ae1c771515bf149606.\r\n\r\n* Revert unnecessary InstructorData changes\r\n\r\n* Fix typo\r\n\r\n* Make joinState common\r\n\r\n* Make names sane again\r\n\r\n* Remove unused setters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6632a00d7d7ac9a213c9a0121e739ff1a19ac53", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a6632a00d7d7ac9a213c9a0121e739ff1a19ac53", "committedDate": "2020-03-17T04:39:50Z", "message": "Standardize search endpoints (#13)\n\n* Improve course endpoint class names\r\n\r\n* Improve links endpoint class names\r\n\r\n* Improve sessions endpoint class names\r\n\r\n* Standardize comments\r\n\r\n* Fix import order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f27b8d008aaa912f0f16be056d954c59b35ef789", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/f27b8d008aaa912f0f16be056d954c59b35ef789", "committedDate": "2020-03-17T04:39:50Z", "message": "Revert travis config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8239b500d9110dd06378acd780a77beac6987462", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8239b500d9110dd06378acd780a77beac6987462", "committedDate": "2020-03-17T04:39:50Z", "message": "Split PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "076c5d539b264be2a32a025999cd069b91d3dada", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/076c5d539b264be2a32a025999cd069b91d3dada", "committedDate": "2020-03-17T04:39:50Z", "message": "Revert to existing response classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d820354aa9e2de215fa476adc24bedcb2a49209b", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d820354aa9e2de215fa476adc24bedcb2a49209b", "committedDate": "2020-03-17T04:39:50Z", "message": "Allow some attributes to be optional"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9f27de2acf0c17f4d5d23cc01e6da8acaf8826d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/a9f27de2acf0c17f4d5d23cc01e6da8acaf8826d", "committedDate": "2020-03-17T04:39:50Z", "message": "Improve information hiding logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3177ce481f07cccd2fbcfe1c06d984b5ca26f84d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3177ce481f07cccd2fbcfe1c06d984b5ca26f84d", "committedDate": "2020-03-17T04:39:50Z", "message": "Improve resource name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56e95de33a96cd6cd4f0abd6859499c69749f94d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/56e95de33a96cd6cd4f0abd6859499c69749f94d", "committedDate": "2020-03-15T09:34:34Z", "message": "Improve information hiding logic"}, "afterCommit": {"oid": "3177ce481f07cccd2fbcfe1c06d984b5ca26f84d", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3177ce481f07cccd2fbcfe1c06d984b5ca26f84d", "committedDate": "2020-03-17T04:39:50Z", "message": "Improve resource name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4378, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}