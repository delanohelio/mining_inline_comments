{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMjk1NzYw", "number": 10699, "title": "[#10645] [#10688] Fix download result function and user links in admin page", "bodyText": "Fixes #10688\nSecond part of #10645", "createdAt": "2020-09-07T11:12:54Z", "url": "https://github.com/TEAMMATES/teammates/pull/10699", "merged": true, "mergeCommit": {"oid": "164b161e398ea922dce2b21772976f57a934627d"}, "closed": true, "closedAt": "2020-09-08T15:37:09Z", "author": {"login": "wkurniawan07"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGheqCABqjM3MzY3NzAyODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGihnMAFqTQ4MzUzMzc5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94d13c4a9c7f05f2657ba65c05e385b7bdecd5d5", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/94d13c4a9c7f05f2657ba65c05e385b7bdecd5d5", "committedDate": "2020-09-07T11:11:32Z", "message": "Use window.location.origin as base URL"}, "afterCommit": {"oid": "1c59500b4c00d447211dcb8570a6952f52f3634a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1c59500b4c00d447211dcb8570a6952f52f3634a", "committedDate": "2020-09-07T11:40:48Z", "message": "Use window.location.origin as base URL"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c59500b4c00d447211dcb8570a6952f52f3634a", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1c59500b4c00d447211dcb8570a6952f52f3634a", "committedDate": "2020-09-07T11:40:48Z", "message": "Use window.location.origin as base URL"}, "afterCommit": {"oid": "02dfd86c93231517029d0bde4840593bc62efba7", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/02dfd86c93231517029d0bde4840593bc62efba7", "committedDate": "2020-09-07T12:02:35Z", "message": "Use window.location.origin as base URL"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02dfd86c93231517029d0bde4840593bc62efba7", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/02dfd86c93231517029d0bde4840593bc62efba7", "committedDate": "2020-09-07T12:02:35Z", "message": "Use window.location.origin as base URL"}, "afterCommit": {"oid": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "committedDate": "2020-09-07T12:09:00Z", "message": "Use window.location.origin as base URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTI0MDAx", "url": "https://github.com/TEAMMATES/teammates/pull/10699#pullrequestreview-483524001", "createdAt": "2020-09-07T12:38:53Z", "commit": {"oid": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjozODo1M1rOHN94EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjo0MjoyM1rOHN9_KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQwNzMxMg==", "bodyText": "I don't see why this needed to be split to multi line", "url": "https://github.com/TEAMMATES/teammates/pull/10699#discussion_r484407312", "createdAt": "2020-09-07T12:38:53Z", "author": {"login": "madanalogy"}, "path": "src/web/services/search.service.spec.ts", "diffHunk": "@@ -315,19 +315,24 @@ describe('SearchService', () => {\n       { feedbackSessions: mockSessions },\n       mockPrivileges,\n     );\n-    // Not using snapshots because of issues with time zones\n     expect(result.comments).toBe(\"This student's name is Alice Betsy\");\n     expect(result.courseId).toBe('dog.gma-demo');\n-    expect(result.courseJoinLink).toBe('http://localhost:4200/web/join?key' +\n+    expect(result.courseJoinLink).toBe(`${window.location.origin}/web/join?key` +\n       '=keyheehee&studentemail=alice.b.tmms%40gmail.tmt&courseid=dog.gma-demo&entitytype=student');\n     expect(result.courseName).toBe('Sample Course 101');\n     expect(result.email).toBe('alice.b.tmms@gmail.tmt');\n-    expect(result.manageAccountLink).toBe('/web/admin/accounts?instructorid=alice.b.tmms.sampleData');\n+    expect(result.manageAccountLink).toBe('/web/admin/accounts'\n+        + '?instructorid=alice.b.tmms.sampleData');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQwOTEyOA==", "bodyText": "Might as well standardise to use Collections since I'm assuming it's meant to be immutable\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            allQuestions = new ArrayList<>();\n          \n          \n            \n                            allQuestions = Collections.emptyList();", "url": "https://github.com/TEAMMATES/teammates/pull/10699#discussion_r484409128", "createdAt": "2020-09-07T12:42:23Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "diffHunk": "@@ -645,7 +645,12 @@ public SessionResultsBundle getSessionResultsForUser(\n         if (questionId == null) {\n             allQuestions = fqLogic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);\n         } else {\n-            allQuestions = Collections.singletonList(fqLogic.getFeedbackQuestion(questionId));\n+            FeedbackQuestionAttributes fqa = fqLogic.getFeedbackQuestion(questionId);\n+            if (fqa == null) {\n+                allQuestions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dba79080bc781e9552f2da05bc756b64dd00f69"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "094355fd5ba4ecc3d0af83e829261f306b27bfae", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/094355fd5ba4ecc3d0af83e829261f306b27bfae", "committedDate": "2020-09-07T12:47:49Z", "message": "Fix download session result function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "committedDate": "2020-09-07T12:47:49Z", "message": "Use window.location.origin as base URL"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "committedDate": "2020-09-07T12:09:00Z", "message": "Use window.location.origin as base URL"}, "afterCommit": {"oid": "1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "committedDate": "2020-09-07T12:47:49Z", "message": "Use window.location.origin as base URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTMzNzk5", "url": "https://github.com/TEAMMATES/teammates/pull/10699#pullrequestreview-483533799", "createdAt": "2020-09-07T12:54:16Z", "commit": {"oid": "1abbb71d0e06ba9899aeabfc1ebefaed639a14c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4262, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}