{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5Mjc4MzU4", "number": 9901, "title": "[#9898] All records page does not show profile picture", "bodyText": "Fixes #9898\nOutline of Solution\nThe bug was because templating strings in ES6 are not multiline, so the url string had a lot of %20 space characters. A picture of the console is attached here for reference. I concatenated the multiline string using the plus operator to fix.", "createdAt": "2020-01-05T07:19:21Z", "url": "https://github.com/TEAMMATES/teammates/pull/9901", "merged": true, "mergeCommit": {"oid": "4955ddc8eb3450c196ea05a88669db891a0f65fc"}, "closed": true, "closedAt": "2020-01-15T06:28:34Z", "author": {"login": "hcwong"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3SE5MAH2gAyMzU5Mjc4MzU4OjdjNzA3OTMzYjAwZWJjODViNjUwZDk2MDVhY2FjYzI2MzA5Yzk2ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6fLySAH2gAyMzU5Mjc4MzU4OjI0NWUyOWMxYTIxNzFhMjM3NTZhZDZhMGFkNjlkMjEzZWI4YTA3OWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7c707933b00ebc85b650d9605acacc26309c9688", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7c707933b00ebc85b650d9605acacc26309c9688", "committedDate": "2020-01-05T07:04:24Z", "message": "Fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2819dc17cf089371dc34be2d8db04b00a2cbc46", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c2819dc17cf089371dc34be2d8db04b00a2cbc46", "committedDate": "2020-01-05T07:15:49Z", "message": "Fix lint error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDE4MjEw", "url": "https://github.com/TEAMMATES/teammates/pull/9901#pullrequestreview-338418210", "createdAt": "2020-01-05T19:54:20Z", "commit": {"oid": "c2819dc17cf089371dc34be2d8db04b00a2cbc46"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/04348a371c4d0bfb61f40a4f762de8ce576483ce", "committedDate": "2020-01-06T06:59:13Z", "message": "Add snapshot"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDk3MjU3", "url": "https://github.com/TEAMMATES/teammates/pull/9901#pullrequestreview-338497257", "createdAt": "2020-01-06T07:21:57Z", "commit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzoyMTo1N1rOFaW3mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwNzoyMjo1MlrOFaW4fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MTk3Nw==", "bodyText": "Looks like snapshot testing does not capture full value.", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363181977", "createdAt": "2020-01-06T07:21:57Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/__snapshots__/instructor-student-records-page.component.spec.ts.snap", "diffHunk": "@@ -0,0 +1,29 @@\n+// Jest Snapshot v1, https://goo.gl/fbAQLP\n+\n+exports[`InstructorStudentRecordsPageComponent should snap with default fields 1`] = `\n+<tm-instructor-student-records-page\n+  courseId=\"undefined\"\n+  photoUrl={[Function String]}\n+  route={[Function ActivatedRoute]}\n+  sessions={[Function Array]}\n+  statusMessageService={[Function StatusMessageService]}\n+  studentEmail=\"undefined\"\n+  studentProfile={[Function Object]}\n+  studentProfileService={[Function StudentProfileService]}\n+>\n+  <h1>\n+    's Records\n+    <small\n+      class=\"text-muted\"\n+    >\n+       - \n+    </small>\n+  </h1><tm-student-profile\n+    ng-reflect-photo-url=\"http://localhost:8080/webapi/s\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MjIwNg==", "bodyText": "We can keep the snapshot. In addition,\nI think now you can\n\ninject a fake profile data\nassert the url match your expection", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363182206", "createdAt": "2020-01-06T07:22:52Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,8 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04348a371c4d0bfb61f40a4f762de8ce576483ce"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c54e7a2de8995382d0fe746cedc68db4734e471a", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c54e7a2de8995382d0fe746cedc68db4734e471a", "committedDate": "2020-01-07T09:59:11Z", "message": "add assert statement for url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ed132048644c3baf131b82267bee605a9630e9f8", "committedDate": "2020-01-07T14:36:12Z", "message": "Fix bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDMyMjY3", "url": "https://github.com/TEAMMATES/teammates/pull/9901#pullrequestreview-339432267", "createdAt": "2020-01-07T18:47:56Z", "commit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0Nzo1NlrOFbCYVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0Nzo1NlrOFbCYVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NDg2OQ==", "bodyText": "Great! You are on the right track. The only thing left is to inject real profile into the component. You can search on existing code (e.g. other test files) or take a look at student-course-details-page.component.spec.ts to get an idea of how to assign value to component during testing.", "url": "https://github.com/TEAMMATES/teammates/pull/9901#discussion_r363894869", "createdAt": "2020-01-07T18:47:56Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.spec.ts", "diffHunk": "@@ -50,4 +50,13 @@ describe('InstructorStudentRecordsPageComponent', () => {\n   it('should create', () => {\n     expect(component).toBeTruthy();\n   });\n+\n+  it('should snap with default fields', () => {\n+    expect(fixture).toMatchSnapshot();\n+  });\n+\n+  it('should output a correctly formatted url string', () => {\n+    expect(component.photoUrl)\n+      .toEqual('http://localhost:8080/webapi/student/profilePic?courseid=undefined&studentemail=undefined');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed132048644c3baf131b82267bee605a9630e9f8"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b47c7c0cccb1a33c8111289f989285673049285a", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b47c7c0cccb1a33c8111289f989285673049285a", "committedDate": "2020-01-08T06:18:22Z", "message": "Add populated snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "644d13e3fda3892d98d2f4957c2e73f4450733c9", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/644d13e3fda3892d98d2f4957c2e73f4450733c9", "committedDate": "2020-01-09T03:58:45Z", "message": "Fix test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eac8949c31050077dee5da64935fb2890ea29538", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/eac8949c31050077dee5da64935fb2890ea29538", "committedDate": "2020-01-09T03:55:06Z", "message": "Fix test"}, "afterCommit": {"oid": "644d13e3fda3892d98d2f4957c2e73f4450733c9", "author": {"user": {"login": "hcwong", "name": "Joshua Wong"}}, "url": "https://github.com/TEAMMATES/teammates/commit/644d13e3fda3892d98d2f4957c2e73f4450733c9", "committedDate": "2020-01-09T03:58:45Z", "message": "Fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMjc5MDYy", "url": "https://github.com/TEAMMATES/teammates/pull/9901#pullrequestreview-340279062", "createdAt": "2020-01-09T04:02:15Z", "commit": {"oid": "644d13e3fda3892d98d2f4957c2e73f4450733c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "245e29c1a2171a23756ad6a0ad69d213eb8a079a", "author": {"user": {"login": "xpdavid", "name": "Xiao Pu"}}, "url": "https://github.com/TEAMMATES/teammates/commit/245e29c1a2171a23756ad6a0ad69d213eb8a079a", "committedDate": "2020-01-15T06:02:28Z", "message": "Merge branch 'master' into fix/photo-not-uploaded"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4417, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}