{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMDA3NTU5", "number": 10266, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMzo1MDowNVrOEKWhSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMzo1MTo1NFrOEKWiOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjkwMTg2OnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/ui/webapi/action/DeleteStudentAction.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMzo1MDowNVrOGrV1eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMzo1MDowNVrOGrV1eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA5OTcwNg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448099706", "createdAt": "2020-07-01T03:50:05Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/ui/webapi/action/DeleteStudentAction.java", "diffHunk": "@@ -23,14 +23,14 @@ public void checkSpecificAccessControl() {\n             return;\n         }\n \n-        if (userInfo.isInstructor) {\n-            String courseId = getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);\n-            InstructorAttributes instructor = logic.getInstructorForGoogleId(courseId, userInfo.id);\n-            gateKeeper.verifyAccessible(\n-                    instructor, logic.getCourse(courseId), Const.ParamsNames.INSTRUCTOR_PERMISSION_MODIFY_STUDENT);\n-            return;\n+        if (!userInfo.isInstructor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjkwNDI0OnYy", "diffSide": "RIGHT", "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMzo1MTo1NFrOGrV28w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODowNDoxMFrOGrbQbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDA4Mw==", "bodyText": "Although admin is allowed here, it is actually meaningless as the execute() process need the corresponding instructor info.", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448100083", "createdAt": "2020-07-01T03:51:54Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "diffHunk": "@@ -20,8 +20,8 @@ protected AuthType getMinAuthLevel() {\n \n     @Override\n     public void checkSpecificAccessControl() {\n-        // Only instructors can search for comments\n-        if (!userInfo.isInstructor) {\n+        // Only instructors and admins can search for comments\n+        if (!userInfo.isInstructor && !userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDczMg==", "bodyText": "I just wanted to be consistent with student search actually since they\u2019re both accessed from the same page. Any issues if I change both to instructor only?", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448100732", "createdAt": "2020-07-01T03:55:13Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "diffHunk": "@@ -20,8 +20,8 @@ protected AuthType getMinAuthLevel() {\n \n     @Override\n     public void checkSpecificAccessControl() {\n-        // Only instructors can search for comments\n-        if (!userInfo.isInstructor) {\n+        // Only instructors and admins can search for comments\n+        if (!userInfo.isInstructor && !userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDA4Mw=="}, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMTAwMQ==", "bodyText": "Up to you. Just pass down the information to you. \ud83d\udc4d", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448101001", "createdAt": "2020-07-01T03:56:32Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "diffHunk": "@@ -20,8 +20,8 @@ protected AuthType getMinAuthLevel() {\n \n     @Override\n     public void checkSpecificAccessControl() {\n-        // Only instructors can search for comments\n-        if (!userInfo.isInstructor) {\n+        // Only instructors and admins can search for comments\n+        if (!userInfo.isInstructor && !userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDA4Mw=="}, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwNTYxNg==", "bodyText": "Those are not the same:\n\nSearch students can be accessed through both instructor search page (instructor access) and admin search page (admin access). In fact, depending on where the API is accessed from, the result needs to be different. I put this as one of UAT round 2 issues.\nSearch comments is only accessible from instructor search page and thus is only for instructor access.", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448105616", "createdAt": "2020-07-01T04:17:19Z", "author": {"login": "wkurniawan07"}, "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "diffHunk": "@@ -20,8 +20,8 @@ protected AuthType getMinAuthLevel() {\n \n     @Override\n     public void checkSpecificAccessControl() {\n-        // Only instructors can search for comments\n-        if (!userInfo.isInstructor) {\n+        // Only instructors and admins can search for comments\n+        if (!userInfo.isInstructor && !userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDA4Mw=="}, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4ODUyNQ==", "bodyText": "Alright, I'll revert this to the previous instructor only access then and update the access control comment", "url": "https://github.com/TEAMMATES/teammates/pull/10266#discussion_r448188525", "createdAt": "2020-07-01T08:04:10Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/ui/webapi/action/SearchCommentsAction.java", "diffHunk": "@@ -20,8 +20,8 @@ protected AuthType getMinAuthLevel() {\n \n     @Override\n     public void checkSpecificAccessControl() {\n-        // Only instructors can search for comments\n-        if (!userInfo.isInstructor) {\n+        // Only instructors and admins can search for comments\n+        if (!userInfo.isInstructor && !userInfo.isAdmin) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwMDA4Mw=="}, "originalCommit": {"oid": "d44add20486f2fcfa2a4031e42aaef3c6b376060"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3900, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}