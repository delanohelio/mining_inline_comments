{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NzMyNjc0", "number": 10820, "title": "[#9536] Fix Feedback Question E2E tests problems", "bodyText": "Part of #9536\nPR Checklist\n\nHaving the student key in the URL does not work well when multiple tests are run at once as we get unauthorized error when the current login and the key do not match.\n\nRemoved it and use a registered student instead\n\n\nSubmission page gets stuck on loading frequently.\n\nAdd one reload if stuck loading to make test more stable\n\n\nAdd some waits to help with timing issues", "createdAt": "2020-10-26T03:30:09Z", "url": "https://github.com/TEAMMATES/teammates/pull/10820", "merged": true, "mergeCommit": {"oid": "309b3dd06fecde4e9f2aa83ec5477d1bdac18478"}, "closed": true, "closedAt": "2020-11-01T05:01:20Z", "author": {"login": "jtankw3"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWLaYAAH2gAyNTA5NzMyNjc0OmIwMTgwNjcyMDVjMjhmZmJlOGY0MzI1MjY1Y2YzZTdiNjRmMzhlNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYIJtmAH2gAyNTA5NzMyNjc0OjMxM2ZmNGIwZTQyMjE5ZjllNzEyZGFkNGEzNjA3NDYxZjk5ZmYzNzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b018067205c28ffbe8f4325265cf3e7b64f38e6d", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b018067205c28ffbe8f4325265cf3e7b64f38e6d", "committedDate": "2020-10-26T03:01:20Z", "message": "Remove student key from submit page urls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2830b61a03c240b5e01e284dacf8c497d8f71108", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2830b61a03c240b5e01e284dacf8c497d8f71108", "committedDate": "2020-10-26T03:16:19Z", "message": "Add one reload if page is stuck loading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "809aea5001ee844cea9650464dccef62c1c6d942", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/809aea5001ee844cea9650464dccef62c1c6d942", "committedDate": "2020-10-26T03:16:41Z", "message": "Add waits to submit page object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35b1e17d964f0de9c334e11486be0384b9b7e280", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/35b1e17d964f0de9c334e11486be0384b9b7e280", "committedDate": "2020-10-26T03:51:14Z", "message": "Add wait for feedback edit page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NjYzNzUx", "url": "https://github.com/TEAMMATES/teammates/pull/10820#pullrequestreview-516663751", "createdAt": "2020-10-26T10:57:33Z", "commit": {"oid": "35b1e17d964f0de9c334e11486be0384b9b7e280"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMDo1NzozM1rOHoKX7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwMjoxODozMVrOHrkNcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg3NTA1NQ==", "bodyText": "I don't think this is the right place to put the reload. Although admittedly I'm also drawing a blank as for where to put it.", "url": "https://github.com/TEAMMATES/teammates/pull/10820#discussion_r511875055", "createdAt": "2020-10-26T10:57:33Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java", "diffHunk": "@@ -57,6 +57,7 @@ protected boolean containsExpectedPageContents() {\n         if (isElementPresent(By.className(\"modal-content\"))) {\n             waitForConfirmationModalAndClickOk();\n         }\n+        reloadPageIfStuckLoading();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35b1e17d964f0de9c334e11486be0384b9b7e280"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ0NDA4Mg==", "bodyText": "I think you'd agree that the time is ripe now to create a base class for all these Feedback*QuestionE2ETest.", "url": "https://github.com/TEAMMATES/teammates/pull/10820#discussion_r515444082", "createdAt": "2020-10-31T02:18:31Z", "author": {"login": "wkurniawan07"}, "path": "src/e2e/java/teammates/e2e/cases/e2e/FeedbackConstSumOptionQuestionE2ETest.java", "diffHunk": "@@ -100,10 +99,8 @@ private void testSubmitPage() {\n         AppUrl url = createUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)\n                 .withUserId(student.googleId)\n                 .withCourseId(student.course)\n-                .withSessionName(feedbackSession.getFeedbackSessionName())\n-                .withRegistrationKey(getKeyForStudent(student));\n+                .withSessionName(feedbackSession.getFeedbackSessionName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35b1e17d964f0de9c334e11486be0384b9b7e280"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d245278fbb05fe6efec488e5e3edf8359ac39e7d", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d245278fbb05fe6efec488e5e3edf8359ac39e7d", "committedDate": "2020-10-31T08:21:50Z", "message": "Add BaseFeedbackQuestionE2ETest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc9805957a7b2b813278e4db3a175cfa5ae8e4b8", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bc9805957a7b2b813278e4db3a175cfa5ae8e4b8", "committedDate": "2020-10-31T08:26:00Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into flaky-submit-page-e2e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5560125aaa5771492dc1be416146023c7119b764", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5560125aaa5771492dc1be416146023c7119b764", "committedDate": "2020-10-31T08:26:20Z", "message": "Exclude all base classes from TestNgXmlTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a77ceb7cd25a791d952deca321b1c2fd5bf34c9", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1a77ceb7cd25a791d952deca321b1c2fd5bf34c9", "committedDate": "2020-10-31T07:54:22Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into flaky-submit-page-e2e"}, "afterCommit": {"oid": "5560125aaa5771492dc1be416146023c7119b764", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5560125aaa5771492dc1be416146023c7119b764", "committedDate": "2020-10-31T08:26:20Z", "message": "Exclude all base classes from TestNgXmlTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f66b38e538f351f124ba3615ea77b1692893a50", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5f66b38e538f351f124ba3615ea77b1692893a50", "committedDate": "2020-10-31T08:57:30Z", "message": "Fix lint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "313ff4b0e42219f9e712dad4a3607461f99ff377", "author": {"user": {"login": "jtankw3", "name": "Tan Kian Wei Jason"}}, "url": "https://github.com/TEAMMATES/teammates/commit/313ff4b0e42219f9e712dad4a3607461f99ff377", "committedDate": "2020-11-01T04:21:16Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into flaky-submit-page-e2e\n\n# Conflicts:\n#\tsrc/e2e/java/teammates/e2e/cases/BaseFeedbackQuestionE2ETest.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4210, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}