{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NjY1NTYw", "number": 9951, "title": "[#9952] Standardize Student Api Endpoints", "bodyText": "Fixes #9952\nOutline of Solution\n\nRemove HttpRequestService dependency from Students module\nCreate generateApiEndpoints gradle task\nCreated InstructorService and NationalitiesService\nWrote tests for InstructorService, CourseService and NationalitiesService", "createdAt": "2020-02-13T04:39:42Z", "url": "https://github.com/TEAMMATES/teammates/pull/9951", "merged": true, "mergeCommit": {"oid": "004e6a0e948941aef0a5fa0c9c08a4bb350266f9"}, "closed": true, "closedAt": "2020-02-17T04:33:13Z", "author": {"login": "tiuweehan"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDzfChgFqTM1Nzk1MTMyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFFrHDgFqTM1OTQ4NDA0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3OTUxMzIy", "url": "https://github.com/TEAMMATES/teammates/pull/9951#pullrequestreview-357951322", "createdAt": "2020-02-13T04:44:08Z", "commit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwNDo0NDowOFrOFpG38A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwNDo0NjozNVrOFpG6Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY0ODU2MA==", "bodyText": "Looks like you are not using api-endpoints.ts anywhere?", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r378648560", "createdAt": "2020-02-13T04:44:08Z", "author": {"login": "xpdavid"}, "path": "build.gradle", "diffHunk": "@@ -162,6 +162,13 @@ task generateApiRequestFormat(type: cz.habarta.typescript.generator.gradle.Gener\n     outputFile = \"src/web/types/api-request.ts\"\n }\n \n+task generateApiEndPoints(type: cz.habarta.typescript.generator.gradle.GenerateTask) {\n+    classPatterns = [\n+            \"teammates.ui.webapi.endpoints.**\"\n+    ]\n+    outputFile = \"src/web/types/api-endpoints.ts\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY0ODg2OQ==", "bodyText": "Will this pass the CI? You may need mock httpRequestService or the API request will be sent?", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r378648869", "createdAt": "2020-02-13T04:45:35Z", "author": {"login": "xpdavid"}, "path": "src/web/services/nationalities.service.spec.ts", "diffHunk": "@@ -0,0 +1,22 @@\n+import { TestBed } from '@angular/core/testing';\n+\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { NationalitiesService } from './nationalities.service';\n+\n+describe('NationalitiesService', () => {\n+  beforeEach(() => TestBed.configureTestingModule({\n+    imports: [\n+      HttpClientTestingModule,\n+    ],\n+  }));\n+\n+  it('should be created', () => {\n+    const service: NationalitiesService = TestBed.get(NationalitiesService);\n+    expect(service).toBeTruthy();\n+  });\n+\n+  it('should return non-empty list of nationalities', () => {\n+    const service: NationalitiesService = TestBed.get(NationalitiesService);\n+    expect(service.getNationalities()).toBeTruthy();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY0OTA0OA==", "bodyText": "Let's add a (trivial) test for this method also?", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r378649048", "createdAt": "2020-02-13T04:46:16Z", "author": {"login": "xpdavid"}, "path": "src/web/services/instructor.service.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import { Injectable } from '@angular/core';\n+import { Observable } from 'rxjs';\n+import { Instructors } from '../types/api-output';\n+import { HttpRequestService } from './http-request.service';\n+\n+/**\n+ * Handles instructor related logic provision.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class InstructorService {\n+\n+  constructor(private httpRequestService: HttpRequestService) { }\n+\n+  /**\n+   * Get a list of instructors of a course by calling API.\n+   */\n+  getInstructorsFromCourse(courseId: string): Observable<Instructors> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY0OTA5Mg==", "bodyText": "Same here", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r378649092", "createdAt": "2020-02-13T04:46:28Z", "author": {"login": "xpdavid"}, "path": "src/web/services/course.service.ts", "diffHunk": "@@ -136,16 +146,28 @@ export class CourseService {\n   }\n \n   /**\n-   * Join a course by calling API.\n+   * Get the status of whether the entity has joined the course by calling API.\n    */\n-  joinCourse(regKey: string, entityType: string): Observable<JoinStatus> {\n+  getJoinCourseStatus(regKey: string, entityType: string): Observable<JoinStatus> {\n     const paramMap: { [key: string]: string } = {\n       key: regKey,\n       entitytype: entityType,\n     };\n     return this.httpRequestService.get('/join', paramMap);\n   }\n \n+  /**\n+   * Join a course by calling API.\n+   */\n+  joinCourse(regKey: string, entityType: string, institute: string): Observable<any> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY0OTExNA==", "bodyText": "Same here", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r378649114", "createdAt": "2020-02-13T04:46:35Z", "author": {"login": "xpdavid"}, "path": "src/web/services/course.service.ts", "diffHunk": "@@ -38,6 +38,16 @@ export class CourseService {\n     return this.httpRequestService.get('/course', paramMap);\n   }\n \n+  /**\n+   * Gets all course data for a student by calling API.\n+   */\n+  getAllCoursesAsStudent(): Observable<Courses> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68ee55923ce53d1f26f3a9c2851282c93310758e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NjM5ODEz", "url": "https://github.com/TEAMMATES/teammates/pull/9951#pullrequestreview-358639813", "createdAt": "2020-02-14T00:11:13Z", "commit": {"oid": "bedc1c89164ae25b17b3d21645e3244a6a4a7801"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwMDoxMToxM1rOFpn4-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwMDoxMToxM1rOFpn4-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE4OTQ5OQ==", "bodyText": "Added this line to suppress missing javadoc warnings for enum values\ncheckstyle/checkstyle#1669", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r379189499", "createdAt": "2020-02-14T00:11:13Z", "author": {"login": "tiuweehan"}, "path": "static-analysis/teammates-checkstyle.xml", "diffHunk": "@@ -141,6 +141,7 @@\n         <module name=\"SingleLineJavadoc\"/>\n         <module name=\"JavadocVariable\">\n             <property name=\"scope\" value=\"public\"/>\n+            <property name=\"tokens\" value=\"VARIABLE_DEF\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bedc1c89164ae25b17b3d21645e3244a6a4a7801"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bedc1c89164ae25b17b3d21645e3244a6a4a7801", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/bedc1c89164ae25b17b3d21645e3244a6a4a7801", "committedDate": "2020-02-14T00:08:14Z", "message": "Fix java linting issues"}, "afterCommit": {"oid": "24dfb68a81b70a438869ed652bca68820e6c1f23", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/24dfb68a81b70a438869ed652bca68820e6c1f23", "committedDate": "2020-02-14T00:21:14Z", "message": "Fix java linting issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24dfb68a81b70a438869ed652bca68820e6c1f23", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/24dfb68a81b70a438869ed652bca68820e6c1f23", "committedDate": "2020-02-14T00:21:14Z", "message": "Fix java linting issues"}, "afterCommit": {"oid": "a7d8016d6f78e14efa6a36c0fcedc24b35398754", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/a7d8016d6f78e14efa6a36c0fcedc24b35398754", "committedDate": "2020-02-14T04:55:09Z", "message": "Fix java linting issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78608f661655fea2017ff8034278ab98814d5c61", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/78608f661655fea2017ff8034278ab98814d5c61", "committedDate": "2020-02-14T05:20:43Z", "message": "Refactor to use api-endpoints"}, "afterCommit": {"oid": "3e5491a40e1c1c2895f04095b36f05c0d0c9bdec", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/3e5491a40e1c1c2895f04095b36f05c0d0c9bdec", "committedDate": "2020-02-14T05:20:59Z", "message": "Refactor Course Service to use api-endpoints"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NzE4MDUw", "url": "https://github.com/TEAMMATES/teammates/pull/9951#pullrequestreview-358718050", "createdAt": "2020-02-14T05:23:02Z", "commit": {"oid": "3e5491a40e1c1c2895f04095b36f05c0d0c9bdec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwNToyMzowM1rOFpr55w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwNToyMzowM1rOFpr55w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTI1NTI3MQ==", "bodyText": "@xpdavid Do you think it is alright to do it this way?", "url": "https://github.com/TEAMMATES/teammates/pull/9951#discussion_r379255271", "createdAt": "2020-02-14T05:23:03Z", "author": {"login": "tiuweehan"}, "path": "src/web/services/course.service.ts", "diffHunk": "@@ -1,9 +1,20 @@\n import { Injectable } from '@angular/core';\n import { forkJoin, Observable } from 'rxjs';\n import { map } from 'rxjs/operators';\n+import { ResourceEndpoints } from '../types/api-endpoints';\n import { Course, CourseArchive, Courses,  HasResponses, JoinStatus, MessageOutput } from '../types/api-output';\n import { CourseArchiveRequest, CourseCreateRequest, CourseUpdateRequest } from '../types/api-request';\n import { HttpRequestService } from './http-request.service';\n+const {\n+  BIN_COURSE,\n+  COURSE,\n+  COURSES,\n+  COURSE_ARCHIVE,\n+  HAS_RESPONSES,\n+  JOIN,\n+  JOIN_REMIND,\n+  STUDENT,\n+}: typeof ResourceEndpoints = ResourceEndpoints;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e5491a40e1c1c2895f04095b36f05c0d0c9bdec"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82704686717f1d07356bfeaea189fbc2f7aa6168", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/82704686717f1d07356bfeaea189fbc2f7aa6168", "committedDate": "2020-02-16T23:34:58Z", "message": "Add Nationalities Service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c06b440c2efcdf1f0c3c8dd00e5d116d4fe701", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/10c06b440c2efcdf1f0c3c8dd00e5d116d4fe701", "committedDate": "2020-02-16T23:34:58Z", "message": "Update tests for NationalitiesService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0088533f8968d69fee28c376f99e951ef86eb6b5", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/0088533f8968d69fee28c376f99e951ef86eb6b5", "committedDate": "2020-02-16T23:34:58Z", "message": "Remove HttpRequestService from student home page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "252287904589e65ceecc54a47feee1cbbf698925", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/252287904589e65ceecc54a47feee1cbbf698925", "committedDate": "2020-02-16T23:34:58Z", "message": "Remove HttpRequestService from student course details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4b01bc7ffa987b2eb6b8da248f27df51629692", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/6b4b01bc7ffa987b2eb6b8da248f27df51629692", "committedDate": "2020-02-16T23:34:58Z", "message": "Add test for nationalities service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "272430eec92102d77ddff98c334d93afe3a20e00", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/272430eec92102d77ddff98c334d93afe3a20e00", "committedDate": "2020-02-16T23:34:58Z", "message": "Remove HttpRequestService from course join page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a10c5f0117d693a8152a7b79a2cbf43c32cd16", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/34a10c5f0117d693a8152a7b79a2cbf43c32cd16", "committedDate": "2020-02-16T23:34:58Z", "message": "Add API Endpoints for resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de07aa11fe752dfa4d21e5e7500ca97dff4a5566", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/de07aa11fe752dfa4d21e5e7500ca97dff4a5566", "committedDate": "2020-02-16T23:34:58Z", "message": "Add tests for NationalitiesService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8207a162797f9363a8a731102cdd9a84109d260", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/a8207a162797f9363a8a731102cdd9a84109d260", "committedDate": "2020-02-16T23:34:58Z", "message": "Add Instructor service tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fd36b420d81ac1573d9eaa10df5dc7079cb27ca", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/4fd36b420d81ac1573d9eaa10df5dc7079cb27ca", "committedDate": "2020-02-16T23:34:58Z", "message": "Fix java linting issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22eb399025a1852c733c66ac5a2be250748d9b91", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/22eb399025a1852c733c66ac5a2be250748d9b91", "committedDate": "2020-02-16T23:34:58Z", "message": "Add tests for courses service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "135bdd59eb9b1f78c41920dd228448bd713fdec0", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/135bdd59eb9b1f78c41920dd228448bd713fdec0", "committedDate": "2020-02-16T23:34:58Z", "message": "Refactor Course Service to use api-endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63dc2c3bd85dff877ee5374ce70a1bef875dc706", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/63dc2c3bd85dff877ee5374ce70a1bef875dc706", "committedDate": "2020-02-16T23:34:58Z", "message": "Refactor URIs to use Resource Endpoints in api-endpoints"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0b707e103c3015083e43eb716e1f72dd49bc0518", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/0b707e103c3015083e43eb716e1f72dd49bc0518", "committedDate": "2020-02-14T07:37:30Z", "message": "Refactor URIs to use Resource Endpoints in api-endpoints"}, "afterCommit": {"oid": "63dc2c3bd85dff877ee5374ce70a1bef875dc706", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/63dc2c3bd85dff877ee5374ce70a1bef875dc706", "committedDate": "2020-02-16T23:34:58Z", "message": "Refactor URIs to use Resource Endpoints in api-endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37c7b251aed93935fcc002319e156cb9290bb64f", "author": {"user": {"login": "tiuweehan", "name": null}}, "url": "https://github.com/TEAMMATES/teammates/commit/37c7b251aed93935fcc002319e156cb9290bb64f", "committedDate": "2020-02-17T04:06:59Z", "message": "fix e2e tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDg0MDQz", "url": "https://github.com/TEAMMATES/teammates/pull/9951#pullrequestreview-359484043", "createdAt": "2020-02-17T04:32:19Z", "commit": {"oid": "37c7b251aed93935fcc002319e156cb9290bb64f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4432, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}