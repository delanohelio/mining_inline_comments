{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzQ0Mzcx", "number": 10767, "title": "[#10693] Add allow rich text editor frontend option", "bodyText": "Fixes #10693\nOutline of Solution\n\n\n Add FE button for rich text editor option and link to api call to BE\n\n\n Adjust BE to read in and persist the editor choice\n\n\n FE question display accordingly\n\n\nBy the way, is this frontend checkbox ok?\n\nSubmission page display", "createdAt": "2020-10-07T15:40:37Z", "url": "https://github.com/TEAMMATES/teammates/pull/10767", "merged": true, "mergeCommit": {"oid": "1df3085c9fcaaf6fe7edb4b6f49331ac84b41c52"}, "closed": true, "closedAt": "2020-12-06T14:20:07Z", "author": {"login": "moziliar"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQW_H8gFqTUwNDM2NTc0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjhTIggH2gAyNDk5MzQ0MzcxOmZmMzQ3ZmE3YzM5MTM5NzllNWM4ZmM5NTQ4ODgwNjIxMGNmMjM5MjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MzY1NzQz", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-504365743", "createdAt": "2020-10-08T01:06:53Z", "commit": {"oid": "bb35d5b748fc44f24155b31cbc97541fcb556553"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwMTowNjo1M1rOHeKoNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwMTowNjo1M1rOHeKoNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ==", "bodyText": "Shouldn't this be specific to TEXT question?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501393461", "createdAt": "2020-10-08T01:06:53Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/datatransfer/attributes/FeedbackQuestionAttributes.java", "diffHunk": "@@ -31,6 +31,7 @@\n     public List<FeedbackParticipantType> showResponsesTo;\n     public List<FeedbackParticipantType> showGiverNameTo;\n     public List<FeedbackParticipantType> showRecipientNameTo;\n+    public boolean allowRichText;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb35d5b748fc44f24155b31cbc97541fcb556553"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "670f86744bc2b4109b08b9cd3ce75bae7b7fbc70", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/670f86744bc2b4109b08b9cd3ce75bae7b7fbc70", "committedDate": "2020-10-08T04:50:08Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "29f06c9ffd4252e70506c2e3434e6342446cdb22", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/29f06c9ffd4252e70506c2e3434e6342446cdb22", "committedDate": "2020-10-08T04:51:50Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29f06c9ffd4252e70506c2e3434e6342446cdb22", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/29f06c9ffd4252e70506c2e3434e6342446cdb22", "committedDate": "2020-10-08T04:51:50Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "db133804cdc5992fb6628c09aca1577b0d03876a", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/db133804cdc5992fb6628c09aca1577b0d03876a", "committedDate": "2020-10-08T04:52:31Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db133804cdc5992fb6628c09aca1577b0d03876a", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/db133804cdc5992fb6628c09aca1577b0d03876a", "committedDate": "2020-10-08T04:52:31Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "df17440a2929c5e01c1de52ae754c9ba513ba92a", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/df17440a2929c5e01c1de52ae754c9ba513ba92a", "committedDate": "2020-10-08T04:53:07Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df17440a2929c5e01c1de52ae754c9ba513ba92a", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/df17440a2929c5e01c1de52ae754c9ba513ba92a", "committedDate": "2020-10-08T04:53:07Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "807ebdf9ec2365165d29269ec389c6b81010f2d9", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/807ebdf9ec2365165d29269ec389c6b81010f2d9", "committedDate": "2020-10-08T04:54:29Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "807ebdf9ec2365165d29269ec389c6b81010f2d9", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/807ebdf9ec2365165d29269ec389c6b81010f2d9", "committedDate": "2020-10-08T04:54:29Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "committedDate": "2020-10-08T04:58:52Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "committedDate": "2020-10-08T04:58:52Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "committedDate": "2020-10-08T05:00:33Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "committedDate": "2020-10-08T05:00:33Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "e5a0e08a6030cf133679c94d71cbb193485c2ffe", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e5a0e08a6030cf133679c94d71cbb193485c2ffe", "committedDate": "2020-10-08T05:02:48Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5a0e08a6030cf133679c94d71cbb193485c2ffe", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e5a0e08a6030cf133679c94d71cbb193485c2ffe", "committedDate": "2020-10-08T05:02:48Z", "message": "Refactor change to text editor option to be contained in text type"}, "afterCommit": {"oid": "94911b3f37597dee786bcd1e9feae8312ea26630", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/94911b3f37597dee786bcd1e9feae8312ea26630", "committedDate": "2020-10-08T06:24:01Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c99c9a48ca2bca0eb4a835bbf747d790ab29d6", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/d5c99c9a48ca2bca0eb4a835bbf747d790ab29d6", "committedDate": "2020-10-08T07:36:16Z", "message": "Add allow rich text editor frontend option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ec09dd16f1d1b4e6ee22850b46506c2e03a9b42", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3ec09dd16f1d1b4e6ee22850b46506c2e03a9b42", "committedDate": "2020-10-08T07:36:16Z", "message": "Update UI checkbox display"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcd442f3796262b13a72ee54d8aac602e364eda5", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fcd442f3796262b13a72ee54d8aac602e364eda5", "committedDate": "2020-10-08T07:36:16Z", "message": "Propagate allow rich text option to backend and reflect in FE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e83032c4e184134aa33f2c59dae6b214804b488", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1e83032c4e184134aa33f2c59dae6b214804b488", "committedDate": "2020-10-08T07:36:16Z", "message": "Refactor change to text editor option to be contained in text type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2208bee38c9f5f66127b40ee4e7c5acf8f2da1af", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2208bee38c9f5f66127b40ee4e7c5acf8f2da1af", "committedDate": "2020-10-08T07:36:16Z", "message": "Update UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e99a20807c1c5e9a79a781b042a9f9774ba253f", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8e99a20807c1c5e9a79a781b042a9f9774ba253f", "committedDate": "2020-10-08T07:36:16Z", "message": "Update submission UI to toggle between plain and rich text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "committedDate": "2020-10-08T07:36:49Z", "message": "Enable deletion of existing responses on change from rich to plain text"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "905adf8a3715302e7d7cbc2744563ddc83d43ab9", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/905adf8a3715302e7d7cbc2744563ddc83d43ab9", "committedDate": "2020-10-08T07:35:47Z", "message": "Enable deletion of existing responses on change from rich to plain text"}, "afterCommit": {"oid": "7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "committedDate": "2020-10-08T07:36:49Z", "message": "Enable deletion of existing responses on change from rich to plain text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e44389e2402026e10b5c269f5472feda03740e1", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/5e44389e2402026e10b5c269f5472feda03740e1", "committedDate": "2020-10-08T07:56:43Z", "message": "Fix lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "committedDate": "2020-10-08T10:30:47Z", "message": "Retake snapshot"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1Mjg2NTMw", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-505286530", "createdAt": "2020-10-09T01:11:19Z", "commit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwMToxMToxOVrOHe2o4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwMToxOTowNlrOHe27ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA==", "bodyText": "boolean variable can start with is,should,has,can\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private boolean allowRichText;\n          \n          \n            \n                private boolean shouldAllowRichText;", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502114528", "createdAt": "2020-10-09T01:11:19Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private boolean allowRichText;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNTA3Mg==", "bodyText": "Take a look at how shouldChangesRequireResponseDeletion is called. Do you need cast operation here?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502115072", "createdAt": "2020-10-09T01:12:10Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private boolean allowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        allowRichText = true;\n     }\n \n     public FeedbackTextQuestionDetails(String questionText) {\n         super(FeedbackQuestionType.TEXT, questionText);\n         recommendedLength = null;\n+        allowRichText = true;\n     }\n \n     @Override\n     public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {\n-        return false;\n+        assert newDetails instanceof FeedbackTextQuestionDetails;\n+\n+        // delete the existing response upon change from rich text allowed to disallowed\n+        // due to the effort to cleanup of HTML tags from the respondents\n+        return !((FeedbackTextQuestionDetails) newDetails).allowRichText && allowRichText;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ==", "bodyText": "There are multiple places where you should add the new fields to the test data :D\n\nRecommend to write a script to that\nI should have said this change technically requires data migration. @madanalogy we should create post-issue step for this.", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502116955", "createdAt": "2020-10-09T01:15:41Z", "author": {"login": "xpdavid"}, "path": "src/test/java/teammates/common/util/JsonUtilsTest.java", "diffHunk": "@@ -45,6 +45,7 @@ public void testFeedbackQuestionDetailsAdaptor_withComposedQuestionDetails_shoul\n                     + \"  \\\"feedbackSessionName\\\": \\\"testFeedbackSession\\\",\\n\"\n                     + \"  \\\"courseId\\\": \\\"testingCourse\\\",\\n\"\n                     + \"  \\\"questionDetails\\\": {\\n\"\n+                    + \"    \\\"allowRichText\\\": true,\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNzY3OA==", "bodyText": "Why does styling tm-text-question-edit-details-form need to change the overall structure?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502117678", "createdAt": "2020-10-09T01:17:04Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.html", "diffHunk": "@@ -75,16 +75,18 @@\n               </div>\n             </div>\n             <div class=\"padding-15px\">\n-              <tm-text-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.TEXT\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-text-question-edit-details-form>\n-              <tm-contribution-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.CONTRIB\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-contribution-question-edit-details-form>\n-              <tm-mcq-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.MCQ\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-mcq-question-edit-details-form>\n-              <tm-msq-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.MSQ\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-msq-question-edit-details-form>\n-              <tm-num-scale-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.NUMSCALE\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-num-scale-question-edit-details-form>\n-              <tm-rank-options-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.RANK_OPTIONS\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-rank-options-question-edit-details-form>\n-              <tm-rank-recipients-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.RANK_RECIPIENTS\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-rank-recipients-question-edit-details-form>\n-              <tm-rubric-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.RUBRIC\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-rubric-question-edit-details-form>\n-              <tm-constsum-options-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.CONSTSUM_OPTIONS\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-constsum-options-question-edit-details-form>\n-              <tm-constsum-recipients-question-edit-details-form *ngIf=\"model.questionType === FeedbackQuestionType.CONSTSUM_RECIPIENTS\" [details]=\"model.questionDetails\" (detailsChange)=\"triggerModelChange('questionDetails', $event)\" [isEditable]=\"model.isEditable\"></tm-constsum-recipients-question-edit-details-form>\n+              <div class=\"col-md-10\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExODQyMw==", "bodyText": "Please avoid using ID for styling. Why don't use class name?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502118423", "createdAt": "2020-10-09T01:18:07Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-answer-form/text-question-edit-answer-form.component.scss", "diffHunk": "@@ -1,3 +1,13 @@\n .margin-top-7px {\n   margin-top: 7px;\n }\n+\n+#plain-text-area {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExOTI5MQ==", "bodyText": "You don't need the state right?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502119291", "createdAt": "2020-10-09T01:19:06Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.ts", "diffHunk": "@@ -14,10 +14,21 @@ import { QuestionEditDetailsFormComponent } from './question-edit-details-form.c\n export class TextQuestionEditDetailsFormComponent extends QuestionEditDetailsFormComponent<FeedbackTextQuestionDetails>\n     implements OnInit {\n \n+  allowRichText: boolean = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb68cf454918895238a1d410904c2127bc583728", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fb68cf454918895238a1d410904c2127bc583728", "committedDate": "2020-10-09T17:36:12Z", "message": "Refactor naming of rich text option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d49279d18c6107bf4b55dd9c0a9ce2c185de47d", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3d49279d18c6107bf4b55dd9c0a9ce2c185de47d", "committedDate": "2020-10-10T02:27:49Z", "message": "Change boolean to Boxed type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbe912c6e2a839a0d4490491f491b3aa9d3618e0", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fbe912c6e2a839a0d4490491f491b3aa9d3618e0", "committedDate": "2020-10-10T02:28:10Z", "message": "Change CSS id to class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31816776cdc9f8f6cbceb2b5ec6796fcd6602fe4", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/31816776cdc9f8f6cbceb2b5ec6796fcd6602fe4", "committedDate": "2020-10-10T03:58:48Z", "message": "Fix lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fec4f48c8ec09dd5daaf46959719db02b382f030", "committedDate": "2020-10-11T13:58:52Z", "message": "Localize change to text alignment in text qn edit details"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MzEwMzk2", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-514310396", "createdAt": "2020-10-22T02:09:32Z", "commit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMjowOTozM1rOHmN_eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMjoxNDozMVrOHmOEcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzNzE3OA==", "bodyText": "Should use Assumption (search on codebase for example) class as -ea is turned off in GAE.", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509837178", "createdAt": "2020-10-22T02:09:33Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private Boolean shouldAllowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        shouldAllowRichText = true;\n     }\n \n     public FeedbackTextQuestionDetails(String questionText) {\n         super(FeedbackQuestionType.TEXT, questionText);\n         recommendedLength = null;\n+        shouldAllowRichText = true;\n     }\n \n     @Override\n     public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {\n-        return false;\n+        assert newDetails instanceof FeedbackTextQuestionDetails;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzNzc4MA==", "bodyText": "What is this for?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509837780", "createdAt": "2020-10-22T02:11:37Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -371,6 +371,18 @@ export class QuestionEditFormComponent implements OnInit {\n         modalRef.result.then(() => {\n           this.saveExistingQuestionEvent.emit();\n         }, () => {});\n+      // } else if (this.model.questionDetails) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzODE0OA==", "bodyText": "Shouldn't col-* be used with row?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509838148", "createdAt": "2020-10-22T02:13:12Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.html", "diffHunk": "@@ -1,4 +1,13 @@\n-<div class=\"row\">\n+<div class=\"padding-15px\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzODI0Mg==", "bodyText": "The indentation here does not look quite right.", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509838242", "createdAt": "2020-10-22T02:13:41Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.ts", "diffHunk": "@@ -14,10 +14,21 @@ import { QuestionEditDetailsFormComponent } from './question-edit-details-form.c\n export class TextQuestionEditDetailsFormComponent extends QuestionEditDetailsFormComponent<FeedbackTextQuestionDetails>\n     implements OnInit {\n \n+  shouldAllowRichText: boolean = true;\n+\n   constructor() {\n     super(DEFAULT_TEXT_QUESTION_DETAILS());\n   }\n \n   ngOnInit(): void {\n   }\n+\n+  /**\n+   * Toggles between plain text editor and rich text editor for the response.\n+   */\n+  toggleRichTextOption(\n+    richTextAllowed: boolean): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzODQ0OA==", "bodyText": "You can remove the state as it is tracked with model", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509838448", "createdAt": "2020-10-22T02:14:31Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.ts", "diffHunk": "@@ -14,10 +14,21 @@ import { QuestionEditDetailsFormComponent } from './question-edit-details-form.c\n export class TextQuestionEditDetailsFormComponent extends QuestionEditDetailsFormComponent<FeedbackTextQuestionDetails>\n     implements OnInit {\n \n+  shouldAllowRichText: boolean = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "109db46c2c074537d2587604fca765a51e94953c", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/109db46c2c074537d2587604fca765a51e94953c", "committedDate": "2020-10-23T06:22:42Z", "message": "Change assert to Assumption"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e54a3ce5bf94f0b31f994822d095a325ff8877b", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2e54a3ce5bf94f0b31f994822d095a325ff8877b", "committedDate": "2020-10-23T06:23:43Z", "message": "Remove unused lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bca3de758731c93a81c24adafa3d5dc76090e20", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1bca3de758731c93a81c24adafa3d5dc76090e20", "committedDate": "2020-10-23T06:34:03Z", "message": "Add row to html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6f2d3fdd8355c5c14ef4dbcf1423e6369a68876", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c6f2d3fdd8355c5c14ef4dbcf1423e6369a68876", "committedDate": "2020-10-23T06:36:05Z", "message": "Fix indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/01cc0e2f4e312012f9fb0033da8062ed2b55c1ac", "committedDate": "2020-10-23T06:39:38Z", "message": "Remove unnecessary state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5Mjk5NjEw", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-519299610", "createdAt": "2020-10-29T03:07:56Z", "commit": {"oid": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzowNzo1N1rOHqGXpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzowOTo1MFrOHqGbOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwNjU5Ng==", "bodyText": "Minor: I think we should have a test case to check the field is set to true when it get constructed.", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r513906596", "createdAt": "2020-10-29T03:07:57Z", "author": {"login": "xpdavid"}, "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -6,26 +6,35 @@\n import javax.annotation.Nullable;\n \n import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.util.Assumption;\n import teammates.common.util.Const;\n \n public class FeedbackTextQuestionDetails extends FeedbackQuestionDetails {\n \n     @Nullable\n     private Integer recommendedLength;\n \n+    private Boolean shouldAllowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        shouldAllowRichText = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwNzUxNA==", "bodyText": "Minor: I think you can inline the method to the HTML template.", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r513907514", "createdAt": "2020-10-29T03:09:50Z", "author": {"login": "xpdavid"}, "path": "src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.ts", "diffHunk": "@@ -18,6 +18,12 @@ export class TextQuestionEditDetailsFormComponent extends QuestionEditDetailsFor\n     super(DEFAULT_TEXT_QUESTION_DETAILS());\n   }\n \n-  ngOnInit(): void {\n+  ngOnInit(): void {}\n+\n+  /**\n+   * Toggles between plain text editor and rich text editor for the response.\n+   */\n+  toggleRichTextOption(richTextAllowed: boolean): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "802c6f33a674fb963e25740e217c55a8049ca811", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/802c6f33a674fb963e25740e217c55a8049ca811", "committedDate": "2020-10-30T15:58:34Z", "message": "Add test case for default rich text option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23e940277ab2728571b1c61290193dd2c974c6e0", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/23e940277ab2728571b1c61290193dd2c974c6e0", "committedDate": "2020-10-30T16:04:44Z", "message": "Add inline checkbox toggle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d5e14855006abc9c57a544e13177b0368281909", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6d5e14855006abc9c57a544e13177b0368281909", "committedDate": "2020-10-30T16:06:23Z", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1618c5dd74ab1d774e4e7da02e7c43fcc328a9a6", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1618c5dd74ab1d774e4e7da02e7c43fcc328a9a6", "committedDate": "2020-10-31T02:22:29Z", "message": "Update snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5b20f9993cae7b24a3c55db8d89bfab60d40a93", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/c5b20f9993cae7b24a3c55db8d89bfab60d40a93", "committedDate": "2020-11-10T01:24:17Z", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7123507b6db2c2bb39306ac708631e460425b2f8", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/7123507b6db2c2bb39306ac708631e460425b2f8", "committedDate": "2020-11-10T05:09:25Z", "message": "Fix unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9611b0beb7a097a9fe7d66a6c5965af2a8b363f2", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/9611b0beb7a097a9fe7d66a6c5965af2a8b363f2", "committedDate": "2020-11-10T07:24:46Z", "message": "Fix lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "210b9840990fc29262312af201ffee496d9d62b1", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/210b9840990fc29262312af201ffee496d9d62b1", "committedDate": "2020-11-13T15:14:19Z", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMzU0MDg2", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-540354086", "createdAt": "2020-11-28T09:17:06Z", "commit": {"oid": "210b9840990fc29262312af201ffee496d9d62b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxNzowN1rOH7XRiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxNzowN1rOH7XRiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjAwOTM1NQ==", "bodyText": "Since your variable is a boxed type instead of a primitive, would recommend following the same convention here (i.e. Boolean instead of boolean). Unless you've tried that and it doesn't work?", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r532009355", "createdAt": "2020-11-28T09:17:07Z", "author": {"login": "madanalogy"}, "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -59,4 +68,12 @@ public Integer getRecommendedLength() {\n     public void setRecommendedLength(Integer recommendedLength) {\n         this.recommendedLength = recommendedLength;\n     }\n+\n+    public boolean getShouldAllowRichText() {\n+        return shouldAllowRichText;\n+    }\n+\n+    public void setShouldAllowRichText(boolean shouldAllowRichText) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "210b9840990fc29262312af201ffee496d9d62b1"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "068056384b64d5bb0cf37ab9955c7ee610181236", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/068056384b64d5bb0cf37ab9955c7ee610181236", "committedDate": "2020-12-05T04:25:58Z", "message": "Change boolean to boxed type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a0a0d30974cef4cf307acdf53a9ae224319cb42", "author": {"user": {"login": "moziliar", "name": "Mo Zongran"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6a0a0d30974cef4cf307acdf53a9ae224319cb42", "committedDate": "2020-12-05T04:26:08Z", "message": "Merge branch '10693-make-rich-text-for-essay-configurable' of https://github.com/moziliar/teammates into 10693-make-rich-text-for-essay-configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjgyNzE3", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-545682717", "createdAt": "2020-12-06T08:34:56Z", "commit": {"oid": "6a0a0d30974cef4cf307acdf53a9ae224319cb42"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjgzNTg4", "url": "https://github.com/TEAMMATES/teammates/pull/10767#pullrequestreview-545683588", "createdAt": "2020-12-06T08:47:30Z", "commit": {"oid": "6a0a0d30974cef4cf307acdf53a9ae224319cb42"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff347fa7c3913979e5c8fc95488806210cf23923", "author": {"user": {"login": "madanalogy", "name": "Ahmed Bahajjaj"}}, "url": "https://github.com/TEAMMATES/teammates/commit/ff347fa7c3913979e5c8fc95488806210cf23923", "committedDate": "2020-12-06T13:52:21Z", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4195, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}