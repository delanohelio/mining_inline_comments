{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2Njk0NTQy", "number": 10900, "title": "[#9536] Improve E2E test stability and add test for searching response comments", "bodyText": "This will be an extended part of #9536\n\nResolved the high failure rate of Chrome-based E2E tests. It seems that a somewhat recent version of Chromedriver has a bug in setting page load timeout, so it is resolved by using native JS method. There may be other places where that bug occurs, but driver.get is the most obvious and by far most widely used call site.\nSeparated InstructorFeedbackResultsPageE2ETest to multiple test cases. This is preferable because:\n\nThe entire test runs in 5.5 mins, so if anything breaks in the middle, everything has to be run all over again\nThe different view types of the results page technically create \"different pages\"\n\n\nImproved stability of InstructorSearchPageE2ETest sllightly\nAdded some minor fixes to the search comments functionality: minor UI improvement and show participant comment on top of instructor comments\nAdded E2E test portion for search response comments (another box ticked in the original issue!)", "createdAt": "2020-12-30T01:48:05Z", "url": "https://github.com/TEAMMATES/teammates/pull/10900", "merged": true, "mergeCommit": {"oid": "d79d4fbbcb833dc257ab8f6a541d79585ac0976a"}, "closed": true, "closedAt": "2021-01-18T06:41:00Z", "author": {"login": "wkurniawan07"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABduhrKlAFqTU2NDc5OTEyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxL6uAgH2gAyNTQ2Njk0NTQyOjg3OTE1MThkNjc5NmY5ZjI2ZWJlNTM2ZjA1NjAxMWUxMmU0YmUwYWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0Nzk5MTI2", "url": "https://github.com/TEAMMATES/teammates/pull/10900#pullrequestreview-564799126", "createdAt": "2021-01-09T17:48:41Z", "commit": {"oid": "6bdb83db5c0b18f7e5d3c3e80fc8dccf2f838d86"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOVQxNzo0ODo0MlrOIQxIhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOVQxODozMTowM1rOIQxaMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ1MzEyNw==", "bodyText": "this should be TimeoutException exception right?", "url": "https://github.com/TEAMMATES/teammates/pull/10900#discussion_r554453127", "createdAt": "2021-01-09T17:48:42Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/pageobjects/InstructorSearchPage.java", "diffHunk": "@@ -60,7 +69,15 @@ public void search(boolean searchForStudents, boolean searchForComments, String\n             searchKeyword.clear();\n             searchKeyword.sendKeys(searchTerm);\n             click(searchButton);\n-            waitForLoadingElement();\n+            WebElement loadingContainer = null;\n+            try {\n+                loadingContainer = waitForElementPresence(By.className(\"loading-container\"));\n+            } catch (NoSuchElementException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bdb83db5c0b18f7e5d3c3e80fc8dccf2f838d86"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ1NDEyOQ==", "bodyText": "this is repeated (duplicate of above)", "url": "https://github.com/TEAMMATES/teammates/pull/10900#discussion_r554454129", "createdAt": "2021-01-09T17:58:19Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/cases/InstructorFeedbackResultsPageE2ETest.java", "diffHunk": "@@ -249,11 +270,14 @@ private void testViews() {\n \n         ______TS(\"GQR view: verify comments\");\n         resultsPage.verifyGqrViewComment(qn2, comment, responseWithComment, instructors, students, false);\n+    }\n \n-        // -------------------------------------- RQG View -------------------------------------- //\n+    @Test\n+    public void testRqgView() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6747a47725a1a73f847cf90ab494266ba6d5cbc8"}, "originalPosition": 179}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ1NzY0OA==", "bodyText": "what is the version of chromedriver + chrome that I can use to reproduce the said bug above? Might be good to mention that in this comment as well", "url": "https://github.com/TEAMMATES/teammates/pull/10900#discussion_r554457648", "createdAt": "2021-01-09T18:31:03Z", "author": {"login": "rrtheonlyone"}, "path": "src/e2e/java/teammates/e2e/pageobjects/Browser.java", "diffHunk": "@@ -131,6 +131,11 @@ public void close() {\n      * Visits the given URL.\n      */\n     public void goToUrl(String url) {\n+        if (TestProperties.BROWSER.equals(TestProperties.BROWSER_CHROME)) {\n+            // Recent chromedriver has bug in setting page load timeout, which can potentially cause infinitely long waits", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e28f86d9890dea4f0014ae4dfad313f19b1d488f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8dbefe8db9117b70c3fb5b0f5a062f1d5942888", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/e8dbefe8db9117b70c3fb5b0f5a062f1d5942888", "committedDate": "2021-01-10T14:41:39Z", "message": "Fix goToUrl for Chrome"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "414be2a66e64c19416e98c22d290bf7fe6d1b04b", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/414be2a66e64c19416e98c22d290bf7fe6d1b04b", "committedDate": "2021-01-10T14:41:39Z", "message": "Separate results page E2E test to multiple test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "216ba204249f8012b66cb982e5ef05f6e56fb39e", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/216ba204249f8012b66cb982e5ef05f6e56fb39e", "committedDate": "2021-01-10T14:41:39Z", "message": "Improve stability of search page E2E test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "473b206b6b2f275a0698ed77f37fb5f9b7729887", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/473b206b6b2f275a0698ed77f37fb5f9b7729887", "committedDate": "2021-01-10T14:41:39Z", "message": "Display participant comment in search result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "010eb46f539e74451d005221ce548f84f7a6675b", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/010eb46f539e74451d005221ce548f84f7a6675b", "committedDate": "2021-01-10T14:41:39Z", "message": "Add minor UI fixes to comment search result table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338919638708ed361dc5c7e0a0966eb2433d9929", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/338919638708ed361dc5c7e0a0966eb2433d9929", "committedDate": "2021-01-10T14:41:39Z", "message": "Add necessary identifiers for E2E testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc11ce77e1596a69d501b022450aebfb3ecdc8ba", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/fc11ce77e1596a69d501b022450aebfb3ecdc8ba", "committedDate": "2021-01-10T14:41:39Z", "message": "Add test data for searching response comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e0e4430bab7b164306542b038e260406b4e0c9", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/14e0e4430bab7b164306542b038e260406b4e0c9", "committedDate": "2021-01-10T14:41:39Z", "message": "Add simple test case for searching response comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6bdb83db5c0b18f7e5d3c3e80fc8dccf2f838d86", "author": {"user": {"login": "rrtheonlyone", "name": "Rahul Rajesh"}}, "url": "https://github.com/TEAMMATES/teammates/commit/6bdb83db5c0b18f7e5d3c3e80fc8dccf2f838d86", "committedDate": "2021-01-09T16:57:05Z", "message": "Merge branch 'master' into e2e-search"}, "afterCommit": {"oid": "14e0e4430bab7b164306542b038e260406b4e0c9", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/14e0e4430bab7b164306542b038e260406b4e0c9", "committedDate": "2021-01-10T14:41:39Z", "message": "Add simple test case for searching response comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMDYwMTk0", "url": "https://github.com/TEAMMATES/teammates/pull/10900#pullrequestreview-570060194", "createdAt": "2021-01-17T14:01:00Z", "commit": {"oid": "14e0e4430bab7b164306542b038e260406b4e0c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8791518d6796f9f26ebe536f056011e12e4be0ae", "author": {"user": {"login": "wkurniawan07", "name": "Wilson Kurniawan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8791518d6796f9f26ebe536f056011e12e4be0ae", "committedDate": "2021-01-18T00:52:37Z", "message": "Merge branch 'master' into e2e-search"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4187, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}