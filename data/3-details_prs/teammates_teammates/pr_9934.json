{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5Mzg0Mjcx", "number": 9934, "title": "[#9382] Add tests for RestoreFeedbackSessionAction", "bodyText": "Part of #9382.\nOutline of Solution\nAdd tests for RestoreFeedbackSessionAction.", "createdAt": "2020-01-31T02:47:50Z", "url": "https://github.com/TEAMMATES/teammates/pull/9934", "merged": true, "mergeCommit": {"oid": "fcf52e5530b340f54bfb5ffc86ee9f802a49d34b"}, "closed": true, "closedAt": "2020-02-06T18:44:03Z", "author": {"login": "dvrylc"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_l8UoAH2gAyMzY5Mzg0MjcxOjhiNmU0YTEwNjY4ZDFkZDhiODg1MzIxMjE5MWJhMTFjYjg1ZDMxNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBmNH6AH2gAyMzY5Mzg0MjcxOjBkM2JlYTVhN2ViYzI2MzA5ZjJmOGExYWU2MzQzZTQzYmQ1NzhjZmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8b6e4a10668d1dd8b8853212191ba11cb85d3142", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/8b6e4a10668d1dd8b8853212191ba11cb85d3142", "committedDate": "2020-01-31T02:44:32Z", "message": "Add tests for RestoreFeedbackSessionAction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTE1NDg1", "url": "https://github.com/TEAMMATES/teammates/pull/9934#pullrequestreview-351915485", "createdAt": "2020-02-02T02:44:58Z", "commit": {"oid": "8b6e4a10668d1dd8b8853212191ba11cb85d3142"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwMjo0NDo1OVrOFkf2rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwMjo0NDo1OVrOFkf2rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgxNDk1Nw==", "bodyText": "It could be a good practice to separate verifying output and verifying model by an empty line, or add comment, but it's fine to me and just a suggestion", "url": "https://github.com/TEAMMATES/teammates/pull/9934#discussion_r373814957", "createdAt": "2020-02-02T02:44:59Z", "author": {"login": "Adoby7"}, "path": "src/test/java/teammates/test/cases/webapi/RestoreFeedbackSessionActionTest.java", "diffHunk": "@@ -23,13 +30,69 @@ protected String getRequestMethod() {\n     @Test\n     @Override\n     protected void testExecute() throws Exception {\n-        // TODO\n+        InstructorAttributes instructor1OfCourse1 = typicalBundle.instructors.get(\"instructor1OfCourse1\");\n+        FeedbackSessionAttributes firstFeedbackSession = typicalBundle.feedbackSessions.get(\"session1InCourse1\");\n+\n+        String instructorId = instructor1OfCourse1.googleId;\n+        String courseId = instructor1OfCourse1.courseId;\n+        String feedbackSessionName = firstFeedbackSession.getFeedbackSessionName();\n+\n+        loginAsInstructor(instructorId);\n+\n+        String[] submissionParams = new String[] {\n+                Const.ParamsNames.COURSE_ID, courseId,\n+                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,\n+        };\n+\n+        ______TS(\"Not found in recycle bin\");\n+\n+        RestoreFeedbackSessionAction notFoundAction = getAction(submissionParams);\n+        EntityNotFoundException notFoundException = assertThrows(EntityNotFoundException.class, () -> {\n+            getJsonResult(notFoundAction);\n+        });\n+\n+        assertEquals(\"Feedback session is not in recycle bin\", notFoundException.getMessage());\n+\n+        ______TS(\"Typical case, restore a deleted feedback session from recycle bin\");\n+\n+        logic.moveFeedbackSessionToRecycleBin(feedbackSessionName, courseId);\n+\n+        RestoreFeedbackSessionAction action = getAction(submissionParams);\n+        JsonResult result = getJsonResult(action);\n+        FeedbackSessionData feedbackSessionMessage = (FeedbackSessionData) result.getOutput();\n+\n+        assertEquals(HttpStatus.SC_OK, result.getStatusCode());\n+        assertEquals(courseId, feedbackSessionMessage.getCourseId());\n+        assertEquals(feedbackSessionName, feedbackSessionMessage.getFeedbackSessionName());\n+        assertFalse(logic.getFeedbackSession(feedbackSessionName, courseId).isSessionDeleted());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b6e4a10668d1dd8b8853212191ba11cb85d3142"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e52f229e73781382a786bf3bd463614549a3f56", "author": {"user": {"login": "dvrylc", "name": "Daryl Chan"}}, "url": "https://github.com/TEAMMATES/teammates/commit/2e52f229e73781382a786bf3bd463614549a3f56", "committedDate": "2020-02-02T08:35:52Z", "message": "Improve test structure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTM3ODk4", "url": "https://github.com/TEAMMATES/teammates/pull/9934#pullrequestreview-351937898", "createdAt": "2020-02-02T12:20:35Z", "commit": {"oid": "2e52f229e73781382a786bf3bd463614549a3f56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTk4MDM5", "url": "https://github.com/TEAMMATES/teammates/pull/9934#pullrequestreview-354198039", "createdAt": "2020-02-06T04:45:23Z", "commit": {"oid": "2e52f229e73781382a786bf3bd463614549a3f56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1a50bf5a65709e495a3bea375ffdd93038764ff", "author": {"user": {"login": "xpdavid", "name": "Xiao Pu"}}, "url": "https://github.com/TEAMMATES/teammates/commit/b1a50bf5a65709e495a3bea375ffdd93038764ff", "committedDate": "2020-02-06T04:45:47Z", "message": "Merge branch 'master' into 9382-add-restore-feedback-session-action-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d3bea5a7ebc26309f2f8a1ae6343e43bd578cfe", "author": {"user": {"login": "xpdavid", "name": "Xiao Pu"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0d3bea5a7ebc26309f2f8a1ae6343e43bd578cfe", "committedDate": "2020-02-06T08:10:44Z", "message": "Merge branch 'master' into 9382-add-restore-feedback-session-action-tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4426, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}