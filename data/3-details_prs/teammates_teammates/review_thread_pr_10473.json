{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2ODk1MjIz", "number": 10473, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1ODozN1rOESPHBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1ODozN1rOESPHBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTU3MzgwOnYy", "diffSide": "RIGHT", "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1ODozN1rOG3TqaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNTowMDo1M1rOG3TsoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzAxNw==", "bodyText": "The original issue was only for team contribution questions but it seems this will prevent any inheritance for questions without custom visibility settings allowed? Or are team contribution questions the only with that setting?", "url": "https://github.com/TEAMMATES/teammates/pull/10473#discussion_r460647017", "createdAt": "2020-07-27T04:58:37Z", "author": {"login": "madanalogy"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -758,18 +762,50 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n         SHOW_GIVER_NAME: lastQuestionEditFormModel.showGiverNameTo,\n         SHOW_RECIPIENT_NAME: lastQuestionEditFormModel.showRecipientNameTo,\n       });\n-      this.newQuestionEditFormModel.showResponsesTo =\n+      const newQuestionShowResponsesTo: FeedbackVisibilityType[]  =\n           newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RESPONSE);\n-      this.newQuestionEditFormModel.showGiverNameTo =\n+      const newQuestionShowGiverNameTo: FeedbackVisibilityType[] =\n           newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_GIVER_NAME);\n-      this.newQuestionEditFormModel.showRecipientNameTo =\n-          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(\n-              VisibilityControl.SHOW_RECIPIENT_NAME);\n+      const newQuestionShowRecipientNameTo: FeedbackVisibilityType[] =\n+          newQuestionVisibilityStateMachine\n+              .getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RECIPIENT_NAME);\n+\n+      let isAllowedToUseInheritedVisibility: boolean = false;\n+      if (this.feedbackQuestionsService\n+          .isCustomFeedbackVisibilitySettingAllowed(this.newQuestionEditFormModel.questionType)) {\n+        isAllowedToUseInheritedVisibility = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bccbc4780de4817c3f4b319193b2b339e2ab6b28"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzU4NQ==", "bodyText": "In this case: team contribution questions the only with that setting.\nIn the future case where we add new question that only allows common feedback visibility setting, the same logic should also follow I believe (or we will end up with a new issue raised).", "url": "https://github.com/TEAMMATES/teammates/pull/10473#discussion_r460647585", "createdAt": "2020-07-27T05:00:53Z", "author": {"login": "xpdavid"}, "path": "src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts", "diffHunk": "@@ -758,18 +762,50 @@ export class InstructorSessionEditPageComponent extends InstructorSessionBasePag\n         SHOW_GIVER_NAME: lastQuestionEditFormModel.showGiverNameTo,\n         SHOW_RECIPIENT_NAME: lastQuestionEditFormModel.showRecipientNameTo,\n       });\n-      this.newQuestionEditFormModel.showResponsesTo =\n+      const newQuestionShowResponsesTo: FeedbackVisibilityType[]  =\n           newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RESPONSE);\n-      this.newQuestionEditFormModel.showGiverNameTo =\n+      const newQuestionShowGiverNameTo: FeedbackVisibilityType[] =\n           newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_GIVER_NAME);\n-      this.newQuestionEditFormModel.showRecipientNameTo =\n-          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(\n-              VisibilityControl.SHOW_RECIPIENT_NAME);\n+      const newQuestionShowRecipientNameTo: FeedbackVisibilityType[] =\n+          newQuestionVisibilityStateMachine\n+              .getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RECIPIENT_NAME);\n+\n+      let isAllowedToUseInheritedVisibility: boolean = false;\n+      if (this.feedbackQuestionsService\n+          .isCustomFeedbackVisibilitySettingAllowed(this.newQuestionEditFormModel.questionType)) {\n+        isAllowedToUseInheritedVisibility = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzAxNw=="}, "originalCommit": {"oid": "bccbc4780de4817c3f4b319193b2b339e2ab6b28"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3707, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}