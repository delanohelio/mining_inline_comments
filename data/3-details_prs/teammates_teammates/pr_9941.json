{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5OTA1ODM0", "number": 9941, "title": "[#9917] Loading bar persists when courses of the student are soft-deleted", "bodyText": "Fixes #9917\nOutline of Solution\n\nAdded a check whether the courses array (returned from the /courses endpoint) is empty;\nIf the courses array is indeed empty,\n\n\nhid the loading bar;\ndisplay an explanatory message to a student.", "createdAt": "2020-02-01T14:49:56Z", "url": "https://github.com/TEAMMATES/teammates/pull/9941", "merged": true, "mergeCommit": {"oid": "9c3dfaad9f6be96709deceffd18d5d82d7e916d2"}, "closed": true, "closedAt": "2020-02-23T21:21:48Z", "author": {"login": "aishaadambek"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAEwF_AH2gAyMzY5OTA1ODM0OjcyNTEzMzk5M2E1ZWNmYmVjOTkxMTY0MDRiMDdjMjAxZDg3MDI0YTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHBKgcAFqTM2MzA2NDgxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "725133993a5ecfbec99116404b07c201d87024a8", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/725133993a5ecfbec99116404b07c201d87024a8", "committedDate": "2020-02-01T14:38:14Z", "message": "Fix a persisting loading bar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d8bbf5e9162b860f3d9e8d3986b8cc4ee55539b", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0d8bbf5e9162b860f3d9e8d3986b8cc4ee55539b", "committedDate": "2020-02-02T06:32:06Z", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into fix-soft-del-courses-bug\n\nMerge the latest changes from the upstream master."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd698d49fa6db44a429e47468aff521b2bd90dd2", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/bd698d49fa6db44a429e47468aff521b2bd90dd2", "committedDate": "2020-02-02T21:09:00Z", "message": "Merge branch 'master' into fix-soft-del-courses-bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3613f26b956f9091aee6a30a50e121399b8fe454", "committedDate": "2020-02-06T04:10:06Z", "message": "Merge branch 'master' into fix-soft-del-courses-bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0Mjc1OTI0", "url": "https://github.com/TEAMMATES/teammates/pull/9941#pullrequestreview-354275924", "createdAt": "2020-02-06T08:42:26Z", "commit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwODo0MjoyNlrOFmS-rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwODo0Nzo0NFrOFmTH3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTE2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 No courses you are enrolled in. Please refer to the \n          \n          \n            \n                 You are not enrolled in any courses. Please refer to the", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375701165", "createdAt": "2020-02-06T08:42:26Z", "author": {"login": "madanalogy"}, "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTkzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 if you have any questions.\n          \n          \n            \n                 if you need more information.", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375701937", "createdAt": "2020-02-06T08:44:05Z", "author": {"login": "madanalogy"}, "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the \n+    <a\n+      href=\"/web/student/help\"\n+      ng-reflect-router-link=\"/web/student/help\"\n+      routerlink=\"/web/student/help\"\n+    >\n+      Help page\n+    </a>\n+     if you have any questions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMjU0NA==", "bodyText": "The edit suggestions should have been applied here, my apologies. I just realised I commented on the generated snapshot rather than the source content.", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375702544", "createdAt": "2020-02-06T08:45:34Z", "author": {"login": "madanalogy"}, "path": "src/web/app/pages-student/student-home-page/student-home-page.component.html", "diffHunk": "@@ -1,85 +1,91 @@\n-<ng-container *ngFor=\"let studentCourse of courses\">\n-  <div class=\"card bg-light top-padded\">\n-    <div class=\"card-header bg-primary text-white\" *ngIf=\"studentCourse.course as course\">\n-      <strong>[{{ course.courseId }}]: {{ course.courseName }}</strong>\n-      <span class=\"float-sm-right\">\n-        <a routerLink=\"../course\" [queryParams]=\"{courseid: course.courseId}\"\n-           class=\"btn btn-light btn-sm button\" ngbTooltip='View and edit information regarding your team'>\n-          View team\n-        </a>\n-      </span>\n-    </div>\n+<div *ngIf=\"courses.length == 0; else coursesContainer\">\n+  No courses you are enrolled in. Please refer to the <a routerLink=\"/web/student/help\">Help page</a>\n+  if you have any questions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMzUxOQ==", "bodyText": "Any particular reason for capitalising the \"H\" in \"Help\"?", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375703519", "createdAt": "2020-02-06T08:47:44Z", "author": {"login": "madanalogy"}, "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the \n+    <a\n+      href=\"/web/student/help\"\n+      ng-reflect-router-link=\"/web/student/help\"\n+      routerlink=\"/web/student/help\"\n+    >\n+      Help page", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cffd172504b7c3598c4ef63915133334c7d97e6", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/0cffd172504b7c3598c4ef63915133334c7d97e6", "committedDate": "2020-02-06T16:54:25Z", "message": "Merge branch 'master' into fix-soft-del-courses-bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/588e9a449ccfea89bc00fc3246cebd5a30da3bfe", "committedDate": "2020-02-06T17:30:37Z", "message": "Improve phrasing of an error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMDk1Mjg1", "url": "https://github.com/TEAMMATES/teammates/pull/9941#pullrequestreview-360095285", "createdAt": "2020-02-18T06:30:49Z", "commit": {"oid": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjozMDo1MFrOFq2Xtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjozMDo1MFrOFq2Xtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3NTMxOA==", "bodyText": "if (resp.courses.length === 0) {\n        this.loadingBarService.hideLoadingBar();\n        return;\n}\n//rest of code", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r380475318", "createdAt": "2020-02-18T06:30:50Z", "author": {"login": "rrtheonlyone"}, "path": "src/web/app/pages-student/student-home-page/student-home-page.component.ts", "diffHunk": "@@ -76,31 +76,35 @@ export class StudentHomePageComponent implements OnInit {\n       entitytype: 'student',\n     };\n     this.httpRequestService.get('/courses', paramMap).subscribe((resp: Courses) => {\n-      for (const course of resp.courses) {\n-        this.feedbackSessionsService.getFeedbackSessionsForStudent(course.courseId)\n-            .pipe(finalize(() => this.loadingBarService.hideLoadingBar()))\n-            .subscribe((fss: FeedbackSessions) => {\n-              const sortedFss: FeedbackSession[] = this.sortFeedbackSessions(fss);\n+      if (resp.courses.length === 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMDk3NzEy", "url": "https://github.com/TEAMMATES/teammates/pull/9941#pullrequestreview-360097712", "createdAt": "2020-02-18T06:38:30Z", "commit": {"oid": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efed357b3f9c7710988e3b05ba10d804b1c867c1", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/efed357b3f9c7710988e3b05ba10d804b1c867c1", "committedDate": "2020-02-19T07:08:47Z", "message": "Exit early if courses array is empty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f54fd4c752494c048618c29dd42b16cb7fc0671", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/3f54fd4c752494c048618c29dd42b16cb7fc0671", "committedDate": "2020-02-19T07:42:31Z", "message": "Resolved merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1702344c6cc25ab009c8c843598050ace02da08d", "author": {"user": {"login": "aishaadambek", "name": "Aishabibi Adambek"}}, "url": "https://github.com/TEAMMATES/teammates/commit/1702344c6cc25ab009c8c843598050ace02da08d", "committedDate": "2020-02-19T08:42:41Z", "message": "Fixed lint errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjU2OTg4", "url": "https://github.com/TEAMMATES/teammates/pull/9941#pullrequestreview-361656988", "createdAt": "2020-02-20T06:23:43Z", "commit": {"oid": "1702344c6cc25ab009c8c843598050ace02da08d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMDY0ODEw", "url": "https://github.com/TEAMMATES/teammates/pull/9941#pullrequestreview-363064810", "createdAt": "2020-02-23T04:24:56Z", "commit": {"oid": "1702344c6cc25ab009c8c843598050ace02da08d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4428, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}