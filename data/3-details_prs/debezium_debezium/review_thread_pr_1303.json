{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTkwNzQ5", "number": 1303, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozMzowN1rODk7-7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozMzozMFrODk7_Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDU4MDkzOnYy", "diffSide": "RIGHT", "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/wal2json/NonStreamingWal2JsonMessageDecoder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozMzowN1rOFxig9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozNjoxNFrOFxilDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MDAzNg==", "bodyText": "Why not the NOOP message here?", "url": "https://github.com/debezium/debezium/pull/1303#discussion_r387490036", "createdAt": "2020-03-04T07:33:07Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/wal2json/NonStreamingWal2JsonMessageDecoder.java", "diffHunk": "@@ -62,7 +62,8 @@ public void processNotEmptyMessage(ByteBuffer buffer, ReplicationMessageProcesso\n             // WAL2JSON may send empty changes that still have a txid. These events are from things like vacuum,\n             // materialized view, DDL, etc. They still need to be processed for the heartbeat to fire.\n             if (changes.isEmpty()) {\n-                processor.process(null);\n+                processor.process(new TransactionMessage(Operation.BEGIN, txId, commitTime));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae291a2443d1fedb6153771a77b53c7e2a95640d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MTA4Nw==", "bodyText": "@gunnarmorling Because it is different - NOOP is used in case of filtered event in TX. This is an empty TX is the valid logic is not emit NOOP but begin and end for the empty TX.", "url": "https://github.com/debezium/debezium/pull/1303#discussion_r387491087", "createdAt": "2020-03-04T07:36:14Z", "author": {"login": "jpechane"}, "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/wal2json/NonStreamingWal2JsonMessageDecoder.java", "diffHunk": "@@ -62,7 +62,8 @@ public void processNotEmptyMessage(ByteBuffer buffer, ReplicationMessageProcesso\n             // WAL2JSON may send empty changes that still have a txid. These events are from things like vacuum,\n             // materialized view, DDL, etc. They still need to be processed for the heartbeat to fire.\n             if (changes.isEmpty()) {\n-                processor.process(null);\n+                processor.process(new TransactionMessage(Operation.BEGIN, txId, commitTime));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MDAzNg=="}, "originalCommit": {"oid": "ae291a2443d1fedb6153771a77b53c7e2a95640d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMDU4MTk4OnYy", "diffSide": "RIGHT", "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/pgoutput/PgOutputMessageDecoder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozMzozMFrOFxihhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzo1MTo1MlrOFxi67g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MDE4Mg==", "bodyText": "In which case would no table be found? Could you add a comment?", "url": "https://github.com/debezium/debezium/pull/1303#discussion_r387490182", "createdAt": "2020-03-04T07:33:30Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/pgoutput/PgOutputMessageDecoder.java", "diffHunk": "@@ -393,7 +394,7 @@ private void decodeUpdate(ByteBuffer buffer, TypeRegistry typeRegistry, Replicat\n \n         Optional<Table> resolvedTable = resolveRelation(relationId);\n         if (!resolvedTable.isPresent()) {\n-            processor.process(null);\n+            processor.process(new NoopMessage(transactionId, commitTimestamp));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae291a2443d1fedb6153771a77b53c7e2a95640d"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5NjY4Ng==", "bodyText": "@gunnarmorling Javadoc added", "url": "https://github.com/debezium/debezium/pull/1303#discussion_r387496686", "createdAt": "2020-03-04T07:51:52Z", "author": {"login": "jpechane"}, "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/connection/pgoutput/PgOutputMessageDecoder.java", "diffHunk": "@@ -393,7 +394,7 @@ private void decodeUpdate(ByteBuffer buffer, TypeRegistry typeRegistry, Replicat\n \n         Optional<Table> resolvedTable = resolveRelation(relationId);\n         if (!resolvedTable.isPresent()) {\n-            processor.process(null);\n+            processor.process(new NoopMessage(transactionId, commitTimestamp));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MDE4Mg=="}, "originalCommit": {"oid": "ae291a2443d1fedb6153771a77b53c7e2a95640d"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4432, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}