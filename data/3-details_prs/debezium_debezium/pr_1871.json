{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MjUzODk0", "number": 1871, "title": "DBZ-2604 Use default db charset as default table charset", "bodyText": "https://issues.redhat.com/browse/DBZ-2604", "createdAt": "2020-10-06T04:26:00Z", "url": "https://github.com/debezium/debezium/pull/1871", "merged": true, "mergeCommit": {"oid": "dd6e10b92b351245563238cd8e4e1cc534f10abd"}, "closed": true, "closedAt": "2020-10-06T09:41:07Z", "author": {"login": "jpechane"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPxDc2gFqTUwMjU4MjMyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPyP4dAH2gAyNDk4MjUzODk0OmVmMWRjYzhiYzc3MmQ5NGNiZDJlYWVmMjI1MzcyNGZmNzJmNTI2Yjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNTgyMzI0", "url": "https://github.com/debezium/debezium/pull/1871#pullrequestreview-502582324", "createdAt": "2020-10-06T04:55:12Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNDo1NToxM1rOHc15jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNDo1NToxM1rOHc15jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDAwNTI2Mw==", "bodyText": "hi @jpechane May I know why previous parser.currentDatabaseCharset() does not return database encoding?", "url": "https://github.com/debezium/debezium/pull/1871#discussion_r500005263", "createdAt": "2020-10-06T04:55:13Z", "author": {"login": "victorxiang30"}, "path": "debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/antlr/listener/CreateTableParserListener.java", "diffHunk": "@@ -55,7 +55,8 @@ public void exitColumnCreateTable(MySqlParser.ColumnCreateTableContext ctx) {\n         parser.runIfNotNull(() -> {\n             // Make sure that the table's character set has been set ...\n             if (!tableEditor.hasDefaultCharsetName()) {\n-                tableEditor.setDefaultCharsetName(parser.currentDatabaseCharset());\n+                final String defaultDatabaseCharset = parser.charsetNameForDatabase().get(tableEditor.tableId().catalog());\n+                tableEditor.setDefaultCharsetName(defaultDatabaseCharset != null ? defaultDatabaseCharset : parser.currentDatabaseCharset());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb98b19887c9fca2153404bf860bab823322b9d", "author": {"user": {"login": "jpechane", "name": "Jiri Pechanec"}}, "url": "https://github.com/debezium/debezium/commit/9eb98b19887c9fca2153404bf860bab823322b9d", "committedDate": "2020-10-06T05:18:55Z", "message": "DBZ-2604 Use default db charset as default table charset"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "9eb98b19887c9fca2153404bf860bab823322b9d", "author": {"user": {"login": "jpechane", "name": "Jiri Pechanec"}}, "url": "https://github.com/debezium/debezium/commit/9eb98b19887c9fca2153404bf860bab823322b9d", "committedDate": "2020-10-06T05:18:55Z", "message": "DBZ-2604 Use default db charset as default table charset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef1dcc8bc772d94cbd2eaef2253724ff72f526b8", "author": {"user": {"login": "jpechane", "name": "Jiri Pechanec"}}, "url": "https://github.com/debezium/debezium/commit/ef1dcc8bc772d94cbd2eaef2253724ff72f526b8", "committedDate": "2020-10-06T06:18:42Z", "message": "DBZ-2604 Query charset name in lowercase"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2299, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}