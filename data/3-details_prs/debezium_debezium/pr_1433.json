{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MzE5MTI3", "number": 1433, "title": "DBZ-1953 MySQL 5.5 and 5.6 added to test matrix", "bodyText": "https://issues.redhat.com/browse/DBZ-1953", "createdAt": "2020-04-17T20:10:24Z", "url": "https://github.com/debezium/debezium/pull/1433", "merged": true, "mergeCommit": {"oid": "11c8e9df3d5058f70b8bde1a8418eb197e8d7c61"}, "closed": true, "closedAt": "2020-04-29T10:27:39Z", "author": {"login": "Naros"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYnRsGgH2gAyNDA1MzE5MTI3OjdiMDU0M2YzYzFjZDJkYWM4ZTExNDI0OThjZjg4OTlhNDM4ZTY3YTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbzDi0ABqjMyNzY5MjQ1MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/7b0543f3c1cd2dac8e1142498cf8899a438e67a2", "committedDate": "2020-04-17T20:25:53Z", "message": "DBZ-1953 MySQL 5.5 and 5.6 added to test matrix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/7b0543f3c1cd2dac8e1142498cf8899a438e67a2", "committedDate": "2020-04-17T20:25:53Z", "message": "DBZ-1953 MySQL 5.5 and 5.6 added to test matrix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDEwNDQ5", "url": "https://github.com/debezium/debezium/pull/1433#pullrequestreview-397010449", "createdAt": "2020-04-21T06:04:22Z", "commit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjowNDoyMlrOGI0BWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjoyNDowM1rOGI0kVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg5NDEwNw==", "bodyText": "Please move the execution to the Jenkins matrix job", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411894107", "createdAt": "2020-04-21T06:04:22Z", "author": {"login": "jpechane"}, "path": ".travis.yml", "diffHunk": "@@ -6,6 +6,8 @@ cache:\n env:\n   - MAVEN_CLI: '\"clean install -B -pl debezium-connector-sqlserver -am -Passembly -Dformat.formatter.goal=validate -Dformat.imports.goal=check\"'\n   - MAVEN_CLI: '\"clean install -B -pl debezium-connector-mysql -am -Passembly -Dformat.formatter.goal=validate -Dformat.imports.goal=check\"'\n+  - MAVEN_CLI: '\"clean install -B -pl debezium-connector-mysql -am -Passembly -Dformat.formatter.goal=validate -Dformat.imports.goal=check -Dversion.mysql.server=5.5\"'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg5OTEwNA==", "bodyText": "It seems to me that we now have too many files, how about combine two advanatges\n\nDocker Maven plugin seems to be able to read files from any directory\nthe Docker image seems to support /etc/my.cnf.d/ directory\n\nIf this is the case then I propose to create one that is common to all images - this will be copied over /etc.my.cnf\nThen there will be fragment files containin only Debezium specific settings - those would be copied into /etc/my.cnf.d directory to be picked up upon startup.", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411899104", "createdAt": "2020-04-21T06:15:53Z", "author": {"login": "jpechane"}, "path": "debezium-connector-mysql/src/test/docker/server-gtids/5.5/my.cnf", "diffHunk": "@@ -0,0 +1,52 @@\n+# For advice on how to change settings please see", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg5OTkxMw==", "bodyText": "Would it it be better to move this method into src/test/java/io/debezium/connector/mysql/MySQLConnection.java ?", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411899913", "createdAt": "2020-04-21T06:17:32Z", "author": {"login": "jpechane"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/BinlogReaderBufferIT.java", "diffHunk": "@@ -349,4 +356,15 @@ public void shouldProcessRolledBackSavepoint() throws SQLException, InterruptedE\n             Testing.print(\"*** Done with savepoint TX\");\n         }\n     }\n+\n+    private static boolean isMySql5(String databaseName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkwMDU2NA==", "bodyText": "This could use the moved isMySql5 method", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411900564", "createdAt": "2020-04-21T06:18:57Z", "author": {"login": "jpechane"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/MySqlGeometryIT.java", "diffHunk": "@@ -217,7 +224,7 @@ else if (i == 2) {\n     }\n \n     private DatabaseGeoDifferences databaseGeoDifferences(MySqlVersion mySqlVersion) {\n-        if (mySqlVersion == MySqlVersion.MYSQL_5) {\n+        if (mySqlVersion == MySqlVersion.MYSQL_5_5 || mySqlVersion == MySqlVersion.MYSQL_5_6 || mySqlVersion == MySqlVersion.MYSQL_5_7) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkwMTY5OQ==", "bodyText": "We have similar rule in postgres. Would it it make sense to provide it in core test and have only the annotations defined per-connector?", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411901699", "createdAt": "2020-04-21T06:21:15Z", "author": {"login": "jpechane"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/junit/SkipTestDependingOnDatabaseVersionRule.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.connector.mysql.junit;\n+\n+import org.junit.runner.Description;\n+import org.junit.runners.model.Statement;\n+\n+import io.debezium.connector.mysql.MySQLConnection;\n+import io.debezium.connector.mysql.MySQLConnection.MySqlVersion;\n+import io.debezium.junit.AnnotationBasedTestRule;\n+\n+/**\n+ * JUnit rule that skips a test based on the {@link SkipWhenDatabaseVersion} annotation either on a test method or\n+ * on a test class.\n+ *\n+ * @author Chris Cranford\n+ */\n+public class SkipTestDependingOnDatabaseVersionRule extends AnnotationBasedTestRule {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkwMzA2Mg==", "bodyText": "Why this format when we are using repeatabel annotation?", "url": "https://github.com/debezium/debezium/pull/1433#discussion_r411903062", "createdAt": "2020-04-21T06:24:03Z", "author": {"login": "jpechane"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/BinlogReaderIT.java", "diffHunk": "@@ -484,6 +493,10 @@ public void shouldFailOnUnknownTlsProtocol() {\n \n     @Test\n     @FixFor(\"DBZ-1208\")\n+    @SkipWhenDatabaseVersions({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b0543f3c1cd2dac8e1142498cf8899a438e67a2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ef16f7a17abe5765af838d999fd65a70f5ae1e", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/b8ef16f7a17abe5765af838d999fd65a70f5ae1e", "committedDate": "2020-04-23T14:17:54Z", "message": "DBZ-1953 Move Travis CI jobs to Jenkins matrix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "2007f34966b097bd8be55725d40af8a7b2d0081f", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/2007f34966b097bd8be55725d40af8a7b2d0081f", "committedDate": "2020-04-27T17:50:45Z", "message": "DBZ-1953 Generalized SkipWhenDatabaseVersion functionality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac1bce47e11add66c2a375895afc7053658fc5a", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/0ac1bce47e11add66c2a375895afc7053658fc5a", "committedDate": "2020-04-27T17:50:51Z", "message": "DBZ-1953 Rework configuration files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0ac1bce47e11add66c2a375895afc7053658fc5a", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/0ac1bce47e11add66c2a375895afc7053658fc5a", "committedDate": "2020-04-27T17:50:51Z", "message": "DBZ-1953 Rework configuration files"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2027, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}