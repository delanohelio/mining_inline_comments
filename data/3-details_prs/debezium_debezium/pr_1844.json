{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMDU1NDE4", "number": 1844, "title": "DBZ-2563 JSON processing can ignore deserialization errors", "bodyText": "https://issues.redhat.com/browse/DBZ-2563\nThis is not top quality implementation. The best approach would be unification of errors in BinlogReader but this would be quite invasive. So the code should be handled like an interim solution with the final one in the rewritten connector.", "createdAt": "2020-09-25T13:00:19Z", "url": "https://github.com/debezium/debezium/pull/1844", "merged": true, "mergeCommit": {"oid": "3d1261662742134481095d91092af9af25dbe7e0"}, "closed": true, "closedAt": "2020-09-29T08:36:34Z", "author": {"login": "jpechane"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMuCldgH2gAyNDkzMDU1NDE4OjVjMTg2NGZjYjU2NjBhOTdkNjY4YTIwYmI4NTNjZjZkMjNlZmEzNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNkBLNgFqTQ5ODIzMjAzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c1864fcb5660a97d668a20bb853cf6d23efa371", "author": {"user": {"login": "jpechane", "name": "Jiri Pechanec"}}, "url": "https://github.com/debezium/debezium/commit/5c1864fcb5660a97d668a20bb853cf6d23efa371", "committedDate": "2020-09-26T17:42:47Z", "message": "DBZ-2563 JSON processing can ignore deserialization errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "5c1864fcb5660a97d668a20bb853cf6d23efa371", "author": {"user": {"login": "jpechane", "name": "Jiri Pechanec"}}, "url": "https://github.com/debezium/debezium/commit/5c1864fcb5660a97d668a20bb853cf6d23efa371", "committedDate": "2020-09-26T17:42:47Z", "message": "DBZ-2563 JSON processing can ignore deserialization errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "466184b69e12ef10c59193462eaaf2df8f83ec76", "author": {"user": {"login": "gunnarmorling", "name": "Gunnar Morling"}}, "url": "https://github.com/debezium/debezium/commit/466184b69e12ef10c59193462eaaf2df8f83ec76", "committedDate": "2020-09-29T08:29:33Z", "message": "DBZ-2563 Simplifying MySqlValueConverters constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68aa2049d9290193e0da0cb64104f7a21b3e49f6", "author": {"user": {"login": "gunnarmorling", "name": "Gunnar Morling"}}, "url": "https://github.com/debezium/debezium/commit/68aa2049d9290193e0da0cb64104f7a21b3e49f6", "committedDate": "2020-09-29T08:33:18Z", "message": "DBZ-2563 Avoiding dependency from MySqlValueConverters to BinlogReader"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MjMyMDM2", "url": "https://github.com/debezium/debezium/pull/1844#pullrequestreview-498232036", "createdAt": "2020-09-29T08:30:51Z", "commit": {"oid": "466184b69e12ef10c59193462eaaf2df8f83ec76"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODozMDo1MVrOHZhvig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODozNToyN1rOHZiC9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjUyOTI5MA==", "bodyText": "Pushed a commit to make this final (let's always strive for that), which was a good ocassion to clean-up the constructor mess in this class a little bit.", "url": "https://github.com/debezium/debezium/pull/1844#discussion_r496529290", "createdAt": "2020-09-29T08:30:51Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/MySqlValueConverters.java", "diffHunk": "@@ -110,6 +112,8 @@ else if (70 <= year && year <= 99) {\n         return temporal;\n     }\n \n+    private final ParsingErrorHandler parsingErrorHandler;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "466184b69e12ef10c59193462eaaf2df8f83ec76"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjUzMzMxNQ==", "bodyText": "We might want to use this more widely later on? But good to leave it limited to JSON for now.", "url": "https://github.com/debezium/debezium/pull/1844#discussion_r496533315", "createdAt": "2020-09-29T08:34:36Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/MySqlValueConverters.java", "diffHunk": "@@ -375,7 +368,8 @@ protected Object convertJson(Column column, Field fieldDefn, Object data) {\n                         r.deliver(JsonBinary.parseAsString((byte[]) data));\n                     }\n                     catch (IOException e) {\n-                        throw new ConnectException(\"Failed to parse and read a JSON value on \" + column + \": \" + e.getMessage(), e);\n+                        parsingErrorHandler.error(\"Failed to parse and read a JSON value on '\" + column + \"' value \" + Arrays.toString((byte[]) data), e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68aa2049d9290193e0da0cb64104f7a21b3e49f6"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjUzNDI2MQ==", "bodyText": "Moved this here to avoid the dependency from MySqlValueConverters to BinlogReader.", "url": "https://github.com/debezium/debezium/pull/1844#discussion_r496534261", "createdAt": "2020-09-29T08:35:27Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/MySqlValueConverters.java", "diffHunk": "@@ -69,6 +70,11 @@\n @Immutable\n public class MySqlValueConverters extends JdbcValueConverters {\n \n+    @FunctionalInterface", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68aa2049d9290193e0da0cb64104f7a21b3e49f6"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2457, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}