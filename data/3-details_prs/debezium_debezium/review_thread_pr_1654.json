{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MzI0NzUy", "number": 1654, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjo0NzowMFrOEIocjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjo0NzowMFrOEIocjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NDg2NzMzOnYy", "diffSide": "RIGHT", "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/MySqlTaskContextTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjo0NzowMFrOGotdQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNDo0ODozNFrOGo-Qzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0MDk5NQ==", "bodyText": "Why is that you read an explicit value from the properties file? Wouldn't it make more sense to assert that the default value (as per your change below) excludes those tables?", "url": "https://github.com/debezium/debezium/pull/1654#discussion_r445340995", "createdAt": "2020-06-25T06:47:00Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/MySqlTaskContextTest.java", "diffHunk": "@@ -119,6 +120,20 @@ public void shouldCreateTaskFromConfigurationWithWhenNeededSnapshotMode() throws\n         assertThat(context.isSnapshotNeverAllowed()).isEqualTo(false);\n     }\n \n+    @Test\n+    public void shouldFilterInternalDmlStatements() throws Exception {\n+        // Load from a properties file to eliminate risk of improper escaping in Java literals\n+        Properties props = new Properties();\n+        props.load(Testing.Files.readResourceAsStream(\"dml-filter.properties\"));\n+        config = simpleConfig().with(MySqlConnectorConfig.SNAPSHOT_MODE, SnapshotMode.WHEN_NEEDED)\n+                .with(\"internal.database.history.ddl.filter\", props.get(\"internal.database.history.ddl.filter\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ca68eb595ad460578ad4ebf8e77a7d7e770a22"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYxNjMzNQ==", "bodyText": "Good point. I had used this file to verify that a value used in a configuration file had the proper escapes in the regex, but you are correct that this test does not need that.\nI've updated the test to use the default, removed the properties file from the PR, and added a few more conditions to the unit test.", "url": "https://github.com/debezium/debezium/pull/1654#discussion_r445616335", "createdAt": "2020-06-25T14:48:34Z", "author": {"login": "rhauch"}, "path": "debezium-connector-mysql/src/test/java/io/debezium/connector/mysql/MySqlTaskContextTest.java", "diffHunk": "@@ -119,6 +120,20 @@ public void shouldCreateTaskFromConfigurationWithWhenNeededSnapshotMode() throws\n         assertThat(context.isSnapshotNeverAllowed()).isEqualTo(false);\n     }\n \n+    @Test\n+    public void shouldFilterInternalDmlStatements() throws Exception {\n+        // Load from a properties file to eliminate risk of improper escaping in Java literals\n+        Properties props = new Properties();\n+        props.load(Testing.Files.readResourceAsStream(\"dml-filter.properties\"));\n+        config = simpleConfig().with(MySqlConnectorConfig.SNAPSHOT_MODE, SnapshotMode.WHEN_NEEDED)\n+                .with(\"internal.database.history.ddl.filter\", props.get(\"internal.database.history.ddl.filter\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0MDk5NQ=="}, "originalCommit": {"oid": "77ca68eb595ad460578ad4ebf8e77a7d7e770a22"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4219, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}