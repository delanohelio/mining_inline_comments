{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDkzMDYz", "number": 1690, "title": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent", "bodyText": "https://issues.redhat.com/browse/DBZ-2325", "createdAt": "2020-07-09T21:04:26Z", "url": "https://github.com/debezium/debezium/pull/1690", "merged": true, "mergeCommit": {"oid": "2f71e92a82ef5ce57490548ca228e377dc9fba63"}, "closed": true, "closedAt": "2020-07-10T15:00:23Z", "author": {"login": "Naros"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczbkCQgFqTQ0NjEwODE4MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABczk9vDAFqTQ0NjQ3MzU2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTA4MTgw", "url": "https://github.com/debezium/debezium/pull/1690#pullrequestreview-446108180", "createdAt": "2020-07-10T04:03:01Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNDowMzowMVrOGvpKFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNDowMzowMVrOGvpKFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxMDU4Mg==", "bodyText": "Please replace System.out calls", "url": "https://github.com/debezium/debezium/pull/1690#discussion_r452610582", "createdAt": "2020-07-10T04:03:01Z", "author": {"login": "jpechane"}, "path": "debezium-connector-sqlserver/src/test/java/io/debezium/connector/sqlserver/SqlServerConnectorIT.java", "diffHunk": "@@ -228,16 +231,23 @@ public void readOnlyApplicationIntent() throws Exception {\n         // Verify that multiple subsequent transactions are used in streaming phase with read-only intent\n         try (final SqlServerConnection admin = TestHelper.adminConnection()) {\n             final Set<Long> txIds = new HashSet<>();\n-            Awaitility.await().atMost(TestHelper.waitTimeForRecords() * 5, TimeUnit.SECONDS).pollInterval(100, TimeUnit.MILLISECONDS).until(() -> {\n-                admin.query(\n-                        \"SELECT (SELECT transaction_id FROM sys.dm_tran_session_transactions AS t WHERE s.session_id=t.session_id) FROM sys.dm_exec_sessions AS s WHERE program_name='\"\n-                                + appId + \"'\",\n-                        rs -> {\n-                            rs.next();\n-                            txIds.add(rs.getLong(1));\n-                        });\n-                return txIds.size() > 2;\n-            });\n+            try {\n+                Awaitility.await().atMost(TestHelper.waitTimeForRecords() * 5, TimeUnit.SECONDS).pollInterval(100, TimeUnit.MILLISECONDS).until(() -> {\n+                    admin.query(\n+                            \"SELECT (SELECT transaction_id FROM sys.dm_tran_session_transactions AS t WHERE s.session_id=t.session_id) FROM sys.dm_exec_sessions AS s WHERE program_name='\"\n+                                    + appId + \"'\",\n+                            rs -> {\n+                                rs.next();\n+                                txIds.add(rs.getLong(1));\n+                            });\n+                    return txIds.size() > 2;\n+                });\n+            }\n+            catch (ConditionTimeoutException e) {\n+                System.out.println(\"Transaction Ids: \" + txIds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 55}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "committedDate": "2020-07-10T13:51:35Z", "message": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "committedDate": "2020-07-10T13:51:35Z", "message": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NDczNTY1", "url": "https://github.com/debezium/debezium/pull/1690#pullrequestreview-446473565", "createdAt": "2020-07-10T15:00:14Z", "commit": {"oid": "9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2489, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}