{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MjYxMjQ3", "number": 1264, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNjo1NToxOVrODgdMEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQyMDoxNDo0NVrODidoZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MzU5MjUwOnYy", "diffSide": "RIGHT", "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNjo1NToxOVrOFqrATg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNTo0Njo0MlrOFrHnwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4OTEwMg==", "bodyText": "The existing annotation should be dropped in favour of the new one.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380289102", "createdAt": "2020-02-17T16:55:19Z", "author": {"login": "gunnarmorling"}, "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.annotation;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Marks the annotated element as incubating. The contract of incubating elements (e.g. packages, types, methods,\n+ * constants etc.) is under active development and may be incompatibly altered - or removed - in subsequent releases.\n+ * <p>\n+ * Usage of incubating API/SPI members is encouraged (so the development team can get feedback on these new features)\n+ * but you should be prepared for updating code which is using them as needed.\n+ *\n+ */\n+@Documented\n+@Retention(RetentionPolicy.CLASS)\n+public @interface Incubating {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ1NTg3Mw==", "bodyText": "@gunnarmorling Thanks that you've noticed :-). This was intended to lead to another question, what other annotations should move from core to API? Also should annotation like @ThreadSafe be used on the DebeziumEnginre as it is more implementation detail?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380455873", "createdAt": "2020-02-18T05:00:19Z", "author": {"login": "jpechane"}, "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.annotation;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Marks the annotated element as incubating. The contract of incubating elements (e.g. packages, types, methods,\n+ * constants etc.) is under active development and may be incompatibly altered - or removed - in subsequent releases.\n+ * <p>\n+ * Usage of incubating API/SPI members is encouraged (so the development team can get feedback on these new features)\n+ * but you should be prepared for updating code which is using them as needed.\n+ *\n+ */\n+@Documented\n+@Retention(RetentionPolicy.CLASS)\n+public @interface Incubating {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4OTEwMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwMTY3MQ==", "bodyText": "Good question, from a quick glance I'd say @Incubating is the only one that's really user-facing. What I'm realizing now though is the fact that there's a split package between core and api now. That's something we should avoid, so to avoid issues with the JPMS in some future.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380601671", "createdAt": "2020-02-18T11:00:17Z", "author": {"login": "gunnarmorling"}, "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.annotation;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Marks the annotated element as incubating. The contract of incubating elements (e.g. packages, types, methods,\n+ * constants etc.) is under active development and may be incompatibly altered - or removed - in subsequent releases.\n+ * <p>\n+ * Usage of incubating API/SPI members is encouraged (so the development team can get feedback on these new features)\n+ * but you should be prepared for updating code which is using them as needed.\n+ *\n+ */\n+@Documented\n+@Retention(RetentionPolicy.CLASS)\n+public @interface Incubating {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4OTEwMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYxMzY2NQ==", "bodyText": "@gunnarmorling The only shared package is the annotation so we can use just a different name. How about using documenting as it does not have any real function and is just for documentation?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380613665", "createdAt": "2020-02-18T11:26:05Z", "author": {"login": "jpechane"}, "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.annotation;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Marks the annotated element as incubating. The contract of incubating elements (e.g. packages, types, methods,\n+ * constants etc.) is under active development and may be incompatibly altered - or removed - in subsequent releases.\n+ * <p>\n+ * Usage of incubating API/SPI members is encouraged (so the development team can get feedback on these new features)\n+ * but you should be prepared for updating code which is using them as needed.\n+ *\n+ */\n+@Documented\n+@Retention(RetentionPolicy.CLASS)\n+public @interface Incubating {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4OTEwMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc1Nzk1NA==", "bodyText": "@gunnarmorling Package renamed", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380757954", "createdAt": "2020-02-18T15:46:42Z", "author": {"login": "jpechane"}, "path": "debezium-api/src/main/java/io/debezium/annotation/Incubating.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.annotation;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Marks the annotated element as incubating. The contract of incubating elements (e.g. packages, types, methods,\n+ * constants etc.) is under active development and may be incompatibly altered - or removed - in subsequent releases.\n+ * <p>\n+ * Usage of incubating API/SPI members is encouraged (so the development team can get feedback on these new features)\n+ * but you should be prepared for updating code which is using them as needed.\n+ *\n+ */\n+@Documented\n+@Retention(RetentionPolicy.CLASS)\n+public @interface Incubating {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4OTEwMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MzYwODY0OnYy", "diffSide": "RIGHT", "path": "debezium-api/src/main/java/io/debezium/errors/DebeziumException.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNzowMDozMVrOFqrJtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNDo1ODoyNFrOFq1KVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MTUwOA==", "bodyText": "I don't like the idea of such \"technical\" packages (it's ok for the annotations IMO, but I'd limit it otherwise). I'd suggest to move the engine exception to the engine package and the DebeziumException just to io.debezium.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380291508", "createdAt": "2020-02-17T17:00:31Z", "author": {"login": "gunnarmorling"}, "path": "debezium-api/src/main/java/io/debezium/errors/DebeziumException.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.errors;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ1NTUwOQ==", "bodyText": "@gunnarmorling ok, both works for me. I've chosen this approach to follow Kafka API. Exceptions moved", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380455509", "createdAt": "2020-02-18T04:58:24Z", "author": {"login": "jpechane"}, "path": "debezium-api/src/main/java/io/debezium/errors/DebeziumException.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright Debezium Authors.\n+ *\n+ * Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package io.debezium.errors;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MTUwOA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MzYxMjQzOnYy", "diffSide": "RIGHT", "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNzowMTo0OVrOFqrL9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTozNjowOVrOFq_Evw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA==", "bodyText": "Why do we need this internal interface?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380292084", "createdAt": "2020-02-17T17:01:49Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5NTkxOQ==", "bodyText": "The same question applies for the inner interfaces in EmbeddedEngine. Why do we have these pairs of public and internal interface now?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380295919", "createdAt": "2020-02-17T17:10:38Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ1MzYzMw==", "bodyText": "@gunnarmorling Well, I know that we have not declared EmbeddedEngine to be a public API but still people are using it, so everything I did ensures full backward compatibility. My intent is to mark these \"internal\" interfaces as deprecated and remove them in future releases.\nIf we drop them right away the users code will not be compilable.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380453633", "createdAt": "2020-02-18T04:48:23Z", "author": {"login": "jpechane"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwMjg0MA==", "bodyText": "Ok, I see. So they should be marked with @Deprecated then. On backwards compat, I don't think that simply moving the types would be a breaking change strictly speaking. core pulls in api, so a user's code would compile just as before. The one issue to take care of would be the split package problem though, when only moving parts of a package.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380602840", "createdAt": "2020-02-18T11:02:31Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYxNDI2MA==", "bodyText": "@gunnarmorling It is not just move among modules but in package name as well, hence my desire to keep the old ones.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380614260", "createdAt": "2020-02-18T11:27:30Z", "author": {"login": "jpechane"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYxNzkxOQ==", "bodyText": "@gunnarmorling Deprecated annotations added", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380617919", "createdAt": "2020-02-18T11:36:09Z", "author": {"login": "jpechane"}, "path": "debezium-embedded/src/main/java/io/debezium/embedded/spi/OffsetCommitPolicy.java", "diffHunk": "@@ -18,7 +18,7 @@\n  * @author Randall Hauch\n  */\n @FunctionalInterface\n-public interface OffsetCommitPolicy {\n+public interface OffsetCommitPolicy extends io.debezium.engine.spi.OffsetCommitPolicy {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjA4NA=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MzYxODQxOnYy", "diffSide": "RIGHT", "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNzowMzoxNFrOFqrPMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTowMjo0MFrOFq-KIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjkxMg==", "bodyText": "I'd have expected existing tests to be adjusted to be coded against the new public interface?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380292912", "createdAt": "2020-02-17T17:03:14Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ1Mzg4Ng==", "bodyText": "@gunnarmorling And this again was intentional - to verify that there is no impact on backward compatbility. The test rewrite should go hand in hand with removing deprecated interfaces.\nAs the first step when this is released we should modify the examples using EmbeddedEngine API.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380453886", "createdAt": "2020-02-18T04:49:49Z", "author": {"login": "jpechane"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjkxMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwMjkxMw==", "bodyText": "Ok, I see.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r380602913", "createdAt": "2020-02-18T11:02:40Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI5MjkxMg=="}, "originalCommit": {"oid": "0a560fa12c89530f34666fdd814b37ad8db82be5"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDYxMjA1OnYy", "diffSide": "RIGHT", "path": "debezium-api/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQyMDowNTo1M1rOFtuJQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNjo1MFrOFuFVEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4NjI3NA==", "bodyText": "API shouldn't be provided but compile (i.e. default).", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383486274", "createdAt": "2020-02-24T20:05:53Z", "author": {"login": "gunnarmorling"}, "path": "debezium-api/pom.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <groupId>io.debezium</groupId>\n+        <artifactId>debezium-parent</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>debezium-api</artifactId>\n+    <name>Debezium API</name>\n+    <packaging>jar</packaging>\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>\n+            <scope>provided</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjcwOQ==", "bodyText": "What about this one and the next below, @jpechane?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383862709", "createdAt": "2020-02-25T12:59:39Z", "author": {"login": "gunnarmorling"}, "path": "debezium-api/pom.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <groupId>io.debezium</groupId>\n+        <artifactId>debezium-parent</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>debezium-api</artifactId>\n+    <name>Debezium API</name>\n+    <packaging>jar</packaging>\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>\n+            <scope>provided</scope>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4NjI3NA=="}, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2NjEyOQ==", "bodyText": "@gunnarmorling Fixed", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383866129", "createdAt": "2020-02-25T13:06:50Z", "author": {"login": "jpechane"}, "path": "debezium-api/pom.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <groupId>io.debezium</groupId>\n+        <artifactId>debezium-parent</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>debezium-api</artifactId>\n+    <name>Debezium API</name>\n+    <packaging>jar</packaging>\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>\n+            <scope>provided</scope>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4NjI3NA=="}, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDYyMDAzOnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQyMDowODo0NlrOFtuOWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMzowNjozMFrOFuFUeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4NzU3OQ==", "bodyText": "Do we need to do anything to add the new module to assemblies?", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383487579", "createdAt": "2020-02-24T20:08:46Z", "author": {"login": "gunnarmorling"}, "path": "pom.xml", "diffHunk": "@@ -406,6 +407,11 @@\n             </dependency>\n \n             <!-- Debezium artifacts -->\n+            <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2NTk3Nw==", "bodyText": "@gunnarmorling No, I just double checked and build the plugin packages and they contain new API module", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383865977", "createdAt": "2020-02-25T13:06:30Z", "author": {"login": "jpechane"}, "path": "pom.xml", "diffHunk": "@@ -406,6 +407,11 @@\n             </dependency>\n \n             <!-- Debezium artifacts -->\n+            <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4NzU3OQ=="}, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDYzNjU0OnYy", "diffSide": "RIGHT", "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQyMDoxNDo0NVrOFtuYsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjo1OToyMVrOFuFHDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ5MDIyNQ==", "bodyText": "So here's the one tiny concern I have: what will happen if we want to add support for other formats down the road (essentially by invoking converters under the hood)? E.g. what should be passed for obtaining JSON Strings? Back in the Reactive PoC we had an indirection for that purpose, something like:\ninterface SerializationFormat<T> {}\n\ninterface Json extends SerializationFormat<String> {}\n\ninterface Connect extends SerializationFormat<SourceRecord> {}\n\nThen the usage could be like so:\n// <T extends SerializationFormat<V>, V> DebeziumEngine<V> create(T format)\nDebeziumEngine<SourceRecord> engine = DebeziumEngine.create(Connect.class)...\n\nMight wanna do this now to be prepared for the evolution down the road.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383490225", "createdAt": "2020-02-24T20:14:45Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {\n+        // Add initial content to the file ...\n+        appendLinesToSource(NUMBER_OF_LINES);\n+\n+        final Properties props = new Properties();\n+        props.setProperty(\"name\", \"debezium-engine\");\n+        props.setProperty(\"connector.class\", \"org.apache.kafka.connect.file.FileStreamSourceConnector\");\n+        props.setProperty(StandaloneConfig.OFFSET_STORAGE_FILE_FILENAME_CONFIG, OFFSET_STORE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"offset.flush.interval.ms\", \"0\");\n+        props.setProperty(\"file\", TEST_FILE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"topic\", \"topicX\");\n+\n+        CountDownLatch firstLatch = new CountDownLatch(1);\n+        CountDownLatch allLatch = new CountDownLatch(6);\n+\n+        // create an engine with our custom class\n+        final DebeziumEngine<SourceRecord> engine = DebeziumEngine.create(SourceRecord.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MDQ0Ng==", "bodyText": "@gunnarmorling Indirect format definition added", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383860446", "createdAt": "2020-02-25T12:55:15Z", "author": {"login": "jpechane"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {\n+        // Add initial content to the file ...\n+        appendLinesToSource(NUMBER_OF_LINES);\n+\n+        final Properties props = new Properties();\n+        props.setProperty(\"name\", \"debezium-engine\");\n+        props.setProperty(\"connector.class\", \"org.apache.kafka.connect.file.FileStreamSourceConnector\");\n+        props.setProperty(StandaloneConfig.OFFSET_STORAGE_FILE_FILENAME_CONFIG, OFFSET_STORE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"offset.flush.interval.ms\", \"0\");\n+        props.setProperty(\"file\", TEST_FILE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"topic\", \"topicX\");\n+\n+        CountDownLatch firstLatch = new CountDownLatch(1);\n+        CountDownLatch allLatch = new CountDownLatch(6);\n+\n+        // create an engine with our custom class\n+        final DebeziumEngine<SourceRecord> engine = DebeziumEngine.create(SourceRecord.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ5MDIyNQ=="}, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjU0Mw==", "bodyText": "Ok, thx. LGTM.", "url": "https://github.com/debezium/debezium/pull/1264#discussion_r383862543", "createdAt": "2020-02-25T12:59:21Z", "author": {"login": "gunnarmorling"}, "path": "debezium-embedded/src/test/java/io/debezium/embedded/EmbeddedEngineTest.java", "diffHunk": "@@ -149,6 +151,63 @@ public void shouldWorkToUseCustomChangeConsumer() throws Exception {\n         stopConnector();\n     }\n \n+    @Test\n+    public void shouldRunDebeziumEngine() throws Exception {\n+        // Add initial content to the file ...\n+        appendLinesToSource(NUMBER_OF_LINES);\n+\n+        final Properties props = new Properties();\n+        props.setProperty(\"name\", \"debezium-engine\");\n+        props.setProperty(\"connector.class\", \"org.apache.kafka.connect.file.FileStreamSourceConnector\");\n+        props.setProperty(StandaloneConfig.OFFSET_STORAGE_FILE_FILENAME_CONFIG, OFFSET_STORE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"offset.flush.interval.ms\", \"0\");\n+        props.setProperty(\"file\", TEST_FILE_PATH.toAbsolutePath().toString());\n+        props.setProperty(\"topic\", \"topicX\");\n+\n+        CountDownLatch firstLatch = new CountDownLatch(1);\n+        CountDownLatch allLatch = new CountDownLatch(6);\n+\n+        // create an engine with our custom class\n+        final DebeziumEngine<SourceRecord> engine = DebeziumEngine.create(SourceRecord.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ5MDIyNQ=="}, "originalCommit": {"oid": "3aaaa848ecefb3354a23993ade74ecff5eeb8981"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4406, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}