{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjc2NDgx", "number": 1731, "title": "DBZ-2225 Introduce MongoDB timeout configuration options", "bodyText": "https://issues.redhat.com/browse/DBZ-2225\nThis PR not only addresses allowing a shorter configuration for the SSL test timeout as described in the issue but it also exposes a way for users to customize 3 different timeouts based on their needs:\n\nserver.selection.timeout.ms\nconnect.timeout.ms\nsocket.timeout.ms", "createdAt": "2020-08-03T16:27:54Z", "url": "https://github.com/debezium/debezium/pull/1731", "merged": true, "mergeCommit": {"oid": "f3dbfdef3c3a8c70775ebf8f0ebecd97e2f521d9"}, "closed": true, "closedAt": "2020-08-05T07:13:45Z", "author": {"login": "Naros"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7UpL1ABqjM2MTY2OTExMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7swsAgH2gAyNDYyMjc2NDgxOjA0MTVmMjY4N2ZlZmI2N2RjZWIyMTRhMTcyZmQxNWEzZDExMzM3ZDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNjc0ODMz", "url": "https://github.com/debezium/debezium/pull/1731#pullrequestreview-460674833", "createdAt": "2020-08-04T10:05:49Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMDowNTo0OVrOG7Z3nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMDowNjo0OFrOG7Z5wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk0MzAwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    final int connectTimeoutMS = config.getInteger(MongoDbConnectorConfig.CONNECT_TIMEOUT_MS);\n          \n          \n            \n                    final int connectTimeoutMs = config.getInteger(MongoDbConnectorConfig.CONNECT_TIMEOUT_MS);\n          \n      \n    \n    \n  \n\nSame for others.", "url": "https://github.com/debezium/debezium/pull/1731#discussion_r464943005", "createdAt": "2020-08-04T10:05:49Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mongodb/src/main/java/io/debezium/connector/mongodb/ConnectionContext.java", "diffHunk": "@@ -63,6 +63,10 @@ public ConnectionContext(Configuration config) {\n         final boolean useSSL = config.getBoolean(MongoDbConnectorConfig.SSL_ENABLED);\n         final boolean sslAllowInvalidHostnames = config.getBoolean(MongoDbConnectorConfig.SSL_ALLOW_INVALID_HOSTNAMES);\n \n+        final int connectTimeoutMS = config.getInteger(MongoDbConnectorConfig.CONNECT_TIMEOUT_MS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk0MzU1Mw==", "bodyText": "Should we prefix the option names with \"mongodb.\", e.g. \"mongodb.connect.timeout.ms\"? Looks like we do that for the properties which are mostly through to the client builder.", "url": "https://github.com/debezium/debezium/pull/1731#discussion_r464943553", "createdAt": "2020-08-04T10:06:48Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mongodb/src/main/java/io/debezium/connector/mongodb/MongoDbConnectorConfig.java", "diffHunk": "@@ -308,6 +308,30 @@ public static SnapshotMode parse(String value, String defaultValue) {\n                     + \"'initial' (the default) to specify the connector should always perform an initial sync when required; \"\n                     + \"'never' to specify the connector should never perform an initial sync \");\n \n+    public static final Field CONNECT_TIMEOUT_MS = Field.create(\"connect.timeout.ms\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTMxMTI1", "url": "https://github.com/debezium/debezium/pull/1731#pullrequestreview-460931125", "createdAt": "2020-08-04T15:34:25Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNTozNDoyNlrOG7l9rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNTozNTowMlrOG7l_bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE0MTE2NA==", "bodyText": "Let's convert it to Duration right here. In general the approach should be to represent temporal data using the strong semantical types like Duration internally, and only convert from/to ms and other representations at the system boundaries.", "url": "https://github.com/debezium/debezium/pull/1731#discussion_r465141164", "createdAt": "2020-08-04T15:34:26Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mongodb/src/main/java/io/debezium/connector/mongodb/ConnectionContext.java", "diffHunk": "@@ -132,8 +143,11 @@ public String hosts() {\n         return config.getString(MongoDbConnectorConfig.HOSTS);\n     }\n \n-    public int pollPeriodInSeconds() {\n-        return config.getInteger(MongoDbConnectorConfig.POLL_INTERVAL_SEC);\n+    public long pollPeriodInMilliSeconds() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE0MTYxNQ==", "bodyText": "There should be a warning logged when using the old property name.", "url": "https://github.com/debezium/debezium/pull/1731#discussion_r465141615", "createdAt": "2020-08-04T15:35:02Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mongodb/src/main/java/io/debezium/connector/mongodb/ConnectionContext.java", "diffHunk": "@@ -132,8 +143,11 @@ public String hosts() {\n         return config.getString(MongoDbConnectorConfig.HOSTS);\n     }\n \n-    public int pollPeriodInSeconds() {\n-        return config.getInteger(MongoDbConnectorConfig.POLL_INTERVAL_SEC);\n+    public long pollPeriodInMilliSeconds() {\n+        if (config.hasKey(MongoDbConnectorConfig.MONGODB_POLL_INTERVAL_MS.name())) {\n+            return config.getLong(MongoDbConnectorConfig.MONGODB_POLL_INTERVAL_MS);\n+        }\n+        return TimeUnit.SECONDS.toMillis(config.getInteger(MongoDbConnectorConfig.POLL_INTERVAL_SEC));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24ab0fcd70983d42ee8cac36da2bd905d348487b", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/24ab0fcd70983d42ee8cac36da2bd905d348487b", "committedDate": "2020-08-04T15:53:34Z", "message": "DBZ-2225 Introduce MongoDB timeout configuration options\n\nThis adds configurable timeout options for:\n* server.selection.timeout.ms\n* connect.timeout.ms\n* socket.timeout.ms"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTU4NTc0", "url": "https://github.com/debezium/debezium/pull/1731#pullrequestreview-460958574", "createdAt": "2020-08-04T16:05:39Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjowNTozOVrOG7nQhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjowNTozOVrOG7nQhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE2MjM3NQ==", "bodyText": "I think we gave the new option precedence in case both are given in similar cases?", "url": "https://github.com/debezium/debezium/pull/1731#discussion_r465162375", "createdAt": "2020-08-04T16:05:39Z", "author": {"login": "gunnarmorling"}, "path": "debezium-connector-mongodb/src/main/java/io/debezium/connector/mongodb/ConnectionContext.java", "diffHunk": "@@ -132,8 +142,12 @@ public String hosts() {\n         return config.getString(MongoDbConnectorConfig.HOSTS);\n     }\n \n-    public int pollPeriodInSeconds() {\n-        return config.getInteger(MongoDbConnectorConfig.POLL_INTERVAL_SEC);\n+    public Duration pollInterval() {\n+        if (config.hasKey(MongoDbConnectorConfig.POLL_INTERVAL_SEC.name())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0be7cf2748c36ce41029b449e3023a9fe15ec64", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/e0be7cf2748c36ce41029b449e3023a9fe15ec64", "committedDate": "2020-08-04T16:27:37Z", "message": "DBZ-2400 Deprecate mongodb.poll.internval.sec for mongodb.poll.interval.ms"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "e0be7cf2748c36ce41029b449e3023a9fe15ec64", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/e0be7cf2748c36ce41029b449e3023a9fe15ec64", "committedDate": "2020-08-04T16:27:37Z", "message": "DBZ-2400 Deprecate mongodb.poll.internval.sec for mongodb.poll.interval.ms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "435c4d2a533a2d6f026f1fce2aedeadcaa5def3e", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/435c4d2a533a2d6f026f1fce2aedeadcaa5def3e", "committedDate": "2020-08-04T17:15:30Z", "message": "DBZ-2400 Change precedence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0415f2687fefb67dceb214a172fd15a3d11337d4", "author": {"user": {"login": "Naros", "name": "Chris Cranford"}}, "url": "https://github.com/debezium/debezium/commit/0415f2687fefb67dceb214a172fd15a3d11337d4", "committedDate": "2020-08-04T20:36:37Z", "message": "DBZ-2400 Fix test failures"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2548, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}