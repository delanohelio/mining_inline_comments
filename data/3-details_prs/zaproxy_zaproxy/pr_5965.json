{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMjQ3NTg1", "number": 5965, "title": "Add host, path and query columns to the history table", "bodyText": "resolve #5963\nI added 4 new columns to the history table: host name, path+query, path and query.\nAll the new columns are hidden by default.", "createdAt": "2020-05-01T18:36:28Z", "url": "https://github.com/zaproxy/zaproxy/pull/5965", "merged": true, "mergeCommit": {"oid": "bbe0272f79073e2dcb381f087f4f8844231a7205"}, "closed": true, "closedAt": "2020-05-08T21:37:56Z", "author": {"login": "DiogoMRSilva"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdF2X0AH2gAyNDEyMjQ3NTg1OjEyYmQyNzJjMjlkMDE3ZDRmM2UxM2JmYmM5OWM1Y2Q1NWQ3ZmJlNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfY42UgFqTQwODU0MjYwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61", "committedDate": "2020-05-01T18:18:48Z", "message": "Add host, path and query columns to the history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzQwNTQz", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-404340543", "createdAt": "2020-05-01T19:02:06Z", "commit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOTowMjowN1rOGPSvow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOTowNDowNlrOGPSy3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4ODkzMQ==", "bodyText": "Since these are basically all the same why not extract a private method and pass the column constant?\nPrinting the stack trace should be replaced with a logger.", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r418688931", "createdAt": "2020-05-01T19:02:07Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/DefaultHistoryReferencesTableEntry.java", "diffHunk": "@@ -120,6 +129,52 @@ public DefaultHistoryReferencesTableEntry(HistoryReference historyReference, Col\n \n         alertRiskCellItem = super.getHighestAlert();\n \n+        try {\n+            hostname1 =\n+                    hasColumn(sortedColumns, Column.HOSTNAME)\n+                            ? historyReference.getURI().getHost()\n+                            : null;\n+        } catch (URIException e) {\n+            hostname1 = null;\n+            e.printStackTrace();\n+        }\n+        hostname = hostname1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4OTc1Ng==", "bodyText": "Also is the intermediate storage necessary? (var vs var1)", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r418689756", "createdAt": "2020-05-01T19:04:06Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/DefaultHistoryReferencesTableEntry.java", "diffHunk": "@@ -120,6 +129,52 @@ public DefaultHistoryReferencesTableEntry(HistoryReference historyReference, Col\n \n         alertRiskCellItem = super.getHighestAlert();\n \n+        try {\n+            hostname1 =\n+                    hasColumn(sortedColumns, Column.HOSTNAME)\n+                            ? historyReference.getURI().getHost()\n+                            : null;\n+        } catch (URIException e) {\n+            hostname1 = null;\n+            e.printStackTrace();\n+        }\n+        hostname = hostname1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4ODkzMQ=="}, "originalCommit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzgxMDcw", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-404381070", "createdAt": "2020-05-01T20:22:52Z", "commit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMDoyMjo1MlrOGPUuyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMDoyMzoyMFrOGPUvcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcyMTQ4MQ==", "bodyText": "I'd expect these to be closer/next to the URL column by default (same in the enum).", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r418721481", "createdAt": "2020-05-01T20:22:52Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/parosproxy/paros/extension/history/HistoryTableModel.java", "diffHunk": "@@ -44,7 +44,11 @@ public HistoryTableModel() {\n                     Column.SIZE_RESPONSE_BODY,\n                     Column.HIGHEST_ALERT,\n                     Column.NOTE,\n-                    Column.TAGS\n+                    Column.TAGS,\n+                    Column.HOSTNAME,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcyMTU4OQ==", "bodyText": "Can let fall-through.", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r418721589", "createdAt": "2020-05-01T20:23:09Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/AbstractHistoryReferencesTableEntry.java", "diffHunk": "@@ -267,6 +303,14 @@ public static Object getPrototypeValue(Column column) {\n                 return String.class;\n             case CUSTOM:\n                 return null;\n+            case HOSTNAME:\n+                return String.class;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcyMTY0OA==", "bodyText": "This is not necessary for these columns.", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r418721648", "createdAt": "2020-05-01T20:23:20Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/HistoryReferencesTable.java", "diffHunk": "@@ -379,6 +379,11 @@ public void configureTableColumn(final TableModel model, final TableColumnExt co\n                     columnExt, hRefModel.getColumnIndex(Column.SIZE_RESPONSE_HEADER), model);\n             installSizeBytesRenderer(\n                     columnExt, hRefModel.getColumnIndex(Column.SIZE_RESPONSE_BODY), model);\n+            installSizeBytesRenderer(columnExt, hRefModel.getColumnIndex(Column.HOSTNAME), model);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12bd272c29d017d4f3e13bfbc99c5cd55d7fbe61"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb43ed101a538f9b4af064050c1c673085cddd13", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/eb43ed101a538f9b4af064050c1c673085cddd13", "committedDate": "2020-05-02T09:24:11Z", "message": "Fix the encoding of path and args that are show in history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebd3570f6622e1d12b664eb0a1f4f7861095ac05", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/ebd3570f6622e1d12b664eb0a1f4f7861095ac05", "committedDate": "2020-05-02T09:42:51Z", "message": "Reorder History table columns\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d98644b441900441b8519a1e8da3d1c63dda3282", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/d98644b441900441b8519a1e8da3d1c63dda3282", "committedDate": "2020-05-02T10:15:37Z", "message": "Remove path and args columns from history table to reduce memory usage\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}, "afterCommit": {"oid": "6c799dfcb48e6140a8fbed9a2b697bae18a57c24", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/6c799dfcb48e6140a8fbed9a2b697bae18a57c24", "committedDate": "2020-05-02T10:17:04Z", "message": "Remove path and args columns from history table to reduce memory usage\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "644eb8da4f9c38297aee37fec1c060a2c393ef77", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/644eb8da4f9c38297aee37fec1c060a2c393ef77", "committedDate": "2020-05-02T10:26:39Z", "message": "Fix the encoding of path and args that are show in history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c799dfcb48e6140a8fbed9a2b697bae18a57c24", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/6c799dfcb48e6140a8fbed9a2b697bae18a57c24", "committedDate": "2020-05-02T10:17:04Z", "message": "Remove path and args columns from history table to reduce memory usage\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}, "afterCommit": {"oid": "ab734821d7021173e465361f7ca1e82545c39f30", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/ab734821d7021173e465361f7ca1e82545c39f30", "committedDate": "2020-05-02T10:26:39Z", "message": "Fix the encoding of path and args that are show in history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab734821d7021173e465361f7ca1e82545c39f30", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/ab734821d7021173e465361f7ca1e82545c39f30", "committedDate": "2020-05-02T10:26:39Z", "message": "Fix the encoding of path and args that are show in history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}, "afterCommit": {"oid": "644eb8da4f9c38297aee37fec1c060a2c393ef77", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/644eb8da4f9c38297aee37fec1c060a2c393ef77", "committedDate": "2020-05-02T10:26:39Z", "message": "Fix the encoding of path and args that are show in history table\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjA2MDEw", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-404606010", "createdAt": "2020-05-03T10:59:05Z", "commit": {"oid": "644eb8da4f9c38297aee37fec1c060a2c393ef77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDo1OTowNVrOGPq-_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMDo1OTowNVrOGPq-_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NjA3Ng==", "bodyText": "Should use a logger", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r419086076", "createdAt": "2020-05-03T10:59:05Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/DefaultHistoryReferencesTableEntry.java", "diffHunk": "@@ -87,6 +91,20 @@ public DefaultHistoryReferencesTableEntry(HistoryReference historyReference, Col\n         rtt = hasColumn(sortedColumns, Column.RTT) ? historyReference.getRtt() : null;\n \n         uri = hasColumn(sortedColumns, Column.URL) ? historyReference.getURI().toString() : null;\n+        try {\n+            hostname1 =\n+                    hasColumn(sortedColumns, Column.HOSTNAME)\n+                            ? historyReference.getURI().getHost()\n+                            : null;\n+        } catch (URIException e) {\n+            hostname1 = null;\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "644eb8da4f9c38297aee37fec1c060a2c393ef77"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3f150d2d8a0a999523d2f2d24f80d8092de80e0", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/f3f150d2d8a0a999523d2f2d24f80d8092de80e0", "committedDate": "2020-05-03T11:49:56Z", "message": "Replace print stack trace with logger\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjEwMzQ1", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-404610345", "createdAt": "2020-05-03T11:51:32Z", "commit": {"oid": "f3f150d2d8a0a999523d2f2d24f80d8092de80e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMTo1MTozM1rOGPrXAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxMTo1MTozM1rOGPrXAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA5MjIyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        e.printStackTrace();", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r419092226", "createdAt": "2020-05-03T11:51:33Z", "author": {"login": "kingthorin"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/DefaultHistoryReferencesTableEntry.java", "diffHunk": "@@ -98,6 +101,7 @@ public DefaultHistoryReferencesTableEntry(HistoryReference historyReference, Col\n                             : null;\n         } catch (URIException e) {\n             hostname1 = null;\n+            LOGGER.error(e);\n             e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3f150d2d8a0a999523d2f2d24f80d8092de80e0"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08c09d25076a9569047e3453bdc5165d2aeb44e0", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/08c09d25076a9569047e3453bdc5165d2aeb44e0", "committedDate": "2020-05-03T11:54:36Z", "message": "Remove print stack trace\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjEwNzUw", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-404610750", "createdAt": "2020-05-03T11:55:45Z", "commit": {"oid": "08c09d25076a9569047e3453bdc5165d2aeb44e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDQyNTM0", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-406442534", "createdAt": "2020-05-06T09:26:31Z", "commit": {"oid": "08c09d25076a9569047e3453bdc5165d2aeb44e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToyNjozMlrOGRK2tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToyNjozMlrOGRK2tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NjgyMQ==", "bodyText": "This could be reverted.", "url": "https://github.com/zaproxy/zaproxy/pull/5965#discussion_r420656821", "createdAt": "2020-05-06T09:26:32Z", "author": {"login": "thc202"}, "path": "zap/src/main/java/org/zaproxy/zap/view/table/HistoryReferencesTableModel.java", "diffHunk": "@@ -58,7 +60,6 @@\n         HIGHEST_ALERT,\n         NOTE,\n         TAGS,\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08c09d25076a9569047e3453bdc5165d2aeb44e0"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "491db186fe9b89c5c21aea2018866c04650c2ba7", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/491db186fe9b89c5c21aea2018866c04650c2ba7", "committedDate": "2020-05-06T21:44:02Z", "message": "revert deleted line\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b036be0aeff850749fb57bf290815901ab064ebc", "author": {"user": null}, "url": "https://github.com/zaproxy/zaproxy/commit/b036be0aeff850749fb57bf290815901ab064ebc", "committedDate": "2020-05-06T21:59:34Z", "message": "Set host column of history encoded\n\nSigned-off-by: Diogo Silva <diogo.m.r.silva@tecnico.ulisboa.pt>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MzIxMDgy", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-407321082", "createdAt": "2020-05-07T09:54:30Z", "commit": {"oid": "b036be0aeff850749fb57bf290815901ab064ebc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTQyNjAw", "url": "https://github.com/zaproxy/zaproxy/pull/5965#pullrequestreview-408542600", "createdAt": "2020-05-08T21:37:33Z", "commit": {"oid": "b036be0aeff850749fb57bf290815901ab064ebc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 168, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}